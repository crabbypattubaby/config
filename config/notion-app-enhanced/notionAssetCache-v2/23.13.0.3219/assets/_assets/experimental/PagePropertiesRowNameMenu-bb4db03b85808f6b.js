"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[1423,11097,90871],{24281:(e,t,o)=>{o.d(t,{B:()=>g});o(242343);var r=()=>o(237385),n=()=>o(803290),i=()=>o(174114),a=()=>o(653998),l=()=>o(220413),s=()=>o(76394),c=()=>o(31448),u=()=>o(678523),d=()=>o(103151),p=()=>o(907721),m=()=>o(485966),y=()=>o(943066),f=o(163643);function g(e){let{upsell:t,mobileStyle:o,desktopStyle:g,analyticsName:v,onClick:h,disableTooltip:b}=e;const _=(0,i().DP)(),x=(0,r().v3)(),{device:M}=x,S=(0,n().K8)((()=>{const{currentSpaceStore:e}=m().default.state;return null==e?void 0:e.canAdmin()}),[]),A=(0,n().K8)((()=>function(e,t){if("product"!==e.type)return{};switch(e.product){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?l().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:c().Wy.medium};default:return{}}}(t,_)),[t,_]);if("product"!==t.type)return null;if(M.isMobileNative)return null;const w=(()=>{switch(t.product){case"personal":return(0,f.jsx)(a().sA,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"});case"plus":return(0,f.jsx)(a().sA,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"});case"business":return(0,f.jsx)(a().sA,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"});case"enterprise":return(0,f.jsx)(a().sA,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"});case"ai":return(0,f.jsx)(a().sA,{defaultMessage:"AI ↗",id:"upgradeButton.ai.textWithArrow"});case"sites_custom_hostnames":return(0,f.jsx)(a().sA,{defaultMessage:"Custom Hostnames ↗",id:"upgradeButton.sites_custom_hostnames.textWithArrow"});default:t.product,(0,s().HB)(t.product)}})();return M.isMobile||!S?(0,f.jsx)(u().A,{mobileStyle:o,children:w}):(0,f.jsx)(d().A,{delayThreshold:120,disableTooltip:b,placement:p().W.Bottom,renderTooltip:()=>(0,f.jsx)("div",{style:{maxWidth:500},children:(0,f.jsx)(a().sA,{defaultMessage:"Upgrade to use this feature.",id:"premiumFeatureUpgradeButton.upgrade.tooltip"})}),originGap:6,render:e=>(0,f.jsx)(u().A,{desktopStyle:g,innerStyle:A,onClick:e=>function(e,t,o,r,n){y().K(r,{from:t,upsell:o}),n&&n(e)}(e,v,t,x,h),...e,children:w})})}},44250:(e,t,o)=>{function r(e){return!(!e||"askUserToPick"in e)}function n(e){if(!e||!("askUserToPick"in e))return e}function i(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}o.d(t,{DK:()=>n,K$:()=>r,j6:()=>i})},44405:(e,t,o)=>{o.d(t,{A:()=>p});o(242343);var r=()=>o(862510),n=()=>o(174114),i=()=>o(650199),a=()=>o(711361),l=()=>o(31448),s=()=>o(535906),c=()=>o(397791),u=()=>o(581344),d=o(163643);function p(e){const{icon:t,iconStyle:o,title:p,caption:m,right:y,rightStyle:f,isRed:g,isGray:v,isOrange:h,onClick:b,onMouseDown:_,onMouseEnter:x,onMouseLeave:M,disabled:S,showChevron:A,chevronStyle:w,rotateChevron:C,showDragHandle:I,focused:k,textWrapperStyle:T,shouldWrapCaption:P,desktopIconStyle:j,buttonStyle:O,desktopTitleStyle:D,source:B,menuListItemProps:V}=e,E=(0,u().y$)(),R=(0,n().IS)((e=>({style:{color:v?e.text.secondary:h?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.text.primary,fill:v?e.mediumIconColor:h?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:S?.4:void 0,...O},leftIconStyle:{width:E,height:E,...t===a()._&&{height:3},...o},rightStyle:{display:"flex",alignItems:"center",color:S?e.text.primary:e.text.tertiary,fill:S?e.regularIconColor:e.lightIconColor,flexShrink:0,...f},rightChevronStyle:{marginLeft:"tableHeaderMenu"===B?0:6,transition:"transform 200ms ease-in-out",...C&&{transform:"rotate(90deg)"},...w}})),[v,h,S,o,t,w,f,O,E,C,B]),{itemRef:W,isTabbable:H,onKeyDown:N,onFocus:F}=(0,r().e)();return(0,d.jsx)(s().A,{ref:W,icon:null==t?void 0:t(R.leftIconStyle),focused:k||!1,disabled:S,title:p,caption:m,shouldWrapCaption:P,desktopTitleStyle:{flexGrow:1,flexShrink:1,...D},onKeyDown:N,onFocus:F,disallowTabbing:!H,showDragHandle:I,buttonStyle:R.style,rightStyle:R.rightStyle,isRedOnHover:g,ignoreLocalHoverState:!!S||void 0,right:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{...l().RC,display:"flex"},children:y}),!S&&A&&(0,d.jsx)(c().I,{icon:i().x,size:"sm",color:"tableHeaderMenu"===B?"secondary":"tertiary",style:R.rightChevronStyle})]}),onClick:b,onMouseDown:_,onMouseEnter:x,onMouseLeave:M,textWrapperStyle:T,desktopIconStyle:j,...V})}},96718:(e,t,o)=>{o.d(t,{l:()=>i});var r=()=>o(706788);const n={[r().e1]:"collection_connected_property_figma",[r().Hd]:"collection_connected_property_google_drive",[r().ob]:"collection_connected_property_github",[r().k0]:"collection_connected_property_zendesk",[r().bh]:"collection_synced_database_github",[r().MN]:"collection_synced_database_asana",[r().Fo]:"collection_synced_database_gitlab",[r().me]:"collection_synced_database_jira",[r().F6]:"collection_synced_database_jira_workspace",[r().Fv]:"collection_synced_database_jira_datacenter"};function i(e){if(e)return n[e]}},99949:(e,t,o)=>{o.d(t,{e:()=>i});o(242343);var r=o(163643);const n={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"m4.897 3.086-.122-.143a.625.625 0 0 0-.95.814l1.347 1.57c-1.762.91-3.195 2.304-4.083 3.997a1.47 1.47 0 0 0 0 1.362c1.61 3.07 5.011 5.155 8.911 5.155 1.282 0 2.51-.225 3.637-.637l1.588 1.853a.625.625 0 0 0 1.042-.67L4.989 3.229a.6.6 0 0 1-.093-.143M2.194 9.905c.807-1.538 2.15-2.807 3.816-3.599L7.4 7.928a3.326 3.326 0 0 0 4.252 4.961l1.107 1.292a9.4 9.4 0 0 1-2.76.41c-3.459 0-6.42-1.848-7.805-4.486a.22.22 0 0 1 0-.2m6.696.097q0-.151.039-.29l1.194 1.393q-.06.007-.124.007a1.11 1.11 0 0 1-1.109-1.11m7.012 4.038a9.4 9.4 0 0 0 3.01-3.354 1.47 1.47 0 0 0 0-1.362C17.302 6.254 13.9 4.169 10 4.169c-.805 0-1.588.089-2.339.257l.94 1.096a9.5 9.5 0 0 1 1.4-.103c3.458 0 6.42 1.848 7.804 4.486a.22.22 0 0 1 0 .2 8.14 8.14 0 0 1-2.722 2.98z"}),(0,r.jsx)("path",{d:"M13.205 10.893a3.33 3.33 0 0 0-3.596-4.194z"})]})},i=(0,o(680369).wt)("eyeSlash",n)},113805:(e,t,o)=>{o.d(t,{E:()=>v,UQ:()=>h});o(610931),o(358848),o(362833),o(91270);var r=()=>o(543396),n=()=>o(769884),i=()=>o(33715),a=()=>o(314058),l=()=>o(220865),s=()=>o(846287),c=()=>o(611758),u=()=>o(444701),d=()=>o(946854),p=()=>o(975392),m=()=>o(76394),y=()=>o(84543),f=()=>o(760813),g=()=>o(272690);function v(e){const{moduleId:t,layoutStore:o,sessionId:n,environment:a,position:l}=e,s=o.getModuleById(t);if(!s)throw new Error(`Cannot move module with id ${t} because a module with that id is not in the layout`);const c=(0,g().TR)({modulesByArea:o.getModules(),moduleId:t,newPosition:l});b({...e,module:s,userAction:"BuilderLayoutModules.moveModuleToPosition",afterUpsertTransaction:()=>{var e;const t=(0,r().Cg)({moduleId:s.id,modulesByArea:o.getModules()}).length;(0,g().Ib)({environment:a,sessionId:n,collectionId:null===(e=o.getCollectionModel())||void 0===e?void 0:e.id,layoutId:o.id,context:(0,i().We)(l.area),action:c,moduleType:s.type,area:l.area,depth:t})}})}function h(e){const{position:t,module:o,layoutStore:n,sessionId:a,environment:l}=e;if(n.getModuleById(o.id))throw new Error(`Cannot add module with id ${o.id} because a module with that id is already in the layout`);b({...e,userAction:"BuilderLayoutModules.addModuleAtPosition",performBeforeApplyUpsertOperations:e=>{const{transaction:r}=e;"page_main"!==t.area&&"page_details"!==t.area||(0,d().gx)(o)&&(0,f().HD)({environment:l,transaction:r,layoutStore:n,property:o.propertyId})},afterUpsertTransaction:()=>{var s;const c=(0,r().Cg)({moduleId:o.id,modulesByArea:n.getModules()}).length;(0,g().zb)({environment:l,module:o,sessionId:a,collectionId:null===(s=n.getCollectionModel())||void 0===s?void 0:s.id,layoutId:n.id,context:(0,i().We)(t.area),isPropertyCreation:e.isPropertyCreation,area:t.area,depth:c})}})}function b(e){const{environment:t,position:o,layoutStore:r,module:u,transaction:d,userAction:p,performBeforeApplyUpsertOperations:f,afterUpsertTransaction:g}=e,v=r.pointer,h=r.getModules(),b=r.getRawModules(),S=b&&(0,s().c7)(b,(e=>e.id===u.id))||(0,l().Lv)(u),A="page_main"===o.area||"page_details"===o.area?function(e){const{layoutPointer:t,modulesByArea:o,rawModulesByArea:r}=e,a=(0,s().EX)(o,(e=>"relationsGroup"===e.type));if("form_conditional_modules"===(null==a?void 0:a.position.area))return;const c=r&&(0,s().LC)(r,(e=>"relationsGroup"===e.type));if(!a)return;if(a&&c)return;const u=a.module;if(!u||"relationsGroup"!==u.type)throw new Error("relations group module location in normalized was incorrect, cannot backfill relations group module");return function(e){var t;const{module:o,modulesByArea:r,layoutPointer:a}=e,c=(0,s().JO)(r,(e=>e.id===o.id));if(!c)throw new Error("cannot upsert module at current position because module does not have a current position");if("form_conditional_modules"===c.area)throw new Error("[Forms Conditional Logic Not Implemented] form_conditional_modules area is not supported for adding and moving modules");const u="views_main_tab_modules"===c.area?null===(t=r.views_main_tab_modules)||void 0===t?void 0:t[c.viewId]:r[c.area];if(!u||0===u.length)throw new Error("cannot upsert module at current position in area because that area is empty");const d={module:(0,l().Lv)(o),pointer:a,..."views_main_tab_modules"===c.area?{area:i().Zm[c.area],viewId:c.viewId}:{area:i().Zm[c.area]}};if(0===c.index)return n().N4X.putModuleAfter({...d,afterId:void 0});const p=u.at(c.index+1);if(!p)return n().N4X.putModuleAfter({...d,afterId:void 0});return n().N4X.putModuleBefore({...d,beforeId:p.id})}({module:u,layoutPointer:t,modulesByArea:o})}({layoutPointer:v,modulesByArea:h,rawModulesByArea:b}):null;A&&y().createAndCommitOrAppend({environment:t,perform:e=>{y().applyOperation({transaction:e,store:r,operation:A})},canUndo:!0,transaction:d,userAction:`${p||"BuilderLayoutModules.upsert"}.preOpBackfill`});const w=[],C=function(e){const{layoutStore:t,module:o,upsertPosition:r}=e,a=t.getModules(),l=(0,s().JO)(a,(e=>o.id===e.id));if(!l)return;if("form_conditional_modules"===l.area)return n().N4X.deleteModuleInArea({pointer:t.pointer,area:l.area,moduleId:o.id});if("views_main_tab_modules"===l.area){const e="absolute"===r.type&&"views_main_tab_modules"===r.area?r.viewId:void 0,i=l.viewId;if(e===i)return;return n().N4X.deleteModuleInArea({pointer:t.pointer,area:l.area,moduleId:o.id,viewId:i})}if("page_main"===l.area||"page_details"===l.area||"form_layout_schema"===l.area||"person_profile_page_main"===l.area||"person_profile_page_details"===l.area){if(l.area===r.area)return;return n().N4X.deleteModuleInArea({pointer:t.pointer,area:i().Zm[l.area],moduleId:o.id})}(0,m().HB)(l.area)}({upsertPosition:o,module:u,layoutStore:r});C&&w.push(C);const I=function(e){const{upsertPosition:t,layoutPointer:o,modulesByArea:r,rawModuleToUpsert:l}=e;if("absolute"===t.type)return function(e){const{upsertPosition:t,rawModuleToUpsert:o,layoutPointer:r,modulesByArea:l}=e,u=(0,s().JO)(l,(e=>o.id===e.id)),{area:d}=t;if("form_conditional_modules"===d){const{parentConditionalGroupId:e,parentModuleId:i}=t;if(!(0,c().V)(o,"form_conditional_modules"))throw new Error("Can only add form question or placeholder modules to form_conditional_modules area.");const u=(0,s().Ib)({modulesByArea:l,find:e=>e.id===o.parentModuleId}),d=(0,a().A)(i,l);return n().N4X.upsertChildModule({pointer:r,module:o,previousParentModuleAndArea:u,newParentModule:{area:d.area,module:d.module,conditionalGroupId:e,index:t.index},modulesByArea:l})}const p=t.index;if(p<0)throw new Error(`Cannot upsert module with id ${o.id} to a negative position`);if("views_main_tab_modules"===d){const e=t.viewId;if(!l[d]||!l[d][e])throw new Error("Cannot upsert module into views_main_tab_modules area that does not have views");const a="views_main_tab_modules"===(null==u?void 0:u.area)&&(null==u?void 0:u.viewId)===e?u.index:void 0,s=_({modulesInArea:l[d][e],indexOfModuleToUpsertInArea:a,indexToUpsertTo:p});if(!s)return;return[n().N4X.putModuleBeforeOrAfter({pointer:r,area:i().Zm[d],viewId:e,module:o,direction:s.insertDirection,beforeOrAfterId:s.beforeOrAfterId})]}const m=l[d],y=(null==u?void 0:u.area)===d?u.index:void 0,f=_({modulesInArea:m,indexOfModuleToUpsertInArea:y,indexToUpsertTo:p});if(!f)return;return[n().N4X.putModuleBeforeOrAfter({pointer:r,area:i().Zm[d],module:o,direction:f.insertDirection,beforeOrAfterId:f.beforeOrAfterId})]}({upsertPosition:t,rawModuleToUpsert:l,layoutPointer:o,modulesByArea:r});if("module_relative"===t.type)return[x({upsertPosition:t,rawModuleToUpsert:l,layoutPointer:o,modulesByArea:r})];if("area_relative"===t.type)return[M({upsertPosition:t,rawModuleToUpsert:l,layoutPointer:o,modulesByArea:r})];(0,m().HB)(t)}({module:u,upsertPosition:o,modulesByArea:h,layoutPointer:v,rawModuleToUpsert:S});I&&w.push(...I);const k="placeholder"===u.type&&"form_layout_schema"===o.area?`form_layout_new_question_${u.id}`:void 0;y().createAndCommitOrAppend({environment:t,undoCheckpoint:k,canUndo:!0,perform:e=>{f&&f({transaction:e});for(const t of w)y().applyOperation({transaction:e,store:r,operation:t})},transaction:d,userAction:p||"BuilderLayoutModules.upsert"}),g&&g()}function _(e){const{modulesInArea:t,indexOfModuleToUpsertInArea:o,indexToUpsertTo:r}=e;if(0===r||0===t.length)return{insertDirection:"before",beforeOrAfterId:void 0};const n=t.at(r);return n?void 0===o?{insertDirection:"before",beforeOrAfterId:n.id}:o!==r?o<r?{insertDirection:"after",beforeOrAfterId:n.id}:{insertDirection:"before",beforeOrAfterId:n.id}:void 0:{insertDirection:"after",beforeOrAfterId:void 0}}function x(e){const{upsertPosition:t,rawModuleToUpsert:o,layoutPointer:r,modulesByArea:a}=e,{area:l,direction:c,relativeToModuleId:u}=t,d=i().Zm[l],p=(0,s().JO)(a,(e=>e.id===u));if(!p||p.area!==l)throw new Error(`Cannot find module with id: ${u} to add upsert relative to in ${l}`);if("views_main_tab_modules"===d){const e="views_main_tab_modules"===p.area?p.viewId:void 0;if(!e)throw new Error("Cannot upsert module into views_main_tab_modules area that does not have views");return n().N4X.putModuleBeforeOrAfter({pointer:r,area:"views_main_tab_modules",viewId:e,module:o,direction:"above"===c?"before":"after",beforeOrAfterId:u})}return n().N4X.putModuleBeforeOrAfter({pointer:r,area:d,module:o,direction:"above"===c?"before":"after",beforeOrAfterId:u})}function M(e){const{upsertPosition:t,rawModuleToUpsert:o,layoutPointer:r,modulesByArea:a}=e,{location:l}=t;if("views_main_tab_modules"===t.area){const e=t.viewId,c={pointer:r,area:i().Zm[t.area],viewId:e,module:o};if("start"===l||"end"===l)return n().N4X.putModuleBeforeOrAfter({...c,direction:"start"===l?"before":"after",beforeOrAfterId:void 0});if("end_moveable"===l){var s;const e=S({area:t.area,modulesInArea:(null===(s=a.views_main_tab_modules)||void 0===s?void 0:s[t.viewId])??[]});return n().N4X.putModuleBeforeOrAfter({...c,direction:e.insertDirection,beforeOrAfterId:e.beforeOrAfterId})}(0,m().HB)(l)}const c={pointer:r,area:i().Zm[t.area],module:o};if("start"===l||"end"===l)return n().N4X.putModuleBeforeOrAfter({...c,direction:"start"===l?"before":"after",beforeOrAfterId:void 0});if("end_moveable"===l){const e=a[t.area],o=S({area:t.area,modulesInArea:e});return n().N4X.putModuleBeforeOrAfter({...c,direction:o.insertDirection,beforeOrAfterId:o.beforeOrAfterId})}(0,m().HB)(l)}function S(e){const{area:t,modulesInArea:o}=e,{nonMoveableHeaderModules:r,moveableModules:n,nonMoveableFooterModules:i}=(0,u().jS)(t,o);if(n.length){const e=(0,p().HV)(n);if(!e)throw new Error("cannot find last moveable module to add below for end moveable");return{insertDirection:"after",beforeOrAfterId:e.id}}if(r.length){const e=(0,p().HV)(r);if(!e)throw new Error("cannot find last header module to add below for end moveable");return{insertDirection:"after",beforeOrAfterId:e.id}}if(i.length){const e=i.at(0);if(!e)throw new Error("cannot find last header module to add below for end moveable");return{insertDirection:"before",beforeOrAfterId:e.id}}return{insertDirection:"after",beforeOrAfterId:void 0}}},130935:(e,t,o)=>{o.d(t,{_:()=>n});o(242343);var r=o(163643);const n=(0,o(680369).wt)("layout",{viewBox:"0 0 14 14",svg:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.19999C2.28953 2.19999 2.19999 2.28953 2.19999 2.39998V11.5999C2.19999 11.7103 2.28953 11.7999 2.39999 11.7999H4.99997C5.11042 11.7999 5.19997 11.7103 5.19997 11.5999V2.39998C5.19997 2.28953 5.11042 2.19999 4.99997 2.19999H2.39999ZM1 2.39998C1 1.6268 1.62679 1 2.39999 1H4.99997C5.77316 1 6.39995 1.6268 6.39995 2.39998V11.5999C6.39995 12.3731 5.77316 12.9999 4.99997 12.9999H2.39999C1.62679 12.9999 1 12.3731 1 11.5999V2.39998ZM9 8.80036C8.88954 8.80036 8.8 8.88991 8.8 9.00036V11.6003C8.8 11.7108 8.88954 11.8003 9 11.8003H11.6C11.7105 11.8003 11.8 11.7108 11.8 11.6003V9.00036C11.8 8.88991 11.7105 8.80036 11.6 8.80036H9ZM7.60001 9.00036C7.60001 8.22717 8.2268 7.60037 9 7.60037H11.6C12.3731 7.60037 13 8.22717 13 9.00036V11.6003C13 12.3736 12.3731 13.0003 11.6 13.0003H9C8.2268 13.0003 7.60001 12.3736 7.60001 11.6003V9.00036ZM8.79994 2.39998C8.79994 2.28953 8.88949 2.19999 8.99994 2.19999H11.5999C11.7104 2.19999 11.7999 2.28953 11.7999 2.39998V4.99997C11.7999 5.11043 11.7104 5.19996 11.5999 5.19996H8.99994C8.88949 5.19996 8.79994 5.11043 8.79994 4.99997V2.39998ZM8.99994 1C8.22675 1 7.59995 1.6268 7.59995 2.39998V4.99997C7.59995 5.77316 8.22675 6.39995 8.99994 6.39995H11.5999C12.3731 6.39995 12.9999 5.77316 12.9999 4.99997V2.39998C12.9999 1.6268 12.3731 1 11.5999 1H8.99994Z"})})},137696:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>a,x2:()=>n});var r=()=>o(76394);function n(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,r().O9)(t)&&n(t.type)}function a(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,r().HB)(e)}},151602:(e,t,o)=>{o.d(t,{A:()=>i});class r extends(()=>o(129044))().default{getInitialState(){return{}}}const n=new r;o(996094).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",n);const i=n},155342:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,questionMarkCircleIcon:()=>i});o(242343);var r=o(163643);const n={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,r.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},i=(0,o(680369).wt)("questionMarkCircle",n)},158918:(e,t,o)=>{o.d(t,{A:()=>m});o(362833),o(725707),o(771702),o(403517);var r=o(242343),n=()=>o(237385),i=()=>o(975392),a=()=>o(640979),l=()=>o(273520),s=()=>o(935091),c=()=>o(858023),u=()=>o(743668),d=()=>o(88271),p=o(163643);const m=function(e){let{renderOrigin:t,onClick:r,items:i,getKey:a,renderItem:s,selectedItem:c,onSelect:u,dontCloseParentOnSelect:d,mobileActionSheet:m,menuTitle:y,width:g,minWidth:v,disabled:h,originGap:b,buttonPopupStore:_,sameWidthAsOrigin:x}=e;const M=(0,n().v3)(),S=(0,o(803290).uB)(_,o(962373).A),{device:A}=M,w=(0,o(622286).X)("db_ux_mobile");return(0,p.jsx)(l().Ay,{popupType:A.isMobile?w?l().z7.BottomSheet:l().z7.SlideUp:l().z7.Popup,bottomSheetInitialState:"half",renderOrigin:t,buttonPopupStore:S,placementToOrigin:o(755769).UV.Bottom,onClick:r,render:e=>(0,p.jsx)(f,{parent:e,items:i,getKey:a,renderItem:s,selectedItem:c,onSelect:u,dontCloseParentOnSelect:d,mobileActionSheet:m,menuTitle:y,width:g,minWidth:v}),disabled:h,originGap:b,sameWidthAsOrigin:x})};function y(e,t,o,n,i,a,l,s){return{key:0,render:e=>(0,r.createElement)(d().A,{...e,key:t,topBorder:t>0}),items:e.map((e=>({key:n(e),render:t=>i({...t,value:e,key:n(e),selectedItem:a}),action:()=>{!function(e,t,o){t!==e&&o(e)}(e,a,l),s||o.close()}})))}}function f(e){let{parent:t,items:o,getKey:r,renderItem:l,selectedItem:d,onSelect:m,dontCloseParentOnSelect:f,mobileActionSheet:g,menuTitle:v,width:h,minWidth:b}=e;const _=(0,n().v3)(),{device:x}=_,M=[];if(function(e){return e.length>0&&e[0]instanceof Array}(o))o.forEach(((e,o)=>{const n=y(e,o,t,r,l,d,m,f);M.push(n)}));else{const e=y(o,0,t,r,l,d,m,f);M.push(e)}const S=(0,p.jsx)(c().Ay,{type:c().Oh.Vertical,initialFocus:i().SL(i().Bq(o),(e=>i().n4(e,d))),sections:M});let A;return A=x.isMobile?g?{menuType:a().gu.ActionSheet}:{menuType:a().gu.Modal,title:v,right:(0,p.jsx)(u().DoneMenuText,{}),onClickRight:t.close}:{menuType:a().gu.Popup,width:h||160,minWidth:b},(0,p.jsx)(s().A,{...A,children:S})}},194585:(e,t,o)=>{o.d(t,{n:()=>A,z:()=>M});o(610931),o(242343);var r=()=>o(803290),n=()=>o(174114),i=()=>o(505966),a=()=>o(73658),l=()=>o(916963),s=()=>o(758989),c=()=>o(242978),u=()=>o(584044),d=()=>o(130935),p=()=>o(40642),m=()=>o(76394),y=()=>o(511441),f=()=>o(327665),g=()=>o(622286),v=()=>o(328653),h=()=>o(940445),b=o(163643);const _=16;function x(e){let{icon:t,theme:o,size:r,style:i}=e;const l=(0,n().IS)((e=>({icon:{fill:(0,v().d)(t,e).icon.primary,...i}})),[t,i]);return(0,b.jsx)(a().p,{icon:t,theme:o,size:r,style:l.icon})}function M(e){var t;let{template:o,size:r,iconStyle:a}=e;const l=r??_,f=(0,n().IS)((()=>({icon:{width:l,height:l,...a}})),[l,a]),g=(0,n().DP)();if((0,i().cB)(o.templateId))return(0,u().L)(f.icon);const{type:v}=o;switch(v){case"property":return(0,b.jsx)(S,{template:o,iconSize:l,styles:f});case"collection_view":return(0,b.jsx)(y().h,{viewIcon:null===(t=o.value.format)||void 0===t?void 0:t.collection_view_icon,viewType:o.value.type,color:"lightGray",style:f.icon});case"layout":return(0,b.jsx)(b.Fragment,{children:(0,d()._)(f.icon)});case"block":return(0,b.jsx)(b.Fragment,{children:(0,p().b)(f.icon)});case"collection":case"compound":const e="collection"===o.type?o.value.targetCollection.icon:o.icon;if(!(0,s().T8)(e))throw new Error("Only Notion static icons are allowed for template icons");return(0,b.jsx)(x,{icon:e,theme:g,size:l,style:f.icon});case"automation":return(0,b.jsx)(b.Fragment,{children:(0,c().v)(f.icon)});default:(0,m().HB)(v)}}function S(e){let{template:t,iconSize:o,styles:i}=e;const a=(0,n().DP)(),s=(0,g().X)("nds_default_property_noticon"),c=(0,r().K8)((()=>{const{relatedCollectionTemplateId:e}=t;if("relation"===t.value.type&&e){return h().globalWorkflowTemplates.fromIdOfType({templateId:e,type:"collection"}).value.targetCollection.icon}return t.value.icon}),[t]);return(0,b.jsx)(l().zB,{type:t.value.type,icon:c,size:o,style:i.icon,theme:a,isDefaultNoticonEnabled:s})}function A(e){let{template:t,backgroundSize:o}=e;const r=(0,n().IS)((e=>({iconContainer:{background:w({theme:e,template:t})[30]},icon:{fill:w({theme:e,template:t})[400]}})),[t]);return(0,b.jsx)(f().y,{backgroundColor:r.iconContainer.background,backgroundSize:o,icon:(0,b.jsx)(M,{template:t,iconStyle:r.icon})})}function w(e){let{theme:t,template:o}=e;const{type:r}=o;switch(r){case"collection_view":case"automation":return t.accentColors.blue;case"property":return"relation"===o.value.type?t.accentColors.yellow:t.accentColors.red;case"layout":return t.accentColors.orange;case"block":return t.accentColors.purple;case"compound":return t.accentColors.green;case"collection":return t.accentColors.pink;default:(0,m().HB)(r)}}},235786:(e,t,o)=>{o.d(t,{b:()=>g,w:()=>v});var r=()=>o(237385),n=()=>o(803290),i=()=>o(367950),a=()=>o(162901),l=()=>o(528762),s=()=>o(439154),c=()=>o(818369),u=()=>o(129978),d=()=>o(485966),p=()=>o(595922),m=()=>o(172470),y=()=>o(151602);const f=!1;function g(e){var t;const o=null===(t=(0,u().fJ)(s().xl).value)||void 0===t?void 0:t.loadWorkflowTemplateInstances;(0,n().K8)((()=>{if(!o)return;const t=e instanceof p().A?e.collectionStore():e;t&&o(t)}),[o,e])}function v(){const e=(0,r().v3)(),t=(0,n().K8)((()=>{var e;if(function(){const e=m().A.state.initialRenderCompleted;f&&!e&&console.log("Initial page render is not yet completed, delaying refresh of workflow template instances.");return e}())return null===(e=d().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,a().Yb)((async()=>{if(!t)return;(y().A.debug||f)&&console.log("Refreshing workflow template instance map for space",t);const o={table:l().NX,id:t,spaceId:t},r=await c().callApi({eventName:"getWorkflowTemplateInstances",environment:e,data:{spaceId:o.spaceId,scopeTable:o.table,scopeId:o.id,enableInstanceRobustness:!0}});if("success"===r.type){const e=(0,i()._)(o);y().A.setState({...y().A.state,[e]:r.data.instanceMap[e]})}}),[e,t])}},242978:(e,t,o)=>{o.d(t,{v:()=>n});o(242343);var r=o(163643);const n=(0,o(680369).wt)("boltFilled",{svg:(0,r.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},271142:(e,t,o)=>{o.d(t,{EC:()=>M,To:()=>x,YC:()=>S,or:()=>_,u:()=>b});o(610931);var r=o(242343),n=()=>o(237385),i=()=>o(803290),a=()=>o(496985),l=()=>o(232312),s=()=>o(653998),c=()=>o(76394),u=()=>o(337658),d=()=>o(73631),p=()=>o(137696),m=()=>o(129978),y=()=>o(113800),f=()=>o(830925),g=o(163643);const v=new WeakMap,h=(0,r.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});h.displayName="AutomationContext";function b(e){const{automationStore:t,children:o,contextType:r}=e,b=(0,n().v3)(),_=(0,s().tz)(),{value:x}=(0,m().fJ)(d().T.formulas),{value:M}=(0,m().fJ)(u().QV.automationTypecheck),S=(0,f().n)(t),A=(0,i().K8)((()=>{if(!x)return{error:new(l().N9)("Missing formulas dependency")};if(!M)return{error:new(l().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:r,contextType:n,formulasModule:i,intl:l,isSubscribed:s}=e,u=v.get(o);if(u)return u;{const e=new(a().default)((()=>{const e=o.getTriggerType();let a=n;return(0,c().O9)(e)&&(0,p().x2)(e)&&(a=(0,p().H8)(e)),(0,y().Z)({environment:t,automationStore:o,automationTypecheckModule:r,contextType:a,formulasModule:i,intl:l,isSubscribed:s})}),{debugName:"automationContextTypecheckResultCachedStore"});return v.set(o,e),e}}({environment:b,automationStore:t,automationTypecheckModule:M,contextType:r,formulasModule:x,intl:_,isSubscribed:S});return e.state}),[b,t,M,r,x,_,S]);return(0,g.jsx)(h.Provider,{value:{automationStore:t,typecheckResult:A,contextType:r,defined:!0},children:o})}function _(e){const{automationStore:t,children:o}=e,r=(0,i().K8)((()=>{var e;return null===(e=t.getTrigger())||void 0===e?void 0:e.type}),[t]);return(0,g.jsx)(b,{automationStore:t,contextType:(0,p().H8)(r??"event"),children:o})}function x(e){var t;return null===(t=v.get(e))||void 0===t?void 0:t.state}function M(){const e=r.useContext(h);if(!1===e.defined)throw new Error("No automation context found!");return e}function S(){return r.useContext(h)}},280704:(e,t,o)=>{o.d(t,{b:()=>n});o(242343);var r=o(163643);const n=(0,o(680369).wt)("plusThick",{viewBox:"0 0 14 14",svg:(0,r.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},327665:(e,t,o)=>{o.d(t,{y:()=>i});o(242343);var r=()=>o(174114),n=o(163643);function i(e){let{icon:t,backgroundColor:o,backgroundSize:i}=e;const a=(0,r().IS)((e=>({iconContainer:{height:i??28,width:i??28,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",background:o??e.tint.regular}})),[o,i]);return(0,n.jsx)("div",{style:a.iconContainer,children:t})}},328653:(e,t,o)=>{o.d(t,{d:()=>i});var r=()=>o(758989);const n={light:{gray:{stroke:{secondary:"rgba(84, 72, 49, 0.15)"},fill:{primary:"rgba(84, 72, 49, 0.15)",secondary:"rgba(84, 72, 49, 0.08)",tertiary:"rgba(84, 72, 49, 0.04)"},text:{primary:"#1D1B16"}},red:{stroke:{secondary:"rgba(244, 171, 159, 0.40)"},fill:{primary:"rgba(244, 171, 159, 0.40)",secondary:"rgba(244, 171, 159, 0.40)",tertiary:"rgba(243, 136, 118, 0.07)"},text:{primary:"#5D1715"}},brown:{stroke:{secondary:"rgba(210, 162, 141, 0.35)"},fill:{primary:"rgba(210, 162, 141, 0.35)",secondary:"rgba(210, 162, 141, 0.17)",tertiary:"rgba(210, 162, 141, 0.07)"},text:{primary:"#442A1E"}},orange:{stroke:{secondary:"rgba(224, 124, 57, 0.27)"},fill:{primary:"rgba(224, 124, 57, 0.27)",secondary:"rgba(224, 124, 57, 0.15)",tertiary:"rgba(224, 124, 57, 0.07)"},text:{primary:"#49290E"}},yellow:{stroke:{secondary:"rgba(236, 191, 66, 0.39)"},fill:{primary:"rgba(236, 191, 66, 0.39)",secondary:"rgba(215, 177, 24, 0.15)",tertiary:"rgba(215, 177, 24, 0.07)"},text:{primary:"#402C1B"}},green:{stroke:{secondary:"rgba(123, 183, 129, 0.27)"},fill:{primary:"rgba(123, 183, 129, 0.27)",secondary:"rgba(123, 183, 129, 0.15)",tertiary:"rgba(123, 183, 129, 0.07)"},text:{primary:"#1C3829"}},blue:{stroke:{secondary:"rgba(93, 165, 206, 0.27)"},fill:{primary:"rgba(93, 165, 206, 0.27)",secondary:"rgba(95, 167, 208, 0.15)",tertiary:"rgba(91, 166, 209, 0.07)"},text:{primary:"#183347"}},purple:{stroke:{secondary:"rgba(168, 129, 197, 0.27)"},fill:{primary:"rgba(168, 129, 197, 0.27)",secondary:"rgba(204, 170, 229, 0.15)",tertiary:"rgba(206, 175, 229, 0.07)"},text:{primary:"#412454"}},pink:{stroke:{secondary:"rgba(225, 136, 179, 0.27)"},fill:{primary:"rgba(225, 136, 179, 0.27)",secondary:"rgba(235, 159, 196, 0.15)",tertiary:"rgba(231, 147, 188, 0.07)"},text:{primary:"#4C2337"}}},dark:{gray:{stroke:{secondary:"rgba(255, 255, 255, 0.09)"},fill:{primary:"rgba(255, 255, 255, 0.13)",secondary:"rgba(255, 255, 255, 0.09)",tertiary:"rgba(255, 255, 255, 0.03)"},text:{primary:"rgba(255, 255, 255, 0.81)"}},red:{stroke:{secondary:"rgba(222, 85, 85, 0.25)"},fill:{primary:"rgba(222, 85, 84, 0.30)",secondary:"rgba(222, 85, 84, 0.30)",tertiary:"rgba(222, 85, 88, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},brown:{stroke:{secondary:"rgba(184, 101, 69, 0.25)"},fill:{primary:"rgba(184, 101, 68, 0.30)",secondary:"rgba(184, 101, 68, 0.30)",tertiary:"rgba(184, 101, 72, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},orange:{stroke:{secondary:"rgba(233, 126, 37, 0.20)"},fill:{primary:"rgba(233, 126, 36, 0.30)",secondary:"rgba(233, 126, 36, 0.30)",tertiary:"rgba(233, 126, 40, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},yellow:{stroke:{secondary:"rgba(179, 129, 61, 0.20)"},fill:{primary:"rgba(231, 161, 55, 0.30)",secondary:"rgba(231, 161, 55, 0.30)",tertiary:"rgba(162, 105, 50, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},green:{stroke:{secondary:"rgba(45, 153, 100, 0.20)"},fill:{primary:"rgba(45, 153, 100, 0.30)",secondary:"rgba(45, 153, 100, 0.30)",tertiary:"rgba(45, 153, 100, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},blue:{stroke:{secondary:"rgba(51, 126, 169, 0.20)"},fill:{primary:"rgba(51, 126, 169, 0.33)",secondary:"rgba(51, 126, 169, 0.33)",tertiary:"rgba(51, 126, 169, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},purple:{stroke:{secondary:"rgba(155, 97, 211, 0.18)"},fill:{primary:"rgba(155, 97, 211, 0.28)",secondary:"rgba(155, 97, 211, 0.28)",tertiary:"rgba(155, 97, 211, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},pink:{stroke:{secondary:"rgba(220, 76, 145, 0.22)"},fill:{primary:"rgba(220, 76, 145, 0.30)",secondary:"rgba(220, 76, 145, 0.30)",tertiary:"rgba(220, 76, 145, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}}}};function i(e,t){const o=(0,r().VA)(e),i="lightgray"===o?"gray":o;return{...n[t.mode][i],icon:{primary:r().l8[t.mode][i]}}}},367950:(e,t,o)=>{function r(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>r})},404042:(e,t,o)=>{o.d(t,{A:()=>d});o(242343);var r=()=>o(803290),n=()=>o(455831),i=()=>o(653998),a=()=>o(220413),l=()=>o(31448),s=()=>o(678523),c=()=>o(943066),u=o(163643);const d=function(e){let{subscriptionTier:t,mobileStyle:d,desktopStyle:p,analyticsName:m,onClick:y,disableTooltip:f,tooltipContent:g}=e;const v=(0,o(174114).DP)(),h=(0,o(237385).v3)(),{device:b}=h,_=(0,r().K8)((()=>{const{currentSpaceStore:e}=o(485966).default.state;return null==e?void 0:e.canAdmin()}),[]),x=(0,r().K8)((()=>function(e,t){switch(e){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?a().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:l().Wy.medium};default:return{}}}(t,v)),[t,v]);if(b.isMobileNative)return null;let M;return"personal"===t?M=(0,u.jsx)(i().sA,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"}):(0,n().$P)(t)?M=(0,u.jsx)(i().sA,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"}):(0,n().tL)(t)?M=(0,u.jsx)(i().sA,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"}):(0,n().OX)(t)?M=(0,u.jsx)(i().sA,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"}):(0,o(76394).HB)(t),b.isMobile||!_?(0,u.jsx)(s().A,{mobileStyle:d,children:M}):(0,u.jsx)(o(103151).A,{delayThreshold:120,disableTooltip:f,placement:o(907721).W.Bottom,renderTooltip:()=>(0,u.jsx)("div",{style:{maxWidth:500},children:g?(0,u.jsx)(i().sA,{defaultMessage:"{tooltipText}",id:"upgradeButton.upgrade.custom.tooltip",values:{tooltipText:g}}):(0,u.jsx)(i().sA,{defaultMessage:"Upgrade to use this feature.",id:"upgradeButton.upgrade.tooltip"})}),originGap:6,render:e=>(0,u.jsx)(s().A,{desktopStyle:p,innerStyle:x,onClick:e=>function(e,t,o,r,n){c().K(r,{from:t,upsell:{type:"product",product:o,limit:{type:"none"},trialability:"none"}}),n&&n(e)}(e,m,t,h,y),...e,children:M})})}},434626:(e,t,o)=>{o.r(t),o.d(t,{eyeIcon:()=>i,iconDefinition:()=>n});o(242343);var r=o(163643);const n={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_9098_13290)",children:[(0,r.jsx)("path",{d:"M10 13.504a3.5 3.5 0 1 0-.001-7.002A3.5 3.5 0 0 0 10 13.504m1.167-3.502a1.168 1.168 0 1 1-2.335.002 1.168 1.168 0 0 1 2.335-.002"}),(0,r.jsx)("path",{d:"M10 3.895c-4.093 0-7.662 2.189-9.351 5.408-.231.44-.231.964 0 1.404 1.689 3.22 5.258 5.408 9.351 5.408s7.662-2.189 9.351-5.408c.231-.44.231-.964 0-1.404-1.689-3.22-5.258-5.408-9.351-5.408m-8.245 5.99C3.218 7.096 6.347 5.144 10 5.144s6.782 1.952 8.245 4.74a.26.26 0 0 1 0 .24c-1.463 2.788-4.592 4.74-8.245 4.74s-6.782-1.952-8.245-4.74a.26.26 0 0 1 0-.24"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_9098_13290",children:(0,r.jsx)("path",{d:"M0 0h20v20H0z"})})})]})},i=(0,o(680369).wt)("eye",n)},445322:(e,t,o)=>{o.d(t,{q:()=>f});o(362833),o(242343);var r=()=>o(653998),n=()=>o(31448),i=()=>o(190717),a=()=>o(709237),l=()=>o(755786),s=()=>o(471979),c=()=>o(823301),u=()=>o(727528),d=()=>o(626911),p=()=>o(145046),m=()=>o(84543),y=o(163643);async function f(e){const{environment:t,collectionContextStore:o,property:f,handleDeleteAccept:g}=e,v=o.collectionStore();if(!v)return;if(v.isTypedProperty(f)){if(await i().nD({environment:t,property:f,collectionContextStore:o,theme:e.theme,from:e.from}))return}const h=(0,u().R5)({environment:t,collectionStore:v,propertyId:f});if(h.length>0){if((0,c().E_)({environment:t,collectionStore:v,propertyId:f,compoundTemplateInstancesToDelete:h,collectionContextStore:o,from:e.from}))return}else if(((0,s().k$)(f)||(0,s().Do)({collectionStore:v,propertyId:f}))&&(0,s().aF)(v)&&(0,s().Io)()){if((0,c().I5)({environment:t,collectionStore:v,propertyId:f,collectionContextStore:o,from:e.from}))return}const b=o.normalizedSchemaStore.state,_=b[f],x=l().pg(o,_);await(null==x?void 0:x.load());const M=x&&l().D5(o,f,x),S=x&&l().uf(x),A=x&&v.id===x.id,w=[{label:(0,y.jsx)(r().sA,{id:"database.viewSettings.propertyTab.deleteProperty.modal.confirmButton",defaultMessage:"Delete"}),color:"red",onAccept:g}];let C;if(M&&v&&S&&!A&&w.push({label:(0,y.jsx)(r().sA,{id:"database.tableHeaderCell.deleteProperty.modal.inverseConfirmButton",defaultMessage:"Delete, but keep related property"}),color:"red",onAccept:()=>{m().createAndCommit({userAction:"collectionPropertyActions.showDeletePropertyDialog",environment:t,canUndo:!0,perform:e=>{if(_&&"relation"===_.type&&_.property&&x){const o=_.property,r=x.getSchema();d().C4({environment:t,collectionStore:x,propertySchema:r[o],property:o,targetPropertyID:void 0,autoRelate:v.isSyncedCollection()&&!x.isSyncedCollection()?{enabled:!1}:_.autoRelate,transaction:e})}d().t$({environment:t,collectionStore:v,property:f,transaction:e})}})}}),"auto_increment_id"===(null==_?void 0:_.type))C=l().me(b)?(0,y.jsx)(r().sA,{id:"database.tableHeaderCell.deleteUniqueIdWithGithubProperty.modal.prompt",defaultMessage:"You will no longer be able to link new GitHub PRs and status automations will stop working."}):(0,y.jsx)(r().sA,{id:"database.tableHeaderCell.deleteUniqueIdProperty.modal.prompt",defaultMessage:"The ID property will be permanently deleted."});else if("status"===(null==_?void 0:_.type)){const e=l().AX(b);if(e){const t=e.connectedRelation.automation;t&&t[f]&&(C=(0,y.jsx)(r().sA,{id:"database.tableHeaderCell.deleteStatusProperty.modal.prompt",defaultMessage:"Deleting this status property will stop the GitHub Pull Requests status automation."}))}}else x&&S&&!A&&M&&(C=(0,y.jsx)(r().sA,{id:"database.tableHeaderCell.deleteRelatedProperty.modal.prompt",defaultMessage:"This property has a related property on {relationTargetName} which will also be deleted.",values:{relationTargetName:(0,y.jsx)(a().A,{style:{display:"inline",fontWeight:n().Wy.medium},store:x})}}));p().ui({message:(0,y.jsx)("span",{children:(0,y.jsx)(r().sA,{id:"database.tableHeaderCell.deleteProperty.modal.prompt",defaultMessage:"Delete this property from {databaseName}? It will be removed from all views.",values:{databaseName:(0,y.jsx)(a().A,{style:{display:"inline",fontWeight:n().Wy.bold},shouldWrap:!0,store:v})}})}),description:C,showCancel:!0,keepFocus:!0,items:w,mode:"wide"})}},533639:(e,t,o)=>{o.d(t,{p:()=>r});class r extends(()=>o(998969))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}},658294:(e,t,o)=>{o.d(t,{G:()=>i});var r=()=>o(137476),n=()=>o(836331);function i(e,t){r().vd(e,"delete_property",t),n().default.logEvent("delete_property")}},686752:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,pencilLineIcon:()=>n});o(242343);const r={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},n=(0,o(680369).wt)("pencilLine",r)},755989:(e,t,o)=>{o.d(t,{Ld:()=>u,kg:()=>d,uF:()=>p});var r=()=>o(803290),n=()=>o(564134),i=()=>o(706788),a=()=>o(405317),l=()=>o(96718),s=()=>o(485966),c=()=>o(133926);function u(e){let{spaceId:t,userId:o}=e;const r=(0,c()._X)({name:"collection_connected_property_figma",spaceId:t,userId:o}),n=(0,c()._X)({name:"collection_connected_property_github",spaceId:t,userId:o}),a=(0,c()._X)({name:"collection_connected_property_google_drive",spaceId:t,userId:o}),l=(0,c()._X)({name:"collection_connected_property_zendesk",spaceId:t,userId:o});return{[i().e1]:r,[i().ob]:n,[i().Hd]:a,[i().k0]:l}}function d(e){if(!e)return;const t=e&&(0,n().UU)(e)?e.connectedRelation.integration_id:void 0;return(0,l().l)(t)}function p(e){let{featureName:t}=e;const o=function(e){const t=e.featureName,o=(0,r().K8)((()=>{var t;return e.spaceId??(null===(t=s().default.state.currentSpaceStore)||void 0===t?void 0:t.id)}),[e.spaceId]),n=(0,r().K8)((()=>{var t;return e.userId??(null===(t=s().default.state.currentUserStore)||void 0===t?void 0:t.id)}),[e.userId]);return(0,c()._X)({name:t,spaceId:o,userId:n})}({featureName:t});if(!o)return;const n=(0,a().e2)(o),i=(0,a().Xq)(o);let l,u;return!i||"product"!==i.type||"plus"!==i.product&&"business"!==i.product&&"enterprise"!==i.product||(l=i.product),n&&(u=n&&o.expiry&&"sunset"===o.expiry.type?o.expiry.endDate:void 0),{isAvailable:n,expirationDate:u,upsell:i,upsellTier:l}}},779698:(e,t,o)=>{o.d(t,{Ah:()=>g,Dk:()=>m,Iv:()=>f,SF:()=>y,YO:()=>b,_f:()=>x,c_:()=>d,dW:()=>h,gW:()=>p,sp:()=>M,vN:()=>v});o(610931),o(362833),o(725707),o(491955),o(771702),o(403517),o(113085);var r=()=>o(975392),n=()=>o(204132),i=()=>o(76394),a=()=>o(599932),l=()=>o(465546),s=()=>o(409211),c=()=>o(34662),u=()=>o(876988);function d(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:t})}function p(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:t})}function m(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:t})}function y(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:t})}function f(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:t})}function g(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:t})}function v(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:t})}function h(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:t})}function b(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:t})}function _(e){const{formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:r,getRecordModel:a,spaceId:s,value:c,featureGates:u}=e;if("formula"===c.type){if(!(0,i().O9)(c.value))return;const e=n().Q.unwrapOr(o.parseFormulaInputToAst(c.value),void 0);if(e){const n=o.addTypesToFormulaAST(e,{handleDataRequest:(0,l().zg)(a),spaceId:s,valueTypes:r,featureGates:u});return{...t.getFormulaAnalytics(e,{getRecordModel:a,typecheckContextValues:r}),formula_return_type:n.node.type,redacted_formula:t.getRedactedFormulaAsStringSync(e,{getRecordModel:a,typecheckContextValues:r})}}}else{if("simple"===c.type){if(!(0,i().O9)(c.value))return;return t.getSimpleFormulaAnalytics(c.value,{getRecordModel:a,typecheckContextValues:r})}(0,i().HB)(c.type)}}function x(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y,simpleFormulasModule:f}=e;return t.isType("complete_sprint")?{automation_action_id:t.pointer.id,type:"complete_sprint"}:t.isType("create_page")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:r,formulaTypecheckContextValues:n,getRecordModel:a,featureGates:l}=e,s=t.getConfig();let c,u=[];const d=null==s?void 0:s.collection,p=null==s?void 0:s.properties;if((0,i().O9)(d)&&(0,i().O9)(p)&&p.length>0){const e=a(d),y=null==e?void 0:e.getNormalizedSchema();(0,i().O9)(y)&&(u=p.map((e=>{var t;return(null===(t=y[e])||void 0===t?void 0:t.type)??"unknown"})));const f=null==s?void 0:s.values;if(r&&(0,i().O9)(f)){c=[];for(const e of p){var m;const i=null===(m=f[e])||void 0===m?void 0:m.value;if(!i)continue;const s=_({formulaAnalyticsModule:o,formulasModule:r,getRecordModel:a,formulaTypecheckContextValues:n,spaceId:t.spaceId,value:i,featureGates:l});s&&c.push(s)}}}return{automation_action_id:t.pointer.id,property_formula_stats:c,property_types:u,type:"create_page"}}({automationActionModel:t,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y}):t.isType("duplicate_blocks")?{automation_action_id:t.pointer.id,type:"duplicate_blocks"}:t.isType("modal_confirmation")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:r,formulaTypecheckContextValues:n,getRecordModel:a,featureGates:l}=e,s=t.getConfig(),c=[];if(r&&(0,i().O9)(s)&&s.text){const e=_({formulasModule:r,formulaAnalyticsModule:o,getRecordModel:a,formulaTypecheckContextValues:n,spaceId:t.spaceId,value:s.text,featureGates:l});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"modal_confirmation"}}({automationActionModel:t,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y}):t.isType("open_page")?{automation_action_id:t.pointer.id,type:"open_page"}:t.isType("query_collection")?{automation_action_id:t.pointer.id,type:"query_collection"}:t.isType("send_in_app_notification")?function(e){var t;const{automationActionModel:o,formulaAnalyticsModule:r,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:l,featureGates:s,simpleFormulasModule:u}=e,d={automation_action_id:o.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},p=o.getConfig();if(!(0,i().O9)(p))return d;if((0,i().O9)(p.target))if("formula"===p.target.type&&(0,i().O9)(p.target.value)){if(d.targetData={type:"formula",numUserFormulaTargets:(0,c().Fbh)(p.target.value.value).length,numFormulaContextTargets:u.getReferencedContextValueIds(p.target.value).length},n){const e=_({formulasModule:n,formulaAnalyticsModule:r,getRecordModel:l,formulaTypecheckContextValues:a,spaceId:o.spaceId,value:p.target.value,featureGates:s});e&&(d.formula_stats??=[],d.formula_stats.push(e))}}else if("property"===p.target.type&&(0,i().O9)(p.target.propertyId)&&(0,i().O9)(p.target.collectionPointer)){const e=l(p.target.collectionPointer),t=null==e?void 0:e.getSchema();var m;(0,i().O9)(t)&&(d.targetData={type:"property",propertyType:null===(m=t[p.target.propertyId])||void 0===m?void 0:m.type})}if((0,i().O9)(null===(t=p.notification_message)||void 0===t?void 0:t.value)&&(d.messageCharacterCount=(0,c().FAw)(p.notification_message.value),n)){const e=_({formulasModule:n,formulaAnalyticsModule:r,getRecordModel:l,formulaTypecheckContextValues:a,spaceId:o.spaceId,value:p.notification_message,featureGates:s});e&&(d.formula_stats??=[],d.formula_stats.push(e))}return d}({automationActionModel:t,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y,simpleFormulasModule:f}):t.isType("send_gmail_notification")?function(e){var t,o,n,l,u,d,p;const{automationActionModel:m,formulaAnalyticsModule:y,formulasModule:f,formulaTypecheckContextValues:g,getRecordModel:v,featureGates:h}=e,b=m.getConfig();if(!(0,i().O9)(b))return{automation_action_id:m.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const x=Object.fromEntries(Object.entries(b||{}).map((e=>{let[t,o]=e;var r;return"formula"===(null==o?void 0:o.type)?[t,Boolean(null==o||null===(r=o.value)||void 0===r?void 0:r.value)]:"simple"===(null==o?void 0:o.type)?[t,Boolean(null==o?void 0:o.value)]:[t,Boolean(o)]}))),{to:M,cc:S,bcc:A}=b,w=[...(null==M||null===(t=M.value)||void 0===t?void 0:t.value)||[],...(null==S||null===(o=S.value)||void 0===o?void 0:o.value)||[],...(null==A||null===(n=A.value)||void 0===n?void 0:n.value)||[]],C=[...(0,c().Fbh)(w).map((e=>v({table:s().oo,id:e}))).map((e=>null==e?void 0:e.email)).filter(i().O9),...(0,a().C3)((0,c().k4p)(w))],I=r().Tr(C.map((e=>e.split("@")[1]))),k=[null===(l=b.to)||void 0===l?void 0:l.value,null===(u=b.cc)||void 0===u?void 0:u.value,null===(d=b.bcc)||void 0===d?void 0:d.value,null===(p=b.reply_to)||void 0===p?void 0:p.value,b.from_name,b.email_subject,b.email_body].map((e=>{if(f&&(0,i().O9)(e))return _({formulaAnalyticsModule:y,formulasModule:f,getRecordModel:v,formulaTypecheckContextValues:g,spaceId:m.spaceId,value:e,featureGates:h})})).filter(i().O9);return{automation_action_id:m.pointer.id,fields:x,formula_stats:k,recipient_domains:I,type:"send_gmail_notification"}}({automationActionModel:t,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y}):t.isType("slack_notification")?{automation_action_id:t.pointer.id,type:"slack_notification"}:t.isType("update_pages")?function(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:r,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:s,featureGates:c}=e,d=t.getConfig(),p=[],m=[],y=[];if((0,i().O9)(d)&&(0,i().O9)(d.target)&&(0,i().O9)(d.properties)&&d.properties.length>0){let e;if("variable"===d.target.type){const t=(0,l().y5)(d.target.id);if("action"===t.source){const t=(0,u().y)({actionModels:o,id:d.target.id}).collectionPointer;if((0,i().O9)(t)){const o=s(t);e=null==o?void 0:o.getNormalizedSchema()}}else{if("global"!==t.source||"button_page"!==t.global)throw new Error("Failed loading property schema");{const t=(0,l().IV)(a,d.target.id);if("block"===(null==t?void 0:t.type.type)&&(0,i().O9)(t.type.collection)){const o=s(t.type.collection);e=null==o?void 0:o.getNormalizedSchema()}}}}else if("collection"===d.target.type){const t=s(d.target.collection);e=null==t?void 0:t.getNormalizedSchema()}(0,i().O9)(e)&&d.properties.forEach((o=>{const l=e[o];if((0,i().O9)(l)&&(p.push(l.type),n&&(0,i().O9)(d.values))){const e=d.values[o];if((0,i().O9)(e)&&(m.push({type:l.type,operator:e.action}),e.value)){const o=_({formulasModule:n,formulaAnalyticsModule:r,getRecordModel:s,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:e.value,featureGates:c});o&&y.push(o)}}}))}return{automation_action_id:t.pointer.id,property_configs:m,property_formula_stats:y,property_types:p,type:"update_pages"}}({automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y}):t.isType("define_variables")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:r,formulaTypecheckContextValues:n,getRecordModel:a,featureGates:l}=e,s=t.getConfig(),c=[];if(r&&(0,i().O9)(s)&&s.values)for(const i of Object.values(s.values))if(i.value){const e=_({formulasModule:r,formulaAnalyticsModule:o,getRecordModel:a,formulaTypecheckContextValues:n,spaceId:t.spaceId,value:i.value,featureGates:l});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"define_variables"}}({automationActionModel:t,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y}):t.isType("http_request")?{automation_action_id:t.pointer.id,type:"http_request"}:t.isType("publish_site")?{automation_action_id:t.pointer.id,type:"publish_site"}:void(0,i().HB)(t)}function M(e){const{automationModel:t,builderType:o="sidebar",formulaAnalyticsModule:r,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:l,featureGates:s,simpleFormulasModule:c,source:u}=e,d=[],p=t.getActionPointers().map((e=>l(e))).filter(i().O9);for(const b of t.getActionPointers()){const e=l(b);(0,i().O9)(e)&&d.push(x({automationActionModel:e,automationActionModels:p,formulaAnalyticsModule:r,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:l,featureGates:s,simpleFormulasModule:c}))}const m=[];let y,f,g;if(t.isEventType()){var v;const e=t.getEventConfiguration(),o=l(t.getParentPointer());y=t.getParentId();const r=t.getEventConfiguration();if("collection_view"===(null===(v=r.source)||void 0===v?void 0:v.type)){const e=l(r.source.pointer);g=null==e?void 0:e.parent_id,f=null==r?void 0:r.source.pointer.id}const n=null==o?void 0:o.getNormalizedSchema();if((0,i().O9)(n)){const{pagesAdded:t,pagePropertiesEdited:o}=e;if(t&&m.push({type:"page"}),"any"===o.type)m.push({condition:"any",type:"property"});else if("none"===o.type)m.push({condition:"none",type:"property"});else{let e=[];"some"===o.type?e=o.some??[]:"all"===o.type&&(e=o.all??[]);const t=[],r=[];e.forEach((e=>{var o;const a=null===(o=n[e.property])||void 0===o?void 0:o.type;(0,i().O9)(a)&&(t.push({type:a,operator:e.filter.operator}),r.push(a))})),m.push({condition:o.type,property_configs:t,property_types:r,type:"property"})}}}else if(t.isButtonType())m.push({type:"button"});else if(t.isRecurrenceType()){var h;m.push({type:"recurrence",frequency:null===(h=t.getTrigger().recurrence)||void 0===h?void 0:h.frequency})}else(0,i().HB)(t);return{automation_actions:d,automation_id:t.id,automation_triggers:m,collection_id:y,collection_view_id:f,collection_view_block_id:g,builder_type:o,source:u}}},793613:(e,t,o)=>{o.d(t,{E:()=>y});o(242343);var r=()=>o(803290),n=()=>o(174114),i=()=>o(653998),a=()=>o(622286),l=()=>o(485966),s=()=>o(695951),c=o(163643);const u={define_variables_automation_action:{launchDateMs:17277408e5,expiryDateMs:1738368e6},passkey_setting:{launchDateMs:1729101727e3,expiryDateMs:1738432882e3},http_request_automation_action:{launchDateMs:173324302e4,expiryDateMs:1738368e6},publish_site_settings_embed_page:{launchDateMs:1736208e6,expiryDateMs:1743984e6},generalized_recurrence_automations:{launchDateMs:17365536e5,expiryDateMs:17460576e5},ai_page_translation_topbar_more_action:{launchDateMs:1740451280830,expiryDateMs:17434656e5},verification:{launchDateMs:1740096e6,expiryDateMs:174375e7},notion_ai_workspace_settings:{launchDateMs:17424288e5,expiryDateMs:17550432e5},notion_mail_launch_modal:{launchDateMs:17446752e5,expiryDateMs:17525376e5},notion_mail_launch_modal_2:{launchDateMs:17446752e5,expiryDateMs:17578944e5},ui_doc_example:{launchDateMs:19249056e5,expiryDateMs:19249056e5},show_integration_webhooks_callout:{launchDateMs:17428608e5,expiryDateMs:17506368e5},collection_property_permissions:{launchDateMs:17433792e5,expiryDateMs:17671392e5},salesforce_sync_unfurling_option:{launchDateMs:17443296e5,expiryDateMs:17538336e5}};function d(e){let{style:t}=e;const o=(0,n().IS)((e=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...t}})),[t]);return(0,c.jsx)(s().A,{color:"blue",style:o.badge,content:(0,c.jsx)(i().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}function p(e){let{style:t,newBadgeKey:o}=e;const{launchDateMs:n,expiryDateMs:i}=u[o];return(0,r().K8)((()=>{const{currentUserSettingsStore:e}=l().default.state;if(e&&e.isReady()){var t;const o=null===(t=e.getSettings())||void 0===t?void 0:t.signup_time;if(o&&o>n)return!1}return Date.now()<=i}),[i,n])?(0,c.jsx)(d,{style:t}):null}function m(e){let{style:t,newBadgeKey:o}=e;return(0,a().X)(o)?(0,c.jsx)(d,{style:t}):null}function y(e){return e.didUserEngage?null:"feature_gate"===e.keyType?(0,c.jsx)(m,{...e}):(0,c.jsx)(p,{...e})}},798508:(e,t,o)=>{o.d(t,{Bb:()=>i,PP:()=>l,gY:()=>m,vG:()=>c,wV:()=>d});var r=()=>o(653998);const n=(0,r().YK)({expanded:{id:"customizePageMenuVisibilitySelect.expanded.label",defaultMessage:"Expanded"},off:{id:"customizePageMenuVisibilitySelect.off.label",defaultMessage:"Off"}}),i={section_show:n.expanded,section_collapsed:n.expanded,section_hide:n.off},a=(0,r().YK)({default:{id:"customizePageMenuVisibilitySelect.default.label",defaultMessage:"Default"},minimal:{id:"customizePageMenuVisibilitySelect.minimal.label",defaultMessage:"Minimal"}}),l={inline:a.default,minimal:a.minimal},s=(0,r().YK)({showOnHover:{id:"visibilityLevelMessages.backlinksPageSection.showOnHover",defaultMessage:"Show on hover"},alwaysShow:{id:"visibilityLevelMessages.backlinksPageSection.alwaysShow",defaultMessage:"Always show"},off:{id:"customizePageMenuVisibilitySelect.off.label",defaultMessage:"Off"}}),c={always_show:s.alwaysShow,section_show:s.showOnHover,section_collapsed:s.showOnHover,section_hide:s.off,inline:s.off,minimal:s.off},u=(0,r().YK)({asPageSection:{id:"customizePageMenuVisibilitySelect.section.label",defaultMessage:"As page section"},minimal:{id:"visibilityLevelMessages.propertyPageSection.minimal",defaultMessage:"Minimal"}}),d={inline:u.asPageSection,minimal:u.minimal},p=(0,r().YK)({alwaysShow:{id:"customizePageMenuVisibilitySelect.show.label",defaultMessage:"Always show"},alwaysHide:{id:"customizePageMenuVisibilitySelect.hide.label",defaultMessage:"Always hide"},hideWhenEmpty:{id:"customizePageMenuVisibilitySelect.hideIfEmpty.label",defaultMessage:"Hide when empty"},asPageSection:{id:"customizePageMenuVisibilitySelect.section.label",defaultMessage:"As page section"}}),m={show:p.alwaysShow,hide:p.alwaysHide,hide_if_empty:p.hideWhenEmpty,section:p.asPageSection}},837809:(e,t,o)=>{o.d(t,{O:()=>c,q:()=>u});o(242343);var r=()=>o(174114),n=()=>o(220413),i=()=>o(31448),a=()=>o(826033),l=()=>o(809785),s=o(163643);function c(e){const{value:t,color:o,format:c,showEllipsis:u,onClickRemove:d,showRemoveButton:p,isSingle:m,shouldShrink:y,hideTooltip:f,description:g,tooltipPlacement:v,...h}=e,b=(0,r().DP)(),_=(0,r().IS)((e=>({token:{...u&&i().RC}})),[u]),{textColor:x,backgroundColor:M}=(0,n().LD)(b,o);return t?(0,s.jsx)(l().A,{format:c,value:(0,s.jsx)(a().A,{children:t}),description:g,onClickRemove:d,showRemoveButton:p,isSingle:m,color:x,backgroundColor:M,shouldShrink:y,tooltipPlacement:v,showTooltip:f?"never":"overflow",style:_.token,...h}):null}function u(e){const{value:t,color:o,format:c,showEllipsis:u,onClickRemove:d,showRemoveButton:p,isSingle:m,shouldShrink:y,groupColor:f,tooltipPlacement:g,description:v,hideTooltip:h,...b}=e,_=(0,r().DP)(),x=(0,r().IS)((()=>({token:{...u&&i().RC}})),[u]);if(!t)return null;const{textColor:M,backgroundColor:S}=(0,n().LD)(_,o??f??"gray");let A;return A=o||(f||"gray"),(0,s.jsx)(l().A,{format:c,value:(0,s.jsx)(a().A,{children:t}),description:v,onClickRemove:d,showRemoveButton:p,isSingle:m,color:M,backgroundColor:S,shouldShrink:y,showTooltip:h?"never":"overflow",style:x.token,isRound:!0,showColoredDot:A,tooltipPlacement:g,...b})}},855470:(e,t,o)=>{o.d(t,{V:()=>n});o(242343);var r=o(163643);const n=(0,o(680369).wt)("chevronRight",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})},867934:(e,t,o)=>{o.d(t,{Wf:()=>g,YB:()=>y,aj:()=>f,f3:()=>h,qg:()=>v});o(725707),o(491955),o(403517),o(242343);var r=()=>o(174114),n=()=>o(810111),i=()=>o(653998),a=()=>o(712048),l=()=>o(640979),s=()=>o(535906),c=()=>o(935091),u=()=>o(858023),d=()=>o(88271),p=()=>o(798508),m=o(163643);function y(e){const{currentVisibility:t,propertySchema:o,onSelect:r,onClose:l}=e;let s=[...n().vj];s=s.filter((e=>"section"!==e)),(0,a()._f)({propertySchema:o})||(s=s.filter((e=>"hide_if_empty"!==e)));const c=s.map((e=>({visibility:e,label:(0,m.jsx)(i().sA,{...p().gY[e]})})));return(0,m.jsx)(b,{currentVisibility:t,visibilityLevelsWithLabels:c,onSelect:r,onClose:l})}function f(e){const{currentVisibility:t,onSelect:o,onClose:r}=e,n=(0,a().SB)(t),l=["always_show","section_collapsed","section_hide"].map((e=>({visibility:e,label:(0,m.jsx)(i().sA,{...p().vG[e]})})));return(0,m.jsx)(b,{currentVisibility:n,visibilityLevelsWithLabels:l,onSelect:o,onClose:r})}function g(e){const{currentVisibility:t,onSelect:o,onClose:r}=e,a=n().OA.filter((e=>"section_hide"!==e)).map((e=>({visibility:e,label:(0,m.jsx)(i().sA,{...p().wV[e]})}))),l="section_hide"===t?void 0:t;return(0,m.jsx)(b,{currentVisibility:l,visibilityLevelsWithLabels:a,onSelect:o,onClose:r})}function v(e){const{currentVisibility:t,onSelect:o,onClose:r}=e,a=n().qG.filter((e=>"section_collapsed"!==e)).map((e=>({visibility:e,label:(0,m.jsx)(i().sA,{...p().Bb[e]})}))),l="section_collapsed"===t?"section_show":t;return(0,m.jsx)(b,{currentVisibility:l,visibilityLevelsWithLabels:a,onSelect:o,onClose:r})}function h(e){const{currentVisibility:t,onSelect:o,onClose:r}=e,a=n().RL.map((e=>({visibility:e,label:(0,m.jsx)(i().sA,{...p().PP[e]})})));return(0,m.jsx)(b,{currentVisibility:t,visibilityLevelsWithLabels:a,onSelect:o,onClose:r})}function b(e){const{currentVisibility:t,visibilityLevelsWithLabels:o,onSelect:r,onClose:n}=e,i=o.map((e=>{let{visibility:o,label:i}=e;return{key:o,render:e=>(0,m.jsx)(_,{buttonMenuItemProps:e,isChecked:o===t,label:i}),action:()=>{r(o),n&&n()}}})),a=[{key:"visibilityLevels",render:e=>(0,m.jsx)(d().A,{...e,topBorder:0!==e.index}),items:i}],s={menuType:l().gu.Popup,width:"auto",maxWidth:360};return(0,m.jsx)(c().A,{...s,children:(0,m.jsx)(u().Ay,{type:u().Oh.Vertical,initialFocus:void 0,sections:a})})}function _(e){const{buttonMenuItemProps:t,label:o,isChecked:n}=e,i=(0,r().IS)((()=>({title:{display:"flex",alignItems:"center",width:150}})),[]),a=(0,m.jsx)("div",{style:i.title,children:o});return(0,m.jsx)(s().A,{...t,textWrapperStyle:{marginRight:0},title:a,isChecked:n})}},876988:(e,t,o)=>{o.d(t,{y:()=>i});o(725707),o(500234);var r=()=>o(76394),n=()=>o(465546);function i(e){var t;const{actionModels:o,id:i}=e,a=(0,n().y5)(i),l="action"===a.source?o.find((e=>e.id===a.action_id)):void 0,s=(0,r().O9)(l)&&l.isType("create_page")?null===(t=l.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:a,collectionPointer:s,actionModel:l}}},911575:(e,t,o)=>{o.d(t,{$0:()=>g,Fx:()=>S,Ge:()=>m,I3:()=>d,Kj:()=>x,PP:()=>A,TK:()=>w,Yy:()=>u,aE:()=>C,cQ:()=>M,kH:()=>y,m7:()=>p,nq:()=>b,nv:()=>v,tj:()=>f});o(725707),o(491955),o(113085);var r=()=>o(975392),n=()=>o(76394),i=()=>o(564134),a=()=>o(810111),l=()=>o(479056),s=()=>o(875089);(0,n().u0)((e=>(0,n().O9)(e)&&(0,n().O9)(e.target)&&(0,n().O9)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target,custom_message:e.custom_message}}:{false:e}));const c={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1},u={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function d(e){return Boolean(c[e.type]&&!(0,i().UU)(e)&&(!(0,i().$M)(e)||void 0===(0,i().om)(e)))}function p(e){const{collectionFormat:t,collectionSchema:o,filter:l,sort:c,sourcePropertyIds:u}=e,p=(u??(0,n().uv)(o)).filter(((t,r,n)=>{const a=o[t];return!(!a||!d(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,i().o2)(e.spaceId,a))&&(!l||l([t,a],r,o)))}));if(0===p.length)return[];if(!t||!1===c)return p;const m=(0,s().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:o,sort:l}=e,c=(0,n().uv)(o).filter(((e,t,r)=>{const n=o[e];return!(!n||!(0,i().JY)(n))}));if(0===c.length)return[];if(!t||!1===l)return c;const u=(0,s().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(c,(e=>u.findIndex((t=>t.property===e))))}function y(e){return e.type===l().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===l().M9.TokenExpected?{type:e.type,token:e.token}:e.type===l().uW.MissingSchemaPropertyOnThisRow||e.type===l().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===l().uW.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===l().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===l().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===l().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===l().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node}:e.type===l().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===l().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===l().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===l().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===l().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const f={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,geo_point:!1};function g(e){return Boolean(f[e.type])}function v(e){const{collectionFormat:t,collectionSchema:o,filter:l,sort:c}=e,u=(0,n().uv)(o).filter(((e,t,r)=>{var n;const a=o[e];return!(!a||!f[a.type])&&((!(0,i().$M)(a)||null===(n=(0,i().om)(a))||void 0===n||!n.auto_update_on_edit)&&(!l||l([e,a],t,o)))}));if(0===u.length)return[];if(!t||!1===c)return u;const d=(0,s().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(u,(e=>d.findIndex((t=>t.property===e))))}const h={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function b(e){return h[e.type]}const _={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function x(e){return _[e.type]}function M(e){return 0===e}function S(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function A(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function w(e){const{collectionSchema:t,property:o,type:r}=e,n=null==t?void 0:t[o];return!n||("action"===r?!d(n):!f[n.type])}function C(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:r,source:i,relativeDate:a}=t.event;if(void 0===i)return!1;const l="some"===r.type&&r.some,s="all"===r.type&&r.all;if((l||s||[]).some((e=>A({collectionSchema:o,property:e.property})||w({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const c="some"===r.type&&(!(0,n().O9)(r.some)||0===r.some.length),u="all"===r.type&&(!(0,n().O9)(r.all)||0===r.all.length);if(!e&&("none"===r.type||c||u)&&!a)return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},918305:(e,t,o)=>{o.d(t,{_:()=>n});o(242343);const r={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M3.3 4.825c0-.842.683-1.525 1.525-1.525h3.15c.842 0 1.525.683 1.525 1.525v10.35c0 .842-.683 1.525-1.525 1.525h-3.15A1.525 1.525 0 0 1 3.3 15.175zm1.525-.275a.275.275 0 0 0-.275.275v10.35c0 .152.123.275.275.275h3.15a.275.275 0 0 0 .275-.275V4.825a.275.275 0 0 0-.275-.275zm5.675.275v3.15c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525v-3.15c0-.842-.683-1.525-1.525-1.525h-3.15c-.842 0-1.525.683-1.525 1.525m1.525-.275h3.15c.152 0 .275.123.275.275v3.15a.275.275 0 0 1-.275.275h-3.15a.275.275 0 0 1-.275-.275v-3.15c0-.152.123-.275.275-.275m0 5.95c-.842 0-1.525.683-1.525 1.525v3.15c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525v-3.15c0-.842-.683-1.525-1.525-1.525zm-.275 1.525c0-.152.123-.275.275-.275h3.15c.152 0 .275.123.275.275v3.15a.275.275 0 0 1-.275.275h-3.15a.275.275 0 0 1-.275-.275z"})},n=(0,o(680369).wt)("layout",r)},941064:(e,t,o)=>{o.r(t),o.d(t,{PagePropertiesRowNameMenu:()=>te});o(610931),o(362833),o(725707),o(491955),o(500234),o(403517);var r=o(242343),n=()=>o(237385),i=()=>o(803290),a=()=>o(594876),l=()=>o(564134),s=()=>o(780866),c=()=>o(716605),u=()=>o(452894),d=()=>o(625491),p=()=>o(507190),m=()=>o(434626),y=()=>o(99949),f=()=>o(918305),g=()=>o(954397),v=()=>o(836693),h=()=>o(960213),b=()=>o(946854),_=()=>o(409211),x=()=>o(653998),M=()=>o(220413),S=()=>o(728373),A=()=>o(76394),w=()=>o(963644),C=()=>o(154956),I=()=>o(521325),k=()=>o(817150),T=()=>o(445322),P=()=>o(84543),j=()=>o(56432),O=()=>o(361972),D=()=>o(314164),B=()=>o(181704),V=()=>o(749975),E=()=>o(640979),R=()=>o(906230),W=()=>o(113805),H=()=>o(338484),N=()=>o(760813),F=()=>o(546820),U=()=>o(589004),L=()=>o(879857),z=()=>o(907721),G=()=>o(141122),K=()=>o(331516),X=()=>o(535906),q=()=>o(858023),$=()=>o(397791),Z=()=>o(103151),Y=()=>o(350208),J=()=>o(867934),Q=o(163643);function ee(e){const t=(0,V().ET)(),k=(0,n().v3)(),J=(0,o(174114).DP)(),{permissionScopes:ee,collectionSettingsStore:te,collectionStore:ie,layoutStore:ae}=(0,i().K8)((()=>{var e;return{permissionScopes:t.permissionScopesStore.state,collectionSettingsStore:t.settingsStore,collectionStore:t.collectionStore(),layoutStore:null===(e=t.collectionStore())||void 0===e?void 0:e.getLayoutStore()}}),[t]),{databaseType:le,collectionSchema:se}=(0,i().K8)((()=>({databaseType:null==ie?void 0:ie.getDatabaseType(),collectionSchema:null==ie?void 0:ie.getSchema()})),[ie]),{property:ce,schema:ue,blockStore:de}=e,pe=(0,c()._g)({schema:ue,property:ce}),me=(0,i().K8)((()=>o(755786).pg(t,pe)),[t,pe]);(0,r.useEffect)((()=>{const e=ue[ce];t&&"relation"===(null==e?void 0:e.type)&&(null==me||me.load())}),[t,ce,ue,me]);const ye=(0,i().K8)((()=>!!ie&&Boolean(le&&o(283759).jP((0,o(414997).appConfigs)(),le,ce,ie))),[ce,le,ie]),fe=(0,o(751436).dm)(de,se,ce,pe);let ge;const{device:ve}=k;ge=ve.isMobile?{menuType:E().gu.ActionSheet}:{menuType:E().gu.Popup,width:220};const he=Boolean((0,r.useContext)(F().sf)),{sessionId:be,setModuleSelection:_e}=(0,r.useContext)(F().Op)||{},xe=(0,i().K8)((()=>!he&&!fe),[he,fe]),Me=(0,i().K8)((()=>(0,o(598808).Y)({environment:k,blockStore:de,from:"pagePropertiesRowNameMenu"})),[de,k]),Se=!(0,i().O$)(o(802955).e)&&(0,A().O9)(pe)&&(0,o(246545).$S)({propertyType:pe.type,propertySchema:pe}),Ae=function(e){let{property:t,schema:o,format:r,blockStore:n,pagePropertiesStore:i,popupContainerRef:k,collectionContextStore:V,permissionScopes:E,collectionStore:F,collectionSettingsStore:q,isTypedProperty:J,environment:ee,theme:te,layoutModule:ie,isInPageLayoutEditor:ae,layoutSessionId:le,layoutStore:se,isPropertyCommentsEnabled:ce,canShowLayoutBuilderEntryPoint:ue,hideDuplicatePropertyOption:de,setModuleSelection:pe,editingDisabledOffline:me}=e;const{device:ye}=ee,fe=(0,c()._g)({schema:o,property:t});if(!(V&&q&&fe&&F))return[];const ge=[],ve=ae&&(0,b().V_)(ie),he=E.canConfigureCollection||E.canConfigureBlock;if(he&&!(0,a().u)(t)&&!E.isExternallyImportedAndSyncedCollection){const e=ae&&(ve||(0,b().i_)(ie)||(0,b()._Q)(ie));if(ve){const e=[{key:"Show As Property Or Section",action:()=>{},render:(e,n)=>(0,Q.jsx)(Y().A,{...e,renderOrigin:e=>(0,Q.jsx)(K().A,{...e,title:(0,Q.jsx)(x().sA,{defaultMessage:"Show as",id:"database.configureProperty.showAsAction"}),svg:m().eyeIcon}),onFocus:n.onFocus,renderExtension:(e,n)=>(0,Q.jsx)(ne,{popupEvents:e,extParent:n,property:t,schema:o,format:r,collectionStore:F,pagePropertiesStore:i})})}];ge.push(e)}const a=[];if(ge.push(a),a.push({key:"rename",render:e=>(0,Q.jsx)(X().A,{...e,title:(0,Q.jsx)(x().sA,{defaultMessage:"Rename",id:"database.tableHeaderCell.rename"}),icon:(0,Q.jsx)($().I,{icon:d().M})}),action:()=>{I().Ow({collectionContextStore:V,collectionSettingsStore:q,fromBlockStore:n}),I().dP({collectionSettingsStore:q,item:{type:"property",formatKey:"collection_page_properties",property:t,selectNameInitial:!ye.isMobile}})}}),a.push({key:"edit_property",render:e=>(0,Q.jsx)(Z().A,{placement:z().W.Left,render:t=>(0,Q.jsx)(X().A,{title:(0,Q.jsx)(x().sA,{defaultMessage:"Edit property",id:"database.tableHeaderCell.editProperty"}),icon:(0,Q.jsx)($().I,{icon:g().slidersIcon}),...(0,R().A)(e,t),disabled:me,disabledFeedback:!0}),style:{whiteSpace:"normal"},renderTooltip:()=>me?(0,Q.jsx)(x().sA,{id:"database.tableHeaderCell.editPropertyTooltip.offline",defaultMessage:"Unavailable while offline"}):(0,Q.jsx)(x().sA,{defaultMessage:"Edit property name, type, and other options...",id:"database.tableHeaderCell.editPropertyTooltip"})}),action:()=>{I().Ow({collectionContextStore:V,collectionSettingsStore:q,fromBlockStore:n,hideDuplicatePropertyOption:de}),I().dP({collectionSettingsStore:q,item:{type:"property",formatKey:"collection_page_properties",property:t}})}}),se&&e){const e=[{key:"Move to layout",action:()=>{if(!le)throw new Error("could not find session id for layouts logging");const e=(0,S().Ay)(),o=(0,h().W)(se.getModules());(0,W().UQ)({position:{type:"area_relative",location:"end_moveable",..."views_main_tab_modules"===o.area?{area:o.area,viewId:o.viewsMainTabId}:{area:o.area}},layoutStore:se,environment:ee,module:{type:"property_relation",id:e,propertyId:t},sessionId:le,isPropertyCreation:!1}),null==pe||pe({type:"existing_module",moduleId:e,isDragging:!1}),oe(i,V)},render:e=>(0,Q.jsx)(X().A,{...e,title:(0,Q.jsx)(x().sA,{defaultMessage:"Add to layout",id:"database.configureProperty.moveToLayout"}),icon:(0,Q.jsx)($().I,{icon:f()._})})}];ge.push(e)}ce&&"formula"!==fe.type&&"rollup"!==fe.type&&"button"!==fe.type&&"auto_increment_id"!==fe.type&&"verification"!==fe.type&&!(0,l().F_)(fe.type)&&a.push({key:"comment",render:e=>(0,Q.jsx)(X().A,{...e,title:(0,Q.jsx)(x().sA,{defaultMessage:"Comment",id:"database.tableHeaderCell.comment"}),icon:(0,Q.jsx)($().I,{icon:u().h})}),action:async()=>{await(0,B().l)({environment:ee,blockStore:n,rect:L().A.getRect(n,t),property_id:t}),oe(i,V)}})}const be=[];ge.push(be);let _e=!0;if("relation"===fe.type){var xe;const e=r.collection_page_sections||[],o=e.findIndex((e=>e.section===t)),n=null===(xe=e[o])||void 0===xe?void 0:xe.visibility;!n||"inline"!==n&&"minimal"!==n||(_e=!1)}if("title"!==fe.type&&E.canConfigureBlock&&_e&&!((0,b().gx)(ie)||(0,b()._Q)(ie)||(0,b().V_)(ie))){const e=r.property_visibility;if(e){const n=e.find((e=>e.property===t));be.push({key:"Property Visibility",action:()=>{},render:(e,a)=>(0,Q.jsx)(Y().A,{...e,renderOrigin:e=>(0,Q.jsx)(X().A,{...e,title:(0,Q.jsx)(x().sA,{defaultMessage:"Property visibility",id:"database.configureProperty.propertyVisibilityAction"}),icon:"show"===(null==n?void 0:n.visibility)?(0,Q.jsx)($().I,{icon:y().e}):(0,Q.jsx)($().I,{icon:m().eyeIcon})}),onFocus:a.onFocus,renderExtension:()=>(0,Q.jsx)(re,{property:t,schema:o,format:r,collectionStore:F,pagePropertiesStore:i})})})}}l().cN.includes(fe.type)&&E.canConfigureCollection&&!(0,a().u)(t)&&!E.isExternallyImportedAndSyncedCollection&&((0,l().vB)(fe)&&!de&&be.push({key:"Duplicate Property",render:e=>(0,Q.jsx)(Z().A,{disableTooltip:!me,placement:z().W.Left,render:t=>(0,Q.jsx)(X().A,{...(0,R().A)(e,t),title:(0,Q.jsx)(x().sA,{defaultMessage:"Duplicate property",id:"database.configureProperty.duplicateAction"}),icon:(0,Q.jsx)($().I,{icon:p().V}),disabled:me,disabledFeedback:!0}),style:{whiteSpace:"normal"},renderTooltip:()=>(0,Q.jsx)(x().sA,{id:"database.duplicatePropertyTooltip.offline",defaultMessage:"Unavailable while offline"})}),action:async()=>{oe(i,V),await async function(e,t,o,r,n){const i=o.collection_page_properties||[],a=null==t?void 0:t.getSpaceId();if(!t||!a)return;const l=t.getNormalizedPropertyGroups(),s=await D().W4({environment:n,schema:r,properties:i,property:e,propertyGroups:l,parentStore:t,spaceId:a});if(s){const e=n.currentUser.id,i=e?{id:e,table:_().oo}:void 0;P().createAndCommit({userAction:"PagePropertiesRowName.handleDuplicate",environment:n,canUndo:!0,perform:e=>{(0,A().O9)(s.automationUpdate)&&j().duplicateAutomation({actorPointer:i,environment:n,sourceAutomationStore:s.automationUpdate.sourceAutomationStore,targetAutomationId:s.automationUpdate.targetAutomationId,transaction:e});const a={...r,[s.newProperty]:s.newPropertySchema},l={...o,collection_page_properties:s.newProperties,property_groups:s.newPropertyGroups};(0,O().I)({environment:n,collectionStore:t,update:{schema:a,format:l},transaction:e})}})}}(t,F,r,o,ee)}}),J||be.push({key:"delete",render:e=>(0,Q.jsx)(X().A,{...e,title:(0,Q.jsx)(x().sA,{defaultMessage:"Delete property",id:"database.tableHeaderCell.deleteProperty"}),icon:(0,Q.jsx)($().I,{icon:v().trashIcon}),hoveredStyle:{color:M().Ay.red,fill:M().Ay.red}}),action:async()=>{const e=()=>{var e;if(!ve)return;const o=V.collectionStore(),r=null==o?void 0:o.getSchema(),n=null==o?void 0:o.getFormat();if(!(0===(r&&n?(0,s().T)({format:n,schema:r,visibilityLevels:["inline","minimal"]}):[]).filter((e=>e.section!==t)).length))return;const i=null==o||null===(e=o.getLayoutStore())||void 0===e?void 0:e.getModules().page_main.find((e=>"normalizedTitleWithIcon"===e.type));i&&(null==pe||pe({type:"existing_module",moduleId:i.id,isDragging:!1}))};oe(i,V),await async function(e){let{environment:t,theme:o,property:r,schema:n,collectionStore:i,collectionContextStore:a,onAccept:l}=e;if(!a)return;await T().q({environment:t,collectionContextStore:a,property:r,handleDeleteAccept:()=>(l(),function(e,t,o,r,n){if(!n)return;P().createAndCommitAsync({environment:e,userAction:"PagePropertiesRowName.handleDeleteAccept",waitForServerCommit:!1,perform:n=>C().PF({environment:e,collectionStore:r,schema:o,property:t,transaction:n})});const i=r.getSchema()[t];i&&(0,w().i)({environment:e,collectionContextStore:n,property_type:i.type,from:"table_column",property:t});const a=r.getLayoutStore(),l=(0,U().SR)(r);G().default.state.open||!a||l||(0,H().F)({environment:e,from:"details_sidebar_empty",layoutStore:a,panelLocation:"mainPage",preventPeekWidthResize:!1})}(t,r,n,i,a)),theme:o,from:"table_column"})}({environment:ee,theme:te,property:t,schema:o,collectionStore:F,onAccept:e,collectionContextStore:V})}}));const Me=[];ue&&Me.push({key:"customizeLayout",action:()=>{oe(i,V);const e=V.collectionStore();e&&(0,N().nh)({environment:ee,blockStore:n,collectionStore:e,from:"page_property_menu"})},render:(e,t)=>(0,Q.jsx)(X().A,{...e,title:(0,Q.jsx)(x().sA,{defaultMessage:"Customize layout",id:"pageProperties.editProperty.customizeLayout.label"}),icon:(0,Q.jsx)($().I,{icon:f()._})})});ae||ge.push(Me);return ge}({property:e.property,schema:e.schema,format:e.format,blockStore:e.blockStore,pagePropertiesStore:e.pagePropertiesStore,popupContainerRef:e.popupContainerRef,collectionContextStore:t,permissionScopes:ee,collectionStore:ie,collectionSettingsStore:te,isTypedProperty:ye,environment:k,theme:J,layoutModule:e.layoutModule,layoutSessionId:be,isInPageLayoutEditor:he,layoutStore:ae,isPropertyCommentsEnabled:xe,hideDuplicatePropertyOption:Boolean(e.hideDuplicatePropertyOption),canShowLayoutBuilderEntryPoint:Me,setModuleSelection:_e,editingDisabledOffline:Se});return(0,Q.jsx)(o(935091).A,{...ge,children:(0,Q.jsx)(q().Ay,{type:q().Oh.Vertical,initialFocus:void 0,sections:o(975392).oE(null==Ae?void 0:Ae.map(((e,t)=>{if(e.length>0)return{key:t,render:e=>(0,Q.jsx)(o(88271).A,{...e,topBorder:0!==t}),items:e}})))})})}const te=r.memo(ee);function oe(e,t){e.setState({...e.state,openProperty:void 0});const o=null==t?void 0:t.settingsStore;o&&I().os({collectionSettingsStore:o})}function re(e){let{property:t,schema:o,format:i,collectionStore:a,pagePropertiesStore:l}=e;const s=(0,n().v3)(),c=(0,r.useContext)(V().p2),u=i.property_visibility;if(!u)return null;const d=o[t];if(!d)return null;const p=u.find((e=>e.property===t));return(0,Q.jsx)(J().YB,{propertySchema:d,currentVisibility:(null==p?void 0:p.visibility)||"show",onSelect:e=>function(e,t,o,r,n){P().createAndCommit({userAction:"CustomizePageMenu.handleShowAsClick",environment:n,canUndo:!0,perform:n=>{k().D7({property:t,visibility:e,format:o,store:r,transaction:n})}})}(e,t,i,a,s),onClose:()=>{oe(l,c)}})}function ne(e){let{popupEvents:t,extParent:o,property:i,schema:a,format:l,collectionStore:s,pagePropertiesStore:c}=e;const u=(0,n().v3)(),d=(0,r.useContext)(V().p2),p=l.collection_page_sections||[];if(!a[i])return null;const m=p.findIndex((e=>e.section===i)),y=p[m];return(0,Q.jsx)(J().Wf,{currentVisibility:(null==y?void 0:y.visibility)||"section_hide",onSelect:e=>{C().Z7({visibility:e,property:i,schema:a,collectionStore:s,format:l,environment:u}),oe(c,d)},onClose:()=>{o.close()}})}},954397:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,slidersIcon:()=>i});o(242343);var r=o(163643);const n={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M3 7.375h6.829a2.501 2.501 0 0 0 4.842 0H17a.625.625 0 1 0 0-1.25h-2.329a2.501 2.501 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25M12.25 5.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M7.75 15.75a2.5 2.5 0 0 0 2.421-1.875H17a.625.625 0 1 0 0-1.25h-6.829a2.5 2.5 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25h2.329A2.5 2.5 0 0 0 7.75 15.75m0-1.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})]})},i=(0,o(680369).wt)("sliders",n)},963644:(e,t,o)=>{o.d(t,{i:()=>i});var r=()=>o(876695),n=()=>o(658294);function i(e){const{environment:t,collectionContextStore:o,property_type:i,from:a,property:l,...s}=e,c=(0,r().sl)(o)||{};(0,n().G)(t,{property:l,property_type:i,from:a,...s,...c})}},994488:(e,t,o)=>{o.d(t,{o:()=>r});o(362833),o(403517);function r(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(0===o.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...r(o[0],...o.slice(1)).map((e=>[a,...e])));return i}}}]);