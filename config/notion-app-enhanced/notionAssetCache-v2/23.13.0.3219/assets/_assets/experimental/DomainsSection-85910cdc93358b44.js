"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[56859],{39394:(e,t,i)=>{i.d(t,{A:()=>b});var s=i(242343),r=()=>i(803290),n=()=>i(174114),o=()=>i(712437),a=()=>i(250122),l=()=>i(333889),d=()=>i(931085),c=()=>i(28210),u=()=>i(709237),h=()=>i(29869),p=()=>i(906230),m=()=>i(382160),g=()=>i(330358),v=i(163643);function b(e){const{store:t,style:i,hideIcon:b}=e,f=(0,r().K8)((()=>{if(t)return{icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),url:(0,h().J8)({store:t,pageVisitSource:o().y8.SiteSettings})}}),[t]),y=(0,s.useCallback)((e=>{e.metaKey||g().A.setState({...g().A.state,open:!1})}),[]),S=(0,n().IS)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden",cursor:"default"},emptyPageIcon:{height:18,width:18,fill:e.accentColors.gray[500]},iconContainer:{position:"relative",width:20,height:20,marginRight:4},linkBox:{borderRadius:3,maxWidth:"100%"},linkIcon:{position:"absolute",width:10,height:10,right:0,bottom:0},pageRecordContainer:{display:"flex",alignItems:"center",paddingTop:2,paddingBottom:2,paddingRight:4,paddingLeft:4,...i},pageTitle:{wordBreak:"break-word",borderBottom:"0.05em solid rgba(55,53,47,.25)"}})),[i]);if(!t||!f)return null;const A=(0,v.jsxs)("div",{style:S.pageRecordContainer,children:[!b&&(0,v.jsxs)("div",{style:S.iconContainer,children:[f.icon?(0,v.jsx)(c().B,{icon:f.icon,store:t,disabled:!0,size:16,isEmptyPage:f.isEmptyPage,emojiSize:20}):(0,a().n)(S.emptyPageIcon),(0,l().G)(S.linkIcon)]}),(0,v.jsx)(u().A,{store:t,style:S.pageTitle})]});return(0,v.jsx)("div",{style:S.container,children:(0,v.jsx)(m().A,{store:t,render:e=>(0,v.jsx)(d().A,{href:null==f?void 0:f.url,style:S.linkBox,...(0,p().A)(e,{onClick:y}),children:A})})})}},40504:(e,t,i)=>{i.d(t,{EL:()=>w,KD:()=>A,Ss:()=>y,l2:()=>x,n0:()=>C,rw:()=>S});i(610931),i(362833),i(725707),i(491955),i(242343);var s=()=>i(220574),r=()=>i(145017),n=()=>i(653998),o=()=>i(23371),a=()=>i(818369),l=()=>i(145046),d=()=>i(509484),c=()=>i(480415),u=()=>i(422340),h=()=>i(802955),p=()=>i(413871),m=()=>i(189823),g=()=>i(213094),v=()=>i(913001),b=i(163643);const f=50;function y(e){v().A.resetSitesForSpace(e.id)}async function S(e,t){const{spaceStore:i,currentUserId:n,limit:l}=t;if(!i.id)return;const[d]=await Promise.all([a().callApi({eventName:"getPublishedPagesForUser",environment:e,data:{spaceId:i.id,limit:l||f,fetchPublishedMetadata:!0}}),(0,o().wR)(1500)]);if("failed"===d.type)throw new Error("Failed to fetch published pages.");if(d.data.recordMap){const e=[],t=s().RecordMapWithRole.create(d.data.recordMap),o=d.data.publishedEdits;for(const{model:s}of t)if(s&&s.table===r().ev){const t=p().Bv.createChildStore(i,{table:r().ev,id:s.id}),n=o[t.id],a=n&&n.authors?n.authors[0]:void 0,l={publishedTime:null==n?void 0:n.timestamp,publishedBy:a};e.push({store:t,publishedMetadata:l})}let a=e;return n&&(a=g().X(e,n)),v().A.initializeSiteResultsForSpace(i.id,a),a}}async function A(e,t){const{spaceStore:i}=t,s=e.currentUser.id,r=await S(e,{spaceStore:i,currentUserId:s});return r?r.filter((e=>{var t;return(null===(t=e.publishedMetadata.publishedBy)||void 0===t?void 0:t.id)===s})):[]}function C(e){c().Tk(e),u().Ay.setState({...u().Ay.state,display:u().pP.Publish,tab:u().QC.Publish})}async function w(e){return new Promise(((t,i)=>{l().ui({message:(0,b.jsx)("div",{style:{textAlign:"center"},children:(0,b.jsx)(n().sA,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,b.jsx)("div",{style:{textAlign:"center"},children:(0,b.jsx)(n().sA,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,b.jsx)(n().sA,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}async function x(e,t){if(!h().A.state.online)return[];const i=await d().T.searchActions.load();return await i.searchPublicPages({environment:t,query:e,source:"public_home_page_menu",limit:m().ZK})}},78245:(e,t,i)=>{i.d(t,{z:()=>o});i(242343);var s=()=>i(129978),r=i(163643);const n=new(s().O2)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await i.e(79883).then(i.bind(i,824997));return{CollectionItemCover:e}})),o=(0,s()._h)(n,(e=>e.CollectionItemCover),{renderLoading:(e,t)=>{const{coverHeight:s,coverSizeFormat:n,emptyGalleryCoverStyle:o,showEmptyGalleryCover:a}=t;return a?(0,r.jsx)(i(803291).t,{coverHeight:s,coverSizeFormat:n,emptyGalleryCoverStyle:o}):null}})},213094:(e,t,i)=>{i.d(t,{X:()=>n,c:()=>o});i(725707),i(500234);var s=()=>i(446588),r=()=>i(352723);function n(e,t){return e.sort(((e,i)=>{const s=e.store.canAdmin();if(s===i.store.canAdmin()){var r,n;const s=null===(r=e.publishedMetadata.publishedBy)||void 0===r?void 0:r.id,o=e.publishedMetadata.publishedTime,a=null===(n=i.publishedMetadata.publishedBy)||void 0===n?void 0:n.id,l=i.publishedMetadata.publishedTime;if(t){if(s===t&&a===t&&o&&l)return l-o;if(s===t)return-1;if(a===t)return 1}return o&&l?l-o:0}return s?-1:1}))}function o(e){const{environment:t,store:i}=e;if(!i.pathIsAccessibleAndAlive())return!1;if(!r().i0(i).find((e=>(0,s().W8)(e.permissionItem))))return!1;return!r().qb(t,i)}},382160:(e,t,i)=>{i.d(t,{A:()=>a});var s=i(242343),r=()=>i(907721),n=i(163643);function o(e){let{store:t,...o}=e;const a=(0,s.useCallback)((e=>(0,n.jsx)(i(206363).yf,{store:t,events:e})),[t]);return(0,n.jsx)(i(103151).A,{noStyle:!0,delayThreshold:400,placement:r().W.Bottom,alignment:r().C.Start,renderTooltip:a,...o})}const a=s.memo(o)},803291:(e,t,i)=>{i.d(t,{t:()=>n});var s=i(242343),r=i(163643);const n=s.memo((function(e){const{coverHeight:t,coverSizeFormat:s,emptyGalleryCoverStyle:n}=e,o=(0,i(174114).IS)((()=>({container:{height:(0,i(869596).F)(t,s),...n}})),[t,s,n]);return(0,r.jsx)("div",{style:o.container})}))},869596:(e,t,i)=>{i.d(t,{F:()=>r});var s=()=>i(551116);function r(e,t){if(e)return e;switch(t){case"large":return s().A.card.desktop.large.height;case"small":return s().A.card.desktop.small.height;default:return s().A.card.desktop.medium.height}}},913001:(e,t,i)=>{i.d(t,{A:()=>n});i(725707),i(491955);var s=()=>i(975392);class r extends(()=>i(129044))().default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}getSortedSitesForSpace(e,t){const{sortAscending:r,sortColumn:n}=this.state,o=this.state.sites[e];if(o)switch(n){case"page":return s().My(o,(e=>i(34662).q4_(e.store.getTitleValue()).toLowerCase()),r?"asc":"desc");case"published-by":return s().My(o,(e=>{const s=e.publishedMetadata.publishedBy,r=s?i(413871).sk.createChildStore(e.store,s):void 0;return null==r?void 0:r.getDisplayName(t).toLowerCase()}),r?"asc":"desc");case"published-date":return s().My(o,(e=>e.publishedMetadata.publishedTime),r?"asc":"desc");default:return o}}removeSiteFromSpace(e,t){const i=this.state.sites[e];i&&(this.state.sites[e]=i.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const n=new r}}]);