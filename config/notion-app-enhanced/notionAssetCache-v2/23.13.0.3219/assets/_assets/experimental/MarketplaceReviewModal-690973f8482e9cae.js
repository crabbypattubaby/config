"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5999],{210368:(e,t,a)=>{a.r(t),a.d(t,{MarketplaceReviewModal:()=>P});var i=a(242343),l=()=>a(237385),s=()=>a(803290),r=()=>a(951592),o=()=>a(76394),n=()=>a(539048),d=()=>a(137476),c=()=>a(836331),u=()=>a(160500),m=(a(610931),a(96085),a(725707),a(771702),()=>a(174114)),g=()=>a(162901),p=()=>a(653998),h=()=>a(59175),b=()=>a(323446),f=()=>a(485966),x=()=>a(74385),y=()=>a(292729),M=()=>a(106831),v=a(163643);function k(){const e=(0,p().tz)(),t=(0,l().v3)(),a=(0,m().IS)((e=>({body:{display:"flex",flexDirection:"column",width:"100%",gap:"16px"}})),[]),[r,o]=(0,i.useState)(""),[n,d]=(0,i.useState)(),[c,k]=(0,i.useState)(""),[C,T]=(0,i.useState)(),[I,B]=(0,i.useState)(""),[A,D]=(0,i.useState)(),L=(0,s().K8)((()=>{var t;return null===(t=f().default.state.currentUserStore)||void 0===t?void 0:t.getDisplayName(e,!0)}),[e]);(0,i.useEffect)((()=>{L&&B(L)}),[L]);const{acquisitionId:N,rating:z,source:P}=(0,s().O$)(u().A),{trackRateListing:Y,trackReviewListing:_}=(0,M().o)(N),O=(0,s().K8)((()=>u().A.getReviewId(N)),[N]),[E,H]=(0,g().V$)((async()=>{const e={title:r,description:c,name:I};return O?(0,x().TG)({environment:t,reviewId:O,...e}):(0,x().Df)({environment:t,acquisitionId:N,rating:z,...e})}),[t,O,N,z,r,c,I]);return(0,v.jsx)("form",{method:"dialog",children:(0,v.jsx)(y().Y,{title:e.formatMessage(S.modalTitle),subTitle:e.formatMessage(S.modalSubTitle),body:(0,v.jsxs)("div",{style:a.body,children:[(0,v.jsx)(b().O,{name:e.formatMessage(S.title),htmlLabel:w,errorMessage:n,children:(0,v.jsx)(h().A,{id:w,placeholder:e.formatMessage(S.titlePlaceholder),value:r,onChange:e=>{o(e.target.value),d(void 0)},"aria-invalid":Boolean(n),autoComplete:"off"})}),(0,v.jsx)(b().O,{name:e.formatMessage(S.review),htmlLabel:j,errorMessage:C,children:(0,v.jsx)(h().A,{id:j,placeholder:e.formatMessage(S.reviewPlaceholder),value:c,onChange:e=>{k(e.target.value),T(void 0)},textarea:!0,autosize:!0,autosizeMinHeight:50,textareaSubmitOnEnter:!1,showClearButton:!0,"aria-invalid":Boolean(C),autoComplete:"off"})}),(0,v.jsx)(b().O,{name:e.formatMessage(S.name),htmlLabel:R,errorMessage:A,children:(0,v.jsx)(h().A,{id:R,placeholder:e.formatMessage(S.namePlaceholder),value:I,onChange:e=>{B(e.target.value),D(void 0)},showClearButton:!0,"aria-invalid":Boolean(A)})})]}),actions:[{type:"primary",text:e.formatMessage(S.submit),onClick:async()=>{try{await H(),_({type:"add",source:P}),z&&Y({type:"add",surface:"emptyState",rating:z,source:P}),u().A.updateState({stage:"success"})}catch(e){e instanceof AggregateError&&e.errors.forEach((e=>{"title"===e.cause?d(e.message):"description"===e.cause?T(e.message):"name"===e.cause&&D(e.message)}))}},isDisabled:Boolean(n||C),isLoading:"pending"===E.status},{type:"plain",text:e.formatMessage(S.skip),onClick:()=>u().A.closeModal()}]})})}const w="marketplace-review-title",j="marketplace-review-review",R="marketplace-review-name",S=(0,p().YK)({modalTitle:{id:"marketplace.submitRatingModal.details.modalTitle",defaultMessage:"Share your thoughts"},modalSubTitle:{id:"marketplace.submitRatingModal.details.modalSubTitle",defaultMessage:"Leave a review for the Notion community"},title:{id:"marketplace.submitRatingModal.details.title",defaultMessage:"Title"},titlePlaceholder:{id:"marketplace.submitRatingModal.details.titlePlaceholder",defaultMessage:"My review"},review:{id:"marketplace.submitRatingModal.details.review",defaultMessage:"Review"},reviewPlaceholder:{id:"marketplace.submitRatingModal.details.reviewPlaceholder",defaultMessage:"This template is..."},name:{id:"marketplace.submitRatingModal.details.name",defaultMessage:"Name shown on review"},namePlaceholder:{id:"marketplace.submitRatingModal.details.namePlaceholder",defaultMessage:"Your name"},submit:{id:"marketplace.submitRatingModal.details.submit",defaultMessage:"Submit"},skip:{id:"marketplace.submitRatingModal.details.skip",defaultMessage:"Skip"}});var C=()=>a(509566),T=()=>a(998545);function I(){const e=(0,p().tz)(),{acquisitionId:t,source:a}=(0,s().O$)(u().A),{onRatingConfirmed:i,onSubmit:l,isLoading:r,error:o}=(0,T()._)({acquisitionId:t,source:a});return(0,v.jsx)("form",{method:"dialog",children:(0,v.jsx)(y().Y,{title:(0,v.jsx)("div",{id:B,children:e.formatMessage(A.rateThisTemplate)}),body:(0,v.jsx)(C().v,{labelledBy:B,error:o,onRatingConfirmed:i}),actions:[{type:"primary",text:e.formatMessage(A.submit),onClick:async()=>{try{await l(),u().A.updateState({stage:"details"})}catch(e){}},isDisabled:Boolean(o),isLoading:r},{type:"plain",text:e.formatMessage(A.cancel),onClick:()=>u().A.closeModal()}]})})}const B="rate-this-template",A=(0,p().YK)({rateThisTemplate:{id:"marketplace.submitRatingModal.rateThisTemplate",defaultMessage:"Rate this template"},submit:{id:"marketplace.submitRatingModal.submit",defaultMessage:"Submit"},cancel:{id:"marketplace.submitRatingModal.cancel",defaultMessage:"Cancel"}});const D=(0,a(680369).xh)("bubbleEllipses",{default:{loader:()=>a.e(76378).then(a.bind(a,941146))},small:{loader:()=>a.e(76378).then(a.bind(a,890176))},fill:{loader:()=>a.e(76378).then(a.bind(a,325658))},fillSmall:{loader:()=>a.e(76378).then(a.bind(a,137971))}},["speech","bubble","typing","type","reply","replying","waiting","message","comment"]);var L=()=>a(206799);function N(){const e=(0,p().tz)();return(0,v.jsx)(y().Y,{icon:(0,v.jsx)(L().Q,{iconGroup:D,colorName:"secondary",variantName:"default",overrideSize:()=>36}),title:e.formatMessage(z.title),subTitle:e.formatMessage(z.subTitle),actions:[{type:"outline",text:e.formatMessage(z.done),onClick:()=>u().A.closeModal()}],width:300})}const z=(0,p().YK)({title:{id:"marketplace.submitRatingModal.success.title",defaultMessage:"Reviewing your submission"},subTitle:{id:"marketplace.submitRatingModal.success.subTitle",defaultMessage:"Your review will be visible after itâ€™s been approved by our team"},done:{id:"marketplace.submitRatingModal.success.gotIt",defaultMessage:"Got it"}});function P(){const e=(0,l().v3)(),{isOpen:t,stage:a,source:m}=(0,s().O$)(u().A),g=(0,r().ZC)(a);(0,i.useEffect)((()=>{if(t){const t={stage:a,previous_stage:g!==a?g:void 0,source:m};(0,d().u4)({environment:e,event:{eventName:"view_marketplace_review_modal",eventProperties:t}}),c().default.logEvent("view_marketplace_review_modal",a,t)}}),[e,t,a,g,m]);const p=(0,i.useCallback)((()=>{u().A.closeModal()}),[]),h=(0,i.useCallback)((()=>{switch(a){case"rating":return(0,v.jsx)(I,{});case"details":return(0,v.jsx)(k,{});case"success":return(0,v.jsx)(N,{});default:(0,o().HB)(a)}}),[a]);return(0,v.jsx)(n().s,{isOpen:t,onDismiss:p,showCloseIcon:"success"!==a,render:h,animateSizeTransition:!1})}},292729:(e,t,a)=>{a.d(t,{Y:()=>u});a(403517),a(242343);var i=()=>a(237385),l=()=>a(174114),s=()=>a(76394),r=()=>a(209684),o=()=>a(701270),n=()=>a(286404),d=()=>a(951540),c=a(163643);function u(e){let{icon:t,title:a,subTitle:s,body:r,actions:n,width:d,style:u}=e;const g=(0,i().Y0)(),p=function(e){let{width:t=406,style:a={}}=e;return(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:t,padding:"20px",gap:"24px",...a},header:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"8px"},headerPadding:{paddingTop:"16px"},actions:{display:"flex",flexDirection:"column",gap:"6px",width:"100%"}})),[t,a])}({width:d,style:u});return(0,c.jsxs)("div",{style:p.container,children:[(0,c.jsxs)(o().D,{styleName:g.isMobile?"UITitle-26px/Bold":"Heading-17px/Medium",style:{...p.header,...!t&&p.headerPadding},children:[t,a,s?(0,c.jsx)(o().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:s}):null]}),r,(0,c.jsx)("div",{style:p.actions,children:null==n?void 0:n.map(((e,t)=>(0,c.jsx)(m,{...e},`marketplace-modal-action-${t}`)))})]})}function m(e){const t=(0,i().Y0)(),a=function(){const e=(0,i().Y0)();return(0,l().IS)((t=>({mobileButton:e.isMobile?{height:48,borderRadius:12}:{},plainButton:{justifyContent:"center"},actionError:{textAlign:"center"}})),[e.isMobile])}();return(0,c.jsxs)(c.Fragment,{children:[(()=>{switch(e.type){case"primary":return(0,c.jsx)(d().A,{size:"lg",onClick:e.onClick,disabled:e.isDisabled,isLoading:e.isLoading,color:t.isMobile?"black":"uiBlue",style:a.mobileButton,children:(0,c.jsx)(o().D,{styleName:t.isMobile?"Heading-17px/Medium":"UIRegular-14px/Medium",children:e.text})});case"outline":return(0,c.jsx)(n().A,{size:"lg",onClick:e.onClick,style:a.mobileButton,children:(0,c.jsx)(o().D,{styleName:t.isMobile?"Heading-17px/Medium":"UIRegular-14px/Medium",children:e.text})});case"plain":return(0,c.jsx)(r().p,{size:"lg",onClick:e.onClick,isBlue:e.isBlue,isGray:!e.isBlue,style:{...a.plainButton,...a.mobileButton},children:(0,c.jsx)(o().D,{styleName:t.isMobile?"Heading-17px/Regular":"UIRegular-14px/Regular",children:e.text})});default:(0,s().HB)(e)}})(),e.error&&(0,c.jsx)(o().D,{styleName:"UIRegular-14px/Regular",colorName:"redTertiary",customStyles:a.actionError,children:e.error})]})}},323446:(e,t,a)=>{a.d(t,{A:()=>n,O:()=>o});a(242343);var i=()=>a(174114),l=()=>a(220413),s=()=>a(31448),r=a(163643);function o(e){const{name:t,htmlLabel:a,children:s,errorMessage:o,hideLabel:n,style:c={},labelStyle:u={},errorMessageStyle:m={},required:g}=e,p=(0,i().IS)((e=>({formInputContainer:{display:"flex",flexDirection:"column",gap:6,width:"100%"},formLabel:{color:e.darkTextColor,visibility:n?"hidden":"inherit"},errorMessage:{fontSize:12,color:e.errorText,...m},wrapper:{display:"flex",alignItems:"center"},required:{color:l().Ay.red,marginLeft:2}})),[n,m]);return(0,r.jsxs)("div",{style:{...p.formInputContainer,...c},children:[(0,r.jsxs)("div",{style:p.wrapper,children:[(0,r.jsx)(d,{htmlFor:a,style:{...p.formLabel,...u},children:t}),g&&(0,r.jsx)("div",{style:p.required,children:"*"})]}),s,o&&(0,r.jsx)("div",{role:"alert",style:p.errorMessage,children:o})]})}const n=o;function d(e){const{children:t,htmlFor:a,style:l}=e,o=(0,i().IS)((e=>({base:{lineHeight:s().K_.UISmall.desktop,fontSize:s().J.UISmall.desktop,color:e.text.primary}})),[]);return(0,r.jsx)("label",{htmlFor:a,style:{...o.base,...l},children:t})}}}]);