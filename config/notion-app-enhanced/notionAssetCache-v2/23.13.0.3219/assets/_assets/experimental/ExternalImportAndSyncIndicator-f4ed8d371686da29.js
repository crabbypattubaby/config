"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[98288],{96718:(e,t,n)=>{n.d(t,{l:()=>i});var o=()=>n(706788);const l={[o().e1]:"collection_connected_property_figma",[o().Hd]:"collection_connected_property_google_drive",[o().ob]:"collection_connected_property_github",[o().k0]:"collection_connected_property_zendesk",[o().bh]:"collection_synced_database_github",[o().MN]:"collection_synced_database_asana",[o().Fo]:"collection_synced_database_gitlab",[o().me]:"collection_synced_database_jira",[o().F6]:"collection_synced_database_jira_workspace",[o().Fv]:"collection_synced_database_jira_datacenter"};function i(e){if(e)return l[e]}},338828:(e,t,n)=>{n.r(t),n.d(t,{arrowInCircleUpFillIcon:()=>l,iconDefinition:()=>o});n(242343);const o={viewBox:"0 0 20 20",svg:(0,n(163643).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},l=(0,n(680369).wt)("arrowInCircleUpFill",o)},475105:(e,t,n)=>{n.d(t,{H5:()=>v,ZY:()=>h,gk:()=>f,kM:()=>_});n(242343);var o=()=>n(16791),l=()=>n(237385),i=()=>n(803290),c=()=>n(174114),s=()=>n(338828),a=()=>n(653998),r=()=>n(31448),d=()=>n(204435),p=()=>n(397791),g=()=>n(286404),y=()=>n(755786),u=()=>n(755989),x=()=>n(943066),m=()=>n(510359),S=n(163643);function _(e){const{collectionContextStore:t,property:n,compact:o}=e,l=(0,i().K8)((()=>y().Jq(t,n)),[t,n]),c=(0,u().kg)(l);return c?(0,S.jsx)(f,{featureName:c,compact:o,source:"collection_connected_property"}):null}function f(e){const t=(0,l().v3)(),{featureName:n,compact:o,source:i}=e,y=(0,c().IS)((e=>({background:{backgroundColor:e.surface.wash,display:"flex",flexDirection:"row",marginLeft:8,marginRight:8,marginBottom:12,borderRadius:8,padding:"12px 14px",gap:8},icon:{width:20,height:20,padding:o?0:2,marginRight:2,marginLeft:o?0:2},title:{lineHeight:r().K_.UIRegular.desktop,fontSize:r().J.UIRegular.desktop,letterSpacing:"-0.15px",color:e.text.primary,marginBottom:4,display:"flex",flexDirection:"row"},description:{lineHeight:r().K_.UIRegular.desktop,fontSize:r().J.UIRegular.desktop,letterSpacing:"-0.15px",color:e.text.secondary,marginBottom:12},button:{width:"fit-content",padding:"4px 8px",marginBottom:2}})),[o]),m=(0,u().uF)({featureName:n});if(null==m||!m.upsell)return null;const{upsell:_,upsellTier:f,expirationDate:j}=m,C=(0,S.jsx)(p().I,{style:y.icon,icon:s().arrowInCircleUpFillIcon,color:"uiBluePrimary"});return(0,S.jsxs)("div",{style:y.background,children:[o?null:C,(0,S.jsxs)(d().VP,{gap:0,children:[(0,S.jsxs)("div",{style:y.title,children:[o?C:null,(0,S.jsx)(h,{upsellTier:f})]}),(0,S.jsx)("div",{style:y.description,children:(0,S.jsx)(v,{expirationDate:j,hasLearnMore:!0})}),(0,S.jsx)(g().A,{style:y.button,onClick:()=>{x().K(t,{from:i,upsell:_})},children:(0,S.jsx)(a().sA,{defaultMessage:"Upgrade",id:"collectionSettings.connectedRelationUpsell.upgrade"})})]})]})}function h(e){let{upsellTier:t}=e;return(0,S.jsx)(a().sA,{defaultMessage:"Upgrade to {upsellTier, select, plus {Plus} business {Business} enterprise {Enterprise} other {connect}}",id:"collectionSettings.connectedRelationUpsell.title",values:{upsellTier:t}})}function v(e){let{expirationDate:t,hasLearnMore:n}=e;return t?(0,S.jsx)(a().sA,{defaultMessage:"You will lose access to this feature on {expirationDate}.{hasLearnMore, select, true { {learnMoreLink}} other {} }",id:"collectionSettings.collectionPremiumFeatureUpsell.expiration.description",values:{expirationDate:t.setLocale(o().locale).toLocaleString({month:"long",day:"numeric"}),hasLearnMore:n,learnMoreLink:(0,S.jsx)(m().V,{})}}):(0,S.jsx)(a().sA,{defaultMessage:"You don’t have access to this feature.{hasLearnMore, select, true { {learnMoreLink}} other {} }",id:"collectionSettings.collectionPremiumFeatureUpsell.noExpiration.description",values:{hasLearnMore:n,learnMoreLink:(0,S.jsx)(m().V,{})}})}},510359:(e,t,n)=>{n.d(t,{V:()=>s});n(242343);var o=()=>n(174114),l=()=>n(653998),i=n(163643);const c="https://www.notion.com/blog/notion-ai-for-work";function s(){const e=(0,o().IS)((e=>({default:{cursor:"pointer",textDecoration:"none",color:e.text.uiBluePrimary}})),[]);return(0,i.jsx)("a",{href:c,target:"_blank",style:{...e.default},children:(0,i.jsx)(l().sA,{id:"PackingChangeLearnMore.learnMore",defaultMessage:"Learn more"})})}},517722:(e,t,n)=>{n.d(t,{A:()=>L,m:()=>z});n(242343);var o=()=>n(237385),l=()=>n(803290),i=()=>n(174114),c=()=>n(810111),s=()=>n(338828),a=()=>n(384818),r=()=>n(723361),d=()=>n(96718),p=()=>n(653998),g=()=>n(220413),y=()=>n(31448),u=()=>n(521325),x=()=>n(750094),m=()=>n(475105),S=()=>n(137476),_=()=>n(251763),f=()=>n(370639),h=()=>n(439146),v=()=>n(289113),j=()=>n(755989),C=()=>n(963768),b=()=>n(943066),I=()=>n(204435),T=()=>n(356813),A=()=>n(931085),k=n(163643);const w=(0,p().YK)({upgrade:{defaultMessage:"Upgrade",id:"syncedCollectionIndicators.upsell.upgrade"}});const L=function(e){let{collectionStore:t,collectionContextStore:n}=e;return(0,l().K8)((()=>t.isSyncedCollection()),[t])?(0,k.jsx)(H,{collectionStore:t,collectionContextStore:n}):null};function M(e){return{color:e.text.secondary,fontSize:12,lineHeight:1.2}}function B(e){let{collectionStore:t,collectionContextStore:n}=e;const c=(0,i().DP)(),s=(0,o().v3)(),d=(0,l().K8)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("syncing").getValue()),[t]),y=(0,l().K8)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("last_synced_at").getValue()),[t]),x=(0,l().K8)((()=>null==n?void 0:n.numberChildrenUnfurledStore.state),[n]),m=(0,l().K8)((()=>null==n?void 0:n.numberChildrenReceivedStore.state),[n]),S=x&&m&&x/m<1&&!s.device.isMobile,_=d&&s.device.isMobile;let f;return y&&(f=(0,k.jsx)(p().sA,{defaultMessage:"Synced {lastSyncedAt}",id:"synced.lastSyncedAt.label",values:{lastSyncedAt:(0,v().nl)(y,{useLowercase:!0})}})),"row_limit_exceeded"===d?(0,k.jsx)(A().A,{style:{display:"inline-flex",...M(c)},onClick:()=>function(e){e&&(u().Ow({collectionContextStore:e,collectionSettingsStore:e.settingsStore}),u().a2({collectionSettingsStore:e.settingsStore,item:{type:"source"}}))}(n),children:(0,k.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...M(c)},children:[(0,r().Q)({fill:(0,g().k5)("orange",c).fill,marginLeft:4,marginRight:4,width:12,alignSelf:"center"}),(0,k.jsx)(p().sA,{defaultMessage:"Partial Sync",id:"synced.partial_sync.label"})]})}):S||_?(0,k.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...M(c)},children:[(0,k.jsx)(p().sA,{defaultMessage:"Syncing",id:"synced.syncing.label"}),(0,a().$)({marginLeft:4,marginRight:4,width:12,alignSelf:"center"},"sync-spinner")]}):(0,k.jsx)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...M(c)},children:f})}function F(){const e=(0,o().v3)(),t=(0,i().IS)((e=>({span:{color:e.text.secondary},linkBox:{fontSize:"14px",lineHeight:1.2,color:e.blueColor,marginLeft:"5px",marginRight:"5px"}})),[]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{style:t.span,children:"•"}),(0,k.jsx)(A().A,{inline:!0,onClick:async()=>{await x().jh({environment:e,from:"collection_header"});const t=C().Ay.createNewFlowId();(0,S().u4)({environment:e,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"database_sync",flowId:t}}})},style:t.linkBox,hoveredStyle:{background:"none",textDecoration:"underline"},children:(0,k.jsx)(p().sA,{defaultMessage:"Improve your Jira sync",id:"synced.improve_jira_sync.label"})})]})}function H(e){let{collectionStore:t,collectionContextStore:n}=e;const o=(0,i().DP)(),s=(0,l().K8)((()=>t.getFormatStore().getKeyStore("original_url").getValue()),[t]),a=(0,l().K8)((()=>t.getSpaceId()),[t]),r=(0,l().K8)((()=>Boolean(t.getFormatStore().getKeyStore("sync_state").getValue())),[t]),d=(0,l().K8)((()=>s&&(0,_().e)(s,a)),[a,s]),p=(0,l().K8)((()=>(0,h().fH)(s,a)),[a,s]),g=(0,l().K8)((()=>{if(!(0,f().pB)())return!1;const e=t.getFormat().uri;return!!e&&(t.getFormat().external_collection_type!==c().uO.Jira&&(0,h().Ip)(e))}),[t]);return(0,k.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[d&&(0,k.jsx)(A().A,{href:d,style:{display:"inline-flex"},hoveredStyle:{background:"none",textDecoration:"underline"},innerStyle:{flexShrink:1,width:"none",padding:"2px 0px",marginRight:5,borderRadius:4,display:"flex",alignItems:"center",alignSelf:"center",...M(o)},external:!0,children:p}),r?(0,k.jsx)("span",{style:{color:o.text.secondary},children:"•"}):null,r?(0,k.jsx)(B,{collectionStore:t,collectionContextStore:n}):null,g&&(0,k.jsx)(F,{}),(0,k.jsx)(P,{collectionStore:t})]})}function P(e){let{collectionStore:t}=e;const n=(0,l().K8)((()=>{const e=(0,h().cl)(t.getFormat().uri,t.getSpaceId());return(null==e?void 0:e.id)??t.getFormat().integration_id}),[t]),o=(0,d().l)(n);return o?(0,k.jsx)(z,{featureName:o}):null}function z(e){let{featureName:t}=e;const n=(0,o().v3)(),l=(0,p().tz)(),c=(0,i().IS)((e=>({upgradeDescription:{fontSize:y().J.UISmall.desktop,lineHeight:y().K_.UISmall.desktop,color:e.text.secondary}})),[]),a=(0,j().uF)({featureName:t});if(null==a||!a.upsell)return null;const{upsell:r,expirationDate:d}=a;return(0,k.jsxs)(I().fI,{alignItems:"center",children:[(0,k.jsx)(T().A,{onClick:()=>{b().K(n,{from:"collection_synced_database",upsell:r})},isBlue:!0,size:"sm",icon:s().arrowInCircleUpFillIcon,ariaLabel:l.formatMessage(w.upgrade)}),(0,k.jsx)("div",{style:c.upgradeDescription,children:(0,k.jsx)(m().H5,{expirationDate:d,hasLearnMore:!0})})]})}},703143:(e,t,n)=>{n.d(t,{l:()=>i});var o=()=>n(83544),l=()=>n(810111);const i={[l().uO.Jira]:o().A.images.externalIntegrations.jiraPng,[l().uO.Salesforce]:o().A.images.externalIntegrations.salesforcePng}},755989:(e,t,n)=>{n.d(t,{Ld:()=>d,kg:()=>p,uF:()=>g});var o=()=>n(803290),l=()=>n(564134),i=()=>n(706788),c=()=>n(405317),s=()=>n(96718),a=()=>n(485966),r=()=>n(133926);function d(e){let{spaceId:t,userId:n}=e;const o=(0,r()._X)({name:"collection_connected_property_figma",spaceId:t,userId:n}),l=(0,r()._X)({name:"collection_connected_property_github",spaceId:t,userId:n}),c=(0,r()._X)({name:"collection_connected_property_google_drive",spaceId:t,userId:n}),s=(0,r()._X)({name:"collection_connected_property_zendesk",spaceId:t,userId:n});return{[i().e1]:o,[i().ob]:l,[i().Hd]:c,[i().k0]:s}}function p(e){if(!e)return;const t=e&&(0,l().UU)(e)?e.connectedRelation.integration_id:void 0;return(0,s().l)(t)}function g(e){let{featureName:t}=e;const n=function(e){const t=e.featureName,n=(0,o().K8)((()=>{var t;return e.spaceId??(null===(t=a().default.state.currentSpaceStore)||void 0===t?void 0:t.id)}),[e.spaceId]),l=(0,o().K8)((()=>{var t;return e.userId??(null===(t=a().default.state.currentUserStore)||void 0===t?void 0:t.id)}),[e.userId]);return(0,r()._X)({name:t,spaceId:n,userId:l})}({featureName:t});if(!n)return;const l=(0,c().e2)(n),i=(0,c().Xq)(n);let s,d;return!i||"product"!==i.type||"plus"!==i.product&&"business"!==i.product&&"enterprise"!==i.product||(s=i.product),l&&(d=l&&n.expiry&&"sunset"===n.expiry.type?n.expiry.endDate:void 0),{isAvailable:l,expirationDate:d,upsell:i,upsellTier:s}}},941161:(e,t,n)=>{n.d(t,{u:()=>l});n(242343);var o=n(163643);const l=(0,n(680369).wt)("unsync",{viewBox:"0 0 30 30",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.768 23.295l1.353 1.351a11.298 11.298 0 01-6.118 1.81c-5.862 0-10.781-4.538-11.387-10.254h-1.55c-.809 0-1.011-.55-.573-1.168l2.516-3.572c.37-.527.91-.516 1.269 0l2.515 3.583c.427.606.225 1.157-.572 1.157H5.536a9.496 9.496 0 009.467 8.344c1.74 0 3.366-.454 4.765-1.251zM10.233 6.723l-1.361-1.36a11.26 11.26 0 016.131-1.818c5.851 0 10.782 4.548 11.388 10.265h1.539c.808 0 1.021.539.572 1.167l-2.504 3.572c-.37.528-.91.516-1.27 0l-2.515-3.583c-.427-.617-.224-1.156.573-1.156h1.673a9.503 9.503 0 00-9.456-8.356 9.55 9.55 0 00-4.77 1.27z"}),(0,o.jsx)("path",{d:"M27.067 28.551c.41.41 1.094.41 1.49 0 .41-.41.41-1.08 0-1.49L2.937 1.454a1.06 1.06 0 00-1.505 0c-.396.396-.396 1.08 0 1.49l25.635 25.607z"})]})})},988714:(e,t,n)=>{n.r(t),n.d(t,{ExternalImportAndSyncIndicator:()=>J});var o=n(242343),l=()=>n(16791),i=()=>n(237385),c=()=>n(803290),s=()=>n(174114),a=()=>n(846581),r=()=>n(810111),d=()=>n(758989),p=()=>n(384818),g=()=>n(941161),y=()=>n(145017),u=()=>n(518797),x=()=>n(21164),m=()=>n(653998),S=()=>n(220413),_=()=>n(31448),f=()=>n(521325),h=()=>n(750094),v=()=>n(137476),j=()=>n(703143),C=()=>n(370639),b=()=>n(477784),I=()=>n(392608),T=()=>n(289113),A=()=>n(951021),k=()=>n(907721),w=()=>n(485966),L=()=>n(836331),M=()=>n(578138),B=()=>n(963768),F=()=>n(413871),H=()=>n(695951),P=()=>n(209684),z=()=>n(579494),U=()=>n(931085),E=()=>n(103151),N=()=>n(966789),K=n(163643);function V(e){var t;const{store:n}=e,l=(0,c().K8)((()=>n.isCollectionView()),[n]),i=(0,c().K8)((()=>{var e;let t;if(n.table===y().ev)if(n.isCollectionView())t=n.getCollectionStore();else{const e=n.getParentStore();(null==e?void 0:e.table)===x().Vl&&(t=e)}return null===(e=t)||void 0===e?void 0:e.getFormat()}),[n]),a=Boolean(null==i||null===(t=i.sync_state)||void 0===t?void 0:t.syncing),d=(0,s().IS)((e=>({wrapper:{display:"flex",alignItems:"center",gap:6,paddingLeft:6,paddingRight:6},syncProgress:{fontWeight:_().Wy.medium,fontSize:14,color:e.blueColor},syncAge:{fontWeight:_().Wy.regular,fontSize:_().J.UIRegular.desktop,color:S().Ay.blueWithAlpha(.7)},badge:{background:"light"===e.mode?S().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content",height:28,display:"flex",marginBottom:3,borderRadius:20,padding:"2px 6x",...!l&&{marginTop:8}}})),[l]),p=(0,o.useCallback)((()=>l&&a?{syncBadgeContent:(0,K.jsx)("span",{style:d.syncProgress,children:(0,K.jsx)(m().sA,{id:"PageTitle.ImportSync.syncInProgress.title",defaultMessage:"Import in progress",values:{integration:null==i?void 0:i.external_collection_type}})})}:{}),[i,l,d,a]);if(!(i&&i.static_import_collection_type&&l&&i.static_import_collection_type===r().IE.CsvImport&&a))return null;const{syncBadgeContent:g}=p();return(0,K.jsx)("div",{style:{alignSelf:"end",display:"inline-block"},children:(0,K.jsx)(H().A,{style:d.badge,content:(0,K.jsxs)("div",{style:d.wrapper,children:[(0,K.jsx)(N().A,{legacySize:14}),g]})})})}var D=()=>n(517722);const R=(0,m().YK)({botDisconnectedTitle:{id:"CollectionViewBlockHeaderActions.ExternalSync.botDisconnected.title",defaultMessage:"Sync has stopped"},botDisconnectedTooltipHeading:{id:"CollectionViewBlockHeaderActions.ExternalSync.botDisconnected.tooltip.heading",defaultMessage:"Re-authenticate to continue syncing. Last updated {lastEditedTimeNormalized}"},botDisconnectedTooltipCaption:{id:"CollectionViewBlockHeaderActions.ExternalSync.botDisconnected.tooltip.caption",defaultMessage:"Click to view the help center"},syncFailedTitle:{id:"CollectionViewBlockHeaderActions.ExternalSync.syncFailed.title",defaultMessage:"Sync failed"},syncFailedTooltipHeading:{id:"CollectionViewBlockHeaderActions.ExternalSync.syncFailed.tooltip.heading",defaultMessage:"Failed to sync some projects"},syncFailedTooltipCaption:{id:"CollectionViewBlockHeaderActions.ExternalSync.syncFailed.tooltip.caption",defaultMessage:"Click to view the help center"},syncInProgressTitle:{id:"CollectionViewBlockHeaderActions.ExternalSync.syncInProgress.title",defaultMessage:"Sync in progress"},syncInProgressTooltipHeading:{id:"CollectionViewBlockHeaderActions.ExternalSync.syncInProgress.tooltip.heading",defaultMessage:"Syncing and updating issues from {site}"},syncInProgressTooltipCaption:{id:"CollectionViewBlockHeaderActions.ExternalSync.syncInProgress.tooltip.caption",defaultMessage:"Click to view the help center"},collectionLastSyncedTitle:{id:"CollectionViewBlockHeaderActions.ExternalSync.collectionLastSynced.title",defaultMessage:"Synced with {integration}"},collectionLastSyncedSubtitle:{id:"CollectionViewBlockHeaderActions.ExternalSync.collectionLastSynced.subtitle",defaultMessage:"{lastUpdated}"},collectionLastSyncedTimestampAlt:{id:"CollectionViewBlockHeaderActions.ExternalSync.collectionLastSynced.subtitleAlt",defaultMessage:"Synced {lastUpdated}"},collectionLastSyncedTooltipHeading:{id:"CollectionViewBlockHeaderActions.ExternalSync.collectionLastSynced.tooltip.heading",defaultMessage:"Last updated {lastEditedTimeNormalized}"},collectionLastSyncedTooltipCaption:{id:"CollectionViewBlockHeaderActions.ExternalSync.collectionLastSynced.tooltip.caption",defaultMessage:"Click to view the help center"},pageLastSyncedTitle:{id:"CollectionViewBlockHeaderActions.ExternalSync.pageLastSynced.title",defaultMessage:"Synced with {integration}"},pageLastSyncedTimestampSubtitle:{id:"CollectionViewBlockHeaderActions.ExternalSync.pageLastSynced.subtitle",defaultMessage:"{lastUpdated}"},pageLastSyncedTooltipHeading:{id:"CollectionViewBlockHeaderActions.ExternalSync.pageLastSynced.tooltip.heading",defaultMessage:"Last updated {lastEditedTimeNormalized}"},pageLastSyncedTooltipCaption:{id:"CollectionViewBlockHeaderActions.ExternalSync.pageLastSynced.tooltip.caption",defaultMessage:"Click to view the help center"},reAuthenticateAccount:{id:"CollectionViewBlockHeaderActions.ExternalSync.syncFailed.reauth",defaultMessage:"Re-authenticate account"}}),W={[r().uO.Jira]:(0,I().xS)("guides.externalImportAndSync"),[r().uO.Salesforce]:"https://dev.notion.so/notion/24d0b4fbb2e04972bb22ee8104002ade?v=61614333f80d4c74a26af5b8a749fb6e&pvs=4"};function J(e){const{store:t,v2:n=!1,collectionContextStore:o}=e,l=(0,c().K8)((()=>{var e;let n;if(t.table===x().Vl)n=t;else if(t.table===y().ev)if(t.isCollectionView())n=t.getCollectionStore();else{const e=t.getParentStore();(null==e?void 0:e.table)===x().Vl&&(n=e)}return null===(e=n)||void 0===e?void 0:e.getFormat()}),[t]);return n?o&&(null==l?void 0:l.external_collection_type)===r().uO.Salesforce?(0,K.jsx)(Y,{store:t,collectionContextStore:o,hideText:e.hideText}):null:(null==l?void 0:l.external_collection_type)===r().uO.Jira?(0,K.jsx)(O,{...e}):(null==l?void 0:l.static_import_collection_type)===r().IE.CsvImport&&e.store.table===y().ev?(0,K.jsx)(V,{store:e.store}):null}function O(e){const t=(0,i().v3)(),{store:n}=e,f=(0,c().K8)((()=>{var e,t,o,i,c;const s=n.table===x().Vl||n.table===y().ev&&n.isCollectionView(),r=s?n.table===x().Vl?n:n.getCollectionStore():null==n?void 0:n.getParentStore();if(r&&r.table!==x().Vl)return;const d=null==r?void 0:r.getFormat(),p={errorStatusCode:null==d||null===(e=d.error)||void 0===e?void 0:e.status_code,isCollection:s,isSyncFailed:Boolean(null==d||null===(t=d.error)||void 0===t?void 0:t.status_code),isSyncing:Boolean(null==d||null===(o=d.sync_state)||void 0===o?void 0:o.syncing),botId:null==d?void 0:d.bot_id,collectionSyncedTime:null==d||null===(i=d.sync_state)||void 0===i?void 0:i.last_synced_at,collectionSyncedTimeNormalized:null!=d&&null!==(c=d.sync_state)&&void 0!==c&&c.last_synced_at?(0,a().jE)(d.sync_state.last_synced_at,l().locale,b().A.getIntl()):void 0,pageSyncedTime:void 0,pageSyncedTimeNormalized:void 0,synced_collection_external_url:null==d?void 0:d.synced_collection_external_url,external_collection_type:null==d?void 0:d.external_collection_type,external_collection_instance_type:null==d?void 0:d.synced_collection_instance_type,collectionId:null==r?void 0:r.id};return L().default.checkGate({gateName:"show_collection_pill_at_page_level_for_jira"})?(p.pageSyncedTime=p.collectionSyncedTime,p.pageSyncedTimeNormalized=p.collectionSyncedTimeNormalized):s||(p.pageSyncedTime=n.getLastEditedTime(),p.pageSyncedTimeNormalized=(0,a().jE)(n.getLastEditedTime(),l().locale,b().A.getIntl())),p}),[n]),{isCollection:j,isSyncing:A,isSyncFailed:M,external_collection_type:P,synced_collection_external_url:N,botId:V,collectionId:W,collectionSyncedTime:J,collectionSyncedTimeNormalized:O,pageSyncedTime:Y,pageSyncedTimeNormalized:X}=f||{},$=(0,c().K8)((()=>{const e=w().default.state.currentSpaceStore;if(V&&e){const t=F().vK.createChildStore(e,{table:u().GP,id:V,spaceId:e.id});return!!t.isDefined()&&!t.getAlive()}return!1}),[V]),G=$||M&&j,q=(0,s().IS)((e=>({container:{display:"flex",alignSelf:"end",alignItems:"center",marginTop:6,...j&&{marginBottom:5}},wrapper:{display:"flex",alignItems:"center",gap:6},syncIcon:{width:14,height:14,position:"relative",color:G?e.icon.uiYellowPrimary:e.blueColor},syncProgress:{fontWeight:_().Wy.medium,fontSize:t.device.isMobile?_().J.UISmall.desktop:_().J.UIRegular.desktop,color:G?e.text.primary:e.blueColor},syncAge:{fontWeight:_().Wy.regular,fontSize:t.device.isMobile?_().J.UISmall.desktop:_().J.UIRegular.desktop,color:S().Ay.blueWithAlpha(.7)},badge:{background:"light"===e.mode?G?e.fill.yellowSecondary:S().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content",height:28,display:"flex",borderRadius:20,padding:"2px 8px 2px 6px"},tooltipHeading:{fontSize:_().J.UISmall.desktop,fontWeight:_().Wy.medium},tooltipCaption:{fontSize:_().J.UISmall.desktop,color:d().l8.dark.gray,fontWeight:_().Wy.regular},reauthCta:{color:e.text.secondary,marginLeft:12}})),[t,j,G]),Q=(0,o.useCallback)((()=>$?{syncBadgeContent:(0,K.jsx)("span",{style:q.syncProgress,children:(0,K.jsx)(m().sA,{...R.botDisconnectedTitle,values:{integration:P}})}),syncBadgeTooltipContent:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{style:q.tooltipHeading,children:(0,K.jsx)(m().sA,{...R.botDisconnectedTooltipHeading,values:{lastEditedTimeNormalized:O}})}),(0,K.jsx)("div",{style:q.tooltipCaption,children:(0,K.jsx)(m().sA,{...R.botDisconnectedTooltipCaption})})]}),syncSecondaryAction:(0,K.jsx)(U().A,{inline:!0,style:q.reauthCta,hoveredStyle:{background:"none",textDecoration:"underline"},onClick:()=>{(0,v().u4)({environment:t,event:{eventName:"external_sync_setup_action",eventProperties:{actionType:"sync_label_reconnect_account_cta_click",integration:"jira",collectionId:W,flowId:B().Ay.createNewFlowId()}}}),h().jh({environment:t,from:"sync_header",action:"add_account"})},children:(0,K.jsx)(m().sA,{...R.reAuthenticateAccount})})}:j?M?{syncBadgeContent:(0,K.jsx)("span",{style:q.syncProgress,children:(0,K.jsx)(m().sA,{...R.syncFailedTitle,values:{integration:P}})}),syncBadgeTooltipContent:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{style:q.tooltipHeading,children:(0,K.jsx)(m().sA,{...R.syncFailedTooltipHeading})}),(0,K.jsx)("div",{style:q.tooltipCaption,children:(0,K.jsx)(m().sA,{...R.syncFailedTooltipCaption})})]})}:A?{syncBadgeContent:(0,K.jsx)("span",{style:q.syncProgress,children:(0,K.jsx)(m().sA,{...R.syncInProgressTitle,values:{integration:P}})}),syncBadgeTooltipContent:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{style:q.tooltipHeading,children:(0,K.jsx)(m().sA,{...R.syncInProgressTooltipHeading,values:{site:(0,C().ay)(N||"")}})}),(0,K.jsx)("div",{style:q.tooltipCaption,children:(0,K.jsx)(m().sA,{...R.syncInProgressTooltipCaption})})]})}:{syncBadgeContent:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("span",{style:q.syncProgress,children:(0,K.jsx)(m().sA,{...R.collectionLastSyncedTitle,values:{integration:P}})}),J&&(0,K.jsx)("span",{style:q.syncAge,children:(0,K.jsx)(m().sA,{...R.collectionLastSyncedSubtitle,values:{lastUpdated:(0,T().nl)(J,{useLowercase:!0})}})})]}),syncBadgeTooltipContent:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{style:q.tooltipHeading,children:(0,K.jsx)(m().sA,{...R.collectionLastSyncedTooltipHeading,values:{lastEditedTimeNormalized:O}})}),(0,K.jsx)("div",{style:q.tooltipCaption,children:(0,K.jsx)(m().sA,{...R.collectionLastSyncedTooltipCaption})})]})}:{syncBadgeContent:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("span",{style:q.syncProgress,children:(0,K.jsx)(m().sA,{...R.pageLastSyncedTitle,values:{integration:P}})}),Y&&(0,K.jsx)("span",{style:q.syncAge,children:(0,K.jsx)(m().sA,{...R.pageLastSyncedTimestampSubtitle,values:{lastUpdated:(0,T().nl)(Y,{useLowercase:!0})}})})]}),syncBadgeTooltipContent:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{style:q.tooltipHeading,children:(0,K.jsx)(m().sA,{...R.pageLastSyncedTooltipHeading,values:{lastEditedTimeNormalized:X}})}),(0,K.jsx)("div",{style:q.tooltipCaption,children:(0,K.jsx)(m().sA,{...R.pageLastSyncedTooltipCaption})})]})}),[t,A,j,q,Y,X,J,O,M,P,N,$,W]);if(!P||j&&!J)return null;const{syncBadgeContent:Z,syncBadgeTooltipContent:ee,syncSecondaryAction:te}=Q(),ne=()=>(0,K.jsx)("div",{style:{alignSelf:"end",display:"inline-block"},children:(0,K.jsx)(z().A,{className:"notion-print-ignore",href:(0,I().xS)("guides.externalImportAndSync"),external:!0,children:(0,K.jsx)(H().A,{style:q.badge,content:(0,K.jsxs)("div",{style:q.wrapper,children:[M||$?(0,g().u)(q.syncIcon):(0,p().$)(q.syncIcon),Z]})})})});let oe;return(null==f?void 0:f.external_collection_type)===r().uO.Jira&&(oe="jira-dc"===(null==f?void 0:f.external_collection_instance_type)?"collection_synced_database_jira_datacenter":"collection_synced_database_jira"),(0,K.jsxs)("div",{style:q.container,children:[ee?(0,K.jsx)(E().A,{renderTooltip:()=>ee,render:e=>(0,K.jsx)("div",{...e,children:ne()}),placement:k().W.Bottom}):ne(),te,oe?(0,K.jsx)(D().m,{featureName:oe}):null]})}function Y(e){const{store:t,collectionContextStore:n,hideText:r=!1}=e,S=(0,m().tz)(),h=(0,c().K8)((()=>t.table===y().ev&&t.getCreatedById()===n.getCurrentUserId()),[t,n]),v=(0,c().K8)((()=>{var e,t,o,i,c;const s=n.collectionStore();if(s&&s.table!==x().Vl)return{};const r=null==s?void 0:s.getFormat();return{errorStatusCode:null==r||null===(e=r.error)||void 0===e?void 0:e.status_code,isCollection:!0,isSyncFailed:Boolean(null==r||null===(t=r.error)||void 0===t?void 0:t.status_code),isSyncing:Boolean(null==r||null===(o=r.sync_state)||void 0===o?void 0:o.syncing),botId:null==r?void 0:r.bot_id,collectionSyncedTime:null==r||null===(i=r.sync_state)||void 0===i?void 0:i.last_synced_at,collectionSyncedTimeNormalized:null!=r&&null!==(c=r.sync_state)&&void 0!==c&&c.last_synced_at?(0,a().jE)(r.sync_state.last_synced_at,l().locale,b().A.getIntl()):void 0,pageSyncedTime:void 0,pageSyncedTimeNormalized:void 0,synced_collection_external_url:null==r?void 0:r.synced_collection_external_url,external_collection_type:null==r?void 0:r.external_collection_type,external_collection_instance_type:null==r?void 0:r.synced_collection_instance_type,collectionId:null==s?void 0:s.id}}),[n]),C=(0,c().K8)((()=>{const e=w().default.state.currentSpaceStore;if(v.botId&&e){const t=F().vK.createChildStore(e,{table:u().GP,id:v.botId,spaceId:e.id});if("Salesforce"===v.external_collection_type&&h){return"connected"!==(0,A().i_)(t).status}return!!t.isDefined()&&!t.getAlive()}return!1}),[v.botId,v.external_collection_type,h]),k=(0,i().WS)(),L=C||v.isSyncFailed&&v.isCollection,B=(0,c().K8)((()=>{const e="report"===M().A.state.type?M().A.state:void 0;return!!e&&(e.collectionId===v.collectionId&&"started"===e.status)}),[v.collectionId]);(0,o.useEffect)((()=>{B&&C&&void 0===v.collectionSyncedTime&&h&&f().eM({collectionSettingsStore:null==n?void 0:n.settingsStore,source:"external_source"})}),[C,B,v.collectionSyncedTime,null==n?void 0:n.settingsStore,h]);const H=(0,s().IS)((e=>({container:{display:"flex",alignSelf:"end",alignItems:"center",marginTop:6,marginBottom:5},badge:{background:"none",whiteSpace:"nowrap",width:"fit-content",height:28,display:"flex",borderRadius:20,padding:"2px 8px 2px 6px"},tooltipHeading:{fontSize:_().J.UISmall.desktop,fontWeight:_().Wy.medium},tooltipCaption:{fontSize:_().J.UISmall.desktop,color:d().l8.dark.gray,fontWeight:_().Wy.regular}})),[]),P=(0,s().IS)((e=>({wrapper:{display:"flex",alignItems:"center",gap:6},syncIcon:{width:18,height:18,position:"relative",color:L?e.icon.uiYellowPrimary:e.blueColor},syncProgress:{fontWeight:_().Wy.medium,fontSize:k?_().J.UISmall.desktop:_().J.UIRegular.desktop,color:L?e.text.primary:e.blueColor},syncAge:{fontWeight:_().Wy.medium,fontSize:_().J.UISmall.desktop,color:e.text.secondary}})),[L,k]),{icon:z}=(0,o.useMemo)((()=>{const e=v.external_collection_type?j().l[v.external_collection_type]:"";return{icon:(0,K.jsx)("img",{style:{...P.syncIcon,marginRight:2},src:e,alt:"External integration icon"}),href:v.external_collection_type?W[v.external_collection_type]:(0,I().xS)("guides.connectedApps")}}),[v.external_collection_type,P.syncIcon]),U=(0,o.useMemo)((()=>C?{icon:(0,g().u)(P.syncIcon),content:(0,K.jsx)("span",{style:P.syncProgress,children:(0,K.jsx)(m().sA,{...R.reAuthenticateAccount,values:{integration:v.external_collection_type}})}),tooltipContent:{heading:S.formatMessage(R.botDisconnectedTooltipHeading,{lastEditedTimeNormalized:v.collectionSyncedTimeNormalized}),caption:S.formatMessage(R.botDisconnectedTooltipCaption)}}:v.isCollection?v.isSyncFailed?{icon:(0,g().u)(P.syncIcon),content:(0,K.jsx)("span",{style:P.syncProgress,children:(0,K.jsx)(m().sA,{...R.syncFailedTitle,values:{integration:v.external_collection_type}})}),tooltipContent:{heading:S.formatMessage(R.syncFailedTooltipHeading),caption:S.formatMessage(R.syncFailedTooltipCaption)}}:v.isSyncing?{icon:(0,p().$)(P.syncIcon),content:(0,K.jsx)("span",{style:P.syncProgress,children:(0,K.jsx)(m().sA,{...R.syncInProgressTitle,values:{integration:v.external_collection_type}})}),tooltipContent:{heading:S.formatMessage(R.syncInProgressTooltipHeading),caption:S.formatMessage(R.syncInProgressTooltipCaption)}}:{icon:z,content:!r&&v.collectionSyncedTime&&(0,K.jsx)("span",{style:P.syncAge,children:(0,K.jsx)(m().sA,{...R.collectionLastSyncedTimestampAlt,values:{lastUpdated:(0,T().nl)(v.collectionSyncedTime,{useLowercase:!1})}})}),tooltipContent:{heading:S.formatMessage(R.collectionLastSyncedTooltipHeading,{lastEditedTimeNormalized:v.collectionSyncedTimeNormalized}),caption:S.formatMessage(R.collectionLastSyncedTooltipCaption)}}:{icon:(0,p().$)(P.syncIcon),content:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("span",{style:P.syncProgress,children:(0,K.jsx)(m().sA,{...R.pageLastSyncedTitle,values:{integration:v.external_collection_type}})}),v.pageSyncedTime&&(0,K.jsx)("span",{style:P.syncAge,children:(0,K.jsx)(m().sA,{...R.pageLastSyncedTimestampSubtitle,values:{lastUpdated:(0,T().nl)(v.pageSyncedTime,{useLowercase:!1})}})})]}),tooltipContent:{heading:S.formatMessage(R.pageLastSyncedTooltipHeading,{lastEditedTimeNormalized:v.pageSyncedTimeNormalized}),caption:S.formatMessage(R.pageLastSyncedTooltipCaption)}}),[C,v.isCollection,v.external_collection_type,v.pageSyncedTime,v.pageSyncedTimeNormalized,v.collectionSyncedTimeNormalized,v.isSyncFailed,v.isSyncing,v.collectionSyncedTime,P.syncIcon,P.syncProgress,P.syncAge,S,z,r]);return v.external_collection_type?(0,K.jsx)(X,{onClick:()=>{f().eM({collectionSettingsStore:null==n?void 0:n.settingsStore,source:"external_source"})},styles:H,tooltipContent:U.tooltipContent,children:(0,K.jsxs)("div",{style:P.wrapper,children:[U.icon,U.content]})}):null}function X(e){let{tooltipContent:t,children:n,styles:o,onClick:l}=e;return(0,K.jsx)("div",{style:o.container,children:(0,K.jsx)(E().A,{disableTooltip:!t,renderTooltip:()=>t&&(0,K.jsxs)("div",{children:[(0,K.jsx)("div",{style:o.tooltipHeading,children:t.heading}),(0,K.jsx)("div",{style:o.tooltipCaption,children:t.caption})]}),render:e=>(0,K.jsx)("div",{...e,style:{alignSelf:"end",display:"inline-block"},children:(0,K.jsx)(P().p,{style:{padding:0},onClick:l,children:(0,K.jsx)(H().A,{style:o.badge,content:n})})}),placement:k().W.Bottom})})}}}]);