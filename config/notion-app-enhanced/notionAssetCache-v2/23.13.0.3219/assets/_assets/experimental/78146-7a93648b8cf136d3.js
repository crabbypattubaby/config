"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[78146],{263873:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,plusSmallIcon:()=>a});o(242343);const n={viewBox:"0 0 16 16",svg:(0,o(163643).jsx)("path",{d:"M8 2.74a.66.66 0 0 1 .66.66v3.94h3.94a.66.66 0 0 1 0 1.32H8.66v3.94a.66.66 0 0 1-1.32 0V8.66H3.4a.66.66 0 0 1 0-1.32h3.94V3.4A.66.66 0 0 1 8 2.74"})},a=(0,o(680369).wt)("plusSmall",n)},339425:(e,t,o)=>{o.d(t,{eO:()=>_});o(362833),o(725707),o(500234),o(403517);var n=o(242343),a=()=>o(237385),i=()=>o(803290),r=()=>o(174114),s=()=>o(198654),c=()=>o(263873),l=()=>o(653998),d=()=>o(31448),p=()=>o(126451),m=()=>o(535906),u=()=>o(397791),S=()=>o(158918),f=()=>o(518471),g=()=>o(622163),y=()=>o(904697),v=()=>o(485966),I=()=>o(628854),b=()=>o(424339),x=()=>o(514040),h=()=>o(709863),w=o(163643);const T=4;function _(e){let{postStore:t}=e;const o=(0,a().v3)(),s=(0,r().IS)((e=>({createTeamButton:{color:e.text.secondary}})),[]),{currentSpaceViewStore:d,currentSpaceStore:p}=(0,i().K8)((()=>{const{currentSpaceViewStore:e,currentSpaceStore:t}=v().default.state;return{currentSpaceViewStore:e,currentSpaceStore:t}}),[]),f=(0,i().K8)((()=>(0,y().canCreateTeam)({environment:o,spaceStore:p})),[p,o]),{selectedTeamStore:g,subscribedUserTeamStores:T,collectionContextStore:_,menuItems:M,selectedMenuItem:j}=(0,i().K8)((()=>{const{selectedTeamStore:e,subscribedUserTeamStores:t,collectionContextStore:o}=h().u.state,n=(t??[]).map((e=>({type:"store",store:e})));f&&n.push({type:"create-team-call-to-action"});const a=n.find((t=>"store"===t.type&&t.store.id===(null==e?void 0:e.id)));return{selectedTeamStore:e,subscribedUserTeamStores:t,collectionContextStore:o,menuItems:n,selectedMenuItem:a}}),[f]),V=(0,n.useCallback)((e=>{"create-team-call-to-action"===e.type?(0,I().vn)("post_composer"):(0,x().z)({environment:o,currentSpaceViewStore:d,selectedStore:e.store,collectionContextStore:_,postStore:t})}),[o,_,d,t]);return d&&p&&g&&T&&_?(0,w.jsx)(S().A,{items:M,getKey:e=>"store"===e.type?e.store.id:"create-team-call-to-action",selectedItem:j,onSelect:V,renderItem:e=>{const t=e.value;return"store"===t.type?(0,w.jsx)(m().A,{...e,title:t.store.getName(),icon:(0,w.jsx)(b().x,{store:t.store,size:16,disabled:!0})}):(0,w.jsx)(m().A,{...e,style:s.createTeamButton,title:(0,w.jsx)(l().sA,{id:"posts.teamTargetSelector.createTeamspace",defaultMessage:"New teamspace"}),icon:(0,w.jsx)(u().I,{icon:c().plusSmallIcon,size:"sm",color:"secondary"})})},renderOrigin:e=>(0,w.jsx)(C,{...e,selectedStore:g}),width:300}):null}function C(e){const t=(0,a().v3)(),{device:o}=t,{selectedStore:n,...i}=e,c=(0,r().IS)((e=>({dropdownButton:{padding:"6px 8px",color:e.text.secondary,fontSize:(0,g().ny)(t,"UISmall"),display:"inline-flex",justifyContent:"end",alignItems:"center",borderRadius:T},dropdownIcon:{width:10,marginLeft:4,fill:e.lightIconColor},dropdownText:{display:"inline-flex",alignItems:"center",fontWeight:d().Wy.medium,overflow:"hidden"}})),[t]);return(0,w.jsxs)(p().A,{mobileFeedback:o.isMobile,style:c.dropdownButton,...i,children:[(0,w.jsx)("div",{style:c.dropdownText,children:(0,w.jsx)(M,{selectedStore:n})}),(0,s().b)(c.dropdownIcon)]})}function M(e){let{selectedStore:t}=e;const o=(0,a().v3)(),n=(0,i().K8)((()=>null==t?void 0:t.getName()),[t]),s=(0,i().K8)((()=>(0,f().rK)(o)),[o]),c=(0,r().IS)((()=>({icon:{marginLeft:s?0:4,marginRight:4},teamName:{...d().RC}})),[s]),p=(0,w.jsx)(b().x,{store:t,size:16,disabled:!0,style:c.icon});return n?(0,w.jsxs)(w.Fragment,{children:[!s&&(0,w.jsx)(l().sA,{id:"postsComposer.teamDropdownTitle.in",defaultMessage:"In "}),(0,w.jsx)(l().sA,{id:"postsComposer.teamDropdownTitle.teamInfo",defaultMessage:"{teamIcon} {teamName}",values:{teamIcon:p,teamName:(0,w.jsx)("div",{style:c.teamName,children:n})}})]}):(0,w.jsx)(l().sA,{id:"postsComposer.teamDropdownTitle.withoutTeamName",defaultMessage:"In your teamspace"})}},514040:(e,t,o)=>{o.d(t,{z:()=>M});var n=()=>o(21164),a=()=>o(289765),i=()=>o(218357),r=()=>o(795394),s=()=>o(84543),c=()=>o(72813),l=()=>o(477784),d=()=>o(485966),p=()=>o(413871),m=(o(610931),()=>o(582226)),u=()=>o(728373);const S=(0,o(653998).YK)({postHeadingName:{id:"posts.collection.headingName",defaultMessage:"Subject"},createdBy:{id:"database.propertyTypeName.posts.created_by",defaultMessage:"Created by"},createdTime:{id:"database.propertyTypeName.posts.created_time",defaultMessage:"Created time"}}),f="feed",g="descending",y={hide_linked_collection_name:!0,inline_collection_first_load_limit:{type:"load_limit",limit:10}};function v(e){return{property:e,direction:g}}function I(e){return{table:n().Vl,id:e.collectionId,spaceId:e.spaceId}}var b=()=>o(145017),x=()=>o(34662),h=()=>o(3311),w=()=>o(759625),T=()=>o(448316),_=()=>o(987513);function C(e){const{environment:t,transaction:o,teamStore:r,collectionStore:c,intl:l}=e,d=r.getSpaceId();if(!d)throw new Error("spaceId is undefined");const g=r.id,C=g,M=g,{schema:j,createdTimeId:V}=function(e){const t=(0,u().Ay)();return{schema:{title:{type:"title",name:e.formatMessage(S.postHeadingName)},[(0,u().Ay)()]:{type:"created_by",name:e.formatMessage(S.createdBy)},[t]:{type:"created_time",name:e.formatMessage(S.createdTime)}},createdTimeId:t}}(l),A=m().op.update({pointer:{id:C,table:n().Vl,spaceId:d},path:[],args:{id:C,space_id:d,name:[[l.formatMessage(_().D.postsCollectionTitle)]],schema:j,parent_id:M,parent_table:b().ev,format:{publishing_enabled:!0},alive:!0,version:0}}),N=(0,h().Ay)();s().applyOperation({store:c,operation:A,transaction:o});const k={id:N,table:a().Gy,spaceId:d},K={id:M,table:b().ev,spaceId:d},B=m().op.update({pointer:k,path:[],args:{id:N,version:5,type:f,parent_id:M,parent_table:b().ev,space_id:d,alive:!0,name:void 0,query2:{sort:[v(V)]},format:{...y,collection_pointer:I({collectionId:C,spaceId:d})}}}),D=p().Bv.createChildStore(r,K),z=p().pS.createChildStore(D,k);s().applyOperation({store:z,operation:B,transaction:o});const R=m().op.update({pointer:D.pointer,path:[],args:{id:M,type:"collection_view_page",version:1,alive:!0,parent_id:g,parent_table:i().yK,space_id:d,view_ids:[N]}});s().applyOperation({store:D,operation:R,transaction:o});const U=D.getTitleStore();U&&T().R9({environment:t,store:U,value:(0,x().x9d)(l.formatMessage(_().D.postsCollectionViewPageTitle)),transaction:o}),w().zv({store:D.getFormatStore(),data:{collection_pointer:I({collectionId:C,spaceId:d})},transaction:o})}function M(e){const{environment:t,selectedStore:o,currentSpaceViewStore:m,collectionContextStore:u,postStore:S}=e,f=l().A.getIntl();if(!u)return;const g=u.collectionViewStore(),y=u.collectionViewBlockStore();if(!g||!y||!m)return;const v=o.table===i().yK?o.id:void 0,I=d().default.state.currentSpaceStore;if(!I)return;const b=p().sk.createUniqueRootStore(t,{table:"block",id:o.id,spaceId:I.id}),x=null==b?void 0:b.getCollectionStore();s().createAndCommit({environment:t,userAction:"PersonalHomeFeedTab.setCollectionViewSourceTeamId",canUndo:!0,perform:e=>{const i={id:o.id,table:n().Vl,spaceId:I.id},l=p().md.createChildStore(b,i);x||(C({environment:t,transaction:e,collectionStore:l,teamStore:o,intl:f}),(0,c().d)({environment:t,collectionViewStore:g,collectionViewBlockStore:y,collectionStore:l,collectionContextStore:u,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1,viewsModuleContext:void 0})),S&&r().X$({childStore:S,parentStore:x??l,transaction:e}),s().applyOperation({store:g,operation:{pointer:{id:g.id,table:a().Gy},path:["format","collection_view_source","teamId"],command:"set",args:v},transaction:e})}})}},987513:(e,t,o)=>{o.d(t,{D:()=>n});const n=(0,o(653998).YK)({postsCollectionViewPageTitle:{id:"posts.collectionViewPage.title",defaultMessage:"Posts"},postsCollectionTitle:{id:"posts.collection.title",defaultMessage:"Updates"},postHeadingName:{id:"posts.collection.headingName",defaultMessage:"Subject"},deleteDraftTooltip:{id:"posts.deleteDraftTooltip",defaultMessage:"Delete draft"},fullScreenTooltip:{id:"posts.fullScreenTooltip",defaultMessage:"Full screen"}})}}]);