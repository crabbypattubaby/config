"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[90280],{21557:(e,t,n)=>{n.d(t,{G:()=>a});n(242343);var s=n(163643);const a=(0,n(680369).wt)("trendingLarge",{viewBox:"0 0 48 48",svg:(0,s.jsx)("path",{d:"M8.75 36.5842V11.4307C8.75 10.7907 9.28581 10.24 9.95558 10.24C10.6105 10.24 11.1463 10.7907 11.1463 11.4307V24.7219L15.79 20.0186C16.4747 19.3339 17.0998 19.0363 17.7993 19.0363C18.4988 19.0363 19.1537 19.3488 19.8086 20.0186L25.2858 25.6298C25.4198 25.7637 25.5686 25.8381 25.6877 25.8381C25.8216 25.8381 25.9705 25.7637 26.1044 25.6298L31.9686 19.6912L29.5128 17.2353C28.977 16.6995 29.3044 16.0149 30.0635 15.8065L38.7705 13.6186C39.4402 13.44 40.0356 14.0056 39.857 14.6902L37.6542 23.4121C37.4607 24.1712 36.7612 24.4986 36.2253 23.9628L33.7844 21.507L27.7119 27.6093C27.0421 28.2791 26.4021 28.5916 25.6877 28.5916C24.9881 28.5916 24.3184 28.2791 23.6784 27.6093L18.2012 21.9981C18.0672 21.8642 17.9333 21.7898 17.7993 21.7898C17.6653 21.7898 17.5314 21.8642 17.3974 21.9981L11.1463 28.3684V34.9619C11.1463 35.2744 11.2505 35.3786 11.563 35.3786H39.5444C40.1993 35.3786 40.75 35.9144 40.75 36.5693C40.75 37.2391 40.1993 37.76 39.5444 37.76H9.9407C9.22628 37.76 8.75 37.2986 8.75 36.5842Z"})})},49079:(e,t,n)=>{n.d(t,{y:()=>a});n(242343);const s={viewBox:"0 0 20 20",svg:(0,n(163643).jsx)("path",{d:"M6.303 3.625c-.71 0-1.374.355-1.768.946L2.232 8.025c-.233.35-.357.76-.357 1.18v5.045c0 1.174.951 2.125 2.125 2.125h12a2.125 2.125 0 0 0 2.125-2.125V9.204c0-.42-.124-.83-.357-1.179l-2.303-3.454a2.13 2.13 0 0 0-1.768-.946zm-.728 1.64a.88.88 0 0 1 .728-.39h7.394c.293 0 .566.146.728.39l2.303 3.454a1 1 0 0 1 .083.156h-4.702a.625.625 0 0 0-.625.625v.476a1.484 1.484 0 0 1-2.968 0V9.5a.625.625 0 0 0-.625-.625H3.189a1 1 0 0 1 .083-.156zm-2.45 4.86H7.27a2.734 2.734 0 0 0 5.46 0h4.145v4.125a.875.875 0 0 1-.875.875H4a.875.875 0 0 1-.875-.875z"})},a=(0,n(680369).wt)("inbox",s)},105373:(e,t,n)=>{n.d(t,{P:()=>r});var s=()=>n(758611),a=()=>n(865226);function r(e){const{environment:t}=e;a().oo({environment:t,url:s().JZ.marketplace,redirect:!1})}},143779:(e,t,n)=>{n.d(t,{U:()=>f,W:()=>v});n(242343);var s=()=>n(237385),a=()=>n(803290),r=()=>n(688508),o=()=>n(653998),i=()=>n(366247),l=()=>n(907721),c=()=>n(931085),u=()=>n(397791),d=()=>n(103151),m=()=>n(24071),p=n(163643);function v(e){const{styles:t}=e,n=(0,s().v3)(),v=(0,o().tz)(),g=(0,a().K8)((()=>{const{RouterStore:e}=n;return e.state.route}),[n]),h=(0,i().U)("marketplace_sidebar_option_click");return(0,p.jsx)(d().A,{renderTooltip:()=>v.formatMessage(f.templatesMwnTooltip),originGap:6,placement:l().W.Right,render:e=>(0,p.jsx)(c().A,{style:t.sidebarItemButtonStyle,hoveredStyle:t.buttonHoveredStyle,onClick:h,...e,children:(0,p.jsx)(m().A,{left:(0,p.jsx)(u().I,{icon:r().templatesIcon,color:"secondary",size:"lg"}),isBottomItem:!0,style:"gallery"===g.name?t.sidebarItemActiveStyle:{},children:v.formatMessage(f.title)})})})}const f=(0,o().YK)({templatesMwnTooltip:{defaultMessage:"Find all the best templates and set-ups built by Notionâ€™s community",id:"sidebar.openTemplatePickerButton.tooltip.mwn"},title:{defaultMessage:"Templates",id:"sidebar.openTemplatePickerButton"}})},266695:(e,t,n)=>{n.d(t,{m:()=>a});n(242343);var s=n(163643);const a=(0,n(680369).wt)("appearanceSetting",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M9.969 17.938c4.36 0 7.969-3.618 7.969-7.97C17.938 5.61 14.32 2 9.96 2 5.609 2 2 5.61 2 9.969c0 4.351 3.617 7.969 7.969 7.969zm0-1.329a6.609 6.609 0 01-6.633-6.64 6.602 6.602 0 016.625-6.64 6.627 6.627 0 016.648 6.64 6.61 6.61 0 01-6.64 6.64zm2.445-4.906c-2.367 0-3.883-1.484-3.883-3.851 0-.493.133-1.188.274-1.555.047-.102.047-.164.047-.203a.246.246 0 00-.25-.25.75.75 0 00-.258.047c-1.617.64-2.703 2.39-2.703 4.226 0 2.57 1.968 4.406 4.53 4.406 1.884 0 3.5-1.156 4.056-2.57a.618.618 0 00.054-.234.269.269 0 00-.258-.274.62.62 0 00-.187.032 4.623 4.623 0 01-1.422.226z"})})},358716:(e,t,n)=>{n.d(t,{A:()=>l});n(242343);var s=()=>n(803290),a=()=>n(76394),r=()=>n(166744),o=()=>n(539581),i=n(163643);function l(e){const{type:t,...n}=e,l=(0,s().K8)((()=>{switch(t){case"currentSpace":return o().A.getUnreadCountForCurrentSpace().mentions;case"otherSpaces":return o().A.getUnreadMentionsCountForOtherSpaces();case"allSpaces":return o().A.getTotalUnreadMentionsCount();default:(0,a().HB)(t)}}),[t]);return(0,i.jsx)(r().A,{count:l,...n})}},366247:(e,t,n)=>{n.d(t,{U:()=>u});var s=n(242343),a=()=>n(237385),r=()=>n(758611),o=()=>n(865226),i=()=>n(119186),l=()=>n(137476),c=()=>n(105373);function u(e,t){const n=(0,a().v3)(),{isPhone:u}=(0,a().Y0)(),d=(0,s.useContext)(i().e);return(0,s.useCallback)((s=>{if((0,l().u4)({environment:n,event:{eventName:e,eventProperties:{}}}),u)null==d||d(),o().oo({environment:n,url:"/nativetab/templates",redirect:!0});else{const e="click"===s.type&&(s.metaKey||s.ctrlKey);(null==t?void 0:t.forceOpenInNewTab)||e?o().oo({environment:n,url:r().JZ.marketplace,openInNew:"tab",makeTabActive:!e&&n.device.isDesktop}):(0,c().P)({environment:n})}}),[n,e,t,u,d])}},419949:(e,t,n)=>{n.d(t,{N:()=>s,u:()=>a});n(725707),n(107652),n(491955),n(500234),n(113085);function s(e){return e.trim().normalize().toLocaleLowerCase().replace(/[^\w\s]/gu," ").split(/\s/gu).filter((e=>e.length>0))}function a(e){const{query:t,resultText:n,isLastQueryTermPartialMatchOK:a}=e,r=s(t),o=s(n);let i;if(a&&(i=r.pop(),!i))return!1;const l=r.every((e=>o.some((t=>t===e)))),c=!a||void 0!==o.find((e=>e.startsWith(i??"")));return l&&c}},541709:(e,t,n)=>{n.d(t,{A:()=>i,O:()=>o});var s=n(242343),a=()=>n(653998),r=n(163643);const o=(0,a().YK)({settingsAndMembers:{id:"sidebarSettingsButton.settingsAndMembers",defaultMessage:"Settings & members"},settings:{id:"sidebarSettingsButton.settings",defaultMessage:"Settings"},tooltip:{id:"sidebarSettingsButton.tooltip",defaultMessage:"Manage your account and settings"}}),i=function(e){const{buttonStyles:t}=e,i=(0,a().tz)(),l=i.formatMessage(o.settings),c=(0,n(48913).ab)(),u=(0,s.useCallback)((()=>{n(336519).Ow({openedFrom:"sidebar",currentTab:"user_settings"})}),[]);return(0,r.jsx)(n(103151).A,{renderTooltip:()=>i.formatMessage(o.tooltip),originGap:6,textWrap:!0,placement:n(907721).W.Right,render:e=>(0,r.jsx)(n(126451).A,{...e,onClick:u,style:c.baseSidebarItem,hoveredStyle:null==t?void 0:t.hoveredStyle,children:(0,r.jsx)(n(24071).A,{left:(0,r.jsx)(n(397791).I,{icon:n(389324).gearIcon,color:"secondary",size:"lg"}),children:l})})})}},590240:(e,t,n)=>{n.d(t,{f:()=>T});n(725707),n(491955),n(324989),n(771702),n(403517);var s=()=>n(383641),a=()=>n(561074),r=n(242343),o=()=>n(803290),i=()=>n(174114),l=()=>n(927311),c=()=>n(657723),u=()=>n(528762),d=()=>n(975392),m=()=>n(76394),p=()=>n(479813),v=()=>n(360482),f=()=>n(863969),g=()=>n(539581),h=()=>n(485966),b=()=>n(825634),y=()=>n(413871);n(333225),n(494367),n(516262),n(573119),n(240480),n(950443),n(619601);class S extends(()=>n(129044))().default{getInitialState(){return{emojisBySpace:{}}}addEmojis(e,t){this.update((n=>{const s=n.emojisBySpace[t]||[],a=new Set(s),r=e.filter((e=>!a.has(e)));if(r.length>0){const e=10-s.length,a=r.slice(0,e);if(a.length>0)return{emojisBySpace:{...n.emojisBySpace,[t]:[...s,...a]}}}return n}))}popEmoji(e){const t=this.state.emojisBySpace[e]||[],n=t[t.length-1];return n&&this.update((n=>({emojisBySpace:{...n.emojisBySpace,[e]:t.slice(0,-1)}}))),n}getEmojis(e){return this.state.emojisBySpace[e]||[]}clearEmojis(e){this.update((t=>({emojisBySpace:{...t.emojisBySpace,[e]:[]}})))}}const A=new S;var M=n(163643);const I=.8,x=1,C=24,R=432,k=1;function T(e){const{children:t}=e,[n,S]=(0,r.useState)(!1),[T,w]=(0,r.useState)(void 0),_=(0,o().K8)((()=>b().A.state.isVisible),[]);(0,o().K8)((()=>{const e=g().A.state.results,t=h().default.state.currentUserRootStore;t&&e.forEach((e=>{var n;const s=(null===(n=e.unreceived)||void 0===n?void 0:n.notificationIds)||[],a=e.spaceId;if(!a||!s.length)return;const r=y().SL.createChildStore(t,{table:u().NX,id:a});if(!r)return;g().A.markNotificationsAsReceived(a,s);const o=s.map((e=>y().sk.createChildStore(r,{table:l()._p,id:e}))),i=d().oE(o.map((e=>{const t=v().g5(e);if(null!=t&&t.isReady())return t}))).filter((e=>"reacted"===(null==e?void 0:e.getType()))).filter((e=>!(null!=e&&e.getInvalid()))).sort(((e,t)=>{const n=Number(null==e?void 0:e.getEndTime())??0;return(Number(null==t?void 0:t.getEndTime())??0)-n})).flatMap((e=>{const t=((null==e?void 0:e.getEdits())||[]).filter((e=>e&&"reaction_id"in e&&"reaction-created"===e.type)).sort(((e,t)=>{const n=(null==e?void 0:e.timestamp)??0;return((null==t?void 0:t.timestamp)??0)-n}))[0];return(null==t?void 0:t.reaction_id)??[]})).map((e=>y().sk.createChildStore(r,{table:c().ez,id:e}))).map((e=>null==e?void 0:e.getIcon())).filter(m().O9);i.length>0&&A.addEmojis(i,a)}))}),[]);const U=(0,f().O)(),P=r.useRef(),q=r.useRef(),B=(0,r.useCallback)((()=>{P.current&&(clearTimeout(P.current),P.current=void 0),q.current&&(clearTimeout(q.current),q.current=void 0),S(!1),w(void 0)}),[]),j=(0,r.useCallback)((()=>{if(!_)return void B();if(!U)return void B();const e=A.popEmoji(U);w(e),e?(S(!0),P.current=setTimeout((()=>{S(!1),q.current=setTimeout((()=>{j()}),1e3*I)}),1e3*x)):B()}),[B,_,U]);(0,o().K8)((()=>{if(!U)return;A.getEmojis(U).length>0&&!n&&!P.current&&j()}),[n,j,U]),(0,r.useEffect)((()=>B),[B]);const E=(0,i().IS)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"center"},badge:{display:"flex",alignItems:"center"}})),[]);return(0,M.jsx)("div",{style:E.container,children:(0,M.jsx)(s().N,{mode:"wait",children:T?(0,M.jsx)(a().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:I,type:"spring",damping:C,stiffness:R,mass:k},children:(0,M.jsx)(p().A,{char:T,size:18})},`emoji-${T}`):(0,M.jsx)(a().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:I,type:"spring",damping:C,stiffness:R,mass:k},style:E.badge,children:t},"number")})})}},688508:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>s,templatesIcon:()=>a});n(242343);const s={viewBox:"0 0 20 20",svg:(0,n(163643).jsx)("path",{d:"M7.682 5.716V4.182c0-.858.7-1.557 1.557-1.557h5.823c.858 0 1.557.7 1.557 1.557v5.59a1.56 1.56 0 0 1-1.093 1.486l2.185 3.786c.589 1.038-.154 2.331-1.354 2.331H9.38c-1.138 0-1.895-1.18-1.421-2.201q-.513.113-1.057.114a4.81 4.81 0 0 1-4.818-4.818 4.812 4.812 0 0 1 5.6-4.754M9.24 3.875a.31.31 0 0 0-.307.307v5.6a.3.3 0 0 0 .298.296h1.66l.622-1.075a.6.6 0 0 1 .073-.103 1.56 1.56 0 0 1 2.638.1l.002.003.62 1.075h.217a.31.31 0 0 0 .307-.306v-5.59a.31.31 0 0 0-.307-.307zm-.01 7.453a1.55 1.55 0 0 1-1.547-1.547V6.99a3.562 3.562 0 0 0-4.35 3.481 3.56 3.56 0 0 0 3.569 3.568 3.54 3.54 0 0 0 2.09-.669l1.178-2.04zm3.914-1.7a.31.31 0 0 0-.54.002 1 1 0 0 1-.057.08L9.11 15.665l-.001.002a.306.306 0 0 0 .27.458h6.978a.31.31 0 0 0 .268-.463z"})},a=(0,n(680369).wt)("templates",s)},709330:(e,t,n)=>{n.d(t,{J:()=>a});n(242343);var s=n(163643);const a=(0,n(680369).wt)("templatesNewColored",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{fill:"#FFB110",fillRule:"evenodd",d:"M6.014 16.338a4.429 4.429 0 004.429-4.48H8.88c-.254 0-.512 0-.732-.018a2.26 2.26 0 01-.86-.226 2.24 2.24 0 01-.979-.979 2.26 2.26 0 01-.226-.86 9.471 9.471 0 01-.018-.731V7.48a4.44 4.44 0 014.179 3.111 4.431 4.431 0 00-8.659 1.318 4.43 4.43 0 004.43 4.43z",clipRule:"evenodd"}),(0,s.jsx)("path",{fill:"#097FE8",d:"M12.902 11.044c.463-.802.694-1.203.997-1.338a1.02 1.02 0 01.828 0c.302.135.534.536.996 1.338l2.028 3.512c.463.802.695 1.203.66 1.532-.03.287-.18.548-.414.718-.267.194-.73.194-1.656.194h-4.057c-.925 0-1.388 0-1.656-.194a1.019 1.019 0 01-.414-.718c-.035-.329.197-.73.66-1.532l2.028-3.512z"}),(0,s.jsx)("path",{fill:"#F64932",fillRule:"evenodd",d:"M7.287 4.63c0-.571 0-.856.111-1.074.098-.192.254-.347.445-.445C8.061 3 8.346 3 8.916 3h4.379c.57 0 .855 0 1.073.111.191.098.347.253.445.445.11.218.11.503.11 1.073v3.852a2.24 2.24 0 00-1.521.109c-.46.204-.75.56-.94.83a13.31 13.31 0 00-.594.97l-.024.043-.118.203h-2.81c-.57 0-.855 0-1.073-.11a1.018 1.018 0 01-.445-.445c-.11-.218-.11-.503-.11-1.074V4.63z",clipRule:"evenodd"})]})})},818816:(e,t,n)=>{n.r(t),n.d(t,{SidebarInboxButton:()=>T,inboxMessages:()=>w});var s=n(242343),a=()=>n(237385),r=()=>n(803290),o=()=>n(174114),i=()=>n(49079),l=()=>n(653998),c=()=>n(31448),u=()=>n(151835),d=()=>n(931085),m=()=>n(397791),p=()=>n(103151),v=()=>n(166744),f=()=>n(24071),g=()=>n(863969),h=()=>n(101558),b=()=>n(610489),y=()=>n(271748),S=()=>n(48913),A=()=>n(539581),M=()=>n(440588),I=()=>n(907721),x=()=>n(802955),C=()=>n(590240),R=()=>n(358716),k=n(163643);function T(e){const t=(0,a().v3)(),n=(0,l().tz)(),T=(0,g().O)(),_=(0,r().K8)((()=>"inbox"===y().default.state.contentType&&y().default.isOpen()),[]),U=(0,r().O$)(M().sidebarExpandedStore),P=(0,r().K8)((()=>y().default.state.mode),[]),q=_&&"panel"===P,B=(0,s.useCallback)((()=>{b().ZT({environment:t,contentType:"inbox"})}),[t]),j=(0,o().IS)((e=>({sidebarItem:{...q&&{fontWeight:c().Wy.semibold,background:e.sidebarItemSelectedBackground}},badge:{width:void 0,minWidth:16,paddingLeft:3,paddingRight:3},number:{fontWeight:c().Wy.semibold,letterSpacing:.12,fontSize:10,fontVariantNumeric:"lining-nums tabular-nums",fontFeatureSettings:"lnum",MozFontFeatureSettings:"lnum",WebkitFontFeatureSettings:"lnum"},shortcutLabel:{color:e.text.contrastSecondary}})),[q]),E=(0,S().ab)(),L="on"===(0,h().r)("inbox_activity_split"),N=(0,r().K8)((()=>L?A().A.getUnreadCountForCurrentSpace().comments:0),[L]),O=L?(0,k.jsx)(v().A,{count:N,color:v().g.Red,style:j.badge,numberStyle:j.number,fadeIn:!0}):(0,k.jsx)(R().A,{type:"currentSpace",color:v().g.Red,style:j.badge,numberStyle:j.number,fadeIn:!0}),F="on"===(0,h().r)("collaboration_reaction_notifications")&&U,V=!(0,r().O$)(x().e);return(0,k.jsx)(p().A,{renderTooltip:()=>V?(0,k.jsx)("div",{children:n.formatMessage(w.offlineTooltip)}):(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{children:n.formatMessage(w.tooltip)}),(0,k.jsx)(u().A,{style:j.shortcutLabel,name:"toggleAllUpdates"})]}),originGap:6,placement:I().W.Right,render:t=>{var s;return(0,k.jsx)(d().A,{style:{...E.baseSidebarItem,...j.sidebarItem,...q&&E.currentSelectedSidebarItem},onClick:B,hoveredStyle:null===(s=e.styles)||void 0===s?void 0:s.buttonHoveredStyle,...t,disabled:V,disabledFeedback:V,children:(0,k.jsx)(f().A,{left:(0,k.jsx)(m().I,{icon:i().y,color:"secondary",size:"lg"}),right:F?(0,k.jsx)(C().f,{children:O},T):O,children:n.formatMessage(L?w.messagesTitle:w.inboxTitle)})})}})}const w=(0,l().YK)({tooltip:{id:"sidebar.inbox.tooltip",defaultMessage:"View recent updates and notifications"},inboxTitle:{id:"sidebar.inbox.button",defaultMessage:"Inbox"},messagesTitle:{id:"sidebar.messages.button",defaultMessage:"Messages"},offlineTooltip:{id:"sidebar.inbox.offlineTooltip",defaultMessage:"Unavailable while offline"}})},880996:(e,t,n)=>{n.d(t,{S6:()=>Fe,wn:()=>De,Lj:()=>ze,Nu:()=>Ne,nR:()=>Oe});n(362833),n(333225),n(494367),n(516262),n(573119),n(240480),n(950443),n(619601),n(725707),n(491955),n(771702),n(403517),n(244387);var s=()=>n(237385),a=()=>n(803290),r=()=>n(162901),o=()=>n(145017),i=()=>n(602742),l=()=>n(32194),c=()=>n(975392),u=()=>n(23371),d=()=>n(76394),m=()=>n(141666),p=()=>n(233358),v=()=>n(477784),f=()=>n(877042),g=()=>n(392608),h=()=>n(350536),b=()=>n(36746),y=()=>n(376869),S=()=>n(196387),A=()=>n(723969),M=(n(358848),n(91270),n(500234),n(113085),n(242343),()=>n(819851)),I=()=>n(716605),x=()=>n(266695),C=()=>n(566232),R=()=>n(242978),k=n(163643);const T=(0,n(680369).wt)("copyPadded",{viewBox:"0 0 24 24",svg:(0,k.jsx)("path",{d:"M4.89062 18.5107C4.89062 19.9873 5.64941 20.7529 7.1123 20.7529H13.5107C14.9736 20.7529 15.7256 19.9805 15.7256 18.5107V17.2461H16.8877C18.3506 17.2461 19.1094 16.4805 19.1094 15.0039V9.58984C19.1094 8.69434 18.9248 8.12012 18.3848 7.56641L14.9736 4.09375C14.4609 3.56738 13.8525 3.36914 13.0664 3.36914H10.4893C9.0332 3.36914 8.26758 4.13477 8.26758 5.61133V6.86914H7.1123C5.64941 6.86914 4.89062 7.6416 4.89062 9.11133V18.5107ZM15.042 11.3262L11.3369 7.55957C10.8105 7.02637 10.3662 6.88281 9.60742 6.87598V5.68652C9.60742 5.05762 9.94238 4.70898 10.6055 4.70898H13.4629V7.97656C13.4629 8.82422 13.9141 9.26172 14.7549 9.26172H17.7695V14.9219C17.7695 15.5576 17.4414 15.9062 16.7715 15.9062H15.7256V13.2539C15.7256 12.3311 15.6162 11.9072 15.042 11.3262ZM14.584 7.80566V5.2627L17.4209 8.14062H14.9189C14.6865 8.14062 14.584 8.04492 14.584 7.80566ZM6.23047 18.4287V9.19336C6.23047 8.56445 6.55859 8.20898 7.22168 8.20898H9.32031V11.9551C9.32031 12.9326 9.80566 13.4111 10.7764 13.4111H14.3857V18.4287C14.3857 19.0645 14.0576 19.4131 13.3945 19.4131H7.22168C6.55859 19.4131 6.23047 19.0645 6.23047 18.4287ZM10.9062 12.2285C10.626 12.2285 10.5029 12.1055 10.5029 11.8252V8.46875L14.2012 12.2285H10.9062Z"})});var w=()=>n(507190),_=()=>n(584044),U=()=>n(389324),P=()=>n(620408),q=()=>n(858280),B=()=>n(49079),j=()=>n(709330),E=()=>n(21557),L=()=>n(278760),N=()=>n(758611),O=()=>n(653998),F=()=>n(3311),V=()=>n(809811),D=()=>n(91472),z=()=>n(437071),H=()=>n(336519),W=()=>n(932387),K=()=>n(748001),G=()=>n(342981),Z=()=>n(541709),Y=()=>n(143779),$=()=>n(92451),J=()=>n(576957),Q=()=>n(904697),X=()=>n(818816),ee=()=>n(842617),te=()=>n(89969),ne=()=>n(520969),se=()=>n(300659),ae=()=>n(610489),re=()=>n(716571),oe=()=>n(485966),ie=()=>n(141122),le=()=>n(330358),ce=()=>n(424339);const ue=(0,O().YK)({tooltip:{id:"team_home.tooltip",defaultMessage:"See announcements and other team updates"},searchResultCaption:{id:"team_home.searchResultCaption",defaultMessage:"Teamspace â€“ See announcements and other team updates"}}),de=3;function me(e){const{environment:t}=e;return{type:"client_action",eventName:"settings",value:{behavior:"action",title:v().A.formatMessage(Z().O.settings),aliases:void 0,icon:U().gearIcon,caption:v().A.formatMessage(Z().O.tooltip),action:()=>{t.device.isElectron?z().openQuickSearchShortcutSetting():H().Ow({openedFrom:"search_modal",currentTab:"settings"})}}}}function pe(e){if(!he)return[];const t=ie().default.getPeekMode(),n=(0,c().hS)([ie().default.state.open?{name:"center_peek"===t?"center":"peek",store:ie().default.state.targetStore}:void 0,"center_peek"!==t?{name:"main",store:oe().default.state.mainEditorCurrentBlockStore}:void 0],(e=>{var t;return null==e||null===(t=e.store)||void 0===t?void 0:t.id})),s=[];for(const{name:r,store:o}of(0,c().oE)(n)){var a;if(!o)continue;const t=o.getAssociatedCollectionStore();if(!t)continue;const n=t.getSchema();if(!n)continue;const i=(0,d().WP)(n).find((e=>{let[t,n]=e;return"auto_increment_id"===(null==n?void 0:n.type)}));if(!i)continue;const[l,c]=i;if(!c)continue;const u=null===(a=t.getRecordKeyStore())||void 0===a?void 0:a.getRecordKey(),m=(0,I().On)(o.getPropertyValue(l));if(!u||!m)continue;const p=(0,M().H4)(u,m);if(p){const t=(0,$().tS)({environment:e.environment,intl:v().A.getIntl(),store:o});s.push({type:"client_action",eventName:`${r}_unique_id`,value:{behavior:"action",title:v().A.formatMessage(Ce.copyUniqueIdForPage,{pageTitle:t,idPropertyName:c.name}),aliases:[v().A.formatMessage(Ce.copyUniqueIdAlias)],caption:v().A.formatMessage(Ce.copyUniqueIdForPageCaption),icon:T,shouldIgnoreTitle:!1,action:async()=>{const t=await D().R.clipboardActions.load();await t.copyString({environment:e.environment,stringValue:p,copiedMessage:Ce.copyUniqueIdSnackNotification})}}})}}return s}function ve(e){const t=(0,ne().x$)(oe().default.state.currentSpaceViewStore);if(t)return{type:"client_action",eventName:"home",value:{behavior:"navigation",title:v().A.formatMessage(re().aQ.label),aliases:void 0,icon:P().P,caption:v().A.formatMessage(re().aQ.tooltip),destination:{type:"block",blockStore:t}}}}function fe(e){const{environment:t}=e;if(!(0,se().D)({isMobileNative:t.device.isMobileNative,disableExposureLogging:!0}))return[];const{currentSpaceViewStore:n,currentUserStore:s,currentSpaceStore:a}=oe().default.state,r=(null==n?void 0:n.getTeamsStores())??[];if(!(null==s?void 0:s.id)||!a)return[];const o=(0,Q().getTeamsWithAggregateDataFromCache)(a.id);if(!o)return[];const i=o.teams.filter((e=>"closed"!==e.getTeamAccessLevel())),l=new Set(r.map((e=>e.id)));return i.sort(((e,t)=>Number(l.has(t.id))-Number(l.has(e.id)))).map((e=>{const t=e.getIcon();return{type:"client_action",eventName:"team_home",value:{behavior:"navigation",aliases:void 0,title:e.getName()??"UnnamedTeamspace",icon:t?(e,n)=>(0,k.jsx)(ce().x,{icon:t,style:e}):P().P,caption:v().A.formatMessage(ue.searchResultCaption),destination:{type:"url",url:(0,L().a)({teamId:e.id,spaceId:e.getSpaceId()})}}}}))}function ge(e){const{environment:t,isCommandSearch:n}=e;if(he&&!n)return{type:"client_action",eventName:"inbox",value:{behavior:"action",title:v().A.formatMessage(X().inboxMessages.inboxTitle),aliases:[v().A.formatMessage(Ce.inboxNotificationAlias),v().A.formatMessage(Ce.inboxUpdateAlias)],caption:v().A.formatMessage(X().inboxMessages.tooltip),icon:B().y,action:()=>(0,ae().ZT)({environment:t,contentType:"inbox"})}}}const he=!1;function be(e){if((0,J().l)()&&!e.isCommandSearch)return{type:"client_action",eventName:"experiments",value:{behavior:"action",title:v().A.formatMessage(Ce.experiments),aliases:[v().A.formatMessage(Ce.experimentGateAlias)],caption:v().A.formatMessage(Ce.experimentsCaption),icon:E().G,action:()=>{le().A.setState({...le().A.state,open:!0,currentTab:"experiments",defaultSubtab:void 0})}}}}function ye(e){if(!e.isCommandSearch)return{type:"client_action",eventName:"import",value:{behavior:"action",title:v().A.formatMessage(G().h.tabTitle),aliases:void 0,caption:v().A.formatMessage(G().h.tabSubtitle),icon:q().n,action:()=>le().A.setState({...le().A.state,open:!0,currentTab:"imports",defaultSubtab:void 0})}}}function Se(e){return{type:"client_action",eventName:"templates",value:{behavior:"navigation",title:v().A.formatMessage(Y().U.title),aliases:[v().A.formatMessage(Ce.templatesGalleryAlias)],caption:v().A.formatMessage(Y().U.templatesMwnTooltip),icon:j().J,destination:{type:"url",url:N().JZ.marketplace}}}}function Ae(e){if(he&&!e.isCommandSearch)return{type:"client_action",eventName:"toggle_performance_toolbar",value:{behavior:"action",title:v().A.formatMessage(Ce.performanceToolbar),aliases:void 0,caption:v().A.formatMessage(Ce.performanceToolbarCaption),icon:R().v,action:()=>{(0,te().D)(e.environment,e.environment.RouterStore.state)&&ee().T1.load().then((e=>{let{PerformanceToolbarStore:t}=e;return t.update((e=>({...e,isPerformanceToolbarPinned:!e.isPerformanceToolbarPinned})))}))}}}}function Me(e){const{environment:t}=e,n="light"===t.ThemeStore.state.mode;if(he)return{type:"client_action",eventName:"toggle_theme",value:{behavior:"action",title:v().A.formatMessage(Ce.toggleTheme),aliases:[v().A.formatMessage(Ce.darkMode),v().A.formatMessage(Ce.lightMode),v().A.formatMessage(Ce.themeMode)],caption:v().A.formatMessage(n?Ce.toggleDarkThemeCaption:Ce.toggleLightThemeCaption),icon:x().m,action:()=>{const e=n?"dark":"light";K().C5(e)}}}}Object.freeze(new Set(["how","what","when","where","why","can","do","tell","explain","help","give","create"]));function Ie(e){if(!he)return[];const{query:t,environment:n}=e,s=(0,F().ZA)(t);if(void 0===s)return[];const a=V().Gm({url:`/${t}`});return[{type:"client_action",eventName:"copy_as_dashed_uuid",value:{behavior:"action",title:v().A.formatMessage(Ce.copyAsDashedUuid),aliases:[],caption:s,icon:w().V,shouldIgnoreTitle:!0,action:async()=>{const e=await D().R.clipboardActions.load();await e.copyString({environment:n,stringValue:s,copiedMessage:Ce.copyAsDashedUuidSnackbar})}}},{type:"client_action",eventName:"navigate_to_undashed_uuid",value:{behavior:"navigation",title:v().A.formatMessage(Ce.navigateToUuid),aliases:[],caption:a,icon:C().P,shouldIgnoreTitle:!0,destination:{type:"url",url:a}}}]}function xe(e){if(!he)return[];const{query:t,environment:n}=e;if(!(0,F().uj)(t))return[];const s=(0,F().Xw)(t),a=V().Gm({url:`/${s}`});return[{type:"client_action",eventName:"copy_as_undashed_uuid",value:{behavior:"action",title:v().A.formatMessage(Ce.copyAsUndashedUuid),aliases:[],caption:s,icon:w().V,shouldIgnoreTitle:!0,action:async()=>{const e=await D().R.clipboardActions.load();await e.copyString({environment:n,stringValue:s,copiedMessage:Ce.copyAsUndashedUuidSnackbar})}}},{type:"client_action",eventName:"navigate_to_dashed_uuid",value:{behavior:"navigation",title:v().A.formatMessage(Ce.navigateToUuid),aliases:[],caption:a,icon:C().P,shouldIgnoreTitle:!0,destination:{type:"url",url:a}}}]}const Ce=(0,O().YK)({performanceToolbar:{id:"search.actionResult.performanceToolbar",defaultMessage:"Performance toolbar"},performanceToolbarCaption:{id:"search.actionResult.fpsCaption",defaultMessage:"Toggle the performance toolbar."},toggleTheme:{id:"search.actionResult.toggleTheme",defaultMessage:"Toggle theme"},toggleDarkThemeCaption:{id:"search.actionResult.toggleDarkThemeCaption",defaultMessage:"Switch to dark theme."},toggleLightThemeCaption:{id:"search.actionResult.toggleLightThemeCaption",defaultMessage:"Switch to light theme."},darkMode:{id:"search.actionResult.darkModeAlias",defaultMessage:"Dark mode"},lightMode:{id:"search.actionResult.lightModeAlias",defaultMessage:"Light mode"},themeMode:{id:"search.actionResult.themeModeAlias",defaultMessage:"Theme"},copyAsDashedUuid:{id:"search.actionResult.copyAsDashedUuid",defaultMessage:"Copy as dashed UUID"},copyAsDashedUuidSnackbar:{id:"search.actionResult.copyAsDashedUuidSnackbar",defaultMessage:"Copied dashed UUID"},navigateToUuid:{id:"search.actionResult.navigateToUuid",defaultMessage:"Navigate to block UUID"},copyAsUndashedUuid:{id:"search.actionResult.copyAsUndashedUuid",defaultMessage:"Copy as undashed UUID"},copyAsUndashedUuidSnackbar:{id:"search.actionResult.copyAsUndashedUuidSnackbar",defaultMessage:"Copied as undashed UUID"},experiments:{id:"search.actionResult.experiments",defaultMessage:"Experiments"},experimentsCaption:{id:"search.actionResult.experimentsCaption",defaultMessage:"View and manage experiments."},inboxUpdateAlias:{defaultMessage:"updates",id:"search.actionResult.inbox.updates"},inboxNotificationAlias:{defaultMessage:"notifications",id:"search.actionResult.inbox.notifications"},templatesGalleryAlias:{defaultMessage:"gallery",id:"search.actionResult.templates.gallery"},experimentGateAlias:{defaultMessage:"gate",id:"search.actionResult.experiments.gate"},copyUniqueIdForPage:{defaultMessage:"Copy {idPropertyName} for {pageTitle}",id:"search.actionResult.copyUniqueId"},copyUniqueIdForPageCaption:{defaultMessage:"Copy unique identifier for page to clipboard",id:"search.actionResult.copyUniqueIdCaption"},copyUniqueIdSnackNotification:{defaultMessage:"Unique ID copied",id:"search.actionResult.copyUniqueIdSnackNotification"},copyUniqueIdAlias:{defaultMessage:"unique",id:"search.actionResult.copyUniqueIdAlias"}});var Re=()=>n(289232),ke=()=>n(908589),Te=()=>n(186438),we=()=>n(802955),_e=()=>n(836331),Ue=()=>n(761079),Pe=()=>n(271932),qe=()=>n(413871),Be=()=>n(36398),je=()=>n(965990),Ee=()=>n(477300),Le=()=>n(189823);function Ne(e){const t=(0,s().v3)(),n=(0,y().y)();return(0,a().K8)((()=>{const s=Boolean(we().A.state.online);let a=Le().Ay.state.query;!s&&n&&(a={...a,filters:{...a.filters,isOfflineOnly:!0}});const{hasPublicAccessPermission:r,publicAccessPermissionAncestorBlockId:o}=b().Er(t);return{isOnline:s,limit:Le().Ay.state.limit,parentStore:e,hasPublicAccessPermission:r,publicAccessPermissionAncestorBlockId:o,currentSpaceStore:oe().default.state.currentSpaceStore,debug:Be().Ay.getDebugLevel(),openAsPage:je().default.state.openAsPage,currentSpaceViewStore:oe().default.state.currentSpaceViewStore,query:a,localSearchablePagesStore:Pe().A}}),[t,e,n])}function Oe(e){let{dependencies:t,debugColumnStore:n,localDebounce:o=75,serverSearchFn:l,searchResultStore:u,permanentFilterOverride:d,enabled:m,preventUpdateSearchMetrics:v}=e;const g=(0,s().v3)(),h=(0,a().K8)((()=>function(e){const{debugColumnStore:t}=e,n=t.state.searchExperimentOverrides;function s(e){return(null==n?void 0:n[e])??_e().default.getGroup(e,{disableExposureLogging:!0})}function a(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"control";const a=null==n?void 0:n[e];if(a)return a;const r=_e().default.getEligibleGroup({experimentId:e,parameter:t,defaultGroup:s});return void 0===r?"control":r}return{isLocalBlendingDisabled:"on"===s("search-no-local-blending"),shouldUseNewRerankerDebugOverrideEnabled:"on"===a("search-use-local-reranker-layered","shouldUseLocalReranker","control"),forcedClusterPattern:t.state.forcedClusterPattern,searchExperimentOverrides:t.state.searchExperimentOverrides,forcedBlockIds:t.state.forcedBlockIds}}({debugColumnStore:n})),[n]);(0,r().Yb)((()=>m?async function(e){const{query:t,openAsPage:n,store:s,environment:a,serverSearchFn:r}=e;if(n&&c().n4(t,s.state.selectedQueryResultQuery))return;const o=Date.now(),l=je().default.state.searchMode;if(function(e){const{parentStore:t,environment:n,query:s,debug:a,limit:r,hasPublicAccessPermission:o,isOnline:l,store:u,permanentFilterOverride:d,preventUpdateSearchMetrics:m,now:v,shouldUseNewRerankerDebugOverrideEnabled:g,searchMode:h,localSearchablePagesStore:y,currentSpaceStore:A}=e,M=S().default.mark("rum.local_quick_search_query"),I=y.state.localSearchableBlocksCache,x=(0,f().PE)({environment:n,overrideCurrentUserId:n.currentUser.id,overrideSpaceId:null==A?void 0:A.id,overrideLocalSearchableBlocksCache:I});if("quick_find_scroll"===Le().Ay.state.source)return;let C;const R={...s,filters:{...s.filters,...d}},{text:k,sort:T}=R,w=function(e){const t=[];e.match(i().U7)&&t.push("literal");e.match(i().fo)&&t.push("negation");return t}(k);w.length>0&&p().o(n,{operations:w,searchSessionId:p().wr()});const _="nav-local-only"!==h;if(function(e){const{isLocalBlendingDisabled:t,queryOperations:n,queryText:s,querySort:a}=e;return!c().Im(s.trim())&&!t&&0===n.length&&"relevance"===a.field}({isLocalBlendingDisabled:e.isLocalBlendingDisabled||"full-content"===h,queryOperations:w,queryText:k,querySort:T})){var U;C=b().mj(Fe({parentStore:t,environment:n,requestInput:{query:R,debug:a,limit:r},hasPublicAccessPermission:o,isOnline:l,localSearchCache:I,shouldUseNewRerankerDebugOverrideEnabled:g,shouldLimitLocalResultsWhenOnline:_})),S().default.measure(M,{environment:n,data:{success:Boolean(C),start_time:M.startTime,surface:"quick_search",num_results:(null===(U=C)||void 0===U||null===(U=U.results)||void 0===U?void 0:U.length)||0,search_session_id:je().default.state.sessionId,local_cache_metadata:x,local_cache_readiness_timings:(0,f().Yp)(),query_length:k.length}}),m||Ee().default.update((e=>({...e,numLocalRequests:e.numLocalRequests+1})))}else C=void 0;u.update((e=>{var t;return null===(t=C)||void 0===t||t.results.forEach((t=>e.timesToRender.set(t.id,Date.now()-v))),{...e,localResults:C}}))}({...e,now:o,searchMode:l}),De({query:t.text,store:s,environment:a,searchMode:l}),"nav-local-only"===l)s.update((e=>({...e,serverResults:void 0})));else{var u;const t=new Set;null===(u=s.state.localResults)||void 0===u||u.results.forEach((e=>t.add(e.id)));const n="default"!==l?ze:r;await n({...e,now:o,excludedBlockIds:[...t],searchMode:l})}}({...t,...h,store:u,serverSearchFn:l,environment:g,permanentFilterOverride:d,preventUpdateSearchMetrics:v}):Promise.resolve()),[t,h,u,l,g,d,m,v],{debounce:o})}function Fe(e){const{parentStore:t,requestInput:n,isOnline:s,environment:a,hasPublicAccessPermission:r,localSearchCache:o,shouldUseNewRerankerDebugOverrideEnabled:i,shouldLimitLocalResultsWhenOnline:c}=e,{query:u}=n;if(!o)return;if(!u.text.trim())return;if(r)return;const d=(0,A().r)({query:n,localCachedPages:o,parentStore:t,environment:a,isOnline:s,shouldLimitLocalResultsWhenOnline:c,applyScoreThresholdWhenOnline:!0,canUseLtr:!0,shouldUseNewRerankerDebugOverrideEnabled:i});return!d||null!=d&&d.error||d.value.results.forEach((e=>{if(!Boolean(e.store.isTemplate()))return;const t={type:"is_template",properties:{},label:v().A.formatMessage(l().Nz.template)};e.badges=e.badges?[...e.badges,t]:[t]})),d}async function Ve(e){const{parentStore:t,requestInput:n,isOnline:s,environment:a,publicAccessPermissionAncestorBlockId:r,searchSessionId:i,searchSessionFlowNumber:c,source:u,spaceId:p,searchExperimentOverrides:v,forcedClusterPattern:f,forcedBlockIds:h,excludedBlockIds:y}=e;if(!s)return{error:l().yq.Offline};const S=(0,g().w6)(a),A=(0,Te().g)();(S||A)&&r&&(n.query.filters.includePublicPagesWithoutExplicitAccess=!0);const M=await b().Uc({environment:a,input:n,spaceId:p,publicAccessPermissionAncestorBlockId:r,searchSessionId:i,searchSessionFlowNumber:c,source:u,searchExperimentOverrides:v,forcedClusterPattern:f,recentPagesForBoosting:p&&"on"!==(null==v?void 0:v["search-debug-only-no-recent-boosting"])?Ue().A.getWithoutSubscribing(p):[],forcedBlockIds:h,excludedBlockIds:y});if(!M)return;if("failed"===M.type)return M.offline?{error:l().yq.Offline}:{error:l().yq.RequestFailed};const{trackEventProperties:I,results:x,total:C,debug:R,clusterInfo:k}=M.data,T=(0,m().MU)((0,d().WP)(I).map((e=>{let[t,n]=e;return[`server-${t}`,n]})));return{value:{results:x.map(((e,n)=>({...e,serverEventProperties:T,originalPosition:n,store:qe().Bv.createChildStore(t,{table:o().ev,id:e.id})}))),total:C,debugInfo:R,serverEventProperties:T,clusterInfo:k}}}function De(e){const{query:t,store:n,environment:s,searchMode:a}=e,r=_e().default.checkGate({gateName:"search-custom-action-results"}),o=s.currentUser.isLoggedIn();if(!r||!o)return;const i=Boolean(je().default.state.isNewElectronTab),l=function(e){const{query:t,environment:n,isNewElectronTab:s}=e;if(t.length<de)return[];const a={query:t,environment:n,isCommandSearch:(0,h().q)(n)},r=e=>{var n;if(!e||"action"===e.value.behavior&&s)return!1;if(e.value.shouldIgnoreTitle)return!0;const a=t.toLowerCase();if(e.value.title.toLowerCase().startsWith(a))return!0;const r=null===(n=e.value.aliases)||void 0===n?void 0:n.some((e=>e.toLowerCase().startsWith(a)));return Boolean(r)};return[[ge(a)].filter(r),[be(a)].filter(r),[Ae(a)].filter(r),[Me(a)].filter(r),Ie(a).filter(r),xe(a).filter(r),pe(a).filter(r),[ve()].filter(r),fe(a).filter(r).slice(0,5),[me(a)].filter(r),[ye(a)].filter(r),[Se()].filter(r)].flat()}({query:t,environment:s,isNewElectronTab:i}),c=(0,h().q)(s),u="nav-local-only"===a,d=(()=>{if(!u)return[];const e=function(e){const{isCommandSearch:t,query:n,environment:s}=e;if(t)return;return{type:"client_action",eventName:"deep_dive",value:{behavior:"action",title:`Search for â€œ${n.trim()}â€œ in full page`,icon:()=>(0,_().L)({height:20,width:20}),shouldIgnoreTitle:!0,action:()=>W().sv({environment:s,shouldResetAssistantStore:!0,device:s.device,quickSearchMode:t,from:t?"command_search_deep_dive":"search_deep_dive"}),aliases:void 0,caption:void 0}}}({query:t,environment:s,isCommandSearch:c});return e?[e]:[]})(),m=d?[...d,...l]:l;return null==n||n.update((e=>({...e,queryBasedActionResults:m}))),m}async function ze(e){var t,n,s,a,r,o,l,d;let{parentStore:m,environment:v,query:f,debug:g,isOnline:y,publicAccessPermissionAncestorBlockId:A,currentSpaceStore:M,searchExperimentOverrides:I,forcedClusterPattern:x,store:C,forcedBlockIds:R,limit:k,permanentFilterOverride:T,excludedBlockIds:w,preventUpdateSearchMetrics:_,now:U,searchMode:P}=e;const q=S().default.mark("rum.server_quick_search_query"),B={...f,filters:{...f.filters,...T}};if(!B.text.trim()&&!b().J3(B.filters))return;const j=Le().Ay.state.source,E="quick_find_scroll"===j,L=E||0===Ee().default.state.numServerRequests&&"full-content"!==P;C.update((e=>{var t;return{...e,serverResultsLoading:!0,...L?{serverResults:e.serverResults,serverEventProperties:null===(t=e.serverResults)||void 0===t?void 0:t.serverEventProperties}:{serverResults:void 0,serverEventProperties:void 0}}})),_||Ee().default.update((e=>({...e,numServerRequests:e.numServerRequests+1})));const N=(0,i().mk)({searchSessionId:je().default.state.sessionId,searchSessionFlowNumber:Ee().default.state.numServerRequests}),O={query:B,debug:g,limit:k};let F;if((0,ke().o)(M)){const{currentUserRootStore:e}=oe().default.state,t=(0,c().oE)(e?(0,Re().f)({currentUserRootStore:e}).map((e=>e.getSpaceId())):[null==M?void 0:M.id]);F=await async function(e){const{spaceIds:t,...n}=e,s=await(0,u().lX)(t,10,(e=>Ve({spaceId:e,...n}))),a=(0,c().oE)(s.filter((e=>!(null!=e&&e.error))));return 0===a.length?s[0]:a.reduce(((e,t)=>({value:{results:e.value.results.concat(t.value.results),total:e.value.total+t.value.total}})))}({parentStore:m,environment:v,requestInput:O,spaceIds:t,searchSessionId:je().default.state.sessionId,searchSessionFlowNumber:Ee().default.state.numServerRequests,publicAccessPermissionAncestorBlockId:A,isOnline:y,source:j,searchExperimentOverrides:I,forcedClusterPattern:x,forcedBlockIds:R,excludedBlockIds:w})}else F=await Ve({parentStore:m,environment:v,requestInput:O,spaceId:null==M?void 0:M.id,searchSessionId:je().default.state.sessionId,searchSessionFlowNumber:Ee().default.state.numServerRequests,publicAccessPermissionAncestorBlockId:A,isOnline:y,source:j,searchExperimentOverrides:I,forcedClusterPattern:x,forcedBlockIds:R,excludedBlockIds:w});if(N!==(0,i().mk)({searchSessionId:je().default.state.sessionId,searchSessionFlowNumber:Ee().default.state.numServerRequests}))return;if(!F||F.error)return C.update((e=>{var t;return{...e,serverError:null===(t=F)||void 0===t?void 0:t.error,serverResultsLoading:!1,serverResults:void 0,serverEventProperties:void 0}}));const V=E?b().RH({existingResults:C.state.serverResults,newPageResults:F.value}):F.value;S().default.measure(q,{environment:v,data:{start_time:q.startTime,success:!0,surface:"quick_find",num_results:(null===(t=C.state.serverResults)||void 0===t?void 0:t.results.length)||0,search_session_id:je().default.state.sessionId,search_session_flow_number:Ee().default.state.numServerRequests,query_length:B.text.length}}),C.update((e=>{var t;return F.value.results.forEach((t=>e.timesToRender.set(t.id,Date.now()-U))),{...e,serverError:null===(t=F)||void 0===t?void 0:t.error,serverResultsLoading:!1,serverResults:V,serverResultsAllLoaded:F.value.results.length<k,serverEventProperties:F.value.serverEventProperties}}));const D=(null===(n=C.state.serverResults)||void 0===n?void 0:n.results.map((e=>{var t;return{id:e.id,badges:(null===(t=e.badges)||void 0===t?void 0:t.map((e=>e.type)))??[]}})))??[],z=new Map;for(const{badges:i}of D)for(const e of i){const t=z.get(e)??0;z.set(e,t+1)}const{sections:H}=b().HA({intentBasedGrouping:(0,h().Y)(),localResults:null===(s=C.state.localResults)||void 0===s?void 0:s.results,serverResults:null===(a=C.state.serverResults)||void 0===a?void 0:a.results}),W={};for(const[i,c]of Object.entries(H))W[i]=c.map((e=>e.id));p().fe(v,{numLocalResults:(null===(r=C.state.localResults)||void 0===r?void 0:r.results.length)||0,localResultsIds:(null===(o=C.state.localResults)||void 0===o?void 0:o.results.map((e=>e.id)))||[],totalLocalResultIds:(null===(l=C.state.localResults)||void 0===l?void 0:l.totalResultIds)||[],numServerResults:(null===(d=C.state.serverResults)||void 0===d?void 0:d.results.length)||0,...C.state.serverEventProperties,badgeCounts:z,badgesByResultId:D,idsBySection:W,timeToRenderById:[...C.state.timesToRender.entries()].map((e=>{let[t,n]=e;return{id:t,timeToRender:n}}))})}}}]);