"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[92821,93139],{501518:(e,t,n)=>{n.r(t),n.d(t,{getCurrentWorkflowNavigationState:()=>O,getDefaultClosedNavigationState:()=>y,getDefaultOpenNavigationState:()=>S,getIsWorkflowEditorOpen:()=>b,getIsWorkflowEditorStateOpen:()=>k,getIsWorkflowNavigationStateCurrent:()=>m,getMergedWorkflowNavigationState:()=>N,routeArgsGivenNavigationState:()=>V,useIsWorkflowEditorOpen:()=>j,useWorkflowNavigationState:()=>C});var i=()=>n(237385),o=()=>n(803290),r=()=>n(975392),a=()=>n(3311),s=()=>n(76394),u=()=>n(44658),c=()=>n(627618),l=()=>n(485966),p=()=>n(308265);const g=c().object({required:{isOpen:c().literal(!0)},optional:{}}),w={configure:c().intersection([g,c().object({required:{type:c().literal("configure")},optional:{prompt:c().string()}})]),function:c().intersection([g,c().object({required:{type:c().literal("function"),key:c().string()},optional:{}})]),module:c().intersection([g,c().object({required:{type:c().literal("module"),key:c().string()},optional:{}})]),database:c().intersection([g,c().object({required:{type:c().literal("database"),id:c().string()},optional:{}})]),trigger:c().intersection([g,c().object({required:{type:c().literal("trigger"),key:c().string()},optional:{}})]),debug:c().intersection([g,c().object({required:{type:c().literal("debug")},optional:{}})]),preview:c().intersection([g,c().object({required:{type:c().literal("preview")},optional:{collectionViewId:c().string()}})]),runtime_actor:c().intersection([g,c().object({required:{type:c().literal("runtime_actor")},optional:{}})]),view_settings:c().intersection([g,c().object({required:{type:c().literal("view_settings"),key:c().string()},optional:{}})]),runs:c().intersection([g,c().object({required:{type:c().literal("runs")},optional:{runId:c().string()}})]),test:c().intersection([g,c().object({required:{type:c().literal("test"),name:c().string(),functionKey:c().string()},optional:{}})])},f=c().union(Object.values(w)),d=c().object({required:{isOpen:c().literal(!1)},optional:{}}),v=c().union([f,d]);function S(){return{isOpen:!0,type:"configure"}}function y(){return{isOpen:!1}}function k(e){return(null==e?void 0:e.isOpen)??!1}function b(e){return k(O(e))}function m(e){const{currentNavigationState:t,navigationState:n}=e,i=N({defaultNavigationState:{isOpen:!1},currentNavigationState:t,newNavigationState:n});return(0,r().n4)(t,i)}function O(e){const{RouterStore:t}=e;if("page"!==t.state.route.name)return;const n=l().default.state.mainEditorCurrentBlockStore;return n&&n.isCollectionView()&&n.canEdit()&&!n.isLocked()?function(e){const{workflowViewType:t,workflowViewKey:n,workflowPrompt:i,collectionViewId:o}=e;switch(t){case"debug":case"runtime_actor":return{isOpen:!0,type:t};case"function":case"module":case"trigger":case"view_settings":if(!n)return;return{isOpen:!0,type:t,key:n};case"database":if(!n)return;return{isOpen:!0,type:t,id:(0,a().ZA)(n)??n};case"preview":return{isOpen:!0,type:"preview",collectionViewId:o};case"configure":return{isOpen:!0,type:"configure",prompt:i?decodeURIComponent(i):void 0};case"runs":return{isOpen:!0,type:"runs",runId:(0,a().ZA)(n)};case"test":if(!n)return;const[e,r]=n.split(",");if(!e||!r)return;return{isOpen:!0,type:"test",name:r,functionKey:e};default:return}}(t.state.route):void 0}function N(e){const{defaultNavigationState:t,currentNavigationState:n,newNavigationState:i}=e;if(!(0,p().sx)())return{isOpen:!1};const o={...t};if(n)for(const[a,s]of Object.entries(n))o[a]=s;if(i)for(const[a,s]of Object.entries(i))o[a]=s;const r=(0,u().tf)(v,o);if(r)throw r;return o}function V(e){if(!e.isOpen)return{workflowViewType:void 0,workflowViewKey:void 0,collectionViewId:void 0};const t=e.type,n={};switch(t){case"configure":case"debug":case"runtime_actor":return{...n,workflowViewType:t,workflowViewKey:void 0};case"function":case"module":case"trigger":case"view_settings":return{...n,workflowViewType:t,workflowViewKey:e.key};case"database":return{...n,workflowViewType:t,workflowViewKey:e.id};case"runs":return{...n,workflowViewType:t,workflowViewKey:e.runId};case"test":return{...n,workflowViewType:t,workflowViewKey:`${e.functionKey},${e.name}`};case"preview":return{...n,workflowViewType:"preview",collectionViewId:e.collectionViewId};default:(0,s().HB)(t)}}function C(){const e=(0,i().v3)();return(0,o().K8)((()=>O(e)??{isOpen:!1}),[e])}function j(){const e=(0,i().v3)();return(0,o().K8)((()=>b(e)),[e])}},993054:(e,t,n)=>{n.r(t),n.d(t,{closeWorkflowEditor:()=>g,onConfigItemClick:()=>l,showWorkflowEditor:()=>p});var i=()=>n(975392),o=()=>n(865226),r=()=>n(895085),a=()=>n(321185),s=()=>n(29869),u=()=>n(485966),c=()=>n(501518);function l(e){const{environment:t,navigationState:n,parentStore:o}=e,r=(0,c().getCurrentWorkflowNavigationState)(t);(0,i().n4)(r,n)?p({environment:t,navigationState:{isOpen:!0,type:"configure"},parentStore:o}):p({environment:t,navigationState:n,parentStore:o})}function p(e){const{environment:t,parentStore:n,redirect:i}=e,l=(0,c().getMergedWorkflowNavigationState)({defaultNavigationState:(0,c().getDefaultOpenNavigationState)(),currentNavigationState:(0,c().getCurrentWorkflowNavigationState)(t),newNavigationState:e.navigationState}),p=(0,a().getMergedChatSidebarState)({environment:t,update:e.chatSidebarState}),g=(0,c().routeArgsGivenNavigationState)(l),w=(0,a().routeArgsGivenChatSidebarState)(p);(0,r().maybeCloseNotionSidebar)({environment:t});const f=(0,s().Ef)({environment:t,updates:{...g,...w,store:n}}),d=void 0!==n&&u().default.state.mainEditorCurrentBlockStore!==n;o().oo({environment:t,url:f,redirect:i??!d})}function g(e){const{environment:t,newStore:n,redirect:i}=e,u=(0,c().routeArgsGivenNavigationState)((0,c().getDefaultClosedNavigationState)()),l=(0,a().routeArgsGivenChatSidebarState)(a().CLOSED_CHAT_SIDEBAR_STATE),p=(0,s().Ef)({environment:t,updates:{...u,...l,store:n}});(0,r().maybeOpenNotionSidebar)(),o().oo({environment:t,url:p,redirect:i??!0})}}}]);