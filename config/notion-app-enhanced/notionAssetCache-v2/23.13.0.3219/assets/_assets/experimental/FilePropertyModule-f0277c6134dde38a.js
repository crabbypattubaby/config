"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5938],{116485:(e,t,n)=>{n.d(t,{A5:()=>p,MR:()=>v,Mx:()=>s,Pb:()=>g,WL:()=>y,hg:()=>c,kZ:()=>f,pv:()=>d,vV:()=>h});n(403517);var o=n.n(n(309102)),r=n(242343),i=()=>n(880195),a=()=>n(656473),l=n(163643);const s=r.forwardRef((function(e,t){const{children:r,type:s,gap:c,withBottomPadding:d,style:u,onMouseDown:p,onClick:m,onDoubleClick:h,onContextMenu:g}=e,f=(0,n(248584).n$)(s),y=(0,n(803290).K8)((()=>a().A.getPanelState("peek").isOpen&&"static_sidebar"===a().A.getPanelState("peek").displayStyle),[]);return(0,l.jsx)(i().A,{name:"PageLayout",children:(0,l.jsx)("div",{className:o()("layout",{"layout-wide":"wide"===s,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===s,"layout-side-peek":"side-peek"===s,"layout-center-peek":"center-peek"===s&&!y,"layout-center-peek-with-layout-panel":"center-peek"===s&&y,"layout-home":"home"===s,"layout-home-phone":"home-phone"===s,"layout-home-redesign-desktop":"home-redesign-desktop"===s,"layout-form":"form"===s,"layout-form-viewer":"form-viewer"===s,"layout-form-viewer-embed":"form-viewer-embed"===s,"layout-phone":"phone"===s,"layout-tablet":"tablet"===s,"layout-template-preview":"template-preview"===s,"layout-chat":"chat"===s,"layout-layout-editor":"layout-editor"===s,"layout-layout-editor-wide":"layout-editor-wide"===s,"layout-layout-editor-narrow":"layout-editor-narrow"===s,"layout-marketplace":"marketplace"===s,"layout-marketplace-mobile":"marketplace-mobile"===s,"layout-team-home":"team-home"===s,"layout-team-home-mobile":"team-home-mobile"===s,"layout-create-post":"create-post"===s,"layout-fullscreen-ai":"fullscreen-ai"===s,"layout-narrowscreen-ai":"narrowscreen-ai"===s,"layout-presentation-mode":"presentation-mode"===s,"layout-person-profile":"person-profile"===s}),style:{paddingBottom:d?f:void 0,gap:c,...u},ref:t,onMouseDown:p,onClick:m,onDoubleClick:h,onContextMenu:g,children:r})})})),c="layout-content",d="layout-full",u="layout-margin-right",p="hide-scrollbar",m="layout-column",h=r.forwardRef((function(e,t){return(0,l.jsx)(i().A,{name:"PageLayoutContent",children:(0,l.jsx)("div",{className:o()(c,e.className),style:e.style,ref:t,children:e.children})})}));function g(e){return(0,l.jsx)(i().A,{name:"PageLayoutFull",children:(0,l.jsx)("div",{className:d,style:e.style,children:e.children})})}function f(e){return(0,l.jsx)(i().A,{name:"PageLayoutMarginRight",children:(0,l.jsx)("div",{className:u,style:{...e.style,pointerEvents:"none"},children:e.children})})}function y(e){return(0,l.jsx)(i().A,{name:"PageLayoutColumn",children:(0,l.jsx)("div",{className:o()(m,e.className),style:{"--min-column-width":e.minWidth?`${e.minWidth}px`:"100%",...e.style},children:e.children})})}function v(e){return(0,l.jsx)(i().A,{name:"PageLayoutTwoColumn",children:(0,l.jsxs)(y,{minWidth:e.minWidth,className:e.className,style:e.style,children:[e.left,e.right]})})}},177974:(e,t,n)=>{n.d(t,{FF:()=>u,Pe:()=>s,Ru:()=>d,pZ:()=>c});n(610931);var o=n(242343),r=()=>n(663539),i=()=>n(265987);function a(e,t){return`${e}-${t}`}function l(e,t,n){return`${a(e,t)}-${n}`}function s(e,t,n){const o=a(t,n);return e.startsWith(o)}function c(e,t){return e.startsWith(t)}function d(e){const{blockStore:t,propertyId:n,environment:o,saveUploadedFile:r}=e;return p({blockStore:t,propertyId:n,environment:o,saveUploadedFile:r})}function u(e){const{blockStore:t,propertyId:n,environment:o,onSingleFileStartCallback:r,onSingleFileErrorCallback:i,formMetadata:a}=e,{spaceId:l,formId:s}=a,c=p({blockStore:t,propertyId:n,environment:o,onSingleFileStartCallback:r,onSingleFileErrorCallback:i,formMetadata:{spaceId:l??"",formId:s??""}});return l&&s?c:e=>{throw new Error("spaceId and formId are not defined")}}function p(e){const{blockStore:t,propertyId:n,environment:a,onSingleFileStartCallback:s,onSingleFileErrorCallback:c,saveUploadedFile:d,formMetadata:u}=e;return(0,o.useCallback)((e=>{const o=(e,o,r)=>{const a=l(t.pointer.id,n,o);i().default.setKeyState(a,{progressPercent:0,file:e.file,name:e.name,size:e.size}),s&&r&&s({...r,globalFileUploadStoreKey:a})},p=(e,o)=>{let{progressPercent:r,progressText:a}=e;const s=l(t.pointer.id,n,o),c=i().default.getKeyState(s);if(!c)throw new Error("uploading file cannot be found in global file upload state");i().default.setKeyState(s,{...c,progressPercent:r,progressText:a})},m=(e,o)=>{const r=l(t.pointer.id,n,o),a=i().default.getKeyState(r);if(i().default.setKeyState(r,void 0),!a||null==a||!a.name)throw new Error("completed file upload cannot be found in global file upload state");d&&d({name:null==a?void 0:a.name,url:e},void 0)},h=(e,o)=>{const r=l(t.pointer.id,n,o);i().default.setKeyState(r,void 0),c&&c(r)},g=u?{environment:a,files:e,bucket:"temporary",formMetadata:u,onSingleFileStart:o,onSingleFileProgress:p,onSingleFileComplete:m,onSingleFileError:h}:{environment:a,files:e,bucket:"secure",record:t.pointer,isFileBlock:!1,onSingleFileStart:o,onSingleFileProgress:p,onSingleFileComplete:m,onSingleFileError:h};r().Zn(g)}),[d,t.pointer,a,n,u,s,c])}},280704:(e,t,n)=>{n.d(t,{b:()=>r});n(242343);var o=n(163643);const r=(0,n(680369).wt)("plusThick",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},540811:(e,t,n)=>{n.r(t),n.d(t,{FilePropertyModule:()=>se});n(610931),n(725707),n(491955),n(403517);var o=n(242343),r=()=>n(237385),i=()=>n(803290),a=()=>n(174114),l=()=>n(716605),s=()=>n(185912),c=()=>n(975392),d=()=>n(76394),u=()=>n(85751),p=()=>n(177974),m=()=>n(116485),h=()=>n(265987),g=()=>n(622813);const f={height:150,width:100},y={height:100,width:150},v={height:130,width:130};let x=function(e){return e.GridPortraitCard="grid-portrait-card",e.GridLandscapeCard="grid-landscape-card",e.GridSquareCard="grid-square-card",e}({});n(362833);var w=()=>n(193135),C=()=>n(456013),b=()=>n(827744),S=()=>n(280704),j=()=>n(52531),k=()=>n(403768),P=()=>n(653998),I=()=>n(220413),F=()=>n(31448),z=()=>n(791497),M=()=>n(991708),V=()=>n(502852),_=()=>n(640979),A=()=>n(962373),B=()=>n(872386),L=()=>n(751436),H=()=>n(126451),D=()=>n(535906),T=()=>n(273520),E=()=>n(441292),U=()=>n(59175),R=()=>n(966789),G=()=>n(935091),N=()=>n(858023),W=()=>n(427385),K=()=>n(283992),O=()=>n(88271),$=()=>n(410090),q=()=>n(364643),Z=()=>n(219222),Q=n(163643);const Y=22;function J(e,t){let n,o;return t===x.GridPortraitCard?(n=f.height,o=f.width+12):t===x.GridLandscapeCard?(n=y.height,o=y.width+20):t===x.GridSquareCard?(n=v.height,o=v.width):(0,d().HB)(t),{valueContainer:{minHeight:n,maxHeight:n,height:n,width:o,maxWidth:"100%",position:"relative",border:"1px solid",overflow:"hidden",borderRadius:8,borderColor:e.stroke.secondary,fontSize:F().J.UIRegular.desktop},nonPreviewableValueInnerContainer:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",rowGap:12,cursor:"pointer"},addValueInnerContainer:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},addValueIcon:{width:23,height:23,color:e.icon.tertiary},uploadingValueInnerContainer:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",rowGap:12},uploadingProgress:{color:e.icon.tertiary},uploadingFileName:{maxWidth:"90%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},nonPreviewableValueIconContainer:{backgroundColor:e.tint.regular,borderRadius:6,minWidth:32,height:32,display:"flex",justifyContent:"center",alignItems:"center"},nonPreviewableValueIcon:{height:24,width:24,fill:e.regularIconColor},nonPreviewableValueText:{maxWidth:"90%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},previewableImagePropertyValueContainer:{width:"100%",height:"100%",display:"flex",justifyContent:"center",cursor:"zoom-in"},previewableImagePropertyImageHidden:{height:"100%",objectFit:"contain",position:"absolute",visibility:"hidden"},previewableImagePropertyImage:{width:"100%",height:"100%",objectFit:"cover"},menuButton:{width:Y,height:Y},menuButtonIcon:{fill:I().Tj.white,width:14,height:14},renameInputContainer:{paddingTop:4,paddingBottom:4,paddingLeft:8,paddingRight:8,display:"flex",justifyContent:"center",alignItems:"center"}}}function X(e){const{size:t,filePropertyLink:n}=e,i=(0,r().Y0)(),[l,s]=(0,o.useState)(!1),d=(0,o.createRef)(),u=(0,a().IS)((e=>J(e,t)),[t]),p=(0,o.useCallback)((e=>{(0,V().SQ)({event:e,context:V().y$.EditorClick,callback:c().lQ})}),[]);let m=(0,Q.jsx)(ie,{...e});return(0,w().rS)(n)&&(m=(0,Q.jsx)(ae,{...e})),(0,Q.jsxs)("div",{ref:d,style:u.valueContainer,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onClick:p,children:[m,(l||i.isMobile)&&(0,Q.jsx)(ne,{...e,onCloseActionMenu:()=>s(!1)})]})}function ee(e){const{size:t,uploadingFile:n}=e,r=(0,a().IS)((e=>J(e,t)),[t]),i=(0,o.useCallback)((e=>{(0,V().SQ)({event:e,context:V().y$.EditorClick,callback:c().lQ})}),[]);return(0,Q.jsx)("div",{style:r.valueContainer,onClick:i,children:(0,Q.jsxs)("div",{style:r.uploadingValueInnerContainer,children:[(0,Q.jsx)(W().C,{style:r.uploadingProgress,size:23,percentage:n.progressPercent??0}),(0,Q.jsx)("div",{style:r.uploadingFileName,children:n.name})]})})}function te(e){const{isLoading:t,uploadFile:n,isEmpty:i,addEmbedFile:l}=e,s=(0,r().v3)(),c=(0,P().tz)(),d=!t,u=(0,o.useMemo)((()=>[{type:"file",title:c.formatMessage({defaultMessage:"File",id:"FilePropertyModuleValue.FilePropertyModuleAddValue.mediaMenuTabs.file"}),fileUpload:!0,imageUpload:!1,videoUpload:!1,onUpload:e=>{n(e[0]),z().I()}},{type:"embed",onChange:e=>{l(e),z().I()}}]),[l,c,n]),p=(0,o.useCallback)((e=>{d&&z().W(s,{originRect:e.currentTarget.getBoundingClientRect(),originGap:3,title:c.formatMessage({id:"FilePropertyModuleValue.FilePropertyModuleAddValue.mediaActionsMenu.show",defaultMessage:"File"}),currentTab:"file",tabs:u,isSmallWidth:!0})}),[s,c,d,u]),m=(0,a().IS)((t=>J(t,e.size)),[e.size]),{baseStyles:h}=(0,o.useContext)(L().L8),f=e.isLoading?(0,Q.jsx)(R().A,{legacySize:23}):(0,S().b)(m.addValueIcon);return(0,Q.jsx)(H().A,{style:i?h.emptyButtonStyle:m.valueContainer,onClick:p,disabled:!d,eventContextForClick:V().y$.EditorClick,children:i?(0,Q.jsx)(g().ao,{}):(0,Q.jsx)("div",{style:m.addValueInnerContainer,children:f})})}function ne(e){const t=(0,i().uB)(void 0,A().A),n=(0,r().Y0)(),l=(0,r().v3)(),[s,c]=(0,o.useState)(!1),d=(0,q().nE)({environment:l,visible:!s,height:Y}),u=(0,a().IS)((t=>J(t,e.size)),[e.size]);return(0,Q.jsx)(T().Ay,{popupType:n.isMobile?T().z7.SlideUp:T().z7.Popup,placementToOrigin:T().sx.Bottom,alignmentToOrigin:T().yP.Start,buttonPopupStore:t,onClick:()=>c(!0),onClose:e.onCloseActionMenu,renderOrigin:e=>(0,Q.jsx)("div",{style:d,children:(0,Q.jsx)(B().X,{...e,environment:l,hoveredStyle:$().t9,fadeIn:!1,style:u.menuButton,iconStyle:u.menuButtonIcon,ariaLabel:"more"})}),render:t=>(0,Q.jsx)(oe,{...e,handleClose:t.close})})}function oe(e){const{handleClose:t,deleteFile:n,viewFile:i,downloadFile:a,canEdit:l}=e,s=(0,r().Y0)(),[c,d]=(0,o.useState)(!1),u={width:18,height:18},p=[{key:"view-original",action:i,render:e=>(0,Q.jsx)(D().A,{...e,title:(0,Q.jsx)(P().sA,{defaultMessage:"View original",id:"FilePropertyModuleValue.PropertyValuePopoverMenu.viewOriginal"}),icon:(0,k().H)(u)})},{key:"download-file",action:a,render:e=>(0,Q.jsx)(D().A,{...e,title:(0,Q.jsx)(P().sA,{defaultMessage:"Download",id:"FilePropertyModuleValue.PropertyValuePopoverMenu.downloadFile"}),icon:(0,C().k)(u)})}];l&&p.push({key:"rename",action:()=>{d(!0)},render:e=>(0,Q.jsx)(D().A,{...e,title:(0,Q.jsx)(P().sA,{defaultMessage:"Rename",id:"FilePropertyModuleValue.PropertyValuePopoverMenu.Rename"}),icon:(0,b().r)(u)})},{key:"delete",action:n,render:e=>(0,Q.jsx)(D().A,{...e,title:(0,Q.jsx)(P().sA,{defaultMessage:"Delete",id:"FilePropertyModuleValue.PropertyValuePopoverMenu.delete"}),icon:(0,j().I)(u)})});const m=[{key:"actions",render:e=>(0,Q.jsx)(O().A,{...e}),items:p}];return c?(0,Q.jsx)(re,{...e}):(0,Q.jsx)(G().A,{menuType:s.isMobile?_().gu.ActionSheet:_().gu.Popup,width:200,children:(0,Q.jsx)(N().Ay,{type:N().Oh.Vertical,onAccept:e=>{"rename"!==e.key&&t()},sections:m,initialFocus:0})})}function re(e){let{handleClose:t,renameFile:n,filePropertyLink:r,size:i}=e;const[l,c]=(0,o.useState)(r.name),d=(0,o.useCallback)((e=>{const t=e.target.value;c(t);const o=s().SB({title:t,source:r.url});n(o)}),[r.url,n]),u=(0,a().IS)((e=>J(e,i)),[i]);return(0,Q.jsx)(E().A,{debugName:"FileProperty",capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!0,children:(0,Q.jsx)(G().A,{menuType:_().gu.Popup,width:180,children:(0,Q.jsx)("div",{style:u.renameInputContainer,children:(0,Q.jsx)(U().A,{focusInitial:!0,selectAll:!0,value:l,placeholder:"foobar",onChange:d,onSubmit:t})})})})}function ie(e){const{size:t,filePropertyLink:n}=e,o=(0,M().getIcon)(n.url),r=(0,a().IS)((e=>J(e,t)),[t]);return(0,Q.jsxs)("div",{style:r.nonPreviewableValueInnerContainer,onClick:()=>e.downloadFile(),children:[(0,Q.jsx)("div",{style:r.nonPreviewableValueIconContainer,children:o(r.nonPreviewableValueIcon)}),(0,Q.jsx)("div",{style:r.nonPreviewableValueText,children:n.name})]})}function ae(e){const{size:t,filePropertyLink:n,blockStore:i}=e,l=(0,a().IS)((e=>J(e,t)),[t]),s=(0,o.useRef)(null),c=(0,r().v3)(),d=(0,o.useCallback)(((e,t)=>{if(t){const e=(0,Z().T)({imageRef:s,url:n.url,blockStore:i,environment:c});return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)("img",{src:t,style:l.previewableImagePropertyImageHidden,ref:s}),(0,Q.jsx)("img",{src:t,style:l.previewableImagePropertyImage,onClick:e})]})}}),[i,c,n.url,l.previewableImagePropertyImage,l.previewableImagePropertyImageHidden]);return(0,Q.jsx)("div",{style:l.previewableImagePropertyValueContainer,children:(0,Q.jsx)(K().A,{url:n.url,isAuthenticated:!0,permissionRecord:i.pointer,render:d,width:200})})}function le(e,t){const n=e.getPropertyValue(t);return l().pJ(n)}const se=o.memo((function(e){const{store:t,property:a,propertyModule:d}=e;if(d&&!(0,n(946854).K9)(d))throw new Error("FilePropertyModule can only be used with file property modules");const m=(0,r().v3)(),g=(0,n(639659).a)(),f="landscape"===(null==d?void 0:d.style)?x.GridLandscapeCard:"portrait"===(null==d?void 0:d.style)?x.GridPortraitCard:"square"===(null==d?void 0:d.style)?x.GridSquareCard:x.GridLandscapeCard,y=(0,i().K8)((()=>le(t,a)),[t,a]),v=(0,o.useCallback)((e=>{if(e>=y.length)throw new Error(`filePropertyModule cannot get file at index ${e}. Out of bounds index`);return y[e]}),[y]),w=(0,i().K8)((()=>{const e=h().default.getState(),n=(0,c().oE)(Object.keys(e));return(0,c().oE)(n.filter((e=>(0,p().Pe)(e,t.pointer.id,a)))).sort().map((e=>h().default.getKeyState(e)))}),[t.pointer.id,a]),C=(0,o.useCallback)(((e,o)=>{n(84543).createAndCommit({userAction:"FilePropertyModule.updateFiles",environment:m,canUndo:!0,perform:r=>{const i=l().eQ(e);n(448316).R9({environment:m,store:t.getPropertyStore(a),value:i,transaction:r}),o&&n(759625).Bn({store:t,source:o.copiedSource,fileIds:[o.fileId],transaction:r})}})}),[t,m,a]),b=(0,o.useCallback)((e=>{v(e);const n=[...le(t,a)];n.splice(e,1),C(n,void 0)}),[t,v,a,C]),S=(0,o.useCallback)(((e,n)=>{const o=[...le(t,a),e];C(o,n)}),[t,a,C]),j=(0,o.useCallback)(((e,n)=>{v(e);const o=[...le(t,a)];o[e]=n,C(o,void 0)}),[t,v,a,C]),k=(0,o.useCallback)(((e,t)=>{const n={...v(e),name:t};j(e,n)}),[v,j]),P=(0,o.useCallback)((e=>{const n=v(e);u().OG(m,{url:n.url,type:"file",from:"view_original",downloadName:n.name,permissionRecord:t.pointer})}),[t.pointer,m,v]),I=(0,o.useCallback)((e=>{const n=v(e);u().KE(m,{url:n.url,download:!0,downloadName:n.name,permissionRecord:t.pointer})}),[t.pointer,m,v]),F=(0,p().Ru)({blockStore:t,propertyId:a,environment:m,saveUploadedFile:S}),z=(0,o.useCallback)((e=>F([e])),[F]),M=(0,o.useCallback)((e=>{const{originUrl:t,pastedSecureFile:n}=e,o=n?(0,s().xm)(n):t;S({name:o,url:o},n)}),[S]);return(0,Q.jsx)(ce,{size:f,propertyId:a,blockStore:t,filePropertyLinks:y,isInPageViewMode:g,deletePropertyValueAtIndex:b,renamePropertyValueAtIndex:k,viewPropertyValueAtIndex:P,downloadPropertyValueAtIndex:I,uploadingFiles:w,uploadFilesAndUpdateProperty:F,uploadFileAndUpdateProperty:z,addEmbedFile:M,updateEntireFilePropertyWithTransaction:C})}));function ce(e){const{size:t,blockStore:r,propertyId:l,uploadingFiles:s,filePropertyLinks:u,isInPageViewMode:p,uploadFilesAndUpdateProperty:h,uploadFileAndUpdateProperty:w,addEmbedFile:C,deletePropertyValueAtIndex:b,renamePropertyValueAtIndex:S,viewPropertyValueAtIndex:j,downloadPropertyValueAtIndex:k}=e,P=(0,o.useCallback)((e=>{let{files:t}=e;return h(t)}),[h]),I=(0,a().IS)((e=>({moduleValuesDropzone:{borderRadius:8}})),[]);let F;t===x.GridPortraitCard?F=f.width:t===x.GridLandscapeCard?F=y.width:t===x.GridSquareCard?F=v.width:(0,d().HB)(t);const[z,M]=(0,n(830820).z)(),V=(0,i().K8)((()=>r.canEdit()&&!r.isNonEditableState()),[r]),_=(0,i().K8)((()=>{const e=Math.floor((M+8)/(F+8)),t=(V?1:0)+s.length+u.length;if(t<e)return(0,c().y1)(e-t).map((e=>(0,Q.jsx)("div",{},e)))}),[V,u.length,M,F,s.length]),A=0===s.length?void 0:(0,Q.jsx)(Q.Fragment,{children:s.map((e=>void 0===e?void 0:(0,Q.jsx)(ee,{canEdit:V,blockStore:r,size:t,uploadingFile:e},e.name)))}),B=V||0!==u.length?null:(0,Q.jsx)("div",{style:{fontSize:14,paddingLeft:6},children:(0,Q.jsx)(g().ao,{})}),L=u.map(((e,n)=>(0,Q.jsx)(X,{canEdit:V,size:t,blockStore:r,filePropertyLink:e,deleteFile:()=>{b(n)},renameFile:e=>{S(n,e)},viewFile:()=>{j(n)},downloadFile:()=>k(n)},e.url))),H=!L.length&&!s.length,D=V?(0,Q.jsx)(te,{size:t,uploadFile:w,addEmbedFile:C,isLoading:s.length>0,isEmpty:H}):null,T=H&&!V?(0,Q.jsx)("div",{style:{fontSize:14,paddingLeft:6},children:(0,Q.jsx)(g().ao,{})}):null,E=(0,Q.jsx)("div",{ref:z,children:H?(0,Q.jsxs)(m().WL,{style:{width:"100%"},children:[D,T]}):(0,Q.jsxs)(m().WL,{minWidth:F,style:{gridGap:8,marginTop:p?void 0:6,paddingBottom:p?void 0:6,paddingLeft:6,paddingRight:6,gridTemplateColumns:`repeat(auto-fit, minmax(${F}px, max-content))`},children:[L,A,D,_,B]})});return V?(0,Q.jsx)(n(473478).Tl,{dropTargetKey:`FilePropertyModuleInner-${l}`,canAcceptDrop:e=>{let{isNativeDrag:t}=e;return t},onNativeDrop:P,dropzoneStyle:I.moduleValuesDropzone,shouldShowDropZone:!0,canNativeDropOnto:!0,children:E}):E}},788748:(e,t,n)=>{n.d(t,{x:()=>r});n(242343);var o=n(163643);const r=(0,n(680369).wt)("document",{viewBox:"0 0 23.5 23.5",svg:(0,o.jsx)("path",{d:"M9.14 8.156a.494.494 0 01-.5-.5c0-.14.047-.258.141-.351a.487.487 0 01.36-.14h5.718a.477.477 0 01.492.492.494.494 0 01-.14.35.464.464 0 01-.352.15H9.141zm0 2.664a.487.487 0 01-.359-.14.504.504 0 01-.14-.36c0-.135.046-.25.14-.343a.487.487 0 01.36-.141h5.718a.477.477 0 01.493.484c0 .14-.047.26-.141.36a.477.477 0 01-.352.14H9.141zm0 2.672a.487.487 0 01-.359-.14.468.468 0 01-.14-.344c0-.14.046-.258.14-.352a.473.473 0 01.36-.148h2.765c.146 0 .266.05.36.148a.48.48 0 01.14.352c0 .135-.047.25-.14.344a.487.487 0 01-.36.14H9.141zm-3.843 4.266V5.968c0-.838.213-1.473.64-1.905.428-.438 1.06-.657 1.899-.657h8.32c.839 0 1.472.219 1.899.656.427.433.64 1.068.64 1.907v11.789c0 .844-.213 1.482-.64 1.914-.427.432-1.06.648-1.899.648h-8.32c-.839 0-1.471-.216-1.899-.648-.427-.432-.64-1.07-.64-1.914zm1.539-.094c0 .36.094.635.281.828.188.193.472.29.852.29h8.062c.38 0 .664-.097.852-.29.187-.193.281-.469.281-.828V6.07c0-.364-.094-.643-.281-.836-.188-.198-.471-.296-.852-.296H7.97c-.38 0-.664.098-.852.296-.187.193-.281.472-.281.836v11.594z"})})},904850:(e,t,n)=>{n.d(t,{B:()=>r});n(242343);var o=n(163643);const r=(0,n(680369).wt)("codeFile",{viewBox:"0 0 23 24",svg:(0,o.jsx)("path",{d:"M4.195 11.86c0-.266.078-.488.235-.665.156-.182.38-.3.672-.351.494-.089.849-.271 1.062-.547.214-.281.32-.73.32-1.344V6.961c0-1.115.263-1.938.79-2.469.525-.536 1.333-.804 2.421-.804.203 0 .375.023.516.07.177.057.31.146.398.265a.646.646 0 01.141.422c0 .339-.148.558-.445.657a1.14 1.14 0 01-.157.039l-.171.015c-.625.047-1.066.222-1.32.524-.256.302-.384.8-.384 1.492v2.414c0 .672-.182 1.198-.546 1.578-.36.38-.86.604-1.5.672-.032 0-.047.013-.047.039.005.02.02.034.047.04.64.062 1.14.283 1.5.663.364.38.546.906.546 1.578v2.414c0 .693.128 1.19.383 1.492.255.303.696.48 1.32.532.053 0 .1.002.141.008l.133.03c.333.09.5.308.5.657a.68.68 0 01-.14.43.816.816 0 01-.407.273 1.48 1.48 0 01-.437.063c-1.12 0-1.948-.266-2.485-.797-.531-.526-.797-1.352-.797-2.477V14.79c0-.614-.106-1.062-.32-1.344-.213-.28-.568-.463-1.062-.547-.292-.062-.516-.182-.672-.359-.157-.177-.235-.404-.235-.68zm15.602 0c0 .275-.078.502-.235.68-.156.176-.382.296-.68.358-.5.084-.856.266-1.07.547-.208.282-.312.73-.312 1.344v1.992c0 1.125-.266 1.95-.797 2.477-.531.531-1.36.797-2.484.797-.151 0-.297-.021-.438-.063a.757.757 0 01-.414-.265.715.715 0 01-.133-.438c0-.182.042-.328.125-.437a.674.674 0 01.383-.22l.117-.03c.047-.006.097-.008.149-.008.625-.052 1.065-.23 1.32-.532.255-.302.383-.799.383-1.492v-2.414c0-.672.182-1.208.547-1.61.364-.405.864-.616 1.5-.632.026-.005.039-.018.039-.039 0-.026-.013-.04-.04-.04-.635-.015-1.135-.226-1.5-.632-.364-.406-.546-.945-.546-1.617V7.172c0-.693-.128-1.193-.383-1.5-.255-.307-.695-.48-1.32-.516l-.18-.015a1.233 1.233 0 01-.148-.04c-.297-.109-.446-.328-.446-.656 0-.166.045-.307.133-.422a.777.777 0 01.414-.265c.14-.047.31-.07.508-.07 1.089 0 1.896.268 2.422.804.526.531.789 1.354.789 2.469v1.992c0 .615.107 1.06.32 1.336.214.276.568.461 1.063.555.297.052.523.169.68.351a.967.967 0 01.234.664z"})})},991708:(e,t,n)=>{n.r(t),n.d(t,{DiscussionFormat:()=>F,DiscussionLocationToAvatarSize:()=>$,anyDiscussionCommentsLoading:()=>N,commentComparator:()=>L,discussionLocationToDiscussionFormat:()=>W,formatFileSize:()=>q,getAndSortCommentStoresByTime:()=>H,getDiscussions:()=>A,getDiscussionsForSidebar:()=>B,getFirstComment:()=>D,getIcon:()=>I,getLatestRelevantComment:()=>z,getSetOfUsersInDiscussions:()=>K,hasCommentChanged:()=>G,inputIsEmpty:()=>R,isCommentAllEmojis:()=>O,lineClampForCommentCount:()=>_,sortDiscussionStoresByLatestComment:()=>U});n(725707),n(491955),n(403517),n(113085);var o=()=>n(950635),r=()=>n(594787),i=()=>n(904850),a=(n(242343),()=>n(680369)),l=n(163643);const s=(0,a().wt)("compressedFile",{viewBox:"0 0 23 24",svg:(0,l.jsx)("path",{d:"M5.297 17.758V5.968c0-.838.213-1.473.64-1.905.428-.438 1.06-.657 1.899-.657h8.32c.839 0 1.472.219 1.899.656.427.433.64 1.068.64 1.907v11.789c0 .844-.213 1.482-.64 1.914-.427.432-1.06.648-1.899.648h-8.32c-.839 0-1.471-.216-1.899-.648-.427-.432-.64-1.07-.64-1.914zm1.539-.094c0 .36.094.635.281.828.188.193.472.29.852.29h8.062c.38 0 .664-.097.852-.29.187-.193.281-.469.281-.828V6.07c0-.364-.094-.643-.281-.836-.188-.198-.471-.296-.852-.296H7.97c-.38 0-.664.098-.852.296-.187.193-.281.472-.281.836v11.594zm4.617 1.906V8.648h1.086V19.57h-1.086zM12 8.953c-.62 0-1.107-.17-1.46-.508-.35-.338-.524-.804-.524-1.398 0-.115.005-.23.015-.344.016-.114.037-.226.063-.336l.734-3.21a.637.637 0 01.242-.384.709.709 0 01.438-.14h.984a.68.68 0 01.43.14.672.672 0 01.25.383l.734 3.211c.021.11.037.222.047.336.016.115.024.23.024.344 0 .594-.175 1.06-.524 1.398-.349.339-.833.508-1.453.508zm0-1.125c.24 0 .438-.08.594-.242a.826.826 0 00.242-.61.82.82 0 00-.242-.593.795.795 0 00-.594-.25c-.24 0-.44.083-.602.25a.825.825 0 00-.242.594c0 .24.078.442.235.609a.826.826 0 00.609.242zm0 2.89V9.696h1.828c.146 0 .268.05.367.149a.464.464 0 01.149.351c0 .146-.05.271-.149.375a.498.498 0 01-.367.149H12zm-1.836 1.024a.516.516 0 01-.367-.148.525.525 0 01-.149-.375c0-.14.05-.258.149-.352a.516.516 0 01.367-.148H12v1.023h-1.836zM12 12.79v-1.023h1.828c.146 0 .268.05.367.148a.49.49 0 01.149.36.5.5 0 01-.149.367.498.498 0 01-.367.148H12zm-1.836 1.024a.516.516 0 01-.367-.149.516.516 0 01-.149-.367c0-.14.05-.258.149-.352a.516.516 0 01.367-.148H12v1.015h-1.836zM12 14.867v-1.023h1.828c.146 0 .268.05.367.148a.473.473 0 01.149.36.5.5 0 01-.149.367.499.499 0 01-.367.148H12zm-1.836 1.024a.508.508 0 01-.516-.523.48.48 0 01.149-.352.516.516 0 01.367-.149H12v1.024h-1.836zM12 16.945v-1.023h1.828c.146 0 .268.05.367.148a.473.473 0 01.149.36c0 .14-.05.263-.149.367a.499.499 0 01-.367.148H12zm-1.836 1.04a.516.516 0 01-.367-.15.499.499 0 01-.149-.366c0-.146.05-.266.149-.36a.516.516 0 01.367-.148H12v1.023h-1.836z"})});var c=()=>n(788748);const d=(0,a().wt)("executable",{viewBox:"0 0 23 23.5",svg:(0,l.jsx)("path",{d:"M5.164 16.883c-.37-.209-.651-.448-.844-.719-.187-.276-.28-.69-.28-1.242V8.609c0-.416.08-.763.241-1.039.162-.28.417-.52.766-.718l5.492-3.079c.484-.27.971-.406 1.461-.406.49 0 .974.136 1.453.406l5.492 3.079c.35.197.604.437.766.718.161.276.242.623.242 1.04v6.312c0 .552-.094.966-.281 1.242-.188.27-.469.51-.844.719l-6.047 3.39c-.52.287-1.044.287-1.57 0l-6.047-3.39zm.844-1.203l5.265 2.976v-6.265L5.43 9.094v5.687c0 .203.041.375.125.516.088.14.24.268.453.383zm11.976 0c.214-.115.362-.242.446-.383a.95.95 0 00.133-.516V9.094l-5.844 3.297v6.265l5.265-2.976zM12 11.11l5.773-3.235-4.937-2.781c-.552-.318-1.112-.318-1.68 0l-4.93 2.781L12 11.109z"})}),u=(0,a().wt)("file3D",{viewBox:"0 0 23 24",svg:(0,l.jsx)("path",{d:"M5.648 16.352l5.61-2.82v-6.65h1.492v6.65l5.61 2.82-.75 1.273-5.61-2.82-5.61 2.82-.742-1.273zm-1.945 1.195l1.32-2.985c.105-.25.243-.427.415-.53a.643.643 0 01.539-.071c.187.052.349.198.484.437l1.937 3.352c.146.245.196.46.149.648a.61.61 0 01-.336.43c-.177.1-.404.133-.68.102l-3.242-.36c-.297-.036-.5-.146-.61-.328-.103-.182-.096-.414.024-.695zm16.594 0c.12.281.125.513.015.695-.104.182-.304.292-.601.328l-3.242.36c-.271.03-.498-.003-.68-.102a.634.634 0 01-.344-.43c-.041-.187.01-.403.157-.648l1.937-3.352c.135-.24.294-.385.477-.437a.638.638 0 01.539.07c.177.104.32.281.43.531l1.312 2.985zm-8.89-12.985c.181-.25.377-.372.585-.367.208 0 .404.123.586.367l1.93 2.618c.167.229.252.445.258.648a.596.596 0 01-.204.5c-.14.13-.354.195-.64.195h-3.86c-.276 0-.486-.065-.632-.195a.637.637 0 01-.203-.508c.005-.208.088-.422.25-.64l1.93-2.617z"})}),p=(0,a().wt)("fileAttachment",{viewBox:"0 0 28 28",svg:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("rect",{width:"28",height:"28",fill:"none"}),(0,l.jsx)("path",{d:"M7.70703 27.3799H21.2783C23.7412 27.3799 24.9854 26.1104 24.9854 23.6348V11.7266C24.9854 10.3555 24.8076 9.74609 23.9697 8.88281L16.5049 1.3418C15.6924 0.516602 15.0322 0.326172 13.8008 0.326172H7.70703C5.26953 0.326172 4 1.58301 4 4.05859V23.6348C4 26.1104 5.25684 27.3799 7.70703 27.3799ZM7.7832 25.8057C6.32324 25.8057 5.57422 25.0312 5.57422 23.5967V4.09668C5.57422 2.7002 6.32324 1.8877 7.7959 1.8877H13.7246V9.53027C13.7246 10.9775 14.4609 11.6631 15.8701 11.6631H23.4238V23.5967C23.4238 25.0312 22.6621 25.8057 21.2021 25.8057H7.7832ZM16.0352 10.1777C15.4512 10.1777 15.21 9.94922 15.21 9.36523V2.20508L23.1064 10.1777H16.0352Z"})]})}),m=(0,a().wt)("font",{viewBox:"0 0 24 24",svg:(0,l.jsx)("path",{d:"M17.008 17.766c-.724 0-1.354-.185-1.89-.555-.537-.37-.957-.888-1.259-1.555-.296-.672-.445-1.458-.445-2.36 0-.895.149-1.676.445-2.343.303-.672.722-1.193 1.258-1.562.537-.375 1.167-.563 1.89-.563.433 0 .834.07 1.204.211.375.14.7.344.977.61.28.26.5.572.656.937h.062V9.64c0-.256.073-.459.219-.61a.738.738 0 01.555-.226c.234 0 .424.075.57.226.146.151.219.354.219.61v7.312c0 .255-.073.453-.219.594a.771.771 0 01-.57.219.773.773 0 01-.547-.203c-.146-.136-.221-.331-.227-.586v-.954h-.062a2.688 2.688 0 01-1.094 1.29c-.495.302-1.076.453-1.742.453zm.453-1.368c.484 0 .906-.125 1.266-.375.364-.255.643-.611.835-1.07.198-.463.297-1.01.297-1.64 0-.63-.099-1.178-.297-1.641-.197-.469-.476-.83-.835-1.086a2.1 2.1 0 00-1.266-.39 2.13 2.13 0 00-1.266.382c-.354.25-.627.607-.82 1.07-.193.464-.29 1.014-.29 1.649s.097 1.185.29 1.648c.193.464.466.823.82 1.078.36.25.782.375 1.266.375zm-14.07 1.32c-.271 0-.485-.072-.641-.218-.151-.146-.227-.349-.227-.61 0-.156.034-.335.102-.538l3.477-9.375C6.33 6.326 6.784 6 7.46 6c.36 0 .651.08.875.242.23.162.404.406.523.735l3.454 9.335c.072.204.109.391.109.563 0 .26-.084.466-.25.617-.162.151-.38.227-.656.227-.26 0-.466-.06-.618-.18-.145-.115-.26-.312-.343-.594l-.867-2.422H5.226l-.868 2.422c-.083.282-.2.48-.351.594-.146.12-.352.18-.617.18zM5.68 13.07h3.57L7.484 7.992h-.039L5.68 13.07z"})});const h=(0,a().wt)("presentation",{viewBox:"0 0 24 24",svg:(0,l.jsx)("path",{d:"M6.305 20.703c-.844 0-1.482-.213-1.914-.64-.433-.428-.649-1.06-.649-1.899v-8.031c0-.839.216-1.472.649-1.899.432-.427 1.07-.64 1.914-.64h11.383c.843 0 1.481.216 1.914.648.437.427.656 1.057.656 1.89v8.032c0 .833-.219 1.464-.656 1.89-.433.433-1.07.65-1.915.65H6.306zm.093-1.531h11.196c.36 0 .635-.096.828-.29.198-.187.297-.47.297-.85v-7.766c0-.38-.1-.664-.297-.852-.193-.193-.469-.289-.828-.289H6.398c-.364 0-.643.096-.835.29-.188.187-.282.47-.282.85v7.766c0 .38.094.664.282.852.192.193.47.289.835.289zM5.461 6.32c.057-.37.185-.656.383-.86.203-.202.513-.304.93-.304h10.453c.416 0 .724.102.921.305.204.203.334.49.391.86H5.461zm1.594-2.258c.02-.348.133-.611.336-.789.208-.182.5-.273.875-.273h7.468c.375 0 .664.091.868.273.203.178.32.44.351.79H7.055z"})}),g=(0,a().wt)("spreadsheet",{viewBox:"0 0 23 24",svg:(0,l.jsx)("path",{d:"M3.32 10.43V8.96h17.422v1.47H3.32zm0 4.343v-1.468h17.422v1.468H3.32zm7.93 3.758V5.203h1.5v13.328h-1.5zm-5.945.625c-.844 0-1.482-.213-1.914-.64-.433-.427-.649-1.058-.649-1.891V7.109c0-.833.216-1.463.649-1.89.432-.433 1.07-.649 1.914-.649H18.68c.849 0 1.49.216 1.922.649.432.427.648 1.057.648 1.89v9.516c0 .833-.216 1.463-.648 1.89-.433.428-1.073.641-1.922.641H5.305zm.093-1.531h13.196c.36 0 .635-.094.828-.281.193-.193.289-.477.289-.852v-9.25c0-.375-.096-.656-.29-.844-.192-.192-.468-.289-.827-.289H5.398c-.364 0-.643.097-.835.29-.188.187-.282.468-.282.843v9.25c0 .375.094.659.282.852.192.187.47.281.835.281z"})});var f=()=>n(900182),y=()=>n(880538),v=()=>n(673840),x=()=>n(34662),w=()=>n(975392),C=()=>n(76394),b=()=>n(809811),S=()=>n(360482),j=()=>n(991230);const k=()=>n(496688),P={doc:c().x,docx:c().x,pages:c().x,md:c().x,txt:c().x,rtf:c().x,xls:g,xlsx:g,csv:g,tsv:g,ods:g,pdf:n(874487).G,pptx:h,ppt:h,zip:s,br:s,bz2:s,gz:s,"7z":s,dmg:s,pkg:s,jar:s,rar:s,tar:s,xar:s,stl:u,obj:u,fbx:u,amf:u,iges:u,mp3:r().i,m4a:r().i,wav:r().i,aac:r().i,ogg:r().i,flac:r().i,alac:r().i,wma:r().i,exe:d,otf:m,ttf:m,woff:m,eof:m,py:i().B,java:i().B,js:i().B,ts:i().B,tsx:i().B,c:i().B,h:i().B,cpp:i().B,go:i().B,rs:i().B,css:i().B,php:i().B,swift:i().B,kt:i().B,lua:i().B,m:i().B,bash_profile:i().B,bashrc:i().B,zshrc:i().B,vimrc:i().B,vim:i().B};function I(e){const t=function(e){if(!e)return"";const{pathname:t}=b().qg(e);if(!t)return"";const n=t.split(".");return n[n.length-1]}(e).toLowerCase();return P[t]??p}let F=function(e){return e[e.Menu=0]="Menu",e[e.Page=1]="Page",e[e.Sidebar=2]="Sidebar",e[e.Margin=3]="Margin",e[e.Unfurl=4]="Unfurl",e}({});function z(e){let{recordStore:t,currentUserId:n,timestamp:o}=e;return E({recordStore:t,currentUserId:n,timestamp:o})||D(t)}const M=6,V=3;function _(e){return e>1?V:M}function A(e){return e?S().Bw(e,{recursivelyLoadAllDiscussions:!0,includeLoadingDiscussions:!0}):[]}function B(e){let{blockStore:t,currentUserId:n,ignoreAfterTime:o}=e;if(!t)return[];return S().Bw(t,{recursivelyLoadAllDiscussions:!0,includeLoadingDiscussions:!0,includePropertyDiscussions:!0}).sort(((e,t)=>{const r=z({recordStore:e,currentUserId:n,timestamp:o}),i=z({recordStore:t,currentUserId:n,timestamp:o});return null!=r&&r.isDefined()?null!=i&&i.isDefined()?-(r.getCreatedTime()-i.getCreatedTime()):1:-1}))}function L(e,t){return e&&e.isDefined()?t&&t.isDefined()?e.getCreatedTime()-t.getCreatedTime():1:-1}function H(e){return S().wc(e).sort(((e,t)=>L(e,t)))}function D(e){return H(e)[0]}function T(e){return E({recordStore:e,currentUserId:void 0})}function E(e){let{recordStore:t,currentUserId:n,timestamp:o}=e;const r=S().wc(t).filter((e=>o?e.isDefined()&&e.getCreatedTime()<o:e.isDefined())).sort(((e,t)=>L(e,t)));return r[r.length-1]}function U(e){return e.sort(((e,t)=>L(T(e),T(t))))}function R(e){const t=e.state.textStore.getValue(),n=(e.state.files??[]).length>0,o=t&&t.length>0;return!n&&!o}function G(e,t){const n=e.state.textStore.getValue(),o=e.state.files;if(!t)return n&&0!==n.length||o&&o.length>0;const r=S().gp(t).getValue();return!w().n4(r,n)||function(e,t){const n=e.state.files,o=S().dd(t);if(o.length!==n.length)return!0;return o.some(((e,t)=>e.id!==n[t].id))}(e,t)}function N(e){if(e.some((e=>!e.isReady())))return!0;return!!e.map((e=>S().wc(e))).flat().some((e=>!e.isReady()||!e.getCreatedTime()))}function W(e){switch(e){case"block_menu":case"ai_reject_all_suggestions":case"reply_menu_mentions_comments":case"reply_menu_all_updates":case"reply_menu_archive":case"reply_menu_updates_sidebar":case"updates_menu_mentions_comments":case"updates_menu_all_updates":case"updates_menu_archive":return F.Menu;case"page_discussion":case"post_top_level_discussion":return F.Page;case"updates_sidebar":return F.Sidebar;case"margin_comments":return F.Margin;case"comment_unfurl":return F.Unfurl;default:(0,C().HB)(e)}}function K(e){return w().hS(w().qI(e,(e=>S().wc(e).map((e=>({store:e,pointer:e.getCreatedByPointer()}))))),(e=>{var t;return null===(t=e.pointer)||void 0===t?void 0:t.id})).filter((e=>(0,C().O9)(e.pointer))).map((e=>{let{store:t,pointer:n}=e;return j().RecordStores.createChildStore(t,n)})).map((e=>e.getModel())).filter(C().O9).map((e=>e instanceof v().F?(0,o().A7)(e):e instanceof y().Hj?(0,o().qt)(e):e instanceof f().T?(0,o().Mq)(e):void(0,C().HB)(e))).filter(C().O9)}function O(e){for(const n of e){if(!n.length)return!1;if(!n[1]||!n[1].some(x().nNl)){var t;const e=n[0].trim(),o=k()();if((null===(t=e.match(o))||void 0===t?void 0:t.join(""))!==e)return!1}}return!0}const $={updates_menu_all_updates:28,updates_menu_mentions_comments:28,updates_menu_archive:28,block_menu:20,reply_menu_all_updates:20,reply_menu_mentions_comments:20,reply_menu_archive:20,reply_menu_updates_sidebar:20,page_discussion:20,post_top_level_discussion:20,updates_sidebar:23,margin_comments:20,comment_unfurl:32,ai_reject_all_suggestions:28};function q(e){return((null==e?void 0:e.match(/[0-9.]+|[a-z]+/gi))??[]).join(" ")}}}]);