"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[56989],{201768:(e,t,a)=>{a.d(t,{P:()=>p});a(725707),a(491955),a(403517);var s=()=>a(237385),n=()=>a(803290),r=()=>a(162901),i=()=>a(446588),o=()=>a(818369),d=()=>a(40815),l=()=>a(985532),u=()=>a(111826),c=()=>a(305043);function p(e){const{spaceStore:t,skip:a=!1}=e,p=(0,s().v3)(),m=(0,n().O$)(c().subscriptionDataStoreInstance),[{status:h,value:g}]=(0,r().Yb)((async()=>{const e=null==t?void 0:t.id;if(!a&&e){if(l().A.state.shouldUseEdgeCache){const e=await o().callApi({eventName:"listUsers",environment:p,data:{cursor:void 0,membershipFilter:"owners",limit:1e3,query:"",spaceId:t.id}});return"success"===e.type?e.data.users.map((e=>e.id)):[]}if(!m)return[];return(0,u().Be)(m).filter((e=>(0,i().Km)(e.role))).map((e=>e.userId))}}),[p,t,a,m]);return{status:h,workspaceOwners:(0,n().K8)((()=>!a&&g&&t?g.map((e=>(0,d().z)({userId:e,currentSpaceStore:t}))):[]),[g,t,a])}}},540322:(e,t,a)=>{a.r(t),a.d(t,{UpgradeRequestFormModal:()=>_,UpgradeRequestFormModalWithData:()=>B});a(725707),a(491955),a(403517);var s=a(242343),n=()=>a(237385),r=()=>a(803290),i=()=>a(174114),o=()=>a(162883),d=()=>a(206924),l=()=>a(455831),u=()=>a(653998),c=()=>a(575015),p=()=>a(421338),m=()=>a(559637),h=()=>a(59175),g=()=>a(529305),f=()=>a(206799),y=()=>a(701270),x=()=>a(539048),v=()=>a(103151),w=()=>a(732165),b=()=>a(610271),q=()=>a(396218),S=()=>a(950786),j=()=>a(137476),M=()=>a(907721),R=()=>a(875157),k=()=>a(201768),C=()=>a(820731),I=a(163643);function _(e){const{spaceStore:t}=e,{open:a,...s}=(0,r().O$)(C().Q),{status:n,workspaceOwners:i}=(0,k().P)({spaceStore:t,skip:!a});return"feature"in s&&t&&"pending"!==n?(0,I.jsx)(B,{spaceStore:t,workspaceOwners:i,onDismiss:()=>C().Q.update((e=>({open:!1}))),...s}):null}function B(e){const t=(0,u().tz)(),[a,n]=s.useState(e.workspaceOwners.map((e=>e.id)));return(0,I.jsx)(x().s,{ariaLabel:t.formatMessage({id:"highlightPlanRequestButton.modal.ariaLabel",defaultMessage:"Upgrade plan request modal"}),isOpen:!0,onDismiss:e.onDismiss,areaConstraint:{width:{type:"min",length:400},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,I.jsx)(N,{...e,checkedState:a,setCheckedState:n})})}function N(e){let{feature:t,onDismiss:a,setRequestState:r,spaceStore:x,userId:k,workspaceOwners:C,checkedState:_,setCheckedState:B,entrypoint:N}=e;const P=(0,u().tz)(),A=(0,n().v3)(),[D,T]=s.useState(""),U=(0,i().IS)((e=>({outlineIcon:{height:30,width:30,color:e.text.secondary},input:{padding:"10px 8px",width:"100%",height:36,background:e.surface.wash,borderRadius:6},modalHeaderIcon:{marginBottom:4},modalHeaderTitle:{padding:"0 8px"},modalHeaderByline:{padding:"0 40px"},usersContainer:{padding:"16px 0 16px 16px",borderRadius:S().V.medium,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary},learnMoreTooltip:{width:240,whiteSpace:"normal"}})),[]);return(0,I.jsx)(g().tf,{showDismissButton:!0,header:(0,I.jsx)(q().rQ,{icon:(0,I.jsx)("div",{style:U.modalHeaderIcon,children:(0,d().F)(U.outlineIcon)}),title:(0,I.jsx)("div",{style:U.modalHeaderTitle,children:P.formatMessage({id:"highlightPlanRequestButton.modal.title",defaultMessage:"Request an upgrade to use {feature}"},{feature:l().v0[t].defaultMessage})}),byline:(0,I.jsx)("div",{style:U.modalHeaderByline,children:P.formatMessage({id:"highlightPlanRequestButton.modal.subtitle",defaultMessage:"Let your workspace owners know that you're interested in this feature"})})}),footer:(0,I.jsx)(q().jl,{primaryText:P.formatMessage({id:"highlightPlanRequestButton.modal.submitButton",defaultMessage:"Submit request"}),primaryAction:()=>{(0,R()._)({feature:t,spaceId:x.id,userId:k,environment:A,entrypoint:N,setRequestState:r,reasonForRequest:D,adminsToNotify:_}),(0,j().u4)({environment:A,event:{eventName:"upgrade_request_submitted",eventProperties:{feature:t,entrypoint:N,number_admins_notified:_.length,added_note:D.length>0}}}),c().D6({label:P.formatMessage({id:"RequestUpgradeForm.modal.submitted.toast.label",defaultMessage:"Successfully sent request"})}),a()},secondaryText:P.formatMessage({id:"highlightPlanRequestButton.modal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:()=>{(0,j().u4)({environment:A,event:{eventName:"upgrade_request_canceled",eventProperties:{feature:t,entrypoint:N}}}),a()}}),children:(0,I.jsxs)(p().Y1,{gap:24,padding:2,children:[(0,I.jsxs)(p().Y1,{gap:8,children:[(0,I.jsxs)(p().Y1,{gap:4,direction:"horizontal",children:[(0,I.jsx)(y().D,{styleName:"Caption-12px/Medium",colorName:"secondary",children:P.formatMessage({id:"highlightPlanRequestButton.modal.selectWorkspaceOwners",defaultMessage:"Select who to notify"})}),(0,I.jsx)(v().A,{style:U.learnMoreTooltip,placement:M().W.Right,renderTooltip:()=>(0,I.jsx)(b().wt,{gap:2,children:(0,I.jsx)(y().D,{styleName:"UISmall-12px/Medium",children:P.formatMessage({id:"highlightPlanRequestButton.modal.notifyTooltip",defaultMessage:"Select who will receive an inbox notification for your request. Every workspace owner will be able to see all requests via the Requests tab in Settings."})})}),render:e=>(0,I.jsx)("div",{...e,children:(0,I.jsx)(f().Q,{iconGroup:o().G,variantName:"small",colorName:"tertiary"})})})]}),(0,I.jsx)("div",{style:U.usersContainer,children:C.length>0&&(0,I.jsx)(b().wt,{gap:16,style:{width:"100%",maxHeight:128,overflowY:"auto"},children:C.map((e=>(0,I.jsxs)(b().Ye,{gap:8,style:{alignItems:"center",justifyContent:"flex-start"},children:[(0,I.jsx)(m().A,{size:14,checked:_.includes(e.id),onClick:()=>{B((t=>t.includes(e.id)?t.filter((t=>t!==e.id)):[...t,e.id]))},style:{marginRight:8}},`check-${e.id}`),(0,I.jsx)(y().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,I.jsx)(w().A,{avatarSize:32,userStore:e})})]},e.id)))})})]}),(0,I.jsxs)(p().Y1,{gap:8,direction:"vertical",children:[(0,I.jsx)(y().D,{styleName:"Caption-12px/Medium",colorName:"secondary",children:P.formatMessage({id:"highlightPlanRequestButton.modal.noteLabel",defaultMessage:"Add a note (optional)"})}),(0,I.jsx)(h().A,{style:U.input,value:D,focusInitial:!0,onChange:e=>{T(e.target.value)}})]})]})})}},875157:(e,t,a)=>{a.d(t,{_:()=>l});var s=()=>a(982145),n=()=>a(409211),r=()=>a(3311),i=()=>a(759625),o=()=>a(84543),d=()=>a(485966);function l(e){var t;const{feature:a,spaceId:l,userId:u,environment:c,entrypoint:p,setRequestState:m,reasonForRequest:h,adminsToNotify:g}=e,f=null===(t=d().default.state.currentSpaceViewStore)||void 0===t?void 0:t.id;f&&l&&u&&(o().createAndCommit({userAction:`UpgradeRequestModal.${a}.onClick`,environment:c,canUndo:!0,perform:e=>{i().vt({environment:c,table:s().GU,args:{id:(0,r().Ay)(),space_id:l,request:a,createdByPointer:{id:u,table:n().oo},parentPointer:{id:f,table:"space_view"},entrypoint:p,reason_for_request:h,request_status:"pending",admins_to_notify:g},transaction:e,inMemoryRecordCache:c.defaultRecordCache.inMemoryRecordCache})}}),m("pending"))}}}]);