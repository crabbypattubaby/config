"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[35599,70584],{24071:(e,t,r)=>{r.d(t,{A:()=>d});r(242343);var s=()=>r(237385),n=()=>r(803290),i=()=>r(174114),o=()=>r(333889),a=()=>r(136239),l=()=>r(48913),c=r(163643);function u(){const e=(0,i().IS)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.text.primary:"#3E3C38",stroke:"dark"===e.mode?e.surface.wash:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,c.jsx)("div",{children:(0,o().G)(e.icon)})}function d(e){var t;const r=(0,s().v3)(),o=r.device.isMobile,{isTablet:d}=(0,s().Y0)(),h=(0,n().K8)((()=>{var t,s;if(o)return r.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(s=e.style)||void 0===s?void 0:s.paddingLeft:10)}),[r.WindowSizeStore,o,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),f=(0,i().IS)((t=>({wrapper:{...o?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:d?4:8,paddingBottom:d?4:8,paddingLeft:h,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:void 0,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,minHeight:e.isBottomItem?24:27,height:l().Zr,paddingTop:4,paddingBottom:4,...(0,a().ic)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:o?28:22,height:o?24:18,marginRight:8,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.text.secondary,width:o?24:l().ry,height:o?24:l().ry,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!o?"clip":"ellipsis",...e.childrenStyle}})),[o,d,h,e.shouldShowMobileMarginBottom,e.isBottomItem,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle]);return(0,c.jsxs)("div",{role:e.role,dir:"ltr","aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:f.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,c.jsx)("div",{style:f.left,children:e.left}),e.icon&&(0,c.jsxs)("div",{style:f.icon,children:[e.icon,e.isAlias&&(0,c.jsx)(u,{})]}),(0,c.jsx)("div",{style:f.children,children:e.children}),e.right&&(0,c.jsx)("div",{style:f.right,children:e.right})]})}},89969:(e,t,r)=>{r.d(t,{D:()=>s});function s(e,t){t.route.name;return!1}},143920:(e,t,r)=>{r.d(t,{y:()=>u});var s=()=>r(763555),n=()=>r(284320);const i={ko:()=>r.e(2268).then(r.bind(r,662161)),es:()=>r.e(95264).then(r.bind(r,894994)),de:()=>r.e(35390).then(r.bind(r,133788)),fr:()=>r.e(3272).then(r.bind(r,447454)),pt:()=>r.e(27315).then(r.bind(r,193182)),zh:()=>r.e(69945).then(r.bind(r,316605)),ja:()=>r.e(77757).then(r.bind(r,108299)),da:()=>r.e(9423).then(r.bind(r,965826)),fi:()=>r.e(59337).then(r.bind(r,122956)),nb:()=>r.e(2040).then(r.bind(r,763585)),nl:()=>r.e(51106).then(r.bind(r,696090)),sv:()=>r.e(53631).then(r.bind(r,485349))};let o=!1,a=!1;async function l(e){for(const[r,n]of Object.entries(e.emojiLocaleKeywords)){var t;s().fB[r]={...s().fB[r],keywords:[...n,...(null===(t=s().fB[r])||void 0===t?void 0:t.keywords)||[]]}}await n().A.waitUntilLoaded(),n().A.update((t=>{let{emojiByName:r,...s}=t;return{...s,emojiByName:{...r,...e.emojiByName}}}))}async function c(){if(o)return;const[e]=r(16791).locale.split("-");e in i&&(await l(await i[e]()),o=!0)}const u=(0,r(531367).A)((async()=>{await async function(){a||(await l(await r.e(51872).then(r.bind(r,531983))),a=!0)}(),await c()}))},150936:(e,t,r)=>{r.d(t,{b:()=>n});r(242343);var s=r(163643);const n=(0,r(680369).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},289988:(e,t,r)=>{r.d(t,{W:()=>V});r(362833),r(333225),r(494367),r(516262),r(573119),r(240480),r(950443),r(619601),r(725707),r(491955),r(403517),r(113085);var s=r(242343),n=()=>r(660714),i=()=>r(237385),o=()=>r(803290),a=()=>r(973055),l=()=>r(919955),c=()=>r(951592),u=()=>r(214144),d=()=>r(884482),h=()=>r(21164),f=()=>r(32194),m=()=>r(653998),v=()=>r(975392),p=()=>r(204132),y=()=>r(76394),S=()=>r(141666),b=()=>r(818369),g=()=>r(855225),R=()=>r(137476),k=()=>r(877042),w=()=>r(646591),I=()=>r(92451),x=()=>r(36746),_=()=>r(471979),q=()=>r(376869),T=()=>r(196387),C=()=>r(509484),L=()=>r(359441),P=()=>r(419949),M=()=>r(485966),B=()=>r(802955),E=()=>r(836331),A=()=>r(761079),O=()=>r(271932),j=()=>r(614300),K=()=>r(413871),W=()=>r(129978),z=()=>r(622286),N=()=>r(880996);function V(e){var t;const{options:r,...u}=e,{overrideSearchSessionId:V,overrideSpaceStore:Q,usePrefetch_EXPERIMENTAL:D,disable:X}=r,{type:H,query:Z="",source:J,limit:$}=u,ee=(0,i().v3)(),te=(0,m().tz)(),re=(0,c().ZC)(Z),se=(0,c().ZC)(e.filters),ne=(0,s.useRef)({number:0,query:""}),ie=(0,s.useCallback)((e=>{const t=ne.current.query.trim(),r=e.trim();""!==r&&t!==r&&(ne.current.number+=1,ne.current.query=r)}),[]),oe=(0,n().Y)(ie,L().ab),ae=(0,s.useRef)(!0),le=(0,o().O$)(B().e),ce=(0,o().K8)((()=>r.isLocalOnlyMode||!le),[le,r.isLocalOnlyMode]),ue=(0,q().y)(),[de,he]=(0,s.useState)(U()),fe=(0,o().K8)((()=>V&&V!==de.searchSessionId?(he((e=>({...e,searchSessionId:V}))),V):de.searchSessionId),[de,V]),me=(0,z().X)("quick_find_highlights_enabled"),{searchLocalResults:ve,searchServerResults:pe,isResultsLoading:ye,numTotalLocalResults:Se,numTotalServerResults:be}=(0,o().K8)((()=>({searchLocalResults:de.localResults,searchServerResults:de.serverResults,isResultsLoading:de.isResultsLoading,numTotalLocalResults:de.numTotalLocalResults,numTotalServerResults:de.numTotalServerResults})),[de]),ge=(0,o().K8)((()=>{if(ce||ye&&ae.current)return ve;let e=function(e){const{localResults:t,serverResults:r}=e,s=t.map((e=>e.store.id)),n=new Set(s),i=r.filter((e=>!n.has(e.store.id)));return[...t,...i]}({localResults:ve,serverResults:pe});return H===f().Vz.CollectionsInSpace&&(e=Y(e)),e}),[ce,ye,ve,H,pe]),Re=(0,o().K8)((()=>Q||M().default.state.currentSpaceStore),[Q]),ke=(0,o().K8)((()=>"on"===E().default.getEligibleGroup({experimentId:"search-use-local-reranker-layered",parameter:"shouldUseLocalReranker",defaultGroup:"control"})),[]),we=(0,o().K8)((()=>ce&&le&&Boolean(D)),[ce,le,D]),Ie=(0,s.useMemo)((()=>e.sort?e.sort:{field:"relevance"}),[e.sort]),xe="relevance"!==Ie.field,_e=(0,s.useMemo)((()=>{const t=(t=>{switch(e.type){case f().Vz.BlocksInCollection:return e.collectionId;case f().Vz.BlocksInParent:return e.parentId;default:return null===(t=e.filters)||void 0===t?void 0:t.parentId}})(),s={...e.filters,navigableBlockContentOnly:!1!==r.isTitleOnly,parentId:t};return(0,f().N2)(s)}),[r.isTitleOnly,e]),qe=(0,s.useCallback)(((e,t)=>{const{isSuccess:r,totalResultsCount:s,localCacheMetadata:n,query:i}=t;T().default.measure(e,{environment:ee,data:{start_time:e.startTime,success:r,surface:J,num_results:s,search_session_id:fe,local_cache_metadata:n,local_cache_readiness_timings:(0,k().Yp)(),query_length:i.length}})}),[ee,J,fe]),Te=(0,s.useCallback)(((e,t)=>{const{isSuccess:r,totalResultsCount:s,query:n}=t;T().default.measure(e,{environment:ee,data:{start_time:e.startTime,success:r,surface:J,num_results:s,search_session_id:fe,search_session_flow_number:ne.current.number,query_length:n.length}})}),[ee,J,fe]),Ce=(0,o().K8)((()=>O().A.state.localSearchableBlocksCache),[]),Le=(0,W().fJ)(C().T.searchActions),Pe=(0,s.useCallback)((t=>{var r;if(xe)return;const s=T().default.mark("rum.local_quick_search_query"),{query:n,spaceStore:i}=t,o=ue&&!le&&(0,y().Xk)(f().Iy,J);if("resolved"!==Le.status)return;const a=H===f().Vz.CollectionsInSpace,l=a&&0===n.length?function(e){const{spaceStore:t,environment:r}=e,s=(0,g().F)({currentUserId:r.currentUser.id,spaceId:t.id}).map((e=>{const r=K().md.createChildStore(t,{table:h().Vl,id:e}).getParentBlockStore();if(null==r?void 0:r.pathIsAccessibleAndAlive())return r}));return(0,v().oE)(s)}({environment:ee,spaceStore:i}).map(((e,t)=>({store:e,originalPosition:t,id:e.id,score:0,spaceId:e.getSpaceId(),sources:[f().Ni.Local],featureGroups:[],serverEventProperties:void 0}))):[],c=(0,k().PE)({environment:ee,overrideCurrentUserId:ee.currentUser.id,overrideSpaceId:i.id,overrideLocalSearchableBlocksCache:Ce}),u=(0,x().Er)(ee).hasPublicAccessPermission,d=(0,N().S6)({environment:ee,parentStore:i,isOnline:le,requestInput:{query:{text:n,filters:{..._e,blockTypes:F({blockTypes:null===(r=e.filters)||void 0===r?void 0:r.blockTypes,queryType:H}),isOfflineOnly:o},sort:{field:"relevance"}},limit:ce?$:Math.min($,5)},localSearchCache:Ce,shouldUseNewRerankerDebugOverrideEnabled:ke,shouldLimitLocalResultsWhenOnline:!ce,hasPublicAccessPermission:u}),m=we?G({query:n,serverResults:Ue.current}):[],S=d&&p().Q.unwrapOr(d,void 0),b=(null==S?void 0:S.results)??[],R=(null==S?void 0:S.total)??0;let w=v().hS([...l,...b,...m],(e=>e.id));w=a?Y(w):w,he((e=>e.query!==n?e:(Fe.current=w.map((e=>e.id)),qe(s,{query:n,isSuccess:Boolean(S),totalResultsCount:R,localCacheMetadata:c}),oe(n),{...e,localResults:w,isResultsLoading:!ce&&e.isResultsLoading,numTotalLocalResults:R})))}),[ue,le,J,Le.status,H,ee,Ce,_e,null===(t=e.filters)||void 0===t?void 0:t.blockTypes,ce,$,ke,we,qe,oe,xe]),Me="mini_quick_find"===J?40:L().GR,Be=(0,n().Y)(Pe,Me),Ee=(0,s.useCallback)((e=>{const{result:t,isMetaClick:r,context:s}=e,n=(0,I().Qe)(t.store,te,ee,!1),i=(0,P().u)({query:Z,resultText:n??"",isLastQueryTermPartialMatchOK:!0}),o=M().default.state.currentSpaceStore,a=Boolean(null==o?void 0:o.getSettings().enable_ai_training);(0,R().u4)({environment:ee,event:{eventName:"select_search_item",eventProperties:{...t.serverEventProperties&&t.serverEventProperties["server-query"]?{"server-query":t.serverEventProperties["server-query"]}:{},queryText:t.serverEventProperties&&t.serverEventProperties["server-query"]&&t.serverEventProperties["server-query"].query?t.serverEventProperties["server-query"].query:Z,sources:t.sources,localSources:Array.from(t.localSource||new Set),searchSessionId:fe,aiSessionId:void 0,traceId:void 0,searchSessionFlowNumber:ne.current.number,context:s,queryStringLength:Z.length,isTitleMatch:i,queryIfLeap:a?Z:void 0,totalSearchResultCount:Se+be,numLocalResults:ve.length,numTotalLocalResults:Se,isMobile:ee.device.isMobile,isMetaClick:r,hasFilters:Boolean(_e),originalPosition:t.originalPosition,selectedItemIndex:t.originalPosition,selectedSearchResultMetadata:{blockId:t.id,blockType:t.store.getModel().type},searchSource:J,verificationState:(0,_().i1)(t.store)}}})}),[ee,Se,be,ve,Z,fe,ne,_e,J,te]),Ae=re===Z,Oe=v().n4(se,e.filters),je=Boolean(re&&!Z),Ke=Oe&&Ae,We=!X&&Re&&!Ke,ze=je||!Oe,Ne=(0,s.useRef)(!1),Ve=(0,s.useRef)([]),Ue=(0,s.useRef)([]),Ge=(0,s.useRef)([]),Fe=(0,s.useRef)([]),Ye=(0,o().K8)((()=>{if("mention_menu"!==J)return;return j().A.getMentionedIds(ee.currentUser.id)}),[ee.currentUser.id,J]),Qe=(0,s.useCallback)((async e=>{const t=T().default.mark("rum.server_quick_search_query"),{query:r,spaceStore:s,size:n}=e,i=s.id;if(ce&&!we)return;xe&&he((e=>({...e,isResultsLoading:!0})));const o=!ae.current&&Oe?Ve.current:[],a=we?G({query:r,serverResults:Ue.current}):[];if(we&&(r.length<=1||a.length>=5||Ge.current.some((e=>e===r))))return;Ge.current.push(r),u.excludedBlockIds=v().sb([...u.excludedBlockIds??[],...o.map((e=>e.id)),...Fe.current||[],...Ue.current.map((e=>e.id))]);const c={...u,query:r,sort:Ie,filters:_e,recentlyMentionedPageIds:Ye,spaceId:i,searchSessionFlowNumber:ne.current.number,searchSessionId:fe,limit:"mini_quick_find"===J?10:n,recentPagesForBoosting:(0,w().cs)(A().A.getWithoutSubscribing(i)),ignoresHighlight:!me||"mini_quick_find"!==J},h=await b().callApi({eventName:"search",environment:ee,data:c});if(!h||"failed"===h.type)return void(xe&&he((e=>({...e,isResultsLoading:!1}))));const f=h.data.total,m=(0,S().MU)((0,y().WP)(h.data.trackEventProperties).map((e=>{let[t,r]=e;return[`server-${t}`,r]}))),p=h.data.results.slice(0,n).map(((e,t)=>{const r=K().Bv.createChildStore(s,{id:e.id,spaceId:e.spaceId,table:"block"}),n=we?function(e){const{result:t,store:r,environment:s}=e;if(t.terms)return t.terms;const n=r.getModel();if(!n)return[];const i=s.defaultRecordCache.inMemoryRecordCache.makeGetRecordValueFn(s.currentUser.id),o=(0,d().KM)((0,l().g)({blockValue:n,getRecordValue:i}).text);if(!o)return[];return(0,P().N)(o)}({environment:ee,store:r,result:e}):e.terms;return{store:r,originalPosition:t,...e,serverEventProperties:m,terms:n}}));Ne.current=!(f<n);const g=[...o,...p];Ve.current=g,Ue.current=v().hS([...we?p:[],...Ue.current],(e=>e.id)),we||(he((e=>e.query!==r?e:(Te(t,{query:r,isSuccess:"success"===h.type,totalResultsCount:f}),{...e,serverResults:g,isResultsLoading:!1,numTotalServerResults:f}))),oe(r))}),[ce,we,xe,Oe,u,Ie,_e,Ye,fe,J,me,ee,oe,Te]),De=(0,s.useCallback)((e=>{!X&&Re&&Ne.current&&!ye&&le&&(he((e=>({...e,isResultsLoading:!0}))),Ne.current=!1,ae.current=!1,Qe({query:Z,spaceStore:Re,size:e??20}))}),[Re,X,Qe,le,ye,Z]),Xe="mini_quick_find"===J?100:L().ab,He=(0,a().d)(De,Xe),Ze=(0,n().Y)(Qe,we?0:L().ab),Je=(0,s.useRef)(!1);return(0,s.useEffect)((()=>{!Je.current&&null!=Re&&Re.id&&"mini_quick_find"!==J&&(Je.current=!0,b().callApi({eventName:"warmSearchCache",environment:ee,data:{spaceId:Re.id}}))}),[null==Re?void 0:Re.id,ee,J]),(0,s.useEffect)((()=>{ze&&(he((e=>({...U(),searchSessionId:e.searchSessionId}))),Ue.current=[],Ge.current=[]),We&&(ae.current=!0,xe||he((e=>({...e,isResultsLoading:!0,query:Z}))),Be({query:Z,spaceStore:Re}),Ze({query:Z,spaceStore:Re,size:$}))}),[Re,Be,Ze,$,Z,We,ze,J,xe]),{results:ge,isResultsLoading:ye,searchSessionId:fe,fetchAdditionalServerResultsOnChange:!X&&!ce&&Ne.current&&Ke?He:void 0,searchSessionFlowNumber:ne.current.number,hasMoreResults:Ne.current,searchAnalytics:{trackSelectSearchItem:Ee}}}function U(){return{query:void 0,localResults:[],numTotalLocalResults:0,serverResults:[],numTotalServerResults:0,searchSessionId:(0,u().JW)(),isResultsLoading:!1}}function G(e){const{query:t,serverResults:r}=e;return t?r.filter((e=>(0,P().u)({query:t,resultText:(e.terms??[]).join(" "),isLastQueryTermPartialMatchOK:!0}))):[]}function F(e){const{blockTypes:t,queryType:r}=e;switch(r){case f().Vz.CollectionsInSpace:return["collection_view","collection_view_page"];case f().Vz.BlocksInCollection:return["page","collection_view_page"];case f().Vz.BlocksInSpace:default:return t??[]}}function Y(e){const t=new Set;return e.filter((e=>{const r=e.store.getCollectionViewSourceCollectionStore();return!(!r||t.has(r.id))&&(t.add(r.id),!0)}))}},405816:(e,t,r)=>{r.d(t,{A:()=>n});class s extends(()=>r(129044))().default{getInitialState(){return{searchQuery:"",searchLimit:s.limitIncrement,searchPopupOpen:!1,addingPage:!1}}}s.limitIncrement=20,s.resultsCacheTTL=2*r(141666).Xb,s.incrementScrollOffset=200;const n=s},531367:(e,t,r)=>{function s(e){let t,r,s;return async function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t?(s=i,r||(r=t.then((()=>(r=void 0,t=e(...s),t))),r)):(t=e(...i),t)}}r.d(t,{A:()=>s})},686449:(e,t,r)=>{r.d(t,{r:()=>s});const s=(0,r(851552).Dv)("importEvernote")},842617:(e,t,r)=>{r.d(t,{MG:()=>m,T1:()=>f,a1:()=>b,dt:()=>v,kg:()=>p,lC:()=>S,n_:()=>y});var s=r(242343),n=()=>r(237385),i=()=>r(803290),o=()=>r(162901),a=()=>r(129978),l=()=>r(514860),c=()=>r(271748),u=()=>r(440588),d=()=>r(370557),h=()=>r(89969);const f=new(a().O2)("PerformanceToolbar",(()=>Promise.all([r.e(96159),r.e(96346),r.e(16471),r.e(36209),r.e(92845),r.e(71718),r.e(17989),r.e(48632),r.e(90625),r.e(21194),r.e(5910),r.e(62427),r.e(45624)]).then(r.bind(r,524636)))),m=(0,a()._h)(f,(e=>e.PerformanceToolbar)),v=(0,a()._h)(f,(e=>e.PerformanceToolbarSettings));function p(){const e=(0,n().v3)();return(0,i().K8)((()=>(0,h().D)(e,e.RouterStore.state)),[e])}function y(){const e=(0,n().v3)(),t=g("PerformanceToolbarStore"),r=g("isPerformanceToolbarVisible");return(0,i().K8)((()=>!(!t||!r)&&r(e,e.RouterStore.state,t.state)),[r,e,t])}function S(){const e=g("PerformanceToolbarStore");return(0,i().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function b(){const e=(0,n().v3)(),t=g("createPerformanceToolbarMouseListeners"),r=g("PerformanceToolbarStore"),{sidebarExpanded:o,sidebarWidth:a,secondarySidebarExpanded:h,secondarySidebarWidth:f,updateSidebarExpanded:m,updateSidebarWidth:v}=(0,i().K8)((()=>({sidebarExpanded:u().sidebarExpandedStore.state,sidebarWidth:u().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:d().Ay.state.expanded,updateSidebarWidth:d().Ay.state.width})),[]);return(0,s.useEffect)((()=>{if(r&&t)return t(e,(e=>r.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),o,a,h,f,m,v)}),[t,e,r,o,a,h,f,m,v])}function g(e){const t=p(),[{value:r}]=(0,o().Yb)((()=>t?f.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return r}}}]);