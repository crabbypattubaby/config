"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[11097,24708,90871,92579],{3364:(e,t,o)=>{o.d(t,{Ay:()=>T,iZ:()=>k,vE:()=>_});var n=o(242343),r=()=>o(862510),i=()=>o(174114),l=()=>o(887508),a=()=>o(81322),c=()=>o(653998),s=()=>o(31448),u=()=>o(521325),d=()=>o(126451),p=()=>o(356813),m=()=>o(935091),y=()=>o(743668),f=()=>o(701270),g=()=>o(502852),v=()=>o(640979),h=()=>o(495312),S=()=>o(639659),x=o(163643);const b=(0,c().YK)({back:{defaultMessage:"Back",id:"collectionsSettingsMenu.back"}}),_=290,k=400;function w(e){let{children:t,title:o,desktopTitleType:n,settingsStackLength:r,handleClose:u,handleBackArrowClick:m,hideDesktopHeader:y,hasBackStack:g}=e;const v=(0,S().a)(),h=(0,c().tz)(),_=(0,i().IS)((e=>({hiddenDesktopHeaderDiv:{height:0},nonHiddenDesktopHeaderDiv:{display:"flex",alignItems:v?"top":"center",padding:v?"0px 14px 6px 14px":"14px 16px 6px 16px",height:v?void 0:42},arrowButton:{marginRight:8,marginLeft:-2,height:22},arrowIcon:{width:16,height:16},title:{flexGrow:1,fontWeight:v?s().Wy.medium:s().Wy.semibold,fontSize:v?16:14,lineHeight:v?"24px":void 0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},closeButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:18,height:18,flexShrink:0},closeButtonHover:{background:e.buttonPressedBackground},closeIcon:{width:14,fill:e.text.secondary}})),[v]),k=!v;return(0,x.jsxs)(x.Fragment,{children:[y?(0,x.jsx)("div",{style:_.hiddenDesktopHeaderDiv}):(0,x.jsxs)("div",{style:_.nonHiddenDesktopHeaderDiv,children:[(r>1||g)&&(0,x.jsx)(p().A,{icon:l().v,style:_.arrowButton,iconStyle:_.arrowIcon,onClick:m,ariaLabel:h.formatMessage(b.back)}),"sectionHeader"===n?(0,x.jsx)(f().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",customStyles:{flexGrow:1},children:o}):(0,x.jsx)("span",{style:_.title,children:o}),k&&(0,x.jsx)(d().A,{onClick:u,style:_.closeButton,hoveredStyle:_.closeButtonHover,children:(0,a().V)(_.closeIcon)})]}),t]})}function C(e,t){let{children:i,footer:l,header:a,unconstrainedWidth:c,desktopWidth:s,title:d,desktopTitleType:p,collectionSettingsStore:f,fullHeight:b,hideDesktopHeader:k,menuScrollerStyle:C,innerContentWrapperStyle:T,disableScroller:M,handleBackArrowClick:I,hasBackStack:j,handleClose:A}=e;const V=(0,o(237385).Y0)(),O=(0,o(749975).Ks)(),P=(0,v().Tf)(),R=(0,S().a)(),{currentTab:D,settingsStackLength:H,hideHeader:B}=(0,o(803290).K8)((()=>{const e=f.state;return{currentTab:(0,o(155352).S)(f),settingsStackLength:e.stack.length,hideHeader:e.hideSettingsHeader}}),[f]),F=(0,n.useCallback)((()=>{var e;I?I():u().yl({collectionSettingsStore:f,keepPreviousRef:"form_editor"===(null==O||null===(e=O.collectionViewStore())||void 0===e?void 0:e.getType())})}),[I,f,O]),N=(0,n.useCallback)((e=>{A?A(e):(0,g().SQ)({event:e,context:g().y$.CollectionSettingsClick,callback:()=>{u().os({collectionSettingsStore:f})}})}),[A,f]),W=(0,n.useCallback)((e=>{(0,h().rW)(e.target)||(0,h().iX)(e.target)||(0,h().u2)(e.target)||o(521972).g.state.isOpen||N(e)}),[N]);if(!D)return null;let E;if(V.isMobile)E={disableScroller:M,menuType:v().gu.Modal,title:d,left:H>1?(0,x.jsx)(y().MobileModalBackButton,{}):void 0,onClickLeft:H>1?F:void 0,scrollerStyle:C,innerRef:t,right:P?void 0:(0,x.jsx)(y().DoneMenuText,{}),onClickRight:P?void 0:N};else{const e=c||s?void 0:R?280:_;E={disableScroller:M,menuType:v().gu.Popup,minWidth:R?280:_,width:s,maxHeight:b?"100%":"80vh",...e&&{maxWidth:e},onClickOutside:W,scrollerStyle:{flexGrow:0,...C},header:!B&&(0,x.jsx)(w,{settingsStackLength:H,handleClose:N,handleBackArrowClick:F,hasBackStack:j,hideDesktopHeader:k,title:d,desktopTitleType:p,children:a}),paddingTop:B?6:0,footer:l,innerRef:t}}const L=(0,x.jsxs)(x.Fragment,{children:[V.isMobile&&a,i,V.isMobile&&l]});return b?(0,x.jsx)(r().Y,{direction:"vertical",children:(0,x.jsx)(m().A,{...E,children:L})}):(0,x.jsx)(o(435819).A,{capture:!0,allowMobileAutoScroll:!0,allowEsc:!0,render:e=>(0,x.jsx)(r().Y,{direction:"vertical",children:(0,x.jsx)(m().A,{...E,...e,children:(0,x.jsx)("div",{style:T,children:L})})})})}const T=(0,n.forwardRef)(C)},10315:(e,t,o)=>{o.r(t),o.d(t,{WorkflowSettingsViews:()=>M});o(610931),o(725707),o(491955),o(403517),o(242343);var n=()=>o(237385),r=()=>o(803290),i=()=>o(174114),l=()=>o(339189),a=()=>o(653998),c=()=>o(76394),s=()=>o(153258),u=()=>o(521325),d=()=>o(84543),p=()=>o(3364),m=()=>o(471685),y=()=>o(791009),f=()=>o(511441),g=()=>o(559181),v=()=>o(327665),h=()=>o(858023),S=()=>o(88271),x=()=>o(716430),b=()=>o(591966),_=()=>o(312692),k=()=>o(590091),w=()=>o(921734),C=()=>o(413995),T=o(163643);function M(e){let{collectionSettingsStore:t,collectionContextStore:o}=e;const n=(0,a().tz)(),r=[I(),A(o)].filter(c().Vq);return(0,T.jsx)(p().Ay,{collectionSettingsStore:t,title:n.formatMessage({id:"workflowSettingsViews.title",defaultMessage:"Views"}),children:(0,T.jsx)(h().Ay,{disableInitialScroll:!0,type:h().Oh.Vertical,initialFocus:void 0,resetFocusOnMouseOut:!0,sections:r})})}function I(){const{collectionContextStore:e}=(0,k().V)(),t=(0,r().K8)((()=>{var t;return(null===(t=e.collectionViewBlockStore())||void 0===t?void 0:t.getCollectionViewStores())||[]}),[e]).map((t=>({key:t.id,action:()=>{},render:o=>(0,T.jsx)(j,{buttonMenuItemProps:o,collectionViewStore:t,collectionContextStore:e})})));return{key:"added_views",render:e=>(0,T.jsx)(S().A,{...e,title:`${t.length} views`}),items:t}}function j(e){let{buttonMenuItemProps:t,collectionViewStore:o,collectionContextStore:i}=e;const l=(0,n().v3)(),{viewName:a,viewType:c,viewIcon:s}=(0,r().K8)((()=>({viewName:o.getName(),viewType:o.getType(),viewIcon:o.getFormat().collection_view_icon})),[o]);if(!c)throw new Error("View type not found for ${collectionViewStore.id}");return(0,T.jsx)(m().I,{buttonMenuItemProps:t,title:(0,T.jsx)(g().A,{collectionViewType:c,collectionViewName:a}),icon:(0,T.jsx)(f().h,{color:"regular",viewType:c,viewIcon:s}),right:(0,T.jsx)(w()._,{}),onClick:()=>{(0,x().Sj)({environment:l,collectionContextStore:i,collectionViewId:o.id})}})}function A(e){const t=(0,a().tz)(),o=(0,n().v3)(),c=(0,r().K8)((()=>{const t=e.collectionStore();if(t)return(0,b().N)(o,t).filter((e=>"collection_view"===e.type))}),[e,o]),p=function(){const{collectionContextStore:e}=(0,k().V)(),t=(0,n().v3)(),o=(0,i().IS)((e=>({iconWithBackground:{backgroundColor:e.surface.wash},icon:{width:16,fill:e.regularIconColor}})),[]);return{key:"add_new_view",action:()=>{},render:n=>(0,T.jsx)(m().I,{buttonMenuItemProps:n,title:(0,T.jsx)(a().sA,{id:"workflowTemplates.settings.views.addNewView.title",defaultMessage:"Empty view"}),icon:(0,T.jsx)(v().y,{backgroundColor:o.iconWithBackground.backgroundColor,icon:(0,l().W)(o.icon)}),right:(0,T.jsx)(C().z,{isAdded:!1}),onClick:()=>{const o="table";d().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:t,canUndo:!0,perform:n=>{(0,y().Z)({environment:t,collectionContextStore:e,newViewType:o,transaction:n,settingsDestination:"skip"})}}),u().a2({collectionSettingsStore:e.settingsStore,item:{type:"createView"}}),(0,s().b)({environment:t,collectionContextStore:e,view_type:o,from:"addButton"})}})}}();return(0,_().i)({title:t.formatMessage({id:"workflowTemplates.settings.views.suggestedViews.title",defaultMessage:"New view"}),templates:c??[],isSuggestedSection:!0,legacyUnpackagedFeatureTemplates:[],additionalItems:[p]})}},40642:(e,t,o)=>{o.d(t,{b:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},44250:(e,t,o)=>{function n(e){return!(!e||"askUserToPick"in e)}function r(e){if(!e||!("askUserToPick"in e))return e}function i(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}o.d(t,{DK:()=>r,K$:()=>n,j6:()=>i})},44405:(e,t,o)=>{o.d(t,{A:()=>p});o(242343);var n=()=>o(862510),r=()=>o(174114),i=()=>o(650199),l=()=>o(711361),a=()=>o(31448),c=()=>o(535906),s=()=>o(397791),u=()=>o(581344),d=o(163643);function p(e){const{icon:t,iconStyle:o,title:p,caption:m,right:y,rightStyle:f,isRed:g,isGray:v,isOrange:h,onClick:S,onMouseDown:x,onMouseEnter:b,onMouseLeave:_,disabled:k,showChevron:w,chevronStyle:C,rotateChevron:T,showDragHandle:M,focused:I,textWrapperStyle:j,shouldWrapCaption:A,desktopIconStyle:V,buttonStyle:O,desktopTitleStyle:P,source:R,menuListItemProps:D}=e,H=(0,u().y$)(),B=(0,r().IS)((e=>({style:{color:v?e.text.secondary:h?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.text.primary,fill:v?e.mediumIconColor:h?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:k?.4:void 0,...O},leftIconStyle:{width:H,height:H,...t===l()._&&{height:3},...o},rightStyle:{display:"flex",alignItems:"center",color:k?e.text.primary:e.text.tertiary,fill:k?e.regularIconColor:e.lightIconColor,flexShrink:0,...f},rightChevronStyle:{marginLeft:"tableHeaderMenu"===R?0:6,transition:"transform 200ms ease-in-out",...T&&{transform:"rotate(90deg)"},...C}})),[v,h,k,o,t,C,f,O,H,T,R]),{itemRef:F,isTabbable:N,onKeyDown:W,onFocus:E}=(0,n().e)();return(0,d.jsx)(c().A,{ref:F,icon:null==t?void 0:t(B.leftIconStyle),focused:I||!1,disabled:k,title:p,caption:m,shouldWrapCaption:A,desktopTitleStyle:{flexGrow:1,flexShrink:1,...P},onKeyDown:W,onFocus:E,disallowTabbing:!N,showDragHandle:M,buttonStyle:B.style,rightStyle:B.rightStyle,isRedOnHover:g,ignoreLocalHoverState:!!k||void 0,right:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{...a().RC,display:"flex"},children:y}),!k&&w&&(0,d.jsx)(s().I,{icon:i().x,size:"sm",color:"tableHeaderMenu"===R?"secondary":"tertiary",style:B.rightChevronStyle})]}),onClick:S,onMouseDown:x,onMouseEnter:b,onMouseLeave:_,textWrapperStyle:j,desktopIconStyle:V,...D})}},130935:(e,t,o)=>{o.d(t,{_:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("layout",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.19999C2.28953 2.19999 2.19999 2.28953 2.19999 2.39998V11.5999C2.19999 11.7103 2.28953 11.7999 2.39999 11.7999H4.99997C5.11042 11.7999 5.19997 11.7103 5.19997 11.5999V2.39998C5.19997 2.28953 5.11042 2.19999 4.99997 2.19999H2.39999ZM1 2.39998C1 1.6268 1.62679 1 2.39999 1H4.99997C5.77316 1 6.39995 1.6268 6.39995 2.39998V11.5999C6.39995 12.3731 5.77316 12.9999 4.99997 12.9999H2.39999C1.62679 12.9999 1 12.3731 1 11.5999V2.39998ZM9 8.80036C8.88954 8.80036 8.8 8.88991 8.8 9.00036V11.6003C8.8 11.7108 8.88954 11.8003 9 11.8003H11.6C11.7105 11.8003 11.8 11.7108 11.8 11.6003V9.00036C11.8 8.88991 11.7105 8.80036 11.6 8.80036H9ZM7.60001 9.00036C7.60001 8.22717 8.2268 7.60037 9 7.60037H11.6C12.3731 7.60037 13 8.22717 13 9.00036V11.6003C13 12.3736 12.3731 13.0003 11.6 13.0003H9C8.2268 13.0003 7.60001 12.3736 7.60001 11.6003V9.00036ZM8.79994 2.39998C8.79994 2.28953 8.88949 2.19999 8.99994 2.19999H11.5999C11.7104 2.19999 11.7999 2.28953 11.7999 2.39998V4.99997C11.7999 5.11043 11.7104 5.19996 11.5999 5.19996H8.99994C8.88949 5.19996 8.79994 5.11043 8.79994 4.99997V2.39998ZM8.99994 1C8.22675 1 7.59995 1.6268 7.59995 2.39998V4.99997C7.59995 5.77316 8.22675 6.39995 8.99994 6.39995H11.5999C12.3731 6.39995 12.9999 5.77316 12.9999 4.99997V2.39998C12.9999 1.6268 12.3731 1 11.5999 1H8.99994Z"})})},137696:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>l,x2:()=>r});var n=()=>o(76394);function r(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,n().O9)(t)&&r(t.type)}function l(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,n().HB)(e)}},151602:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(129044))().default{getInitialState(){return{}}}const r=new n;o(996094).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},153258:(e,t,o)=>{o.d(t,{b:()=>l});var n=()=>o(876695),r=()=>o(137476);var i=()=>o(545313);function l(e){const{environment:t,collectionContextStore:o,view_type:l,view_config_uri:a,from:c,...s}=e;!function(e,t){r().vd(e,"create_view",t)}(t,{...(0,n().sl)(o)||{},...s,view_type:l,view_config_uri:a,from:c}),(0,i().f)({collectionContextStore:o,action:"create_view",from:c,property_type:void 0})}},155342:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,questionMarkCircleIcon:()=>i});o(242343);var n=o(163643);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},i=(0,o(680369).wt)("questionMarkCircle",r)},194585:(e,t,o)=>{o.d(t,{n:()=>w,z:()=>_});o(610931),o(242343);var n=()=>o(803290),r=()=>o(174114),i=()=>o(505966),l=()=>o(73658),a=()=>o(916963),c=()=>o(758989),s=()=>o(242978),u=()=>o(584044),d=()=>o(130935),p=()=>o(40642),m=()=>o(76394),y=()=>o(511441),f=()=>o(327665),g=()=>o(622286),v=()=>o(328653),h=()=>o(940445),S=o(163643);const x=16;function b(e){let{icon:t,theme:o,size:n,style:i}=e;const a=(0,r().IS)((e=>({icon:{fill:(0,v().d)(t,e).icon.primary,...i}})),[t,i]);return(0,S.jsx)(l().p,{icon:t,theme:o,size:n,style:a.icon})}function _(e){var t;let{template:o,size:n,iconStyle:l}=e;const a=n??x,f=(0,r().IS)((()=>({icon:{width:a,height:a,...l}})),[a,l]),g=(0,r().DP)();if((0,i().cB)(o.templateId))return(0,u().L)(f.icon);const{type:v}=o;switch(v){case"property":return(0,S.jsx)(k,{template:o,iconSize:a,styles:f});case"collection_view":return(0,S.jsx)(y().h,{viewIcon:null===(t=o.value.format)||void 0===t?void 0:t.collection_view_icon,viewType:o.value.type,color:"lightGray",style:f.icon});case"layout":return(0,S.jsx)(S.Fragment,{children:(0,d()._)(f.icon)});case"block":return(0,S.jsx)(S.Fragment,{children:(0,p().b)(f.icon)});case"collection":case"compound":const e="collection"===o.type?o.value.targetCollection.icon:o.icon;if(!(0,c().T8)(e))throw new Error("Only Notion static icons are allowed for template icons");return(0,S.jsx)(b,{icon:e,theme:g,size:a,style:f.icon});case"automation":return(0,S.jsx)(S.Fragment,{children:(0,s().v)(f.icon)});default:(0,m().HB)(v)}}function k(e){let{template:t,iconSize:o,styles:i}=e;const l=(0,r().DP)(),c=(0,g().X)("nds_default_property_noticon"),s=(0,n().K8)((()=>{const{relatedCollectionTemplateId:e}=t;if("relation"===t.value.type&&e){return h().globalWorkflowTemplates.fromIdOfType({templateId:e,type:"collection"}).value.targetCollection.icon}return t.value.icon}),[t]);return(0,S.jsx)(a().zB,{type:t.value.type,icon:s,size:o,style:i.icon,theme:l,isDefaultNoticonEnabled:c})}function w(e){let{template:t,backgroundSize:o}=e;const n=(0,r().IS)((e=>({iconContainer:{background:C({theme:e,template:t})[30]},icon:{fill:C({theme:e,template:t})[400]}})),[t]);return(0,S.jsx)(f().y,{backgroundColor:n.iconContainer.background,backgroundSize:o,icon:(0,S.jsx)(_,{template:t,iconStyle:n.icon})})}function C(e){let{theme:t,template:o}=e;const{type:n}=o;switch(n){case"collection_view":case"automation":return t.accentColors.blue;case"property":return"relation"===o.value.type?t.accentColors.yellow:t.accentColors.red;case"layout":return t.accentColors.orange;case"block":return t.accentColors.purple;case"compound":return t.accentColors.green;case"collection":return t.accentColors.pink;default:(0,m().HB)(n)}}},242978:(e,t,o)=>{o.d(t,{v:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("boltFilled",{svg:(0,n.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},271142:(e,t,o)=>{o.d(t,{EC:()=>_,To:()=>b,YC:()=>k,or:()=>x,u:()=>S});o(610931);var n=o(242343),r=()=>o(237385),i=()=>o(803290),l=()=>o(496985),a=()=>o(232312),c=()=>o(653998),s=()=>o(76394),u=()=>o(337658),d=()=>o(73631),p=()=>o(137696),m=()=>o(129978),y=()=>o(113800),f=()=>o(830925),g=o(163643);const v=new WeakMap,h=(0,n.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});h.displayName="AutomationContext";function S(e){const{automationStore:t,children:o,contextType:n}=e,S=(0,r().v3)(),x=(0,c().tz)(),{value:b}=(0,m().fJ)(d().T.formulas),{value:_}=(0,m().fJ)(u().QV.automationTypecheck),k=(0,f().n)(t),w=(0,i().K8)((()=>{if(!b)return{error:new(a().N9)("Missing formulas dependency")};if(!_)return{error:new(a().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:n,contextType:r,formulasModule:i,intl:a,isSubscribed:c}=e,u=v.get(o);if(u)return u;{const e=new(l().default)((()=>{const e=o.getTriggerType();let l=r;return(0,s().O9)(e)&&(0,p().x2)(e)&&(l=(0,p().H8)(e)),(0,y().Z)({environment:t,automationStore:o,automationTypecheckModule:n,contextType:l,formulasModule:i,intl:a,isSubscribed:c})}),{debugName:"automationContextTypecheckResultCachedStore"});return v.set(o,e),e}}({environment:S,automationStore:t,automationTypecheckModule:_,contextType:n,formulasModule:b,intl:x,isSubscribed:k});return e.state}),[S,t,_,n,b,x,k]);return(0,g.jsx)(h.Provider,{value:{automationStore:t,typecheckResult:w,contextType:n,defined:!0},children:o})}function x(e){const{automationStore:t,children:o}=e,n=(0,i().K8)((()=>{var e;return null===(e=t.getTrigger())||void 0===e?void 0:e.type}),[t]);return(0,g.jsx)(S,{automationStore:t,contextType:(0,p().H8)(n??"event"),children:o})}function b(e){var t;return null===(t=v.get(e))||void 0===t?void 0:t.state}function _(){const e=n.useContext(h);if(!1===e.defined)throw new Error("No automation context found!");return e}function k(){return n.useContext(h)}},280704:(e,t,o)=>{o.d(t,{b:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("plusThick",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},312692:(e,t,o)=>{o.d(t,{i:()=>g});o(403517);var n=o(242343),r=()=>o(237385),i=()=>o(803290),l=()=>o(174114),a=()=>o(711361),c=()=>o(653998),s=()=>o(471685),u=()=>o(88271),d=()=>o(749975),p=()=>o(362493),m=()=>o(419549),y=o(163643);const f=3;function g(e){let{title:t,templates:o,legacyUnpackagedFeatureTemplates:g,isSuggestedSection:v,additionalItems:h=[]}=e;const S=(0,l().IS)((e=>({title:{color:e.text.secondary},iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"},icon:{width:18,height:18,fill:e.text.secondary}})),[]),x=(0,d().ET)(),b=(0,r().v3)(),[_,k]=(0,n.useState)(!1),w=[...(0,i().K8)((()=>o.map((e=>(0,p().Z)({template:e,isInSuggestedSection:v,collectionContextStore:x,environment:b})))),[x,b,v,o]),...g.map((e=>(0,m().d)({legacyUnpackagedFeatureTemplate:e,collectionContextStore:x}))),...h];if(0===w.length)return;const C={key:`${t}-toggle-truncation`,action:()=>{k(!_)},render:e=>(0,y.jsx)(s().I,{buttonMenuItemProps:e,title:(0,y.jsx)("div",{style:S.title,children:_?(0,y.jsx)(c().sA,{id:"useFeatureTemplatesSection.showLess",defaultMessage:"Show less"}):(0,y.jsx)(c().sA,{id:"useFeatureTemplatesSection.showMore",defaultMessage:"More"})}),icon:(0,y.jsx)("div",{style:S.iconContainer,children:(0,a()._)(S.icon)})})},T=_?w:w.slice(0,f);return{key:t,render:e=>(0,y.jsx)(u().A,{...e,title:t}),items:[...T,...w.length>f?[C]:[]]}}},327665:(e,t,o)=>{o.d(t,{y:()=>i});o(242343);var n=()=>o(174114),r=o(163643);function i(e){let{icon:t,backgroundColor:o,backgroundSize:i}=e;const l=(0,n().IS)((e=>({iconContainer:{height:i??28,width:i??28,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",background:o??e.tint.regular}})),[o,i]);return(0,r.jsx)("div",{style:l.iconContainer,children:t})}},328653:(e,t,o)=>{o.d(t,{d:()=>i});var n=()=>o(758989);const r={light:{gray:{stroke:{secondary:"rgba(84, 72, 49, 0.15)"},fill:{primary:"rgba(84, 72, 49, 0.15)",secondary:"rgba(84, 72, 49, 0.08)",tertiary:"rgba(84, 72, 49, 0.04)"},text:{primary:"#1D1B16"}},red:{stroke:{secondary:"rgba(244, 171, 159, 0.40)"},fill:{primary:"rgba(244, 171, 159, 0.40)",secondary:"rgba(244, 171, 159, 0.40)",tertiary:"rgba(243, 136, 118, 0.07)"},text:{primary:"#5D1715"}},brown:{stroke:{secondary:"rgba(210, 162, 141, 0.35)"},fill:{primary:"rgba(210, 162, 141, 0.35)",secondary:"rgba(210, 162, 141, 0.17)",tertiary:"rgba(210, 162, 141, 0.07)"},text:{primary:"#442A1E"}},orange:{stroke:{secondary:"rgba(224, 124, 57, 0.27)"},fill:{primary:"rgba(224, 124, 57, 0.27)",secondary:"rgba(224, 124, 57, 0.15)",tertiary:"rgba(224, 124, 57, 0.07)"},text:{primary:"#49290E"}},yellow:{stroke:{secondary:"rgba(236, 191, 66, 0.39)"},fill:{primary:"rgba(236, 191, 66, 0.39)",secondary:"rgba(215, 177, 24, 0.15)",tertiary:"rgba(215, 177, 24, 0.07)"},text:{primary:"#402C1B"}},green:{stroke:{secondary:"rgba(123, 183, 129, 0.27)"},fill:{primary:"rgba(123, 183, 129, 0.27)",secondary:"rgba(123, 183, 129, 0.15)",tertiary:"rgba(123, 183, 129, 0.07)"},text:{primary:"#1C3829"}},blue:{stroke:{secondary:"rgba(93, 165, 206, 0.27)"},fill:{primary:"rgba(93, 165, 206, 0.27)",secondary:"rgba(95, 167, 208, 0.15)",tertiary:"rgba(91, 166, 209, 0.07)"},text:{primary:"#183347"}},purple:{stroke:{secondary:"rgba(168, 129, 197, 0.27)"},fill:{primary:"rgba(168, 129, 197, 0.27)",secondary:"rgba(204, 170, 229, 0.15)",tertiary:"rgba(206, 175, 229, 0.07)"},text:{primary:"#412454"}},pink:{stroke:{secondary:"rgba(225, 136, 179, 0.27)"},fill:{primary:"rgba(225, 136, 179, 0.27)",secondary:"rgba(235, 159, 196, 0.15)",tertiary:"rgba(231, 147, 188, 0.07)"},text:{primary:"#4C2337"}}},dark:{gray:{stroke:{secondary:"rgba(255, 255, 255, 0.09)"},fill:{primary:"rgba(255, 255, 255, 0.13)",secondary:"rgba(255, 255, 255, 0.09)",tertiary:"rgba(255, 255, 255, 0.03)"},text:{primary:"rgba(255, 255, 255, 0.81)"}},red:{stroke:{secondary:"rgba(222, 85, 85, 0.25)"},fill:{primary:"rgba(222, 85, 84, 0.30)",secondary:"rgba(222, 85, 84, 0.30)",tertiary:"rgba(222, 85, 88, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},brown:{stroke:{secondary:"rgba(184, 101, 69, 0.25)"},fill:{primary:"rgba(184, 101, 68, 0.30)",secondary:"rgba(184, 101, 68, 0.30)",tertiary:"rgba(184, 101, 72, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},orange:{stroke:{secondary:"rgba(233, 126, 37, 0.20)"},fill:{primary:"rgba(233, 126, 36, 0.30)",secondary:"rgba(233, 126, 36, 0.30)",tertiary:"rgba(233, 126, 40, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},yellow:{stroke:{secondary:"rgba(179, 129, 61, 0.20)"},fill:{primary:"rgba(231, 161, 55, 0.30)",secondary:"rgba(231, 161, 55, 0.30)",tertiary:"rgba(162, 105, 50, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},green:{stroke:{secondary:"rgba(45, 153, 100, 0.20)"},fill:{primary:"rgba(45, 153, 100, 0.30)",secondary:"rgba(45, 153, 100, 0.30)",tertiary:"rgba(45, 153, 100, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},blue:{stroke:{secondary:"rgba(51, 126, 169, 0.20)"},fill:{primary:"rgba(51, 126, 169, 0.33)",secondary:"rgba(51, 126, 169, 0.33)",tertiary:"rgba(51, 126, 169, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},purple:{stroke:{secondary:"rgba(155, 97, 211, 0.18)"},fill:{primary:"rgba(155, 97, 211, 0.28)",secondary:"rgba(155, 97, 211, 0.28)",tertiary:"rgba(155, 97, 211, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},pink:{stroke:{secondary:"rgba(220, 76, 145, 0.22)"},fill:{primary:"rgba(220, 76, 145, 0.30)",secondary:"rgba(220, 76, 145, 0.30)",tertiary:"rgba(220, 76, 145, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}}}};function i(e,t){const o=(0,n().VA)(e),i="lightgray"===o?"gray":o;return{...r[t.mode][i],icon:{primary:n().l8[t.mode][i]}}}},362493:(e,t,o)=>{o.d(t,{Z:()=>M,p:()=>I});o(610931),o(403517),o(242343);var n=()=>o(237385),r=()=>o(803290),i=()=>o(174114),l=()=>o(505966),a=()=>o(564134),c=()=>o(76394),s=()=>o(521325),u=()=>o(84543),d=()=>o(471685),p=()=>o(91338),m=()=>o(137476),y=()=>o(477784),f=()=>o(518022),g=()=>o(605845),v=()=>o(716430),h=()=>o(707299),S=()=>o(940445),x=()=>o(727528),b=()=>o(590091),_=()=>o(921734),k=()=>o(772180),w=()=>o(413995),C=()=>o(194585),T=o(163643);function M(e){let{environment:t,template:o,isInSuggestedSection:n,collectionContextStore:r}=e;return{key:o.templateId,action:()=>{if(n)I({environment:t,template:o,collectionContextStore:r,suggestedFeatureAnalytics:void 0});else{const{collectionStore:e,collectionViewStore:n,collectionSettingsStore:i}=(0,b().i)(r);(0,v().UD)({template:o,environment:t,collectionStore:e,collectionViewStore:n,collectionSettingsStore:i,collectionContextStore:r})}},render:e=>(0,T.jsx)(j,{buttonMenuItemProps:e,template:o,isInSuggestedSection:n})}}function I(e){let{environment:t,collectionContextStore:o,template:n,suggestedFeatureAnalytics:r}=e;const i=o.collectionStore();if(!i)throw new Error("collectionStore not found");const a=i.getWorkflowTemplateId();r&&(0,m().u4)({environment:t,event:{eventName:"suggested_feature_template_clicked",eventProperties:{origin:r.origin,selected_index:r.selectedIndex,template_ids_shown:r.shownTemplateIds,template_id_clicked:n.templateId,collection_template_id:a}}});const c=o.settingsStore;if((0,k().isWorkflowTemplateWithConfirmStep)(n))s().a2({collectionSettingsStore:c,item:{type:"confirmAddTemplate",template:n}});else if((0,l().Sz)(n)){const{relatedCollectionTemplateId:e}=n;!function(e){var t;let{environment:o,template:n,collectionStore:r,relatedCollectionTemplateId:i}=e;const l=null===(t=r.getParentBlockStore())||void 0===t?void 0:t.getParentStore();if(!l)throw new Error(`parentStore not found for ${r.id}`);if(!(0,h().u)(l))throw new Error(`Incorrect parent store: ${l.table} ${l.id}`);const a=S().globalWorkflowTemplates.fromIdOfType({templateId:i,type:"collection"});(0,f().openSelectedTemplateOnboardingModalForInAppFlows)({environment:o,template:a,origin:"suggested_feature_template",parentStore:l,navigateToOnFinish:"skip",relationInfos:[{type:"source",collectionStore:r,relationPropertyTemplate:n}],aiPrompt:void 0})}({environment:t,template:n,collectionStore:i,relatedCollectionTemplateId:e})}else u().createAndCommit({userAction:"FeatureTemplateMenuItem.addFeatureTemplateToTarget",environment:t,canUndo:!0,perform:e=>{g().ai({environment:t,transaction:e,collectionStore:i,template:n,logger:new(S().WorkflowTemplateLogger),origin:"suggested_feature"}),r&&(0,m().u4)({environment:t,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:r.origin,template_id_added:n.templateId,collection_template_id:a}}});const l=o.collectionViewStore();l&&v().UD({template:n,environment:t,collectionStore:i,collectionViewStore:l,collectionSettingsStore:c,collectionContextStore:o})}})}function j(e){let{buttonMenuItemProps:t,template:o,isInSuggestedSection:l}=e;const s=(0,i().IS)((e=>({iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"},icon:{fill:e.regularIconColor}})),[]),{collectionStore:u}=(0,b().V)(),m=(0,n().v3)(),f=(0,r().K8)((()=>(0,x().NU)({environment:m,collectionStore:u,templateId:o.templateId})),[m,u,o.templateId]),g=(0,r().K8)((()=>function(e){let{template:t,collectionStore:o}=e;const{type:n}=t;switch(n){case"property":const{value:e}=t;if((0,a().DQ)(e)){const n=function(e){let{templateId:t,propertyTemplateSchema:o,collectionStore:n}=e;const r=(0,x().S1)({collectionStore:n,templateId:t,instancePointerType:"property"});if(!r)return o.options??[];const i=n.getSchema()[r.id];if(!i||!(0,a().DQ)(i))return[];return i.options??[]}({templateId:t.templateId,propertyTemplateSchema:e,collectionStore:o}).map((e=>e.value));return(0,S().getWorkflowTemplateItemsCaption)(n)}return;case"collection_view":return`${y().A.formatMessage(p().X[t.value.type])} view`;case"compound":return;default:(0,c().HB)(n)}}({template:o,collectionStore:u})),[o,u]),v=(0,S().getWorkflowTemplateName)(o);return l?(0,T.jsx)(d().I,{buttonMenuItemProps:t,title:v,icon:(0,T.jsx)(C().n,{template:o}),right:(0,T.jsx)(w().z,{isAdded:f})}):(0,T.jsx)(d().I,{buttonMenuItemProps:t,title:v,caption:g,icon:(0,T.jsx)("div",{style:s.iconContainer,children:(0,T.jsx)(C().z,{template:o,iconStyle:s.icon})}),right:(0,T.jsx)(_()._,{})})}},367950:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>n})},413995:(e,t,o)=>{o.d(t,{z:()=>a});o(242343);var n=()=>o(174114),r=()=>o(539645),i=()=>o(280704),l=o(163643);function a(e){let{isAdded:t}=e;const o=(0,n().IS)((e=>({circle:{height:24,width:24,borderRadius:50,display:"flex",alignItems:"center",justifyContent:"center",background:t?"dark"===e.mode?e.accentColors.blue[100]:e.accentColors.blue[50]:e.lightGrayButtonBackground},plusIcon:{height:15,width:15,fill:e.mediumIconColor},checkIcon:{height:12,width:12,fill:e.blueColor}})),[t]);return(0,l.jsx)("div",{style:o.circle,children:t?(0,r().o)(o.checkIcon):(0,i().b)(o.plusIcon)})}},419549:(e,t,o)=>{o.d(t,{d:()=>y});o(242343);var n=()=>o(174114),r=()=>o(83544),i=()=>o(73658),l=()=>o(653998),a=()=>o(76394),c=()=>o(521325),s=()=>o(471685),u=()=>o(985633),d=()=>o(921734),p=()=>o(413995),m=o(163643);function y(e){let{legacyUnpackagedFeatureTemplate:t,collectionContextStore:o}=e;return{key:t.type,action:()=>{const e=o.settingsStore;switch(t.type){case"subitems":c().a2({collectionSettingsStore:e,item:{type:"subitemV2",from:"customize_menu"}});break;case"dependencies":c().a2({collectionSettingsStore:e,item:{type:"dependencies",from:"customize_menu"}});break;default:(0,a().HB)(t.type)}},render:e=>(0,m.jsx)(g,{legacyFeature:t,buttonMenuItemProps:e})}}function f(e,t,o){const n=t=>{const o={items:"items"};return{title:(0,m.jsx)(l().sA,{...(0,u().mv)({feature:t,databaseType:void 0}),values:o}),caption:e.formatMessage((0,u().I_)({feature:t,databaseType:void 0}),o)}},c=t.accentColors.brown,s=e=>(0,m.jsx)("div",{style:{height:28,width:28,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",background:o.isInstalled?void 0:c[30]},children:(0,m.jsx)(i().p,{icon:e,theme:t,size:16,style:{fill:o.isInstalled?t.regularIconColor:c[400]}})});switch(o.type){case"subitems":return{...n("subitem"),icon:s(r().A.images.appPackages.featureSubtasksSvg)};case"dependencies":return{...n("timeline_arrows_by"),icon:s(r().A.images.appPackages.featureDependenciesSvg)};default:(0,a().HB)(o.type)}}function g(e){const{legacyFeature:t,buttonMenuItemProps:o}=e,r=(0,l().tz)(),i=(0,n().DP)();return(0,m.jsx)(s().I,{buttonMenuItemProps:o,...f(r,i,t),right:t.isInstalled?(0,m.jsx)(d()._,{}):(0,m.jsx)(p().z,{isAdded:!1})})}},471685:(e,t,o)=>{o.d(t,{I:()=>u,h:()=>s});o(242343);var n=()=>o(237385),r=()=>o(174114),i=()=>o(31448),l=()=>o(535906),a=()=>o(622163),c=o(163643);function s(e){let{environment:t}=e;return{padding:t.device.isMobile?"12px 2px":"6px",alignItems:"center"}}function u(e){let{buttonMenuItemProps:t,title:o,caption:u,icon:d,onClick:p,right:m,isDisabled:y}=e;const f=(0,n().v3)(),g=(0,r().IS)((e=>({menuItem:{display:"flex",...s({environment:f}),opacity:y?.4:void 0},title:{fontSize:(0,a().ny)(f,"UIRegular"),...i().RC},caption:{fontSize:(0,a().ny)(f,"UISmall"),overflow:"hidden",color:e.text.secondary,whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[f,y]),v={};return p&&(v.onClick=p),(0,c.jsx)(l().A,{...t,style:g.menuItem,disabled:y,title:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{style:g.title,children:o}),u&&(0,c.jsx)("div",{style:g.caption,children:u})]}),icon:d,right:m,...v})}},533639:(e,t,o)=>{o.d(t,{p:()=>n});class n extends(()=>o(998969))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}},559181:(e,t,o)=>{o.d(t,{A:()=>i});o(242343);var n=()=>o(653998),r=o(163643);const i=function(e){let{collectionViewName:t,collectionViewType:i}=e;return t?(0,r.jsx)(o(826033).A,{children:t}):"page"===i?(0,r.jsx)(n().sA,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,r.jsx)(n().sA,{...o(91338).X[i]})}},590091:(e,t,o)=>{o.d(t,{V:()=>l,i:()=>a});var n=()=>o(803290),r=()=>o(496580),i=()=>o(749975);function l(){const e=(0,i().ET)(),{collectionStore:t,collectionViewStore:o,collectionSettingsStore:r}=(0,n().K8)((()=>a(e)),[e]);return{collectionStore:t,collectionViewStore:o,collectionSettingsStore:r,collectionContextStore:e}}function a(e){return{collectionStore:(0,r().o9)(e.collectionStore(),"collectionStore not found"),collectionViewStore:(0,r().o9)(e.collectionViewStore(),"collectionViewStore not found"),collectionSettingsStore:e.settingsStore}}},591966:(e,t,o)=>{o.d(t,{$:()=>p,N:()=>u});o(362833),o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601),o(725707),o(491955),o(324989),o(403517);var n=()=>o(994966),r=()=>o(505966),i=()=>o(975392),l=()=>o(76394),a=()=>o(360482),c=()=>o(940445),s=()=>o(727528);function u(e,t){const o=(0,s().Xg)(e,t),n=new Set(function(e){const t=e.getParentBlockStore();if(null==t||!t.isDefined())return[];return(null==t?void 0:t.getCollectionViewStores().map((e=>e.getName())).filter(l().O9))??[]}(t));return function(e){const t=new Set(e.map((e=>e.templateId))),o=[];for(const n of e)o.push(...d(n).filter((e=>!t.has(e))).map((e=>c().globalWorkflowTemplates.fromId(e))).filter(r().bz).filter((e=>!(0,r().Sz)(e))));return o}(o).filter((e=>"collection_view"!==e.type||!n.has(e.value.name??"")))}function d(e){return"compound"===e.type||"collection"===e.type?e.value.templateItems.filter((e=>"optionalDefaultOn"===e.optionality||"optionalDefaultOff"===e.optionality)).map((e=>e.pointer)):[]}function p(e){let{persona:t,parentStore:o}=e;const r=t?(0,n().Qf)({persona:t}):[],l=c().globalWorkflowTemplates.allOfType({templateIds:r??[],type:"collection"}),s=i().hS(function(e){let{collectionTemplates:t,parentStore:o}=e;if(!o)return t;if((0,a().Yu)(o))return t;const n=(0,a().$R)(o)?o.getTeamPageStores():o.getContentStores(),r=new Set((0,i().oE)(n.flatMap((e=>{var t;return(null===(t=e.getCollectionStores())||void 0===t?void 0:t.map((e=>e.getWorkflowTemplateId())))??[]})))),l=[],c=[];for(const i of t)r.has(i.templateId)?l.push(i):c.push(i);return[...c,...l]}({collectionTemplates:[...l,...c().globalWorkflowTemplates.allOfType({templateIds:(0,n().dj)(),type:"collection"})],parentStore:o}),(e=>e.templateId));return s}},639659:(e,t,o)=>{o.d(t,{a:()=>i});var n=()=>o(803290);const r=new(o(496985).default)((()=>o(521972).g.state.isOpen),{debugName:"IsInPageViewModeStore"});function i(){return(0,n().O$)(r)}},658294:(e,t,o)=>{o.d(t,{G:()=>i});var n=()=>o(137476),r=()=>o(836331);function i(e,t){n().vd(e,"delete_property",t),r().default.logEvent("delete_property")}},686752:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,pencilLineIcon:()=>r});o(242343);const n={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},r=(0,o(680369).wt)("pencilLine",n)},716430:(e,t,o)=>{o.d(t,{Sj:()=>c,UD:()=>a});o(610931);var n=()=>o(521325),r=()=>o(259897),i=()=>o(727528);const l={property:function(e){let{template:t,collectionStore:r,collectionViewStore:l,collectionSettingsStore:a}=e;const c=(0,i().S1)({collectionStore:r,templateId:t.templateId,instancePointerType:"property"});if(!c)throw new Error(`No property instance found for property template ${t.templateId}`);const s=l.getType();n().a2({collectionSettingsStore:a,item:{type:"property",property:c.id,formatKey:s?o(810111).u9(s):void 0}})},collection_view:function(e){let{template:t,environment:o,collectionStore:n,collectionContextStore:r}=e;const l=(0,i().S1)({collectionStore:n,templateId:t.templateId,instancePointerType:"collection_view"});if(!l)throw new Error(`No collection view instance found for property template ${t.templateId}`);c({environment:o,collectionContextStore:r,collectionViewId:l.id})},compound:function(e){}};function a(e){l[e.template.type](e)}function c(e){var t;let{environment:o,collectionContextStore:i,collectionViewId:l}=e;(null===(t=i.collectionViewStore())||void 0===t?void 0:t.id)!==l&&(0,r().t)({environment:o,collectionContextStore:i,collectionViewId:l,isFullScreen:i.isFullScreenStore.state,isRootChild:i.isRootChildStore.state,isInPeekRenderer:i.isInPeekRendererStore.state}),n().a2({collectionSettingsStore:i.settingsStore,item:{type:"main"}})}},749975:(e,t,o)=>{o.d(t,{ET:()=>c,Ks:()=>s,RI:()=>a,p2:()=>l});o(610931);var n=o(242343);const r="collectionContextStore",i=(0,o(372660).C)({displayName:r,legacyContextKey:r,modernContextDefaultValue:void 0}),l=i.context,a=i.Provider;function c(){const e=n.useContext(l);if(void 0===e)throw new Error(`No context provided: ${r}`);return e}function s(){return n.useContext(l)}},772180:(e,t,o)=>{o.r(t),o.d(t,{WorkflowSettingsConfirmAddTemplate:()=>M,isWorkflowTemplateWithConfirmStep:()=>A});o(610931);var n=o(242343),r=()=>o(237385),i=()=>o(174114),l=()=>o(505966),a=()=>o(653998),c=()=>o(975392),s=()=>o(521325),u=()=>o(84543),d=()=>o(3364),p=()=>o(948120),m=()=>o(932322),y=()=>o(951540),f=()=>o(88271),g=()=>o(749975),v=()=>o(137476),h=()=>o(605845),S=()=>o(716430),x=()=>o(940445),b=(o(403517),()=>o(752903)),_=()=>o(837809),k=o(163643);function w(e){let{template:t,style:o}=e;const n=(0,i().IS)((e=>({container:{...o,padding:12,border:`1px solid ${e.regularDividerColor}`,borderRadius:6}})),[o]),r=function(e){if((0,l().Xq)(e,"property")&&(0,l().Io)(e)){const{options:t=[]}=e.value;if(0===t.length)return;return(0,k.jsx)(C,{options:t})}}(t);return r?(0,k.jsx)("div",{style:n.container,children:r}):null}function C(e){let{options:t}=e;const o=(0,i().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:8}})),[]);return(0,k.jsx)("div",{style:o.container,children:t.map((e=>(0,k.jsx)("div",{children:(0,k.jsx)(_().O,{format:b().NY.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1})},e.id)))})}var T=()=>o(194585);function M(e){let{template:t,collectionSettingsStore:o}=e;const[l,c]=(0,n.useState)("sample"===t.propertyOptionsType),{device:{isMobile:s}}=(0,r().v3)(),u=(0,i().IS)((e=>{const t={display:"flex",flexDirection:"column",minHeight:0};return{shrinkableHeight:t,noShrink:{flexShrink:0},featurePreviewWrapper:{...t,width:"-webkit-fill-available"},featurePreviewBody:{...t,gap:16,...s?{margin:"16px 0"}:{margin:0}},featurePreview:{...t,overflow:"auto"},addButtonContainer:{...s?{margin:"12px 0"}:{marginBottom:6}}}}),[s]),y=(0,x().getWorkflowTemplateName)(t);return(0,k.jsxs)(d().Ay,{collectionSettingsStore:o,title:(0,k.jsx)(a().sA,{id:"workflowTemplateSettings.confirmAddTemplate.title",defaultMessage:"Turn on {templateName}",values:{templateName:y}}),disableScroller:!0,menuScrollerStyle:u.shrinkableHeight,innerContentWrapperStyle:u.shrinkableHeight,children:[(0,k.jsx)(f().A,{style:u.shrinkableHeight,children:(0,k.jsx)(m().Ay,{style:u.shrinkableHeight,textWrapperStyle:u.featurePreviewWrapper,bodyStyle:u.featurePreviewBody,body:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(I,{template:t,style:u.noShrink}),(0,k.jsx)(w,{template:t,style:u.featurePreview})]})})}),(0,k.jsx)(f().A,{style:u.noShrink,children:t.value.options&&t.value.options.length>0&&(0,k.jsx)(p().A,{title:(0,k.jsx)(a().sA,{id:"workflowTemplateSettings.confirmAddTemplate.propertyOptionsToggle",defaultMessage:"Set my own options"}),switcherProps:{on:l,disallowTabbing:!0},onClick:()=>{c(!l)}})}),(0,k.jsx)(f().A,{style:u.noShrink,children:(0,k.jsx)(m().Ay,{body:(0,k.jsx)(j,{template:t,startEmpty:l}),bodyStyle:u.addButtonContainer})})]})}function I(e){let{template:t,style:o}=e;const n=(0,r().Y0)(),a=(0,i().IS)((()=>({container:{...o,display:"flex",alignItems:"center",gap:12},textWrapper:{lineHeight:n.isMobile?"20px":"18px"},title:{fontSize:n.isMobile?16:13},caption:{fontSize:n.isMobile?14:12,overflow:"hidden",color:"gray",whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[n,o]),c=(0,x().getWorkflowTemplateName)(t),s=(0,l().Uy)(t);return(0,k.jsxs)("div",{style:a.container,children:[(0,k.jsx)(T().n,{template:t,backgroundSize:32}),(0,k.jsxs)("div",{style:a.textWrapper,children:[(0,k.jsx)("div",{style:a.title,children:c}),s&&(0,k.jsx)("div",{style:a.caption,children:s})]})]})}function j(e){let{template:t,startEmpty:o}=e;const n=(0,i().IS)((()=>({button:{width:"100%"}})),[]),l=(0,r().v3)(),d=(0,g().ET)(),p=(0,x().getWorkflowTemplateName)(t),m=c().mg(t);return o&&delete m.value.options,(0,k.jsx)(y().A,{style:n.button,size:"lg",onClick:()=>{u().createAndCommit({userAction:"WorkflowSettingsConfirmAddTemplate.addFeatureTemplateToTarget",environment:l,canUndo:!0,perform:e=>{const o=d.collectionStore();if(!o)throw new Error("collectionStore not found");h().ai({environment:l,transaction:e,collectionStore:o,template:m,logger:new(x().WorkflowTemplateLogger),origin:"suggested_feature"});const n=d.settingsStore;s().yl({collectionSettingsStore:n});const r=o.getWorkflowTemplateId();(0,v().u4)({environment:l,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:"suggested_properties",template_id_added:t.templateId,collection_template_id:r}}});const i=d.collectionViewStore();i&&(0,S().UD)({template:t,environment:l,collectionStore:o,collectionViewStore:i,collectionSettingsStore:n,collectionContextStore:d})}})},children:(0,k.jsx)(a().sA,{id:"workflowTemplateSettings.confirmAddTemplate.button",defaultMessage:"Add {templateName}",values:{templateName:p}})})}function A(e){return"property"===e.type&&("select"===e.value.type||"multi_select"===e.value.type)}},779698:(e,t,o)=>{o.d(t,{Ah:()=>g,Dk:()=>m,Iv:()=>f,SF:()=>y,YO:()=>S,_f:()=>b,c_:()=>d,dW:()=>h,gW:()=>p,sp:()=>_,vN:()=>v});o(610931),o(362833),o(725707),o(491955),o(771702),o(403517),o(113085);var n=()=>o(975392),r=()=>o(204132),i=()=>o(76394),l=()=>o(599932),a=()=>o(465546),c=()=>o(409211),s=()=>o(34662),u=()=>o(876988);function d(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:t})}function p(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:t})}function m(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:t})}function y(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:t})}function f(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:t})}function g(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:t})}function v(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:t})}function h(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:t})}function S(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:t})}function x(e){const{formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:n,getRecordModel:l,spaceId:c,value:s,featureGates:u}=e;if("formula"===s.type){if(!(0,i().O9)(s.value))return;const e=r().Q.unwrapOr(o.parseFormulaInputToAst(s.value),void 0);if(e){const r=o.addTypesToFormulaAST(e,{handleDataRequest:(0,a().zg)(l),spaceId:c,valueTypes:n,featureGates:u});return{...t.getFormulaAnalytics(e,{getRecordModel:l,typecheckContextValues:n}),formula_return_type:r.node.type,redacted_formula:t.getRedactedFormulaAsStringSync(e,{getRecordModel:l,typecheckContextValues:n})}}}else{if("simple"===s.type){if(!(0,i().O9)(s.value))return;return t.getSimpleFormulaAnalytics(s.value,{getRecordModel:l,typecheckContextValues:n})}(0,i().HB)(s.type)}}function b(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:r,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y,simpleFormulasModule:f}=e;return t.isType("complete_sprint")?{automation_action_id:t.pointer.id,type:"complete_sprint"}:t.isType("create_page")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:l,featureGates:a}=e,c=t.getConfig();let s,u=[];const d=null==c?void 0:c.collection,p=null==c?void 0:c.properties;if((0,i().O9)(d)&&(0,i().O9)(p)&&p.length>0){const e=l(d),y=null==e?void 0:e.getNormalizedSchema();(0,i().O9)(y)&&(u=p.map((e=>{var t;return(null===(t=y[e])||void 0===t?void 0:t.type)??"unknown"})));const f=null==c?void 0:c.values;if(n&&(0,i().O9)(f)){s=[];for(const e of p){var m;const i=null===(m=f[e])||void 0===m?void 0:m.value;if(!i)continue;const c=x({formulaAnalyticsModule:o,formulasModule:n,getRecordModel:l,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:i,featureGates:a});c&&s.push(c)}}}return{automation_action_id:t.pointer.id,property_formula_stats:s,property_types:u,type:"create_page"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y}):t.isType("duplicate_blocks")?{automation_action_id:t.pointer.id,type:"duplicate_blocks"}:t.isType("modal_confirmation")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:l,featureGates:a}=e,c=t.getConfig(),s=[];if(n&&(0,i().O9)(c)&&c.text){const e=x({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:l,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:c.text,featureGates:a});e&&s.push(e)}return{automation_action_id:t.pointer.id,formula_stats:s,type:"modal_confirmation"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y}):t.isType("open_page")?{automation_action_id:t.pointer.id,type:"open_page"}:t.isType("query_collection")?{automation_action_id:t.pointer.id,type:"query_collection"}:t.isType("send_in_app_notification")?function(e){var t;const{automationActionModel:o,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:l,getRecordModel:a,featureGates:c,simpleFormulasModule:u}=e,d={automation_action_id:o.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},p=o.getConfig();if(!(0,i().O9)(p))return d;if((0,i().O9)(p.target))if("formula"===p.target.type&&(0,i().O9)(p.target.value)){if(d.targetData={type:"formula",numUserFormulaTargets:(0,s().Fbh)(p.target.value.value).length,numFormulaContextTargets:u.getReferencedContextValueIds(p.target.value).length},r){const e=x({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:a,formulaTypecheckContextValues:l,spaceId:o.spaceId,value:p.target.value,featureGates:c});e&&(d.formula_stats??=[],d.formula_stats.push(e))}}else if("property"===p.target.type&&(0,i().O9)(p.target.propertyId)&&(0,i().O9)(p.target.collectionPointer)){const e=a(p.target.collectionPointer),t=null==e?void 0:e.getSchema();var m;(0,i().O9)(t)&&(d.targetData={type:"property",propertyType:null===(m=t[p.target.propertyId])||void 0===m?void 0:m.type})}if((0,i().O9)(null===(t=p.notification_message)||void 0===t?void 0:t.value)&&(d.messageCharacterCount=(0,s().FAw)(p.notification_message.value),r)){const e=x({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:a,formulaTypecheckContextValues:l,spaceId:o.spaceId,value:p.notification_message,featureGates:c});e&&(d.formula_stats??=[],d.formula_stats.push(e))}return d}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y,simpleFormulasModule:f}):t.isType("send_gmail_notification")?function(e){var t,o,r,a,u,d,p;const{automationActionModel:m,formulaAnalyticsModule:y,formulasModule:f,formulaTypecheckContextValues:g,getRecordModel:v,featureGates:h}=e,S=m.getConfig();if(!(0,i().O9)(S))return{automation_action_id:m.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const b=Object.fromEntries(Object.entries(S||{}).map((e=>{let[t,o]=e;var n;return"formula"===(null==o?void 0:o.type)?[t,Boolean(null==o||null===(n=o.value)||void 0===n?void 0:n.value)]:"simple"===(null==o?void 0:o.type)?[t,Boolean(null==o?void 0:o.value)]:[t,Boolean(o)]}))),{to:_,cc:k,bcc:w}=S,C=[...(null==_||null===(t=_.value)||void 0===t?void 0:t.value)||[],...(null==k||null===(o=k.value)||void 0===o?void 0:o.value)||[],...(null==w||null===(r=w.value)||void 0===r?void 0:r.value)||[]],T=[...(0,s().Fbh)(C).map((e=>v({table:c().oo,id:e}))).map((e=>null==e?void 0:e.email)).filter(i().O9),...(0,l().C3)((0,s().k4p)(C))],M=n().Tr(T.map((e=>e.split("@")[1]))),I=[null===(a=S.to)||void 0===a?void 0:a.value,null===(u=S.cc)||void 0===u?void 0:u.value,null===(d=S.bcc)||void 0===d?void 0:d.value,null===(p=S.reply_to)||void 0===p?void 0:p.value,S.from_name,S.email_subject,S.email_body].map((e=>{if(f&&(0,i().O9)(e))return x({formulaAnalyticsModule:y,formulasModule:f,getRecordModel:v,formulaTypecheckContextValues:g,spaceId:m.spaceId,value:e,featureGates:h})})).filter(i().O9);return{automation_action_id:m.pointer.id,fields:b,formula_stats:I,recipient_domains:M,type:"send_gmail_notification"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y}):t.isType("slack_notification")?{automation_action_id:t.pointer.id,type:"slack_notification"}:t.isType("update_pages")?function(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:l,getRecordModel:c,featureGates:s}=e,d=t.getConfig(),p=[],m=[],y=[];if((0,i().O9)(d)&&(0,i().O9)(d.target)&&(0,i().O9)(d.properties)&&d.properties.length>0){let e;if("variable"===d.target.type){const t=(0,a().y5)(d.target.id);if("action"===t.source){const t=(0,u().y)({actionModels:o,id:d.target.id}).collectionPointer;if((0,i().O9)(t)){const o=c(t);e=null==o?void 0:o.getNormalizedSchema()}}else{if("global"!==t.source||"button_page"!==t.global)throw new Error("Failed loading property schema");{const t=(0,a().IV)(l,d.target.id);if("block"===(null==t?void 0:t.type.type)&&(0,i().O9)(t.type.collection)){const o=c(t.type.collection);e=null==o?void 0:o.getNormalizedSchema()}}}}else if("collection"===d.target.type){const t=c(d.target.collection);e=null==t?void 0:t.getNormalizedSchema()}(0,i().O9)(e)&&d.properties.forEach((o=>{const a=e[o];if((0,i().O9)(a)&&(p.push(a.type),r&&(0,i().O9)(d.values))){const e=d.values[o];if((0,i().O9)(e)&&(m.push({type:a.type,operator:e.action}),e.value)){const o=x({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:c,formulaTypecheckContextValues:l,spaceId:t.spaceId,value:e.value,featureGates:s});o&&y.push(o)}}}))}return{automation_action_id:t.pointer.id,property_configs:m,property_formula_stats:y,property_types:p,type:"update_pages"}}({automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:r,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y}):t.isType("define_variables")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:l,featureGates:a}=e,c=t.getConfig(),s=[];if(n&&(0,i().O9)(c)&&c.values)for(const i of Object.values(c.values))if(i.value){const e=x({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:l,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:i.value,featureGates:a});e&&s.push(e)}return{automation_action_id:t.pointer.id,formula_stats:s,type:"define_variables"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:y}):t.isType("http_request")?{automation_action_id:t.pointer.id,type:"http_request"}:t.isType("publish_site")?{automation_action_id:t.pointer.id,type:"publish_site"}:void(0,i().HB)(t)}function _(e){const{automationModel:t,builderType:o="sidebar",formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:l,getRecordModel:a,featureGates:c,simpleFormulasModule:s,source:u}=e,d=[],p=t.getActionPointers().map((e=>a(e))).filter(i().O9);for(const S of t.getActionPointers()){const e=a(S);(0,i().O9)(e)&&d.push(b({automationActionModel:e,automationActionModels:p,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:l,getRecordModel:a,featureGates:c,simpleFormulasModule:s}))}const m=[];let y,f,g;if(t.isEventType()){var v;const e=t.getEventConfiguration(),o=a(t.getParentPointer());y=t.getParentId();const n=t.getEventConfiguration();if("collection_view"===(null===(v=n.source)||void 0===v?void 0:v.type)){const e=a(n.source.pointer);g=null==e?void 0:e.parent_id,f=null==n?void 0:n.source.pointer.id}const r=null==o?void 0:o.getNormalizedSchema();if((0,i().O9)(r)){const{pagesAdded:t,pagePropertiesEdited:o}=e;if(t&&m.push({type:"page"}),"any"===o.type)m.push({condition:"any",type:"property"});else if("none"===o.type)m.push({condition:"none",type:"property"});else{let e=[];"some"===o.type?e=o.some??[]:"all"===o.type&&(e=o.all??[]);const t=[],n=[];e.forEach((e=>{var o;const l=null===(o=r[e.property])||void 0===o?void 0:o.type;(0,i().O9)(l)&&(t.push({type:l,operator:e.filter.operator}),n.push(l))})),m.push({condition:o.type,property_configs:t,property_types:n,type:"property"})}}}else if(t.isButtonType())m.push({type:"button"});else if(t.isRecurrenceType()){var h;m.push({type:"recurrence",frequency:null===(h=t.getTrigger().recurrence)||void 0===h?void 0:h.frequency})}else(0,i().HB)(t);return{automation_actions:d,automation_id:t.id,automation_triggers:m,collection_id:y,collection_view_id:f,collection_view_block_id:g,builder_type:o,source:u}}},837809:(e,t,o)=>{o.d(t,{O:()=>s,q:()=>u});o(242343);var n=()=>o(174114),r=()=>o(220413),i=()=>o(31448),l=()=>o(826033),a=()=>o(809785),c=o(163643);function s(e){const{value:t,color:o,format:s,showEllipsis:u,onClickRemove:d,showRemoveButton:p,isSingle:m,shouldShrink:y,hideTooltip:f,description:g,tooltipPlacement:v,...h}=e,S=(0,n().DP)(),x=(0,n().IS)((e=>({token:{...u&&i().RC}})),[u]),{textColor:b,backgroundColor:_}=(0,r().LD)(S,o);return t?(0,c.jsx)(a().A,{format:s,value:(0,c.jsx)(l().A,{children:t}),description:g,onClickRemove:d,showRemoveButton:p,isSingle:m,color:b,backgroundColor:_,shouldShrink:y,tooltipPlacement:v,showTooltip:f?"never":"overflow",style:x.token,...h}):null}function u(e){const{value:t,color:o,format:s,showEllipsis:u,onClickRemove:d,showRemoveButton:p,isSingle:m,shouldShrink:y,groupColor:f,tooltipPlacement:g,description:v,hideTooltip:h,...S}=e,x=(0,n().DP)(),b=(0,n().IS)((()=>({token:{...u&&i().RC}})),[u]);if(!t)return null;const{textColor:_,backgroundColor:k}=(0,r().LD)(x,o??f??"gray");let w;return w=o||(f||"gray"),(0,c.jsx)(a().A,{format:s,value:(0,c.jsx)(l().A,{children:t}),description:v,onClickRemove:d,showRemoveButton:p,isSingle:m,color:_,backgroundColor:k,shouldShrink:y,showTooltip:h?"never":"overflow",style:b.token,isRound:!0,showColoredDot:w,tooltipPlacement:g,...S})}},855470:(e,t,o)=>{o.d(t,{V:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("chevronRight",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})},876988:(e,t,o)=>{o.d(t,{y:()=>i});o(725707),o(500234);var n=()=>o(76394),r=()=>o(465546);function i(e){var t;const{actionModels:o,id:i}=e,l=(0,r().y5)(i),a="action"===l.source?o.find((e=>e.id===l.action_id)):void 0,c=(0,n().O9)(a)&&a.isType("create_page")?null===(t=a.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:l,collectionPointer:c,actionModel:a}}},887508:(e,t,o)=>{o.d(t,{v:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("arrowLeftThick",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},911575:(e,t,o)=>{o.d(t,{$0:()=>g,Fx:()=>k,Ge:()=>m,I3:()=>d,Kj:()=>b,PP:()=>w,TK:()=>C,Yy:()=>u,aE:()=>T,cQ:()=>_,kH:()=>y,m7:()=>p,nq:()=>S,nv:()=>v,tj:()=>f});o(725707),o(491955),o(113085);var n=()=>o(975392),r=()=>o(76394),i=()=>o(564134),l=()=>o(810111),a=()=>o(479056),c=()=>o(875089);(0,r().u0)((e=>(0,r().O9)(e)&&(0,r().O9)(e.target)&&(0,r().O9)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target,custom_message:e.custom_message}}:{false:e}));const s={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1},u={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function d(e){return Boolean(s[e.type]&&!(0,i().UU)(e)&&(!(0,i().$M)(e)||void 0===(0,i().om)(e)))}function p(e){const{collectionFormat:t,collectionSchema:o,filter:a,sort:s,sourcePropertyIds:u}=e,p=(u??(0,r().uv)(o)).filter(((t,n,r)=>{const l=o[t];return!(!l||!d(l))&&(("relation"!==l.type||!e.restrictCrossSpace||!(0,i().o2)(e.spaceId,l))&&(!a||a([t,l],n,o)))}));if(0===p.length)return[];if(!t||!1===s)return p;const m=(0,c().L)(t,o,void 0,l().jf.Page).collection_page_properties||[];return n().Ul(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:o,sort:a}=e,s=(0,r().uv)(o).filter(((e,t,n)=>{const r=o[e];return!(!r||!(0,i().JY)(r))}));if(0===s.length)return[];if(!t||!1===a)return s;const u=(0,c().L)(t,o,void 0,l().jf.Page).collection_page_properties||[];return n().Ul(s,(e=>u.findIndex((t=>t.property===e))))}function y(e){return e.type===a().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===a().M9.TokenExpected?{type:e.type,token:e.token}:e.type===a().uW.MissingSchemaPropertyOnThisRow||e.type===a().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===a().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===a().uW.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===a().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===a().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===a().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===a().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node}:e.type===a().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===a().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===a().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===a().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===a().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===a().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const f={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,geo_point:!1};function g(e){return Boolean(f[e.type])}function v(e){const{collectionFormat:t,collectionSchema:o,filter:a,sort:s}=e,u=(0,r().uv)(o).filter(((e,t,n)=>{var r;const l=o[e];return!(!l||!f[l.type])&&((!(0,i().$M)(l)||null===(r=(0,i().om)(l))||void 0===r||!r.auto_update_on_edit)&&(!a||a([e,l],t,o)))}));if(0===u.length)return[];if(!t||!1===s)return u;const d=(0,c().L)(t,o,void 0,l().jf.Page).collection_page_properties||[];return n().Ul(u,(e=>d.findIndex((t=>t.property===e))))}const h={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function S(e){return h[e.type]}const x={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function b(e){return x[e.type]}function _(e){return 0===e}function k(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function w(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function C(e){const{collectionSchema:t,property:o,type:n}=e,r=null==t?void 0:t[o];return!r||("action"===n?!d(r):!f[r.type])}function T(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:n,source:i,relativeDate:l}=t.event;if(void 0===i)return!1;const a="some"===n.type&&n.some,c="all"===n.type&&n.all;if((a||c||[]).some((e=>w({collectionSchema:o,property:e.property})||C({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const s="some"===n.type&&(!(0,r().O9)(n.some)||0===n.some.length),u="all"===n.type&&(!(0,r().O9)(n.all)||0===n.all.length);if(!e&&("none"===n.type||s||u)&&!l)return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},921734:(e,t,o)=>{o.d(t,{_:()=>l});o(242343);var n=()=>o(174114),r=()=>o(855470),i=o(163643);function l(){const e=(0,n().IS)((e=>({icon:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out"}})),[]);return(0,i.jsx)(i.Fragment,{children:(0,r().V)(e.icon)})}},948120:(e,t,o)=>{o.d(t,{A:()=>r});o(242343);var n=o(163643);const r=function(e){let{switcherProps:t,...r}=e;return(0,n.jsx)(o(44405).A,{right:(0,n.jsx)(o(431551).A,{onClick:r.onClick,disabled:r.disabled,...t}),...r})}},963644:(e,t,o)=>{o.d(t,{i:()=>i});var n=()=>o(876695),r=()=>o(658294);function i(e){const{environment:t,collectionContextStore:o,property_type:i,from:l,property:a,...c}=e,s=(0,n().sl)(o)||{};(0,r().G)(t,{property:a,property_type:i,from:l,...c,...s})}},994488:(e,t,o)=>{o.d(t,{o:()=>n});o(362833),o(403517);function n(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];if(0===o.length)return e.map((e=>[e]));const i=[];for(const l of e)i.push(...n(o[0],...o.slice(1)).map((e=>[l,...e])));return i}}}]);