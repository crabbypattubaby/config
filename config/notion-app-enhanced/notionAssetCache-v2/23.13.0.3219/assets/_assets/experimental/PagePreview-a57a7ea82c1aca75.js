"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[97134],{301819:(e,t,i)=>{function r(e){const t=e.getSchema();if(t)for(const[r,o]of Object.entries(t)){var i;if(o&&"text"===o.type&&"summarize"===(null===(i=o.ai_inference)||void 0===i?void 0:i.type)){const t=e.getPropertyValue(r);if(t)return t}}}i.d(t,{E:()=>r})},615612:(e,t,i)=>{i.r(t),i.d(t,{PagePreview:()=>O});var r=i.n(i(309102)),o=(i(242343),()=>i(237385)),n=()=>i(556078),s=()=>i(803290),a=()=>i(174114),l=()=>i(712437),c=()=>i(277264),d=()=>i(34662),u=()=>i(123047),g=()=>i(653998),p=()=>i(31448),h=()=>i(759625),f=()=>i(84543),x=()=>i(29869),m=()=>i(378219),y=()=>i(352723),b=()=>i(622163),v=()=>i(838517),S=()=>i(622286),k=()=>i(907721),j=()=>i(485966),w=()=>i(236631),I=()=>i(141122),P=()=>i(413871),A=()=>i(931085),C=()=>i(28210),T=()=>i(989372),K=()=>i(709237),B=()=>i(103151),R=()=>i(610271),D=()=>i(180365),E=()=>i(301819),z=()=>i(579439),_=i(163643);const L=20;function W(e){const{store:t}=e,i=(0,a().IS)((e=>({summary:{fontSize:13,fontWeight:p().Wy.regular,lineHeight:"17px",letterSpacing:"-0.078px",...(0,b().pA)(3)}})),[]),r=(0,s().K8)((()=>E().E(t)),[t]);return r&&d().FAw(r)>=L?(0,_.jsx)("div",{children:(0,_.jsx)("div",{style:i.summary,children:(0,_.jsx)(z().A,{textValue:r,parentStore:t})})}):null}function O(e){const{store:t,onClick:i}=e,n=(0,a().DP)(),h=(0,g().tz)(),{WindowSizeStore:f}=(0,o().v3)(),y=(0,S().X)("enable_deleted_page_indicator"),k=(0,s().K8)((()=>t.getCover()),[t]),C=(0,s().K8)((()=>t.inMemoryRecordCache.isTemporaryData),[t]),B=(0,s().K8)((()=>{const e=m().ze(t);return y&&e}),[y,t]),E=(0,s().K8)((()=>{const e=w().qu.state;if(!e)return!1;return(0,d().q4_)(t.getTitleValue()).toLowerCase().includes(e.toLowerCase())}),[t]),z=(0,s().K8)((()=>{const e=w().wb.state;return!!e&&("block"===e.type&&e.id===t.id)}),[t.id]),L=(0,v().i0)(t)&&!C,O=(0,o().Y0)(),M=(0,a().IS)((e=>({blockBackground:{background:"light"===e.mode?void 0:e.cardBackground},title:{fontWeight:p().Wy.medium,fontSize:O.isMobile?p().J.UIRegular.mobile:p().J.UIRegular.desktop,lineHeight:1.3,...B&&{color:e.text.secondary},...(0,b().pA)(2)},cover:{display:"flex",alignItems:"flex-start",flexDirection:"column",borderRadius:"var(--radius-medium, 8px)",border:`1px solid ${e.darkDividerColor}`},coverContainer:{height:62,alignSelf:"stretch",borderTopLeftRadius:7,borderTopRightRadius:7,overflow:"hidden"},breadcrumb:{color:e.text.secondary,fontSize:11,marginBottom:-2,...p().RC},content:{display:"flex",padding:"0px 16px 12px 16px",flexDirection:"column",alignItems:"flex-start"}})),[B,O]),H=(0,s().K8)((()=>(0,x().J8)({store:t,fullyQualified:!1,pageVisitSource:l().y8.LinkInPage})),[t]),J=(0,s().K8)((()=>(0,x().J8)({store:e.store,openInSidePeek:!0,fullyQualified:!1,pageVisitSource:l().y8.PeekOpen})),[e.store]),N=(0,s().K8)((()=>I().default.isSidePeekOpen()),[]),Q=(0,s().K8)((()=>f.state.width),[f]),{currentBlockStore:U}=(0,s().K8)((()=>{const e=j().default.state.currentSpaceStore;if(!e)return{currentBlockStore:void 0};const i=P().Bv.createChildStore(e,{id:t.id,table:"block"});if(i.isNavigableBlock()){return{currentBlockStore:i.getNavigableBlockStore()}}return i.isDefined()?{currentStore:i}:{currentBlockStore:void 0}}),[t]),{content:q}=(0,s().K8)((()=>{if(!U)return{content:null};return{content:U.isEmptyPage()?void 0:(0,_.jsx)(W,{store:U})}}),[U]),Y=(0,s().K8)((()=>(0,T().a6)(t)),[t]);return(0,_.jsx)(A().A,{href:H,altHref:J,forceAltHref:N,external:!1,onClick:i,style:{borderRadius:8,...e.style,...M.blockBackground},children:(0,_.jsxs)("div",{style:M.cover,children:[k&&(0,_.jsx)("div",{style:M.coverContainer,children:(0,_.jsx)(D().A,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:62,proxyWidth:Q})}),(0,_.jsxs)("div",{style:{display:"flex",flexDirection:k||Y?"column":"row",alignItems:k||Y?void 0:"center",width:"100%",paddingTop:k?0:10},children:[(0,_.jsxs)("div",{style:{flexDirection:"row",paddingTop:4},children:[(0,_.jsx)(V,{store:e.store,disabled:!0,isAlias:e.isAlias,showDeletedPageIndicator:B,cover:!!k}),(0,_.jsx)(c().A,{theme:n,intl:h,isPageInTrash:L})]}),(0,_.jsxs)(R().wt,{gap:q?4:0,style:M.content,children:[(0,_.jsxs)(R().wt,{gap:2,style:{width:"100%",...(0,b().pA)(2)},children:[(0,_.jsx)(T().Ay,{store:t,innerStyle:M.breadcrumb}),(0,_.jsx)("div",{style:{overflow:"auto",...E&&(0,u().G3)({theme:n,isSelectedMatch:z})},className:r()(z&&u().wT),children:(0,_.jsx)(K().A,{shouldWrap:!0,maxLines:2,store:t,style:M.title})})]}),q]})]})]})})}function M(e){let{store:t,disabled:i}=e;const r=(0,n().S)(),a=(0,o().v3)(),{icon:l,role:c,isEmptyPage:d,type:u}=(0,s().K8)((()=>({icon:t.getIcon(),role:t.getRole(),isEmptyPage:t.isEmptyPage(),type:t.getType()})),[t]),p=(0,s().K8)((()=>function(e,t,i){const r=i&&i.publicEditModeStore.state;return!(0,y().QT)(r)&&e.canEdit()&&!t}(t,i,r)),[i,r,t]);return(0,_.jsx)(B().A,{renderTooltip:()=>(0,_.jsx)(g().sA,{defaultMessage:"Change icon",id:"page.changeIcon.tooltip"}),placement:k().W.Top,disableTooltip:i||!p,render:e=>i||!p?(0,_.jsx)(C().B,{disabled:!0,icon:l,isEmptyPage:d,role:c,size:28,style:{width:"100%",height:"100%"},...e,largeIcon:!0}):(0,_.jsx)(C().B,{disabled:!1,bucket:"secure",store:t,icon:l,role:c,isEmptyPage:d,size:28,style:{width:"100%",height:"100%"},iconLoggingData:{recordTable:t.table,source:"subpage",block_type:u},onChange:e=>function(e,t,i){const r=t.getIconStore();r&&f().createAndCommit({userAction:"Page.handleRecordIconChange",environment:i,canUndo:!0,perform:t=>{h().KY({store:r,value:e,transaction:t})}})}(e,t,a),...e,largeIcon:!0})})}function V(e){let{showDeletedPageIndicator:t,store:i,disabled:r,isAlias:n,cover:s}=e;const l=(0,a().DP)(),c=(0,o().v3)();if(t){const e=c.device.isSafari||c.device.isIOS;return(0,u()._e)({isSafariOrIOS:e,theme:l})}return(0,_.jsx)("div",{style:{position:"relative",width:24,height:24,marginRight:4,marginLeft:16,marginTop:s?-15:4,marginBottom:8},children:(0,_.jsx)(M,{store:i,disabled:r})})}}}]);