(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[62427,90871],{26788:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(362833),n(333225),n(494367),n(516262),n(573119),n(240480),n(950443),n(619601),n(725707),n(491955),n(403517);var o=n(242343);const i=function(e,t){if(e.ref&&t.ref){const n=t.ref;t.ref=t=>{e.ref(t),n(t)}}return o.cloneElement(e,t)};var r=n(163643);const s=function(e){const[t,s]=(0,o.useState)([]),{render:a}=e,l=(0,n(803290).K8)((()=>a()),[a]),c=(0,o.useMemo)((()=>new Set(l.map((e=>e.key)))),[l]),d=(0,n(951592).ZC)(l);if(d){const e=[],n=new Set(t.map((e=>e.key)));for(const t of d)if(!c.has(t.key)&&!n.has(t.key)){const n={visible:!1,onAnimationEnd:()=>{s((e=>e.filter((e=>e.key!==o.key))))}},o=i(t,n);e.push(o)}e.length>0&&s((t=>[...t,...e]))}const u=t.filter((e=>!c.has(e.key))).concat(l);return(0,r.jsx)("div",{className:e.className,children:u})}},35630:(e,t,n)=>{"use strict";n.d(t,{$:()=>C,b:()=>A});n(725707),n(244387),n(242343);var o=()=>n(16791),i=()=>n(237385),r=()=>n(803290),s=()=>n(174114),a=()=>n(950635),l=()=>n(846581),c=()=>n(653998),d=()=>n(225679),u=()=>n(654548),m=()=>n(477784),p=()=>n(622286),g=()=>n(907721),f=()=>n(73758),v=()=>n(932322),b=()=>n(88271),h=()=>n(103151),y=()=>n(35462),S=()=>n(594184),x=n(163643);function C(e){let{isPageMoreButton:t,hideTopBorder:n,store:o,wordCountStores:l,showWordCount:d}=e;const u=(0,r().K8)((()=>A(o)),[o]),{device:p}=(0,i().v3)(),C=(0,r().K8)((()=>p.isPhone),[p]),w=m().A.getIntl(),k=(0,s().IS)((()=>({menuItem:{paddingTop:C?8:n?0:6,paddingBottom:C?8:16}})),[n,C]);return u&&!u.canAccess?null:(0,x.jsx)(b().A,{topBorder:!t&&!n,style:{paddingTop:t?0:8,paddingBottom:t?0:8},children:(0,x.jsx)(v().Ay,{style:u?void 0:k.menuItem,shouldWrapTitle:!0,title:u?(0,x.jsx)(h().A,{placement:g().W.Right,render:e=>(0,x.jsxs)("div",{...e,children:[d&&(0,x.jsx)(y().A,{isSmall:!0,isSecondaryColor:!0,isMobile:p.isPhone,isMultiline:!0,style:{marginBottom:4,marginTop:8},children:(0,x.jsx)(c().sA,{id:"pageMoreButton.wordCount.caption",defaultMessage:"Word count: {count}",values:{count:(0,x.jsx)(S().A,{store:o})}})}),l&&(0,x.jsx)(M,{stores:l}),(0,x.jsx)(y().A,{isSmall:!0,isSecondaryColor:!0,isMobile:p.isPhone,isMultiline:!0,style:{marginBottom:4},children:(0,x.jsx)(c().sA,{id:"blockAuthorInfo.label",defaultMessage:"Last edited by {author}",values:{author:u.lastEditedBy.asActor?(0,a().lR)(w,u.lastEditedBy):void 0}})}),(0,x.jsx)(y().A,{isSmall:!0,isSecondaryColor:!0,isMobile:p.isPhone,style:{marginBottom:d?8:0},children:u.lastEditedTime})]}),renderTooltip:()=>(0,x.jsx)(f().A,{store:o,compactFormat:!0})}):void 0,loading:!u})})}function A(e){const t=e.getCreatedByPointer(),n=e.getCreatedTime(),i=e.getLastEditedByPointer(),r=e.getLastEditedTime(),s=m().A.getIntl();if(!e.canRead())return{canAccess:!1};if(t&&n&&r&&i){const a=(0,d().vt)({parentStore:e,pointer:t}),c=(0,l().jE)(n,o().locale,s),u=(0,d().vt)({parentStore:e,pointer:i}),m=(0,l().jE)(r,o().locale,s);if(!u)return;return{canAccess:!0,createdBy:a,createdTime:c,lastEditedBy:u,lastEditedTime:m}}}function M(e){const{stores:t}=e,n=(0,p().X)("selectable_word_count"),o=(0,r().K8)((()=>n?w(t):0),[n,t]);return n?(0,x.jsx)(y().A,{isSmall:!0,isSecondaryColor:!0,style:{marginBottom:4},children:(0,x.jsx)(c().sA,{id:"blockMetadataMenuItem.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:o}})}):null}function w(e){return e.reduce(((e,t)=>{const n=(0,u().r4)(t.getTitleValue(),t);return e+(0,u().sQ)(n)+w(t.getContentStores())}),0)}},44250:(e,t,n)=>{"use strict";function o(e){return!(!e||"askUserToPick"in e)}function i(e){if(!e||!("askUserToPick"in e))return e}function r(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}n.d(t,{DK:()=>i,K$:()=>o,j6:()=>r})},50081:(e,t,n)=>{"use strict";n.d(t,{M5:()=>K,CX:()=>H});n(725707),n(500234),n(324989),n(403517);var o=n(242343),i=()=>n(237385),r=()=>n(803290),s=()=>n(174114),a=()=>n(762847),l=()=>n(695387),c=()=>n(615917),d=()=>n(26788),u=()=>n(782422),m=()=>n(302376),p=()=>n(915821),g=()=>n(378219),f=()=>n(244563),v=()=>n(96297),b=()=>n(548694),h=()=>n(37394),y=()=>n(286555),S=()=>n(799220),x=()=>n(332284),C=()=>n(105157),A=()=>n(486905),M=(n(358848),n(91270),()=>n(401548)),w=()=>n(220413),k=()=>n(565577),T=()=>n(836331);var j=n(163643);const B=new Map([[a().xd.toggle,28],[a().xd.header,28],[a().xd.subHeader,28],[a().xd.subSubHeader,28],[a().xd.toDo,28],[a().xd.bulletedList,28],[a().xd.numberedList,28],[a().xd.text,24]]),R=new Map([[a().xd.image,-2]]),P=(0,o.forwardRef)((function(e,t){const{store:a,selectable:l,insertionLocation:c,state:d,nodeRect:u,containerRect:m}=e,p=(0,i().v3)(),g=(0,i().WS)(),f=(0,n(556078).S)(),v=(0,r().K8)((()=>C().default.state.selectableRectMap.get(l)),[l]),b=(0,r().K8)((()=>A().TH({environment:p,store:a,selectableBoundingRect:v})),[p,a,v]),h=(0,r().K8)((()=>!(null!=f&&f.publicEditModeStore.state.hasPublicPermission)&&("editor"===a.getRole()||"read_and_write"===a.getRole())||"edit"===(null==f?void 0:f.publicEditModeStore.state.permission)),[null==f?void 0:f.publicEditModeStore,a]),y=(0,r().K8)((()=>{var e,t;return"comment_only"===(null===(e=a.getNavigableBlockStore({skipCurrent:!0}))||void 0===e?void 0:e.getRole())||"comment"===(null==f||null===(t=f.publicEditModeStore.state)||void 0===t?void 0:t.permission)}),[null==f?void 0:f.publicEditModeStore,a]),S=(0,r().K8)((()=>"suggest"===n(615661).Uv.getMode(a)),[a]),P=(0,r().K8)((()=>a.isFirstBlockInCalloutV2Block()),[a]),I=(0,r().K8)((()=>{var e;const t="external_object_instance_page"===a.getType(),o=f&&(0,n(520969).Nh)(f.pageStore.id);return!g&&(!a.isNavigableAncestorNonEditableState()||"collection"===(null===(e=a.getParentStore())||void 0===e?void 0:e.table))&&(h||y&&S)&&!t&&!a.isNavigableAncestorExternallyImportedPage()&&!o&&!P&&v}),[y,h,P,g,S,f,v,a]),[_,D]=(0,o.useState)(!1),H=(0,r().K8)((()=>{var e;return a.id===(null===(e=a.getNavigableBlockStore())||void 0===e?void 0:e.getContentIds().at(-1))}),[a]),E=(0,r().K8)((()=>{if(!v)return 0;if("above"===c){if(T().default.checkGate({gateName:"selectable_top_margin"})){return-12-A().mC(l)/2-2}return-14}{const e=v.height-12;return H?e+12:e}}),[c,H,l,v]),K=(0,r().K8)((()=>{if(!v)return 0;if("above"===c){if(T().default.checkGate({gateName:"selectable_top_margin"})){const e=A().mC(l);return-.5*Math.max(3,e)-3}return-3.5}{const e=v.height-1.5;return H?e+12:e}}),[c,H,l,v]),{indentHintSize:z,additionalHorizontalPadding:V,additionalVerticalPadding:L}=(0,r().K8)((()=>{var e,t,o;const i=null==a?void 0:a.getRecordStoreUIParent();if(i instanceof n(413871).Bv&&["collection_view","collection_view_page"].includes(i.getType())){const e=(0,n(155297).cf)({userId:p.currentUser.id,viewBlockId:i.id}),t=i.getCollectionViewStores().find((t=>t.id===e));if(t){if("table"===t.getType())return{indentHintSize:0,additionalHorizontalPadding:5,additionalVerticalPadding:1}}}const r=null===(e=a.getParentBlockStore())||void 0===e?void 0:e.getType(),s=a.getType(),l=s?R.get(s)??0:0;if(!r)return{indentHintSize:void 0,additionalHorizontalPadding:0,additionalVerticalPadding:l};const d=null===(t=a.getParentBlockStore())||void 0===t?void 0:t.getContentIds(),u=a.id===(null==d?void 0:d[0]),m=a.id===(null==d?void 0:d.at(-1)),g=(()=>{if(a.isTransclusionType()||a.isInsideTransclusion())return 5;const e=a.getNumberOfDuplicateBlocksAncestors();return e>0?n(711907).t*e:0})(),f=(null===(o=a.getParentBlockStore())||void 0===o?void 0:o.getParentTable())===n(385649).SC;return u&&!f||m&&"below"===c?{indentHintSize:B.get(r),additionalHorizontalPadding:g,additionalVerticalPadding:l}:{indentHintSize:void 0,additionalHorizontalPadding:g,additionalVerticalPadding:l}}),[c,a,p.currentUser.id]),{left:F,positioningAdjustment:N}=(0,r().K8)((()=>{const e=A().KG({store:a,selectableBoundingRect:v,containerWidth:b});return void 0!==z?{left:26+z+V-e,positioningAdjustment:e}:{left:26+V-e,positioningAdjustment:e}}),[z,V,a,v,b]),W=(0,r().K8)((()=>{const e=function(e){var t;const n=e.getParentBlockStore(),o=null==n?void 0:n.getType(),i=null===(t=e.getParentBlockStore())||void 0===t?void 0:t.getContentIds();if(e.id!==(null==i?void 0:i[0]))return!1;switch(o){case"bulleted_list":case"toggle":case"to_do":case"numbered_list":return!0;default:return!1}}(a),t=a.getParentBlockStore();return e&&t?(0,k().j)(t):(0,k().j)(a)}),[a]),U=((null==u?void 0:u.left)??0)-((null==m?void 0:m.left)??0),O=(0,s().IS)((e=>{const t={position:"absolute",top:K+L,height:3,transition:"0.15s",left:U-N},o=function(e){const{blockBackgroundColor:t,theme:n}=e,o=(0,w().k5)(t,n);return o&&o.background?(0,M().X4)(o.background,.66):(0,M().X4)(n.contentBackground,.66)}({blockBackgroundColor:W,theme:e});return{plusIconStyles:{width:16,...(0,n(444633).Cz)(e,_)},buttonStyles:{position:"absolute",top:E+L,left:U-F,width:24,height:24,display:"flex",justifyContent:"center",borderRadius:3,backdropFilter:"blur(4px)",background:o},buttonHoveredStyles:{backdropFilter:"blur(4px)",background:(0,w().Qr)([e.buttonHoveredBackground,o])},lineStyles:{...t,width:b?`${b}px`:void 0,background:_?(0,M().X4)(e.icon.secondary,.4):"transparent"},lighterLineStyles:void 0!==z?{...t,width:b?z-2+"px":void 0,background:_?(0,M().X4)(e.icon.secondary,.4):"transparent",left:-z+N}:{},mediumColorStyle:{color:e.text.contrastSecondary}}}),[_,E,F,K,z,L,b,N,W,U]);return I?(0,j.jsx)(n(103151).A,{placement:n(907721).W.Bottom,delayThreshold:n(105886).q,renderTooltip:function(){return(0,j.jsx)("div",{style:{textAlign:"center"},children:(0,j.jsx)(n(653998).sA,{defaultMessage:"Click <mediumcolor>to add block</mediumcolor>",id:"block.InterBlockAddButton.tooltip.addBlock",values:{mediumcolor:e=>(0,j.jsx)("span",{style:O.mediumColorStyle,children:e})}})})},render:e=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n(126451).A,{ref:t,style:O.buttonStyles,hoveredStyle:O.buttonHoveredStyles,onClick:()=>{(0,n(820740).yO)(p,a,c)},onMouseEnter:t=>{var n;D(!0),x().default.setState({...d,isHoveringPlusButton:!0}),null===(n=e.onMouseEnter)||void 0===n||n.call(e,t)},onMouseLeave:t=>{var n;D(!1),x().default.setState({...d,isHoveringPlusButton:!1}),null===(n=e.onMouseLeave)||void 0===n||n.call(e,t)},children:(0,n(339189).W)(O.plusIconStyles)}),(0,j.jsx)("div",{style:O.lighterLineStyles}),(0,j.jsx)("div",{style:O.lineStyles}),void 0!==z&&(0,j.jsx)("div",{style:O.lineStyles})]})}):(x().default.setState({...d,isPlusButtonVisible:!1}),null)}));var I=()=>n(593085),_=()=>n(537846);const D=[a().xd.page,a().xd.callout,a().xd.column,a().xd.transclusionContainer];function H(e){var t;const n=(0,i().v3)(),{container:a,state:C}=e,A=(0,r().K8)((()=>(0,b().s7)(n)),[n]),M=(0,o.useRef)(null),w=(0,o.useRef)(void 0),{targetSelectable:k,icon:T}=(0,r().K8)((()=>function(e,t,n){const{mouseX:o,mouseY:i}=n;if(e.current&&y().ux(e.current.getBoundingClientRect(),o,i)&&t.current)return t.current;for(const c of n.nearbySelectables){const e=c.selectable;if("top-left-corner"===c.hoveredRegion||"above-content"===c.hoveredRegion){const n={targetSelectable:e,icon:"plus_above"};return t.current=n,n}if("bottom-left-corner"===c.hoveredRegion||"below-content"===c.hoveredRegion){var r;const n=null===(r=e.props.store.getParentBlockStore())||void 0===r?void 0:r.getType();if(n&&D.includes(n)&&e.props.isLastItem){const n={targetSelectable:e,icon:"plus_below"};return t.current=n,n}}}const s=n.currentStore,a=s&&h().T.findSelectablesFromStore(s).find((e=>Boolean(e.props.shouldShowHoverMenu||e.props.shouldShowCommentMenu)));if(!a)return{targetSelectable:void 0,icon:void 0};const l={targetSelectable:a,icon:x().default.isRightMarginCommentHovered()?"comment":"6-dot"};return t.current=l,l}(M,w,C)),[C]),B=null==k?void 0:k.props.store,R=(0,r().K8)((()=>u().ZT(n)),[n]),H=(0,o.useMemo)((()=>{var e;const t=null==R||null===(e=R.getContentWrapEl())||void 0===e?void 0:e.getBoundingClientRect().left;return void 0!==t&&C.mouseX>t}),[C,R]),E=(0,r().K8)((()=>{if(!B)return!1;const e=g().Nq(B);return(null==B?void 0:B.pathIsDead())||e&&(0,S().pQ)(e.id)}),[B]),[V,L]=(0,o.useState)(null==k||null===(t=k.getNode())||void 0===t?void 0:t.getBoundingClientRect());(0,o.useEffect)((()=>{if(!k)return;const e=k.getNode();if(!e)return;const t=()=>{L(e.getBoundingClientRect())},n=(0,v().NM)(e);n&&(0,m().P4)(n,"scroll",t);const o=(0,v().T8)(e);return o&&o!==n&&(0,m().P4)(o,"scroll",t),t(),()=>{n&&(0,m().Ol)(n,"scroll",t),o&&(0,m().Ol)(o,"scroll",t)}}),[k]),(0,o.useEffect)((()=>{"comment"!==T&&l().A.state.isHovered&&l().A.resetHoverSource("right_margin_button")}),[T]);const F=null==a?void 0:a.getBoundingClientRect(),N=(0,r().K8)((()=>B?(0,p().ac)({marginItemType:"selectable_hover_menu_overlay_item",store:B,nodeRect:V,containerRect:F,environment:n}):0),[B,V,F,n]),W=(0,s().IS)((()=>({container:{position:"absolute",top:N},commentMenu:{marginLeft:3}})),[N]),U=(0,r().K8)((()=>K.state),[]);return(0,f().A)((e=>(0,j.jsxs)(j.Fragment,{children:[U?(0,j.jsx)(z,{container:a}):null,(0,j.jsx)(d().A,{render:()=>k&&B&&T&&!E?(x().default.setState({...C,isPlusButtonVisible:"plus_above"===T||"plus_below"===T}),[(0,j.jsxs)(c().A,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},config:{duration:150,delay:H?150:0,timingFunction:"ease-in-out"},style:W.container,...e,children:["comment"===T&&(0,j.jsx)("div",{style:W.commentMenu,children:(0,j.jsx)(I().A,{selectable:k,store:B,ref:M,containerRect:F})}),"6-dot"===T&&(0,j.jsx)(_().A,{selectable:k,store:B,isWorkspaceAdmin:A,ref:M,nodeRect:V,containerRect:F}),("plus_above"===T||"plus_below"===T)&&(0,j.jsx)(P,{store:B,selectable:k,insertionLocation:"plus_above"===T?"above":"below",ref:M,state:C,nodeRect:V,containerRect:F})]},B.id)]):(x().default.setState({...C,isPlusButtonVisible:!1}),[])})]})))}const E={"top-left-corner":"green","bottom-left-corner":"green","above-content":"blue","below-content":"blue"},K=n(129044).default.createValue(!1);function z(e){const{container:t}=e,n=(0,i().v3)(),s=(0,r().K8)((()=>x().default.state.isOpen?x().default.state.nearbySelectables.flatMap((e=>{let{selectable:t,hoveredRegion:o}=e;const i=C().default.state.selectableRectMap.get(t);if(!i)return[];const r=A().TH({environment:n,store:t.props.store,selectableBoundingRect:i}),s=A().KG({store:t.props.store,selectableBoundingRect:i,containerWidth:r}),a=A().mC(t);return{selectableRect:i,hoverRegionRect:(0,x().getHoverRegionOfRect)(i,o,r,s,a),hoveredRegion:o}})):[]),[n]),a=null==t?void 0:t.getBoundingClientRect(),l=((null==a?void 0:a.top)??0)+((null==t?void 0:t.scrollTop)??0),c=((null==a?void 0:a.left)??0)+((null==t?void 0:t.scrollLeft)??0);return(0,j.jsx)("div",{style:{pointerEvents:"none"},children:s.map(((e,t)=>{let{selectableRect:n,hoverRegionRect:i,hoveredRegion:r}=e;return(0,j.jsxs)(o.Fragment,{children:[(0,j.jsx)("div",{style:{position:"absolute",top:i.top-l,left:i.left-c,width:i.width,height:i.height,outline:`1px solid ${E[r]}`,fontSize:8,fontFamily:"monospace"},children:r}),(0,j.jsx)("div",{style:{position:"absolute",top:n.top-l,left:n.left-c,width:n.width,height:n.height,outline:"1px solid gray",fontSize:8,fontFamily:"monospace"}})]},t)}))})}(0,n(996094).exposeDebugValue)("SelectableHoverDebuggerEnabledStore",K)},73758:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});n(242343);var o=()=>n(803290),i=()=>n(174114),r=()=>n(950635),s=()=>n(850313),a=()=>n(518797),l=()=>n(409211),c=()=>n(653998),d=()=>n(76394),u=()=>n(31448),m=()=>n(793359),p=()=>n(477784),g=()=>n(289113),f=()=>n(931371),v=n(163643);function b(e){const{store:t}=e,n=(0,i().DP)(),b=(0,o().K8)((()=>t.getCreatedTime()),[t]),h=(0,o().K8)((()=>t.getLastEditedTime()),[t]),y=(0,o().K8)((()=>{const e=t.getCreatedByPointer();if(e)return(0,r().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),S=(0,o().K8)((()=>{const e=t.getLastEditedByPointer();if(e)return(0,r().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),x=(0,o().K8)((()=>{const e=t.getSpaceStore();if(!e)return!1;const n=null==y?void 0:y.asActor;if(!n)return!1;const o=n.table;switch(o){case l().oo:return(0,f().dp)(e,n.id).isMember();case a().GP:return(0,f().Ts)(e,n.id).isMember();case s().yj:return!1;default:(0,d().HB)(o)}}),[t,y]),C=b?(0,g().nl)(b,{useCompactFormat:!0,useLowercase:!0}):"",A=h?(0,g().nl)(h,{useLowercase:!0,useCompactFormat:!0}):"";if(!(h?(0,g().nl)(h,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0}):""))return null;const M={display:"flex",gap:4,color:n.text.contrastSecondary,height:16,fontSize:12},w={size:14,style:{marginRight:2}},k=p().A.getIntl();return(0,v.jsxs)(v.Fragment,{children:[(e=>{let t;if(null!=S&&S.asActor)t=(0,v.jsx)(c().sA,{defaultMessage:"Edited by {editor} {timestamp}",id:"pagePropertiesHeader.editedBy.label",values:{editor:(0,v.jsx)("span",{style:{fontWeight:u().Wy.medium,color:n.text.contrastPrimary},children:(0,v.jsxs)("span",{style:{display:"flex"},children:[!e&&(0,m().w)({actor:S,...w}),(0,r().lR)(k,S)]})}),timestamp:A}});else{if(!A)return;o=A,t=(0,v.jsx)(c().sA,{defaultMessage:"Edited {timestamp}",id:"pagePropertiesHeader.edited.label",values:{timestamp:o}})}var o;return(0,v.jsx)("div",{style:{...M,marginTop:3,marginBottom:3},children:t})})(e.compactFormat),(e=>{let t;if(null!=y&&y.asActor&&x)t=(0,v.jsx)(c().sA,{id:"pagePropertiesHeader.createdBy.label",defaultMessage:"Created by {creator} {timestamp}",values:{creator:(0,v.jsx)("span",{style:{fontWeight:u().Wy.medium,color:n.text.contrastPrimary},children:(0,v.jsxs)("span",{style:{display:"flex"},children:[!e&&(0,m().w)({actor:y,...w}),(0,r().lR)(k,y)]})}),timestamp:C}});else{if(!C)return;t=(0,v.jsx)(c().sA,{id:"pagePropertiesHeader.created.label",defaultMessage:"Created {timestamp}",values:{timestamp:C}})}return(0,v.jsx)("div",{style:{...M,marginBottom:4},children:t})})(e.compactFormat)]})}},105886:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,q:()=>a});var o=n(242343),i=()=>n(653998),r=()=>n(514799),s=n(163643);const a=300,l=(0,o.forwardRef)((function(e,t){const l=(0,i().tz)(),c=(0,n(486905).Jj)(),d=(0,n(174114).IS)((t=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",cursor:e.disableDrag?"pointer":"grab",width:e.width??r().Z,height:e.height??r().S,borderRadius:4,fill:c?t.icon.secondary:t.lightIconColor,...e.style},text:{color:t.text.contrastSecondary}})),[e.disableDrag,e.width,e.height,e.style,c]);const{onClick:u}=e,m=(0,o.useCallback)((e=>{u&&(e.preventDefault(),u(e))}),[u]),p=(0,o.useCallback)((o=>(0,s.jsx)(n(126451).A,{ref:t,ariaLabel:l.formatMessage({id:"dragHandleButton.ariaLabel",defaultMessage:"Drag"}),role:e.role,style:d.buttonStyle,onClick:e.onClick,onContextMenu:m,disallowTabbing:e.disallowTabbing,...o,children:(0,n(916809).i)({width:14,height:14,...e.iconStyle})})),[m,l,e.disallowTabbing,e.iconStyle,e.onClick,e.role,t,d.buttonStyle]);return e.disableTooltip?p({}):(0,s.jsx)(n(103151).A,{placement:e.tooltipPlacement??n(907721).W.Bottom,delayThreshold:a,renderTooltip:function(){return(0,s.jsxs)("div",{style:{textAlign:"center"},children:[!e.disableDrag&&(0,s.jsx)(i().sA,{defaultMessage:"Drag <medium>to move</medium>",id:"dragHandleButton.dragPrompt.text",values:{medium:e=>(0,s.jsx)("span",{style:d.text,children:e})}}),!e.hideClickMessage&&(0,s.jsx)("div",{children:(0,s.jsx)(i().sA,{defaultMessage:"Click <medium>to open menu</medium>",id:"dragHandleButton.clickPrompt.text",values:{medium:e=>(0,s.jsx)("span",{style:d.text,children:e})}})})]})},render:p})}))},129243:(e,t,n)=>{"use strict";n.d(t,{GO:()=>I,Ju:()=>P,KA:()=>R,L0:()=>E,L2:()=>z,dA:()=>_,gI:()=>B,iN:()=>K,oG:()=>H,sK:()=>D});n(725707),n(491955),n(771702);var o=()=>n(519423),i=()=>n(486540),r=()=>n(446588),s=()=>n(220574),a=()=>n(145017),l=()=>n(518797),c=()=>n(66460),d=()=>n(528762),u=()=>n(409211),m=()=>n(23371),p=()=>n(76394),g=()=>n(145046),f=()=>n(303298),v=()=>n(754697),b=()=>n(477784),h=()=>n(352723),y=()=>n(413871),S=()=>n(818369),x=()=>n(70989),C=()=>n(919536),A=()=>n(759625),M=()=>n(575015),w=()=>n(84543),k=()=>n(271674);const T=(0,n(653998).YK)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function j(e,t){const{environment:n,spaceStore:o,spaceRole:i}=t,r=function(e){const{name:t,spaceStore:n,userId:o,icon:i,type:r,environment:s}=e,a=Date.now(),c={name:t,created_at:a,created_by_table:u().oo,created_by_id:o,alive:!0,icon:i,space_id:n.id,last_edited_at:a,last_edited_by_id:o,last_edited_by_table:u().oo};switch(r){case"guest":return{...c,type:"guest",capabilities:e.capabilities,parent_table:d().NX,parent_id:n.id,integration_id:void 0};case"scim":return{...c,id:(0,v().Z1)({environment:s,table:l().GP,spaceId:n.id}),type:"scim",parent_table:u().oo,parent_id:o};default:(0,p().HB)(r)}}(t),s=A().eC({environment:n,table:l().GP,value:r,inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e});return C().dy({environment:n,spaceStore:o,permissionItems:[{type:"bot_permission",role:i,bot_id:s.id}],transaction:e}),{botStore:s}}function B(e){const{environment:t}=e,{serverCommitResult:n,performResult:{botStore:o}}=w().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>j(t,e)});return{botStore:o,transactionPromise:n}}async function R(e){const{environment:t,botId:n,onSuccess:o}=e,i=await S().callApi({eventName:"deleteBot",environment:t,data:{botId:n}});"failed"===i.type?g().Qg(i):"success"===i.type&&o&&(await k().oX({environment:t}),o())}async function P(e){const{environment:t,table:n,id:i,type:r}=e,s=await S().callApi({eventName:"getBots",environment:t,data:{table:n,id:i,type:r},headers:(0,o().WS)({spaceId:n===d().NX?i:void 0})});return"failed"===s.type?(g().Qg(s),{botIds:[],recordMap:{}}):{botIds:s.data.botIds,recordMap:s.data.recordMap}}async function I(e){const{environment:t,currentSpaceStore:n,botIds:o}=e;if(!n)return;const i=await S().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:n.id,botIds:o}});if("failed"!==i.type)return i.data;g().Qg(i)}async function _(e){const{environment:t,botId:n}=e,o=await S().callApi({eventName:"getBotToken",environment:t,data:{botId:n}});if("failed"!==o.type)return o.data.token;g().Qg(o)}function D(e){const{botValue:t,store:n,environment:o}=e,{id:r,parent_id:s,parent_table:a,capabilities:l}=t,c={type:"bot_permission",bot_id:r,parent_id:s,parent_table:a,role:(0,i().MD)(l)};w().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:o,canUndo:!0,perform:e=>{C().zP({environment:o,store:n,permissionItems:[c],transaction:e})}})}function H(e){const{botId:t,store:n,environment:o}=e,i=n.getPermissionItems().filter((0,p().u0)((e=>(0,r().P3)(e)?{true:e}:{false:e})));for(const r of i)if(r.bot_id===t){const e={...r,role:"none"};w().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:o,canUndo:!0,perform:t=>{C().zP({environment:o,store:n,permissionItems:[e],transaction:t})}})}}function E(e){const{currentSpaceStore:t,environment:n,pages:o,botStore:i,addPermission:r}=e;if(!t)return;const s=(0,h().Ws)({botStore:i,addPermission:r});o.forEach((e=>{const o=y().sk.createChildStore(t,{table:a().ev,id:e,spaceId:t.getSpaceId()});w().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:n,canUndo:!0,perform:e=>{C().zP({environment:n,store:o,permissionItems:[s],transaction:e})}})}))}async function K(e){const{environment:t,spaceStore:n,botStore:o,pageIdAndOperations:i,concurrency:r=20}=e;0!==i.length&&await(0,m().lX)(i,r,(async e=>{const i=y().sk.createChildStore(n,{table:a().ev,id:e.pageId,spaceId:n.getSpaceId()}),r=(0,h().Ws)({botStore:o,addPermission:"add"===e.operationType}),{serverCommitResult:s}=w().createAndCommit({userAction:`botActions.updateBotPermissionsForPages.${e.operationType}`,environment:t,canUndo:!0,perform:e=>{C().zP({environment:t,store:i,permissionItems:[r],transaction:e})}});await s}))}async function z(e){const{environment:t,spaceStore:n,spaceViewStore:i,templatePageId:r,botValue:a,pages:d}=e;if(!n)return;const u=y().sk.createChildStore(n,{table:l().GP,id:a.id});if(r)return await async function(e){const{environment:t,spaceStore:n,spaceViewStore:i,templatePageId:r,botStore:a}=e;if(!n||!i)return;try{x().m({message:T.duplicatingTemplate});const e=await S().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:r,spaceId:(0,c().e)(void 0)},shallow:!1},headers:(0,o().WS)({recordId:r})});if("failed"===e.type)return;const l=s().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:d}=await(0,f().nd)(),{performResult:u}=w().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const o=d({environment:t,recordMap:l,copyPageId:r,isPrivate:!0,spaceStore:n,spaceViewStore:i,transaction:e,allowCopyExternalObjectInstances:!1}),s=i.getPrivatePageIds();s.length>0&&A().zv({store:i,data:{private_pages:[o.id,...s]},transaction:e});const c=(0,h().Ws)({botStore:a,addPermission:!0});return C().zP({environment:t,store:o,permissionItems:[c],transaction:e}),o}});return u}catch(l){M().D6({label:b().A.formatMessage(T.duplicatingTemplateError)})}finally{x().V()}}({environment:t,templatePageId:r,botStore:u,spaceStore:n,spaceViewStore:i});E({environment:t,currentSpaceStore:n,botStore:u,pages:d,addPermission:!0})}},150936:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});n(242343);var o=n(163643);const i=(0,n(680369).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},156689:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});n(242343);var o=n(163643);const i=(0,n(680369).wt)("commentAdd",{viewBox:"0 0 16 15",svg:(0,o.jsx)("path",{d:"M4.73926 14.6865C4.46582 14.6865 4.25163 14.5977 4.09668 14.4199C3.94629 14.2422 3.87109 14.0007 3.87109 13.6953V12.0137H3.50195C2.84115 12.0137 2.27376 11.8861 1.7998 11.6309C1.3304 11.3757 0.968099 11.0111 0.712891 10.5371C0.46224 10.0586 0.336914 9.47982 0.336914 8.80078V3.49609C0.336914 2.81706 0.46224 2.24056 0.712891 1.7666C0.963542 1.28809 1.32585 0.921224 1.7998 0.666016C2.27832 0.410807 2.86165 0.283203 3.5498 0.283203H12.4434C13.127 0.283203 13.708 0.410807 14.1865 0.666016C14.665 0.921224 15.0296 1.28809 15.2803 1.7666C15.5309 2.24056 15.6562 2.81706 15.6562 3.49609V8.80078C15.6562 9.47982 15.5309 10.0586 15.2803 10.5371C15.0296 11.0111 14.665 11.3757 14.1865 11.6309C13.708 11.8861 13.127 12.0137 12.4434 12.0137H8.21875L5.88086 14.085C5.64844 14.29 5.44792 14.4404 5.2793 14.5361C5.11068 14.6364 4.93066 14.6865 4.73926 14.6865ZM5.07422 13.1758L7.24121 11.0293C7.38704 10.8835 7.52148 10.7878 7.64453 10.7422C7.77214 10.6921 7.94076 10.667 8.15039 10.667H12.4023C13.0495 10.667 13.528 10.5075 13.8379 10.1885C14.1523 9.86491 14.3096 9.38639 14.3096 8.75293V3.53711C14.3096 2.9082 14.1523 2.43424 13.8379 2.11523C13.528 1.79167 13.0495 1.62988 12.4023 1.62988H3.58398C2.94141 1.62988 2.46289 1.79167 2.14844 2.11523C1.83854 2.43424 1.68359 2.9082 1.68359 3.53711V8.75293C1.68359 9.38639 1.83854 9.86491 2.14844 10.1885C2.46289 10.5075 2.94141 10.667 3.58398 10.667H4.52051C4.71191 10.667 4.85091 10.7103 4.9375 10.7969C5.02865 10.8789 5.07422 11.0225 5.07422 11.2275V13.1758ZM4.8418 6.14844C4.8418 5.95703 4.90104 5.80208 5.01953 5.68359C5.13802 5.56055 5.29525 5.49902 5.49121 5.49902H7.36426V3.62598C7.36426 3.43913 7.4235 3.28646 7.54199 3.16797C7.66048 3.04492 7.81087 2.9834 7.99316 2.9834C8.18457 2.9834 8.33952 3.04264 8.45801 3.16113C8.58105 3.27962 8.64258 3.43457 8.64258 3.62598V5.49902H10.5156C10.707 5.49902 10.862 5.56055 10.9805 5.68359C11.099 5.80208 11.1582 5.95703 11.1582 6.14844C11.1582 6.33073 11.099 6.48112 10.9805 6.59961C10.862 6.7181 10.707 6.77734 10.5156 6.77734H8.64258V8.65723C8.64258 8.84408 8.58105 8.99902 8.45801 9.12207C8.33952 9.24056 8.18457 9.2998 7.99316 9.2998C7.81087 9.2998 7.66048 9.24056 7.54199 9.12207C7.4235 8.99902 7.36426 8.84408 7.36426 8.65723V6.77734H5.49121C5.2998 6.77734 5.14258 6.7181 5.01953 6.59961C4.90104 6.48112 4.8418 6.33073 4.8418 6.14844Z"})})},225679:(e,t,n)=>{"use strict";n.d(t,{JQ:()=>d,d5:()=>u,vt:()=>c});var o=()=>n(950635),i=()=>n(850313),r=()=>n(518797),s=()=>n(409211),a=()=>n(76394),l=()=>n(413871);function c(e){const{parentStore:t,pointer:n}=e,i=(0,l().Oo)(t,n).getValue();if(i)return(0,o().D3)({table:n.table,value:i})}function d(e){const{parentStore:t,pointer:n}=e;return n.table===r().GP?l().vK.createChildStore(t,n):n.table===s().oo?l().LU.createChildStore(t,n):n.table===i().yj?l().pH.createChildStore(t,n):void(0,a().HB)(n)}function u(e){return e.table===r().GP?(0,o().oC)(e.getValue()):e.table===s().oo?(0,o().MR)(e.getValue()):e.table===i().yj?(0,o().w2)(e.getValue()):void(0,a().HB)(e)}},326259:(e,t,n)=>{"use strict";n.d(t,{OH:()=>a,T2:()=>l,do:()=>c});var o=()=>n(871002),i=()=>n(846581),r=()=>n(16456),s=()=>n(427091);function a(e){const{dateTime:t,intl:n,shortenDateAndRange:o}=e,s=r().C6.toPersistedDate(t.valueOf());return i().ZF({value:s,allowRelativeDates:!0,intl:n,shortenDateAndRange:o,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:n,userTimeZone:o,displayInUserTimezone:s,alwaysIncludeTimezone:a}=e,l=r().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return i().ZF({value:l,allowRelativeDates:!0,intl:n,userTimeZone:o,displayInUserTimezone:s,alwaysIncludeTimezone:a})}function c(e){const{luxonRange:t,intl:n}=e,a=r().C6.toPersistedDateRange(t),l=i().ZF({value:a,allowRelativeDates:!1,shortenDateAndRange:!0,intl:n,displayInUserTimezone:!0}),c=t.end.setZone((0,s().P)()),d=i().fU({start_time:c.toFormat(o().GE),humanReadable:!1,intl:n});return n.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}},389324:(e,t,n)=>{"use strict";n.r(t),n.d(t,{gearIcon:()=>r,iconDefinition:()=>i});n(242343);var o=n(163643);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.29 10c0 1.5 1.22 2.71 2.71 2.71 1.5 0 2.71-1.21 2.71-2.71S11.5 7.29 10 7.29 7.29 8.5 7.29 10m1.25 0c0-.81.66-1.46 1.46-1.46.81 0 1.46.65 1.46 1.46s-.65 1.46-1.46 1.46-1.46-.65-1.46-1.46"}),(0,o.jsx)("path",{d:"M8.49 17.64q.75.15 1.53.15v-.01c.47 0 .94-.04 1.41-.13.26-.05.46-.25.5-.51l.26-1.53.15-.06 1.28.91c.21.14.49.14.71 0 .41-.28.8-.61 1.18-.98.33-.33.63-.7.9-1.09.15-.21.15-.5 0-.71l-.9-1.27.06-.15 1.55-.27c.26-.05.46-.25.51-.5a7.8 7.8 0 0 0 .02-2.94.62.62 0 0 0-.51-.5l-1.53-.26-.06-.15.91-1.28c.14-.21.14-.49 0-.71a7.9 7.9 0 0 0-2.07-2.08.62.62 0 0 0-.71 0l-1.27.9-.15-.06-.27-1.55a.64.64 0 0 0-.5-.51c-.5-.1-1-.15-1.53-.15-.47 0-.95.04-1.41.13-.26.05-.46.25-.5.51l-.26 1.53-.15.06-1.28-.91a.65.65 0 0 0-.71 0 7.9 7.9 0 0 0-2.08 2.07c-.15.21-.15.5 0 .71l.9 1.27-.06.15-1.55.27c-.26.05-.46.25-.51.5-.1.5-.15 1-.15 1.53 0 .47.04.95.13 1.41.05.26.25.46.51.5l1.53.26.06.15-.91 1.28c-.14.21-.15.49 0 .71.29.42.61.81.98 1.18.34.34.7.65 1.09.91.21.15.5.15.71 0l1.27-.9.15.06.27 1.55c.05.26.25.46.5.51m2.29-1.15c-.53.07-1.09.07-1.63 0l-.25-1.47a.62.62 0 0 0-.42-.49 6 6 0 0 1-.68-.28.63.63 0 0 0-.65.04l-1.2.85a6.8 6.8 0 0 1-1.14-1.16l.86-1.21c.13-.19.15-.43.05-.64-.11-.22-.21-.45-.28-.68a.62.62 0 0 0-.49-.43l-1.45-.25a6.7 6.7 0 0 1 0-1.63l1.47-.25c.23-.04.42-.2.49-.42.07-.23.17-.46.28-.68.11-.21.09-.46-.04-.65l-.85-1.2A6.8 6.8 0 0 1 6.01 4.8l1.21.86c.19.13.43.15.64.05.22-.11.45-.21.68-.28s.39-.26.43-.49l.25-1.45c.53-.07 1.09-.07 1.63 0l.25 1.47c.04.23.2.42.42.49.23.07.46.17.68.28.21.11.46.09.65-.04l1.2-.85A6.8 6.8 0 0 1 15.19 6l-.86 1.21c-.13.19-.15.43-.05.64.11.22.21.45.28.68s.26.39.49.43l1.45.25a6.7 6.7 0 0 1 0 1.63l-1.47.25c-.23.04-.42.2-.49.42-.07.23-.17.46-.28.68-.11.21-.09.46.04.65l.85 1.2a6.8 6.8 0 0 1-1.16 1.14l-1.21-.86a.64.64 0 0 0-.64-.05c-.22.11-.45.21-.68.28s-.39.26-.43.49z"})]})},r=(0,n(680369).wt)("gear",i)},392704:e=>{var t=/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;e.exports=function(e){var n=e.match(t),o=0;if(!n)return 0;for(var i=0;i<n.length;i++)n[i].charCodeAt(0)>=19968?o+=n[i].length:o+=1;return o}},429392:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var o=n(242343),i=()=>n(803290),r=()=>n(486540),s=()=>n(653998),a=()=>n(145046),l=()=>n(919536),c=()=>n(990616),d=()=>n(944498),u=()=>n(378219),m=()=>n(35462),p=n(163643);const g=function(e){let{store:t}=e;const g=(0,n(174114).DP)(),f=(0,n(237385).v3)(),v=(0,o.useMemo)((()=>({environment:f,blocks:[t],publicEditMode:void 0})),[f,t]),b=(0,i().K8)((()=>d().Uo6([d().Ezz,d().AU6(d().p2L)])(v)),[v]),h=(0,i().K8)((()=>d().Uo6([d()._mr,d().AU6(d().Km9)])(v)),[v]);if(b){const{device:e}=f;return(0,p.jsx)("div",{style:{backgroundColor:g.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${g.regularDividerColor}`,marginTop:e.isMobile?28:1},children:(0,p.jsxs)(n(126451).A,{disabled:!h,style:{padding:12},onClick:()=>async function(e,t){if(!e.isDefined())return;const n=e.getPermissionItems(),o=u().KA(e),i=o?r().wD(u().E(o)):[],d=r().Cd(e.getModel(),n,i),m={type:"restore",permissionChanges:d},{accept:g}=await a().Gh({message:(0,c().r6)(m),acceptLabel:(0,c().QU)(m),cancelLabel:(0,p.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,p.jsx)(c().f2,{openState:m})});g&&l().YD({environment:t,store:e})}(t,f),children:[(0,p.jsx)(m().A,{isMultiline:!0,isSmall:!0,children:(0,p.jsx)(s().sA,{id:"blockMenuRestrictedMessage.label",defaultMessage:"You don’t have permission to edit this block because it is restricted."})}),h&&(0,p.jsx)(m().A,{style:{marginTop:6,fontWeight:n(31448).Wy.semibold},children:(0,p.jsx)(s().sA,{id:"blockMenuRestrictedMessage.adminRestoreAction.label",defaultMessage:"Restore permissions"})})]})})}return null}},432175:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});var o=()=>n(759625);function i(e){const{collectionViewStore:t,update:n,transaction:i}=e;o().zv({store:t.getQueryStore(),data:n,transaction:i})}},439500:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});n(242343);var o=n(163643);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 1 0 1.1 0z"}),(0,o.jsx)("path",{d:"M15.4 1.95a3.48 3.48 0 0 0-3.48 3.48v1.92H6.4a2.425 2.425 0 0 0-2.425 2.425v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.425 2.425 0 0 0 13.6 7.35h-.43V5.43a2.23 2.23 0 1 1 4.46 0v2.095a.625.625 0 1 0 1.25 0V5.43a3.48 3.48 0 0 0-3.48-3.48M5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},r=(0,n(680369).wt)("lockOpen",i)},533639:(e,t,n)=>{"use strict";n.d(t,{p:()=>o});class o extends(()=>n(998969))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}},534895:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});const o=(0,n(851552).Dv)("importFile")},537846:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var o=n(242343),i=()=>n(237385),r=()=>n(803290);function s(e,t){n(137476).vd(e,"click_selection_menu",{block_type:t.blockType})}var a=()=>n(273520),l=()=>n(367111),c=()=>n(332284),d=()=>n(486905),u=()=>n(444633),m=(n(725707),n(491955),()=>n(653998)),p=()=>n(641546),g=()=>n(401382),f=()=>n(88271),v=()=>n(797631),b=()=>n(640979),h=()=>n(392608),y=()=>n(182613),S=n(163643);const x=(0,m().YK)({filterActions:{defaultMessage:"Search actions…",id:"selectableHoverMenu.filterActions.placeholder"}});function C(e){const{hasEditorPermissions:t,isWorkspaceAdmin:s,store:a,onDismiss:l,containerRef:c,query:d,setQuery:u}=e,m=(0,i().v3)(),g=(0,i().WS)(),f=(0,r().K8)((()=>y().default.state.stores),[]),v=(0,r().K8)((()=>{var e;return{environment:m,blocks:y().default.state.stores.length?y().default.state.stores:[a],originRect:null===(e=c.current)||void 0===e?void 0:e.getBoundingClientRect(),publicEditMode:void 0,analyticsFrom:"selection_menu"}}),[m,a,c]),h=(0,r().K8)((()=>a.isNavigableAncestorNonEditableState()),[a]),x=(0,r().K8)((()=>(0,n(400885).yU)(a)),[a]),[C,w]=(0,n(875878).$)(),k=(0,o.useCallback)((e=>{const t=f[0];if(t){const o=t.getType();if(o){const i=(0,n(486963).U)(t),r=(0,n(876695).sl)(i)||{};(0,n(870099).N)(m,{analyticsName:e.analyticsName,action_type:e.analyticsActionType,from:"selection_menu",block_id:t.id,block_type:o,is_toggleable:(0,n(53664).Yt)(o,t.getFormat()),parent_collection_id:t.getParentCollectionIdUpToTwoLevels(),...r})}}e.closeParentMenu&&l()}),[m,l,f]),T=(0,r().K8)((()=>a.isCollectionView()),[a]),j=(0,n(838517).i0)(a),B=!g&&t&&!h&&!x&&!j,R=B&&(0,S.jsx)(A,{filter:d,setQuery:u,inputComboboxProps:C});let P;P=g?{menuType:b().gu.ActionSheet,header:R}:{menuType:b().gu.Popup,width:265,header:R};const I=(0,r().K8)((()=>void 0!==a.getAssociatedCollectionStore()),[a]);return(0,S.jsxs)(n(935091).A,{...P,children:[(0,S.jsx)(n(518397).A,{filter:d,initialFocus:d?0:void 0,sections:I?p().SH:p().JS,context:v,onAccept:k,comboboxProps:B?w:void 0,shouldShowBlockTypeTitle:!0}),!d&&(t||s)&&(0,S.jsx)(n(35630).$,{store:a,wordCountStores:f,isPageMoreButton:!1,hideTopBorder:!1}),!d&&(0,S.jsx)(n(429392).A,{store:a}),!d&&T&&(0,S.jsx)(M,{})]})}function A(e){const{filter:t,setQuery:n,inputComboboxProps:o}=e,r=(0,i().Y0)(),s=(0,m().tz)();return(0,S.jsx)(f().A,{isInput:!0,children:(0,S.jsx)(g().Ay,{value:t,onChange:e=>n(e.target.value),focus:!r.isMobile||void 0,focusAfterAnimation:!0,placeholder:s.formatMessage(x.filterActions),preventCaptureDeleteWhenEmpty:!0,preventCaptureClipboardShortcuts:!0,preventCaptureSpacebarWhenEmpty:!0,...o})})}function M(){return(0,S.jsx)(f().A,{topBorder:!0,children:(0,S.jsx)(v().A,{title:(0,S.jsx)(m().sA,{defaultMessage:"Learn about databases",id:"blocks.hoverBlockMenu.collectionHelpButton"}),href:(0,h().xS)("guides.database"),analyticsFrom:"selectable_hover_menu"})})}const w=(0,o.forwardRef)((function(e,t){const{selectable:m,store:p,disableDrag:g,isWorkspaceAdmin:f,nodeRect:v,containerRect:b}=e,h=(0,i().v3)(),y=(0,i().WS)(),x=(0,n(556078).S)(),[A,M]=(0,o.useState)(!1),w=(0,o.useRef)(null),k=(0,d().Jj)(),T=(0,r().K8)((()=>(0,d().zb)()),[]),j=u().jK,B=(0,r().K8)((()=>(0,n(915821).qg)({marginItemType:"drag_handle",store:p,environment:h,nodeRect:v,containerRect:b,selectable:m})),[p,h,v,b,m]),R=(0,r().K8)((()=>p.isNavigableAncestorNonEditableState()&&!p.isInsideCollection()),[p]),P=(0,r().K8)((()=>{var e;return"editor"===p.getRole()||"read_and_write"===p.getRole()||"edit"===(null==x||null===(e=x.publicEditModeStore.state)||void 0===e?void 0:e.permission)}),[null==x?void 0:x.publicEditModeStore,p]),I=(0,r().K8)((()=>"suggest"===n(615661).Uv.getMode(p)),[p]),_=!g&&P&&!R&&!I,D=(0,n(174114).IS)((e=>({div:{position:"absolute",left:B,width:T,height:j,pointerEvents:"auto",cursor:_?"-webkit-grab":void 0},popup:{width:265,overflow:"hidden"},iconStyle:k?(0,u().Cz)(e,A):{}})),[B,T,j,_,k,A]),[H,E]=(0,o.useState)(""),K=(0,r().K8)((()=>{const e=c().default.state;return e.isOpen&&e.menuIsOpen&&e.currentStore===p}),[p]);(0,o.useEffect)((()=>()=>{K&&c().default.reset()}),[]);const z=(0,o.useCallback)((()=>{const e=c().default.state,t=l().A.state;if(e.isOpen){E(""),y&&t.phase===l().i.shown?l().A.onHide((()=>c().default.setState({...e,menuIsOpen:!0}))):c().default.setState({...e,menuIsOpen:!0}),n(360378).Lt({environment:h,store:p});const o=p.getType();o&&s(h,{blockType:o})}}),[h,y,p]),V=(0,o.useCallback)((()=>c().default.reset()),[]);return(0,r().K8)((()=>{if(!m||!m.props.shouldShowHoverMenu||y)return!1;const e=p.getType();return!e||!["column_list"].includes(e)}),[p,m,y])?(0,S.jsx)("div",{style:D.div,ref:w,children:(0,S.jsx)(n(443252).Ay,{popupType:y?a().z7.SlideUp:a().z7.Popup,open:K,placementToOrigin:a().sx.Left,alignmentToOrigin:a().yP.Center,onDismiss:V,originGap:5,forceInitialInbound:!0,style:D.popup,render:()=>(0,S.jsx)(C,{hasEditorPermissions:P,isWorkspaceAdmin:f,store:p,onDismiss:V,containerRef:w,query:H,setQuery:E}),origin:(0,S.jsx)(n(367859).A,{className:n(983050).LpV,store:p,isHoverMenu:!0,canDrag:_,canSelect:!1,analyticsName:"selection_menu",disableForceTouch:!0,disableHorizontalDragEdgeScroll:!0,onMouseEnter:()=>{M(!0)},onMouseLeave:()=>{M(!1)},children:(0,S.jsx)(n(105886).A,{ref:t,width:T,height:j,disallowTabbing:!0,onClick:z,disableDrag:!_,iconStyle:D.iconStyle})}),trapFocus:K})}):null}))},593085:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});n(725707),n(491955),n(113085);var o=n(242343),i=()=>n(237385),r=()=>n(803290),s=()=>n(653998),a=()=>n(695387),l=()=>n(205670),c=n(163643);const d=(0,o.forwardRef)((function(e,t){const d=(0,i().v3)(),u=(0,i().Y0)(),m=(0,s().tz)(),{selectable:p,store:g,containerRect:f}=e,[v,b]=(0,o.useState)(!1),h=(0,n(486905).Jj)(),y=(0,r().K8)((()=>g.isFirstBlockInCalloutV2Block()),[g]),S=(0,r().K8)((()=>{var e;const t=Boolean(n(610546).A.getFirstSelectedDiscussionId()||n(750169).A.getFramePageFirstSelectedDiscussionId()||a().A.state.isActivelyComposing),o=g.getDiscussionStores().filter((e=>!e.getResolved())).length>0,i=n(747459).A.getBlockStore()===g,r=g.getType(),s="toggle"===r&&!n(224335).A.isOpen(g.id)&&(0,n(360482).O3)(g,{recursivelyLoadAllDiscussions:!0}).length>0;if(!p||u.isMobile||!p.props.shouldShowCommentMenu||g.isNavigableAncestorNonCommentableState()||t||r&&["video","image"].includes(r)||g.isEmptyTitle()||o||i||s||y)return!1;const c="empty"!==l().default.state.mode&&l().default.state.multiSelection;if(c&&(0,n(621641).kM)(c))return!0;return!(c?(null===(e=(0,n(733158).ZS)({multiSelection:c,filterCommonAncestors:!1,focus:"end"}))||void 0===e?void 0:e.stores)??[]:[]).some((e=>e.id===g.id))}),[g,p,u.isMobile,y]),x=(0,r().K8)((()=>{var e;const t=n(782422).ZT(d),o=null==t||null===(e=t.getContentWrapEl())||void 0===e?void 0:e.getBoundingClientRect();return(0,n(915821).jU)({marginItemType:"add_comment",nodeRect:o,containerRect:f})}),[d,f]),C=(0,n(174114).IS)((e=>({container:{position:"relative",right:x},iconStyle:{marginLeft:.65,...h?(0,n(444633).Cz)(e,v):{}},iconButton:{paddingLeft:6,paddingRight:6,width:"unset"}})),[h,v,x]),A=(0,o.useCallback)((async()=>{if(g.isType(n(762847).uP)){const e=g.getBlockTitleStore(),t=n(332284).default.state,o=t.isOpen?t.selectableBoundingRect:void 0,i=n(486881).mk(e);if(i){const t=await n(73631).T.formulas.load();n(56576).hN({environment:d,blockStore:g,multiSelection:{start:{index:i.startIndex,store:e},end:{index:i.endIndex,store:e}},rect:o,from:"right_margin",formulasModule:t})}}else(0,n(181704).l)({environment:d,blockStore:g,from:"right_margin"})}),[d,g]),M=(0,o.useCallback)((e=>{b(e),e?a().A.setHoverWithSource("right_margin_button"):a().A.resetHoverSource("right_margin_button")}),[]),w=(0,o.useCallback)((()=>M(!0)),[M]),k=(0,o.useCallback)((()=>M(!1)),[M]);return S?(0,c.jsx)("div",{style:C.container,onMouseDown:n(502852).tr,children:(0,c.jsx)(n(103151).A,{placement:n(907721).W.Bottom,delayThreshold:300,renderTooltip:()=>(0,c.jsx)(s().sA,{defaultMessage:"Comment",id:"selectableCommentMenu.commentPrompt.tooltip"}),render:e=>(0,c.jsx)("div",{onMouseOver:w,onMouseLeave:k,children:(0,c.jsx)(n(356813).A,{ref:t,ariaLabel:m.formatMessage({id:"selectableCommentMenu.iconButton",defaultMessage:"Comment"}),disallowTabbing:!0,icon:n(156689).w,onClick:A,style:C.iconButton,iconStyle:C.iconStyle,...e})})})}):null}))},594184:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(242343),i=()=>n(653998),r=()=>n(733311),s=n(163643);function a(e){const t=(0,o.useMemo)((()=>(0,r().s)(e.store)),[e.store]);return(0,s.jsx)(i().sA,{id:"pageWordCount.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:t}})}},681981:(e,t,n)=>{"use strict";n.d(t,{p:()=>l,A:()=>c});var o=n(242343),i=()=>n(643553);const r=24*i().pT;function s(e){return a(e).status}function a(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=r?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-r}}function l(e){const[t,n]=(0,o.useState)((()=>s(e)));return(0,o.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function o(){t=void 0;const{status:i,nextUpdateInMs:r}=a(e);n(i),r&&(t=setTimeout(o,r))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function c(e){const[t,n]=(0,o.useState)((()=>Date.now())),r=(null==e?void 0:e.enabled)&&e.start_ts;return(0,o.useEffect)((()=>{if("number"!=typeof r)return;const e=r;let t;return function o(){const r=Date.now();n(r);const s=e*i().TD-r;if(s>0){const e=s%i().Xb,n=0===e?i().Xb:e;t=setTimeout(o,n)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[r]),{freezeStatus:s(e),minUntilFreeze:r?Math.floor((r*i().TD-t)/i().Xb):void 0}}},699773:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var o=n(242343),i=()=>n(846581),r=()=>n(16456),s=()=>n(427091),a=n(163643);const l=function(e){const t=(0,n(653998).tz)(),l=(0,n(174114).DP)(),u=(0,n(221573).I)(),m=(0,o.useRef)(),p=(0,o.useCallback)((()=>{const t=e.value;if(!t)return;const o=r().q8(t,(0,s().P)());if(!o)return;const i=o.valueOf(),a=i-Date.now();a<0||a>n(141666).nD||m.current&&m.current.timestamp===i||(m.current&&clearTimeout(m.current.timer),m.current={timestamp:i,timer:setTimeout((()=>u("DateBox","DateBox/createReminderTimer")),a)})}),[u,e.value]),g=(0,o.useCallback)((()=>{m.current&&(clearTimeout(m.current.timer),m.current=void 0)}),[]);(0,o.useEffect)((()=>{p()}),[p]),(0,o.useEffect)((()=>()=>{g()}),[g]);const{value:f,withComma:v}=e,b=(0,n(803290).K8)((()=>f?(0,i().ZF)({value:f,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,s().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:n(533975).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,f]);if(!f)return null;const h=r().AA(f,(0,s().P)(),n(16791).locale);let y;if(f.reminder){const e=r().Zs(f,(0,s().P)());y=e?{color:l.errorText}:{color:n(220413).Ay.blue}}const S=(0,a.jsxs)(a.Fragment,{children:[b,f.reminder&&(0,n(508024).P)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),v?", ":null]});return e.disableTooltip?(0,a.jsx)("div",{className:e.className,style:{...e.style,...y},children:S}):(0,a.jsx)(n(103151).A,{renderTooltip:()=>(0,a.jsxs)(a.Fragment,{children:[e.tooltipHeader,(0,a.jsxs)("div",{style:d(l,e.tooltipHeader),children:[c(h.start),h.end?` → ${c(h.end)}`:""]})]}),render:t=>(0,a.jsx)("div",{className:e.className,style:{...e.style,...y},...t,children:S}),placement:e.tooltipPlacement})};function c(e){return(0,i().eV)({value:e,preset:"medium"})}function d(e,t){return t?{color:e.text.contrastSecondary}:{}}},711907:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});const o=35},733311:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});n(725707),n(500234);var o=n.n(n(392704)),i=()=>n(191759);function r(e){const t=i().A.find((t=>t.store===e));if(t){const e=t.getContentWrapEl();if(e)return o()(e.innerText)}return 0}},793359:(e,t,n)=>{"use strict";n.d(t,{w:()=>l});n(242343);var o=()=>n(950635),i=()=>n(76394),r=()=>n(951156),s=()=>n(482570),a=n(163643);function l(e){const{actor:t}=e,n={size:e.size??14,style:{marginRight:2,...e.style}};return(0,o().H3)(t)?(0,a.jsx)(r().A,{botValue:t.asActor,...n}):(0,o().ps)(t)?(0,a.jsx)(s().A,{userValue:t.asActor,...n}):(0,o().h2)(t)?(0,a.jsx)(s().A,{userValue:void 0,...n}):void(0,i().HB)(t)}},820740:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>C,yO:()=>w});n(725707),n(500234);var o=n(242343),i=()=>n(237385),r=()=>n(803290),s=()=>n(174114),a=()=>n(214144),l=()=>n(653998),c=()=>n(137476);var d=()=>n(84543),u=()=>n(590057),m=()=>n(189170),p=()=>n(400885),g=()=>n(360482),f=()=>n(37394),v=()=>n(112892),b=()=>n(615661),h=()=>n(332284),y=()=>n(937968),S=n(163643);const x=(0,l().YK)({ariaLabelApple:{id:"block.selectableAddMenu.ariaLabel.apple",defaultMessage:"Click to add below. Option-click to add a block above"},ariaLabelWindows:{id:"block.selectableAddMenu.ariaLabel.windows",defaultMessage:"Click to add below. Alt-click to add a block above"}}),C=(0,o.forwardRef)((function(e,t){let{store:o,nodeRect:a,containerRect:c,selectable:d}=e;const u=(0,l().tz)(),m=(0,s().DP)(),p=(0,i().v3)(),g=(0,i().WS)(),f=(0,n(556078).S)(),v=(0,r().K8)((()=>{var e;return"editor"===o.getRole()||"read_and_write"===o.getRole()||"edit"===(null==f||null===(e=f.publicEditModeStore.state)||void 0===e?void 0:e.permission)}),[null==f?void 0:f.publicEditModeStore,o]),h=(0,r().K8)((()=>{var e,t;return"comment_only"===(null===(e=o.getNavigableBlockStore({skipCurrent:!0}))||void 0===e?void 0:e.getRole())||"comment"===(null==f||null===(t=f.publicEditModeStore.state)||void 0===t?void 0:t.permission)}),[null==f?void 0:f.publicEditModeStore,o]),C=(0,r().K8)((()=>"suggest"===b().Uv.getMode(o)),[o]),k=(0,r().K8)((()=>o.isFirstBlockInCalloutV2Block()),[o]),T=(0,r().K8)((()=>{var e;const t="external_object_instance_page"===o.getType(),i=f&&(0,n(520969).Nh)(f.pageStore.id);return!g&&(!o.isNavigableAncestorNonEditableState()||"collection"===(null===(e=o.getParentStore())||void 0===e?void 0:e.table))&&(v||h&&C)&&!t&&!o.isNavigableAncestorExternallyImportedPage()&&!i&&!k&&!o.isPersonProfile()}),[h,v,k,g,C,f,o]),j=(0,r().K8)((()=>{var e;return null===(e=o.getSpaceStore())||void 0===e?void 0:e.getFreezeSettings()}),[o]),B=(0,n(681981).p)(j);return!T||"active"===B?null:(0,S.jsx)(n(103151).A,{placement:n(907721).W.Bottom,delayThreshold:300,renderTooltip:()=>(0,S.jsx)(M,{}),render:e=>(0,S.jsx)(n(126451).A,{ref:t,disallowTabbing:!0,onClick:()=>{if(!(0,y().EF)(p))return(0,y().QY)(p);w(p,o,(0,n(342729).r)().option?"above":"below")},style:A(o,p,m,a,c,d),ariaLabel:u.formatMessage(p.device.isApple?x.ariaLabelApple:x.ariaLabelWindows),...e,children:(0,n(339189).W)({width:16})})})}));function A(e,t,o,i,r,s){const a=(0,n(915821).qg)({marginItemType:"plus_button",store:e,environment:t,nodeRect:i,containerRect:r,selectable:s});return{display:"flex",alignItems:"center",justifyContent:"center",fill:o.lightIconColor,position:"absolute",left:a,width:24,height:24,borderRadius:4,pointerEvents:"auto",cursor:"-webkit-grab"}}function M(){const e=(0,s().DP)(),t=(0,i().v3)(),n={color:e.text.contrastSecondary};return(0,S.jsxs)("div",{style:{textAlign:"center"},children:[(0,S.jsx)(l().sA,{defaultMessage:"Click <mediumcolor>to add below</mediumcolor>",id:"block.selectableAddMenu.tooltip.addBlockBelow",values:{mediumcolor:e=>(0,S.jsx)("span",{style:n,children:e})}}),(0,S.jsx)("div",{children:t.device.isApple?(0,S.jsx)(l().sA,{defaultMessage:"Option-click <mediumcolor>to add above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove",values:{mediumcolor:e=>(0,S.jsx)("span",{style:n,children:e})}}):(0,S.jsx)(l().sA,{defaultMessage:"Alt-click <mediumcolor>to add a block above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove.windows",values:{mediumcolor:e=>(0,S.jsx)("span",{style:n,children:e})}})})]})}function w(e,t,n){const o="above"===n,i=b().Uv.getMode(t),r=f().T.findSelectablesFromStore(t).find((e=>Boolean(e.props.onInsertRowBelow)));(0,p().fc)(t)||(o?r&&r.props.onInsertRowAbove?d().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{r.props.onInsertRowAbove&&r.props.onInsertRowAbove({transaction:e})}}):d().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addAbove",canUndo:!0,perform:n=>{const o=m().insertTextAbove({environment:e,blocks:[t],transaction:n,skipAnalytics:!0});if("suggest"===i&&o){const t=u().RR(e,n,o);u().tM(n,o,{id:a().JW(),type:"insert",discussionId:t.id}),u().c3({environment:e,transaction:n,discussionStore:t,addModifiedBlockIdsAfter:[o.id]})}}}):g().wm(t)?v().zz({environment:e,blockStore:t,insertedTextBlockLocation:"none"}):r&&r.props.onInsertRowBelow?d().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{r.props.onInsertRowBelow&&r.props.onInsertRowBelow({transaction:e})}}):d().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addBelow",canUndo:!0,perform:n=>{const o=m().insertTextBelow({environment:e,blocks:[t],transaction:n,skipAnalytics:!0});if("suggest"===i&&o){const t=u().RR(e,n,o);u().tM(n,o,{id:a().JW(),type:"insert",discussionId:t.id}),u().c3({environment:e,transaction:n,discussionStore:t,addModifiedBlockIdsAfter:[o.id]})}}}),function(e){c().vd(e,"click_add_menu")}(e),h().default.reset())}},827164:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});n(242343);const o={viewBox:"0 0 20 20",svg:(0,n(163643).jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.342.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},i=(0,n(680369).wt)("docOnDoc",o)},888575:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(242343);var o=n(163643);const i=function(e){const{botStore:t,avatarSize:i,shouldShowBadge:r,style:s,inline:a}=e,l=(0,n(653998).tz)(),c=(0,n(237385).Y0)(),d=(0,n(803290).K8)((()=>null==t?void 0:t.getDisplayName(l)),[t,l]),{outerStyle:u,avatarWrapStyle:m,badgeStyle:p}=(0,n(174114).IS)((e=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0,...s},avatarWrapStyle:a?{width:"none",minHeight:"none",marginRight:6}:{marginRight:6},badgeStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.legacyDefaultSelectColor,fontSize:c.isMobile?11:9,lineHeight:c.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",marginLeft:8,marginTop:1}})),[s,a,c]);return(0,o.jsxs)("div",{style:u,children:[(0,o.jsx)("div",{style:m,children:(0,o.jsx)(n(951156).A,{botStore:t,size:i})}),(0,o.jsx)("div",{style:{...n(31448).RC},children:d}),r&&(0,o.jsx)("div",{style:p,children:"Bot"})]})}},915821:(e,t,n)=>{"use strict";n.d(t,{ac:()=>C,jU:()=>M,qg:()=>A});var o=()=>n(778417),i=()=>n(762847),r=()=>n(76394),s=()=>n(711907),a=()=>n(596717),l=()=>n(314164),c=()=>n(486963),d=()=>n(377561),u=()=>n(486905),m=()=>n(444633),p=()=>n(873617),g=()=>n(836331),f=()=>n(332284),v=()=>n(182613);const b=a().Fh-2,h=2,y=4,S=15,x=24;function C(e){const{marginItemType:t,store:n,nodeRect:o,containerRect:s,environment:l}=e,c=function(e){const{store:t,marginItemType:n}=e,o=t.getType(),r=t.getNavigableAncestorFormat(),s=Boolean(r.page_small_text);return o===i().xd.divider?-6:o===i().xd.header?s?7:10:o===i().xd.subHeader?s?4:6:o===i().xd.collectionView?8:o===i().xd.table?"presence_avatars"===n?5.5:14:3}({store:n,marginItemType:t}),d=function(e){const{baseOffset:t,store:n,environment:o}=e;if(n.isTransclusionType())return t+5;if(T(n,o))return g().default.checkGate({gateName:"db_ux_chrome"})?(a().tt-x)/2:t+1;if("ai_block"===n.getType())return n.hasContent()?t+9:t+15;if(n.getType()===i().xd.button)return t+3;return t}({baseOffset:c,store:n,environment:l}),u=((null==o?void 0:o.top)??0)-((null==s?void 0:s.top)??0)+d,p=l.device.isMobile?16:22,f=(m().jK-p)/2;if("selectable_hover_menu_overlay_item"===t)return u;if("attribution_avatars"===t)return u-f;if("presence_avatars"===t){const{attributionsIncludeFoundBlock:t,avatarCount:n}=e;return u+f+(n+(t?1:0)-1)*S}(0,r().HB)(t)}function A(e){const{marginItemType:t,store:n,environment:o,nodeRect:i,containerRect:s,selectable:a}=e,l=o.device.isMobile?16:22,d=(0,u().zb)()+h,{maxLeft:m,isBoundedByParentContainer:p}=function(e){const{environment:t,selectable:n,nodeRect:o,store:i}=e,r=(null==o?void 0:o.left)??0;if(i.isCollectionView()||i.isInsideCollection()){const e=(0,c().U)(i);if(e&&"table"!==e.getViewType())return{maxLeft:r,isBoundedByParentContainer:!1}}const s=null==n?void 0:n.getScrollerContext();let a=0;if(s&&s.horizontalScroller){const e=s.horizontalScroller.getClientRect();a=(null==e?void 0:e.left)??0}const l=Math.max(a,r),d=T(i,t)&&j(i)?b:0,u=l-d<=a,m=u?a:l;return{maxLeft:m,isBoundedByParentContainer:u}}({environment:o,selectable:a,nodeRect:i,store:n}),g=k(o,d+x,n,p),f=m-((null==s?void 0:s.left)??0);if("drag_handle"===t)return f-k(o,d,n,p);if("plus_button"===t)return f-g;if("attribution_avatars"===t){return f-w({marginItemType:t,store:n,originalMenuOffset:g,environment:o,isBoundedByParentContainer:p})-y-l}if("presence_avatars"===t){return f-w({marginItemType:t,originalMenuOffset:g,environment:o,store:n,isBoundedByParentContainer:p})-y-l}(0,r().HB)(t)}function M(e){const{marginItemType:t,nodeRect:n,containerRect:o}=e;if("add_comment"===t)return((null==o?void 0:o.right)??0)-((null==n?void 0:n.right)??0);(0,r().HB)(t)}function w(e){var t;const{marginItemType:n,originalMenuOffset:o,environment:i,store:s,isBoundedByParentContainer:a}=e,l=f().default.state,c=l.isOpen&&(null===(t=l.currentStore)||void 0===t?void 0:t.id)===s.id;switch(n){case"attribution_avatars":return c?o:k(i,0,s,a);case"presence_avatars":return c&&l.currentStore&&!f().default.isRightMarginCommentHovered()?o:k(i,0,s,a);case"drag_handle":case"plus_button":return o;default:(0,r().HB)(n)}}function k(e,t,n,r){if(!r&&j(n)&&T(n,e))return t+b;if(n.isQuoteBlockChild()){return t+3+14+o().nE.paddingLeft}if(g().default.checkGate({gateName:"db_ux_chrome"})&&n.getType()===i().xd.collectionView)return t+6;if(n.isTransclusionType()||"ai_block"===n.getType())return t+4;if(n.isDirectChildOfAiBlock())return t+13;if(n.isInsideTransclusion())return t+5;if(n.getType()===i().xd.table){const o=p().Xe({simpleTableStore:n,environment:e,includeInline:!(0,d().dC)(e,n)}),i=n.isImmediateColumnChild();return 0!==o||i?t+8:t}const a=n.getNumberOfDuplicateBlocksAncestors();return a>0?t+s().t*a:t}function T(e,t){var n;if(e.getType()!==i().xd.page&&!e.isPersonProfile())return!1;const o=(0,c().U)(e);if(!o)return!1;return(e.isInsideCollection()||Boolean(null==o||null===(n=o.collectionStore())||void 0===n?void 0:n.isPageTreeCollection()))&&(0,l().f5)({environment:t,collectionContextStore:o})}function j(e){var t;const n=v().default.state.stores.includes(e);return f().default.state.isOpen&&(null===(t=f().default.state.currentStore)||void 0===t?void 0:t.id)===e.id||n}},990616:(e,t,n)=>{"use strict";n.d(t,{QU:()=>v,f2:()=>f,r6:()=>b});n(403517),n(242343);var o=()=>n(803290),i=()=>n(174114),r=()=>n(446588),s=()=>n(653998),a=()=>n(76394),l=()=>n(31448),c=()=>n(268117),d=()=>n(98508),u=()=>n(485966),m=()=>n(142708),p=()=>n(586121),g=n(163643);function f(e){const{openState:t}=e,{mainEditorCurrentBlockStore:n,currentSpaceStore:r}=(0,o().K8)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=u().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t}}),[]),s=(0,o().K8)((()=>(0,c().FI)()),[]),a=(0,i().IS)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,...s?{border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingLeft:12,paddingRight:12,paddingBottom:12,marginTop:15,marginBottom:5,marginLeft:-12,marginRight:-12}:{}},editContainer:{marginTop:2,marginBottom:2,color:e.text.primary}})),[s]);if(!n||!r)return null;const l=Date.now();return(0,g.jsx)(m().H,{type:d().A.Y,style:a.scroller,children:t.permissionChanges.map(((e,t)=>{let[o,i]=e;const s={timestamp:l,space_id:r.id,type:"permission-changed",permission_data:{before:o,after:i}};return(0,g.jsx)("div",{style:a.editContainer,children:(0,g.jsx)(p().A,{rootStore:n,edit:s})},`${o.type}-${t}`)}))})}function v(e,t){return["remove","restrict"].includes(e.type)?t?(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccess",defaultMessage:"Restrict access"}):t?(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"}):"restoreTeamPermissions"===e.type?(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreTeamPermissions",defaultMessage:"Reset Permissions"}):(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreAccess",defaultMessage:"Restore access"})}function b(e,t){switch(e.type){case"remove":return t?(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.restrict.description",defaultMessage:"Are you sure you want to remove this {permissionGroup} and restrict access? This page will no longer inherit share settings from the parent page.",values:{permissionGroup:h(e)}});case"restrict":return t?(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.remove.description",defaultMessage:"Are you sure you want to change this role and restrict access? This page will no longer inherit share settings from the parent page."});case"restore":return t?(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):e.permissionChanges.length>0?(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.restore.description",defaultMessage:"Are you sure you want to restore access? This will inherit the following permissions from the parent page:"}):(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.restoreNoChanges.description",defaultMessage:"Are you sure you want to restore access?"});case"restoreTeamPermissions":return t?(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{fontWeight:l().Wy.semibold,marginBottom:4},children:(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.mainDescription",defaultMessage:"Are you sure you want to reset permissions to match the teamspace defaults?"})}),(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.warningMessage",defaultMessage:"Everyone else who is not part of the teamspace will lose access, including guests."})]});default:throw a().HB(e)}}function h(e){return(0,r().B2)(e.permissionItem)?(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.user",defaultMessage:"user"}):(0,r().Ds)(e.permissionItem)?(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.group",defaultMessage:"group"}):(0,r().Lg)(e.permissionItem)?(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.space",defaultMessage:"workspace"}):(0,g.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.generic",defaultMessage:"permission"})}},994488:(e,t,n)=>{"use strict";n.d(t,{o:()=>o});n(362833),n(403517);function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(0===n.length)return e.map((e=>[e]));const r=[];for(const s of e)r.push(...o(n[0],...n.slice(1)).map((e=>[s,...e])));return r}}}]);