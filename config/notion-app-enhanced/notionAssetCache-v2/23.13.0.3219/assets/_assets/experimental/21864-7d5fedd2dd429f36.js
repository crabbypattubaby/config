"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[21864],{101558:(e,t,n)=>{n.d(t,{r:()=>o});var a=()=>n(803290),i=()=>n(836331);function o(e){return(0,a().K8)((()=>i().default.getGroup(e)),[e])}},193697:(e,t,n)=>{n.d(t,{I:()=>o});var a=()=>n(237385),i=()=>n(803290);function o(){const e=(0,a().v3)();return(0,i().K8)((()=>{const{RouterStore:t}=e;return t.state.route}),[e])}},323148:(e,t,n)=>{n.d(t,{A:()=>i});class a extends(()=>n(129044))().default{getInitialState(){return{address:{addressLine1:"",city:"",state:"",country:"",zipCode:""},allowCreatorToAddToMailingList:!1,allowCreatorToAddToMailingListError:!1,taxAmount:0,taxAmountWithDiscount:0,discountedPrice:void 0,discount:void 0,coupon:"",agreedToTermsAndConditions:!1,showTermsAndConditionsError:!1,isCouponInvalid:!1,isCouponApplied:!1,isCalculatingTax:!1,isTaxValid:!1,invalidCouponReason:"",paymentType:"card"}}}const i=new a},337581:(e,t,n)=>{n.d(t,{A:()=>i});class a extends(()=>n(129044))().default{getInitialState(){return{isOpen:!1}}open(e){this.setState({isOpen:!0,...e})}submit(){var e,t;null===(e=(t=this.state).onSubmit)||void 0===e||e.call(t,!0),this.setState({isOpen:!1})}skip(){var e,t;null===(e=(t=this.state).onSubmit)||void 0===e||e.call(t,!1),this.setState({isOpen:!1})}cancel(){this.setState({isOpen:!1})}}const i=new a},352841:(e,t,n)=>{n.d(t,{k:()=>i});n(242343);var a=n(163643);const i=(0,n(680369).wt)("laptop",{viewBox:"0 0 64 64",svg:(0,a.jsx)("path",{d:"m54,40H10v-24c0-2.47,1.53-4,4-4h36c2.47,0,4,1.53,4,4v24Zm-50,4c0,4.94,3.06,8,8,8h40c4.94,0,8-3.06,8-8H4Z"})})},494217:(e,t,n)=>{n.d(t,{l:()=>ve});var a=()=>n(353420),i=n(242343),o=()=>n(237385),r=()=>n(803290),s=()=>n(174114),l=()=>n(162901),d=()=>n(653998),c=()=>n(3311),u=()=>n(701270),p=()=>n(863969),m=()=>n(900644),y=()=>n(485966),g=()=>n(934233),h=()=>n(922898),f=()=>n(99324),x=()=>n(502140),v=()=>n(806546),A=()=>n(707781),C=()=>n(145017),k=()=>n(935834),I=()=>n(975392),b=()=>n(421650),S=()=>n(818369),w=()=>n(145046),T=()=>n(868325),j=()=>n(836331),P=()=>n(869537),_=()=>n(413871),M=()=>n(505316),D=()=>n(277423),N=()=>n(193697),L=()=>n(323148),E=()=>n(621072),R=(n(403517),()=>n(660714)),q=()=>n(604633),K=()=>n(59175),W=n(163643);const U="marketplace-checkout-email";function B(){const e=(0,s().IS)((e=>({inputLabel:{position:"absolute",marginTop:"7px",marginLeft:"9px"},inputStyle:{paddingTop:"17px",cursor:"not-allowed",color:e.text.tertiary}})),[]),t=(0,r().K8)((()=>{var e;return(null===(e=y().default.state.currentUserStore)||void 0===e?void 0:e.getEmail())||""}),[]);return(0,W.jsxs)("div",{children:[(0,W.jsx)(u().D,{as:"label",id:U,styleName:"Micro-10px/Semibold",style:e.inputLabel,children:(0,W.jsx)(d().sA,{id:"inApp.marketplace.checkout.email",defaultMessage:"Email"})}),(0,W.jsx)(K().A,{disabled:!0,value:t,inputStyle:e.inputStyle,"aria-labelledby":U})]})}const O=(0,d().YK)({paymentDetails:{id:"inApp.marketplace.checkout.payment.secondaryText",defaultMessage:"Payment details"},billedTo:{id:"inApp.marketplace.checkout.payment.billedTo",defaultMessage:"Billed to"}});function z(e){const{onAddressChange:t,contacts:n,setIsPaymentElementComplete:i,isPaying:r}=e,l=function(){const e=(0,o().Y0)().isMobile;return(0,s().IS)((()=>({formContainer:{minWidth:e?"100%":390,display:"flex",flexDirection:"column",gap:24},filler:{width:"100%",display:"flex",flexDirection:"column",gap:8},isolation:{isolation:"auto"},addressContainer:{zIndex:1}})),[e])}(),c=(0,a().useStripe)(),p=(0,a().useElements)(),m=(0,d().tz)(),y={mode:"billing",contacts:n.length>0?n.map((e=>({name:e.name,address:e.address}))):void 0},g=(0,R().Y)(t,1e3),h={business:{name:"Notion Labs, Inc"},readOnly:r};return(0,W.jsxs)("div",{style:l.formContainer,children:[(0,W.jsxs)("div",{style:{...l.filler,...l.isolation},children:[(0,W.jsx)(u().D,{styleName:"Caption-12px/Semibold",colorName:"secondary",children:m.formatMessage(O.billedTo)}),(0,W.jsx)("div",{style:l.addressContainer,children:(0,W.jsx)(a().AddressElement,{options:y,onChange:g})}),(0,W.jsx)(B,{})]}),(0,W.jsxs)("div",{style:l.filler,children:[(0,W.jsx)(u().D,{styleName:"Caption-12px/Semibold",colorName:"secondary",children:m.formatMessage(O.paymentDetails)}),(0,W.jsx)(a().PaymentElement,{options:h,onChange:e=>{c&&p&&(e.value.type&&(0,q().t6)(e.value.type)&&L().A.setState({...L().A.state,paymentType:e.value.type}),e.complete&&i(!0))}})]})]})}var H=()=>n(392968),V=()=>n(482570);function Y(e){const{productInformation:t}=e,{name:n,imageSource:a,mobileImageSource:i,creatorIconImage:r,creatorName:l}=t,d=(0,o().Y0)().isMobile,c=function(){const e=(0,o().Y0)(),t=e.isMobile;return(0,s().IS)((e=>({container:{display:"flex",gap:20,alignItems:"center",justifyContent:"space-between",padding:t?"16px 16px 0px 16px":"16px",borderRadius:6,border:`1px solid ${e.stroke.primary}`,maxHeight:t?"120px":"initial",overflow:t?"hidden":"initial"},mobileProductImage:{width:"87px",minHeight:"100px",height:"auto",border:t?"none":`1px solid ${e.stroke.primary}`,boxShadow:t?"rgba(0, 0, 0, 0.02) -10px 12px 32px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px":"unset",borderRadius:6},productImageContainer:{alignSelf:t?"start":"initial"},productImage:{width:118,height:74,borderRadius:6,border:`1px solid ${e.stroke.primary}`},productNameAndCreator:{display:"flex",flexDirection:"column",gap:10,paddingBottom:t?16:0},productCreator:{display:"flex",alignItems:"center",gap:6},productName:{display:"flex",flexWrap:"wrap",maxWidth:181}})),[t])}();return(0,W.jsxs)("div",{style:c.container,children:[(0,W.jsxs)("div",{style:c.productNameAndCreator,children:[(0,W.jsx)(u().D,{styleName:"UIHeading-17px/Semibold",colorName:"primary",customStyles:c.productName,children:n}),(0,W.jsxs)("div",{style:c.productCreator,children:[(0,W.jsx)(V().A,{size:20,avatar:{name:l,avatarUrl:r}}),(0,W.jsx)(u().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:l})]})]}),(0,W.jsx)("div",{style:c.productImageContainer,children:(0,W.jsx)(H().Ay,{src:d?i:a,alt:n,style:d?c.mobileProductImage:c.productImage})})]})}var F=()=>n(360044),$=()=>n(884373),G=()=>n(966789),Z=()=>n(951540),J=()=>n(137476);function Q(e){let{children:t,source:n,styles:a={}}=e;const i=(0,o().v3)(),l=(0,s().IS)((()=>({link:{cursor:"pointer"}})),[]),d=(0,r().K8)((()=>j().default.getConfigKey("mwn_refund_policy_link","link")),[]);return d?(0,W.jsx)("a",{style:{...l.link,...a},href:d,target:"_blank",onClick:()=>{(0,J().u4)({environment:i,event:{eventName:"marketplace_refund_policy_click",eventProperties:{source:n}}}),j().default.logEvent("marketplace_refund_policy_click",n,{source:n})},children:t}):(0,W.jsx)(W.Fragment,{children:t})}var X=()=>n(126451);function ee(e){const{couponCode:t,onApplyClick:n,onCouponChange:a,isApplyingCoupon:i,isCouponApplied:o,onRemoveClick:r,invalidCouponReason:l,disabled:c}=e,p=(0,d().tz)(),m=c||i||""===t,y=function(e){const{disabled:t,applyButtonDisabled:n}=e;return(0,s().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8,position:"relative"},inputOuter:{height:34,padding:"10px 6px 10px 10px",display:"flex",alignItems:"center",borderRadius:6,border:e.stroke.primary,background:e.surface.wash},input:{position:"relative"},inputInner:{cursor:t?"not-allowed":void 0},button:{background:"transparent",height:28,padding:"0px 8px 0px 8px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:6,isolation:"auto",cursor:n?"not-allowed":void 0,width:"max-content"},buttonContainer:{cursor:"pointer"},buttonHovered:{background:t?void 0:e.buttonHoveredBackground},buttonPressed:{background:t?void 0:e.buttonPressedBackground},invalidBoxShadow:{position:"absolute",pointerEvents:"none",isolation:"auto",borderRadius:6,inset:0,zIndex:1,boxShadow:"0px 0px 0px 1px #D44C47 inset, 0px 0px 0px 2px rgba(225, 111, 100, 0.35)"}})),[t,n])}({disabled:c||i,applyButtonDisabled:m}),g=Boolean(l);return(0,W.jsxs)("div",{style:y.container,children:[(0,W.jsx)(u().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,W.jsx)("label",{htmlFor:"couponInput",children:(0,W.jsx)(d().sA,{id:"inApp.marketplace.checkout.coupon.label",defaultMessage:"Coupon"})})}),(0,W.jsxs)("div",{style:y.input,children:[(0,W.jsx)(K().A,{id:"couponInput",ignoreKeyboardMode:!0,value:t,disabled:c||i,onChange:a,placeholder:p.formatMessage({id:"inApp.marketplace.checkout.coupon.input.placeholder",defaultMessage:"Code"}),style:y.inputOuter,inputStyle:y.inputInner,rightStyle:y.buttonContainer,right:i?(0,W.jsx)(G().A,{}):o?(0,W.jsx)(X().A,{style:y.button,onClick:()=>{r()},hoveredStyle:y.buttonHovered,pressedStyle:y.buttonPressed,disabled:c,children:(0,W.jsx)(u().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,W.jsx)(d().sA,{id:"inApp.marketplace.checkout.coupon.remove",defaultMessage:"Remove"})})}):(0,W.jsx)(X().A,{style:y.button,onClick:async()=>{await n(t)},hoveredStyle:y.buttonHovered,pressedStyle:y.buttonPressed,disabled:m,children:(0,W.jsx)(u().D,{styleName:"UIRegular-14px/Regular",colorName:m?"secondary":"primary",children:(0,W.jsx)(d().sA,{id:"inApp.marketplace.checkout.coupon.apply",defaultMessage:"Apply"})})})}),g&&(0,W.jsx)("div",{style:y.invalidBoxShadow})]}),g&&(0,W.jsx)(u().D,{styleName:"UISmall-12px/Regular",colorName:"uiRedPrimary","aria-invalid":"true","aria-errormessage":p.formatMessage({id:"inApp.marketplace.checkout.coupon.invalid.label",defaultMessage:"Invalid coupon code"}),children:l})]})}var te=()=>n(559637);function ne(e){const{checkboxProps:t,label:n,error:a,containerStyles:i={}}=e,o=(0,s().IS)((()=>({container:{display:"flex",gap:8,pointer:"cursor"},checkbox:{marginTop:"1px"},text:{display:"flex",flexDirection:"column",gap:2}})),[]);return(0,W.jsxs)("label",{style:{...o.container,...i},children:[(0,W.jsx)(te().A,{size:14,...t,style:{...t.style,...o.checkbox}}),(0,W.jsxs)("div",{style:o.text,children:[(0,W.jsx)(u().D,{styleName:"UISmall-12px/Regular",colorName:"primary",children:n}),a&&(0,W.jsx)(u().D,{styleName:"UISmall-12px/Regular",colorName:"uiRedPrimary",children:a})]})]})}function ae(e){let{displayInformation:{emailRequirement:t}}=e;const n=(0,s().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:"8px"}})),[]),{isChecked:a,isError:o}=(0,r().K8)((()=>({isChecked:L().A.state.allowCreatorToAddToMailingList,isError:L().A.state.allowCreatorToAddToMailingListError})),[]);(0,i.useEffect)((()=>{a&&o&&L().A.setState({...L().A.state,allowCreatorToAddToMailingListError:!1})}),[a,o]);const l="required"===t;return l||"optional"===t?(0,W.jsx)("div",{style:n.container,children:(0,W.jsx)(ne,{label:(0,W.jsx)(d().sA,{id:"inApp.marketplace.checkout.saveEmail",defaultMessage:"Allow the creator to add me to their mailing list for updates, promotions, and helpful tips."}),checkboxProps:{onClick:()=>{L().A.setState({...L().A.state,allowCreatorToAddToMailingList:!L().A.state.allowCreatorToAddToMailingList})},checked:a,"aria-required":l},error:l&&o&&(0,W.jsx)(d().sA,{id:"inApp.marketplace.checkout.emailRequired",defaultMessage:"You must opt-in to emails to continue"})})}):null}function ie(e){const{price:t,taxAmount:n,discount:a,isCalculatingNewPrice:i,discountedPrice:o,taxAmountWithDiscount:r}=e,l=(0,q().$D)({price:t,taxAmount:n,currencyCode:"USD"}),c=(0,d().tz)(),p=(0,s().IS)((e=>({orderSummaryContainer:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},priceSummaryContainer:{display:"flex",gap:4,alignItems:"center"},fullPriceStrikethrough:{textDecoration:"line-through",color:e.text.tertiary}})),[]);return(0,W.jsxs)("div",{style:p.orderSummaryContainer,children:[(0,W.jsxs)("div",{style:p.priceSummaryContainer,children:[(0,W.jsx)(u().D,{styleName:"UITitle-26px/Bold",colorName:"primary",children:void 0!==a&&void 0!==o?(0,W.jsx)(d().sA,{id:"inApp.marketplace.checkout.totalPrice.withDiscount",defaultMessage:"<strikethrough><fullPriceMoney></fullPriceMoney></strikethrough> <priceWithDiscountMoney></priceWithDiscountMoney>",values:{strikethrough:e=>(0,W.jsx)("span",{style:p.fullPriceStrikethrough,children:e}),fullPriceMoney:()=>(0,W.jsx)(F().v,{cost:{amount:l.amount,currencyCode:"USD"},intl:c,trailingZeroDisplay:"auto"}),priceWithDiscountMoney:()=>{const e=(0,q().$D)({price:o,taxAmount:r,currencyCode:"USD"});return(0,W.jsx)(F().v,{cost:{amount:e.amount,currencyCode:"USD"},intl:c,trailingZeroDisplay:"auto"})}}}):(0,W.jsx)(F().v,{cost:{amount:l.amount,currencyCode:"USD"},intl:c,trailingZeroDisplay:"auto"})}),(0,W.jsx)(u().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,W.jsx)(d().sA,{id:"inApp.marketplace.checkout.taxIfApplicable",defaultMessage:"(includes tax if applicable)"})})]}),i&&(0,W.jsx)(G().A,{})]})}function oe(e){const{listingId:t}=e,n=(0,r().K8)((()=>j().default.getConfigKey("marketplace_transactional_email_config","listingIds")),[]),a=(0,r().K8)((()=>L().A.state.agreedToTermsAndConditions),[]),i=(0,r().K8)((()=>L().A.state.showTermsAndConditionsError),[]),o=(0,d().tz)(),l=(0,s().IS)((e=>({termsAndConditionsContainer:{display:"flex",flexDirection:"column",gap:2},link:{cursor:"pointer",color:e.text.primary}})),[]);return(0,W.jsx)("div",{style:l.termsAndConditionsContainer,children:(0,W.jsx)(ne,{checkboxProps:{onClick:()=>{L().A.setState({...L().A.state,agreedToTermsAndConditions:!a,showTermsAndConditionsError:!1})},"aria-required":!0,checked:a},label:o.formatMessage(n.includes(t)?re.termsAndConditionsTransactionalEmail:re.termsAndConditions,{a:e=>(0,W.jsx)("a",{style:l.link,href:"https://www.notion.so/notion/Terms-and-Privacy-28ffdd083dc3473e9c2da6ec011b58ac",target:"_blank",children:e}),refundLink:e=>(0,W.jsx)(Q,{source:"checkout_modal",styles:l.link,children:e})}),error:i?o.formatMessage(re.termsAndConditionsError):void 0})})}const re=(0,d().YK)({termsAndConditionsTransactionalEmail:{id:"inApp.marketplace.payment.termsAndConditions.transactionalEmail",defaultMessage:"I agree to <a>Notion’s terms & conditions</a> and the Marketplace’s <refundLink>14-day refund policy</refundLink>. I also agree that the above email address may be shared with the template creator for transactional purposes"},termsAndConditions:{id:"inApp.marketplace.payment.termsAndConditions",defaultMessage:"I agree to <a>Notion’s terms & conditions</a> and the Marketplace’s <refundLink>14-day refund policy</refundLink>"},termsAndConditionsError:{id:"inApp.marketplace.payment.termsAndConditions.error",defaultMessage:"You must accept the Marketplace terms to continue"}});async function se(e){let{setIsApplyingCoupon:t,environment:n,coupon:a,productListingId:i,address:o,elements:r,acquisitionId:s}=e;const l=a.trim().toUpperCase();if(0===l.length)return;t(!0);const d=await g().Ks({environment:n,coupon:l,productListingId:i});if(d){let e=0;if((0,f().Z)(o)){const t=await S().callApi({eventName:"calculateMarketplaceTax",environment:n,data:{address:o,acquisitionId:s,couponCode:a}});if("success"===t.type&&t.data.valid){e=t.data.taxAmountWithCoupon??0;const n=t.data.totalAmountWithCoupon;r&&0!==n&&r.update({amount:n})}}L().A.setState({...L().A.state,discount:d.discount,discountedPrice:d.discountedPrice,isCouponApplied:!0,taxAmountWithDiscount:e}),g().H4({environment:n,coupon:a})}t(!1)}function le(e){const{displayInformation:t,price:n,isPaying:a,onSubmit:i,productListingId:o,acquisitionId:r,isTCCheckboxEnabled:s}=e,l=me();return(0,W.jsxs)("div",{style:l.sidebarContainer,children:[(0,W.jsxs)("div",{style:l.productCardContainer,children:[(0,W.jsx)(u().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,W.jsx)(d().sA,{id:"inApp.marketplace.checkout.product.label",defaultMessage:"Notion template"})}),(0,W.jsx)(Y,{productInformation:t})]}),(0,W.jsxs)("div",{style:l.priceAndPaymentContainer,children:[(0,W.jsx)(de,{productListingId:o,acquisitionId:r,price:n,isPaying:a}),(0,W.jsx)("div",{style:l.requiredCheckboxesContainer,children:(0,W.jsx)(ce,{listingId:o,displayInformation:t,isTCCheckboxEnabled:s})}),(0,W.jsx)($().A,{size:1}),(0,W.jsx)(pe,{onSubmit:i,price:n,isPaying:a}),s?null:(0,W.jsx)(ue,{listingId:o})]})]})}function de(e){const{productListingId:t,acquisitionId:n,price:s,isPaying:l}=e,d=(0,o().v3)(),c=(0,N().I)(),u=(0,a().useElements)(),p=(0,i.useRef)(!1),[m,y]=(0,i.useState)(!1),g=(0,r().K8)((()=>L().A.state.coupon),[]),h=(0,r().K8)((()=>L().A.state.isCouponApplied),[]),f=(0,r().K8)((()=>L().A.state.invalidCouponReason),[]),x=(0,r().K8)((()=>L().A.state.taxAmount),[]),v=(0,r().K8)((()=>L().A.state.address),[]),A=(0,i.useCallback)((async e=>{await se({environment:d,productListingId:t,acquisitionId:n,address:v,elements:u,setIsApplyingCoupon:y,coupon:e})}),[d,t,n,v,u]);(0,i.useEffect)((()=>{(async()=>{if(!c.coupon||!t||!n||!u||p.current)return;const e=c.coupon.trim().toUpperCase();L().A.setState({...L().A.state,coupon:e}),await se({environment:d,productListingId:t,acquisitionId:n,address:v,elements:u,setIsApplyingCoupon:y,coupon:e}),p.current=!0})()}),[c.coupon,d,t,n,v,u]);return(0,W.jsx)(ee,{couponCode:g,onCouponChange:e=>{const t=e.target.value.trim().toUpperCase();e.target.value=t,L().A.setState({...L().A.state,coupon:t})},onApplyClick:A,onRemoveClick:()=>{L().A.setState({...L().A.state,coupon:"",discount:void 0,isCouponApplied:!1,discountedPrice:void 0}),u&&u.update({amount:x+s})},isCouponApplied:h,isApplyingCoupon:m,invalidCouponReason:f,disabled:l})}function ce(e){const{displayInformation:t,listingId:n,isTCCheckboxEnabled:a}=e;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(ae,{displayInformation:t}),a&&(0,W.jsx)(oe,{listingId:n})]})}function ue(e){const{listingId:t}=e,n=(0,r().K8)((()=>j().default.getConfigKey("marketplace_transactional_email_config","listingIds")),[]),a=(0,s().IS)((e=>({link:{color:e.text.secondary}})),[]);return(0,W.jsx)(u().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:n.includes(t)?(0,W.jsx)(d().sA,{id:"inApp.marketplace.payment.termsAndConditionsBuyLabel.transactionalEmail",defaultMessage:"By purchasing this template, I agree to <a>Notion’s terms & conditions</a> and the Marketplace’s <refundLink>14-day refund policy</refundLink>. I also agree that the above email address may be shared with the template creator for transactional purposes",values:{a:e=>(0,W.jsx)("a",{style:a.link,href:"https://www.notion.so/notion/Terms-and-Privacy-28ffdd083dc3473e9c2da6ec011b58ac",target:"_blank",children:e}),refundLink:e=>(0,W.jsx)(Q,{source:"checkout_modal",styles:a.link,children:e})}}):(0,W.jsx)(d().sA,{id:"inApp.marketplace.payment.termsAndConditionsBuyLabel",defaultMessage:"By purchasing this template, I agree to <a>Notion’s terms & conditions</a> and the Marketplace’s <refundLink>14-day refund policy</refundLink>",values:{a:e=>(0,W.jsx)("a",{style:a.link,href:"https://www.notion.so/notion/Terms-and-Privacy-28ffdd083dc3473e9c2da6ec011b58ac",target:"_blank",children:e}),refundLink:e=>(0,W.jsx)(Q,{source:"checkout_modal",styles:a.link,children:e})}})})}function pe(e){const{onSubmit:t,price:n,isPaying:a}=e,i=me(),o=(0,d().tz)(),s=(0,r().K8)((()=>L().A.state.discountedPrice),[]),l=(0,r().K8)((()=>L().A.state.taxAmount),[]),c=(0,r().K8)((()=>L().A.state.discount),[]),u=(0,r().K8)((()=>L().A.state.isCalculatingTax),[]),p=(0,r().K8)((()=>L().A.state.taxAmountWithDiscount),[]),m=(0,q().$D)({taxAmount:void 0!==s?p:l,price:void 0!==s?s:n,currencyCode:"USD"});return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(ie,{price:n,discountedPrice:s,taxAmount:l,taxAmountWithDiscount:p,discount:c,isCalculatingNewPrice:u}),(0,W.jsx)(Z().A,{onClick:t,style:i.singleButton,disabled:a,children:a?(0,W.jsx)(G().A,{}):(0,W.jsx)("div",{style:i.buyButtonText,children:0===m.amount?o.formatMessage(ye.purchaseFreeTemplate):o.formatMessage(ye.purchaseTemplate,{money:()=>(0,W.jsx)(F().v,{cost:{amount:m.amount,currencyCode:"USD"},intl:o,trailingZeroDisplay:"auto"})})})})]})}function me(){return(0,s().IS)((e=>({sidebarContainer:{display:"flex",flexDirection:"column",gap:30},priceAndPaymentContainer:{display:"flex",flexDirection:"column",gap:20},productCardContainer:{display:"flex",flexDirection:"column",gap:8},doubleButton:{width:"250px"},alreadyOwnedCtas:{display:"flex",alignItems:"center",gap:20},requiredCheckboxesContainer:{display:"flex",flexDirection:"column",gap:16},singleButton:{width:"100%",height:36,borderRadius:8},buyButtonText:{fontSize:16,color:e.text.contrastPrimary,fontWeight:590}})),[])}const ye=(0,d().YK)({purchaseTemplate:{id:"inApp.marketplace.checkout.payment.buy",defaultMessage:"Buy for <money></money>"},purchaseFreeTemplate:{id:"inApp.marketplace.checkout.payment.buy.free",defaultMessage:"Add"}}),ge=(0,d().YK)({paymentError:{id:"marketplace.payment.error",defaultMessage:"An error occurred while processing your payment. {error}"},duplicationError:{id:"marketplace.payment.error.duplicationError",defaultMessage:"A error occurred duplication the template after your payment. Please refresh the page."}});function he(e){const t=(0,o().v3)(),{displayInformation:n,alreadyOwned:s,price:l,acquisitionId:c,listingId:u,contacts:m}=e,R=(0,r().K8)((()=>"on"!==j().default.getEligibleGroup({experimentId:"marketplace_checkout_move_tc_checkbox",defaultGroup:"off"})),[]),q=(0,r().K8)((()=>j().default.getConfigKey("marketplace_redirect_url_after_purchase_config",u)),[u]),K=(0,r().K8)((()=>L().A.state.address),[]),U=(0,r().K8)((()=>L().A.state.discountedPrice),[]),B=(0,r().K8)((()=>L().A.state.coupon),[]),O=(0,r().K8)((()=>L().A.state.allowCreatorToAddToMailingList),[]),H=(0,r().K8)((()=>L().A.state.agreedToTermsAndConditions),[]),V=(0,r().K8)((()=>L().A.state.isTaxValid),[]),Y=(0,r().K8)((()=>L().A.state.isCalculatingTax),[]),F=(0,r().K8)((()=>h().A.state.teamStore),[]),$=(0,r().K8)((()=>L().A.state.paymentType),[]),G=(0,a().useStripe)(),Z=(0,a().useElements)(),J=(0,d().tz)(),[Q,X]=(0,i.useState)(!1),[ee,te]=(0,i.useState)(!1),ne=fe(),{currentSpaceStore:ae,currentSpaceViewStore:ie}=(0,r().K8)((()=>y().default.state),[]),oe=(0,p().O)(),re=(0,N().I)(),se=(0,o().Y0)().isMobile,de=(0,r().K8)((()=>{if(!c)return;return new(_().yy)(t,{table:k().Ht,id:c}).getStatus()}),[c,t]);(0,i.useEffect)((()=>{Q&&"succeeded"===de&&(async()=>{if(!re.slug)return w().f1(J.formatMessage(ge.duplicationError)),void X(!1);q&&window.open(q,"_blank");const e=await D().xL({environment:t,slug:re.slug,locale:(0,A().H)(J),acquisitionDestinationId:oe,currentSpaceId:oe});if(e&&e.block_id){const n=new(_().Bv)(t,{table:C().ev,id:e.block_id});if(ie&&n&&ae){const a=h().A.state.from;if(g().zi(t),h().A.setState({...h().A.state,hasSuccessfullyPurchasedProduct:!0}),E().A.setState({...E().A.state,duplicationStatus:"duplicating"}),se)return(0,D().uy)({environment:t,template:e,currentSpaceStore:ae,currentSpaceViewStore:ie,templateBlockStore:n,teamStore:F,from:a,isMobile:!0}).then((()=>{E().A.setState({...E().A.state,duplicationStatus:"success"})})),void(P().A.state.open&&P().A.setState({...P().A.state,isCheckout:!1,item:{...P().A.state.item,marketplaceTemplateMetadata:{...P().A.state.item.marketplaceTemplateMetadata,userHasAcquiredTemplate:!0}}}));await(0,D().uy)({environment:t,template:e,currentSpaceStore:ae,currentSpaceViewStore:ie,templateBlockStore:n,teamStore:F,from:a,duplicationStartedToastProps:{iconGroup:v().z,iconGroupColorName:"greenPrimary",iconGroupVariant:"default",title:J.formatMessage({id:"inApp.marketplace.checkout.payment.success.duplication.started.title",defaultMessage:"Purchase successful"}),message:J.formatMessage({id:"inApp.marketplace.checkout.payment.success.duplication.started.message",defaultMessage:"The template is being added to your workspace. We will let you know when it’s ready to use."})}}),E().A.setState({...E().A.state,duplicationStatus:"success"})}}X(!1)})()}),[de,Q,re.slug,F,ie,oe,J,t,ae,se,q]);const ce=(0,i.useMemo)((()=>!Q&&V&&ee&&!Y),[Q,V,ee,Y]),ue=(0,i.useCallback)((async e=>{var a;let i;e.preventDefault();const o=!H&&R,r="required"===n.emailRequirement&&!O,l={listingId:u,acquisitionId:c,currentSpaceId:oe};if(o||r)return x().log({level:"error",from:"marketplacePaymentContent.onSubmit",type:"Terms and conditions or mailing list error",data:{miscDataToConvertToString:{...l,showTermsAndConditionsError:o,allowCreatorToAddToMailingListError:r}}}),void L().A.setState({...L().A.state,showTermsAndConditionsError:o,allowCreatorToAddToMailingListError:r});if(!Z)return void x().log({level:"error",from:"marketplacePaymentContent.onSubmit",type:"No Stripe elements found.",data:{miscDataToConvertToString:{...l}}});if(!G)return void x().log({level:"error",from:"marketplacePaymentContent.onSubmit",type:"No stripe instance found.",data:{miscDataToConvertToString:{...l}}});if(!oe)return void x().log({level:"error",from:"marketplacePaymentContent.onSubmit",type:"No spaceId found.",data:{miscDataToConvertToString:{...l}}});if(!K)return void x().log({level:"error",from:"marketplacePaymentContent.onSubmit",type:"No Stripe address found or invalid input.",data:{miscDataToConvertToString:{...l}}});if(s)return void x().log({level:"error",from:"marketplacePaymentContent.onSubmit",type:"Customer already owns this product for the workspace.",data:{miscDataToConvertToString:{...l}}});if(!ce&&0!==U)return void x().log({level:"error",from:"marketplacePaymentContent.onSubmit",type:"Attempted payment without enabled payment.",data:{miscDataToConvertToString:{...l,isTaxValid:V,isPaymentElementComplete:ee,isCalculatingTax:Y,isPaying:Q}}});if("card"!==$){const e=Z.getElement("address");if(e){const t=await e.getValue();if(!t.complete)return void x().log({level:"error",from:"marketplacePaymentContent.onSubmit",type:"Google/Apply Pay attempt with incomplete address",data:{miscDataToConvertToString:{...l,addressValue:t}}})}}if("card"===$){const e=0!==U?await Z.submit():{};if(e.error)return void x().log({level:"error",from:"marketplacePaymentContent.onSubmit",type:"Element submit error",data:{miscDataToConvertToString:{...l,elementSubmitResponse:e}}})}L().A.setState({...L().A.state,showTermsAndConditionsError:!1}),X(!0),g().mM({environment:t,emailRequirement:n.emailRequirement});const d=await S().callApi({eventName:"confirmProductPurchase",environment:t,data:{productId:u,listingId:u,address:K,spaceId:oe,allowCreatorToAddToMailingList:O,couponCode:B}});if("failed"===d.type)return X(!1),x().log({level:"error",from:"marketplacePaymentContent.onSubmit",type:"Confirm product purchase failed.",data:{miscDataToConvertToString:{...l,address:K,coupon:B,result:d}}}),void w().f1((0,T().Hu)(J,d));let p,m;if(d.data.intentClientSecret){if(await Z.submit(),p=await G.confirmPayment({elements:Z,clientSecret:d.data.intentClientSecret,confirmParams:{return_url:window.location.href,expand:["amount"]},redirect:"if_required"}),void 0!==p.error)i=p.error,m="Stripe confirm payment error";else if("requires_action"===p.paymentIntent.status){const e=await G.handleNextAction({clientSecret:p.paymentIntent.client_secret??""});void 0!==e.error&&(i=e.error,m="Stripe handle next action error")}void 0!==i&&void 0!==m&&(x().log({level:"error",from:"marketplacePaymentContent.onSubmit",type:m,data:{miscDataToConvertToString:{...l,error:i}}}),b().cr(t,{error:i.code,stripe_decline_code:i.decline_code}),w().f1(J.formatMessage(ge.paymentError,{error:(0,M().translateStripeError)(J,i)})),X(!1))}g().Il({environment:t,success:void 0===i,emailRequirement:n.emailRequirement,transactionValue:null===(a=p)||void 0===a||null===(a=a.paymentIntent)||void 0===a?void 0:a.amount,error:i})}),[G,Z,s,K,oe,U,n.emailRequirement,O,t,u,ce,H,J,B,$,R,c,Y,Q,ee,V]),pe=(0,i.useMemo)((()=>(0,I().sg)(ue,2e3,{leading:!0,trailing:!1})),[ue]),me=async e=>{if(!Z||s)return;const n=function(e){return{zipCode:e.postal_code??"",country:e.country??"",addressLine1:e.line1??"",city:e.city??"",state:e.state??""}}(e.value.address);I().n4(n,K)||((0,f().Z)(n)&&l?await g().wx({environment:t,acquisitionId:c,address:n,elements:Z}):L().A.setState({...L().A.state,address:n,isTaxValid:!1,isCalculatingTax:!1}))};return se?(0,W.jsx)(xe,{displayInformation:n,alreadyOwned:s,onAddressChange:me,contacts:m??[],setIsPaymentElementComplete:te,isPaying:Q,listingId:u,acquisitionId:c,price:l??0,onSubmit:pe,isTCCheckboxEnabled:R}):(0,W.jsxs)("div",{style:ne.contentContainer,children:[s?null:(0,W.jsx)(z,{onAddressChange:me,contacts:m??[],setIsPaymentElementComplete:te,isPaying:Q}),(0,W.jsx)(le,{acquisitionId:c,displayInformation:n,alreadyOwned:s,price:l??0,isPaying:Q,onSubmit:pe,productListingId:u,isTCCheckboxEnabled:R})]})}function fe(){const{isMobileWidth:e,isTabletWidth:t,isLowResolutionTabletWidth:n}=(0,m().LS)(),a=(0,o().Y0)().isMobile?e||t:e||n;return(0,s().IS)((e=>({contentContainer:{display:"flex",gap:32,flexDirection:a?"column":"row"},mobileContentContainer:{position:"sticky",bottom:-40,display:"flex",flexDirection:"column",gap:8,background:e.popoverBackground,borderTop:"1px solid lightgray",paddingTop:16,minHeight:124}})),[a])}function xe(e){const{displayInformation:t,alreadyOwned:n,onAddressChange:a,contacts:i,setIsPaymentElementComplete:o,isPaying:r,listingId:s,acquisitionId:l,price:d,onSubmit:c,isTCCheckboxEnabled:u}=e,p=fe();return(0,W.jsxs)("div",{style:p.contentContainer,children:[(0,W.jsx)(Y,{productInformation:t}),n?null:(0,W.jsx)(z,{onAddressChange:a,contacts:i??[],setIsPaymentElementComplete:o,isPaying:r}),(0,W.jsx)(de,{productListingId:s,acquisitionId:l,price:d??0,isPaying:r}),(0,W.jsx)(ce,{displayInformation:t,listingId:s,isTCCheckboxEnabled:u}),(0,W.jsx)("div",{style:p.mobileContentContainer,children:(0,W.jsx)(pe,{onSubmit:c,price:d??0,isPaying:r})})]})}function ve(){const e=(0,o().v3)(),t=(0,d().tz)(),n=(0,s().IS)((()=>({modalContentContainer:{minHeight:400,maxHeight:850,display:"flex",padding:"32px",flexDirection:"column",gap:24,borderRadius:12,position:"relative",overflow:"auto"},headingContainer:{display:"flex",flexDirection:"column",gap:2}})),[]),i=(0,a().useElements)(),f=(0,o().Y0)().isMobile,x=(0,r().K8)((()=>{var e;return null===(e=y().default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]),v=(0,p().O)(),A=(0,r().K8)((()=>h().A.state.marketplaceListingId),[]),[C]=(0,l().Yb)((async()=>{if(!v||!i)return;if(!A||!(0,c().uj)(A))return;const n=await g().y$({environment:e,listingId:A,spaceId:v,intl:t});if(n&&(h().A.setState({...h().A.state,creatorId:n.creatorId,customerId:n.customerId}),g().Ix({environment:e,emailRequirement:n.displayInformation.emailRequirement})),n&&!n.alreadyOwned&&0!==n.contacts.length&&n.acquisitionId){const t=n.contacts[0],a={zipCode:t.address.postal_code??"",country:t.address.country??"",addressLine1:t.address.line1??"",city:t.address.city??"",state:t.address.state??""};await g().wx({environment:e,elements:i,address:a,acquisitionId:n.acquisitionId})}return n}),[v,e,A,t,i]),k=C.value;if(!A||!(0,c().uj)(A))return null;if(!k)return null;const{displayInformation:I,alreadyOwned:b,acquisitionId:S}=k,w=k.alreadyOwned?void 0:k.price,T=k.alreadyOwned?void 0:k.contacts;return(0,W.jsxs)("div",{style:n.modalContentContainer,children:[(0,W.jsxs)("div",{style:n.headingContainer,children:[(0,W.jsx)(u().D,{styleName:"UITitle-26px/Bold",colorName:"primary",children:(0,W.jsx)(d().sA,{id:"inApp.marketplace.checkout.modal.header",defaultMessage:"Checkout"})}),void 0!==x&&(0,W.jsx)(u().D,{styleName:"UIHeading-17px/Regular",colorName:"secondary",children:f?(0,W.jsx)(d().sA,{id:"inApp.marketplace.checkout.modal.mobile.subheader",defaultMessage:"This template will be added to your Private space within {spaceName}",values:{spaceName:x}}):(0,W.jsx)(d().sA,{id:"inApp.marketplace.checkout.modal.subheader",defaultMessage:"This template is being added to {spaceName}",values:{spaceName:x}})})]}),(0,W.jsx)(m().KF,{throttle:100,lowResolutionTabletUpperBound:760,children:(0,W.jsx)(he,{listingId:A,displayInformation:I,acquisitionId:S,alreadyOwned:b,price:w,contacts:T})})]})}},604633:(e,t,n)=>{n.d(t,{$D:()=>o,IT:()=>r,t6:()=>s});var a=()=>n(423600),i=()=>n(505316);function o(e){const{taxAmount:t,price:n,currencyCode:i}=e,o=new(a().W)(i,t);return new(a().W)(i,n).plus(o)}function r(e,t){return{appearance:(0,i().getLegacyStripeAppearance)(e),mode:"payment",currency:"usd",amount:1e3,paymentMethodTypes:["card"],setupFutureUsage:"on_session",locale:(0,i().stripeElementLocaleGivenNotionLocale)(t)}}function s(e){return"card"===e||"google_pay"===e||"apple_pay"===e}},621072:(e,t,n)=>{n.d(t,{A:()=>i});class a extends(()=>n(129044))().default{getInitialState(){return{duplicationStatus:null}}}const i=new a},806546:(e,t,n)=>{n.d(t,{z:()=>a});const a=(0,n(680369).xh)("checkStack",{default:{loader:()=>n.e(81328).then(n.bind(n,136171))},small:{loader:()=>n.e(70854).then(n.bind(n,629941))},mini:{loader:()=>n.e(15662).then(n.bind(n,773949))},large:{loader:()=>n.e(72126).then(n.bind(n,998573))}})},900644:(e,t,n)=>{n.d(t,{KF:()=>d,LS:()=>l});n(610931);var a=n(242343),i=()=>n(174114),o=()=>n(918786),r=n(163643);const s=(0,a.createContext)({screenWidthType:"desktop",isMobileWidth:!1,isLowResolutionTabletWidth:!1,isDesktopWidth:!1,isTabletWidth:!1});function l(){const e=(0,a.useContext)(s);if(!e)throw new Error("ScreenWidthContext not found. Please make sure this is used within a ScreenWidthContext.Provider.");return e}function d(e){const{children:t,mobileUpperBound:n=550,lowResolutionTabletUpperBound:l=720,tabletUpperBound:d=1024,throttle:c=0}=e,u=(0,a.useRef)(null),p=(0,i().IS)((()=>({sizeObserverContainer:{width:"100%",height:0,position:"absolute"}})),[]),[m,y]=(0,a.useState)("desktop"),g=(0,a.useCallback)((e=>{e.state.width<=n?y("mobile"):e.state.width>n&&e.state.width<=l?y("lowResolutionTablet"):e.state.width>l&&e.state.width<=d?y("tablet"):y("desktop")}),[n,l,d]);(0,o().B)(u,g,c);const h="mobile"===m,f="desktop"===m,x="tablet"===m,v="lowResolutionTablet"===m,A=a.useMemo((()=>({screenWidthType:m,isMobileWidth:h,isLowResolutionTabletWidth:v,isDesktopWidth:f,isTabletWidth:x})),[m,h,v,f,x]);return(0,r.jsxs)(s.Provider,{value:A,children:[(0,r.jsx)("div",{ref:u,style:p.sizeObserverContainer}),t]})}s.displayName="ScreenWidthContext"},918786:(e,t,n)=>{n.d(t,{B:()=>o});n(610931);var a=n(242343),i=()=>n(603769);function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,a.useEffect)((()=>{const a=new(i().E)({throttleMs:n});if(!e.current)throw new Error("ref.current is null");return a.observe(e.current),a.rect.addListener(t),()=>{a.destroy()}}),[t])}},922898:(e,t,n)=>{n.d(t,{A:()=>i});class a extends(()=>n(129044))().default{getInitialState(){return{isModalOpen:!1,marketplaceListingId:"",teamStore:void 0,hasSuccessfullyPurchasedProduct:!1,templateId:"",creatorId:"",customerId:""}}}const i=new a},934233:(e,t,n)=>{n.d(t,{H4:()=>v,Il:()=>C,Ix:()=>x,Ks:()=>h,Rv:()=>y,mM:()=>A,wx:()=>f,y$:()=>g,zi:()=>m});n(875472),n(76509),n(863754);var a=()=>n(502140),i=()=>n(818369),o=()=>n(145046),r=()=>n(865226),s=()=>n(137476),l=()=>n(868325),d=()=>n(477784),c=()=>n(836331),u=()=>n(323148),p=()=>n(922898);function m(e){p().A.setState({...p().A.state,isModalOpen:!1,marketplaceListingId:void 0,from:void 0});const t=new URL(window.location.href);t.searchParams.delete("checkout"),t.searchParams.delete("coupon"),t.searchParams.delete("from"),r().oo({environment:e,url:t.toString()})}function y(e){const t=new URL(window.location.href);t.searchParams.append("checkout","true"),r().oo({environment:e,url:t.toString()})}async function g(e){const{environment:t,listingId:n,spaceId:a,intl:r}=e,s=await i().callApi({eventName:"initiateProductPurchase",environment:t,data:{productId:n,listingId:n,spaceId:a}});if("success"===s.type)return s.data;m(t),o().f1((0,l().Hu)(r,s))}async function h(e){const{coupon:t,productListingId:n,environment:a}=e,o=d().A.getIntl();try{u().A.setState({...u().A.state,invalidCouponReason:""});const e=await i().callApi({eventName:"calculatePriceWithMarketplaceCoupon",environment:a,data:{productListingId:n,couponCode:t}});if("success"===e.type)return{discount:e.data.discount,discountedPrice:e.data.discountedPrice};{const t=(0,l().Hu)(o,e);u().A.setState({...u().A.state,invalidCouponReason:t})}}catch(r){u().A.setState({...u().A.state,invalidCouponReason:o.formatMessage({id:"inApp.marketplace.checkout.coupon.invalid",defaultMessage:"Something went wrong, please try again."})})}}async function f(e){const{address:t,acquisitionId:n,elements:a,environment:o}=e,r=u().A.state.discountedPrice,s=u().A.state.coupon;let l=0,d=0;u().A.setState({...u().A.state,isTaxValid:!1,isCalculatingTax:!0});const c=await i().callApi({eventName:"calculateMarketplaceTax",environment:o,data:{address:t,acquisitionId:n,couponCode:s}});if("success"===c.type&&c.data.valid){l=c.data.taxAmount,d=c.data.taxAmountWithCoupon??0;0!==(void 0!==r?c.data.totalAmountWithCoupon:c.data.totalAmount)&&a.update({amount:void 0!==r?c.data.totalAmountWithCoupon:c.data.totalAmount}),u().A.setState({...u().A.state,address:t,taxAmount:l,taxAmountWithDiscount:d,isTaxValid:!0,isCalculatingTax:!1})}}function x(e){const{environment:t,emailRequirement:n}=e,a=p().A.state;if(a.creatorId&&a.customerId&&a.marketplaceListingId&&a.templateId){const e={creator_id:a.creatorId,template_id:a.templateId,listing_id:a.marketplaceListingId,customer_id:a.customerId,email_requirement:n};(0,s().u4)({environment:t,event:{eventName:"marketplace_checkout_open",eventProperties:e}}),c().default.logEvent("marketplace_checkout_open",1,e)}}function v(e){const{environment:t,coupon:n}=e,a=p().A.state;if(a.creatorId&&a.customerId&&a.marketplaceListingId&&a.templateId){const e={creator_id:a.creatorId,template_id:a.templateId,listing_id:a.marketplaceListingId,customer_id:a.customerId,coupon:n};(0,s().u4)({environment:t,event:{eventName:"marketplace_coupon_apply",eventProperties:e}}),c().default.logEvent("marketplace_coupon_apply",1,e)}}function A(e){const{environment:t,emailRequirement:n}=e,i=p().A.state,o=u().A.state;if(i.creatorId&&i.customerId&&i.marketplaceListingId&&i.templateId&&o.paymentType){const e={creator_id:i.creatorId,template_id:i.templateId,listing_id:i.marketplaceListingId,customer_id:i.customerId,payment_method:o.paymentType,email_requirement:n};(0,s().u4)({environment:t,event:{eventName:"marketplace_payment_initiated",eventProperties:e}}),c().default.logEvent("marketplace_payment_initiated",1,e),a().log({level:"info",from:"marketplaceCheckoutActions",type:"marketplacePaymentInitiated",data:{miscDataToConvertToString:{...e}}})}}function C(e){const{environment:t,success:n,emailRequirement:i,transactionValue:o,error:r}=e,l=p().A.state,d=u().A.state;if(l.creatorId&&l.customerId&&l.marketplaceListingId&&l.templateId&&d.paymentType){const e={creator_id:l.creatorId,template_id:l.templateId,listing_id:l.marketplaceListingId,customer_id:l.customerId,payment_method:d.paymentType,email_requirement:i,transaction_value:o,success:n};(0,s().u4)({environment:t,event:{eventName:"marketplace_payment_completed",eventProperties:e}}),c().default.logEvent("marketplace_payment_completed",1,e)}n?a().log({level:"info",from:"marketplaceCheckoutActions",type:"marketplacePaymentCompletedSuccess",data:{miscDataToConvertToString:{creator_id:l.creatorId,template_id:l.templateId,listing_id:l.marketplaceListingId,customer_id:l.customerId,payment_method:d.paymentType,email_requirement:i,success:n}}}):a().log({level:"error",from:"marketplaceCheckoutActions",type:"marketplacePaymentCompletedFailure",data:{miscDataToConvertToString:{error:r,creator_id:l.creatorId,template_id:l.templateId,listing_id:l.marketplaceListingId,customer_id:l.customerId,payment_method:d.paymentType,email_requirement:i,success:n}}})}}}]);