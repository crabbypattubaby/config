"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[28307],{24071:(e,t,n)=>{n.d(t,{A:()=>u});n(242343);var i=()=>n(237385),r=()=>n(803290),o=()=>n(174114),s=()=>n(333889),a=()=>n(136239),l=()=>n(48913),c=n(163643);function d(){const e=(0,o().IS)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.text.primary:"#3E3C38",stroke:"dark"===e.mode?e.surface.wash:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,c.jsx)("div",{children:(0,s().G)(e.icon)})}function u(e){var t;const n=(0,i().v3)(),s=n.device.isMobile,{isTablet:u}=(0,i().Y0)(),f=(0,r().K8)((()=>{var t,i;if(s)return n.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(i=e.style)||void 0===i?void 0:i.paddingLeft:10)}),[n.WindowSizeStore,s,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),p=(0,o().IS)((t=>({wrapper:{...s?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:u?4:8,paddingBottom:u?4:8,paddingLeft:f,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:void 0,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,minHeight:e.isBottomItem?24:27,height:l().Zr,paddingTop:4,paddingBottom:4,...(0,a().ic)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:s?28:22,height:s?24:18,marginRight:8,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.text.secondary,width:s?24:l().ry,height:s?24:l().ry,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!s?"clip":"ellipsis",...e.childrenStyle}})),[s,u,f,e.shouldShowMobileMarginBottom,e.isBottomItem,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle]);return(0,c.jsxs)("div",{role:e.role,dir:"ltr","aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:p.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,c.jsx)("div",{style:p.left,children:e.left}),e.icon&&(0,c.jsxs)("div",{style:p.icon,children:[e.icon,e.isAlias&&(0,c.jsx)(d,{})]}),(0,c.jsx)("div",{style:p.children,children:e.children}),e.right&&(0,c.jsx)("div",{style:p.right,children:e.right})]})}},49079:(e,t,n)=>{n.d(t,{y:()=>r});n(242343);const i={viewBox:"0 0 20 20",svg:(0,n(163643).jsx)("path",{d:"M6.303 3.625c-.71 0-1.374.355-1.768.946L2.232 8.025c-.233.35-.357.76-.357 1.18v5.045c0 1.174.951 2.125 2.125 2.125h12a2.125 2.125 0 0 0 2.125-2.125V9.204c0-.42-.124-.83-.357-1.179l-2.303-3.454a2.13 2.13 0 0 0-1.768-.946zm-.728 1.64a.88.88 0 0 1 .728-.39h7.394c.293 0 .566.146.728.39l2.303 3.454a1 1 0 0 1 .083.156h-4.702a.625.625 0 0 0-.625.625v.476a1.484 1.484 0 0 1-2.968 0V9.5a.625.625 0 0 0-.625-.625H3.189a1 1 0 0 1 .083-.156zm-2.45 4.86H7.27a2.734 2.734 0 0 0 5.46 0h4.145v4.125a.875.875 0 0 1-.875.875H4a.875.875 0 0 1-.875-.875z"})},r=(0,n(680369).wt)("inbox",i)},101558:(e,t,n)=>{n.d(t,{r:()=>o});var i=()=>n(803290),r=()=>n(836331);function o(e){return(0,i().K8)((()=>r().default.getGroup(e)),[e])}},166744:(e,t,n)=>{n.d(t,{A:()=>a,g:()=>o});n(242343);var i=n(163643);const r={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:n(31448).Wy.semibold,borderRadius:4,color:n(220413).Ay.white,position:"static",marginLeft:6,WebkitFontSmoothing:"auto"};let o=function(e){return e[e.Red=0]="Red",e[e.Gray=1]="Gray",e}({});function s(e){return!!e&&e>0}const a=function(e){let{count:t,color:a,style:c,numberStyle:d,fadeIn:u}=e;const f=a===o.Red,p=(0,n(174114).IS)((e=>({badge:{...r,...c,...(t??0)>99&&{width:void 0,padding:2},background:f?e.redBadgeBackground:e.lightIconColor,...u&&{transition:"opacity 0.1s",opacity:s(t)?1:0}}})),[t,u,f,c]);return u||s(t)?(0,i.jsx)("div",{style:p.badge,children:(0,i.jsx)(l,{count:t,numberStyle:d})}):null};function l(e){let{count:t,numberStyle:n}=e;return t?1===t?(0,i.jsx)("span",{style:{marginLeft:-.5,...n},children:"1"}):t>99?(0,i.jsx)("span",{style:{letterSpacing:-.5,...n},children:"99+"}):t>9?(0,i.jsx)("span",{style:{letterSpacing:-.5,marginLeft:-.5,...n},children:t}):(0,i.jsx)("span",{style:{...n},children:t}):null}},180795:(e,t,n)=>{n.d(t,{C:()=>s});var i=n(242343),r=()=>n(629721),o=()=>n(153235);function s(){const e=(0,r().a)(),[t,n]=(0,i.useState)(0),s=(0,i.useCallback)((()=>{e.current&&n(t+1)}),[t]);return[(0,i.useCallback)((()=>o().Gt.postRender(s)),[s]),t]}},358716:(e,t,n)=>{n.d(t,{A:()=>l});n(242343);var i=()=>n(803290),r=()=>n(76394),o=()=>n(166744),s=()=>n(539581),a=n(163643);function l(e){const{type:t,...n}=e,l=(0,i().K8)((()=>{switch(t){case"currentSpace":return s().A.getUnreadCountForCurrentSpace().mentions;case"otherSpaces":return s().A.getUnreadMentionsCountForOtherSpaces();case"allSpaces":return s().A.getTotalUnreadMentionsCount();default:(0,r().HB)(t)}}),[t]);return(0,a.jsx)(o().A,{count:l,...n})}},383641:(e,t,n)=>{n.d(t,{N:()=>c});var i=n(242343);class r extends i.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function o({children:e,isPresent:t}){const n=(0,i.useId)(),o=(0,i.useRef)(null),s=(0,i.useRef)({width:0,height:0,top:0,left:0});return(0,i.useInsertionEffect)((()=>{const{width:e,height:i,top:r,left:a}=s.current;if(t||!o.current||!e||!i)return;o.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${i}px !important;\n            top: ${r}px !important;\n            left: ${a}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[t]),i.createElement(r,{isPresent:t,childRef:o,sizeRef:s},i.cloneElement(e,{ref:o}))}const s=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:l,presenceAffectsLayout:c,mode:d})=>{const u=(0,n(616098).M)(a),f=(0,i.useId)(),p=(0,i.useMemo)((()=>({id:f,initial:t,isPresent:r,custom:l,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;s&&s()},register:e=>(u.set(e,!1),()=>u.delete(e))})),c?void 0:[r]);return(0,i.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[r]),i.useEffect((()=>{!r&&!u.size&&s&&s()}),[r]),"popLayout"===d&&(e=i.createElement(o,{isPresent:r},e)),i.createElement(n(642804).t.Provider,{value:p},e)};function a(){return new Map}const l=e=>e.key||"";const c=({children:e,custom:t,initial:r=!0,onExitComplete:o,exitBeforeEnter:a,presenceAffectsLayout:c=!0,mode:d="sync"})=>{(0,n(609317).V)(!a,"Replace exitBeforeEnter with mode='wait'");const u=(0,i.useContext)(n(61034).L).forceRender||(0,n(180795).C)()[0],f=(0,n(629721).a)(),p=function(e){const t=[];return i.Children.forEach(e,(e=>{(0,i.isValidElement)(e)&&t.push(e)})),t}(e);let m=p;const h=(0,i.useRef)(new Map).current,g=(0,i.useRef)(m),y=(0,i.useRef)(new Map).current,x=(0,i.useRef)(!0);if((0,n(34979).E)((()=>{x.current=!1,function(e,t){e.forEach((e=>{const n=l(e);t.set(n,e)}))}(p,y),g.current=m})),(0,n(939448).l)((()=>{x.current=!0,y.clear(),h.clear()})),x.current)return i.createElement(i.Fragment,null,m.map((e=>i.createElement(s,{key:l(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:c,mode:d},e))));m=[...m];const b=g.current.map(l),v=p.map(l),S=b.length;for(let n=0;n<S;n++){const e=b[n];-1!==v.indexOf(e)||h.has(e)||h.set(e,void 0)}return"wait"===d&&h.size&&(m=[]),h.forEach(((e,n)=>{if(-1!==v.indexOf(n))return;const r=y.get(n);if(!r)return;const a=b.indexOf(n);let x=e;if(!x){const e=()=>{h.delete(n);const e=Array.from(y.keys()).filter((e=>!v.includes(e)));if(e.forEach((e=>y.delete(e))),g.current=p.filter((t=>{const i=l(t);return i===n||e.includes(i)})),!h.size){if(!1===f.current)return;u(),o&&o()}};x=i.createElement(s,{key:l(r),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:c,mode:d},r),h.set(n,x)}m.splice(a,0,x)})),m=m.map((e=>{const t=e.key;return h.has(t)?e:i.createElement(s,{key:l(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)})),i.createElement(i.Fragment,null,h.size?m:m.map((e=>(0,i.cloneElement)(e))))}},590240:(e,t,n)=>{n.d(t,{f:()=>R});n(725707),n(491955),n(324989),n(771702),n(403517);var i=()=>n(383641),r=()=>n(561074),o=n(242343),s=()=>n(803290),a=()=>n(174114),l=()=>n(927311),c=()=>n(657723),d=()=>n(528762),u=()=>n(975392),f=()=>n(76394),p=()=>n(479813),m=()=>n(360482),h=()=>n(863969),g=()=>n(539581),y=()=>n(485966),x=()=>n(825634),b=()=>n(413871);n(333225),n(494367),n(516262),n(573119),n(240480),n(950443),n(619601);class v extends(()=>n(129044))().default{getInitialState(){return{emojisBySpace:{}}}addEmojis(e,t){this.update((n=>{const i=n.emojisBySpace[t]||[],r=new Set(i),o=e.filter((e=>!r.has(e)));if(o.length>0){const e=10-i.length,r=o.slice(0,e);if(r.length>0)return{emojisBySpace:{...n.emojisBySpace,[t]:[...i,...r]}}}return n}))}popEmoji(e){const t=this.state.emojisBySpace[e]||[],n=t[t.length-1];return n&&this.update((n=>({emojisBySpace:{...n.emojisBySpace,[e]:t.slice(0,-1)}}))),n}getEmojis(e){return this.state.emojisBySpace[e]||[]}clearEmojis(e){this.update((t=>({emojisBySpace:{...t.emojisBySpace,[e]:[]}})))}}const S=new v;var j=n(163643);const w=.8,E=1,k=24,C=432,I=1;function R(e){const{children:t}=e,[n,v]=(0,o.useState)(!1),[R,M]=(0,o.useState)(void 0),A=(0,s().K8)((()=>x().A.state.isVisible),[]);(0,s().K8)((()=>{const e=g().A.state.results,t=y().default.state.currentUserRootStore;t&&e.forEach((e=>{var n;const i=(null===(n=e.unreceived)||void 0===n?void 0:n.notificationIds)||[],r=e.spaceId;if(!r||!i.length)return;const o=b().SL.createChildStore(t,{table:d().NX,id:r});if(!o)return;g().A.markNotificationsAsReceived(r,i);const s=i.map((e=>b().sk.createChildStore(o,{table:l()._p,id:e}))),a=u().oE(s.map((e=>{const t=m().g5(e);if(null!=t&&t.isReady())return t}))).filter((e=>"reacted"===(null==e?void 0:e.getType()))).filter((e=>!(null!=e&&e.getInvalid()))).sort(((e,t)=>{const n=Number(null==e?void 0:e.getEndTime())??0;return(Number(null==t?void 0:t.getEndTime())??0)-n})).flatMap((e=>{const t=((null==e?void 0:e.getEdits())||[]).filter((e=>e&&"reaction_id"in e&&"reaction-created"===e.type)).sort(((e,t)=>{const n=(null==e?void 0:e.timestamp)??0;return((null==t?void 0:t.timestamp)??0)-n}))[0];return(null==t?void 0:t.reaction_id)??[]})).map((e=>b().sk.createChildStore(o,{table:c().ez,id:e}))).map((e=>null==e?void 0:e.getIcon())).filter(f().O9);a.length>0&&S.addEmojis(a,r)}))}),[]);const B=(0,h().O)(),T=o.useRef(),L=o.useRef(),z=(0,o.useCallback)((()=>{T.current&&(clearTimeout(T.current),T.current=void 0),L.current&&(clearTimeout(L.current),L.current=void 0),v(!1),M(void 0)}),[]),W=(0,o.useCallback)((()=>{if(!A)return void z();if(!B)return void z();const e=S.popEmoji(B);M(e),e?(v(!0),T.current=setTimeout((()=>{v(!1),L.current=setTimeout((()=>{W()}),1e3*w)}),1e3*E)):z()}),[z,A,B]);(0,s().K8)((()=>{if(!B)return;S.getEmojis(B).length>0&&!n&&!T.current&&W()}),[n,W,B]),(0,o.useEffect)((()=>z),[z]);const P=(0,a().IS)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"center"},badge:{display:"flex",alignItems:"center"}})),[]);return(0,j.jsx)("div",{style:P.container,children:(0,j.jsx)(i().N,{mode:"wait",children:R?(0,j.jsx)(r().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:w,type:"spring",damping:k,stiffness:C,mass:I},children:(0,j.jsx)(p().A,{char:R,size:18})},`emoji-${R}`):(0,j.jsx)(r().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:w,type:"spring",damping:k,stiffness:C,mass:I},style:P.badge,children:t},"number")})})}},629721:(e,t,n)=>{n.d(t,{a:()=>o});var i=n(242343),r=()=>n(34979);function o(){const e=(0,i.useRef)(!1);return(0,r().E)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},818816:(e,t,n)=>{n.r(t),n.d(t,{SidebarInboxButton:()=>R,inboxMessages:()=>M});var i=n(242343),r=()=>n(237385),o=()=>n(803290),s=()=>n(174114),a=()=>n(49079),l=()=>n(653998),c=()=>n(31448),d=()=>n(151835),u=()=>n(931085),f=()=>n(397791),p=()=>n(103151),m=()=>n(166744),h=()=>n(24071),g=()=>n(863969),y=()=>n(101558),x=()=>n(610489),b=()=>n(271748),v=()=>n(48913),S=()=>n(539581),j=()=>n(440588),w=()=>n(907721),E=()=>n(802955),k=()=>n(590240),C=()=>n(358716),I=n(163643);function R(e){const t=(0,r().v3)(),n=(0,l().tz)(),R=(0,g().O)(),A=(0,o().K8)((()=>"inbox"===b().default.state.contentType&&b().default.isOpen()),[]),B=(0,o().O$)(j().sidebarExpandedStore),T=(0,o().K8)((()=>b().default.state.mode),[]),L=A&&"panel"===T,z=(0,i.useCallback)((()=>{x().ZT({environment:t,contentType:"inbox"})}),[t]),W=(0,s().IS)((e=>({sidebarItem:{...L&&{fontWeight:c().Wy.semibold,background:e.sidebarItemSelectedBackground}},badge:{width:void 0,minWidth:16,paddingLeft:3,paddingRight:3},number:{fontWeight:c().Wy.semibold,letterSpacing:.12,fontSize:10,fontVariantNumeric:"lining-nums tabular-nums",fontFeatureSettings:"lnum",MozFontFeatureSettings:"lnum",WebkitFontFeatureSettings:"lnum"},shortcutLabel:{color:e.text.contrastSecondary}})),[L]),P=(0,v().ab)(),F="on"===(0,y().r)("inbox_activity_split"),O=(0,o().K8)((()=>F?S().A.getUnreadCountForCurrentSpace().comments:0),[F]),G=F?(0,I.jsx)(m().A,{count:O,color:m().g.Red,style:W.badge,numberStyle:W.number,fadeIn:!0}):(0,I.jsx)(C().A,{type:"currentSpace",color:m().g.Red,style:W.badge,numberStyle:W.number,fadeIn:!0}),K="on"===(0,y().r)("collaboration_reaction_notifications")&&B,U=!(0,o().O$)(E().e);return(0,I.jsx)(p().A,{renderTooltip:()=>U?(0,I.jsx)("div",{children:n.formatMessage(M.offlineTooltip)}):(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{children:n.formatMessage(M.tooltip)}),(0,I.jsx)(d().A,{style:W.shortcutLabel,name:"toggleAllUpdates"})]}),originGap:6,placement:w().W.Right,render:t=>{var i;return(0,I.jsx)(u().A,{style:{...P.baseSidebarItem,...W.sidebarItem,...L&&P.currentSelectedSidebarItem},onClick:z,hoveredStyle:null===(i=e.styles)||void 0===i?void 0:i.buttonHoveredStyle,...t,disabled:U,disabledFeedback:U,children:(0,I.jsx)(h().A,{left:(0,I.jsx)(f().I,{icon:a().y,color:"secondary",size:"lg"}),right:K?(0,I.jsx)(k().f,{children:G},R):G,children:n.formatMessage(F?M.messagesTitle:M.inboxTitle)})})}})}const M=(0,l().YK)({tooltip:{id:"sidebar.inbox.tooltip",defaultMessage:"View recent updates and notifications"},inboxTitle:{id:"sidebar.inbox.button",defaultMessage:"Inbox"},messagesTitle:{id:"sidebar.messages.button",defaultMessage:"Messages"},offlineTooltip:{id:"sidebar.inbox.offlineTooltip",defaultMessage:"Unavailable while offline"}})},939448:(e,t,n)=>{n.d(t,{l:()=>r});var i=n(242343);function r(e){return(0,i.useEffect)((()=>()=>e()),[])}}}]);