"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[40502],{10675:(e,t,o)=>{o.d(t,{M:()=>a});const a=(0,o(680369).xh)("arrowRight",{default:{loader:()=>o.e(2287).then(o.bind(o,909796))},small:{loader:()=>o.e(36417).then(o.bind(o,898698))},mini:{loader:()=>o.e(16079).then(o.bind(o,120772))},large:{loader:()=>o.e(2485).then(o.bind(o,171966))}})},23735:(e,t,o)=>{o.d(t,{o:()=>r});o(242343);var a=o(163643);const r=(0,o(680369).wt)("arrowRightRounded",{viewBox:"0 0 16 13",svg:(0,a.jsx)("path",{d:"M15.3828 6.85156C15.3828 7.09635 15.2917 7.3099 15.1094 7.49219L9.95312 12.6328C9.77083 12.8099 9.5651 12.8984 9.33594 12.8984C9.09635 12.8984 8.89583 12.8203 8.73438 12.6641C8.57812 12.5078 8.5 12.3125 8.5 12.0781C8.5 11.9583 8.52083 11.8464 8.5625 11.7422C8.60938 11.638 8.67188 11.5469 8.75 11.4688L10.5 9.70312L13.4141 7.04688L13.6875 7.54688L10.9766 7.70312H1.48438C1.22396 7.70312 1.01302 7.625 0.851562 7.46875C0.695312 7.30729 0.617188 7.10156 0.617188 6.85156C0.617188 6.59635 0.695312 6.39062 0.851562 6.23438C1.01302 6.07292 1.22396 5.99219 1.48438 5.99219H10.9766L13.6875 6.15625L13.4141 6.66406L10.5 4L8.75 2.22656C8.67188 2.14844 8.60938 2.0599 8.5625 1.96094C8.52083 1.85677 8.5 1.74219 8.5 1.61719C8.5 1.38281 8.57812 1.1875 8.73438 1.03125C8.89583 0.875 9.09635 0.796875 9.33594 0.796875C9.45052 0.796875 9.5599 0.820312 9.66406 0.867188C9.76823 0.914062 9.86719 0.984375 9.96094 1.07812L15.1094 6.21094C15.2917 6.39323 15.3828 6.60677 15.3828 6.85156Z"})})},105373:(e,t,o)=>{o.d(t,{P:()=>n});var a=()=>o(758611),r=()=>o(865226);function n(e){const{environment:t}=e;r().oo({environment:t,url:a().JZ.marketplace,redirect:!1})}},113805:(e,t,o)=>{o.d(t,{E:()=>h,UQ:()=>w});o(610931),o(358848),o(362833),o(91270);var a=()=>o(543396),r=()=>o(769884),n=()=>o(33715),i=()=>o(314058),s=()=>o(220865),l=()=>o(846287),d=()=>o(611758),c=()=>o(444701),u=()=>o(946854),m=()=>o(975392),p=()=>o(76394),f=()=>o(84543),g=()=>o(760813),y=()=>o(272690);function h(e){const{moduleId:t,layoutStore:o,sessionId:r,environment:i,position:s}=e,l=o.getModuleById(t);if(!l)throw new Error(`Cannot move module with id ${t} because a module with that id is not in the layout`);const d=(0,y().TR)({modulesByArea:o.getModules(),moduleId:t,newPosition:s});v({...e,module:l,userAction:"BuilderLayoutModules.moveModuleToPosition",afterUpsertTransaction:()=>{var e;const t=(0,a().Cg)({moduleId:l.id,modulesByArea:o.getModules()}).length;(0,y().Ib)({environment:i,sessionId:r,collectionId:null===(e=o.getCollectionModel())||void 0===e?void 0:e.id,layoutId:o.id,context:(0,n().We)(s.area),action:d,moduleType:l.type,area:s.area,depth:t})}})}function w(e){const{position:t,module:o,layoutStore:r,sessionId:i,environment:s}=e;if(r.getModuleById(o.id))throw new Error(`Cannot add module with id ${o.id} because a module with that id is already in the layout`);v({...e,userAction:"BuilderLayoutModules.addModuleAtPosition",performBeforeApplyUpsertOperations:e=>{const{transaction:a}=e;"page_main"!==t.area&&"page_details"!==t.area||(0,u().gx)(o)&&(0,g().HD)({environment:s,transaction:a,layoutStore:r,property:o.propertyId})},afterUpsertTransaction:()=>{var l;const d=(0,a().Cg)({moduleId:o.id,modulesByArea:r.getModules()}).length;(0,y().zb)({environment:s,module:o,sessionId:i,collectionId:null===(l=r.getCollectionModel())||void 0===l?void 0:l.id,layoutId:r.id,context:(0,n().We)(t.area),isPropertyCreation:e.isPropertyCreation,area:t.area,depth:d})}})}function v(e){const{environment:t,position:o,layoutStore:a,module:c,transaction:u,userAction:m,performBeforeApplyUpsertOperations:g,afterUpsertTransaction:y}=e,h=a.pointer,w=a.getModules(),v=a.getRawModules(),_=v&&(0,l().c7)(v,(e=>e.id===c.id))||(0,s().Lv)(c),x="page_main"===o.area||"page_details"===o.area?function(e){const{layoutPointer:t,modulesByArea:o,rawModulesByArea:a}=e,i=(0,l().EX)(o,(e=>"relationsGroup"===e.type));if("form_conditional_modules"===(null==i?void 0:i.position.area))return;const d=a&&(0,l().LC)(a,(e=>"relationsGroup"===e.type));if(!i)return;if(i&&d)return;const c=i.module;if(!c||"relationsGroup"!==c.type)throw new Error("relations group module location in normalized was incorrect, cannot backfill relations group module");return function(e){var t;const{module:o,modulesByArea:a,layoutPointer:i}=e,d=(0,l().JO)(a,(e=>e.id===o.id));if(!d)throw new Error("cannot upsert module at current position because module does not have a current position");if("form_conditional_modules"===d.area)throw new Error("[Forms Conditional Logic Not Implemented] form_conditional_modules area is not supported for adding and moving modules");const c="views_main_tab_modules"===d.area?null===(t=a.views_main_tab_modules)||void 0===t?void 0:t[d.viewId]:a[d.area];if(!c||0===c.length)throw new Error("cannot upsert module at current position in area because that area is empty");const u={module:(0,s().Lv)(o),pointer:i,..."views_main_tab_modules"===d.area?{area:n().Zm[d.area],viewId:d.viewId}:{area:n().Zm[d.area]}};if(0===d.index)return r().N4X.putModuleAfter({...u,afterId:void 0});const m=c.at(d.index+1);if(!m)return r().N4X.putModuleAfter({...u,afterId:void 0});return r().N4X.putModuleBefore({...u,beforeId:m.id})}({module:c,layoutPointer:t,modulesByArea:o})}({layoutPointer:h,modulesByArea:w,rawModulesByArea:v}):null;x&&f().createAndCommitOrAppend({environment:t,perform:e=>{f().applyOperation({transaction:e,store:a,operation:x})},canUndo:!0,transaction:u,userAction:`${m||"BuilderLayoutModules.upsert"}.preOpBackfill`});const k=[],A=function(e){const{layoutStore:t,module:o,upsertPosition:a}=e,i=t.getModules(),s=(0,l().JO)(i,(e=>o.id===e.id));if(!s)return;if("form_conditional_modules"===s.area)return r().N4X.deleteModuleInArea({pointer:t.pointer,area:s.area,moduleId:o.id});if("views_main_tab_modules"===s.area){const e="absolute"===a.type&&"views_main_tab_modules"===a.area?a.viewId:void 0,n=s.viewId;if(e===n)return;return r().N4X.deleteModuleInArea({pointer:t.pointer,area:s.area,moduleId:o.id,viewId:n})}if("page_main"===s.area||"page_details"===s.area||"form_layout_schema"===s.area||"person_profile_page_main"===s.area||"person_profile_page_details"===s.area){if(s.area===a.area)return;return r().N4X.deleteModuleInArea({pointer:t.pointer,area:n().Zm[s.area],moduleId:o.id})}(0,p().HB)(s.area)}({upsertPosition:o,module:c,layoutStore:a});A&&k.push(A);const S=function(e){const{upsertPosition:t,layoutPointer:o,modulesByArea:a,rawModuleToUpsert:s}=e;if("absolute"===t.type)return function(e){const{upsertPosition:t,rawModuleToUpsert:o,layoutPointer:a,modulesByArea:s}=e,c=(0,l().JO)(s,(e=>o.id===e.id)),{area:u}=t;if("form_conditional_modules"===u){const{parentConditionalGroupId:e,parentModuleId:n}=t;if(!(0,d().V)(o,"form_conditional_modules"))throw new Error("Can only add form question or placeholder modules to form_conditional_modules area.");const c=(0,l().Ib)({modulesByArea:s,find:e=>e.id===o.parentModuleId}),u=(0,i().A)(n,s);return r().N4X.upsertChildModule({pointer:a,module:o,previousParentModuleAndArea:c,newParentModule:{area:u.area,module:u.module,conditionalGroupId:e,index:t.index},modulesByArea:s})}const m=t.index;if(m<0)throw new Error(`Cannot upsert module with id ${o.id} to a negative position`);if("views_main_tab_modules"===u){const e=t.viewId;if(!s[u]||!s[u][e])throw new Error("Cannot upsert module into views_main_tab_modules area that does not have views");const i="views_main_tab_modules"===(null==c?void 0:c.area)&&(null==c?void 0:c.viewId)===e?c.index:void 0,l=M({modulesInArea:s[u][e],indexOfModuleToUpsertInArea:i,indexToUpsertTo:m});if(!l)return;return[r().N4X.putModuleBeforeOrAfter({pointer:a,area:n().Zm[u],viewId:e,module:o,direction:l.insertDirection,beforeOrAfterId:l.beforeOrAfterId})]}const p=s[u],f=(null==c?void 0:c.area)===u?c.index:void 0,g=M({modulesInArea:p,indexOfModuleToUpsertInArea:f,indexToUpsertTo:m});if(!g)return;return[r().N4X.putModuleBeforeOrAfter({pointer:a,area:n().Zm[u],module:o,direction:g.insertDirection,beforeOrAfterId:g.beforeOrAfterId})]}({upsertPosition:t,rawModuleToUpsert:s,layoutPointer:o,modulesByArea:a});if("module_relative"===t.type)return[b({upsertPosition:t,rawModuleToUpsert:s,layoutPointer:o,modulesByArea:a})];if("area_relative"===t.type)return[C({upsertPosition:t,rawModuleToUpsert:s,layoutPointer:o,modulesByArea:a})];(0,p().HB)(t)}({module:c,upsertPosition:o,modulesByArea:w,layoutPointer:h,rawModuleToUpsert:_});S&&k.push(...S);const I="placeholder"===c.type&&"form_layout_schema"===o.area?`form_layout_new_question_${c.id}`:void 0;f().createAndCommitOrAppend({environment:t,undoCheckpoint:I,canUndo:!0,perform:e=>{g&&g({transaction:e});for(const t of k)f().applyOperation({transaction:e,store:a,operation:t})},transaction:u,userAction:m||"BuilderLayoutModules.upsert"}),y&&y()}function M(e){const{modulesInArea:t,indexOfModuleToUpsertInArea:o,indexToUpsertTo:a}=e;if(0===a||0===t.length)return{insertDirection:"before",beforeOrAfterId:void 0};const r=t.at(a);return r?void 0===o?{insertDirection:"before",beforeOrAfterId:r.id}:o!==a?o<a?{insertDirection:"after",beforeOrAfterId:r.id}:{insertDirection:"before",beforeOrAfterId:r.id}:void 0:{insertDirection:"after",beforeOrAfterId:void 0}}function b(e){const{upsertPosition:t,rawModuleToUpsert:o,layoutPointer:a,modulesByArea:i}=e,{area:s,direction:d,relativeToModuleId:c}=t,u=n().Zm[s],m=(0,l().JO)(i,(e=>e.id===c));if(!m||m.area!==s)throw new Error(`Cannot find module with id: ${c} to add upsert relative to in ${s}`);if("views_main_tab_modules"===u){const e="views_main_tab_modules"===m.area?m.viewId:void 0;if(!e)throw new Error("Cannot upsert module into views_main_tab_modules area that does not have views");return r().N4X.putModuleBeforeOrAfter({pointer:a,area:"views_main_tab_modules",viewId:e,module:o,direction:"above"===d?"before":"after",beforeOrAfterId:c})}return r().N4X.putModuleBeforeOrAfter({pointer:a,area:u,module:o,direction:"above"===d?"before":"after",beforeOrAfterId:c})}function C(e){const{upsertPosition:t,rawModuleToUpsert:o,layoutPointer:a,modulesByArea:i}=e,{location:s}=t;if("views_main_tab_modules"===t.area){const e=t.viewId,d={pointer:a,area:n().Zm[t.area],viewId:e,module:o};if("start"===s||"end"===s)return r().N4X.putModuleBeforeOrAfter({...d,direction:"start"===s?"before":"after",beforeOrAfterId:void 0});if("end_moveable"===s){var l;const e=_({area:t.area,modulesInArea:(null===(l=i.views_main_tab_modules)||void 0===l?void 0:l[t.viewId])??[]});return r().N4X.putModuleBeforeOrAfter({...d,direction:e.insertDirection,beforeOrAfterId:e.beforeOrAfterId})}(0,p().HB)(s)}const d={pointer:a,area:n().Zm[t.area],module:o};if("start"===s||"end"===s)return r().N4X.putModuleBeforeOrAfter({...d,direction:"start"===s?"before":"after",beforeOrAfterId:void 0});if("end_moveable"===s){const e=i[t.area],o=_({area:t.area,modulesInArea:e});return r().N4X.putModuleBeforeOrAfter({...d,direction:o.insertDirection,beforeOrAfterId:o.beforeOrAfterId})}(0,p().HB)(s)}function _(e){const{area:t,modulesInArea:o}=e,{nonMoveableHeaderModules:a,moveableModules:r,nonMoveableFooterModules:n}=(0,c().jS)(t,o);if(r.length){const e=(0,m().HV)(r);if(!e)throw new Error("cannot find last moveable module to add below for end moveable");return{insertDirection:"after",beforeOrAfterId:e.id}}if(a.length){const e=(0,m().HV)(a);if(!e)throw new Error("cannot find last header module to add below for end moveable");return{insertDirection:"after",beforeOrAfterId:e.id}}if(n.length){const e=n.at(0);if(!e)throw new Error("cannot find last header module to add below for end moveable");return{insertDirection:"before",beforeOrAfterId:e.id}}return{insertDirection:"after",beforeOrAfterId:void 0}}},509739:(e,t,o)=>{o.d(t,{i:()=>r});o(242343);var a=o(163643);const r=(0,o(680369).wt)("playCircle",{viewBox:"0 0 20 20",svg:(0,a.jsx)("path",{d:"M9.99316 17.126C9.02702 17.126 8.11784 16.9414 7.26562 16.5723C6.41341 16.2077 5.66146 15.6995 5.00977 15.0479C4.36263 14.3962 3.85449 13.6442 3.48535 12.792C3.11621 11.9398 2.93164 11.0306 2.93164 10.0645C2.93164 9.09831 3.11621 8.18913 3.48535 7.33691C3.85449 6.4847 4.36263 5.73503 5.00977 5.08789C5.66146 4.4362 6.41113 3.92578 7.25879 3.55664C8.111 3.1875 9.02018 3.00293 9.98633 3.00293C10.957 3.00293 11.8685 3.1875 12.7207 3.55664C13.5729 3.92578 14.3249 4.4362 14.9766 5.08789C15.6283 5.73503 16.1387 6.4847 16.5078 7.33691C16.877 8.18913 17.0615 9.09831 17.0615 10.0645C17.0615 11.0306 16.877 11.9398 16.5078 12.792C16.1387 13.6442 15.6283 14.3962 14.9766 15.0479C14.3249 15.6995 13.5729 16.2077 12.7207 16.5723C11.8685 16.9414 10.9593 17.126 9.99316 17.126ZM8.7627 12.8535L12.707 10.5293C12.821 10.4564 12.8962 10.363 12.9326 10.249C12.9736 10.1305 12.9736 10.012 12.9326 9.89355C12.8962 9.77507 12.821 9.68392 12.707 9.62012L8.7627 7.28223C8.63965 7.20931 8.51204 7.17969 8.37988 7.19336C8.25228 7.20703 8.14518 7.25488 8.05859 7.33691C7.97201 7.41439 7.92871 7.52376 7.92871 7.66504V12.4707C7.92871 12.612 7.97201 12.7259 8.05859 12.8125C8.14518 12.8945 8.25 12.9424 8.37305 12.9561C8.50065 12.9652 8.63053 12.931 8.7627 12.8535Z"})})},520276:(e,t,o)=>{o.d(t,{A:()=>s,V:()=>n});o(725707),o(324989);var a=o(242343),r=o(163643);const n={"en-US":"en","ja-JP":"ja","ko-KR":"ko","fr-FR":"fr","de-DE":"de","pt-BR":"pt-BR","es-ES":"es-ES"};function i(e){return e.src?(0,r.jsx)("img",{style:e.style,src:e.src}):null}const s=a.forwardRef((function(e,t){const n=(0,o(174114).DP)(),s=a.useRef(e);s.current=e,a.useEffect((()=>{const t=document.createElement("script");t.src="https://player.vimeo.com/api/player.js",document.body.appendChild(t);const o=window.Vimeo;if(!o)return()=>{};const a=document.getElementById(e.src),r=new o.Player(a);return r?(r.on("play",(e=>{var t,o;null===(t=(o=s.current).onPlay)||void 0===t||t.call(o,e)})),r.on("pause",(e=>{var t,o;null===(t=(o=s.current).onPause)||void 0===t||t.call(o,e)})),r.on("ended",(e=>{var t,o;null===(t=(o=s.current).onEnd)||void 0===t||t.call(o,e)})),()=>{r.off("play"),r.off("pause"),r.off("ended")}):()=>{}}),[e.src,s.current.src]);const l=function(e,t){const a=(0,o(76394).WP)(t).flatMap((e=>{let[t,o]=e;return`${t}=${o}`})).join("&");return`${e}&${a}`}(s.current.src,{texttrack:s.current.defaultTextTrack,playsinline:!1,...s.current.options}),d={position:"absolute",top:0,left:0,width:"100%",height:"100%",border:0,boxShadow:`0 1px 0 0 ${n.stroke.secondary}`};return(0,r.jsxs)(o(857703).A,{ratio:s.current.aspectRatioOverride??9/16,children:[(0,r.jsx)(i,{style:d,src:s.current.preloadThumbnailSrc}),(0,r.jsx)("iframe",{ref:t,id:s.current.src,className:s.current.className,allowFullScreen:!0,src:l,style:{...d,...s.current.style}})]})}))},554461:(e,t,o)=>{o.r(t),o.d(t,{MwnFeatureModal:()=>U});var a=()=>o(486826),r=o(242343),n=()=>o(237385),i=()=>o(803290),s=()=>o(682369),l=()=>o(84543),d=()=>o(658388),c=()=>o(435819),u=()=>o(922172),m=()=>o(485966),p=()=>o(330358),f=()=>o(689248),g=()=>o(148732),y=()=>o(266963),h=(o(725707),o(403517),o(113085),()=>o(561074)),w=()=>o(16791),v=()=>o(83544),M=()=>o(10675),b=()=>o(987916),C=()=>o(509739),_=()=>o(653998),x=()=>o(680645),k=()=>o(695951),A=()=>o(417653),S=()=>o(931085),I=()=>o(206799),T=()=>o(951540),P=()=>o(520276),F=()=>o(96297),j=()=>o(105373),B=()=>o(937968),D=o(163643);const E=["cardToDrawer","cardToActive","activeToCard","activeToDrawer","drawerToActive","drawerToCard"];function N(){y().default.removeMessage("mwn_feature_modal"),m().default.state.inAppCalloutStore.updateCalloutStatus({calloutId:"mwn_feature_modal",visible:!1})}function O(e){const t=(0,n().v3)(),o=(0,i().K8)((()=>"dark"===t.ThemeStore.state.mode),[t]);return(0,D.jsx)("div",{style:{background:o?e.resolvedColor.backing:e.resolvedColor.main,width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:12,boxShadow:o?`0 0 0 1px ${e.resolvedColor.sub}`:void 0},children:"active"===e.variant?(0,D.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,D.jsx)("path",{d:"M1 1L7 7",stroke:"white","stroke-linecap":"round"}),(0,D.jsx)("path",{d:"M7 1L1 7",stroke:"white","stroke-linecap":"round"})]}):(0,D.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,D.jsx)("path",{d:"M7 1L1 7",stroke:"white","stroke-linecap":"round"}),(0,D.jsx)("path",{d:"M1 4V7H4",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}),(0,D.jsx)("path",{d:"M7 4V1H4",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"})]})})}function R(e){const{titleParts:t,imgSrc:o,resolvedColor:a}=e,r=[v().A.images.mwn.light.mwnModalAutomation4Png,v().A.images.mwn.dark.mwnModalAutomation4Png].includes(o);return(0,D.jsxs)("div",{style:{padding:"24px 0 0 24px",borderRadius:12,flexBasis:0,flexGrow:1,height:220,overflow:"hidden",background:a.backing,color:a.main,position:"relative"},children:[(0,D.jsxs)("div",{style:{paddingRight:24,display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[(0,D.jsx)("div",{children:t.map((e=>(0,D.jsx)("div",{style:{marginTop:-4,fontSize:16,lineHeight:"125%",fontWeight:500},children:e},`internalContentTitlePart-${e}`)))}),r?(0,D.jsx)(k().A,{style:{flexShrink:0,alignSelf:void 0,marginTop:-2},content:(0,D.jsx)(_().sA,{id:"mwnFeatureModal.betaBadgeLabel",defaultMessage:"Coming soon"})}):null]}),(0,D.jsx)("div",{style:{marginTop:24,borderRadius:"12px 0 0 0",overflow:"hidden",boxShadow:"0 8px 24px 0 rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.05)"},children:(0,D.jsx)("img",{src:o,style:{borderTopLeftRadius:12,width:313,height:156,userSelect:"none",WebkitUserSelect:"none"},draggable:!1})})]})}function L(e){const{ctaOnClick:t,ctaTitle:o,variant:a,clickType:r}=e;return(0,D.jsxs)(T().A,{color:"black",size:"lg",onClick:()=>{["active"].includes(a)&&t(r)},style:{display:"inline-flex",justifyContent:"center",alignItems:"center",gap:6,marginTop:16,cursor:"pointer",zIndex:1,position:"relative"},hoveredStyle:{background:"#181818"},children:[(0,D.jsx)("span",{style:{textAlign:"center",fontSize:14,fontWeight:590},children:o}),(0,D.jsx)(I().Q,{iconGroup:M().M,variantName:"small"})]})}function Q(e){const{titleParts:t,resolvedColor:o,variant:a,name:r,subtitleParts:s,images:l,subcontents:d,ctaOnClick:c,ctaTitle:u,ctaByline:m,shortTitle:p}=e,f=(0,n().v3)(),g=(0,i().K8)((()=>"dark"===f.ThemeStore.state.mode),[f])?v().A.images.mwn.dark:v().A.images.mwn.light;return(0,D.jsxs)("div",{style:{position:"relative",top:["active","activeToDrawer"].includes(a)?-32:0,color:o.main,maxWidth:"100%",height:1148},children:[(0,D.jsxs)(h().P.div,{style:{position:"absolute"},animate:{opacity:["card","drawerToCard","activeToCard"].includes(a)?1:0},children:[(0,D.jsx)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",width:216,minHeight:48,marginBottom:4},children:(0,D.jsx)(h().P.div,{style:{display:"flex",flexDirection:"column",position:"static",paddingRight:26},children:t.map((e=>(0,D.jsx)("div",{style:{color:o.main,fontSize:20,fontWeight:600,lineHeight:"120%"},children:e},`contentTitlePart-${r}-${e}`)))})}),(0,D.jsx)("div",{style:{width:"100%",opacity:1},children:(0,D.jsx)("div",{style:{paddingTop:20,opacity:1},children:(0,D.jsx)("img",{src:l.cardCover,style:{width:"100%",borderTopLeftRadius:8,borderTopRightRadius:8},draggable:!1})})})]}),(0,D.jsxs)(h().P.div,{style:{position:"absolute"},animate:{opacity:["active","cardToActive","drawerToActive"].includes(a)?1:0},children:[(0,D.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",width:"100%"},children:(0,D.jsx)("div",{style:{color:o.main,fontSize:32,fontWeight:700,lineHeight:"120%"},children:["ko-KR","ja-JP","zh-CN","zh-TW","ko","ja"].includes(w().locale)?t.join(""):t.join(" ")})}),(0,D.jsx)("div",{style:{paddingTop:8,width:704},children:s.map((e=>(0,D.jsx)("div",{style:{color:o.main,fontSize:16,fontWeight:400,lineHeight:"128%"},children:e},`contentTitleActive-${r}-${e}`)))}),(0,D.jsx)(L,{ctaOnClick:c,ctaTitle:u,clickType:"primary_cta",variant:a}),(0,D.jsxs)("div",{style:{width:"100%",height:770,opacity:1},children:[(0,D.jsx)("div",{style:{position:"relative",paddingTop:24,width:770,marginLeft:-33,top:["Forms","Automations"].includes(r)?-32:8,height:["Forms","Automations"].includes(r)?340:300,opacity:1},children:(0,D.jsx)("img",{src:l.hero,style:{width:770},draggable:!1})}),(0,D.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:"relative",top:["active","cardToActive","drawerToActive"].includes(a)?["Forms","Automations"].includes(r)?-8:32:void 0,gap:32,width:704},children:[(0,D.jsxs)("div",{style:{display:"flex",gap:32},children:[(0,D.jsx)(R,{titleParts:d[0].titleParts,body:d[0].body,imgSrc:d[0].img,resolvedColor:o}),(0,D.jsx)(R,{titleParts:d[1].titleParts,body:d[1].body,imgSrc:d[1].img,resolvedColor:o})]}),(0,D.jsxs)("div",{style:{display:"flex",gap:32},children:[(0,D.jsx)(R,{titleParts:d[2].titleParts,body:d[2].body,imgSrc:d[2].img,resolvedColor:o}),(0,D.jsx)(R,{titleParts:d[3].titleParts,body:d[3].body,imgSrc:d[3].img,resolvedColor:o})]})]}),(0,D.jsxs)("div",{style:{height:140,marginTop:["Forms","Automations"].includes(r)?12:52,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,D.jsx)("div",{style:{color:o.main,fontSize:20,fontWeight:590,lineHeight:"125%"},children:m}),(0,D.jsxs)("div",{style:{position:"relative"},children:[(0,D.jsx)(L,{ctaOnClick:c,ctaTitle:u,clickType:"secondary_cta",variant:a}),(0,D.jsx)("img",{src:g.handPng,style:{position:"absolute",left:"100%",top:"100%",width:83,height:83},draggable:!1})]})]})]})]}),(0,D.jsx)(h().P.div,{style:{position:"absolute"},animate:{opacity:["drawer","cardToDrawer","activeToDrawer"].includes(a)?1:0},variants:{activeToDrawer:{opacity:[0,0,1],transition:{times:[0,.7,1]}}},children:(0,D.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",width:"100%"},children:(0,D.jsx)("div",{style:{color:o.main,fontSize:20,fontWeight:600,lineHeight:"120%",marginTop:-2},children:p})})})]})}function H(e){const{contentType:t,userCanCreateFormInPrivate:o,isDemo:a}=e,r=(0,_().tz)(),s=(0,n().v3)(),l=(0,i().K8)((()=>"dark"===s.ThemeStore.state.mode),[s])?v().A.images.mwn.dark:v().A.images.mwn.light,d=r.formatMessage({id:"mwnFeatureModal.forms.ctaTitle.creation",defaultMessage:"Create new form"}),c=r.formatMessage({id:"mwnFeatureModal.forms.ctaTitle.externalLink",defaultMessage:"Learn more"});switch(t){case"forms":return(0,D.jsx)(Q,{titleParts:[r.formatMessage({id:"mwnFeatureModal.forms.sectionTitle.1",defaultMessage:"Forms, right inside"}),r.formatMessage({id:"mwnFeatureModal.forms.sectionTitle.2",defaultMessage:"Notion"})],name:"Forms",shortTitle:r.formatMessage({id:"mwnFeatureModal.forms.shortTitle",defaultMessage:"Forms"}),subtitleParts:[r.formatMessage({id:"mwnFeatureModal.forms.sectionSubtitle.1",defaultMessage:"Create and share unlimited forms for free."}),r.formatMessage({id:"mwnFeatureModal.forms.sectionSubtitle.2",defaultMessage:"Then, analyze results and take action all in one place."})],images:{cardCover:l.mwnModalFormsCardPng,hero:l.mwnModalForms0Png},subcontents:[{titleParts:[r.formatMessage({id:"mwnFeatureModal.forms.feedback.title",defaultMessage:"Send RSVPs, surveys, and more"})],body:r.formatMessage({id:"mwnFeatureModal.forms.feedback.body",defaultMessage:"Easily create beautiful forms that are meant to be shared with anyone."}),img:l.mwnModalForms3Png},{titleParts:[r.formatMessage({id:"mwnFeatureModal.forms.track.title",defaultMessage:"Share forms with anyone"})],body:r.formatMessage({id:"mwnFeatureModal.forms.connect.body",defaultMessage:"Use a form to quickly capture progress on habits and goals."}),img:l.mwnModalForms4Png},{titleParts:[r.formatMessage({id:"mwnFeatureModal.forms.capture.title",defaultMessage:"Organize and act on responses"})],body:r.formatMessage({id:"mwnFeatureModal.forms.capture.body",defaultMessage:"Everything you need in a forms tool. Plus the power of Notion to organize and track information in one place."}),img:l.mwnModalForms1Png},{titleParts:[r.formatMessage({id:"mwnFeatureModal.forms.kickoff.title",defaultMessage:"Kickstart your workflow"})],body:r.formatMessage({id:"mwnFeatureModal.forms.kickoff.body",defaultMessage:"Submit a form to automatically create a task, assign it out, and notify teammates of progress."}),img:l.mwnModalForms2Png}],ctaOnClick:e=>{o?((0,x().createFormInPrivate)({environment:s,navigateToFormBuilder:!0}),N(),a||g().Y5(s,{callout_key:"mwn_feature_modal",click_type:e,variant:"FormsInApp",placement_key:"Modal"})):(a||g().Y5(s,{callout_key:"mwn_feature_modal",click_type:e,variant:"FormsExternal",placement_key:"Modal"}),window.open("https://www.notion.so/help/guides/use-forms-to-collect-organize-and-act-on-responses-in-notion","_blank"))},ctaTitle:o?d:c,ctaByline:r.formatMessage({id:"mwnFeatureModal.forms.ctaByline",defaultMessage:"Ready to try it yourself?"}),...e});case"marketplace":return(0,D.jsx)(Q,{titleParts:[r.formatMessage({id:"mwnFeatureModal.marketplace.sectionTitle.1",defaultMessage:"Introducing"}),r.formatMessage({id:"mwnFeatureModal.marketplace.sectionTitle.2",defaultMessage:"Marketplace"})],name:"Marketplace",shortTitle:r.formatMessage({id:"mwnFeatureModal.marketplace.shortTitle",defaultMessage:"Marketplace"}),subtitleParts:[r.formatMessage({id:"mwnFeatureModal.marketplace.sectionSubtitle.1",defaultMessage:"Find the perfect template, made by our community"}),r.formatMessage({id:"mwnFeatureModal.marketplace.sectionSubtitle.2",defaultMessage:"of experts, designers, and people like you."})],images:{cardCover:l.mwnModalMarketplaceCardPng,hero:l.mwnModalMarketplace0Png},subcontents:[{titleParts:[r.formatMessage({id:"mwnFeatureModal.marketplace.workflow.title",defaultMessage:"Find exactly what you’re looking for"})],body:r.formatMessage({id:"mwnFeatureModal.marketplace.workflow.body",defaultMessage:"With expert templates updated with the latest Notion features like forms, charts, and automations."}),img:l.mwnModalMarketplace1Png},{titleParts:[r.formatMessage({id:"mwnFeatureModal.marketplace.community.title",defaultMessage:"Rated and reviewed by Notion users"})],body:r.formatMessage({id:"mwnFeatureModal.marketplace.community.body",defaultMessage:"Find over 30,000 templates right in your sidebar."}),img:l.mwnModalMarketplace2Png},{titleParts:[r.formatMessage({id:"mwnFeatureModal.marketplace.trusted.title",defaultMessage:"Trusted payments and fair refunds"})],body:r.formatMessage({id:"mwnFeatureModal.marketplace.trusted.body",defaultMessage:"Explore native Notion payments, refunds, analytics, user reviews, and more."}),img:l.mwnModalMarketplace3Png},{titleParts:[r.formatMessage({id:"mwnFeatureModal.marketplace.publish.title",defaultMessage:"Publish your first template today!"})],body:r.formatMessage({id:"mwnFeatureModal.marketplace.connect.body",defaultMessage:"It's now easier than ever – whether you're a Notion expert of a person who has built a really great set-up"}),img:l.mwnModalMarketplace4Png}],ctaOnClick:e=>{(0,j().P)({environment:s}),N(),a||g().Y5(s,{callout_key:"mwn_feature_modal",click_type:e,variant:"MarketplaceInApp",placement_key:"Modal"})},ctaTitle:r.formatMessage({id:"mwnFeatureModal.marketplace.ctaTitle",defaultMessage:"Go to Marketplace"}),ctaByline:r.formatMessage({id:"mwnFeatureModal.marketplace.ctaByline",defaultMessage:"Explore 30,000+ templates"}),...e});case"layouts":return(0,D.jsx)(Q,{titleParts:[r.formatMessage({id:"mwnFeatureModal.layouts.sectionTitle.1",defaultMessage:"Layouts that fit"}),r.formatMessage({id:"mwnFeatureModal.layouts.sectionTitle.2",defaultMessage:"how you work"})],name:"Layouts",shortTitle:r.formatMessage({id:"mwnFeatureModal.layouts.shortTitle",defaultMessage:"Layouts"}),subtitleParts:[r.formatMessage({id:"mwnFeatureModal.layouts.sectionSubtitle.1",defaultMessage:"Create a unique design for your tasks, goals, documents,"}),r.formatMessage({id:"mwnFeatureModal.layouts.sectionSubtitle.2",defaultMessage:"and anything else you keep in Notion."})],images:{cardCover:l.mwnModalLayoutsCardPng,hero:l.mwnModalLayouts0Png},subcontents:[{titleParts:[r.formatMessage({id:"mwnFeatureModal.layouts.track.title",defaultMessage:"Pin what’s most important"})],body:r.formatMessage({id:"mwnFeatureModal.layouts.track.body",defaultMessage:"Pin your most important information, hide what you don't need to see."}),img:l.mwnModalLayouts1Png},{titleParts:[r.formatMessage({id:"mwnFeatureModal.layouts.beautiful.title",defaultMessage:"Make your pages beautiful"})],body:r.formatMessage({id:"mwnFeatureModal.layouts.beautiful.body",defaultMessage:"Create a unique layout that's designed to fit how you and your team work."}),img:l.mwnModalLayouts2Png},{titleParts:[r.formatMessage({id:"mwnFeatureModal.layouts.structure.title",defaultMessage:"Keep every detail organized"})],body:r.formatMessage({id:"mwnFeatureModal.layouts.structure.body",defaultMessage:"Layouts are easy to create – no complicated code or interfaces."}),img:l.mwnModalLayouts3Png},{titleParts:[r.formatMessage({id:"mwnFeatureModal.layouts.adapt.title",defaultMessage:"Adapt layouts on any database page"})],body:r.formatMessage({id:"mwnFeatureModal.layouts.adapt.body",defaultMessage:"Make your pages beautiful. Highlight artwork, files, people, and progress."}),img:l.mwnModalLayouts4Png}],ctaOnClick:e=>{a||g().Y5(s,{callout_key:"mwn_feature_modal",click_type:e,variant:"LayoutsExternal",placement_key:"Modal"}),window.open("https://www.notion.so/help/guides/build-the-perfect-workflow-with-customizable-layouts","_blank")},ctaTitle:r.formatMessage({id:"mwnFeatureModal.layouts.ctaTitle",defaultMessage:"Learn more"}),ctaByline:r.formatMessage({id:"mwnFeatureModal.layouts.ctaByline",defaultMessage:"See how it works"}),...e});case"automations":return(0,D.jsx)(Q,{titleParts:[r.formatMessage({id:"mwnFeatureModal.automations.sectionTitle.1",defaultMessage:"Automations got"}),r.formatMessage({id:"mwnFeatureModal.automations.sectionTitle.2",defaultMessage:"an upgrade"})],name:"Automations",shortTitle:r.formatMessage({id:"mwnFeatureModal.automations.shortTitle",defaultMessage:"Automations"}),subtitleParts:[r.formatMessage({id:"mwnFeatureModal.automations.sectionSubtitle.1",defaultMessage:"Send Gmail notifications, take complex actions with formulas,"}),r.formatMessage({id:"mwnFeatureModal.automations.sectionSubtitle.2",defaultMessage:"and trigger actions in other tools (coming soon)."})],images:{cardCover:l.mwnModalAutomationCardPng,hero:l.mwnModalAutomation0Png},subcontents:[{titleParts:[r.formatMessage({id:"mwnFeatureModal.automations.process.title",defaultMessage:"Less manual work"})],body:r.formatMessage({id:"mwnFeatureModal.automations.process.body",defaultMessage:"Let automations handle status updates, task assignments, and complex calculations."}),img:l.mwnModalAutomation1Png},{titleParts:[r.formatMessage({id:"mwnFeatureModal.automations.workflow.title",defaultMessage:"Automatic email notifications"})],body:r.formatMessage({id:"mwnFeatureModal.automations.workflow.body",defaultMessage:"Meet your teams where they are with automated Gmail notifications"}),img:l.mwnModalAutomation2Png},{titleParts:[r.formatMessage({id:"mwnFeatureModal.automations.customize.title",defaultMessage:"Customize actions with formulas"})],body:r.formatMessage({id:"mwnFeatureModal.automations.customize.body",defaultMessage:"Your workflows are unique – use formulas for more granular actions that can scale with your processes."}),img:l.mwnModalAutomation3Png},{titleParts:[r.formatMessage({id:"mwnFeatureModal.automations.connect.title",defaultMessage:"Actions in more tools"})],body:r.formatMessage({id:"mwnFeatureModal.automations.connect.body",defaultMessage:"Trigger custom web requests to take action in low-code/no-code platforms. (Coming soon)"}),img:l.mwnModalAutomation4Png}],ctaOnClick:e=>{a||g().Y5(s,{callout_key:"mwn_feature_modal",click_type:e,variant:"AutomationsExternal",placement_key:"Modal"}),window.open("https://www.notion.so/help/guides/Create-streamlined-project-management-workflow-using-database-automations","_blank")},ctaTitle:r.formatMessage({id:"mwnFeatureModal.automations.ctaTitle",defaultMessage:"Learn more"}),ctaByline:r.formatMessage({id:"mwnFeatureModal.automations.ctaByline",defaultMessage:"See how it works"}),...e})}}function z(e){const{contentType:t,colorTheme:o,defaultAnimatedStyle:a,defaultDrawerStyle:s,onClick:l,variant:d,onClose:c,drawerIndex:u,contentAnimationEndCallback:m,userCanCreateFormInPrivate:p,isDemo:f}=e,g=(0,n().v3)(),y=(0,i().K8)((()=>"dark"===g.ThemeStore.state.mode),[g]),[w,v]=(0,r.useState)(!0);(0,r.useEffect)((()=>{"active"!==d&&v(!0)}),[d]);const M=(0,r.useRef)(null),[C,_]=(0,r.useState)(0),{left:x,top:k,width:S,height:I}=a,T={yellow:{main:y?"#F4B542":"#BA7127",backing:y?"#5E4A2D":"#FAEBD1",sub:y?"#443729":"#FDF5E8"},red:{main:y?"#F47B71":"#C6462D",backing:y?"#633933":"#F8DBD6",sub:y?"#4B2F2A":"#FAEAE8"},blue:{main:y?"#599EFF":"#1773DE",backing:y?"#2F425E":"#D9E5F8",sub:y?"#283241":"#EBF1FB"},gray:{main:y?"#C4C4C4":"#545351",backing:y?"#4B4B4B":"#EAEAE9",sub:y?"#363636":"#F7F7F5"}}[o];(0,r.useEffect)((()=>{M.current&&"active"!==d&&M.current.scrollTo(0,0)}),[d]);const P=1+.2*u,j=.5/P,B=(.5+.1*u)/P,N=["active","cardToActive","drawerToActive"].includes(d)?32:["drawer","cardToDrawer","activeToDrawer"].includes(d)?20:24,R="active"===d?770:"drawer"===d||"cardToDrawer"===d||"activeToDrawer"===d?246:S,L={card:{maxHeight:"none",left:x,top:k,width:S,height:I,transform:"translateY(0) scale(1)",transition:{duration:.7,ease:[.25,1,.5,1]}},activeToCard:{maxHeight:"none",left:x,top:k,width:S,height:I,transform:"translateY(0) scale(1)",transition:{duration:.7,ease:[.25,1,.5,1]},cursor:"pointer"},cardHovered:{maxHeight:"none",left:x,top:k,width:S,height:I,transform:"translateY(0) scale(1.03)"},drawerToActive:{maxHeight:"none",left:[s.left,32],top:[s.top,32],width:[246,770],height:[120,560],transform:"translateY(0) scale(1)",transition:{duration:.7,ease:[.25,1,.5,1]},cursor:"default"},active:{maxHeight:"none",left:32,top:32,width:770,height:560,transform:"translateY(0) scale(1)",transition:{duration:.7,ease:[.25,1,.5,1]}},cardToActive:{maxHeight:"none",left:32,top:32,width:770,height:560,transform:"translateY(0) scale(1)",transition:{duration:.7,ease:[.25,1,.5,1]},cursor:"default"},activeToDrawer:{maxHeight:[560,560,120,120,120],left:[32,32,s.left,s.left,s.left],top:[32,-200,s.top+66,s.top+66,s.top-8],opacity:[1,0,0,1,1],width:[770,770,246,246,246],height:[496,496,120,120,120],transition:{duration:.7,times:[0,.5,.51,.52,1],ease:["circIn","linear","linear",[.25,1,.5,1]]}},cardToDrawer:{maxHeight:[240,240,120,120,120],left:[x,x,s.left,s.left,s.left],top:[k,k,s.top+66,s.top+66,s.top],width:[S,S,246,246,246],height:[I,I,120,120,120],opacity:[1,0,0,1,1],transition:{duration:P,times:[0,j,B,B+.01,1],ease:["circIn","linear","linear",[.25,1,.5,1]]}},drawerToCard:{maxHeight:[120,120,120,240,240],left:[s.left,s.left,s.left,x,x],top:[s.top,s.top+66,s.top+66,k,k],width:[246,194,194,S,S],height:[120,120,120,I,I],opacity:[1,1,0,0,1],transition:{duration:.7,times:[0,.3,.301,.6,1],ease:"linear"}},drawer:{left:s.left,top:s.top,width:246,height:120,opacity:1,cursor:"pointer"},drawerHovered:{left:s.left,top:s.top-8,width:246,height:125,maxHeight:125}};return(0,D.jsxs)(h().P.div,{ref:M,initial:!1,style:{boxSizing:"border-box",border:`1px solid ${T.sub}`,background:T.sub,color:T.main,display:"flex",position:"fixed",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",borderRadius:12,overflowY:"active"===d?"scroll":"hidden",overflowX:"hidden",zIndex:["active","cardToActive","drawerToActive"].includes(d)?2:0,transform:"translateY(0) scale(1)",maxHeight:"none",cursor:"active"!==d?"pointer":"auto"},onClick:()=>{"active"!==d&&l()},animate:d,variants:L,whileHover:`${d}Hovered`,onScroll:()=>{M.current&&_(M.current.scrollTop)},onAnimationComplete:e=>{"string"==typeof e&&(["drawerToCard","activeToCard"].includes(e)?m(t,"card"):["activeToDrawer","cardToDrawer"].includes(e)?m(t,"drawer"):["cardToActive","drawerToActive"].includes(e)&&m(t,"active"))},children:[(0,D.jsx)(h().P.div,{variants:{activeHovered:{opacity:1},card:{opacity:0},cardHovered:{opacity:1},drawer:{opacity:0},drawerHovered:{opacity:1},cardToDrawer:{opacity:0},cardToActive:{opacity:0},activeToCard:{opacity:0},activeToDrawer:{opacity:0},drawerToActive:{opacity:0},drawerToCard:{opacity:0}},style:{position:["active","activeToDrawer"].includes(d)?"sticky":"absolute",top:12,left:["active","cardToActive","drawerToActive","activeToDrawer"].includes(d)?726:R-N-20,zIndex:1},transition:{duration:.2},children:(0,D.jsx)(A().A,{style:{padding:4,borderRadius:"50%",transition:"all .2s",cursor:"pointer"},hoveredStyle:E.includes(d)?{}:{transform:"scale(1.1)",background:"none"},disabled:"active"!==d,onClick:()=>{M.current&&M.current.scrollTo(0,0),c()},children:(0,D.jsx)(O,{resolvedColor:T,variant:d})})}),"active"===d&&0===C?(0,D.jsx)(h().P.div,{style:{width:24,minHeight:24,borderRadius:4,position:"absolute",top:518,left:R/2-12,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",opacity:w?0:.7,transform:"translate(0px, 0px)",cursor:"pointer"},onClick:()=>{F().VG({element:M.current,environment:g,options:{top:460,behavior:"smooth"}})},animate:w?"entry":"infinite",onAnimationComplete:()=>{w&&v(!1)},variants:{entry:{transform:["translate(0px, 64px)","translate(0px, 0px)"],opacity:.7,transition:{duration:.8,ease:"easeInOut"}},infinite:{transform:["translate(0px, 0px)","translate(0px, 10px)","translate(0px, 0px)"],opacity:.7,transition:{duration:1.2,repeat:1/0,ease:"easeInOut"}}},children:(0,b().p)({color:T.main,width:24,height:24})}):null,(0,D.jsx)(h().P.div,{style:{width:"100%"},animate:{paddingTop:N,paddingLeft:N,paddingRight:N},children:(0,D.jsx)(H,{contentType:t,variant:d,resolvedColor:T,userCanCreateFormInPrivate:p,isDemo:f})})]})}function V(e){const{onClose:t,isDemo:o}=e,a=(0,_().tz)(),s=(0,n().v3)(),l=(0,i().K8)((()=>"dark"===s.ThemeStore.state.mode),[s]),[d,c]=(0,r.useState)("null"),[p,f]=(0,r.useState)({forms:0,marketplace:0,layouts:0,automations:0}),[y,v]=(0,r.useState)(!1),[M,b]=(0,r.useState)({forms:{top:120,left:-120},marketplace:{top:-100,left:120},layouts:{top:-100,left:-180},automations:{top:120,left:180}}),[x,k]=(0,r.useState)({forms:"card",marketplace:"card",layouts:"card",automations:"card"}),A=(0,r.useCallback)((e=>{const t=["forms","marketplace","layouts","automations"],o={...M},a={...p};if("null"===d){let r=0;for(const n of t)n!==e&&(o[n]={top:624,left:0===r?32:261*r+32},a[n]=r,r+=1);k({forms:"cardToDrawer",marketplace:"cardToDrawer",layouts:"cardToDrawer",automations:"cardToDrawer",[e]:"cardToActive"})}else o[d]={...M[e]},a[d]=p[e],k({...x,[d]:"activeToDrawer",[e]:"drawerToActive"});c(e),b(o),f(a)}),[d,M,x,p]),I=(0,r.useCallback)((()=>{c("null"),k({forms:"drawerToCard",marketplace:"drawerToCard",layouts:"drawerToCard",automations:"drawerToCard",[d]:"activeToCard"})}),[d]),F=!Object.values(x).some((e=>E.includes(e))),j=(0,r.useCallback)(((e,t)=>{k({...x,[e]:t})}),[x]),N=(0,i().K8)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:t}=m().default.state;return(0,B().EF)(s)?!!(e&&e.canEdit()&&t):((0,B().QY)(s),!1)}),[s]);return(0,D.jsxs)(h().P.div,{animate:{opacity:1},style:{width:24+("null"!==d?834:680),height:24+("null"!==d?684:676),isolation:"auto",opacity:0},transition:{duration:.5,delay:.25},children:[(0,D.jsx)("div",{style:{background:"transparent",position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:(0,D.jsxs)(h().P.div,{animate:{width:"null"!==d?834:680,height:"null"!==d?684:676},className:"notion-subpixel-antialiasing-off",transition:{ease:[.25,1,.5,1],duration:.5},style:{borderRadius:24,position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)",color:"black",background:l?"rgba(37, 37, 37, 1)":"white",padding:32,overflow:"hidden",width:680,height:676},children:[(0,D.jsx)(h().P.div,{animate:{opacity:1},style:{opacity:0},transition:{duration:.5,delay:.5},children:(0,D.jsx)("div",{style:{opacity:"null"===d?1:0,fontSize:26,fontWeight:700,lineHeight:"100%",paddingLeft:6,color:l?"rgba(225, 225, 225, 1)":"#1D1B16"},children:a.formatMessage({id:"mwnFeatureModal.mainTitle",defaultMessage:"What’s new in Notion"})})}),(0,D.jsx)(h().P.div,{animate:{opacity:1},style:{opacity:0},transition:{duration:.85,delay:.65},children:(0,D.jsx)(z,{contentType:"forms",colorTheme:"yellow",defaultAnimatedStyle:{width:280,height:240,left:32,top:88},onClick:()=>{F&&(o||("drawer"===x.forms?g().gc(s,{interaction_type:"drawer_click",callout_key:"mwn_feature_modal",placement_key:"Modal",current_active:d,content_type:"forms"}):"card"===x.forms&&g().gc(s,{interaction_type:"card_click",callout_key:"mwn_feature_modal",placement_key:"Modal",content_type:"forms"})),A("forms"))},onClose:()=>{o||g().gc(s,{interaction_type:"card_close",callout_key:"mwn_feature_modal",placement_key:"Modal",content_type:"forms"}),I()},variant:x.forms,defaultDrawerStyle:M.forms,drawerIndex:p.forms,contentAnimationEndCallback:j,userCanCreateFormInPrivate:N,isDemo:o})}),(0,D.jsx)(h().P.div,{animate:{opacity:1},style:{opacity:0},transition:{duration:.85,delay:.65},children:(0,D.jsx)(z,{contentType:"marketplace",colorTheme:"red",defaultAnimatedStyle:{width:320,height:240,left:328,top:88},onClick:()=>{F&&(o||("drawer"===x.marketplace?g().gc(s,{interaction_type:"drawer_click",callout_key:"mwn_feature_modal",placement_key:"Modal",current_active:d,content_type:"marketplace"}):"card"===x.marketplace&&g().gc(s,{interaction_type:"card_click",callout_key:"mwn_feature_modal",placement_key:"Modal",content_type:"marketplace"})),A("marketplace"))},onClose:()=>{o||g().gc(s,{interaction_type:"card_close",callout_key:"mwn_feature_modal",placement_key:"Modal",content_type:"marketplace"}),I()},variant:x.marketplace,defaultDrawerStyle:M.marketplace,drawerIndex:p.marketplace,contentAnimationEndCallback:j,isDemo:o})}),(0,D.jsx)(h().P.div,{animate:{opacity:1},style:{opacity:0},transition:{duration:.85,delay:.75},children:(0,D.jsx)(z,{contentType:"layouts",colorTheme:"blue",defaultAnimatedStyle:{width:320,height:240,left:32,top:344},onClick:()=>{F&&(o||("drawer"===x.layouts?g().gc(s,{interaction_type:"drawer_click",callout_key:"mwn_feature_modal",placement_key:"Modal",current_active:d,content_type:"layouts"}):"card"===x.layouts&&g().gc(s,{interaction_type:"card_click",callout_key:"mwn_feature_modal",placement_key:"Modal",content_type:"layouts"})),A("layouts"))},onClose:()=>{o||g().gc(s,{interaction_type:"card_close",callout_key:"mwn_feature_modal",placement_key:"Modal",content_type:"layouts"}),I()},variant:x.layouts,defaultDrawerStyle:M.layouts,drawerIndex:p.layouts,contentAnimationEndCallback:j,isDemo:o})}),(0,D.jsx)(h().P.div,{animate:{opacity:1},style:{opacity:0},transition:{duration:.85,delay:.75},children:(0,D.jsx)(z,{contentType:"automations",colorTheme:"gray",defaultAnimatedStyle:{width:280,height:240,left:368,top:344},onClick:()=>{F&&(o||("drawer"===x.automations?g().gc(s,{interaction_type:"drawer_click",callout_key:"mwn_feature_modal",placement_key:"Modal",current_active:d,content_type:"automations"}):"card"===x.automations&&g().gc(s,{interaction_type:"card_click",callout_key:"mwn_feature_modal",placement_key:"Modal",content_type:"automations"})),A("automations"))},onClose:()=>{o||g().gc(s,{interaction_type:"card_close",callout_key:"mwn_feature_modal",placement_key:"Modal",content_type:"automations"}),I()},variant:x.automations,defaultDrawerStyle:M.automations,drawerIndex:p.automations,contentAnimationEndCallback:j,isDemo:o})}),(0,D.jsx)(h().P.div,{animate:{opacity:1},style:{opacity:0},transition:{duration:.5,delay:1},children:(0,D.jsxs)(h().P.div,{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"absolute",bottom:0,left:0,right:0,padding:32,color:"#787774"},animate:{transform:"null"!==d?"translateY(100%)":void 0,opacity:"null"!==d?0:1},children:[(0,D.jsxs)(S().A,{onClick:()=>{o||g().Y5(s,{callout_key:"mwn_feature_modal",click_type:"learn_more",placement_key:"Modal"}),v(!0)},external:!0,style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"4px 8px",marginLeft:-10,borderRadius:6,fontSize:14,fontWeight:400,height:32,gap:4},hoveredStyle:{background:l?"#404040":"rgba(55, 53, 47, 0.06)"},children:[(0,C().i)({width:20,height:20}),(0,D.jsx)("div",{style:{height:20,lineHeight:"20px"},children:a.formatMessage({id:"mwnFeatureModal.externalLink",defaultMessage:"Watch the recap"})})]}),(0,D.jsx)(T().A,{onClick:t,color:"black",size:"lg",children:a.formatMessage({id:"mwnFeatureModal.mainCta",defaultMessage:"Got it"})})]})})]})}),(0,D.jsx)(u().a,{open:y,onDismiss:()=>v(!1),style:{padding:96},backgroundStyle:{width:"100vw",height:"100vh",minWidth:680,display:"flex",justifyContent:"center",alignItems:"center"},innerStyle:{width:"100%",minWidth:680,maxWidth:1280},render:()=>(0,D.jsx)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%"},children:(0,D.jsx)(P().A,{style:{width:"100%",height:"100%",position:"absolute"},src:"https://player.vimeo.com/video/1021922915?h=40078925fe",defaultTextTrack:P().V[w().locale]||"en",options:{muted:!0,autoplay:!0,loop:!0}})})})]})}function U(){const e="mwn_feature_modal",t=(0,n().v3)(),o=(0,i().K8)((()=>m().default.state.currentUserSettingsStore),[]),h=(0,i().K8)((()=>!p().A.state.open&&!t.device.isMobile),[t]),w=(0,i().K8)((()=>h&&y().default.isVisible(e)),[e,h]);(0,s().A)((()=>{g().DL(t,{callout_key:e,placement_key:"Modal"})}),w);const v=(0,r.useCallback)((()=>{g().Sq(t,{callout_key:e,dismiss_type:"modal_dismiss_clicked",placement_key:"Modal"}),f().a(t,e),o&&l().createAndCommit({environment:t,userAction:"mwnFeatureModal.dismissModal",canUndo:!0,perform:e=>{d().mJ({userSettingsStore:o,transaction:e,data:{mwn_feature_modal_dismissed_at_millis:a().c9.now().toMillis()}})}})}),[t,e,o]);return w?(0,D.jsx)(u().a,{open:!0,preventHideChildrenWhileOpening:!0,onDismiss:v,render:()=>(0,D.jsx)(c().A,{capture:!0,allowEsc:!0,render:()=>(0,D.jsx)(V,{onClose:v,isDemo:!1})})}):null}},680645:(e,t,o)=>{o.r(t),o.d(t,{FORMS_SHARE_CALLOUT_KEY:()=>X,changeFormClosedState:()=>ce,changeFormSubmissionPermissions:()=>ue,createAndFocusCollectionFormEditorView:()=>ae,createCollectionFormEditorView:()=>re,createDummyFormPage:()=>ge,createFormInPrivate:()=>ne,createFormQuestion:()=>se,createFormQuestionAndUpdateOrCreateModule:()=>de,createModuleForNewlyDuplicatedProperty:()=>le,createResponsesCollectionView:()=>ie,handleUpdateFormQuestionName:()=>ee,incrementAndTrackUserFormsCreated:()=>J,maybeAlertAboutUnsupportedPublicQuestions:()=>ye,maybeSyncQuestionNameToPropertyName:()=>te,remapQuestionToNewProperty:()=>fe,toggleAnonymousFormSubmissionState:()=>me,toggleNotionBrandingState:()=>pe});o(610931),o(362833),o(725707),o(491955),o(500234),o(771702),o(403517),o(242343);var a=()=>o(174114),r=()=>o(712437),n=()=>o(762847),i=()=>o(543396),s=()=>o(564134),l=()=>o(716605),d=()=>o(488587),c=()=>o(427091),u=()=>o(23735),m=o(163643);const p=(0,o(680369).wt)("collectionForm",{viewBox:"0 0 16 16",svg:(0,m.jsx)("path",{d:"M5.50195 4.75635C5.37435 4.75635 5.26953 4.71305 5.1875 4.62646C5.10547 4.53988 5.06445 4.43734 5.06445 4.31885C5.06445 4.1958 5.10547 4.09326 5.1875 4.01123C5.26953 3.9292 5.37435 3.88818 5.50195 3.88818H10.5059C10.6289 3.88818 10.7314 3.9292 10.8135 4.01123C10.8955 4.09326 10.9365 4.1958 10.9365 4.31885C10.9365 4.43734 10.8955 4.53988 10.8135 4.62646C10.7314 4.71305 10.6289 4.75635 10.5059 4.75635H5.50195ZM5.50195 7.0874C5.37435 7.0874 5.26953 7.04639 5.1875 6.96436C5.10547 6.87777 5.06445 6.77295 5.06445 6.6499C5.06445 6.53141 5.10547 6.43115 5.1875 6.34912C5.26953 6.26709 5.37435 6.22607 5.50195 6.22607H10.5059C10.6289 6.22607 10.7314 6.26709 10.8135 6.34912C10.8955 6.43115 10.9365 6.53141 10.9365 6.6499C10.9365 6.77295 10.8955 6.87777 10.8135 6.96436C10.7314 7.04639 10.6289 7.0874 10.5059 7.0874H5.50195ZM5.50195 9.42529C5.37435 9.42529 5.26953 9.38428 5.1875 9.30225C5.10547 9.22021 5.06445 9.11995 5.06445 9.00146C5.06445 8.87842 5.10547 8.77588 5.1875 8.69385C5.26953 8.60726 5.37435 8.56396 5.50195 8.56396H7.92188C8.04948 8.56396 8.1543 8.60726 8.23633 8.69385C8.31836 8.77588 8.35938 8.87842 8.35938 9.00146C8.35938 9.11995 8.31836 9.22021 8.23633 9.30225C8.1543 9.38428 8.04948 9.42529 7.92188 9.42529H5.50195ZM2.13867 13.1577V2.84229C2.13867 2.10856 2.32552 1.55257 2.69922 1.17432C3.07292 0.791504 3.62663 0.600098 4.36035 0.600098H11.6406C12.3743 0.600098 12.9281 0.791504 13.3018 1.17432C13.6755 1.55257 13.8623 2.10856 13.8623 2.84229V13.1577C13.8623 13.896 13.6755 14.4543 13.3018 14.8325C12.9281 15.2108 12.3743 15.3999 11.6406 15.3999H4.36035C3.62663 15.3999 3.07292 15.2108 2.69922 14.8325C2.32552 14.4543 2.13867 13.896 2.13867 13.1577ZM3.48535 13.0757C3.48535 13.3901 3.56738 13.6317 3.73145 13.8003C3.89551 13.9689 4.14388 14.0532 4.47656 14.0532H11.5312C11.8639 14.0532 12.1123 13.9689 12.2764 13.8003C12.4404 13.6317 12.5225 13.3901 12.5225 13.0757V2.93115C12.5225 2.61214 12.4404 2.36833 12.2764 2.19971C12.1123 2.02653 11.8639 1.93994 11.5312 1.93994H4.47656C4.14388 1.93994 3.89551 2.02653 3.73145 2.19971C3.56738 2.36833 3.48535 2.61214 3.48535 2.93115V13.0757Z"})});var f=()=>o(84525),g=()=>o(33715),y=()=>o(996151),h=()=>o(220574),w=()=>o(632627),v=()=>o(145017),M=()=>o(289765),b=()=>o(109046),C=()=>o(968410),_=()=>o(34662),x=()=>o(653998),k=()=>o(728373),A=()=>o(31448),S=()=>o(154956),I=()=>o(415029),T=()=>o(145046),P=()=>o(927999),F=()=>o(759625),j=()=>o(191756),B=()=>o(163875),D=()=>o(84543),E=()=>o(658388),N=()=>o(871856),O=()=>o(259897),R=()=>o(137476),L=()=>o(900921),Q=()=>o(206183),H=()=>o(754697),z=()=>o(477784),V=()=>o(689248),U=()=>o(113805),W=()=>o(130081),G=()=>o(485966),q=()=>o(836331),Z=()=>o(976603),Y=()=>o(937968),$=()=>o(659030);const K=(0,x().YK)({responsesViewName:{id:"formEditorActions.responsesViewName",defaultMessage:"Responses"},newFormViewName:{id:"formEditorActions.newFormViewName",defaultMessage:"Form builder"},formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}}),X="forms_share_form_tooltip";function J(e,t){const{currentUserSettingsStore:o}=G().default.state;if(!o)return;const a=function(){const{currentUserSettingsStore:e}=G().default.state;if(!e)return;return e.getSettingsStore().getKeyStore("user_forms_created_count").getValue()??0}();void 0!==a&&(E().mJ({userSettingsStore:o,transaction:t,data:{user_forms_created_count:a+1}}),function(e,t){(0,R().u4)({environment:e,event:{eventName:"form_created",eventProperties:{user_total_form_count:t.userFormsCreatedCount}}})}(e,{userFormsCreatedCount:a+1})),q().default.logEvent("form_created")}function ee(e){var t;const{questionStore:o,newName:a,environment:r,collectionStore:n,collectionSchema:i,collectionContextStore:s}=e,l=null===(t=o.getConfig())||void 0===t?void 0:t.propertyId;if(!l)throw new Error("No property ID found for question");D().createAndCommit({userAction:"formQuestion.changeName",environment:r,canUndo:!0,perform:e=>{var t,r;const d=null===(t=o.getConfig())||void 0===t?void 0:t.name;if(!d)return;const u=(0,w().r4)({textValue:d,getRecordModel:o.getRecordModel,deterministic:!0,userTimeZone:(0,c().P)(),intl:z().A.getIntl()})===(null===(r=i[l])||void 0===r?void 0:r.name);D().applyOperation({store:o,operation:{pointer:o.pointer,path:["config","name"],command:"set",args:[[a]]},transaction:e}),o.shouldSyncQuestionNameToPropertyName()&&(u&&!(0,Q().fE)({property:l,collectionContextStore:s,newValue:a})?S().YO({collectionStore:n,property:l,name:a,transaction:e}):D().applyOperation({store:o,operation:{pointer:o.pointer,path:["config","shouldSyncQuestionNameToPropertyName"],command:"set",args:!1},transaction:e}))}})}function te(e){var t;const{questionStore:o,environment:a,collectionStore:r,collectionContextStore:n}=e,i=null===(t=o.getConfig())||void 0===t?void 0:t.propertyId;if(!i)throw new Error("No property ID found for question");D().createAndCommit({userAction:"formQuestion.changeName",environment:a,canUndo:!0,perform:e=>{if(!o.shouldSyncQuestionNameToPropertyName())return;const t=o.getNameStore().getValue();if(!t)return;const a=(0,w().r4)({textValue:t,getRecordModel:o.getRecordModel,deterministic:!0,userTimeZone:(0,c().P)(),intl:z().A.getIntl()}),s=(0,Q().fE)({property:i,collectionContextStore:n,newValue:a})?(0,d().Q)(a):a;S().YO({collectionStore:r,property:i,name:s,transaction:e})}})}function oe(){const e=(0,a().IS)((e=>({container:{display:"flex",flexDirection:"column"},iconGroup:{display:"flex",flexDirection:"row",justifyContent:"center",color:e.icon.secondary,alignItems:"center"},dialogTitle:{fontSize:16,fontWeight:A().Wy.semibold,lineHeight:"22px",marginTop:12,marginBottom:12},dialogDescription:{color:e.text.secondary,fontSize:14,lineHeight:"20px"}})),[]);return(0,m.jsxs)("div",{style:e.container,children:[(0,m.jsxs)("div",{style:e.iconGroup,children:[(0,f().K)({width:24}),(0,u().o)({width:16,marginLeft:16,marginRight:14}),p({width:24})]}),(0,m.jsx)("span",{style:e.dialogTitle,children:(0,m.jsx)(x().sA,{defaultMessage:"Auto-create form questions based on existing properties?",id:"NewFormOnExistingCollectionDialogTitle.message"})}),(0,m.jsx)("span",{style:e.dialogDescription,children:(0,m.jsx)(x().sA,{defaultMessage:"Only supported property types will create new questions.",id:"NewFormOnExistingCollectionDialogTitle.description"})})]})}function ae(e){const{environment:t,collectionContextStore:o,transaction:a}=e,r=o.collectionViewBlockStore(),n=o.collectionStore();if(!r||!n)return;const s=o.normalizedSchemaStore.state,l=re({environment:t,collectionViewBlockStore:r,schema:s,transaction:a,initializeWithAllDefaultQuestions:!1});if(!l)return;(0,O().t)({environment:t,collectionContextStore:o,collectionViewId:l.newViewId,isFullScreen:o.isFullScreenStore.state,isRootChild:o.isRootChildStore.state,isInPeekRenderer:o.isInPeekRendererStore.state});const d=l.layoutStore,c=Object.keys(s).filter((e=>{const t=s[e];return"title"!==e&&t&&(0,i().Sg)(t)}));c.length>0&&c.length<=$().eb&&T().ui({showCancel:!1,keepFocus:!1,message:(0,m.jsx)(oe,{}),mode:"wide",items:[{label:(0,m.jsx)(x().sA,{defaultMessage:"Create {numQuestions, plural, one {1 question} other {{numQuestions} questions}}",id:"formEditorActions.createQuestions.primaryAction",values:{numQuestions:c.length}}),color:"blue",buttonType:"solid",onAccept(){D().createAndCommit({environment:t,userAction:"formActions.autoCreateFormQuestionsForExistingDatabase",canUndo:!0,perform:e=>{for(const a of c)le({type:"formQuestion",environment:t,module:void 0,transaction:e,layoutStore:d,collectionStore:n,propertyId:a,position:{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},collectionContextStore:o,shouldLogEvent:!0,autoCreatedFromExistingDatabase:!0,duplicateModuleMapping:new Map,propertyIdMapping:new Map,sessionId:(0,k().Ay)()})}})}},{label:(0,m.jsx)(x().sA,{defaultMessage:"Start from scratch",id:"formEditorActions.createQuestions.secondary"}),color:"gray",buttonType:"plain",onAccept(){}}]})}function re(e){const{environment:t,collectionViewBlockStore:o,transaction:a,schema:r,initializeWithAllDefaultQuestions:n}=e;if(!o)return;const l=o.getSpaceId(),{formBlockStore:d,layoutStore:c}=function(e){var t;const{environment:o,spaceId:a,inMemoryRecordCache:r,transaction:n,schema:l,initializeWithAllDefaultQuestions:d}=e,c=Object.keys(l).find((e=>{var t;return"multi_select"===(null===(t=l[e])||void 0===t?void 0:t.type)})),u=Boolean(d&&void 0!==c),m=(0,H().Z1)({environment:o,table:v().ev,spaceId:a}),p=(0,H().Z1)({environment:o,table:b().lo,spaceId:a}),f=u?(0,H().Z1)({environment:o,table:b().lo,spaceId:a}):void 0,g=F().Wv({id:m,environment:o,type:"form",permissions:(0,i().eb)(),inMemoryRecordCache:r,transaction:n}),h=F().eC({environment:o,table:C().zx,value:{space_id:a,parent_table:v().ev,parent_id:g.id,modules:(0,y().oP)(p,f)},inMemoryRecordCache:r,transaction:n});var w,M;P().zA({stores:[g],update:{form_layout_pointer:{id:h.id,spaceId:a,table:C().zx}},transaction:n}),se({environment:o,questionId:p,spaceId:a,layoutId:h.id,propertyId:s().rn,initialQuestionTitle:(null===(t=l[s().rn])||void 0===t?void 0:t.name)??"",inMemoryRecordCache:r,transaction:n,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1,logData:{area:"form_layout_schema",layoutStore:h}}),u&&f&&c&&se({environment:o,questionId:f,spaceId:a,layoutId:h.id,propertyId:c,initialQuestionTitle:(null===(w=l[c])||void 0===w?void 0:w.name)??"",existingFormQuestionConfig:{propertyId:c,name:[[(null===(M=l[c])||void 0===M?void 0:M.name)??""]],propertyTypeSpecificConfig:{multi_select:{maxSelectionCount:1}}},inMemoryRecordCache:r,transaction:n,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1,logData:{area:"form_layout_schema",layoutStore:h}});return{formBlockStore:g,layoutStore:h}}({environment:t,spaceId:l,inMemoryRecordCache:o.inMemoryRecordCache,transaction:a,schema:r,initializeWithAllDefaultQuestions:n}),u=(0,N().i)({environment:t,collectionViewBlockStore:o,collectionView:{type:"form_editor",parent_id:o.id,parent_table:v().ev,alive:!0,space_id:l,name:z().A.formatMessage(K.newFormViewName),format:{form_block_pointer:{id:d.id,spaceId:l,table:v().ev}}},transaction:a});return F().zv({store:d,data:{parent_id:u.id,parent_table:M().Gy,alive:!0},transaction:a}),Z().A.setState({openTooltip:u.id}),V().HH(t,X),J(t,a),{newViewId:u.id,layoutStore:c,formId:d.id}}function ne(e){const{environment:t,navigateToFormBuilder:o}=e,{currentSpaceStore:a,currentSpaceViewStore:n}=G().default.state;if(!a||!n)return;if(!(0,Y().EF)(t))return void(0,Y().QY)(t);if(!(a&&a.canEdit()&&n))return;const i=a.id,s=t.idCreator.getSpaceIdCreatorSync(i);D().createAndCommit({environment:t,userAction:"formActions.createAndNavigateToFormInPrivate",canUndo:!0,perform:e=>{var l;const{targetBlockStore:d}=I().j({environment:t,sourceBlockId:"root",targetBlockPointer:(0,H().zP)({environment:t,table:v().ev,spaceId:i}),sourceBlockSubtree:(0,h().partialRecordMapToRecordMap)(L().mT({isInline:!0,name:(0,_().x9d)(z().A.formatMessage(K.formDatabaseTitle))})),targetRecordCache:a.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,spaceIdCreator:s}),c=d.getCollectionStore(),u=null==c||null===(l=c.getModel())||void 0===l?void 0:l.getNormalizedSchema(),m=d;if(!u)throw new Error("Schema not found");re({environment:t,transaction:e,collectionViewBlockStore:m,schema:u,initializeWithAllDefaultQuestions:!0}),ie({environment:t,transaction:e,collectionViewBlockStore:m,schema:u}),B().yM({environment:t,spaceStore:a,spaceViewStore:n,pageStore:d,isPrivate:!0,transaction:e,location:{type:"prepend"}}),o&&j().uK({environment:t,store:d,pageVisitSource:r().y8.CreateFormDeepLink})}})}function ie(e){const{environment:t,collectionViewBlockStore:o,transaction:a}=e,r=o.getSpaceId(),n=Object.keys(e.schema).find((t=>{var o;return"created_by"===(null===(o=e.schema[t])||void 0===o?void 0:o.type)}));(0,N().i)({environment:t,collectionViewBlockStore:o,collectionView:{type:"table",parent_id:o.id,parent_table:v().ev,alive:!0,name:z().A.formatMessage(K.responsesViewName),space_id:r,format:{table_properties:[{property:"title",visible:!0},...n?[{property:n,visible:!0}]:[]],table_wrap:!0,collection_pointer:o.getCollectionPointer()}},transaction:a})}function se(e){const{environment:t,questionId:o,spaceId:a,layoutId:r,propertyId:n,initialQuestionTitle:i,inMemoryRecordCache:s,transaction:l,shouldSyncQuestionNameToPropertyName:d,collectionContextStore:c,shouldLogEvent:u=!0,autofocusTitle:m,existingFormQuestionConfig:p,autoCreatedFromExistingDatabase:f}=e;F().vt({environment:t,table:b().lo,args:{id:o,space_id:a,parentPointer:{id:r,table:C().zx,spaceId:a},config:{...p,propertyId:n,name:[[i]],shouldSyncQuestionNameToPropertyName:d}},inMemoryRecordCache:s,transaction:l}),u&&(0,R().u4)({environment:t,event:{eventName:"add_form_question",eventProperties:{...(0,$().YA)({collectionContextStore:c,propertyId:n,questionId:o,area:e.logData.area,parentModuleId:e.logData.parentModuleId,layoutStore:e.logData.layoutStore}),auto_created_from_existing_database:Boolean(f)}}}),m&&m.autofocusedQuestionTextStore.autofocusQuestionTitle({questionId:o})}function le(e){const{type:t,module:o,environment:a,transaction:r,layoutStore:n,position:i,duplicateModuleMapping:s,shouldLogEvent:l=!0,collectionContextStore:d,sessionId:c}=e;let u;const m=o&&s.get(o.id)||(0,k().Ay)();if("formQuestion"===t){var p;const{collectionStore:t,propertyId:c,autofocusTitle:f,existingFormQuestionConfig:y,autoCreatedFromExistingDatabase:h,propertyIdMapping:w}=e,v=t.getSchema()[c];if(!v)throw new Error(`No schema found for property ${c}`);const M=y?(0,_().q4_)(null==y?void 0:y.name):v.name,C=n.getSpaceId(),x=(0,H().Z1)({environment:a,table:b().lo,spaceId:C});if(!(0,g().uW)(i.area))throw new Error("Module is not allowed in this area");se({environment:a,questionId:x,spaceId:C,layoutId:n.id,propertyId:c,initialQuestionTitle:M,inMemoryRecordCache:n.inMemoryRecordCache,transaction:r,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:l,logData:{area:i.area,parentModuleId:null==o?void 0:o.parentModuleId,layoutStore:n},collectionContextStore:d,autofocusTitle:f,existingFormQuestionConfig:y,autoCreatedFromExistingDatabase:h}),u={type:"formQuestion",id:m,formQuestionId:x,...o?{parentModuleId:s.get(o.parentModuleId??"")??o.parentModuleId,parentConditionalGroupId:o.parentConditionalGroupId,conditionalGroups:null===(p=o.conditionalGroups)||void 0===p?void 0:p.map((e=>({...e,trigger:{...e.trigger,property:w.get(e.trigger.property)??e.trigger.property},children:[]})))}:{}}}else u={type:"placeholder",id:m,parentModuleId:s.get(o.parentModuleId??""),parentConditionalGroupId:o.parentConditionalGroupId};return(0,U().UQ)({environment:a,transaction:r,layoutStore:n,position:i,module:u,sessionId:c,isPropertyCreation:!1}),{moduleId:m}}function de(e){const{environment:t,transaction:o,layoutStore:a,propertyId:r,initialQuestionTitle:n,moduleId:i,shouldSyncQuestionNameToPropertyName:s,collectionContextStore:l,autofocusTitle:d,area:c,sessionId:u}=e,m=a.getModel();if(!m)throw new Error("Layout model cannot be undefined");const p=a.getSpaceId(),f=(0,H().Z1)({environment:t,table:b().lo,spaceId:p});se({environment:t,questionId:f,spaceId:p,layoutId:m.id,propertyId:r,initialQuestionTitle:n,inMemoryRecordCache:a.inMemoryRecordCache,transaction:o,shouldSyncQuestionNameToPropertyName:s,collectionContextStore:l,autofocusTitle:d,logData:{area:c,parentModuleId:"form_conditional_modules"===c?e.parentModuleId:void 0,layoutStore:a}});const g={type:"formQuestion",id:i??(0,k().Ay)(),formQuestionId:f,..."form_conditional_modules"===c?{parentModuleId:e.parentModuleId,parentConditionalGroupId:e.parentConditionalGroupId}:{}};return i?(0,W().UQ)({environment:t,transaction:o,layoutStore:a,position:{area:c,moduleId:i},updatedModule:g}):"form_conditional_modules"===c&&(0,U().UQ)({environment:t,transaction:o,layoutStore:a,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:e.parentConditionalGroupId,parentModuleId:e.parentModuleId},module:g,sessionId:u,isPropertyCreation:!1}),{updatedModuleId:g.id,formQuestionId:f}}function ce(e){let{environment:t,formBlockStore:o,isClosed:a}=e;o.getIsFormClosed()!==a&&D().createAndCommit({userAction:"formActions.changeFormClosedState",environment:t,canUndo:!0,perform:e=>{P().zA({stores:[o],update:{form_config:{...o.getFormConfig(),is_form_closed:a}},transaction:e})}})}function ue(e){let{environment:t,formBlockStore:o,permissions:a}=e;o.getFormSubmissionPermissions()!==a&&D().createAndCommit({userAction:"formActions.changeFormSubmissionPermissions",environment:t,canUndo:!0,perform:e=>{P().zA({stores:[o],update:{form_config:{...o.getFormConfig(),submission_permissions:a}},transaction:e})}})}function me(e){let{environment:t,formBlockStore:o}=e;const a=o.getIsFormAnonymousSubmissionEnabled();D().createAndCommit({userAction:"formActions.changeAnonymousFormSubmissionState",environment:t,canUndo:!0,perform:e=>{P().zA({stores:[o],update:{form_config:{...o.getFormConfig(),anonymous_submissions:!a}},transaction:e})}})}function pe(e){var t;let{environment:o,formBlockStore:a}=e;const r=a.getSiteStore();if(!r)return;const n=(null===(t=r.getHeader())||void 0===t?void 0:t.hideWatermark)??!1;D().createAndCommit({userAction:"formBlockStore.publicForm.toggleNotionBranding",environment:o,canUndo:!0,perform:e=>{D().applyOperation({store:r,operation:{pointer:r.pointer,path:["header","hideWatermark"],command:"set",args:!n},transaction:e})}})}function fe(e){let{environment:t,newPropertyId:o,formQuestionStore:a}=e;D().createAndCommit({userAction:"formQuestion.remapQuestionToNewProperty",environment:t,canUndo:!0,perform:e=>{D().applyOperation({store:a,operation:{pointer:a.pointer,path:["config","propertyId"],command:"set",args:o},transaction:e})}})}function ge(e){const{environment:t,collectionSchema:o,temporaryRecordCache:a,spaceId:r,collectionId:i,formMode:s}=e,l={};Object.keys(o).forEach((e=>{l[e]=(0,_().x9d)("")}));const{performResult:d}=D().createAndCommit({environment:t,userAction:"formActions.createDummyFormPage",perform:e=>{const o=F().Wv({environment:t,type:n().xd.page,inMemoryRecordCache:a,transaction:e,spaceId:r,properties:{...l}});return F().zv({store:o,data:{alive:"viewer"===s,parent_id:i,parent_table:"collection"},transaction:e}),o},canUndo:!1});return d}async function ye(e){const{environment:t,formBlockStore:o,collectionSchema:a,theme:r,onAccept:n}=e;if(!a)return;const i=(0,$().Dx)(o),s=(null==i?void 0:i.getNormalizedFormQuestionStoresForFormLayout({collectionSchema:a}))??[],d=[];if(s.forEach((e=>{const o=e.getPropertyId();if(!o)return;const r=(0,l()._g)({schema:a,property:o}),n=null==r?void 0:r.type;if(!n)return;(0,$().CK)({environment:t,propertyType:n,propertySchema:r,isPublicForm:!0})&&d.push(e)})),0===d.length)return void n();const u=d.map(((e,t)=>{const o=(0,w().r4)({textValue:e.getNameStore().getValue(),getRecordModel:e.getRecordModel,deterministic:!0,userTimeZone:(0,c().P)(),intl:z().A.getIntl()}),a=t===d.length-1;return(0,m.jsx)("div",{style:{fontSize:14,textAlign:"start",padding:"8px 12px",borderBottom:a?void 0:`1px solid ${r.lightDividerColor}`},children:o},e.id)})),{accept:p}=await T().Gh({message:(0,m.jsx)(x().sA,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.message",defaultMessage:"These questions are not supported in public forms and will not be shown to respondents:"}),description:(0,m.jsx)("div",{style:{borderRadius:6,border:`1px solid ${r.lightDividerColor}`,width:"calc(100% + 24px)",marginLeft:-12,marginTop:12,maxHeight:210,overflow:"auto"},children:u}),acceptLabel:(0,m.jsx)(x().sA,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.acceptLabel",defaultMessage:"Got it"}),acceptColor:"blue",cancelButtonType:"plain",mode:"wide"});p&&n()}},857703:(e,t,o)=>{o.d(t,{A:()=>r});o(242343);var a=o(163643);function r(e){return(0,a.jsx)("div",{style:{width:"100%",position:"relative",paddingBottom:100*e.ratio+"%"},children:e.children})}},976603:(e,t,o)=>{o.d(t,{A:()=>r});class a extends(()=>o(129044))().default{getInitialState(){return{openTooltip:void 0}}}const r=new a}}]);