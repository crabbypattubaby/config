"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[9150,22542,34983,89693],{18376:(e,t,o)=>{o.d(t,{W:()=>g});var n=()=>o(477784),i=()=>o(652039),r=()=>o(883249),l=()=>o(145046),a=()=>o(927999),s=()=>o(791497),c=()=>o(84543),d=()=>o(663539);const u=1500,p=(0,o(653998).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image linkâ€¦",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function g(e){let{environment:t,intl:o,store:n,rect:i}=e;s().W(t,{originGap:3,originRect:i,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:o.formatMessage(p.pageCover),onDelete:()=>{!function(e){let{environment:t,store:o}=e;s().I(),c().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{a().PT({store:o,transaction:e})}})}({environment:t,store:n})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:o,position:i}=e;f({environment:t,store:n,url:{originUrl:o},position:i})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:o.formatMessage(p.fileTypeCaption,{idealImageWidth:u}),onUpload:e=>{var i;s().I(),d().QM({environment:t,file:e[0],bucket:"secure",record:(null===(i=n.getCoverStore())||void 0===i?void 0:i.pointer)??n.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:m,onProgress:y,onComplete:e=>{var o;o={environment:t,store:n,url:{originUrl:e}},h({...o,position:.5})},onError:()=>{l().f1(o.formatMessage(p.uploadFailed))}})}},{type:"embed",title:o.formatMessage(p.embedTitle),inputPlaceholder:o.formatMessage(p.embedPlaceholder),caption:o.formatMessage(p.embedCaption),buttonText:o.formatMessage(p.embedSubmit),onChange:e=>{var o;o={environment:t,store:n,url:e},h({...o,position:.5}),s().I()}},{type:"unsplash",onChange:e=>{let{url:o,position:i}=e;f({environment:t,store:n,url:{originUrl:o},position:i})}}]})}async function h(e){const{environment:t,store:o,url:l,position:s}=e,{serverCommitResult:d}=c().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{a().fg({store:o,url:l,position:s||.5,transaction:e})}});await d,r().A.state.loadingMode===i().vS&&r().A.setState({loadingMode:i().Gi,dataURL:r().A.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:n().A.formatMessage(p.downloading)})}function f(e){h(e),e.environment.device.isMobile&&s().I()}function m(e){const{file:t,name:o,size:l}=e;if(s().I(),r().A.setState({loadingMode:i().Wc,file:t,name:o,size:l}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{r().A.state.loadingMode===i().Wc&&r().A.setState({...r().A.state,loadingMode:i().vS,uploadProgress:0,dataURL:e.target.result})},e.readAsDataURL(t)}else r().A.state.loadingMode===i().Wc&&r().A.setState({...r().A.state,loadingMode:i().vS,dataURL:t.dataURL,progressText:n().A.formatMessage(p.preparing)});else r().A.state.loadingMode===i().Wc&&r().A.setState({...r().A.state,loadingMode:i().vS,progressText:n().A.formatMessage(p.preparing)})}function y(e){const{progressPercent:t,progressText:o}=e;r().A.state.loadingMode===i().vS&&r().A.setState({...r().A.state,uploadProgress:t,progressText:o})}},24071:(e,t,o)=>{o.d(t,{A:()=>u});o(242343);var n=()=>o(237385),i=()=>o(803290),r=()=>o(174114),l=()=>o(333889),a=()=>o(136239),s=()=>o(48913),c=o(163643);function d(){const e=(0,r().IS)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.text.primary:"#3E3C38",stroke:"dark"===e.mode?e.surface.wash:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,c.jsx)("div",{children:(0,l().G)(e.icon)})}function u(e){var t;const o=(0,n().v3)(),l=o.device.isMobile,{isTablet:u}=(0,n().Y0)(),p=(0,i().K8)((()=>{var t,n;if(l)return o.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(n=e.style)||void 0===n?void 0:n.paddingLeft:10)}),[o.WindowSizeStore,l,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),g=(0,r().IS)((t=>({wrapper:{...l?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:u?4:8,paddingBottom:u?4:8,paddingLeft:p,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:void 0,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,minHeight:e.isBottomItem?24:27,height:s().Zr,paddingTop:4,paddingBottom:4,...(0,a().ic)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:l?28:22,height:l?24:18,marginRight:8,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.text.secondary,width:l?24:s().ry,height:l?24:s().ry,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!l?"clip":"ellipsis",...e.childrenStyle}})),[l,u,p,e.shouldShowMobileMarginBottom,e.isBottomItem,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle]);return(0,c.jsxs)("div",{role:e.role,dir:"ltr","aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:g.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,c.jsx)("div",{style:g.left,children:e.left}),e.icon&&(0,c.jsxs)("div",{style:g.icon,children:[e.icon,e.isAlias&&(0,c.jsx)(d,{})]}),(0,c.jsx)("div",{style:g.children,children:e.children}),e.right&&(0,c.jsx)("div",{style:g.right,children:e.right})]})}},40642:(e,t,o)=>{o.d(t,{b:()=>i});o(242343);var n=o(163643);const i=(0,o(680369).wt)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},59279:(e,t,o)=>{o.d(t,{Ji:()=>C,bd:()=>M,f0:()=>A,mf:()=>I,s7:()=>j});o(362833),o(242343);var n=()=>o(803290),i=()=>o(174114),r=()=>o(711361),l=()=>o(653998),a=()=>o(975392),s=()=>o(76394),c=()=>o(640979),d=()=>o(907721),u=()=>o(962373),p=()=>o(535906),g=()=>o(273520),h=()=>o(356813),f=()=>o(517198),m=()=>o(935091),y=()=>o(858023),v=()=>o(443252),x=()=>o(88271),b=()=>o(103151),S=()=>o(35462),w=o(163643);const k=20,C=12;function j(e){let{title:t,byline:o,icon:n,iconSize:i,iconMargin:r,useThinTitle:l,useSecondaryColorTitle:a,containerStyles:s,summaryStyles:c,rightContent:d,badge:u}=e;const p=A({icon:n,iconSize:i,iconMargin:r,useThinTitle:l,containerStyles:s,summaryStyles:c});return(0,w.jsxs)("div",{style:p.container,children:[n?(0,w.jsx)("div",{style:p.iconContainer,children:n}):null,(0,w.jsxs)("div",{style:p.summaryContainer,children:[(0,w.jsxs)("div",{style:p.nameContainer,children:[(0,w.jsx)(S().A,{style:p.name,isSecondaryColor:a,showTooltipWhenTruncated:!0,children:t}),u?(0,w.jsx)("div",{style:p.badge,children:u}):null]}),o?(0,w.jsx)(S().A,{style:p.byline,children:o}):null]}),d]})}function A(e){const{icon:t,iconSize:o,iconMargin:n,useThinTitle:r,containerStyles:l,summaryStyles:a}=e,s=n??C,c=t?o??k:0;return(0,i().IS)((e=>({container:{position:"relative",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:"8px 0",width:"100%",...l},summaryContainer:{width:`calc(100% - ${c}px)`,...a},iconContainer:{height:c,width:c,flexGrow:0,flexShrink:0,flexBasis:c,marginRight:s,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:6},badge:{marginRight:8},nameContainer:{display:"flex",alignItems:"center",gap:6},name:{fontSize:14,fontWeight:r?400:500},byline:{fontSize:12,lineHeight:1.3,opacity:.5}})),[c,s,r,l,a])}function I(e){let{titleStyles:t,includeByline:o,bylineStyles:n,includeIcon:r,iconStyles:l,containerStyles:a}=e;const s=(0,i().IS)((()=>({container:{height:53,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:"8px 0",width:"100%",gap:8,...a},icon:{borderRadius:4,height:24,width:24,marginLeft:-2,...l},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",width:"calc(100% - 32px)",gap:4},title:{borderRadius:4,height:14,width:"80%",...t},byline:{borderRadius:4,height:12,width:"60%",...n}})),[a,t,n,l]);return(0,w.jsxs)("div",{style:s.container,children:[r?(0,w.jsx)(f().A,{style:s.icon}):null,(0,w.jsxs)("div",{style:s.textContainer,children:[(0,w.jsx)(f().A,{style:s.title}),o?(0,w.jsx)(f().A,{style:s.byline}):null]})]})}function M(e){const t=(0,l().tz)(),o=(0,n().uB)(void 0,u().A),f=(0,i().IS)((()=>({popupMenu:{width:312}})),[]);let S=[];const k=[];for(const n of e.items)if("divider"===n.type){const t=k.length>0,o={key:`actions-${k.length}`,render:o=>(0,w.jsx)(x().A,{title:e.title,topBorder:t,...o}),items:S};k.push(o),S=[]}else if("action"===n.type){const e={key:n.key,render:e=>(0,w.jsx)(b().A,{textWrap:!0,render:t=>(0,w.jsx)(p().A,{...e,...t,isRedOnHover:n.isDestructive,shouldWrapCaption:!0,icon:n.icon,title:n.title,caption:n.caption,disabled:n.disabled,disabledFeedback:n.disabled}),renderTooltip:()=>n.tooltipTitle,disableTooltip:n.tooltipDisabled??!0,placement:d().W.Right}),action:()=>{n.action(),o.setState({...o.state,open:!1})}};S.push(e)}else(0,s().HB)(n);const C={key:`actions-${k.length}`,render:t=>(0,w.jsx)(x().A,{title:e.title,topBorder:k.length>0,...t}),items:S};return k.push(C),(0,w.jsx)(g().Ay,{stopClickPropagation:!0,popupType:v().nl.Popup,alignmentToOrigin:d().C.Start,placementToOrigin:d().W.Bottom,style:f.popupMenu,render:()=>(0,w.jsx)(m().A,{menuType:c().gu.Popup,width:312,children:(0,w.jsx)(y().Ay,{type:y().Oh.Vertical,initialFocus:void 0,sections:k})}),onClose:a().lQ,buttonPopupStore:o,renderOrigin:e=>(0,w.jsx)(h().A,{ariaLabel:t.formatMessage({id:"iconCellActionMenu.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:r()._,...e})})}},59529:(e,t,o)=>{o.r(t),o.d(t,{WorkflowAdvanced:()=>vn});var n=o(242343),i=()=>o(237385),r=()=>o(803290),l=()=>o(174114),a=()=>o(421338),s=()=>o(595922),c=()=>o(501518),d=()=>o(23633),u=(o(725707),o(491955),()=>o(39559)),p=()=>o(653998),g=()=>o(76394),h=()=>o(752401),f=()=>o(858023),m=()=>o(142708),y=()=>o(98508),v=()=>o(210466),x=()=>o(842541),b=(o(362833),o(403517),o(113085),()=>o(934889)),S=()=>o(494082),w=()=>o(752767),k=()=>o(397791),C=()=>o(88271),j=()=>o(817616);const A=(0,p().YK)({views:{id:"workflows.advanced.modal.views",defaultMessage:"Views"},data:{id:"workflows.advanced.modal.data",defaultMessage:"Data"},preview:{id:"workflows.advanced.modal.preview",defaultMessage:"Preview"},createOrConnect:{id:"workflows.advanced.modal.createOrConnect",defaultMessage:"Create or connect"},automations:{id:"workflows.advanced.modal.automations",defaultMessage:"Automations"},connections:{id:"workflows.advanced.modal.connections",defaultMessage:"Connections"},allActivity:{id:"workflows.advanced.modal.allActivity",defaultMessage:"All activity"},newView:{id:"workflows.advanced.modal.newView",defaultMessage:"New view"},debug:{id:"workflows.advanced.modal.debug",defaultMessage:"Debug"},configure:{id:"workflows.advanced.modal.configure",defaultMessage:"Configure"},copyFunctionContents:{id:"workflowFunction.copyFunctionContents",defaultMessage:"Copy function contents"},save:{id:"workflowFunction.save",defaultMessage:"Save"},edit:{id:"workflowFunction.edit",defaultMessage:"Edit function"},cancel:{id:"workflowFunction.cancel",defaultMessage:"Cancel"}});var I=()=>o(535906),M=()=>o(701270),T=()=>o(993054),_=o(163643);function R(e){const{environment:t,key:o,blockStore:n,currentNavigationState:i,targetNavigationState:r,title:l,icon:a,indentLevel:s=0}=e,d=(0,c().getIsWorkflowNavigationStateCurrent)({currentNavigationState:i,navigationState:r});return{key:o,render:e=>(0,_.jsx)(B,{...e,isCurrent:d,targetNavigationState:r,title:l,icon:a,indentLevel:s}),action:e=>{(0,T().showWorkflowEditor)({environment:t,parentStore:n,navigationState:r})}}}const B=n.forwardRef(((e,t)=>{const{isCurrent:n,targetNavigationState:i,title:r,icon:a,indentLevel:s,...c}=e,d=(0,l().IS)((e=>({currentButton:{background:e.sidebarItemSelectedBackground,borderRadius:6},button:{paddingLeft:o(772074).Qm+14*s,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})),[s]);return(0,_.jsx)(I().A,{...c,ref:t,style:{...d.button,...n?d.currentButton:{}},title:(0,_.jsx)(M().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:r}),icon:a})}));function P(e){const{blockStore:t,currentNavigationState:o,workflow:n,environment:i,intl:r}=e,l=(0,j().Bn)(n),a=l.filter((e=>"client_react_component"===e.type)),s=(0,j().nG)(n);if(0===a.length&&0===s.length)return;const d=R({key:"all-activity",environment:i,blockStore:t,currentNavigationState:o,targetNavigationState:{type:"runs",runId:void 0},title:r.formatMessage(A.allActivity),icon:(0,_.jsx)(k().I,{size:"default",color:"secondary",icon:b().clockIcon})}),u=[];for(const g of s){u.push(R({key:`trigger-${g.key}`,environment:i,blockStore:t,currentNavigationState:o,targetNavigationState:{type:"trigger",key:g.key},title:g.name,icon:(0,_.jsx)(k().I,{size:"default",color:"secondary",icon:w().lightningFillIcon})}));const e=(0,j()._q)({functionKey:g.key,allFunctions:l}),n=(0,c().getIsWorkflowNavigationStateCurrent)({currentNavigationState:o,navigationState:{type:"trigger",key:g.key}}),r=e.some((e=>(0,c().getIsWorkflowNavigationStateCurrent)({currentNavigationState:o,navigationState:{type:"function",key:e.key}}))),a=n||r;if(e.length>0&&a)for(const l of e)u.push(R({key:`trigger-${g.key}-function-${l.key}`,indentLevel:1,environment:i,blockStore:t,currentNavigationState:o,targetNavigationState:{type:"function",key:l.key},title:l.name||l.key,icon:(0,_.jsx)(k().I,{size:"default",color:"secondary",icon:S().Z})}))}const p=a.map((e=>R({key:`function-${e.key}`,environment:i,blockStore:t,currentNavigationState:o,targetNavigationState:{type:"function",key:e.key},title:e.name||e.key,icon:(0,_.jsx)(k().I,{size:"default",color:"secondary",icon:S().Z})})));return{key:"automations",items:[d,...u,...p],render:e=>(0,_.jsx)(C().A,{title:r.formatMessage(A.automations),...e})}}B.displayName="WorkflowAdvancedButtonMenuItem";var L=()=>o(18642),F=()=>o(889301),N=()=>o(615705),W=()=>o(246203);const D=20;function z(e){const{module:t,blockStore:o,size:n}=e,i=V({size:n});return"database"===t.type&&o?(0,_.jsx)(E,{module:t,blockStore:o,size:n}):(0,W().c)(t)(i.icon)}function E(e){let{module:t,blockStore:o,size:i}=e;const l=V({size:i}),a=(0,n.useMemo)((()=>(0,N().V4)({module:t,store:o})),[t,o]),{collectionIcon:s,isExternal:c}=(0,r().K8)((()=>({collectionIcon:null==a?void 0:a.getIcon(),isExternal:(null==a?void 0:a.getParentId())!==(null==o?void 0:o.id)})),[a,o]);return s?(0,_.jsx)(F().A,{icon:s,isEmptyPage:!1,isAlias:c,size:i??D,iconStyle:l.icon}):(0,W().c)(t)(l.icon)}function V(e){const{size:t=D}=e??{};return(0,l().IS)((e=>({icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:t,height:t,fill:e.icon.secondary,margin:0},yellow:{fill:e.icon.yellowPrimary},failedIcon:{width:16,height:16,fill:e.accentColors.red[400]}})),[t])}function O(e){const{blockStore:t,currentNavigationState:o,workflow:n,environment:i,intl:r}=e,l=(0,j().Rd)(n);if(0===l.length)return;return{key:"connections",items:l.map((e=>R({key:e.key,environment:i,blockStore:t,currentNavigationState:o,targetNavigationState:{type:"module",key:e.key},title:L().d.getName(e,r),icon:(0,_.jsx)(z,{blockStore:t,module:e})}))),render:e=>(0,_.jsx)(C().A,{title:r.formatMessage(A.connections),...e})}}var H=()=>o(178063),U=()=>o(521325),K=()=>o(261603),Y=()=>o(273520),X=()=>o(511952),$=()=>o(28210),G=()=>o(709237),J=()=>o(749975),Q=()=>o(475923);function q(e){var t;const{blockStore:o,previewCollectionContextStore:n,currentNavigationState:i,environment:r,intl:l}=e;return{key:"data",items:[...(null===(t=o.getCollectionStores())||void 0===t?void 0:t.map((e=>R({key:e.id,environment:r,blockStore:o,currentNavigationState:i,targetNavigationState:{type:"database",id:e.id},title:(0,_.jsx)(G().A,{store:e,style:{fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit"}}),icon:(0,_.jsx)($().B,{icon:e.getIcon(),size:D,isEmptyPage:!1,disabled:!0})}))))??[],{key:"create-or-connect",render:e=>(0,_.jsx)(X().A,{...e,popupType:Y().z7.Popup,placementToOrigin:Y().sx.Right,render:e=>(0,_.jsx)(J().RI,{value:n,children:(0,_.jsx)(K().m$,{context:Q().Bd.ViewSettings,collectionContextStore:n,collectionSettingsStore:n.settingsStore,fullHeight:!1,handleAddItemClick:e.close})}),renderOrigin:t=>(0,_.jsx)(I().A,{...e,...t,title:(0,_.jsx)(M().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:l.formatMessage(A.createOrConnect)}),icon:(0,_.jsx)(k().I,{size:"default",color:"secondary",icon:H().plusIcon})})}),action:()=>{U().Ow({collectionContextStore:n,collectionSettingsStore:n.settingsStore}),U().R8({collectionSettingsStore:n.settingsStore,item:{type:"createViewSource",existingCollectionStore:void 0,createdCollectionRecordPointerMap:void 0}})}}],render:e=>(0,_.jsx)(C().A,{title:l.formatMessage(A.data),...e})}}var Z=()=>o(389324),ee=()=>o(308265);function te(e){const{blockStore:t,currentNavigationState:o,environment:n,intl:i}=e;if(!(0,ee().Ke)())return;return{key:"debug",items:[R({key:"debug",environment:n,blockStore:t,currentNavigationState:o,targetNavigationState:{type:"debug"},title:i.formatMessage(A.debug),icon:(0,_.jsx)(k().I,{size:"default",color:"secondary",icon:Z().gearIcon})})],render:e=>(0,_.jsx)(C().A,{title:i.formatMessage(A.debug),...e})}}var oe=()=>o(434626);function ne(e){const{blockStore:t,currentNavigationState:o,environment:n,intl:i}=e;if(0===t.getCollectionViewStores().length)return;return{key:"preview",items:[R({key:"preview",environment:n,blockStore:t,currentNavigationState:o,targetNavigationState:{type:"configure"},title:i.formatMessage(A.preview),icon:(0,_.jsx)(k().I,{size:"default",color:"secondary",icon:oe().eyeIcon})})],render:e=>(0,_.jsx)(C().A,{title:i.formatMessage(A.preview),...e,hideTitle:!0,disableDesktopPadding:!1})}}var ie=()=>o(497808),re=()=>o(511441);function le(e){const{blockStore:t,currentNavigationState:o,previewCollectionContextStore:n,environment:i,intl:r,theme:l}=e,a=t.getCollectionViewStores().map((e=>{const t=e.getFormat().collection_view_icon,o=e.getType();return{store:e,icon:t,type:o}})).map((e=>R({key:e.store.id,environment:i,blockStore:t,currentNavigationState:o,targetNavigationState:{type:"preview",collectionViewId:e.store.id},title:(0,_.jsx)(G().A,{store:e.store}),icon:(0,_.jsx)(re().h,{color:"lightGray",viewType:e.type,viewIcon:e.icon,size:20,style:{fill:l.icon.secondary}})}))),s=!0;return{key:"views",items:[...a,{key:"new-view",render:e=>(0,_.jsx)(X().A,{...e,disabled:s,popupType:Y().z7.Popup,placementToOrigin:Y().sx.Right,render:e=>(0,_.jsx)(J().RI,{value:n,children:(0,_.jsx)(ie().y7,{collectionContextStore:n,onClose:e.close,forceHideAdvancedConfigItems:!1})}),renderOrigin:t=>(0,_.jsx)(I().A,{...e,...t,disabled:s,title:(0,_.jsx)(M().D,{styleName:"UIRegular-14px/Medium",colorName:"tertiary",children:r.formatMessage(A.newView)}),icon:(0,_.jsx)(k().I,{size:"default",color:"tertiary",icon:H().plusIcon})})}),action:()=>{}}],render:e=>(0,_.jsx)(C().A,{title:r.formatMessage(A.views),...e})}}function ae(e){const{previewCollectionContextStore:t}=e,o=(0,r().uB)(void 0,v().A),[s,b]=(0,n.useState)({size:300,speed:"animate"}),S=(0,i().v3)(),w=(0,p().tz)(),k=(0,l().DP)(),{blockStore:C}=(0,d().$O)(),j=(0,c().useWorkflowNavigationState)(),A=(0,x().N)().workflowValue??u().ZB,I=(0,r().K8)((()=>{const e={environment:S,intl:w,theme:k,blockStore:C,previewCollectionContextStore:t,currentNavigationState:j,workflow:A};return[ne(e),le(e),q(e),O(e),P(e),te(e)].filter(g().O9)}),[S,w,k,C,t,j,A]);return(0,_.jsx)(h().z,{anchorToSide:"left",isOpen:!0,isResizable:!0,width:s,onWidthChange:b,children:(0,_.jsx)(a().Y1,{direction:"vertical",width:"fill",height:"fill",style:{minWidth:0},children:(0,_.jsx)(m().H,{type:y().A.Y,style:{padding:6},children:(0,_.jsx)(f().Ay,{type:f().Oh.Vertical,initialFocus:void 0,resetFocusOnMouseOut:!0,sections:I,store:o,disableKeyboard:!0})})})})}o(500234);var se=()=>o(34559),ce=()=>o(555434),de=()=>o(61544),ue=()=>o(172694),pe=()=>o(312430),ge=()=>o(21164),he=()=>o(111066),fe=()=>o(417925),me=()=>o(801204),ye=()=>o(64713),ve=()=>o(286270),xe=()=>o(772357),be=()=>o(390263),Se=()=>o(413871);function we(e){const{icon:t,label:o,right:n,description:i}=e,r=(0,l().IS)((e=>({outer:{minHeight:76},divider:{borderBottom:`0.5px solid ${e.stroke.primary}`,width:"100%",height:0}})),[]);return(0,_.jsxs)(a().Y1,{direction:"vertical",padding:"0 0 0 24px",children:[(0,_.jsxs)(a().Y1,{direction:"horizontal",gap:"auto",align:"center",padding:`24px 24px ${i?"0":"24px"} 0px`,style:r.outer,children:[(0,_.jsxs)(a().Y1,{direction:"horizontal",align:"center-left",gap:12,children:[t,o?(0,_.jsx)(M().D,{styleName:"UITitle-Medium-20px/Semibold",children:o}):null]}),n?(0,_.jsx)(a().Y1,{direction:"horizontal",width:"hug",align:"center-right",gap:4,children:n}):null]}),i?(0,_.jsx)(a().Y1,{direction:"horizontal",padding:"0 0 24px 0",children:(0,_.jsx)(M().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:i})}):null,(0,_.jsx)("div",{style:r.divider})]})}function ke(e){const{blockStore:t,databaseId:o}=e,s=(0,i().v3)(),c=(0,n.useMemo)((()=>Se().md.createChildStore(t,{table:ge().Vl,id:o,spaceId:t.getSpaceId()})),[o,t]),[d,u]=(0,n.useState)(void 0),p=(0,l().IS)((e=>({scroller:{flex:1}})),[]),g=(0,r().K8)((()=>he().u5(s)),[s]);return(0,_.jsx)(be().tx,{value:{isPreviewing:!0,disablePageLinks:!0,disableAllPointerEvents:!1,hideTableAggregationRow:!0,disableEditingName:!0,hideViewBlockSource:!0,location:"app_builder"},children:(0,_.jsxs)(a().Y1,{direction:"vertical",width:"fill",height:"fill",style:{minWidth:0,minHeight:0},children:[(0,_.jsx)(Ce,{collectionContextStore:d,collectionStore:c}),c?(0,_.jsx)(m().H,{type:y().A.All,style:p.scroller,preventType:g,children:(0,_.jsx)(ye().dN,{store:t,overridePaddingLeft:24,overridePaddingRight:0,isFullScreen:!0,hideViewTabBar:!0,productUseCase:"preview_collection",disabled:!1,headerAllowedActions:["filter","sort","search","viewSettings","addItem"],headerActionsBehavior:"hidden",setCollectionContextStore:e=>{const o=(0,fe().d)({environment:s,collectionStore:c,collectionViewBlockStore:t,freezeTitle:!1});e.setContext({type:"collectionSettings",collectionViewBlockStore:t,collectionStore:c,collectionViewStore:o}),u(e)}})}):(0,_.jsx)(a().Y1,{padding:24,children:(0,_.jsx)(xe().l,{tint:"yellow",label:"Couldn't get collection store from database module",display:"inline"})})]})})}function Ce(e){const{collectionContextStore:t,collectionStore:o}=e,n=(0,r().r6)((()=>!1),[]),i=(0,r().K8)((()=>o.getIcon()),[o]);return(0,_.jsx)(we,{icon:(0,_.jsx)($().B,{icon:i,size:D,isEmptyPage:!1,disabled:!0}),label:t?(0,_.jsx)(me().D,{collectionContextStore:t,showHoverActionsStore:n,addViewButton:void 0,isHovered:!1,titleStyle:{fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit",margin:0,padding:0}}):(0,_.jsx)(G().A,{store:o,style:{fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit"}}),right:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(ve().E,{disabled:!0,icon:pe().arrowDiagonalUpRightSmallIcon,children:(0,_.jsx)(p().sA,{id:"workflows.database.open",defaultMessage:"Open"})}),(0,_.jsx)(ve().E,{disabled:!0,icon:ue().G,children:(0,_.jsx)(p().sA,{id:"workflows.database.chat",defaultMessage:"Chat"})})]})})}var je=()=>o(492674),Ae=()=>o(622286),Ie=()=>o(503780),Me=()=>o(963395),Te=()=>o(418699),_e=()=>o(356813);function Re(e){const t=(0,p().tz)(),{isDebugging:o,onClick:n}=e,i=t.formatMessage({id:"workflowDebugButton.debug",defaultMessage:"Debug"});return(0,_.jsx)(_e().A,{icon:Te().E,ariaLabel:i,onClick:n,isBlue:o})}o(610931);var Be=()=>o(717820),Pe=()=>o(662861),Le=()=>o(312905),Fe=()=>o(321185),Ne=()=>o(485966),We=()=>o(670298);function De(e){const{workflowFunction:t,functionArgs:o}=e,l=(0,i().v3)(),{blockStore:a}=(0,d().$O)(),s=(0,Fe().useCurrentThreadStore)(),c=(0,r().K8)((()=>Boolean((null==s?void 0:s.id)&&Le().Kd.getOrCreateClientAIChatThreadStore(s.id).state.loading||void 0!==(null==s?void 0:s.getCurrentInferenceId()))),[s]),u=(0,n.useCallback)((()=>{const e=Ne().default.state.currentSpaceStore;if(!e)throw new Error("No space store");const n=Ne().default.state.currentUserStore;if(!n)throw new Error("No user store");const i=Ne().default.state.currentSpaceViewStore;if(!i)throw new Error("No space view store");const r=(0,Pe().nD)({environment:l,workflowFunction:t,functionArgs:o,from:"run-button",spaceStore:e});if(s)(0,Ie().addStepsToExistingThreadAndRun)({environment:l,spaceStore:e,userStore:n,threadStore:s,addSteps:[r]});else{const t=(0,We().Y$)({environment:l,userStore:n,spaceStore:e,spaceViewStore:i,store:a,addSteps:[r]}),o=(0,Ie().addTranscriptToNewThreadAndRun)({environment:l,spaceStore:e,transcript:t,blockId:a.id});(0,T().showWorkflowEditor)({environment:l,chatSidebarState:{isOpen:!0,threadId:o.id},parentStore:a})}}),[l,t,o,s,a]);return(0,_.jsx)(ve().E,{onClick:u,disabled:c,icon:Be().u,children:(0,_.jsx)(p().sA,{id:"workflows.function.run",defaultMessage:"Run"})})}var ze=()=>o(207762);function Ee(e){var t;const{tabs:o,right:i}=e,[r,s]=(0,n.useState)(null===(t=o[0])||void 0===t?void 0:t.key),c=(0,l().IS)((e=>({divider:{borderBottom:`0.5px solid ${e.stroke.primary}`,width:"100%",height:0},tabs:{marginLeft:8,boxShadow:"none"}})),[]),d=(0,n.useMemo)((()=>o.filter(g().O9)),[o]),u=d.findIndex((e=>(null==e?void 0:e.key)===r)),p=d[u];return(0,_.jsxs)(a().Y1,{direction:"vertical",width:"fill",height:"fill",children:[(0,_.jsxs)(a().Y1,{direction:"horizontal",gap:"auto",align:"center",children:[(0,_.jsx)(a().Y1,{direction:"horizontal",align:"center-left",gap:12,children:(0,_.jsx)(ze().Ay,{tabs:d.map((e=>e.label)),selectedIndex:u,onChange:e=>s(d[e].key),style:c.tabs})}),(0,_.jsx)(a().Y1,{direction:"horizontal",align:"center-right",gap:4,padding:"0 8px",children:i})]}),(0,_.jsx)("div",{style:c.divider}),(0,_.jsx)(a().Y1,{direction:"vertical",width:"fill",height:"fill",children:null==p?void 0:p.render()})]})}var Ve=()=>o(328818),Oe=()=>o(507190),He=()=>o(686752),Ue=()=>o(91472),Ke=()=>o(209684),Ye=()=>o(951540),Xe=()=>o(818369),$e=()=>o(435819),Ge=()=>o(59175),Je=()=>o(585407);function Qe(e){const{editedValue:t,setEditedValue:o,fnKey:n,functionStore:i,fillHeight:r,inputPadding:a}=e,s=(0,l().IS)((e=>({editor:{whiteSpace:"pre-wrap",wordWrap:"break-word",fontFamily:"monospace",color:e.text.primary,margin:0,fontSize:12,border:"none",borderRadius:0,padding:0,lineHeight:1.5,boxShadow:"none",...r?{height:"100%",display:"flex",flex:1,flexDirection:"row",alignItems:"stretch"}:{}},editorInput:{...r?{height:"100%"}:{},padding:a??16},outer:{flex:r?1:void 0}})),[r,a]);return(0,Ae().X)("ai_workflows_function_monaco_code_editor")?(0,_.jsx)(qe,{value:t,onChange:o,fnKey:n,functionStore:i,fillHeight:r}):(0,_.jsx)($e().A,{capture:!0,render:e=>(0,_.jsx)("div",{...e,style:s.outer,children:(0,_.jsx)(Ge().A,{value:t,onChange:e=>o(e.target.value),textarea:!0,style:s.editor,inputStyle:s.editorInput,autosize:!r,autoFocus:!0,suppressFocusRing:!0,spellCheck:!1,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",autosizeMinHeight:80})})})}function qe(e){const{value:t,onChange:o,fnKey:r,functionStore:l,fillHeight:a}=e,s=(0,i().v3)(),{threadStore:c,workflowPointer:d,workflowValue:u}=(0,x().N)(),p=(0,n.useCallback)((async()=>{const e=await Xe().callApi({eventName:"getWorkflowTypescriptContext",environment:s,data:{workflowDefinitionPointer:(0,N().Cq)({workflowPointer:d,threadPointer:null==c?void 0:c.pointer})}});if("success"===e.type){const{workflowScope:t}=e.data;if(!l)return"";const o=((null==u?void 0:u.functionPointers)||[]).map((e=>Je().j.createChildStore(l,e))).filter((e=>e.isFunction())).map((e=>e.getData())).filter((e=>(null==e?void 0:e.key)!==r));return[t.replaceAll(/export type ?{(.|\s)*?}/g,"").replaceAll(/\n\s*export/g,"\n"),...o.map((e=>null==e?void 0:e.value))].join("\n\n")}return""}),[s,d,c,l,null==u?void 0:u.functionPointers,r]);return(0,_.jsx)(Me().X,{value:t,onChange:o,language:"typescript",fetchTypescriptImports:p,fillHeight:a})}function Ze(e){const{fn:t,functionStore:o}=e,r=(0,i().v3)(),{blockStore:s,threadStore:c,workflowPointer:d}=(0,x().N)(),[u,p]=(0,n.useState)(!1),[g,h]=(0,n.useState)(t.value||""),f=(0,l().IS)((e=>({highlightedCode:{background:e.codeBlockBackground,padding:"16px 24px",flex:1,overflowY:"auto"}})),[]),m=(0,n.useCallback)((()=>{o&&d&&(Ie().saveFunction({functionStore:o,fn:{...t,value:g??void 0},environment:r,threadStore:c,workflowPointer:d,blockStore:s}),p(!1))}),[t,g,o,r,c,s,d]),y=(0,n.useCallback)((()=>{h(t.value||""),p(!0)}),[t.value,p]),v=(0,n.useCallback)((()=>{h(t.value||""),p(!1)}),[t.value,p]),b=(0,n.useCallback)((async()=>{if(t.value){const e=await Ue().R.clipboardActions.load();e.copyString({environment:r,stringValue:t.value,copiedMessage:e.clipboardMessages.copiedCodeToClipboard})}}),[t.value,r]),S=g!==t.value;return(0,_.jsxs)(a().Y1,{direction:"vertical",height:"fill",children:[(0,_.jsx)(et,{fn:t,editing:u,isModified:S,onClickEdit:y,onClickCancel:v,onClickSave:m,onClickCopy:b}),(0,_.jsx)(a().Y1,{direction:"vertical",height:"fill",style:{minHeight:0},children:u?(0,_.jsx)(Qe,{editedValue:g,setEditedValue:h,fnKey:t.key,functionStore:o,fillHeight:!0,inputPadding:"16px 24px"}):(0,_.jsx)(Me().O,{value:t.value||"",styles:f.highlightedCode})})]})}function et(e){const{fn:t,editing:o,isModified:n,onClickEdit:i,onClickCancel:r,onClickSave:s,onClickCopy:c}=e,d=(0,p().tz)(),u=(0,l().IS)((e=>({header:{borderBottom:`1px solid ${e.lightDividerColor}`},icon:{width:16,height:16,fill:e.text.secondary}})),[]);return(0,_.jsxs)(a().Y1,{direction:"horizontal",gap:"auto",width:"fill",padding:"10px 8px 10px 24px",style:u.header,children:[(0,_.jsxs)(a().Y1,{direction:"horizontal",gap:8,align:"center-left",children:[(0,Ve().m)(u.icon),(0,_.jsx)(M().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t.key})]}),(0,_.jsx)(a().Y1,{direction:"horizontal",gap:o?6:2,align:"center-right",children:o?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Ke().p,{size:"sm",onClick:r,children:(0,_.jsx)(p().sA,{...A.cancel})}),(0,_.jsx)(Ye().A,{size:"sm",onClick:s,disabled:!n,children:(0,_.jsx)(p().sA,{...A.save})})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(_e().A,{onClick:c,icon:Oe().V,ariaLabel:d.formatMessage(A.copyFunctionContents)}),(0,_.jsx)(_e().A,{onClick:i,icon:He().pencilLineIcon,ariaLabel:d.formatMessage(A.edit)})]})})]})}function tt(e){const{calledFunctions:t,blockStore:o}=e,n=(0,l().IS)((e=>({titleContainer:{borderBottom:`1px solid ${e.lightDividerColor}`,paddingBottom:8,marginBottom:8}})),[]);return t.length?(0,_.jsxs)(a().Y1,{direction:"vertical",gap:4,padding:24,children:[(0,_.jsx)(a().Y1,{direction:"horizontal",gap:8,align:"center-left",style:n.titleContainer,children:(0,_.jsx)(M().D,{styleName:"UIHeading-17px/Medium",children:(0,_.jsx)(p().sA,{defaultMessage:"Referenced by this function",id:"workflow.function.referencedBy"})})}),t.map((e=>(0,_.jsx)(ot,{fn:e,blockStore:o},e.key)))]}):null}function ot(e){const{fn:t,blockStore:o}=e,r=(0,l().IS)((e=>({button:{color:e.text.secondary,fontSize:14},icon:{width:16,height:16,fill:e.text.secondary}})),[]),s=(0,i().v3)(),c=(0,n.useCallback)((()=>{(0,T().showWorkflowEditor)({environment:s,parentStore:o,navigationState:{isOpen:!0,type:"function",key:t.key}})}),[s,t.key,o]);return(0,_.jsx)(a().Y1,{direction:"vertical",gap:8,children:(0,_.jsx)(Ke().p,{onClick:c,icon:Ve().m,iconStyle:r.icon,style:r.button,children:(0,_.jsx)(M().D,{colorName:"secondary",children:t.key})})})}var nt=()=>o(725494),it=()=>o(59714),rt=()=>o(31448),lt=()=>o(126451),at=()=>o(713358);function st(e){var t,o,i;const{test:r}=e,a=(0,Ae().X)("workflows_debug_tools"),[s,c]=(0,n.useState)(!1),d=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:4},titleButton:{display:"flex",alignItems:"flex-start",gap:8,padding:"4px 8px",margin:"8px 0px",borderRadius:6},textContainer:{display:"flex",flexDirection:"column",gap:4,flex:1},titleText:{fontSize:13,fontWeight:rt().Wy.medium},subtitleText:{fontSize:13,color:e.text.secondary},passedIcon:{marginTop:2,width:16,height:16,fill:e.accentColors.green[400]},failedIcon:{marginTop:2,width:16,height:16,fill:e.accentColors.red[400]}})),[]),u=(0,n.useCallback)((()=>c((e=>!e))),[]);return(0,_.jsxs)("div",{style:d.container,children:[(0,_.jsxs)(lt().A,{onClick:u,style:d.titleButton,disabled:!Boolean(null===(t=r.result)||void 0===t?void 0:t.effects),children:[null!==(o=r.result)&&void 0!==o&&o.passed?(0,nt().checkmarkIcon)(d.passedIcon):(0,it().Y)(d.failedIcon),(0,_.jsxs)("div",{style:d.textContainer,children:[(0,_.jsx)("div",{style:d.titleText,children:r.description.name}),(0,_.jsx)("div",{style:d.subtitleText,children:r.description.description})]})]}),s&&(0,_.jsxs)(_.Fragment,{children:[(null===(i=r.result)||void 0===i?void 0:i.effects)&&(0,_.jsx)(_.Fragment,{children:r.result.effects.map(((e,t)=>(0,_.jsx)(at().T,{effect:e,isRunFinished:!0,logTimestamp:0,nextEventLogTimestamp:void 0},t)))}),a&&(0,_.jsx)(Me().X,{value:JSON.stringify(r,null,2),language:"json",disabled:!0})]})]})}function ct(e){var t,o,n;const{fn:i}=e,r=(null===(t=i.tests)||void 0===t?void 0:t.length)||0,l=(null===(o=i.tests)||void 0===o?void 0:o.filter((e=>{var t;return null===(t=e.result)||void 0===t?void 0:t.passed})).length)||0;return(0,_.jsxs)(a().Y1,{direction:"vertical",height:"fill",gap:24,padding:24,style:{overflowY:"auto"},children:[(0,_.jsxs)(a().Y1,{direction:"vertical",align:"center-left",gap:4,children:[(0,_.jsx)(M().D,{styleName:"UIHeading-17px/Medium",children:(0,_.jsx)(p().sA,{defaultMessage:"Simulated runs",id:"workflow.function.simulatedRuns"})}),(0,_.jsx)(M().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:`${l}/${r} passed`})]}),(0,_.jsx)(a().Y1,{direction:"vertical",height:"fill",gap:4,children:null===(n=i.tests)||void 0===n?void 0:n.map((e=>(0,_.jsx)(st,{test:e},e.description.name)))})]})}function dt(e){const{workflow:t,functionKey:o,blockStore:i}=e,l=(0,Ae().X)("workflows_debug_tools"),[s,c]=(0,n.useState)(!1),d=(0,r().K8)((()=>(0,j().Dk)({workflow:t,blockStore:i,functionKey:o})),[t,i,o]),u=(0,r().K8)((()=>null==d?void 0:d.getData()),[d]),p=(0,r().K8)((()=>(0,j().wI)({workflow:t,functionStore:d})),[t,d]),g=(0,r().K8)((()=>u?(0,j().bq)({workflow:t,functionStoreMap:p,fn:u}):[]),[u,p,t]);return u?(0,_.jsxs)(a().Y1,{direction:"vertical",height:"fill",children:[(0,_.jsx)(we,{label:u.name||u.key,description:u.description,icon:(0,_.jsx)(k().I,{size:"default",color:"secondary",icon:je().codeIcon})}),(0,_.jsx)(Ee,{tabs:[{key:"code",label:"Code",render:()=>(0,_.jsx)(Ze,{fn:u,functionStore:d})},{key:"tests",label:"Tests",render:()=>(0,_.jsx)(ct,{fn:u})},g.length>0?{key:"related",label:"Related",render:()=>(0,_.jsx)(tt,{blockStore:i,calledFunctions:g})}:void 0,{key:"debug",label:"Debug",render:()=>(0,_.jsx)(ut,{functionStore:d,fn:u})}],right:(0,_.jsxs)(_.Fragment,{children:[l&&(0,_.jsx)(Re,{isDebugging:s,onClick:()=>c((e=>!e))}),(0,_.jsx)(De,{workflowFunction:u,functionArgs:{}})]})})]}):null}function ut(e){const{functionStore:t,fn:o}=e,r=(0,i().v3)(),{workflowPointer:l,blockStore:a,threadStore:s}=(0,x().N)(),c=(0,n.useCallback)((e=>{if(!t||!l)return;const o=JSON.parse(e);Ie().saveFunction({functionStore:t,fn:o,environment:r,threadStore:s,blockStore:a,workflowPointer:l})}),[t,r,s,a,l]);return(0,_.jsx)(Me().X,{value:(d=o,JSON.stringify(d,null,2)),onSave:c,language:"json",fillHeight:!0});var d}var pt=()=>o(642168);function gt(e){const{workflow:t,workflowStore:o,blockStore:n,module:i}=e,r="database"===i.type;return(0,_.jsxs)(a().Y1,{padding:24,width:"fill",height:"fill",style:{overflowY:"auto"},children:[r&&(0,_.jsx)(xe().l,{display:"inline",tint:"red",label:"Debug-only view for database module."}),(0,_.jsx)(pt().El,{moduleKey:i.key,workflow:t,workflowStore:o,blockStore:n},i.key)]})}function ht(e){const{blockStore:t,collectionViewId:o}=e,s=(0,i().v3)(),[c,d]=(0,n.useState)(void 0),u=(0,r().K8)((()=>null==c?void 0:c.collectionViewStore()),[c]),p=(0,l().IS)((e=>({scroller:{flex:1}})),[]),g=(0,r().K8)((()=>he().u5(s)),[s]);return(0,_.jsx)(be().tx,{value:{isPreviewing:!0,disablePageLinks:!0,disableAllPointerEvents:!1,hideTableAggregationRow:!0,hideViewBlockSource:!0,location:"app_builder"},children:(0,_.jsxs)(a().Y1,{direction:"vertical",width:"fill",height:"fill",style:{minWidth:0,minHeight:0},children:[u?(0,_.jsx)(ft,{collectionViewStore:u}):null,(0,_.jsx)(m().H,{type:y().A.All,style:p.scroller,preventType:g,children:(0,_.jsx)(ye().dN,{store:t,overridePaddingLeft:24,overridePaddingRight:0,viewId:o,isFullScreen:!0,hideViewTabBar:!0,productUseCase:"preview_collection",showOnlyCurrentView:!0,disabled:!1,headerAllowedActions:["filter","sort","search","viewSettings","addItem"],headerActionsBehavior:"hidden",setCollectionContextStore:d})})]})})}function ft(e){const{collectionViewStore:t}=e,o=(0,n.useCallback)((()=>{}),[]),{viewIcon:i,viewType:l}=(0,r().K8)((()=>({viewIcon:t.getFormat().collection_view_icon,viewType:t.getType()})),[t]);return(0,_.jsx)(we,{icon:(0,_.jsx)(re().h,{color:"lightGray",viewType:l,viewIcon:i,size:24}),label:(0,_.jsx)(G().A,{store:t}),right:(0,_.jsx)(ve().E,{onClick:o,disabled:!0,icon:ue().G,children:(0,_.jsx)(p().sA,{id:"workflows.view.chat",defaultMessage:"Chat"})})})}var mt=()=>o(660714),yt=()=>o(16456),vt=()=>o(427091),xt=()=>o(162901),bt=()=>o(204132),St=()=>o(889584);function wt(e,t){const o=(0,n.useRef)(),i=(0,n.useRef)(null),[r,l]=(0,n.useState)(t),a=(0,n.useCallback)((()=>l((e=>null===e?t:null))),[t]);function s(){var e;null===(e=o.current)||void 0===e||e.call(o)}const c=(0,n.useCallback)((()=>{i.current&&clearInterval(i.current)}),[]),d=(0,n.useCallback)((()=>{c(),i.current=setInterval(s,t)}),[c,t]);return(0,n.useEffect)((()=>{o.current=e}),[e]),(0,n.useEffect)((()=>(i.current&&clearInterval(i.current),null!==r&&(i.current=setInterval(s,r)),c)),[r,c]),{toggle:a,clear:c,reset:d}}var kt=()=>o(802955),Ct=()=>o(680369);const jt={viewBox:"0 0 20 20",svg:(0,_.jsx)("path",{d:"M6.65 17.67a4 4 0 0 1-2.85-1.18l-.37-.37a4.026 4.026 0 0 1 0-5.69l1.85-1.85c.34-.34.9-.34 1.24 0s.34.9 0 1.24l-1.85 1.85c-.89.89-.89 2.33 0 3.22l.37.37c.89.89 2.33.89 3.22 0l1.85-1.85c.34-.34.9-.34 1.24 0s.34.9 0 1.24L9.5 16.5a4 4 0 0 1-2.85 1.18zm.44-3.96c-.22 0-.45-.08-.62-.26a.88.88 0 0 1 0-1.24l5.45-5.45c.34-.34.9-.34 1.24 0s.34.9 0 1.24l-5.45 5.45a.87.87 0 0 1-.62.26m6.93-2.11c-.22 0-.45-.08-.62-.26a.88.88 0 0 1 0-1.24l1.85-1.85c.43-.43.67-1 .67-1.61s-.24-1.18-.67-1.61l-.37-.37c-.86-.86-2.36-.86-3.22 0L9.81 6.51c-.34.34-.9.34-1.24 0a.88.88 0 0 1 0-1.24l1.85-1.85a4 4 0 0 1 2.85-1.18 4 4 0 0 1 2.85 1.18l.37.37a4 4 0 0 1 1.18 2.85 4 4 0 0 1-1.18 2.85l-1.85 1.85c-.17.17-.4.26-.62.26"})},At=(0,Ct().wt)("linkFill",jt);var It=()=>o(902567),Mt=()=>o(782422),Tt=()=>o(129978),_t=()=>o(383641),Rt=()=>o(561074);const Bt={opacity:0,height:0},Pt={opacity:1,height:"auto"},Lt=24,Ft=12;function Nt(e){const{children:t,isOpen:o,relativePaddingLeft:i=0,relativePaddingRight:r=0}=e,s=Lt+i,c=Lt+r,[d]=(0,n.useState)(o),u=(0,l().IS)((e=>({divider:{borderBottom:`1px solid ${e.stroke.secondary}`,marginLeft:Lt}})),[]);return(0,_.jsx)(_t().N,{children:o?(0,_.jsxs)(Rt().P.div,{initial:d?Pt:Bt,animate:Pt,exit:Bt,transition:{duration:.2},children:[(0,_.jsx)(a().Y1,{direction:"horizontal",gap:6,padding:`${Ft}px ${c}px ${Ft}px ${s}px`,children:t}),(0,_.jsx)("div",{style:u.divider})]}):null})}var Wt=()=>o(589911),Dt=(o(358848),o(91270),()=>o(622163));var zt=()=>o(162693);function Et(e){const{functionKey:t,functionArgs:o={},stringifiedDebugContent:l,isFunctionCall:a,workflowStore:s,logTimestamp:c,nextEventLogTimestamp:u,isLastEntry:g,runStore:h}=e,f=(0,i().v3)(),{blockStore:m}=(0,d().$O)(),y=(0,Fe().useCurrentThreadStore)(),v=function(e){const{runStore:t,workflow:o}=e,n=(0,r().K8)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.function_artifact_pointers}),[t]);return(0,r().K8)((()=>{if(!o)return[];const{currentUserStore:e}=Ne().default.state;if(!e)throw new Error("No current user store");const t=n||o.functionPointers;if(!t||0===t.length)return[];const i=t.map((t=>Se().je.createChildStore(e,t)));return(0,N().aY)(i)}),[o,n])}({runStore:h,workflow:(0,r().K8)((()=>(0,N().dh)(s)),[s])}),x=(0,n.useMemo)((()=>v.find((e=>e.key===t))),[v,t]),b=(0,n.useCallback)((()=>{T().showWorkflowEditor({environment:f,parentStore:m,navigationState:{isOpen:!0,type:"function",key:t}})}),[f,t,m]),S=(0,r().K8)((()=>Boolean(void 0!==(null==y?void 0:y.getCurrentInferenceId())||(null==y?void 0:y.id)&&Le().Kd.getOrCreateClientAIChatThreadStore(y.id).state.loading)),[y]),w=(0,n.useCallback)((()=>{x&&Ie().runWorkflowFunction({environment:f,workflowFunction:x,threadStore:y,functionArgs:o,parentStore:m})}),[x,f,o,y,m]);return(0,_.jsxs)(zt().u,{state:S?"running":"success",fullContent:l,logTimestamp:c,nextEventLogTimestamp:u,onClickRunButton:S?void 0:w,skipThreadLine:g,children:[!a&&(0,_.jsx)(p().sA,{id:"WorkflowRun.finished",defaultMessage:"Finished: "}),(0,_.jsx)(lt().A,{onClick:b,children:null==x?void 0:x.name})]})}function Vt(e){const{errorMessage:t,stack:o,isExpanded:n}=e,i=(0,Wt().G)();return(0,_.jsxs)(_.Fragment,{children:[t,n&&(0,_.jsx)("div",{style:i.code,children:o})]})}function Ot(e){const{event:t,isLastEntry:o}=e,i=(0,Wt().G)(),r=(0,l().IS)((e=>({inlineLogMessage:{marginRight:4},expandableContextText:{color:e.text.secondary},messages:{display:"block"}})),[]),{logLevelPrefix:a,isError:s}=(0,n.useMemo)((()=>{switch(t.level){case"error":return{logLevelPrefix:"Error: ",isError:!0};case"warn":return{logLevelPrefix:"Warning: ",isError:!1};case"info":return{logLevelPrefix:void 0,isError:!1};default:(0,g().HB)(t.level)}}),[t.level]),c=(0,n.useMemo)((()=>t.messages.some((e=>"object"===e.type||"error"===e.type))),[t.messages]),d=(0,_.jsx)("div",{style:i.code,children:t.messages.map(((e,t)=>{switch(e.type){case"msg":return e.data;case"object":return(0,_.jsx)("div",{children:JSON.stringify(JSON.parse(e.data),null,2)},`${e.type}-${t}`);case"undefined":return"undefined";case"error":return(0,_.jsx)(Vt,{errorMessage:e.message,stack:e.stack,isExpanded:!0},`${e.type}-${t}`);case"database":return`${e.database_key}`;default:return(0,g().HB)(e)}}))});return(0,_.jsxs)(zt().u,{state:s?"error":"success",skipThreadLine:o,fullContent:c?d:void 0,children:[a,(0,_.jsx)("div",{style:r.messages,children:t.messages.map(((e,t)=>{switch(e.type){case"msg":return(0,_.jsx)("span",{style:r.inlineLogMessage,children:e.data});case"object":return null;case"undefined":return"undefined";case"error":return(0,_.jsx)(Vt,{errorMessage:e.message,stack:e.stack,isExpanded:!1});case"database":return(0,_.jsx)("span",{style:r.inlineLogMessage,children:e.database_key});default:return(0,g().HB)(e)}}))}),c&&(0,_.jsx)("div",{style:r.expandableContextText,children:"{Collapsed information}"})]})}function Ht(e){const{eventLog:t,store:o,workflowStore:i,runStore:r,shouldShowLogsInFunctions:a,finishedAt:s}=e,c=(0,l().IS)((e=>({list:{...Dt().$t,color:e.text.primary}})),[]),d=(0,n.useMemo)((()=>a?t:t.filter((e=>{let{type:t}=e;return"log"!==t&&"functionReturn"!==t}))),[t,a]);return(0,_.jsx)("ul",{style:c.list,children:d.map(((e,t)=>{const n=d.length>t+1?d[t+1].timestamp_ms:s,l=t===d.length-1,a=((a,c)=>{switch(e.type){case"log":return(0,_.jsx)(Ot,{event:e,isLastEntry:l},`${e.type}-${t}`);case"effect":return(0,_.jsx)(at().T,{effect:e.effect,isRunFinished:Boolean(s),logTimestamp:e.timestamp_ms,nextEventLogTimestamp:n,isLastEntry:l});case"functionCall":const d=null===(a=e.function_arguments)||void 0===a?void 0:a.at(0),u=d?JSON.parse(d):{};return(0,_.jsx)(Et,{functionKey:e.function_key,functionArgs:u,stringifiedDebugContent:JSON.stringify(JSON.parse(`[${(null===(c=e.function_arguments)||void 0===c?void 0:c.join(","))??""}]`),null,2),isFunctionCall:!0,workflowStore:i,store:o,logTimestamp:e.timestamp_ms,nextEventLogTimestamp:n,isLastEntry:l,runStore:r});case"functionReturn":return(0,_.jsx)(Et,{functionKey:e.function_key,stringifiedDebugContent:JSON.stringify(e.function_return,null,2),isFunctionCall:!1,workflowStore:i,store:o,logTimestamp:e.timestamp_ms,nextEventLogTimestamp:n,isLastEntry:l,runStore:r});default:return(0,g().HB)(e)}})();return(0,_.jsx)("li",{children:a},`${e.type}-${t}`)}))})}function Ut(e){let{title:t,icon:o,children:n}=e;const i=(0,l().IS)((e=>({titleContainer:{borderBottom:`1px solid ${e.stroke.primary}`,paddingBottom:8}})),[]);return(0,_.jsxs)("div",{children:[(0,_.jsx)(a().Y1,{direction:"vertical",align:"top-left",children:(0,_.jsxs)(a().Y1,{direction:"horizontal",gap:8,style:i.titleContainer,children:[o,(0,_.jsx)(M().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:t})]})}),n]})}function Kt(e){const{runStore:t,workflowStore:o,store:n,shouldShowLogsInFunctions:i}=e,{eventLog:l,finishedAt:a}=(0,r().K8)((()=>{const e=t.getData();return{eventLog:null==e?void 0:e.event_log,finishedAt:null==e?void 0:e.finished_at}}),[t]),s=(0,Wt().G)();return l?(0,_.jsx)(Ut,{title:"Actions",icon:(0,Ve().m)(s.inlineIcon),children:(0,_.jsx)(Ht,{eventLog:l,workflowStore:o,store:n,runStore:t,shouldShowLogsInFunctions:i,finishedAt:a})}):null}var Yt=()=>o(103151);function Xt(e){const{children:t,tooltip:o,...n}=e,i=Boolean(!o);return(0,_.jsx)(Yt().A,{disableTooltip:i,renderTooltip:()=>o,render:e=>(0,_.jsx)(Ke().p,{...n,...e,children:t})})}function $t(e){let{script:t}=e;const o=(0,Wt().G)(),n=(0,l().IS)((e=>({highlightedCode:{marginTop:16,background:e.codeBlockBackground,borderRadius:8,padding:12}})),[]);return(0,_.jsx)(Ut,{title:"Script",icon:(0,w().lightningFillIcon)(o.inlineIcon),children:(0,_.jsx)(Me().O,{value:t.code,styles:n.highlightedCode})})}function Gt(e){var t;const{runStore:o,workflowData:n}=e,{triggerData:i,triggerFrom:l,triggerAt:a,triggerKey:s}=(0,r().K8)((()=>{const e=o.getData(),t=null==e?void 0:e.trigger_data;return{triggerData:t?JSON.parse(t):{},triggerFrom:null==e?void 0:e.trigger_from,triggerAt:null==e?void 0:e.trigger_at,triggerKey:null==e?void 0:e.trigger_key}}),[o]),c=null==n||null===(t=n.triggers)||void 0===t?void 0:t.find((e=>e.key===s)),d=(0,Wt().G)();return c?(0,_.jsx)(Ut,{title:(0,_.jsx)(p().sA,{id:"WorkflowRun.triggerEvent",defaultMessage:"Trigger event"}),icon:(0,w().lightningFillIcon)(d.inlineIcon),children:(0,_.jsx)(Jt,{triggerName:"run-button"===l?"Run button":c.name,triggerData:i,triggerAt:a})}):null}function Jt(e){const{triggerName:t,triggerData:o,triggerAt:n}=e;return(0,_.jsx)(zt().u,{state:"success",fullContent:JSON.stringify(o,null,2),skipThreadLine:!0,logTimestamp:n,children:t||(0,_.jsx)(p().sA,{id:"WorkflowRun.unknownTrigger",defaultMessage:"Unknown"})})}var Qt=()=>o(486826),qt=()=>o(135866),Zt=()=>o(403323),eo=()=>o(966789),to=()=>o(907721),oo=()=>o(307719);function no(e){const{timestamp:t}=e,[o,i]=(0,n.useState)(Qt().c9.fromMillis(t).toRelative()),r=(0,n.useMemo)((()=>{const e=Qt().c9.now(),o=Qt().c9.fromMillis(t),n=e.diff(o);return n.as("seconds")<60?1e3:n.as("minutes")<60?6e4:n.as("hours")<24?36e5:864e5}),[t]),l=(0,n.useCallback)((()=>{i(Qt().c9.fromMillis(t).toRelative())}),[t]);return(0,n.useEffect)((()=>{i(Qt().c9.fromMillis(t).toRelative())}),[t]),wt(l,r),(0,_.jsx)("time",{dateTime:Qt().c9.fromMillis(t).toISO(),children:o})}function io(e){const{runSummary:t,version:o}=e,n=(0,l().IS)((e=>({version:{fontFamily:rt().Tf.mono,fontSize:11,fontWeight:rt().Wy.semibold,color:e.text.secondary,backgroundColor:e.tint.regular,padding:"4px 8px",borderRadius:6}})),[]);if(void 0===o&&void 0===t)return null;let i,r;if(t)switch(t.status){case"pending":case"running":i=(0,_.jsx)(lo,{createdAt:t.createdAt});break;case"success":i=(0,_.jsx)(ao,{finishedAt:t.finishedAt??t.createdAt}),r=(0,_.jsx)(ro,{createdAt:t.createdAt,finishedAt:t.finishedAt});break;case"failure":i=(0,_.jsx)(so,{finishedAt:t.finishedAt??t.createdAt}),r=(0,_.jsx)(ro,{createdAt:t.createdAt,finishedAt:t.finishedAt})}return(0,_.jsxs)(_.Fragment,{children:[void 0!==o&&(0,_.jsx)("div",{style:n.version,children:`V${o}`}),r,i]})}function ro(e){let{createdAt:t,finishedAt:o}=e;const i=(0,l().IS)((e=>({icon:{height:16,fill:e.text.secondary,width:16}})),[]),r=(0,n.useMemo)((()=>{const e=o??t;return Qt().dw.fromMillis(e-t)}),[t,o]);return(0,_.jsx)(co,{icon:(0,Zt().clockSmallIcon)(i.icon),text:(0,_.jsx)(oo().b,{durationInMs:r.toMillis()})})}function lo(e){let{createdAt:t}=e;const o=(0,n.useMemo)((()=>Qt().c9.fromMillis(t)),[t]);return(0,_.jsx)(co,{icon:(0,_.jsx)(eo().A,{size:"sm"}),text:(0,_.jsx)(Yt().A,{placement:to().W.Bottom,render:e=>(0,_.jsx)("div",{...e,children:(0,_.jsx)(p().sA,{id:"WorkflowRun.started",defaultMessage:"Started {timestampElement}",values:{timestampElement:(0,_.jsx)(no,{timestamp:o.toMillis()})}})}),renderTooltip:()=>(0,_.jsx)(_.Fragment,{children:o.toFormat("LLL dd, yyyy 'at' h:mm a")})})})}function ao(e){let{finishedAt:t}=e;const o=(0,l().IS)((e=>({icon:{height:16,fill:e.icon.greenPrimary,width:16}})),[]),i=(0,n.useMemo)((()=>Qt().c9.fromMillis(t)),[t]);return(0,_.jsx)(co,{icon:(0,qt().checkmarkCircleFillIcon)(o.icon),text:(0,_.jsx)(Yt().A,{placement:to().W.Bottom,render:e=>(0,_.jsx)("div",{...e,children:(0,_.jsx)(p().sA,{id:"WorkflowRun.completed",defaultMessage:"Completed {timestampElement}",values:{timestampElement:(0,_.jsx)(no,{timestamp:i.toMillis()})}})}),renderTooltip:()=>(0,_.jsx)(_.Fragment,{children:i.toFormat("LLL dd, yyyy 'at' h:mm a")})})})}function so(e){let{finishedAt:t}=e;const o=(0,l().IS)((e=>({icon:{fill:e.icon.redPrimary,height:16,width:16}})),[]),i=(0,n.useMemo)((()=>Qt().c9.fromMillis(t)),[t]);return(0,_.jsx)(co,{icon:(0,it().Y)(o.icon),text:(0,_.jsx)(Yt().A,{placement:to().W.Bottom,render:e=>(0,_.jsx)("div",{...e,children:(0,_.jsx)(p().sA,{id:"WorkflowRun.failure",defaultMessage:"Failed {timestampElement}",values:{timestampElement:(0,_.jsx)(no,{timestamp:i.toMillis()})}})}),renderTooltip:()=>(0,_.jsx)(_.Fragment,{children:i.toFormat("LLL dd, yyyy 'at' h:mm a")})})})}function co(e){const{icon:t,text:o}=e,n=(0,l().IS)((e=>({item:{display:"flex",alignItems:"center",gap:3}})),[]);return(0,_.jsxs)("div",{style:n.item,children:[t,(0,_.jsx)(M().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:o})]})}function uo(e){const t=e.match(/<message>([\s\S]*?)<\/message>/),o=e.match(/<stack-trace>([\s\S]*?)<\/stack-trace>/),n=[...e.matchAll(/<snippet at="([^"]+)">\n?([\s\S]*?)\n?<\/snippet>/g)];return{message:t?t[1].trim():"Internal error",stackTrace:o?o[1].trim():"",codeSnippets:n.map((e=>{const[,t,o]=e,n=t.split(":"),i=n[0],r=parseInt(n[1]),l=i.split(".")[0];return{fileName:i,lineNumber:r,functionName:l,content:o}}))}}var po=()=>o(307612),go=()=>o(286404);function ho(e){const{store:t,runStore:o,error:r,label:a}=e,s=(0,i().Y0)(),c=(0,i().v3)(),d=(0,Fe().useCurrentThreadStore)(),u=Boolean(r),[g,h]=n.useState(""),f=(0,l().IS)((e=>({wrap:{width:340,padding:8},button:{paddingLeft:6},iconStyle:{fill:e.text.secondary}})),[]),m=(0,n.useCallback)((()=>{(0,Ie().requestEditWorkflowFunction)({environment:c,store:t,runStore:o,threadStore:d,isError:u,userFeedback:g})}),[u,g,t,o,c,d]),y=(0,p().tz)();return u?(0,_.jsx)(go().A,{style:f.button,icon:po().s,size:"md",onClick:m,color:"uiRed",children:a}):(0,_.jsx)(Y().Ay,{popupType:s.isMobile?Y().z7.BottomSheet:Y().z7.Popup,placementToOrigin:Y().sx.Bottom,alignmentToOrigin:Y().yP.Center,originGap:4,renderOrigin:e=>(0,_.jsx)(Ke().p,{style:f.button,icon:po().s,iconStyle:f.iconStyle,size:"md",...e,children:(0,_.jsx)(M().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:a})}),render:e=>(0,_.jsx)($e().A,{debugName:"WorkflowRunFeedbackButton",capture:!0,render:t=>(0,_.jsx)("div",{style:f.wrap,...t,children:(0,_.jsx)(Ge().A,{value:g,textarea:!0,autoFocus:!0,autosize:!0,autosizeMinHeight:200,autosizeMaxHeight:600,onChange:e=>h(e.target.value),textareaSubmitOnEnter:!0,onSubmit:()=>{e.close(),m()},placeholder:y.formatMessage({id:"workflowRun.feedbackPlaceholder",defaultMessage:"What should I fix about this run?"})})})})})}function fo(e){const{runStore:t,store:o,eventLog:n}=e,{error:i,isSystemError:s}=(0,r().K8)((()=>{var e;const o=null===(e=t.getData())||void 0===e?void 0:e.error;return o?{error:uo(o.message),isSystemError:o.isSystemError}:{error:null,isSystemError:!1}}),[t]),c=(0,l().IS)((e=>({container:{borderRadius:10,border:`1px solid ${e.stroke.primary}`},header:{borderBottom:`1px solid ${e.stroke.primary}`,padding:8},banner:{backgroundColor:e.accentColors.red[50],borderRadius:10},failedIcon:{width:16,height:16,fill:e.icon.redPrimary},code:{background:e.codeBlockBackground,padding:12}})),[]);if(!i)return null;const d=i.codeSnippets.at(0);return(0,_.jsxs)(a().Y1,{direction:"vertical",gap:16,children:[(0,_.jsxs)(a().Y1,{direction:"horizontal",align:"center",gap:"auto",style:c.banner,padding:"8px 8px 8px 12px",children:[(0,_.jsx)(M().D,{styleName:"UIRegular-14px/Medium",colorName:"uiRedPrimary",children:s?`An internal error occurred while running. If this persists, please contact support. Error: ${i.message}`:i.message}),!s&&(0,_.jsx)(ho,{store:o,eventLog:n,runStore:t,error:i.message,label:(0,_.jsx)(p().sA,{id:"WorkflowRun.fixWithAI",defaultMessage:"Fix with AI"})})]}),d&&(0,_.jsxs)(a().Y1,{direction:"vertical",style:c.container,children:[(0,_.jsxs)(a().Y1,{direction:"horizontal",align:"center-left",gap:10,style:c.header,children:[(0,it().Y)(c.failedIcon),(0,_.jsx)(M().D,{styleName:"UISmall-12px/Medium",children:(null==d?void 0:d.fileName)??(0,_.jsx)(p().sA,{id:"WorkflowRun.unknownFunction",defaultMessage:"Unknown function"})})]}),(0,_.jsx)(a().Y1,{direction:"horizontal",align:"center-left",style:c.code,children:(0,_.jsx)(Me().O,{value:d.content,language:"jsstacktrace"})})]})]})}function mo(e){const{runStore:t,workflowVersion:o}=e,n=(0,r().K8)((()=>{var e;const n=null===(e=t.getData())||void 0===e?void 0:e.workflow_version;return Boolean(n)&&Boolean(o)&&n!==o}),[o,t]),i=(0,l().IS)((e=>({container:{backgroundColor:e.accentColors.yellow[50],borderRadius:10}})),[]);return n?(0,_.jsx)(a().Y1,{direction:"horizontal",align:"center-left",gap:8,style:i.container,padding:12,children:(0,_.jsx)(M().D,{styleName:"UIRegular-14px/Medium",colorName:"uiYellowPrimary",children:(0,_.jsx)(p().sA,{id:"WorkflowRun.ranOnPreviousVersion",defaultMessage:"Ran on previous version of workflow"})})}):null}function yo(e){const{runId:t,workflowStore:o,parentStore:n}=e,i=(0,r().K8)((()=>{if(o)return Se().ty.createChildStore(o,{table:It().QR,id:t,spaceId:n.getSpaceId()})}),[o,n,t]);return i?(0,_.jsx)(vo,{runStore:i,workflowStore:o,parentStore:n}):null}function vo(e){const{runStore:t,workflowStore:o,parentStore:s}=e,c=(0,p().tz)(),d=(0,i().v3)(),u=(0,l().IS)((e=>({subheading:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4,fontWeight:rt().Wy.semibold,fontSize:14,marginTop:16}})),[]),h=(0,r().K8)((()=>(0,N().dh)(o)),[o]),f=(0,r().K8)((()=>{var e;return null===(e=o.getModel())||void 0===e?void 0:e.getVersion()}),[o]),m=(0,r().K8)((()=>(0,Mt()._m)(d)),[d]),y=(0,r().K8)((()=>m?(0,j().gf)({runStore:t,userStore:m,workflow:h}):[]),[h,t,m]),v=(0,r().K8)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.trigger_key}),[t]),x=(0,r().K8)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.script}),[t]),S=(0,r().K8)((()=>{if(v)return y.find((e=>e.key===v))}),[v,y]),w=(null==x?void 0:x.name)||(null==S?void 0:S.name)||v,C=(0,r().K8)((()=>{const e=t.getStatus();if(!e)return;const o=t.getCreatedAt(),n=t.getDataStore().getKeyValue("finished_at");switch(e){case"pending":return{createdAt:o,status:"pending"};case"running":return{createdAt:o,status:"running"};case"success":return{createdAt:o,finishedAt:n,status:"success"};case"failure":return{createdAt:o,finishedAt:n,status:"failure"};default:return(0,g().HB)(e)}}),[t]),{value:A}=(0,Tt().fJ)(Ue().R.clipboardActions),I=(0,n.useCallback)((()=>{const e=window.location.href;A&&A.copyString({environment:d,stringValue:e,copiedMessage:A.clipboardMessages.copiedLinkToClipboard})}),[d,A]),T=(0,r().K8)((()=>{var e;const o=null===(e=t.getData())||void 0===e?void 0:e.trigger_data;return o?JSON.parse(o):{}}),[t]),R=(0,r().K8)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.event_log}),[t]),B=(0,n.useMemo)((()=>!(!R||0===R.length)&&R.some((e=>"log"===e.type))),[R]),P=(0,r().K8)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.workflow_version}),[t]),[L,F]=(0,n.useState)(!1),W=(0,n.useCallback)((()=>F((e=>!e))),[]),D=(0,r().K8)((()=>L?t.getData():null),[t,L]),[z,E]=(0,n.useState)(!1),V=(0,Ae().X)("workflows_debug_tools");return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(we,{label:w,icon:(0,_.jsx)(k().I,{size:"default",color:"secondary",icon:b().clockIcon}),right:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(ho,{store:s,eventLog:R,runStore:t,label:"Ask AI"}),S?(0,_.jsx)(De,{workflowFunction:S,functionArgs:T}):null]})}),(0,_.jsx)(Nt,{isOpen:!0,children:(0,_.jsxs)(a().Y1,{direction:"horizontal",gap:"auto",children:[(0,_.jsxs)(a().Y1,{direction:"horizontal",gap:20,align:"center-left",children:[(0,_.jsx)(io,{runSummary:C,version:P}),V&&(0,_.jsx)(Re,{isDebugging:L,onClick:W})]}),(0,_.jsxs)(a().Y1,{direction:"horizontal",width:"hug",align:"center-right",gap:4,children:[(0,_.jsx)(_e().A,{onClick:I,icon:At,ariaLabel:c.formatMessage({id:"workflowRun.openRunInBuilder",defaultMessage:"Open run in builder"})}),(0,_.jsx)(Xt,{disabled:!B,disabledFeedback:!B,onClick:()=>E((e=>!e)),size:"md",tooltip:B?void 0:(0,_.jsx)(p().sA,{id:"WorkflowRun.noLogs.tooltip",defaultMessage:"No logs to display"}),children:(0,_.jsx)(M().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:z?(0,_.jsx)(p().sA,{id:"WorkflowRun.hideLogs",defaultMessage:"Hide logs"}):(0,_.jsx)(p().sA,{id:"WorkflowRun.showLogs",defaultMessage:"Show logs"})})})]})]})}),(0,_.jsxs)(a().Y1,{direction:"vertical",gap:32,padding:24,style:{overflowY:"auto"},children:[(0,_.jsx)(mo,{runStore:t,workflowVersion:f}),(0,_.jsx)(fo,{runStore:t,store:s,eventLog:R}),(0,_.jsxs)(a().Y1,{direction:"vertical",gap:33,children:[!x&&(0,_.jsx)(Gt,{runStore:t,workflowData:h}),x&&(0,_.jsx)($t,{script:x}),L&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{style:u.subheading,children:"Debug information"}),(0,_.jsx)(Me().X,{value:JSON.stringify(D,null,2),language:"json"})]}),(0,_.jsx)(Kt,{runStore:t,workflowStore:o,store:s,shouldShowLogsInFunctions:z})]})]})]})}var xo=()=>o(348588),bo=()=>o(662505),So=()=>o(466321),wo=()=>o(755769),ko=()=>o(935091),Co=()=>o(867988),jo=()=>o(640979);function Ao(e){const{dateRange:t,onChange:o}=e,{isMobile:r}=(0,i().Y0)(),l=(0,n.useMemo)((()=>({disableMenuWrap:!0,hideDateInputMenuItems:!0,onUpdate:e=>{if(e.error)return o({starting:void 0,ending:void 0}),null;o({...t,...e.value})},title:(0,_.jsx)("div",{children:"Title"}),value:t})),[t,o]),a=(0,n.useCallback)((()=>{o({starting:void 0,ending:void 0})}),[o]);return(0,_.jsxs)(ko().A,{menuType:r?jo().gu.Modal:jo().gu.Popup,children:[(0,_.jsx)(C().A,{children:(0,_.jsx)(Co().A,{...l})}),(0,_.jsx)(C().A,{topBorder:!0,children:(0,_.jsx)(I().A,{focused:!1,onClick:a,title:(0,_.jsx)(p().sA,{id:"workflowRuns.dateFilter.clear",defaultMessage:"Clear"})})})]})}function Io(e){const{dateRange:t,isActive:o,onChange:n}=e,{isMobile:r}=(0,i().Y0)(),a=(0,l().IS)((e=>({icon:{fill:o?e.icon.uiBluePrimary:e.icon.secondary,height:"auto",marginInlineEnd:6,width:16},pillInnerStyle:{borderColor:o?void 0:e.stroke.secondary}})),[o]);return(0,_.jsx)(Y().Ay,{alignmentToOrigin:wo().MY.Start,placementToOrigin:wo().UV.Bottom,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,popupType:r?So().n.BottomSheet:So().n.Popup,render:()=>(0,_.jsx)(Ao,{dateRange:t,onChange:n}),renderOrigin:e=>(0,_.jsx)(bo().A,{...e,icon:(0,xo().D)(a.icon),innerStyle:a.pillInnerStyle,on:o,title:"Date"}),trapFocus:!0})}var Mo=()=>o(559637);function To(e){let{selectedStatuses:t,onChange:o}=e;const{isMobile:r}=(0,i().Y0)(),a=(0,l().IS)((e=>({checkboxIcon:{fill:e.icon.primary}})),[]),s=(0,n.useCallback)((e=>{o(t.includes(e)?t.filter((t=>t!==e)):[...t,e])}),[o,t]),c=(0,n.useCallback)((()=>o([])),[o]),d=(0,n.useMemo)((()=>(0,g().uv)(_o).map((e=>({key:`status-${e}`,action:()=>s(e),render:o=>(0,_.jsx)(I().A,{...o,icon:(0,_.jsx)(Mo().A,{checked:t.includes(e),size:14,onClick:()=>s(e),style:a.checkboxIcon}),title:(0,_.jsx)(M().D,{children:_o[e].label})})})))),[t,a.checkboxIcon,s]);return(0,_.jsx)(ko().A,{menuType:r?jo().gu.Modal:jo().gu.Popup,children:(0,_.jsx)(f().Ay,{type:f().Oh.Vertical,initialFocus:0,sections:[{key:"statuses",items:d,render:e=>(0,_.jsx)(C().A,{...e})},{key:"clear",items:[{key:"clear",action:c,render:e=>(0,_.jsx)(I().A,{...e,onClick:c,title:(0,_.jsx)(p().sA,{id:"workflowRuns.statusFilter.clear",defaultMessage:"Clear selection"})})}],render:e=>(0,_.jsx)(C().A,{...e,topBorder:!0})}]})})}const _o={pending:{id:"pending",label:(0,_.jsx)(p().sA,{id:"workflowRuns.statusFilter.pending",defaultMessage:"Pending"})},running:{id:"running",label:(0,_.jsx)(p().sA,{id:"workflowRuns.statusFilter.running",defaultMessage:"Running"})},success:{id:"success",label:(0,_.jsx)(p().sA,{id:"workflowRuns.statusFilter.success",defaultMessage:"Success"})},failure:{id:"failure",label:(0,_.jsx)(p().sA,{id:"workflowRuns.statusFilter.failure",defaultMessage:"Failure"})}};function Ro(e){let{onChange:t,selectedStatuses:o}=e;const{isMobile:n}=(0,i().Y0)(),r=Boolean(o.length),a=(0,l().IS)((e=>({icon:{fill:r?e.icon.uiBluePrimary:e.icon.secondary,height:"auto",marginInlineEnd:6,width:16},pillInnerStyle:{borderColor:r?void 0:e.stroke.secondary}})),[r]);return(0,_.jsx)(Y().Ay,{alignmentToOrigin:wo().MY.Start,placementToOrigin:wo().UV.Bottom,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,popupType:n?So().n.BottomSheet:So().n.Popup,render:()=>(0,_.jsx)(To,{selectedStatuses:o,onChange:t}),renderOrigin:e=>(0,_.jsx)(bo().A,{...e,icon:(0,qt().checkmarkCircleFillIcon)(a.icon),innerStyle:a.pillInnerStyle,on:r,title:"Status"}),trapFocus:!0})}function Bo(e){const{defaultFilterState:t,onChange:o}=e,[i,r]=(0,n.useReducer)(((e,t)=>{switch(t.type){case"setStatuses":return{...e,statuses:t.value};case"setDateRange":return{...e,dateRange:t.value};default:return e}}),t??{dateRange:{starting:void 0,ending:void 0},statuses:void 0});(0,n.useEffect)((()=>o(i)),[i,o]);const l=Boolean(i.dateRange.starting||i.dateRange.ending),a=(0,n.useCallback)((e=>{r({type:"setDateRange",value:e})}),[r]),s=(0,n.useCallback)((e=>{r({type:"setStatuses",value:e})}),[r]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Io,{dateRange:i.dateRange,isActive:l,onChange:a}),(0,_.jsx)(Ro,{selectedStatuses:i.statuses??[],onChange:s})]})}var Po=()=>o(436446);function Lo(e){let{onRefreshClick:t}=e;const o=(0,l().IS)((e=>({container:{display:"flex",justifyContent:"center",alignItems:"flex-start",paddingBlockStart:96,height:"100%"}})),[]);return(0,_.jsx)("div",{style:o.container,children:(0,_.jsx)(Po().A,{icon:b().clockIcon,title:(0,_.jsx)(p().sA,{defaultMessage:"No runs yet",id:"workflowRuns.noRunsYet"}),description:(0,_.jsx)(p().sA,{defaultMessage:"App runs will appear here",id:"workflowRuns.noRunsYetDescription"}),cta:(0,_.jsx)(go().A,{size:"lg",onClick:t,children:(0,_.jsx)(p().sA,{defaultMessage:"Refresh",id:"workflowRuns.refreshButton"})})})})}var Fo=()=>o(55813),No=()=>o(83823),Wo=()=>o(697428);function Do(e){let{errorId:t}=e;const o=(0,l().IS)((()=>({container:{display:"flex",justifyContent:"center",alignItems:"flex-start",paddingBlockStart:96,height:"100%"},errorContainer:{marginBlockStart:8}})),[]);return(0,_.jsx)("div",{style:o.container,children:(0,_.jsx)(Po().A,{description:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p().sA,{defaultMessage:"It looks like something went wrong. Please try refreshing the page.",id:"workflowRuns.errorLoadingRunsDescription"}),t&&(0,_.jsx)(M().D,{styleName:"Micro-10px/Regular",style:o.errorContainer,children:(0,_.jsx)(No().b,{errorId:t,enablePopup:(0,Wo().o)(t)})})]}),icon:Fo().exclamationMarkTriangleFillIcon,title:(0,_.jsx)(p().sA,{defaultMessage:"Error loading runs",id:"workflowRuns.errorLoadingRunsTitle"})})})}function zo(){const e=(0,l().IS)((()=>({container:{display:"flex",justifyContent:"center",alignItems:"flex-start",paddingBlockStart:96,height:"100%"}})),[]);return(0,_.jsx)("div",{style:e.container,children:(0,_.jsx)(Po().A,{description:"",icon:()=>(0,_.jsx)(eo().A,{size:"lg"}),title:(0,_.jsx)(p().sA,{defaultMessage:"Loading runs...",id:"workflowRuns.loadingRuns"})})})}var Eo=()=>o(975392),Vo=()=>o(537311),Oo=()=>o(517198),Ho=()=>o(59279),Uo=()=>o(35462),Ko=()=>o(735976);function Yo(e){const{onRowClick:t,searchResponse:o,workflowStore:i}=e,a=function(){const e=(0,l().IS)((e=>({headerStyle:{boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`},headerTitle:{fontSize:14}})),[]);return(0,n.useMemo)((()=>[{id:"run",headerStyle:e.headerStyle,headerTitle:(0,_.jsx)("span",{style:e.headerTitle,children:(0,_.jsx)(p().sA,{defaultMessage:"Run",id:"workflowActivityTable.runColumn.header"})}),renderCell:e=>e.isLoading?(0,_.jsx)(Ho().mf,{includeByline:!0,includeIcon:!0}):(0,_.jsx)(Ho().s7,{byline:e.workflowVersion,containerStyles:{alignItems:"start"},icon:(0,_.jsx)($o,{status:e.runStatus}),iconMargin:10,title:e.runName}),sortable:!1,widthData:{minWidth:50,widthPercent:40}},{id:"completed",headerStyle:e.headerStyle,headerTitle:(0,_.jsx)("span",{style:e.headerTitle,children:(0,_.jsx)(p().sA,{defaultMessage:"Completed",id:"workflowActivityTable.completedColumn.header"})}),renderCell:e=>e.isLoading?(0,_.jsx)(qo,{maxLines:1}):e.runFinishedAt?(0,_.jsx)(Qo,{colorName:"tertiary",children:(0,_.jsx)(no,{timestamp:e.runFinishedAt})}):null,sortable:!1,widthData:{minWidth:50,widthPercent:20}}]),[e.headerStyle,e.headerTitle])}(),s=(0,l().IS)((e=>(0,Vo().rC)({columnRenderInfo:a,theme:e,containerMarginTop:0})),[a]),c=o.results,d=(0,r().K8)((()=>(0,j().My)({resultIds:c,workflowStore:i})),[c,i]);return(0,_.jsx)(Vo().WE,{columnRenderInfo:a,hideHeaderRowPadding:!0,onRowClick:t,renderNoRowsComponent:Xo,rows:d,showRowBorders:!0,styles:s})}function Xo(){return(0,_.jsxs)("div",{style:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"40vh"},children:[(0,_.jsx)("div",{children:(0,_.jsx)(Uo().A,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,_.jsx)(p().sA,{defaultMessage:"No results",id:"workflowActivityTable.emptyTable.noResults"})})}),(0,_.jsx)(Uo().A,{isSecondaryColor:!0,children:(0,_.jsx)(p().sA,{defaultMessage:"Try different filters. Logs may take some time to show up.",id:"workflowActivityTable.emptyTable.noResultsHelpText"})})]})}function $o(e){const{status:t}=e,o=(0,l().IS)((e=>({failedIcon:{fill:e.icon.uiRedPrimary},passedIcon:{fill:e.icon.greenPrimary},statusIcon:{marginTop:2,width:18,height:18}})),[]),i=(0,n.useMemo)((()=>"success"===t?{...o.statusIcon,...o.passedIcon}:"failure"===t?{...o.statusIcon,...o.failedIcon}:o.statusIcon),[t,o]);return"success"===t?(0,qt().checkmarkCircleFillIcon)(i):"failure"===t?(0,it().Y)(i):"pending"===t||"running"===t?(0,_.jsx)(eo().A,{size:"sm",style:i}):void(0,g().HB)(t)}function Go(e){return(0,Eo().Et)(e)&&e>0?e:Jo}const Jo=2;function Qo(e){let{children:t,colorName:o,maxLines:n}=e;const i=(0,l().IS)((()=>({container:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"flex-start",padding:"8px 0",width:"100%"}})),[]);return(0,_.jsx)("div",{style:i.container,children:(0,_.jsx)(Ko().A,{maxLines:Go(n),children:(0,_.jsx)(M().D,{colorName:o,styleName:"UIRegular-14px/Regular",children:t})})})}function qo(e){let{maxLines:t}=e;const o=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:8,justifyContent:"center",padding:"8px 0",width:"100%"},line:{borderRadius:4,height:14,width:"100%"},lastLine:{borderRadius:4,height:14,width:"80%"}})),[]);return(0,_.jsx)("div",{style:o.container,children:Array.from({length:Go(t)}).map(((e,t,n)=>{const i=t===n.length-1;return(0,_.jsx)(Oo().A,{style:i?o.lastLine:o.line},t)}))})}function Zo(e){const{handleRowClick:t,hasSearchTerm:o,refetchRuns:n,workflowRunsState:i,workflowStore:r}=e;if("idle"===i.status||"pending"===i.status)return(0,_.jsx)(zo,{});if("rejected"===i.status)return(0,_.jsx)(Do,{});if("resolved"===i.status){var l;if(bt().Q.isFail(i.value))return(0,_.jsx)(Do,{errorId:null===(l=i.value.error)||void 0===l?void 0:l.errorId});{const e=i.value.value.runIds;return(0,g().O9)(e)&&(e.length>0||o)?(0,_.jsx)(a().Y1,{direction:"vertical",width:"fill",height:"fill",padding:"16px",style:{overflowY:"auto"},children:(0,_.jsx)(Yo,{onRowClick:t,searchResponse:{results:e},workflowStore:r})}):(0,_.jsx)(Lo,{onRefreshClick:n})}}(0,g().HB)(i)}const en={viewBox:"0 0 16 16",svg:(0,_.jsx)("path",{d:"M11.228 2.361a.55.55 0 0 1 0 .778L9.354 5.014a.55.55 0 0 1-.778-.778l.89-.89H8A4.653 4.653 0 1 0 12.653 8a.597.597 0 0 1 1.194 0A5.847 5.847 0 1 1 8 2.153h1.465l-.889-.89a.55.55 0 1 1 .778-.777z"})},tn=(0,Ct().wt)("arrowCircleSpinClockwiseSmall",en);var on=()=>o(124967),nn=()=>o(493738),rn=()=>o(615917);function ln(e){let{value:t,onChange:o,style:i}=e;const[r,a]=(0,n.useState)(!1),s=(0,l().IS)((e=>({iconButton:{width:17,height:void 0,fill:e.icon.secondary},input:{fontSize:14,lineHeight:1,paddingRight:4,color:e.text.primary,marginBottom:1},ignoreArea:{display:"flex",alignItems:"center",overflow:"hidden"}})),[]),c=(0,n.useCallback)((()=>{a((e=>!e))}),[]),d=(0,n.useCallback)((()=>{o(""),a(!1)}),[o]),u=(0,n.useCallback)((()=>{t||a(!1)}),[t]),g=(0,n.useCallback)((e=>{27===e.keyCode&&d()}),[d]),h=(0,n.useCallback)((e=>{o(e.target.value)}),[o]),f=(0,p().tz)().formatMessage({id:"workflowRuns.searchInput.tooltip",defaultMessage:"Search"});return(0,_.jsx)(Yt().A,{renderTooltip:()=>f,render:e=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(_e().A,{...e,icon:nn().u,iconStyle:s.iconButton,onClick:c,ariaLabel:f}),(0,_.jsx)(rn().A,{visible:r,animate:{width:150,opacity:1},initial:{width:0,opacity:0},exit:{width:0,opacity:0},children:(0,_.jsx)($e().A,{debugName:"SearchInput",capture:r,allowEsc:!0,render:e=>(0,_.jsx)("div",{...e,style:s.ignoreArea,children:(0,_.jsx)(Ge().A,{style:{...s.input,...i},format:Ge().C.Transparent,value:t,onChange:h,placeholder:"Search runs...",focusInitial:r,showClearButton:!0,onBlur:u,onCancel:d,onClearButtonClick:d,onKeyDown:g})})})})]})})}function an(e){const{hasFilterEnabled:t,onFilterClick:o,onRefreshClick:n,onSearchChange:i,searchTerm:r}=e,a=(0,p().tz)(),s=(0,l().IS)((e=>({icon:{fill:e.icon.secondary,height:void 0,width:17},filterIcon:{fill:t?e.icon.uiBluePrimary:e.icon.secondary,height:void 0,width:17}})),[t]);return(0,_.jsx)(we,{label:(0,_.jsx)(p().sA,{defaultMessage:"All activity",id:"workflowAdvanced.runs.header"}),icon:(0,_.jsx)(k().I,{size:"default",color:"secondary",icon:b().clockIcon}),right:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(_e().A,{ariaLabel:a.formatMessage({defaultMessage:"Refresh",id:"workflowRuns.refreshButton"}),icon:tn,iconStyle:s.icon,onClick:n}),(0,_.jsx)(_e().A,{ariaLabel:a.formatMessage({defaultMessage:"Filter",id:"workflowRuns.filterButton"}),icon:on().$,iconStyle:s.filterIcon,onClick:o}),(0,_.jsx)(ln,{onChange:i,value:r??""})]})})}const sn=3e4;function cn(e){const{workflowStore:t,blockStore:o,navigationState:l}=e,s=(0,i().v3)(),[c,d]=(0,n.useState)(!1),[u,g]=(0,r().K8)((()=>[t.id,t.getSpaceId()]),[t]),[h,f]=(0,n.useReducer)(((e,t)=>{switch(t.type){case"setSearchTerm":return{...e,searchTerm:t.value};case"setFilters":return{...e,dateRange:t.value.dateRange,statuses:t.value.statuses};default:return e}}),{dateRange:{starting:void 0,ending:void 0},searchTerm:"",statuses:void 0}),m=(0,St().l)(h),y=(0,n.useMemo)((()=>{var e;return Boolean(m.dateRange.starting||m.dateRange.ending||((null===(e=m.statuses)||void 0===e?void 0:e.length)??0)>0)}),[m]),v=(0,p().tz)(),x=(0,n.useMemo)((()=>{var e,t;if(!g)return;const o=null!==(e=m.dateRange.starting)&&void 0!==e&&e.start_date?(0,yt().HF)(m.dateRange.starting,(0,vt().P)(),v.locale).startOf("day").toISO():void 0,n=null!==(t=m.dateRange.ending)&&void 0!==t&&t.start_date?(0,yt().HF)(m.dateRange.ending,(0,vt().P)(),v.locale).endOf("day").toISO():void 0;return{containsSubstring:m.searchTerm,end:n,spaceId:g,start:o,statuses:m.statuses,workflowId:u}}),[g,m,v,u]),[b,S]=(0,xt().Yb)((async()=>{if(!kt().A.state.online||!x)return bt().Q.success({runIds:void 0});const e=await Xe().callApi({eventName:"getWorkflowRuns",environment:s,data:x});return"failed"===e.type?bt().Q.fail(e.body):bt().Q.success({runIds:e.data.runIds})}),[x,s]);wt(S,sn);const w=(0,n.useCallback)((e=>{f({type:"setSearchTerm",value:e})}),[]),k=(0,mt().Y)(w,250),C=(0,n.useCallback)((e=>{f({type:"setFilters",value:e})}),[]),j=(0,n.useCallback)((()=>{d((e=>!e))}),[]),A=(0,n.useCallback)((e=>{(0,T().showWorkflowEditor)({environment:s,parentStore:o,navigationState:{runId:e.runId}})}),[s,o]);return l.runId?(0,_.jsx)(yo,{runId:l.runId,workflowStore:t,parentStore:o}):(0,_.jsxs)(a().Y1,{direction:"vertical",width:"fill",height:"fill",children:[(0,_.jsx)(an,{hasFilterEnabled:y,onFilterClick:j,onRefreshClick:S,onSearchChange:k,searchTerm:h.searchTerm}),(0,_.jsx)(Nt,{isOpen:c,relativePaddingLeft:-6,children:(0,_.jsx)(Bo,{defaultFilterState:h,onChange:C})}),(0,_.jsx)(Zo,{handleRowClick:A,hasSearchTerm:Boolean(h.searchTerm),refetchRuns:S,workflowRunsState:b,workflowStore:t})]})}var dn=()=>o(431551),un=()=>o(784889);const pn=(0,p().YK)({triggerEnabledLabel:{defaultMessage:"Active",id:"aiWorkflow.trigger.triggerEnabledLabel"},triggerEnabledHiddenAriaLabel:{defaultMessage:"Trigger is active.",id:"aiWorkflow.trigger.triggerEnabledHiddenAriaLabel"},triggerPausedHiddenAriaLabel:{defaultMessage:"Trigger is paused.",id:"aiWorkflow.trigger.triggerPausedHiddenAriaLabel"},triggerDisabledTooltip:{defaultMessage:"You do not have permission to resume this trigger.",id:"aiWorkflow.trigger.triggerDisabledTooltip"},triggerErrorsDisabledTooltip:{defaultMessage:"Fix any errors or remove failing steps to enable this trigger",id:"aiWorkflow.trigger.triggerErrorsDisabledTooltip"}});function gn(e){var t;const{triggerKey:o}=e,n=(0,l().IS)((e=>({section:{display:"flex",flexDirection:"column",gap:8,width:"100%",marginBottom:28},header:{alignItems:"center",display:"flex",flexDirection:"row"},title:{color:e.text.tertiary,fontSize:12,lineHeight:1.3,fontWeight:rt().Wy.medium}})),[]),{blockStore:i,workflowValue:r}=(0,x().N)(),a=null==r||null===(t=r.triggers)||void 0===t?void 0:t.find((e=>e.key===o));return a?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(hn,{trigger:a,cantSaveDueToError:!1,disabled:!1}),(0,_.jsxs)("section",{style:n.section,children:[(0,_.jsx)("header",{style:n.header,children:(0,_.jsx)("div",{style:n.title,children:(0,_.jsx)(p().sA,{defaultMessage:"When",id:"aiWorkflow.trigger.when"})})}),(0,_.jsx)(un().VX,{children:(0,_.jsx)(un().hZ,{trigger:a})})]}),(0,_.jsxs)("section",{style:n.section,children:[(0,_.jsx)("header",{style:n.header,children:(0,_.jsx)("div",{style:n.title,children:(0,_.jsx)(p().sA,{defaultMessage:"Do",id:"aiWorkflow.trigger.do"})})}),(0,_.jsx)(un().VX,{children:(0,_.jsx)(un().r2,{functionKey:a.key,parentStore:i})})]})]}):null}function hn(e){const{trigger:t,cantSaveDueToError:o,disabled:r}=e,a=!1!==t.enabled,s=`toggle-${t.key}`,c=(0,i().Y0)().isMobile,d=(0,i().v3)(),{workflowPointer:u,threadStore:g,blockStore:h}=(0,x().N)(),f=(0,n.useCallback)((()=>{if(!u)throw new Error("No workflow pointer");Ie().saveTrigger({trigger:{...t,enabled:!a},environment:d,threadStore:g,workflowPointer:u,blockStore:h})}),[t,a,d,g,u,h]),m=(0,l().IS)((e=>({labelWrap:{color:r?e.text.tertiary:e.text.secondary,flex:"1 1 auto",fontSize:c?rt().J.UIRegular.mobile:rt().J.UIRegular.desktop},sectionWrap:{alignItems:"start",display:"flex",flexDirection:"row",gap:6,marginBlockEnd:0,...c?{paddingBottom:0,paddingTop:0}:{paddingBottom:12,borderBottom:`1px solid ${e.stroke.secondary}`,marginBottom:16}},toggleWrap:{flex:"0 0 auto",paddingBlockStart:c?5:2}})),[r,c]),y=pn.triggerEnabledLabel,v=a?pn.triggerEnabledHiddenAriaLabel:pn.triggerPausedHiddenAriaLabel;return(0,_.jsxs)("section",{style:m.sectionWrap,children:[(0,_.jsx)("div",{style:m.toggleWrap,children:(0,_.jsx)(Yt().A,{disableTooltip:!r||!a,renderTooltip:()=>o?(0,_.jsx)(p().sA,{...pn.triggerErrorsDisabledTooltip}):(0,_.jsx)(p().sA,{...pn.triggerDisabledTooltip}),render:e=>(0,_.jsx)("div",{...e,children:(0,_.jsx)(dn().A,{disabled:r,inputId:s,on:a,onClick:f})})})}),(0,_.jsx)("div",{style:m.labelWrap,children:(0,_.jsxs)("label",{htmlFor:s,children:[(0,_.jsx)("span",{"aria-hidden":!0,children:(0,_.jsx)(p().sA,{...y})}),(0,_.jsx)("span",{style:Dt().Qg,children:(0,_.jsx)(p().sA,{...v})})]})})]})}function fn(e){var t;const{workflow:o,triggerKey:n}=e,i=null===(t=o.triggers)||void 0===t?void 0:t.find((e=>e.key===n));return i?(0,_.jsxs)(a().Y1,{direction:"vertical",width:"fill",height:"fill",children:[(0,_.jsx)(we,{icon:(0,_.jsx)(k().I,{size:"default",color:"secondary",icon:w().lightningFillIcon}),label:i.name}),(0,_.jsxs)(a().Y1,{direction:"vertical",gap:24,padding:24,height:"fill",style:{overflowY:"auto"},children:[(0,_.jsx)(gn,{triggerKey:n}),(0,_.jsx)(de().r0,{children:(0,_.jsx)(mn,{trigger:i})})]})]}):null}function mn(e){const{trigger:t}=e,o=(0,i().v3)(),{blockStore:r,workflowPointer:l,threadStore:a}=(0,x().N)(),s=(0,n.useCallback)((e=>{const t=JSON.parse(e);if(!l)throw new Error("No workflow pointer");Ie().saveTrigger({environment:o,workflowPointer:l,threadStore:a,trigger:t,blockStore:r})}),[r,o,a,l]);return(0,_.jsx)(Me().X,{value:(c=t,JSON.stringify(c,null,2)),onSave:s,language:"json"});var c}function yn(e){const{blockStore:t,routerState:o,maybeLogSearchInteractionEvent:n}=e,i=(0,c().useWorkflowNavigationState)(),r=(0,ce().Y)(t),l=(0,x().N)().workflowValue??u().ZB;if(null==i||!i.isOpen)return null;if("configure"===i.type)return(0,_.jsx)(se().LN,{store:t,routerState:o,maybeLogSearchInteractionEvent:n});if("preview"===i.type)return i.collectionViewId?(0,_.jsx)(ht,{blockStore:t,collectionViewId:i.collectionViewId}):null;if("module"===i.type){var s;const e=null===(s=l.modules)||void 0===s?void 0:s.find((e=>e.key===i.key));return e?(0,_.jsx)(gt,{workflow:l,workflowStore:r,blockStore:t,module:e}):(0,_.jsx)("div",{children:"Module not found"})}if("database"===i.type)return(0,_.jsx)(ke,{workflow:l,workflowStore:r,blockStore:t,databaseId:i.id});if("trigger"===i.type)return(0,_.jsx)(fn,{triggerKey:i.key,blockStore:t,workflow:l});if("function"===i.type)return(0,_.jsx)(dt,{functionKey:i.key,workflow:l,blockStore:t},i.key);if(r&&l){if("runs"===i.type)return(0,_.jsx)(cn,{workflowStore:r,blockStore:t,navigationState:i});if("debug"===i.type)return(0,_.jsx)(a().Y1,{width:"fill",height:"fill",style:{overflowY:"auto"},children:(0,_.jsx)(de().l$,{workflow:l,blockStore:t,workflowStore:r})})}return null}function vn(e){const{routerState:t,maybeLogSearchInteractionEvent:o}=e,{blockStore:n}=(0,d().$O)(),u=function(e){const{blockStore:t}=e,o=(0,i().v3)();return(0,r().K8)((()=>{const e=new(s().A)(o);return e.setContext({type:"collectionView",collectionViewBlockStore:t,collectionViewStore:t.getCollectionViewStores()[0],collectionStore:void 0,pageVisitSourceOverride:void 0}),e}),[o,t])}({blockStore:n}),p=(0,c().useWorkflowNavigationState)(),g=(0,l().IS)((e=>({container:{borderTop:`0.5px solid ${e.stroke.primary}`,minWidth:0},mainPanel:{minWidth:0}})),[]);return p.isOpen?(0,_.jsxs)(a().Y1,{direction:"horizontal",width:"fill",height:"fill",style:g.container,children:[(0,_.jsx)(ae,{previewCollectionContextStore:u}),(0,_.jsx)(a().Y1,{direction:"vertical",width:"fill",height:"fill",style:g.mainPanel,children:(0,_.jsx)(yn,{blockStore:n,routerState:t,maybeLogSearchInteractionEvent:o})})]}):null}},60525:(e,t,o)=>{o.d(t,{A:()=>i});o(242343);var n=o(163643);const i=function(e){let{loading:t,onLoadMore:i,loadMoreOffsetThreshold:r,resultSize:l,fetchSize:a}=e;return(0,n.jsx)(o(168980).A,{onChange:e=>function(e,t,o,n,i,r){if(t)return;const l=n||200;if(e>l)return;const a=void 0===i||void 0===r||i>=r;a&&o()}(e,t,i,r,l,a)})}},63463:(e,t,o)=>{e.exports=o.p+"edfba4a6d1ff7acd.png"},78245:(e,t,o)=>{o.d(t,{z:()=>l});o(242343);var n=()=>o(129978),i=o(163643);const r=new(n().O2)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await o.e(79883).then(o.bind(o,824997));return{CollectionItemCover:e}})),l=(0,n()._h)(r,(e=>e.CollectionItemCover),{renderLoading:(e,t)=>{const{coverHeight:n,coverSizeFormat:r,emptyGalleryCoverStyle:l,showEmptyGalleryCover:a}=t;return a?(0,i.jsx)(o(803291).t,{coverHeight:n,coverSizeFormat:r,emptyGalleryCoverStyle:l}):null}})},89969:(e,t,o)=>{o.d(t,{D:()=>n});function n(e,t){t.route.name;return!1}},96144:(e,t,o)=>{o.d(t,{R:()=>i});o(242343);var n=o(163643);const i=(0,o(680369).wt)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,n.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},101558:(e,t,o)=>{o.d(t,{r:()=>r});var n=()=>o(803290),i=()=>o(836331);function r(e){return(0,n().K8)((()=>i().default.getGroup(e)),[e])}},105429:(e,t,o)=>{o.d(t,{m:()=>i});class n extends(()=>o(129044))().default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:n,stores:i,sessionIdForAnalytics:r}=e,l=i[0].getAssociatedCollectionId()??(null===(t=i[0].getCollectionStore())||void 0===t?void 0:t.id),a=r||o(214144).JW();return this.setState({type:"filling",propertySchema:n,collectionId:l,numBlocksToAutofill:i.length,numBlocksAutofilled:0,sessionId:a,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),a}}const i=new n},130081:(e,t,o)=>{o.d(t,{UQ:()=>g,gL:()=>f});o(610931),o(725707),o(500234),o(771702);var n=()=>o(810111),i=()=>o(769884),r=()=>o(33715),l=()=>o(220865),a=()=>o(846287),s=()=>o(996151),c=()=>o(946854),d=()=>o(293665),u=()=>o(927999),p=()=>o(84543);function g(e){let{environment:t,transaction:o,layoutStore:n,position:s,updatedModule:c,sessionId:d}=e;const u=r().Zm[s.area],g=n.getRawModules();if("form_conditional_modules"===u){const e=null==g?void 0:g[u];if(!(null==e?void 0:e[s.moduleId]))throw new Error("Unable to find module being updated.");return void p().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){p().applyOperation({transaction:e,store:n,operation:i().N4X.updateModuleInArea({pointer:n.pointer,area:u,module:(0,l().Lv)(c)})})},userAction:"BuilderLayoutModules.updateModule"})}if(!g)throw new Error("Unable to find modules");const h=(0,a().LC)(g,(e=>e.id===s.moduleId));if(!h||h.area!==u)throw new Error("Unable to find module being updated.");p().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){p().applyOperation({transaction:e,store:n,operation:i().N4X.updateModuleInArea({pointer:n.pointer,module:(0,l().Lv)(c),..."views_main_tab_modules"===h.area?{area:h.area,viewId:h.viewId}:{area:h.area}})})},userAction:"BuilderLayoutModules.updateModule"})}function h(e){var t,o,n;let{collectionStore:i,layoutStore:r}=e;const l=new Map,a=i.getFormat(),s=[...null===(t=r.getModules())||void 0===t?void 0:t.page_main,...null===(o=r.getModules())||void 0===o?void 0:o.page_details],d=new Map;null===(n=a.property_visibility)||void 0===n||n.forEach((e=>{d.set(e.property,e)})),s.forEach((e=>{if(!(0,c()._Q)(e))return(0,c().gx)(e)?(l.set(e.propertyId,{property:e.propertyId}),void d.set(e.propertyId,{property:e.propertyId,visibility:"show"})):void 0;e.propertyIds.forEach((e=>{l.set(e,{property:e}),d.set(e,{property:e,visibility:"show"})}))}));const u=i.getNormalizedPropertyGroups();var p;u?u.forEach((e=>{var t;null===(t=e.propertyIds)||void 0===t||t.forEach((e=>{l.has(e)||l.set(e,{property:e})}))})):null===(p=a.collection_page_properties)||void 0===p||p.forEach((e=>{l.has(e.property)||l.set(e.property,e)}));return{propertiesFormat:Array.from(l.values()),propertyVisibility:Array.from(d.values())}}function f(e){let{environment:t,transaction:o,collectionStore:r,layoutStore:l}=e;const{propertiesFormat:a,propertyVisibility:g}=h({collectionStore:r,layoutStore:l});p().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){const t=l.getBlockChildrenPointers(),o=l.getFormat(),h=l.firstModuleOfType("viewsMain");h&&(0,c().y6)(h)&&t.find((e=>d().L3.isEqual(e,h.collection_view_block_pointer)))&&p().applyOperation({transaction:e,store:l,operation:i().N4X.removeBlockChild(l.pointer,h.collection_view_block_pointer.id)});const f=null==o?void 0:o.previousViewsMainCollectionViewBlockPointer,m=f&&t.find((e=>d().L3.isEqual(e,f)));m&&p().applyOperation({transaction:e,store:l,operation:i().N4X.removeBlockChild(l.pointer,m.id)}),p().applyOperation({transaction:e,store:l,operation:i().N4X.setModulesByAreas(l.pointer,(0,s().K5)())}),p().applyOperation({transaction:e,store:l,operation:i().N4X.deleteFormat(l.pointer)});const y=r.getFormat(),{page_section_visibility:v}=y;u().zA({stores:[r],update:{property_groups:void 0,collection_page_properties:a,property_visibility:g,...v?{page_section_visibility:n().Zi}:void 0},transaction:e})},userAction:"BuilderLayoutModules.resetLayoutToDefault"})}},143920:(e,t,o)=>{o.d(t,{y:()=>d});var n=()=>o(763555),i=()=>o(284320);const r={ko:()=>o.e(2268).then(o.bind(o,662161)),es:()=>o.e(95264).then(o.bind(o,894994)),de:()=>o.e(35390).then(o.bind(o,133788)),fr:()=>o.e(3272).then(o.bind(o,447454)),pt:()=>o.e(27315).then(o.bind(o,193182)),zh:()=>o.e(69945).then(o.bind(o,316605)),ja:()=>o.e(77757).then(o.bind(o,108299)),da:()=>o.e(9423).then(o.bind(o,965826)),fi:()=>o.e(59337).then(o.bind(o,122956)),nb:()=>o.e(2040).then(o.bind(o,763585)),nl:()=>o.e(51106).then(o.bind(o,696090)),sv:()=>o.e(53631).then(o.bind(o,485349))};let l=!1,a=!1;async function s(e){for(const[o,i]of Object.entries(e.emojiLocaleKeywords)){var t;n().fB[o]={...n().fB[o],keywords:[...i,...(null===(t=n().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await i().A.waitUntilLoaded(),i().A.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}async function c(){if(l)return;const[e]=o(16791).locale.split("-");e in r&&(await s(await r[e]()),l=!0)}const d=(0,o(531367).A)((async()=>{await async function(){a||(await s(await o.e(51872).then(o.bind(o,531983))),a=!0)}(),await c()}))},150936:(e,t,o)=>{o.d(t,{b:()=>i});o(242343);var n=o(163643);const i=(0,o(680369).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},155342:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,questionMarkCircleIcon:()=>r});o(242343);var n=o(163643);const i={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,o(680369).wt)("questionMarkCircle",i)},170582:(e,t,o)=>{o.d(t,{r:()=>i});o(242343);const n={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M10 2.355a2.35 2.35 0 0 0-2.253 1.686 5.06 5.06 0 0 0-2.803 4.527v1.189c0 .919-.334 1.806-.939 2.498l-.818.935c-.881 1.007-.166 2.583 1.173 2.583h3.02a2.65 2.65 0 0 0 5.24 0h3.02c1.339 0 2.054-1.576 1.173-2.583l-.818-.935a3.8 3.8 0 0 1-.939-2.498v-1.19a5.06 5.06 0 0 0-2.803-4.526A2.35 2.35 0 0 0 10 2.355m1.5 13.418a1.55 1.55 0 0 1-2.998 0zM8.909 4.564A1.104 1.104 0 0 1 10 3.605c.556 0 1.017.415 1.091.96l.049.353.329.138a3.81 3.81 0 0 1 2.337 3.512v1.189c0 1.221.444 2.401 1.248 3.32l.818.936a.307.307 0 0 1-.232.51H4.36a.308.308 0 0 1-.232-.51l.818-.935a5.04 5.04 0 0 0 1.248-3.321v-1.19c0-1.58.963-2.936 2.337-3.511l.33-.138z"})},i=(0,o(680369).wt)("bell",n)},172694:(e,t,o)=>{o.d(t,{G:()=>r});o(242343);var n=o(163643);const i={viewBox:"0 0 16 16",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.204 1.93a3.47 3.47 0 0 0-4.097.39.625.625 0 1 0 .834.931 2.22 2.22 0 0 1 3.16.202.625.625 0 0 0 .944-.818 3.5 3.5 0 0 0-.84-.705m6.018.976A3.47 3.47 0 0 0 8.463 4.1l-5.077 8.476a.625.625 0 0 0 .437.938l4.41.715a.625.625 0 0 0 .2-1.234l-3.5-.568 4.602-7.685a2.22 2.22 0 0 1 3.822.02.625.625 0 1 0 1.08-.63 3.46 3.46 0 0 0-1.214-1.226m-7.83 2.105a1.094 1.094 0 1 0-.35 2.159 1.094 1.094 0 0 0 .35-2.159"}),(0,n.jsx)("path",{d:"M10.762 5.881a1.093 1.093 0 1 0-.35 2.159 1.093 1.093 0 0 0 .35-2.159"})]})},r=(0,o(680369).wt)("aiFaceSmall",i)},180365:(e,t,o)=>{o.d(t,{A:()=>C});var n=o(242343),i=()=>o(237385),r=()=>o(803290),l=()=>o(653998),a=()=>o(927999),s=()=>o(18376),c=()=>o(84543),d=()=>o(481148),u=()=>o(400885),p=()=>o(802955),g=()=>o(652039),h=()=>o(883249),f=()=>o(470414),m=()=>o(615917),y=()=>o(126451),v=()=>o(392968),x=()=>o(174114),b=()=>o(76394),S=o(163643);function w(e){let{src:t,placeholderSrc:o,placeholderBehavior:i,imageStyle:r,containerStyle:l,onLoadComplete:a,testId:s}=e;const[c,d]=(0,n.useState)(!0);let u;switch(i){case"force-show-placeholder":u=!0;break;case"force-show-src":u=!1;break;case"show-placeholder-if-loading-src":u=!!o&&(c||void 0===t);break;default:(0,b().HB)(i)}const p=(0,x().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...l},srcWrapper:{...u&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[l,u]);(0,n.useEffect)((()=>{void 0!==t&&d(!0)}),[t]);const g=(0,n.useCallback)((e=>{d(!1),null==a||a()}),[a]);return(0,S.jsxs)("div",{style:p.container,children:[(0,S.jsx)(v().Ay,{src:t,onLoad:g,style:r,placeholderStyle:p.srcWrapper,placeholderLoadedStyle:p.srcWrapper,testId:s}),o&&(0,S.jsx)(v().Ay,{src:o,style:r,placeholderStyle:p.placeholderWrapper,placeholderLoadedStyle:p.placeholderWrapper})]})}var k=()=>o(410090);const C=function(e){let{store:t,disabled:l,paddingRight:s,paddingLeft:d,height:u,proxyWidth:p}=e;const f=(0,i().v3)(),m=(0,r().uB)(void 0,o(116586).A),y=(0,r().K8)((()=>l||"suggest"===o(615661).Uv.getMode(t)),[l,t]),x=(0,r().K8)((()=>t.getCover()),[t]),b=(0,r().O$)(h().A),[k,C]=(0,n.useState)(void 0);if(!x)return null;const I=b.loadingMode!==g().pF&&b.loadingMode!==g().Wc;return(0,S.jsx)(o(982717).A,{mouseStore:m,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:n,reset:i}=e;c().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{a().yY({store:t,coverPosition:n,transaction:e}),i()}})}(e,t,f),renderControl:e=>{let{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:i,isVisible:r,isRepositioning:l}=e;return(0,S.jsx)(A,{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:i,isVisible:r,isRepositioning:l,lastProxiedUrl:k,store:t,disabled:y,paddingRight:s,paddingLeft:d,mouseStore:m})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:u,maxHeight:280,cursor:"default"},render:e=>(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)(o(283992).A,{url:x.cover,isAuthenticated:!0,permissionRecord:x.pointer,width:p,onFinishedLoadingProxyUrl:C,render:(t,o)=>{const n={width:"100%",height:u,maxHeight:280,objectFit:"cover",opacity:I?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},i={width:"100%",height:u,maxHeight:280};return(0,S.jsx)(w,{src:o,placeholderSrc:I?b.dataURL:void 0,placeholderBehavior:I?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:i,imageStyle:n,onLoadComplete:j,testId:"pageCover"})}}),I&&(0,S.jsxs)("div",{style:v().fd,children:[(0,S.jsx)(o(966789).A,{size:"md",style:{marginRight:4}}),(0,S.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:void 0!==b.uploadProgress?(0,S.jsx)(o(335157).A,{percentage:b.uploadProgress}):b.progressText?(0,S.jsx)("span",{children:b.progressText}):null})]})]})})};function j(){h().A.reset()}function A(e){let{isVisible:t,isRepositioning:o,handleCancelClick:a,handleRepositionClick:c,handleSavePositionClick:v,lastProxiedUrl:x,store:b,disabled:w,paddingRight:C,paddingLeft:j,mouseStore:A}=e;const I=(0,i().v3)(),M=(0,l().tz)(),T=(0,n.useCallback)((e=>function(e,t,o,n,i){i.reset();const r=e.target.getBoundingClientRect();s().W({environment:t,intl:o,store:n,rect:r})}(e,I,M,b,A)),[I,M,b,A]),_=(0,r().K8)((()=>h().A.state.loadingMode),[]),R=(0,r().K8)((()=>function(e){let t;return t=Boolean(e.isFullWidth())?"100%":u().x6,t}(b)),[b]),{device:B}=I,P=(0,r().K8)((()=>!o&&!(0,d().LX)({device:B})),[o,B]),L=(0,r().O$)(p().e);if(w||_!==g().pF||!L)return null;const{isMobile:F}=B;return(0,S.jsx)(m().A,{animate:{width:R,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,S.jsxs)(f().A,{isVisible:t,position:"bottom",style:{marginRight:C,marginLeft:j},children:[P&&(0,S.jsx)(y().A,{style:{borderRight:F?"none":void 0,...k().k},onClick:T,children:(0,S.jsx)(l().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!o&&!F&&(0,S.jsx)(y().A,{style:{...k().k,borderRight:"none"},onClick:e=>c(e,x),children:(0,S.jsx)(l().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),o&&!F&&(0,S.jsx)(y().A,{style:k().k,onClick:v,children:(0,S.jsx)(l().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),o&&!F&&(0,S.jsx)(y().A,{style:{...k().k,borderRight:"none"},onClick:a,children:(0,S.jsx)(l().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},201147:(e,t,o)=>{o.d(t,{Fe:()=>r,wm:()=>l});const n={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,relationsGroup:!0,formSubmit:!0,formQuestion:!0,formTitle:!0,placeholder:!0,transcript:!0,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,views:!0,viewsMain:!1,recentActivity:!1,collaborators:!1,teamspaces:!1},i={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,formSubmit:!1,formQuestion:!1,formTitle:!1,placeholder:!1,transcript:!1,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,relationsGroup:!0,editor:!1,views:!1,viewsMain:!1,recentActivity:!1,collaborators:!1,teamspaces:!1};function r(e){return n[e.type]}function l(e){return i[e.type]}},202193:(e,t,o)=>{o.d(t,{Qo:()=>a,hu:()=>s,k9:()=>r,nE:()=>l});var n=()=>o(555919),i=()=>o(654548);const r=(0,o(653998).YK)({titlePlaceholder:{defaultMessage:"Untitled",id:"database.source.titlePlaceholder"},newTitlePlaceholder:{defaultMessage:"New database",id:"database.source.newTitlePlaceholder"},actionsButtonAriaLabel:{defaultMessage:"Collection actions",id:"database.source.actionsButtonAriaLabel"}});function l(e){let{intl:t,isDBUXChromeEnabled:o,isWorkflowsAppContainerEnabled:n,collectionStore:i}=e;var l;return n?t.formatMessage(o?r.newTitlePlaceholder:r.titlePlaceholder):(null==i||null===(l=i.getModel())||void 0===l?void 0:l.getEmptyTitlePlaceholder({intl:t,isWorkflowsAppContainerEnabled:n}))||t.formatMessage(r.titlePlaceholder)}function a(e){let{collectionStore:t,intl:o,isDBUXChromeEnabled:n,isWorkflowsAppContainerEnabled:i}=e;return t.getName()??[[l({intl:o,isDBUXChromeEnabled:n,isWorkflowsAppContainerEnabled:i,collectionStore:t})]]}function s(e){let{collectionStore:t,intl:o,isDBUXChromeEnabled:r,isWorkflowsAppContainerEnabled:a}=e;return null!=t&&t.isDefined()?(0,i().r4)(t.getName(),t)||l({intl:o,isDBUXChromeEnabled:r,isWorkflowsAppContainerEnabled:a,collectionStore:t}):(0,n().L)(o)}},210290:(e,t,o)=>{o.d(t,{S:()=>c,q:()=>s});o(725707),o(500234);var n=()=>o(236339),i=()=>o(865226),r=()=>o(302376),l=()=>o(29869),a=()=>o(314164);function s(e){const{environment:t,collectionContextStore:o,event:l,buttonPopupParent:s}=e,c=(0,a().t2)(o);if(!c)return null;const d=r().Vr(l);i().oo({environment:t,url:c,openInNew:d}),d||null==s||s.close(),(0,n().X)({environment:t,collectionContextStore:o,action:"click_source_view"})}function c(e){var t;let{environment:o,collectionStore:n,pageVisitSource:a,event:s}=e;const c=n.getParentBlockStore();if(!c)return;const d=null===(t=c.getCollectionViewStores())||void 0===t?void 0:t.find((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===n.id})),u=(0,l().J8)({store:c,fullyQualified:!1,pageVisitSource:a,collectionViewId:null==d?void 0:d.id});i().oo({environment:o,url:u,openInNew:r().Vr(s)})}},213255:(e,t,o)=>{o.d(t,{A:()=>r});o(242343);var n=o(163643);const i={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8.65 8.25a.625.625 0 1 0 0 1.25h.725v3.25H8.65a.625.625 0 1 0 0 1.25h2.7a.625.625 0 1 0 0-1.25h-.725V8.875A.625.625 0 0 0 10 8.25zM10.7 6.3a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,n.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},r=(0,o(680369).wt)("infoCircle",i)},277013:(e,t,o)=>{o.d(t,{$:()=>c,S:()=>d});var n=()=>o(803290),i=()=>o(174114),r=()=>o(782422),l=()=>o(48913),a=()=>o(755648),s=()=>o(566255);function c(e){const{environment:t,rightEdgeDistance:o,isInPeekRenderer:c}=e,u=e.width??36,p=(0,n().K8)((()=>(0,l().zo)(t,c)-(0,l().Ql)(t)),[t,c]),g=(0,n().K8)((()=>d(t,16+a().A.state)),[t]),h=(0,n().K8)((()=>o+a().A.state),[o]),f=(0,n().K8)((()=>r().$o.state?0:1),[]);return(0,i().IS)((e=>({buttonPositionStyle:{display:"flex",position:"absolute",bottom:g,right:h,opacity:f,transform:`translateX(-${p}px) translateZ(0)`,transition:`\n\t\t\t\t\topacity ${s().L}ms,\n\t\t\t\t\tcolor ${s().L}ms,\n\t\t\t\t\ttransform 200ms\n\t\t\t\t`,alignItems:"center",gap:10},roundButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",background:e.whiteButtonBackground,width:u,height:u,borderRadius:"100%",fontSize:20,boxShadow:e.shadowSM}})),[p,g,h,u,f])}function d(e,t){return e.WindowSizeStore.getSafePaddingBottomCSS(t+(e.device.isTablet?-12:0))}},286270:(e,t,o)=>{o.d(t,{E:()=>l});var n=o(242343),i=()=>o(81e4),r=o(163643);const l=n.forwardRef(((e,t)=>{let{children:n,color:l,disabled:a,icon:s,iconStyle:c,isLoading:d,shape:u="default",size:p="md",style:g,...h}=e;const f=(0,o(174114).IS)((e=>{const t=l?`${l}Primary`:"primary",r=l||"regular",h=l?`${l}Hover`:"primaryHover",f=l?`${l}Pressed`:"primaryPressed";return{button:{...(0,i().qq)({shape:u,size:p,hasIconOnly:Boolean(s)&&!n}),justifyContent:"center",color:e.text[t],background:e.tint[r],opacity:a||d?.3:1,fontWeight:o(31448).Wy.medium,...g},hovered:{background:a?e.tint[r]:e.tint[h]},pressed:{background:a?e.tint[r]:e.tint[f]},icon:{...(0,i().D3)({size:p,hasIconOnly:!n}),...c}}}),[n,l,a,s,c,d,u,p,g]);return(0,r.jsxs)(o(417653).A,{ref:t,style:f.button,hoveredStyle:f.hovered,pressedStyle:f.pressed,disabled:a,isLoading:d,...h,children:[s?s(f.icon):null,n]})}));l.displayName="TintButton"},305948:(e,t,o)=>{o.d(t,{eJ:()=>f,ew:()=>h,ml:()=>d,rA:()=>p,yI:()=>g,zf:()=>u});o(403517);var n=()=>o(975392),i=()=>o(76394),r=()=>o(61014),l=()=>o(86335),a=()=>o(479056),s=()=>o(465546);function c(e){switch(e){case"checkbox":return"boolean";case"number":return"number";case"text":return"text";case"date":return"date";case"array":return"array";case"block":return"block";case"person":return"person";case"select":return"select";case"function":return"function";case"unknown":return"unknown";case"undefined":return"undefined";default:(0,i().HB)(e)}}function d(e){switch(e.type){case a().M9.InvalidCharacter:return{...l().x0.InvalidCharacter,values:{errorCharacter:e.character}};case a().M9.UnclosedStringLiteral:return l().x0.UnclosedStringLiteral;case a().M9.UnclosedComment:return l().x0.UnclosedComment;case a().M9.TokenExpected:return{...l().x0.TokenExpected,values:{expectedToken:e.token}};case a().M9.StringLiteralContainsToken:return l().x0.StringLiteralContainsToken;case a().M9.ExpressionExpected:return l().x0.ExpressionExpected;case a().M9.PropertyTokenOrFunctionExpected:return l().x0.PropertyTokenOrFunctionExpected;case a().M9.EndOfInputExpected:return l().x0.EndOfInputExpected;case a().M9.UnexpectedError:return l().x0.UnexpectedError;case a().M9.TooDeeplyNested:return l().x0.TooDeeplyNested;default:(0,i().HB)(e)}}function u(e){switch(e.type){case a().IA.FunctionCallArgumentWrongType:case a().IA.FunctionCallUnexpectedArgument:return e.argument;default:return e.node}}function p(e,t){let o;switch(t.type){case a().IA.ThisRowTypeNotFound:o=l().Xz.ThisRowTypeNotFound;break;case a().IA.ThisRowNotBlockWithCollection:o=l().Xz.ThisRowNotBlockWithCollection;break;case a().IA.MissingPropertyOnThisRow:o={...l().Xz.MissingPropertyOnThisRow,values:{propertyName:t.property}};break;case a().IA.MissingContextVariable:{const e=(0,s().ix)(t.token)?t.token.contextValueId:t.token.valueId;o={...l().Xz.MissingContextVariable,values:{valueId:e}}}break;case a().IA.MissingBlock:o={...l().Xz.MissingBlock,values:{blockId:t.token.blockId}};break;case a().IA.CallingNotFunction:o={...l().Xz.CallingNotFunction,values:{expressionType:c(t.callee.type.type)}};break;case a().IA.FunctionCallTooFewArguments:o={...l().Xz.FunctionCallTooFewArguments,values:{minNumParameters:t.minNumParameters,functionName:t.libraryFunction.name,numArguments:t.numArguments}};break;case a().IA.FunctionCallUnexpectedArgument:o={...l().Xz.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case a().IA.FunctionCallArgumentWrongType:o={...l().Xz.FunctionCallArgumentWrongType,values:{argumentType:c(t.argument.type.type),functionName:t.libraryFunction.name}};break;case a().IA.MemberPropertyMismatchCollection:o={...l().Xz.MemberPropertyMismatchCollection,values:{propertyName:t.token.property}};break;case a().IA.MemberPropertyMissing:o={...l().Xz.MemberPropertyMissing,values:{propertyName:t.property}};break;case a().IA.MemberPropertyTargetNotBlock:o=l().Xz.MemberPropertyTargetNotBlock;break;case a().IA.MemberPropertyTypeInvalid:o={...l().Xz.MemberPropertyTypeInvalid,values:{propertyName:t.propertyName,propertyType:t.propertyType}};break;case a().IA.UndefinedIdentifier:o={...l().Xz.UndefinedIdentifier,values:{identifier:t.node.text}};break;case a().IA.UnifiedFunctionCannotFindFunction:o={...l().Xz.UnifiedFunctionCannotFindFunction,values:{functionName:t.name}};break;case a().IA.UnifiedFunctionNoArguments:o={...l().Xz.UnifiedFunctionNoArguments,values:{functionName:t.libraryFunction.name}};break;case a().IA.UnifiedFunctionTargetWrongType:o={...l().Xz.UnifiedFunctionTargetWrongType,values:{functionName:t.libraryFunction.name,targetType:c(t.expression.type.type)}};break;case a().IA.CannotRelativelyCompareTypes:o={...l().Xz.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case a().IA.CannotDoMathOnType:o={...l().Xz.CannotDoMathOnType,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case a().IA.UnaryMinusOnNonNumber:o={...l().Xz.UnaryMinusOnNonNumber,values:{type:c(t.expression.type.type)}};break;case a().IA.IdentifierExpected:o=l().Xz.IdentifierExpected;break;case a().IA.FunctionCallExpected:o={...l().Xz.FunctionCallExpected,values:{functionName:t.functionName}};break;case a().IA.RenamedIdentifier:o={...l().Xz.RenamedIdentifier,values:{identifier:t.identifier,renamedTo:t.renamedTo}};break;case a().IA.RemovedFunction:o={...l().Xz.RemovedFunction,values:{functionName:t.functionName,alternative:t.alternative}};break;case a().IA.ContextVariableNotBlockWithCollection:o={...l().Xz.ContextVariableNotBlockWithCollection,values:{valueId:t.token.contextValueId}};break;case a().IA.MissingPropertyOnContextVariable:o={...l().Xz.MissingPropertyOnContextVariable,values:{propertyName:t.property,valueId:t.token.contextValueId}};break;case a().IA.BlockPropertyTypeInvalid:o={...l().Xz.BlockPropertyTypeInvalid,values:{propertyName:t.propertyName}};break;case a().IA.DisallowedReturnType:{const n=t.allowedReturnTypes.map((t=>e.formatMessage((0,r().getHumanReadableType)(t)).toLocaleLowerCase()));o={...l().Xz.DisallowedReturnType,values:{allowedReturnType:e.formatList(n,{style:"long",type:"conjunction"}),allowedReturnTypeCount:t.allowedReturnTypes.length,returnType:e.formatMessage((0,r().getHumanReadableType)(t.returnType)).toLocaleLowerCase()}};break}case a().IA.CrossSpacePropertyNotSupported:o={...l().Xz.CrossSpacePropertyNotSupported};break;default:(0,i().HB)(t)}return{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}}function g(e,t){let o;switch(t.type){case a().uW.MissingThisRow:o=l().X8.MissingThisRow;break;case a().uW.MissingSchemaPropertyOnThisRow:o={...l().X8.MissingSchemaPropertyOnThisRow,values:{propertyName:t.property}};break;case a().uW.ThisRowBlockPropertyMismatchCollection:o=l().X8.ThisRowBlockPropertyMismatchCollection;break;case a().uW.MissingContextVariable:o={...l().X8.MissingContextVariable,values:{valueId:t.valueId}};break;case a().uW.IdentifierNotFound:o={...l().X8.IdentifierNotFound,values:{identifier:t.node.text}};break;case a().uW.CannotRelativelyCompareTypes:o={...l().X8.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType),rhsType:c(t.rhsType)}};break;case a().uW.CannotDoMathOnType:o={...l().X8.CannotDoMathOnType,values:{valueType:c(t.valueType)}};break;case a().uW.CannotCallNonFunction:o={...l().X8.CannotCallNonFunction,values:{calleeType:c(t.calleeType)}};break;case a().uW.UnifiedFunctionPropertyNotFound:o={...l().X8.UnifiedFunctionPropertyNotFound,values:{functionName:t.node.name}};break;case a().uW.LibraryFunctionExecutionError:const n=t.error instanceof a().x4?t.error:void 0;o=(null==n?void 0:n.info.type)===a().v3.DateInvalidDurationUnit?{...l().gW.DateInvalidDurationUnit,values:{functionName:t.libraryFunction.name,invalidUnit:n.info.invalidUnit}}:(null==n?void 0:n.info.type)===a().v3.CannotUseToNumberOnList?{...l().gW.CannotUseToNumberOnList}:(null==n?void 0:n.info.type)===a().v3.CannotRoundToNonInteger?{...l().gW.CannotRoundToNonInteger,values:{precision:n.info.precision}}:(null==n?void 0:n.info.type)===a().v3.CannotRoundToTooManyDecimalPlaces?{...l().gW.CannotRoundToTooManyDecimalPlaces,values:{precision:n.info.precision}}:{...l().X8.LibraryFunctionExecutionError,values:{functionName:t.libraryFunction.name}};break;case a().uW.FunctionCallTooFewArguments:o={...l().X8.FunctionCallTooFewArguments,values:{functionName:t.libraryFunction.name}};break;case a().uW.FunctionCallUnexpectedArgument:o={...l().X8.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case a().uW.FunctionCallArgumentWrongType:o={...l().X8.FunctionCallArgumentWrongType,values:{functionName:t.libraryFunction.name,argumentType:c(t.argumentType)}};break;case a().uW.AccessingPropertyOnNonBlock:o=l().X8.AccessingPropertyOnNonBlock;break;case a().uW.MissingDataDependencyBlock:o={...l().X8.MissingDataDependencyBlock,values:{blockId:t.blockPointer.id}};break;case a().uW.MissingDataDependencyPerson:o={...l().X8.MissingDataDependencyPerson,values:{personId:t.personPointer.id}};break;case a().uW.MemberPropertyMismatchCollection:o=l().X8.MemberPropertyMismatchCollection;break;case a().uW.MissingPropertyOnSchemaForMemberProperty:o=l().X8.MissingPropertyOnSchemaForMemberProperty;break;case a().uW.UnaryMinusOnNonNumber:o={...l().X8.UnaryMinusOnNonNumber,values:{expressionType:c(t.expressionType)}};break;case a().uW.UnexpectedRecoveryNode:o=l().X8.UnexpectedRecoveryNode;break;case a().uW.UnexpectedError:o=l().X8.UnexpectedError;break;case a().uW.DepthExceeded:o=l().X8.DepthExceeded;break;case a().uW.CycleDetected:o=l().X8.CycleDetected;break;case a().uW.DownstreamParseFailure:o=l().X8.DownstreamParseFailure;break;case a().uW.MaxEvaluationTimeExceeded:o=l().X8.MaxEvaluationTimeExceeded;break;case a().uW.MissingSchemaPropertyOnCollection:o={...l().X8.MissingSchemaPropertyOnCollection,values:{collectionId:t.collectionId,propertyName:t.property}};break;case a().uW.ContextVariableWrongType:o={...l().X8.ContextVariableWrongType,values:{expectedType:t.expectedType,propertyType:t.resultType,valueId:t.valueId}};break;case a().uW.DisallowedValueType:{const n=t.allowedValueTypes.map((t=>e.formatMessage((0,r().getHumanReadableType)(t)).toLocaleLowerCase()));o={...l().Xz.DisallowedReturnType,values:{allowedValueType:e.formatList(n,{style:"long",type:"conjunction"}),allowedValueTypeCount:t.allowedValueTypes.length,valueType:e.formatMessage((0,r().getHumanReadableValueType)(t.expressionValue)).toLocaleLowerCase()}};break}default:(0,i().HB)(t)}return(0,s().li)(t)?{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}:o}function h(e){const t=null==e?void 0:e.values;return[n().cJ(e,"values"),t]}function f(e){return e.type===a().uW.DepthExceeded||e.type===a().uW.CycleDetected||e.type===a().uW.MaxEvaluationTimeExceeded||e.type===a().uW.LibraryFunctionExecutionError}},307612:(e,t,o)=>{o.d(t,{s:()=>r});o(242343);var n=o(163643);const i={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.112 2.863a4.17 4.17 0 0 0-4.92.468.875.875 0 0 0 1.167 1.304 2.42 2.42 0 0 1 3.44.22.875.875 0 0 0 1.322-1.146 4.2 4.2 0 0 0-1.01-.846m1.248 2.563a4.167 4.167 0 0 1 7.173.037.875.875 0 1 1-1.511.883 2.417 2.417 0 0 0-4.16-.02l-5.21 8.697 3.828.62a.875.875 0 0 1-.28 1.728l-5.102-.827a.875.875 0 0 1-.61-1.313zM6.51 9.204a1.416 1.416 0 1 0 .452-2.795 1.416 1.416 0 0 0-.453 2.795"}),(0,n.jsx)("path",{d:"M12.72 10.21a1.416 1.416 0 1 0 .453-2.795 1.416 1.416 0 0 0-.453 2.795"})]})},r=(0,o(680369).wt)("aiFaceFill",i)},417925:(e,t,o)=>{o.d(t,{K:()=>m,d:()=>f});o(725707),o(491955),o(500234),o(403517);var n=()=>o(371807),i=()=>o(769884),r=()=>o(21164),l=()=>o(289765),a=()=>o(905184),s=()=>o(44250),c=()=>o(975392),d=()=>o(321185),u=()=>o(654548),p=()=>o(413871),g=()=>o(842541),h=()=>o(235600);function f(e){const{environment:t,collectionStore:o,collectionViewBlockStore:f,freezeTitle:m}=e,y=t.currentUser.id;if(!y)return;const{propertyFilters:v,combinatorFilter:x}=function(e){var t,o,n,i;let{environment:l,collectionStore:c,collectionViewBlockStore:u}=e;const h=null==u||null===(t=u.getFormat())||void 0===t?void 0:t.workflow_id;if(!h)return;const f=(0,d().getChatSidebarState)(l);if(!0!==(null==f?void 0:f.isOpen)||!0===f.isNewThread)return;const m=null===(o=(0,g().H)({threadStore:p().Ei.createChildStore(u,{table:a().To,id:f.threadId,spaceId:u.getSpaceId()}),blockStore:u}))||void 0===o?void 0:o.workflowValue;if(!m)return;const y=null===(n=m.modules)||void 0===n?void 0:n.filter((e=>"database"===e.type)).find((e=>{var t;const o=null===(t=(0,s().DK)(e.state))||void 0===t?void 0:t.pointer;return(null==o?void 0:o.table)===r().Vl&&(null==o?void 0:o.id)===c.id})),v=null===(i=(0,s().DK)(null==y?void 0:y.state))||void 0===i?void 0:i.filter;if(!v)return;return{propertyFilters:v.propertyFilters,combinatorFilter:v.combinatorFilter}}({environment:t,collectionStore:o,collectionViewBlockStore:f})??{},b=function(e){var t,o;const{collectionStore:n,userId:i,spaceId:l,idCreator:a,propertyFilters:s,combinatorFilter:d,freezeTitle:p=!0}=e,g=n.getSchema(),f=Object.keys(g),m=null===(t=n.getModel())||void 0===t?void 0:t.parent_id;if(!m)return;const y=(0,c().Ul)(f,((e,t)=>"title"===e?-1:t)).map((e=>({property:e,visible:!0})));return{id:(0,h().D)(a,l,n.id),version:1,parent_id:m,parent_table:"block",alive:!0,space_id:l,created_by_id:i,created_by_table:"notion_user",last_edited_by_id:i,last_edited_by_table:"notion_user",type:"table",name:(0,u().r4)(null===(o=n.getModel())||void 0===o?void 0:o.getName(),n),format:{table_properties:y,table_wrap:!0,table_frozen_column_index:p?0:void 0,collection_pointer:{table:r().Vl,id:n.id,spaceId:l},collection_view_source:{type:"collection",id:n.id,spaceId:l},hide_linked_collection_name:!0,property_filters:s},query2:{sort:[],aggregations:[],filter:d},page_sort:[]}}({collectionStore:o,userId:t.currentUser.id,spaceId:o.getSpaceId(),idCreator:t.idCreator,propertyFilters:v,combinatorFilter:x,freezeTitle:m});if(!b)return;const S={table:l().Gy,id:b.id,spaceId:o.getSpaceId()},w=new(n().A)({name:"temporaryCache",isTemporaryData:!0});w.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),w.setModelAndRole({pointer:S,userId:y},i().Bj6.fromCollectionView(b),"editor");return new(p().pS)(t,{table:l().Gy,id:S.id},{inMemoryRecordCache:w})}function m(e){let{collectionContextStore:t,permissionScopes:o}=e;return!("collectionTypedView"!==t.contextType||!o.canConfigureBlock)||o.canConfigureCollection}},418699:(e,t,o)=>{o.d(t,{E:()=>i});o(242343);var n=o(163643);const i=(0,o(680369).wt)("bug",{viewBox:"0 0 64 64",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"m32,8c-5.55,0-9,3.83-9,10h18c0-6.17-3.45-10-9-10Z"}),(0,n.jsx)("path",{d:"m48,36h12v-4h-12v-6.01c2.74-.06,4.78-.94,6.76-2.92l4.24-4.24-2.83-2.83-4.24,4.24c-1.3,1.3-2.41,1.76-4.24,1.76h-13.69v32c6.15,0,10.63-3.12,12.7-8.47l1.54,1.54c1.3,1.3,1.76,2.41,1.76,4.24v2.69h4v-2.69c0-2.9-.88-5.02-2.93-7.07l-3.26-3.26c.12-.95.19-1.94.19-2.98v-2Z"}),(0,n.jsx)("path",{d:"m12.07,20.24l-4.24-4.24-2.83,2.83,4.24,4.24c1.98,1.98,4.02,2.85,6.76,2.92v6.01H4v4h12v2c0,1.04.07,2.03.19,2.98l-3.26,3.26c-2.05,2.05-2.93,4.17-2.93,7.07v2.69h4v-2.69c0-1.83.46-2.95,1.76-4.24l1.54-1.54c2.08,5.35,6.55,8.47,12.7,8.47V22h-13.69c-1.83,0-2.95-.46-4.24-1.76Z"})]})})},433364:(e,t,o)=>{o.d(t,{KD:()=>c,gt:()=>d,i9:()=>s,ll:()=>l,tb:()=>a,x$:()=>r});var n=()=>o(612408),i=()=>o(975392);function r(e,t){return l(d(e,t))}function l(e){return void 0!==e&&(e===n().q_||e===n().YD)}function a(e,t){if(l(t))return;const o=n().c$[e],i=o.steps.findIndex((e=>e.id===t));return-1===i?o.steps[0].id:i===o.steps.length-1?n().q_:o.steps[i+1].id}function s(e,t){const o=d(e,t);if(o&&!l(o))return a(t,o)}function c(e,t){const o=d(e,t);if(o)return function(e,t){const o=n().c$[e];var r;if(l(t))return null===(r=(0,i().HV)(o.steps))||void 0===r?void 0:r.id;const a=o.steps.findIndex((e=>e.id===t));return-1!==a&&0!==a?o.steps[a-1].id:void 0}(t,o)}function d(e,t){var o;if(!e)return;const i=((null===(o=e.getSettings())||void 0===o?void 0:o.tutorials)||{})[t];return void 0===i?n().c$[t].steps[0].id:i}},436446:(e,t,o)=>{o.d(t,{A:()=>r});o(242343);var n=()=>o(31448),i=o(163643);const r=function(e){let{icon:t,title:r,description:l,cta:a,bodyWidth:s}=e;const c=(0,o(174114).IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",gap:8},icon:{width:36,height:36,color:e.icon.tertiary},body:{fontSize:14,color:e.text.secondary,display:"flex",flexDirection:"column",textAlign:"center",maxWidth:s??300},title:{fontWeight:n().Wy.semibold},description:{paddingTop:1,fontWeight:n().Wy.regular,textWrap:"balance"}})),[s]);return(0,i.jsxs)("div",{style:c.container,children:[t(c.icon),(0,i.jsxs)("div",{style:c.body,children:[(0,i.jsx)("span",{style:c.title,children:r}),(0,i.jsx)("span",{style:c.description,children:l})]}),a&&(0,i.jsx)("div",{children:a})]})}},470414:(e,t,o)=>{o.d(t,{A:()=>d});o(725707),o(491955),o(403517),o(229032);var n=o(242343),i=()=>o(174114),r=()=>o(755002),l=()=>o(31448),a=()=>o(551116),s=o(163643);function c(e){const{button:t,isLast:o}=e,a=(0,i().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:l().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return n.cloneElement(t,{...(0,r().AH)(t.props.style,a.button,o&&a.buttonLast),hoveredStyle:(0,r().AH)(a.buttonHovered,o&&a.buttonLast).style,pressedStyle:a.buttonPressed})}const d=function(e){let{children:t,isVisible:d,position:u,style:p}=e;const g=(0,o(237385).v3)(),h=(0,i().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:a().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:g.device.isMobile?"auto":"none",opacity:g.device.isMobile?1:0,fontFamily:l().vc(o(16791).locale).sans,position:"absolute",right:a().A.horizontal.small,bottom:a().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:a().A.vertical.small,bottom:void 0}})),[g]),f=n.Children.toArray(t).filter(o(76394).O9),m=f.length;return(0,s.jsx)(o(615917).A,{animate:{opacity:d?1:0},...(0,r().AH)(h.container,p,d&&h.containerHover,"top"===u&&h.containerTop),children:f.map(((e,t)=>{const i=t===m-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===o(103151).A&&n.isValidElement(e))return n.cloneElement(e,{render:(t,o)=>{const n=e.props.render(t,o);return(0,s.jsx)(c,{isLast:i,button:n},e.key)}});if(e.type===o(126451).A&&n.isValidElement(e))return(0,s.jsx)(c,{isLast:i,button:e},e.key)}}))})}},472951:(e,t,o)=>{o.d(t,{k:()=>i});o(403517);class n extends(()=>o(129044))().default{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[o,n]=e,[i,r]=t;return r-n})).map((e=>{let[t,o]=e;return t}))}}const i=new n;(0,o(996094).exposeDebugValue)("UserSimilarityStore",i)},473096:(e,t,o)=>{o.d(t,{A:()=>s});var n=o(242343),i=()=>o(174114),r=()=>o(162339),l=()=>o(966789),a=o(163643);function s(e){let{loadingMessage:t}=e;const o=(0,i().DP)(),s=(0,r().A)(!0,400);return(0,a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:s&&(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(l().A,{}),t&&(0,a.jsx)("div",{style:{marginLeft:8,color:o.text.secondary},children:t})]})})}},477267:(e,t,o)=>{o.r(t),o.d(t,{deleteViewsModuleDependencies:()=>l});var n=()=>o(496580),i=()=>o(795394),r=()=>o(413871);function l(e){const{layoutStore:t,viewsModule:o,transaction:l}=e,a=(0,n().o9)(r().Bv.createChildStore(t,o.collection_view_block_pointer));i().zz({childStore:a,parentStore:t,transaction:l})}},493738:(e,t,o)=>{o.d(t,{u:()=>i});o(242343);const n={viewBox:"0 0 16 16",svg:(0,o(163643).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},i=(0,o(680369).wt)("magnifyingGlassSmall",n)},497808:(e,t,o)=>{o.d(t,{DV:()=>s,W5:()=>l,l7:()=>a,y7:()=>r});var n=()=>o(129978);const i={CollectionNewViewsPopupComponent:new(n().O2)("CollectionNewViewsPopupComponent",(async()=>await Promise.all([o.e(96159),o.e(96346),o.e(36192),o.e(55373),o.e(36209),o.e(92845),o.e(71718),o.e(48486),o.e(83324),o.e(63077),o.e(41870),o.e(90966),o.e(88552),o.e(90214),o.e(74562),o.e(8184),o.e(28271),o.e(17254),o.e(78708),o.e(67435),o.e(62620)]).then(o.bind(o,464342)))),CollectionViewSelect:new(n().O2)("CollectionViewSelect",(async()=>await o.e(35756).then(o.bind(o,230274)))),CollectionLinkExistingModal:new(n().O2)("CollectionLinkExistingModal",(async()=>await Promise.all([o.e(96159),o.e(96346),o.e(36192),o.e(55373),o.e(44711),o.e(53321),o.e(90825),o.e(36209),o.e(92845),o.e(71718),o.e(48486),o.e(83324),o.e(63077),o.e(41870),o.e(90966),o.e(88552),o.e(90214),o.e(74562),o.e(8184),o.e(28271),o.e(17254),o.e(18895),o.e(78708),o.e(4422),o.e(67435),o.e(76181),o.e(72832),o.e(90280),o.e(84778),o.e(26090),o.e(12341),o.e(47864),o.e(90978),o.e(5287)]).then(o.bind(o,407049)))),ModalOverlayCollectionView:new(n().O2)("ModalOverlayCollectionView",(async()=>await Promise.all([o.e(96159),o.e(96346),o.e(36209),o.e(92845),o.e(71718),o.e(48486),o.e(83324),o.e(73361),o.e(32413)]).then(o.bind(o,532623))))},r=(0,n()._h)(i.CollectionNewViewsPopupComponent,(e=>e.CollectionNewViewsPopupComponent)),l=(0,n()._h)(i.CollectionViewSelect,(e=>e.CollectionViewSelect)),a=(0,n()._h)(i.CollectionLinkExistingModal,(e=>e.CollectionLinkExistingModal)),s=(0,n()._h)(i.ModalOverlayCollectionView,(e=>e.ModalOverlayCollectionView))},531367:(e,t,o)=>{function n(e){let t,o,n;return async function(){for(var i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t?(n=r,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...r),t)}}o.d(t,{A:()=>n})},533666:(e,t,o)=>{o.d(t,{Y:()=>i});o(242343);const n={viewBox:"0 0 16 16",svg:(0,o(163643).jsx)("path",{d:"M3.2 6.725a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55"})},i=(0,o(680369).wt)("ellipsisSmall",n)},537311:(e,t,o)=>{o.d(t,{Gr:()=>A,WE:()=>T,rC:()=>M});o(725707),o(403517),o(244387);var n=o(242343),i=()=>o(174114),r=()=>o(175532),l=()=>o(898941),a=()=>o(377963),s=()=>o(855470),c=()=>o(213255),d=()=>o(653998),u=()=>o(76394),p=()=>o(31448),g=()=>o(502852),h=()=>o(906230),f=()=>o(622163),m=()=>o(907721),y=()=>o(126451),v=()=>o(209684),x=()=>o(559637),b=()=>o(60525),S=()=>o(701270),w=()=>o(103151),k=o(163643);const C=14,j=16,A=C+j,I=24;function M(e){let{columnRenderInfo:t,theme:o,containerMarginTop:n}=e;return{container:{marginTop:n??17,tableLayout:"fixed",borderCollapse:"collapse",width:"100%",minWidth:t.reduce(((e,t)=>e+F(t.widthData)+I),0)},tableHeaderRow:{},paddingRowCell:{height:8}}}function T(e){let{columnRenderInfo:t,sortState:o,onSortStateChanged:r,showRowBorders:l,hideHeaderRow:a,hideHeaderRowPadding:s,renderRowChild:c,rows:d,onRowClick:u,renderNoRowsComponent:p,styles:g,getStyleForRow:h,extendToFullScreen:f,multiselect:m,allowHorizontalScroll:y,setStickyHeaderColumn:v,maxHeight:x,setStickyHeaderRow:S,loadMoreMethod:w}=e;const C=y?v??!0:void 0,j=(0,i().IS)((e=>({horizontalScrollContainer:{position:"relative",width:null!=f&&f.extendTableToFullWidthOffsetPx?`calc(100% + ${null==f?void 0:f.extendTableToFullWidthOffsetPx}px)`:"100%",display:"grid",overflow:"auto"},scrollableContainer:{maxHeight:x,position:"relative",display:"grid",overflowX:"auto",width:"100%"},table:C?{...g.container,minWidth:"100%",width:void 0}:g.container})),[g.container,C,x,null==f?void 0:f.extendTableToFullWidthOffsetPx]),A=(0,i().IS)((e=>({thead:{position:"sticky",zIndex:1}})),[]),I=(0,n.useCallback)((e=>{var t;const n=e.id===(null==o||null===(t=o.column)||void 0===t?void 0:t.id)&&!(null!=o&&o.sortAscending);r&&r({sortAscending:n,column:e})}),[o,r]),M=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("table",{style:j.table,children:[!a&&(0,k.jsx)("thead",{style:S?A.thead:void 0,children:(0,k.jsxs)("tr",{children:[t.map(((e,t)=>(0,k.jsx)(_,{index:t,column:e,sortState:o,handleSortableColumnClick:I,shouldShowSortIcon:0!==d.length,multiselect:m,setStickyHeaderColumn:C,setStickyHeaderRow:S,style:e.headerStyle},`header_${e.id}`))),null!=f&&f.rightPaddingPx?(0,k.jsx)(E,{width:null==f?void 0:f.rightPaddingPx,style:t[t.length-1].rowStyle}):null]})}),!s&&(0,k.jsx)("tbody",{children:(0,k.jsxs)("tr",{children:[t.map((e=>(0,k.jsx)("td",{style:g.paddingRowCell},`padding_row_${e.id}`))),null!=f&&f.rightPaddingPx?(0,k.jsx)("td",{style:g.paddingRowCell}):null]})}),(0,k.jsx)("tbody",{children:d.map((e=>(0,k.jsx)(R,{columns:t,onRowClick:u,rowChild:null==c?void 0:c(e),showRowBorders:l,row:e,getStyleForRow:h,multiselect:m,setStickyHeaderColumn:C,rightPaddingPx:null==f?void 0:f.rightPaddingPx},`${e.id}_row`)))}),d.length>0&&w&&(!y||"scroll"!==(null==w?void 0:w.type))?(0,k.jsx)("tfoot",{children:(0,k.jsx)(z,{columnLength:t.length,loadMoreMethod:w,showRowBorders:l,rightPaddingPx:null==f?void 0:f.rightPaddingPx,style:t[t.length-1].rowStyle})}):null]}),0===d.length&&p()]});return y?(0,k.jsxs)("div",{style:j.horizontalScrollContainer,children:[(0,k.jsxs)("div",{style:j.scrollableContainer,children:[M,x&&"scroll"===(null==w?void 0:w.type)&&(0,k.jsx)(b().A,{loading:!1,loadMoreOffsetThreshold:100,onLoadMore:w.onLoadMore})]}),!x&&"scroll"===(null==w?void 0:w.type)&&(0,k.jsx)(b().A,{loading:!1,loadMoreOffsetThreshold:100,onLoadMore:w.onLoadMore})]}):(0,k.jsx)("div",{style:{maxHeight:x,overflowY:S&&x?"auto":void 0,overflowX:S&&x?"hidden":void 0},children:M})}function _(e){let{column:t,index:o,sortState:r,handleSortableColumnClick:a,shouldShowSortIcon:s,multiselect:u,setStickyHeaderColumn:g,setStickyHeaderRow:f,style:y}=e;const[b,S]=(0,n.useState)(!1),A=0===o,I=t.id===(null==r?void 0:r.column.id),M=(0,i().IS)((e=>({th:{boxShadow:`\n\t\t\t\t\tinset 0 1px 0 ${e.tableDividerColor},\n\t\t\t\t\tinset 0 -1px 0 ${e.tableDividerColor}\n\t\t\t\t`,...f&&{position:"sticky",top:0,zIndex:3,background:e.modalBackground},...N(t),...g&&A&&{position:"sticky",zIndex:4,left:0,background:e.modalBackground,boxShadow:`\n\t\t\t\t\t\t\tinset -1px 0px 0px ${e.tableDividerColor},\n\t\t\t\t\t\t\tinset 0 1px 0 ${e.tableDividerColor},\n\t\t\t\t\t\t\tinset 0 -1px 0 ${e.tableDividerColor}\n\t\t\t\t\t\t`},height:32,...y},innerDiv:{display:"flex",alignItems:"center",height:"100%",minWidth:F(t.widthData),maxWidth:t.widthData.maxWidth},text:{fontSize:p().J.UISmall.desktop,fontWeight:p().Wy.regular,color:e.text.secondary,...p().RC},sortButton:{padding:5,margin:-5},sortIcon:{color:e.text.secondary,width:12,height:12,marginLeft:4,fill:"currentColor"},multiselectCheckbox:{color:e.selectLightGray[300],marginRight:j,opacity:null!=u&&u.header.isDisabled?.5:1},tooltipContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},tooltipIcon:{marginLeft:4,color:b?e.mediumIconColor:e.lightIconColor,height:16,width:16},tooltip:{width:380}})),[t,u,g,f,y,A,b]),T=()=>{if(r&&s&&I)return(0,l().m)({...M.sortIcon,...r.sortAscending&&{transform:"rotate(180deg)"}})},_={onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1)},R=t.headerInfoTooltip?(0,k.jsxs)("div",{style:M.tooltipContainer,children:[(0,k.jsx)("div",{style:M.text,children:t.headerTitle}),(0,k.jsx)(w().A,{textWrap:!0,style:M.tooltip,delayThreshold:0,render:e=>(0,k.jsx)("div",{...(0,h().A)(e,_),children:(0,c().A)(M.tooltipIcon)}),renderTooltip:()=>t.headerInfoTooltip})]}):(0,k.jsx)("div",{style:M.text,children:t.headerTitle}),B=t.sortable?(0,k.jsx)(w().A,{placement:m().W.Bottom,disableTooltip:!t.shouldShowSortTooltip,renderTooltip:()=>I?(0,k.jsx)(d().sA,{id:"baseTable.hoverSortedHeaderCell",defaultMessage:"Reverse sort order"}):(0,k.jsx)(d().sA,{id:"baseTable.hoverSortableHeaderCell",defaultMessage:"Sort by this column"}),render:e=>(0,k.jsxs)(v().p,{size:"xs",style:M.sortButton,onClick:()=>a(t),...e,children:[R,T()]})}):R,P=void 0!==u&&0===o?(0,k.jsx)(x().A,{style:M.multiselectCheckbox,disabled:u.header.isDisabled,onClick:()=>u.header.onClick(),checked:u.header.isSelected,size:C,tapArea:{size:30}}):null;return(0,k.jsx)("th",{style:M.th,children:(0,k.jsxs)("div",{style:M.innerDiv,children:[P,B]})})}function R(e){let{row:t,columns:o,onRowClick:r,rowChild:l,showRowBorders:a,getStyleForRow:s,setStickyHeaderColumn:c,multiselect:d,rightPaddingPx:u}=e;const[p,g]=(0,n.useState)(!1),h=t.isClickable,f=(0,n.useCallback)((()=>g(!0)),[]),m=(0,n.useCallback)((()=>g(!1)),[]),y=(0,n.useCallback)((e=>{h&&void 0!==r&&P(e,(()=>r(t)))}),[h,r,t]),v=(0,i().IS)((e=>({row:{height:1,...h&&{cursor:"pointer"},...a&&{borderBottom:`1px solid ${e.tableDividerColor}`},...s&&s(t)}})),[h,a,s,t]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("tr",{onMouseLeave:m,onMouseEnter:f,style:v.row,onClick:y,children:[o.map(((e,n)=>(0,k.jsx)(B,{isRowHovered:p,isRowClickable:h,columnIndex:n,numColumns:o.length,data:t,column:e,multiselect:d,setStickyHeaderColumn:c,cellStyle:e.rowStyle},`cell_${t.id}_${e.id}`))),u?(0,k.jsx)(V,{style:o[o.length-1].rowStyle}):null]}),l&&(0,k.jsx)("tr",{style:v.row,children:(0,k.jsx)("td",{colSpan:o.length,children:l})})]})}function B(e){let{data:t,column:o,columnIndex:n,numColumns:r,isRowHovered:l,isRowClickable:a,multiselect:s,setStickyHeaderColumn:c,cellStyle:d}=e;const u=0===n,g=n===r-1,h=(0,i().IS)((e=>({td:{...N(o),height:"inherit",...u&&{borderRadius:(0,f().Nb)({topLeft:4,bottomLeft:4})},...g&&{borderRadius:(0,f().Nb)({topRight:4,bottomRight:4})},...c&&u&&{position:"sticky",zIndex:2,left:0,background:e.modalBackground,boxShadow:`inset -1px 0px 0px ${e.tableDividerColor}`},...d,...l&&a&&{background:"light"===e.mode?"#f8f8f7":e.accentColors.gray[30]}},innerDiv:{minWidth:F(o.widthData),maxWidth:o.widthData.maxWidth,fontSize:p().J.UIRegular.desktop,color:e.text.primary,minHeight:42,maxHeight:52,display:"flex",alignItems:"center",height:"100%"},multiselectCheckbox:{color:e.selectLightGray[300],marginRight:16,opacity:null!=s&&s.row.getDisabledState(t)?.5:1}})),[o,u,g,l,a,s,t,c,d]),m=Boolean(o.hasClickableContents)||!!o.computeClickableContents&&o.computeClickableContents(t),y=s&&u?(0,k.jsx)(x().A,{style:h.multiselectCheckbox,checked:s.row.getSelectedState(t),onClick:e=>{e.stopPropagation(),s.row.onClick(t)},disabled:s.row.getDisabledState(t),size:14,tapArea:{size:30}}):null;return(0,k.jsx)("td",{style:h.td,children:(0,k.jsxs)("div",{style:h.innerDiv,onClick:m?P:void 0,children:[y,o.renderCell({...t,isRowHovered:l})]})})}function P(e,t){(0,g().SQ)({event:e,context:g().y$.BaseTableRowClick,callback:t})}const L={paddingLeft:I/2,paddingRight:I/2};function F(e){return"minWidth"in e?e.minWidth:e.width}function N(e){let t;return t="width"in e.widthData?{width:e.widthData.width}:{width:`${e.widthData.widthPercent}%`,minWidth:e.widthData.minWidth},{...L,...t}}function W(e){let{columnLength:t,onLoadMore:o,showRowBorders:n,hasNextPage:l}=e;const a=(0,i().IS)((e=>({row:{...n&&{borderBottom:`1px solid ${e.tableDividerColor}`}},container:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},sticky:{position:"sticky",left:0,display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},button:{display:"flex",alignItems:"center",height:30,borderRadius:n?0:6,whiteSpace:"break-spaces",fontSize:14,paddingRight:8},icon:{width:14,height:14,marginLeft:4,marginRight:6,fill:e.lightIconColor},text:{color:e.text.tertiary}})),[n]);return!1===l?null:(0,k.jsx)("tr",{style:a.row,children:(0,k.jsx)("td",{colSpan:t,children:(0,k.jsx)("div",{style:a.container,children:(0,k.jsx)("div",{style:a.sticky,children:(0,k.jsxs)(y().A,{style:a.button,onClick:o,children:[(0,r().P)(a.icon),(0,k.jsx)("div",{style:a.text,children:(0,k.jsx)(d().sA,{id:"baseTable.loadMoreButton",defaultMessage:"Load more"})})]})})})})})}function D(e){let{columnLength:t,onLoadNext:o,onLoadPrevious:n,currentPage:r,finalPage:l,hasNextPage:c,hasPrevPage:u,showRowBorders:p,rightPaddingPx:g,style:h}=e;const f=(0,i().IS)((e=>({row:{...p&&{borderBottom:`1px solid ${e.tableDividerColor}`}},container:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},sticky:{position:"sticky",left:0,display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},button:{display:"flex",justifyContent:"center",alignItems:"center",height:30,width:30,borderRadius:p?0:6,whiteSpace:"break-spaces",fontSize:14},icon:{width:14,height:14,marginLeft:4,marginRight:6,fill:e.icon.secondary}})),[p]);return(0,k.jsxs)("tr",{style:f.row,children:[(0,k.jsx)("td",{colSpan:Boolean(g)?t:t-1,children:(0,k.jsx)("div",{style:f.container,children:(0,k.jsxs)("div",{style:f.sticky,children:[(0,k.jsx)(y().A,{ariaLabel:u?"Previous page":"No previous pages",style:f.button,onClick:n,disabled:!u,disabledFeedback:!u,children:(0,a().I)(f.icon)}),(0,k.jsx)(y().A,{ariaLabel:c?"Next page":"No more pages",style:f.button,onClick:o,disabled:!c,disabledFeedback:!c,children:(0,s().V)(f.icon)}),(0,k.jsx)(S().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:l?(0,k.jsx)(d().sA,{id:"baseTable.pages.currentPageWithFinalPageCount",defaultMessage:"Page {currentPage} of {finalPage}",values:{currentPage:r,finalPage:l}}):(0,k.jsx)(d().sA,{id:"baseTable.pages.currentPage",defaultMessage:"Page {currentPage}",values:{currentPage:r}})})]})})}),g?(0,k.jsx)(V,{style:h}):null]})}function z(e){let{columnLength:t,loadMoreMethod:o,showRowBorders:n,rightPaddingPx:i,style:r}=e;switch(o.type){case"scroll":return(0,k.jsx)(b().A,{loading:!1,loadMoreOffsetThreshold:100,onLoadMore:o.onLoadMore});case"button":return(0,k.jsx)(W,{columnLength:t,onLoadMore:o.onLoadMore,showRowBorders:n,hasNextPage:o.hasNextPage});case"pages":return(0,k.jsx)(D,{columnLength:t,showRowBorders:n,onLoadNext:o.onLoadNext,onLoadPrevious:o.onLoadPrevious,currentPage:o.currentPage,finalPage:o.finalPage,hasNextPage:o.hasNextPage,hasPrevPage:o.hasPrevPage,rightPaddingPx:i,style:r});default:return(0,u().HB)(o)}}function E(e){const t=(0,i().IS)((t=>({container:{position:"relative"},extender:{width:e.width,height:1},inner:{background:t.modalBackground,position:"absolute",top:0,left:0,right:0,bottom:-1,...e.style}})),[e.width,e.style]);return(0,k.jsxs)("th",{style:t.container,children:[(0,k.jsx)("div",{style:t.extender}),(0,k.jsx)("div",{style:t.inner})]})}function V(e){const t=(0,i().IS)((t=>({container:{position:"relative"},inner:{background:t.modalBackground,position:"absolute",top:0,left:0,right:0,bottom:-1,...e.style}})),[e.style]);return(0,k.jsx)("td",{style:t.container,children:(0,k.jsx)("div",{style:t.inner})})}},575681:(e,t,o)=>{o.d(t,{_:()=>i});o(242343);var n=o(163643);const i=(0,o(680369).wt)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,n.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},586588:(e,t,o)=>{o.r(t),o.d(t,{dismissTutorial:()=>d,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>g,tutorialGoToNextStep:()=>s,tutorialGoToPrevStep:()=>c});var n=()=>o(612408),i=()=>o(84543),r=()=>o(658388),l=()=>o(433364),a=()=>o(485966);function s(e,t){var o;const{currentUserSettingsStore:n}=a().default.state;if(!n)return;const i=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;h({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{r().mJ({userSettingsStore:n,transaction:e,data:{tutorials:{...i,[t]:(0,l().i9)(n,t)}}})},userId:n.id})}function c(e,t){var o;const{currentUserSettingsStore:n}=a().default.state;if(!n)return;const i=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;h({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{r().mJ({userSettingsStore:n,transaction:e,data:{tutorials:{...i,[t]:(0,l().KD)(n,t)}}})},userId:n.id})}function d(e,t){var o;const{currentUserSettingsStore:i}=a().default.state;if(!i)return;const l=null===(o=i.getSettings())||void 0===o?void 0:o.tutorials;(null==l?void 0:l[t])!==n().YD&&h({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{r().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...l,[t]:n().YD}}})},userId:i.id})}function u(e){const{currentUserSettingsStore:t}=a().default.state;t&&h({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,o){var i;const{currentUserSettingsStore:s}=a().default.state;if(!s||(0,l().x$)(s,t))return;const c=(0,l().gt)(s,t);n().c$[t].steps.findIndex((e=>e.id===c))>=n().c$[t].steps.findIndex((e=>e.id===o))||r().mJ({userSettingsStore:s,transaction:e,data:{tutorials:{...null===(i=s.getSettings())||void 0===i?void 0:i.tutorials,[t]:o}}})}function g(e,t,o){if((0,l().ll)(o))return;const n=(0,l().tb)(t,o);n&&p(e,t,n)}function h(e){return i().createAndCommit({...e,canUndo:!1})}},601178:(e,t,o)=>{o.d(t,{EG:()=>l,K5:()=>r,RH:()=>i,Yi:()=>a,ls:()=>n});const n=32,i=202,r=1e3,l="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",a="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},612408:(e,t,o)=>{o.d(t,{YD:()=>r,c$:()=>n,q_:()=>i});const n={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},i="completed",r="dismissed"},639239:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkCircleIcon:()=>r,iconDefinition:()=>i});o(242343);var n=o(163643);const i={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.875 6.25c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,o(680369).wt)("exclamationMarkCircle",i)},652039:(e,t,o)=>{o.d(t,{Ay:()=>s,Gi:()=>r,Wc:()=>n,pF:()=>l,vS:()=>i});const n="loadingLocalImage",i="uploading",r="downloading",l="loaded";class a extends(()=>o(129044))().default{getInitialState(){return{loadingMode:l}}}const s=a},678523:(e,t,o)=>{o.d(t,{A:()=>a});o(242343);var n=()=>o(237385),i=()=>o(174114),r=()=>o(126451),l=o(163643);function a(e){const t=(0,n().Y0)(),o=(0,i().IS)((e=>({sharedStyle:{display:"flex",alignItems:"center",borderRadius:4},innerStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.defaultBadgeBackground,fontSize:t.isMobile?11:9,lineHeight:t.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[t.isAndroid,t.isMobile]);return t.isMobile?(0,l.jsx)(r().A,{style:{...o.sharedStyle,...e.mobileStyle},disabled:void 0===e.onClick,children:(0,l.jsx)("div",{style:{...o.innerStyle,...e.innerStyle},children:e.children})}):(0,l.jsx)(r().A,{style:{...o.sharedStyle,...e.desktopStyle},disabled:void 0===e.onClick,...e,children:(0,l.jsx)("div",{style:{...o.innerStyle,...e.innerStyle},children:e.children})})}},686449:(e,t,o)=>{o.d(t,{r:()=>n});const n=(0,o(851552).Dv)("importEvernote")},686752:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,pencilLineIcon:()=>i});o(242343);const n={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},i=(0,o(680369).wt)("pencilLine",n)},752767:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,lightningFillIcon:()=>i});o(242343);const n={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M12.043 2.444a.625.625 0 0 0-1.13-.41l-6.17 8.55a.625.625 0 0 0 .507.99h3.098l-.401 5.5a.625.625 0 0 0 1.13.412l6.18-8.54a.625.625 0 0 0-.507-.991h-3.099z"})},i=(0,o(680369).wt)("lightningFill",n)},801204:(e,t,o)=>{o.d(t,{D:()=>A});o(725707),o(491955);var n=o(242343),i=()=>o(237385),r=()=>o(803290),l=()=>o(174114),a=()=>o(740520),s=()=>o(680369),c=()=>o(653998),d=()=>o(31448),u=()=>o(236339),p=()=>o(927999),g=()=>o(84543),h=o(163643);const f=function(e){const{store:t,titleStyle:n,actionButton:i,addViewButton:l}=e,a=(0,r().K8)((()=>t.getParentBlockStore()),[t]);return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,h.jsx)(o(847058).c,{step:"demo_collection",store:a,children:(0,h.jsx)(o(709237).A,{store:t,style:n})}),l,i]})})};var m=()=>o(535906),y=()=>o(858023),v=()=>o(397791),x=()=>o(443252),b=()=>o(28210),S=()=>o(88271),w=()=>o(202193),k=()=>o(640979),C=()=>o(622286),j=()=>o(308265);const A=n.memo((function(e){const{isHovered:t,collectionContextStore:n,addViewButton:i,showHoverActionsStore:a,titleStyle:s,iconStyle:c,iconSize:u}=e,[p,g,m]=(0,r().K8)((()=>[n.collectionStore(),n.collectionViewBlockStore(),n.permissionScopesStore.state]),[n]),y=(0,r().K8)((()=>n.viewsModuleContextStore.isInLayoutBuilder()),[n]),v=(0,r().K8)((()=>{const e=n.collectionStore();if(!e)return!1;const t=e.getNameStore();return Boolean((0,o(486881).j_)(t))}),[n]),x=(0,r().K8)((()=>{var e;return Boolean((null==p||null===(e=p.getParentBlockStore())||void 0===e?void 0:e.id)===(null==g?void 0:g.id))}),[p,g]),b=(0,r().K8)((()=>Boolean(null==p?void 0:p.isSyncedCollection())),[p]),S=(0,o(390263).Zp)(),w=(x||v)&&m.canConfigureCollection&&!(null!=S&&S.disableEditingName)&&!b,k=(0,l().IS)((()=>({container:{width:"max-content",maxWidth:"100%",marginRight:4,display:"flex",alignItems:"center",...d().RC},titleStyle:{fontWeight:d().Wy.bold,fontSize:22,...v?{}:{display:"-webkit-box",lineClamp:1,WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"},marginRight:4,...s}})),[v,s]);return p&&(null!=S&&S.disableAllPointerEvents||y)?(0,h.jsxs)("div",{style:k.container,children:[(0,h.jsx)(T,{collectionContextStore:n,disabled:!0,iconStyle:c,iconSize:u}),(0,h.jsx)(f,{store:p,titleStyle:k.titleStyle})]}):w?(0,h.jsx)(M,{isHovered:t,collectionContextStore:n,showHoverActionsStore:a,titleStyle:k.titleStyle,iconStyle:c,iconSize:u,addViewButton:i}):(0,h.jsx)(I,{isHovered:t,addViewButton:i,collectionContextStore:n,showHoverActionsStore:a,titleStyle:k.titleStyle,iconStyle:c,iconSize:u})})),I=n.memo((function(e){const{isHovered:t,collectionContextStore:a,showHoverActionsStore:s,titleStyle:c,iconStyle:p,iconSize:g,addViewButton:m}=e,y=(0,i().v3)(),{collectionStore:v,collectionViewBlockStore:x}=(0,r().K8)((()=>({collectionStore:a.collectionStore(),collectionViewBlockStore:a.collectionViewBlockStore()})),[a]),{isSystemCollection:b,href:S}=(0,r().K8)((()=>{const e=Boolean(null==v?void 0:v.isSystemCollection());return{isSystemCollection:e,href:e?void 0:(0,o(314164).t2)(a)}}),[a,v]),w=(0,C().X)("db_ux_chrome"),k=(0,l().IS)((()=>({container:{width:"max-content",maxWidth:"100%",marginRight:4,...d().RC},containerInner:{paddingLeft:4,paddingRight:4,display:"flex",alignItems:"center",borderRadius:6},containerHovered:{...w&&{background:"none"}}})),[w]),j=(0,n.useCallback)((()=>{(0,u().X)({environment:y,collectionContextStore:a,action:"click_collection_name_link_button"})}),[y,a]);return v&&x?(0,h.jsxs)(o(931085).A,{disabled:b,style:k.container,innerStyle:k.containerInner,hoveredStyle:k.containerHovered,href:S,onClick:j,children:[(0,h.jsx)(T,{collectionContextStore:a,disabled:!0,iconStyle:p,iconSize:g}),(0,h.jsx)(f,{addViewButton:t?m:void 0,actionButton:t?(0,h.jsx)(_,{showHoverActionsStore:s,collectionContextStore:a}):void 0,store:v,titleStyle:c})]}):null})),M=n.memo((function(e){const{isHovered:t,collectionContextStore:a,addViewButton:s,showHoverActionsStore:d,titleStyle:p,iconStyle:g,iconSize:f}=e,m=(0,i().v3)(),y=(0,c().tz)(),v=(0,r().K8)((()=>a.collectionStore()),[a]),x=(0,r().K8)((()=>a.collectionViewBlockStore()),[a]),b=(0,r().K8)((()=>null==v?void 0:v.getNameStore()),[v]),S=(0,j().BG)(),k=(0,C().X)("db_ux_chrome"),A=(0,r().K8)((()=>{var e;return S&&v?(0,w().nE)({intl:y,isDBUXChromeEnabled:k,isWorkflowsAppContainerEnabled:S,collectionStore:v}):(null==x||null===(e=x.getModel())||void 0===e?void 0:e.getEmptyTitlePlaceholder({getRecordModel:x.getRecordModel,userTimeZone:(0,o(427091).P)(),intl:y,isWorkflowsAppContainerEnabled:S}))||(0,w().nE)({intl:y,isWorkflowsAppContainerEnabled:S,isDBUXChromeEnabled:k,collectionStore:v})}),[v,x,y,S,k]),I=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",marginLeft:4,marginRight:4},titleIcons:{display:"flex",alignItems:"center",opacity:t?1:0},text:p,placeholder:{WebkitTextFillColor:e.pageTitlePlaceholderTextColor,cursor:"text"}})),[p,t]),M=(0,n.useMemo)((()=>(0,h.jsxs)("div",{style:I.titleIcons,children:[s,(0,h.jsx)(_,{showHoverActionsStore:d,collectionContextStore:a})]})),[s,a,d,I.titleIcons]),R=(0,n.useCallback)((()=>{o(360378).IU({environment:m})}),[m]),B=(0,n.useCallback)((()=>{(0,u().X)({environment:m,collectionContextStore:a,action:"click_collection_name_input"})}),[m,a]);return v&&x&&b?(0,h.jsxs)("div",{style:I.container,children:[(0,h.jsx)(T,{collectionContextStore:a,disabled:!1,iconStyle:g,iconSize:f}),(0,h.jsx)(o(636045).A,{store:b,style:I.text,disabled:!1,disableSlashCommands:!0,disableEmojiCommands:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableMobileActionBar:!1,disableComment:!0,placeholder:A,onEnter:R,onEsc:R,onClick:B,disableShiftEnter:!0,pasteBehavior:"inline",inPageFind:o(868199).Os.none,placeholderStyle:I.placeholder},b.id),M]}):null})),T=n.memo((function(e){const{disabled:t,collectionContextStore:s,iconStyle:c,iconSize:d=22}=e,u=(0,i().v3)(),{collectionStore:p,collectionViewBlockStore:f}=(0,r().K8)((()=>({collectionStore:s.collectionStore(),collectionViewBlockStore:s.collectionViewBlockStore()})),[s]),m=(0,r().K8)((()=>null==p?void 0:p.getIcon()),[p]),y=(0,r().K8)((()=>{var e;return Boolean((null==p||null===(e=p.getParentBlockStore())||void 0===e?void 0:e.id)===(null==f?void 0:f.id))}),[p,f]),x=(0,r().K8)((()=>null==f?void 0:f.getType()),[f]),S=(0,l().IS)((e=>({iconStyle:{width:d,height:d,marginRight:4,...c},container:{position:"relative",width:d+2,height:d+2,marginRight:4,display:"flex",alignItems:"center",justifyContent:"center"},arrowContainer:{width:20,marginRight:4},pageLinkIndicatorIcon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.text.primary:"#3E3C38",stroke:"dark"===e.mode?e.surface.wash:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[c,d]),w=(0,n.useCallback)((e=>{const t=p&&p.getIconStore();t&&g().createAndCommit({userAction:"CollectionViewBlockSource.handleRecordIconChange",environment:u,canUndo:!0,perform:n=>{o(759625).KY({store:t,value:e,transaction:n})}})}),[p,u]);return p&&f?m||y?m?(0,h.jsxs)("div",{style:S.container,children:[t?(0,h.jsx)(b().B,{disabled:!0,bucket:"secure",store:p,icon:m,isEmptyPage:!1,style:S.iconStyle,size:d}):(0,h.jsx)(b().B,{disabled:!1,bucket:"secure",store:p,icon:m,isEmptyPage:!1,style:S.iconStyle,size:d,iconLoggingData:{recordTable:p.table,source:"inline_collection",block_type:x,collection_id:p.id},onChange:w}),!y&&(0,o(333889).G)(S.pageLinkIndicatorIcon)]}):null:(0,h.jsx)("div",{style:S.arrowContainer,children:(0,h.jsx)(v().I,{icon:a().arrowDiagonalUpRightIcon})}):null})),_=n.memo((function(e){const{showHoverActionsStore:t,collectionContextStore:a}=e,{isMobile:d}=(0,i().Y0)(),u=(0,c().tz)(),p=(0,r().O$)(t),g=(0,l().IS)((()=>({container:{display:"flex"},buttonPopup:{width:240},iconStyle:{width:s().Ev.sm,height:s().Ev.sm}})),[]),f=(0,n.useCallback)((e=>(0,h.jsx)(o(356813).A,{icon:o(533666).Y,iconStyle:g.iconStyle,ariaLabel:u.formatMessage(w().k9.actionsButtonAriaLabel),...e})),[u,g.iconStyle]),m=(0,n.useCallback)((e=>(0,h.jsx)(R,{parent:e,collectionContextStore:a})),[a]);return(0,h.jsx)(o(615917).A,{visible:p,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},style:g.container,children:(0,h.jsx)(o(273520).Ay,{popupType:d?x().nl.SlideUp:x().nl.Popup,render:m,renderOrigin:f,style:g.buttonPopup,originGap:4})})})),R=n.memo((function(e){const{parent:t,collectionContextStore:l}=e,s=(0,i().v3)(),{isMobile:d}=(0,i().Y0)(),f=(0,C().X)("db_ux_chrome"),{collectionStore:x,collectionViewStore:b}=(0,r().K8)((()=>({collectionStore:l.collectionStore(),collectionViewStore:l.collectionViewStore()})),[l]),w=(0,r().O$)(l.permissionScopesStore),A=(0,r().K8)((()=>null==x?void 0:x.isSyncedCollection()),[x]),I=(0,r().K8)((()=>{var e,t;const o=Boolean(null==x?void 0:x.isSystemCollection()),n=null===(e=l.collectionViewBlockStore())||void 0===e?void 0:e.id,i=null==x||null===(t=x.getParentBlockStore())||void 0===t?void 0:t.id,r=i&&n&&i===n;return(!(l.isFullScreenStore.state&&r)||!(0,j().ei)())&&!o}),[l,x]),M=(0,n.useMemo)((()=>{const e=[I?{key:"view",render:e=>(0,h.jsx)(m().A,{...e,title:(0,h.jsx)(c().sA,{id:"database.source.viewDatabase.title",defaultMessage:"View database"}),icon:(0,h.jsx)(v().I,{icon:a().arrowDiagonalUpRightIcon})}),action:e=>{(0,o(210290).q)({environment:s,collectionContextStore:l,event:e.event,buttonPopupParent:t})}}:null,w.canConfigureCollection&&!A?{key:"edit_name",render:e=>(0,h.jsx)(m().A,{...e,title:(0,h.jsx)(c().sA,{id:"database.source.editTitle.title",defaultMessage:"Edit database title"}),icon:(0,h.jsx)(v().I,{icon:o(686752).pencilLineIcon})}),action:()=>{const e=null==x?void 0:x.getNameStore();e&&(o(384221).selectAllText({environment:s,store:e,canSelectAllBlocks:!1}),t.close(),(0,u().X)({environment:s,collectionContextStore:l,action:"click_source_edit_title"}))}}:null];return e.filter((e=>null!==e))}),[I,w.canConfigureCollection,A,s,l,t,x]),T=(0,n.useMemo)((()=>({key:"show_title",render:e=>(0,h.jsx)(m().A,{...e,icon:(0,h.jsx)(v().I,{icon:o(99949).e}),title:(0,h.jsx)(c().sA,{id:"database.source.hideTitle.title",defaultMessage:"Hide database title"})}),action:()=>{g().createAndCommit({userAction:"CollectionViewBlockSource.showTitleItem",environment:s,canUndo:!0,perform:e=>{if(!b)return;p().zA({stores:[b],update:{hide_linked_collection_name:!0},transaction:e});const t=l.collectionViewBlockStore();f&&t&&p().zA({stores:[t],update:{hide_inline_collection_name:!0},transaction:e})}}),t.close(),(0,u().X)({environment:s,collectionContextStore:l,action:"click_source_hide_title"})}})),[l,b,s,t,f]),_=(0,n.useMemo)((()=>[M.length>0?{key:"actions",render:e=>(0,h.jsx)(S().A,{...e}),items:M}:null,w.canConfigureBlock?{key:"show_title",render:e=>(0,h.jsx)(S().A,{...e,topBorder:!0}),items:[T]}:null].filter((e=>null!==e))),[M,T,w.canConfigureBlock]);return x?(0,h.jsx)(o(935091).A,{menuType:d?k().gu.ActionSheet:k().gu.Popup,children:(0,h.jsx)(y().Ay,{type:y().Oh.Vertical,onAccept:t.close,sections:_,initialFocus:void 0})}):null}))},803291:(e,t,o)=>{o.d(t,{t:()=>r});var n=o(242343),i=o(163643);const r=n.memo((function(e){const{coverHeight:t,coverSizeFormat:n,emptyGalleryCoverStyle:r}=e,l=(0,o(174114).IS)((()=>({container:{height:(0,o(869596).F)(t,n),...r}})),[t,n,r]);return(0,i.jsx)("div",{style:l.container})}))},810813:(e,t,o)=>{o.d(t,{p:()=>r});var n=()=>o(84543),i=()=>o(702851);function r(e){const{environment:t,collectionStore:o,performTransaction:r}=e;return n().createAndCommit({userAction:"collectionViewActions.createSchemaUpdateTransaction",environment:t,canUndo:!0,perform:e=>{const n=o.getSchema(),l=r(e),a=o.getSchema();return(0,i().H)({environment:t,collectionStore:o,oldSchema:n,newSchema:a,transaction:e}),l}}).performResult}},823519:(e,t,o)=>{o.d(t,{a:()=>g});var n=o(242343),i=()=>o(174114),r=()=>o(76394),l=()=>o(31448),a=()=>o(421338),s=()=>o(152058),c=()=>o(755002),d=o(163643);function u(e){const{disabled:t,checked:o,selectorSize:n}=e,[r,l]=(0,s().A)(),a=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:r}=e;return(0,i().IS)((e=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...n&&{boxShadow:e.outlineBlueInputBoxShadow}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"small"===r?14:18,height:"small"===r?14:18,...o?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,o,n,r])}({checked:o,disabled:t,isFocusVisible:l,selectorSize:n});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{ref:r,type:"radio",style:a.input,className:"radio-button",...e}),(0,d.jsx)("span",{...(0,c().AH)("custom-radio-button",a.root,t?{}:{pseudoActive:a.active})})]})}var p=()=>o(701270);const g=n.forwardRef((function(e,t){let{additionalContent:o,description:r,isDisabled:s,isSelected:c,label:u,name:p,onChange:g,width:m="fill",selectorSize:y="normal",selectAlignXAxis:v="left",selectAlignYAxis:x="center",selectType:b="checkbox",style:S,supportText:w,value:k,colorName:C,alignAdditionalContent:j,...A}=e;const I=(0,n.useId)(),M=function(e){const{isSelected:t,isDisabled:o,selectAlignYAxis:n,alignAdditionalContent:r}=e;return(0,i().IS)((e=>{const i=t&&!o?e.blueColor:e.selectorBorderUnselected;return{container:{display:"flex",alignItems:r??"center",gap:12,userSelect:"none",padding:"9px 16px 10px 10px",borderRadius:6,border:`1px solid ${i}`,...!o&&{cursor:"pointer"}},title:{fontWeight:l().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===n?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,o,n,r])}({isSelected:c,isDisabled:s,selectAlignYAxis:x,alignAdditionalContent:j}),T=(0,d.jsxs)(a().Y1,{direction:"horizontal",align:"top"===x?"top-left":"center-left",gap:12,width:m,children:[(0,d.jsx)("div",{style:M.selectorWrapper,children:(0,d.jsx)(f,{id:I,selectType:b,name:p,value:k,onChange:g,isSelected:c,selectorSize:y,isDisabled:s,...A})}),(0,d.jsx)(h,{colorName:C,description:r,label:u,selectorSize:y,supportText:w,isDisabled:s})]}),_=(0,d.jsxs)(a().Y1,{direction:"horizontal",align:"top"===x?"top-center":"center",gap:12,children:[(0,d.jsx)(h,{colorName:C,description:r,label:u,selectorSize:y,supportText:w,isDisabled:s}),(0,d.jsx)("div",{style:{...M.selectorWrapper,...M.rightAlignSelectorWrapper},children:(0,d.jsx)(f,{id:I,selectType:b,name:p,value:k,onChange:g,selectorSize:y,isSelected:c,isDisabled:s,...A})})]}),R=o?(0,d.jsx)("div",{style:M.additionalContentWrapper,children:o}):null;return(0,d.jsx)("label",{ref:t,style:{...M.container,...S},htmlFor:I,children:"left"===v?(0,d.jsxs)(d.Fragment,{children:[T,R]}):(0,d.jsxs)(d.Fragment,{children:[R,_]})})}));function h(e){const{description:t,label:o,supportText:n,selectorSize:i,isDisabled:l,colorName:s}=e;let c;return"large"===i?c="Page-Content/Text-Block":"normal"===i||void 0===i?c="Body-13px/Medium":"small"===i?c="Body-12px/Regular":(0,r().HB)(i),(0,d.jsxs)(a().Y1,{gap:4,children:[(0,d.jsxs)(a().Y1,{gap:2,children:[(0,d.jsx)(p().D,{styleName:c,colorName:s||(l?"quaternary":"primary"),children:o}),t?(0,d.jsx)(p().D,{styleName:"Caption-12px/Regular",colorName:l?"quaternary":"secondary",children:t}):null]}),n?(0,d.jsx)(p().D,{styleName:"Caption-12px/Medium",colorName:"tertiary",children:n}):null]})}function f(e){const{selectType:t,selectorSize:n="normal",id:l,name:a,value:s,onChange:c,isSelected:p,isDisabled:g,...h}=e,f=(0,i().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,d.jsx)(u,{id:l,name:a,value:s,onChange:c,checked:p,disabled:g,selectorSize:n,...h});case"checkbox":return(0,d.jsx)("div",{style:f.checkboxWrapper,children:(0,d.jsx)(o(830025).W,{id:l,name:a,value:s,onChange:c,checked:p,disabled:g,selectorSize:n,...h})});default:(0,r().HB)(t)}}},830025:(e,t,o)=>{o.d(t,{W:()=>s});o(242343);var n=()=>o(152058),i=()=>o(174114),r=()=>o(755002),l=()=>o(96144),a=o(163643);function s(e){const{selectorSize:t="normal",...o}=e,{disabled:s,checked:c}=o,[d,u]=(0,n().A)(),p=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:r}=e;return(0,i().IS)((e=>({root:{position:"absolute",display:"flex",width:"large"===r?15:11,height:"large"===r?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===r?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...n&&{boxShadow:e.outlineBlueInputBoxShadow}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"large"===r?18:void 0,height:"large"===r?18:void 0,...o?{pointerEvents:"none"}:{cursor:"pointer"}},icon:{color:e.text.contrastPrimary,width:"large"===r?12:10,height:"large"===r?12:10,ariaHidden:!0}})),[r,t,o,n])}({checked:c,disabled:s,selectorSize:t,isFocusVisible:u});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{ref:d,type:"checkbox",style:p.input,...o}),(0,a.jsx)("span",{...(0,r().AH)(p.root,s?{}:{pseudoActive:p.active}),children:c&&(0,l().R)(p.icon)})]})}},842617:(e,t,o)=>{o.d(t,{MG:()=>h,T1:()=>g,a1:()=>x,dt:()=>f,kg:()=>m,lC:()=>v,n_:()=>y});var n=o(242343),i=()=>o(237385),r=()=>o(803290),l=()=>o(162901),a=()=>o(129978),s=()=>o(514860),c=()=>o(271748),d=()=>o(440588),u=()=>o(370557),p=()=>o(89969);const g=new(a().O2)("PerformanceToolbar",(()=>Promise.all([o.e(96159),o.e(96346),o.e(16471),o.e(36209),o.e(92845),o.e(71718),o.e(17989),o.e(48632),o.e(90625),o.e(21194),o.e(5910),o.e(62427),o.e(45624)]).then(o.bind(o,524636)))),h=(0,a()._h)(g,(e=>e.PerformanceToolbar)),f=(0,a()._h)(g,(e=>e.PerformanceToolbarSettings));function m(){const e=(0,i().v3)();return(0,r().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function y(){const e=(0,i().v3)(),t=b("PerformanceToolbarStore"),o=b("isPerformanceToolbarVisible");return(0,r().K8)((()=>!(!t||!o)&&o(e,e.RouterStore.state,t.state)),[o,e,t])}function v(){const e=b("PerformanceToolbarStore");return(0,r().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function x(){const e=(0,i().v3)(),t=b("createPerformanceToolbarMouseListeners"),o=b("PerformanceToolbarStore"),{sidebarExpanded:l,sidebarWidth:a,secondarySidebarExpanded:p,secondarySidebarWidth:g,updateSidebarExpanded:h,updateSidebarWidth:f}=(0,r().K8)((()=>({sidebarExpanded:d().sidebarExpandedStore.state,sidebarWidth:d().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:s().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,n.useEffect)((()=>{if(o&&t)return t(e,(e=>o.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),l,a,p,g,h,f)}),[t,e,o,l,a,p,g,h,f])}function b(e){const t=m(),[{value:o}]=(0,l().Yb)((()=>t?g.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return o}},842940:(e,t,o)=>{o.d(t,{J:()=>i});o(242343);const n={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})},i=(0,o(680369).wt)("magnifyingGlass",n)},869596:(e,t,o)=>{o.d(t,{F:()=>i});var n=()=>o(551116);function i(e,t){if(e)return e;switch(t){case"large":return n().A.card.desktop.large.height;case"small":return n().A.card.desktop.small.height;default:return n().A.card.desktop.medium.height}}},883249:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(652039).Ay)},898941:(e,t,o)=>{o.d(t,{m:()=>i});o(242343);var n=o(163643);const i=(0,o(680369).wt)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},933871:(e,t,o)=>{o.d(t,{U:()=>p});o(610931);var n=()=>o(543396),i=()=>o(827875),r=()=>o(33715),l=()=>o(846287),a=()=>o(201147),s=()=>o(946854),c=()=>o(84543),d=()=>o(272690),u=()=>o(477267);function p(e){let{environment:t,transaction:o,layoutStore:p,position:g,sessionId:h,beforePerformDeleteModule:f}=e;const m=p.getModules();if(!m)throw new Error("[deleteModuleAtPosition] modules by area not found for layout store");const y=(0,l().EX)(m,(e=>e.id===g.moduleId)),v=(0,n().Cg)({moduleId:null==y?void 0:y.module.id,modulesByArea:p.getModules()}).length;if(!y)return;const{module:x,position:b}=y;if(!(0,a().Fe)(x))throw new Error("[deleteModuleAtPosition] module to delete is not removeable");var S;(c().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){!function(e){const{transaction:t,layoutStore:o,moduleLocation:n,moduleToDelete:l,beforePerformDeleteModule:a}=e;a&&a(t);(0,s().V6)(l)&&(0,u().deleteViewsModuleDependencies)({layoutStore:o,viewsModule:l,transaction:t});if("form_conditional_modules"===n.area){const e=i().N4.removeChildModule({pointer:o.pointer,modulesByArea:o.getModules(),module:l});for(const n of e)c().applyOperation({transaction:t,store:o,operation:n})}else{const e="views_main_tab_modules"===n.area?{area:n.area,viewId:n.viewId}:{area:r().Zm[n.area]};c().applyOperation({transaction:t,store:o,operation:i().N4.deleteModuleInArea({...e,pointer:o.pointer,moduleId:l.id})})}}({environment:t,transaction:e,layoutStore:p,moduleLocation:b,moduleToDelete:x,beforePerformDeleteModule:f})},userAction:"pageLayout.deleteActions.deleteModuleAtPosition"}),h)&&d().PS({environment:t,module:x,sessionId:h,collectionId:null===(S=p.getCollectionModel())||void 0===S?void 0:S.id,layoutId:p.id,context:(0,r().We)(g.area),area:g.area,depth:v})}},942260:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});class n extends(()=>o(129044))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new n},982717:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(242343),i=()=>o(16791),r=()=>o(237385),l=()=>o(803290),a=()=>o(755002),s=()=>o(653998),c=()=>o(220413),d=()=>o(975392),u=()=>o(31448),p=()=>o(141666),g=()=>o(615917),h=o(163643);const f={isRepositioning:!1};const m=function(e){const t=(0,n.useRef)(null),i=(0,r().v3)(),{isMobile:s}=(0,r().Y0)(),[c,u]=(0,n.useState)(f),g=(0,n.useCallback)((()=>{u(f)}),[]),{renderControl:m,onFlushTemporaryPosition:v,style:x,source:b,store:S}=e,{isRepositioning:w,image:k,startDragRenderedPosition:C,startDragImageScreenHeight:j}=c,A=(0,l().K8)((()=>0===o(182613).default.state.stores.length),[]),[I,M]=(0,n.useState)(!1),T=(0,l().uB)(e.mouseStore,o(116586).A),_=(0,l().K8)((()=>T.state.mouseEntered),[T]),R=(0,o(174114).IS)((()=>({dragContainer:{width:"100%",cursor:w?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[w]),B=(0,l().K8)((()=>function(e,t,o){return(0,d().Et)(o)?o:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,d().Et)(e))return e}const o=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,p().pN)(t)?o:t}}const n=t.getFormat(),i=n.page_cover_position;if((0,d().Et)(i))return i;return o}(e,t)}(b,S,c.temporaryPosition)),[c.temporaryPosition,b,S]);(0,n.useEffect)((()=>{const e=e=>{const o=t.current;o&&!o.contains(e.target)&&w&&v({imagePosition:B,reset:()=>{T.reset(),g()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[B,w,T,v,g]),w&&!A&&g();const P=(0,n.useMemo)((()=>(0,d().nF)((e=>{T.setState({...T.state,mouseEntered:!0})}),100)),[T]),L=(0,n.useMemo)((()=>(0,d().sg)((e=>{T.setState({...T.state,mouseEntered:!1})}),100)),[T]),F=(0,n.useCallback)(((e,t)=>{o(360378).IU({environment:i});const n=new Image;n.onload=()=>{u((e=>({...e,isRepositioning:!0,image:n})))},t&&(n.src=t)}),[i]),N=(0,n.useCallback)((e=>{v({imagePosition:B,reset:()=>{g()}})}),[B,v,g]),W=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(152058).p)(t)&&M(!0)}),[]),D=(0,n.useCallback)((()=>{M(!0)}),[]),z=(0,n.useCallback)((e=>{if(k&&w){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/k.width*k.height;u((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:B})))}}}),[k,B,w]),E=(0,n.useCallback)((e=>{if(w){const t=e.diffY/(j||0)+(C||0);u((e=>({...e,temporaryPosition:(0,d().LI)((0,o(944342).A)(t,0,1),4)})))}}),[w,j,C]),V=(0,n.useCallback)((()=>{u((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),O=(0,l().K8)((()=>m({handleRepositionClick:F,handleSavePositionClick:N,handleCancelClick:g,isVisible:s||_||I||w,isRepositioning:w})),[F,N,I,s,w,_,m,g]);return(0,h.jsxs)("div",{ref:t,onFocus:W,onBlur:D,onMouseEnter:P,onMouseMove:P,onMouseLeave:L,...(0,a().AH)(R.container,x),children:[(0,h.jsx)(o(928567).A,{onDraggableDragStart:z,onDraggableDragMove:E,onDraggableDragEnd:V,onDraggableDragCancel:V,disabled:!w,render:t=>(0,h.jsx)("div",{...(0,a().AH)(R.dragContainer),...t,children:e.render({imagePosition:B,isRepositioning:w})})}),(0,h.jsx)(y,{small:e.small,isRepositioning:w}),O]})};function y(e){let{small:t,isRepositioning:o}=e;if(t)return null;const n={background:c().Ay.blackWithAlpha(.4),borderRadius:4,color:c().Ay.white,fontSize:12,fontFamily:u().vc(i().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,h.jsx)(g().A,{visible:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:n,children:(0,h.jsx)(s().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},984826:(e,t,o)=>{o.d(t,{I:()=>l,_:()=>r});const n={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,recentActivity:!1,collaborators:!1,teamspaces:!1},i={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0,recentActivity:!1,collaborators:!1,teamspaces:!1};function r(e){return n[e.type]}function l(e){return i[e.type]}},992849:(e,t,o)=>{o.d(t,{p:()=>r});var n=()=>o(129978);const i=new(n().O2)("HelpButtonContent",(async()=>await o.e(42481).then(o.bind(o,718356)))),r=(0,n()._h)(i,(e=>e.HelpButtonContent))},996151:(e,t,o)=>{o.d(t,{K5:()=>p,Vp:()=>d,_u:()=>c,oP:()=>g,wC:()=>s,xN:()=>u});o(725707),o(491955),o(403517);var n=()=>o(728373),i=()=>o(984826),r=()=>o(946854),l=()=>o(220865);const a={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},s={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},c={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyLabels:"hide",propertyIds:[]},{id:"editor",type:"editor"},{id:"discussions",type:"discussions"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},d={page_main:[],page_details:[],form_layout_schema:[],person_profile_page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"recent_activity",type:"recentActivity"}],person_profile_page_details:[{id:"collaborators",type:"collaborators"},{id:"teamspaces",type:"teamspaces"}]};function u(e){return(0,l().jr)({modulesByArea:a,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function p(){return{page_layout_schema:(0,l().ke)(a.page_main).map((e=>{if(!(0,r().cn)(e))return(0,i().I)(e)?{...e,id:(0,n().Ay)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,l().ke)(a.page_details).map((e=>{if(!(0,r().cn)(e))return(0,i().I)(e)?{...e,id:(0,n().Ay)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0,person_profile_page_main:void 0,person_profile_page_details:void 0}}function g(e,t){const o=void 0===t?[{id:(0,n().Ay)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,n().Ay)(),type:"formQuestion",formQuestionId:e},{id:(0,n().Ay)(),type:"formQuestion",formQuestionId:t}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,person_profile_page_main:void 0,person_profile_page_details:void 0,form_layout_schema:[{id:(0,n().Ay)(),type:"cover"},{id:(0,n().Ay)(),type:"formTitle"},...o,{id:(0,n().Ay)(),type:"formSubmit"}]}}}}]);