"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[209],{21209:(e,t,a)=>{a.d(t,{$:()=>u});a(725707),a(491955),a(403517);var n=()=>a(237385),s=()=>a(803290),r=()=>a(294997),o=()=>a(736953),i=()=>a(979537);function u(e){const t=(0,n().v3)().currentUser.id;return(0,s().K8)((()=>{if(!e.isDefined())return[];return(0,r().ri)({rawMembers:e.getRawMembership(),groupsInSpace:o().A.state.permissionGroupsAndMemberCounts.map((e=>e.group))}).filter((a=>i()._.getSpacePermissionGroupIds({userId:t,spaceId:e.getSpaceId()}).has(a.getGroupId())))}),[t,e])}},36178:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(242343),s=()=>a(653998),r=a(163643);const o=(0,s().YK)({message_placeholder:{id:"teamInviteLinkRequestPage.message.placeholder",defaultMessage:"Message (optional)"}});const i=function(e){const{teamStore:t,teamName:i,teamId:u,isModalOpen:l,onDismiss:m}=e,[c,d]=(0,n.useState)(""),g=(0,a(237385).v3)(),p=(0,s().tz)(),v=async()=>{await a(465235).Ip({environment:g,teamId:u,message:c}),m()},S=(0,a(174114).IS)((()=>({modal:{alignSelf:"center",overflow:"visible",padding:15,width:420},requestTitle:{display:"inline-flex",marginBottom:10},icon:{marginLeft:4,marginRight:4},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20},input:{padding:8}})),[]);return(0,r.jsx)(a(922172).a,{open:l,onDismiss:m,innerStyle:S.modal,preventHideChildrenWhileOpening:!0,render:()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:S.requestTitle,children:(0,r.jsx)(s().sA,{id:"teamInviteLinkRequestModal.reasonForRequest.title",defaultMessage:"Request access to {icon} {teamName}",values:{teamName:i,icon:(0,r.jsx)(a(424339).x,{style:S.icon,store:t,disabled:!0,size:22})}})}),(0,r.jsx)(a(59175).A,{textarea:!0,style:S.input,value:c,onChange:e=>{d(e.target.value)},placeholder:p.formatMessage(o.message_placeholder)}),(0,r.jsxs)("div",{style:S.footer,children:[(0,r.jsx)(a(35462).A,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,r.jsx)(s().sA,{id:"teamInviteLinkRequestModal.caption",defaultMessage:"Your teamspace owners will approve or decline your request."})}),(0,r.jsx)(a(951540).A,{size:"lg",style:S.requestInvitesButton,onClick:v,children:(0,r.jsx)(s().sA,{id:"teamInviteLinkRequestModal.requestAccessButton.label",defaultMessage:"Request"})})]})]})})}},38597:(e,t,a)=>{a.r(t),a.d(t,{TeamJoinLeaveButton:()=>y});var n=a(242343),s=()=>a(237385),r=()=>a(803290),o=()=>a(174114),i=()=>a(31448),u=()=>a(548694),l=()=>a(904697),m=()=>a(259539),c=()=>a(105018),d=()=>a(653998),g=()=>a(209684),p=a(163643);const v=function(e){const{teamStore:t,from:o,navigateToTeamHomeOnJoin:i,style:u,hoveredStyle:l,icon:m,isRed:c}=e,v=(0,s().v3)(),S=(0,r().O$)(a(485966).AppStoreCurrentSpaceStore),f=(0,n.useCallback)((async()=>{S&&await a(628854).e2({environment:v,teamStore:t,currentSpaceStore:S,from:o,andNavigateToTeamHome:i??!1})}),[S,v,t,o,i]);return(0,p.jsx)(g().p,{style:u,hoveredStyle:l,onClick:f,icon:m,isRed:c,children:(0,p.jsx)(d().sA,{id:"outlinerTeamToggleButton.joinTeamButton",defaultMessage:"Join"})})};var S=()=>a(872131);const f=function(e){const{teamStore:t,style:s,hoveredStyle:o}=e,[i,u]=(0,n.useState)(!1),l=(0,r().K8)((()=>t.getName()),[t]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(g().p,{style:s,hoveredStyle:o,onClick:()=>u(!0),children:(0,p.jsx)(d().sA,{id:"teamRequestButton.requestButton.label",defaultMessage:"Request"})}),(0,p.jsx)(a(36178).A,{teamStore:t,teamName:l,teamId:t.id,isModalOpen:i,onDismiss:()=>u(!1)})]})};function y(e){const{teamStore:t,style:a,hoveredStyle:n}=e,d=(0,s().v3)(),g=(0,m().Q)(),y=(0,c().G)(t),T=(0,r().K8)((()=>t.getTeamAccessLevel()),[t]),h=(0,o().IS)((e=>({joinTeamButton:{maxHeight:26,marginLeft:10,paddingLeft:10,paddingRight:10,borderRadius:100,fontSize:13,fontWeight:i().Wy.semibold,background:e.buttonHoveredBackground,alignSelf:"center",...a},joinTeamButtonHoveredStyle:{background:e.buttonPressedBackground,...n}})),[a,n]),I=(0,r().K8)((()=>(0,l().isUnownedTeam)({membership:t.getRawMembership()})&&(0,u().s7)(d)),[d,t]),w=!y&&"open"===T||I,b=!y&&"closed"===T;return g?null:y?(0,p.jsx)(S().A,{...e,style:h.joinTeamButton,hoveredStyle:h.joinTeamButtonHoveredStyle}):w?(0,p.jsx)(v,{...e,style:h.joinTeamButton,hoveredStyle:h.joinTeamButtonHoveredStyle}):b?(0,p.jsx)(f,{teamStore:t,style:h.joinTeamButton,hoveredStyle:h.joinTeamButtonHoveredStyle}):null}},105018:(e,t,a)=>{a.d(t,{G:()=>o});var n=()=>a(237385),s=()=>a(803290),r=()=>a(979537);function o(e){const t=(0,n().v3)().currentUser.id;return(0,s().K8)((()=>Boolean(void 0!==t&&e.isNonGuestMember(t,r()._.getSpacePermissionGroupIds({userId:t,spaceId:e.getSpaceId()})))),[t,e])}},259539:(e,t,a)=>{a.d(t,{Q:()=>i});var n=()=>a(237385),s=()=>a(803290),r=()=>a(548694),o=()=>a(485966);function i(){const e=function(){const e=(0,n().v3)();return(0,s().K8)((()=>{const t=o().default.state.currentSpaceStore;if(!t)return{loading:!0};if(!r().IL(t))return{loading:!1,isUserTeamGuestOfSpace:!1};const a=o().default.state.currentSpaceViewStore;if(!a||!e.currentUser.id)return{loading:!0};const n=r().vb({userId:e.currentUser.id,spaceViewStore:a});return n.isLoaded?{loading:!1,isUserTeamGuestOfSpace:n.isTeamGuestInSpace}:{loading:!0}}),[e])}();return(0,s().K8)((()=>e.loading||e.isUserTeamGuestOfSpace),[e])}},465235:(e,t,a)=>{a.d(t,{D2:()=>w,Ip:()=>T,Jk:()=>h,YT:()=>I,e2:()=>f,g:()=>y});a(725707),a(491955);var n=()=>a(712437),s=()=>a(409211),r=()=>a(539174),o=()=>a(818369),i=()=>a(759625),u=()=>a(575015),l=()=>a(783759),m=()=>a(84543),c=()=>a(477784),d=()=>a(548694),g=()=>a(485966),p=()=>a(628854),v=()=>a(723);const S=(0,a(653998).YK)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function f(e){let{environment:t,userId:a,teamStore:n,user:s}=e;const o=n.getSpaceId();if(!o)return;await p().rU({environment:t,teamId:n.id,spaceId:o,teamUserInfo:s,isSettingDefaultTeam:!1,inviterId:a})&&(r().vo(t,{store:n,joined_role:"member",from:"team_invite_link"}),await y({environment:t,userId:a,teamStore:n}),u().D6({label:c().A.formatMessage(S.joinTeamSuccessMessage,{teamName:n.getName()})}))}async function y(e){let{environment:t,userId:a,teamStore:s}=e;const r=g().default.state.currentUserRootStore,o=s.getSpaceId();if(!o||!r)return;const i=r.getSpaceViewStores().filter((e=>e.getSpaceId()===o))[0];await l().tR({environment:t,spaceViewStore:i,userSettingsStore:void 0,userRootStore:r,pageVisitSource:n().y8.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),await v().J({environment:t,spaceId:o,userId:a}),p().L0({environment:t,teamStore:s,shouldScroll:!0})}async function T(e){let{environment:t,teamId:a,message:n}=e;if(!t.currentUser.id)return;"success"===(await o().callApi({eventName:"requestAccess",environment:t,data:{type:"current-actor-to-team",teamId:a,message:n}})).type?(r().XQ(t,{teamId:a}),await I({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{u().D6({label:c().A.formatMessage(S.requestTeamSuccessMessage)})}))):u().D6({label:c().A.formatMessage(S.requestTeamFailureMessage)})}async function h(e){let{environment:t,teamStore:a,accessRequestStore:n,status:o}=e;const u=n.getForActorId();if(!u)return;const l=n.getRecordModel({table:s().oo,id:u});if(l){if("approved"===o){const e=[{type:"member",entity_type:"user",user_id:l.id}];if(!(await p().Zd({environment:t,teamStore:a,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}m().createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,canUndo:!0,perform:e=>{i().zv({store:n,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:s().oo,resolved_by_id:t.currentUser.id,status:o}})}}),r().GW(t,{store:a,resolution:o})}}async function I(e){let{environment:t}=e;const{lastVisitedSpaceView:a,userRootStore:s,userSettingsStore:r}=await(0,d().ex)({environment:t,disableRedirectUrl:!1});a?await l().tR({environment:t,spaceViewStore:a,userRootStore:s,userSettingsStore:r,pageVisitSource:n().y8.BackForward,navigationType:"switchingToOrLoadingSpace"}):await l().t9({environment:t,userRootStore:s,userSettingsStore:r,pageVisitSource:n().y8.BackForward})}async function w(e){let{environment:t,teamId:a}=e;const n=await o().callApi({eventName:"getTeamAccessRequestMetadata",environment:t,data:{teamId:a}});if("success"===n.type)return n.data}},872131:(e,t,a)=>{a.d(t,{A:()=>m});a(403517);var n=a(242343),s=()=>a(237385),r=()=>a(803290),o=()=>a(653998),i=()=>a(975392),u=()=>a(21209),l=a(163643);const m=function(e){const{teamStore:t,from:m,onLeavingTeam:c,style:d,hoveredStyle:g,icon:p,isRed:v,placement:S,alignment:f,buttonInternals:y}=e,T=(0,s().v3)(),h=(0,r().O$)(a(485966).AppStoreCurrentSpaceStore),I=(0,u().$)(t),w=(0,n.useCallback)((async()=>{if(!h)return;await a(628854).JC({environment:T,teamStore:t,from:m,userGroupsInTeam:I})&&(null==c||c())}),[h,T,t,m,I,c]),b=(0,l.jsx)(o().sA,{id:"teamJoinLeaveButton.leaveTeam.enabledTooltip",defaultMessage:"Click to leave teamspace"}),j=function(e){let{teamStore:t}=e;const a=(0,s().v3)(),n=a.currentUser.id,{isDefaultTeam:m}=(0,r().K8)((()=>({isDefaultTeam:t.isDefault()})),[t]),c=(0,u().$)(t),d=(0,r().K8)((()=>{if(!t.isReady())return!1;const{ownerUserIds:e,ownerGroupIds:a}=t.getAllOwnerIds();return Boolean(n&&t.isOwner(n)&&e.length+a.length===1)}),[t,n]);return function(e){let{isDefaultTeam:t,isOnlyTeamOwner:a,userGroupsInTeam:n}=e;if(t)return(0,l.jsx)(o().sA,{id:"teamBrowser.teamCard.leaveTeam.defaultTeamTooltip",defaultMessage:"You canâ€™t leave this teamspace because everyone in the workspace must be a member"});if(a)return(0,l.jsx)(o().sA,{id:"teamJoinLeaveButton.leaveTeam.onlyOwnerTooltip",defaultMessage:"Invite another teamspace owner to leave this teamspace"});if(n.length>0)return(0,l.jsx)(o().sA,{id:"teamBrowser.teamCard.leaveTeam.groupTooltip",defaultMessage:"{groupNames, plural, one {You can't leave this teamspace because you're a member of multiple groups, {groupNames}.} other {You can't leave this teamspace because you're a member of the group, {groupNames}.}}",values:{groupNames:i().oE(n.map((e=>e.name))).join()}})}({isDefaultTeam:m,isOnlyTeamOwner:d,userGroupsInTeam:c})}({teamStore:t}),A=Boolean(j),M=A?j:b;return(0,l.jsx)(a(103151).A,{style:A?{width:240}:void 0,disableTooltip:!Boolean(M),renderTooltip:e=>(0,l.jsx)("div",{...e,children:M}),textWrap:A,placement:S,alignment:f,render:e=>(0,l.jsx)(a(209684).p,{...e,style:d,hoveredStyle:g,onClick:w,disabled:A,disabledFeedback:A,icon:p,isRed:v,children:y||(0,l.jsxs)(l.Fragment,{children:[(0,a(539645).o)({width:12.5,marginRight:4}),(0,l.jsx)(o().sA,{id:"teamBrowser.teamCard.button.joined",defaultMessage:"Joined"})]})})})}}}]);