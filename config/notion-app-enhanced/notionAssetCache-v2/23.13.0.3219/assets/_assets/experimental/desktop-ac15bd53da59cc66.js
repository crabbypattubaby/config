"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[7097],{231423:(e,t,i)=>{i.d(t,{$I:()=>ae,$L:()=>ie,$f:()=>G,Bu:()=>ee,GK:()=>W,IF:()=>ne,Ln:()=>C,Nn:()=>D,OM:()=>$,OQ:()=>X,Ui:()=>P,Uo:()=>re,bD:()=>L,ds:()=>B,dy:()=>Z,fk:()=>J,g8:()=>Q,kr:()=>se,sL:()=>te,uj:()=>oe,xt:()=>H});i(362833),i(725707),i(491955),i(771702),i(403517);var o=()=>i(975392),a=()=>i(76394),s=()=>i(141666),r=()=>i(950635),n=()=>i(839999),c=()=>i(762847),l=()=>i(466003),d=()=>i(577097),u=()=>i(564134),p=()=>i(716605),m=()=>i(871002),f=()=>i(846581),g=()=>i(810111),b=()=>i(539032),N=()=>i(103265),y=()=>i(694225),h=()=>i(769884),M=()=>i(486540),k=()=>i(632627),v=()=>i(243571),R=()=>i(711659),j=()=>i(145017),_=()=>i(518797),U=()=>i(21164),x=()=>i(528762),S=()=>i(970172),A=()=>i(218357),I=()=>i(409211),T=()=>i(34662),E=()=>i(14931),V=()=>i(326259),w=()=>i(86280);const P=(0,i(653998).YK)({defaultPluralizedUserNames:{defaultMessage:"Someone",id:"pushNotification.pluralizedUserNames.defaultLabel"},defaultPermissionGroupName:{defaultMessage:"Deleted group",id:"pushNotification.permissionGroupName.defaultLabel"},defaultPageName:{defaultMessage:"a Notion page",id:"pushNotification.pageName.defaultLabel"},untitledPermissionGroupName:{defaultMessage:"Untitled group",id:"pushNotification.permissionGroupName.untitledLabel"},userEditedPermissionGroup:{defaultMessage:"{userName} edited {permissionGroupName}",id:"pushNotification.userEditedTarget.label"},userDeletedPermissionGroup:{defaultMessage:"{userName} deleted {permissionGroupName}",id:"pushNotification.userDeletedTarget.label"},userCreatedPermissionGroup:{defaultMessage:"{userName} created {permissionGroupName}",id:"pushNotification.userCreatedTarget.label"},unknownAuthor:{defaultMessage:"Unknown author",id:"pushNotification.authorPhrase.unknown"},untitledSpaceName:{defaultMessage:"Untitled",id:"pushNotification.untitledSpaceName.label"},untitledTeamName:{defaultMessage:"Untitled",id:"pushNotification.untitledTeamName.label"},untitledCollectionName:{defaultMessage:"Untitled",id:"pushNotification.untitledCollectionName.placeholder"},untitledBlockTitle:{defaultMessage:"Untitled",id:"pushNotification.untitledBlockTitle.placeholder"},twoUserNames:{defaultMessage:"{firstAuthor} and {secondAuthor}",id:"pushNotification.twoUserNames.label"},threePlusUserNames:{defaultMessage:"{othersCount, plural, one {{firstAuthor} and {othersCount} other} other {{firstAuthor} and {othersCount} others}}",id:"pushNotification.threePlusUserNames.label"},editorPermissionLabel:{defaultMessage:"Full access",id:"pushNotifications.editorPermissionLevel.label"},readerPermissionLabel:{defaultMessage:"Read only",id:"pushNotifications.readerPermissionLevel.label"},editOnlyPermissionLabel:{defaultMessage:"Edit only",id:"pushNotifications.editOnlyPermissionLevel.label"},editPermissionLabel:{defaultMessage:"Edit",id:"pushNotifications.editPermissionLevel.label"},commentOnlyPermissionLabel:{defaultMessage:"Comment only",id:"pushNotifications.commentOnlyPermissionLevel.label"},noAccessPermissionLabel:{defaultMessage:"No access",id:"pushNotifications.noAccessPermissionLevel.label"},publicPermissionRoleLabel:{defaultMessage:"Public ({permissionLevel})",id:"pushNotifications.publicPermissions.label"},userNameWithRole:{defaultMessage:"{userName} ({permissionLevel})",id:"pushNotifications.userPermissionsWithRole.label"},botNameWithRole:{defaultMessage:"{botName} ({permissionLevel})",id:"pushNotifications.botPermissionsWithRole.label"},spaceNameWithRole:{defaultMessage:"{spaceName} ({permissionLevel})",id:"pushNotifications.spacePermissionsWithRole.label"},imageInPushNotification:{defaultMessage:"{imageEmoji} Image",id:"pushNotification.imageInPushNotification.placeholder"},topLevelBlockCreated:{defaultMessage:"{userName} created {targetName} in {spaceName}",id:"pushNotification.userCreatedBlockInSpace.message"},topLevelBlockDeleted:{defaultMessage:"{userName} deleted {targetName} in {spaceName}",id:"pushNotification.userDeletedBlockInSpace.message"},collectionRowCreated:{defaultMessage:"{userName} created {targetName} in {collectionName}",id:"pushNotification.userCreatedRowInCollection.message"},collectionRowDeleted:{defaultMessage:"{userName} deleted {targetName} in {collectionName}",id:"pushNotification.userDeletedRowInCollection.message"},emptyBlockEditedProperty:{defaultMessage:"Empty",id:"pushNotification.emptyBlockPropertyValueEdited.placeholderLabel"},propertyNameAndValueEdited:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationSubject"},propertyNameAndValueNotificationBody:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationBody"},blockDeletedEditBody:{defaultMessage:"[Deleted] {renderedBlock}",id:"pushNotification.deletedBlock.notificationContents"},blockEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockEdited.notificationSubject"},blockPropertyEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockPropertyEdited.notificationSubject"},mobileBlockPropertyEditedNotification:{defaultMessage:"{userName} edited",id:"pushNotification.mobileBlockPropertyEdited.notificationSubject"},userEditedPermissionsFor:{defaultMessage:"{userName} edited permissions for {targetName}",id:"pushNotifications.permissionsEditedForPageOrSpace.notificationSubject"},userMentionedIn:{defaultMessage:"{userName} mentioned you in {targetName}",id:"pushNotifications.userMentionedInPage.notificationSubject"},mobileUserMentionedIn:{defaultMessage:"{userName} mentioned you",id:"pushNotifications.mobileUserMentionedInPage.notificationSubject"},permissionGroupMentionedIn:{defaultMessage:"{userName} mentioned {groupName} in {targetName}",id:"pushNotifications.groupMentionedInPage.notificationSubject"},teamMentionedIn:{defaultMessage:"{userName} mentioned {teamName} in {targetName}",id:"pushNotifications.teamMentionedInPage.notificationSubject"},userDeletedComment:{defaultMessage:"[Deleted]ðŸ’¬ {commentText}",id:"pushNotifications.userDeletedCommentText.notificationContents"},userCommentedSubject:{defaultMessage:"{userName} commented in {targetName}",id:"pushNotifications.userCommentedSubject.notificationSubject"},userSuggestedSubject:{defaultMessage:"{userName} suggested in {targetName}",id:"pushNotifications.userSuggestedSubject.notificationSubject"},mobileUserCommentedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserCommentedSubject.notificationSubject"},mobileUserSuggestedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserSuggestedSubject.notificationSubject"},userAddedToSpace:{defaultMessage:"{userName} added you to {workspaceName}",id:"pushNotifications.userAddedToSpace.notificationSubject"},mobileUserInvited:{defaultMessage:"{userName} invited you",id:"pushNotifications.mobileUserInvited.notificationSubject"},mobileUserInvitedByBot:{defaultMessage:"You have been invited",id:"pushNotifications.mobileUserInvitedByBot.notificationSubject"},userInvitedToSpace:{defaultMessage:"{userName} invited you to {workspaceName}",id:"pushNotifications.userInvitedToSpace.notificationSubject"},userInvitedToSpaceByBot:{defaultMessage:"You have been invited to {workspaceName}",id:"pushNotifications.userInvitedToSpaceByBot.notificationSubject"},userEditedCollectionSubject:{defaultMessage:"{userName} edited {collectionName}",id:"pushNotifications.collectionEdited.notificationSubject"},userEditedCollectionPageLayoutSubject:{defaultMessage:"{userName} edited the layout of {collectionName}",id:"pushNotifications.collectionPageLayoutEdited.notificationSubject"},userCreatedCollectionSubject:{defaultMessage:"{userName} created {collectionName}",id:"pushNotifications.collectionCreated.notificationSubject"},collectionDescriptionDeleted:{defaultMessage:"{userName} deleted the description for {collectionName}",id:"pushNotifications.collectionDescriptionDeleted.notificationSubject"},collectionDescriptionCreated:{defaultMessage:"{userName} added a description for {collectionName}",id:"pushNotifications.collectionDescriptionAdded.notificationSubject"},untitledCollectionView:{defaultMessage:"Untitled",id:"pushNotifications.untitledCollection.label"},collectionViewEditedSubject:{defaultMessage:"{userName} edited view {collectionViewName} in {collectionName}",id:"pushNotifications.collectionViewEdited.notificationSubject"},collectionPropertyEditedUnknown:{defaultMessage:"Unknown",id:"pushNotifications.unknownCollectionPropertyName.label"},collectionPropertyEditedSubject:{defaultMessage:"{userName} edited property {propertyType} in {collectionName}",id:"pushNotifications.collectionPropertyEdited.subject"},reminderSubject:{defaultMessage:"Reminder in {pageName}",id:"pushNotifications.reminderChanged.subject"},pageLockedActivity:{defaultMessage:"{userName} locked {pageName}",id:"pushNotifications.pageLocked.subject"},pageUnlockedActivity:{defaultMessage:"{userName} unlocked {pageName}",id:"pushNotifications.pageUnlocked.subject"},emailEditedActivity:{defaultMessage:"{userName} edited their account settings",id:"pushNotifications.emailAccountSettingsEdited.subject"},emptyPropertyBody:{defaultMessage:"Empty",id:"pushNotifications.emptyPropertyValueInCollection.label"},unknownRelationValueChange:{defaultMessage:"Unknown",id:"pushNotifications.unknownRelationPropertyChanged.label"},unknownAuthorInPropertySchemaChange:{defaultMessage:"Unknown author",id:"pushNotifications.unknownAuthorUpdatedProperty.label"},accessRequestedSubject:{defaultMessage:"{userName} requested access to {pageName}",id:"pushNotifications.accessRequested.subject"},editAccessRequestedSubject:{defaultMessage:"{userName} requested edit access to {pageName}",id:"pushNotifications.editAccessRequested.subject"},accessRequestResolvedApprovedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been approved",id:"pushNotifications.accessRequestResolved.approved.subject"},accessRequestResolvedRejectedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been rejected",id:"pushNotifications.accessRequestResolved.subject"},membershipRequestedSubject:{defaultMessage:"{userName} requested to add a new member to {workspaceName}",id:"pushNotifications.membershipRequested.subject"},guestInviteRequestedSubject:{defaultMessage:"{userName} requested to invite a guest to {workspaceName}",id:"pushNotifications.guestInviteRequested.subject"},blockFormatEditPageIconName:{defaultMessage:"Page Icon",id:"pushNotifications.formatChange.pageIcon.label"},pageIconImagePlaceholder:{defaultMessage:"Image",id:"pushNotifications.formatChange.pageIcon.imagePlaceholder"},pageDeletedActivity:{defaultMessage:"{userName} deleted {pageName}",id:"pushNotifications.pageDeleted.subject"},pageRestoredActivity:{defaultMessage:"{userName} restored {pageName}",id:"pushNotifications.pageRestored.subject"},pagePermanentlyDeletedActivity:{defaultMessage:"{userName} permanently deleted {pageName}",id:"pushNotifications.pagePermanentlyDeleted.subject"},userInvitedToTeam:{defaultMessage:"{userName} invited you to {teamName}",id:"pushNotifications.userInvitedToTeam.notificationSubject"},privateContentTransferred:{defaultMessage:"{author} transferred private content from {fromUserName} to you: {pageName}",id:"pushNotifications.privateContentTransferred.notificationSubject"},verificationExpired:{defaultMessage:"Verification expired for {pageName}",id:"pushNotifications.verificationExpired.notificationSubject"},importSuccessful:{defaultMessage:"Your {importSource} import was successful",id:"pushNotifications.importCompleted.notificationSubject"},importFailed:{defaultMessage:"Your {importSource} import has failed",id:"pushNotifications.importFailed.notificationSubject"},exportCompleted:{defaultMessage:"Your workspace export is ready",id:"pushNotifications.exportCompleted.notificationSubject"},inAppNotificationAutomationActionTriggered:{defaultMessage:"{automationName} sent you a message",id:"pushNotifications.inAppNotificationAutomationActionTriggered.notificationSubject"},noConflictsFound:{defaultMessage:"No conflicts found",id:"pushNotifications.noConflictsFound.notificationSubject"},automationTypecheckErrorRaisedSubject:{defaultMessage:"{automationName} is invalid",id:"pushNotifications.automationTypecheckErrorRaised.notificationSubject"},automationTypecheckErrorRaisedBody:{defaultMessage:"Resolve any errors or remove failing steps to enable this automation",id:"pushNotifications.automationTypecheckErrorRaised.notificationBody"},reactionCreated:{defaultMessage:"{userName} reacted to {targetName}",id:"pushNotifications.reactionCreated.notificationSubject"},upgradeRequestCreated:{defaultMessage:"{userName} requested an upgrade",id:"pushNotifications.upgradeRequestCreated.notificationSubject"},appBuilderWorkflowError:{defaultMessage:"A workflow run has failed",id:"pushNotifications.appBuilderWorkflowError.notificationSubject"},appBuilderWorkflowAction:{defaultMessage:"{workflowName} has sent you a message",id:"pushNotifications.appBuilderWorkflowAction.notificationSubject"},customAppBuilderWorkflowActionTitle:{defaultMessage:"From {workflowName}: {customTitle}",id:"pushNotifications.appBuilderWorkflowAction.customNotificationSubject"},externalIntegrationNotificationDefault:{defaultMessage:"An external integration has sent you a message",id:"pushNotifications.externalIntegrationNotificationDefault.notificationSubject"},externalIntegrationNotificationJiraSyncTokenExpiryError:{defaultMessage:"Your Jira sync stopped for {site} due to expired Jira token. Please re-authenticate to continue.",id:"pushNotifications.externalIntegrationNotificationJiraSyncTokenExpiryError.notificationSubject"},trialCreated:{defaultMessage:"{userName} started a {days} day trial of Notion {product}",id:"pushNotifications.trialCreated.notificationSubject"},trialCreatedBody:{defaultMessage:"You now have access to all {product} plan features until {endDate}",id:"pushNotifications.trialCreatedBody.notificationBody"}});function C(e){const{activity:t,getRecordValue:i}=e,a=t.getEdits();return o().oE((0,s().qt)(o().Bq(a.map((e=>e.authors||[])))).map((e=>{const t=i(e);if(t)return(0,r().D3)({table:e.table,value:t})})))}function L(e,t){const i=e.map((e=>e?(0,r().lR)(t,e):t.formatMessage(P.unknownAuthor)));return function(e,t){if(1===t.length)return t[0];if(2===t.length)return e.formatMessage(P.twoUserNames,{firstAuthor:t[0],secondAuthor:t[1]});if(t.length>2){const i=t.length-1;return e.formatMessage(P.threePlusUserNames,{othersCount:i,firstAuthor:t[0]})}return e.formatMessage(P.defaultPluralizedUserNames)}(t,i)}function B(e){var t;const{recipientUser:i,authors:o}=e,a=o.filter((e=>e.id!==(null==i?void 0:i.id)));if(0===a.length)return;const s=a[0];var r;return s.table===I().oo&&null!==(t=s.asActor)&&void 0!==t&&t.profile_photo?null===(r=s.asActor)||void 0===r?void 0:r.profile_photo:void 0}function Z(e){if(!o().Im(e))return e[0].id}function F(e){const{blockValue:t,getRecordValue:i,userTimeZone:o,intl:a}=e,s=h().Bj6.fromBlock(t),r=h().b4_.fromGetRecordValueFn(i);return s.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:r,userTimeZone:o,intl:a,isWorkflowsAppContainerEnabled:!1})}function G(e){return function(e){const{activity:t,getRecordValue:i,pageVisitSource:o,userTimeZone:a,intl:s}=e,r=h().b4_.fromGetRecordValueFn(i),n=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;if(n){const c=i({table:j().ev,id:n,spaceId:t.space_id});if(c){return{url:h().Bj6.fromBlock(c).getRenderUrl({getRecordModel:r,baseUrl:e.baseURL,pageVisitSource:o}),title:F({intl:s,blockValue:c,getRecordValue:i,userTimeZone:a})}}return{url:e.baseURL||"/",title:s.formatMessage(P.untitledBlockTitle)}}if(t.collection_id)return Y(e);if("user-invited"===t.type){const o=function(e){const{activity:t}=e,i=h().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel);if(!t.permission_group_id)return;const o=ae({spaceId:t.space_id,permissionGroupId:t.permission_group_id,getRecordModel:i});if(o)return{icon:o.getIcon(),name:o.getName()};return}({activity:t,getRecordValue:i}),a=r({table:x().NX,id:t.space_id});if(a&&o)return{title:se(s,o),url:a.getRenderUrl({baseUrl:e.baseURL})}}else{if("team-membership-edited"===t.type)return q(e);if("access-requested"===t.type){const i=r({id:t.getAccessRequestId(),table:v().O,spaceId:t.space_id});if(i&&i.isTeamMembershipRequest())return q(e)}}return O(e)}(e).title.replaceAll(/[\r\n]+/g," ")}function D(e){const{activity:t}=e,i=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;return i||(t.collection_id?t.collection_id:void 0)}function q(e){const{activity:t,getRecordValue:i,intl:o}=e,a=h().b4_.fromGetRecordValueFn(i),s=e.baseURL||"/",r=o.formatMessage(P.untitledTeamName);if(!t.team_id)return{url:s,title:r};const n=a({table:A().yK,id:t.team_id}),c=a({table:x().NX,id:t.space_id});return{url:(null==c?void 0:c.getRenderUrl({baseUrl:e.baseURL}))??s,title:(null==n?void 0:n.getRenderTitleWithEmojiOrPlaceholder({intl:o}))??r}}function W(e){return O(e).title}function O(e){const{activity:t,getRecordValue:i,intl:o}=e,a=i({table:x().NX,id:t.space_id});if(a){const t=h().Bj6.fromSpace(a);return{title:t.getRenderTitleWithEmojiOrPlaceholder({intl:o}),url:t.getRenderUrl({baseUrl:e.baseURL})}}return{url:e.baseURL||"/",title:o.formatMessage(P.untitledSpaceName)}}function $(e){return Y(e).title}function Y(e){const{activity:t,getRecordValue:i,pageVisitSource:o,userTimeZone:a,intl:s}=e;if(t.collection_id){const r=i({table:U().Vl,id:t.collection_id,spaceId:t.space_id});if(r){const t=h().Bj6.fromCollection(r),i=h().b4_.fromGetRecordValueFn(e.getRecordValue),n=t.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:i,userTimeZone:a,intl:s,isWorkflowsAppContainerEnabled:!1});return{url:t.getRenderUrl({getRecordModel:i,baseUrl:e.baseURL,pageVisitSource:o}),title:n}}return{url:e.baseURL||"/",title:s.formatMessage(P.untitledCollectionName)}}return{url:e.baseURL||"/",title:s.formatMessage(P.untitledCollectionName)}}function H(e){const{activity:t,getRecordValue:i,intl:o}=e;if("in-app-notification-automation-action-triggered"===t.type||"automation-typecheck-error-raised"===t.type){const e=h().b4_.fromGetRecordValueFn(i),a=e({table:R().yB,id:t.getEdits()[0].automation_id,spaceId:t.space_id});return(null==a?void 0:a.getNameWithDefault(e,o))??(0,n().PK)(o)}}function z(e){if(e.blockValue.properties)return(0,k().r4)({intl:e.intl,textValue:e.blockValue.properties.title,getRecordModel:h().b4_.fromGetRecordValueFn(e.getRecordValue),userTimeZone:e.userTimeZone})}function K(e,t){const i=(0,M().an)(t,void 0);return e.formatMessage(i)}function J(e){let{userTimeZone:t,activity:i,getRecordValue:a,pageVisitSource:s,intl:r,experimentService:n,collectionFeatureGates:c}=e;const d=i.getEdits();if(d.length){const e=[];d.forEach((t=>{"permission-created"===t.type?e.push(t.permission_data):"permission-deleted"===t.type?e.push({...t.permission_data,role:"none"}):"permission-restriction-created"===t.type||"permission-restriction-deleted"===t.type?(t.permission_data.calculated_changes||[]).forEach((t=>{let[i,o]=t;e.push(o)})):e.push(t.permission_data.after)}));const u=o().oE(e.sort(M().zK).map((e=>{if("user_permission"===e.type){const t=a({table:I().oo,id:e.user_id}),i=(0,E().c6)(r,t),o=K(r,e.role);return r.formatMessage(P.userNameWithRole,{userName:i,permissionLevel:o})}if("space_permission"===e.type){const o=W({intl:r,activity:i,getRecordValue:a,userTimeZone:t,pageVisitSource:s,experimentService:n,collectionFeatureGates:c}),l=K(r,e.role);return r.formatMessage(P.spaceNameWithRole,{spaceName:o,permissionLevel:l})}if("public_permission"===e.type){const t=K(r,e.role);return r.formatMessage(P.publicPermissionRoleLabel,{permissionLevel:t})}if("bot_permission"===e.type){const t=a({table:_().GP,id:e.bot_id}),i=(0,l().Hg)(t),o=K(r,e.role);return r.formatMessage(P.botNameWithRole,{botName:i,permissionLevel:o})}})));return r.formatList(u,{type:"conjunction",style:"narrow"})}}function Q(e){const{intl:t}=e;switch(e.blockValue.type){case c().xd.text:case c().xd.encryptedText:case c().xd.header:case c().xd.subHeader:case c().xd.subSubHeader:case c().xd.factory:case c().xd.equation:case c().xd.code:return z(e);case c().xd.toggle:return`â–¸ ${z(e)}`;case c().xd.bulletedList:return`â€¢ ${z(e)}`;case c().xd.numberedList:return`1. ${z(e)}`;case c().xd.quote:return`â€œ${z(e)}â€`;case c().xd.toDo:return(function(e){let{blockValue:t}=e;return p().wu(t.properties&&t.properties.checked)}(e)?"âœ“ ":"â–¢ ")+z(e);case c().xd.file:case c().xd.bookmark:return`ðŸ”— ${z(e)}`;case c().xd.embed:case c().xd.framer:case c().xd.whimsical:case c().xd.mixpanel:case c().xd.miro:case c().xd.abstract:case c().xd.sketch:case c().xd.excalidraw:case c().xd.replit:case c().xd.hex:case c().xd.deepnote:case c().xd.tweet:case c().xd.gist:case c().xd.maps:case c().xd.invision:case c().xd.video:case c().xd.audio:case c().xd.image:return t.formatMessage(P.imageInPushNotification,{imageEmoji:"ðŸ–¼"});case c().xd.drive:return function(e){const{blockValue:t}=e,i=(0,g().v)(h().Bj6.fromBlock(t));return i&&i.title?i.title:F(e)}(e);case c().xd.page:case c().xd.collectionView:case c().xd.collectionViewPage:return F(e);case c().xd.tableRow:return function(e){var t;const{blockValue:i,getRecordValue:o,userTimeZone:a,intl:s}=e,r=o({table:i.parent_table,id:i.parent_id,spaceId:i.space_id});if(!r||!i)return;const n=i.properties,c=(null===(t=r.format)||void 0===t?void 0:t.table_block_column_order)||[];return c&&n?c.map((e=>(0,k().r4)({textValue:n[e],getRecordModel:h().b4_.fromGetRecordValueFn(o),userTimeZone:a,intl:s}))).join(", "):void 0}(e)}}function X(e){const{getRecordValue:t,baseURL:i,userTimeZone:o,intl:a,collectionFeatureGates:s}=e,r=t({table:j().ev,id:e.blockId});if(r){if("page"===r.type){const n=(0,N().zN)({block:r,getRecordValue:t});if(n){const i=u().Dp(n),o=i[e.property],c=o?o.name:void 0,l=ee({property:e.property,schema:i,block:r,getRecordValue:t,userTimeZone:e.userTimeZone,baseURL:e.baseURL,intl:a,experimentService:e.experimentService,collectionFeatureGates:s})||a.formatMessage(P.emptyPropertyBody);return a.formatMessage(P.propertyNameAndValueNotificationBody,{propertyName:c,propertyValue:l})}return Q({intl:a,blockValue:r,getRecordValue:t,baseURL:i,userTimeZone:o})}return Q({intl:a,blockValue:r,getRecordValue:t,baseURL:i,userTimeZone:o})}}function ee(e){const{property:t,schema:i,getRecordValue:o,userTimeZone:a,baseURL:n,intl:c,experimentService:l,collectionFeatureGates:d}=e,g=i[t],N=h().Bj6.fromBlock(e.block);if(!N.getProperties()||!g)return;const y=N.getProperties()[t];if("formula"===g.type){const e=h().b4_.fromGetRecordValueFn(o),r=(0,b().primitiveFormulaValueFromPropertySchema)({schema:i,property:t,blockModel:N,getRecordModel:e,intl:c,userTimeZone:a,depth:0,resultCache:new Map,regExpCache:new Map,experimentService:l,collectionFeatureGates:d});return m().kC(r)?(0,f().ZF)({allowRelativeDates:!0,intl:c,value:r,userTimeZone:a}):"boolean"==typeof r?r?u().I1:u().oP:(0,s().Et)(r)?r.toString():r}if("person"===g.type)return c.formatList(p().e5({textValue:y,propertySchema:g,blockCreatorPointer:N.getCreatedByPointer()}).map((e=>{const t=o(e),i=(0,r().D3)({table:e.table,value:t});return(0,r().lR)(c,i)})),{type:"conjunction",style:"narrow"});if("created_by"===g.type){const e=N.getCreatedByPointer();if(!e)return c.formatMessage(P.unknownAuthorInPropertySchemaChange);const t=o(e),i=t&&(0,r().D3)({table:e.table,value:t});return i?(0,r().lR)(c,i):c.formatMessage(P.unknownAuthorInPropertySchemaChange)}return"created_time"===g.type?(0,f().W_)(N.getCreatedTime(),"short",c.locale,a):y?te({propertySchema:g,textValue:y,getRecordValue:o,userTimeZone:a,baseURL:n,intl:c,experimentService:l}):void 0}function te(e){const{propertySchema:t,textValue:i,getRecordValue:o,userTimeZone:s,baseURL:n,intl:c}=e;if("title"===t.type||"text"===t.type||"geo_point"===t.type)return(0,k().r4)({intl:c,textValue:i,getRecordModel:h().b4_.fromGetRecordValueFn(o),userTimeZone:s});if("select"===t.type){const e=t.options||[];return p().L3(i,e)}if("multi_select"===t.type){const e=t.options||[];return c.formatList(p().o2(i,e),{type:"conjunction",style:"narrow"})}if("checkbox"===t.type)return p().wu(i)?u().I1:u().oP;if("date"===t.type){const e=(0,d().b)(i);if(e)return(0,f().ZF)({allowRelativeDates:!0,intl:c,value:e,date_format:t.date_format,time_format:t.time_format,userTimeZone:s})}else{if("person"===t.type)return c.formatList(p().e5({textValue:i,propertySchema:t,blockCreatorPointer:void 0}).map((e=>{const t=o(e),i=(0,r().D3)({table:e.table,value:t});return(0,r().lR)(c,i)})),{type:"conjunction",style:"narrow"});if("relation"===t.type){const e=p().bG({relationValue:p().n(i),getRecordModel:h().b4_.fromGetRecordValueFn(o),propertySchema:t,includeNoAccess:!0});return c.formatList(e.map(o).map((e=>e?F({intl:c,blockValue:e,getRecordValue:o,baseURL:n,userTimeZone:s}):c.formatMessage(P.unknownRelationValueChange))),{type:"conjunction",style:"narrow"})}if("number"===t.type){const e=p().Me(i);if(void 0!==e)return e.toString()}else if("auto_increment_id"===t.type){const e=p().On(i);if(void 0!==e)return e.toString()}else{if("file"===t.type)return c.formatList(p().pJ(i).map((e=>e.name||e.url)),{type:"conjunction",style:"narrow"});if("url"===t.type||"phone_number"===t.type||"email"===t.type)return(0,T().k4p)(i);if("created_by"===t.type)return;if("created_time"===t.type)return;if("formula"===t.type)return;if("rollup"===t.type)return;if("last_edited_by"===t.type)return;if("last_edited_time"===t.type)return;if("last_visited_time"===t.type)return;if("button"===t.type)return;if("status"===t.type)return p().RZ(i,t);if("location"===t.type)return;if("verification"===t.type){const e=w().U1(i),t=e?w().B2(e):{type:"none"};if("none"===t.type)return c.formatMessage(w().nl.none);const a=o(t.actorPointer),n=(0,r().D3)({table:t.actorPointer.table,value:a}),l=(0,r().lR)(c,n);return"verified"===t.type&&t.isIndefinite?c.formatMessage(w().nl.verifiedIndefinitely,{actor:l}):c.formatMessage(w().nl.verifiedUntil,{actor:l,datetime:V().T2({dateTime:t.dateTimeRange.end,intl:c,userTimeZone:s,displayInUserTimezone:!1,alwaysIncludeTimezone:!0})})}(0,a().HB)(t)}}}function ie(e){if("page_icon"===e.formatProperty)return e.intl.formatMessage(P.blockFormatEditPageIconName)}function oe(e){const{formatProperty:t,block:i,getRecordValue:o,intl:a}=e;if("page_icon"===t){const e=h().Bj6.fromBlock(i).getRenderIcon({getRecordModel:h().b4_.fromGetRecordValueFn(o)});return e?(0,y().A)(e.icon)?e.icon:a.formatMessage(P.pageIconImagePlaceholder):a.formatMessage(P.emptyBlockEditedProperty)}}function ae(e){const t=h().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:i,permissionGroupId:o}=e;return t({table:S().n,id:(0,S().T1)({spaceId:i,spacePermissionGroupId:o}),spaceId:i})}function se(e,t){if(t){return[(0,y().A)(t.icon)?t.icon:void 0,t.name.length>0?t.name:e.formatMessage(P.untitledPermissionGroupName)].filter(Boolean).join(" ")}return e.formatMessage(P.defaultPermissionGroupName)}function re(e){const t=h().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:i,teamId:o}=e;return t({table:A().yK,id:o,spaceId:i})}function ne(e){switch(e){case"block-property-edited":case"reacted":case"commented":case"permission-group-mentioned":case"team-mentioned":case"reminder":case"user-invited":case"in-app-notification-automation-action-triggered":case"user-mentioned":case"app-builder-notification":return!0;case"access-requested":case"access-request-resolved":case"email-edited":case"private-content-transferred":case"team-membership-edited":case"verification-expired":case"export-completed":case"import-completed":case"no-conflicts-found":case"automation-typecheck-error-raised":case"external-integration-notification":case"block-edited":case"collection-edited":case"collection-page-layout-edited":case"collection-property-edited":case"collection-row-created":case"collection-row-deleted":case"collection-view-edited":case"page-deleted":case"page-locked":case"page-permanently-deleted":case"page-restored":case"page-unlocked":case"permissions-edited":case"trial-created":case"top-level-block-created":case"upgrade-request-created":case"top-level-block-deleted":return!1;default:return(0,a().ub)(e),!1}}},281434:(e,t,i)=>{i.r(t),i.d(t,{Notification:()=>_});i(725707),i(491955),i(500234),i(403517);var o=()=>i(486826),a=()=>i(975392),s=()=>i(76394),r=()=>i(809811),n=()=>i(129221),c=()=>i(950635),l=()=>i(756849),d=()=>i(590110),u=()=>i(689848),p=()=>i(103265),m=()=>i(1476),f=()=>i(769884),g=()=>i(231423),b=()=>i(632627),N=()=>i(243571),y=()=>i(289765),h=()=>i(890449),M=()=>i(759260),k=()=>i(409211),v=()=>i(455831),R=()=>i(882746),j=()=>i(34662);function _(e){var t;const{activity:i,getRecordValue:_,baseURL:x,userTimeZone:S,pageVisitSource:A,intl:I,useSimplifiedEmailSubjectForGrouping:T,isMobilePush:E,recipientUser:V,experimentService:w,collectionFeatureGates:P}=e,C=f().b4_.fromGetRecordValueFn(_),L=(0,g().Ln)({...e}),B=(0,g().bD)(L,I),Z=(0,g().dy)(L),F=(0,g().ds)({recipientUser:V,authors:L}),G=(0,g().$f)({...e,intl:I}),D=(0,g().Nn)({...e,intl:I}),q=(0,g().OM)({...e,intl:I}),W=(0,g().GK)({...e,intl:I}),O=(0,g().xt)({...e,intl:I});switch(i.type){case"top-level-block-created":return{subject:I.formatMessage(g().Ui.topLevelBlockCreated,{userName:B,targetName:G,spaceName:W})};case"top-level-block-deleted":return{subject:I.formatMessage(g().Ui.topLevelBlockDeleted,{userName:B,targetName:G,spaceName:W})};case"collection-row-created":return{subject:I.formatMessage(g().Ui.collectionRowCreated,{userName:B,targetName:G,collectionName:q})};case"collection-row-deleted":return{subject:I.formatMessage(g().Ui.collectionRowDeleted,{userName:B,targetName:G,collectionName:q})};case"block-edited":{let t;const o=i.getEdits();if(o.length){const i=o[0];if("block-changed"===i.type){const o=i.block_data.after.block_value,s=(0,p().zN)({block:o,getRecordValue:_});if("page"===o.type&&s){const o=i.block_schema||(0,R().RX)(I),s=l().PE({before:i.block_data.before.block_value,after:i.block_data.after.block_value,schema:o}).filter((e=>{const t=o[e];return t&&"formula"!==t.type})).map((t=>{const a=o[t],s=a?a.name:void 0,r=(0,g().Bu)({intl:I,property:t,schema:o,block:i.block_data.after.block_value,getRecordValue:_,userTimeZone:e.userTimeZone,baseURL:e.baseURL,experimentService:w,collectionFeatureGates:P})||I.formatMessage(g().Ui.emptyBlockEditedProperty);return I.formatMessage(g().Ui.propertyNameAndValueEdited,{propertyName:s,propertyValue:r})})),r=n().TW({before:i.block_data.before.block_value,after:i.block_data.after.block_value}),c=a().oE(r.map((e=>{const t=(0,g().$L)({formatProperty:e,intl:I}),o=(0,g().uj)({formatProperty:e,intl:I,block:i.block_data.after.block_value,getRecordValue:_});if(t&&o)return I.formatMessage(g().Ui.propertyNameAndValueEdited,{propertyName:t,propertyValue:o})})));t=I.formatList(s.concat(c),{type:"conjunction",style:"narrow"})}else t=(0,g().g8)({intl:I,blockValue:o,getRecordValue:_,baseURL:x,userTimeZone:S})}else if("block-created"===i.type){const e=i.block_data.block_value;t=(0,g().g8)({intl:I,blockValue:e,getRecordValue:_,baseURL:x,userTimeZone:S})}else if("block-deleted"===i.type){const e=i.block_data.block_value,o=(0,g().g8)({intl:I,blockValue:e,getRecordValue:_,baseURL:x,userTimeZone:S});t=I.formatMessage(g().Ui.blockDeletedEditBody,{renderedBlock:o})}}return{subject:T?U(G,I):I.formatMessage(g().Ui.blockEditedNotification,{userName:B,blockName:G}),body:t}}case"block-property-edited":const f={subject:T?U(G,I):I.formatMessage(g().Ui.blockPropertyEditedNotification,{userName:B,blockName:G}),body:void 0},K=i.getEdits();if(K.length){const t=K[0],i=Object.entries(t.property_updates).filter((e=>{var i;let[o,a]=e;const s=null===(i=t.filtered_block_schema)||void 0===i?void 0:i[o];return s&&!["formula","created_by","created_time"].includes(s.type)})).map((i=>{var o,a;let[s,r]=i;const n=null===(o=t.filtered_block_schema)||void 0===o?void 0:o[s],c=n?n.name:void 0,l=(0,g().sL)({intl:I,propertySchema:n,textValue:(null===(a=r.after)||void 0===a?void 0:a.value)??[],getRecordValue:_,userTimeZone:e.userTimeZone,baseURL:e.baseURL,experimentService:w})||I.formatMessage(g().Ui.emptyBlockEditedProperty);return I.formatMessage(g().Ui.propertyNameAndValueEdited,{propertyName:c,propertyValue:l})}));f.body=I.formatList(i,{type:"conjunction",style:"narrow"})}return E?{subject:I.formatMessage(g().Ui.mobileBlockPropertyEditedNotification,{userName:B}),subtitle:G,body:f.body,senderUserId:Z,senderProfilePhoto:F,conversationIdentifier:D}:f;case"permissions-edited":return{subject:I.formatMessage(g().Ui.userEditedPermissionsFor,{userName:B,targetName:G}),body:(0,g().fk)({intl:I,activity:i,getRecordValue:_,pageVisitSource:A,userTimeZone:e.userTimeZone,experimentService:w,collectionFeatureGates:P})};case"user-mentioned":{const t=(0,g().OQ)({intl:I,getRecordValue:_,baseURL:x,userTimeZone:e.userTimeZone,blockId:i.mentioned_block_id,property:i.mentioned_property,experimentService:w,collectionFeatureGates:P});return E?{subject:I.formatMessage(g().Ui.mobileUserMentionedIn,{userName:B}),subtitle:G,body:t,senderUserId:Z,senderProfilePhoto:F,conversationIdentifier:D}:{subject:T?U(G,I):I.formatMessage(g().Ui.userMentionedIn,{userName:B,targetName:G}),body:t}}case"commented":{let t,o,a;const s=V?i.getEdits().filter((e=>{var t;return!Boolean(null===(t=e.authors)||void 0===t?void 0:t.find((e=>e.id===V.id)))})):i.getEdits(),r=s[0];let n;if(r)if(o=r.comment_id,a=r.discussion_id,"comment-created"===r.type){const i=_({table:h().SN,id:r.comment_id,spaceId:r.space_id}),o=r.comment_data||i;if(o){var $;t=(0,b().r4)({intl:I,textValue:o.text,getRecordModel:C,userTimeZone:e.userTimeZone});const i=o.created_by_table&&o.created_by_id?null===($=C({table:o.created_by_table,id:o.created_by_id,spaceId:r.space_id}))||void 0===$?void 0:$.asActor:void 0;n=i?(0,g().bD)([i.asActor],I):B}}else if("comment-changed"===r.type)t=(0,b().r4)({intl:I,textValue:r.comment_data.after.text,getRecordModel:C,userTimeZone:e.userTimeZone});else if("suggestion-created"===r.type){const i=C({table:M().$Y,id:r.discussion_id,spaceId:r.space_id});var Y;if(i&&"suggestion"===i.getType())t=(0,b().r4)({intl:I,textValue:(0,d().l8)({discussionContextData:(null===(Y=i.getSuggestionRawContext())||void 0===Y||null===(Y=Y.snapshot)||void 0===Y?void 0:Y.data)??[],discussionType:"suggestion",discussionId:i.id,intl:I}),getRecordModel:C,userTimeZone:e.userTimeZone})}else{const i=_({table:h().SN,id:r.comment_id,spaceId:r.space_id}),o=r.comment_data||i;if(o){const i=(0,b().r4)({intl:I,textValue:o.text,getRecordModel:C,userTimeZone:e.userTimeZone});t=I.formatMessage(g().Ui.userDeletedComment,{commentText:i})}}return E?{subject:"suggestion-created"===(null==r?void 0:r.type)?I.formatMessage(g().Ui.mobileUserSuggestedSubject,{userName:n??B}):I.formatMessage(g().Ui.mobileUserCommentedSubject,{userName:n??B}),subtitle:G,body:t,senderUserId:Z,senderProfilePhoto:F,conversationIdentifier:D,categoryIdentifier:"comment_notification_category",commentId:o,discussionId:a}:{subject:T?U(G,I):"suggestion-created"===(null==r?void 0:r.type)?I.formatMessage(g().Ui.userSuggestedSubject,{userName:n??B,targetName:G}):I.formatMessage(g().Ui.userCommentedSubject,{userName:n??B,targetName:G}),body:t}}case"user-invited":const J=(0,r().ZL)(G),Q=J.length>0?J:I.formatMessage(g().Ui.defaultPageName);if(i.permission_group_id)return{subject:I.formatMessage(g().Ui.userAddedToSpace,{userName:B,workspaceName:Q})};const X=0===L.filter(c().L_).length;return E?X?{subject:I.formatMessage(g().Ui.mobileUserInvitedByBot),subtitle:G,conversationIdentifier:D}:{subject:I.formatMessage(g().Ui.mobileUserInvited,{userName:B}),subtitle:G,senderUserId:Z,senderProfilePhoto:F,conversationIdentifier:D}:{subject:X?I.formatMessage(g().Ui.userInvitedToSpaceByBot,{workspaceName:Q}):I.formatMessage(g().Ui.userInvitedToSpace,{userName:B,workspaceName:Q})};case"collection-edited":{let e,t=I.formatMessage(g().Ui.userEditedCollectionSubject,{userName:B,collectionName:G});const o=i.getEdits();if(o.length){const i=o[0];if("collection-changed"===i.type&&i.collection_data){const o=i.collection_data.after?i.collection_data.after.description:void 0,a=i.collection_data.before?i.collection_data.before.description:void 0;a&&!o?t=I.formatMessage(g().Ui.collectionDescriptionDeleted,{userName:B,collectionName:G}):!a&&o?(t=I.formatMessage(g().Ui.collectionDescriptionCreated,{userName:B,collectionName:G}),e=j().k4p(o)):a&&o&&j().dze(a,o)&&(e=j().k4p(o))}else if("collection-created"===i.type&&i.collection_data){const o=i.collection_data.description;o&&(t=I.formatMessage(g().Ui.userCreatedCollectionSubject,{userName:B,collectionName:G}),e=j().k4p(o))}}return{subject:t,body:e}}case"collection-view-edited":const ee=e.getRecordValue({table:y().Gy,id:i.collection_view_id,spaceId:i.space_id}),te=ee&&ee.name||I.formatMessage(g().Ui.untitledCollectionView);return{subject:I.formatMessage(g().Ui.collectionViewEditedSubject,{userName:B,collectionViewName:te,collectionName:G})};case"collection-property-edited":const ie=i.getEdits(),oe=ie.length&&ie[0],ae=oe&&("collection-property-changed"===oe.type?oe.collection_property_data.after.name:oe.collection_property_data.name)||I.formatMessage(g().Ui.collectionPropertyEditedUnknown);return i.collection_property_id,{subject:I.formatMessage(g().Ui.collectionPropertyEditedSubject,{userName:B,propertyType:ae,collectionName:G})};case"collection-page-layout-edited":let se;return{subject:I.formatMessage(g().Ui.userEditedCollectionPageLayoutSubject,{userName:B,collectionName:G}),body:se};case"reminder":return{subject:I.formatMessage(g().Ui.reminderSubject,{pageName:G}),body:(0,g().OQ)({getRecordValue:_,baseURL:x,userTimeZone:e.userTimeZone,blockId:i.reminder_block_id,property:i.reminder_property,intl:I,experimentService:w,collectionFeatureGates:P})};case"page-locked":case"page-unlocked":return{subject:"page-locked"===i.type?I.formatMessage(g().Ui.pageLockedActivity,{userName:B,pageName:G}):I.formatMessage(g().Ui.pageUnlockedActivity,{userName:B,pageName:G})};case"email-edited":return{subject:I.formatMessage(g().Ui.emailEditedActivity,{userName:B})};case"access-requested":{const e=C({id:i.getAccessRequestId(),table:N().O,spaceId:i.getSpaceId()});if(!e||e.isPageAccessRequest()||e.isTeamMembershipRequest())return null!=e&&e.isEditPageAccessRequest()?{subject:I.formatMessage(g().Ui.editAccessRequestedSubject,{userName:B,pageName:G})}:{subject:I.formatMessage(g().Ui.accessRequestedSubject,{userName:B,pageName:G})};if(e.isGuestInviteRequest())return{subject:I.formatMessage(g().Ui.guestInviteRequestedSubject,{userName:B,workspaceName:G})};if(e.isSpaceMembershipRequest())return{subject:I.formatMessage(g().Ui.membershipRequestedSubject,{userName:B,workspaceName:G})};(0,s().HB)(e);break}case"access-request-resolved":{const e=C({id:i.getAccessRequestId(),table:N().O,spaceId:i.getSpaceId()}),t=i.getEdits()[0].requested_for,o=t?C(t):void 0,a=null!=o&&o.isUser()?o.getEmail():I.formatMessage({defaultMessage:"a guest",id:"pushNotification.accessRequestResolved.invalidGuest"});return{subject:I.formatMessage("approved"===(null==e?void 0:e.status)?g().Ui.accessRequestResolvedApprovedSubject:g().Ui.accessRequestResolvedRejectedSubject,{guestEmail:a,pageName:G})}}case"page-deleted":return{subject:I.formatMessage(g().Ui.pageDeletedActivity,{userName:B})};case"page-restored":return{subject:I.formatMessage(g().Ui.pageRestoredActivity,{userName:B})};case"page-permanently-deleted":return{subject:I.formatMessage(g().Ui.pagePermanentlyDeletedActivity,{userName:B})};case"team-membership-edited":return{subject:I.formatMessage(g().Ui.userInvitedToTeam,{userName:B,teamName:G})};case"private-content-transferred":const re=i.getEdits(),ne=re.length>0?re[0].from_user_id:void 0,ce=(0,s().O9)(ne)?C({table:k().oo,id:ne}):void 0;return ce&&ce.getFullName(I)?{subject:I.formatMessage(g().Ui.privateContentTransferred,{author:B,pageName:G,fromUserName:ce.getFullName(I)})}:{subject:I.formatMessage({defaultMessage:"{author} transferred private content to you: {pageName}",id:"pushNotification.privateContentTransferred.noFromUserName"},{author:B,pageName:G})};case"permission-group-mentioned":const le=(0,g().$I)({spaceId:i.space_id,permissionGroupId:i.mentioned_group_id,getRecordValue:e.getRecordValue}),de=(0,g().kr)(I,le);return{subject:T?U(G,I):I.formatMessage(g().Ui.permissionGroupMentionedIn,{userName:B,targetName:G,groupName:de}),body:(0,g().OQ)({intl:I,getRecordValue:_,baseURL:x,userTimeZone:e.userTimeZone,blockId:i.navigable_block_id,property:i.mentioned_property,experimentService:w,collectionFeatureGates:P})};case"verification-expired":return{subject:I.formatMessage(g().Ui.verificationExpired,{pageName:G})};case"team-mentioned":const ue=(0,g().Uo)({spaceId:i.space_id,teamId:null===(t=i.getEdits())||void 0===t||null===(t=t[0])||void 0===t?void 0:t.mentioned_team_id,getRecordValue:e.getRecordValue}),pe=null==ue?void 0:ue.getName();return{subject:T?U(G,I):I.formatMessage(g().Ui.teamMentionedIn,{userName:B,targetName:G,teamName:pe}),body:(0,g().OQ)({intl:I,getRecordValue:_,baseURL:x,userTimeZone:e.userTimeZone,blockId:i.navigable_block_id,property:i.mentioned_property,experimentService:w,collectionFeatureGates:P})};case"import-completed":const me=i.getEdits()[0],fe="failed"===me.import_status?g().Ui.importFailed:g().Ui.importSuccessful;return{subject:I.formatMessage(fe,{importSource:me.import_source})};case"export-completed":return{subject:I.formatMessage(g().Ui.exportCompleted)};case"in-app-notification-automation-action-triggered":const ge=i.getEdits()[0];return{subject:I.formatMessage(g().Ui.inAppNotificationAutomationActionTriggered,{automationName:O}),body:(0,b().r4)({intl:I,textValue:ge.message.value,getRecordModel:C,userTimeZone:e.userTimeZone})};case"no-conflicts-found":return{subject:I.formatMessage(g().Ui.noConflictsFound),subtitle:G,senderUserId:m().px.id,senderProfilePhoto:m().px.profile_photo};case"automation-typecheck-error-raised":return{subject:I.formatMessage(g().Ui.automationTypecheckErrorRaisedSubject,{automationName:O}),body:I.formatMessage(g().Ui.automationTypecheckErrorRaisedBody)};case"reacted":return{subject:I.formatMessage(g().Ui.reactionCreated,{userName:B,targetName:G})};case"upgrade-request-created":return{subject:I.formatMessage(g().Ui.upgradeRequestCreated,{userName:B})};case"app-builder-notification":const be=i.getEdits()[0];return{subject:I.formatMessage("workflow-error"===be.app_builder_notification_type?g().Ui.appBuilderWorkflowError:g().Ui.appBuilderWorkflowAction)};case"external-integration-notification":const Ne=i.getEdits()[0];return"jira-sync-token-expiry"===Ne.external_integration_notification_type?{subject:I.formatMessage(g().Ui.externalIntegrationNotificationJiraSyncTokenExpiryError,{site:Ne.identifier})}:{subject:I.formatMessage(g().Ui.externalIntegrationNotificationDefault)};case"trial-created":{var H,z;let e,t,a,s;const r=i.getEdits();if(r.length){const i=r[0],{trial_data:n}=i;t=o().c9.fromMillis(n.start_time),a=o().c9.fromMillis(n.end_time),s=n.product,e=I.formatMessage(g().Ui.trialCreatedBody,{endDate:`${a.toFormat("MMM")} ${(0,u().o4)(a.locale.substring(0,2),a.day,"c")}`,product:(0,v().u2)({product:s,intl:I})})}const n=null!==(H=t)&&void 0!==H&&H.isValid&&null!==(z=a)&&void 0!==z&&z.isValid?a.diff(t,"day").days:30;return{subject:I.formatMessage(g().Ui.trialCreated,{userName:B,days:n,product:s}),body:e}}}}function U(e,t){return t.formatMessage({defaultMessage:"New activity in {pageTitle}",id:"emailActivity.pageActivity.simplifiedSubjectLine"},{pageTitle:e})}},846796:(e,t,i)=>{i.r(t),i.d(t,{default:()=>k});i(362833);var o=i(242343),a=()=>i(803290),s=()=>i(34662),r=()=>i(653998),n=()=>i(234151),c=()=>i(809811),l=()=>i(437071),d=()=>i(384221),u=()=>i(927685),p=()=>i(621641),m=()=>i(729522),f=()=>i(5413),g=()=>i(205670),b=()=>i(331516),N=()=>i(535906),y=()=>i(858023),h=()=>i(88271),M=i(163643);const k=function(){(0,o.useEffect)((()=>{var e,t;return null===(e=l().electronApi)||void 0===e||null===(e=e.contextMenu)||void 0===e||null===(t=e.addListener)||void 0===t||t.call(e,j),()=>{var e,t;null===(e=l().electronApi)||void 0===e||null===(e=e.contextMenu)||void 0===e||null===(t=e.removeListener)||void 0===t||t.call(e,j)}}),[]);const e=(0,i(237385).v3)(),t=(0,o.useRef)(document.activeElement),s=(0,o.useRef)(m().get());let d=null,p=null;(t.current instanceof HTMLInputElement||t.current instanceof HTMLTextAreaElement)&&(d=t.current.selectionStart,p=t.current.selectionEnd);const{menuInfo:g,open:k}=(0,a().O$)(f().A),U=(0,a().K8)((()=>{if(!g)return[];const o=function(e,t){const i=[],o=function(e,t){const i="SpellCheckStore"in t&&t.SpellCheckStore,o=[];if(R(e)&&i&&i.isEnabled()){const t=i.getCorrections(e);for(const e of t)o.push({key:e,action:()=>{l().electronApi&&l().electronApi.replaceMisspelling&&l().electronApi.replaceMisspelling(e)},render:t=>(0,M.jsx)(N().A,{...t,title:e})})}return o}(e,t);if(o.length>0){const e=i.length>0;i.push({key:"spellingCorrectionItems",items:o,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}const a=function(e,t){const i="SpellCheckStore"in t&&t.SpellCheckStore,o=[];R(e)&&i&&i.isEnabled()&&o.push({key:"learn-spelling",action:()=>{i.addToDictionary(e.misspelledWord)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Add to dictionary",id:"desktop.spellcheckMenuItem.addToDictionary.title"})})});R(e)&&i&&i.isEnabled()&&o.push({key:"disable",action:()=>{i.setEnabled(!1)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Disable spell check",id:"desktop.spellcheckMenuItem.disableSpellcheck.title"})})});return o}(e,t);if(a.length>0){const e=i.length>0;i.push({key:"disableSpellCheckItems",items:a,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}const s=function(e){const t=[];e.selectionText&&e.selectionText.length>0&&t.push({key:"google",action:()=>{if(l().electronApi){const t=`https://www.google.com/search?q=${encodeURIComponent(e.selectionText.trim())}`;l().electronApi.openExternalUrl(t)}},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Search with Google",id:"desktop.searchMenuItem.searchWithGoogle.title"})})});return t}(e);if(s.length>0){const e=i.length>0;i.push({key:"searchItems",items:s,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}const d=function(e){const t=[];if(!e.linkURL||0===e.linkURL.length)return t;const i=n().it({url:e.linkURL,domainBaseUrl:u().A.domainBaseUrl,protocol:u().A.protocol});e.linkURL.startsWith("mailto:")?t.push({key:"copy-email",action:()=>{var t;null!==(t=l().electronApi)&&void 0!==t&&t.copyText&&l().electronApi.copyText(e.linkText)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Copy email address",id:"desktop.rightClickMenu.copyEmailAddress"})})}):t.push({key:"copy-link",action:()=>{var e;null!==(e=l().electronApi)&&void 0!==e&&e.copyText&&l().electronApi.copyText(i)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Copy link",id:"desktop.rightClickMenu.copyLink"})})});t.push({key:"open-link",action:()=>{l().openExternalUrl(i)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Open link in browser",id:"desktop.rightClickMenu.openLinkInBrowser"})})});const o=(a=i,(0,c().$_)(a)===u().A.domainBaseUrl);var a;o&&t.push({key:"open-link-new-tab",action:()=>{l().openInNewTab({url:i,position:"after-children"})},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Open link in new tab",id:"desktop.rightClickMenu.openLinkInNewTab"})})});o&&t.push({key:"open-link-new-window",action:()=>{l().openInNewWindow(i)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Open link in new window",id:"desktop.rightClickMenu.openLinkInNewWindow"})})});return t}(e);if(d.length>0){const e=i.length>0;i.push({key:"linkMenuItems",items:d,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}const p=function(e){const t=[];e.hasImageContents&&e.srcURL&&e.srcURL.length>0&&(t.push({key:"copy-image",action:()=>{l().electronApi&&l().electronApi.copyImage&&l().electronApi.copyImage(e.srcURL)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Copy image",id:"desktop.rightClickMenu.copyImage"})})}),t.push({key:"copy-image-address",action:()=>{l().electronApi&&l().electronApi.copyText&&l().electronApi.copyText(n().it({url:e.srcURL,domainBaseUrl:u().A.domainBaseUrl,protocol:u().A.protocol}))},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Copy image address",id:"desktop.rightClickMenu.copyImageAddress"})})}));return t}(e);if(p.length>0){const e=i.length>0;i.push({key:"imageMenuItems",items:p,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}const m=function(e){var t;const i=[],o=(null===(t=e.selectionText)||void 0===t?void 0:t.length)??0;if(!v(e)&&0===o)return i;e.editFlags.canCut&&i.push({key:"cut",action:()=>{l().electronApi&&l().electronApi.cut&&l().electronApi.cut()},render:e=>(0,M.jsx)(b().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Cut",id:"desktop.textEditingMenuItem.cutAction.title"}),shortcut:"cut"})});e.editFlags.canCopy&&i.push({key:"copy",action:()=>{l().electronApi&&l().electronApi.copy&&l().electronApi.copy()},render:e=>(0,M.jsx)(b().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Copy",id:"desktop.textEditingMenuItem.copyAction.title"}),shortcut:"copy"})});e.editFlags.canPaste&&i.push({key:"paste",action:()=>{l().electronApi&&l().electronApi.paste&&l().electronApi.paste()},render:e=>(0,M.jsx)(b().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Paste",id:"desktop.textEditingMenuItem.pasteAction.title"}),shortcut:"paste"})});return i}(e);if(m.length>0){const e=i.length>0;i.push({key:"textEditingItems",items:m,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}const f=function(e,t){const i="SpellCheckStore"in t&&t.SpellCheckStore,o=[];v(e)&&i&&!i.isEnabled()&&o.push({key:"enable",action:()=>{i.setEnabled(!0)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Enable spell check",id:"desktop.spellcheckMenuItem.enableSpellcheck.title"})})});return o}(e,t);if(f.length>0){const e=i.length>0;i.push({key:"enableSpellCheckItems",items:f,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}return i}(g,e);for(const a of o)for(const o of a.items){const a=o.action;o.action=o=>{t.current instanceof HTMLElement&&t.current.focus(),t.current instanceof HTMLInputElement||t.current instanceof HTMLTextAreaElement?(t.current.selectionStart=d,t.current.selectionEnd=p):s.current&&s.current.startOffset!==s.current.endOffset&&m().set(s.current,e.device),i(752597).default.afterNextFlush((()=>{a(o)}))}}return o}),[t,e,g,p,d]),{x,y:S}=function(e){const t=l().getCurrentZoom();return{x:e?e.x/t:0,y:e?e.y/t:0}}(g),A=new DOMRect(x,S,0,0);return(0,o.useEffect)((()=>{k&&(t.current=document.activeElement)}),[k]),(0,M.jsx)(i(443252).Ay,{open:k&&U.length>0,popupType:i(466321).n.Popup,originRect:A,render:()=>(0,M.jsx)(i(441292).A,{debugName:"ElectronContextMenu",capture:!0,allowEsc:!0,children:(0,M.jsx)(i(935091).A,{menuType:i(640979).gu.Popup,children:(0,M.jsx)(y().Ay,{type:y().Oh.Vertical,sections:U,initialFocus:void 0,onAccept:_,suppressFocusRing_PLEASE_USE_SPARINGLY:!0})})}),onDismiss:_,trapFocus:!0})};function v(e){return e.isEditable||"none"!==(null==e?void 0:e.formControlType)}function R(e){return v(e)&&e.misspelledWord&&e.misspelledWord.length>0}function j(e,t){if(t.misspelledWord){const e=g().default.state,i="editing"===e.mode&&(0,p().H7)(e.multiSelection);if(i&&i.selection.startIndex===i.selection.endIndex){const e=s().JWU({textValue:i.store.getValue()||[],substring:t.misspelledWord,ignoreCase:!1}),o=i.selection.startIndex,a=s().zBr(e,o);a&&d().setSelection({store:i.store,selection:a})}}f().A.setState({open:!0,menuInfo:t})}function _(){f().A.setState({...f().A.state,open:!1})}}}]);