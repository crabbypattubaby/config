"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[89693],{130081:(e,o,t)=>{t.d(o,{UQ:()=>y,gL:()=>m});t(610931),t(725707),t(500234),t(771702);var r=()=>t(810111),i=()=>t(769884),p=()=>t(33715),n=()=>t(220865),a=()=>t(846287),l=()=>t(996151),s=()=>t(946854),d=()=>t(293665),c=()=>t(927999),_=()=>t(84543);function y(e){let{environment:o,transaction:t,layoutStore:r,position:l,updatedModule:s,sessionId:d}=e;const c=p().Zm[l.area],y=r.getRawModules();if("form_conditional_modules"===c){const e=null==y?void 0:y[c];if(!(null==e?void 0:e[l.moduleId]))throw new Error("Unable to find module being updated.");return void _().createAndCommitOrAppend({environment:o,transaction:t,canUndo:!0,perform(e){_().applyOperation({transaction:e,store:r,operation:i().N4X.updateModuleInArea({pointer:r.pointer,area:c,module:(0,n().Lv)(s)})})},userAction:"BuilderLayoutModules.updateModule"})}if(!y)throw new Error("Unable to find modules");const u=(0,a().LC)(y,(e=>e.id===l.moduleId));if(!u||u.area!==c)throw new Error("Unable to find module being updated.");_().createAndCommitOrAppend({environment:o,transaction:t,canUndo:!0,perform(e){_().applyOperation({transaction:e,store:r,operation:i().N4X.updateModuleInArea({pointer:r.pointer,module:(0,n().Lv)(s),..."views_main_tab_modules"===u.area?{area:u.area,viewId:u.viewId}:{area:u.area}})})},userAction:"BuilderLayoutModules.updateModule"})}function u(e){var o,t,r;let{collectionStore:i,layoutStore:p}=e;const n=new Map,a=i.getFormat(),l=[...null===(o=p.getModules())||void 0===o?void 0:o.page_main,...null===(t=p.getModules())||void 0===t?void 0:t.page_details],d=new Map;null===(r=a.property_visibility)||void 0===r||r.forEach((e=>{d.set(e.property,e)})),l.forEach((e=>{if(!(0,s()._Q)(e))return(0,s().gx)(e)?(n.set(e.propertyId,{property:e.propertyId}),void d.set(e.propertyId,{property:e.propertyId,visibility:"show"})):void 0;e.propertyIds.forEach((e=>{n.set(e,{property:e}),d.set(e,{property:e,visibility:"show"})}))}));const c=i.getNormalizedPropertyGroups();var _;c?c.forEach((e=>{var o;null===(o=e.propertyIds)||void 0===o||o.forEach((e=>{n.has(e)||n.set(e,{property:e})}))})):null===(_=a.collection_page_properties)||void 0===_||_.forEach((e=>{n.has(e.property)||n.set(e.property,e)}));return{propertiesFormat:Array.from(n.values()),propertyVisibility:Array.from(d.values())}}function m(e){let{environment:o,transaction:t,collectionStore:p,layoutStore:n}=e;const{propertiesFormat:a,propertyVisibility:y}=u({collectionStore:p,layoutStore:n});_().createAndCommitOrAppend({environment:o,transaction:t,canUndo:!0,perform(e){const o=n.getBlockChildrenPointers(),t=n.getFormat(),u=n.firstModuleOfType("viewsMain");u&&(0,s().y6)(u)&&o.find((e=>d().L3.isEqual(e,u.collection_view_block_pointer)))&&_().applyOperation({transaction:e,store:n,operation:i().N4X.removeBlockChild(n.pointer,u.collection_view_block_pointer.id)});const m=null==t?void 0:t.previousViewsMainCollectionViewBlockPointer,f=m&&o.find((e=>d().L3.isEqual(e,m)));f&&_().applyOperation({transaction:e,store:n,operation:i().N4X.removeBlockChild(n.pointer,f.id)}),_().applyOperation({transaction:e,store:n,operation:i().N4X.setModulesByAreas(n.pointer,(0,l().K5)())}),_().applyOperation({transaction:e,store:n,operation:i().N4X.deleteFormat(n.pointer)});const v=p.getFormat(),{page_section_visibility:h}=v;c().zA({stores:[p],update:{property_groups:void 0,collection_page_properties:a,property_visibility:y,...h?{page_section_visibility:r().Zi}:void 0},transaction:e})},userAction:"BuilderLayoutModules.resetLayoutToDefault"})}},201147:(e,o,t)=>{t.d(o,{Fe:()=>p,wm:()=>n});const r={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,relationsGroup:!0,formSubmit:!0,formQuestion:!0,formTitle:!0,placeholder:!0,transcript:!0,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,views:!0,viewsMain:!1,recentActivity:!1,collaborators:!1,teamspaces:!1},i={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,formSubmit:!1,formQuestion:!1,formTitle:!1,placeholder:!1,transcript:!1,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,relationsGroup:!0,editor:!1,views:!1,viewsMain:!1,recentActivity:!1,collaborators:!1,teamspaces:!1};function p(e){return r[e.type]}function n(e){return i[e.type]}},477267:(e,o,t)=>{t.r(o),t.d(o,{deleteViewsModuleDependencies:()=>n});var r=()=>t(496580),i=()=>t(795394),p=()=>t(413871);function n(e){const{layoutStore:o,viewsModule:t,transaction:n}=e,a=(0,r().o9)(p().Bv.createChildStore(o,t.collection_view_block_pointer));i().zz({childStore:a,parentStore:o,transaction:n})}},933871:(e,o,t)=>{t.d(o,{U:()=>_});t(610931);var r=()=>t(543396),i=()=>t(827875),p=()=>t(33715),n=()=>t(846287),a=()=>t(201147),l=()=>t(946854),s=()=>t(84543),d=()=>t(272690),c=()=>t(477267);function _(e){let{environment:o,transaction:t,layoutStore:_,position:y,sessionId:u,beforePerformDeleteModule:m}=e;const f=_.getModules();if(!f)throw new Error("[deleteModuleAtPosition] modules by area not found for layout store");const v=(0,n().EX)(f,(e=>e.id===y.moduleId)),h=(0,r().Cg)({moduleId:null==v?void 0:v.module.id,modulesByArea:_.getModules()}).length;if(!v)return;const{module:b,position:g}=v;if(!(0,a().Fe)(b))throw new Error("[deleteModuleAtPosition] module to delete is not removeable");var w;(s().createAndCommitOrAppend({environment:o,transaction:t,canUndo:!0,perform(e){!function(e){const{transaction:o,layoutStore:t,moduleLocation:r,moduleToDelete:n,beforePerformDeleteModule:a}=e;a&&a(o);(0,l().V6)(n)&&(0,c().deleteViewsModuleDependencies)({layoutStore:t,viewsModule:n,transaction:o});if("form_conditional_modules"===r.area){const e=i().N4.removeChildModule({pointer:t.pointer,modulesByArea:t.getModules(),module:n});for(const r of e)s().applyOperation({transaction:o,store:t,operation:r})}else{const e="views_main_tab_modules"===r.area?{area:r.area,viewId:r.viewId}:{area:p().Zm[r.area]};s().applyOperation({transaction:o,store:t,operation:i().N4.deleteModuleInArea({...e,pointer:t.pointer,moduleId:n.id})})}}({environment:o,transaction:e,layoutStore:_,moduleLocation:g,moduleToDelete:b,beforePerformDeleteModule:m})},userAction:"pageLayout.deleteActions.deleteModuleAtPosition"}),u)&&d().PS({environment:o,module:b,sessionId:u,collectionId:null===(w=_.getCollectionModel())||void 0===w?void 0:w.id,layoutId:_.id,context:(0,p().We)(y.area),area:y.area,depth:h})}},984826:(e,o,t)=>{t.d(o,{I:()=>n,_:()=>p});const r={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,recentActivity:!1,collaborators:!1,teamspaces:!1},i={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0,recentActivity:!1,collaborators:!1,teamspaces:!1};function p(e){return r[e.type]}function n(e){return i[e.type]}},996151:(e,o,t)=>{t.d(o,{K5:()=>_,Vp:()=>d,_u:()=>s,oP:()=>y,wC:()=>l,xN:()=>c});t(725707),t(491955),t(403517);var r=()=>t(728373),i=()=>t(984826),p=()=>t(946854),n=()=>t(220865);const a={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},l={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},s={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyLabels:"hide",propertyIds:[]},{id:"editor",type:"editor"},{id:"discussions",type:"discussions"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},d={page_main:[],page_details:[],form_layout_schema:[],person_profile_page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"recent_activity",type:"recentActivity"}],person_profile_page_details:[{id:"collaborators",type:"collaborators"},{id:"teamspaces",type:"teamspaces"}]};function c(e){return(0,n().jr)({modulesByArea:a,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function _(){return{page_layout_schema:(0,n().ke)(a.page_main).map((e=>{if(!(0,p().cn)(e))return(0,i().I)(e)?{...e,id:(0,r().Ay)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,n().ke)(a.page_details).map((e=>{if(!(0,p().cn)(e))return(0,i().I)(e)?{...e,id:(0,r().Ay)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0,person_profile_page_main:void 0,person_profile_page_details:void 0}}function y(e,o){const t=void 0===o?[{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:e},{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:o}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,person_profile_page_main:void 0,person_profile_page_details:void 0,form_layout_schema:[{id:(0,r().Ay)(),type:"cover"},{id:(0,r().Ay)(),type:"formTitle"},...t,{id:(0,r().Ay)(),type:"formSubmit"}]}}}}]);