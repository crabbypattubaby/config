"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[3476],{124806:(e,t,i)=>{i.d(t,{default:()=>ee});var n=i(242343),r=()=>i(237385),s=()=>i(803290),o=()=>i(174114),a=()=>i(31448),l=()=>i(520969),c=()=>i(485966),d=(i(725707),i(491955),i(403517),()=>i(653998)),u=()=>i(437071),h=()=>i(378219),x=()=>i(92451),g=()=>i(904697),m=()=>i(622286),v=()=>i(413871),p=()=>i(126451),f=()=>i(209684),b=()=>i(273520),j=()=>i(935091),M=()=>i(858023),y=()=>i(640979),w=()=>i(878056),k=i(163643);const S=function(e,t){return[{key:"results",render:e=>(0,k.jsx)(i(88271).A,{...e}),items:t.map(((t,n)=>({key:t.id,render:e=>(0,k.jsx)(i(701513).A,{...e,isSubpage:0!==n,store:t,hidePath:!0}),action:n=>{let{event:r}=n;const s=i(302376).Vr(r);t instanceof v().Bv&&i(191756).uK({environment:e,store:t,openInNew:s,visitType:i(216143).ig.Link,pageVisitSource:i(712437).y8.Breadcrumb})}})))}]};const A=function(e){const{isMobile:t,stores:n}=e,s=(0,r().v3)(),o={display:"flex",alignItems:"center",flexShrink:0};return(0,k.jsx)(b().Ay,{popupType:t?b().z7.SlideUp:b().z7.Popup,renderOrigin:e=>t?(0,k.jsxs)(p().A,{style:{...o},mobileFeedback:!0,...e,children:[(0,k.jsx)(w().f,{}),(0,k.jsx)("div",{style:{marginLeft:8,marginRight:8},children:"..."}),(0,k.jsx)(w().f,{})]}):(0,k.jsxs)("div",{style:o,children:[(0,k.jsx)(f().p,{size:"sm",...e,children:"..."}),(0,k.jsx)(w().f,{})]}),render:e=>{let r;return r=t?{menuType:y().gu.Modal,title:(0,k.jsx)(d().sA,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:(0,k.jsx)(i(743668).DoneMenuText,{}),onClickRight:e.close}:{menuType:y().gu.Popup,width:240},(0,k.jsx)(j().A,{...r,children:(0,k.jsx)(M().Ay,{type:M().Oh.Vertical,onAccept:e.close,initialFocus:void 0,sections:S(s,n)})})}})};var W=()=>i(757172),C=()=>i(802370);function P(e){const{ancestorMaxWidth:t,showDivider:i,store:n}=e;return n instanceof v().h4?(0,k.jsx)(C().A,{store:n,showDivider:i,maxWidth:t}):(0,k.jsx)(W().A,{store:n,showDivider:i,maxWidth:t})}function D(e){const{ancestorMaxWidth:t,isMobile:i,homeStore:o,store:a,maxAncestorCount:c}=e,p=(0,r().v3)(),f=(0,d().tz)(),b=(0,m().X)("team_feed_as_any_other_db"),[j,M]=(0,s().K8)((()=>{const e=h().fU(a,b);e.reverse();return[a.isNavigableBlock()?e.slice(0,-1):[...e],e]}),[a,b],{useDeepEqual:!0}),y=(0,s().K8)((()=>j.map((e=>(0,x().Qe)(e,f,p,!0)||(0,x().gG)(e,f)||""))),[p,f,j]);(0,n.useEffect)((()=>(u().setTabBreadcrumbs(y),()=>{u().setTabBreadcrumbs(void 0)})),[y]);const w=(0,s().K8)((()=>(0,l().Nh)(a.id)),[a]),S=(0,s().K8)((()=>(0,g().getActiveTeamCount)()>0),[]);if(w&&void 0!==o)return(0,k.jsx)(P,{ancestorMaxWidth:t,showDivider:j.length>0,store:o},o.id);if(j.length>c){const[e,n,r]=[j[0],j.slice(1,j.length-c+1),j.slice(j.length-c+1)];if(S)return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(P,{ancestorMaxWidth:t,showDivider:!i,store:e},e.id),(0,k.jsx)(A,{isMobile:i,stores:i?M:n},"pages-popup"),r.map((e=>e instanceof v().h4?(0,k.jsx)(C().A,{store:e,showDivider:!0,maxWidth:t},e.id):(0,k.jsx)(W().A,{store:e,showDivider:!0,maxWidth:t},e.id)))]});{const e=j.filter((e=>e instanceof v().Bv)),n=j.filter((e=>e instanceof v().Bv));return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(W().A,{store:e[0],showDivider:!i,maxWidth:t},e[0].id),(0,k.jsx)(A,{isMobile:i,stores:i?n:e.slice(1,e.length-c+1)},"pages-popup"),e.slice(e.length-c+1).map((e=>(0,k.jsx)(W().A,{store:e,showDivider:!0,maxWidth:t},e.id)))]})}}return(0,k.jsx)(k.Fragment,{children:j.map((e=>(0,k.jsx)(P,{ancestorMaxWidth:t,showDivider:!0,store:e},`${e.table}-${e.id}`)))})}var B=()=>i(137476);var _=()=>i(347549),R=()=>i(400885),I=()=>i(392608),K=()=>i(73876),T=()=>i(96297),N=()=>i(141122);const z=function(e){const{ancestorMaxWidth:t,ignoreMaxLength:n,showDivider:r,store:s}=e,a=(0,o().IS)((()=>({wrapper:{display:"flex",alignItems:"center",flexShrink:1,marginLeft:6,minWidth:0,maxWidth:n?void 0:"100%"}})),[n]);return(0,k.jsxs)("div",{style:a.wrapper,children:[(0,k.jsx)(i(563036).A,{store:s,maxWidth:t,ignoreMaxLength:n}),r&&(0,k.jsx)(w().f,{})]})};function L(e,t,i,n){return(0,s().K8)((()=>{const r=n.canEdit(),s=n.isNonEditableState(),o=n.getCollectionStore(),a=null==o?void 0:o.isSyncedCollection(),c=n.isExternalObjectInstancePageBlockStore(),d=(0,R().fc)(n);return(0,l().Nh)(n.id)||t||(0,I().w6)(e)||N().default.isCenterPeekOpen()||!i||!r||s||c||a||d}),[e,t,i,n])}function O(e,t,i,r){const s=L(e,t,i,r);return(0,n.useCallback)((()=>{if(s)return;const t=N().default.isCenterPeekOpen()?K().A.PeekViewScroller:K().A.PageScroller;if(t){const i=t.getNode();if(i&&!T().Np(i))return T().VG({element:i,environment:e,options:{top:0,behavior:"smooth"}}),void function(e){B().vd(e,"click_breadcrumb_current_page_scroll_to_top")}(e)}const n=i.current;if(!n)return;if(!(n instanceof Element))return;const o=n.getBoundingClientRect();_().U({blockStore:r,originRect:o}),function(e){B().vd(e,"open_breadcrumb_current_page_menu")}(e)}),[s,e,i,r])}function U(e,t){const{currentPageMaxWidth:n,isMobile:o,currentPageRef:a,store:l}=e,c=(0,r().v3)(),d=L(c,o,a,l),u=(0,s().K8)((()=>l.isEmptyPage()),[l]),h=(0,s().K8)((()=>l.getIcon()),[l]),x=o?24:20,g=O(c,o,a,l);return(0,k.jsxs)(f().p,{shouldShrink:!0,onClick:g,size:"sm",ref:t,disabled:d,children:[Boolean(h)&&(0,k.jsx)(i(28210).B,{disabled:!0,icon:h,isEmptyPage:u,size:x,style:{marginRight:6},largeIcon:!0}),(0,k.jsx)(i(709237).A,{store:l,style:{maxWidth:n},enableHover:!0})]})}const F=(0,n.forwardRef)(U);function E(e){const{ancestorMaxWidth:t,isMobile:i,currentPageRef:n,store:o}=e,a=(0,r().v3)(),{mobileNative:c}=a,d=(0,s().K8)((()=>(0,l().lU)(o)),[o]),u=O(a,i,n,o),x=(0,s().K8)((()=>{const e=h().fU(o);return 0===(o.isNavigableBlock()?e.slice(1):[...e]).length}),[o]);return d?null:i?(0,k.jsx)(f().p,{shouldShrink:!0,onClick:u,size:"sm",style:null!=c&&c.supportsNativeHomeOnPhone()?{paddingLeft:0}:void 0,children:(0,k.jsx)(z,{store:o,showDivider:!1,ignoreMaxLength:x,ancestorMaxWidth:t})}):(0,k.jsx)(f().p,{shouldShrink:!0,onClick:u,size:"sm",style:{fontSize:"inherit"},children:(0,k.jsx)(z,{store:o,showDivider:!1,ancestorMaxWidth:t})})}function V(e){const{ancestorMaxWidth:t,store:i}=e,o=(0,r().v3)(),a={display:"flex",alignItems:"center",flexShrink:0},l=(0,s().K8)((()=>{const e=h().fU(i);return e.reverse(),e}),[i]),c=(0,n.useCallback)((()=>{(0,B().u4)({environment:o,event:{eventName:"topbar_breadcrumb_menu_click",eventProperties:{has_parent_pages:l.length>1}}})}),[o,l]);return(0,k.jsx)(b().Ay,{popupType:b().z7.BottomSheet,bottomSheetInitialState:"half",onClick:c,renderOrigin:e=>(0,k.jsx)(p().A,{style:{...a,maxWidth:"100%"},mobileFeedback:!0,...e,children:(0,k.jsx)(z,{store:i,showDivider:!1,ignoreMaxLength:!0,ancestorMaxWidth:t})}),render:e=>(0,k.jsx)(j().A,{menuType:y().gu.Modal,title:(0,k.jsx)(d().sA,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),children:(0,k.jsx)(M().Ay,{type:M().Oh.Vertical,onAccept:e.close,initialFocus:void 0,sections:S(o,l)})})},"pages-popup")}i(107652),i(113085);var H=i(535370),G=()=>i(267521),$=()=>i(127436),J=()=>i(446588),q=()=>i(563546),Q=()=>i(10895),X=()=>i(103151),Y=()=>i(907721);function Z(e){const{store:t}=e,i=(0,r().v3)(),a=(0,s().K8)((()=>{const{currentSpaceViewStore:e}=c().default.state,n=(null==e?void 0:e.getPrivatePages(i))??[];return null==n?void 0:n.some((e=>e.id===t.id))}),[i,t]),l=(0,s().K8)((()=>{const e=i.currentUser.id;return t.getPermissionItems().every((t=>(0,J().B2)(t)&&e===t.user_id))}),[i,t]),u=(0,o().DP)(),h=(0,n.useRef)(null),x=(0,n.useCallback)((()=>{if(!h)return;const e=H.findDOMNode(h.current);if(!(e&&e instanceof Element))return;const n=e.getBoundingClientRect(),r=new DOMRect(n.x,n.y,n.width,n.height+5);q().D3(i),Q().ho({environment:i,blocks:[t],originRect:r,moveToContext:"topbar_breadcrumb"})}),[i,h,t]);return a&&l?(0,k.jsx)(X().A,{placement:Y().W.Right,renderTooltip:e=>(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{children:(0,k.jsx)(d().sA,{defaultMessage:"Only you have access",id:"breadcrumb.moveTo.hasPermission.title"})}),(0,k.jsx)("div",{style:{color:u.text.contrastSecondary},children:(0,k.jsx)(d().sA,{defaultMessage:"Click to move",id:"breadcrumb.moveTo.hasPermission.subtitle"})})]}),render:e=>(0,k.jsxs)(f().p,{size:"sm",disabled:!1,onClick:x,ref:h,...e,children:[(0,$().i)({width:16,fill:u.lightIconColor}),(0,k.jsx)("span",{style:{color:u.text.tertiary,marginLeft:4,marginRight:5},children:(0,k.jsx)(d().sA,{defaultMessage:"Private",id:"breadcrumb.moveTo.privatePages"})}),(0,G().arrowChevronSingleDownFillIcon)({width:11,fill:u.lightIconColor})]})}):null}const ee=function(e){const{ancestorMaxWidth:t,maxAncestorCount:d,currentPageMaxWidth:u,isMobile:h,showCurrentPageControls:x,store:g,style:m}=e,v=(0,n.useRef)(null),p=(0,r().v3)(),f=(0,o().IS)((()=>({container:{display:"flex",alignItems:"center",lineHeight:1.2,fontSize:h?a().J.UIRegular.mobile:a().J.UIRegular.desktop,...m},enforceMaxLength:{maxWidth:"100%"}})),[h,m]),b=(0,s().K8)((()=>{var e;return Boolean(null===(e=g.getTitleStore())||void 0===e?void 0:e.isReady())}),[g]),j=(0,s().K8)((()=>{const{currentSpaceViewStore:e}=c().default.state;let t;return e&&e.isReady()&&(t=(0,l().x$)(e)),t}),[]),M=(0,s().K8)((()=>!(0,l().lU)(g)&&x&&g.isReady()),[x,g]),y=(0,s().K8)((()=>{var e;return null===(e=p.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone()}),[p]);return(0,s().K8)((()=>{var e;if(Boolean(p.currentUser.isLoggedIn()||p.publicDomainUserId))return!1;const t=i(515347).GN(g),n=p.RouterStore.state.route;return!(!(0,i(545250).bh)(n)||(null==t?void 0:t.id)!==g.id)||(null==t||null===(e=t.getSiteStore())||void 0===e||null===(e=e.getHeader())||void 0===e?void 0:e.hideBreadcrumbs)}),[p,g])?null:b?y?(0,k.jsx)("div",{style:{...f.container,...f.enforceMaxLength},className:"notranslate",children:(0,k.jsx)(V,{store:g,ancestorMaxWidth:t})}):(0,k.jsxs)("div",{style:f.container,className:"notranslate shadow-cursor-breadcrumb",children:[(0,k.jsx)(D,{ancestorMaxWidth:t,maxAncestorCount:d,isMobile:h,homeStore:j,store:g}),M?(0,k.jsx)(F,{currentPageMaxWidth:u,isMobile:h,currentPageRef:v,ref:v,store:g}):(0,k.jsx)(E,{ancestorMaxWidth:t,isMobile:h,currentPageRef:v,store:g}),(0,k.jsx)(Z,{store:g})]}):null}},127436:(e,t,i)=>{i.d(t,{i:()=>r});i(242343);const n={viewBox:"0 0 20 20",svg:(0,i(163643).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},r=(0,i(680369).wt)("lockFill",n)},267521:(e,t,i)=>{i.r(t),i.d(t,{arrowChevronSingleDownFillIcon:()=>r,iconDefinition:()=>n});i(242343);const n={viewBox:"0 0 20 20",svg:(0,i(163643).jsx)("path",{d:"M9.381 13.619a.875.875 0 0 0 1.238 0l5.4-5.4A.875.875 0 1 0 14.78 6.98L10 11.763 5.219 6.98A.875.875 0 1 0 3.98 8.22z"})},r=(0,i(680369).wt)("arrowChevronSingleDownFill",n)}}]);