"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[52181],{29578:(e,t,a)=>{a.d(t,{$S:()=>l,Im:()=>u,SJ:()=>p,sf:()=>m,yQ:()=>g});a(725707),a(491955),a(403517),a(113085);var s=()=>a(975392),i=()=>a(76394),n=()=>a(599932),r=()=>a(960654),o=()=>a(365928);function l(e){let{space:t,domains:a,team:n,spaceUser:r,invitees:o,internalGuestFeatureAvailability:l,guestFeatureAvailability:d,publicPageDataGuestSetting:g}=e;const p=u({domains:a,internalGuestFeatureAvailability:l,guestFeatureAvailability:d,invitees:o,space:t,spaceUser:r,team:n,publicPageDataGuestSetting:g}),m=c({domains:a,internalGuestFeatureAvailability:l,guestFeatureAvailability:d,invitees:o,space:t,spaceUser:r,team:n,publicPageDataGuestSetting:g}),h=o.some((e=>{const t=m[e.email],a=p[e.email];return"can_autojoin"!==t.type&&f(a)}));return(0,s().Cr)(o.map((e=>{const{email:t,currentRole:a}=e,s=m[t],n=p[t];if("member"===a)return[t,{type:"member_page_add"}];if("guest"===a&&"can_add"===n.type)return[t,{type:"guest_page_add"}];if("can_autojoin"===s.type)return[t,{type:"member",reason:"autojoin_domain"}];if("cannot_add"===(r=p[t]).type&&"over_general_guest_limit"===r.reason)return[t,{type:"none",reason:"must_upgrade"}];if("can_add"===s.type&&h)return[t,{type:"member",reason:"over_internal_guest_limit"}];if("can_add"===n.type)return[t,{type:"guest"}];if("can_request"===n.type)return[t,{type:"guest_request"}];if("can_add"===s.type)return[t,{type:"member",reason:"guests_disabled"}];if("can_request"===s.type)return[t,{type:"member_request"}];if("cannot_add"===s.type&&"not_authorized_domain"===s.reason)return[t,{type:"none",reason:"not_authorized_domain"}];if("cannot_add"===n.type){return[t,{type:"none",reason:n.reason}]}if("cannot_add"===s.type){return[t,{type:"none",reason:s.reason}]}return(0,i().HB)(s)&&(0,i().HB)(n);var r})))}function u(e){let{space:t,domains:a,team:i,internalGuestFeatureAvailability:n,guestFeatureAvailability:r,optimism:l="pessimistic",spaceUser:u,invitees:c,publicPageDataGuestSetting:p}=e;const f=g({space:t,team:i,spaceUser:u,publicPageDataGuestSetting:p}),h=d(l,r,m(c)),v=function(e,t){return e.filter((e=>(0,o().C7)(e.email,t)&&!e.currentRole)).length}(c,a),b=d(l,n,v);return(0,s().Cr)(c.map((e=>{const t=(0,o().C7)(e.email,a),s=void 0!==e.currentRole;let i;return i=s||h?!t||s||b?"cannot_add"===f.type?{type:"cannot_add",reason:"disabled_by_admins"}:f:{type:"cannot_add",reason:"over_internal_guest_limit"}:{type:"cannot_add",reason:"over_general_guest_limit"},[e.email,i]})))}function d(e,t,a){const s=t.limit,i="unlimited"===s.total?"unlimited":s.total-s.current;return"optimistic"===e?"unlimited"===i||i>=1:"unlimited"===i||i>=a}function c(e){let{space:t,team:a,domains:r,spaceUser:o,invitees:l,internalGuestFeatureAvailability:d,guestFeatureAvailability:c,publicPageDataGuestSetting:g}=e;const m=p({space:t,domains:r,spaceUser:o}),h=u({space:t,domains:r,internalGuestFeatureAvailability:d,guestFeatureAvailability:c,team:a,spaceUser:o,invitees:l,publicPageDataGuestSetting:g}),v=!o.isMember();return(0,s().Cr)(l.map((e=>{const t=(0,n().zN)(e.email);if(!t)return[e.email,{type:"cannot_add",reason:"invalid_email"}];const a=f(h[e.email]),s=m.autojoinDomains;let r;return s.includes(t)?r={type:"can_autojoin"}:"can_add"===m.type?r={type:"can_add"}:"can_request"===m.type||a&&!v?r={type:"can_request"}:s.length>0?r={type:"cannot_add",reason:"not_authorized_domain"}:"cannot_add"===m.type?r={type:"cannot_add",reason:"disabled_by_admins"}:(0,i().HB)(m),[e.email,r]})))}function g(e){let{space:t,team:a,spaceUser:s,publicPageDataGuestSetting:n}=e;const o=s.isWorkspaceOwner(),l=(0,i().O9)(n)?n:(0,r().v)({space:t,team:a});return o&&"can_request"===l.type?{type:"can_add"}:l}function p(e){let{space:t,domains:a,spaceUser:s}=e;const i=!s.isMember(),n=function(e){let{space:t,domains:a}=e;const s=a.filter((e=>e.isAutojoinable)).map((e=>e.url));return t.getSettings().disable_membership_requests?{type:"cannot_add",autojoinDomains:s}:{type:"can_request",autojoinDomains:s}}({space:t,domains:a});return i?{type:"cannot_add",autojoinDomains:[]}:s.isWorkspaceOwner()?{...n,type:"can_add"}:n}function m(e){return e.filter((e=>!e.currentRole)).length}function f(e){return"cannot_add"===e.type&&"over_internal_guest_limit"===e.reason}},40815:(e,t,a)=>{a.d(t,{z:()=>n});var s=()=>a(409211),i=()=>a(413871);function n(e){let{userId:t,currentSpaceStore:a}=e;return i().LU.createChildStore(a,{table:s().oo,id:t})}},262887:(e,t,a)=>{a.d(t,{Hq:()=>c,mF:()=>d});var s=()=>a(237385),i=()=>a(803290),n=()=>a(29578),r=()=>a(501673),o=()=>a(526936),l=()=>a(341720),u=()=>a(133926);function d(e){let{space:t,team:a,spaceUser:s,invitees:l,store:d}=e;const c=(0,i().K8)((()=>null==s?void 0:s.getUserId()),[s]),f=(0,u()._X)({name:"internal_guests",spaceId:null==t?void 0:t.id,userId:c,amount:0}),h=(0,u()._X)({name:"guests",spaceId:null==t?void 0:t.id,userId:c,amount:0}),v=(0,o().o)({store:d}),b=g(t),y=p(s),_=m(y,a),S=(0,r().A)(t);return(0,i().K8)((()=>{if(b&&y&&h&&f&&S)return(0,n().$S)({space:b,domains:S,team:_,spaceUser:y,invitees:l,internalGuestFeatureAvailability:f,guestFeatureAvailability:h,publicPageDataGuestSetting:v})}),[b,_,f,h,y,l,S,v])}function c(e){let{space:t,team:a,spaceUser:s,invitees:o,optimism:l="pessimistic",publicPageDataGuestSetting:d}=e;const c=(0,i().K8)((()=>null==s?void 0:s.getUserId()),[s]),f=(0,u()._X)({name:"internal_guests",spaceId:null==t?void 0:t.id,userId:c,amount:0}),h=(0,u()._X)({name:"guests",spaceId:null==t?void 0:t.id,userId:c,amount:0}),v=g(t),b=p(s),y=m(b,a),_=(0,r().A)(t);return(0,i().K8)((()=>{if(v&&b&&h&&f&&_)return(0,n().Im)({space:v,domains:_,team:y,spaceUser:b,invitees:o,optimism:l,guestFeatureAvailability:h,internalGuestFeatureAvailability:f,publicPageDataGuestSetting:d})}),[v,b,_,y,o,h,f,l,d])}function g(e){const t=(0,s().v3)(),a=(0,i().K8)((()=>null==e?void 0:e.getModel()),[e]),n=(0,i().K8)((()=>{if(null==e||!e.id)return;const a=l().A.getData(t,{spaceId:e.id});return a?{id:a.id,disable_guests:a.disableGuests,getSettings:()=>({disable_membership_requests:!1,enable_guest_invite_requests:a.enableGuestInviteRequest})}:void 0}),[e,t]);return a??n}function p(e){return(0,i().K8)((()=>null==e?void 0:e.getModel()),[e])??{isMember:()=>!1,isWorkspaceOwner:()=>!1}}function m(e,t){const a=(0,i().K8)((()=>null==t?void 0:t.getModel()),[t]);return(0,i().K8)((()=>null==e?void 0:e.isMember()),[e])?a:{getDisableGuests:()=>!1}}},337213:(e,t,a)=>{a.d(t,{Q:()=>i});a(242343);var s=a(163643);const i=(0,a(680369).wt)("speechBubble",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M4.32 15.424c.39 0 .677-.192 1.149-.609l2.344-2.064h4.116c2.057 0 3.213-1.19 3.213-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.22h.28v1.675c0 .608.322.998.875.998zm.342-1.531v-1.949c0-.403-.178-.56-.56-.56H3.26c-1.285 0-1.9-.65-1.9-1.894V4.26c0-1.243.615-1.893 1.9-1.893h8.627c1.278 0 1.893.65 1.893 1.894v5.23c0 1.243-.615 1.893-1.893 1.893h-4.15c-.417 0-.622.068-.909.369l-2.167 2.14z"})})},365928:(e,t,a)=>{a.d(t,{C7:()=>n,CH:()=>r,JD:()=>i});a(725707),a(500234);var s=()=>a(599932);function i(e,t){return!!e&&n(e.getEmail(),t)}function n(e,t){return void 0!==r(e,t)}function r(e,t){if(!e)return;const a=(0,s().zN)(e);return t.find((e=>e.url===a))}},392610:(e,t,a)=>{a.d(t,{J:()=>n});a(242343);var s=a(163643);const i={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M12.806 8.074a.625.625 0 1 0-1.072-.643l-2.512 4.185-1.407-1.642a.625.625 0 1 0-.95.814l1.973 2.3a.625.625 0 0 0 1.01-.085z"}),(0,s.jsx)("path",{d:"M10.405 1.724a.625.625 0 0 0-.81 0L7.36 3.628l-2.926.233a.625.625 0 0 0-.573.574L3.628 7.36 1.724 9.595a.624.624 0 0 0 0 .81l1.904 2.234.233 2.926a.625.625 0 0 0 .574.573l2.926.234 2.234 1.904a.624.624 0 0 0 .81 0l2.234-1.904 2.926-.234a.625.625 0 0 0 .573-.573l.234-2.926 1.904-2.234a.624.624 0 0 0 0-.81L16.372 7.36l-.234-2.926a.625.625 0 0 0-.573-.573l-2.926-.234zM8.017 4.711 10 3.02l1.983 1.69c.1.085.224.136.355.147l2.597.207.207 2.597c.01.13.062.255.147.355L16.98 10l-1.69 1.983a.63.63 0 0 0-.147.355l-.207 2.597-2.597.207a.63.63 0 0 0-.355.147L10 16.98l-1.983-1.69a.63.63 0 0 0-.355-.147l-2.597-.207-.207-2.597a.63.63 0 0 0-.147-.355L3.02 10l1.69-1.983a.63.63 0 0 0 .147-.355l.207-2.597 2.597-.207a.63.63 0 0 0 .355-.147"})]})},n=(0,a(680369).wt)("badgeCheck",i)},450351:(e,t,a)=>{a.d(t,{n:()=>c});a(242343);var s=()=>a(237385),i=()=>a(377963),n=()=>a(653998),r=()=>a(31448),o=()=>a(421338),l=()=>a(356813),u=()=>a(629457),d=a(163643);function c(e){const t=(0,n().tz)(),{title:a,goBack:c}=e,g=(0,s().v3)(),{isMobile:p}=g.device;return(0,d.jsxs)(o().Y1,{direction:"horizontal",gap:6,children:[c&&(0,d.jsx)(l().A,{ariaLabel:t.formatMessage({id:"requestsPageHeader.back",defaultMessage:"Back"}),icon:i().I,onClick:c}),(0,d.jsx)(u().A,{large:!p,divider:"none",fontSize:16,fontWeight:r().Wy.medium,style:{marginBottom:0},children:a})]})}},501673:(e,t,a)=>{a.d(t,{A:()=>r});a(403517);var s=()=>a(237385),i=()=>a(803290),n=()=>a(300481);function r(e){const t=(0,s().v3)();return(0,i().K8)((()=>{var a;const s=null==e?void 0:e.id;if(s)return null===(a=n().A.getData(t,{spaceId:s}))||void 0===a?void 0:a.map((e=>e.domain))}),[t,e])}},526936:(e,t,a)=>{a.d(t,{o:()=>u});var s=()=>a(237385),i=()=>a(803290),n=()=>a(21164),r=()=>a(695412),o=()=>a(836331);const l=new(a(967203).U)((e=>{if("block-space"===e.type)return`${e.type}-${e.blockId}-${e.spaceId}`;(0,a(76394).HB)(e.type)}),(async(e,t)=>{const s=await Promise.resolve().then(a.bind(a,818369)),i=(0,a(519423).WS)({spaceId:t.spaceId,recordId:t.blockId,verifyShortSpaceIdVersion:!0}),n=await s.callApi({eventName:"getPublicPageData",environment:e,data:t,headers:i});return"success"===n.type?n.data:void 0}));function u(e){const{store:t}=e,a=(0,s().v3)();return(0,i().K8)((()=>{if(!o().default.checkGate({gateName:"ui_guest_disable_changes"}))return;if(t.table===n().Vl)return{type:"cannot_add"};const e=t.id,s=t.getSpaceId(),i=r().A.state.publicPageData;var u;if((null==i?void 0:i.pageId)===e)return(null==i||null===(u=i.securitySettings)||void 0===u?void 0:u.guestSetting)??{type:"can_add"};{var d;const t=l.getData(a,{type:"block-space",blockId:e,spaceId:s});return(null==t||null===(d=t.securitySettings)||void 0===d?void 0:d.guestSetting)??{type:"can_add"}}}),[t,a])}},545947:(e,t,a)=>{a.d(t,{Z:()=>O,Y:()=>ie});a(403517);var s=a(242343),i=()=>a(237385),n=()=>a(803290),r=()=>a(174114),o=()=>a(337213),l=()=>a(647242),u=()=>a(653998),d=()=>a(76394),c=()=>a(336519),g=()=>a(421338),p=()=>a(537311),m=()=>a(701270),f=()=>a(951540),h=()=>a(90760),v=()=>a(579031),b=()=>a(40815),y=()=>a(613313),_=()=>a(946161),S=()=>a(898055),x=()=>a(17791);var q=()=>a(153511),M=()=>a(409211),w=()=>a(455831),P=()=>a(912199),I=()=>a(209684),R=()=>a(317305),j=()=>a(529305),A=()=>a(539048),U=()=>a(482570),C=()=>a(761800),D=()=>a(396218),k=()=>a(997310),B=()=>a(14679),N=()=>a(397138),T=a(163643);function F(e){let{feature:t,request:a,userId:s,onDismiss:o}=e;const c=(0,u().tz)(),g=(0,k().r)(),p=(0,i().v3)(),h=(0,S().l)({spaceId:null==g?void 0:g.id}),v=(0,r().IS)((e=>({fullWidth:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},cancelButton:{...C().W,height:32,color:e.text.secondary},input:{color:e.text.primary}})),[]),{userStore:b,userDisplayName:y}=(0,n().K8)((()=>{if(!g||!s)return{userStore:void 0,userDisplayName:void 0};const e=B().L.createChildStore(g,{table:M().oo,id:s});return{userStore:e,userDisplayName:e.getDisplayName(c)}}),[g,s,c]),{entrypoint:_}=a,x=(0,n().K8)((()=>{switch(_){case"ai_connectors_request_modal":return c.formatMessage(K.subtitleAiConnectorsModal);case"ai_for_work_announcement_modal":return c.formatMessage(K.subtitleAiForWorkModal);case"plans":case"settings":case"charts":case"ai_chat":case"teamspace_menu":case"ai_corner_chat":case"version_history":case"ai_limit_nudge_sidebar":case"search_modal":case"ai_home_page":return c.formatMessage(K.subtitlePlans);default:(0,d().HB)(_)}}),[c,_]),F=(0,n().K8)((()=>l().N8(null==h?void 0:h.subscription)),[h]),L=(0,N().n)(),W=ie(a.request,F,L);return W?(0,T.jsx)(A().s,{ariaLabel:c.formatMessage(K.ariaLabel),isOpen:!0,onDismiss:o,showCloseIcon:!0,areaConstraint:{width:{type:"fixed",length:400},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,T.jsx)(j().tf,{showDismissButton:!1,header:(0,T.jsx)(D().rQ,{icon:(0,T.jsx)(U().A,{userStore:b,size:40}),title:c.formatMessage(K.title,{feature:w().v0[t].defaultMessage,user:y}),byline:x}),footer:(0,T.jsx)(P().Y,{gap:16,children:(0,T.jsxs)(P().Y,{gap:8,children:[(0,T.jsx)(f().A,{"aria-label":c.formatMessage(W),onClick:async()=>{await(0,q().F)({environment:p,spaceStore:g,billingData:h,product:a.request,from:"upgrade_requests_page"}),o()},style:{height:32},children:c.formatMessage(W)}),(0,T.jsx)("div",{style:{textAlign:"center"},children:(0,T.jsx)(m().D,{styleName:"Caption-12px/Regular",colorName:"secondary",children:c.formatMessage(K.billingNotice)})}),(0,T.jsx)(I().p,{size:"lg",onClick:o,style:{...v.fullWidth,...v.cancelButton},"aria-label":c.formatMessage(K.cancelButton),children:c.formatMessage(K.cancelButton)})]})}),children:(0,T.jsxs)(P().Y,{gap:8,children:[(0,T.jsx)(m().D,{styleName:"Caption-12px/Medium",colorName:"secondary",children:c.formatMessage(K.noteLabel)}),(0,T.jsxs)(P().Y,{style:{position:"relative"},gap:8,children:[(0,T.jsx)(R().A,{disabled:!0,format:R().C.Large,value:a.reason_for_request,inputStyle:{...v.input,paddingBottom:24},textarea:!0,autosize:!0}),(0,T.jsx)(m().D,{styleName:"Caption-12px/Regular",colorName:"secondary",style:{position:"absolute",bottom:8,left:8},children:c.formatDate(a.created_time,{year:"numeric",month:"long",day:"numeric"})})]})]})})}):null}const K=(0,u().YK)({cancelButton:{id:"viewUpgradeRequestModal.cancelButton",defaultMessage:"Cancel"},billingNotice:{id:"viewUpgradeRequestModal.billingNotice",defaultMessage:"You’ll be able to confirm the updated bill on the next step"},subtitlePlans:{id:"viewUpgradeRequestModal.subtitlePlans",defaultMessage:"This request was made from the Plans page"},subtitleAiConnectorsModal:{id:"viewUpgradeRequestModal.subtitleAiConnectorsModal",defaultMessage:"This request was made from AI Connector onboarding."},subtitleAiForWorkModal:{id:"viewUpgradeRequestModal.subtitleAiForWorkModal",defaultMessage:"This request was made from the AI for Work announcement."},title:{id:"viewUpgradeRequestModal.title",defaultMessage:"{user} would like access to Notion {feature}"},ariaLabel:{id:"viewUpgradeRequestModal.modal.ariaLabel",defaultMessage:"View plan request modal"},noteLabel:{id:"viewUpgradeRequestModal.noteLabel",defaultMessage:"Note"}});var L=()=>a(286404);function W(e){let{title:t,loadedIconFunction:a,buttonAction:s,buttonText:i,buttonAriaLabel:o}=e;const l=(0,r().IS)((e=>({icon:{height:48,width:48,fill:e.icon.tertiary}})),[]),u=(0,n().K8)((()=>a(l.icon)),[l.icon,a]);return(0,T.jsxs)(g().Y1,{gap:16,align:"center",direction:"vertical",padding:"32px 0 88px 0",height:"fill",children:[(0,T.jsx)("div",{children:u}),(0,T.jsx)(m().D,{customStyles:{textAlign:"center"},styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t}),(0,T.jsx)(L().A,{size:"lg",onClick:s,ariaLabel:o,children:(0,T.jsx)(m().D,{customStyles:{textAlign:"center"},styleName:"UIRegular-14px/Medium",children:i})})]})}var z=()=>a(450351),G=()=>a(135866),E=()=>a(772357);function H(){const e=(0,u().tz)(),t=(0,r().IS)((e=>({checkmarkCircleIcon:{fill:e.icon.uiBluePrimary}})),[]);return(0,T.jsx)(E().l,{label:e.formatMessage(Y.aiNowApartOfBusiness),display:"inline",description:e.formatMessage(Y.aiRequestsMigratedToBusiness),tint:"blue",staticIcon:(0,G().checkmarkCircleFillIcon)(t.checkmarkCircleIcon),actions:[{label:e.formatMessage(Y.learnMore),onClick:()=>{window.open("https://www.notion.com/blog/notion-ai-for-work","_blank")}}]})}const Y=(0,u().YK)({aiNowApartOfBusiness:{id:"RequestsSettingsPage.UpgradesPage.banner.aiNowApartOfBusiness",defaultMessage:"Unlimited use of Notion AI is now a part of the Business plan"},aiRequestsMigratedToBusiness:{id:"RequestsSettingsPage.UpgradesPage.banner.aiRequestsMigratedToBusiness",defaultMessage:"We’re moving pending Notion AI requests into Business plan requests as our plans are being updated"},learnMore:{id:"RequestsSettingsPage.UpgradesPage.banner.learnMore",defaultMessage:"Learn more"}});function O(e){let{spaceStore:t}=e;const a=(0,u().tz)(),{setPage:i,isSalesEligible:r}=(0,s.useContext)(_().K),{requests:l,isLoading:p}=(0,x().I)({spaceId:t.id}),m=(0,n().K8)((()=>(0,y().Y3)()),[]),f=(0,n().K8)((()=>(0,y().Le)()),[]);if(p)return null;const h=Object.keys(l).length,v=1===h,b=0===h;return(0,T.jsxs)(g().Y1,{height:"fill",direction:"vertical",gap:32,padding:"36px 60px",style:{overflowY:"auto"},children:[(0,T.jsx)(z().n,{title:a.formatMessage(ne.title),goBack:()=>i("home")}),f&&m?(0,T.jsx)(H,{}):void 0,b?(0,T.jsx)(W,{title:a.formatMessage(ne.noRequestsTitle),buttonAriaLabel:"explore plans",buttonText:a.formatMessage(ne.noRequestsButtonTitle),buttonAction:()=>{c().Ow({currentTab:"plans"})},loadedIconFunction:o().Q}):(0,d().WP)(l).map((e=>{let[a,s]=e;return s?(0,T.jsx)(V,{expandByDefault:!0,hasOneRequestType:v,requestType:a,requests:s,spaceStore:t,isSalesEligible:r},a):null}))]})}function V(e){let{expandByDefault:t=!1,requestType:a,requests:n,spaceStore:r,isSalesEligible:o,hasOneRequestType:d}=e;const c=(0,i().v3)(),g=(0,S().l)({spaceId:r.id}),[p,m]=s.useState(t),v=(0,u().tz)(),b=l().N8(null==g?void 0:g.subscription),y=ie(a,b,o);return(0,T.jsxs)("div",{children:[(0,T.jsx)(h().A,{title:(0,T.jsx)($,{requestType:a,requestCount:n.length,isExpanded:p,handleClick:()=>{m(!p)},shouldHideToggle:d}),type:"custom",isMobile:!1,disableSettingsItemClick:!0,customButton:y&&(0,T.jsx)(f().A,{onClick:async()=>{await(0,q().F)({environment:c,spaceStore:r,billingData:g,product:a,from:"upgrade_requests_page"})},children:v.formatMessage(y)})}),p&&(0,T.jsx)(se,{spaceStore:r,requests:n})]})}function $(e){let{handleClick:t,isExpanded:a,requestType:s,requestCount:i,shouldHideToggle:n}=e;const o=(0,u().tz)(),l=function(e){switch(e){case"ai":return ne.ai;case"business":return ne.business;case"enterprise":return ne.enterprise;default:return null}}(s),d=(0,r().IS)((e=>({toggleButton:{color:e.icon.primary}})),[]);return(0,T.jsxs)(g().Y1,{direction:"horizontal",gap:6,align:"center-left",children:[!n&&(0,T.jsx)(v().A,{isSidebar:!1,fill:!0,onClick:()=>{t()},open:a,color:d.toggleButton.color}),l&&(0,T.jsx)(m().D,{styleName:"UIRegular-14px/Medium",colorName:"primary",children:o.formatMessage(l)}),(0,T.jsx)(m().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:i})]})}const Q={id:"note",headerTitle:(0,T.jsx)(u().sA,{id:"RequestsSettingsPage.UpgradesPage.noteColumn",defaultMessage:"Note"}),renderCell:e=>{let{value:t}=e;return(0,T.jsx)(X,{value:t})},sortable:!1,widthData:{minWidth:150,maxWidth:310,widthPercent:37}};function X(e){const t=e.value.reason_for_request??"—",a=(0,r().IS)((e=>({container:{width:"100%"},textWithEllipsis:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})),[]);return(0,T.jsx)("div",{style:a.container,children:(0,T.jsx)(m().D,{style:a.textWithEllipsis,styleName:"UIRegular-14px/Regular",children:t})})}function J(e){let{value:t,isRowHovered:i}=e;const n=(0,u().tz)(),[o,l]=s.useState(!1),[d,c]=s.useState(null),p=(0,r().IS)((e=>({icon:{height:14,width:14,color:e.icon.secondary}})),[]),m=n.formatMessage({id:"RequestsSettingsPage.UpgradesPage.viewDetail",defaultMessage:"View Detail"});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(g().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",children:i&&(0,T.jsx)(a(103151).A,{placement:a(907721).W.Top,renderTooltip:()=>m,render:e=>(0,T.jsx)(a(356813).A,{ariaLabel:m,hasBackground:!0,icon:a(246169).y,showShadow:!0,iconStyle:p.icon,onClick:e=>{c(t),l(!0),e.stopPropagation()},...e})})}),o&&d&&(0,T.jsx)(F,{feature:d.request,request:d,userId:d.created_by_id,onDismiss:()=>l(!1)})]})}const Z={id:"date",headerTitle:(0,T.jsx)(u().sA,{id:"RequestsSettingsPage.UpgradesPage.dateColumn",defaultMessage:"Date"}),renderCell:e=>{let{value:t}=e;return(0,T.jsx)(a(811132).d,{dateTs:t.created_time})},sortable:!1,widthData:{minWidth:150,maxWidth:240,widthPercent:24}},ee={id:"dateWithViewDetail",headerTitle:"",renderCell:e=>{let{value:t,isRowHovered:a}=e;return(0,T.jsx)(J,{value:t,isRowHovered:a})},sortable:!1,widthData:{minWidth:100,maxWidth:100,widthPercent:6}},te=[{id:"requestedBy",headerTitle:(0,T.jsx)(u().sA,{id:"RequestsSettingsPage.UpgradesPage.requestedByColumn",defaultMessage:"Requested By"}),renderCell:e=>{let{userStore:t}=e;return(0,T.jsx)(a(685008).l,{customAvatarStyles:{marginRight:8},userStores:[t]})},sortable:!1,widthData:{minWidth:150,maxWidth:240,widthPercent:30}},Q,Z,ee],ae=8;function se(e){let{requests:t,spaceStore:a}=e;const[i,n]=s.useState(!1),[o,l]=s.useState(null),{header:u}=(0,r().IS)((e=>({header:{boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`}})),[]),d=te.map((e=>({...e,headerStyle:u}))),c=(0,r().IS)((e=>{const t=(0,p().rC)({columnRenderInfo:d,theme:e,containerMarginTop:8});return{...t,container:{...t.container,width:"100%"}}}),[d]),g=t.map((e=>({value:e,userStore:(0,b().z)({userId:e.created_by_id,currentSpaceStore:a}),id:e.id,isClickable:!0}))),{pageRows:m,loadMoreMethod:f}=function(e){let{rows:t,limit:a}=e;const[i,n]=(0,s.useState)(a),[r,o]=(0,s.useState)(0),l=t.length,u=l>a;return{pageRows:(0,s.useMemo)((()=>u?t.slice(r,i):t),[t,r,i,u]),loadMoreMethod:(0,s.useMemo)((()=>{if(u)return{type:"pages",onLoadNext:()=>{if(i>=l)return;const e=Math.min(i+a,l);n(e),o(r+a)},onLoadPrevious:()=>{0!==r&&(n(r),o(r-a))},hasNextPage:i<l,hasPrevPage:r>0,currentPage:Math.floor(r/a)+1,finalPage:Math.floor(l/a)+1}}),[l,r,i,a,u])}}({rows:g,limit:ae});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(p().WE,{columnRenderInfo:d,rows:m,hideHeaderRowPadding:!0,renderNoRowsComponent:()=>null,styles:c,loadMoreMethod:f,onRowClick:e=>{l(e.value),n(!0)},showRowBorders:!0}),i&&o&&(0,T.jsx)(F,{feature:o.request,request:o,userId:o.created_by_id,onDismiss:()=>n(!1)})]})}function ie(e,t,a){if(t||a&&"enterprise"===e)return ne.contactSales;switch(e){case"ai":return ne.aiUpgrade;case"business":case"enterprise":return ne.planUpgrade;default:return null}}const ne=(0,u().YK)({title:{id:"RequestsSettingPage.UpgradePage.title",defaultMessage:"Upgrades"},aiUpgrade:{id:"RequestsSettingsPage.UpgradesPage.aiUpgrade",defaultMessage:"Upgrade AI"},planUpgrade:{id:"RequestsSettingsPage.UpgradesPage.planUpgrade",defaultMessage:"Upgrade Plan"},contactSales:{id:"RequestsSettingsPage.UpgradesPage.contactSales",defaultMessage:"Contact Sales"},ai:{id:"RequestsSettingsPage.UpgradesPage.notionAI",defaultMessage:"Notion AI"},business:{id:"RequestsSettingsPage.UpgradesPage.business",defaultMessage:"Business"},enterprise:{id:"RequestsSettingsPage.UpgradesPage.enterprise",defaultMessage:"Enterprise"},noRequestsTitle:{id:"RequestsSettingsPage.UpgradesPage.NoPendingRequestsTitle",defaultMessage:"No upgrade requests in your workspace"},noRequestsButtonTitle:{id:"RequestsSettingsPage.UpgradesPage.NoPendingRequestsButtonTitle",defaultMessage:"Explore plans"}})},639246:(e,t,a)=>{a.d(t,{K:()=>u});a(333225),a(494367),a(516262),a(573119),a(240480),a(950443),a(619601),a(725707),a(491955),a(403517);var s=()=>a(237385),i=()=>a(803290),n=()=>a(409211),r=()=>a(76394),o=()=>a(413871),l=()=>a(111826);function u(e){const t=(0,s().v3)();return(0,i().K8)((()=>{const a=e.state;if(!a)return{memberEmails:new Set,guestEmails:new Set};const s=l().Ye(a),i=l().oe(a),u=e=>new(o().LU)(t,{table:n().oo,id:e.userId}).getEmail();return{memberEmails:new Set(s.map(u).filter(r().O9)),guestEmails:new Set(i.map(u).filter(r().O9))}}),[t,e])}},642841:(e,t,a)=>{a.d(t,{C:()=>i});var s=()=>a(76394);function i(e){return e.isGuestInviteRequest()?"guest_invite_request":e.isPageAccessRequest()?"page_access_request":e.isSpaceMembershipRequest()?"space_membership_request":e.isTeamMembershipRequest()?"team_membership_request":void(0,s().HB)(e)}},764755:(e,t,a)=>{a.d(t,{I:()=>m,T:()=>f});a(358848),a(91270),a(403517);var s=()=>a(237385),i=()=>a(803290),n=()=>a(642841),r=()=>a(409211),o=()=>a(975392),l=a(242343),u=()=>a(639246);var d=()=>a(413871),c=()=>a(262887),g=()=>a(305043),p=()=>a(931371);function m(e){var t;let{spaceStore:a,request:n}=e;const l=(0,s().v3)(),u=(0,i().K8)((()=>{if(n)return new(d().LU)(l,{id:n.getForActorId(),table:r().oo}).getModel()}),[n,l]),c=n&&u?{accessRequest:n,forActor:u}:void 0;return null===(t=f({spaceStore:a,requests:(0,o().oE)([c])}))||void 0===t?void 0:t.at(0)}function f(e){let{spaceStore:t,requests:a}=e;const r=function(e){let{spaceStore:t,requests:a}=e;const n=(0,s().v3)(),r=function(e){const t=(0,u().K)(e);return(0,l.useCallback)((e=>t.memberEmails.has(e)?"member":t.guestEmails.has(e)?"guest":void 0),[t])}(g().subscriptionDataStoreInstance),o=(0,i().K8)((()=>null==a?void 0:a.map((e=>({email:e.forActor.email,currentRole:r(e.forActor.email)})))),[a,r]),d=n.currentUser.id,m=d?(0,p().dp)(t,d):void 0;return(0,c().Hq)({space:t,spaceUser:m,team:void 0,optimism:"optimistic",invitees:o??[],publicPageDataGuestSetting:void 0})}({spaceStore:t,requests:a});return(0,i().K8)((()=>null==a?void 0:a.map((e=>{var t;const a=(0,n().C)(e.accessRequest),s=null==r||null===(t=r[e.forActor.email])||void 0===t?void 0:t.type;return"guest_invite_request"!==a?a:"cannot_add"===s?"space_membership_request":"guest_invite_request"}))),[a,r])}},946161:(e,t,a)=>{a.d(t,{K:()=>i});const s={currentPage:"home",setPage:()=>{},isSalesEligible:!1},i=(0,a(242343).createContext)(s);i.displayName="RequestsSettingsPageContext"}}]);