"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[67780],{96718:(e,t,n)=>{n.d(t,{l:()=>r});var o=()=>n(706788);const i={[o().e1]:"collection_connected_property_figma",[o().Hd]:"collection_connected_property_google_drive",[o().ob]:"collection_connected_property_github",[o().k0]:"collection_connected_property_zendesk",[o().bh]:"collection_synced_database_github",[o().MN]:"collection_synced_database_asana",[o().Fo]:"collection_synced_database_gitlab",[o().me]:"collection_synced_database_jira",[o().F6]:"collection_synced_database_jira_workspace",[o().Fv]:"collection_synced_database_jira_datacenter"};function r(e){if(e)return i[e]}},216030:(e,t,n)=>{n.d(t,{s:()=>f});var o=n(242343),i=()=>n(16791),r=()=>n(237385),l=()=>n(803290),s=()=>n(778417),a=()=>n(31448),c=()=>n(880195),d=()=>n(388615),u=()=>n(797470),g=()=>n(248584),p=n(163643);const f=o.memo((function(e){let{store:t,context:f,disabled:x,isInSidePeek:m,extraStyles:h,titlePlaceholder:y,collectionContextStore:v,shouldShowTemplatePicker:b,onTitleChange:j,onTitleEditText:_,onTitleEsc:I,onTitleUntab:C,onTitleTab:k,onMoveUp:M,onMoveDown:w,hideText:K,disableEnter:A}=e;const E=(0,n(653998).tz)(),T=(0,r().v3)(),P=(0,r().Y0)(),B=(0,n(556078).S)(),D=(0,l().K8)((()=>t.getTitleStore()),[t]),L=(0,n(308265).BG)(),R=(0,l().K8)((()=>{if(t.isCollectionView()){const e=t.getCollectionStoreIfSingleSource();return!!e&&e.isSyncedCollection()}return t.isType(n(762847).xd.externalObjectInstancePage)}),[t]),U=(0,g().Sm)(t),F=(0,l().K8)((()=>{if(x)return!1;if(n(177086).l.state)return!1;const e=B&&B.publicEditModeStore.state;return!(0,n(352723).QT)(e)&&t.canEditCollection()}),[x,B,t]),V=(0,l().K8)((()=>{if(!t.isCollectionView())return!1;const e=t.getCollectionStoreIfSingleSource();return!!e&&(0,n(860330).Qu)(e.getValue())}),[t]),z=(0,l().K8)((()=>{const e=t.getModel();return y??(null==e?void 0:e.getEmptyTitlePlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,n(427091).P)(),intl:n(477784).A.getIntl(),isWorkflowsAppContainerEnabled:L}))}),[t,y,L]),W=!T.device.isMobile&&m,N=(0,l().K8)((()=>F&&!t.isNonEditableState()&&!R&&!U&&!(0,n(520969).Nh)(t.id)&&!("suggest"===n(615661).Uv.getMode(t))),[F,R,U,t]),O=(0,l().K8)((()=>t.isEmptyPage()),[t]),H=(0,l().K8)((()=>t.isTemplate()),[t]),G=(0,l().K8)((()=>t.getAssociatedCollectionTemplateStores()),[t]),Q=(0,l().K8)((()=>t.getSyncedUri()),[t]),Y=function(e){const{store:t,isInSidePeek:o,context:c,extraStyles:d}=e,g=(0,r().v3)(),p=(0,l().K8)((()=>t.getFormat()),[t]),f=(0,l().K8)((()=>t.isCollectionView()),[t]),S=(0,l().K8)((()=>t.isExternalObjectInstancePageBlockStore()),[t]),x=(0,r().Y0)(),m=(0,n(481148).cV)({device:x});return(0,n(174114).IS)((e=>{const t=Boolean(p.page_small_text)||f||o;let n;n=g.device.isMobile?m?34:28:t?32:c===u().Rr.DraftPostInInlineComposer?26:40;const r=c===u().Rr.DraftPostInInlineComposer?a().Wy.semibold:a().Wy.bold,l=g.device.isMobile?"0px":`${s().nE}px`;return{title:{...s().nE,paddingBottom:l,width:S?"fit-content":"100%",fontSize:"1em",fontWeight:"inherit",margin:0,...c===u().Rr.DraftPostInInlineComposer&&{fontSize:24}},selectable:{color:e.text.primary,fontWeight:r,lineHeight:1.2,fontSize:n,fontFamily:a().xf({pageFont:p.page_font,locale:i().locale}),cursor:"text",display:"flex",alignItems:"center",textRendering:g.device.isSafari?"optimizeSpeed":void 0,...d},link:{width:16,fill:e.mediumIconColor},placeholder:{...s().nE,paddingBottom:l,WebkitTextFillColor:e.pageTitlePlaceholderTextColor,cursor:"text",...c===u().Rr.DraftPostInInlineComposer&&{color:e.text.tertiary,WebkitTextFillColor:e.text.tertiary}}}}),[m,g.device.isMobile,g.device.isSafari,d,p.page_font,p.page_small_text,f,S,o,c])}({store:t,isInSidePeek:m,context:f,extraStyles:h}),$=(0,l().K8)((()=>t.isExternalObjectInstancePageBlockStore()),[t]),J=(0,l().K8)((()=>t.isExternalCollectionBlockStore()?t:void 0),[t]),X=(0,l().K8)((()=>(null==J?void 0:J.canEdit())??!1),[J]),q=(0,l().K8)((()=>Q?(0,n(251763).e)(Q,t.pointer.spaceId):void 0),[t.pointer.spaceId,Q]),Z=(0,l().K8)((()=>n(840024).zD.shouldEnablePageTitleDiffs(P)),[P]),ee=G&&0===G.length,te=(0,g().O9)(t,f),ne=(0,l().K8)((()=>!!A||!te&&(!(!b||H||ee||T.device.isMobile)&&O)),[te,A,b,H,ee,T.device.isMobile,O]),oe=(0,o.useRef)(null),ie=(0,o.useCallback)((()=>{t&&n(84543).createAndCommit({userAction:"TourTutorial.createEmptyTextBlock",environment:T,canUndo:!0,perform:e=>{n(791362)._N({environment:T,store:t,transaction:e})}})}),[t,T]);if(V)return(0,p.jsx)(c().A,{name:"PageTitle",children:null});if(!D)return(0,p.jsx)(c().A,{name:"PageTitle",children:null});const re=n(413871).Bv.createChildStore(D,t.pointer),le=T.device.isIOS||T.device.isSafari,se=(0,p.jsx)(n(335142).n,{step:"create_page_start_with_title",showSidebarOverlays:!1,onNextButtonClick:ie,children:K?(0,p.jsx)(p.Fragment,{}):(0,p.jsx)(n(636045).A,{tagName:"h1",style:Y.title,store:D,placeholderStyle:Y.placeholder,disabled:!N,placeholder:z,disableSlashCommands:!0,disableSelectAllBlocks:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!Z,disableMobileActionBar:!1,disableShiftEnter:!0,disableEmbedMenu:!0,onEsc:I,onUntab:C,onTab:k,onMoveDown:w,onMoveUp:M,disableUpDownArrows:!(!b||H||ee||T.device.isMobile)&&O,disableEnter:ne,onChange:j,disableHorizontalEdgeScroll:!0,pasteBehavior:"block",trackEditsToUserFlow:"user_flow_edit_page_title",inPageFind:n(868199).Os.block_match},D.id)}),ae=E.formatMessage({id:"PageTitle.syncedBlock.original",defaultMessage:"Link to original url"});return(0,p.jsx)(c().A,{name:"PageTitle",children:(0,p.jsxs)("div",{style:W?{flex:1}:void 0,ref:oe,children:[(0,p.jsxs)(n(367859).A,{canSelect:!1,canDrag:!1,canEditText:N,onEditText:_,store:re,style:Y.selectable,analyticsName:"page_content",shouldShowDropZone:!0,children:[le?(0,p.jsx)(d().s,{allowSelectionWithin:!0,style:{width:"100%",maxWidth:"100%"},children:se}):se,(0,p.jsxs)(d().s,{allowSelectionWithin:!0,children:[(0,p.jsx)(n(824500).vE,{origin:oe??void 0}),$&&(0,p.jsx)(n(103151).A,{placement:n(907721).W.Bottom,renderTooltip:()=>ae,render:e=>(0,p.jsx)(n(931085).A,{href:q,ignoreLocalHoverState:!0,hovered:!1,children:(0,p.jsx)(n(356813).A,{ariaLabel:ae,...e,icon:()=>(0,n(319989).w)(Y.link),style:{marginLeft:4},onClick:()=>{q&&n(110975).f({url:q,environment:T})}})})}),J&&!T.device.isMobile&&(0,p.jsx)(n(546057).A,{store:J,canEdit:X,buttonStyle:{fontWeight:"normal",margin:0}})]})]}),(0,p.jsx)(d().s,{allowSelectionWithin:!0,style:{marginLeft:4},children:(0,p.jsx)(S,{store:t,collectionContextStore:v})})]})})}));function S(e){const{store:t,collectionContextStore:o}=e,i=(0,l().K8)((()=>t.isCollectionView()),[t]),r=(0,l().K8)((()=>t.getCollectionStoreIfSingleSource()),[t]);return i&&o&&r?(0,p.jsx)(n(517722).A,{collectionStore:r,collectionContextStore:o}):null}},223279:(e,t,n)=>{n.d(t,{O:()=>Se,A:()=>xe});var o=n(242343),i=()=>n(237385),r=()=>n(152058),l=()=>n(803290),s=()=>n(823792),a=()=>n(836352),c=()=>n(545250),d=()=>n(34662),u=()=>n(653998),g=()=>n(899037),p=()=>n(360378),f=()=>n(384221),S=()=>n(782422),x=()=>n(481148),m=()=>n(400885),h=()=>n(392608),y=()=>n(486881),v=()=>n(129978),b=()=>n(248584),j=()=>n(116485),_=()=>n(556078),I=()=>n(242103),C=()=>n(496580),k=()=>n(975392),M=()=>n(31448),w=()=>n(448316),K=()=>n(84543),A=()=>n(28210),E=()=>n(709237),T=()=>n(103151),P=()=>n(636045),B=()=>n(868199),D=()=>n(621641),L=()=>n(352723),R=()=>n(280630),U=()=>n(615661),F=()=>n(205670),V=n(163643);function z(e){let{descriptionStore:t,disabled:n,toggleStore:o,pageId:i,userSettingsStore:r,collectionStore:l,locked:s,canEdit:a}=e;return(0,V.jsx)("div",{style:{maxWidth:"100%",borderRadius:4,overflow:"hidden",marginBottom:12},children:(0,V.jsx)(J,{descriptionStore:t,disabled:n,toggleStore:o,pageId:i,userSettingsStore:r,collectionStore:l,locked:s,canEdit:a})})}const W=o.memo(z);function N(e){return e.state.isPageDescriptionExpanded}function O(e){let{collectionStore:t}=e;const n=(0,l().K8)((()=>t&&t.getIcon()),[t]);return(0,V.jsxs)("div",{style:{display:"flex",alignItems:"start"},children:[(0,V.jsx)("div",{style:{paddingTop:4,paddingRight:6},children:(0,I().S)({width:12})}),(0,V.jsx)("div",{children:(0,V.jsx)("div",{children:(0,V.jsx)(u().sA,{defaultMessage:"Please unlock {pageTitleWithIcon} to edit the description.",id:"pageDescription.lockedTooltip.message",values:{pageTitleWithIcon:(0,V.jsxs)("span",{style:{whiteSpace:"nowrap",fontWeight:M().Wy.bold},children:[n&&(0,V.jsx)(A().B,{disabled:!0,icon:n,isEmptyPage:!1,size:12,style:{marginRight:4,display:"inline-block"}}),t&&(0,V.jsx)(E().A,{store:t,style:{display:"inline"}})]})}})})})]})}function H(e){return!0}function G(e){return!0}function Q(e,t,n,o,i,r){if(!function(e,t,n){const o=n&&n.publicEditModeStore.state,i=(0,C().o9)((0,R().T)(e));return!t&&!(0,L().QT)(o)&&"suggest"!==U().Uv.getMode(i)&&e.canEdit()}(n,o,r))return;if(e.preventDefault(),i&&i.isComposing())return;const l=F().default.state;if("editing"===l.mode){const e=(0,D().H7)(l.multiSelection);if(!e)return;const o=null!=r&&r.pageStore?U().Uv.getMode(r.pageStore):"default";K().createAndCommit({userAction:"PageDescription.handleEnter",environment:t,canUndo:!0,perform:i=>{w().$D({environment:t,editorMode:o,store:n,string:"\n",selection:e.selection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:i})}})}}const Y={fontSize:14,paddingLeft:6,paddingBottom:4,paddingTop:3,width:780};function $(e){let{descriptionStore:t,disabled:n,toggleStore:r,pageId:s,userSettingsStore:a}=e;const c=(0,i().v3)(),d=(0,u().tz)(),{device:p}=c,f=(0,_().S)(),S=(0,o.useRef)(null),x=(0,o.useCallback)((e=>Q(e,c,t,n,S.current,f)),[c,t,n,f,S]),m=(0,l().K8)((()=>N(r)),[r]);return t?(0,V.jsx)(P().A,{ref:S,store:t,style:Y,disabled:n,placeholder:d.formatMessage({defaultMessage:"Add a descriptionâ€¦",id:"pageDescription.emptyPlaceholder"}),disableSlashCommands:!0,disableEmbedMenu:!0,disableMentions:!0,onTab:H,onUntab:G,onEnter:x,onClick:m?k().lQ:e=>function(e,t,n,o,i,r){N(t)||e.preventDefault(),g().Bq({toggleStore:t,pageId:n,descriptionStore:o,environment:i,userSettingsStore:r})}(e,r,s,t,c,a),disableStyleAnnotations:p.isMobileBrowser,disableInsertedDeletedAnnotations:p.isMobileBrowser,disableHorizontalEdgeScroll:!0,pasteBehavior:"inline",inPageFind:B().Os.none}):null}function J(e){let{descriptionStore:t,disabled:n,toggleStore:o,pageId:r,userSettingsStore:l,collectionStore:s,locked:a,canEdit:c}=e;return(0,i().v3)().device.isMobile?(0,V.jsx)($,{descriptionStore:t,disabled:n,toggleStore:o,pageId:r,userSettingsStore:l}):(0,V.jsx)(T().A,{renderTooltip:()=>(0,V.jsx)(O,{collectionStore:s}),disableTooltip:!a||!c,render:e=>(0,V.jsx)("div",{children:(0,V.jsx)("div",{style:{display:"flex",cursor:"text"},...e,children:(0,V.jsx)($,{descriptionStore:t,disabled:n,toggleStore:o,pageId:r,userSettingsStore:l})})})})}var X=()=>n(692347),q=()=>n(991649),Z=()=>n(216030),ee=()=>n(48913),te=()=>n(515347),ne=()=>n(485966),oe=()=>n(755648),ie=()=>n(836331),re=()=>n(797470),le=()=>n(547124),se=()=>n(308265),ae=()=>n(64713),ce=()=>n(615917),de=()=>n(209684),ue=()=>n(381959),ge=()=>n(229419);function pe(e){const{canEdit:t,context:n,controlHoverStyle:v,disabled:_,handleHeaderMouseEnter:I,handleHeaderMouseLeave:C,headerFocusStore:k,isEditable:M,paddingLeft:w,paddingRight:K,pageCover:A,store:E,topControls:T,onCollectionViewBlockMount:P,editorContentContainerRef:B,forceLocalQueryCollection:D,productUseCase:L,pageViewBlockStore:R}=e,F=(0,i().v3)(),z=(0,i().Y0)(),[N,O]=(0,o.useState)(!!z.isAndroid);(0,o.useEffect)((()=>{(async()=>{if((0,h().w6)(F)){const e=F.RouterStore.getState();if((0,c().bh)(e.route)){const e=(0,te().GN)(E),t=null==e?void 0:e.getSiteStore();await(null==t?void 0:t.load());const n=null==t?void 0:t.getSettings(),o=null==n?void 0:n.embedSettings;return void O(Boolean(!(null!=o&&o.hideTitle)))}}O(!0)})()}),[F,E]);const H=(0,l().K8)((()=>E.getCollectionViewSourceDescriptionStoreIfSingleSource()),[E]),G=(0,l().K8)((()=>E.getCollectionStoreIfSingleSource()),[E]),Q=(0,l().K8)((()=>1===E.getAllSourceCollectionStores().length&&0===E.getAllLinkedCollectionStores().length),[E]),Y=(0,l().K8)((()=>g().OW(H)),[H]),$=(0,l().K8)((()=>E.getTitleStore()),[E]),J=(0,l().K8)((()=>U().Uv.getMode(E)),[E]),ie=o.useRef(!1);(0,o.useEffect)((()=>{if(!ie.current){ie.current=!0;const{currentUserSettingsStore:e}=ne().default.state;g().K$({pageId:E.id,store:R,userSettingsStore:e,descriptionHasText:Y})}}),[Y,E.id,R]);const le=(0,l().K8)((()=>d().q4_(null==$?void 0:$.getValue())),[$]),se=(0,l().K8)((()=>!(0!==E.getCollectionViewStores().length)||(!!Q||!!$&&(!!le||!!(0,y().j_)($)))),[E,$,le,Q]),pe=(0,l().K8)((()=>S().sj(E.id)||S().Wu(E.id)),[E]),Se=(0,l().K8)((()=>(0,m().NR)(E,F)),[E,F]),xe=(0,l().K8)((()=>(0,m().uf)(E,n,F)),[E,n,F]),me=(0,b().dK)(E),he=(0,b().l8)(E),ye=me||he,ve=()=>{const{currentUserSettingsStore:e}=ne().default.state,t=E.id;g().o({environment:F,pageId:t,isExpanded:!1,store:R,userSettingsStore:e,descriptionStore:H})},be=()=>{const{currentUserSettingsStore:e}=ne().default.state,t=E.id;g().o({environment:F,pageId:t,isExpanded:!0,store:R,userSettingsStore:e,descriptionStore:H})},je=(0,l().K8)((()=>{const e=R.state.isPageDescriptionExpanded;return(g().OW(H)||M)&&e}),[H,M,R]),_e=(0,l().K8)((()=>{if(!je)return{type:"hidden"};if(!H)return{type:"hidden"};if(!R.state.isPageDescriptionExpanded)return{type:"hidden"};const{currentUserSettingsStore:e}=ne().default.state;return{type:"visible",descriptionStore:H,currentUserSettingsStore:e,collectionStore:G}}),[H,G,R,je]),Ie=(0,l().K8)((()=>E.isNonEditableState()),[E]),Ce=e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,r().p)(t)&&k.setState(!0)},ke=()=>{const{currentUserSettingsStore:e}=ne().default.state,t=H;g().de({environment:F,pageId:E.id,store:R,userSettingsStore:e,isExpanded:!0,descriptionStore:t})},Me=()=>{k.setState(!1)},we=()=>{$&&(p().IU({environment:F}),f().setSelectionAtEnd({store:$}))},Ke=()=>{if(!Q&&M&&!le)return(0,V.jsx)(de().p,{style:v,isLightGray:!0,onClick:we,icon:a().D,children:z.isSmallPhone?(0,V.jsx)(u().sA,{id:"pageViewBlock.add.pageTitleMobile",defaultMessage:"Title"}):(0,V.jsx)(u().sA,{id:"pageViewBlock.add.pageTitle",defaultMessage:"Add title"})},"add-title")},Ae=()=>{if(G)return je?(0,V.jsx)(de().p,{isLightGray:!0,style:v,onClick:ve,icon:s().p,children:(0,V.jsx)(u().sA,{defaultMessage:"Hide description",id:"pageViewBlock.hideDescription.button"})}):M&&!Y&&"suggest"!==J?(0,V.jsx)(de().p,{isLightGray:!0,style:v,onClick:ke,icon:s().p,children:z.isSmallPhone?(0,V.jsx)(u().sA,{defaultMessage:"Description",id:"pageViewBlock.addDescription.mobileButton"}):(0,V.jsx)(u().sA,{defaultMessage:"Add description",id:"pageViewBlock.addDescription.button"})}):Y?(0,V.jsx)(de().p,{isLightGray:!0,style:v,onClick:be,icon:s().p,children:z.isSmallPhone?(0,V.jsx)(u().sA,{defaultMessage:"Description",id:"pageViewBlock.showDescription.mobileButton"}):(0,V.jsx)(u().sA,{defaultMessage:"Show description",id:"pageViewBlock.showDescription.button"})}):void 0},Ee=!(0,x().my)({device:z}),Te=(0,l().K8)((()=>(0,ee().Uh)(F)+(0,ee().zo)(F,!1)-oe().A.state-w),[F,w]),Pe=(0,l().K8)((()=>{const{WindowSizeStore:e}=F;return{paddingLeft:e.getSafePaddingLeftCSS(w),paddingRight:e.getSafePaddingRightCSS(K)}}),[F,w,K]);const Be=(0,l().K8)((()=>function(e,t){if(!function(e){var t;return e.id===(null===(t=ne().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id)}(t))return;const{RouterStore:n}=e,o=n.state.route;if("page"===o.name)return o.collectionViewId}(F,E)),[E,F]);return(0,V.jsxs)(V.Fragment,{children:[N&&function(){const o=pe?null:(0,V.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[(0,V.jsx)(X().A,{...e}),se&&(0,V.jsx)(Z().s,{...e})]});return(0,V.jsxs)("div",{style:Se,onMouseEnter:I,onMouseLeave:C,children:[A,(0,V.jsxs)(ce().A,{animate:{width:xe},style:{maxWidth:"100%",paddingLeft:Pe.paddingLeft},children:[(0,V.jsxs)(ue().A,{store:E,context:e.context,onFocus:Ce,onBlur:Me,children:[(0,V.jsx)(fe,{store:E,style:v}),T,Ke(),Ee&&Ae()]}),(0,V.jsxs)("div",{style:{paddingRight:Pe.paddingRight,marginBottom:8,width:Te},children:[o,ye&&(0,V.jsx)(ge().GL,{store:E}),"visible"===_e.type&&(0,V.jsx)(W,{disabled:!M,canEdit:t,locked:Ie,pageId:E.id,toggleStore:R,descriptionStore:_e.descriptionStore,collectionStore:_e.collectionStore,userSettingsStore:_e.currentUserSettingsStore}),(0,V.jsx)(q().h,{store:E,context:n,layoutModule:void 0,disabled:_||"suggest"===J,wrapper:e=>(0,V.jsx)(j().vV,{className:"layout-content-with-divider",children:e})},E.id)]})]})]})}(),(0,V.jsx)(ae().dN,{editorContentContainerRef:B,overridePaddingLeft:w,overridePaddingRight:K,store:E,isFullScreen:!0,productUseCase:L||"full_page",viewId:Be,disabled:_,headerActionsBehavior:n===re().Rr.InAppTemplatePreview?"hidden":"default",onMount:P,forceLocalQueryCollection:D})]})}function fe(e){return(0,l().K8)((()=>(0,se().sx)()&&ie().default.checkGate({gateName:"workflows_permissions"})),[])?(0,V.jsx)(ae().h3,{...e}):null}function Se(e){const t=(0,i().v3)(),{value:n}=(0,v().fJ)(le().oQ.workflowNavigationHelpers);return(0,l().K8)((()=>null==n?void 0:n.getIsWorkflowEditorOpen(t)),[t,n])?(0,V.jsx)(le().$b,{...e,renderLoading:()=>(0,V.jsx)(pe,{...e})}):(0,V.jsx)(pe,{...e})}const xe=o.memo(pe,n(21045).A)},381959:(e,t,n)=>{n.d(t,{A:()=>d});n(242343);var o=()=>n(16791),i=()=>n(237385),r=()=>n(803290),l=()=>n(174114),s=()=>n(31448),a=()=>n(400885),c=n(163643);function d(e){const{store:t,context:n,onFocus:d,onBlur:u,children:g}=e,p=(0,i().v3)(),f=(0,r().K8)((()=>{const{device:e}=p,{isMobile:o}=e,i=(0,a().XD)(n,p);let r,l,s;return o?t.getCover()?(t.getIcon(),s="block",r=i,l=4):(s="flex",r=i,l=(0,a().$n)(p)):t.isCollectionView()||(0,a().mb)(t)?(s="flex",t.getCover()?(r=16,l=4):(r=4,l=4)):(s="flex",t.getIcon()?(r=8,l=4):t.getCover()?(r=16,l=4):(r=i,l=(0,a().$n)(p))),{display:s,paddingTop:r,paddingBottom:l}}),[n,p,t]),S=(0,l().IS)((e=>({container:{...f,justifyContent:"flex-start",flexWrap:"wrap",marginLeft:-1,color:e.text.tertiary,fontFamily:s().vc(o().locale).sans,pointerEvents:"auto"}})),[f]);return(0,c.jsx)("div",{onFocus:d,onBlur:u,style:S.container,className:"notion-page-controls",children:g})}},475105:(e,t,n)=>{n.d(t,{H5:()=>b,ZY:()=>v,gk:()=>y,kM:()=>h});n(242343);var o=()=>n(16791),i=()=>n(237385),r=()=>n(803290),l=()=>n(174114),s=()=>n(338828),a=()=>n(653998),c=()=>n(31448),d=()=>n(204435),u=()=>n(397791),g=()=>n(286404),p=()=>n(755786),f=()=>n(755989),S=()=>n(943066),x=()=>n(510359),m=n(163643);function h(e){const{collectionContextStore:t,property:n,compact:o}=e,i=(0,r().K8)((()=>p().Jq(t,n)),[t,n]),l=(0,f().kg)(i);return l?(0,m.jsx)(y,{featureName:l,compact:o,source:"collection_connected_property"}):null}function y(e){const t=(0,i().v3)(),{featureName:n,compact:o,source:r}=e,p=(0,l().IS)((e=>({background:{backgroundColor:e.surface.wash,display:"flex",flexDirection:"row",marginLeft:8,marginRight:8,marginBottom:12,borderRadius:8,padding:"12px 14px",gap:8},icon:{width:20,height:20,padding:o?0:2,marginRight:2,marginLeft:o?0:2},title:{lineHeight:c().K_.UIRegular.desktop,fontSize:c().J.UIRegular.desktop,letterSpacing:"-0.15px",color:e.text.primary,marginBottom:4,display:"flex",flexDirection:"row"},description:{lineHeight:c().K_.UIRegular.desktop,fontSize:c().J.UIRegular.desktop,letterSpacing:"-0.15px",color:e.text.secondary,marginBottom:12},button:{width:"fit-content",padding:"4px 8px",marginBottom:2}})),[o]),x=(0,f().uF)({featureName:n});if(null==x||!x.upsell)return null;const{upsell:h,upsellTier:y,expirationDate:j}=x,_=(0,m.jsx)(u().I,{style:p.icon,icon:s().arrowInCircleUpFillIcon,color:"uiBluePrimary"});return(0,m.jsxs)("div",{style:p.background,children:[o?null:_,(0,m.jsxs)(d().VP,{gap:0,children:[(0,m.jsxs)("div",{style:p.title,children:[o?_:null,(0,m.jsx)(v,{upsellTier:y})]}),(0,m.jsx)("div",{style:p.description,children:(0,m.jsx)(b,{expirationDate:j,hasLearnMore:!0})}),(0,m.jsx)(g().A,{style:p.button,onClick:()=>{S().K(t,{from:r,upsell:h})},children:(0,m.jsx)(a().sA,{defaultMessage:"Upgrade",id:"collectionSettings.connectedRelationUpsell.upgrade"})})]})]})}function v(e){let{upsellTier:t}=e;return(0,m.jsx)(a().sA,{defaultMessage:"Upgrade to {upsellTier, select, plus {Plus} business {Business} enterprise {Enterprise} other {connect}}",id:"collectionSettings.connectedRelationUpsell.title",values:{upsellTier:t}})}function b(e){let{expirationDate:t,hasLearnMore:n}=e;return t?(0,m.jsx)(a().sA,{defaultMessage:"You will lose access to this feature on {expirationDate}.{hasLearnMore, select, true { {learnMoreLink}} other {} }",id:"collectionSettings.collectionPremiumFeatureUpsell.expiration.description",values:{expirationDate:t.setLocale(o().locale).toLocaleString({month:"long",day:"numeric"}),hasLearnMore:n,learnMoreLink:(0,m.jsx)(x().V,{})}}):(0,m.jsx)(a().sA,{defaultMessage:"You donâ€™t have access to this feature.{hasLearnMore, select, true { {learnMoreLink}} other {} }",id:"collectionSettings.collectionPremiumFeatureUpsell.noExpiration.description",values:{hasLearnMore:n,learnMoreLink:(0,m.jsx)(x().V,{})}})}},510359:(e,t,n)=>{n.d(t,{V:()=>s});n(242343);var o=()=>n(174114),i=()=>n(653998),r=n(163643);const l="https://www.notion.com/blog/notion-ai-for-work";function s(){const e=(0,o().IS)((e=>({default:{cursor:"pointer",textDecoration:"none",color:e.text.uiBluePrimary}})),[]);return(0,r.jsx)("a",{href:l,target:"_blank",style:{...e.default},children:(0,r.jsx)(i().sA,{id:"PackingChangeLearnMore.learnMore",defaultMessage:"Learn more"})})}},517722:(e,t,n)=>{n.d(t,{A:()=>A,m:()=>L});n(242343);var o=()=>n(237385),i=()=>n(803290),r=()=>n(174114),l=()=>n(810111),s=()=>n(338828),a=()=>n(384818),c=()=>n(723361),d=()=>n(96718),u=()=>n(653998),g=()=>n(220413),p=()=>n(31448),f=()=>n(521325),S=()=>n(750094),x=()=>n(475105),m=()=>n(137476),h=()=>n(251763),y=()=>n(370639),v=()=>n(439146),b=()=>n(289113),j=()=>n(755989),_=()=>n(963768),I=()=>n(943066),C=()=>n(204435),k=()=>n(356813),M=()=>n(931085),w=n(163643);const K=(0,u().YK)({upgrade:{defaultMessage:"Upgrade",id:"syncedCollectionIndicators.upsell.upgrade"}});const A=function(e){let{collectionStore:t,collectionContextStore:n}=e;return(0,i().K8)((()=>t.isSyncedCollection()),[t])?(0,w.jsx)(B,{collectionStore:t,collectionContextStore:n}):null};function E(e){return{color:e.text.secondary,fontSize:12,lineHeight:1.2}}function T(e){let{collectionStore:t,collectionContextStore:n}=e;const l=(0,r().DP)(),s=(0,o().v3)(),d=(0,i().K8)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("syncing").getValue()),[t]),p=(0,i().K8)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("last_synced_at").getValue()),[t]),S=(0,i().K8)((()=>null==n?void 0:n.numberChildrenUnfurledStore.state),[n]),x=(0,i().K8)((()=>null==n?void 0:n.numberChildrenReceivedStore.state),[n]),m=S&&x&&S/x<1&&!s.device.isMobile,h=d&&s.device.isMobile;let y;return p&&(y=(0,w.jsx)(u().sA,{defaultMessage:"Synced {lastSyncedAt}",id:"synced.lastSyncedAt.label",values:{lastSyncedAt:(0,b().nl)(p,{useLowercase:!0})}})),"row_limit_exceeded"===d?(0,w.jsx)(M().A,{style:{display:"inline-flex",...E(l)},onClick:()=>function(e){e&&(f().Ow({collectionContextStore:e,collectionSettingsStore:e.settingsStore}),f().a2({collectionSettingsStore:e.settingsStore,item:{type:"source"}}))}(n),children:(0,w.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...E(l)},children:[(0,c().Q)({fill:(0,g().k5)("orange",l).fill,marginLeft:4,marginRight:4,width:12,alignSelf:"center"}),(0,w.jsx)(u().sA,{defaultMessage:"Partial Sync",id:"synced.partial_sync.label"})]})}):m||h?(0,w.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...E(l)},children:[(0,w.jsx)(u().sA,{defaultMessage:"Syncing",id:"synced.syncing.label"}),(0,a().$)({marginLeft:4,marginRight:4,width:12,alignSelf:"center"},"sync-spinner")]}):(0,w.jsx)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...E(l)},children:y})}function P(){const e=(0,o().v3)(),t=(0,r().IS)((e=>({span:{color:e.text.secondary},linkBox:{fontSize:"14px",lineHeight:1.2,color:e.blueColor,marginLeft:"5px",marginRight:"5px"}})),[]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{style:t.span,children:"â€¢"}),(0,w.jsx)(M().A,{inline:!0,onClick:async()=>{await S().jh({environment:e,from:"collection_header"});const t=_().Ay.createNewFlowId();(0,m().u4)({environment:e,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"database_sync",flowId:t}}})},style:t.linkBox,hoveredStyle:{background:"none",textDecoration:"underline"},children:(0,w.jsx)(u().sA,{defaultMessage:"Improve your Jira sync",id:"synced.improve_jira_sync.label"})})]})}function B(e){let{collectionStore:t,collectionContextStore:n}=e;const o=(0,r().DP)(),s=(0,i().K8)((()=>t.getFormatStore().getKeyStore("original_url").getValue()),[t]),a=(0,i().K8)((()=>t.getSpaceId()),[t]),c=(0,i().K8)((()=>Boolean(t.getFormatStore().getKeyStore("sync_state").getValue())),[t]),d=(0,i().K8)((()=>s&&(0,h().e)(s,a)),[a,s]),u=(0,i().K8)((()=>(0,v().fH)(s,a)),[a,s]),g=(0,i().K8)((()=>{if(!(0,y().pB)())return!1;const e=t.getFormat().uri;return!!e&&(t.getFormat().external_collection_type!==l().uO.Jira&&(0,v().Ip)(e))}),[t]);return(0,w.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[d&&(0,w.jsx)(M().A,{href:d,style:{display:"inline-flex"},hoveredStyle:{background:"none",textDecoration:"underline"},innerStyle:{flexShrink:1,width:"none",padding:"2px 0px",marginRight:5,borderRadius:4,display:"flex",alignItems:"center",alignSelf:"center",...E(o)},external:!0,children:u}),c?(0,w.jsx)("span",{style:{color:o.text.secondary},children:"â€¢"}):null,c?(0,w.jsx)(T,{collectionStore:t,collectionContextStore:n}):null,g&&(0,w.jsx)(P,{}),(0,w.jsx)(D,{collectionStore:t})]})}function D(e){let{collectionStore:t}=e;const n=(0,i().K8)((()=>{const e=(0,v().cl)(t.getFormat().uri,t.getSpaceId());return(null==e?void 0:e.id)??t.getFormat().integration_id}),[t]),o=(0,d().l)(n);return o?(0,w.jsx)(L,{featureName:o}):null}function L(e){let{featureName:t}=e;const n=(0,o().v3)(),i=(0,u().tz)(),l=(0,r().IS)((e=>({upgradeDescription:{fontSize:p().J.UISmall.desktop,lineHeight:p().K_.UISmall.desktop,color:e.text.secondary}})),[]),a=(0,j().uF)({featureName:t});if(null==a||!a.upsell)return null;const{upsell:c,expirationDate:d}=a;return(0,w.jsxs)(C().fI,{alignItems:"center",children:[(0,w.jsx)(k().A,{onClick:()=>{I().K(n,{from:"collection_synced_database",upsell:c})},isBlue:!0,size:"sm",icon:s().arrowInCircleUpFillIcon,ariaLabel:i.formatMessage(K.upgrade)}),(0,w.jsx)("div",{style:l.upgradeDescription,children:(0,w.jsx)(x().H5,{expirationDate:d,hasLearnMore:!0})})]})}},692347:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(242343),i=()=>n(803290),r=()=>n(762847),l=()=>n(28210),s=()=>n(927685),a=()=>n(782422),c=n(163643);const d=o.memo((function(e){let{store:t,isEditable:d,hasCover:u,isInSidePeek:g,openMenuOnMount:p,openMenuOnMountCallback:f,isInPageLayoutModuleEditor:S,isInlinePostTitle:x}=e;const m=(0,n(237385).v3)(),h=(0,n(653998).tz)(),y=(0,n(174114).DP)(),v=(0,i().K8)((()=>t.isPersonProfile()),[t]),b=(0,i().K8)((()=>v?t.getPersonProfileUserStore():void 0),[v,t]),j=(0,i().K8)((()=>t.getIcon()),[t]),_=(0,i().K8)((()=>t.getIconStore()),[t]),I=(0,i().K8)((()=>t.getType()),[t]),C=(0,i().K8)((()=>{if(t.isCollectionView()){const e=t.getCollectionStoreIfSingleSource();return!!e&&e.isSyncedCollection()}return t.isType(r().xd.externalObjectInstancePage)}),[t]),k=(0,i().K8)((()=>t.isType(r().xd.form)),[t]),M=(0,i().K8)((()=>t.isCollectionView()),[t])||g,w=x,K=(0,i().K8)((()=>t.isEmptyPage()),[t]),A=(0,i().K8)((()=>n(615661).Uv.getMode(t)),[t]),E=(0,o.useCallback)((async e=>{const o=t.getIconStore();if(o){const t=(0,n(185912).pc)({source:e,secureFileConfigRootpath:s().A.secureFileConfig.rootPath,secureFileConfigHostname:s().A.secureFileConfig.hostname}),i=t?t.link:e,{serverCommitResult:r}=n(84543).createAndCommit({userAction:"PageIcon.handleChange",environment:m,canUndo:!0,perform:e=>{n(759625).KY({store:o,value:i,transaction:e})}});await r}}),[m,t]),T={position:"relative",zIndex:1,marginLeft:3,marginBottom:m.device.isMobile?8:0,marginTop:4,pointerEvents:"auto"},P={marginRight:4};let B,D,L;if(w?Object.assign(T,P):M?T.marginRight=6:T.marginTop=u&&!S?-80:m.device.isMobile||S?0:(0,a().Ws)(m)-(k?32:0),B=w?{...P}:M?{marginTop:4,marginRight:8}:{marginTop:u&&!S?-42:m.device.isMobile||S?0:(0,a().Ws)(m)-(k?32:0)},w?(D=26,T.height=D,T.width=D):D=M?36:C?74:140,v)return T.borderRadius="50%",T.background=y.contentBackground,T.overflow="hidden",T.width=D,T.border="2px solid white",(0,c.jsx)("div",{style:T,children:(0,c.jsx)(n(482570).A,{userStore:b,size:D})});if(L=w?26:M?36:78,!j&&!x)return null;if(d&&"suggest"!==A){const e=null==_?void 0:_.table;return(0,c.jsx)(l().B,{disabled:!1,bucket:"secure",icon:j,store:t,isEmptyPage:K,onChange:E,size:D,emojiSize:L,style:T,emojiStyle:B,largeIcon:!0,openMenuOnMount:p,openMenuOnMountCallback:f,isInlinePostTitle:x,iconLoggingData:{recordTable:e,source:"page_header",block_type:I,collection_id:"collection"===e?null==_?void 0:_.id:void 0},label:h.formatMessage({id:"layout.pageIcon.label",defaultMessage:"Change page icon"}),testId:"pageIcon"})}return(0,c.jsx)(l().B,{disabled:!0,icon:j,isEmptyPage:K,size:D,emojiSize:L,style:T,emojiStyle:B,largeIcon:!0,label:h.formatMessage({id:"layout.pageIcon.disabledLabel",defaultMessage:"Page icon"}),testId:"pageIcon"})}))},755989:(e,t,n)=>{n.d(t,{Ld:()=>d,kg:()=>u,uF:()=>g});var o=()=>n(803290),i=()=>n(564134),r=()=>n(706788),l=()=>n(405317),s=()=>n(96718),a=()=>n(485966),c=()=>n(133926);function d(e){let{spaceId:t,userId:n}=e;const o=(0,c()._X)({name:"collection_connected_property_figma",spaceId:t,userId:n}),i=(0,c()._X)({name:"collection_connected_property_github",spaceId:t,userId:n}),l=(0,c()._X)({name:"collection_connected_property_google_drive",spaceId:t,userId:n}),s=(0,c()._X)({name:"collection_connected_property_zendesk",spaceId:t,userId:n});return{[r().e1]:o,[r().ob]:i,[r().Hd]:l,[r().k0]:s}}function u(e){if(!e)return;const t=e&&(0,i().UU)(e)?e.connectedRelation.integration_id:void 0;return(0,s().l)(t)}function g(e){let{featureName:t}=e;const n=function(e){const t=e.featureName,n=(0,o().K8)((()=>{var t;return e.spaceId??(null===(t=a().default.state.currentSpaceStore)||void 0===t?void 0:t.id)}),[e.spaceId]),i=(0,o().K8)((()=>{var t;return e.userId??(null===(t=a().default.state.currentUserStore)||void 0===t?void 0:t.id)}),[e.userId]);return(0,c()._X)({name:t,spaceId:n,userId:i})}({featureName:t});if(!n)return;const i=(0,l().e2)(n),r=(0,l().Xq)(n);let s,d;return!r||"product"!==r.type||"plus"!==r.product&&"business"!==r.product&&"enterprise"!==r.product||(s=r.product),i&&(d=i&&n.expiry&&"sunset"===n.expiry.type?n.expiry.endDate:void 0),{isAvailable:i,expirationDate:d,upsell:r,upsellTier:s}}},899037:(e,t,n)=>{n.d(t,{Bq:()=>u,K$:()=>p,OW:()=>a,de:()=>d,o:()=>g});var o=()=>n(752597),i=()=>n(34662),r=()=>n(384221),l=()=>n(84543);const s=1e3;function a(e){if(e){const t=(0,i().q4_)(e.getValue());return Boolean(t)}return!1}function c(e){if(e){const t=e.getSettings();if(t&&t.hidden_collection_descriptions)return t.hidden_collection_descriptions}return[]}function d(e){const{environment:t,descriptionStore:n}=e;g(e),o().default.afterNextFlush((()=>{n&&!t.device.isMobileBrowser&&r().setSelectionAtEnd({store:n})}))}function u(e){const{toggleStore:t,pageId:n,descriptionStore:o,environment:i,userSettingsStore:r}=e;g({environment:i,pageId:n,isExpanded:!t.state.isPageDescriptionExpanded,store:t,userSettingsStore:r,descriptionStore:o})}function g(e){const{environment:t,pageId:n,isExpanded:o,store:i,userSettingsStore:r,descriptionStore:d}=e,u=i.state.isPageDescriptionExpanded;i.setState({...i.state,isPageDescriptionExpanded:o});a(d)&&r&&u!==o&&l().createAndCommit({userAction:"pageDescriptionActions.setExpanded",environment:t,canUndo:!0,perform:e=>{if(o){const t={pointer:{table:"user_settings",id:r.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:n}};l().applyOperation({store:r,transaction:e,operation:t})}else{const t={pointer:{table:"user_settings",id:r.id},path:["settings","hidden_collection_descriptions"],command:"listAfter",args:{id:n}};l().applyOperation({store:r,transaction:e,operation:t});let o=c(r);for(;o.length>s;){const t=o[0],n={pointer:{table:"user_settings",id:r.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:t}};l().applyOperation({store:r,transaction:e,operation:n}),o=c(r)}}}})}function p(e){const{pageId:t,store:n,userSettingsStore:o,descriptionHasText:i}=e;let r=i;c(o).includes(t)&&(r=!1),n.setState({...n.state,isPageDescriptionExpanded:r})}}}]);