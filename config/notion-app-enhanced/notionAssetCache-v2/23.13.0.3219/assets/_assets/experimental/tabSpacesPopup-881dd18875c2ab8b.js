"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[87137],{639002:(e,t,a)=>{a.r(t),a.d(t,{TabSpacesPopup:()=>Q});var n=a(242343),o=()=>a(237385),i=()=>a(803290),c=()=>a(129808),s=()=>a(443252),r=()=>a(48913),l=()=>a(907721),p=()=>a(466321),d=()=>a(216273),u=()=>a(429044),b=()=>a(221573),g=()=>a(174114),S=()=>a(625491),h=()=>a(389136),m=()=>a(680369),x=a(163643);const f={viewBox:"0 0 20 20",svg:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("path",{d:"M6.75 2.545a.55.55 0 0 1 .55-.55h5.4a.55.55 0 0 1 0 1.1H7.3a.55.55 0 0 1-.55-.55m-1.25 1.7a.55.55 0 1 0 0 1.1h9a.55.55 0 0 0 0-1.1zm-2.537 4.3c0-1.174.951-2.125 2.125-2.125h9.825c1.174 0 2.125.951 2.125 2.125v6.45a2.125 2.125 0 0 1-2.125 2.125h-6.45a4.6 4.6 0 0 0 .135-1.25h6.315a.875.875 0 0 0 .875-.875v-6.45a.875.875 0 0 0-.875-.875H5.088a.875.875 0 0 0-.875.875v2.86a4.7 4.7 0 0 0-1.25.112z"}),(0,x.jsx)("path",{d:"M2.963 12.656A3.502 3.502 0 0 0 4 19.5a3.5 3.5 0 1 0-1.037-6.844m-1.557 3.375c0-.345.28-.625.625-.625h1.375v-1.375a.625.625 0 0 1 1.25 0v1.375h1.375a.625.625 0 0 1 0 1.25H4.656v1.375a.625.625 0 1 1-1.25 0v-1.375H2.031a.625.625 0 0 1-.625-.625"})]})},v=(0,m().wt)("rectangleStackBadgePlus",f);var y=()=>a(598758),T=()=>a(836693),j=()=>a(653998),M=()=>a(31448),k=()=>a(437071),I=()=>a(97787),C=()=>a(441292),w=()=>a(935091),A=()=>a(88271),R=()=>a(35462),D=()=>a(640979);function B(e){const t={height:20,width:20,fill:e.icon.secondary};return{icon:t,iconLight:{...t,fill:e.icon.tertiary},iconDark:{...t,fill:e.icon.primary},buttonList:{display:"flex",flexDirection:"column",gap:2},button:{width:"100%",borderRadius:6},tabSpaceButton:{display:"flex",fontSize:14,height:28,paddingLeft:10,paddingRight:10,color:e.text.primary,alignItems:"center",justifyContent:"space-between",maxWidth:250,width:"100%"},tabSpaceLabelWrapper:{display:"flex",alignItems:"center",flex:1,minWidth:0,gap:8,height:"100%"},tabSpaceTitleText:{display:"flex",alignItems:"center",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",lineHeight:0,height:"100%"},currentSelectedTabSpace:{background:e.sidebarItemSelectedBackground,color:e.text.primary,borderRadius:6},tabSpaceIcon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:22,height:18},rightIconWrapper:{display:"flex",alignItems:"center",justifyContent:"center",gap:4,marginLeft:6}}}var P=()=>a(974567),E=()=>a(3311),G=()=>a(791497),L=()=>a(59175),H=()=>a(28210);function W(e){let{mode:t,setMode:a,originRect:o,tabSpaceId:i,initialTitle:c,initialIcon:r,onSave:d,isCreate:u}=e;const[b,S]=(0,n.useState)({title:c,icon:r});(0,n.useEffect)((()=>{S({icon:r,title:c})}),[r,c]),(0,n.useEffect)((()=>()=>{G().I()}),[]);const h=(0,g().IS)((e=>({...B(e),wrapper:{display:"flex",alignItems:"center",color:e.text.primary,fontSize:14,padding:"4px 8px",width:250},iconButton:{width:28,height:28,marginRight:6,flexShrink:0,flexGrow:0,boxShadow:`inset 0 0 0 1px ${e.darkDividerColor}`},input:{display:"block",flexGrow:1,fontSize:14,lineHeight:"20px",paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,width:"100%",borderRadius:4,boxShadow:e.inputBoxShadow,background:e.inputBackground,cursor:"text",position:"relative"}})),[]),m=(e,t)=>{d(b.title,t?void 0:e??b.icon,i),S({title:void 0,icon:void 0})},f=e=>{var t;const a=void 0===e;S((t=>({...t,icon:e}))),null!==(t=b.title)&&void 0!==t&&t.length&&m(e,a)},v=e=>{S((t=>({...t,title:e.target.value})))},y=e=>{"Enter"===e.key&&(e.preventDefault(),m())},T=(0,n.useMemo)((()=>{if(void 0!==b.icon)return{icon:b.icon,pointer:{table:"block",id:(0,E().Ay)()}}}),[b.icon]);return(0,x.jsx)(s().Ay,{popupType:p().n.Popup,render:()=>(0,x.jsx)(w().A,{menuType:D().gu.Popup,children:(0,x.jsx)(C().A,{debugName:"RenameTabSpacePopup",capture:!0,allowMenuList:!1,allowEsc:!0,children:(0,x.jsxs)("div",{style:h.wrapper,children:[(0,x.jsx)(H().B,{disabled:!1,bucket:"public",icon:T,defaultIcon:(0,P().G)(h.icon),isEmptyPage:!1,size:18,onChange:f,style:h.iconButton,mediaPickerTabs:["emoji"],hideCustomEmoji:!0,openMenuOnMount:"icon"===t}),(0,x.jsx)(L().A,{value:b.title,onFocus:()=>a("rename"),onChange:v,onKeyDown:y,autoFocus:"rename"===t,maxlength:40,style:h.input})]})})}),open:Boolean(t),originRect:o,placementToOrigin:u?l().W.Bottom:l().W.Center,alignmentToOrigin:l().C.Center,onDismiss:()=>m(),trapFocus:!0})}var F=()=>a(726284),z=()=>a(533666),O=()=>a(126451),K=()=>a(356813);const N=(0,j().YK)({more:{id:"tabSpacesMenuItem.more",defaultMessage:"More"}});function Y(e){let{label:t,icon:a,onClick:n=(()=>{})}=e;const o=(0,g().IS)((e=>B(e)),[]);return(0,x.jsx)(O().A,{onClick:n,style:o.button,children:(0,x.jsx)("div",{style:o.tabSpaceButton,children:(0,x.jsxs)("div",{style:o.tabSpaceLabelWrapper,children:[(0,x.jsx)("div",{style:o.tabSpaceIcon,children:a||(0,F().browserAddIcon)(o.iconDark)}),t]})})})}function V(e){let{label:t,openSecondaryPopup:a,setSelectedTabSpaceData:o,icon:i,isChecked:c=!1,onClick:s=(()=>{}),tabSpaceId:r}=e;const l=(0,n.useRef)(null),[p,d]=(0,n.useState)(!1),u=(0,g().IS)((e=>({...B(e),ellipsisButton:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,marginLeft:4},ellipsisButtonIcon:{height:m().Ev.sm,width:m().Ev.sm}})),[]),b=(0,j().tz)();return(0,x.jsx)(O().A,{onClick:s,style:u.button,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:(0,x.jsxs)("div",{ref:l,style:{...u.tabSpaceButton,...c?u.currentSelectedTabSpace:{}},children:[(0,x.jsxs)("div",{style:u.tabSpaceLabelWrapper,children:[(0,x.jsx)("div",{style:u.tabSpaceIcon,children:i||(0,P().G)(u.icon)}),(0,x.jsx)("div",{style:u.tabSpaceTitleText,children:t})]}),(0,x.jsx)("div",{style:u.rightIconWrapper,children:Boolean(r)&&p&&(0,x.jsx)("div",{style:u.tabSpaceIcon,children:(0,x.jsx)(K().A,{icon:z().Y,ariaLabel:b.formatMessage(N.more),style:u.ellipsisButton,iconStyle:u.ellipsisButtonIcon,onClick:e=>{e.stopPropagation(),l.current&&(a(e.currentTarget.getBoundingClientRect()),o(l.current.getBoundingClientRect(),r))}})})})]})})}const $=(0,j().YK)({newGroupFromTabs:{id:"tabSpacesMenu.newGroupFromTabs",defaultMessage:"New group from {count} {count, plural, one {tab} other {tabs}}"},newEmptyGroup:{id:"tabSpacesMenu.newEmptyGroup",defaultMessage:"New empty group"},ungroupedTabs:{id:"tabSpacesMenu.ungroupedTabs",defaultMessage:"{count} ungrouped {count, plural, one {tab} other {tabs}}"},tabGroups:{id:"tabSpacesMenu.tabGroups",defaultMessage:"Tab groups"},tabSpaceActionChangeIcon:{id:"tabSpacesMenu.changeIcon",defaultMessage:"Change icon"},tabSpaceActionRename:{id:"tabSpacesMenu.tabSpaceActionRename",defaultMessage:"Rename tab group"},tabSpaceActionDelete:{id:"tabSpacesMenu.tabSpaceActionDelete",defaultMessage:"Delete tab group"}});function _(e){let{tabSpacesState:t}=e;const a=(0,n.useRef)(null),{tabSpaces:o,orderedTabSpaceIds:i,activeTabSectionId:c,ungroupedTabCount:s}=t,r=(0,b().I)(),[l,p]=(0,n.useState)(),[d,S]=(0,n.useState)(),[h,m]=(0,n.useState)(!1),[f,T]=(0,n.useState)(),[C,P]=(0,n.useState)(void 0),[E,G]=(0,n.useState)(void 0),L=(0,n.useMemo)((()=>l?o[l]:void 0),[o,l]),H=(0,n.useCallback)(((e,t)=>{S(e),p(t)}),[S,p]),F=(0,n.useCallback)((()=>{S(void 0),p(void 0)}),[S,p]),z=(0,n.useCallback)((e=>{T(e),m(!0)}),[T,m]),O=(0,n.useCallback)((()=>{m(!1),T(void 0)}),[m,T]),K=(0,n.useCallback)((()=>{F(),P(void 0),G(void 0)}),[F,P,G]),N=(0,n.useCallback)((()=>{u().A.update((e=>({...e,open:!1})))}),[]),_=(0,n.useCallback)(((e,t,a)=>{if(K(),e)if(a)k().tabSpacesState.updateTabSpaceMetadata(a,{title:e,icon:t});else{const a="ungroupedTabs"===E?"ungroupedTabs":"empty";k().tabSpacesState.createTabSpace({title:e,icon:t,source:a})}}),[K,E]),q=(0,n.useCallback)((e=>{a.current&&(H(a.current.getBoundingClientRect(),void 0),G(e),P("rename"))}),[H,G,P]),Q=(0,g().IS)((e=>({...B(e),modal:{minWidth:230,maxHeight:"70vh"},sectionHeader:{color:e.text.secondary,fontSize:12,fontWeight:M().Wy.medium,padding:"6px 8px 4px 12px"}})),[]),U=(0,j().tz)(),X=(0,n.useMemo)((()=>(0,x.jsxs)("div",{style:Q.buttonList,children:[s>0&&(0,x.jsx)(Y,{icon:v(Q.iconDark),label:U.formatMessage($.newGroupFromTabs,{count:s}),onClick:()=>q("ungroupedTabs")}),(0,x.jsx)(Y,{label:U.formatMessage($.newEmptyGroup),onClick:()=>q("emptyTabSpace")})]})),[s,q,Q.iconDark,Q.buttonList,U]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:Q.modal,children:(0,x.jsxs)(w().A,{menuType:D().gu.Popup,children:[(0,x.jsx)(A().A,{children:(0,x.jsx)(V,{label:U.formatMessage($.ungroupedTabs,{count:s}),icon:(0,y().p)(Q.icon),isChecked:"ungrouped"===c,onClick:()=>{k().tabSpacesState.setActiveTabSection("ungrouped"),N()},openSecondaryPopup:z,setSelectedTabSpaceData:H})}),(0,x.jsxs)(A().A,{topBorder:!0,children:[(0,x.jsx)("div",{style:Q.sectionHeader,children:(0,x.jsx)(R().A,{isSmall:!0,children:U.formatMessage($.tabGroups)})}),i.length>0&&(0,x.jsx)(I().Ay,{style:Q.buttonList,shouldAnimateDrop:!0,direction:"vertical",keys:i,renderKey:e=>{const t=o[e];return t?(0,x.jsx)(V,{tabSpaceId:t.tabSpaceId,label:t.title,icon:t.icon,isChecked:t.tabSpaceId===c,onClick:()=>{k().tabSpacesState.setActiveTabSection(t.tabSpaceId),N()},openSecondaryPopup:z,setSelectedTabSpaceData:H},t.tabSpaceId):null},onDrop:e=>{k().tabSpacesState.reorderTabSpaces(e)},onDragEnd:()=>r("TabSpacesMenu","TabSpacesMenu/onDragEnd")}),(0,x.jsx)("div",{ref:a,style:{height:E?36:0}}),0===i.length&&X]}),i.length>0&&(0,x.jsx)(A().A,{topBorder:!0,children:X})]})}),(0,x.jsx)(J,{open:h,originRect:f,tabSpaceId:l,onDismiss:O,setRenameTabSpacePopupMode:P,closeTabSpacesMenu:N}),(0,x.jsx)(W,{mode:C,setMode:P,originRect:d,tabSpaceId:l,initialTitle:(null==L?void 0:L.title)||"",initialIcon:null==L?void 0:L.icon,isCreate:Boolean(E),onSave:_})]})}function q(e){let{setRenameTabSpacePopupMode:t,tabSpaceId:a,closeSecondaryPopup:n,closeTabSpacesMenu:o}=e;const i=(0,j().tz)(),c=(0,g().IS)((e=>({...B(e),modal:{width:200}})),[]);return a?(0,x.jsx)("div",{style:c.modal,children:(0,x.jsx)(w().A,{menuType:D().gu.Popup,children:(0,x.jsxs)(C().A,{debugName:"TabSpacesSecondaryMenu",capture:!0,allowEsc:!0,children:[(0,x.jsxs)(A().A,{children:[(0,x.jsx)(Y,{label:i.formatMessage($.tabSpaceActionChangeIcon),icon:(0,h().emojiFaceIcon)(c.iconDark),onClick:()=>{t("icon"),n()}}),(0,x.jsx)(Y,{label:i.formatMessage($.tabSpaceActionRename),icon:(0,S().M)(c.iconDark),onClick:()=>{t("rename"),n()}})]}),(0,x.jsx)(A().A,{topBorder:!0,children:(0,x.jsx)(Y,{label:i.formatMessage($.tabSpaceActionDelete),icon:(0,T().trashIcon)(c.iconDark),onClick:()=>{k().tabSpacesState.deleteTabSpace(a),n(),o()}})})]})})}):null}function J(e){let{open:t,setRenameTabSpacePopupMode:a,originRect:n,tabSpaceId:o,onDismiss:i,closeTabSpacesMenu:c}=e;return(0,x.jsx)(s().Ay,{popupType:p().n.Popup,render:()=>(0,x.jsx)(q,{tabSpaceId:o,setRenameTabSpacePopupMode:a,closeSecondaryPopup:i,closeTabSpacesMenu:c}),open:t,originRect:n,placementToOrigin:l().W.Right,alignmentToOrigin:l().C.Start,originGap:8,onDismiss:i,trapFocus:!0})}function Q(){const e=(0,o().v3)(),[t,a]=(0,n.useState)(),{open:b,tabSpacesState:g}=(0,i().K8)((()=>u().A.getState()),[]),{isShowingTabBar:S}=(0,i().O$)(d().A),h=(0,i().K8)((()=>(0,r().km)(e)),[e]);return(0,n.useEffect)((()=>{a(new DOMRect(h,S?0:(0,c().ek)(e.device.isElectronMac)+10,0,0))}),[h,S,e.device.isElectronMac]),g?(0,x.jsx)(s().Ay,{popupType:p().n.Popup,render:()=>(0,x.jsx)(_,{tabSpacesState:g}),open:b,originRect:t,placementToOrigin:l().W.Right,alignmentToOrigin:l().C.Start,originGap:10,onDismiss:()=>{u().A.update((e=>({...e,open:!1})))},trapFocus:!0,disableFlippingPlacement:!0}):null}},726284:(e,t,a)=>{a.r(t),a.d(t,{browserAddIcon:()=>i,iconDefinition:()=>o});a(242343);var n=a(163643);const o={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125H7.957a4.5 4.5 0 0 0 0-1.25H15.5a.875.875 0 0 0 .875-.875V7.5H3.625v3.252L3.5 10.75c-.388 0-.765.05-1.125.142zm2.258.184a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25m2.625-.625a.625.625 0 1 0-1.25 0 .625.625 0 0 0 1.25 0m1.375.625a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25"}),(0,n.jsx)("path",{d:"M7 15.25q-.001.32-.056.625A3.501 3.501 0 1 1 3.5 11.75h.011l.114.002A3.5 3.5 0 0 1 7 15.25m-6.125 0c0 .345.28.625.625.625h1.375v1.375a.625.625 0 1 0 1.25 0v-1.375H5.5a.625.625 0 1 0 0-1.25H4.125V13.25a.625.625 0 1 0-1.25 0v1.375H1.5a.625.625 0 0 0-.625.625"})]})},i=(0,a(680369).wt)("browserAdd",o)}}]);