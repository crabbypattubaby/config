"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[84341],{49638:(t,e,o)=>{o.d(e,{A:()=>h});o(725707),o(491955),o(500234),o(403517);var n=o(242343),r=()=>o(803290),i=()=>o(653998),l=()=>o(31448),s=()=>o(236339),a=()=>o(786944),c=()=>o(521325),u=()=>o(505521),d=()=>o(103151),p=()=>o(128057),m=()=>o(502852),S=()=>o(196387),g=()=>o(907721),f=()=>o(466321),x=()=>o(755769),v=o(163643);function y(t){let{id:e,context:l,collectionContextStore:y,collectionSettingsStore:h,onClick:b}=t;const j=(0,o(237385).v3)(),k=(0,o(174114).DP)(),A=(0,o(622286).X)("nds_default_property_noticon"),{filter:_,isReadOnly:M}=(0,r().K8)((()=>{const t=function(t,e){const o=e.currentPropertyFiltersStore.state;return o.find((e=>e.id===t))}(e,y);return{filter:t,isReadOnly:Boolean(t&&(0,p().vu)(t.id))}}),[y,e]),R=(0,r().K8)((()=>{const t=y.localStateDiffStore.state;return t.filters.updated.includes(e)||t.filters.added.includes(e)}),[y,e]),T=(0,r().K8)((()=>y.collectionViewStore()),[y]),w=(0,r().O$)(y.normalizedSchemaStore),I=(0,r().K8)((()=>(0,o(542714).H)(y)),[y]),B=(0,r().K8)((()=>h.state.open),[h]),F=(0,r().K8)((()=>{var t;return _?null==y||null===(t=y.collectionStore())||void 0===t||null===(t=t.getSchema()[_.filter.property])||void 0===t?void 0:t.type:void 0}),[y,_]),D=(0,r().K8)((()=>_&&_.id===p().Oe),[_]),P=(0,n.useCallback)((t=>{t&&(0,o(495312).Rp)(t.target)||c().os({collectionSettingsStore:h})}),[h]),O=(0,n.useCallback)((()=>{var t;b&&b(null==_?void 0:_.id),_&&(h.state.open?c().os({collectionSettingsStore:h}):c().R8({collectionSettingsStore:h,item:{type:"filter"}}),(0,s().X)({environment:j,collectionContextStore:y,action:"click_property_filter",original_view_type:void 0,property_type:null==y||null===(t=y.collectionStore())||void 0===t||null===(t=t.getSchema()[_.filter.property])||void 0===t?void 0:t.type}))}),[y,h,j,_,b]),L=(0,n.useCallback)((()=>{c().os({collectionSettingsStore:h})}),[h]),K=(0,n.useCallback)((t=>{var e;if(!_)return;const n=null===(e=y.remoteResultStore.state)||void 0===e?void 0:e.sizeHint,r=S().default.DO_NOT_USE_markLegacy("collections.update_filter_lag");S().default.DO_NOT_USE_measureAfterNextFlushLegacy(r,{environment:j,getData:()=>o(876695).K6({from:"property_filter",property_type:F,collectionContextStore:y,sizeHintAtStart:n})});const i=_.filter,l=y.currentPropertyFiltersStore.state.map((e=>{if(e.id===_.id){return{..._,filter:{...i,filter:t}}}return e}));a().IU({environment:j,collectionContextStore:y,temporaryState:{...y.temporaryStateStore.state,propertyFilters:{value:l}}}),(0,s().X)({environment:j,collectionContextStore:y,action:"update_property_filter",original_view_type:void 0,property_type:F})}),[y,j,_,F]),V=(0,o(660714).Y)(K,250),N=(0,n.useCallback)((()=>{var t;if(!_)return;const e=y.currentPropertyFiltersStore.state.filter((t=>t.id!==_.id));a().IU({environment:j,collectionContextStore:y,temporaryState:{...y.temporaryStateStore.state,propertyFilters:{value:e}}}),(0,s().X)({environment:j,collectionContextStore:y,action:"delete_property_filter",original_view_type:void 0,property_type:null==y||null===(t=y.collectionStore())||void 0===t||null===(t=t.getSchema()[_.filter.property])||void 0===t?void 0:t.type})}),[y,j,_]),z=(0,n.useCallback)((()=>{var t;if(!_)return;const{combinatorFilter:e,propertyFilters:n}=(0,p().$4)(y,_);a().IU({environment:j,collectionContextStore:y,temporaryState:{...y.temporaryStateStore.state,propertyFilters:{value:n},combinatorFilter:{value:e}}});const r=l===o(500418).aV.FilterBar?y.filterBarCombinatorFilterSettingsStore:y.filterOptionsCombinatorFilterSettingsStore;c().R8({collectionSettingsStore:r,item:{type:"filter"}}),(0,s().X)({environment:j,collectionContextStore:y,action:"merge_filter_into_combinator",property_type:null==y||null===(t=y.collectionStore())||void 0===t||null===(t=t.getSchema()[_.filter.property])||void 0===t?void 0:t.type})}),[y,l,j,_]),U=(0,n.useCallback)(((t,e)=>{if(!T||!_)return null;const n=_.filter,r=!(0,o(15552).t_)(n),i=w[n.property],l=(null==i?void 0:i.icon)&&(0,o(758989).T8)(i.icon),s=(0,o(581344).xI)({size:"sm",type:l?"custom":"system",isMobile:j.device.isMobile});return(0,v.jsx)(o(662505).A,{icon:i&&(0,v.jsx)(o(916963).zB,{type:i.type,icon:i.icon,size:s,theme:k,style:{fill:"currentColor",marginRight:5},isDefaultNoticonEnabled:A}),title:r?(0,v.jsx)(o(496399).A,{propertyFilter:n,schema:w,style:C(),parentStore:T}):(0,v.jsx)("span",{style:C(),children:null==i?void 0:i.name}),on:r,hasDiff:R,disabled:e,hideChevron:e,onClick:t=>((0,m().SQ)({event:t,context:m().y$.CollectionSettingsClick,callback:O}),t.preventDefault(),!1),...t},_.id)}),[A,T,j,_,O,R,w,k]),H=(0,n.useCallback)((()=>D?(0,v.jsx)(d().A,{placement:g().W.Bottom,render:t=>U(t,!0),renderTooltip:()=>(0,v.jsx)(i().sA,{id:"database.filterBarPropertyFilter.cannotConfigureSubitemDisplayMode",defaultMessage:"To modify this filter, first change the subitem display mode."})}):(0,v.jsx)(d().A,{placement:g().W.Bottom,render:t=>U(t,!0),renderTooltip:()=>(0,v.jsx)(i().sA,{id:"database.filterBarPropertyFilter.cannotConfigure",defaultMessage:"This filter cannot be modified on this view."})})),[U,D]),E=(0,n.useCallback)((()=>{if(!_)return;const t=_.filter;return T?(0,v.jsx)(u().td,{collectionViewId:T.id,propertyFilter:t,schema:w,parentStore:T,onChange:K,onChangeDebounced:V,onClose:L,onDelete:N,onAddToCombinatorFilter:z,context:u().mL.PropertyFilter,userCanConfigureFilters:I,allowRelativeDateFilter:!0,allowRelativePersonFilter:!0,collectionContextStore:y}):void 0}),[I,y,T,_,z,N,L,V,K,w]);return M?H():(0,v.jsx)(o(443252).Ay,{popupType:j.device.isMobile?f().n.SlideUp:f().n.Popup,placementToOrigin:x().UV.Bottom,alignmentToOrigin:x().MY.Start,open:B,origin:M?H():U(void 0,!1),onDismiss:P,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,render:E,trapFocus:!0})}const h=n.memo(y,o(21045).A);function C(){return{maxWidth:180,...l().RC}}},200203:(t,e,o)=>{o.d(e,{l:()=>b});o(725707),o(771702);var n=o(242343),r=()=>o(237385),i=()=>o(803290),l=()=>o(174114),s=()=>o(433051),a=()=>o(653998),c=()=>o(31448),u=()=>o(236339),d=()=>o(786944),p=()=>o(521325),m=()=>o(261603),S=()=>o(443252),g=()=>o(475923),f=()=>o(502852),x=()=>o(495312),v=()=>o(466321),y=()=>o(755769),h=()=>o(662505),C=o(163643);function b(t){let{collectionContextStore:e,collectionSettingsStore:o}=t;const l=(0,r().v3)(),[s,a]=(0,i().K8)((()=>[o.state.open,e.currentCombinatorFilterStore.state]),[e,o]),c=(0,n.useCallback)((()=>(0,C.jsx)(m().m$,{context:g().Bd.FilterBar,collectionContextStore:e,collectionSettingsStore:o,hideDesktopHeader:!0})),[e,o]),u=(0,n.useCallback)((t=>{var n;t&&(0,x().Rp)(t.target)||(p().os({collectionSettingsStore:o}),a&&0===(null===(n=a.filters)||void 0===n?void 0:n.length)&&d().IU({environment:l,collectionContextStore:e,temporaryState:{...e.temporaryStateStore.state,combinatorFilter:{value:void 0}}}))}),[e,o,l,a]);return(0,n.useEffect)((()=>()=>p().os({collectionSettingsStore:o})),[]),(0,C.jsx)(S().Ay,{popupType:l.device.isMobile?v().n.SlideUp:v().n.Popup,placementToOrigin:y().UV.Bottom,alignmentToOrigin:y().MY.Start,open:s,origin:(0,C.jsx)(j,{collectionContextStore:e,collectionSettingsStore:o}),onDismiss:u,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,render:c})}function j(t){var e;let{collectionContextStore:o,collectionSettingsStore:d}=t;const m=(0,r().v3)(),S=(0,l().IS)((t=>({icon:{width:void 0,height:m.device.isMobile?14:12,fill:t.blueColor,marginRight:6},title:{maxWidth:180,...c().RC}})),[m.device]),[g,x]=(0,i().K8)((()=>[Boolean(o.localStateDiffStore.state.combinatorFilter),o.currentCombinatorFilterStore.state]),[o]),v=(0,n.useCallback)((()=>{if(!x)return;o.currentPropertyFiltersStore.state.forEach((t=>{const e=o.getFilterOptionsItemSettingsStore(t);p().os({collectionSettingsStore:e})})),p().R8({collectionSettingsStore:d,item:{type:"filter"}}),(0,u().X)({environment:m,collectionContextStore:o,action:"click_combinator_filter"})}),[o,d,m,x]);return x?(0,C.jsx)(h().A,{icon:(0,s().S)(S.icon),title:(0,C.jsx)("span",{style:S.title,children:(0,C.jsx)(a().sA,{defaultMessage:"{ruleCount, plural, one {{ruleCount} rule} other {{ruleCount} rules}}",id:"database.filterBar.advancedFilterRulesCount.title",values:{ruleCount:(null===(e=x.filters)||void 0===e?void 0:e.length)||0}})}),on:!0,hasDiff:g,onClick:t=>(0,f().SQ)({event:t,context:f().y$.CollectionSettingsClick,callback:v})},"combinator"):null}},290656:(t,e,o)=>{o.d(e,{B:()=>m});var n=o(242343),r=()=>o(237385),i=()=>o(803290),l=()=>o(612408),s=()=>o(586588),a=()=>o(433364);const c=new Map;var u=()=>o(485966),d=()=>o(822493),p=o(163643);function m(t){let{tutorialId:e,tutorialStepId:o,onPrimaryButtonClick:m,displayStore:S,...g}=t;const f=(0,r().v3)(),x=function(t){const e=!c.get(t),o=(0,n.useRef)(e);return o.current&&c.set(t,!0),(0,n.useEffect)((()=>()=>{o.current&&c.set(t,!1)}),[t]),o.current}(`${e}.${o}`),{currentStep:v,isLoading:y}=(0,i().K8)((()=>{var t;return{isLoading:!(null!==(t=u().default.state.currentUserSettingsStore)&&void 0!==t&&t.getSettings()),currentStep:(0,a().gt)(u().default.state.currentUserSettingsStore,e)}}),[e]);if((0,n.useEffect)((()=>{y||v!==o||!x?null==S||S.setState(!1):null==S||S.setState(!0)}),[y,v,o,x,S]),y||v!==o||!x)return null;const h=l().c$[e],C=h.steps.findIndex((t=>t.id===o)),b=h.steps.length;return(0,p.jsx)(d().k,{onCloseClick:()=>{s().dismissTutorial(f,e)},onPrimaryButtonClick:t=>{s().tutorialGoToNextStep(f,e),null==m||m(t)},onBackButtonClick:()=>{s().tutorialGoToPrevStep(f,e)},numSteps:b,currStepIndex:C,...g})}},327845:(t,e,o)=>{o.d(e,{U:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("collectionSearch",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M0 6.35938C0 9.86719 2.85156 12.7188 6.35938 12.7188C7.66406 12.7188 8.85938 12.3203 9.85938 11.6406L13.4531 15.2344C13.6719 15.4609 13.9766 15.5625 14.2812 15.5625C14.9453 15.5625 15.4219 15.0625 15.4219 14.4141C15.4219 14.1016 15.3125 13.8125 15.1016 13.5938L11.5312 10.0156C12.2734 8.99219 12.7188 7.72656 12.7188 6.35938C12.7188 2.85156 9.86719 0 6.35938 0C2.85156 0 0 2.85156 0 6.35938ZM1.65625 6.35938C1.65625 3.76562 3.75781 1.65625 6.35938 1.65625C8.95312 1.65625 11.0625 3.76562 11.0625 6.35938C11.0625 8.95312 8.95312 11.0625 6.35938 11.0625C3.75781 11.0625 1.65625 8.95312 1.65625 6.35938Z"})})},367923:(t,e,o)=>{o.d(e,{A:()=>p});o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601),o(725707),o(491955);var n=o(242343),r=()=>o(752597),i=()=>o(803290),l=()=>o(833369),s=()=>o(192048),a=()=>o(975392),c=()=>o(728373),u=()=>o(572589);function d(t){const{reducerId:e,instanceId:o,reducer:n,collectionContextStore:r,groupsPointer:i}=t,l=r.reducersStore.state,s=l[e];let c,d;if(i&&i.length>0&&(c=(0,u().Hm)(i)),n){if(d={instanceIds:a().sb([...(null==s?void 0:s.instanceIds)||[],o]),reducer:n},c){r.reducerDependencies.has(c)||r.reducerDependencies.set(c,new Set);const t=r.reducerDependencies.get(c);null==t||t.add(e)}}else{if(c){const t=r.reducerDependencies.get(c);t&&(t.delete(e),0===t.size&&r.reducerDependencies.delete(c))}const t=a().FF((null==s?void 0:s.instanceIds)||[],o);d=s&&t.length>0?{instanceIds:t,reducer:s.reducer}:void 0}a().n4(s,d)||r.reducersStore.setState({...l,[e]:d})}function p(t){const{id:e,reducer:o,collectionContextStore:u,groupsPointer:p,debounceWait:m}=t,S=(0,i().K8)((()=>p),[p],{useDeepEqual:!0}),g=(0,i().K8)((()=>o),[o],{useDeepEqual:!0}),f=(0,i().K8)((()=>u.collectionViewStore()),[u]),x=(0,i().K8)((()=>u.normalizedFormatStore.state.collection_pointer),[u.normalizedFormatStore]),v=(0,i().K8)((()=>{var t;return null==f||null===(t=f.getFormatStore())||void 0===t?void 0:t.getKeyStore("collection_view_source").getValue()}),[f]),y=(0,n.useRef)(!1),h=(0,s().O)(),[C,b]=(0,n.useReducer)(((t,e)=>a().n4(t,e)?t:e),void 0),j=(0,n.useCallback)((()=>{const t=u.localResultStore.state,o=u.remoteResultStore.state,n=t&&"reducer"===t.type?t.reducerResults[e]:void 0,r=o&&"reducer"===o.type?o.reducerResults[e]:void 0;return function(t){const{reducerId:e,localReducerResult:o,remoteReducerResult:n,collectionContextStore:r,reducer:i}=t,s=r.reducersStore.state,c=r.remoteResultStore.state,u=r.isClientModeEnabledStore.state;if(u)return o;const d=r.isCreatingNewChartCollectionStore.state,p=r.wasCreatedThisSessionStore.state;if("aggregation"===i.type){if(d&&p){return Boolean(n&&"aggregation"===n.type&&"number"===n.aggregationResult.type&&0!==n.aggregationResult.value)&&r.isCreatingNewChartCollectionStore.setState(!1),o}if(n)return n;const t=Boolean(c&&"reducer"===c.type&&a().I6(c.reducerResults,((t,e)=>{const o=s[e];return!!o&&Boolean("results"===o.reducer.type&&!o.reducer.searchQuery&&"results"===t.type&&t.hasMore&&a().n4(i.filter,o.reducer.filter))})));return t?o:n}if("groups"===i.type){if(d&&p){return Boolean(n&&"groups"===n.type&&("v2"===n.version?n.hasMore:0!==n.total))&&r.isCreatingNewChartCollectionStore.setState(!1),o}if("v2"===i.version){if(o&&"groups"!==o.type||o&&"groups"===o.type&&"v2"!==o.version)return;if(n&&"groups"!==n.type||n&&"groups"===n.type&&"v2"!==n.version)return;const t=function(t){var e;const{collectionContextStore:o,reducer:n,wasCreatedThisSession:r,localReducerResult:i,remoteReducerResult:s}=t;let a,c;n.aggregation&&(s?a=s.aggregationResults:i&&(a=i.aggregationResults));if(n.blockResults){var u;const t=Boolean(s&&s.blockResults),e=null===(u=o.collectionViewStore())||void 0===u?void 0:u.getCollectionSource(),n=(0,l().TR)(e)||(0,l().hJ)(e);if((t||r)&&!n&&i&&i.blockResults){const t=i.blockResults,e=(null==s?void 0:s.blockResults)??{},o=new Set([...Object.keys(t),...Object.keys(e)]),n={};for(const r of o){const o=t[r],i=e[r];let l=[];o?l=o.blockIds:i&&(l=i.blockIds);let s=!1;i?s=i.hasMore:o&&(s=o.hasMore),n[r]={blockIds:l,hasMore:s}}c=n}c||(c=o.forceLocalQueryCollection?null==s?void 0:s.blockResults:null==i?void 0:i.blockResults)}let d;i&&i.pinnedResults&&(d=i.pinnedResults);s&&s.pinnedResults&&(d={groupResults:s.pinnedResults.groupResults,...d,aggregationResults:s.pinnedResults.aggregationResults});const p=s?s.hasMore:Boolean(null==i?void 0:i.hasMore),m=s?s.hasMoreSubGroups:null==i?void 0:i.hasMoreSubGroups;let S=(null==i?void 0:i.results)??(null==s?void 0:s.results)??[],g=(null==i?void 0:i.subGroupResults)??(null==s?void 0:s.subGroupResults);const f=n.groupBy;s&&("relation"===f.type||"formula"===f.type&&"relation"===f.groupBy.type)&&(S=s.results);const x=null===(e=n.subGroup)||void 0===e?void 0:e.groupBy;s&&("relation"===(null==x?void 0:x.type)||"formula"===(null==x?void 0:x.type)&&"relation"===x.groupBy.type)&&(g=s.subGroupResults);o.forceLocalQueryCollection&&(S=(null==s?void 0:s.results)??(null==i?void 0:i.results)??[],g=(null==s?void 0:s.subGroupResults)??(null==i?void 0:i.subGroupResults));return{type:"groups",version:"v2",results:S,subGroupResults:g,pinnedResults:d,hasMore:p,hasMoreSubGroups:m,blockResults:c,aggregationResults:a}}({collectionContextStore:r,reducer:i,wasCreatedThisSession:p,localReducerResult:o,remoteReducerResult:n});return t}return n||o}if("results"===i.type){var m;const t=r.wasCreatedThisSessionStore.state,i=Boolean(c&&"reducer"===c.type&&c.reducerResults[e]),s=null===(m=r.collectionViewStore())||void 0===m?void 0:m.getCollectionSource(),a=(0,l().TR)(s)||(0,l().hJ)(s);if((i||t)&&!a&&o&&"results"===o.type){return{...o,hasMore:n&&"results"===n.type?n.hasMore:o.hasMore}}return n}}({reducerId:e,collectionContextStore:u,reducer:g,localReducerResult:n,remoteReducerResult:r})}),[u,g,e]),k=(0,n.useCallback)((()=>{y.current=!1,h.current||b(j())}),[j,h]),A=(0,n.useCallback)((()=>{y.current||(y.current=!0,r().default.afterNextFlush(k))}),[k]),[_]=(0,n.useState)((()=>(0,c().Ay)()));return(0,n.useEffect)((()=>{const t=m?(0,a().sg)(A,m,{leading:!0}):A;return u.remoteResultStore.addListener(A),u.localResultStore.addListener(t),()=>{u.remoteResultStore.removeListener(A),u.localResultStore.removeListener(t)}}),[u,A,m]),(0,n.useEffect)((()=>(d({reducerId:e,instanceId:_,reducer:g,collectionContextStore:u,groupsPointer:S}),()=>{d({reducerId:e,instanceId:_,reducer:void 0,collectionContextStore:u,groupsPointer:S})})),[u,f,x,v,S,g,e,_]),(0,n.useEffect)((()=>{A()}),[]),(0,n.useEffect)((()=>(u.timingTracker.mountCollectionReducerRequest(e,g.type),()=>{u.timingTracker.unmountCollectionReducerRequest(e)})),[u,e,g]),C}},425235:(t,e,o)=>{o.d(e,{u:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("arrowDownThick",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.99316 1.52246C7.40527 1.52246 7.00195 1.93262 7.00195 2.54785V10.1357L7.07031 11.6191L5.69629 10.0332L4.1582 8.50195C3.98047 8.31738 3.74805 8.19434 3.44727 8.19434C2.91406 8.19434 2.51074 8.59082 2.51074 9.15137C2.51074 9.41113 2.61328 9.65039 2.81836 9.8623L7.26172 14.3125C7.44629 14.5039 7.72656 14.6133 7.99316 14.6133C8.2666 14.6133 8.54004 14.5039 8.72461 14.3125L13.1748 9.8623C13.3799 9.65039 13.4824 9.41113 13.4824 9.15137C13.4824 8.59082 13.0791 8.19434 12.5459 8.19434C12.252 8.19434 12.0195 8.31738 11.835 8.50195L10.2969 10.0332L8.92285 11.6191L8.98438 10.1357V2.54785C8.98438 1.93262 8.58789 1.52246 7.99316 1.52246Z"})})},427385:(t,e,o)=>{o.d(e,{C:()=>a});o(242343);var n=()=>o(174114),r=()=>o(907721),i=()=>o(103151),l=o(163643);const s=2;function a(t){const{percentage:e,ringWidth:o,size:a,style:c,label:u}=t,d=(0,n().DP)(),p=o??3,m=a/2-p/2,S=2*Math.PI*m,g=a/2,f=t.filledColor??d.accentColors.gray[500],x=t.unfilledColor??d.accentColors.gray[100],v=t.gapColor??"transparent",y=Math.min(Math.max(e,0),100),h=y>s&&y+2*s<95&&(0,l.jsx)("circle",{r:m,cx:g,cy:g,strokeWidth:p,stroke:v,strokeLinecap:"round",strokeDasharray:`${S} ${S*(100-(y+2*s))/100}`,strokeDashoffset:""+S*(100-(y+s))/100,fill:"transparent"}),C=t=>(0,l.jsx)("div",{role:"progressbar","aria-valuenow":y,style:{height:a,width:a,...c,pointerEvents:"auto"},...t,children:(0,l.jsxs)("svg",{viewBox:`0 0 ${a} ${a}`,color:"transparent",style:{width:"100%",height:"100%",transform:"rotate(-90deg)",transformOrigin:"50% 50%"},children:[(0,l.jsx)("circle",{r:m,cx:g,cy:g,strokeWidth:p,stroke:x,strokeLinecap:"round",fill:"transparent"}),h,(0,l.jsx)("circle",{r:m,cx:g,cy:g,strokeWidth:p,stroke:f,strokeLinecap:"round",strokeDasharray:S,strokeDashoffset:S-y/100*S,fill:"transparent"}),(0,l.jsx)("text",{x:g,y:g,textAnchor:"middle",dominantBaseline:"middle",fill:d.text.secondary,fontSize:"0.75em",style:{transformOrigin:"50% 50%",transform:"rotate(90deg)"},children:u})]})});return t.tooltip?(0,l.jsx)(i().A,{placement:r().W.Top,renderTooltip:()=>t.tooltip,render:C}):C()}},433051:(t,e,o)=>{o.d(e,{S:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("filter",{viewBox:"0 0 16 16",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4C2 3.58579 2.33579 3.25 2.75 3.25H13.25C13.6642 3.25 14 3.58579 14 4C14 4.41421 13.6642 4.75 13.25 4.75H2.75C2.33579 4.75 2 4.41421 2 4Z"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 8C3.75 7.58579 4.08579 7.25 4.5 7.25H11.5C11.9142 7.25 12.25 7.58579 12.25 8C12.25 8.41421 11.9142 8.75 11.5 8.75H4.5C4.08579 8.75 3.75 8.41421 3.75 8Z"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12C5.5 11.5858 5.83579 11.25 6.25 11.25H9.75C10.1642 11.25 10.5 11.5858 10.5 12C10.5 12.4142 10.1642 12.75 9.75 12.75H6.25C5.83579 12.75 5.5 12.4142 5.5 12Z"})]})})},474110:(t,e,o)=>{o.d(e,{l:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("repeat",{viewBox:"0 0 16 14",svg:(0,n.jsx)("path",{d:"M1.185 7.317a.689.689 0 00.697-.704v-.601c0-1.19.806-1.942 2.064-1.942H9.23v1.573c0 .328.199.52.527.52a.66.66 0 00.403-.144l2.68-2.236c.253-.212.26-.547 0-.765L10.16.782A.62.62 0 009.757.64c-.328 0-.527.184-.527.52v1.53H4.05C1.875 2.69.48 3.9.48 5.875v.738c0 .397.308.704.705.704zm13.624-.649a.689.689 0 00-.698.704v.608c0 1.19-.806 1.942-2.064 1.942H6.763V8.35c0-.329-.199-.52-.527-.52a.66.66 0 00-.403.144l-2.68 2.242c-.26.212-.26.547 0 .759l2.68 2.242a.66.66 0 00.403.143c.328 0 .527-.191.527-.52v-1.544h5.181c2.174 0 3.569-1.21 3.569-3.179v-.745a.695.695 0 00-.704-.704z"})})},479020:(t,e,o)=>{o.d(e,{A:()=>Zt});var n=o(242343),r=()=>o(803290),i=()=>o(237385),l=()=>o(174114),s=()=>o(653998),a=()=>o(31448),c=()=>o(586588),u=()=>o(947520),d=(o(725707),o(491955),o(403517),()=>o(890191)),p=()=>o(129044),m=()=>o(712437),S=()=>o(65866),g=()=>o(752903),f=()=>o(871002),x=()=>o(846581),v=()=>o(198654),y=()=>o(169201),h=()=>o(339189),C=()=>o(474110),b=()=>o(293665),j=()=>o(145017),k=()=>o(906384),A=()=>o(34662),_=()=>o(220413),M=()=>o(975392),R=()=>o(76394),T=()=>o(141666),w=()=>o(191756),I=()=>o(337658),B=()=>o(73631),F=()=>o(876695),D=()=>o(640979),P=()=>o(92451),O=()=>o(755786),L=()=>o(129978),K=()=>o(946591),V=()=>o(137476);function N(t,e){V().vd(t,"complete_sprint_action",e)}var z=()=>o(485966),U=()=>o(539670),H=()=>o(413871),E=()=>o(943540),W=()=>o(209684),G=()=>o(535906),$=()=>o(273520),J=()=>o(356813),Y=()=>o(517198),q=()=>o(935091),Q=()=>o(858023),X=()=>o(743668),Z=()=>o(951540),tt=()=>o(28210),et=()=>o(709237),ot=()=>o(88271),nt=()=>o(867988),rt=()=>o(754313),it=()=>o(611824),lt=()=>o(809785),st=o(163643);const at=(0,s().YK)({completedPercentSummary:{id:"completeAutomationSprintModal.sprintSummary.completedPercentSummary",defaultMessage:"{completedTaskCount} / {totalTaskCount} total tasks"},selectNextSprintLabel:{id:"completeAutomationSprintModal.sprintSummary.selectNextSprintLabel",defaultMessage:"Next sprint"},selectDatesForNextSprintLabel:{id:"completeAutomationSprintModal.sprintSummary.selectDatesForNextSprintLabel",defaultMessage:"Start and end dates"},nextSprintDatesLabel:{id:"completeAutomationSprintModal.sprintSummary.nextSprintDatesLabel",defaultMessage:"Next sprint dates"},cancelButton:{id:"completeAutomationSprintModal.sprintSummary.cancel",defaultMessage:"Cancel"},fallbackSprintName:{id:"completeAutomationSprintModal.sprintName.placeholder",defaultMessage:"Sprint"}});function ct(t){let{onDismiss:e,...o}=t;const{isOpen:r}=o,l=(0,i().v3)(),s=(0,n.useId)(),a=t=>{e();let n=!1;(0,R().Gv)(t)&&(0,R().O9)(t.clickedCancel)&&(n=!0===t.clickedCancel),N(l,{...(0,F().sl)(o.taskCollectionContextStore),action:n?"cancel_modal":"dismiss_modal"})};return(0,st.jsx)(rt().A,{ariaLabelledBy:s,isOpen:r,onDismiss:()=>a(),render:()=>(0,st.jsx)(ut,{...o,onDismiss:a,titleAriaId:s})})}function ut(t){var e;const{completeSprintAutomationContext:o,setIsLoading:l,taskCollectionContextStore:a,onDismiss:c,completeSprintAutomationState:u,onAutomationComplete:m,titleAriaId:S}=t,{currentSprintId:g,querySprintsResult:x,currentSprintTaskSummary:v}=u,y=(0,s().tz)(),h=(0,i().v3)(),{isMobile:C}=(0,i().Y0)(),{value:b}=(0,L().fJ)(B().T.formulas),{value:A}=(0,L().fJ)(I().QV.automationTypecheck),{value:_}=(0,L().fJ)(I().QV.automationActionRegistry),M=(0,r().K8)((()=>z().default.state.currentUserSettingsStore),[]),R=(0,r().K8)((()=>o.sprintCollectionStore),[o]),w=(0,r().K8)((()=>{var t;const e=null===(t=o.automationContext)||void 0===t?void 0:t.automationStore;return null==e?void 0:e.getRecurrence()}),[o]),F=(0,r().K8)((()=>{var t;return(null===(t=o.automationContext)||void 0===t||null===(t=t.automationActionStore.getConfig())||void 0===t?void 0:t.complete_sprint_action)??"complete_sprint_and_move_incomplete_tasks_to_next_sprint"}),[null===(e=o.automationContext)||void 0===e?void 0:e.automationActionStore]),D=(0,r().K8)((()=>R.getSpaceId()),[R]),O=(0,r().K8)((()=>{if(g)return H().Bv.createChildStore(R,{id:g,table:j().ev,spaceId:R.getSpaceId()})}),[g,R]),K=(0,r().K8)((()=>O?(0,P().tS)({intl:y,environment:h,store:O,untitledFallback:at.fallbackSprintName}):y.formatMessage(at.fallbackSprintName)),[O,y,h]),V=(0,r().K8)((()=>ft({sprintBlockStore:O,sprintCollectionStore:R})),[O,R]),N=(0,r().K8)((()=>xt({sprintDateRange:V,intl:y})),[V,y]),[U,E]=n.useState(),G=(0,r().K8)((()=>p().default.createValue(F)),[F]),$=n.useMemo((()=>{if(!w||null==V||!V.end_date)return;const t=(0,k().Vv)(w);return t?(0,k().Z3)({currentSprintEndDate:V.end_date,sprintSchedule:t}):void 0}),[w,null==V?void 0:V.end_date]),J=(0,r().K8)((()=>{if("pointer"!==(null==U?void 0:U.type))return;return ft({sprintBlockStore:H().Bv.createChildStore(R,U.pointer),sprintCollectionStore:R})}),[U,R]),[Y,q]=n.useState(void 0),Q=n.useMemo((()=>{if(Y&&(0,f().oM)(Y))return Y}),[Y]),X=n.useMemo((()=>{if(!x)return;const{nextSprintIds:t,futureSprintIds:e}=x;return t.length>0?t:e}),[x]),tt=(0,r().K8)((()=>{if(void 0===X)return;const t=X[0];return t?{type:"pointer",pointer:{id:t,table:j().ev,spaceId:D}}:{type:"actionId"}}),[X,D]),et=(0,r().K8)((()=>{var t;return!Boolean(null==M||null===(t=M.getSettings())||void 0===t?void 0:t.seen_sprint_settings_engagement_banner)}),[M]);n.useEffect((()=>{tt&&E(tt)}),[tt,E]),n.useEffect((()=>{q(J??$)}),[J,$,q]);const ot=n.useCallback((async()=>{if(c(),!(b&&A&&_&&U&&Q&&o.automationContext))return;l(!0);const t=0===(null==v?void 0:v.incompleteTaskCount)?"complete_sprint":G.state;if(!o.automationContext)return;const e={type:"recurrence",recurrence:{type:"completeSprint",completeSprintActionType:t,nextSprintDateRange:Q},automationStore:o.automationContext.automationStore,intl:y,parentRecordStore:o.currentCollectionViewBlockStore,formulasModule:b,isLoggedIn:h.currentUser.isLoggedIn(),automationTypecheckModule:A,automationActionRegistryModule:_},n=()=>{m()},{automationExecutionActions:r}=await I().QV.automations.load();await r.executeClientAutomation({environment:h,clientContext:e,onUndo:()=>{l(!0),n(),l(!1)}}),n(),l(!1)}),[c,b,U,Q,o.automationContext,o.currentCollectionViewBlockStore,A,_,l,null==v?void 0:v.incompleteTaskCount,G,y,h,m]),nt=mt({isMobile:C}),{status:rt}=(0,d().L)({value:u,validateLoaded:t=>!1===t.isLoading,waitTimeInMs:Number(T().Xb)});if("pending"!==rt&&u.isLoading)return(0,st.jsx)(dt,{titleAriaId:S,onDismiss:c,sprintCollectionStore:R});if(u.isLoading)return(0,st.jsx)(pt,{titleAriaId:S,onDismiss:c});const{incompleteTaskCount:it}=u.currentSprintTaskSummary,lt=Boolean(U)&&Boolean(Q),ct=void 0!==X&&X.length>0;return(0,st.jsxs)("div",{style:nt.modalContainer,children:[(0,st.jsx)("div",{style:nt.header,id:S,children:(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.title",defaultMessage:"{sprintName} summary",values:{sprintName:K}})}),(0,st.jsx)(gt,{currentSprintFormattedDateRange:N,currentSprintTaskSummary:v}),et&&(0,st.jsx)(St,{collectionContextStore:a,userSettingsStore:M,onDismissModal:c}),ct&&(0,st.jsxs)("div",{style:nt.flexRow,children:[y.formatMessage(at.selectNextSprintLabel),(0,st.jsx)(bt,{nextSprintInput:U,setNextSprintInput:E,completeSprintAutomationContext:o,sprintPageIds:X})]}),(0,st.jsxs)("div",{style:nt.flexRow,children:[ct?y.formatMessage(at.selectDatesForNextSprintLabel):y.formatMessage(at.nextSprintDatesLabel),(0,st.jsx)(kt,{sprintDateRange:Y,setSprintDateRange:q})]}),it>0&&(0,st.jsxs)("div",{style:nt.flexRow,children:[(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.incompleteTasksLabel",defaultMessage:"{incompleteTaskCount, plural, one {{incompleteTaskCount} incomplete task} other {{incompleteTaskCount} incomplete tasks}}",values:{incompleteTaskCount:it}}),(0,st.jsx)(yt,{actionTypeStore:G})]}),(0,st.jsx)(Z().A,{disabled:!lt,onClick:()=>{ot()},style:nt.button,children:(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.completeSprintButton",defaultMessage:"Complete {sprintName}",values:{sprintName:K}})}),(0,st.jsx)(W().p,{onClick:()=>c({clickedCancel:!0}),style:nt.button,children:y.formatMessage(at.cancelButton)})]})}function dt(t){const{onDismiss:e,sprintCollectionStore:o,titleAriaId:n}=t,l=(0,i().v3)(),a=(0,s().tz)(),{isMobile:c}=(0,i().Y0)(),u=(0,r().K8)((()=>o.getParentBlockStore()),[o]),d=mt({isMobile:c});return(0,st.jsxs)("div",{style:d.modalContainer,children:[(0,st.jsx)("div",{style:d.header,id:n,children:(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.missingCurrentSprint.title",defaultMessage:"No current sprint found"})}),(0,st.jsx)(Z().A,{onClick:()=>{u&&w().uK({environment:l,store:u,pageVisitSource:m().y8.LinkInPage})},style:{...d.button,marginTop:24},children:(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.missingCurrentSprint.navigateToSprintsDatabase",defaultMessage:"Fix in Sprints database"})}),(0,st.jsx)(W().p,{onClick:e,style:d.button,children:a.formatMessage(at.cancelButton)})]})}function pt(t){const{onDismiss:e,titleAriaId:o}=t,n=(0,s().tz)(),{isMobile:r}=(0,i().Y0)(),l=mt({isMobile:r});return(0,st.jsxs)("div",{style:l.modalContainer,children:[(0,st.jsx)("div",{style:l.header,id:o,children:(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.titlePlaceholder",defaultMessage:"Sprint summary"})}),(0,st.jsx)("div",{style:l.subheader,children:(0,st.jsx)(Y().A,{style:l.subheaderShimmer})}),(0,st.jsxs)("div",{style:l.flexRow,children:[n.formatMessage(at.selectNextSprintLabel),(0,st.jsx)(Y().A,{style:l.flexRowShimmerBox1})]}),(0,st.jsxs)("div",{style:l.flexRow,children:[n.formatMessage(at.selectDatesForNextSprintLabel),(0,st.jsx)(Y().A,{style:l.flexRowShimmerBox2})]}),(0,st.jsxs)("div",{style:l.flexRow,children:[(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.incompleteTasksPlaceholder",defaultMessage:"Incomplete tasks"}),(0,st.jsx)(Y().A,{style:l.flexRowShimmerBox3})]}),(0,st.jsx)(Z().A,{disabled:!0,onClick:M().lQ,style:l.button,children:(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.completeSprintButtonPlaceholder",defaultMessage:"Complete sprint"})}),(0,st.jsx)(W().p,{onClick:e,style:l.button,children:n.formatMessage(at.cancelButton)})]})}function mt(t){let{isMobile:e}=t;return(0,l().IS)((t=>{const o={height:44,borderRadius:8,display:"flex",alignItems:"center",width:void 0},n={...o,marginTop:12,marginBottom:18};return{modalContainer:{width:400,display:"flex",fontSize:e?a().J.UIRegular.mobile:a().J.UIRegular.desktop,flexDirection:"column",justifyContent:"center",padding:20},header:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:e?18:16,fontWeight:a().Wy.semibold},subheader:{display:"flex",alignItems:"center",justifyContent:"center",color:t.text.tertiary,marginBottom:16,gap:8},separator:{height:2,width:2,borderRadius:2,backgroundColor:t.lightIconColor},flexRow:{display:"flex",...e?{flexDirection:"column",fontSize:14,color:t.text.secondary}:{justifyContent:"space-between",alignItems:"center",height:24,marginBottom:16}},completedTaskGroup:{display:"flex",gap:4},button:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:8,...e&&o},subheaderShimmer:{borderRadius:4,marginTop:6,width:200,height:16,...e&&{height:22}},flexRowShimmerBox1:{borderRadius:4,width:60,height:16,...e&&n},flexRowShimmerBox2:{borderRadius:4,width:80,height:16,...e&&n},flexRowShimmerBox3:{borderRadius:4,width:140,height:16,...e&&n},dropdownButton:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:4,...e&&{...n,border:`1px solid ${t.stroke.secondary}`,justifyContent:"space-between"}},dropdownChevronIcon:{color:t.lightIconColor,width:12,height:"auto"}}}),[e])}function St(t){const e=(0,s().tz)(),{collectionContextStore:o,userSettingsStore:n,onDismissModal:r}=t,c=(0,i().v3)(),u=(0,l().IS)((t=>({banner:{width:"100%",display:"flex",alignItems:"start",backgroundColor:t.accentColors.blue["light"===t.mode?50:300],borderRadius:4,padding:12,marginBottom:12,fontSize:12,lineHeight:1.5,gap:8},bannerContent:{flex:"1 1 auto",color:t.text.primary},bannerTitle:{fontWeight:a().Wy.regular},icon:{width:12,color:t.blueColor},repeatIcon:{flex:"0 0 auto",marginBlockStart:3},closeButton:{marginTop:-3,borderRadius:"50%"},link:{color:t.text.uiBluePrimary}})),[]);return(0,st.jsxs)("div",{style:u.banner,children:[(0,st.jsx)("div",{style:u.repeatIcon,children:(0,C().l)(u.icon)}),(0,st.jsx)("div",{style:u.bannerContent,children:(0,st.jsx)("div",{style:u.bannerTitle,children:(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.turnOnAutomaticSprints.banner.title",defaultMessage:"Complete your sprints automatically. Turn on Automated sprints in <linkToSprintSettings>Settings</linkToSprintSettings>.",values:{linkToSprintSettings:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,st.jsx)(it().A,{onClick:()=>{n&&(r(),K().cJ({environment:c,userSettingsStore:n}),K().Dl(o))},disableUnderline:!0,style:u.link,children:e})}}})})}),(0,st.jsx)(J().A,{icon:y().u,ariaLabel:e.formatMessage({id:"completeAutomationSprintModal.dismissBannerButton",defaultMessage:"Dismiss banner button"}),style:u.closeButton,onClick:()=>{n&&K().cJ({environment:c,userSettingsStore:n})}})]})}function gt(t){const{currentSprintFormattedDateRange:e,currentSprintTaskSummary:o}=t,{isMobile:n}=(0,i().Y0)(),r=(0,s().tz)(),l=mt({isMobile:n}),a=o?r.formatMessage(at.completedPercentSummary,{completedTaskCount:o.completedTaskCount,totalTaskCount:o.totalTaskCount}):void 0,c=e&&o?(0,st.jsxs)(st.Fragment,{children:[e,(0,st.jsx)("div",{style:l.separator}),a]}):e||a;return void 0===c?null:(0,st.jsx)("div",{style:l.subheader,children:c})}function ft(t){const{sprintBlockStore:e,sprintCollectionStore:o}=t;if(!e)return;const n=o.getPropertyMapping(),r=null==n?void 0:n[S().Hx.Dates];if(!r)return;const i=e.getPropertyValue(r);if(!i)return;const l=(0,A().Cok)(i)[0];return l?(0,f().HB)(l):void 0}function xt(t){const{sprintDateRange:e,intl:o}=t;if(e&&(0,f().oM)(e))return(0,x().ZF)({value:e,allowRelativeDates:!1,shortenDateAndRange:!0,displayInUserTimezone:!0,intl:o})}const vt={complete_sprint_and_move_incomplete_tasks_to_next_sprint:(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.moveToNextSprintOption",defaultMessage:"Move to next sprint"}),complete_sprint_and_move_incomplete_tasks_to_backlog:(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.moveToBacklogOption",defaultMessage:"Move to backlog"}),complete_sprint:(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.keepInThisSprintOption",defaultMessage:"Keep in current sprint"})};function yt(t){const{actionTypeStore:e}=t,{isMobile:o}=(0,i().Y0)(),n=(0,r().O$)(e),l=mt({isMobile:o});return(0,st.jsx)($().Ay,{popupType:o?$().z7.SlideUp:$().z7.Popup,alignmentToOrigin:$().yP.Start,placementToOrigin:$().sx.Bottom,render:t=>(0,st.jsx)(Ct,{actionTypeStore:e,buttonPopupParent:t}),renderOrigin:t=>(0,st.jsxs)(W().p,{...t,style:l.dropdownButton,children:[vt[n],(0,v().b)(l.dropdownChevronIcon)]})})}const ht=["complete_sprint_and_move_incomplete_tasks_to_next_sprint","complete_sprint_and_move_incomplete_tasks_to_backlog","complete_sprint"];function Ct(t){const{actionTypeStore:e,buttonPopupParent:o}=t,{isMobile:n}=(0,i().Y0)(),l=(0,r().K8)((()=>ht.map((t=>{const n=t===e.state;return{key:t,action:()=>{e.setState(t),o.close()},render:e=>(0,st.jsx)(G().A,{...e,title:vt[t],isChecked:n})}}))),[e,o]);let s;return s=n?{menuType:D().gu.ActionSheet}:{menuType:D().gu.Popup,maxHeight:"50vh",minWidth:230},(0,st.jsx)(q().A,{...s,children:(0,st.jsx)(Q().Ay,{type:Q().Oh.Vertical,initialFocus:0,sections:[{key:"sprint_automations",items:l,render:t=>(0,st.jsx)(ot().A,{...t})}]})})}function bt(t){const{nextSprintInput:e,completeSprintAutomationContext:o,setNextSprintInput:n,sprintPageIds:a}=t,{sprintCollectionStore:c}=o,{isMobile:u}=(0,i().Y0)(),d=(0,i().v3)(),p=(0,s().tz)(),m=(0,r().K8)((()=>{if(void 0===e)return(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSelect.empty",defaultMessage:"Select sprint"});if("actionId"===e.type)return(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSelect.newSprint",defaultMessage:"New sprint"});if("pointer"===e.type){const t=H().Bv.createChildStore(c,e.pointer);return(0,P().tS)({intl:p,environment:d,store:t,untitledFallback:at.fallbackSprintName})}(0,R().HB)(e)}),[e,p,c,d]),S=mt({isMobile:u}),g=(0,l().IS)((t=>({button:{...void 0===e&&{color:t.text.tertiary}}})),[e]),f={...S.dropdownButton,...g.button};return 0===a.length||1===a.length?(0,st.jsx)(W().p,{style:f,disabled:!0,children:m}):(0,st.jsx)($().Ay,{popupType:u?$().z7.SlideUp:$().z7.Popup,alignmentToOrigin:$().yP.Start,placementToOrigin:$().sx.Bottom,render:t=>(0,st.jsx)(jt,{buttonPopupParent:t,completeSprintAutomationContext:o,sprintPageIds:a,nextSprintInput:e,setNextSprintInput:n}),renderOrigin:t=>(0,st.jsxs)(W().p,{...t,style:f,children:[m,(0,v().b)(S.dropdownChevronIcon)]})})}function jt(t){const{sprintPageIds:e,completeSprintAutomationContext:o,buttonPopupParent:a,nextSprintInput:c,setNextSprintInput:u}=t,{sprintCollectionStore:d}=o,{isMobile:p}=(0,i().Y0)(),m=(0,r().K8)((()=>d.getSpaceId()),[d]),f=(0,r().K8)((()=>(0,O().B7)({collectionStore:o.taskCollectionStore,property:S().yx.TaskToSprintRelation}).filter((t=>t.visible&&("title"===t.property||o.sprintCollectionSchema[t.property])))),[o]),x=(0,r().K8)((()=>new(U().A)),[]),v=(0,l().IS)((t=>({plusIcon:{color:t.lightIconColor,width:12,height:"auto"},createSprintRow:{display:"flex",gap:4},sprintRow:{display:"flex",maxHeight:22,alignItems:"center"},recordTitle:{...p&&{marginRight:12}}})),[p]),y="purple",C=(0,l().DP)(),k=(0,_().LD)(C,y),A=n.useMemo((()=>{const t="actionId"===(null==c?void 0:c.type);return{key:"new_sprint",action:()=>{u({type:"actionId"}),a.close()},render:e=>(0,st.jsx)(G().A,{...e,icon:(0,h().W)(v.plusIcon),title:(0,st.jsxs)("div",{style:v.createSprintRow,children:[(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.selectSprintDropdown.createNew",defaultMessage:"New sprint"}),(0,st.jsx)(lt().A,{isRound:!0,showRemoveButton:!1,value:(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.selectSprintDropdown.createNewToken",defaultMessage:"Next"}),format:g().NY.Medium,isSingle:!0,color:k.textColor,backgroundColor:k.backgroundColor,showColoredDot:y})]}),isChecked:t})}}),[c,a,u,v,k]),M=(0,r().K8)((()=>e.map((t=>{const e={id:t,table:j().ev,spaceId:m},o=H().Bv.createChildStore(d,e),n=o.getIcon(),r="pointer"===(null==c?void 0:c.type)&&b().L3.isEqual(c.pointer,e);return{key:t,action:()=>{u({type:"pointer",pointer:e}),a.close()},render:t=>(0,st.jsx)(G().A,{...t,icon:n&&(0,st.jsx)(tt().B,{disabled:!0,icon:n,isEmptyPage:!1,size:20}),title:(0,st.jsx)("div",{style:v.sprintRow,children:f.map((t=>"title"===t.property?(0,st.jsx)(et().A,{store:o,style:v.recordTitle},"title"):(0,st.jsx)(E().qm,{store:o,property:t.property,disabled:!1,locked:!1,format:"relation",tableWrap:!1,blockPropertyValueOverlayStore:x,collectionStore:d},t.property))).filter(R().O9)}),isChecked:r})}}))),[d,x,a,c,f,m,u,v,e]),T=[{key:"sprints",items:n.useMemo((()=>M.length>0?M:[A]),[M,A]),render:t=>(0,st.jsx)(ot().A,{...t})}];let w;return w=p?{menuType:D().gu.ActionSheet}:{menuType:D().gu.Popup,maxHeight:"50vh",minWidth:230},(0,st.jsx)(q().A,{...w,children:(0,st.jsx)(Q().Ay,{type:Q().Oh.Vertical,initialFocus:0,sections:T})})}function kt(t){const{sprintDateRange:e,setSprintDateRange:o}=t,a=(0,s().tz)(),{isMobile:c}=(0,i().Y0)(),u=n.useMemo((()=>xt({sprintDateRange:e,intl:a})),[e,a]),d=mt({isMobile:c}),p=(0,l().IS)((t=>({button:{...!u&&{color:t.text.tertiary}}})),[u]),m=(0,r().K8)((()=>u||(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.nextSprintDate.placeholder",defaultMessage:"Select dates"})),[u]);return(0,st.jsx)($().Ay,{popupType:c?$().z7.SlideUp:$().z7.Popup,alignmentToOrigin:$().yP.Start,placementToOrigin:$().sx.Bottom,render:t=>(0,st.jsx)(At,{sprintDateRange:e,setSprintDateRange:o,onDismiss:()=>{t.close()}}),renderOrigin:t=>(0,st.jsxs)(W().p,{...t,style:{...d.dropdownButton,...p.button},children:[m,(0,v().b)(d.dropdownChevronIcon)]})})}function At(t){const{sprintDateRange:e,setSprintDateRange:o,onDismiss:r}=t,{isMobile:l}=(0,i().Y0)(),a=n.useMemo((()=>({starting:null!=e&&e.start_date?{type:"date",start_date:e.start_date}:void 0,ending:null!=e&&e.end_date?{type:"date",start_date:e.end_date}:void 0})),[e]);let c;return c=l?{menuType:D().gu.Modal,right:(0,st.jsx)(X().DoneMenuText,{}),onClickRight:r}:{menuType:D().gu.Popup,maxHeight:"50vh",paddingTop:6},(0,st.jsxs)(q().A,{...c,children:[(0,st.jsx)(ot().A,{children:(0,st.jsx)(nt().A,{title:void 0,disableMenuWrap:!0,allowRelativeRangeFilter:!0,value:a,onUpdate:t=>{var e,n;if(t.error)return;const r={...a,...t.value},i=null===(e=r.starting)||void 0===e?void 0:e.start_date,l=null===(n=r.ending)||void 0===n?void 0:n.start_date;o({type:"daterange",start_date:i,end_date:l})},onDismiss:r})}),(0,st.jsx)(ot().A,{topBorder:!0,children:(0,st.jsx)(G().A,{focused:!1,onClick:()=>{o(void 0)},title:(0,st.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.datePicker.clear",defaultMessage:"Clear"})})})]})}o(500234);var _t=()=>o(427091),Mt=()=>o(162901),Rt=()=>o(242718),Tt=()=>o(818369),wt=()=>o(448865),It=()=>o(159809);function Bt(t){if(!t)return;if("aggregation"!==t.type)return;if("text"!==t.aggregationResult.type)return;const e=t.aggregationResult.value,o=null==e?void 0:e.split("/");if(!o||2!==o.length)return;const n=Number(o[0]),r=Number(o[1]);return{completedTaskCount:n,incompleteTaskCount:r-n,totalTaskCount:r,completedTaskPercent:0===r?0:n/r}}function Ft(t){if(!t)return;const e=t.getPropertyMapping(),o=null==e?void 0:e[S().yx.TaskToSprintRelation];if(!o)return;return It().jj.filter.property=o,{...It().jj.filter,property:o}}function Dt(t,e){if(!e)return;const o=e.getPropertyMapping(),n=Ft(e);if(!n)return;const r=null==o?void 0:o[S().yx.Status];if(!r)return;const i=e.getSchema()[r];if(!i||"status"!==i.type)return;const l=(0,wt().Q6)(t,i);return l?{type:"aggregation",filter:{operator:"and",filters:[n]},aggregation:{aggregator:{operator:"count_per_group",groupName:l},property:r}}:void 0}class Pt extends p().default{getInitialState(){return{isLoading:!0,currentSprintId:void 0,querySprintsResult:void 0,currentSprintTaskSummary:void 0}}updateCurrentSprint(t){const{querySprintsResult:e,currentSprintTaskSummary:o}=this.state;void 0!==t&&void 0!==e&&void 0!==o?this.setState({isLoading:!1,currentSprintId:t,querySprintsResult:e,currentSprintTaskSummary:o}):t?this.setState({...this.state,currentSprintId:t}):this.setState({...this.state,isLoading:!0,currentSprintId:t})}updateNextAndFutureSprints(t){const{currentSprintId:e,currentSprintTaskSummary:o}=this.state;void 0!==e&&void 0!==t&&void 0!==o?this.setState({isLoading:!1,currentSprintId:e,querySprintsResult:t,currentSprintTaskSummary:o}):t?this.setState({...this.state,querySprintsResult:t}):this.setState({...this.state,isLoading:!0,querySprintsResult:t})}updateCurrentSprintTaskSummary(t){const{currentSprintId:e,querySprintsResult:o}=this.state;void 0!==e&&void 0!==o&&void 0!==t?this.setState({isLoading:!1,currentSprintId:e,querySprintsResult:o,currentSprintTaskSummary:t}):t?this.setState({...this.state,currentSprintTaskSummary:t}):this.setState({...this.state,isLoading:!0,currentSprintTaskSummary:t})}}const Ot=Pt;function Lt(t){const{taskCollectionContextStore:e,completeSprintAutomationContext:o,children:l,isModalOpen:a}=t,{sprintCollectionStore:c}=o,u=c.id,d=(0,i().v3)(),p=(0,r().K8)((()=>new Ot),[]),m=(0,r().K8)((()=>p.state),[p]),g=(0,r().K8)((()=>{var t;const o=e.relativeVariableStore.state;return null==o||null===(t=o[u])||void 0===t?void 0:t.current}),[u,e]);n.useEffect((()=>{p.updateCurrentSprint(g)}),[g,p]);const[{value:f}]=(0,Mt().Yb)((async()=>await async function(t){var e;const{environment:o,completeSprintAutomationContext:n}=t,{sprintCollectionStore:r}=n,i=function(t){var e,o;const{sprintCollectionStore:n,sprintCollectionSchema:r}=t,i=n.getPropertyMapping(),l=null==i?void 0:i[S().Hx.StatusV2];if(!l)return;const s=r[l];if(!s||"status"!==s.type)return;const a=null===(e=s.options)||void 0===e||null===(e=e.find((t=>t.id===S().tO)))||void 0===e?void 0:e.value,c=null===(o=s.options)||void 0===o||null===(o=o.find((t=>t.id===S().Jd)))||void 0===o?void 0:o.value;if(!a||!c)return;const u=Rt().n$[S().av].next.reducer.getCombinatorFilter(r);if(!u)return;const d={type:"results",filter:u,limit:Kt},p={type:"results",filter:{operator:"and",filters:[{property:l,filter:{operator:"status_is",value:{type:"is_option",value:c}}}]},limit:Kt};return{[S().tO]:d,[S().Jd]:p}}(n),l=r.getPropertyMapping(),s=null==l?void 0:l[S().Hx.Dates],a=null==l?void 0:l[S().Hx.UniqueId];if(!i||!s||!a)return;const c={userId:o.currentUser.id,userTimeZone:(0,_t().P)(),searchQuery:void 0,sort:[{property:s,direction:"ascending"},{property:a,direction:"ascending"}],reducers:i},u=null===(e=r.getParentBlockStore())||void 0===e?void 0:e.getCollectionViewStores()[0],d=r.getSpaceId();if(!u)return;const p=await Tt().callApi({eventName:"queryCollection",environment:o,data:{source:{type:"collection",id:r.id,spaceId:d},collectionView:{id:u.id,spaceId:d},loader:c},tracking:{src:"complete_sprint_modal_sprint_picker"}});if("success"!==p.type)return;const m=p.data.result.reducerResults[S().tO],g=p.data.result.reducerResults[S().Jd];if("results"!==m.type||"results"!==g.type)return;const f=m.blockIds,x=g.blockIds;return{nextSprintIds:f,futureSprintIds:x}}({environment:d,completeSprintAutomationContext:o})),[g,d,o]);n.useEffect((()=>{p.updateNextAndFutureSprints(f)}),[f,p]);const x=(0,s().tz)(),[{value:v}]=(0,Mt().Yb)((async()=>await async function(t){var e;const{environment:o,completeSprintAutomationContext:n,intl:r}=t,{taskCollectionStore:i}=n,l=Dt(r,i);if(!l)return;const s=Ft(i);if(!s)return;const a={filter:{operator:"and",filters:[s]},userId:o.currentUser.id,userTimeZone:(0,_t().P)(),searchQuery:"",sort:[],reducers:{completed_tasks_in_current_sprint:l}},c=null===(e=i.getParentBlockStore())||void 0===e?void 0:e.getCollectionViewStores()[0],u=i.getSpaceId();if(!c)return;const d=await Tt().callApi({eventName:"queryCollection",environment:o,data:{source:{type:"collection",id:i.id,spaceId:u},collectionView:{id:c.id,spaceId:u},loader:a},tracking:{src:"complete_sprint_modal_sprint_picker"}});if("success"!==d.type)return;return Bt(d.data.result.reducerResults.completed_tasks_in_current_sprint)}({intl:x,environment:d,completeSprintAutomationContext:o})),[g,d,o,a]);return n.useEffect((()=>{p.updateCurrentSprintTaskSummary(v)}),[v,p]),(0,st.jsx)(st.Fragment,{children:l({completeSprintAutomationState:m,onAutomationComplete:()=>{p.reset()}})})}const Kt=5;var Vt=()=>o(286404),Nt=()=>o(433364),zt=()=>o(585958),Ut=()=>o(128057),Ht=()=>o(858580);function Et(t){const{percentage:e}=t;return(0,st.jsx)(Ht().l,{numberValue:e,numberFormat:void 0,numberPrecision:void 0,numberShowAs:{type:"ring",maxValue:1,color:"blue",showValue:!1},shouldRenderTooltip:!1,progressSize:15})}const Wt=function(t){const{isLoading:e,taskSummary:n,styles:r}=t;return(0,st.jsx)("div",{style:{width:16,height:"auto",...r},children:e?(0,st.jsx)(o(966789).A,{}):(0,st.jsx)(Et,{percentage:(null==n?void 0:n.completedTaskPercent)??0})})};function Gt(t){const{taskCollectionContextStore:e,children:o}=t,n=(0,r().K8)((()=>(0,Ut().y_)(e)),[e]),i=(0,r().K8)((()=>e.collectionStore()),[e]),l=(0,s().tz)(),a=(0,r().K8)((()=>Dt(l,i)),[i,l]);return!a||n?null:(0,st.jsx)(zt().A,{id:"completed_tasks_in_current_sprint_view",collectionContextStore:e,reducer:a,render:t=>{const e=Bt(t.state);return e?(0,st.jsxs)(st.Fragment,{children:[(0,st.jsx)($t,{currentSprintTasksInView:e}),o(e)]}):null}})}function $t(t){const{currentSprintTasksInView:e}=t,o=(0,l().IS)((t=>({summary:{display:"flex",alignItems:"center",justifyContent:"center",columnGap:5,color:t.text.tertiary,fontSize:a().J.UIRegular.desktop,fontWeight:a().Wy.regular,whiteSpace:"nowrap"}})),[]),{isPhone:n}=(0,i().Y0)();return n?null:(0,st.jsxs)("div",{style:o.summary,children:[(0,st.jsx)(Wt,{styles:{paddingTop:1},isLoading:!1,taskSummary:e}),(0,st.jsx)(s().sA,{id:"completeAutomationSprintAutomation.inlineSummary.completedPercentSummary",defaultMessage:"{completedTaskCount} / {totalTaskCount} tasks",values:{completedTaskCount:e.completedTaskCount,totalTaskCount:e.totalTaskCount}})]})}function Jt(t){const{collectionContextStore:e,completeSprintAutomationContext:o}=t,l=(0,i().v3)(),[s,a]=n.useState(!1),[u,d]=n.useState(!1),p=n.useCallback((()=>{d(!1)}),[d]),m=(0,r().K8)((()=>o.permissionsContext.canEdit),[o.permissionsContext.canEdit]),S=(0,r().K8)((()=>z().default.state.currentUserSettingsStore),[]),g=()=>{d(!0);"complete-sprint-button-tooltip"===(0,Nt().gt)(S,"sprints-onboarding")&&c().tutorialGoToNextStep(l,"sprints-onboarding"),N(l,{...(0,F().sl)(e),action:"open_modal"})};return m?(0,st.jsxs)(st.Fragment,{children:[(0,st.jsx)(Lt,{completeSprintAutomationContext:o,taskCollectionContextStore:e,isModalOpen:u,children:t=>{let{completeSprintAutomationState:n,onAutomationComplete:r}=t;return(0,st.jsx)(ct,{completeSprintAutomationContext:o,isOpen:u,onDismiss:p,setIsLoading:a,taskCollectionContextStore:e,completeSprintAutomationState:n,onAutomationComplete:r})}}),(0,st.jsx)(Gt,{taskCollectionContextStore:e,children:()=>(0,st.jsx)(Yt,{taskCollectionContextStore:e,onClick:g,isLoading:s})})]}):null}function Yt(t){const{taskCollectionContextStore:e,onClick:o,isLoading:c}=t,{isPhone:d}=(0,i().Y0)(),p=n.useRef(null),m=function(t){const{isPhone:e}=t;return(0,l().IS)((t=>({button:{height:26,marginLeft:8,fontWeight:a().Wy.medium,...e&&{flexGrow:1,borderRadius:8,height:44}}})),[e])}({isPhone:d}),S=(0,r().K8)((()=>e.collectionViewBlockStore()),[e]),g=(0,r().O$)(z().AppStoreCurrentSpaceStore),f=(0,r().K8)((()=>null==S?void 0:S.getSpaceId()),[S]);if(!S)return(0,st.jsx)(st.Fragment,{});const x=f===(null==g?void 0:g.id);return(0,st.jsxs)(st.Fragment,{children:[(0,st.jsx)(Vt().A,{size:"lg",ref:p,onClick:o,style:m.button,disabled:c,disabledFeedback:c,children:(0,st.jsx)(s().sA,{defaultMessage:"Complete sprint",id:"completeSprintAutomationButton.label"})}),x&&(0,st.jsx)(u().rY,{origin:p})]})}var qt=()=>o(486826);function Qt(t){var e;const{collectionContextStore:o,sprintAutomationContext:n}=t,s=(0,l().IS)((t=>({summary:{display:"flex",alignItems:"center",justifyContent:"center",marginLeft:17,columnGap:5,color:t.text.tertiary,fontSize:a().J.UIRegular.desktop,fontWeight:a().Wy.regular,whiteSpace:"nowrap"},icon:{width:16,height:"auto",paddingTop:2}})),[]),{isPhone:c}=(0,i().Y0)(),u=(0,r().K8)((()=>{var t;const e=null===(t=n.automationContext)||void 0===t?void 0:t.automationStore.getRunAt();if(!e)return;const o=qt().c9.fromMillis(e,{zone:"utc"}).toLocal().startOf("day"),r=qt().c9.now().startOf("day"),i=o.diff(r,"days").days;return i<1?"soon":1===i?"today":2===i?"tomorrow":i-1}),[null===(e=n.automationContext)||void 0===e?void 0:e.automationStore]);return u?(0,st.jsx)(Gt,{taskCollectionContextStore:o,children:()=>c?null:(0,st.jsxs)("div",{style:s.summary,children:[(0,C().l)(s.icon),(0,st.jsx)(Xt,{daysRemaining:u})]})}):null}function Xt(t){const{daysRemaining:e}=t;return"soon"===e?(0,st.jsx)(s().sA,{id:"completeAutomationSprintAutomation.inlineSummary.endingSoon",defaultMessage:"Ending soon"}):"today"===e?(0,st.jsx)(s().sA,{id:"completeAutomationSprintAutomation.inlineSummary.endsToday",defaultMessage:"Ends today"}):"tomorrow"===e?(0,st.jsx)(s().sA,{id:"completeAutomationSprintAutomation.inlineSummary.endsTomorrow",defaultMessage:"Ends tomorrow"}):(0,st.jsx)(s().sA,{id:"completeAutomationSprintAutomation.inlineSummary.daysRemaining",defaultMessage:"Ends in {daysRemaining} days",values:{daysRemaining:e}})}const Zt=function(t){var e;const{collectionContextStore:o}=t,n=(0,r().K8)((()=>o.completeSprintButtonContextStore.state),[o]),i=(0,r().K8)((()=>{var t;return Boolean(null==n||null===(t=n.automationContext)||void 0===t?void 0:t.automationStore.isActive())}),[null==n||null===(e=n.automationContext)||void 0===e?void 0:e.automationStore]);return n?i?(0,st.jsx)(Qt,{collectionContextStore:o,sprintAutomationContext:n}):(0,st.jsx)(Jt,{collectionContextStore:o,completeSprintAutomationContext:n}):null}},496399:(t,e,o)=>{o.d(e,{A:()=>j});o(725707),o(491955),o(403517),o(242343);var n=()=>o(803290),r=()=>o(466003),i=()=>o(15552),l=()=>o(871002),s=()=>o(531866),a=()=>o(242718),c=()=>o(145017),u=()=>o(518797),d=()=>o(21164),p=()=>o(409211),m=()=>o(14931),S=()=>o(653998),g=()=>o(975392),f=()=>o(76394),x=()=>o(31448),v=()=>o(709237),y=()=>o(699773),h=()=>o(969481),C=()=>o(413871),b=o(163643);const j=function(t){let{schema:e,propertyFilter:r,parentStore:l,valueOnly:s,style:a}=t;const c=(0,n().K8)((()=>{const t=e[r.property];if(t&&(0,o(564134).nC)(t))return(0,o(755786).LQ)(t,l)}),[e,r,l]),{filter:u}=r,d=(0,i().s1)(u)?u.subfilter:u,p=(0,i().My)(d)&&!(0,i().fZ)(u),m={...a,maxWidth:void 0};return(0,b.jsx)("span",{style:(0,i().nM)(d)?m:a,children:(0,b.jsx)(S().sA,{defaultMessage:"{propertyName}{colonSeparator} {filterOperator} {propertyValue}",id:"database.filterBarFilterValue.title",values:{propertyName:s?void 0:(0,b.jsx)(A,{propertyFilter:r,schema:e}),colonSeparator:s||p?void 0:":",filterOperator:(0,b.jsx)(_,{propertyFilter:r}),propertyValue:(0,b.jsx)(R,{propertyFilter:r,schema:e,parentStore:l,relatedCollectionAppConfigUri:c})}})})};function k(){return(0,b.jsx)(S().sA,{defaultMessage:"Not",id:"database.filterBarFilterValue.notOperator"})}function A(t){let{propertyFilter:e,schema:o}=t;const n=o[e.property];return n?(0,b.jsx)("span",{style:{fontWeight:x().Wy.medium},children:n.name}):null}function _(t){let{propertyFilter:e}=t;const{filter:o}=e,n=(0,i().s1)(o)?o.subfilter:o;if((0,i().YH)(n))return"string_contains"===n.operator||"string_is"===n.operator?null:"string_does_not_contain"===n.operator||"string_is_not"===n.operator?(0,b.jsx)(k,{}):(0,b.jsx)(b.Fragment,{children:(0,h().J)(n.operator)});if((0,i().uf)(n))return"geo_point_is_within"===n.operator?null:"geo_point_is_not_within"===n.operator?(0,b.jsx)(k,{}):(0,b.jsx)(b.Fragment,{children:(0,h().J)(n.operator)});if((0,i().My)(n))return(0,b.jsx)(b.Fragment,{children:(0,h().J)(n.operator)});if((0,i().Ui)(n)){if("checkbox_is_not"===n.operator)return(0,b.jsx)(k,{})}else{if((0,i().v0)(n))return"enum_is"===n.operator?null:"enum_is_not"===n.operator?(0,b.jsx)(k,{}):(0,b.jsx)(b.Fragment,{children:(0,h().J)(n.operator)});if((0,i().as)(n))return"enum_contains"===n.operator?null:"enum_does_not_contain"===n.operator?(0,b.jsx)(k,{}):"enum_contains_all"===n.operator?null:(0,b.jsx)(b.Fragment,{children:(0,h().J)(n.operator)});if((0,i().H$)(n))return"status_is"===n.operator?null:"status_is_not"===n.operator?(0,b.jsx)(k,{}):(0,b.jsx)(b.Fragment,{children:(0,h().J)(n.operator)});if((0,i().Pq)(n))return"relation_contains"===n.operator?null:"relation_does_not_contain"===n.operator?(0,b.jsx)(k,{}):(0,b.jsx)(b.Fragment,{children:(0,h().J)(n.operator)});if((0,i().I_)(n))return"person_contains"===n.operator?null:"person_does_not_contain"===n.operator?(0,b.jsx)(k,{}):(0,b.jsx)(b.Fragment,{children:(0,h().J)(n.operator)});if((0,i().G)(n)){if("location_is"===n.operator)return null;if("location_is_not"===n.operator)return(0,b.jsx)(k,{})}else if((0,i().nM)(n)){if("date_is"===n.operator)return null;if("date_is_after"===n.operator)return(0,b.jsx)(S().sA,{defaultMessage:"After",id:"database.filterValue.dateType.dateIsAfter.title"});if("date_is_before"===n.operator)return(0,b.jsx)(S().sA,{defaultMessage:"Before",id:"database.filterValue.dateType.dateIsBefore.title"});if("date_is_on_or_after"===n.operator)return(0,b.jsx)(S().sA,{defaultMessage:"On or after",id:"database.filterValue.dateType.dateIsOnOrAfter.title"});if("date_is_on_or_before"===n.operator)return(0,b.jsx)(S().sA,{defaultMessage:"On or before",id:"database.filterValue.dateType.dateIsOnOrBefore.title"});if(!(0,i().Cw)(n))return(0,b.jsx)(b.Fragment,{children:(0,h().J)(n.operator)});{const t=n.value;if(!t.value||"exact"!==t.type||!(0,l().jS)(t.value))return(0,b.jsx)(b.Fragment,{children:(0,h().kz)(t)});if(t.value.start_date&&t.value.end_date)return null;if(t.value.start_date)return(0,b.jsx)(S().sA,{defaultMessage:"Starting",id:"database.filterValue.dateType.starting.title"});if(t.value.end_date)return(0,b.jsx)(S().sA,{defaultMessage:"Ending",id:"database.filterValue.dateType.ending.title"})}}else{if((0,i().uU)(n))return"verification_is"===n.operator?null:"verification_is_not"===n.operator?(0,b.jsx)(k,{}):(0,b.jsx)(b.Fragment,{children:(0,h().J)(n.operator)});(0,f().HB)(n)}}return null}function M(t){let{index:e}=t;return(0,b.jsx)("span",{style:{whiteSpace:"pre"},children:(0,b.jsx)(S().sA,{defaultMessage:", ",id:"database.filterValue.commaSeparator"})},e)}function R(t){let{propertyFilter:e,schema:o,parentStore:n,relatedCollectionAppConfigUri:r}=t;const{filter:u}=e,p=(0,i().s1)(u)?u.subfilter:u;if(!(0,i().gc)(p))return null;if((0,i().YH)(p)||(0,i().My)(p)){const t=p.value.value;if(void 0!==t)return(0,b.jsx)("span",{children:t})}else if((0,i().Ui)(p)){const t=p.value.value;if(!0===t)return(0,b.jsx)("span",{children:(0,b.jsx)(S().sA,{defaultMessage:"Checked",id:"database.filterValue.checkboxType.checked.title"})});if(!1===t)return(0,b.jsx)("span",{children:(0,b.jsx)(S().sA,{defaultMessage:"Unchecked",id:"database.filterValue.checkboxType.unchecked.title"})})}else{if((0,i().v0)(p)||(0,i().as)(p)){const t=(0,i().v0)(p)?(0,i().Zl)(p):(0,i().SM)(p),e=g().oE(t.map((t=>{let{value:e}=t;return e})));return 0===e.length?null:(0,b.jsx)("span",{children:(0,s().A)(e,(t=>(0,b.jsx)(M,{index:t})))})}if((0,i().H$)(p)){const t=(0,i().V6)(p),e=g().oE(t.map((t=>{let{value:e}=t;return e})));return 0===e.length?null:(0,b.jsx)("span",{children:(0,s().A)(e,(t=>(0,b.jsx)(M,{index:t})))})}if((0,i().Pq)(p)){const t=(0,i().Rh)(p),e=g().oE(t.map(((t,e)=>{if(!t.value)return null;const o=t.type;if("exact"===o){const e=C().Bv.createChildStore(n,{table:c().ev,id:t.value});return(0,b.jsx)(v().A,{style:{display:"inline"},store:e},t.value)}if("relative"===o){var i;if("builtin"===t.value.type)return r?(0,b.jsx)("span",{children:(0,b.jsx)(S().sA,{...null===(i=a().n$[r])||void 0===i||null===(i=i[t.value.variable])||void 0===i?void 0:i.messageDescriptor})},e):null;if("current_page_in_related_collection"===t.value.type)return(0,b.jsx)("span",{children:(0,b.jsx)(S().sA,{defaultMessage:"This page",id:"database.filterAndSort.currentPagePropertyValue.title"})},e)}else(0,f().HB)(o)})));return(0,b.jsx)(b.Fragment,{children:(0,s().A)(e,(t=>(0,b.jsx)(M,{index:t})))})}if((0,i().I_)(p))return(0,b.jsx)(T,{useFilter:p,parentStore:n});if((0,i().G)(p)){const t=(0,i().GK)(p),e=g().oE(t.map((t=>{if(t.value){const e=t.value,o=C().sk.createChildStore(n,{table:d().Vl,id:e});return(0,b.jsx)(v().A,{style:{display:"inline"},store:o},e)}})));return(0,b.jsx)(b.Fragment,{children:(0,s().A)(e,(t=>(0,b.jsx)(M,{index:t})))})}if((0,i().nM)(p)){const t=o[e.property],n=(t&&"date"===t.type?t.date_format:void 0)||l().vz;let r;if("exact"===p.value.type){const t=p.value;if(t.value)if((0,l().$P)(t.value))r=t.value;else if((0,l().jS)(t.value)){const e=(0,l().dq)(t.value);e&&(r=e.value)}}else if(!(0,i().Cw)(p))return(0,b.jsx)(b.Fragment,{children:(0,h().RR)(p.value)});if(r)return(0,b.jsx)(y().A,{style:{display:"inline"},value:r,dateFormat:n,shortenDateAndRange:!0})}else{if((0,i().uU)(p)){const t=(0,i().ms)(p).filter((t=>{let{value:e}=t;return Boolean(e)})).map(h().w0);return 0===t.length?null:(0,b.jsx)("span",{children:(0,s().A)(t,(t=>(0,b.jsx)(M,{index:t})))})}if((0,i().uf)(p))return null;(0,f().HB)(p)}}return null}function T(t){let{parentStore:e,useFilter:o}=t;const l=(0,S().tz)(),a=(0,i().Wf)(o),c=(0,n().K8)((()=>g().oE(a.map(((t,o)=>{if("relative"===t.type)return(0,b.jsx)("span",{children:(0,b.jsx)(S().sA,{defaultMessage:"Me",id:"database.filterValue.personType.firstPersonPropertyValue.title"})},o);if(t.value){const n=t.value;if(n.table===p().oo){const t=C().sk.createChildStore(e,{table:n.table,id:n.id});return(0,b.jsx)("span",{children:(0,m().c6)(l,t.getModel())},o)}if(n.table===u().GP){const t=C().sk.createChildStore(e,{table:n.table,id:n.id});return(0,b.jsx)("span",{children:(0,r().Hg)(t.getModel())},o)}}})))),[a,e,l]);return(0,b.jsx)(b.Fragment,{children:(0,s().A)(c,(t=>(0,b.jsx)(M,{index:t})))})}},500418:(t,e,o)=>{o.d(e,{N9:()=>ot,aV:()=>tt,he:()=>lt});o(725707),o(491955),o(500234),o(771702),o(403517);var n=o(242343),r=()=>o(660714),i=()=>o(237385),l=()=>o(803290),s=()=>o(174114),a=()=>o(327845),c=()=>o(263873),u=()=>o(44250),d=()=>o(653998),p=()=>o(975392),m=()=>o(236339),S=()=>o(786944),g=()=>o(521325),f=()=>o(360378),x=()=>o(384221),v=()=>o(261603),y=()=>o(254653),h=()=>o(615917),C=()=>o(209684),b=()=>o(792824),j=()=>o(97787),k=()=>o(441292),A=()=>o(59175),_=()=>o(443252),M=()=>o(142708),R=()=>o(303709),T=()=>o(579275),w=()=>o(128057),I=()=>o(475923),B=()=>o(495312),F=()=>o(622286),D=()=>o(479020),P=()=>o(98508),O=()=>o(962373),L=()=>o(755769),K=()=>o(580257),V=()=>o(555434),N=()=>o(862384),z=()=>o(542714),U=()=>o(314164),H=()=>o(200203),E=()=>o(49638),W=()=>o(425235),G=()=>o(502622),$=o(163643);const J=(0,o(680369).wt)("arrowUpThick",{viewBox:"0 0 16 16",svg:(0,$.jsx)("path",{d:"M7.99316 14.6133C8.58789 14.6133 8.98438 14.2031 8.98438 13.5879V6L8.92285 4.5166L10.2969 6.10254L11.835 7.63379C12.0195 7.81836 12.252 7.94141 12.5459 7.94141C13.0791 7.94141 13.4824 7.54492 13.4824 6.98438C13.4824 6.72461 13.3799 6.48535 13.1748 6.27344L8.72461 1.82324C8.54004 1.63184 8.2666 1.52246 7.99316 1.52246C7.72656 1.52246 7.44629 1.63184 7.26172 1.82324L2.81836 6.27344C2.61328 6.48535 2.51074 6.72461 2.51074 6.98438C2.51074 7.54492 2.91406 7.94141 3.44727 7.94141C3.74805 7.94141 3.98047 7.81836 4.1582 7.63379L5.69629 6.10254L7.07031 4.5166L7.00195 6V13.5879C7.00195 14.2031 7.40527 14.6133 7.99316 14.6133Z"})});var Y=()=>o(31448),q=()=>o(466321),Q=()=>o(662505);function X(t){let{collectionContextStore:e,collectionSettingsStore:o}=t;const{device:r}=(0,i().v3)(),s=(0,l().K8)((()=>o.state.open),[o]),a=(0,n.useCallback)((t=>{t&&(0,B().Rp)(t.target)||g().os({collectionSettingsStore:o})}),[o]),c=(0,n.useCallback)((()=>(0,$.jsx)(v().m$,{context:I().Bd.FilterBar,collectionContextStore:e,collectionSettingsStore:o,hideDesktopHeader:!0})),[e,o]);return(0,n.useEffect)((()=>()=>g().os({collectionSettingsStore:o})),[]),(0,$.jsx)(_().Ay,{popupType:r.isMobile?q().n.SlideUp:q().n.Popup,placementToOrigin:L().UV.Bottom,alignmentToOrigin:L().MY.Start,open:s,origin:(0,$.jsx)(Z,{collectionContextStore:e,collectionSettingsStore:o}),onDismiss:a,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,render:c})}function Z(t){let{collectionContextStore:e,collectionSettingsStore:o}=t;const r=(0,i().v3)(),[a,c,u,p]=(0,l().K8)((()=>[e.currentSortsStore.state,e.localStateDiffStore.state,e.normalizedSchemaStore.state,e.permissionScopesStore.state]),[e]),S=a[0],f=S?u[S.property]:void 0,x=(0,n.useCallback)((()=>{(0,m().X)({environment:r,collectionContextStore:e,action:"click_sort"}),g().R8({collectionSettingsStore:o,item:{type:"sort"}})}),[e,o,r]),v=(0,s().IS)((t=>({arrowIcon:{width:12,marginRight:4,fill:t.blueColor},arrowsIcon:{width:16,marginRight:4,fill:t.blueColor},title:{marginTop:-1,maxWidth:220,...Y().RC}})),[]);let y;return y=1===a.length?S&&"descending"===S.direction?(0,W().u)(v.arrowIcon):J(v.arrowIcon):(0,G().X)(v.arrowsIcon),(0,$.jsx)(Q().A,{on:!0,hasDiff:Boolean(p.canConfigureBlock&&c.sorts),icon:y,title:(0,$.jsx)("span",{style:v.title,children:1===a.length&&f?f.name:(0,$.jsx)(d().sA,{defaultMessage:"{sortCount} sorts",id:"database.filterBar.sorts.label",values:{sortCount:a.length}})}),onClick:x})}let tt=function(t){return t[t.FilterBar=0]="FilterBar",t[t.SettingsFilters=1]="SettingsFilters",t}({});const et=o(129044).default.createClass({open:!1,stack:[]},{name:"CreateFilterSettingsStore"});function ot(t){var e,o;let{collectionContextStore:r,showHoverActionsStore:a,createFilterSettingsStore:c,saveControlMoreActionsButtonPopupStore:p}=t;const m=(0,i().WS)(),S=(0,s().DP)(),g=(0,F().X)("db_ux_chrome"),f=(0,l().uB)(p,O().A),x=(0,l().uB)(c,et),v=(0,l().K8)((()=>(0,w().y_)(r)),[r]),y=(0,l().K8)((()=>m&&r.searchOpenStore.state),[m,r]),h=(0,l().O$)(r.currentPropertyFiltersStore),C=(0,l().O$)(r.currentSortsStore),b=(0,l().K8)((()=>r.filterBarSortSettingsStore.state.open),[r]),j=C.length>0||b,k=(0,l().K8)((()=>r.isUnlistedViewStore.state),[r]),A=(0,l().K8)((()=>(0,z().H)(r)?r.currentCombinatorFilterStore.state:void 0),[r]),_=(0,l().uB)(void 0,K().A),T=null===(e=(0,U().Oz)(r))||void 0===e?void 0:e.background,I=(0,l().K8)((()=>"collectionSettings"===r.contextType),[r]),B=(0,l().K8)((()=>r.collectionViewBlockStore()),[r]),L=(0,l().K8)((()=>r.collectionStore()),[r]),N=(0,V().Y)(B),H=(0,l().K8)((()=>{var t,e;if(!N||!L)return;const o=null===(t=N.getModel())||void 0===t?void 0:t.getData();return null==o||null===(e=o.modules)||void 0===e?void 0:e.filter((t=>"database"===t.type)).find((t=>{var e;return(null===(e=(0,u().DK)(t.state))||void 0===e||null===(e=e.pointer)||void 0===e?void 0:e.id)===L.id}))}),[N,L]),E=(0,n.useCallback)((t=>{r.filtersBarOpenStore.setState(!0)}),[r]),W=(0,s().IS)((t=>({container:{width:"100%",zIndex:86,...g&&{borderTop:`1px solid ${t.tableDividerColor}`,marginTop:4},...k&&{paddingLeft:16,paddingRight:16,borderTop:"none"}}})),[g,k]);return(0,$.jsxs)("div",{style:W.container,onClick:E,tabIndex:0,role:"button",children:[I&&(null===(o=(0,u().DK)(null==H?void 0:H.state))||void 0===o?void 0:o.filter)&&!v&&(0,$.jsx)("div",{style:{fontSize:14,color:S.text.tertiary,paddingTop:6},children:(0,$.jsx)(d().sA,{id:"database.filterBar.collectionSettings.workflowAppFilter",defaultMessage:"This filter is used by the app’s Functions"})}),(0,$.jsxs)("div",{style:{display:"flex",paddingTop:4},children:[y&&(0,$.jsx)(ct,{collectionContextStore:r}),!y&&(0,$.jsxs)("div",{style:{position:"relative",flexGrow:0,overflow:"hidden"},children:[(0,$.jsx)(M().H,{store:_,type:P().A.X,style:{display:"flex",alignItems:"center",paddingTop:8,paddingBottom:8},children:m?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(ut,{collectionContextStore:r}),j&&(0,$.jsx)(rt,{collectionContextStore:r}),j&&!m&&(0,$.jsx)(lt,{}),A&&(0,$.jsx)(nt,{collectionContextStore:r}),(0,$.jsx)(at,{collectionContextStore:r,propertyFilters:h,createFilterSettingsStore:x}),(0,$.jsx)(mt,{collectionContextStore:r,showHoverActionsStore:a,createFilterSettingsStore:x})]}):(0,$.jsxs)($.Fragment,{children:[j&&(0,$.jsx)(rt,{collectionContextStore:r}),j&&!m&&(0,$.jsx)(lt,{}),A&&(0,$.jsx)(nt,{collectionContextStore:r}),(0,$.jsx)(at,{collectionContextStore:r,createFilterSettingsStore:x,propertyFilters:h}),(0,$.jsx)(mt,{collectionContextStore:r,showHoverActionsStore:a,createFilterSettingsStore:x})]})}),!m&&(0,$.jsx)(R().A,{store:_,backgroundColor:T})]}),(0,$.jsxs)("div",{style:{display:"flex",alignItems:"start",paddingTop:6,marginLeft:"auto",flexShrink:0},children:[!m&&v&&(0,$.jsx)(dt,{collectionContextStore:r,showHoverActionsStore:a,saveControlMoreActionsButtonPopupStore:f}),!m&&(0,$.jsx)(D().A,{collectionContextStore:r})]})]}),m&&!y&&(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[v&&(0,$.jsx)(dt,{collectionContextStore:r,showHoverActionsStore:a,saveControlMoreActionsButtonPopupStore:f}),(0,$.jsx)(D().A,{collectionContextStore:r})]})]})}function nt(t){let{collectionContextStore:e}=t;return(0,$.jsx)(H().l,{context:tt.FilterBar,collectionSettingsStore:e.filterBarCombinatorFilterSettingsStore,collectionContextStore:e})}function rt(t){let{collectionContextStore:e}=t;return(0,$.jsx)(X,{collectionContextStore:e,collectionSettingsStore:e.filterBarSortSettingsStore},"sort")}function it(t){let{filter:e,collectionContextStore:o,onClick:n}=t;const r=(0,l().K8)((()=>o.getFilterBarItemSettingsStore(e)),[o,e]);return(0,$.jsx)(E().A,{id:e.id,context:tt.FilterBar,collectionContextStore:o,collectionSettingsStore:r,onClick:n},e.id)}function lt(){const t=(0,s().DP)();return(0,$.jsx)("div",{style:{borderRight:`1px solid ${t.regularDividerColor}`,height:24,marginRight:12,marginLeft:8}})}function st(t){t.searchOpenStore.setState(!1),t.searchQueryStore.setState("")}function at(t){let{propertyFilters:e,collectionContextStore:o,createFilterSettingsStore:r}=t;const s=(0,i().v3)(),a=(0,l().O$)(o.permissionScopesStore),[c]=(0,l().K8)((()=>[o.currentPropertyFiltersStore.state]),[o]),u=(0,n.useCallback)((t=>{g().os({collectionSettingsStore:r}),g().os({collectionSettingsStore:o.filterBarSortSettingsStore}),g().os({collectionSettingsStore:o.filterBarCombinatorFilterSettingsStore}),c.filter((e=>!t||e.id!==t)).forEach((t=>{const e=o.getFilterBarItemSettingsStore(t);g().os({collectionSettingsStore:e})}))}),[o,r,c]);if(a.canConfigureBlock){const t=e.map((t=>t.id));return(0,$.jsx)(j().Ay,{direction:"horizontal",keys:t,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,renderKey:t=>{const n=e.find((e=>e.id===t));if(n)return(0,$.jsx)(it,{collectionContextStore:o,filter:n,onClick:u})},style:{display:"flex",flexShrink:0},onDrop:t=>function(t,e,o){if(!o.collectionViewBlockStore())return;const n=o.currentPropertyFiltersStore.state,r=p().oE(t.map((t=>n.find((e=>e.id===t)))));S().IU({environment:e,collectionContextStore:o,temporaryState:{...o.temporaryStateStore.state,propertyFilters:{value:r}}}),(0,m().X)({environment:e,collectionContextStore:o,action:"reorder_filters"})}(t,s,o)})}return(0,$.jsx)($.Fragment,{children:e.map((t=>(0,$.jsx)(it,{filter:t,collectionContextStore:o,onClick:u},t.id)))})}function ct(t){let{collectionContextStore:e}=t;const o=(0,d().tz)(),c=(0,s().DP)(),u=(0,i().v3)(),p=(0,l().O$)(e.searchQueryStore),m=(0,n.useCallback)((t=>{e.searchQueryStore.setState(t.target.value)}),[e]),S=(0,r().Y)(m,250),g=(0,F().X)("db_ux_chrome");return(0,$.jsx)(k().A,{debugName:"CollectionViewFilterBar",capture:!0,children:(0,$.jsx)(T().A,{capture:!0,render:t=>(0,$.jsx)("div",{...t,style:{width:"100%",paddingTop:u.device.isMobile?8:12,paddingBottom:2},children:(0,$.jsx)(Q().A,{wrapStyle:{width:"100%"},innerStyle:{width:"100%",border:"none"},icon:(0,a().U)({width:g?16:14,fill:c.mediumIconColor,marginRight:8}),hideChevron:!0,title:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(A().A,{format:A().C.Transparent,value:p,placeholder:o.formatMessage({defaultMessage:"Type to search…",id:"database.filterBar.mobileSearch.placeholder"}),onChange:S,autoComplete:"on",autoCorrect:"on",onBlur:()=>function(t){t.searchQueryStore.state||st(t)}(e),onClearButtonClick:()=>st(e),showClearButton:!0,focus:!u.device.isIOS||void 0,focusInitial:!0,inputStyle:{height:"100%"}}),(0,$.jsx)(b().A,{show:!0})]})})})})})}function ut(t){let{collectionContextStore:e}=t;const o=(0,s().DP)(),n=(0,i().v3)(),r=(0,F().X)("db_ux_chrome");return"chart"===(0,l().K8)((()=>e.getViewType()),[e])?null:(0,$.jsx)(Q().A,{wrapStyle:{display:"flex",alignItems:"center"},innerStyle:{border:"none"},icon:(0,a().U)({width:r?16:14,fill:o.mediumIconColor}),hideChevron:!0,onClick:()=>function(t,e){x().clear({preventDismissMobileKeyboard:!0,environment:t}),f().IU({preventDismissMobileKeyboard:!0,environment:t}),(0,N().y)(),e.searchOpenStore.setState(!0),e.searchQueryStore.setState(""),(0,m().X)({environment:t,collectionContextStore:e,action:"click_mobile_search"})}(n,e)},"search")}function dt(t){let{collectionContextStore:e,showHoverActionsStore:o,saveControlMoreActionsButtonPopupStore:n}=t;return(0,$.jsx)(y().Ay,{context:y().$J.FilterBar,collectionContextStore:e,showHoverActionsStore:o,moreActionsButtonPopupStore:n})}function pt(t){let{collectionContextStore:e,createFilterSettingsStore:o}=t;return(0,$.jsx)(v().m$,{context:I().Bd.FilterBar,collectionContextStore:e,collectionSettingsStore:o,hideDesktopHeader:!0})}function mt(t){let{collectionContextStore:e,showHoverActionsStore:o,createFilterSettingsStore:r}=t;const s=(0,i().v3)(),a=(0,F().X)("db_ux_mobile"),u=(0,n.useCallback)((t=>function(t,e){t&&"click"===t.type&&(0,B().Rp)(t.target)||g().os({collectionSettingsStore:e})}(t,r)),[r]),p=(0,n.useCallback)((()=>(0,$.jsx)(pt,{collectionContextStore:e,createFilterSettingsStore:r})),[e,r]),S=(0,n.useCallback)((()=>function(t,e,o){(0,m().X)({environment:t,collectionContextStore:e,action:"click_new_filter"}),g().R8({collectionSettingsStore:o,item:{type:"createFilter"}})}(s,e,r)),[s,e,r]),f=(0,l().K8)((()=>r.state.open),[r]),x=(0,l().K8)((()=>o.state||f),[o,f]);return(0,$.jsx)(_().Ay,{open:f,placementToOrigin:L().UV.Bottom,alignmentToOrigin:L().MY.Start,popupType:s.device.isMobile?a?_().nl.BottomSheet:_().nl.SlideUp:_().nl.Popup,bottomSheetInitialState:"half",origin:(0,$.jsx)(h().A,{tag:C().p,visible:x,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},icon:c().plusSmallIcon,size:"sm",isLightGray:!0,hovered:f,onClick:S,style:{fontSize:14,borderRadius:12,paddingLeft:5,paddingRight:9,marginRight:12},children:(0,$.jsx)(d().sA,{defaultMessage:"Filter",id:"database.filterBar.addButton.title"})}),render:p,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,onDismiss:u})}},542714:(t,e,o)=>{function n(t){var e;const o=Boolean(null===(e=function(t){var e,o;if(!t.isInViewTabLayout())return;if("page"===(null===(e=t.collectionViewStore())||void 0===e?void 0:e.getType()))return;return null===(o=t.collectionViewStore())||void 0===o?void 0:o.getCollectionStore()}(t))||void 0===e?void 0:e.canEditCollection());return t.permissionScopesStore.state.canConfigureBlock||t.isEphemeralView()||o}o.d(e,{H:()=>n})},585958:(t,e,o)=>{o.d(e,{A:()=>s});var n=o(242343),r=()=>o(803290),i=o(163643);function l(t){const{resultStore:e,render:l,...s}=t,a=(0,o(367923).A)(s),c=(0,r().uB)(e,o(129044).default.createClass(void 0));(0,n.useEffect)((()=>{c.setState(a);const e=t.reducer;"groups"===e.type&&"v2"===e.version&&"groups"===(null==a?void 0:a.type)&&"v2"===a.version&&t.collectionContextStore.groupsStore.setGroupBlockResults(e,a)}),[t.collectionContextStore.groupsStore,t.reducer,a,c]);const u=(0,r().K8)((()=>l?l(c):null),[l,c]);return(0,i.jsx)(i.Fragment,{children:u})}const s=n.memo(l)},586588:(t,e,o)=>{o.r(e),o.d(e,{dismissTutorial:()=>u,resetTutorials:()=>d,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>m,tutorialGoToNextStep:()=>a,tutorialGoToPrevStep:()=>c});var n=()=>o(612408),r=()=>o(84543),i=()=>o(658388),l=()=>o(433364),s=()=>o(485966);function a(t,e){var o;const{currentUserSettingsStore:n}=s().default.state;if(!n)return;const r=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;S({userAction:"TutorialActions.nextStep",environment:t,perform:t=>{i().mJ({userSettingsStore:n,transaction:t,data:{tutorials:{...r,[e]:(0,l().i9)(n,e)}}})},userId:n.id})}function c(t,e){var o;const{currentUserSettingsStore:n}=s().default.state;if(!n)return;const r=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;S({userAction:"TutorialActions.prevStep",environment:t,perform:t=>{i().mJ({userSettingsStore:n,transaction:t,data:{tutorials:{...r,[e]:(0,l().KD)(n,e)}}})},userId:n.id})}function u(t,e){var o;const{currentUserSettingsStore:r}=s().default.state;if(!r)return;const l=null===(o=r.getSettings())||void 0===o?void 0:o.tutorials;(null==l?void 0:l[e])!==n().YD&&S({userAction:"TutorialActions.dismissTutorial",environment:t,perform:t=>{i().mJ({userSettingsStore:r,transaction:t,data:{tutorials:{...l,[e]:n().YD}}})},userId:r.id})}function d(t){const{currentUserSettingsStore:e}=s().default.state;e&&S({userAction:"TutorialActions.resetTutorialsDebug",environment:t,perform:t=>{i().mJ({userSettingsStore:e,transaction:t,data:{tutorials:{}}})},userId:e.id})}function p(t,e,o){var r;const{currentUserSettingsStore:a}=s().default.state;if(!a||(0,l().x$)(a,e))return;const c=(0,l().gt)(a,e);n().c$[e].steps.findIndex((t=>t.id===c))>=n().c$[e].steps.findIndex((t=>t.id===o))||i().mJ({userSettingsStore:a,transaction:t,data:{tutorials:{...null===(r=a.getSettings())||void 0===r?void 0:r.tutorials,[e]:o}}})}function m(t,e,o){if((0,l().ll)(o))return;const n=(0,l().tb)(e,o);n&&p(t,e,n)}function S(t){return r().createAndCommit({...t,canUndo:!1})}},858580:(t,e,o)=>{o.d(e,{l:()=>m});o(242343);var n=()=>o(174114),r=()=>o(361308),i=()=>o(975392),l=()=>o(141666),s=()=>o(361837),a=()=>o(477784),c=()=>o(805886),u=()=>o(427385),d=o(163643);const p=21;function m(t){const{numberValue:e,numberFormat:o,numberPrecision:m,numberShowAs:S,shouldRenderTooltip:g,withComma:f,style:x,ringWidth:v,className:y,barHeight:h}=t,C=(0,n().DP)();if(i().yr(e)||l().pN(e))return null;const b=t.progressSize??p,j=(null==S?void 0:S.showValue)??!0,k=j&&r().ZV(e,o,a().A.getIntl(),void 0,m);let A;if("bar"===(null==S?void 0:S.type)||"ring"===(null==S?void 0:S.type)){const n=r().XK(e,S.maxValue),{filledColor:i,gapColor:l,unfilledColor:a}=function(t){let{theme:e,color:o}=t;const n="default"===o?e.selectLightGray:e.accentColors[o],r="dark"===e.mode?n[500]:n[400],i=n[50],l="dark"===e.mode?n[200]:e.selectLightGray[200];return{filledColor:r,gapColor:i,unfilledColor:l}}({theme:C,color:S.color}),p=g?s().lh({numberValue:e,numberFormat:o,numberShowAs:S}):void 0;A="bar"===S.type?(0,d.jsx)(c().z,{percentage:n,filledColor:i,gapColor:l,unfilledColor:a,height:h,style:{height:b,...t.barStyle,...j?{}:{flexBasis:"100%"}},tooltip:p}):(0,d.jsx)(u().C,{percentage:n,filledColor:i,gapColor:l,unfilledColor:a,size:b,ringWidth:v,tooltip:p})}return(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:"6px 8px",...x},className:y,children:[k,A,f?", ":null]})}},947520:(t,e,o)=>{o.d(e,{Ni:()=>s,U7:()=>l,rY:()=>a});o(242343);var n=()=>o(653998),r=()=>o(290656),i=o(163643);function l(t){let{origin:e}=t;return(0,i.jsx)(r().B,{origin:e,placementToOrigin:"bottom",style:{minWidth:240},tutorialId:"sprints-onboarding",tutorialStepId:"current-sprint-view-tooltip",header:(0,i.jsx)(n().sA,{id:"SprintsBoardOnboardingTooltip.SprintBoardView.header",defaultMessage:"Manage the current sprint"}),content:(0,i.jsx)(n().sA,{id:"SprintsBoardOnboardingTooltip.SprintBoardView.content",defaultMessage:"Add tasks and update task status as your team makes progress during the sprint."})})}function s(t){let{origin:e}=t;return(0,i.jsx)(r().B,{origin:e,placementToOrigin:"bottom",tutorialId:"sprints-onboarding",tutorialStepId:"sprint-task-tooltip",header:(0,i.jsx)(n().sA,{id:"SprintsBoardOnboardingTooltip.SprintBoardItem.header",defaultMessage:"Change tasks status"}),content:(0,i.jsx)(n().sA,{id:"SprintsBoardOnboardingTooltip.SprintBoardItem.content",defaultMessage:'Drag this task to "In progress".'})})}function a(t){let{origin:e}=t;return(0,i.jsx)(r().B,{origin:e,placementToOrigin:"bottom",style:{minWidth:240},tutorialId:"sprints-onboarding",tutorialStepId:"complete-sprint-button-tooltip",header:(0,i.jsx)(n().sA,{id:"SprintsBoardOnboardingTooltip.CompleteSprintButton.header",defaultMessage:"Complete this sprint"}),content:(0,i.jsx)(n().sA,{id:"SprintsBoardOnboardingTooltip.CompleteSprintButton.content",defaultMessage:"Click the button when you're done with this sprint."})})}}}]);