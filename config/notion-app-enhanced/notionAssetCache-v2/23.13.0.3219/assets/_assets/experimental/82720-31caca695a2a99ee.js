"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[82720],{12933:(e,t,a)=>{a.d(t,{$n:()=>z,Ir:()=>D,uL:()=>P,yc:()=>_});a(403517),a(242343);var s=()=>a(237385),n=()=>a(803290),o=()=>a(174114),i=()=>a(109926),r=()=>a(653998),l=()=>a(31448),d=()=>a(136239),c=()=>a(382445),u=()=>a(48913),g=()=>a(907721),m=()=>a(485966),p=()=>a(305168),h=()=>a(216273),f=()=>a(417653),x=()=>a(517198),v=()=>a(701270),b=()=>a(28210),y=()=>a(59279),S=()=>a(103151),j=()=>a(482570),w=()=>a(63108),A=()=>a(24071),M=()=>a(975149),C=()=>a(831585),I=()=>a(942988),T=()=>a(710567),k=a(163643);function _(e){let{sidebarTitle:t,sidebarByline:a,sidebarTitleIcon:i,sidebarItemsTitle:r,topEntitySection:m,bottomEntitySection:x,items:b,hideSeparator:y,renderTooltip:j}=e;const w=(0,s().v3)(),{isElectron:M}=w.device,C=(0,n().K8)((()=>p().A.state.isFullScreen),[]),I=(0,n().O$)(h().b),T=(0,o().IS)((e=>({container:{background:e.surface.wash,boxShadow:y?void 0:e.sidebarBoxShadow,padding:8,width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:12},itemButton:{fontWeight:l().Wy.regular,color:e.text.primary,...(0,d().sQ)({isMobile:!1})},itemIcon:{fill:e.icon.primary,width:20},selectedItemIcon:{fill:e.icon.primary,width:20},selectedItemButton:{fontWeight:l().Wy.semibold,background:e.buttonHoveredBackground},disabledItemButton:{opacity:.3},sidebarItemContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row"},titleContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",padding:8,gap:10},titleTextContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:2,width:"100%"},text:{...l().RC,width:"100%"},bottomEntitySection:{position:"absolute",bottom:0,paddingBottom:8,width:"calc(100% - 16px)"},sidebarItemsContainer:{display:"flex",flexDirection:"column",gap:1},sidebarItemsTitleContainer:{display:"flex",flexDirection:"column",padding:"4px 8px"}})),[y]),_=(0,u().Vl)({isExpanded:!0,isFullScreenDesktop:C,isShowingTabBar:I,isElectron:M});return(0,k.jsxs)("div",{style:T.container,children:[_?(0,k.jsx)(c().F,{isExpanded:!0}):null,m,(0,k.jsxs)("div",{style:T.titleContainer,children:[i,(0,k.jsxs)("div",{style:T.titleTextContainer,children:[(0,k.jsx)(v().D,{styleName:"UIHeading-17px/Semibold",customStyles:T.text,children:t}),(0,k.jsx)(v().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:T.text,children:a})]})]}),(0,k.jsxs)("div",{style:T.sidebarItemsContainer,children:[Boolean(r)?(0,k.jsx)("div",{style:T.sidebarItemsTitleContainer,children:(0,k.jsx)(v().D,{colorName:"secondary",styleName:"UISmall-12px/Semibold",children:r})}):null,b.map((e=>{const t=e.isSelected?{...T.itemButton,...T.selectedItemButton}:T.itemButton,a=e.disabled?{...t,...T.disabledItemButton}:t,s=e.isSelected?T.selectedItemIcon:T.itemIcon;return(0,k.jsx)(S().A,{disableTooltip:!e.disabled,renderTooltip:()=>null==j?void 0:j(e),render:t=>(0,k.jsx)(f().A,{style:a,disabled:e.disabled,...t,children:(0,k.jsx)(A().A,{style:T.sidebarItemContainer,left:e.icon(s),onClick:()=>{e.disabled||e.onClick()},children:e.name})},e.id),placement:g().W.Right},e.id)}))]}),(0,k.jsx)("div",{style:T.bottomEntitySection,children:x})]})}function z(e){let{userStore:t}=e;const a=(0,r().tz)(),s=(0,o().IS)((e=>({container:{padding:"0px 8px",background:e.surface.wash},iconStyle:{color:e.text.tertiary,fontWeight:500}})),[]),i=(0,n().K8)((()=>m().default.state.currentUserStore),[]),l=t??i,d=void 0===t,c=(0,n().K8)((()=>{if(l)return{userName:l.getDisplayName(a),userEmail:l.getEmail()}}),[a,l]);return(0,k.jsxs)("div",{style:s.container,children:[d&&(0,k.jsx)(v().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,k.jsx)(r().sA,{id:"settingsConsole.sidebar.userSection.loggedInAs",defaultMessage:"Logged in as"})}),l&&c?(0,k.jsx)(y().s7,{title:c.userName,byline:c.userEmail,iconSize:C().WK,iconMargin:8,icon:(0,k.jsx)(j().A,{size:C().WK,userStore:l,iconStyle:s.iconStyle})}):(0,k.jsx)(w().a,{iconSize:C().WK})]})}function D(e){const{organizationId:t,iconSize:a=36}=e,{state:s}=(0,I().j)(),l=(0,T().E)({organizationId:t}),d=(0,o().IS)((e=>({container:{padding:"0px 8px",background:e.surface.wash}})),[]),c=(0,n().K8)((()=>l?(0,k.jsx)(b().B,{disabled:!0,icon:l.getIcon(),defaultIcon:(0,i().V)(),isEmptyPage:!1,size:a}):(0,k.jsx)(x().A,{style:{height:a,width:a,borderRadius:4}})),[l,a]),u=(0,n().K8)((()=>l?l.getName():(0,k.jsx)(x().A,{style:{height:14,width:70,borderRadius:4}})),[l]),g=(0,n().K8)((()=>{var e;return s.value?(0,k.jsx)(M().Qq,{memberCount:(null===(e=s.value)||void 0===e?void 0:e.memberCount)||0}):(0,k.jsx)(x().A,{style:{height:14,width:100,borderRadius:4,marginTop:4}})}),[s.value]);return(0,k.jsxs)("div",{style:d.container,children:[(0,k.jsx)(v().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,k.jsx)(r().sA,{id:"settingsConsole.sidebar.childOfOrganization.preamble",defaultMessage:"Part of organization"})}),(0,k.jsx)(y().s7,{title:u,byline:g,iconSize:a,icon:c,iconMargin:8})]})}function P(){return(0,k.jsx)(r().sA,{defaultMessage:"Coming soon",id:"orgConsole.baseSidebar.comingSoon"})}},17127:(e,t,a)=>{a.d(t,{C:()=>n});a(242343);const s={viewBox:"0 0 20 20",svg:(0,a(163643).jsx)("path",{d:"M14.075 3.45a.625.625 0 0 0-.884 0l-3.497 3.5a.625.625 0 0 0 .883.884l2.431-2.431v10.705a.625.625 0 0 0 1.25 0V5.402l2.431 2.43a.625.625 0 1 0 .884-.883zM2.427 12.167a.625.625 0 0 1 .884 0l2.43 2.431V3.893a.625.625 0 0 1 1.25 0v10.705l2.431-2.43a.625.625 0 0 1 .884.883L6.81 16.55a.625.625 0 0 1-.884 0l-3.498-3.498a.625.625 0 0 1 0-.884"})},n=(0,a(680369).wt)("arrowUpDown",s)},22377:(e,t,a)=>{a.d(t,{Z:()=>m,b:()=>g});var s=a(242343),n=()=>a(803290),o=()=>a(25165),i=()=>a(486540),r=()=>a(653998),l=()=>a(76394),d=()=>a(378219),c=()=>a(59279),u=a(163643);function g(e){let{blockStore:t,spaceStore:a,useSecondaryColorTitle:o}=e;const[r,l]=(0,s.useState)(),g=(0,n().K8)((()=>{const e=d().E(t);return i().wD(e)}),[t]);(0,s.useEffect)((()=>{!async function(){if(!a)return;const e=await i().x8({spaceId:a.getSpaceId(),inheritedPermissionItemsForPage:g,loadRecordModel:a.loadRecordModel});l(e)}()}),[a,g]);const p=(0,s.useMemo)((()=>{if(r)return m(r)}),[r]);return(0,u.jsx)(c().s7,{useSecondaryColorTitle:o,useThinTitle:!0,title:p})}function m(e){switch(e){case"private":return(0,u.jsx)(r().sA,{...o().p.private});case"shared_internally":return(0,u.jsx)(r().sA,{...o().p.sharedInternally});case"shared_externally":return(0,u.jsx)(r().sA,{...o().p.sharedExternally});case"shared_to_web":return(0,u.jsx)(r().sA,{...o().p.publishedToWeb});default:(0,l().HB)(e)}}},22422:(e,t,a)=>{a.d(t,{E:()=>h});a(725707),a(491955),a(242343);var s=()=>a(803290),n=()=>a(174114),o=()=>a(748267),i=()=>a(167089),r=()=>a(486540),l=()=>a(446588),d=()=>a(653998),c=()=>a(378219),u=()=>a(59279),g=()=>a(942415),m=a(163643),p=function(e){return e.Shared="shared",e.Private="private",e.Hidden="hidden",e}(p||{});function h(e){let{blockStore:t,teamStore:a}=e;const h=(0,n().IS)((e=>({icon:{height:18,width:18,color:e.lightIconColor,fill:"currentColor"}})),[]),f=(0,s().K8)((()=>{const e=(0,c().E)(t),a=(0,r().wD)(e),s=a.filter((e=>!(0,l().T6)(e)));return 1===s.length&&(0,l().B2)(s[0])?p.Private:a.length>0?p.Shared:p.Hidden}),[t]);return a?(0,m.jsx)(g().o,{useThinTitle:!0,teamStore:a}):function(){switch(f){case p.Shared:return(0,m.jsx)(u().s7,{useThinTitle:!0,icon:(0,i().M)(h.icon),title:(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.locationCell.shared",defaultMessage:"Shared"})});case p.Hidden:case p.Private:return(0,m.jsx)(u().s7,{useThinTitle:!0,icon:(0,o().g)(h.icon),title:(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.locationCell.private",defaultMessage:"Private"})})}}()}},25165:(e,t,a)=>{a.d(t,{o:()=>o,p:()=>n});var s=()=>a(653998);const n=(0,s().YK)({private:{id:"adminContentSearchTab.pagesTable.audienceCell.private",defaultMessage:"Private"},sharedExternally:{id:"adminContentSearchTab.pagesTable.audienceCell.sharedExternally",defaultMessage:"Shared externally"},sharedInternally:{id:"adminContentSearchTab.pagesTable.audienceCell.sharedInternally",defaultMessage:"Shared internally"},publishedToWeb:{id:"adminContentSearchTab.pagesTable.audienceCell.publishedToWeb",defaultMessage:"Published to web"}}),o=(0,s().YK)({alive:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.active",defaultMessage:"Active pages"},trash:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.inTrash",defaultMessage:"In Trash"},retained:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.retainedPages",defaultMessage:"Retained pages"}})},27989:(e,t,a)=>{a.d(t,{H:()=>o});var s=()=>a(137476),n=()=>a(836331);function o(e){s().vd(e,"delete_workspace_click"),n().default.logEvent("delete_workspace_click")}},29215:(e,t,a)=>{a.d(t,{P$:()=>Uf,N9:()=>Of,HG:()=>Ff,ge:()=>Hf,XX:()=>$f,uy:()=>qf,eu:()=>Gf,Tc:()=>Xf,aZ:()=>Qf,sE:()=>Vf,KJ:()=>Wf,I:()=>Kf,KX:()=>Yf});var s=a(242343),n=()=>a(792104),o=()=>a(680369),i=a(163643);const r=(0,o().wt)("briefcaseOutline",{viewBox:"0 0 20 20",svg:(0,i.jsx)("g",{children:(0,i.jsx)("path",{d:"M2.788 9.955V8.622q1.56.636 3.377.95 1.818.308 3.828.308 2.017 0 3.835-.308a16.5 16.5 0 0 0 3.377-.943l.007 1.326q-1.62.575-3.445.861a24 24 0 0 1-3.774.287q-1.948 0-3.773-.287a19 19 0 0 1-3.432-.86Zm6.139 2.42q-.828 0-.827-.8V10.4h3.787v1.176q0 .8-.827.8H8.927ZM4.12 16.866q-1.087 0-1.647-.553-.56-.548-.56-1.634V7.986q0-1.094.56-1.64.56-.547 1.647-.547h11.751q1.094 0 1.648.547.56.546.56 1.64v6.693q0 1.087-.56 1.633-.555.554-1.648.554H4.122Zm.055-1.292h11.641q.445 0 .677-.239.24-.232.24-.697v-6.61q0-.473-.24-.705-.232-.232-.677-.232H4.176q-.444 0-.684.232-.232.233-.232.704v6.61q0 .465.232.698.24.24.684.24ZM6.41 6.353V5.17q0-.964.533-1.436.534-.471 1.45-.471h3.192q.971 0 1.476.471.513.472.513 1.436v1.176H12.33v-1.17q0-.368-.205-.567-.199-.198-.574-.198h-3.11q-.377 0-.582.198-.204.2-.205.568v1.176z"})})});var l=()=>a(899498),d=()=>a(827164),c=()=>a(893379),u=()=>a(389324),g=()=>a(555296),m=()=>a(115692),p=()=>a(528626);const h=(0,o().wt)("personTwoCircle",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M9.993 17.126a6.8 6.8 0 0 1-2.727-.554 7.1 7.1 0 0 1-2.256-1.524 7.3 7.3 0 0 1-1.525-2.256 6.8 6.8 0 0 1-.553-2.727q0-1.45.553-2.728a7.24 7.24 0 0 1 3.773-3.78 6.8 6.8 0 0 1 2.728-.554q1.456 0 2.735.554t2.256 1.53a7.1 7.1 0 0 1 1.53 2.25q.555 1.278.554 2.728 0 1.449-.553 2.727a7.22 7.22 0 0 1-3.787 3.78 6.8 6.8 0 0 1-2.728.554m0-1.395q1.184 0 2.208-.437a5.7 5.7 0 0 0 1.805-1.217 5.7 5.7 0 0 0 1.217-1.804q.437-1.026.437-2.208a5.55 5.55 0 0 0-.437-2.202 5.66 5.66 0 0 0-3.029-3.028 5.6 5.6 0 0 0-2.208-.438q-1.176 0-2.208.438A5.6 5.6 0 0 0 5.98 6.052a5.7 5.7 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.202q0 1.182.438 2.208a5.7 5.7 0 0 0 1.21 1.804 5.6 5.6 0 0 0 4.013 1.654Zm-.321-3q-.396 0-.56-.117a.41.41 0 0 1-.158-.341q0-.417.335-.875.335-.459.95-.78t1.463-.321q.84 0 1.45.321.615.321.943.78.335.458.335.875a.41.41 0 0 1-.157.341q-.158.116-.561.116zm2.03-3.015q-.533 0-.923-.417a1.44 1.44 0 0 1-.39-1.019q0-.594.39-.998a1.234 1.234 0 0 1 1.833-.007q.39.397.389.998 0 .609-.39 1.026-.382.417-.909.417m-5.55 3.014q-.322 0-.459-.13-.13-.129-.13-.369 0-.437.294-.888.294-.452.828-.752.54-.308 1.264-.308a2.54 2.54 0 0 1 1.408.41q-.362.28-.594.663a2 2 0 0 0-.287.76q-.055.368.116.614zm1.797-2.946q-.458 0-.8-.362a1.3 1.3 0 0 1-.341-.889q0-.513.341-.868a1.076 1.076 0 0 1 1.593-.007q.342.35.342.868 0 .534-.342.896a1.05 1.05 0 0 1-.793.362"})});var f=()=>a(109926),x=()=>a(686487),v=()=>a(653998),b=()=>a(836331),y=(a(725707),a(491955),a(403517),()=>a(237385)),S=()=>a(803290),j=()=>a(174114),w=()=>a(409211),A=()=>a(514138),M=()=>a(818369),C=()=>a(145046),I=()=>a(137476),T=()=>a(868325),k=()=>a(477784),_=()=>a(622286),z=()=>a(413871),D=()=>a(701270),P=()=>a(154104),N=()=>a(379356),R=()=>a(195260),B=()=>a(893943),E=()=>a(684862),L=()=>a(28210),O=()=>a(950786),U=()=>a(31448),F=()=>a(59175),H=()=>a(529305),V=()=>a(286404),W=()=>a(951540),q=()=>a(539048),G=()=>a(103151),K=()=>a(412084),Y=()=>a(396218);const Q=(0,v().YK)({namePlaceholder:{defaultMessage:"Display name",id:"organization.general.textInput.name.placeholder"},emailPlaceholder:{defaultMessage:"Email",id:"organization.general.textInput.email.placeholder"},descriptionPlaceholder:{defaultMessage:"Description",id:"organization.general.textInput.description.placeholder"}});function $(e){let{editButtonText:t,isEditing:a,setIsEditing:s,onCancel:n,onSave:o,disabled:r,disabledTooltipText:l,saveButtonText:d}=e;const c=(0,j().IS)((e=>({container:{marginLeft:"auto",display:"flex",gap:8},cancelButton:{fontSize:U().J.UIRegular.desktop,fontWeight:U().Wy.medium}})),[]);return!1===a?(0,i.jsx)("div",{style:c.container,children:(0,i.jsx)(G().A,{disableTooltip:!r||!l,renderTooltip:()=>l,render:e=>(0,i.jsx)(V().A,{style:{marginLeft:"auto"},size:"sm",onClick:()=>s(!0),disabled:r,disabledFeedback:r,...e,children:t})})}):(0,i.jsxs)("div",{style:c.container,children:[(0,i.jsx)(V().A,{onClick:n,size:"md",style:{...c.cancelButton},disabled:r,disabledFeedback:r,children:(0,i.jsx)(v().sA,{id:"organization.general.cancel.button",defaultMessage:"Cancel"})}),(0,i.jsx)(W().A,{onClick:o,disabled:r,children:d??(0,i.jsx)(v().sA,{id:"organization.general.save.button",defaultMessage:"Save"})})]})}function X(e){const{title:t,byline:a,icon:n,onSave:o,onNameChange:r,onDescriptionChange:l,onEmailChange:d,onDismiss:c,disabled:u,disabledTooltipText:g,bylineWidthOverride:m}=e,p=(0,v().tz)(),[h,f]=(0,s.useState)(!1),[x,b]=(0,s.useState)(e.name),[y,S]=(0,s.useState)(e.email),[w,A]=(0,s.useState)(e.description);(0,s.useEffect)((()=>{r(x)}),[r,x]),(0,s.useEffect)((()=>{y&&(null==d||d(y))}),[d,y]),(0,s.useEffect)((()=>{null==l||l(w)}),[l,w]),(0,s.useEffect)((()=>{b(e.name)}),[e.name]),(0,s.useEffect)((()=>{S(e.email)}),[e.email]),(0,s.useEffect)((()=>{A(e.description)}),[e.description]);const M=function(e){return(0,j().IS)((t=>({container:{marginLeft:"auto",display:"flex",gap:8,opacity:e?.3:1},icon:{height:32,width:32,fill:t.icon.secondary},content:{display:"flex",flexDirection:"column",gap:Y().gA,width:"100%"},inputRow:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},input:{padding:"6px 4px 6px 10px",margin:"0 auto 2px",width:"100%",background:t.modalBackground}})),[e])}(u);function C(){f(!1),c()}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G().A,{disableTooltip:!u||!g,renderTooltip:()=>g,render:e=>(0,i.jsx)("div",{style:M.container,children:(0,i.jsx)(V().A,{size:"md",onClick:()=>f(!0),...e,disabled:u,children:(0,i.jsx)(v().sA,{id:"organization.general.editProfile.button",defaultMessage:"Edit details"})})})}),h?(0,i.jsx)(q().s,{isOpen:!0,onDismiss:C,areaConstraint:{width:{type:"min",length:Y().NF},height:{type:"min",length:300}},render:s=>{let{sizeRange:r}=s;return(0,i.jsx)(H().tf,{gap:Y().gA,showDismissButton:!1,sizeRange:r,header:(0,i.jsx)(Y().rQ,{icon:n(M.icon),title:t,byline:a,bylineWidthOverride:m}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.button.saveChanges",defaultMessage:"Save changes"}),primaryAction:async()=>{await o(),C()},primaryDisabled:!1,secondaryText:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:C}),children:(0,i.jsxs)("div",{style:M.content,children:[(0,i.jsxs)("div",{style:M.inputRow,children:[(0,i.jsx)(K().A,{children:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.details.nameLabel",defaultMessage:"Name"})}),(0,i.jsx)(F().A,{style:M.input,value:x,placeholder:p.formatMessage(Q.namePlaceholder),onChange:e=>{b(e.target.value)}})]}),e.description||l?(0,i.jsxs)("div",{style:M.inputRow,children:[(0,i.jsx)(K().A,{children:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.details.descriptionLabel",defaultMessage:"Description"})}),(0,i.jsx)(F().A,{style:M.input,value:w,textarea:!0,autosizeMinHeight:100,autosizeMaxHeight:600,placeholder:p.formatMessage(Q.descriptionPlaceholder),onChange:e=>{A(e.target.value)}})]}):null,e.email?(0,i.jsxs)("div",{style:M.inputRow,children:[(0,i.jsx)(K().A,{children:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.details.emailLabel",defaultMessage:"Email"})}),(0,i.jsx)(F().A,{style:M.input,value:y,placeholder:p.formatMessage(Q.emailPlaceholder),onChange:e=>{S(e.target.value)}})]}):null]})})}}):null]})}function Z(e){const{title:t,byline:a,icon:s,onSave:n,onCancel:o,onIconChange:r,onNameChange:l,onDescriptionChange:d,localIconWithPointer:c,entityName:u,entityDescription:g,entityDescriptionText:m,disabled:p,disabledTooltipText:h,bylineWidthOverride:x}=e,v=(0,j().IS)((()=>({container:{display:"flex",gap:16,flexDirection:"column",marginBottom:36},profileContainer:{display:"flex"},metadataContainer:{gap:10,display:"flex",flexDirection:"column"},icon:{borderRadius:O().V.large,marginTop:-88},defaultIcon:{padding:20,backgroundColor:"rgba(220, 220, 220, 0.2)",borderRadius:O().V.large}})),[]);return(0,i.jsxs)("div",{style:v.container,children:[(0,i.jsx)(L().B,{disabled:Boolean(p),bucket:"public",icon:c,defaultIcon:(0,f().V)(v.defaultIcon),isEmptyPage:!1,size:80,onChange:r,style:v.icon}),(0,i.jsxs)("div",{style:v.profileContainer,children:[(0,i.jsxs)("div",{style:v.metadataContainer,children:[(0,i.jsx)(D().D,{styleName:"UITitle-26px/Bold",children:u}),g]}),(0,i.jsx)(X,{title:t,byline:a,icon:s,name:u,description:m,onSave:n,onNameChange:l,onDescriptionChange:d,onDismiss:o,disabled:p,disabledTooltipText:h,bylineWidthOverride:x})]})]})}function J(){const e=(0,j().IS)((e=>({topRectangle:{width:"100%",height:100,backgroundColor:"light"===e.mode?"rgba(252, 252, 252, 1)":"rgba(35,35,35,1)"}})),[]);return(0,i.jsx)("div",{style:e.topRectangle})}var ee=()=>a(385500);function te(e){let{children:t}=e;const a=(0,j().IS)((()=>({container:{width:"100%",padding:48}})),[]);return(0,i.jsx)("div",{style:a.container,children:t})}var ae=()=>a(152547),se=()=>a(267521),ne=()=>a(209684),oe=()=>a(204435);function ie(e){let{title:t,content:a}=e;const s=(0,j().IS)((()=>({container:{margin:"40px auto"},content:{marginTop:16,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}})),[]);return(0,i.jsxs)("div",{style:s.container,children:[(0,i.jsx)(D().D,{styleName:"Heading-17px/Semibold",as:"h2",children:t}),(0,i.jsx)("div",{style:s.content,children:a})]})}function re(e){let{title:t,badge:a,byline:s,content:n,rightContent:o,onClick:r,disabled:l,...d}=e;const c=(0,j().IS)((e=>({container:{margin:"6px auto",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:12,alignItems:"center",justifyContent:"space-between",width:"100%",height:"fit-content",padding:"12px 16px",borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,boxShadow:O().v},containerDark:{background:e.accentColors.translucentGray[30],borderColor:e.stroke.primary},left:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:6,flex:"1 1 200px"},rightContent:{display:"flex",flexDirection:"row",flexShrink:0,justifyContent:"center",alignItems:"center",gap:12},title:{margin:0,padding:0,textWrap:"wrap"},secondaryText:{margin:0,padding:0,textWrap:"wrap"},content:{padding:"2px 0 6px"},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:e.accentColors.gray[100],height:20,width:20},icon:{height:20,width:20,padding:4,color:e.icon.primary,transform:"rotate(270deg)"}})),[]),u=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:c.left,children:[(0,i.jsxs)(oe().fI,{alignItems:"center",children:[(0,i.jsx)(D().D,{customStyles:c.title,styleName:"UIRegular-14px/Medium",as:"p",children:t}),a]}),n?(0,i.jsx)("div",{style:c.content,children:n}):null,(0,i.jsx)(D().D,{customStyles:c.secondaryText,styleName:"UIMedium-13px/Regular",colorName:"secondary",as:"p",children:s})]}),(0,i.jsxs)("div",{style:c.rightContent,children:[o&&(0,i.jsx)(D().D,{customStyles:c.secondaryText,styleName:"UIMedium-13px/Regular",colorName:"secondary",as:"p",children:o}),void 0===r?null:(0,i.jsx)("div",{style:c.iconButton,children:(0,se().arrowChevronSingleDownFillIcon)(c.icon)})]})]});return void 0===r?(0,i.jsx)("div",{style:c.container,children:u}):(0,i.jsx)(ne().p,{style:c.container,onClick:r,hoveredStyle:{...c.container,...c.containerDark},pressedStyle:{...c.container,...c.containerDark},disabled:l,disabledFeedback:l,...d,children:u})}var le=()=>a(517198),de=()=>a(971404),ce=()=>a(894626);function ue(e){let{memberCount:t,sampleMemberUserStores:a,onClick:s,disabled:n,isLoading:o}=e;const r=(0,de().Z)();return(0,i.jsx)(ae().A,{disabled:n,isLoading:o,headerText:(0,i.jsx)(v().sA,{id:"organization.general.members.title",defaultMessage:"Members"}),mainText:void 0===t||o?(0,i.jsx)(le().A,{style:r.longTallShimmer}):(0,i.jsx)(v().sA,{id:"organization.general.members.count",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:t.toLocaleString()}}),bottom:(0,i.jsx)(ce().t,{users:a,totalMemberCount:t,isLoading:o}),onClick:s})}var ge=()=>a(975149),me=()=>a(647242),pe=()=>a(783759),he=()=>a(392608),fe=()=>a(548694),xe=()=>a(162028),ve=()=>a(485966),be=()=>a(436622),ye=()=>a(919035),Se=()=>a(200594),je=()=>a(163216),we=()=>a(431551),Ae=()=>a(577831);function Me(e){let{title:t,byline:a,isToggledOn:s,onToggle:n,badge:o,isLocked:r,lockedTooltip:l,bylineStyles:d}=e;const c=(0,je().B)(),u=(0,je().B)();return(0,i.jsx)(Ae().y,{title:t,titleId:c,byline:a,bylineId:u,bylineStyles:d,item:(0,i.jsx)(we().A,{"aria-labelledby":c,"aria-describedby":u,on:s,onClick:n,isLocked:r,lockedTooltip:l}),badge:o})}const Ce=500;function Ie(e){let{spaceStore:t,organizationId:a}=e;return(0,i.jsxs)(Se().L,{children:[(0,i.jsx)(Te,{spaceStore:t}),(0,i.jsx)(ke,{spaceStore:t,organizationId:a}),(0,i.jsx)(_e,{spaceStore:t})]})}function Te(e){let{spaceStore:t}=e;const a=(0,y().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(N().N),o=(0,S().K8)((()=>t.getSetting("enable_ai_feature")??!1),[t]),[r,l]=(0,s.useState)(o),d=(0,S().K8)((()=>t.id),[t]),c=(0,S().K8)((()=>{var e;if(!(null===(e=ve().default.state.currentUserStore)||void 0===e?void 0:e.id))return!1;const t=be().A.getData(a,{spaceId:d});return(0,me().ji)(t).includes("ai")}),[a,d]),u=(0,s.useCallback)((async()=>{const e=!r;if(!1===e&&c){if(!(await C().Gh({message:(0,i.jsx)(v().sA,{id:"featureSettings.ai.turnOffAiWhenSubscribedToAiWarning",defaultMessage:"Your current plan includes Notion AI. You can turn off access to AI, but you will continue to be billed for it."}),acceptLabel:(0,i.jsx)(v().sA,{id:"featureSettings.ai.turnOffAiWhenSubscribedToAccept",defaultMessage:"Turn off AI"})})).accept)return}l(e);const t=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:a,data:{spaceId:d,spaceSettings:{enable_ai_feature:e}}});"success"===t.type?n({data:t.data}):C().f1((0,T().Hu)(k().A.getIntl(),t))}),[c,r,a,d,n]);return(0,i.jsx)(Me,{title:(0,i.jsx)(v().sA,{id:"featureSettings.ai.title",defaultMessage:"Notion AI"}),byline:(0,i.jsx)(v().sA,{id:"featureSettings.ai.description",defaultMessage:"Enable AI-powered features for all workspace members. By activating Notion AI, you agree to the <inlinelink>Notion AI Supplementary Terms</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(ye()._,{href:"https://notion.notion.site/fa9034c8b5a04818a6baf3eac2adddbb",external:!0,children:e})}}),bylineStyles:{maxWidth:Ce},isToggledOn:r,onToggle:u})}function ke(e){let{spaceStore:t,organizationId:a}=e;const n=(0,y().v3)(),{updateCacheWithRecordMap:o}=(0,s.useContext)(N().N),r=(0,S().K8)((()=>(0,fe().Ar)(t)),[t]),[l,d]=(0,s.useState)(r),[c,u]=s.useState(!1),[g,m]=s.useState(!1),p=(0,s.useCallback)((async()=>{u(!1);const e=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:n,data:{spaceId:t.id,spaceSettings:{zero_retention_enabled:!l}}});"success"===e.type?(o({data:e.data}),pe().xu(n,t),await M().callApi({eventName:"sendHIPAACompliancyUpdate",environment:n,data:{spaceId:t.id,isDisablingHIPAA:l,organizationId:a}}),m(!0)):C().f1((0,T().Hu)(k().A.getIntl(),e))}),[n,t,l,o,a]),h=(0,s.useCallback)((()=>{u(!0)}),[]);return(0,i.jsxs)(i.Fragment,{children:[c&&(0,i.jsx)(xe().TD,{isOpen:!0,onClose:()=>u(!1),onConfirmDecision:p,isDisablingHIPAACompliancy:l}),g&&(0,i.jsx)(xe().YS,{isOpen:!0,hasDisabledHIPAACompliancy:l,onClose:()=>{m(!1),d(!l)}}),(0,i.jsx)(Me,{title:(0,i.jsx)(v().sA,{id:"featureSettings.hipaa.title",defaultMessage:"HIPAA Compliance"}),bylineStyles:{maxWidth:Ce},byline:(0,i.jsx)(v().sA,{id:"featureSettings.hipaa.description",defaultMessage:"Enable HIPAA compliance to securely store and process Protected Health Information (PHI). By enabling, you agree to the <inlinelink>Business Associate Agreement</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(ye()._,{href:(0,he().xS)("guides.hipaaBAA"),external:!0,children:e})}}),isToggledOn:l,onToggle:h})]})}function _e(e){let{spaceStore:t}=e;const a=(0,y().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(N().N),o=(0,S().K8)((()=>t.id),[t]),r=(0,S().K8)((()=>t.getName()??""),[t]),l=(0,S().K8)((()=>t.getSettings().disable_page_analytics??!1),[t]),[d,c]=(0,s.useState)(l),u=(0,s.useCallback)((async()=>{const e=!d,t=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:a,data:{spaceId:o,spaceSettings:{disable_page_analytics:e}}});"success"===t.type?(n({data:t.data}),I().vd(a,e?"page_analytics_workspace_opt_out":"page_analytics_workspace_opt_in"),c(e)):C().f1((0,T().Hu)(k().A.getIntl(),t))}),[d,a,o,n]);return(0,i.jsx)(Me,{title:(0,i.jsx)(v().sA,{id:"featureSettings.pageAnalytics.title",defaultMessage:"Page analytics"}),bylineStyles:{maxWidth:Ce},byline:(0,i.jsx)(v().sA,{id:"featureSettings.pageAnalytics.description",defaultMessage:"Allow members with edit or full access to view page analytics. If disabled, page view data will not be stored for pages in this workspace.",values:{workspaceName:r}}),isToggledOn:!d,onToggle:u})}var ze=()=>a(931371),De=()=>a(758611),Pe=()=>a(27989),Ne=()=>a(865226),Re=()=>a(44971),Be=()=>a(101123),Ee=()=>a(76394),Le=()=>a(286270);function Oe(e){let{title:t,byline:a,badge:s,buttonLabel:n,modal:o,onClick:r,type:l,tooltipLabel:d,disabled:c}=e;const u=(0,je().B)(),g=(0,je().B)();let m;return"default"===l?m=e=>(0,i.jsx)(V().A,{...e,disabled:c,disabledFeedback:c&&Boolean(d),size:"md","aria-labelledby":u,"aria-describedby":g,onClick:r,children:n}):"danger"===l?m=e=>(0,i.jsx)(Le().E,{...e,color:"uiRed",disabled:c,disabledFeedback:c&&Boolean(d),"aria-labelledby":u,"aria-describedby":g,onClick:r,children:n}):"primary"===l?m=e=>(0,i.jsx)(W().A,{...e,disabled:c,"aria-labelledby":u,"aria-describedby":g,onClick:r,children:n}):(0,Ee().HB)(l),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ae().y,{title:t,titleId:u,byline:a,bylineId:g,badge:s,item:(0,i.jsx)(G().A,{disableTooltip:void 0===c?!d:!c,renderTooltip:()=>d,render:m})}),o]})}var Ue=()=>a(655656);function Fe(e){let{spaceStore:t,onCloseModal:a,organizationId:n}=e;const o=(0,y().v3)(),r=(0,v().tz)(),[l,d]=(0,s.useState)(!1),{refreshOrganization:c,spaceIds:u}=(0,s.useContext)(R().D),g=(0,s.useCallback)((()=>{d(!0)}),[]),m=1===u.length&&u.includes(t.id),p=(0,S().K8)((()=>be().A.getData(o,{spaceId:t.id})),[o,t.id]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Be().Y,{}),(0,i.jsx)(Oe,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.deleteWorkspace.title",defaultMessage:"Delete workspace"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.deleteWorkspace.caption",defaultMessage:"To confirm deletion, you'll need to enter the workspace name. <inlinelink>Learn more</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(ye()._,{href:(0,he().xS)("guides.deleteWorkspace"),external:!0,children:e})}}),buttonLabel:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.deleteWorkspace.button",defaultMessage:"Delete workspace"}),type:"danger",onClick:g,modal:l?(0,i.jsx)(Re().S4,{isOpen:!0,billingData:p,onClose:()=>d(!1),onConfirmDelete:async()=>{(0,Pe().H)(o),await(0,Ue().Sr)(t,r,o,(async()=>{m?Ne().oo({environment:o,url:De().JZ.root}):await c(),a()}),n)},spaceStore:t}):null})]})}var He=()=>a(427091),Ve=()=>a(429318),We=()=>a(535906),qe=()=>a(88271),Ge=()=>a(575460),Ke=()=>a(703329),Ye=()=>a(492251);const Qe=["pdf","html","markdown"],$e=["currentView","all"],Xe=["everything","no_files"];function Ze(e){let{onDismiss:t,spaceId:a,organizationId:o}=e;const r=(0,j().IS)((e=>({icon:{height:24,width:24,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:12,width:Y().J2},switcherContainer:{marginTop:4}})),[]),[l,d]=(0,s.useState)({selectedExportType:"markdown",selectedCollectionViewExportType:"currentView",selectedContent:"everything",createFoldersForSubpages:!0}),c=(0,y().v3)(),u=c.currentUser.id,g=(0,s.useMemo)((()=>[a]),[a]),{teamStores:m}=(0,B().o)(g),p=(0,s.useCallback)((async()=>{t();const e="pdf"===l.selectedExportType?{exportType:l.selectedExportType,collectionViewExportType:l.selectedCollectionViewExportType,timeZone:(0,He().P)(),pdfFormat:Ve().id(u),locale:"en"}:{exportType:l.selectedExportType,collectionViewExportType:l.selectedCollectionViewExportType,includeContents:l.selectedContent,flattenExportFiletree:l.createFoldersForSubpages,timeZone:(0,He().P)(),locale:"en"};await Ve().P_(c,{spaceId:a,exportOptions:e,shouldExportComments:!1},o,m[a])}),[u,c,l,t,a,m,o]);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:t,render:()=>(0,i.jsx)(H().tf,{showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.modal.title",defaultMessage:"Export all workspace content"}),icon:(0,n().f)(r.icon),byline:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.modal.caption",defaultMessage:"You can export all your pages as HTML, Markdown, or CSV (for databases), along with any files you've uploaded, too."})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.modal.button",defaultMessage:"Export"}),primaryAction:p,secondaryText:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.cancel",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsxs)("div",{style:r.content,children:[(0,i.jsx)(Ge().A,{label:(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.exportFormat",defaultMessage:"Export format"})}),selectedTitle:(0,Ye().getBlockExportTypeTitle)(l.selectedExportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,i.jsx)(qe().A,{...e}),items:Qe.map((t=>({key:t,action:()=>{e.close(),d({...l,selectedExportType:t})},render:e=>(0,i.jsx)(We().A,{...e,title:(0,Ye().getBlockExportTypeTitle)(t)})})))}]}),(0,i.jsx)(Ge().A,{label:(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.includeDatabases",defaultMessage:"Include databases"})}),selectedTitle:(0,Ye().getCollectionViewExportTypeTitle)(l.selectedCollectionViewExportType),renderMenuSections:e=>[{key:"includeDatabases",render:e=>(0,i.jsx)(qe().A,{...e}),items:$e.map((t=>({key:t,action:()=>{e.close(),d({...l,selectedCollectionViewExportType:t})},render:e=>(0,i.jsx)(We().A,{...e,title:(0,Ye().getCollectionViewExportTypeTitle)(t)})})))}]}),(0,i.jsx)(Ge().A,{label:(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.includeContent",defaultMessage:"Include content"})}),selectedTitle:(0,Ye().getBlockIncludeContentsTitle)(l.selectedContent),renderMenuSections:e=>[{key:"includeContent",render:e=>(0,i.jsx)(qe().A,{...e}),items:Xe.map((t=>({key:t,action:()=>{e.close(),d({...l,selectedContent:t})},render:e=>(0,i.jsx)(We().A,{...e,title:(0,Ye().getBlockIncludeContentsTitle)(t)})})))}]}),(0,i.jsx)("div",{style:r.switcherContainer,children:(0,i.jsx)(Ke().A,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.createFoldersForSubpages",defaultMessage:"Create folders for subpages"}),subtitle:"",on:l.createFoldersForSubpages,onChange:()=>d({...l,createFoldersForSubpages:!l.createFoldersForSubpages})})})]})})})}function Je(e){let{spaceStore:t,organizationId:a}=e;const n=(0,S().K8)((()=>t.id),[t]),[o,r]=(0,s.useState)(!1);return(0,i.jsx)(Oe,{type:"default",title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.title",defaultMessage:"Export workspace content"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.caption",defaultMessage:"Export all workspace content for legal and compliance purposes. <inlinelink>Learn more</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(ye()._,{href:(0,he().xS)("guides.exportWorkspace"),external:!0,children:e})}}),buttonLabel:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.button",defaultMessage:"Export workspace content"}),onClick:()=>r(!0),modal:o&&(0,i.jsx)(Ze,{onDismiss:()=>r(!1),spaceId:n,organizationId:a})})}a(500234);var et=()=>a(975392),tt=()=>a(162901),at=()=>a(190457),st=()=>a(23371);function nt(e){let{spaceIds:t}=e;const{permissionGroupsForSpace:a,loadPermissionGroupsForSpace:n}=(0,s.useContext)(R().D),[o,i]=(0,s.useState)(!1);return(0,tt().Yb)((async()=>{i(!0),await(0,st().lX)(t,at().O,(e=>n(e))),i(!1)}),[t,n]),{permissionGroupsForSpace:a,loading:o}}function ot(e){let{userIds:t,spaceIds:a}=e;const{userPermissionGroupIdsBySpaceId:n,loadUserPermissionGroupIdsBySpaceId:o}=(0,s.useContext)(R().D),[i,r]=(0,s.useState)(!1);return(0,tt().Yb)((async()=>{r(!0),await(0,st().lX)(a,at().O,(e=>o(e,t))),r(!1)}),[a,t,o]),{spaceIdToUserPermissionGroupMap:n,loading:i}}function it(e){let{spaceStore:t,organizationId:a}=e;const n=function(e,t){const a=(0,v().tz)(),{visibleUsers:n}=(0,E().d)(e.id),o=(0,s.useMemo)((()=>n.map((e=>e.userId))),[n]),i=(0,s.useMemo)((()=>[e.id]),[e.id]),{spaceIdToUserPermissionGroupMap:r}=ot({userIds:o,spaceIds:i}),l=(0,s.useMemo)((()=>r[e.id]),[r,e.id]),{permissionGroupsForSpace:d}=nt({spaceIds:i}),c=(0,y().v3)();return(0,s.useCallback)((async()=>{await M().callApi({eventName:"exportSpaceMembers",environment:c,data:{organizationId:t,spaceId:e.id}});const s={};for(const[t,a]of Object.entries(l)){const n=a.map((t=>d[e.id].find((e=>e.group.group_id===t)))),o=et().oE(n).map((e=>e.group.name)).sort().join(",");s[t]=o}await Ve().Sg(e,n,s,a)}),[c,t,e,n,a,l,d])}(t,a);return(0,i.jsx)(Oe,{type:"default",title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportMembers.title",defaultMessage:"Export members"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportMembers.caption",defaultMessage:"Download a CSV list of all workspace members. <inlinelink>Learn more</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(ye()._,{href:(0,he().xS)("guides.exportMembers"),external:!0,children:e})}}),buttonLabel:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportMembers.button",defaultMessage:"Export members"}),onClick:n})}var rt=()=>a(516998),lt=()=>a(575015),dt=()=>a(559637);function ct(e){let{spaceIds:t,onCancel:a,onSubmit:n,organizationId:o,refetchData:r,isSingleWorkspaceAction:l}=e;const d=(0,j().IS)((e=>({icon:{height:30,width:30,color:e.text.uiRedPrimary},confirmation:{display:"flex",width:"100%",justifyContent:"center",gap:10},modalContainer:{width:440}})),[]),c=(0,y().v3)(),u=(0,s.useCallback)((async()=>{const e=await M().callApi({eventName:"removeWorkspacesFromOrganization",environment:c,data:{organizationId:o,spaceIds:t}});"success"===e.type?(r(),lt().D6({label:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.removeFromOrganization.success",defaultMessage:"{numWorkspaces, plural, one {Removed {numWorkspaces} workspace} other {Removed {numWorkspaces} workspaces}} from organization",values:{numWorkspaces:t.length}})}),n(),(0,I().u4)({environment:c,event:{eventName:"org_console_general_remove_space_from_organization",eventProperties:{organization_id:o,space_ids:t}}})):C().f1((0,T().Hu)(k().A.getIntl(),e))}),[c,o,t,n,r]),[g,m]=(0,s.useState)(!1);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)("div",{style:d.modalContainer,children:(0,i.jsx)(H().tf,{gap:Y().gA,showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{icon:(0,rt().J)(d.icon),title:l?(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.titleSingle",defaultMessage:"Remove workspace from organization"}):(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.title",defaultMessage:"{numWorkspaces, plural, one {Remove {numWorkspaces} workspace} other {Remove {numWorkspaces} workspaces}} from organization",values:{numWorkspaces:t.length}}),byline:l?(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.bylineSingle",defaultMessage:"Removing this workspace will disable SAML SSO and organization-wide security settings for it."}):(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.byline",defaultMessage:"Removing these workspaces will disable SAML SSO and organization-wide security settings for them.",values:{numWorkspaces:t.length}})}),footer:(0,i.jsx)(Y().jl,{isDarkRed:!0,primaryDisabled:!g,primaryText:(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.removeButton",defaultMessage:"{numWorkspaces, plural, one {Remove workspace} other {Remove workspaces}}",values:{numWorkspaces:t.length}}),primaryAction:u,secondaryText:(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsxs)("div",{style:d.confirmation,children:[(0,i.jsx)(dt().A,{checked:g,size:14,checkSize:10,onClick:()=>m(!g)}),(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.confirmationText",defaultMessage:"I understand SAML SSO will be disabled for some users"})})]})})})})}function ut(e){let{spaceStore:t,organizationId:a,onCloseModal:n}=e;const{refreshOrganization:o,spaceIds:r}=(0,s.useContext)(R().D),l=1===r.length&&r.includes(t.id),d=(0,S().K8)((()=>t.id),[t]),c=(0,s.useMemo)((()=>[d]),[d]),[u,g]=(0,s.useState)(!1),m=(0,s.useCallback)((()=>{g(!0)}),[]),p=(0,s.useCallback)((()=>{g(!1),n()}),[n]);return(0,i.jsx)(Oe,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.removeFromOrganization.title",defaultMessage:"Remove from organization"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.removeFromOrganization.caption",defaultMessage:"Remove this workspace from this organization. You can re-add it anytime."}),buttonLabel:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.removeFromOrganization.button",defaultMessage:"Remove from organization"}),tooltipLabel:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.removeFromOrganization.button.disabledTooltip",defaultMessage:"You must have at least one workspace in your organization."}),disabled:l,type:"danger",onClick:m,modal:u&&(0,i.jsx)(ct,{isSingleWorkspaceAction:!0,spaceIds:c,organizationId:a,onCancel:()=>g(!1),onSubmit:p,refetchData:o})})}function gt(e){let{spaceStore:t,organizationId:a,onCloseModal:s}=e;const n=(0,ze().HI)(t),o=(0,S().K8)((()=>(null==n?void 0:n.isMember())??!1),[n]),r=(0,S().K8)((()=>!t.getDisableExport()&&o),[o,t]);return(0,i.jsxs)(Se().L,{children:[(0,i.jsx)(it,{spaceStore:t,organizationId:a}),r&&(0,i.jsx)(Je,{spaceStore:t,organizationId:a}),(0,i.jsx)(ut,{spaceStore:t,organizationId:a,onCloseModal:s}),(0,i.jsx)(Fe,{spaceStore:t,organizationId:a,onCloseModal:s})]})}var mt=()=>a(752903),pt=()=>a(599932),ht=()=>a(188877),ft=()=>a(168907),xt=()=>a(640979),vt=()=>a(14679),bt=()=>a(205830),yt=()=>a(935091),St=()=>a(858023),jt=()=>a(443252),wt=()=>a(998959),At=()=>a(809785),Mt=()=>a(732863);function Ct(e){let{spaceStore:t,organizationId:a}=e;return(0,i.jsxs)(Se().L,{children:[(0,i.jsx)(kt,{spaceStore:t,organizationId:a}),(0,i.jsx)(It,{spaceStore:t,organizationId:a})]})}function It(e){let{spaceStore:t,organizationId:a}=e;const s=(0,j().IS)((()=>({textContainer:{display:"flex",flexDirection:"column",maxWidth:"70%",gap:6}})),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:s.textContainer,children:[(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Medium",children:(0,i.jsx)(v().sA,{id:"orgConsole.shareSettings.emailDomains.title",defaultMessage:"Enable organization-wide access"})}),(0,i.jsx)("div",{style:{maxWidth:500},children:(0,i.jsx)(D().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"orgConsole.shareSettings.emailDomains.caption",defaultMessage:"Add your company email domain to let team members discover and share workspace pages, even if they’re not on Notion"})})})]}),(0,i.jsx)(Tt,{spaceStore:t,organizationId:a})]})}function Tt(e){let{spaceStore:t,organizationId:a}=e;const n=(0,v().tz)(),o=(0,y().v3)(),[r,l]=(0,s.useState)(""),d=(0,s.useCallback)((e=>{l(e.target.value)}),[]),c=(0,S().K8)((()=>t.getEmailDomains()),[t]);(0,s.useEffect)((()=>{g(c)}),[c]);const[u,g]=(0,s.useState)(c),m=(0,S().K8)((()=>{var e;return null===(e=ve().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),[p]=(0,tt().Yb)((async()=>({trustedDomainNumMembers:await(0,bt().hs)({environment:o,spaceId:t.id,currentUserId:m,organizationId:a})})),[o,t,m,a]),h=(0,S().K8)((()=>{if("resolved"!==p.status)return[];const e=p.value.trustedDomainNumMembers.map((e=>e.trustedDomain.id));return(0,bt().J7)({trustedDomainIds:e,spaceStore:t})}),[t,p]),f=(0,S().K8)((()=>et().oE(h.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())))),[h]),{updateCacheWithRecordMap:x}=(0,s.useContext)(N().N),b=(0,s.useCallback)((async e=>{g(e);const s=await M().callApi({eventName:"updateWorkspaceInOrganization",environment:o,data:{spaceId:t.id,organizationId:a,emailDomains:e}});"success"===s.type?(x({data:s.data}),(0,I().u4)({environment:o,event:{eventName:"org_console_general_update_space",eventProperties:{organization_id:a,space_id:t.id,updated_fields:["email_domains"]}}})):C().f1((0,T().Hu)(k().A.getIntl(),s))}),[o,t.id,a,x]),j=(0,S().K8)((()=>t.getSpaceId()),[t]),{visibleUsers:_,joinedUserIds:z}=(0,E().d)(j);return(0,i.jsx)(jt().Ay,{popupType:jt().nl.Popup,sameWidthAsOrigin:!0,open:r.length>0,origin:(0,i.jsx)(Mt().A,{placeholder:n.formatMessage({id:"orgConsole.shareSettings.emailDomains.placeholder",defaultMessage:"Type an email domain…"}),value:r,onChange:d,onRemoveLastToken:async()=>{const e=u.slice(0,u.length-1);await b(e)},tokens:u.map((e=>(0,i.jsx)(At().A,{showRemoveButton:!0,isSingle:!1,format:mt().NY.Medium,onClickRemove:async()=>{const t=u.filter((t=>t!==e));await b(t)},value:e},e)))}),render:()=>{const e=r.trim(),t=(0,i.jsx)(v().sA,{id:"orgConsole.shareSettings.emailDomains.headerTitle",defaultMessage:"Type an email domain…"}),a=(0,i.jsx)(v().sA,{id:"orgConsole.shareSettings.emailDomains.headerTitleNoResults",defaultMessage:"Type an email domain of a member of this workspace…"}),s=[...c,...f],n=_.filter((e=>(0,A().c7)(e)&&z.includes(e.userId))).map((e=>{const t=new(vt().L)(o,{table:w().oo,id:e.userId}).getEmail();if(t)return(0,pt().zN)(t)})).filter(((e,t,a)=>Boolean(e&&t===a.indexOf(e)&&!s.includes(e)))),d=(0,ht().Ay)(e,n,(e=>e)).map(((e,t)=>({key:t,render:t=>(0,i.jsx)(We().A,{...t,title:e}),action:async()=>{const t=[...u,e];await b(t),l("")}}))),g={menuType:xt().gu.Popup,width:"100%"};return(0,i.jsx)(yt().A,{...g,children:(0,i.jsx)(St().Ay,{type:St().Oh.Vertical,initialFocus:d.length>0?0:void 0,sections:[{key:0,render:e=>(0,i.jsx)(qe().A,{...e,disableDesktopPadding:!0,title:d.length>0?t:a}),items:d}]})})},onDismiss:()=>{l("")}})}function kt(e){let{spaceStore:t,organizationId:a}=e;const n=(0,S().K8)((()=>Boolean(t.getInviteLinkEnabled())),[t]),[o,r]=(0,s.useState)(n),l=(0,S().K8)((()=>t.getSpaceId()),[t]),d=(0,y().v3)(),{updateCacheWithRecordMap:c}=(0,s.useContext)(N().N),u=(0,s.useCallback)((async()=>{ft().OE(d,{enabled:!o}),r(!o);const e=await M().callApi({eventName:"updateWorkspaceInOrganization",environment:d,data:{spaceId:l,organizationId:a,inviteLinkEnabled:!o}});"success"===e.type?(c({data:e.data}),(0,I().u4)({environment:d,event:{eventName:"org_console_general_update_space",eventProperties:{organization_id:a,space_id:l,updated_fields:["invite_link_enabled"]}}})):C().f1((0,T().Hu)(k().A.getIntl(),e))}),[d,o,a,l,c]);return(0,i.jsx)(Me,{title:(0,i.jsx)(v().sA,{id:"orgConsole.shareSettings.inviteLink.title",defaultMessage:"Invite link to add members"}),byline:o?(0,i.jsx)(wt().jo,{spaceStore:t,showBlueLink:!0,organizationId:a}):(0,i.jsx)(v().sA,{id:"orgConsole.shareSettings.inviteLink.caption",defaultMessage:"Only people with permission to invite members can see this."}),isToggledOn:o,onToggle:u})}var _t=()=>a(72757);function zt(e){let{spaceStore:t,organizationId:a}=e;const n=(0,j().IS)((e=>({token:{borderRadius:3,backgroundColor:e.white,margin:"3px 0 3px 6px"},header:{fontWeight:500,marginBottom:6}})),[]),o=(0,y().v3)(),r=(0,s.useMemo)((()=>[t.id]),[t.id]),{teamStores:l}=(0,B().o)(r),{updateCacheWithRecordMap:d}=(0,s.useContext)(N().N),c=(0,s.useCallback)((async e=>{let{addedTeams:s,removedTeams:n}=e;const i=s.map((e=>{let{store:t}=e;return t.id})),r=n.map((e=>{let{store:t}=e;return t.id})),l=await M().callApi({eventName:"updateDefaultTeamsInOrganizationSpace",environment:o,data:{organizationId:a,spaceId:t.id,addedTeams:i,removedTeams:r}});"success"===l.type?(d({data:l.data}),(0,I().u4)({environment:o,event:{eventName:"org_console_general_update_default_teams_for_space",eventProperties:{organization_id:a,space_id:t.id,added_teams:i,removed_teams:r}}})):C().f1((0,T().Hu)(k().A.getIntl(),l))}),[o,t,a,d]),u=0===l[t.id].length?null:(0,i.jsx)("div",{children:(0,i.jsx)(_t().A,{unarchivedTeams:l[t.id],isOrgOwner:!0,onUpdate:c,immediateUpdate:!0,tokenStyle:n.token,headerStyle:n.header,description:(0,i.jsx)(D().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"teamspaceSettings.defaultTeams.caption",defaultMessage:"Select teamspaces that new and current workspace members join automatically"})})})});return(0,i.jsx)("div",{style:{width:"100%"},children:(0,i.jsxs)(Se().L,{children:[u,(0,i.jsx)(Dt,{spaceStore:t}),(0,i.jsx)(Pt,{spaceStore:t})]})})}function Dt(e){let{spaceStore:t}=e;const a=(0,S().K8)((()=>t.getDisableTeamCreation()),[t]),[n,o]=(0,s.useState)(a),r=(0,y().v3)(),{updateCacheWithRecordMap:l}=(0,s.useContext)(N().N),d=(0,s.useCallback)((async()=>{const e=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:r,data:{spaceId:t.id,spaceSettings:{disable_team_creation:!n}}});"success"===e.type?(o(!n),l({data:e.data})):C().f1((0,T().Hu)(k().A.getIntl(),e))}),[r,t.id,n,l]);return(0,i.jsx)(Me,{title:(0,i.jsx)(v().sA,{id:"teamspaceSettings.limitTeamspaceCreation.title",defaultMessage:"Limit teamspace creation to only workspace owners"}),byline:(0,i.jsx)(v().sA,{id:"teamspaceSettings.limitTeamspaceCreation.description",defaultMessage:"Restrict teamspace creation to workspace owners only"}),isToggledOn:n,onToggle:d})}function Pt(e){let{spaceStore:t}=e;const a=(0,S().K8)((()=>t.getDisableExternalMembershipRequests()),[t]),[n,o]=(0,s.useState)(!a),r=(0,y().v3)(),{updateCacheWithRecordMap:l}=(0,s.useContext)(N().N),d=(0,s.useCallback)((async()=>{const e=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:r,data:{spaceId:t.id,spaceSettings:{disable_external_membership_requests:n}}});"success"===e.type?(o(!n),l({data:e.data})):C().f1((0,T().Hu)(k().A.getIntl(),e))}),[r,t.id,n,l]);return(0,i.jsx)(Me,{title:(0,i.jsx)(v().sA,{id:"teamspaceSettings.memberRequest.title",defaultMessage:"Teamspace invite link to add members"}),byline:(0,i.jsx)(v().sA,{id:"teamspaceSettings.memberRequest.description",defaultMessage:"Allow membership requests from teamspace invite links"}),isToggledOn:n,onToggle:d})}function Nt(e){let{organizationId:t,spaceStore:a,setSelectedTab:n,onCloseModal:o}=e;const r=(0,j().IS)((()=>({tilesContainer:{display:"flex",gap:12,flexWrap:"wrap"},dotSeparator:{margin:"0 4px"}})),[]),l=(0,y().v3)(),[d,c]=(0,s.useState)(""),u=(0,_().X)("organization_console_ga_enabled"),g=(0,S().K8)((()=>null==a?void 0:a.getName()),[a]),m=(0,S().K8)((()=>{var e;return null==a||null===(e=a.getIcon())||void 0===e?void 0:e.icon}),[a]);(0,s.useEffect)((()=>{c(g||"")}),[g]);const{updateCacheWithRecordMap:p}=(0,s.useContext)(N().N),{loadVisibleUsersForSpace:h}=(0,s.useContext)(R().D);(0,s.useEffect)((()=>{h(a.id,!0)}),[a.id,h]);const{visibleUsers:x,loading:b}=(0,E().d)(a.id),L=(0,S().K8)((()=>{const e=x.filter((e=>(0,A().c7)(e)));return{sampleMemberStores:e.slice(0,4).map((e=>new(z().LU)(l,{table:w().oo,id:e.userId}))),numGuests:x.filter(A().QE).length,numMembers:e.length}}),[l,x]),O=(0,s.useMemo)((()=>[a.id]),[a.id]),{teamStores:U,loading:F}=(0,B().o)(O),H=(0,s.useMemo)((()=>U[a.id]),[U,a.id]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(J,{}),(0,i.jsxs)(te,{children:[(0,i.jsx)(Z,{title:(0,i.jsx)(v().sA,{id:"organization.general.organization.workspace.title",defaultMessage:"Edit workspace details"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.organization.workspace.byline",defaultMessage:"Edit this workspace's name below. Changes will take effect immediately upon saving."}),icon:f().V,onSave:async function(){if(!a||d===g)return;const e=await M().callApi({eventName:"updateWorkspaceInOrganization",environment:l,data:{organizationId:t,spaceId:a.id,name:d}});"success"===e.type?(p(e),(0,I().u4)({environment:l,event:{eventName:"org_console_general_update_space",eventProperties:{organization_id:t,space_id:a.id,updated_fields:["name"]}}})):C().f1((0,T().Hu)(k().A.getIntl(),e))},onCancel:()=>{c(g||"")},onIconChange:async e=>{if(!a)return;const s=await M().callApi({eventName:"updateWorkspaceInOrganization",environment:l,data:{organizationId:t,spaceId:a.id,icon:e}});"success"===s.type?(p(s),(0,I().u4)({environment:l,event:{eventName:"org_console_general_update_space",eventProperties:{organization_id:t,space_id:a.id,updated_fields:["icon"]}}})):C().f1((0,T().Hu)(k().A.getIntl(),s))},onNameChange:e=>c(e||""),localIconWithPointer:m?{pointer:a.pointer,icon:m}:void 0,entityName:g||"",entityDescription:(0,i.jsxs)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:[(0,i.jsx)(ge().Qq,{memberCount:L.numMembers}),(0,i.jsx)(P().A,{style:r.dotSeparator}),(0,i.jsx)(ge().h6,{guestCount:L.numGuests})]})}),(0,i.jsxs)("div",{style:r.tilesContainer,children:[(0,i.jsx)(ue,{memberCount:L.numMembers,sampleMemberUserStores:L.sampleMemberStores,onClick:()=>n("members"),isLoading:b}),(0,i.jsx)(ae().A,{disabled:!u,isLoading:F,headerText:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teamspace.title",defaultMessage:"Associated teamspaces"}),mainText:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teamspace.count",defaultMessage:"{teamspaceCount, plural, one {{teamspaceCount} teamspace} other {{teamspaceCount} teamspaces}}",values:{teamspaceCount:H.length}}),bottom:(0,i.jsx)(ee().tv,{teamStores:H,isLoading:F}),onClick:()=>!!u&&n("teamspaces")})]}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.featureSettings.title",defaultMessage:"Feature settings"}),content:(0,i.jsx)(Ie,{spaceStore:a,organizationId:t})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.shareSettings.title",defaultMessage:"Share settings"}),content:(0,i.jsx)(Ct,{spaceStore:a,organizationId:t})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.teamspaceSettings.title",defaultMessage:"Teamspace settings"}),content:(0,i.jsx)(zt,{spaceStore:a,organizationId:t})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.manageWorkspace.title",defaultMessage:"Manage workspace"}),content:(0,i.jsx)(gt,{spaceStore:a,organizationId:t,onCloseModal:o})})]})]})}a(113085);var Rt=()=>a(407152),Bt=()=>a(836693),Et=()=>a(537311),Lt=()=>a(59279),Ot=()=>a(893576);function Ut(e){const[t,a]=(0,s.useState)(e.initialSelectedIds||[]);function n(){a([])}return(0,s.useEffect)((()=>{n()}),[e.allPossibleIds]),{selectedIds:t,handleToggleId:function(e){a((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},handleSelectAllIds:function(){a(e.allPossibleIds)},handleUnselectAllIds:n}}function Ft(e){const[t,a]=(0,s.useState)([]);return{selectedRows:t,handleToggleRow:function(e){a((t=>t.some((t=>t.id===e.id))?t.filter((t=>t.id!==e.id)):[...t,e]))},handleSelectAllRows:function(){a(e.allPossibleRows)},handleUnselectAllRows:function(){a([])}}}var Ht=()=>a(895048),Vt=()=>a(695951),Wt=()=>a(274347),qt=()=>a(970172);var Gt=()=>a(231628),Kt=()=>a(615917);function Yt(e){const{icon:t,title:a,byline:n}=e,[o,r]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=setTimeout((()=>r(!0)),100);return()=>clearTimeout(e)}),[]);const l=(0,j().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:8,margin:"52px auto"},icon:{color:e.icon.secondary,fill:e.icon.secondary,height:36,width:36}})),[]);return(0,i.jsxs)(Kt().A,{animate:{opacity:o?1:0},initial:{opacity:0},style:l.container,children:[t?t(l.icon):null,(0,i.jsx)(D().D,{styleName:"UIHeading-17px/Semibold",colorName:"secondary",children:a}),(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"tertiary",children:n})]})}var Qt=()=>a(927685);function $t(e){const{error:t,runNewSearch:a}=e,[n,o]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=setTimeout((()=>o(!0)),100);return()=>clearTimeout(e)}),[]);const r=(0,j().IS)((e=>({icon:{color:e.redBadgeBackground,fill:"currentColor",height:36,width:36},description:{width:328,textAlign:"center"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:U().Tf.mono,fontSize:12,color:e.text.tertiary,padding:"18px 24px",margin:"auto"}})),[]);return(0,i.jsx)(Kt().A,{style:{opacity:n?1:0},animate:{opacity:n?1:0},children:(0,i.jsxs)(oe().VP,{justifyContent:"center",alignItems:"center",gap:12,margin:"40px auto",children:[(0,i.jsxs)(oe().VP,{gap:8,alignItems:"center",children:[(0,rt().J)(r.icon),(0,i.jsx)(D().D,{styleName:"UIHeading-17px/Semibold",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"orgConsole.baseTable.errorState.title",defaultMessage:"Something went wrong"})}),(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"tertiary",customStyles:r.description,children:(0,i.jsx)(v().sA,{id:"orgConsole.baseTable.errorState.byline",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})})]}),null,a?(0,i.jsx)(V().A,{size:"md",onClick:()=>a(),children:(0,i.jsx)(v().sA,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})}):null]})})}var Xt=()=>a(730096),Zt=()=>a(587727),Jt=()=>a(713542),ea=()=>a(519423),ta=()=>a(591130);var aa=()=>a(145017);function sa(e){let{blockIds:t}=e;const a=(0,y().v3)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(N().N);return(0,S().K8)((()=>t.map((e=>new(z().Bv)(a,{table:aa().ev,id:e},{inMemoryRecordCache:n})))),[a,t,n])}var na=()=>a(528762);function oa(e){let{spaceId:t}=e;const a=(0,y().v3)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(N().N),{spaceIds:o}=(0,s.useContext)(R().D);return(0,S().K8)((()=>{if(t&&o.includes(t))return new(z().SL)(a,{id:t,table:na().NX},{inMemoryRecordCache:n})}),[t,o,n,a])}var ia=()=>a(831585);const ra=(0,v().YK)({untitled:{id:"settingsConsole.groupSettings.untitledGroup",defaultMessage:"Untitled"}});const la=function(e){let{group:t,organizationId:a,onDismiss:n,removePagesFromGroup:o}=e;const r=(0,v().tz)(),l=(0,de().Z)(),d=oa({spaceId:t.spaceId}),{visibleUsers:c,loading:u}=(0,E().d)(t.spaceId),g=c.filter((e=>(0,A().c7)(e))).length,{workspaceName:m,workspaceIcon:p}=(0,S().K8)((()=>({workspaceName:null==d?void 0:d.getName(),workspaceIcon:null==d?void 0:d.getIcon()})),[d]),h=function(e){let{groupId:t,spaceId:a}=e;const n=(0,y().v3)(),{organizationOwnerRecordCache:o}=(0,s.useContext)(N().N);return(0,S().K8)((()=>new(z().Cv)(n,{table:qt().n,id:(0,qt().T1)({spacePermissionGroupId:t,spaceId:a}),spaceId:a},{inMemoryRecordCache:o})),[n,t,a,o])}({groupId:t.groupId,spaceId:t.spaceId}),{name:f,spaceId:b,icon:C}=(0,S().K8)((()=>({name:h.getName()||r.formatMessage(ra.untitled),spaceId:h.getSpaceId(),icon:h.getIcon()})),[h,r]),I=(0,j().IS)((()=>({groupIconContainer:{marginLeft:8}})),[]),T=sa({blockIds:t.sharedPageIds}),k=function(e){let{spaceStore:t,groupStore:a}=e;const s=(0,v().tz)(),n=(0,y().v3)(),[{value:o,status:i,error:r}]=(0,tt().Yb)((async()=>{const e=a.getGroupId(),o=a.getSpaceId();if(!e||!o)return[];const i=await M().callApi({eventName:"getGroupMembersInOrganizationSpace",environment:n,data:{groupIds:[e],spaceId:o},headers:(0,ea().WS)({spaceId:o})});if("success"===i.type){var r;const a=((null===(r=i.data.groupUsersMap[e])||void 0===r?void 0:r.userIds)??[]).map((e=>new(z().LU)(n,{table:w().oo,id:e})));return(0,ta().cp)({userStores:a,spaceStore:t,intl:s})}}),[n,t,a,s]);return{members:o??[],loading:"pending"===i,error:r}}({groupStore:h,spaceStore:d}),_=function(e){const{spaceStore:t,groupStore:a}=e,n=(0,s.useMemo)((()=>null!=t&&t.id?[t.id]:[]),[null==t?void 0:t.id]),{teamStores:o,loading:i}=(0,B().o)(n);return{teamStores:(0,S().K8)((()=>null!=t&&t.id?o[t.id].filter((e=>e.getRawMembership().some((e=>"group"===e.entity_type&&e.group_id===a.getGroupId())))):[]),[o,null==t?void 0:t.id,a]),loading:i}}({groupStore:h,spaceStore:d});return(0,i.jsx)(ia().iv,{isOpen:!0,sidebarProps:{sidebarItemsTitle:(0,i.jsx)(v().sA,{id:"organization.singleGroupModal.sidebarItemTitle",defaultMessage:"Group settings"}),sidebarTitleIcon:(0,i.jsx)(Jt().e,{spaceId:b,icon:C,size:ia().WK}),sidebarTitle:f,sidebarByline:(0,i.jsx)(v().sA,{id:"settingsConsole.groupSettings.title.byline",defaultMessage:"Group · {numMembers, plural, one {# member} other {# members}}",values:{numMembers:t.membersCount}}),bottomEntitySection:(0,i.jsxs)("div",{style:I.groupIconContainer,children:[(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"settingsConsole.groupSettings.bottom.preamble",defaultMessage:"Part of workspace"})}),(0,i.jsx)(Lt().s7,{title:m,iconSize:32,icon:(0,i.jsx)(L().B,{disabled:!0,icon:p,isEmptyPage:!1,size:36}),byline:u?(0,i.jsx)(le().A,{style:l.shortShimmer}):(0,i.jsx)(ge().Qq,{memberCount:g})})]}),hideSeparator:!0},tabRenderer:Gf,tabNames:x().o3,tabAccessor:qf,defaultTab:"general",onDismiss:n,sceneProps:{groupStore:h,membersState:k,teamsState:_,groupPageStores:T,organizationId:a,onCloseModal:n,removePagesFromGroup:o}})};var da=()=>a(482570);const ca=28;function ua(e){let{userId:t,showEmailByline:a,badge:s,isNotMultiSelectable:n,rightContent:o,overrides:r,useThinTitle:l=!0}=e;const d=(0,v().tz)(),c=(0,y().v3)(),u=(0,j().IS)((e=>({iconStyle:{color:e.text.tertiary,fontWeight:U().Wy.medium}})),[]),g=(0,S().K8)((()=>{const e=new(vt().L)(c,{table:w().oo,id:t});return{userStore:e,isReady:e.isReady(),userName:e.getDisplayName(d),email:e.getEmail()}}),[c,t,d]);return null!=g&&g.isReady?(0,i.jsx)(Lt().s7,{useThinTitle:l,useSecondaryColorTitle:!Boolean(g.userName),badge:s,title:(null==r?void 0:r.name)??g.userName,byline:a?(null==r?void 0:r.email)??g.email:void 0,rightContent:o,icon:(0,i.jsx)(da().A,{size:ca,userStore:g.userStore,iconStyle:u.iconStyle}),summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:n?"100%":`calc(100% - ${Et().Gr}px)`}}):(0,i.jsx)(ga,{})}function ga(e){const t=(0,j().IS)((()=>({icon:{borderRadius:"100%",height:e.iconSize??ca,width:e.iconSize??ca,marginLeft:-4,...e.iconStyles},title:{width:120}})),[e.iconSize,e.iconStyles]);return(0,i.jsx)(Lt().mf,{includeIcon:!0,iconStyles:t.icon,titleStyles:t.title})}const ma=(0,v().YK)({untitled:{id:"organizationGroupsTable.nameColumn.untitled",defaultMessage:"Untitled"}}),pa={id:"name",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.nameColumn.header",defaultMessage:"Groups"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(ya,{row:e}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},ha={id:"pages",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.pagesColumn.header",defaultMessage:"Pages shared with this group"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Wt().Kb,{}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.pagesColumn.title",defaultMessage:"{count, plural, one {# page} other {# pages}}",values:{count:e.organizationGroup.sharedPageIds.length}})}),widthData:{widthPercent:33,minWidth:200,maxWidth:200},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},fa={id:"teams",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.teamsColumn.header",defaultMessage:"Associated Teamspaces"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Wt().Kb,{}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.teamsColumn.title",defaultMessage:"{count, plural, one {# teamspace} other {# teamspaces}}",values:{count:e.organizationGroup.teamsCount}})}),widthData:{widthPercent:33,minWidth:200,maxWidth:200},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},xa={id:"members",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.membersColumn.header",defaultMessage:"Members"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Wt().Kb,{}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.membersColumn.title",defaultMessage:"{count, plural, one {# member} other {# members}}",values:{count:e.organizationGroup.membersCount}})}),widthData:{widthPercent:33,minWidth:200,maxWidth:200},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},va=[pa,ha,fa,xa];function ba(e){let{groupId:t,groups:a,loading:n,error:o,organizationStore:r,loadNextPage:l,refreshPage:d,currentPage:c,hasNextPage:u,hasPreviousPage:g,loadPreviousPage:p,removePagesFromGroup:h}=e;const f=(0,_().X)("organization_console_group_single_view_modal"),[x,b]=(0,s.useState)({isOpen:!1});(0,s.useEffect)((()=>{const e=a.find((e=>e.groupId===t));e&&b({isOpen:!0,type:"viewGroup",groupId:e.groupId})}),[a,t,b]);const w=(0,Gt().A)(),A=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:va,theme:e,containerMarginTop:0})),[]),M=function(e){let{groupAndSpaceIds:t}=e;const a=(0,y().v3)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(N().N);return(0,S().K8)((()=>t.map((e=>{let{groupId:t,spaceId:s}=e;return new(z().Cv)(a,{table:qt().n,id:(0,qt().T1)({spacePermissionGroupId:t,spaceId:s}),spaceId:s},{inMemoryRecordCache:n})}))),[a,t,n])}({groupAndSpaceIds:a.map((e=>({groupId:e.groupId,spaceId:e.spaceId})))}),C=(0,S().K8)((()=>a.map((e=>{const t=M.find((t=>t.getGroupId()===e.groupId)),a=Boolean(null==t?void 0:t.getDeletedAt());return{organizationGroup:e,id:e.groupId,groupStore:t,isClickable:f&&!a,type:Zt().T.OrganizationGroup}}))),[a,f,M]),I=n?(0,Zt().n)():C;const T=va.map((e=>({...e,headerStyle:w.tableHeader,rowStyle:w.tableRow}))),k=x.isOpen?a.find((e=>e.groupId===x.groupId)):void 0;return!n&&o?(0,i.jsx)($t,{error:o,runNewSearch:()=>d(!0)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Et().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:T,rows:I,renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:m().peopleIcon,title:(0,i.jsx)(v().sA,{id:"workspaceModalGroupsView.empty",defaultMessage:"No groups found"}),byline:(0,i.jsx)(v().sA,{id:"workspaceModalGroupsView.empty.byline",defaultMessage:"There are no groups that match this query"})}),styles:A,loadMoreMethod:{type:"pages",onLoadNext:l,onLoadPrevious:p,hasNextPage:u,hasPrevPage:g,currentPage:c},onRowClick:function(e){e.type===Zt().T.OrganizationGroup&&e.isClickable&&b({isOpen:!0,type:"viewGroup",groupId:e.organizationGroup.groupId})},extendToFullScreen:Xt().e}),x.isOpen&&"viewGroup"===x.type&&k?(0,i.jsx)(la,{group:k,organizationId:r.id,onDismiss:()=>b({isOpen:!1}),removePagesFromGroup:h}):null]})}function ya(e){const{row:t}=e,a=(0,v().tz)(),[s,n,o]=(0,S().K8)((()=>t.groupStore?[t.groupStore.getName(),t.groupStore.getIcon(),Boolean(t.groupStore.getDeletedAt())]:[void 0,void 0,!1]),[t.groupStore]),r=s||t.organizationGroup.name||a.formatMessage(ma.untitled),l=n||t.organizationGroup.icon;return(0,i.jsx)(Lt().s7,{useSecondaryColorTitle:!Boolean(r),title:r,badge:o?(0,i.jsx)(Sa,{}):null,icon:(0,i.jsx)(Jt().e,{icon:l,spaceId:t.organizationGroup.spaceId,size:26}),iconSize:Ht().Ev,summaryStyles:{width:`calc(100% - ${Ht().Ev}px)`,paddingBlock:8}})}function Sa(){return(0,i.jsx)(G().A,{renderTooltip:()=>(0,i.jsx)(v().sA,{id:"organizationGroupsTable.membersColumn.title.deletedBadge.tooltip",defaultMessage:"This group has been deleted"}),render:e=>(0,i.jsx)(Vt().A,{...e,content:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.membersColumn.title.deletedBadge.content",defaultMessage:"Deleted"})})})}function ja(e,t){const{permissionGroupsForSpace:a,loadPermissionGroupsForSpace:n}=(0,s.useContext)(R().D);(0,s.useEffect)((()=>{t||n(e)}),[e,n,t]);return(0,s.useMemo)((()=>a[e]??[]),[a,e])}const wa=at().q,Aa=[{propertyId:pa.id,direction:"ascending"}];function Ma(e,t){const{loadPermissionGroupsForSpace:a}=(0,s.useContext)(R().D),n=ja(e),[o,i]=(0,s.useState)(),r=(0,S().K8)((()=>n.map((a=>{const s=a.group;return{id:s.group_id,groupName:s.name,groupIcon:s.icon,teamspacesCount:t.filter((e=>e.isAssociatedWithPermissionGroup(s))).length,memberCount:a.memberCount,isClickable:!1,spaceId:e}}))),[n,t,e]),l=(0,s.useMemo)((()=>{const e=null!=o&&o.length?o:Aa;return function(e){let{rows:t,appliedSorts:a}=e;const s=a.map((e=>{let{propertyId:t}=e;return t===hs.id?"teamspacesCount":t===fs.id?"memberCount":e=>e.groupName.toLowerCase()})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Ee().HB)(t)}));return et().My(t,s,n)}({rows:r,appliedSorts:e})}),[r,o]);return{rows:l,loadPermissionGroupsForSpace:a,appliedSorts:o,setAppliedSorts:i}}var Ca=()=>a(361414),Ia=(a(362833),()=>a(509484));async function Ta(e){const{query:t,environment:a}=e,s=await Ia().T.searchActions.load(),{user:n,email:o}=await s.searchEmailUser(a,t),i=[];return n?i.push({type:"existingUser",value:n}):o&&i.push({type:"newUser",value:{email:o},source:"email"}),{inviteUsers:i,inviteBots:[],inviteGroups:[],importedContacts:[]}}function ka(e){let{organizationId:t,spaceId:a}=e;return async function(e){const{query:s,environment:n}=e,o=await M().callApi({eventName:"getMembersInOrganizationSpace",environment:n,data:{organizationId:t,spaceId:a,query:s,limit:5},headers:(0,ea().WS)({spaceId:a})});if("success"!==o.type)return{inviteUsers:[],inviteBots:[],inviteGroups:[],importedContacts:[]};const i=[];for(const t of o.data.members){const e=new(z().LU)(n,{table:w().oo,id:t.userId}).getModel();e&&i.push({type:"existingUser",value:e})}return{inviteUsers:i,inviteBots:[],inviteGroups:[],importedContacts:[]}}}var _a=()=>a(710567),za=()=>a(129044),Da=()=>a(16043);class Pa extends za().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"read_and_write",isInviteTargetsEmpty:!0,table:Da().y7,flowId:void 0,inputFocus:"none",emailMessage:""}}}var Na=()=>a(563680);function Ra(e){let{organizationId:t,spaceId:a,groups:n,onDismiss:o,onSubmit:r}=e;const l=(0,y().v3)(),d=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},content:{width:Y().J2}})),[]),[c,u]=(0,s.useState)(!1);async function g(){if(c)return;u(!0);const e=await M().callApi({eventName:"deleteGroupsInOrganizationSpace",environment:l,data:{organizationId:t,spaceId:a,groupIds:n.map((e=>e.id))}});"success"===e.type?(o(),r&&r(),(0,I().u4)({environment:l,event:{eventName:"org_console_general_delete_entity",eventProperties:{entity:"group",organization_id:t,space_id:a,num_removed:n.length}}})):"failed"===e.type&&C().f1((0,T().Hu)(k().A.getIntl(),e)),u(!1)}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,Bt().trashIcon)(d.icon),title:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.title",defaultMessage:"Are you sure you want to delete {teamCount, plural, one {this group} other {these groups}}?",values:{teamCount:n.length}}),byline:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.byline",defaultMessage:"This action cannot be undone. Any pages that are private to this group will be transferred to you."})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.primaryAction",defaultMessage:"Delete {groupsCount, plural, one {group} other {groups}}",values:{groupsCount:n.length}}),primaryAction:g,primaryDisabled:c,secondaryText:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:o,isDarkRed:!0,isLoading:c}),children:(0,i.jsx)("div",{style:d.content,children:(0,i.jsx)(Ba,{groups:n})})})})}function Ba(e){const{groups:t}=e,[a,n]=(0,s.useState)(""),o=(0,S().K8)((()=>t.map((e=>({id:e.id,icon:(0,i.jsx)(Jt().e,{icon:e.groupIcon,spaceId:e.spaceId,size:Na().iK}),name:e.groupName,byline:(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.groupsList.item.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.memberCount}})})})))),[t]),r=(0,ht().Ay)(a,o,(e=>e.name??""));return(0,i.jsx)(Y().p6,{items:r,titleText:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.groupsList.title",defaultMessage:"Selected groups"}),headerText:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.groupsList.header",defaultMessage:"Groups ({groupsCount})",values:{groupsCount:t.length}}),headerAction:(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:a,setQueryFilter:n})})}function Ea(e){let{organizationId:t,onDismiss:a,onSubmit:n,spaceId:o,...r}=e;const l=(0,y().v3)(),d=(0,v().tz)(),{updateCacheWithRecordMap:c}=(0,s.useContext)(N().N),u=(0,_a().E)({organizationId:t}),[g,m]=(0,s.useState)(!1),p=(0,S().K8)((()=>new Pa),[]),h=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:Y().gA,width:Y().J2,overflowY:"auto"}})),[]),{inviteTargets:f}=(0,S().K8)((()=>({inviteTargets:p.state.inviteTargets})),[p]),x=(0,S().K8)((()=>{const e=p.state.inviteTargets.length>0;return!g&&e}),[p,g]);async function b(){var e,s;m(!0);const i=null===(e=r.groupStore)||void 0===e?void 0:e.getGroupId(),u=i?[i]:null===(s=r.groups)||void 0===s?void 0:s.map((e=>e.id));if(null==u||!u.length||!x)return void m(!1);const g=f.filter((e=>"existingUser"===e.type)).map((e=>e.value.id)).filter(Ee().O9),p=await M().callApi({eventName:"updateGroupsInOrganizationSpace",environment:l,data:{organizationId:t,spaceId:o,groupIds:u,addMembers:g}});"success"===p.type?("success"===p.type&&n&&(n(),(0,I().u4)({environment:l,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:o,update_type:"add_members"}}})),c({data:p.data}),a(),m(!1)):C().f1((0,T().Hu)(d,p))}const w=(0,S().K8)((()=>r.groupStore?r.groupStore.getName():r.groups.length?r.groups[0].groupName:d.formatMessage({id:"orgConsole.people.modal.addUsersToGroup.title.defaultSingular",defaultMessage:"group"})),[r,d]);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:a,areaConstraint:{height:{type:"min",length:200}},render:e=>{let{sizeRange:s}=e;return(0,i.jsx)(H().tf,{showDismissButton:!1,sizeRange:s,header:(0,i.jsx)(Y().rQ,{icon:(0,Rt().x)(h.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToGroup.title",defaultMessage:"Add members to <gray>{groupCount, plural, one {{groupName}} other {# groups}}</gray>",values:{groupCount:r.groupStore?1:r.groups.length,groupName:w,gray:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.jsx)(D().D,{colorName:"secondary",as:"span",children:t})}}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToGroup.byline.space",defaultMessage:"Add the following users to this group."})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToGroup.button.add",defaultMessage:"Add members"}),primaryAction:b,primaryDisabled:!x,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToGroup.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsxs)("div",{style:h.content,children:[(0,i.jsx)(Ca().A,{disableAutoFocus:!0,showCurrentUser:!0,parentStore:u,permissionsInviteStore:p,performSearchRequest:ka({organizationId:t,spaceId:o})}),r.groups&&r.groups.length>1?(0,i.jsx)(Ba,{groups:r.groups}):void 0]})})}})}var La=()=>a(126451);function Oa(e){let{isOpen:t,children:a}=e;const s=(0,j().IS)((e=>({outer:{position:"absolute",top:-40,left:0,zIndex:999},inner:{display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:5,background:e.popoverBackground,boxShadow:e.shadowSM,height:32,overflow:"hidden"}})),[]);return(0,i.jsx)(Kt().A,{visible:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:s.outer,children:(0,i.jsx)("div",{style:s.inner,children:a})})}function Ua(e){const{icon:t,iconSize:a,title:s,isPrimary:n,isDestructive:o,onClick:r,disabled:l,disabledTooltipText:d}=e,c=(0,j().IS)((e=>({button:{color:n?e.blueColor:o?e.text.uiRedPrimary:e.text.primary,fontSize:14,whiteSpace:"nowrap",height:"100%",alignItems:"center",justifyContent:"center",gap:4,display:"flex",paddingRight:10,paddingLeft:10,borderRadius:0,boxShadow:`1px 0 0 ${e.regularDividerColor}`,fontVariantNumeric:"tabular-nums"},icon:{height:a??20,width:a??20,fill:"currentColor"}})),[n,o,a]);return(0,i.jsx)(G().A,{disableTooltip:!l,renderTooltip:()=>d,textWrap:!0,style:{width:260},render:e=>(0,i.jsxs)(La().A,{style:c.button,onClick:r,disabled:l,disabledFeedback:!0,...e,children:[t?t(c.icon):void 0,s]})})}function Fa(e){let{itemsSelectedCount:t}=e;return(0,i.jsx)(v().sA,{id:"settingsConsole.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount, plural, one {1 selected} other {{itemsSelectedCount} selected}}",values:{itemsSelectedCount:t}})}var Ha=()=>a(853745),Va=()=>a(605827),Wa=()=>a(909497);function qa(){return(0,j().IS)((()=>({tableHeader:{position:"relative",display:"flex",flexDirection:"row"},leftContent:{display:"flex",flex:"auto",flexWrap:"wrap",justifyContent:"flex-start",rowGap:4,alignItems:"flex-start",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},filters:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%"},multiSelect:{position:"relative"},search:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px"},actionContainer:{position:"relative",display:"flex",flexDirection:"row",gap:8}})),[])}var Ga=()=>a(950635),Ka=()=>a(769884),Ya=()=>a(446588),Qa=()=>a(387643),$a=()=>a(907721),Xa=()=>a(466321),Za=()=>a(466051),Ja=()=>a(625880),es=()=>a(797715),ts=()=>a(698995);function as(e){let{isOpen:t,onDismiss:a,onClick:n,spaceStore:o,includeGroups:r,selectedValues:l,setSelectedValues:d,inputPlaceholder:c}=e;const u=(0,v().tz)(),g=(0,y().v3)(),{organizationOwnerRecordCache:m}=(0,s.useContext)(N().N),[p,h]=(0,s.useState)(""),f=(0,s.useMemo)((()=>l.map((e=>e.userId)).filter(Ee().O9)),[l]),x=(0,s.useMemo)((()=>l.map((e=>e.groupId)).filter(Ee().O9)),[l]),{visibleUsers:j}=(0,E().d)(o.id),{permissionGroupsForSpace:A,loadPermissionGroupsForSpace:M}=(0,s.useContext)(R().D);(0,s.useEffect)((()=>{r&&M(o.id)}),[o.id,M,r]);const C=(0,s.useMemo)((()=>{const e=A[o.id].filter((e=>{let{group:t}=e;return!(null!=x&&x.includes(t.group_id))}));return(p?(0,ht().Ay)(p,e,(e=>{let{group:t}=e;return(0,ta().Pf)({intl:u,groupName:t.name})}),{normalizeFuzzyScore:!0}):e).slice(0,5)}),[A,o.id,x,u,p]),[{value:I}]=(0,tt().Yb)((async()=>{if(b().default.checkGate({gateName:"dont_load_users"}))return[];const e=j.filter((e=>(0,Ya().DH)(e.role)&&!(null!=f&&f.includes(e.userId))));return(await(0,Qa().searchUsers)({environment:g,query:p,parentStore:o,userIds:e.map((e=>e.userId))})).slice(0,5)}),[p,o,f,j,g]),T=(0,s.useCallback)((e=>{const t=l.filter((t=>t.userId!==e));d(t)}),[l,d]),k=(0,s.useCallback)((e=>{const t=l.filter((t=>t.groupId!==e));d(t)}),[l,d]),_=(0,S().K8)((()=>l.map((e=>{if("user"===e.type){const t=new(z().LU)(g,{table:w().oo,id:e.userId});return(0,i.jsx)(At().A,{showRemoveButton:!0,value:t.getFullName(u)||t.getEmail(),format:mt().NY.Medium,isSingle:!1,onClickRemove:()=>T(e.userId)},e.userId)}if("group"===e.type){const t=new(z().Cv)(g,{table:qt().n,id:(0,qt().T1)({spacePermissionGroupId:e.groupId,spaceId:o.id}),spaceId:o.id},{inMemoryRecordCache:m});return(0,i.jsx)(At().A,{showRemoveButton:!0,value:t.getName(),format:mt().NY.Medium,isSingle:!1,onClickRemove:()=>k(e.groupId)},e.groupId)}(0,Ee().HB)(e)}))),[g,T,k,u,l,m,o.id]),D=(0,s.useCallback)((e=>{h(e.currentTarget.value)}),[]),P=e=>{const t=[...l,{type:"user",userId:e}];d(t),h("")},B=r?{includeGroups:r,onSelectGroup:e=>{const t=[...l,{type:"group",groupId:e}];d(t),h("")},permissionGroups:C}:{includeGroups:!1};return(0,i.jsx)(jt().Ay,{placementToOrigin:$a().W.Bottom,alignmentToOrigin:$a().C.Start,originGap:8,open:t&&(Boolean(null==I?void 0:I.length)||Boolean(C.length&&r)),popupType:Xa().n.Popup,onDismiss:a,sameWidthAsOrigin:!0,origin:(0,i.jsx)(es().Ay,{showBorder:!0,onRemoveLastToken:()=>d([]),format:es().le.Select,value:p,tokens:_,onChange:D,onClick:n,placeholder:c??u.formatMessage(ns.membersPlaceholder),style:{borderRadius:6,padding:"6px 8px"},inputStyle:{borderRadius:6},inputFullWidth:!0}),render:()=>(0,i.jsx)(ss,{spaceStore:o,onSelectUser:P,users:I??[],query:p,...B})})}function ss(e){let{spaceStore:t,onSelectUser:a,onSelectGroup:s,includeGroups:n,users:o,permissionGroups:r,query:l}=e;if(!(null!=o&&o.length||null!=r&&r.length))return null;const d=[],c=(o??[]).map((e=>({key:e.id,render:t=>(0,i.jsx)(ts().A,{...t,actor:(0,Ga().A7)(e)}),action:()=>{a(e.id)}})));c.length&&d.push({key:"user results",render:e=>(0,i.jsx)(Ja().z,{loading:!1,...e}),items:c});const u=n&&s?r.map((e=>{let{group:a}=e;return{key:a.group_id,render:e=>(0,i.jsx)(Za()._,{menuListItemProps:e,group:Ka().Bj6.fromValue(qt().n,a),spaceStore:t}),action:()=>{s(a.group_id)}}})):[];return u.length&&d.push({key:"group results",render:e=>(0,i.jsx)(qe().A,{title:(0,i.jsx)(v().sA,{id:"spaceMembersInput.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!1,...e}),items:u}),(0,i.jsx)(St().Ay,{initialFocus:l.length>0?0:void 0,type:St().Oh.Vertical,sections:d})}const ns=(0,v().YK)({membersPlaceholder:{id:"spaceMembersInput.members.placeholder",defaultMessage:"No members yet"}});function os(e){let{onDismiss:t,spaceStore:a,organizationId:n,refetchData:o}=e;const[r,l]=(0,s.useState)(void 0),[d,c]=(0,s.useState)(void 0),u=(0,j().IS)((e=>({content:{width:Y().J2},headerIcon:{width:32,height:32,fill:e.icon.secondary},icon:{width:24,height:24,fill:e.icon.secondary},iconButton:{width:32,height:32,borderRadius:6,border:`1px solid ${e.stroke.primary}`,background:e.buttonHoveredBackground},iconNameContainer:{display:"flex",gap:8},header:{marginBottom:4},iconNameSection:{marginBottom:20}})),[]),[g,p]=(0,s.useState)([]),h=(0,y().v3)(),f=async()=>{const e=g.map((e=>{let{userId:t}=e;return t})).filter(Ee().O9),s=await M().callApi({eventName:"createPermissionGroupWithMembers",environment:h,data:{spaceId:a.id,organizationId:n,name:r,icon:null==d?void 0:d.icon,userIds:e}});t(),"success"===s.type?(o(),(0,I().u4)({environment:h,event:{eventName:"org_console_general_create_entity",eventProperties:{entity:"group",organization_id:n,space_id:a.id}}})):C().f1((0,T().Hu)(k().A.getIntl(),s))},x=(0,s.useCallback)((e=>{l(e.currentTarget.value)}),[]),b=(0,s.useCallback)((e=>{c(e?{pointer:{id:a.id,table:na().NX},icon:e}:void 0)}),[a]),S=(0,s.useCallback)((()=>{_(!0)}),[]),w=(0,v().tz)(),[A,_]=(0,s.useState)(!1);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:t,render:()=>(0,i.jsx)(H().tf,{showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{title:(0,i.jsx)(v().sA,{id:"createGroupModal.title",defaultMessage:"Create a new group"}),icon:(0,m().peopleIcon)(u.headerIcon),byline:(0,i.jsx)(v().sA,{id:"createGroupModal.byline",defaultMessage:"Use groups to manage access to teamspaces and pages within a workspace."})}),footer:(0,i.jsx)(Y().jl,{secondaryText:(0,i.jsx)(v().sA,{id:"createGroupModal.cancel",defaultMessage:"Cancel"}),primaryText:(0,i.jsx)(v().sA,{id:"createGroupModal.create",defaultMessage:"Create group"}),primaryAction:f,secondaryAction:t}),children:(0,i.jsxs)("div",{style:u.content,children:[(0,i.jsxs)("div",{style:u.iconNameSection,children:[(0,i.jsx)("div",{style:u.header,children:(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"createGroupModal.iconAndName.header",defaultMessage:"Icon & name"})})}),(0,i.jsxs)("div",{style:u.iconNameContainer,children:[(0,i.jsx)(L().B,{disabled:!1,bucket:"public",icon:d,defaultIcon:(0,m().peopleIcon)(u.icon),isEmptyPage:!1,size:24,onChange:b,style:u.iconButton}),(0,i.jsx)(F().A,{value:r,onChange:x,placeholder:w.formatMessage(is.groupNamePlaceholder)})]})]}),(0,i.jsx)("div",{style:u.header,children:(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"createGroupModal.members.header",defaultMessage:"Members"})})}),(0,i.jsx)(as,{spaceStore:a,isOpen:A,onDismiss:()=>_(!1),onClick:S,selectedValues:g,setSelectedValues:p})]})})})}const is=(0,v().YK)({groupNamePlaceholder:{id:"createGroupModal.groupName.placeholder",defaultMessage:"Enter a name for the group"}});var rs=()=>a(634468),ls=()=>a(83072),ds=()=>a(356813);function cs(e){let{isHovered:t,iconFunction:a,tooltipMessage:s,buttonProps:n}=e;const o=(0,j().IS)((e=>({container:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"right"},buttonContainer:{display:"flex",background:e.surface.elevated,padding:2,boxShadow:e.shadowSM,borderRadius:6},button:{height:20,width:20,boxShadow:"none"},icon:{color:e.icon.secondary,height:14,width:14}})),[]);return(0,i.jsx)("div",{style:o.container,children:t&&(0,i.jsx)(G().A,{renderTooltip:()=>s,render:e=>(0,i.jsx)("div",{style:o.buttonContainer,...e,children:(0,i.jsx)(ds().A,{ariaLabel:s,hasBackground:!0,icon:a,showShadow:!0,iconStyle:o.icon,style:o.button,onClick:e=>{var t;null===(t=n.onClick)||void 0===t||t.call(n,e),e.stopPropagation()},...n})})})})}function us(e){let{groupId:t,organizationId:a,isHovered:n}=e;const o=(0,v().tz)(),r=(0,s.useMemo)((()=>(0,ls().re)({organizationId:a,tabRoute:x().kr,properties:{subtab:x().DE.Groups},queryParams:{[Uf]:t}})),[a,t]);return(0,_().X)("organization_console_group_single_view_modal")?(0,i.jsx)(cs,{isHovered:n,iconFunction:rs().arrowDiagonalUpRightFillIcon,tooltipMessage:o.formatMessage(gs.viewFullDetail),buttonProps:{href:r,external:!0}}):null}const gs=(0,v().YK)({viewFullDetail:{defaultMessage:"View full detail",id:"organization.workspace.members.emailColumn.viewFullDetail"}}),ms=(0,v().YK)({name:{id:"workspaceModalGroupsView.nameColumn.header",defaultMessage:"Name"},teams:{id:"workspaceModalGroupsView.teamspacesColumn.sortName",defaultMessage:"Teamspaces"},members:{id:"workspaceModalGroupsView.membersColumn.header",defaultMessage:"Members"}}),ps={id:"name",headerTitle:(0,i.jsx)(v().sA,{...ms.name}),renderCell:e=>{const t=0===e.groupName.length?(0,i.jsx)(v().sA,{id:"workspaceModalGroupsView.untitledGroup",defaultMessage:"Untitled"}):e.groupName;return(0,i.jsx)(Lt().s7,{useThinTitle:!1,title:t,icon:(0,i.jsx)(Jt().e,{icon:e.groupIcon,spaceId:e.spaceId,size:Na().p8}),iconSize:Na().p8,iconMargin:Lt().Ji,summaryStyles:{width:`calc(100% - ${Na().p8+Lt().Ji}px)`}})},widthData:{widthPercent:40,minWidth:100},sortable:!1},hs={id:"teamspaces",headerTitle:(0,i.jsx)(v().sA,{id:"workspaceModalGroupsView.teamspacesColumn.header",defaultMessage:"Associated Teamspaces"}),renderCell:e=>(0,i.jsx)(D().D,{colorName:"secondary",children:(0,i.jsx)(v().sA,{defaultMessage:"{numTeamspaces} {numTeamspaces, plural, one {teamspace} other {teamspaces}}",id:"workspaceModalGroupsView.numTeamspaces",values:{numTeamspaces:e.teamspacesCount}})}),widthData:{widthPercent:30,minWidth:100},sortable:!1},fs={id:"members",headerTitle:(0,i.jsx)(v().sA,{...ms.members}),renderCell:e=>(0,i.jsx)(D().D,{colorName:"secondary",children:(0,i.jsx)(v().sA,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"organizationManageWorkspacesTable.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:20,minWidth:100},sortable:!1};function xs(e){return{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>(0,i.jsx)(us,{groupId:t.id,isHovered:t.isRowHovered,organizationId:e}),widthData:{widthPercent:10,minWidth:36},sortable:!1}}const vs=[{id:ps.id,name:k().A.formatMessage(ms.name),type:"title"},{id:hs.id,name:k().A.formatMessage(ms.teams),type:"number"},{id:fs.id,name:k().A.formatMessage(ms.members),type:"number"}];var bs=function(e){return e.CreateGroup="create-group",e.DeleteGroups="delete-groups",e.AddMembers="add-members",e}(bs||{});function ys(e){let{spaceStore:t,organizationId:a}=e;const n=(0,s.useMemo)((()=>[ps,hs,fs,xs(a)]),[a]),o=(0,j().IS)((()=>({createGroupButton:{marginBottom:8}})),[]),r=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:n,theme:e,containerMarginTop:0})),[n]),l=qa(),d=(0,s.useMemo)((()=>[t.id]),[t]),{teamStores:c}=(0,B().o)(d),u=(0,s.useMemo)((()=>Object.values(c).flat()),[c]),{rows:g,loadPermissionGroupsForSpace:p,setAppliedSorts:h,appliedSorts:f}=Ma(t.id,u),{filteredRows:x,query:b,setQuery:y,loadNextPage:S,loadPrevPage:w,hasNextPage:A,hasPrevPage:M,currentPageIndex:C}=function(e){const[t,a]=(0,s.useState)(""),[n,o]=(0,s.useState)(0),i=(0,s.useMemo)((()=>{if(!e)return[];let a=e;return t&&(a=(0,ht().Ay)(t,a,(e=>e.groupName))),a}),[t,e]),r=(0,s.useMemo)((()=>{const e=n*wa,t=e+wa;return i.slice(e,t)}),[i,n]);(0,s.useEffect)((()=>{o(0)}),[t]);const l=(0,s.useMemo)((()=>(n+1)*wa<i.length),[i,n]),d=n>0,c=(0,s.useCallback)((()=>{l&&o((e=>e+1))}),[l]),u=(0,s.useCallback)((()=>{d&&o((e=>e-1))}),[d]);return{query:t,setQuery:a,filteredRows:r,loadNextPage:c,loadPrevPage:u,hasNextPage:l,hasPrevPage:d,currentPageIndex:n}}(g),{selectedRows:I,handleToggleRow:T,handleSelectAllRows:k,handleUnselectAllRows:_}=Ft({allPossibleRows:x}),[z,D]=(0,s.useState)(),[P,N]=(0,s.useState)(),[R,E]=(0,s.useState)(!1),L=e=>{T(e)};return(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.groups.title",defaultMessage:"Groups"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.workspace.groups.byline",defaultMessage:"Set up groups to simplify page permissions and manage teamspace members at scale"})}),(0,i.jsx)("div",{style:l.multiSelect,children:(0,i.jsxs)(Oa,{isOpen:I.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.groups.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:I.length}}),onClick:_}),(0,i.jsx)(Ua,{icon:Rt().x,iconSize:16,title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.groups.multiselect.addMembers",defaultMessage:"Add members"}),onClick:()=>D(bs.AddMembers)}),(0,i.jsx)(Ua,{icon:Bt().trashIcon,iconSize:16,title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.groups.multiselect.delete",defaultMessage:"Delete groups"}),onClick:()=>D(bs.DeleteGroups),isDestructive:!0})]})}),(0,i.jsxs)("div",{style:l.actionContainer,children:[(0,i.jsx)("div",{style:l.filters,children:(0,i.jsx)(Wa().e,{sortProperties:vs,isMenuOpen:R,setIsMenuOpen:E,onApply:e=>{E(!1),h(e),N(void 0)},currentSorts:P??f??[]})}),(0,i.jsx)("div",{style:l.search,children:g.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Va().x,{appliedSorts:f,openSortPillMenu:e=>{e&&N([{propertyId:e,direction:"ascending"}]),E(!0)},sortProperties:vs}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:b,setQueryFilter:y})]})}),(0,i.jsx)(W().A,{onClick:()=>D(bs.CreateGroup),style:o.createGroupButton,children:(0,i.jsx)(v().sA,{defaultMessage:"Create new group",id:"workspaceModalGroupsView.createNewGroupButton"})})]}),(0,i.jsx)(Et().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,rows:x,columnRenderInfo:n,styles:r,onRowClick:L,multiselect:{header:{isDisabled:!1,isSelected:x.length>0&&I.length===x.length,onClick:()=>{I.length===x.length?_():k()}},row:{getDisabledState:()=>!1,getSelectedState:e=>I.some((t=>t.id===e.id)),onClick:L}},renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:m().peopleIcon,title:(0,i.jsx)(v().sA,{id:"workspaceModalGroupsView.empty",defaultMessage:"No groups found"}),byline:(0,i.jsx)(v().sA,{id:"workspaceModalGroupsView.empty.byline",defaultMessage:"There are no groups that match this query"})}),loadMoreMethod:{type:"pages",onLoadNext:S,onLoadPrevious:w,hasNextPage:A,hasPrevPage:M,currentPage:C+1}}),z===bs.CreateGroup&&(0,i.jsx)(os,{onDismiss:()=>D(void 0),spaceStore:t,organizationId:a,refetchData:()=>p(t.id,!0)}),z===bs.DeleteGroups&&(0,i.jsx)(Ra,{spaceId:t.id,organizationId:a,groups:I,onDismiss:()=>D(void 0),onSubmit:()=>{p(t.id,!0),_()}}),z===bs.AddMembers&&(0,i.jsx)(Ea,{spaceId:t.id,organizationId:a,groups:I,onDismiss:()=>D(void 0),onSubmit:()=>{p(t.id,!0),_()}})]})}const Ss=(0,o().wt)("removePersonOutline",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M11.524 16.45h-5.79q-1.75 0-1.75-1.177 0-.696.417-1.463.424-.765 1.21-1.428a6.4 6.4 0 0 1 1.9-1.073q1.108-.417 2.489-.417.895 0 1.675.191a6.4 6.4 0 0 1 1.435.513 4.5 4.5 0 0 0-.464.43q-.22.225-.397.5A5.7 5.7 0 0 0 10 12.074q-1.135 0-2.017.32-.875.315-1.476.8-.595.48-.91.992-.314.506-.314.902 0 .096.048.137.055.04.178.04h5.824q.007.315.048.602a4 4 0 0 0 .143.581Zm-1.53-6.358a2.75 2.75 0 0 1-1.512-.438 3.2 3.2 0 0 1-1.08-1.175A3.35 3.35 0 0 1 7 6.845q0-.882.403-1.6A3.2 3.2 0 0 1 8.49 4.104a2.78 2.78 0 0 1 1.504-.424q.82 0 1.497.43.684.431 1.087 1.156.41.718.403 1.592 0 .89-.403 1.627a3.2 3.2 0 0 1-1.08 1.17 2.7 2.7 0 0 1-1.504.437m0-1.19q.471 0 .867-.266a1.95 1.95 0 0 0 .643-.739q.24-.465.24-1.039a2 2 0 0 0-.24-1.011 1.9 1.9 0 0 0-.636-.718 1.54 1.54 0 0 0-.875-.267q-.478 0-.875.26-.396.26-.636.711t-.239 1.012q0 .574.24 1.046.238.465.635.738.403.273.875.273Zm5.83 9.79a3.4 3.4 0 0 1-1.36-.274 3.5 3.5 0 0 1-1.121-.766 3.7 3.7 0 0 1-.766-1.12 3.4 3.4 0 0 1-.273-1.361q0-.725.273-1.36.28-.636.766-1.121a3.5 3.5 0 0 1 1.12-.766 3.4 3.4 0 0 1 1.361-.274q.725 0 1.36.274a3.56 3.56 0 0 1 1.88 1.886q.28.636.28 1.36 0 .719-.28 1.354a3.5 3.5 0 0 1-.765 1.128q-.486.486-1.128.76a3.3 3.3 0 0 1-1.347.28m-1.77-3.056h3.527a.44.44 0 0 0 .328-.144.43.43 0 0 0 0-.642.44.44 0 0 0-.328-.144h-3.527a.44.44 0 0 0-.328.144.44.44 0 0 0-.137.32q0 .186.137.322.135.144.328.144"})});var js=()=>a(106408),ws=()=>a(704082);const As={rows:[],filters:{},query:void 0,sorts:void 0,loading:!1,error:void 0,hasNextPage:!0,hasPreviousPage:!1,nextCursor:void 0},Ms=1;a(771702);var Cs=()=>a(486540),Is=()=>a(242297),Ts=()=>a(949282);function ks(e){let{inviteTargets:t,inviteRole:a,organizationStore:n}=e;const o=(0,y().v3)(),[r,l]=(0,s.useState)(!1);return{spaceStores:(0,Ts().l)(),loading:r,onSubmit:(0,s.useCallback)((async e=>{l(!0);const s=t.filter((e=>"existingUser"===e.type)).map((e=>e.value.id)).filter(Ee().O9),r=t.filter((e=>"newUser"===e.type&&"email"===e.source)).map((e=>e.value.email)),d=(0,Is().jM)(a),c=await M().callApi({eventName:"bulkAddUsersToOrganizationSpaces",environment:o,data:{organizationId:n.id,existingUserIds:s,newUserEmails:r,spaceIds:e,role:d}});l(!1),"success"===c.type&&((0,I().u4)({environment:o,event:{eventName:"org_console_people_add_members",eventProperties:{organization_id:n.id,space_ids:e,num_users_added:r.length+s.length}}}),1===e.length?lt().D6({label:(0,i.jsx)(v().sA,{id:"workspacesMultiSelect.toastMessage.addUsers.singleSpace.success",defaultMessage:"Successfully added users to workspace"})}):lt().D6({label:(0,i.jsx)(v().sA,{id:"workspacesMultiSelect.toastMessage.addUsers.success",defaultMessage:"Successfully added users to {numWorkspaces, plural, one {{numWorkspaces} workspace} other {{numWorkspaces} workspaces}}.",values:{numWorkspaces:e.length}})}))}),[n,o,a,t])}}var _s=()=>a(421338);function zs(e){const{userStore:t}=e,a=(0,j().IS)((e=>({userRow:{display:"flex",alignItems:"center",padding:"6px 12px",flexDirection:"row",gap:12},name:{flex:1},email:{flex:2,maxWidth:"70%",overflow:"hidden"}})),[]),s=(0,v().tz)(),n=(0,S().K8)((()=>({name:t.getDisplayName(s),email:t.getEmail()})),[s,t]);return(0,i.jsxs)("div",{style:a.userRow,children:[(0,i.jsx)(da().A,{userStore:t,size:28}),(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Medium",colorName:"primary",customStyles:a.name,children:n.name}),(0,i.jsx)(_s().Y1,{align:"center-right",style:a.email,children:(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:n.email})})]})}const Ds=function(e){let{userIds:t}=e;const n=(0,j().IS)((e=>({userListContainer:{borderRadius:8,border:`1px solid ${e.stroke.secondary}`},userListHeader:{padding:"4px 16px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center"},scroller:{maxHeight:200},searchInput:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%"}})),[]),o=(0,y().v3)(),r=(0,v().tz)(),l=(0,S().K8)((()=>t.map((e=>new(vt().L)(o,{table:w().oo,id:e})))),[o,t]),[d,c]=(0,s.useState)(""),u=(0,S().K8)((()=>{if(d){return(0,ht().Ay)(d,l,(e=>e.getDisplayName(r)))}return l}),[d,l,r]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",as:"p",children:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.usersList.label",defaultMessage:"Selected users"})}),(0,i.jsxs)("div",{style:n.userListContainer,children:[(0,i.jsxs)("div",{style:n.userListHeader,children:[(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.usersList.nameLabel",defaultMessage:"Name"})}),(0,i.jsx)("div",{style:n.searchInput,children:(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:d,setQueryFilter:c})})]}),(0,i.jsx)(a(142708).H,{type:a(98508).A.Y,style:n.scroller,children:u.map((e=>(0,i.jsx)("div",{children:(0,i.jsx)(zs,{userStore:e})},e.id)))})]})]})};var Ps=()=>a(482491);function Ns(e){const{userModel:t,refreshSpaceData:a,...n}=e,o=[{type:"existingUser",value:t}],r=(0,s.useCallback)((e=>(e.forEach((e=>a(e))),Promise.resolve())),[a]);return(0,i.jsx)(Es,{title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModalForSingleUser.title",defaultMessage:"Upgrade guest to workspace member"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModalForSingleUser.byline",defaultMessage:"Choose workspaces to grant this guest full membership and expanded access."}),buttonText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModalForSingleUser.button.add",defaultMessage:"Upgrade guest"}),inviteTargets:o,inviteRole:"read_and_write",refreshPage:r,...n})}function Rs(e){const{permissionsInviteStore:t,...a}=e,s=(0,v().tz)(),{inviteRole:n,inviteTargets:o}=(0,S().K8)((()=>({inviteRole:t.state.inviteRole,inviteTargets:t.state.inviteTargets})),[t]);return(0,i.jsx)(Es,{title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModal.title",defaultMessage:"Upgrade {count} {count, plural, one {guest} other {guests}} to {role}",values:{count:o.length,role:s.formatMessage((0,Cs().rd)((0,Is().jM)(n))).toLocaleLowerCase()}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModal.byline",defaultMessage:"Upgrade the selected guests to members in your workspaces"}),buttonText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModal.button.add",defaultMessage:"Upgrade guests"}),inviteTargets:o,inviteRole:n,...a})}function Bs(e){const{inviteTargets:t,...a}=e;return(0,i.jsx)(Es,{title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberForSingleWorkspaceModal.title",defaultMessage:"Upgrade {count} {count, plural, one {guest to member} other {guests to member}}",values:{count:t.length}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberForSingleWorkspaceModal.byline",defaultMessage:"Upgrade following guests to full members for broader workspace access."}),buttonText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberForSingleWorkspaceModal.button.add",defaultMessage:"Upgrade guests"}),inviteTargets:t,inviteRole:"read_and_write",...a})}function Es(e){let{title:t,byline:a,buttonText:n,inviteTargets:o,inviteRole:r,organizationStore:l,refreshPage:d,onDismiss:c,disabledSpaceIds:u,spaceStore:g,bylineWidthOverride:m}=e;const[p,h]=(0,s.useState)(g?[g.id]:[]),{spaceStores:f,loading:x,onSubmit:b}=ks({inviteRole:r,inviteTargets:o,organizationStore:l}),y=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:Y().J2}})),[]);function S(e){h((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function w(){h((e=>{const t=f.length-((null==u?void 0:u.length)??0);return e.length!==t?f.map((e=>e.id)).filter((e=>!(null!=u&&u.includes(e)))):[]}))}async function A(){0!==p.length&&(await b(p),await d(p),c())}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:c,render:()=>(0,i.jsx)(H().tf,{showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{icon:(0,Rt().x)(y.icon),title:t,byline:a,bylineWidthOverride:m}),footer:(0,i.jsx)(Y().jl,{primaryText:n,primaryAction:A,primaryDisabled:0===p.length||x,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:c}),children:(0,i.jsx)("div",{style:y.content,children:g?(0,i.jsx)(Ds,{userIds:o.map((e=>e.value.id)).filter(Ee().O9)}):(0,i.jsx)(Ps().O,{spaceStores:f,selectedSpaceIds:p,onSelect:S,onSelectHeader:w,disabledRowMetadata:{disabledSpaceIds:u??[],disabledByline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.workspacesSelect.workspaceRowDisabledByline",defaultMessage:"Already a member"})}})})})})}a(333225),a(494367),a(516262),a(573119),a(240480),a(950443),a(619601);function Ls(e){let{inviteTargets:t,organizationStore:a}=e;const n=(0,y().v3)(),[o,r]=(0,s.useState)(!1);return{spaceStores:(0,Ts().l)(),loading:o,onSubmit:(0,s.useCallback)((async e=>{r(!0);const s=t.filter((e=>"existingUser"===e.type)).map((e=>e.value.id)).filter(Ee().O9);"success"===(await M().callApi({eventName:"removeUserFromOrganizationSpaces",environment:n,data:{organizationId:a.id,userIds:s,spaceIds:e}})).type&&((0,I().u4)({environment:n,event:{eventName:"org_console_people_remove_users",eventProperties:{organization_id:a.id,space_ids:e,num_users_removed:s.length}}}),1===e.length?lt().D6({label:(0,i.jsx)(v().sA,{id:"workspacesMultiSelect.toastMessage.removeUsers.success.singleWorkspace",defaultMessage:"Successfully removed users from workspace."})}):lt().D6({label:(0,i.jsx)(v().sA,{id:"workspacesMultiSelect.toastMessage.removeUsers.success",defaultMessage:"Successfully removed users from {numWorkspaces, plural, one {{numWorkspaces} workspace} other {{numWorkspaces} workspaces}}.",values:{numWorkspaces:e.length}})})),r(!1)}),[t,n,a.id])}}function Os(e){const{userModel:t,refreshSpaceData:a,guestSpaceIds:n,...o}=e,r=[{type:"existingUser",value:t}],l=(0,s.useCallback)((e=>(e.forEach((e=>a(e))),Promise.resolve())),[a]);return(0,i.jsx)(Ws,{title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsFromWorkspaceModalForSingleUser.title",defaultMessage:"Remove guest access"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsFromWorkspaceModalForSingleUser.byline",defaultMessage:"Choose the workspaces you wish to remove this guest’s access."}),buttonText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsFromWorkspaceModalForSingleUser.button.remove",defaultMessage:"Remove guest access"}),inviteTargets:r,refreshPage:l,spaceIdsToDisplay:n,...o})}function Us(e){let{count:t}=e;return(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.title",defaultMessage:"Remove {count} {count, plural, one {guest} other {guests}} from workspace",values:{count:t}})}function Fs(e){let{count:t}=e;return(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.button.remove",defaultMessage:"Remove {count, plural, one {guest} other {guests}}",values:{count:t}})}function Hs(e){const{permissionsInviteStore:t,organizationGuests:a,...s}=e,n=(0,S().K8)((()=>t.state.inviteTargets),[t]),o=new Set;for(const i of n){const e=a.find((e=>e.userId===i.value.id)),t=e?Object.keys(e.guestPages):[];for(const a of t)o.add(a)}return(0,i.jsx)(Ws,{title:(0,i.jsx)(Us,{count:n.length}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.byline",defaultMessage:"Remove access to all pages within selected workspaces."}),buttonText:(0,i.jsx)(Fs,{count:n.length}),inviteTargets:n,spaceIdsToDisplay:Array.from(o),...s})}function Vs(e){const{inviteTargets:t,...a}=e;return(0,i.jsx)(Ws,{title:(0,i.jsx)(Us,{count:t.length}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsFromSingleWorkspaceModal.byline",defaultMessage:"Remove the following guests from the workspace and revoke all page access."}),buttonText:(0,i.jsx)(Fs,{count:t.length}),inviteTargets:t,...a})}function Ws(e){let{title:t,byline:a,buttonText:n,inviteTargets:o,organizationStore:r,refreshPage:l,onDismiss:d,spaceIdsToDisplay:c,spaceStore:u}=e;const[g,m]=(0,s.useState)(u?[u.id]:[]),{spaceStores:p,loading:h,onSubmit:f}=Ls({inviteTargets:o,organizationStore:r}),x=p.filter((e=>!c||c.includes(e.id))),b=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:Y().J2}})),[]);function y(e){m((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function S(){m((e=>e.length!==x.length?x.map((e=>e.id)):[]))}async function w(){0!==g.length&&(await f(g),await l(g),d())}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:d,render:()=>(0,i.jsx)(H().tf,{showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{icon:Ss(b.icon),title:t,byline:a}),footer:(0,i.jsx)(Y().jl,{primaryText:n,primaryAction:w,primaryDisabled:0===g.length||h,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:d}),children:(0,i.jsx)("div",{style:b.content,children:u?(0,i.jsx)(Ds,{userIds:o.map((e=>e.value.id)).filter(Ee().O9)}):(0,i.jsx)(Ps().O,{spaceStores:x,selectedSpaceIds:g,onSelect:y,onSelectHeader:S})})})})}const qs={viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M14.754 4.125a7.625 7.625 0 1 0-2.052 12.964.625.625 0 0 0-.46-1.162 6.376 6.376 0 1 1 3.672-3.83c-.159.457-.654.778-1.278.778a1.28 1.28 0 0 1-1.28-1.28V7.079a.625.625 0 0 0-1.25 0v.214c-.654-.555-1.496-.839-2.383-.839-.969 0-1.878.338-2.546 1-.672.665-1.058 1.614-1.058 2.751s.385 2.098 1.05 2.778c.665.679 1.575 1.04 2.554 1.04s1.893-.36 2.563-1.037q.075-.074.143-.153a2.53 2.53 0 0 0 2.207 1.292c1.01 0 2.081-.533 2.459-1.618a7.625 7.625 0 0 0-2.341-8.382m-7.385 6.08c0-.846.28-1.46.687-1.862.41-.406.99-.639 1.667-.639s1.266.234 1.683.641c.412.404.697 1.018.697 1.86 0 .844-.286 1.478-.704 1.9-.421.425-1.01.669-1.676.669-.667 0-1.247-.243-1.66-.666-.412-.42-.694-1.056-.694-1.903"})},Gs=(0,o().wt)("at",qs);var Ks=()=>a(35462),Ys=()=>a(472589);function Qs(e){let{selectedEmailDomains:t,setSelectedEmailDomains:a,emailDomains:s,pillTitle:n}=e;const o=(0,S().K8)((()=>s.map((e=>({key:e,value:e,title:(0,i.jsx)(Ks().A,{children:e}),shortTitle:e})))),[s]);return(0,i.jsx)(Ys().VX,{pillTitle:n,pillIcon:Gs,selectedItems:t,setSelectedItems:a,items:o})}function $s(e){let{userId:t,organizationId:a,isHovered:n,usersType:o}=e;const r=(0,v().tz)(),l=(0,s.useMemo)((()=>(0,ls().re)({organizationId:a,tabRoute:x().kr,properties:{subtab:o},queryParams:{userId:t}})),[a,t,o]);return(0,i.jsx)(cs,{isHovered:n,iconFunction:rs().arrowDiagonalUpRightFillIcon,tooltipMessage:r.formatMessage(Xs.viewFullDetail),buttonProps:{href:l,external:!0}})}const Xs=(0,v().YK)({viewFullDetail:{defaultMessage:"View full detail",id:"organization.workspace.members.emailColumn.viewFullDetail"}}),Zs=(0,v().YK)({name:{id:"organization.workspace.guests.nameColumn.header",defaultMessage:"Name"},email:{id:"organization.workspace.guests.emailColumn.header",defaultMessage:"Email"},pages:{id:"organization.workspace.guests.pagesColumn.header",defaultMessage:"Pages"}}),Js={id:"name",headerTitle:(0,i.jsx)(v().sA,{...Zs.name}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(ua,{useThinTitle:!1,userId:e.id}),widthData:{widthPercent:40,minWidth:100},sortable:!1},en={id:"pages",headerTitle:(0,i.jsx)(v().sA,{...Zs.pages}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:120}}):(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.workspace.guests.pagesColumn.pages",defaultMessage:"{count, plural, one {# page} other {# pages}}",values:{count:e.pagesCount}})}),widthData:{widthPercent:20,minWidth:80},sortable:!1},tn={id:"email",headerTitle:(0,i.jsx)(v().sA,{...Zs.email}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(js().xF,{userId:e.id,styles:{overflow:"hidden"}}),widthData:{widthPercent:40,minWidth:100},sortable:!1};function an(e){return{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>t.type===Zt().T.Loading?void 0:(0,i.jsx)($s,{userId:t.id,isHovered:t.isRowHovered,organizationId:e,usersType:"guests"}),widthData:{widthPercent:9,minWidth:36},sortable:!1}}const sn=[{id:Js.id,name:k().A.formatMessage(Zs.name),type:"title"},{id:en.id,name:k().A.formatMessage(Zs.pages),type:"number"},{id:tn.id,name:k().A.formatMessage(Zs.email),type:"text"}];var nn=function(e){return e.RemoveFromWorkspace="remove-from-workspace",e.ConvertToMember="convert-to-member",e}(nn||{});function on(e){let{organizationId:t,spaceStore:a}=e;const n=(0,s.useMemo)((()=>[Js,en,tn,an(t)]),[t]),o=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:n,theme:e,containerMarginTop:0})),[n]),r=qa(),l=(0,_a().E)({organizationId:t}),{rows:d,filters:c,setFilters:u,query:g,setQuery:p,hasNextPage:h,hasPreviousPage:f,loadNextPage:x,loadPreviousPage:b,currentPage:A,sorts:C,setSorts:I,loading:T,reloadPage:k}=function(e){let{spaceId:t,organizationId:a}=e;const n=(0,y().v3)(),[o,i]=(0,s.useState)(As),[r,l]=(0,s.useState)(Ms),d=(0,s.useRef)(void 0),c=(0,s.useCallback)((e=>{i((t=>({...t,filters:e}))),l(Ms)}),[]),u=(0,s.useCallback)((e=>{i((t=>({...t,sorts:e}))),l(Ms)}),[]),g=(0,s.useCallback)((e=>{i((t=>({...t,query:e}))),l(Ms)}),[]);function m(){if(!d.current)return;const e=d.current.offset-at().q;return e<0?void 0:e}const p=(0,s.useCallback)((async e=>{let{cursor:s}=e;try{i((e=>({...e,loading:!0}))),d.current=s;const e=await M().callApi({eventName:"getGuestsInOrganizationSpace",environment:n,data:{organizationId:a,spaceId:t,filters:o.filters,sorts:(r=o.sorts,null==r?void 0:r.map((e=>{let{propertyId:t,direction:a}=e;if("name"===t){return{columnName:"actor",direction:a}}if("email"===t||"pages"===t){return{columnName:t,direction:a}}})).filter(Ee().O9)),query:o.query,cursor:s,limit:at().q},headers:(0,ea().WS)({spaceId:t})});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Ee().HB)(e)}i((t=>({...t,rows:e.data.guests.map((e=>({id:e.userId,pagesCount:e.guestPageCount,isClickable:!0,type:Zt().T.SingleWorkspaceGuest}))),loading:!1,error:void 0,hasNextPage:e.data.hasNextPage,hasPreviousPage:void 0!==m(),nextCursor:e.data.nextCursor})))}catch(l){const e=(0,ws().A)(l);i((t=>({...t,loading:!1,error:e})))}var r}),[n,a,t,o.filters,o.query,o.sorts]),h=(0,s.useCallback)((async()=>{if(o.hasNextPage)return l((e=>e+1)),p({cursor:o.nextCursor})}),[p,o.nextCursor,o.hasNextPage]),f=(0,s.useCallback)((async()=>{const e=m();if(void 0!==e)return l((e=>Math.max(1,e-1))),p({cursor:{offset:e}})}),[p]),x=(0,s.useCallback)((async()=>{await p({cursor:d.current})}),[p]);return(0,s.useEffect)((()=>{p({cursor:void 0})}),[a,p]),{rows:o.rows,filters:o.filters,setFilters:c,query:o.query,setQuery:g,sorts:o.sorts,setSorts:u,hasNextPage:o.hasNextPage,hasPreviousPage:o.hasPreviousPage,loadNextPage:h,loadPreviousPage:f,reloadPage:x,currentPage:r,loading:o.loading}}({organizationId:t,spaceId:a.id}),{memberEmailDomainsForSpace:_}=(0,s.useContext)(R().D),D=(null==_?void 0:_[a.id])??[],{selectedRows:P,handleToggleRow:N,handleSelectAllRows:B,handleUnselectAllRows:E}=Ft({allPossibleRows:d}),[L,O]=(0,s.useState)(),U=(0,s.useCallback)((async()=>{await k(),E()}),[k,E]),F=(0,y().v3)(),H=(0,S().K8)((()=>P.map((e=>new(z().LU)(F,{table:w().oo,id:e.id}).getModel())).filter(Ee().O9).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[F,P]),[V,W]=(0,s.useState)(),[q,G]=(0,s.useState)(!1);return(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.guests.title",defaultMessage:"Guests"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.workspace.guests.byline",defaultMessage:"Manage guests for page-specific access or upgrade them to members for broader permissions across the workspace"})}),(0,i.jsx)("div",{style:r.multiSelect,children:(0,i.jsxs)(Oa,{isOpen:P.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:P.length}}),onClick:E}),(0,i.jsx)(Ua,{icon:Rt().x,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceGuestsTable.multiselect.convertToMember",defaultMessage:"Upgrade to member"}),onClick:()=>O(nn.ConvertToMember)}),(0,i.jsx)(Ua,{icon:Ss,iconSize:20,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceGuestsTable.multiselect.remove",defaultMessage:"Remove from workspace"}),onClick:()=>O(nn.RemoveFromWorkspace)})]})}),(0,i.jsxs)("div",{style:r.actionContainer,children:[(0,i.jsxs)("div",{style:r.filters,children:[(0,i.jsx)(Wa().e,{sortProperties:sn,isMenuOpen:q,setIsMenuOpen:G,onApply:e=>{G(!1),I(e),W(void 0)},currentSorts:V??C??[]}),(0,i.jsx)(Qs,{pillTitle:(0,i.jsx)(v().sA,{id:"organization.workspaceGuestsTable.emailFilter.title",defaultMessage:"Email"}),emailDomains:D,selectedEmailDomains:c.emailDomains||[],setSelectedEmailDomains:e=>{u({...c,emailDomains:e})}})]}),(0,i.jsxs)("div",{style:r.search,children:[(0,i.jsx)(Va().x,{appliedSorts:C,openSortPillMenu:e=>{e&&W([{propertyId:e,direction:"ascending"}]),G(!0)},sortProperties:sn}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:g,setQueryFilter:p})]})]}),(0,i.jsx)(Et().WE,{hideHeaderRowPadding:!0,rows:T?(0,Zt().n)():d,columnRenderInfo:n,styles:o,onRowClick:e=>{e.type!==Zt().T.Loading&&N(e)},renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:m().peopleIcon,title:(0,i.jsx)(v().sA,{id:"workspaceGuestsTable.empty",defaultMessage:"No guests found"}),byline:(0,i.jsx)(v().sA,{id:"workspaceGuestsTable.empty.byline",defaultMessage:"There are no guests that match this query"})}),showRowBorders:!0,multiselect:{header:{isDisabled:T,isSelected:d.length>0&&P.length===d.length,onClick:()=>{P.length===d.length?E():B()}},row:{getDisabledState:()=>T,getSelectedState:e=>P.some((t=>t.id===e.id)),onClick:e=>{e.type!==Zt().T.Loading&&N(e)}}},loadMoreMethod:{type:"pages",onLoadNext:async()=>{await x(),E()},onLoadPrevious:async()=>{await b(),E()},hasNextPage:h,hasPrevPage:f,currentPage:A}}),l&&L===nn.ConvertToMember?(0,i.jsx)(Bs,{inviteTargets:H,organizationStore:l,onDismiss:()=>O(void 0),refreshPage:U,spaceStore:a}):null,l&&L===nn.RemoveFromWorkspace&&(0,i.jsx)(Vs,{inviteTargets:H,organizationStore:l,onDismiss:()=>O(void 0),refreshPage:U,spaceStore:a})]})}const rn={viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M7.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M10 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h7.88v-1.25H5.85c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54.761-1.488 2.672-2.626 5.007-2.626a6.7 6.7 0 0 1 2.255.381 4 4 0 0 1 .036-1.301 8 8 0 0 0-2.291-.33m7.396 4.866v-1.34a2.719 2.719 0 1 0-2.417 0v3.454l1.209 1.058 1.208-1.058-.906-1.057zm-1.907-4.38a.698.698 0 1 1 1.396 0 .698.698 0 0 1-1.396 0"})},ln=(0,o().wt)("personKey",rn);let dn=function(e){return e.WorkspaceMember="workspace-member",e.Loading="loading",e}({});const cn={rows:[],filters:{},query:void 0,sorts:void 0,loading:!1,error:void 0,currentPage:1,hasNextPage:!0,hasPreviousPage:!1};var un=()=>a(77654);const gn=[{id:"workspace-owner",title:(0,i.jsx)(v().sA,{...Cs().Sf.workspaceOwnerLabel}),value:"editor",caption:(0,i.jsx)(v().sA,{...Cs().Sf.workspaceOwnerCaption}),icon:m().peopleIcon},{id:"memberbership-admin",title:(0,i.jsx)(v().sA,{...Cs().Sf.membershipAdminLabel}),value:"membership_admin",caption:(0,i.jsx)(v().sA,{...Cs().Sf.membershipAdminCaption}),icon:un().personCircleFillIcon},{id:"member",title:(0,i.jsx)(v().sA,{...Cs().Sf.memberLabel}),value:"read_and_write",caption:(0,i.jsx)(v().sA,{...Cs().Sf.memberCaption}),icon:p().z}];function mn(e){const{organizationStore:t,onDismiss:a,refreshPage:n,spaceId:o}=e,r=(0,S().K8)((()=>new Pa),[]),[l,d]=(0,s.useState)(o?[o]:[]),c=(0,S().K8)((()=>{var e;const t=r.state.inviteRole;return(null===(e=gn.find((e=>e.value===t)))||void 0===e?void 0:e.id)??gn[0].id}),[r]),u=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:Y().gA,width:Y().J2,overflowY:"auto"}})),[]),{inviteRole:g,inviteTargets:m}=(0,S().K8)((()=>({inviteRole:r.state.inviteRole,inviteTargets:r.state.inviteTargets})),[r]),{spaceStores:p,loading:h,onSubmit:f}=ks({inviteRole:g,inviteTargets:m,organizationStore:t}),x=(0,S().K8)((()=>{const e=l.length>0,t=r.state.inviteTargets.length>0;return!h&&e&&t}),[l,r,h]);function b(e){d((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function y(){d((e=>e.length!==p.length?p.map((e=>e.id)):[]))}function w(e){var t;const a=null===(t=gn.find((t=>t.id===e)))||void 0===t?void 0:t.value;a&&r.setState({...r.state,inviteRole:a})}async function A(){x&&(await f(l),await n(),a())}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:a,areaConstraint:{height:{type:"min",length:400}},render:e=>{let{sizeRange:s}=e;return(0,i.jsx)(H().tf,{showDismissButton:!1,sizeRange:s,header:(0,i.jsx)(Y().rQ,{icon:(0,Rt().x)(u.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.title",defaultMessage:"Add members to workspaces"}),byline:o?(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.byline.space",defaultMessage:"Add the following users to this workspace."}):(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.byline",defaultMessage:"Select members, workspaces, and roles to grant the appropriate access to workspace content, membership management and security controls."})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.button.add",defaultMessage:"Add members"}),primaryAction:A,primaryDisabled:!x,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsxs)("div",{style:u.content,children:[(0,i.jsx)(Ca().A,{disableAutoFocus:!0,showCurrentUser:!0,parentStore:t,permissionsInviteStore:r,performSearchRequest:Ta}),(0,i.jsx)(Y().hr,{selectedId:c,onChange:w,options:gn}),!o&&(0,i.jsx)(Ps().O,{spaceStores:p,selectedSpaceIds:l,onSelect:b,onSelectHeader:y})]})})}})}function pn(e){const{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o,spaceStore:r,membersSpaceIds:l}=e,[d,c]=(0,s.useState)(!1),[u,g]=(0,s.useState)(r?[r.id]:[]),m=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:Y().J2}})),[]),{inviteTargets:p}=(0,S().K8)((()=>({inviteTargets:t.state.inviteTargets})),[t]),{spaceStores:h,onSubmit:f}=Ls({inviteTargets:p,organizationStore:a}),x=h.filter((e=>!l||l.has(e.id)));function b(e){g((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function y(){g((e=>e.length!==x.length?x.map((e=>e.id)):[]))}async function w(){0!==u.length&&(c(!0),await f(u),await o(),n(),c(!1))}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(H().tf,{showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{icon:Ss(m.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.title",defaultMessage:"Remove members from workspace"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.byline",defaultMessage:"Choose workspaces to remove <bold>{count} {count, plural, one {user} other {users}}</bold> from, revoking access to all content.",values:{count:p.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.button.remove",defaultMessage:"Remove {count, plural, one {user} other {users}}",values:{count:p.length}}),primaryAction:w,primaryDisabled:d||0===u.length,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:m.content,children:r?(0,i.jsx)(Ds,{userIds:p.map((e=>e.value.id)).filter(Ee().O9)}):(0,i.jsx)(Ps().O,{spaceStores:x,selectedSpaceIds:u,onSelect:b,onSelectHeader:y})})})})}function hn(e){let{setUserRoles:t,selectedUserRoles:a,roles:s}=e;return(0,i.jsx)(Ys().VX,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.filters.userRole.title",defaultMessage:"Role"}),pillIcon:un().personCircleFillIcon,selectedItems:a,setSelectedItems:t,items:s})}const fn=[{key:"owner",value:"owner",title:(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.owner",defaultMessage:"Workspace owner"})},{key:"membership_admin",value:"membership_admin",title:(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.membershipAdmin",defaultMessage:"Membership admin"})},{key:"member",value:"member",title:(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.member",defaultMessage:"Member"})}],xn=[{key:"organizationOwner",value:"organization_owner",title:(0,i.jsx)(v().sA,{id:"organizationMembers.table.filters.userRole.organizationOwner",defaultMessage:"Organization owner"}),wrapCaption:!0},...fn];var vn=()=>a(524118);function bn(e){let{organizationId:t,userIds:a}=e;const n=(0,y().v3)(),o=(0,v().tz)(),{updateCacheWithRecordMap:i}=(0,s.useContext)(N().N);return(0,s.useCallback)((async(e,s)=>{const r=await M().callApi({eventName:"updateUserRoleInOrganizationSpace",environment:n,data:{organizationId:t,userIds:a,newRole:s,spaceId:e}});"success"===r.type?(lt().D6({label:o.formatMessage(yn.changeRolesSuccess)}),i({data:r.data})):C().f1((0,T().Hu)(k().A.getIntl(),r))}),[n,o,t,i,a])}const yn=(0,v().YK)({addUserSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.addUser",defaultMessage:"Successfully added user to space"},changeRoleSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.changeRole",defaultMessage:"Successfully updated user's role in space"},changeRolesSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.changeRoles",defaultMessage:"Successfully updated users' roles in space"}});function Sn(e){const{permissionsInviteStore:t,onDismiss:a,refreshPage:s,spaceStore:n,organizationStore:o}=e,r=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:Y().J2}})),[]),{inviteTargets:l}=(0,S().K8)((()=>({inviteTargets:t.state.inviteTargets})),[t]),d=bn({organizationId:o.id,userIds:l.map((e=>e.value.id)).filter(Ee().O9)});async function c(){await d(n.id,"member"),await s(),a()}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(H().tf,{showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{icon:Ss(r.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersToMemberModal.title",defaultMessage:"Demote {count} {count, plural, one {user} other {users}} to member",values:{count:l.length}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersToMemberModal.byline",defaultMessage:"Downgrade these users to members."})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersToMemberModal.button.demote",defaultMessage:"Demote"}),primaryAction:c,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersToMemberModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:r.content,children:(0,i.jsx)(Ds,{userIds:l.map((e=>e.value.id)).filter(Ee().O9)})})})})}function jn(e){const{permissionsInviteStore:t,onDismiss:a,refreshPage:s,organizationStore:n,spaceStore:o}=e,r=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:Y().J2}})),[]),{inviteTargets:l}=(0,S().K8)((()=>({inviteTargets:t.state.inviteTargets})),[t]),d=bn({organizationId:n.id,userIds:l.map((e=>e.value.id)).filter(Ee().O9)});async function c(){await d(o.id,"owner"),await s(),a()}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(H().tf,{showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{icon:ln(r.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.title",defaultMessage:"Promote {count} {count, plural, one {user} other {users}} to workspace owner",values:{count:l.length}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.byline",defaultMessage:"Grant workspace owner access to these users."})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.button.promote",defaultMessage:"Promote"}),primaryAction:c,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:r.content,children:(0,i.jsx)(Ds,{userIds:l.map((e=>e.value.id)).filter(Ee().O9)})})})})}const wn=new Array(at().q).fill(0).map(((e,t)=>({id:`loading-${t}`,isClickable:!1,type:dn.Loading}))),An=(0,v().YK)({name:{id:"organization.workspace.members.nameColumn.header",defaultMessage:"Name"},email:{id:"organization.workspace.members.emailColumn.header",defaultMessage:"Email"},role:{id:"organization.workspace.members.roleColumn.header",defaultMessage:"Role"}}),Mn={id:"name",headerTitle:(0,i.jsx)(v().sA,{...An.name}),renderCell:e=>e.type===dn.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(ua,{useThinTitle:!1,userId:e.id}),widthData:{widthPercent:33,minWidth:100},sortable:!1},Cn={id:"role",headerTitle:(0,i.jsx)(v().sA,{...An.role}),renderCell:e=>{if(e.type===dn.Loading)return(0,i.jsx)(Lt().mf,{containerStyles:{width:120}});let t=(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.member",defaultMessage:"Member"});switch(e.role){case"owner":t=(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.owner",defaultMessage:"Workspace owner"});break;case"membership_admin":t=(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.membershipAdmin",defaultMessage:"Membership admin"})}return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t})},widthData:{widthPercent:25,minWidth:80},sortable:!1},In={id:"email",headerTitle:(0,i.jsx)(v().sA,{...An.email}),renderCell:e=>e.type===dn.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(js().xF,{userId:e.id,styles:{overflow:"hidden"}}),widthData:{widthPercent:33,minWidth:100},sortable:!1};function Tn(e){return{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>t.type===dn.Loading?void 0:(0,i.jsx)($s,{userId:t.id,isHovered:t.isRowHovered,organizationId:e,usersType:"members"}),widthData:{widthPercent:9,minWidth:36},sortable:!1}}const kn=[{id:Mn.id,name:k().A.formatMessage(An.name),type:"title"},{id:Cn.id,name:k().A.formatMessage(An.role),type:"title"},{id:In.id,name:k().A.formatMessage(An.email),type:"number"}];function _n(e){let{organizationId:t,spaceStore:a}=e;const n=(0,_a().E)({organizationId:t}),o=(0,s.useMemo)((()=>[Mn,Cn,In,Tn(t)]),[t]),r=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:o,theme:e,containerMarginTop:0})),[o]),l=qa(),{rows:d,filters:c,setFilters:u,query:g,setQuery:p,hasNextPage:h,hasPreviousPage:f,loadNextPage:x,loadPreviousPage:b,currentPage:A,sorts:C,setSorts:I,loading:T,reloadPage:k}=function(e){let{spaceId:t,organizationId:a}=e;const n=(0,y().v3)(),{updateCacheWithRecordMap:o}=(0,s.useContext)(N().N),[i,r]=(0,s.useState)(cn),l=(0,s.useCallback)((e=>{r((t=>({...t,filters:e,currentPage:cn.currentPage})))}),[]),d=(0,s.useCallback)((e=>{r((t=>({...t,sorts:e,currentPage:cn.currentPage})))}),[]),c=(0,s.useCallback)((e=>{r((t=>({...t,query:e,currentPage:cn.currentPage})))}),[]),u=(0,s.useCallback)((async e=>{let{cursor:s}=e;try{r((e=>({...e,loading:!0})));const e=await M().callApi({eventName:"getMembersInOrganizationSpace",environment:n,data:{organizationId:a,spaceId:t,filters:i.filters,sorts:(l=i.sorts,null==l?void 0:l.map((e=>{let{propertyId:t,direction:a}=e;return"name"===t?{columnName:"actor",direction:a}:"role"===t?{columnName:"role",direction:a}:void 0})).filter(Ee().O9)),query:i.query,cursor:s,limit:at().q},headers:(0,ea().WS)({spaceId:t})});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Ee().HB)(e)}o({data:e.data}),r((t=>{let a=t.currentPage;return e.data.hasPreviousPage?null!=s&&s.previousCursorId?a-=1:null!=s&&s.nextCursorId&&(a+=1):a=cn.currentPage,{...t,rows:e.data.members.filter((e=>"none"!==e.spaceRole&&"page_guest"!==e.spaceRole)).map((e=>({id:e.userId,role:e.spaceRole,isClickable:!0,type:dn.WorkspaceMember}))),loading:!1,error:void 0,hasNextPage:e.data.hasNextPage,hasPreviousPage:e.data.hasPreviousPage,currentPage:a}}))}catch(d){const e=(0,ws().A)(d);r((t=>({...t,loading:!1,error:e})))}var l}),[n,a,t,o,i.filters,i.query,i.sorts]),g=(0,s.useCallback)((async e=>{await u({cursor:{nextCursorId:e}})}),[u]),m=(0,s.useCallback)((async e=>{await u({cursor:{previousCursorId:e}})}),[u]),p=(0,s.useCallback)((async e=>{await u({cursor:{currentCursorId:e}})}),[u]);return(0,s.useEffect)((()=>{u({cursor:void 0})}),[a,u]),{rows:i.rows,filters:i.filters,setFilters:l,query:i.query,setQuery:c,sorts:i.sorts,setSorts:d,hasNextPage:i.hasNextPage,hasPreviousPage:i.hasPreviousPage,loadNextPage:g,loadPreviousPage:m,reloadPage:p,currentPage:i.currentPage,loading:i.loading}}({organizationId:t,spaceId:a.id}),{memberEmailDomainsForSpace:_}=(0,s.useContext)(R().D),D=(null==_?void 0:_[a.id])??[],{selectedRows:P,handleToggleRow:B,handleSelectAllRows:E,handleUnselectAllRows:L}=Ft({allPossibleRows:d}),[O,U]=(0,s.useState)({isOpen:!1}),[F,H]=(0,s.useState)(),[V,q]=(0,s.useState)(!1),G=(0,s.useCallback)((async()=>{var e;await k(null===(e=d[0])||void 0===e?void 0:e.id),L()}),[d,k,L]),K=(0,S().K8)((()=>new Pa),[]),Y=(0,y().v3)(),Q=(0,S().K8)((()=>P.map((e=>new(z().LU)(Y,{table:w().oo,id:e.id}).getModel())).filter(Ee().O9).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[Y,P]);return(0,s.useEffect)((()=>{K.setState({...K.state,inviteTargets:Q,isInviteTargetsEmpty:!1})}),[K,Q]),(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.members.title",defaultMessage:"Members"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.workspace.members.byline",defaultMessage:"Add, remove, or change member roles to manage access and collaboration in your workspace"})}),(0,i.jsx)("div",{style:l.multiSelect,children:(0,i.jsxs)(Oa,{isOpen:P.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:P.length}}),onClick:L}),(0,i.jsx)(Ua,{disabled:P.some((e=>"owner"===e.role)),disabledTooltipText:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.promote.disabledTooltip",defaultMessage:"Cannot promote users that are already owners"}),icon:ln,iconSize:20,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.promote",defaultMessage:"Promote to workspace owner"}),onClick:()=>U({isOpen:!0,modalType:"promoteToWorkspaceOwner",userIds:P.map((e=>e.id))})}),(0,i.jsx)(Ua,{disabled:P.some((e=>"member"===e.role)),disabledTooltipText:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.demote.disabledTooltip",defaultMessage:"Cannot demote users that are already members"}),icon:Ss,iconSize:20,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.demote",defaultMessage:"Demote to member"}),onClick:()=>U({isOpen:!0,modalType:"demoteToMember",userIds:P.map((e=>e.id))})}),(0,i.jsx)(Ua,{icon:Ss,iconSize:20,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.remove",defaultMessage:"Remove from workspace"}),onClick:()=>U({isOpen:!0,modalType:"removeFromWorkspace",userIds:P.map((e=>e.id))})})]})}),(0,i.jsxs)("div",{style:l.actionContainer,children:[(0,i.jsxs)("div",{style:l.filters,children:[(0,i.jsx)(Wa().e,{sortProperties:kn,isMenuOpen:V,setIsMenuOpen:q,onApply:e=>{q(!1),I(e),H(void 0)},currentSorts:F??C??[]}),(0,i.jsx)(hn,{setUserRoles:e=>u({...c,roles:e}),selectedUserRoles:c.roles||[],roles:fn}),(0,i.jsx)(Qs,{pillTitle:(0,i.jsx)(v().sA,{id:"organization.workspaceMembersTable.emailFilter.title",defaultMessage:"Email"}),emailDomains:D,selectedEmailDomains:c.emailDomains||[],setSelectedEmailDomains:e=>{u({...c,emailDomains:e})}})]}),(0,i.jsxs)("div",{style:l.search,children:[(0,i.jsx)(Va().x,{appliedSorts:C,openSortPillMenu:e=>{e&&H([{propertyId:e,direction:"ascending"}]),q(!0)},sortProperties:kn}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:g,setQueryFilter:p})]}),(0,i.jsx)(W().A,{onClick:()=>U({isOpen:!0,modalType:"addMembers"}),children:(0,i.jsx)(v().sA,{defaultMessage:"Add members",id:"organization.workspaceMembersTable.addMemberButton"})})]}),(0,i.jsx)(Et().WE,{hideHeaderRowPadding:!0,rows:T?wn:d,columnRenderInfo:o,styles:r,onRowClick:e=>{e.type!==dn.Loading&&B(e)},renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:m().peopleIcon,title:(0,i.jsx)(v().sA,{id:"workspaceMembersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(v().sA,{id:"workspaceMembersTable.empty.byline",defaultMessage:"There are no members that match this query"})}),showRowBorders:!0,multiselect:{header:{isDisabled:T,isSelected:d.length>0&&P.length===d.length,onClick:()=>{P.length===d.length?L():E()}},row:{getDisabledState:()=>T,getSelectedState:e=>P.some((t=>t.id===e.id)),onClick:e=>{e.type!==dn.Loading&&B(e)}}},loadMoreMethod:{type:"pages",onLoadNext:async()=>{await x(d[d.length-1].id),L()},onLoadPrevious:async()=>{await b(d[0].id),L()},hasNextPage:h,hasPrevPage:f,currentPage:A}}),n&&O.isOpen&&"addMembers"===O.modalType&&(0,i.jsx)(mn,{organizationStore:n,onDismiss:()=>U({isOpen:!1}),refreshPage:G,spaceId:a.id}),n&&O.isOpen&&"promoteToWorkspaceOwner"===O.modalType&&(0,i.jsx)(jn,{permissionsInviteStore:K,onDismiss:()=>U({isOpen:!1}),refreshPage:G,organizationStore:n,spaceStore:a}),n&&O.isOpen&&"demoteToMember"===O.modalType&&(0,i.jsx)(Sn,{permissionsInviteStore:K,organizationStore:n,onDismiss:()=>U({isOpen:!1}),refreshPage:G,spaceStore:a}),n&&O.isOpen&&"removeFromWorkspace"===O.modalType&&(0,i.jsx)(pn,{permissionsInviteStore:K,organizationStore:n,onDismiss:()=>U({isOpen:!1}),refreshPage:G,spaceStore:a})]})}var zn=()=>a(540389),Dn=()=>a(685008);function Pn(e){switch(e){case"editor":return"owner";case"membership_admin":return"membership_admin";default:return"member"}}function Nn(e){switch(e.role){case"owner":return 1;case"membership_admin":return 2;default:return 3}}function Rn(e){if(!e.accessLevel)return 4;switch(e.accessLevel){case"open":return 1;case"closed":return 2;case"private":return 3;default:(0,Ee().HB)(e.accessLevel)}}var Bn=()=>a(700896);const En=at().q,Ln=[{propertyId:"name",direction:"ascending"}];function On(e){const t=(0,s.useMemo)((()=>[e]),[e]),{teamStores:a,loading:n}=(0,B().o)(t),{teamAggregateDataForSpace:o,loading:i}=(0,Bn().N)(t),r=n||i,[l,d]=(0,s.useState)(),[c,u]=(0,s.useState)(""),[g,m]=(0,s.useState)(0),p=o[e],h=(0,S().K8)((()=>(a[e]??[]).map((t=>{const a=null==p?void 0:p[t.id];return{id:t.id,spaceId:e,teamStore:t,teamName:t.getName()??"",teamIcon:t.getIcon(),ownerIds:t.getAllOwnerIds(),memberCount:(null==a?void 0:a.memberCountWithGuests)??0,accessLevel:t.getTeamAccessLevel(),isDefault:t.isDefault(),isClickable:!1,type:Zt().T.SingleWorkspaceTeam}}))),[p,a,e]),f=(0,s.useMemo)((()=>{const e=null!=l&&l.length?l:Ln;return function(e){let{rows:t,appliedSorts:a}=e;const s=a.map((e=>{let{propertyId:t}=e;return t===vo.id?"memberCount":t===xo.id?Rn:e=>e.teamName.toLowerCase()})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Ee().HB)(t)}));return et().My(t,s,n)}({rows:h,appliedSorts:e})}),[h,l]),x=(0,s.useMemo)((()=>c?(0,ht().Ay)(c,f,(e=>e.teamName)):f),[c,f]),v=(0,s.useMemo)((()=>{const e=g*En,t=e+En;return x.slice(e,t)}),[x,g]);(0,s.useEffect)((()=>{m(0)}),[c]);const b=(0,s.useMemo)((()=>(g+1)*En<x.length),[x,g]),y=g>0;return{rows:v,loadNextPage:(0,s.useCallback)((()=>{b&&m((e=>e+1))}),[b]),loadPrevPage:(0,s.useCallback)((()=>{y&&m((e=>e-1))}),[y]),hasNextPage:b,hasPrevPage:y,currentPageIndex:g,appliedSorts:l,setAppliedSorts:d,query:c,setQuery:u,loading:r}}var Un=()=>a(500418),Fn=()=>a(634369),Hn=()=>a(196808),Vn=()=>a(427240),Wn=()=>a(611948),qn=()=>a(651873);function Gn(e){let{organizationId:t,spaceStore:a,owner:n,onDismiss:o,onSubmit:r}=e;const l=(0,y().v3)(),d=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{width:Y().J2,display:"flex",flexDirection:"column",gap:Y().gA},input:{paddingTop:6,paddingBottom:6}})),[]);function c(){Wn().A.reset(),o()}const u=(0,v().tz)(),[g,m]=(0,s.useState)(!1),[p,h]=(0,s.useState)([]),f=(0,S().K8)((()=>""===Wn().A.state.name||!(n||p.length)||g),[g,n,p]),x=(0,s.useCallback)((()=>{w(!0)}),[]),[b,w]=(0,s.useState)(!1);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:c,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,Vn().peopleFillIcon)(d.icon),title:(0,i.jsx)(v().sA,{id:"organization.team.settings.createTeam.modal.title",defaultMessage:"Create a new teamspace"}),byline:(0,i.jsx)(v().sA,{id:"organization.team.settings.createTeam.modal.byline",defaultMessage:"Create a teamspace to organize your teams pages, permissions, and members. Customize the name, icon, and default permission to get started."})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.team.settings.createTeam.modal.primaryAction",defaultMessage:"Create teamspace"}),primaryAction:async()=>{m(!0),await async function(){if(!n&&!p.length)return;const{name:e,icon:s,description:o,accessLevel:i}=Wn().A.state,d=n?[n]:p.map((e=>"user"===e.type?{entity_type:e.type,user_id:e.userId,type:"owner"}:"group"===e.type?{entity_type:e.type,group_id:e.groupId,type:"owner"}:void(0,Ee().HB)(e)));"success"===(await M().callApi({eventName:"createTeamInOrganizationSpace",environment:l,data:{organizationId:t,spaceId:a.id,name:e,icon:s,description:o,accessLevel:i,members:d}})).type&&(0,I().u4)({environment:l,event:{eventName:"org_console_general_create_entity",eventProperties:{entity:"team",organization_id:t,space_id:a.id}}}),c(),r&&r()}(),m(!1)},primaryDisabled:f,secondaryText:(0,i.jsx)(v().sA,{id:"organization.team.settings.createTeam.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:c}),children:(0,i.jsxs)("div",{style:d.content,children:[(0,i.jsx)("div",{children:(0,i.jsx)(qn().TeamIconAndNameRow,{parentSpaceStore:a,hasMarginTop:!1,inputStyles:d.input})}),(0,i.jsx)("div",{children:(0,i.jsx)(qn().TeamDescriptionRow,{hasMarginTop:!1})}),(0,i.jsx)("div",{children:(0,i.jsx)(qn().AccessLevelSection,{parentSpaceStore:a,hasMarginTop:!1})}),!n&&(0,i.jsxs)("div",{children:[(0,i.jsx)(K().A,{children:(0,i.jsx)(v().sA,{id:"organization.team.settings.createTeam.modal.ownersLabel",defaultMessage:"Teamspace owners"})}),(0,i.jsx)(as,{spaceStore:a,isOpen:b,onDismiss:()=>w(!1),onClick:x,includeGroups:!0,selectedValues:p,setSelectedValues:h,inputPlaceholder:u.formatMessage(Kn.ownersPlaceholder)})]})]})})})}const Kn=(0,v().YK)({ownersPlaceholder:{id:"spaceMembersInput.owners.placeholder",defaultMessage:"No owners yet"}});var Yn=()=>a(953739);function Qn(e){let{setAccessLevels:t,selectedAccessLevels:a}=e;return(0,i.jsx)(Ys().VX,{pillTitle:(0,i.jsx)(v().sA,{id:"organization.filters.teamAccessLevel.title",defaultMessage:"Access"}),pillIcon:g().h,selectedItems:a,setSelectedItems:t,items:$n})}const $n=[{key:"open",value:"open",title:(0,i.jsx)(v().sA,{id:"organization.table.filters.access.open",defaultMessage:"Open"})},{key:"closed",value:"closed",title:(0,i.jsx)(v().sA,{id:"organization.table.filters.access.closed",defaultMessage:"Closed"})},{key:"private",value:"private",title:(0,i.jsx)(v().sA,{id:"organization.table.filters.access.private",defaultMessage:"Private"})}];var Xn=()=>a(424339);function Zn(e){let{organizationId:t,onDismiss:a,groupStore:n,teamStores:o}=e;const r=(0,y().v3)(),l=(0,v().tz)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(N().N),{loadTeamsForSpace:c}=(0,s.useContext)(R().D),[u,g]=(0,s.useState)(!1),m=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:440}})),[]);async function p(){g(!0);const e=n.getSpaceId(),s=n.getGroupId(),i=o.map((e=>e.id));if(!e||!s)return void g(!1);const u=await M().callApi({eventName:"updateGroupsInOrganizationSpace",environment:r,data:{organizationId:t,spaceId:e,groupIds:[s],removeTeams:i}});"success"===u.type?(d({data:u.data}),await c(e,!0),a(),g(!1),(0,I().u4)({environment:r,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:e,update_type:"remove_from_team"}}})):C().f1((0,T().Hu)(l,u))}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(H().tf,{showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{icon:Ss(m.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.title",defaultMessage:"Remove group from {count} {count, plural, one {teamspace} other {teamspaces}}",values:{count:o.length}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.byline",defaultMessage:"Remove this group from the following teamspaces."})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.button.remove",defaultMessage:"Remove from {count, plural, one {teamspace} other {teamspaces}}",values:{count:o.length}}),primaryAction:p,primaryDisabled:u,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:m.content,children:(0,i.jsx)(Jn,{teamStores:o})})})})}function Jn(e){const{teamStores:t}=e,[a,n]=(0,s.useState)(""),o=(0,S().K8)((()=>t.map((e=>({id:e.id,icon:(0,i.jsx)(Xn().x,{disabled:!0,store:e,size:24}),name:e.getName(),byline:(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.pagesList.item.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.getRawMembership().length}})})})))),[t]),r=(0,ht().Ay)(a,o,(e=>e.name??""));return(0,i.jsx)(Y().p6,{items:r,titleText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.pagesList.title",defaultMessage:"Selected teamspaces"}),headerText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.pagesList.header",defaultMessage:"Teamspaces"}),headerAction:(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:a,setQueryFilter:n})})}const eo=(0,v().YK)({name:{id:"organization.group.teamspaces.nameColumn.header",defaultMessage:"Name"},owners:{id:"organization.group.teamspaces.ownersColumn.header",defaultMessage:"Owners"},access:{id:"organization.group.teamspaces.accessColumn.header",defaultMessage:"Access"}}),to={id:"name",headerTitle:(0,i.jsx)(v().sA,{...eo.name}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(a(942415).o,{showMemberCount:!0,iconSize:28,teamStore:e.teamStore,memberCountOverride:e.memberCount}),widthData:{widthPercent:33,minWidth:100},sortable:!1},ao={id:"owners",headerTitle:(0,i.jsx)(v().sA,{...eo.owners}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(lo,{ownerIds:e.ownerIds,spaceId:e.spaceId}),widthData:{widthPercent:33,minWidth:100},sortable:!1},so={id:"access",headerTitle:(0,i.jsx)(v().sA,{...eo.access}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:120}}):function(e){let t=(0,i.jsx)(v().sA,{id:"organization.workspace.teamspaces.accessColumn.unknown",defaultMessage:"Unknown"});switch(e){case"open":t=(0,i.jsx)(v().sA,{id:"organization.workspace.teamspaces.accessColumn.open",defaultMessage:"Open"});break;case"closed":t=(0,i.jsx)(v().sA,{id:"organization.workspace.teamspaces.accessColumn.closed",defaultMessage:"Closed"});break;case"private":t=(0,i.jsx)(v().sA,{id:"organization.workspace.teamspaces.accessColumn.private",defaultMessage:"Private"})}return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t})}(e.accessLevel),widthData:{widthPercent:33,minWidth:100},sortable:!1},no=[{id:to.id,name:k().A.formatMessage(eo.name),type:"title"},{id:so.id,name:k().A.formatMessage(eo.access),type:"title"}],oo=[to,ao,so];var io=function(e){return e.CreateNewTeamspace="create-new-teamspace",e.RemoveGroupFromTeam="remove-from-group",e}(io||{});function ro(e){let{organizationId:t,groupStore:a,teamsState:n}=e;const{loadTeamsForSpace:o}=(0,s.useContext)(R().D),r=(0,Hn().F)(),l=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:oo,theme:e,containerMarginTop:0})),[]),d=(0,S().K8)((()=>{const e=a.getGroupId();return e?{type:"owner",entity_type:"group",group_id:e}:void 0}),[a]),c=(0,S().K8)((()=>a.getSpaceStore()),[a]),u=(0,s.useMemo)((()=>{const e=a.getSpaceId();return e?[e]:[]}),[a]),{teamAggregateDataForSpace:g}=(0,Bn().N)(u),p=(0,S().K8)((()=>null==g?void 0:g[a.getSpaceId()]),[g,a]),h=(0,S().K8)((()=>n.teamStores.map((e=>{var t;return{type:Zt().T.OrganizationGroupMember,id:e.id,name:e.getName(),spaceId:e.getSpaceId(),teamId:e.id,teamStore:e,ownerIds:e.getAllOwnerIds(),accessLevel:e.getTeamAccessLevel(),memberCount:null==p||null===(t=p[e.id])||void 0===t?void 0:t.memberCountWithGuests,isClickable:!0}}))),[n,p]),[f,x]=(0,s.useState)(),[b,y]=(0,s.useState)({}),[w,A]=(0,s.useState)(),[M,C]=(0,s.useState)(!1),[I,T]=(0,s.useState)(),k=I??w??[],_=(0,s.useMemo)((()=>{if(!h)return[];let e=h;return b.query&&(e=(0,ht().Ay)(b.query,e,(e=>e.name||""))),b.accessLevels&&b.accessLevels.length>0&&(e=e.filter((e=>{var t;const a=e.accessLevel;return!!a&&(null===(t=b.accessLevels)||void 0===t?void 0:t.includes(a))}))),function(e){const{rows:t,appliedSorts:a}=e,s=null!=a&&a.length?a:[{propertyId:so.id,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===so.id?Rn:t===to.id?"name":Rn})),o=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Ee().HB)(t)}));return(0,et().My)(t,n,o)}({rows:e,appliedSorts:w})}),[h,b.accessLevels,b.query,w]),z=Math.max(1,Math.floor(_.length/at().q)),[D,P]=(0,s.useState)(0),N=_.slice(D*at().q,(D+1)*at().q),B=at().q*(D+1)<_.length,E=D>0;const{selectedRows:L,handleToggleRow:O,handleSelectAllRows:U,handleUnselectAllRows:F}=Ft({allPossibleRows:N});return(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:(0,i.jsx)(v().sA,{id:"organization.groups.modal.teamspaces.title",defaultMessage:"Teamspaces"}),byline:(0,i.jsx)(v().sA,{id:"organization.groups.modal.teamspaces.byline",defaultMessage:"Add and remove teamspaces from this group to manage access across this workspace"})}),(0,i.jsxs)("div",{style:r.tableHeader,children:[(0,i.jsxs)("div",{style:r.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:L.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.group.teamspacesTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:L.length}}),onClick:F}),(0,i.jsx)(Ua,{icon:Ss,title:(0,i.jsx)(v().sA,{id:"organization.group.teamspacesTable.multiselect.remove",defaultMessage:"Remove group from teamspace"}),onClick:()=>x(io.RemoveGroupFromTeam)})]}),(0,i.jsx)(Fn().A,{children:(0,i.jsx)(Wa().e,{sortProperties:no,isMenuOpen:M,setIsMenuOpen:C,onApply:e=>{C(!1),A(e),T(void 0)},currentSorts:k})}),k.length>0?(0,i.jsx)(Un().he,{}):null,(0,i.jsx)(Qn,{setAccessLevels:e=>y((t=>({...t,accessLevels:e}))),selectedAccessLevels:b.accessLevels||[]})]}),(0,i.jsxs)("div",{style:r.rightContent,children:[(0,i.jsx)(Va().x,{appliedSorts:w,openSortPillMenu:e=>{e&&T([{propertyId:e,direction:"ascending"}]),C(!0)},sortProperties:no}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:b.query,setQueryFilter:e=>{y((t=>({...t,query:e})))}}),(0,i.jsx)(W().A,{onClick:()=>{x(io.CreateNewTeamspace)},children:(0,i.jsx)(v().sA,{id:"organizationTeamspacesSubTab.button.createTeamspace",defaultMessage:"Create teamspace"})})]})]}),(0,i.jsx)(Et().WE,{hideHeaderRowPadding:!0,rows:n.loading?(0,Zt().n)():N,columnRenderInfo:oo,styles:l,onRowClick:e=>{e.type!==Zt().T.Loading&&O(e)},renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:m().peopleIcon,title:(0,i.jsx)(v().sA,{id:"teamsTable.empty",defaultMessage:"No teamspaces found"}),byline:(0,i.jsx)(v().sA,{id:"teamsTable.empty.byline",defaultMessage:"There are no teams that match this query"})}),showRowBorders:!0,multiselect:{header:{isDisabled:n.loading,isSelected:N.length>0&&L.length===N.length,onClick:()=>{L.length===N.length?F():U()}},row:{getDisabledState:()=>n.loading,getSelectedState:e=>L.some((t=>t.id===e.id)),onClick:e=>{e.type!==Zt().T.Loading&&O(e)}}},loadMoreMethod:{type:"pages",onLoadNext:()=>{P((e=>B?e+1:e)),F()},onLoadPrevious:()=>{P((e=>Math.max(e-1,0))),F()},hasNextPage:B,hasPrevPage:E,currentPage:D+1,finalPage:z}}),f===io.RemoveGroupFromTeam?(0,i.jsx)(Zn,{organizationId:t,onDismiss:()=>{x(void 0),F()},groupStore:a,teamStores:L.map((e=>e.teamStore))}):null,f===io.CreateNewTeamspace&&c?(0,i.jsx)(Gn,{organizationId:t,spaceStore:c,owner:d,onDismiss:()=>{x(void 0)},onSubmit:()=>{o(c.id,!0)}}):null]})}function lo(e){const t=(0,Gt().A)(),s=(0,y().v3)(),{ownerIds:n,spaceId:o}=e,r=Object.values(n).flat().length,l=(0,S().K8)((()=>n.ownerUserIds.map((e=>new(z().LU)(s,{table:w().oo,id:e})))),[n.ownerUserIds,s]),d=ja(o).filter((e=>{let{group:t}=e;return n.ownerGroupIds.includes(t.group_id)})),c=l.map((e=>({renderAvatar:()=>(0,i.jsx)(da().A,{userStore:e,size:Yn().tR,avatarShouldShowShadow:!1,iconStyle:{fontSize:12},showAvatarInTooltip:!0,hasTooltip:!0,type:"avatar"},e.id)}))),u=d.map((e=>({renderAvatar:()=>(0,i.jsx)(a(709582).h,{permissionGroup:e,hasTooltip:!0,type:"avatar"})})));return(0,i.jsx)(Yn().Qp,{avatarStyles:t.roundAvatarBorder,avatars:c.concat(u),totalCount:r,isLoading:!1,renderOverflowTooltip:()=>(0,i.jsx)(a(659490).A,{userStores:l,permissionGroups:d})})}function co(e){let{organizationId:t,spaceId:a,teams:n,onDismiss:o,onSubmit:r}=e;const l=(0,y().v3)(),d=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},content:{width:Y().J2}})),[]),[c,u]=(0,s.useState)(!1);async function g(){if(c)return;u(!0);const e=await M().callApi({eventName:"deleteTeamsInOrganization",environment:l,data:{organizationId:t,spaceId:a,teamIds:n.map((e=>e.teamStore.id))}});"success"===e.type?(o(),r&&r(),(0,I().u4)({environment:l,event:{eventName:"org_console_general_delete_entity",eventProperties:{entity:"team",organization_id:t,space_id:a,num_removed:n.length}}})):"failed"===e.type&&C().f1((0,T().Hu)(k().A.getIntl(),e)),u(!1)}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,Bt().trashIcon)(d.icon),title:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.title",defaultMessage:"Are you sure you want to archive {teamCount, plural, one {this teamspace} other {these teamspaces}}?",values:{teamCount:n.length}}),byline:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.byline",defaultMessage:"This action cannot be undone."})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.primaryAction",defaultMessage:"Archive {teamCount, plural, one {teamspace} other {teamspaces}}",values:{teamCount:n.length}}),primaryAction:g,primaryDisabled:c,secondaryText:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:o,isDarkRed:!0,isLoading:c}),children:(0,i.jsx)("div",{style:d.content,children:(0,i.jsx)(uo,{teams:n})})})})}function uo(e){const{teams:t}=e,[a,n]=(0,s.useState)(""),o=(0,S().K8)((()=>t.map((e=>{let{teamStore:t,memberCount:a}=e;return{id:t.id,icon:(0,i.jsx)(Xn().x,{disabled:!0,store:t,size:24}),name:t.getName(),byline:(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.teamsList.item.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:a}})})}}))),[t]),r=(0,ht().Ay)(a,o,(e=>e.name??""));return(0,i.jsx)(Y().p6,{items:r,titleText:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.teamsList.title",defaultMessage:"Selected teamspaces"}),headerText:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.teamsList.header",defaultMessage:"Teamspaces ({teamCount})",values:{teamCount:t.length}}),headerAction:(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:a,setQueryFilter:n})})}function go(e){let{organizationId:t,spaceStore:a,teams:n,onDismiss:o,onSubmit:r}=e;const l=(0,y().v3)(),d=(0,v().tz)(),c=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:Y().gA,width:Y().J2,overflowY:"auto"}})),[]),[u,g]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[h,f]=(0,s.useState)([]),x=(0,s.useCallback)((()=>{g(!0)}),[]);async function b(){if(m)return;p(!0);const e=n.map((e=>e.teamStore.id)),s=await M().callApi({eventName:"updateMembersInTeamsInOrganization",environment:l,data:{organizationId:t,spaceId:a.id,teamIds:e,addMembers:h.map((e=>"user"===e.type?{type:"member",entity_type:"user",user_id:e.userId}:"group"===e.type?{type:"member",entity_type:"group",group_id:e.groupId}:void(0,Ee().HB)(e)))}});"success"===s.type?(o(),r&&r(),(0,I().u4)({environment:l,event:{eventName:"org_console_general_update_team_members_in_space",eventProperties:{organization_id:t,space_id:a.id,team_ids:e,num_added:h.length}}})):"failed"===s.type&&C().f1((0,T().Hu)(k().A.getIntl(),s)),p(!1)}const w=(0,S().K8)((()=>n[0].teamStore.getName()),[n]);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,Rt().x)(c.icon),title:(0,i.jsx)(v().sA,{id:"organization.team.settings.addTeamMembers.title",defaultMessage:"Add members to <gray>{teamCount, plural, one {{teamName}} other {# teamspaces}}</gray>",values:{teamCount:n.length,teamName:w,gray:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.jsx)(D().D,{colorName:"secondary",as:"span",children:t})}}}),byline:(0,i.jsx)(v().sA,{...mo.headerByline})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{...mo.addMembers}),primaryAction:b,primaryDisabled:m,secondaryText:(0,i.jsx)(v().sA,{...mo.cancel}),secondaryAction:o,isLoading:m}),children:(0,i.jsxs)("div",{style:c.content,children:[(0,i.jsx)(as,{spaceStore:a,isOpen:u,onDismiss:()=>g(!1),onClick:x,includeGroups:!0,selectedValues:h,setSelectedValues:f,inputPlaceholder:d.formatMessage(mo.membersPlaceholder)}),n.length>1?(0,i.jsx)(uo,{teams:n}):void 0]})})})}const mo=(0,v().YK)({headerByline:{id:"organization.team.settings.addTeamMembers.byline.space",defaultMessage:"Select the members you wish to add to this teamspace."},addMembers:{id:"organization.team.settings.addTeamMembers.modal.primaryAction",defaultMessage:"Add members"},cancel:{id:"organization.team.settings.addTeamMembers.modal.cancelAction",defaultMessage:"Cancel"},membersPlaceholder:{id:"organization.team.settings.addTeamMembers.members.placeholder",defaultMessage:"Add members or groups"}}),po=(0,v().YK)({name:{id:"workspaceModalTeamsView.nameColumn.header",defaultMessage:"Name"},members:{id:"workspaceModalTeamsView.membersColumn.header",defaultMessage:"Members"},permissions:{id:"workspaceModalTeamsView.membersColumn.permissions",defaultMessage:"Access"}}),ho={id:"name",headerTitle:(0,i.jsx)(v().sA,{...po.name}),renderCell:e=>{if(e.type===Zt().T.Loading)return(0,i.jsx)(Lt().mf,{containerStyles:{width:200}});const t=0===e.teamName.length?(0,i.jsx)(v().sA,{id:"workspaceModalTeamsView.untitledGroup",defaultMessage:"Untitled"}):e.teamName;return(0,i.jsx)(Lt().s7,{useThinTitle:!1,title:t,icon:(0,i.jsx)(L().B,{disabled:!0,icon:e.teamIcon,title:e.teamName,size:Na().p8,isLarge:!0,isEmptyPage:!1}),iconSize:Na().p8,iconMargin:Lt().Ji,summaryStyles:{width:`calc(100% - ${Na().p8+Lt().Ji+Et().Gr}px)`}})},widthData:{widthPercent:40,minWidth:100},sortable:!1},fo={id:"owners",headerTitle:(0,i.jsx)(v().sA,{id:"workspaceModalTeamsView.ownersColumn.header",defaultMessage:"Owners"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Dn().p,{}):e.ownerIds.ownerGroupIds.length>0||e.ownerIds.ownerUserIds.length>0?(0,i.jsx)(lo,{ownerIds:e.ownerIds,spaceId:e.spaceId}):null,widthData:{widthPercent:20,minWidth:100},sortable:!1},xo={id:"permissions",headerTitle:(0,i.jsx)(v().sA,{...po.permissions}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Wt().Kb,{}):(0,i.jsx)(D().D,{colorName:"secondary",children:(0,zn().X)(e.accessLevel,e.isDefault)}),widthData:{widthPercent:20,minWidth:100},sortable:!1},vo={id:"members",headerTitle:(0,i.jsx)(v().sA,{...po.members}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Wt().Kb,{}):(0,i.jsx)(D().D,{colorName:"secondary",children:(0,i.jsx)(v().sA,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"workspaceModalTeamsView.membersColumn.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:20,minWidth:100},sortable:!1},bo=[ho,fo,xo,vo],yo=[{id:ho.id,name:k().A.formatMessage(po.name),type:"title"},{id:vo.id,name:k().A.formatMessage(po.members),type:"number"},{id:xo.id,name:k().A.formatMessage(po.permissions),type:"title"}];var So=function(e){return e.CreateTeam="create-team",e.ArchiveTeam="archive-team",e.AddMembers="add-members",e}(So||{});function jo(e){let{spaceStore:t,organizationId:a}=e;const n=(0,j().IS)((()=>({createGroupButton:{marginBottom:8}})),[]),o=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:bo,theme:e,containerMarginTop:0})),[]),r=qa(),l=(0,s.useMemo)((()=>[t.id]),[t.id]),{teamStores:d}=(0,B().o)(l),{rows:c,setAppliedSorts:u,appliedSorts:g,query:p,setQuery:h,loadNextPage:f,loadPrevPage:x,hasNextPage:b,hasPrevPage:y,currentPageIndex:w,loading:A}=On(t.id),M=A?(0,Zt().n)():c,{loadTeamsForSpace:C}=(0,s.useContext)(R().D),{selectedRows:I,handleToggleRow:T,handleSelectAllRows:k,handleUnselectAllRows:_}=Ft({allPossibleRows:c}),[z,D]=(0,s.useState)(),[P,N]=(0,s.useState)(!1),[E,L]=(0,s.useState)(),O=(0,S().K8)((()=>I.filter((e=>e.teamStore.isDefault())).length===(d[t.id]??[]).filter((e=>e.isDefault())).length),[d,I,t.id]),U=e=>{e.type!==Zt().T.Loading&&T(e)};return(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teams.title",defaultMessage:"Teamspaces"}),byline:(0,i.jsx)(v().sA,{id:"workspaceModalTeamsView.byline",defaultMessage:"Manage teamspace membership and permissions"})}),(0,i.jsx)("div",{style:r.multiSelect,children:(0,i.jsxs)(Oa,{isOpen:I.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teams.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:I.length}}),onClick:_}),(0,i.jsx)(Ua,{icon:Rt().x,iconSize:16,title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teams.multiselect.inviteMembers",defaultMessage:"Invite members"}),onClick:()=>L(So.AddMembers)}),(0,i.jsx)(Ua,{icon:Bt().trashIcon,iconSize:16,title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teams.multiselect.archive",defaultMessage:"Archive teamspace"}),onClick:()=>L(So.ArchiveTeam),isDestructive:!0,disabled:O,disabledTooltipText:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teams.multiselect.archive.disabledTooltip",defaultMessage:"Cannot archive the last default teamspace."})})]})}),(0,i.jsxs)("div",{style:r.actionContainer,children:[(0,i.jsx)("div",{style:r.filters,children:(0,i.jsx)(Wa().e,{sortProperties:yo,isMenuOpen:P,setIsMenuOpen:N,onApply:e=>{N(!1),u(e),D(void 0)},currentSorts:z??g??[]})}),(0,i.jsx)("div",{style:r.search,children:M.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Va().x,{appliedSorts:g,openSortPillMenu:e=>{e&&D([{propertyId:e,direction:"ascending"}]),N(!0)},sortProperties:yo}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:p,setQueryFilter:h})]})}),(0,i.jsx)(W().A,{onClick:()=>L(So.CreateTeam),style:n.createGroupButton,children:(0,i.jsx)(v().sA,{defaultMessage:"Create teamspace",id:"workspaceModalTeamsView.createTeamspaceButton"})})]}),(0,i.jsx)(Et().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,rows:M,columnRenderInfo:bo,styles:o,renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:m().peopleIcon,title:(0,i.jsx)(v().sA,{id:"workspaceModalTeamsView.empty",defaultMessage:"No teams found"}),byline:(0,i.jsx)(v().sA,{id:"workspaceModalTeamsView.empty.byline",defaultMessage:"There are no teams that match this query"})}),loadMoreMethod:{type:"pages",onLoadNext:f,onLoadPrevious:x,hasNextPage:b,hasPrevPage:y,currentPage:w+1},onRowClick:U,multiselect:{header:{isDisabled:A,isSelected:M.length>0&&I.length===M.length,onClick:()=>{I.length===M.length?_():k()}},row:{getDisabledState:()=>A,getSelectedState:e=>I.some((t=>t.id===e.id)),onClick:U}}}),E===So.CreateTeam&&(0,i.jsx)(Gn,{organizationId:a,spaceStore:t,onDismiss:()=>L(void 0),onSubmit:()=>C(t.id,!0)}),E===So.AddMembers&&(0,i.jsx)(go,{organizationId:a,spaceStore:t,teams:I,onDismiss:()=>L(void 0),onSubmit:()=>{_(),C(t.id,!0)}}),E===So.ArchiveTeam&&(0,i.jsx)(co,{organizationId:a,spaceId:t.id,teams:I,onDismiss:()=>L(void 0),onSubmit:()=>{_(),C(t.id,!0)}})]})}var wo=()=>a(966789),Ao=(a(610931),()=>a(371807)),Mo=()=>a(296599),Co=()=>a(865415),Io=()=>a(149467),To=()=>a(638907),ko=()=>a(324458);const _o={query:void 0,teamIds:[],userIds:[]};function zo(e){const t=(0,y().v3)();let a,n,o;"legalHoldId"in e?a=e.legalHoldId:"organizationId"in e?n=e.organizationId:"spaceId"in e&&(o=e.spaceId);const[{status:i,value:r},l]=(0,tt().Yb)((async()=>{if(a||n||o){const e=await M().callApi({eventName:"getLegalHoldMembers",environment:t,data:{legalHoldId:a,organizationId:n,spaceId:o}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,Ee().HB)(e)}throw new Error("No legal hold ID, organization ID, or space ID provided.")}),[t,a,n,o]),d=(0,s.useMemo)((()=>r??[]),[r]),c=(0,s.useMemo)((()=>new Set(d)),[d]);return{loading:"pending"===i,members:d,membersSet:c,refetch:l}}function Do(e){let{spaceStores:t}=e;return(0,S().K8)((()=>t.map((e=>{var t;return{id:e.id,name:e.getName(),subscriptionTier:e.getSubscriptionTier(),icon:null===(t=e.getIcon())||void 0===t?void 0:t.icon}}))),[t])}var Po=()=>a(870122),No=()=>a(736851),Ro=()=>a(732165);const Bo=10;function Eo(e){let{pillTitle:t,pillIcon:a,userIds:s,guestUserIds:n,showSearch:o,...r}=e;const l=(0,y().v3)(),d=(0,v().tz)(),c=(0,j().IS)((e=>({guestIcon:{height:16,width:16,color:e.guestIconColor},groupIcon:{height:14,width:14,color:e.text.secondary,fill:"currentColor"}})),[]),u=(0,S().K8)((()=>{var e;return null===(e=ve().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),g=Boolean(n),m=(0,S().K8)((()=>{const e=s.map((e=>Lo({userId:e,isGuest:!1,showCaption:g,currentUserId:u,environment:l,intl:d,iconStyles:c.guestIcon})));return n&&e.push(...n.map((e=>Lo({userId:e,isGuest:!0,showCaption:g,currentUserId:u,environment:l,intl:d,iconStyles:c.guestIcon})))),r.includeGroups&&r.permissionGroups&&e.push(...r.permissionGroups.map((e=>function(e){let{group:t,iconStyles:a}=e;const s={id:t.getGroupId(),type:"permission_group"},n=t.getSpaceId();return{key:t.getGroupId(),value:s,title:(0,i.jsx)(No().FS,{group:t,spaceId:n}),shortTitle:t.getName(),searchTerms:[t.getName()],tokenIcon:(0,i.jsx)(L().B,{disabled:!0,icon:t.icon?{pointer:{id:n,table:na().NX},icon:t.icon}:void 0,size:14,isEmptyPage:!1,title:t.getName(),defaultIcon:(0,Vn().peopleFillIcon)(a)})}}({group:e,iconStyles:c.groupIcon})))),e}),[s,n,r.includeGroups,r.permissionGroups,g,u,l,d,c]),p=r.includeGroups?r.selectedUsers:r.selectedUsers.map((e=>({id:e,type:"user"}))),h=r.includeGroups?r.setSelectedUsers:e=>r.setSelectedUsers(e.filter((e=>"user"===e.type)).map((e=>e.id)));return o?(0,i.jsx)(Ys().V$,{pillTitle:t,pillIcon:a,selectedItems:p,setSelectedItems:h,items:m,pageSize:Bo,searchPlaceholder:k().A.formatMessage(r.includeGroups?No().uU.usersAndGroupsPlaceholder:No().uU.usersPlaceholder)}):(0,i.jsx)(Ys().VX,{pillTitle:t,pillIcon:a,selectedItems:p,setSelectedItems:h,items:m})}function Lo(e){let{userId:t,isGuest:a,showCaption:s,currentUserId:n,environment:o,intl:r,iconStyles:l}=e;const d=new(vt().L)(o,{table:w().oo,id:t},{userId:n}),c={id:t,type:"user"},u=d.getDisplayName(r);return{key:t,value:c,title:s?(0,i.jsx)(No().tp,{userStore:d,isGuest:a}):(0,i.jsx)(Ro().A,{userStore:d,avatarSize:20}),shortTitle:u,searchTerms:[u.toLowerCase(),d.getEmail()].filter(Ee().O9),tokenColor:a?"rgba(218, 163, 64, 0.2)":void 0,tokenIcon:a?(0,Po().globeIcon)(l):(0,i.jsx)(da().A,{userStore:d,size:16})}}var Oo=()=>a(86473);function Uo(e){let{selectedSpaceIds:t,setSelectedSpaceIds:a,spaceData:s}=e;const n=(0,v().tz)(),o=(0,Oo().I)(s,n);return(0,i.jsx)(Ys().VX,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:f().V,selectedItems:t,setSelectedItems:a,items:o})}function Fo(e){let{selectedSpaceId:t,setSelectedSpaceId:a,spaceData:s,shouldHideClear:n}=e;const o=(0,v().tz)(),r=(0,Oo().I)(s,o,!0);return(0,i.jsx)(Ys().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"orgConsole.filters.workspace.title",defaultMessage:"Workspace"}),pillIcon:f().V,selectedItem:t,setSelectedItem:e=>{void 0!==e&&e!==t&&a(e)},items:r,shouldUseCheck:!0,shouldHidePrefix:!0,selectionRequired:!0})}var Ho=()=>a(646498),Vo=()=>a(397791);function Wo(){const e=(0,y().v3)(),[t,a]=(0,tt().V$)((async t=>{let a;a="legalHoldExportId"in t?{legalHoldId:t.legalHoldId,legalHoldExportId:t.legalHoldExportId}:{legalHoldId:t.legalHoldId,spaceIds:t.spaceIds,teamIds:t.teamIds,userIds:t.userIds,blockIds:t.blockIds,query:t.query};const s=await M().callApi({eventName:"exportLegalHold",environment:e,data:a});if("success"===s.type)return s.data;if("failed"===s.type)throw s.error;return(0,Ee().HB)(s)}),[e]);return{loading:"pending"===t.status,exportLegalHold:a}}function qo(e){let{onDismiss:t,onExportPDFSuccess:a,legalHoldId:o,selectedSpaceId:r,selectedTeamSpaceIds:l,selectedUserIds:d,selectedPageIds:c,selectedQuery:u}=e;const g=(0,y().v3)(),{exportLegalHold:m}=Wo(),[p,h]=(0,s.useState)([]),f=async()=>{p.includes("content")&&await m({legalHoldId:o,spaceIds:[r],teamIds:l,userIds:d,blockIds:c,query:""===u?void 0:u}),p.includes("metadata")&&await Ve().AO(g,{legalHoldId:o,spaceId:r,teamIds:l,userIds:d,blockIds:c,query:""===u?void 0:u}),p.length>1&&p.includes("content")?a():t()};return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:t,areaConstraint:{width:{type:"min",length:Y().NF}},render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,i.jsx)(Vo().I,{size:"xl",color:"graySecondary",icon:n().f}),title:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.title",defaultMessage:"Export legal hold"}),bylineWidthOverride:300,byline:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.byline",defaultMessage:"Select which format you wish to download. You will receive an email with a download link once the export is ready."})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.buttonText",defaultMessage:"Export pages"}),primaryAction:f,primaryDisabled:!p.length,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.secondaryText",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsxs)(oe().VP,{gap:8,width:"100%",children:[(0,i.jsx)(Ho().a,{selectAlignXAxis:"right",name:"content",selectType:"checkbox",value:"content",label:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.pdfLabel",defaultMessage:"Export pages as PDF"}),description:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.pdfSupportText",defaultMessage:"This link will expire in 90 days upon receipt"}),isSelected:p.includes("content"),onChange:e=>h(p.includes("content")?p.filter((e=>"content"!==e)):[...p,"content"])}),(0,i.jsx)(Ho().a,{name:"metadata",selectType:"checkbox",value:"metadata",selectAlignXAxis:"right",label:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.csvLabel",defaultMessage:"Export metadata as CSV"}),description:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.csvSupportText",defaultMessage:"This link will expire in 7 days upon receipt"}),isSelected:p.includes("metadata"),onChange:e=>h(p.includes("metadata")?p.filter((e=>"metadata"!==e)):[...p,"metadata"])})]})})})}var Go=()=>a(378219),Ko=()=>a(22377),Yo=()=>a(22422),Qo=()=>a(402633),$o=()=>a(811132),Xo=()=>a(462125);const Zo={id:"page",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.pageColumn.header",defaultMessage:"Page"}),renderCell:e=>(0,i.jsx)(Xo().oc,{blockStore:e.blockStore}),widthData:{widthPercent:25,minWidth:280,maxWidth:280},sortable:!1},Jo={id:"location",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.locationColumn.header",defaultMessage:"Location"}),renderCell:e=>(0,i.jsx)(Yo().E,{blockStore:e.blockStore,teamStore:(0,Go().Uo)(e.blockStore)}),widthData:{widthPercent:25,minWidth:140},sortable:!1},ei={id:"pageStatus",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.pageStatusColumn.header",defaultMessage:"Page status"}),renderCell:e=>(0,i.jsx)(a(152204).u,{pageStatus:e.pageStatus}),widthData:{widthPercent:25,minWidth:140},sortable:!1};function ti(e){let{blockStore:t,selectedSpaceId:a}=e;const s=oa({spaceId:a});return s?(0,i.jsx)(Ko().b,{blockStore:t,spaceStore:s}):null}const ai={id:"audience",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.audienceColumn.header",defaultMessage:"Audience"}),renderCell:e=>(0,i.jsx)(ti,{blockStore:e.blockStore,selectedSpaceId:e.selectedSpaceId}),widthData:{widthPercent:25,minWidth:140},sortable:!1},si={id:"sharedWith",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.sharedWithColumn.header",defaultMessage:"Shared with"}),renderCell:e=>(0,i.jsx)(a(436559).o,{blockStore:e.blockStore}),widthData:{widthPercent:25,minWidth:140},sortable:!1},ni={id:"lastEditedBy",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.lastEditedByColumn.header",defaultMessage:"Last edited by"}),renderCell:e=>{const t=e.blockStore.getLastEditedById();return t?(0,i.jsx)(Qo().T,{blockStore:e.blockStore,userIds:[t]}):null},widthData:{widthPercent:25,minWidth:140},sortable:!1},oi={id:"lastEditedTime",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.lastEditedTimeColumn.header",defaultMessage:"Last edited on"}),renderCell:e=>0===e.blockStore.getLastEditedTime()?null:(0,i.jsx)(a(492455).Z,{lastEditedTime:e.blockStore.getLastEditedTime(),lastEditedById:e.blockStore.getLastEditedById(),deletedFromTrashTime:e.blockStore.getDeletedFromTrashTime(),movedToTrashTime:e.blockStore.getMovedToTrashTime(),pageStatus:e.pageStatus}),widthData:{widthPercent:25,minWidth:140},sortable:!1},ii={id:"createdBy",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.createdByColumn.header",defaultMessage:"Created by"}),renderCell:e=>{const t=e.blockStore.getCreatedById();return t?(0,i.jsx)(Qo().T,{blockStore:e.blockStore,userIds:[t]}):null},widthData:{widthPercent:25,minWidth:140},sortable:!1},ri={id:"createdTime",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.createdTimeColumn.header",defaultMessage:"Created on"}),renderCell:e=>(0,i.jsx)($o().d,{dateTs:e.blockStore.getCreatedTime()}),widthData:{widthPercent:25,minWidth:140},sortable:!1};function li(e){let{data:t,loading:a,selectedSpaceId:n,onLoadMore:o,hasNextPage:r,selectedIds:l,onSelectAll:d,onUnselectAll:c,onSelectRow:u}=e;const g=s.useMemo((()=>[Zo,Jo,ei,ai,si,ni,oi,ii,ri]),[]),m=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:g,theme:e,containerMarginTop:0})),[g]),p=t.map((e=>{const t=e.pathIsDead()?e.pathHasDeletedPermission()?"deleted_from_trash":"in_trash":"alive";return{id:e.id,blockStore:e,selectedSpaceId:n,type:Zt().T.SingleLegalHoldPage,isClickable:!1,pageStatus:t}})),h={header:{isDisabled:a,isSelected:l.length>0&&l.length===t.length,onClick:()=>{l.length===t.length?c():d()}},row:{getDisabledState:e=>a,getSelectedState:e=>l.includes(e.id),onClick:e=>{u(e.id)}}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Et().WE,{columnRenderInfo:g,hideHeaderRowPadding:!0,rows:p,renderNoRowsComponent:()=>!a&&(0,i.jsx)(Yt,{title:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.empty",defaultMessage:"No pages found"}),byline:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.empty.byline",defaultMessage:"There are no pages that match this query"})}),styles:m,showRowBorders:!0,allowHorizontalScroll:!0,loadMoreMethod:r?{type:"button",onLoadMore:o}:void 0,setStickyHeaderRow:!0,multiselect:h,extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}}),a?(0,i.jsx)(oe().fI,{alignItems:"center",justifyContent:"center",paddingTop:24,paddingBottom:24,children:(0,i.jsx)(wo().A,{})}):null]})}const di=(0,v().YK)({content:{id:"settingsConsole.singleLegalHoldContentTab.title",defaultMessage:"Browse Content"},contentLabel:{id:"settingsConsole.singleLegalHoldContentTab.label",defaultMessage:"View the pages currently on hold in each workspace"},placeholder:{id:"settingsConsole.singleLegalHoldContentTab.search.placeholder",defaultMessage:"Search by page name"}});function ci(e){let{legalHoldId:t,legalHold:a,setSelectedTab:n}=e;const o=(0,v().tz)(),r=Do({spaceStores:(0,Ts().l)()}),{spaceIds:l,loading:d}=function(e){const t=(0,y().v3)(),{legalHoldId:a}=e,[{status:s,value:n},o]=(0,tt().Yb)((async()=>{const e=await M().callApi({eventName:"getLegalHoldSpaceIdsWithPages",environment:t,data:{legalHoldId:a}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,Ee().HB)(e)}),[t,a]);return{loading:"pending"===s,spaceIds:n,refetch:o}}({legalHoldId:t}),c=(0,s.useMemo)((()=>l?r.filter((e=>l.includes(e.id))):[]),[r,l]);return d?(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:o.formatMessage(di.content),byline:o.formatMessage(di.contentLabel)}),(0,i.jsx)(oe().VP,{alignItems:"center",justifyContent:"center",children:(0,i.jsx)(wo().A,{})})]}):(0,i.jsx)(ui,{spaceData:c,legalHoldId:t,setSelectedTab:n})}function ui(e){let{spaceData:t,legalHoldId:a,setSelectedTab:n}=e;const o=(0,v().tz)(),r=(0,Hn().F)(),[l,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)([]),{availableOrganizationFeatures:g}=(0,s.useContext)(R().D),m=g.legal_holds_exports_enabled,{content:p,loading:h,loadNextPage:f,selectedSpaceId:x,setSelectedSpaceId:b,filters:S,setFilters:j,hasNextPage:w}=function(e){const t=(0,y().v3)(),{legalHoldId:a,spaceIds:n}=e,o=t.currentUser.id,[i,r]=s.useState(n[0]),[l,d]=s.useState(void 0),[c,u]=s.useState(void 0),[g,m]=s.useState(_o),[p,h]=s.useState([]),{query:f,teamIds:x,userIds:v}=g,b=null==x?void 0:x.join(","),S=null==v?void 0:v.join(","),[{status:j}]=(0,tt().Yb)((async()=>{if(!i)throw new Error("No space ID provided,");if(!o)throw new Error("Current user not found.");const e=b?b.split(","):[],s=S?S.split(","):[],n=await M().callApi({eventName:"getLegalHoldPages",environment:t,data:{id:a,spaceId:i,query:""===f?void 0:f,cursor:c,filters:e.length>0||s.length>0?{teamIds:e.length>0?e:void 0,userIds:s.length>0?s:void 0}:void 0},headers:{[Co().B3]:i}});if("success"!==n.type){if("failed"===n.type)throw n.error;return(0,Ee().HB)(n)}{const e=(0,ko().p)({recordMapWithRoleJson:n.data.recordMap}),a=new(Ao().A)({name:Mo().$H,data:new(Io().b)({[o]:e})});a.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),h((e=>{const s=[],o=new Set(e.map((e=>e.id)));for(const i of n.data.recordIds)if(!o.has(i)){const e=new(To().B)(t,{table:aa().ev,id:i},{inMemoryRecordCache:a});s.push(e)}return[...e,...s]})),d(n.data.nextCursor)}}),[t,a,i,f,o,b,S,c],{debounce:300}),w="pending"===j;return{content:p,loading:w,filters:g,setFilters:function(e){h([]),u(void 0),m((t=>({...t,...e})))},selectedSpaceId:i,setSelectedSpaceId:function(e){h([]),u(void 0),r(e)},loadNextPage:function(){0===p.length||!l||w||u(l)},hasNextPage:void 0!==l}}({legalHoldId:a,spaceIds:t.map((e=>e.id))}),{query:A,teamIds:C,userIds:I}=S,T=s.useMemo((()=>[x]),[x]),{teamStores:k}=(0,B().o)(T),{members:_}=zo({legalHoldId:a,spaceId:x});return(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:o.formatMessage(di.content),byline:o.formatMessage(di.contentLabel)}),(0,i.jsxs)("div",{style:r.tableHeader,children:[(0,i.jsxs)("div",{style:r.leftContent,children:[(0,i.jsx)(Fo,{selectedSpaceId:x,setSelectedSpaceId:e=>{b(e),j({teamIds:[]})},spaceData:t}),(0,i.jsx)(zn().j,{selectedTeamIds:C,setSelectedTeamIds:e=>{j({teamIds:e})},teamStores:k[x],onMenuClose:()=>{}}),(0,i.jsx)(Eo,{pillTitle:(0,i.jsx)(v().sA,{id:"legalHoldContentTable.filters.holdMembers.title",defaultMessage:"Hold members"}),pillIcon:Vn().peopleFillIcon,selectedUsers:I,setSelectedUsers:e=>{j({userIds:e})},userIds:_})]}),(0,i.jsxs)("div",{style:r.rightContent,children:[(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:A,setQueryFilter:e=>{e!==S.query&&j({query:e})},placeholderText:o.formatMessage(di.placeholder)}),m&&(0,i.jsx)(W().A,{onClick:()=>d(!0),children:(0,i.jsx)(v().sA,{id:"legalHoldContentTable.button.export",defaultMessage:"Export hold"})})]})]}),(0,i.jsx)(li,{selectedSpaceId:x,data:p,loading:h,onLoadMore:f,hasNextPage:w,selectedIds:c,onSelectAll:()=>{u(p.map((e=>e.id)))},onUnselectAll:()=>{u([])},onSelectRow:e=>{c.includes(e)?u((t=>t.filter((t=>t!==e)))):u((t=>[...t,e]))}}),l?(0,i.jsx)(qo,{onDismiss:()=>d(!1),onExportPDFSuccess:()=>{d(!1),n("exports")},legalHoldId:a,selectedSpaceId:x,selectedTeamSpaceIds:C,selectedUserIds:I,selectedPageIds:c,selectedQuery:A}):null]})}var gi=()=>a(449148),mi=()=>a(10678),pi=()=>a(220413),hi=()=>a(30406);function fi(e){let{workspaceIds:t,totalCount:a}=e;const n=(0,y().v3)(),{organizationOwnerRecordCache:o}=(0,s.useContext)(N().N),r=(0,S().K8)((()=>t.map((e=>new(hi().S)(n,{table:na().NX,id:e},{inMemoryRecordCache:o})))),[t,n,o]);return(0,i.jsx)(ee().$,{spaceStores:r,totalCount:a,showTooltip:!0,isLoading:!1})}function xi(e){let{status:t,createdAt:a,url:s,legalHoldId:o,legalHoldExportId:r,refetchExports:l}=e;const{exportLegalHold:d}=Wo(),c=(0,v().tz)(),u=Date.now()-a>mi().LA,g=async()=>{o&&r&&(await d({legalHoldId:o,legalHoldExportId:r}),await l())};return"failed"===t?(0,i.jsx)(G().A,{renderTooltip:()=>(0,i.jsx)(v().sA,{defaultMessage:"Retry export",id:"singleLegalHoldExportsTable.exportRequestedOnDate.action.retry"}),render:e=>(0,i.jsx)(ds().A,{...e,icon:gi().D,onClick:g,ariaLabel:c.formatMessage({id:"singleLegalHoldExportsTable.retry",defaultMessage:"Retry"})})}):"succeeded"===t&&s?(0,i.jsx)(G().A,{renderTooltip:()=>u?(0,i.jsx)(v().sA,{defaultMessage:"Download links are only valid for 90 days. Please export again.",id:"singleLegalHoldExportsTable.exportRequestedOnDate.action.tooltip"}):(0,i.jsx)(v().sA,{defaultMessage:"Download",id:"singleLegalHoldExportsTable.exportRequestedOnDate.action.download"}),render:e=>(0,i.jsx)(ds().A,{...e,icon:n().f,disabled:u,onClick:()=>{window.open(s,"_blank")},ariaLabel:c.formatMessage({id:"singleLegalHoldExportsTable.download",defaultMessage:"Download"})})}):null}function vi(e){let{status:t,createdAt:a,spaceIds:s,url:n,legalHoldId:o,legalHoldExportId:r,refetchExports:l}=e;const d=(0,y().v3)(),c=null==s?void 0:s[0],u=(0,S().K8)((()=>{if(!c)return;const e=new(z().SL)(d,{table:na().NX,id:c});return null==e?void 0:e.getName()}),[d,c]);return c?(0,i.jsx)(Lt().s7,{icon:(0,i.jsx)(fi,{workspaceIds:[c],totalCount:1}),title:u,byline:(0,i.jsx)(v().sA,{id:"singleLegalHoldExportsTable.exportRequestedOnDate",defaultMessage:"Requested on {date}",values:{date:(0,i.jsx)(v().XU,{value:a,year:"numeric",month:"short",day:"numeric"})}}),rightContent:(0,i.jsx)(xi,{createdAt:a,url:n,status:t,legalHoldId:o,legalHoldExportId:r,refetchExports:l})}):null}const bi={id:"export",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldExportsTable.exportColumn.header",defaultMessage:"Export"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{includeIcon:!0,containerStyles:{width:140}}):(0,i.jsx)(vi,{status:e.status,spaceIds:e.spaceIds,createdAt:e.createdAt,url:e.s3Url,legalHoldId:e.legalHoldId,legalHoldExportId:e.id,refetchExports:e.refetchExports}),widthData:{widthPercent:20,minWidth:280,maxWidth:280},sortable:!1};function yi(e){let t,a,s,{status:n,createdAt:o}=e;switch(n){case"processing":t=(0,i.jsx)(v().sA,{id:"singleLegalHoldExportsTable.status.processing",defaultMessage:"Processing"}),a="yellow",s=pi().XA.light.yellow[100];break;case"succeeded":t=(0,i.jsx)(v().sA,{id:"singleLegalHoldExportsTable.status.succeeded",defaultMessage:"Succeeded"}),s=pi().XA.light.blue[100],a="blue";break;case"failed":t=(0,i.jsx)(v().sA,{id:"singleLegalHoldExportsTable.status.failed",defaultMessage:"Failed"}),s=pi().XA.light.red[100],a="red";break;default:(0,Ee().HB)(n)}return Date.now()-o>mi().LA&&"succeeded"===n&&(t=(0,i.jsx)(v().sA,{id:"singleLegalHoldExportsTable.status.expired",defaultMessage:"Expired"}),s=pi().XA.light.gray[100],a="gray"),(0,i.jsx)(G().A,{renderTooltip:()=>(0,i.jsx)(v().sA,{defaultMessage:"Depending on the size of export this can take up to 3 days",id:"singleLegalHoldExportsTable.status.tooltip.description"}),disableTooltip:"processing"!==n,render:e=>(0,i.jsx)("div",{...e,children:(0,i.jsx)(At().A,{format:mt().NY.Medium,value:t,isSingle:!0,showRemoveButton:!1,isRound:!0,backgroundColor:s,showColoredDot:a})})})}const Si={id:"status",headerTitle:"Status",renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{includeIcon:!0,containerStyles:{width:140}}):(0,i.jsx)(yi,{status:e.status,createdAt:e.createdAt}),widthData:{widthPercent:30,minWidth:140},sortable:!1},ji={id:"period",headerTitle:"Period",renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{includeIcon:!0,containerStyles:{width:140}}):(0,i.jsxs)(Ks().A,{isSecondaryColor:!0,children:[(0,i.jsx)(v().XU,{value:e.legalHoldStartDate,year:"numeric",month:"short",day:"numeric"})," - ",e.legalHoldEndDate?(0,i.jsx)(v().XU,{value:e.legalHoldEndDate,year:"numeric",month:"short",day:"numeric"}):(0,i.jsx)(v().XU,{value:e.createdAt,year:"numeric",month:"short",day:"numeric"})]}),widthData:{widthPercent:30,minWidth:140},sortable:!1},wi={id:"numPages",headerTitle:"Associated pages",renderCell:e=>{var t,a;return e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{includeIcon:!0,containerStyles:{width:140}}):null!==(t=e.metadata)&&void 0!==t&&t.num_pages_exported?(0,i.jsx)(Ks().A,{isSecondaryColor:!0,children:(0,i.jsx)(v().sA,{id:"singleLegalHoldExportsTable.numPages.label",defaultMessage:"{numPages} {numPages, plural, one {page} other {pages}}",values:{numPages:(0,i.jsx)(v().Gr,{value:null===(a=e.metadata)||void 0===a?void 0:a.num_pages_exported})}})}):null},widthData:{widthPercent:40,minWidth:140},sortable:!1};function Ai(e){let{data:t,legalHold:a,loading:n,currentPage:o,setCurrentPage:r,refetchExports:l}=e;const d=s.useMemo((()=>[bi,Si,ji,wi]),[]),c=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:d,theme:e,containerMarginTop:0})),[d]),u=n?(0,Zt().n)():t.slice(at().q*(o-1),at().q*o).map((e=>({...e,legalHoldStartDate:null==a?void 0:a.startDate,legalHoldEndDate:null==a?void 0:a.endDate,legalHoldId:null==a?void 0:a.id,refetchExports:l,isClickable:!1,type:Zt().T.SingleLegalHoldExport}))),g=t.length>at().q*o,m=1!==o;return(0,i.jsx)(Et().WE,{columnRenderInfo:d,hideHeaderRowPadding:!0,rows:u,renderNoRowsComponent:()=>(0,i.jsx)(Yt,{title:(0,i.jsx)(v().sA,{id:"singleLegalHoldExportsTable.empty",defaultMessage:"No exports found"}),byline:(0,i.jsx)(v().sA,{id:"singleLegalHoldExportsTable.empty.byline",defaultMessage:"There are no exports that match this query"})}),styles:c,showRowBorders:!0,allowHorizontalScroll:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{g&&r(o+1)},onLoadPrevious:()=>{m&&r(o-1)},hasNextPage:g,hasPrevPage:m,currentPage:o},setStickyHeaderRow:!0,extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}})}const Mi=(0,v().YK)({exports:{id:"settingsConsole.singleLegalHoldExportsTab.title",defaultMessage:"Exports"},exportsLabel:{id:"settingsConsole.singleLegalHoldExportsTab.label",defaultMessage:"View pending and completed legal hold exports"}});function Ci(e){let{legalHoldId:t,legalHold:a}=e;const n=(0,v().tz)(),[o,r]=s.useState(1),{legalHoldExports:l,loading:d,refetch:c}=function(e){const t=(0,y().v3)(),[{status:a,value:s},n]=(0,tt().Yb)((async()=>{const a=await M().callApi({eventName:"getLegalHoldExports",environment:t,data:{legalHoldId:e}});if("success"===a.type)return a.data;if("failed"===a.type)throw a.error;return(0,Ee().HB)(a)}),[t,e]);return{loading:"pending"===a,legalHoldExports:s||[],refetch:n}}(t);return(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:n.formatMessage(Mi.exports),byline:n.formatMessage(Mi.exportsLabel)}),(0,i.jsx)(Ai,{legalHold:a,data:l,loading:d,currentPage:o,setCurrentPage:r,refetchExports:c})]})}function Ii(){const e=(0,y().v3)(),[t,a]=(0,tt().V$)((async t=>{let{legalHoldId:a,name:s,description:n,icon:o,status:i,userIds:r}=t;const l=await M().callApi({eventName:"updateLegalHold",environment:e,data:{legalHoldId:a,name:s,description:n,icon:o,status:i,userIds:r}});if("success"===l.type)return l.data;if("failed"===l.type)throw l.error;return(0,Ee().HB)(l)}),[e]);return{loading:"pending"===t.status,updateLegalHold:a}}var Ti=()=>a(975515),ki=()=>a(350979),_i=()=>a(413851),zi=()=>a(692192);const Di=(0,o().wt)("shieldSlash",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M4.19 11.425V6.619l1.29 1.285v3.268q0 .751.206 1.278.205.527.67.978.464.444 1.25.95a99 99 0 0 0 1.97 1.217q.142.089.232.123a.4.4 0 0 0 .157.034q.075 0 .157-.034a2 2 0 0 0 .24-.123 81 81 0 0 0 1.736-1.074l.984.992q-.525.342-1.183.717-.656.384-1.456.82-.13.069-.26.103a.8.8 0 0 1-.218.041.8.8 0 0 1-.219-.04 1.2 1.2 0 0 1-.26-.103A47 47 0 0 1 7 15.6q-1.011-.635-1.634-1.237a3.8 3.8 0 0 1-.895-1.299q-.28-.704-.28-1.64Zm10.978 2.208-1.012-1.012q.157-.3.226-.65a4 4 0 0 0 .075-.8V6.477a.6.6 0 0 0-.048-.267q-.048-.096-.191-.144l-.711-.253q-.397-.15-.834-.307a126 126 0 0 0-1.688-.615 32 32 0 0 0-.657-.24 2 2 0 0 0-.205-.061.65.65 0 0 0-.314 0 3 3 0 0 0-.199.061q-.225.075-.52.185-.293.102-.635.226l-1.367.492-1.019-1.027q.555-.205 1.183-.43a59 59 0 0 1 1.176-.417q.54-.185.827-.28.17-.042.355-.076a1.7 1.7 0 0 1 .356-.04q.17 0 .355.033.192.034.363.082.218.075.622.22.41.143.909.32a64 64 0 0 1 1.9.684q.411.15.636.246.506.218.745.5.246.279.246.888v5.168q0 .67-.137 1.21a3.4 3.4 0 0 1-.437.998m.451 3.199L2.863 4.09a.54.54 0 0 1-.15-.39q0-.232.15-.376.165-.165.39-.164.225 0 .39.164L16.392 16.06a.51.51 0 0 1 .157.39q0 .225-.157.382a.5.5 0 0 1-.383.164.53.53 0 0 1-.39-.164"})});let Pi=function(e){return e.ThreeMonths="three-months",e.SixMonths="six-months",e.OneYear="one-year",e}({});Object.values(Pi);const Ni={roles:["organization_owner","owner","membership_admin","member"]},Ri=(0,v().YK)({organizationOwnerLabel:{id:"organizationMember.owner.label",defaultMessage:"Organization owner"}});var Bi=()=>a(962373),Ei=()=>a(273520),Li=()=>a(410087);function Oi(){const e=(0,j().IS)((e=>({lockShieldIcon:{width:16,height:16,color:e.text.tertiary}})),[]);return(0,i.jsx)(G().A,{renderTooltip:()=>(0,i.jsx)(v().sA,{defaultMessage:"This user is placed in a legal hold in this organization.",id:"userSummary.legalHoldTooltip"}),render:t=>(0,i.jsx)("div",{...t,children:(0,a(678751).K)(e.lockShieldIcon)})})}function Ui(e){const{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o}=e,[r,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)([]),u=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:Y().J2}})),[]),{inviteRole:g,inviteTargets:m}=(0,S().K8)((()=>({inviteRole:t.state.inviteRole,inviteTargets:t.state.inviteTargets})),[t]),{spaceStores:p,onSubmit:h}=ks({inviteRole:g,inviteTargets:m,organizationStore:a});function f(e){c((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function x(){c((e=>e.length!==p.length?p.map((e=>e.id)):[]))}async function b(){0!==d.length&&(l(!0),await h(d),await o(),n(),l(!1))}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(H().tf,{showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{icon:(0,Rt().x)(u.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.title",defaultMessage:"Add members to workspace"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.byline",defaultMessage:"Choose workspaces to add <bold>{count} {count, plural, one {user} other {users}}</bold> as {count, plural, one {a workspace member} other {workspace members}}, granting access to workspace content and default teamspaces.",values:{count:m.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.button.add",defaultMessage:"Add users"}),primaryAction:b,primaryDisabled:r||0===d.length,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:u.content,children:(0,i.jsx)(Ps().O,{spaceStores:p,selectedSpaceIds:d,onSelect:f,onSelectHeader:x})})})})}function Fi(e){let{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o}=e;const r=(0,v().tz)(),l=(0,y().v3)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(N().N),[c,u]=(0,s.useState)(!1),g=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:Y().gA,height:"fit-content",width:Y().J2}})),[]),m=(0,S().K8)((()=>t.state.inviteTargets.map((e=>e.value.id)).filter(Ee().O9)),[t]),p=(0,S().K8)((()=>!c&&m.length>0),[c,m]);async function h(){var e;if(!p)return;u(!0);const t=a.getOwnerIds().filter((e=>!m.includes(e))),s=null===(e=ve().default.state.currentUserStore)||void 0===e?void 0:e.id,c=s&&m.includes(s),g=await M().callApi({eventName:"updateOrganization",environment:l,data:{organizationId:a.id,ownerIds:t}});"success"===g.type?(d(g),lt().D6({label:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.success",defaultMessage:"Successfully demoted from admin"})}),(0,I().u4)({environment:l,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:a.id,updated_fields:["owners"]}}}),c&&Ne().oo({environment:l,url:De().JZ.root})):C().f1((0,T().Hu)(r,g)),await o(),n(),u(!1)}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(H().tf,{showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{icon:Di(g.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.title",defaultMessage:"Downgrade organization owners"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.byline",defaultMessage:"Remove organization owner permissions from <bold>{count} {count, plural, one {user} other {users}}</bold>. Workspace roles and permissions remain unchanged.",values:{count:m.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.button.add",defaultMessage:"Downgrade"}),primaryAction:h,primaryDisabled:!p,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:g.content,children:(0,i.jsx)(Ds,{userIds:m})})})})}function Hi(e){let{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o}=e;const r=(0,v().tz)(),l=(0,y().v3)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(N().N),[c,u]=(0,s.useState)(!1),g=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:Y().gA,height:"fit-content",width:Y().J2}})),[]),m=(0,S().K8)((()=>t.state.inviteTargets.map((e=>e.value.id)).filter(Ee().O9)),[t]),p=(0,S().K8)((()=>!c&&m.length>0),[c,m]);async function h(){if(!p)return;u(!0);const e=a.getOwnerIds(),t=Array.from(new Set(e.concat(m))),s=await M().callApi({eventName:"updateOrganization",environment:l,data:{organizationId:a.id,ownerIds:t}});"success"===s.type?(d(s),lt().D6({label:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.success",defaultMessage:"Successfully promoted to admin"})}),(0,I().u4)({environment:l,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:a.id,updated_fields:["owners"]}}})):C().f1((0,T().Hu)(r,s)),await o(),n(),u(!1)}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(H().tf,{showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{icon:(0,_i().g)(g.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.title",defaultMessage:"Make users organization owners"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.byline",defaultMessage:"You are about to promote <bold>{count} {count, plural, one {user} other {users}}</bold> {count, plural, one { to an organization owner} other { to organization owners}}. Organization owners have access to the highest level of user permission controls.",values:{count:m.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.button.add",defaultMessage:"Make {count, plural, one {organization owner} other {organization owners}}",values:{count:m.length}}),primaryAction:h,primaryDisabled:!p,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:g.content,children:(0,i.jsx)(Ds,{userIds:m})})})})}function Vi(e){let{userStore:t,organizationStore:a}=e;const n=(0,Ts().l)(),{spaceUsers:o,loading:i}=(0,E().$)(n),r=(0,S().K8)((()=>{var e;return(null===(e=a.getRoles().find((e=>e.id===t.id)))||void 0===e?void 0:e.role)??"none"}),[a,t.id]),[l,d]=(0,s.useState)(new Map),[c,u]=(0,s.useState)(new Map),g=(0,s.useMemo)((()=>n.map((e=>e.id))),[n]),[m,p]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(!i&&!m){const e=new Map;for(const a of g){const s=o[a];if(!s)continue;const n=s.find((e=>e.userId===t.id));n&&e.set(a,n)}d(e)}}),[i,g,o,t.id,m]);const{loadVisibleUsersForSpace:h}=(0,s.useContext)(R().D),f=(0,s.useCallback)((async e=>{p(!0),await h(e,!0),u((t=>{const a=new Map(t);return a.delete(e),a})),p(!1)}),[h]),x=(0,s.useCallback)((e=>{u((t=>{const a=new Map(t);return a.delete(e),f(e),a}))}),[f]),v=(0,s.useCallback)(((e,a)=>{u((s=>{if(!(0,Ya().DH)(a))return s;const n=new Map(s);return n.set(e,{userId:t.id,role:a}),f(e),n}))}),[f,t.id]);return{loading:i,userData:{loading:i,userSpaceAccessMap:new Map([...l,...c]),organizationRole:r,removeUserFromSpaceCache:x,updateUserRoleInSpaceCache:v}}}function Wi(e){let{onDismiss:t,...a}=e;const s=(0,y().v3)(),n=(0,v().tz)(),{userId:o,organizationStore:r,lastActiveAt:l,isOnLegalHold:d}=a,{userStore:c}=(0,S().K8)((()=>({userStore:new(z().LU)(s,{table:w().oo,id:o})})),[s,o]),{loading:u,userData:g}=Vi({userStore:c,organizationStore:r}),m=(0,S().K8)((()=>(0,i.jsx)(da().A,{size:ia().WK,userStore:c})),[c]),[p,h]=(0,S().K8)((()=>[c.getDisplayName(n),c.getEmail()??""]),[c,n]);return(0,i.jsx)(ia().iv,{sidebarProps:{sidebarItemsTitle:(0,i.jsx)(v().sA,{id:"orgConsole.singleUserViewModal.sidebarItemTitle",defaultMessage:"User settings"}),sidebarTitle:p,sidebarByline:h,sidebarTitleIcon:m,hideSeparator:!0},tabRenderer:Wf,tabNames:x().AM,defaultTab:"general",sceneProps:{isLoading:u,organizationStore:r,userStore:c,userData:{lastActiveAt:l,...g},isOnLegalHold:d},tabAccessor:Vf,isOpen:!0,onDismiss:t})}const qi={id:"actor",headerTitle:(0,i.jsx)(v().sA,{id:"organizationMembersTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(ua,{useThinTitle:!1,userId:e.organizationMember.userId,badge:e.usersOnLegalHold.has(e.organizationMember.userId)?(0,i.jsx)(Oi,{}):null,rightContent:(0,i.jsx)(tr,{userId:e.organizationMember.userId,setSelectedUserId:e.setSelectedUserId,setOpenedModal:e.setOpenedModal,isOrganizationOwner:"owner"===e.organizationMember.organizationRole,isLastOrganizationOwner:e.isLastOrganizationOwner})}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},Gi={id:"role",headerTitle:(0,i.jsx)(v().sA,{id:"organizationMembersTable.roleColumn.header",defaultMessage:"Highest role"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):(0,i.jsx)(Ji,{organizationMember:e.organizationMember}),widthData:{widthPercent:25,minWidth:70},sortable:!1,shouldShowSortTooltip:!1},Ki={id:"spaces",headerTitle:(0,i.jsx)(v().sA,{id:"organizationMembersTable.spacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):(0,i.jsx)(er,{organizationMember:e.organizationMember}),widthData:{widthPercent:30,minWidth:120},sortable:!1,hasClickableContents:!1},Yi={id:"email",headerTitle:(0,i.jsx)(v().sA,{id:"organizationMembersTable.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:240}}):(0,i.jsx)(js().xF,{userId:e.organizationMember.userId}),widthData:{widthPercent:30,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},Qi={id:"lastActive",headerTitle:(0,i.jsx)(v().sA,{id:"organizationMembersTable.lastActiveColumn.header",defaultMessage:"Last active"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Li().F,{useSecondaryColorTitle:!0,isNoActivitySecondaryColor:!0,lastActiveAt:e.organizationMember.lastActiveAt}),widthData:{widthPercent:15,minWidth:100},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},$i=[qi,Gi,Yi,Ki,Qi];var Xi=function(e){return e.AddToWorkspace="add-to-workspace",e.RemoveFromWorkspace="remove-from-workspace",e.PromoteToAdmin="promote-to-admin",e.DemoteAdmin="demote-admin",e}(Xi||{});function Zi(e){let{members:t,usersOnLegalHold:a,loading:n,error:o,loadNextPage:r,organizationStore:l,loadPreviousPage:d,currentPage:c,hasPreviousPage:u,hasNextPage:g,refreshPage:p,userId:h,selectedIds:f,onSelectAll:x,onUnselectAll:b,onSelectRow:A}=e;const M=(0,y().v3)(),C=(0,Gt().A)(),I=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:$i,theme:e,containerMarginTop:0})),[]),T=$i.map((e=>({...e,headerStyle:C.tableHeader,rowStyle:C.tableRow}))),k=()=>{B({isOpen:!1})},[_,D]=(0,s.useState)(),[P,N]=(0,s.useState)(),[R,B]=(0,s.useState)(h?{isOpen:!0,userId:h,organizationStore:l,lastActiveAt:void 0,onDismiss:k}:{isOpen:!1}),E=(0,S().K8)((()=>t.map((e=>({organizationMember:e,usersOnLegalHold:a,id:e.userId,isClickable:!0,type:Zt().T.OrganizationMember,setSelectedUserId:D,setOpenedModal:N,isLastOrganizationOwner:l.isUserLastOwner(e.userId)})))),[t,l,a]),L=n?(0,Zt().n)():E;function O(){N(void 0)}const U={header:{isDisabled:n,isSelected:f.length>0&&f.length===t.length,onClick:()=>{f.length===t.length?b():x()}},row:{getDisabledState:e=>n,getSelectedState:e=>e.type===Zt().T.OrganizationMember&&f.includes(e.organizationMember.userId),onClick:e=>{e.type===Zt().T.OrganizationMember&&A(e.organizationMember.userId)}}},F=(0,S().K8)((()=>{const e=new Pa,t=_?new(z().LU)(M,{table:w().oo,id:_}).getModel():void 0;return t?(e.setState({...e.state,inviteTargets:[{type:"existingUser",value:t,spaceRole:void 0}],inviteRole:"read_and_write",isInviteTargetsEmpty:!1}),e):e}),[M,_]);return!n&&o?(0,i.jsx)($t,{error:o,runNewSearch:()=>p(!0)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Et().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:T,rows:L,renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:m().peopleIcon,title:(0,i.jsx)(v().sA,{id:"workspaceMembersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(v().sA,{id:"workspaceMembersTable.empty.byline",defaultMessage:"There are no members that match this query"})}),styles:I,loadMoreMethod:{type:"pages",onLoadNext:r,onLoadPrevious:d,hasNextPage:g,hasPrevPage:u,currentPage:c},multiselect:U,onRowClick:function(e){e.type===Zt().T.OrganizationMember&&B({isOpen:!0,onDismiss:k,userId:e.organizationMember.userId,organizationStore:l,lastActiveAt:e.organizationMember.lastActiveAt})},extendToFullScreen:Xt().e}),P===Xi.AddToWorkspace?(0,i.jsx)(Ui,{permissionsInviteStore:F,onDismiss:O,organizationStore:l,refreshPage:p}):null,P===Xi.RemoveFromWorkspace?(0,i.jsx)(pn,{permissionsInviteStore:F,onDismiss:O,organizationStore:l,refreshPage:p}):null,P===Xi.PromoteToAdmin?(0,i.jsx)(Hi,{permissionsInviteStore:F,onDismiss:O,organizationStore:l,refreshPage:p}):null,P===Xi.DemoteAdmin?(0,i.jsx)(Fi,{permissionsInviteStore:F,onDismiss:O,organizationStore:l,refreshPage:p}):null,R.isOpen&&(0,i.jsx)(Wi,{...R,isOnLegalHold:a.has(R.userId)})]})}function Ji(e){let{organizationMember:t}=e;const a=(0,v().tz)(),s=ar(t);return(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:a.formatMessage(s)})}function er(e){let{organizationMember:t}=e;const a=t.spacesInfo.map((e=>e.spaceId)),s=(0,Ts().l)(a);return 0===a.length?(0,i.jsx)(D().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organizationMembersTable.spacesColumn.noWorkspaces",defaultMessage:"No workspaces"})}):(0,i.jsx)(ee().$,{spaceStores:s,isLoading:!1,showTooltip:!0})}function tr(e){const t=(0,v().tz)(),{userId:a,setSelectedUserId:s,setOpenedModal:n,isOrganizationOwner:o,isLastOrganizationOwner:r}=e,l=(0,S().uB)(void 0,Bi().A),d=(0,j().IS)((()=>({popupMenu:{width:270},icon:{height:20,width:20,fill:"currentColor"}})),[]),c=[{key:"add-to-workspaces",render:e=>(0,i.jsx)(We().A,{...e,icon:(0,Rt().x)(d.icon),title:(0,i.jsx)(v().sA,{id:"organizationMembersTable.userColumn.menu.addUserToWorkspaces",defaultMessage:"Add to workspaces"})}),action:()=>{n(Xi.AddToWorkspace),s(a),l.setState({...l.state,open:!1})}},{key:"remove-from-workspaces",render:e=>(0,i.jsx)(We().A,{...e,icon:Ss(d.icon),title:(0,i.jsx)(v().sA,{id:"organizationMembersTable.userColumn.menu.removeUserFromWorkspaces",defaultMessage:"Remove from workspaces"})}),action:()=>{n(Xi.RemoveFromWorkspace),s(a),l.setState({...l.state,open:!1})}},{key:"promote-to-owner",render:e=>(0,i.jsx)(We().A,{...e,icon:(0,_i().g)(d.icon),title:(0,i.jsx)(v().sA,{id:"organizationMembersTable.userColumn.menu.makeOrganizationOwner",defaultMessage:"Make organization owner"}),disabled:o,disabledFeedback:o}),action:()=>{n(Xi.PromoteToAdmin),s(a),l.setState({...l.state,open:!1})}},{key:"demote-from-owner",render:e=>(0,i.jsx)(We().A,{...e,icon:Di(d.icon),title:(0,i.jsx)(v().sA,{id:"organizationMembersTable.userColumn.menu.downgradeOrganizationOwner",defaultMessage:"Downgrade organization owner"}),disabled:r||!o,disabledFeedback:r||!o}),action:()=>{n(Xi.DemoteAdmin),s(a),l.setState({...l.state,open:!1})}}],u={key:"actions",render:e=>(0,i.jsx)(qe().A,{title:(0,i.jsx)(v().sA,{id:"organizationMembersTable.userColumn.menu.title",defaultMessage:"Member actions"}),...e}),items:c};return(0,i.jsx)(Ei().Ay,{stopClickPropagation:!0,popupType:Xa().n.Popup,alignmentToOrigin:$a().C.Start,placementToOrigin:$a().W.Bottom,style:d.popupMenu,render:()=>(0,i.jsx)(yt().A,{menuType:xt().gu.Popup,width:270,children:(0,i.jsx)(St().Ay,{type:St().Oh.Vertical,initialFocus:void 0,sections:[u]})}),onClose:et().lQ,buttonPopupStore:l,renderOrigin:e=>(0,i.jsx)(ds().A,{ariaLabel:t.formatMessage({id:"memberActionsMenuButton.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:zi().W,...e})})}function ar(e){if("owner"===e.organizationRole)return Ri.organizationOwnerLabel;const t=e.spacesInfo.length>0?e.spacesInfo[0].role:"none";return(0,Cs().rd)(t)}var sr=()=>a(932322);function nr(e){const{userStore:t,highestUserRoleInOrganization:a,...s}=e,n=(0,v().tz)(),o=(0,S().K8)((()=>{const e=t.getModel();if(e)return{userValue:e,email:e.email,displayName:e.getDisplayName(n)}}),[t,n]);return(0,i.jsx)(We().A,{...s,icon:(0,i.jsx)(da().A,{userValue:null==o?void 0:o.userValue,size:32}),title:null==o?void 0:o.displayName,caption:(null==o?void 0:o.displayName)!==(null==o?void 0:o.email)?null==o?void 0:o.email:(0,i.jsx)("div",{}),right:(0,i.jsx)(sr().CU,{caption:a})})}const or=(0,v().YK)({legalHoldAddMembersPlaceholder:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.addMembersPlaceholder",defaultMessage:"Search names or emails"},legalHoldAddMembersRequiredValidationError:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.addMembersRequiredValidationError",defaultMessage:"Hold members are required."}});function ir(e){let{organizationId:t,holdMemberUserIds:a,setHoldMemberUserIds:n,error:o,nonRemovableIds:r}=e;const l=(0,y().v3)(),d=(0,v().tz)(),[c,u]=s.useState(""),[g,m]=s.useState(!1),p=(0,j().IS)((e=>({token:{boxShadow:e.shadow2XS}})),[]),[{status:h,value:f}]=(0,tt().Yb)((async()=>{if(0===c.length)return[];const e=await M().callApi({eventName:"getMembersInOrganization",environment:l,data:{organizationId:t,query:c}});if("success"===e.type)return e.data.members;if("failed"===e.type)throw e.error;return(0,Ee().HB)(e)}),[l,t,c],{debounce:300}),[{status:x,value:b}]=(0,tt().Yb)((async()=>{if(0===c.length)return[];const e=await M().callApi({eventName:"getGuestsInOrganization",environment:l,data:{organizationId:t,query:c}});if("success"===e.type)return e.data.guests;if("failed"===e.type)throw e.error;return(0,Ee().HB)(e)}),[l,t,c],{debounce:300}),A=(0,s.useMemo)((()=>new Set(null==f?void 0:f.map((e=>e.userId)))),[f]),C=(0,s.useMemo)((()=>null==b?void 0:b.filter((e=>!A.has(e.userId)))),[b,A]),I=(0,s.useMemo)((()=>new Set(null==b?void 0:b.map((e=>e.userId)))),[b]),[{status:T,value:_}]=(0,tt().Yb)((async()=>{if(0===c.length)return[];const e=await M().callApi({eventName:"getRemovedUsers",environment:l,data:{organizationId:t,query:c}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,Ee().HB)(e)}),[l,t,c],{debounce:300}),D=(0,s.useMemo)((()=>null==_?void 0:_.filter((e=>{const t=A.has(e),a=I.has(e);return!t&&!a}))),[_,A,I]),P=(0,S().K8)((()=>a.map((e=>{const t=new(z().LU)(l,{table:w().oo,id:e});return(0,i.jsx)(At().A,{showRemoveButton:!(null!=r&&r.includes(e)),onClickRemove:t=>{const s=a.filter((t=>t!==e));n(s),t.stopPropagation()},backgroundColor:pi().Tj.white,format:mt().NY.Medium,isSingle:!1,value:(0,i.jsx)(Ro().A,{userStore:t,avatarSize:18}),style:p.token},e)}))),[l,a,p.token,n,r]),N=(0,S().K8)((()=>f&&0!==(null==f?void 0:f.length)?f.map((e=>{const t=new(z().LU)(l,{table:w().oo,id:e.userId}),s=ar(e);return{key:e.userId,render:e=>(0,i.jsx)(nr,{...e,userStore:t,highestUserRoleInOrganization:d.formatMessage(s)}),action:()=>{const t=[...a,e.userId];n(t),u("")}}})).filter((e=>!a.includes(e.key.toString()))):[]),[l,a,f,n,d]),R=(0,S().K8)((()=>C&&0!==(null==C?void 0:C.length)?C.map((e=>{const t=new(z().LU)(l,{table:w().oo,id:e.userId});return{key:e.userId,render:e=>(0,i.jsx)(nr,{...e,userStore:t}),action:()=>{const t=[...a,e.userId];n(t),u("")}}})).filter((e=>!a.includes(e.key.toString()))):[]),[l,C,a,n]),B=(0,S().K8)((()=>D&&0!==(null==D?void 0:D.length)?D.map((e=>{const t=new(z().LU)(l,{table:w().oo,id:e});return{key:e,render:e=>(0,i.jsx)(nr,{...e,userStore:t}),action:()=>{const t=[...a,e];n(t),u("")}}})):[]),[l,a,D,n]),E={key:"users",render:e=>(0,i.jsx)(qe().A,{...e,title:(0,i.jsx)(v().sA,{defaultMessage:"Members",id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.members.title"})}),items:N},L={key:"guests",render:e=>(0,i.jsx)(qe().A,{...e,title:(0,i.jsx)(v().sA,{defaultMessage:"Guests",id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.guests.title"})}),items:R},O={key:"removedUsers",render:e=>(0,i.jsx)(qe().A,{...e,title:(0,i.jsx)(v().sA,{defaultMessage:"Removed users",id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.removedUsers.title"})}),items:B},U={key:"empty",render:e=>(0,i.jsx)(qe().A,{...e}),items:[{key:"empty-item",render:e=>(0,i.jsx)(Ti().A,{title:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.empty.item",defaultMessage:"Type or paste in emails above, separated by commas."})}),action:et().lQ}]},F="resolved"===h&&"resolved"===x&&"resolved"===T;function H(){if(0===c.length)return[U];const e=[];return N.length>0&&e.push(E),R.length>0&&e.push(L),B.length>0&&e.push(O),e}return(0,i.jsxs)(oe().VP,{width:"100%",gap:8,children:[(0,i.jsxs)(oe().VP,{gap:0,children:[(0,i.jsx)(K().A,{children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersLabel",defaultMessage:"Hold members"})}),(0,i.jsx)(jt().Ay,{trapFocus:!1,popupType:jt().nl.Popup,sameWidthAsOrigin:!0,open:g||c.length>0,enableOutsideClickDismiss:!0,onDismiss:()=>{m(!1)},origin:(0,i.jsx)(Mt().A,{onClick:e=>{m(!0),e.stopPropagation()},tokens:P,placeholder:k().A.formatMessage(or.legalHoldAddMembersPlaceholder),value:c,onChange:e=>u(e.target.value),onRemoveLastToken:()=>{const e=a.slice(0,-1);n(e)},errorOutline:Boolean(o),inputElementAttributes:{"aria-describedby":"legalHoldAddMembersError"}}),render:()=>(0,i.jsx)(yt().A,{menuType:xt().gu.Popup,children:(0,i.jsx)(St().Ay,{type:St().Oh.Vertical,initialFocus:F&&[...N,...R,...B].length>0?0:void 0,sections:H()})})})]}),(0,i.jsx)(ki().R,{id:"legalHoldAddMembersError",error:o})]})}function rr(e){let{onDismiss:t,legalHoldId:a,organizationId:n,userIdsAlreadyInLegalHold:o,onSuccess:r}=e;const[l,d]=s.useState({holdMemberUserIds:void 0}),[c,u]=(0,s.useState)(o),g=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary}})),[]),{loading:m,updateLegalHold:p}=Ii(),h=async()=>{if(c.length)try{await p({legalHoldId:a,userIds:c}),r(),t()}catch(e){return}else d((e=>({...e,holdMemberUserIds:or.legalHoldAddMembersRequiredValidationError})))};return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:t,areaConstraint:{width:{type:"min",length:Y().NF}},render:e=>{let{sizeRange:a}=e;return(0,i.jsx)(H().tf,{showDismissButton:!1,sizeRange:a,header:(0,i.jsx)(Y().rQ,{icon:(0,Rt().x)(g.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.title",defaultMessage:"Add new hold member"}),bylineWidthOverride:360,byline:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.byline",defaultMessage:"Members affected by a legal hold won’t be notified of the hold and will still maintain their permissions to create, edit, and delete files."})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.button.addMember",defaultMessage:"Add hold member"}),primaryAction:h,primaryDisabled:m,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsx)(ir,{organizationId:n,holdMemberUserIds:c,nonRemovableIds:o,setHoldMemberUserIds:e=>{u(e),e.length&&d((e=>({...e,holdMemberUserIds:void 0})))},error:l.holdMemberUserIds})})}})}function lr(e){let{userIdsToRemove:t,legalHoldId:a,onDismiss:n,onSuccess:o}=e;const[r,l]=(0,s.useState)(!1),d=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:440,display:"flex",flexDirection:"column",alignItems:"center"},confirmationContainer:{display:"flex",gap:10,alignItems:"center"}})),[]),{loading:c,updateLegalHold:u}=Ii(),g=async()=>{try{await u({legalHoldId:a,userIds:[]}),await o(),n()}catch(e){}},m=t.length;return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,rt().J)(d.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.title",defaultMessage:"Are you sure you want to remove {memberRemovalCount, plural, one {this member} other {these members}}?",values:{memberRemovalCount:m}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.byline",defaultMessage:"Removing all members will release the hold. This action is final and pages deleted after release will be permanently deleted according to the data retention setting.",values:{memberRemovalCount:m}})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.buttonText",defaultMessage:"Remove {memberRemovalCount, plural, one {member} other {members}}",values:{memberRemovalCount:m}}),primaryAction:g,primaryDisabled:c||!r,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:n,isDarkRed:!0}),children:(0,i.jsx)("div",{style:d.container,children:(0,i.jsxs)("div",{style:d.confirmationContainer,children:[(0,i.jsx)(dt().A,{checked:r,size:14,checkSize:10,onClick:()=>l(!r)}),(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.confirmationText",defaultMessage:"I understand the actions of releasing legal hold"})})]})})})})}function dr(e){let{userIdsToRemove:t,allUserIds:a,legalHoldId:s,onDismiss:n,onSuccess:o}=e;const r=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary}})),[]),{loading:l,updateLegalHold:d}=Ii(),c=async()=>{try{const e=a.filter((e=>!t.includes(e)));await d({legalHoldId:s,userIds:e}),o(),n()}catch(e){}},u=t.length;return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:n,areaConstraint:{width:{type:"fixed",length:Y().NF}},render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,rt().J)(r.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.title",defaultMessage:"Are you sure you want to remove {memberRemovalCount, plural, one {this member} other {these members}}?",values:{memberRemovalCount:u}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.byline",defaultMessage:"Deleting {memberRemovalCount, plural, one {this member} other {these members}} will also remove associated pages by {memberRemovalCount, plural, one {this member} other {these members}}.",values:{memberRemovalCount:u}})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.buttonText",defaultMessage:"Remove {memberRemovalCount, plural, one {member} other {members}}",values:{memberRemovalCount:u}}),primaryAction:c,primaryDisabled:l,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:n,isDarkRed:!0})})})}function cr(e){let{organizationGuest:t}=e;const a=Object.keys(t.guestPages),s=(0,Ts().l)(a);return 0===a.length?(0,i.jsx)(D().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.spacesColumn.noWorkspaces",defaultMessage:"No workspaces"})}):(0,i.jsx)(ee().$,{spaceStores:s,isLoading:!1,showTooltip:!0})}var ur=function(e){return e.RemoveFromLegalHold="remove-from-legal-hold",e.ReleaseLegalHold="release-legal-hold",e}(ur||{});function gr(e){const t=(0,v().tz)(),{userId:a,onRemoveMember:s}=e,n=(0,S().uB)(void 0,Bi().A),o=(0,j().IS)((()=>({popupMenu:{width:248},icon:{height:20,width:20,fill:"currentColor"}})),[]),r=[{key:"remove-member-from-legal-hold",render:e=>(0,i.jsx)(We().A,{...e,icon:Ss(o.icon),title:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.userColumn.menu.removeMemberFromLegalHold",defaultMessage:"Remove member"})}),action:()=>{s(a),n.setState({...n.state,open:!1})}}],l={key:"actions",render:e=>(0,i.jsx)(qe().A,{title:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.userColumn.menu.title",defaultMessage:"Member actions"}),...e}),items:r};return(0,i.jsx)(Ei().Ay,{stopClickPropagation:!0,popupType:Xa().n.Popup,alignmentToOrigin:$a().C.Start,placementToOrigin:$a().W.Bottom,style:o.popupMenu,render:()=>(0,i.jsx)(yt().A,{menuType:xt().gu.Popup,width:248,children:(0,i.jsx)(St().Ay,{type:St().Oh.Vertical,initialFocus:void 0,sections:[l]})}),onClose:et().lQ,buttonPopupStore:n,renderOrigin:e=>(0,i.jsx)(ds().A,{ariaLabel:t.formatMessage({id:"legalHoldMemberActionsMenuButton.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:zi().W,...e})})}function mr(e){const{userId:t,onRemoveMember:a}=e,s=(0,y().v3)();return(0,S().K8)((()=>new(z().LU)(s,{table:w().oo,id:t})),[t,s])?(0,i.jsx)(ua,{userId:t,rightContent:(0,i.jsx)(gr,{userId:t,onRemoveMember:a})}):null}const pr={id:"name",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.nameColumn.header",defaultMessage:"Name"}),renderCell:e=>{if(e.type===Zt().T.Loading)return(0,i.jsx)(Lt().mf,{includeIcon:!0,containerStyles:{width:140}});const{onRemoveMember:t}=e;return e.type===Zt().T.SingleLegalHoldMemberUser?(0,i.jsx)(mr,{onRemoveMember:t,userId:e.organizationMember.userId}):e.type===Zt().T.SingleLegalHoldMemberGuest?(0,i.jsx)(mr,{onRemoveMember:t,userId:e.organizationGuest.userId}):e.type===Zt().T.SingleLegalHoldMemberDeletedUser?(0,i.jsx)(mr,{onRemoveMember:t,userId:e.deletedMemberId}):(0,Ee().HB)(e)},widthData:{widthPercent:26,minWidth:275,maxWidth:275},sortable:!1},hr={id:"role",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.roleColumn.header",defaultMessage:"Highest role"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):e.type===Zt().T.SingleLegalHoldMemberUser?(0,i.jsx)(Ji,{organizationMember:e.organizationMember}):e.type===Zt().T.SingleLegalHoldMemberGuest?(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.guestRole",defaultMessage:"Guest"})}):e.type===Zt().T.SingleLegalHoldMemberDeletedUser?(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.deletedUserRole",defaultMessage:"Deleted user"})}):(0,Ee().HB)(e),widthData:{widthPercent:25,minWidth:80},sortable:!1},fr={id:"workspaces",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.workspacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):e.type===Zt().T.SingleLegalHoldMemberUser?(0,i.jsx)(er,{organizationMember:e.organizationMember}):e.type===Zt().T.SingleLegalHoldMemberGuest?(0,i.jsx)(cr,{organizationGuest:e.organizationGuest}):e.type===Zt().T.SingleLegalHoldMemberDeletedUser?null:(0,Ee().HB)(e),widthData:{widthPercent:25,minWidth:80},sortable:!1},xr={id:"email",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:240}}):e.type===Zt().T.SingleLegalHoldMemberUser?(0,i.jsx)(js().xF,{userId:e.organizationMember.userId}):e.type===Zt().T.SingleLegalHoldMemberGuest?(0,i.jsx)(js().xF,{userId:e.organizationGuest.userId}):e.type===Zt().T.SingleLegalHoldMemberDeletedUser?null:(0,Ee().HB)(e),widthData:{widthPercent:25,minWidth:80},sortable:!1};function vr(e){let{data:t,loading:a,currentPage:n,setCurrentPage:o,selectedIds:r,onSelectAll:l,onUnselectAll:d,onSelectRow:c,legalHoldId:u,onRemoveMembersSuccess:g,onRemoveLastMembersSuccess:m}=e;const[p,h]=(0,s.useState)(),[f,x]=(0,s.useState)(),b=s.useMemo((()=>[pr,hr,fr,xr]),[]),y=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:b,theme:e,containerMarginTop:0})),[b]),S=t.map((e=>"user"===e.type||"guest"===e.type?e.userId:"deleted"===e.type?e.deletedMemberId:(0,Ee().HB)(e))),w=s.useCallback((e=>{h(e),S.includes(e)&&1===S.length?x(ur.ReleaseLegalHold):x(ur.RemoveFromLegalHold)}),[h,x,S]),A=t.map((e=>{const t={onRemoveMember:w};return"user"===e.type?{id:e.userId,organizationMember:e,isClickable:!0,type:Zt().T.SingleLegalHoldMemberUser,...t}:"guest"===e.type?{id:e.userId,organizationGuest:e,isClickable:!0,type:Zt().T.SingleLegalHoldMemberGuest,...t}:"deleted"===e.type?{id:e.deletedMemberId,deletedMemberId:e.deletedMemberId,type:Zt().T.SingleLegalHoldMemberDeletedUser,isClickable:!0,...t}:(0,Ee().HB)(e)})),M=a?(0,Zt().n)():A.slice(at().q*(n-1),at().q*n),C=A.length>at().q*n,I=1!==n,T={header:{isDisabled:a,isSelected:r.length>0&&r.length===t.length,onClick:()=>{r.length===t.length?d():l()}},row:{getDisabledState:e=>a,getSelectedState:e=>e.type===Zt().T.SingleLegalHoldMemberUser?r.includes(e.organizationMember.userId):e.type===Zt().T.SingleLegalHoldMemberGuest?r.includes(e.organizationGuest.userId):e.type===Zt().T.SingleLegalHoldMemberDeletedUser&&r.includes(e.deletedMemberId),onClick:e=>{e.type===Zt().T.SingleLegalHoldMemberUser&&c(e.organizationMember.userId),e.type===Zt().T.SingleLegalHoldMemberGuest&&c(e.organizationGuest.userId),e.type===Zt().T.SingleLegalHoldMemberDeletedUser&&c(e.deletedMemberId)}}},k=s.useCallback((()=>{x(void 0),h(void 0)}),[x,h]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Et().WE,{columnRenderInfo:b,hideHeaderRowPadding:!0,rows:M,renderNoRowsComponent:()=>(0,i.jsx)(Yt,{title:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.empty.byline",defaultMessage:"There are no members that match this query"})}),styles:y,showRowBorders:!0,allowHorizontalScroll:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{C&&o(n+1)},onLoadPrevious:()=>{I&&o(n-1)},hasNextPage:C,hasPrevPage:I,currentPage:n},setStickyHeaderRow:!0,multiselect:T,extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}}),f===ur.RemoveFromLegalHold&&p?(0,i.jsx)(dr,{userIdsToRemove:[p],allUserIds:S,legalHoldId:u,onDismiss:k,onSuccess:g}):null,f===ur.ReleaseLegalHold&&p?(0,i.jsx)(lr,{userIdsToRemove:[p],legalHoldId:u,onDismiss:k,onSuccess:m}):null]})}const br=(0,v().YK)({members:{id:"settingsConsole.singleLegalHoldMembersTab.title",defaultMessage:"Hold Members"},membersLabel:{id:"settingsConsole.singleLegalHoldMembersTab.label",defaultMessage:"View members currently on hold"},placeholder:{id:"settingsConsole.singleLegalHoldMembersTab.search.placeholder",defaultMessage:"Search by member name or email"}}),yr=(0,v().YK)({name:{id:"settingsConsole.singleLegalHoldMembersTab.sort.name",defaultMessage:"Name"},role:{id:"settingsConsole.singleLegalHoldMembersTab.sort.role",defaultMessage:"Highest role"}}),Sr=[{id:"actor",name:k().A.formatMessage(yr.name),type:"title"},{id:"role",name:k().A.formatMessage(yr.role),type:"text"}],jr=[...xn,{key:"guest",value:"guest",title:(0,i.jsx)(v().sA,{id:"legalHoldsMembers.table.filters.userRole.guest",defaultMessage:"Guest"})}];var wr=function(e){return e.AddMember="add-member",e.RemoveMember="remove-member",e.RemoveLastMembers="remove-last-members",e}(wr||{});function Ar(e){let{legalHoldId:t,organizationId:a,setSelectedTab:n,refetchLegalHold:o}=e;const r=(0,v().tz)(),[l,d]=s.useState(),[c,u]=s.useState([]),[g,m]=s.useState([]),[p,h]=s.useState(void 0),[f,x]=s.useState(!1),[b,S]=s.useState(),[j,w]=s.useState(),[A,C]=s.useState(1),{members:I,guests:T,deletedMembersIds:k,allIdsInLegalHold:_,loading:z,refetch:D}=function(e){const t=(0,y().v3)(),{organizationId:a,legalHoldId:n,selectedSpaceIds:o,selectedUserRoles:i,query:r,sort:l}=e,{members:d,loading:c,refetch:u}=zo({legalHoldId:n}),g=d.join(","),m=o.join(","),p=i.join(","),h=function(e){if(e)return"actor"===e.propertyId?{columnName:"actor",direction:e.direction}:"role"===e.propertyId?{columnName:"role",direction:e.direction}:void 0}(l),f=null==h?void 0:h.columnName,x=null==h?void 0:h.direction,v=0===d.length,[{status:b,value:S}]=(0,tt().Yb)((async()=>{if(v||"guest"===p)return;const e=g.split(","),s=m.length>0?m.split(","):void 0,n=p.length>0?p.split(","):void 0,o=null==n?void 0:n.filter((e=>"guest"!==e)),i=await M().callApi({eventName:"getMembersInOrganization",environment:t,data:{organizationId:a,filters:{userIds:e,spaceIds:s,roles:o},limit:e.length,query:r,sort:f&&x?{columnName:f,direction:x}:void 0}});if("success"===i.type)return{members:i.data.members};if("failed"===i.type)throw i.error;return(0,Ee().HB)(i)}),[t,a,g,m,p,r,f,x,v]),[{status:j,value:w}]=(0,tt().Yb)((async()=>{if(v)return;const e=g.split(","),s=m.length>0?m.split(","):void 0,n=await M().callApi({eventName:"getGuestsInOrganization",environment:t,data:{organizationId:a,filters:{userIds:e,spaceIds:s},limit:e.length,query:r}});if("success"===n.type)return n.data;if("failed"===n.type)throw n.error;return(0,Ee().HB)(n)}),[t,a,g,m,r,v]),A=(0,s.useMemo)((()=>(null==S?void 0:S.members)??[]),[S]),C=(0,s.useMemo)((()=>new Set(A.map((e=>e.userId)))),[A]),I=(0,s.useMemo)((()=>(null==w?void 0:w.guests.map((e=>({...e,lastActiveTime:(null==w?void 0:w.guestIdToLastActive[e.userId])??void 0}))).filter((e=>!C.has(e.userId))))??[]),[w,C]),T=0===o.length&&0===i.length&&!r,k=(0,s.useMemo)((()=>T?d.filter((e=>!A.some((t=>t.userId===e))&&!I.some((t=>t.userId===e)))):[]),[d,A,I,T]);return{loading:c||"pending"===b||"pending"===j,members:A,guests:I,deletedMembersIds:k,allIdsInLegalHold:d,refetch:u}}({organizationId:a,legalHoldId:t,selectedSpaceIds:g,selectedUserRoles:c,query:p,sort:null==j?void 0:j[0]}),P=Do({spaceStores:(0,Ts().l)()}),N=(0,Hn().F)(),R=(0,s.useMemo)((()=>[...I.map((e=>({...e,type:"user"}))),...T.map((e=>({...e,type:"guest"}))),...k.map((e=>({type:"deleted",deletedMemberId:e})))]),[I,T,k]),{selectedIds:B,handleToggleId:E,handleSelectAllIds:L,handleUnselectAllIds:O}=Ut({allPossibleIds:_}),U=s.useCallback((async()=>{C(1),w(void 0),S(void 0),h(void 0),u([]),m([]),await D()}),[D]),F=s.useCallback((async()=>{await o(),n("general")}),[n,o]);return(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:r.formatMessage(br.members),byline:r.formatMessage(br.membersLabel)}),(0,i.jsxs)("div",{style:N.tableHeader,children:[(0,i.jsxs)("div",{style:N.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:B.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(Fa,{itemsSelectedCount:B.length}),onClick:O}),(0,i.jsx)(Ua,{icon:Ss,title:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTab.multiselect.removeFromLegalHold",defaultMessage:"Remove from legal hold"}),onClick:()=>{B.length===_.length?d(wr.RemoveLastMembers):d(wr.RemoveMember)}})]}),(0,i.jsx)(Wa().e,{preventMultipleSorts:!0,sortProperties:Sr,isMenuOpen:f,setIsMenuOpen:x,onApply:e=>{x(!1),w(e),S(void 0),C(1)},currentSorts:b??j??[]}),(0,i.jsx)(hn,{setUserRoles:e=>{u(e),C(1)},selectedUserRoles:c,roles:jr}),(0,i.jsx)(Uo,{selectedSpaceIds:g,setSelectedSpaceIds:e=>{m(e),C(1)},spaceData:P})]}),(0,i.jsxs)("div",{style:N.rightContent,children:[(0,i.jsx)(Va().x,{appliedSorts:j,openSortPillMenu:e=>{e&&S([{propertyId:e,direction:"ascending"}]),x(!0)},sortProperties:Sr}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:p,setQueryFilter:e=>{h(e),C(1)},placeholderText:r.formatMessage(br.placeholder)}),(0,i.jsx)(W().A,{onClick:()=>{d(wr.AddMember)},disabled:z,children:(0,i.jsx)(v().sA,{id:"legalHoldsMembers.button.addMember",defaultMessage:"Add member"})})]})]}),(0,i.jsx)(vr,{data:R,loading:z,currentPage:A,setCurrentPage:C,selectedIds:B,onSelectAll:L,onUnselectAll:O,onSelectRow:E,legalHoldId:t,onRemoveMembersSuccess:U,onRemoveLastMembersSuccess:F}),l===wr.AddMember?(0,i.jsx)(rr,{onDismiss:()=>d(void 0),onSuccess:U,legalHoldId:t,organizationId:a,userIdsAlreadyInLegalHold:_}):null,l===wr.RemoveMember?(0,i.jsx)(dr,{onDismiss:()=>d(void 0),onSuccess:U,legalHoldId:t,userIdsToRemove:B,allUserIds:_}):null,l===wr.RemoveLastMembers?(0,i.jsx)(lr,{onDismiss:()=>d(void 0),onSuccess:F,legalHoldId:t,userIdsToRemove:B}):null]})}var Mr=()=>a(155342),Cr=()=>a(348588),Ir=()=>a(884373),Tr=()=>a(731942);function kr(e){let{iconFunction:t,label:a,value:s,disabled:n}=e;const o=(0,v().tz)(),r=(0,j().IS)((e=>({label:{color:e.text.secondary,minWidth:140,display:"flex",flexDirection:"row",gap:6,opacity:n?.3:1,alignItems:"center"},value:{color:e.text.primary,overflow:"hidden",opacity:n?.3:1},icon:{width:16,height:16}})),[n]);return(0,i.jsxs)(oe().fI,{gap:4,alignItems:"center",height:"100%",children:[(0,i.jsxs)("div",{style:r.label,children:[t(r.icon),(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",children:o.formatMessage(a)})]}),(0,i.jsx)(D().D,{styleName:"Body-14px/Regular",style:r.value,children:s})]})}function _r(e){let{startDate:t,endDate:a}=e;return void 0===t?null:(0,i.jsx)(v().sA,{id:"legalHold.general.holdRange",defaultMessage:"{startDate} - {endDate}",values:{startDate:(0,i.jsx)(v().XU,{value:t,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}),endDate:a?(0,i.jsx)(v().XU,{value:a,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}):(0,i.jsx)(v().sA,{id:"legalHold.general.holdRange.ongoing",defaultMessage:"Ongoing"})}})}var zr=()=>a(199300);function Dr(e,t){if(t)return{pointer:{table:zr().PX,id:e},icon:t}}function Pr(e){let{legalHoldId:t,legalHoldName:a,legalHoldIcon:s,size:n=Yn().tR,emojiSize:o=Yn().Gz}=e;const r=Dr(t,s);return(0,i.jsx)(L().B,{size:n,emojiSize:o,disabled:!0,icon:r,isEmptyPage:!1,title:a,isLarge:!0,isRaw:!1})}function Nr(e){let{userIds:t,totalCount:a}=e;const s=(0,y().v3)(),n=(0,S().K8)((()=>t.map((e=>new(z().LU)(s,{table:w().oo,id:e})))),[t,s]);return(0,i.jsx)(Dn().l,{userStores:n,useSecondaryColorTitle:!0,totalCount:a,useIconsOnly:!0})}function Rr(e){let t,a,s,{status:n}=e;switch(n){case"active":t=(0,i.jsx)(v().sA,{id:"legalHoldsTable.status.active",defaultMessage:"Active"}),a="yellow",s=pi().XA.light.yellow[100];break;case"released":t=(0,i.jsx)(v().sA,{id:"legalHoldsTable.status.released",defaultMessage:"Released"}),s=pi().XA.light.gray[100],a="gray";break;default:(0,Ee().HB)(n)}return(0,i.jsx)(At().A,{format:mt().NY.Medium,value:t,isSingle:!0,showRemoveButton:!1,isRound:!0,backgroundColor:s,showColoredDot:a})}function Br(e){let{onDismiss:t,onSubmit:a}=e;const n=(0,v().tz)(),[o,r]=(0,s.useState)(!1),[l,d]=(0,s.useState)(!1),c=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:440,display:"flex",flexDirection:"column",alignItems:"center"},confirmationContainer:{display:"flex",gap:10,alignItems:"center"}})),[]);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:t,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,rt().J)(c.icon),title:n.formatMessage(Er.title),byline:n.formatMessage(Er.byline)}),footer:(0,i.jsx)(Y().jl,{primaryText:n.formatMessage(Er.buttonText),primaryAction:async()=>{r(!0),await async function(){await a(),t()}(),r(!1)},primaryDisabled:o||!l,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.destructiveUserAction.cancelButton",defaultMessage:"Cancel"}),secondaryAction:t,isDarkRed:!0}),children:(0,i.jsx)("div",{style:c.container,children:(0,i.jsxs)("div",{style:c.confirmationContainer,children:[(0,i.jsx)(dt().A,{checked:l,size:14,checkSize:10,onClick:()=>d(!l)}),(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:n.formatMessage(Er.confirmationText)})]})})})})}const Er=(0,v().YK)({title:{id:"orgConsole.legalHolds.modal.releaseLegalHold.title",defaultMessage:"Are you sure you want to release this hold?"},byline:{id:"orgConsole.legalHolds.modal.releaseLegalHold.byline",defaultMessage:"This action is final and any members and pages deleted after release will be permanently deleted."},confirmationText:{id:"orgConsole.legalHolds.modal.releaseLegalHold.confirmationText",defaultMessage:"I understand the actions of releasing legal hold"},buttonText:{id:"orgConsole.legalHolds.modal.releaseLegalHold.buttonText",defaultMessage:"Release legal hold"}});function Lr(e){let{onClick:t}=e;return(0,i.jsx)(Le().E,{color:"uiRed",onClick:t,children:(0,i.jsx)(v().sA,{id:"legalHold.general.release.button",defaultMessage:"Release legal hold"})})}const Or=(0,v().YK)({holdRangeLabel:{id:"legalHold.general.details.holdRange",defaultMessage:"Hold from"},holdRangeLabelViewedFrom:{id:"legalHold.general.details.holdRange.viewedFrom",defaultMessage:"Viewed from"},holdRangeLabelEditedFrom:{id:"legalHold.general.details.holdRange.editedFrom",defaultMessage:"Edited from"},holdRangeLabelCreatedFrom:{id:"legalHold.general.details.holdRange.createdFrom",defaultMessage:"Created from"},createdByLabel:{id:"legalHold.general.details.createdBy",defaultMessage:"Created by"},workspacesLabel:{id:"legalHold.general.details.workspaces",defaultMessage:"Workspaces"},createdAtLabel:{id:"legalHold.general.details.createdAt",defaultMessage:"Created at"},manageLegalHoldTitle:{id:"legalHold.general.manage.title",defaultMessage:"Manage legal hold"},releaseLegalHoldLabel:{id:"legalHold.general.release.label",defaultMessage:"Release legal hold"},releaseLegalHoldDescription:{id:"legalHold.general.release.description",defaultMessage:"By releasing this legal hold, pages that are past their retention period will be deleted. This action can not be undone."},disabledTooltipText:{id:"legalHold.general.edit.disabledTooltipText",defaultMessage:"This legal hold has been released and cannot be edited."}}),Ur={"page.viewed":(0,i.jsx)(v().sA,{id:"legalHold.general.pages.tooltip.viewed",defaultMessage:"The associated page count will change over time for ongoing legal holds as users view more pages"}),"page.edited":(0,i.jsx)(v().sA,{id:"legalHold.general.pages.tooltip.edited",defaultMessage:"The associated page count will change over time for ongoing legal holds as users edit more pages"}),"page.created":(0,i.jsx)(v().sA,{id:"legalHold.general.pages.tooltip.created",defaultMessage:"The associated page count will change over time for ongoing legal holds as users create more pages"})};function Fr(e){let{createdBy:t}=e;const a=(0,y().v3)(),s=(0,S().K8)((()=>{if(t)return new(vt().L)(a,{table:w().oo,id:t})}),[t,a]);return s?(0,i.jsx)(Dn().l,{userStores:[s]}):null}function Hr(e){let{legalHoldId:t,setSelectedTab:a,legalHold:n,loading:o,refetchLegalHold:r}=e;const l=(0,v().tz)(),[d,c]=(0,s.useState)(""),[u,g]=(0,s.useState)(""),[m,p]=(0,s.useState)(!1),{updateLegalHold:h}=Ii(),{name:x,description:b,icon:y}=n??{},S=(0,j().IS)((e=>({icon:{height:16,width:16,fill:e.text.secondary},releaseLegalHoldByline:{width:450}})),[]);(0,s.useEffect)((()=>{x&&c(x),b&&g(b)}),[x,b]);const{longTallShimmer:w,longShimmer:A,shortShimmer:M}=(0,de().Z)(),C=Dr(t,null==n?void 0:n.icon),I=(0,s.useCallback)((e=>{g(e||"")}),[g]),T=(0,s.useCallback)((e=>{c(e||"")}),[c]),k=(0,s.useCallback)((()=>{c(x||""),g(b||"")}),[x,b]),_=(0,s.useCallback)((async e=>{const a=await h({legalHoldId:t,icon:e});a.icon&&a.icon!==y&&await r()}),[t,h,r,y]),z=(0,s.useCallback)((()=>{p(!0)}),[]),P=(0,s.useCallback)((async()=>{await h({legalHoldId:t,status:"released"}),await r()}),[t,h,r]),N=(0,s.useMemo)((()=>{var e,t;return null!=n&&n.userInteractionType?null!=n&&null!==(e=n.userInteractionType)&&void 0!==e&&e.includes("page.viewed")?Or.holdRangeLabelViewedFrom:null!=n&&null!==(t=n.userInteractionType)&&void 0!==t&&t.includes("page.edited")?Or.holdRangeLabelEditedFrom:Or.holdRangeLabelCreatedFrom:Or.holdRangeLabel}),[null==n?void 0:n.userInteractionType]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(J,{}),(0,i.jsxs)(te,{children:[(0,i.jsx)(Z,{title:(0,i.jsx)(v().sA,{id:"legalHold.general.edit.title",defaultMessage:"Edit legal hold details"}),byline:(0,i.jsx)(v().sA,{id:"legalHold.general.edit.byline",defaultMessage:"Edit this legal hold's name below. Changes will take effect immediately upon saving."}),icon:un().personCircleFillIcon,localIconWithPointer:C,onSave:async()=>{const e=await h({legalHoldId:t,name:""===d?void 0:d,description:""===u?void 0:u});e.name&&e.name!==d&&c(e.name),e.description&&e.description!==u&&g(e.description),await r()},onCancel:k,onNameChange:T,onIconChange:_,entityName:(null==n?void 0:n.name)||"",disabled:"released"===(null==n?void 0:n.status),disabledTooltipText:l.formatMessage(Or.disabledTooltipText),entityDescription:(0,i.jsxs)(oe().VP,{marginTop:2,alignItems:"flex-start",gap:12,children:[o?(0,i.jsx)(le().A,{style:M}):n&&(0,i.jsx)(Rr,{status:n.status}),o?(0,i.jsx)(le().A,{style:A}):n&&(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:n.description})]}),onDescriptionChange:I,entityDescriptionText:null==n?void 0:n.description}),(0,i.jsxs)(oe().VP,{gap:40,children:[(0,i.jsxs)(Tr().xA,{gap:12,children:[(0,i.jsx)(Tr().LX,{row:1,col:1,children:(0,i.jsx)(kr,{iconFunction:Cr().D,label:N,value:(0,i.jsx)(_r,{startDate:null==n?void 0:n.startDate,endDate:null==n?void 0:n.endDate})},"holdRange")}),(0,i.jsx)(Tr().LX,{row:1,col:2,children:(0,i.jsx)(kr,{iconFunction:un().personCircleFillIcon,label:Or.createdByLabel,value:(0,i.jsx)(Fr,{createdBy:null==n?void 0:n.createdBy})},"createdBy")}),(0,i.jsx)(Tr().LX,{row:2,col:1,children:(0,i.jsx)(kr,{iconFunction:f().V,label:Or.workspacesLabel,value:(0,i.jsx)(fi,{workspaceIds:(null==n?void 0:n.workspaces.ids)||[],totalCount:(null==n?void 0:n.workspaces.total)||0})},"workspaces")}),(0,i.jsx)(Tr().LX,{row:2,col:2,children:(0,i.jsx)(kr,{iconFunction:Cr().D,label:Or.createdAtLabel,value:(0,i.jsx)(v().XU,{value:null==n?void 0:n.createdTime,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})},"createdAt")})]}),(0,i.jsxs)(oe().fI,{gap:12,wrap:"wrap",children:[(0,i.jsx)(ae().A,{isLoading:o,headerText:(0,i.jsx)(v().sA,{id:"legalHold.general.members.title",defaultMessage:"Members on hold"}),mainText:n?(0,i.jsx)(v().sA,{id:"legalHold.general.members.count",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:n.users.total}}):(0,i.jsx)(le().A,{style:w}),bottom:(0,i.jsx)(Nr,{userIds:(null==n?void 0:n.users.ids)||[],totalCount:(null==n?void 0:n.users.total)||0}),onClick:()=>{a("members")}}),(0,i.jsx)(ae().A,{disabled:"active"!==(null==n?void 0:n.status),isLoading:o,headerText:(0,i.jsxs)(oe().fI,{gap:4,children:[(0,i.jsx)(v().sA,{id:"legalHold.general.pages.title",defaultMessage:"Associated pages"}),"active"===(null==n?void 0:n.status)&&(0,i.jsx)(G().A,{style:{width:238},textWrap:!0,renderTooltip:()=>null!=n&&n.userInteractionType?Ur[n.userInteractionType[0]]:null,render:e=>(0,i.jsx)("div",{...e,children:(0,Mr().questionMarkCircleIcon)(S.icon)})})]}),mainText:n?(0,i.jsx)(v().sA,{id:"legalHold.general.pages.count",defaultMessage:"{pageCount, plural, one {{pageCount} page} other {{pageCount} pages}}",values:{pageCount:n.pages.total}}):(0,i.jsx)(le().A,{style:w}),bottom:(0,i.jsx)(Vr,{pages:(null==n?void 0:n.pages.ids)||[],totalCount:(null==n?void 0:n.pages.total)||0,isLoading:o}),onClick:()=>{a("browse_content")}})]}),"active"===(null==n?void 0:n.status)&&(0,i.jsxs)("div",{children:[(0,i.jsx)(Ir().A,{size:1}),(0,i.jsx)(ie,{title:l.formatMessage(Or.manageLegalHoldTitle),content:(0,i.jsx)(Ae().y,{title:l.formatMessage(Or.releaseLegalHoldLabel),byline:(0,i.jsx)("div",{style:S.releaseLegalHoldByline,children:l.formatMessage(Or.releaseLegalHoldDescription)}),item:(0,i.jsx)(Lr,{onClick:z})})})]})]}),m&&(0,i.jsx)(Br,{onDismiss:()=>p(!1),onSubmit:P})]})]})}function Vr(e){let{pages:t,totalCount:a,isLoading:n}=e;const o=(0,y().v3)(),{organizationOwnerRecordCache:r}=(0,s.useContext)(N().N),l=(0,S().K8)((()=>t.map((e=>new(To().B)(o,{table:aa().ev,id:e},{inMemoryRecordCache:r})))),[t,o,r]);return(0,i.jsx)(ee().ng,{blockStores:l,totalCount:a,showTooltip:!0,isLoading:n})}var Wr=()=>a(144868),qr=()=>a(308439),Gr=()=>a(772357);function Kr(e){let{organizationStore:t,userStore:a,groupStore:n,onDismiss:o,onCloseOuterModal:r}=e;const l=(0,y().v3)(),d=(0,v().tz)(),{updateCacheWithRecordMap:c}=(0,s.useContext)(N().N),{userData:u}=Vi({userStore:a,organizationStore:t}),g=(0,S().K8)((()=>{var e;const t=n.getSpaceId();return t?null===(e=u.userSpaceAccessMap.get(t))||void 0===e?void 0:e.role:void 0}),[u,n]),m=(0,S().K8)((()=>{var e;return null===(e=n.getSpaceStore())||void 0===e?void 0:e.getName()}),[n]),p=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:Y().J2},header:{width:Y().J2}})),[]);const[h,f]=(0,s.useState)(!1);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)("div",{style:p.header,children:(0,i.jsx)(Y().rQ,{icon:(0,qr().exclamationMarkTriangleIcon)(p.icon),title:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.modal.title",defaultMessage:"Are you sure you want to delete this group?"}),byline:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.modal.byline",defaultMessage:"Deleting this group will remove member access to pages and teamspaces. Any pages that are private to this group will be transferred to you."})})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.modal.primaryAction",defaultMessage:"Delete group"}),primaryAction:async()=>{f(!0),await async function(){const e=n.getSpaceId(),a=n.getGroupId();if(!e||!a)return;const s=await M().callApi({eventName:"deleteGroupsInOrganizationSpace",environment:l,data:{organizationId:t.id,spaceId:e,groupIds:[a]}});"success"===s.type?((0,I().u4)({environment:l,event:{eventName:"org_console_general_delete_entity",eventProperties:{entity:"group",organization_id:t.id,space_id:e}}}),c({data:s.data}),o(),r(),(0,I().u4)({environment:l,event:{eventName:"org_console_delete_group_in_space",eventProperties:{organization_id:t.id,space_id:e}}})):C().f1((0,T().Hu)(d,s))}(),f(!1)},primaryDisabled:h,secondaryText:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:o,isLightRed:!0}),children:"editor"!==g?(0,i.jsx)("div",{style:p.container,children:(0,i.jsx)(Gr().l,{display:"inline",tint:"gray",iconGroup:Wr().Z,label:(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",children:m?(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.modal.notInWorkspaceWarning",defaultMessage:"<b>You are not an owner of this workspace</b>. By deleting this group you will join the <b>{workspaceName}</b> workspace as workspace owner.",values:{b:e=>(0,i.jsx)("b",{children:e}),workspaceName:m}}):(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.modal.notInWorkspaceWarningNoName",defaultMessage:"<b>You are not an owner of this workspace</b>. By deleting this group you will join this group's workspace as workspace owner.",values:{b:e=>(0,i.jsx)("b",{children:e})}})})})}):null})})}function Yr(e){let{organizationId:t,membersState:a,teamsState:n,groupStore:o,setSelectedTab:r,onCloseModal:l}=e;const d=(0,y().v3)(),c=(0,v().tz)(),{updateCacheWithRecordMap:u}=(0,s.useContext)(N().N),g=(0,j().IS)((e=>({tilesContainer:{display:"flex",gap:12,flexWrap:"wrap"},dotSeparator:{margin:"0 4px"}})),[]),[p,h]=(0,s.useState)(""),f=(0,S().K8)((()=>o.getName()),[o]),x=(0,S().K8)((()=>o.getIcon()),[o]);return(0,s.useEffect)((()=>{h(f||"")}),[f]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(J,{}),(0,i.jsxs)(te,{children:[(0,i.jsx)(Z,{title:(0,i.jsx)(v().sA,{id:"organization.general.organization.group.title",defaultMessage:"Edit group details"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.organization.group.byline",defaultMessage:"Edit this group's name below. Changes will take effect immediately upon saving."}),icon:m().peopleIcon,onSave:async function(){if(p===f)return;const e=o.getSpaceId(),a=o.getGroupId();if(!e||!a)return;const s=await M().callApi({eventName:"updateGroupsInOrganizationSpace",environment:d,data:{organizationId:t,spaceId:e,groupIds:[a],name:p}});"success"===s.type?(u(s),(0,I().u4)({environment:d,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:e,update_type:"name"}}})):C().f1((0,T().Hu)(c,s))},onCancel:function(){h(f||"")},onIconChange:async function(e){const a=o.getSpaceId(),s=o.getGroupId();if(!a||!s)return;const n=await M().callApi({eventName:"updateGroupsInOrganizationSpace",environment:d,data:{organizationId:t,spaceId:a,groupIds:[s],icon:e}});"success"===n.type?(u(n),(0,I().u4)({environment:d,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:a,update_type:"icon"}}})):C().f1((0,T().Hu)(c,n))},onNameChange:e=>h(e||""),localIconWithPointer:x?{pointer:o.pointer,icon:x}:void 0,entityName:f||"",entityDescription:(0,i.jsxs)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:[(0,i.jsx)(ge().Qq,{memberCount:a.members.length}),(0,i.jsx)(P().A,{style:g.dotSeparator}),(0,i.jsx)(ge().tL,{teamCount:n.teamStores.length})]})}),(0,i.jsxs)("div",{style:g.tilesContainer,children:[(0,i.jsx)(ue,{memberCount:a.members.length,sampleMemberUserStores:a.members.slice(0,5),onClick:()=>r("members"),isLoading:a.loading}),(0,i.jsx)(ae().A,{isLoading:n.loading,headerText:(0,i.jsx)(v().sA,{id:"organization.group.teamspace.title",defaultMessage:"Associated teamspaces"}),mainText:(0,i.jsx)(v().sA,{id:"organization.group.teamspace.count",defaultMessage:"{teamspaceCount, plural, one {{teamspaceCount} teamspace} other {{teamspaceCount} teamspaces}}",values:{teamspaceCount:n.teamStores.length}}),bottom:(0,i.jsx)(ee().tv,{teamStores:n.teamStores,isLoading:n.loading}),onClick:()=>r("teamspaces")})]}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.title",defaultMessage:"Manage group"}),content:(0,i.jsxs)(Se().L,{children:[(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.createTeamspace.title",defaultMessage:"Create teamspace"}),byline:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.createTeamspace.byline",defaultMessage:"Create a new teamspace using the information and members from this group"}),item:(0,i.jsx)(Qr,{organizationId:t,groupStore:o})}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.title",defaultMessage:"Delete group"}),byline:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.byline",defaultMessage:"Remove this group from the workspace permanently"}),item:(0,i.jsx)($r,{organizationId:t,groupStore:o,onCloseModal:l})})]})})]})]})}function Qr(e){const{organizationId:t,groupStore:a}=e,[n,o]=(0,s.useState)(!1),r=(0,_a().E)({organizationId:t}),l=(0,S().K8)((()=>{const e=a.getGroupId();return e?{type:"owner",entity_type:"group",group_id:e}:void 0}),[a]),d=(0,S().K8)((()=>a.getSpaceStore()),[a]);return r&&d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V().A,{size:"md",onClick:()=>{Wn().A.setState({...Wn().A.state,name:a.getName()||""}),o(!0)},children:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.createTeamspace.button",defaultMessage:"Create teamspace"})}),n?(0,i.jsx)(Gn,{organizationId:t,spaceStore:d,onDismiss:()=>o(!1),owner:l}):null]}):null}function $r(e){const{organizationId:t,groupStore:a,onCloseModal:n}=e,o=(0,y().v3)(),[r,l]=(0,s.useState)(!1),d=(0,_a().E)({organizationId:t}),c=(0,S().K8)((()=>{if(ve().default.state.currentUserStore)return new(z().LU)(o,{table:w().oo,id:ve().default.state.currentUserStore.id})}),[o]);return d&&c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Le().E,{color:"uiRed",onClick:()=>l(!0),children:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.button",defaultMessage:"Delete group"})}),r?(0,i.jsx)(Kr,{organizationStore:d,userStore:c,groupStore:a,onCloseOuterModal:n,onDismiss:()=>{l(!1)}}):null]}):null}function Xr(e){let{organizationId:t,onDismiss:a,groupStore:n,userIds:o}=e;const r=(0,y().v3)(),l=(0,v().tz)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(N().N),[c,u]=(0,s.useState)(!1),g=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:Y().J2}})),[]);async function m(){u(!0);const e=n.getSpaceId(),s=n.getGroupId();if(!e||!s)return void u(!1);const i=await M().callApi({eventName:"updateGroupsInOrganizationSpace",environment:r,data:{organizationId:t,spaceId:e,groupIds:[s],removeMembers:o}});"success"===i.type?(d({data:i.data}),a(),u(!1),(0,I().u4)({environment:r,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:e,update_type:"remove_members"}}})):C().f1((0,T().Hu)(l,i))}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(H().tf,{showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{icon:Ss(g.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToGroupModal.title",defaultMessage:"Remove members from group"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToGroupModal.byline",defaultMessage:"Confirm that you want to remove <bold>{count} {count, plural, one {user} other {users}}</bold> from this group, revoking access to all content that this group owns.",values:{count:o.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToGroupModal.button.remove",defaultMessage:"Remove {count, plural, one {user} other {users}}",values:{count:o.length}}),primaryAction:m,primaryDisabled:c,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToGroupModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:g.content,children:(0,i.jsx)(Ds,{userIds:o})})})})}const Zr=(0,v().YK)({name:{id:"organization.group.members.nameColumn.header",defaultMessage:"Name"},email:{id:"organization.group.members.emailColumn.header",defaultMessage:"Email"},role:{id:"organization.group.members.roleColumn.header",defaultMessage:"Role"}}),Jr={id:"name",headerTitle:(0,i.jsx)(v().sA,{...Zr.name}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(ua,{userId:e.userId,useThinTitle:!1}),widthData:{widthPercent:33,minWidth:100},sortable:!1},el={id:"email",headerTitle:(0,i.jsx)(v().sA,{...Zr.email}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(js().xF,{userId:e.userId,styles:{overflow:"hidden"}}),widthData:{widthPercent:33,minWidth:100},sortable:!1},tl={id:"role",headerTitle:(0,i.jsx)(v().sA,{...Zr.role}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:120}}):function(e){let t=(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.member",defaultMessage:"Member"});switch(e){case"owner":t=(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.owner",defaultMessage:"Workspace owner"});break;case"membership_admin":t=(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.membershipAdmin",defaultMessage:"Membership admin"})}return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t})}(e.role),widthData:{widthPercent:33,minWidth:100},sortable:!1},al=[{id:Jr.id,name:k().A.formatMessage(Zr.name),type:"title"},{id:el.id,name:k().A.formatMessage(Zr.email),type:"title"},{id:tl.id,name:k().A.formatMessage(Zr.role),type:"title"}],sl=[Jr,el,tl];var nl=function(e){return e.AddToGroup="add-to-group",e.RemoveFromGroup="remove-from-group",e}(nl||{});function ol(e){let{organizationId:t,groupStore:a,onCloseModal:n,membersState:o}=e;const{organizationMemberEmailDomains:r}=(0,s.useContext)(R().D),l=(0,v().tz)(),d=(0,S().K8)((()=>a.getSpaceId()),[a]),c=(0,Hn().F)(),u=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:sl,theme:e,containerMarginTop:0})),[]),g=(0,S().K8)((()=>o.members.map((e=>({type:Zt().T.OrganizationGroupMember,id:e.id,name:e.getDisplayName(l),email:e.getEmail(),role:Pn(e.getRole()),userId:e.id,isClickable:!0})))),[o,l]),[p,h]=(0,s.useState)(),[f,x]=(0,s.useState)({}),[b,y]=(0,s.useState)(),[w,A]=(0,s.useState)(!1),[M,C]=(0,s.useState)(),I=M??b??[],T=(0,s.useMemo)((()=>{if(!g)return[];let e=g;return f.query&&(e=(0,ht().Ay)(f.query,e,(e=>e.name))),f.emailDomains&&f.emailDomains.length>0&&(e=e.filter((e=>{var t;const a=e.email?(0,pt().zN)(e.email):void 0;return!!a&&(null===(t=f.emailDomains)||void 0===t?void 0:t.includes(a))}))),f.roles&&f.roles.length>0&&(e=e.filter((e=>{var t;const a=e.role;return!!a&&(null===(t=f.roles)||void 0===t?void 0:t.includes(a))}))),function(e){const{rows:t,appliedSorts:a}=e,s=null!=a&&a.length?a:[{propertyId:tl.id,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===el.id?"email":t===tl.id?Nn:t===Jr.id?"name":Nn})),o=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Ee().HB)(t)}));return(0,et().My)(t,n,o)}({rows:e,appliedSorts:b})}),[g,f.roles,f.emailDomains,f.query,b]),k=Math.max(1,Math.ceil(T.length/at().q)),[_,z]=(0,s.useState)(0),D=T.slice(_*at().q,(_+1)*at().q),P=at().q*(_+1)<T.length,N=_>0;const{selectedRows:B,handleToggleRow:E,handleSelectAllRows:L,handleUnselectAllRows:O}=Ft({allPossibleRows:D});return!o.loading&&o.error?(0,i.jsx)($t,{error:o.error}):(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:(0,i.jsx)(v().sA,{id:"organization.groups.modal.members.title",defaultMessage:"Members"}),byline:(0,i.jsx)(v().sA,{id:"organization.groups.modal.members.byline",defaultMessage:"Add and remove members from this group to manage access across this workspace"})}),(0,i.jsxs)("div",{style:c.tableHeader,children:[(0,i.jsxs)("div",{style:c.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:B.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.group.membersTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:B.length}}),onClick:O}),(0,i.jsx)(Ua,{icon:Ss,title:(0,i.jsx)(v().sA,{id:"organization.group.membersTable.multiselect.remove",defaultMessage:"Remove from group"}),onClick:()=>h(nl.RemoveFromGroup)})]}),(0,i.jsx)(Fn().A,{children:(0,i.jsx)(Wa().e,{sortProperties:al,isMenuOpen:w,setIsMenuOpen:A,onApply:e=>{A(!1),y(e),C(void 0)},currentSorts:I})}),I.length>0?(0,i.jsx)(Un().he,{}):null,(0,i.jsx)(Qs,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.filters.email.title",defaultMessage:"Email"}),emailDomains:r,selectedEmailDomains:f.emailDomains||[],setSelectedEmailDomains:e=>{x((t=>({...t,emailDomains:e})))}}),(0,i.jsx)(hn,{setUserRoles:e=>x((t=>({...t,roles:e}))),selectedUserRoles:f.roles||[],roles:fn})]}),(0,i.jsxs)("div",{style:c.rightContent,children:[(0,i.jsx)(Va().x,{appliedSorts:b,openSortPillMenu:e=>{e&&C([{propertyId:e,direction:"ascending"}]),A(!0)},sortProperties:al}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:f.query,setQueryFilter:e=>{x((t=>({...t,query:e})))}}),(0,i.jsx)(W().A,{onClick:()=>{h(nl.AddToGroup)},children:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.button.addMembers",defaultMessage:"Add members"})})]})]}),p===nl.RemoveFromGroup?(0,i.jsx)(Xr,{organizationId:t,onDismiss:()=>{h(void 0),O()},groupStore:a,userIds:B.map((e=>e.userId))}):null,p===nl.AddToGroup&&d?(0,i.jsx)(Ea,{organizationId:t,onDismiss:()=>{h(void 0),O()},spaceId:d,groupStore:a}):null,(0,i.jsx)(Et().WE,{hideHeaderRowPadding:!0,rows:o.loading?(0,Zt().n)():D,columnRenderInfo:sl,styles:u,onRowClick:e=>{e.type!==Zt().T.Loading&&E(e)},renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:m().peopleIcon,title:(0,i.jsx)(v().sA,{id:"membersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(v().sA,{id:"membersTable.empty.byline",defaultMessage:"There are no members that match this query"})}),showRowBorders:!0,multiselect:{header:{isDisabled:o.loading,isSelected:D.length>0&&B.length===D.length,onClick:()=>{B.length===D.length?O():L()}},row:{getDisabledState:()=>o.loading,getSelectedState:e=>B.some((t=>t.id===e.id)),onClick:e=>{e.type!==Zt().T.Loading&&E(e)}}},loadMoreMethod:{type:"pages",onLoadNext:()=>{z((e=>P?e+1:e)),O()},onLoadPrevious:()=>{z((e=>Math.max(e-1,0))),O()},hasNextPage:P,hasPrevPage:N,currentPage:_+1,finalPage:k}})]})}var il=()=>a(308265);function rl(e){let{organizationId:t,onDismiss:a,groupStore:n,spaceStore:o,pageIds:r,removePagesFromGroup:l}=e;const d=(0,y().v3)(),c=(0,v().tz)(),{updateCacheWithRecordMap:u}=(0,s.useContext)(N().N),[g,m]=(0,s.useState)(!1),p=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:440}})),[]);async function h(){m(!0);const e=n.getSpaceId(),s=n.getGroupId();if(!e||!s)return void m(!1);const o=await M().callApi({eventName:"updateGroupsInOrganizationSpace",environment:d,data:{organizationId:t,spaceId:e,groupIds:[s],removePages:r}});if("success"!==o.type)return C().f1((0,T().Hu)(c,o)),void m(!1);u({data:o.data}),l(s,r),a(),m(!1),(0,I().u4)({environment:d,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:e,update_type:"remove_from_page"}}})}return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(H().tf,{showDismissButton:!1,header:(0,i.jsx)(Y().rQ,{icon:Ss(p.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.title",defaultMessage:"Remove group from pages"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.byline",defaultMessage:"Confirm that you want to remove this group from <bold>{count, plural, one {this page} other {these pages}} {count}</bold>, revoking this group’s access to that content.",values:{count:r.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.button.remove",defaultMessage:"Remove {count, plural, one {page} other {pages}}",values:{count:r.length}}),primaryAction:h,primaryDisabled:g,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:p.content,children:(0,i.jsx)(ll,{pageIds:r,spaceStore:o})})})})}function ll(e){const{pageIds:t,spaceStore:a}=e,n=(0,v().tz)(),o=(0,il().BG)(),r=sa({blockIds:t}),[l,d]=(0,s.useState)(""),c=(0,S().K8)((()=>r.map((e=>{var t,s;return{id:e.id,icon:(0,i.jsx)(L().B,{icon:null===(t=e.getModel())||void 0===t?void 0:t.getRenderIcon({getRecordModel:e.getRecordModel}),size:20,isEmptyPage:!1,disabled:!0}),name:null===(s=e.getModel())||void 0===s?void 0:s.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:(0,He().P)(),intl:n}),caption:(0,Xo().q7)({blockStore:e,spaceStore:a,intl:n,isWorkflowsAppContainerEnabled:o})}}))),[r,a,n,o]),u=(0,ht().Ay)(l,c,(e=>e.name??""));return(0,i.jsx)(Y().p6,{items:u,titleText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.pagesList.title",defaultMessage:"Selected pages"}),headerText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.pagesList.header",defaultMessage:"Page"}),headerAction:(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:l,setQueryFilter:d})})}const dl=(0,v().YK)({name:{id:"organization.group.pages.pageColumn.header",defaultMessage:"Page"},createdBy:{id:"organization.group.pages.createdByColumn.header",defaultMessage:"Created by"},createdOn:{id:"organization.group.pages.createdOnColumn.header",defaultMessage:"Created on"},audience:{id:"organization.group.pages.audienceColumn.header",defaultMessage:"Audience"}}),cl={id:"name",headerTitle:(0,i.jsx)(v().sA,{...dl.name}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(Xo().oc,{blockStore:e.blockStore,parentSpaceStore:e.spaceStore}),widthData:{widthPercent:30,minWidth:130},sortable:!1},ul={id:"createdBy",headerTitle:(0,i.jsx)(v().sA,{...dl.createdBy}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(Qo().T,{blockStore:e.blockStore,userIds:e.createdById?[e.createdById]:[]}),widthData:{widthPercent:18,minWidth:75},sortable:!1},gl={id:"createdOn",headerTitle:(0,i.jsx)(v().sA,{...dl.createdOn}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)($o().d,{useSecondaryColorTitle:!0,dateTs:e.createdOn}),widthData:{widthPercent:18,minWidth:75},sortable:!1},ml={id:"audience",headerTitle:(0,i.jsx)(v().sA,{...dl.audience}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:120}}):(0,i.jsx)(Ko().b,{useSecondaryColorTitle:!0,blockStore:e.blockStore,spaceStore:e.spaceStore}),widthData:{widthPercent:18,minWidth:75},sortable:!1},pl=[{id:cl.id,name:k().A.formatMessage(dl.name),type:"title"},{id:ul.id,name:k().A.formatMessage(dl.createdBy),type:"person"},{id:gl.id,name:k().A.formatMessage(dl.createdOn),type:"date"}],hl=[cl,ul,gl,ml];var fl=function(e){return e.RemoveGroupFromPage="remove-from-group",e}(fl||{});function xl(e){let{organizationId:t,groupStore:a,groupPageStores:n,removePagesFromGroup:o}=e;const r=oa({spaceId:(0,S().K8)((()=>a.getSpaceId()),[a])}),l=(0,Hn().F)(),c=(0,Gt().A)(),u=(0,j().IS)((e=>{const t=(0,Et().rC)({columnRenderInfo:hl,theme:e,containerMarginTop:0});return{...t,container:{...t.container,width:"calc(100% + 56px)"}}}),[]),g=hl.map((e=>({...e,headerStyle:c.tableHeader,rowStyle:c.tableRow}))),m=(0,S().K8)((()=>n.map((e=>{var t;return{type:Zt().T.OrganizationGroupPage,id:e.id,title:null===(t=e.getModel())||void 0===t?void 0:t.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:(0,He().P)(),intl:k().A.getIntl()}),blockId:e.id,blockStore:e,spaceStore:r,createdOn:e.getCreatedTime(),createdById:e.getCreatedById(),isClickable:!0}}))),[n,r]),p=(0,S().K8)((()=>(0,et().sb)(n.map((e=>e.getCreatedByPointer())).filter((e=>(null==e?void 0:e.table)===w().oo)).map((e=>e.id)))),[n]),[h,f]=(0,s.useState)(),[x,b]=(0,s.useState)({}),[y,A]=(0,s.useState)(),[M,C]=(0,s.useState)(!1),[I,T]=(0,s.useState)(),_=I??y??[],z=(0,s.useMemo)((()=>{if(!m)return[];let e=m;x.query&&(e=(0,ht().Ay)(x.query,e,(e=>e.title||"")));const t=x.createdByIds;return t&&t.length>0&&(e=e.filter((e=>!!e.createdById&&t.includes(e.createdById)))),function(e){const{rows:t,appliedSorts:a}=e,s=null!=a&&a.length?a:[{propertyId:cl.id,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===cl.id?"title":t===gl.id?"createdOn":t===ul.id?"createdById":"title"})),o=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Ee().HB)(t)}));return(0,et().My)(t,n,o)}({rows:e,appliedSorts:y})}),[m,x.query,x.createdByIds,y]),D=Math.max(1,Math.floor(z.length/at().q)),[P,N]=(0,s.useState)(0),R=z.slice(P*at().q,(P+1)*at().q),B=at().q*(P+1)<z.length,E=P>0;const{selectedRows:L,handleToggleRow:O,handleSelectAllRows:U,handleUnselectAllRows:F}=Ft({allPossibleRows:R});return(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:(0,i.jsx)(v().sA,{id:"organization.groups.modal.pages.title",defaultMessage:"Pages"}),byline:(0,i.jsx)(v().sA,{id:"organization.groups.modal.pages.byline",defaultMessage:"View all pages accessible to this group or remove their access"})}),(0,i.jsxs)("div",{style:l.tableHeader,children:[(0,i.jsxs)("div",{style:l.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:L.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.group.pagesTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:L.length}}),onClick:F}),(0,i.jsx)(Ua,{icon:Ss,title:(0,i.jsx)(v().sA,{id:"organization.group.pagesTable.multiselect.remove",defaultMessage:"Remove group from page"}),onClick:()=>f(fl.RemoveGroupFromPage)})]}),(0,i.jsx)(Fn().A,{children:(0,i.jsx)(Wa().e,{sortProperties:pl,isMenuOpen:M,setIsMenuOpen:C,onApply:e=>{C(!1),A(e),T(void 0)},currentSorts:_})}),_.length>0?(0,i.jsx)(Un().he,{}):null,(0,i.jsx)(Eo,{pillTitle:(0,i.jsx)(v().sA,{id:"organization.group.pagesTable.filters.createdBy",defaultMessage:"Created by"}),selectedUsers:x.createdByIds||[],setSelectedUsers:e=>{b((t=>({...t,createdByIds:e})))},userIds:p})]}),(0,i.jsxs)("div",{style:l.rightContent,children:[(0,i.jsx)(Va().x,{appliedSorts:y,openSortPillMenu:e=>{e&&T([{propertyId:e,direction:"ascending"}]),C(!0)},sortProperties:pl}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:x.query,setQueryFilter:e=>{b((t=>({...t,query:e})))}})]})]}),(0,i.jsx)(Et().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,rows:R,columnRenderInfo:g,styles:u,onRowClick:e=>{e.type!==Zt().T.Loading&&O(e)},renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:d().d,title:(0,i.jsx)(v().sA,{id:"pagesTable.empty",defaultMessage:"No pages found"}),byline:(0,i.jsx)(v().sA,{id:"pagesTable.empty.byline",defaultMessage:"There are no pages that match this query"})}),showRowBorders:!0,multiselect:{header:{isDisabled:!1,isSelected:R.length>0&&L.length===R.length,onClick:()=>{L.length===R.length?F():U()}},row:{getDisabledState:()=>!1,getSelectedState:e=>L.some((t=>t.id===e.id)),onClick:e=>{e.type!==Zt().T.Loading&&O(e)}}},loadMoreMethod:{type:"pages",onLoadNext:()=>{N((e=>B?e+1:e)),F()},onLoadPrevious:()=>{N((e=>Math.max(e-1,0))),F()},hasNextPage:B,hasPrevPage:E,currentPage:P+1,finalPage:D}}),h===fl.RemoveGroupFromPage?(0,i.jsx)(rl,{organizationId:t,onDismiss:()=>{f(void 0),F()},groupStore:a,spaceStore:r,pageIds:L.map((e=>e.blockId)),removePagesFromGroup:o}):null]})}var vl=()=>a(394591),bl=()=>a(31996),yl=()=>a(614046),Sl=()=>a(849417),jl=()=>a(634444),wl=()=>a(16456),Al=()=>a(518797);class Ml extends za().default{getInitialState(){return{auditLogPointer:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const Cl=new Ml;class Il extends za().default{getInitialState(){return{cachedResponses:{}}}getCursor(e,t,a){if(a<=1||!et().n4(this.state.pointer,e))return;const s=(0,yl()._)(t);if(this.state.filterStr!==s)return;const n=this.state.cachedResponses[a-1];return"success"===n.status?null==n?void 0:n.nextCursor:void 0}startLoading(e,t){this.updateResultHelper(e,t,{status:"loading"})}updateLoadedResult(e,t,a){this.updateResultHelper(e,t,{...a,status:"success",loadedAt:Date.now()})}updateError(e,t){this.updateResultHelper(e,t,{status:"error"})}updateResultHelper(e,t,a){const s=(0,yl()._)(t);1!==t.pageNum&&et().n4(this.state.pointer,e)&&this.state.filterStr===s?this.setState({pointer:e,filterStr:s,cachedResponses:{...this.state.cachedResponses,[t.pageNum]:{...a}}}):this.setState({pointer:e,filterStr:s,cachedResponses:{[t.pageNum||1]:{...a}}})}}const Tl=new Il,kl=(0,v().YK)({loadCurrentAuditLogError:{id:"auditlog.error.loadCurrentAuditLogError",defaultMessage:"Failed to load audit logs"}});async function _l(e){var t,a;const{environment:s,auditLogPointer:n,organizationId:o}=e,i=e.filters||yl().A.getState();Tl.startLoading(n,i);const{sortOrder:r,pageSize:l,pageNum:d}=i,c={limit:l,cursor:Tl.getCursor(n,i,d),filters:{timeRange:{starting:i.timeRange.starting?wl().C6.toUnixMs(i.timeRange.starting):void 0,ending:i.timeRange.ending?wl().C6.toUnixMs(i.timeRange.ending):void 0},...(null===(t=i.actors)||void 0===t?void 0:t.length)>0?{actors:i.actors}:void 0,...(null===(a=i.actions)||void 0===a?void 0:a.length)>0?{actions:i.actions}:void 0},sort:r||vl().K7.CreatedNewest};n.table===na().NX?await zl({environment:s,request:{...c,spaceId:n.id},auditLogPointer:n,filters:i,organizationId:o}):n.table===Da().y7?await zl({environment:s,request:{...c,organizationId:n.id},auditLogPointer:n,filters:i,organizationId:o}):(0,Ee().HB)(n.table)}async function zl(e){const{environment:t,request:a,auditLogPointer:s,filters:n,organizationId:o}=e;let i;if("spaceId"in a?i=await M().callApi({eventName:"searchAuditLog",environment:t,data:a,headers:(0,ea().WS)({spaceId:a.spaceId})}):"organizationId"in a?i=await M().callApi({eventName:"searchAuditLogForOrganization",environment:t,data:a}):(0,Ee().HB)(a),"success"===i.type)"spaceId"in a?(0,I().u4)({environment:t,event:{eventName:"org_console_audit_log_query",eventProperties:{type:"space",organization_id:o,space_id:a.spaceId}}}):"organizationId"in a?(0,I().u4)({environment:t,event:{eventName:"org_console_audit_log_query",eventProperties:{type:"organization",organization_id:a.organizationId}}}):(0,Ee().HB)(a),Tl.updateLoadedResult(s,n,i.data);else if(Tl.updateError(s,n),(0,vn().op4)(i.body)){const e=(0,T().Hu)(k().A.getIntl(),i);C().f1(e)}else C().f1(k().A.formatMessage(kl.loadCurrentAuditLogError))}async function Dl(e){const{environment:t,parentStore:a}=e;if(!a)return void Cl.reset();const s=Cl.getState(),n={id:a.id,table:a.table};if(et().n4(s.auditLogPointer,n)||Cl.reset(),!n)return;let o;if(a.table===na().NX){const e=await Ia().T.searchActions.load();o=await e.searchSpaceActorIds({environment:t,membersOnly:!1})}else if(a.table===Da().y7){var i;o={userIds:(null===(i=a.getModel())||void 0===i?void 0:i.getOwnerIds())||[],botIds:[]}}else(0,Ee().HB)(a);const r=await async function(e){const{environment:t,auditLogPointer:a}=e;if(a.table===na().NX){const e=await M().callApi({eventName:"getHistoricalAuditLogUsers",environment:t,data:{spaceId:a.id}});return"success"!==e.type?[]:e.data.results}if(a.table===Da().y7){const e=await M().callApi({eventName:"getHistoricalAuditLogUsers",environment:t,data:{organizationId:a.id}});return"success"!==e.type?[]:e.data.results}(0,Ee().HB)(a.table)}({environment:t,auditLogPointer:n}),l={auditLogPointer:n,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set};for(const c of o.userIds)l.allUserIds.add(c);for(const c of o.botIds)l.allBotIds.add(c);for(const c of r)(d=c.actorId)!==Al().eR.id&&d!==w().BF.id&&d!==w().mc.id||l.allUserIds.has(c.actorId)?c.actorType!==w().oo||l.allUserIds.has(c.actorId)?c.actorType!==Al().GP||l.allBotIds.has(c.actorId)||(l.allBotIds.add(c.actorId),l.removedBotIds.add(c.actorId)):(l.allUserIds.add(c.actorId),l.removedUserIds.add(c.actorId)):l.allUserIds.add(c.actorId);var d;Cl.setState(l)}var Pl=()=>a(785435),Nl=()=>a(545046);a(244387);const Rl=(0,o().wt)("status",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.994 13.822a5.8 5.8 0 0 1-2.338-.474 6.1 6.1 0 0 1-1.933-1.307 6.2 6.2 0 0 1-1.307-1.934 5.8 5.8 0 0 1-.475-2.337q0-1.243.475-2.338a6.2 6.2 0 0 1 3.234-3.24 5.8 5.8 0 0 1 2.338-.475q1.248 0 2.344.474 1.095.475 1.934 1.313a6.1 6.1 0 0 1 1.312 1.928q.475 1.095.475 2.338a5.8 5.8 0 0 1-.475 2.337 6.2 6.2 0 0 1-3.246 3.24q-1.095.475-2.338.475m0-1.195q1.014 0 1.893-.375a4.87 4.87 0 0 0 2.59-2.59q.375-.88.375-1.892 0-1.008-.375-1.887a4.85 4.85 0 0 0-4.489-2.97 4.8 4.8 0 0 0-1.892.374A4.8 4.8 0 0 0 4.555 4.33a4.9 4.9 0 0 0-1.037 1.553 4.8 4.8 0 0 0-.375 1.887q0 1.013.375 1.892.374.88 1.037 1.547a4.8 4.8 0 0 0 3.44 1.418Zm0-6.996a.42.42 0 0 1-.44-.434.42.42 0 0 1 .44-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.434m1.29.346a.43.43 0 0 1-.311-.123.43.43 0 0 1-.123-.317.42.42 0 0 1 .433-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.44Zm.943.943a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.433.42.42 0 0 1 .433.433.42.42 0 0 1-.433.434m.345 1.289a.42.42 0 0 1-.433-.434.42.42 0 0 1 .433-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.434m-.345 1.295a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.44.42.42 0 0 1 .433.44.42.42 0 0 1-.434.434Zm-.944.937a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.433.42.42 0 0 1 .434.434.42.42 0 0 1-.434.433m-1.289.346a.42.42 0 0 1-.44-.434.42.42 0 0 1 .44-.433.42.42 0 0 1 .434.434.42.42 0 0 1-.434.433M6.7 10.441a.42.42 0 0 1-.433-.433.42.42 0 0 1 .433-.434q.188 0 .31.123a.41.41 0 0 1 .13.31.41.41 0 0 1-.13.311.42.42 0 0 1-.31.123m-.943-.937a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.44.42.42 0 0 1 .433.44.42.42 0 0 1-.434.434ZM5.41 8.209a.42.42 0 0 1-.433-.434.42.42 0 0 1 .433-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.434m.346-1.29a.42.42 0 0 1-.434-.433.42.42 0 0 1 .434-.433.42.42 0 0 1 .433.433.42.42 0 0 1-.433.434Zm.943-.942a.42.42 0 0 1-.433-.44.42.42 0 0 1 .433-.433q.188 0 .31.123a.41.41 0 0 1 .13.31.42.42 0 0 1-.13.317.42.42 0 0 1-.31.123"})});function Bl(e){let{organizationId:t,filters:a,sort:s,query:n}=e;const o=(0,y().v3)(),i=JSON.stringify(s),r=Boolean(a),[{status:l,value:d},c]=(0,tt().Yb)((async()=>{if(!t)return[];let e=[];if(i){const t=JSON.parse(i);t&&(e=function(e){return e.map((e=>"status"===e.propertyId?{direction:e.direction,columnName:"status"}:"name"===e.propertyId?{direction:e.direction,columnName:"name"}:"lastModifiedAt"===e.propertyId?{direction:e.direction,columnName:"last_edited_time"}:void 0)).filter((e=>void 0!==e))}(t))}const s=await M().callApi({eventName:"getLegalHolds",environment:o,data:{organizationId:t,filters:r?{status:null==a?void 0:a.status,userIds:null==a?void 0:a.userIds}:void 0,sort:e.length>0?e:void 0,query:n??void 0}});if("success"===s.type)return s.data;if("failed"===s.type)throw s.error;return(0,Ee().HB)(s)}),[o,t,r,null==a?void 0:a.status,null==a?void 0:a.userIds,n,i]);return{loading:"pending"===l,legalHolds:d??[],refetch:c}}var El=()=>a(855410),Ll=()=>a(486826);const Ol=(0,o().wt)("murse",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M2.788 9.955V8.622q1.56.636 3.377.95 1.818.308 3.828.308 2.017 0 3.835-.308a16.5 16.5 0 0 0 3.377-.943l.007 1.326q-1.62.575-3.445.861a24 24 0 0 1-3.774.287q-1.948 0-3.773-.287a19 19 0 0 1-3.432-.86Zm6.139 2.42q-.828 0-.827-.8V10.4h3.787v1.176q0 .8-.827.8H8.927ZM4.12 16.866q-1.087 0-1.647-.553-.56-.548-.56-1.634V7.986q0-1.094.56-1.64.56-.547 1.647-.547h11.751q1.094 0 1.648.547.56.546.56 1.64v6.693q0 1.087-.56 1.633-.555.554-1.648.554H4.122Zm.055-1.292h11.641q.445 0 .677-.239.24-.232.24-.697v-6.61q0-.473-.24-.705-.232-.232-.677-.232H4.176q-.444 0-.684.232-.232.233-.232.704v6.61q0 .465.232.698.24.24.684.24ZM6.41 6.353V5.17q0-.964.533-1.436.534-.471 1.45-.471h3.192q.971 0 1.476.471.513.472.513 1.436v1.176H12.33v-1.17q0-.368-.205-.567-.199-.198-.574-.198h-3.11q-.377 0-.582.198-.204.2-.205.568v1.176z"})});var Ul=()=>a(3311),Fl=()=>a(867988);const Hl=(0,v().YK)({legalHoldNamePlaceholder:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.namePlaceholder",defaultMessage:"Name of investigation"},legalHoldDescriptionPlaceholder:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.descriptionPlaceholder",defaultMessage:"Describe the nature of this investigation"},legalHoldNameRequiredValidationError:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.nameRequiredValidationError",defaultMessage:"Name is required."},legalHoldDateRangeRequiredValidationError:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.dateRangeRequiredValidationError",defaultMessage:"Start date is required."}});function Vl(e){let{onDismiss:t,onSuccess:a,organizationId:n}=e;const[o,r]=s.useState(""),[l,d]=s.useState(void 0),[c,u]=s.useState(void 0),[g,m]=s.useState("page.viewed"),[p,h]=s.useState(void 0),[f,x]=s.useState([]),[b,S]=s.useState({name:void 0,holdMemberUserIds:void 0,dateRange:void 0}),w=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary}})),[]),{loading:A,createLegalHold:C}=function(){const e=(0,y().v3)(),[t,a]=(0,tt().V$)((async t=>{let{name:a,icon:s,description:n,userInteractionType:o,startDate:i,endDate:r,organizationId:l,spaceId:d,userIds:c}=t;const u=await M().callApi({eventName:"createLegalHold",environment:e,data:{name:a,icon:s,description:n,userInteractionType:o,startDate:i,endDate:r,organizationId:l,spaceId:d,userIds:c}});if("success"===u.type)return u.data;if("failed"===u.type)throw u.error;return(0,Ee().HB)(u)}),[e]);return{loading:"pending"===t.status,createLegalHold:a}}(),I=async()=>{if(!o||null==p||!p.start_date||!f.length){const e={name:o?void 0:Hl.legalHoldNameRequiredValidationError,dateRange:null!=p&&p.start_date?void 0:Hl.legalHoldDateRangeRequiredValidationError,holdMemberUserIds:f.length?void 0:or.legalHoldAddMembersRequiredValidationError};return void S(e)}const e={name:o,icon:l,description:c,userInteractionType:[g],startDate:new Date(null==p?void 0:p.start_date).getTime(),endDate:null!=p&&p.end_date?new Date(null==p?void 0:p.end_date).getTime():void 0,organizationId:n,userIds:f};try{await C(e),null==a||a(),t()}catch(s){return}};return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:t,areaConstraint:{width:{type:"min",length:Y().NF}},render:e=>{let{sizeRange:a}=e;return(0,i.jsx)(H().tf,{showDismissButton:!1,sizeRange:a,header:(0,i.jsx)(Y().rQ,{icon:Ol(w.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.title",defaultMessage:"Create legal hold"}),bylineWidthOverride:400,byline:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.byline",defaultMessage:"Members affected by a legal hold won’t be notified of the hold and will still maintain their permissions to create, edit, and delete files. {link}",values:{link:(0,i.jsx)(ye()._,{href:"/legal-holds",children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.byline.learnMore",defaultMessage:"Learn more"})})}})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.button.create",defaultMessage:"Create legal hold"}),primaryAction:I,primaryDisabled:A,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsxs)(oe().VP,{gap:Y().gA,width:"100%",children:[(0,i.jsx)(Wl,{name:o,icon:l,error:b.name,onNameChange:e=>{r(e),""!==e&&S((e=>({...e,name:void 0})))},onIconChange:d}),(0,i.jsxs)(oe().VP,{gap:0,children:[(0,i.jsx)(K().A,{children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.descriptionLabel",defaultMessage:"Description"})}),(0,i.jsx)(F().A,{value:c,placeholder:k().A.formatMessage(Hl.legalHoldDescriptionPlaceholder),onChange:e=>u(e.target.value),textarea:!0})]}),(0,i.jsx)(ir,{organizationId:n,holdMemberUserIds:f,setHoldMemberUserIds:e=>{x(e),e.length&&S((e=>({...e,holdMemberUserIds:void 0})))},error:b.holdMemberUserIds}),(0,i.jsx)(Kl,{interactionType:g,setInteractionType:m,dateRange:p,setDateRange:e=>{h(e),null!=e&&e.start_date&&S((e=>({...e,dateRange:void 0})))},error:b.dateRange})]})})}})}function Wl(e){let{name:t,icon:a,onNameChange:s,onIconChange:n,error:o}=e;const r=a?{icon:a,pointer:{table:"legal_hold",id:(0,Ul().Ay)()}}:void 0,l=(0,j().IS)((e=>({icon:{boxShadow:e.inputBoxShadow,background:e.inputBackground,height:32,width:32}})),[]);return(0,i.jsxs)(oe().VP,{gap:8,children:[(0,i.jsxs)(oe().VP,{gap:0,children:[(0,i.jsx)(K().A,{children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.nameLabel",defaultMessage:"Icon & Name"})}),(0,i.jsxs)(oe().fI,{gap:8,children:[(0,i.jsx)(L().B,{isLarge:!0,largeIcon:!0,disabled:!1,isEmptyPage:!1,bucket:"public",style:l.icon,icon:r,size:24,emojiSize:24,onChange:n}),(0,i.jsx)(F().A,{errorOutline:Boolean(o),value:t,placeholder:k().A.formatMessage(Hl.legalHoldNamePlaceholder),onChange:e=>s(e.target.value),inputElementAttributes:{"aria-describedby":"legalHoldNameError",required:!0}})]})]}),(0,i.jsx)(ki().R,{id:"legalHoldNameError",error:o})]})}const ql={"page.viewed":(0,i.jsx)(v().sA,{id:"legalHolds.userInteractionType.dropdown.label.viewed",defaultMessage:"Viewed, edited & created"}),"page.edited":(0,i.jsx)(v().sA,{id:"legalHolds.userInteractionType.dropdown.label.edited",defaultMessage:"Edited & created"}),"page.created":(0,i.jsx)(v().sA,{id:"legalHolds.userInteractionType.dropdown.label.created",defaultMessage:"Created only"})},Gl={"page.viewed":(0,i.jsx)(v().sA,{id:"legalHolds.dateRange.label.viewed",defaultMessage:"Pages viewed between"}),"page.edited":(0,i.jsx)(v().sA,{id:"legalHolds.dateRange.label.edited",defaultMessage:"Pages edited between"}),"page.created":(0,i.jsx)(v().sA,{id:"legalHolds.dateRange.label.created",defaultMessage:"Pages created between"})};function Kl(e){let{interactionType:t,setInteractionType:a,dateRange:n,setDateRange:o,error:r}=e;const l=s.useMemo((()=>({starting:null!=n&&n.start_date?{type:"date",start_date:n.start_date}:void 0,ending:null!=n&&n.end_date?{type:"date",start_date:n.end_date}:void 0})),[n]),d=(0,j().IS)((e=>({innerButton:{background:e.inputBackground,marginRight:0},popupWrapper:{paddingTop:12,paddingBottom:12},buttonError:{border:`1px solid ${e.redBadgeBackground}`},downIcon:{display:"none"},settingLabel:{marginBottom:0}})),[]);return(0,i.jsxs)(oe().VP,{gap:8,children:[(0,i.jsxs)(oe().fI,{gap:12,alignItems:"center",children:[(0,i.jsx)(K().A,{style:d.settingLabel,children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.holdPagesLabel",defaultMessage:"Hold pages"})}),(0,i.jsx)(Ge().A,{innerButtonStyle:d.innerButton,downIconStyle:d.downIcon,selectedTitle:ql[t],renderMenuSections:e=>[{key:"user_interaction_type",render:e=>(0,i.jsx)(qe().A,{...e}),items:[{key:"page.viewed",action:()=>{a("page.viewed"),e.close()},render:e=>(0,i.jsx)(We().A,{...e,title:ql["page.viewed"]})},{key:"page.edited",action:()=>{a("page.edited"),e.close()},render:e=>(0,i.jsx)(We().A,{...e,title:ql["page.edited"]})},{key:"page.created",action:()=>{a("page.created"),e.close()},render:e=>(0,i.jsx)(We().A,{...e,title:ql["page.created"]})}]}]}),(0,i.jsx)(K().A,{style:d.settingLabel,children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.label.between",defaultMessage:"between"})}),(0,i.jsx)(Ei().Ay,{popupType:Ei().z7.Popup,placementToOrigin:Ei().sx.Bottom,alignmentToOrigin:Ei().yP.Start,renderOrigin:e=>(0,i.jsx)(ne().p,{isRed:Boolean(r),style:{...d.innerButton,...r&&d.buttonError},"aria-describedby":"legalHoldDateRangeError",...e,children:n?(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange",defaultMessage:"{startDate} - {endDate}",values:{startDate:null!=n&&n.start_date?(0,i.jsx)(v().XU,{value:null==n?void 0:n.start_date,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}):(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange.startDate.placeholder",defaultMessage:"Select start date"}),endDate:null!=n&&n.end_date?(0,i.jsx)(v().XU,{value:n.end_date,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}):(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange.endDate.ongoing",defaultMessage:"Ongoing"})}}):(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange.placeholder",defaultMessage:"Select date range"})}),popupWrapStyle:d.popupWrapper,render:e=>(0,i.jsx)(yt().A,{menuType:xt().gu.Popup,children:(0,i.jsx)(qe().A,{children:(0,i.jsxs)(oe().VP,{gap:12,children:[(0,i.jsx)(oe().fI,{paddingLeft:12,paddingRight:12,children:(0,i.jsx)(K().A,{children:Gl[t]})}),(0,i.jsx)(Fl().A,{title:void 0,disableMenuWrap:!0,value:l,onUpdate:e=>{var t,a;if(e.error)return;const s={...l,...e.value},n=null===(t=s.starting)||void 0===t?void 0:t.start_date,i=null===(a=s.ending)||void 0===a?void 0:a.start_date;o({type:"daterange",start_date:n,end_date:i})},onDismiss:()=>{e.close()},minDate:Ll().c9.now().minus({years:zr().JN}),maxDate:Ll().c9.now().plus({years:zr().gM})})]})})})})]}),(0,i.jsx)(ki().R,{id:"legalHoldDateRangeError",error:r})]})}const Yl={id:"name",headerTitle:(0,i.jsx)(v().sA,{id:"organizationLegalHoldsSubTab.legalHolds.nameColumn.header",defaultMessage:"Hold name"}),renderCell:e=>{if(e.type===Zt().T.Loading)return(0,i.jsx)(Lt().mf,{includeIcon:!0,containerStyles:{width:140}});const t=(0,i.jsx)(Pr,{legalHoldName:e.name,legalHoldId:e.id,legalHoldIcon:e.icon,size:Yn().tR,emojiSize:Yn().Gz});return(0,i.jsx)(Lt().s7,{title:e.name,icon:t})},widthData:{widthPercent:25,minWidth:280,maxWidth:280},sortable:!1},Ql={id:"status",headerTitle:(0,i.jsx)(v().sA,{id:"organizationLegalHoldsSubTab.legalHolds.statusColumn.header",defaultMessage:"Status"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):(0,i.jsx)(Rr,{status:e.status}),widthData:{widthPercent:15,minWidth:140},sortable:!1},$l={id:"workspaces",headerTitle:(0,i.jsx)(v().sA,{id:"organizationLegalHoldsSubTab.legalHolds.workspacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):(0,i.jsx)(fi,{workspaceIds:e.workspaces.ids,totalCount:e.workspaces.total}),widthData:{widthPercent:20,minWidth:140},sortable:!1},Xl={id:"users",headerTitle:(0,i.jsx)(v().sA,{id:"organizationLegalHoldsSubTab.legalHolds.membersColumn.header",defaultMessage:"Hold members"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):(0,i.jsx)(Nr,{userIds:e.users.ids,totalCount:e.users.total}),widthData:{widthPercent:20,minWidth:140},sortable:!1},Zl={id:"period",headerTitle:(0,i.jsx)(v().sA,{id:"organizationLegalHoldsSubTab.legalHolds.periodColumn.header",defaultMessage:"Period"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(_r,{startDate:e.startDate,endDate:e.endDate})}),widthData:{widthPercent:20,minWidth:220},sortable:!1};function Jl(e){let{lastEditedTime:t,lastEditedBy:a}=e;const s=(0,y().v3)(),n=(0,v().tz)(),{userStore:o,fullName:r}=(0,S().K8)((()=>{if(a){const e=new(vt().L)(s,{table:w().oo,id:a});return{userStore:e,fullName:e.getFullName(n)}}return{userStore:void 0,fullName:void 0}}),[a,s,n]);return o?(0,i.jsxs)(oe().fI,{alignItems:"center",gap:12,children:[(0,i.jsx)(Dn().l,{userStores:[o],useSecondaryColorTitle:!0,useIconsOnly:!0}),(0,i.jsx)(Ks().A,{isSecondaryColor:!0,children:(0,i.jsx)(v().sA,{id:"legalHoldsTable.updatedAt.byAndDate",defaultMessage:"{fullName} on {date}",values:{fullName:r,date:(0,i.jsx)(v().XU,{value:t,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}})})]}):null}const ed={id:"lastModifiedAt",headerTitle:(0,i.jsx)(v().sA,{id:"organizationLegalHoldsSubTab.legalHolds.lastModifiedAtColumn.header",defaultMessage:"Last modified at"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{includeIcon:!0,containerStyles:{width:140}}):(0,i.jsx)(Jl,{lastEditedTime:e.lastEditedTime,lastEditedBy:e.lastEditedBy}),widthData:{widthPercent:20,minWidth:140},sortable:!0};function td(e){let{data:t,loading:a,currentPage:n,setCurrentPage:o,setSelectedLegalHoldId:r}=e;const l=s.useMemo((()=>[Yl,Ql,$l,Xl,Zl,ed]),[]),d=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:l,theme:e,containerMarginTop:0})),[l]),c=t.map((e=>({...e,isClickable:!0,type:Zt().T.OrganizationLegalHold}))),u=a&&0===c.length?(0,Zt().n)():c.slice(at().q*(n-1),at().q*n),g=c.length>at().q*n,m=1!==n;return(0,i.jsx)(Et().WE,{columnRenderInfo:l,hideHeaderRowPadding:!0,rows:u,renderNoRowsComponent:()=>(0,i.jsx)(Yt,{title:(0,i.jsx)(v().sA,{id:"legalHoldsTable.empty",defaultMessage:"No legal holds found"}),byline:(0,i.jsx)(v().sA,{id:"legalHoldsTable.empty.byline",defaultMessage:"There are no legal holds that match this query"})}),styles:d,showRowBorders:!0,onRowClick:e=>{e.type===Zt().T.OrganizationLegalHold&&r(e.id)},loadMoreMethod:{type:"pages",onLoadNext:()=>{g&&o(n+1)},onLoadPrevious:()=>{m&&o(n-1)},hasNextPage:g,hasPrevPage:m,currentPage:n},allowHorizontalScroll:!0,setStickyHeaderRow:!0,extendToFullScreen:Xt().e})}function ad(e){let{interactionType:t,startDate:a,endDate:s}=e;const n=(0,i.jsx)(v().sA,{defaultMessage:"This legal hold is currently holding pages created, edited, and viewed between {legalHoldDateRange}",id:"legalHold.tooltip.interactionTypeAndDateRange.viewed",values:{legalHoldDateRange:(0,i.jsx)(_r,{startDate:a,endDate:s})}});return t?t.includes("page.viewed")?n:t.includes("page.created")?(0,i.jsx)(v().sA,{defaultMessage:"This legal hold is currently holding pages created between {legalHoldDateRange}",id:"legalHold.tooltip.interactionTypeAndDateRange.created",values:{legalHoldDateRange:(0,i.jsx)(_r,{startDate:a,endDate:s})}}):t.includes("page.edited")?(0,i.jsx)(v().sA,{defaultMessage:"This legal hold is currently holding pages created and edited between {legalHoldDateRange}",id:"legalHold.tooltip.interactionTypeAndDateRange.edited",values:{legalHoldDateRange:(0,i.jsx)(_r,{startDate:a,endDate:s})}}):void 0:n}function sd(e){let{organizationId:t,legalHoldId:a,legalHoldIcon:n,legalHoldName:o,legalHoldStartDate:r,legalHoldEndDate:l,onDismiss:d}=e;const{legalHold:c,loading:u,refetch:g}=function(e){const t=(0,y().v3)(),[{status:a,value:s},n]=(0,tt().Yb)((async()=>{const a=await M().callApi({eventName:"getLegalHold",environment:t,data:{legalHoldId:e}});if("success"===a.type)return a.data;if("failed"===a.type)throw a.error;return(0,Ee().HB)(a)}),[t,e]);return{loading:"pending"===a,legalHold:s,refetch:n}}(a),{availableOrganizationFeatures:m}=(0,s.useContext)(R().D),p=(0,j().IS)((e=>({icon:{height:16,width:16,fill:e.text.secondary}})),[]),h=(0,i.jsxs)(oe().fI,{gap:4,alignItems:"center",children:[(0,i.jsx)(_r,{startDate:r,endDate:l}),(0,i.jsx)(G().A,{textWrap:!0,renderTooltip:()=>(0,i.jsx)(oe().fI,{width:"220px",children:ad({interactionType:null==c?void 0:c.userInteractionType,startDate:r,endDate:l})}),render:e=>(0,i.jsx)("div",{...e,children:(0,Mr().questionMarkCircleIcon)(p.icon)})})]});return(0,i.jsx)(ia().iv,{sidebarProps:{sidebarTitle:(null==c?void 0:c.name)||o,sidebarByline:h,sidebarTitleIcon:(0,i.jsx)(Pr,{legalHoldId:a,size:ia().WK,emojiSize:ia().WK,legalHoldIcon:(null==c?void 0:c.icon)||n,legalHoldName:(null==c?void 0:c.name)||o}),sidebarItemsTitle:(0,i.jsx)(v().sA,{defaultMessage:"Legal hold settings",id:"legalHold.sidebar.topEntitySection"}),hideSeparator:!0,renderTooltip:e=>m.legal_holds_exports_enabled||"exports"!==e.id?"released"===(null==c?void 0:c.status)&&"browse_content"===e.id?(0,i.jsx)(v().sA,{id:"legalHold.sidebar.browseContent.tooltip",defaultMessage:"You can no longer view the content of a released legal hold."}):void 0:(0,i.jsx)(v().sA,{id:"legalHold.sidebar.exports.tooltip",defaultMessage:"Coming soon"})},sceneProps:{legalHoldId:a,legalHold:c,organizationId:t,loading:u,refetchLegalHold:g},tabRenderer:Xf,tabNames:x().hx,defaultTab:"general",tabAccessor:"active"===(null==c?void 0:c.status)?$f:Qf,isOpen:!0,onDismiss:d})}const nd=(0,v().YK)({placeholder:{id:"organizationLegalHoldsSubTab.legalHolds.search.placeholder",defaultMessage:"Search by legal hold name."}}),od=(0,v().YK)({name:{id:"organizationLegalHoldsSubTab.legalHolds.sort.name",defaultMessage:"Name"},status:{id:"organizationLegalHoldsSubTab.legalHolds.sort.status",defaultMessage:"Status"},lastModifiedAt:{id:"organizationLegalHoldsSubTab.legalHolds.sort.lastModifiedAt",defaultMessage:"Last modified at"}}),id=[{id:"name",name:k().A.formatMessage(od.name),type:"title"},{id:"status",name:k().A.formatMessage(od.status),type:"status"},{id:"lastModifiedAt",name:k().A.formatMessage(od.lastModifiedAt),type:"last_edited_time"}],rd=[{key:"active",value:"active",title:(0,i.jsx)(v().sA,{id:"legalHoldsTable.filters.status.active",defaultMessage:"Active"}),shortTitle:(0,i.jsx)(v().sA,{id:"legalHoldsTable.filters.status.active.shortTitle",defaultMessage:"Active"})},{key:"released",value:"released",title:(0,i.jsx)(v().sA,{id:"legalHoldsTable.filters.status.released",defaultMessage:"Released"}),shortTitle:(0,i.jsx)(v().sA,{id:"legalHoldsTable.filters.status.released.shortTitle",defaultMessage:"Released"})}];var ld=function(e){return e.CreateLegalHold="create-legal-hold",e}(ld||{});function dd(e){let{organizationId:t}=e;const a=(0,v().tz)(),[n,o]=s.useState(),[r,l]=s.useState(""),[d,c]=s.useState(),[u,g]=s.useState(1),[m,p]=s.useState(!1),[h,f]=s.useState(),[x,b]=s.useState(),[y,S]=s.useState(),[j,w]=s.useState([]),A=j.length>0?j:void 0,M=y||A?{status:y,userIds:A}:void 0,{legalHolds:C,loading:I,refetch:T}=Bl({organizationId:t,filters:M,query:""===r?void 0:r,sort:x}),k=(0,Hn().F)(),_=Array.from(C.reduce(((e,t)=>(t.users.ids.forEach((t=>{e.add(t)})),e)),new Set)),z=C.find((e=>e.id===d)),D=s.useCallback((async()=>{g(1),b(void 0),f(void 0),l(""),S(void 0),w([]),await T()}),[T]);return(0,i.jsxs)(El().t,{children:[(0,i.jsx)(Ha()._,{title:rc[ic.LegalHolds].title,bylineWidth:"600px",byline:(0,i.jsx)(v().sA,{id:"organizationLegalHoldsSubTab.legalHolds.byline",defaultMessage:"Placing a legal hold on a team member allows Organization Owners to view and export all the content that’s been created or modified by that member"})}),(0,i.jsxs)("div",{style:k.tableHeader,children:[(0,i.jsxs)("div",{style:k.leftContent,children:[(0,i.jsx)(Wa().e,{sortProperties:id,isMenuOpen:m,setIsMenuOpen:p,onApply:e=>{p(!1),b(e),f(void 0),g(1)},currentSorts:h??x??[]}),(0,i.jsx)(Ys().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"legalHoldsTable.filters.status.title",defaultMessage:"Status"}),pillIcon:Rl,selectedItem:y,setSelectedItem:e=>{S(e),g(1)},items:rd,shouldUseCheck:!0}),(0,i.jsx)(Eo,{pillTitle:(0,i.jsx)(v().sA,{id:"legalHoldsTable.filters.holdMembers.title",defaultMessage:"Hold members"}),pillIcon:Vn().peopleFillIcon,selectedUsers:j,setSelectedUsers:e=>{w(e),g(1)},userIds:_})]}),(0,i.jsxs)("div",{style:k.rightContent,children:[(0,i.jsx)(Va().x,{appliedSorts:x,openSortPillMenu:e=>{e&&f([{propertyId:e,direction:"ascending"}]),p(!0)},sortProperties:id}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:r,setQueryFilter:e=>{l(e),g(1)},placeholderText:a.formatMessage(nd.placeholder)}),(0,i.jsx)(W().A,{onClick:()=>{o(ld.CreateLegalHold)},children:(0,i.jsx)(v().sA,{id:"legalHoldsTable.button.addLegalHold",defaultMessage:"Create hold"})})]})]}),(0,i.jsx)(td,{data:C,loading:I,currentPage:u,setCurrentPage:g,setSelectedLegalHoldId:c}),d?(0,i.jsx)(sd,{organizationId:t,legalHoldIcon:(null==z?void 0:z.icon)??"",legalHoldName:(null==z?void 0:z.name)??"",legalHoldId:d,legalHoldStartDate:null==z?void 0:z.startDate,legalHoldEndDate:null==z?void 0:z.endDate,onDismiss:async()=>{c(void 0),await T()}}):null,n===ld.CreateLegalHold?(0,i.jsx)(Vl,{onDismiss:()=>o(void 0),organizationId:t,onSuccess:D}):null]})}var cd=()=>a(631472);function ud(e){let{children:t}=e;const a=(0,j().IS)((e=>({container:{width:"100%",maxWidth:880,margin:"48px auto 100px",padding:"0 40px 0"}})),[]);return(0,i.jsx)("div",{style:a.container,children:t})}var gd=()=>a(210131),md=()=>a(904324),pd=()=>a(152124),hd=()=>a(768794),fd=()=>a(78161),xd=()=>a(150957);function vd(e){const{auditLogEntry:t,parentStore:a,id:n}=e,o=(0,v().tz)(),r=(0,S().K8)((()=>{if(t.actor.actorType===w().oo){const e=z().LU.createChildStore(a,{id:t.actor.actorId,table:w().oo});if(e.isDefined()&&!e.getIsDeleted())return{actorStore:e};if(t.actor.email)return{avatar:{name:t.actor.name,email:t.actor.email}}}else if(t.actor.actorType===Al().GP){const e=z().vK.createChildStore(a,{id:t.actor.actorId,table:Al().GP});return e.isDefined()?{actorStore:e}:{avatar:{name:t.actor.name,email:t.actor.actorId}}}return{actorStore:void 0}}),[a,t]),l=(0,S().K8)((()=>{var e,t;if(r)return(null===(e=r.actorStore)||void 0===e?void 0:e.getDisplayName(o))??(null===(t=r.avatar)||void 0===t?void 0:t.name)}),[r,o]),d=(0,S().K8)((()=>{var e,t;if(r)return(null===(e=r.actorStore)||void 0===e?void 0:e.getDetail())??(null===(t=r.avatar)||void 0===t?void 0:t.email)}),[r]),c=(0,s.useMemo)((()=>{var e;if(t.actor.actorType===w().oo)return(0,xd().v)(null===(e=t.actor.meta)||void 0===e?void 0:e.spaceRole)}),[t]),u=(0,j().IS)((()=>({container:{display:"block",width:"100%",paddingBlock:6}})),[]),g=(0,s.createRef)();return(0,i.jsx)(G().A,{disableTooltip:bd(g.current),renderTooltip:()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:l}),(0,i.jsx)("div",{children:d})]}),placement:$a().W.Bottom,render:e=>(0,i.jsx)("div",{...e,style:u.container,children:(0,i.jsx)(xd().A,{id:n,...r,spaceRole:c})})})}function bd(e){return!!e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}var yd=()=>a(668649),Sd=()=>a(91472),jd=()=>a(307542);function wd(e){const{auditLogEntry:t,eventColumnId:a}=e,s=(0,S().K8)((()=>(0,jd().Qd)()),[]),n=yd().Gb,o=(0,v().tz)(),i=(0,y().v3)();return async()=>{const e=await Sd().R.clipboardActions.load();e.copyString({environment:i,stringValue:(0,yd().ZM)({auditLogEntry:t,intl:o,getAuditLogEventText:Ad(a),isTeamGuestsEnabled:s,csvColumnNames:n}),copiedMessage:e.clipboardMessages.copiedToClipboard})}}function Ad(e){return t=>{var a;return null===(a=document.getElementById(e))||void 0===a?void 0:a.textContent}}const Md={id:"actor",headerTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(vd,{parentStore:e.parentStore,auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:30},sortable:!1},Cd={id:"event",headerTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(hd().m,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:40},sortable:!1},Id={id:"dateTimeAndMenu",headerTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.dateColumn.header",defaultMessage:"Date"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`,a=`event-${e.auditLogEntry.actionName}-${e.id}`,s=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(pd().V,{auditLogEntry:e.auditLogEntry,id:s}),(0,i.jsx)(_d,{auditLogEntry:e.auditLogEntry,ids:{actorColumnId:t,eventColumnId:a,dateTimeColumnId:s}})]})},widthData:{width:25},sortable:!0,shouldShowSortTooltip:!0},Td=[Md,Cd,Id];function kd(){return(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40vh",flexDirection:"column"},children:[(0,i.jsx)("div",{children:(0,i.jsx)(Ks().A,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.noResults",defaultMessage:"No results"})})}),(0,i.jsx)(Ks().A,{isSecondaryColor:!0,children:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.noResultsHelpText",defaultMessage:"Try different filters. Logs may take some time to show up."})})]})}function _d(e){const t=(0,j().DP)(),a=(0,j().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%"},button:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:28,borderRadius:O().V.small}})),[]),s=wd({auditLogEntry:e.auditLogEntry,eventColumnId:e.ids.eventColumnId});return(0,i.jsx)(G().A,{delayThreshold:80,placement:$a().W.Bottom,render:e=>(0,i.jsx)("div",{style:a.container,...e,children:(0,i.jsx)(La().A,{style:a.button,onClick:s,children:(0,d().d)({width:16,height:16,fill:t.mediumIconColor})})}),renderTooltip:()=>(0,i.jsx)(v().sA,{id:"AuditLogSettings.copyAuditLogEvent",defaultMessage:"Copy row"})})}const zd=(0,v().j4)((function(e){const{searchResponse:t,parentStore:a}=e,[n,o]=(0,S().$y)(yl().A),r=t.results||[],l=t.hasMoreResults,d=Boolean(r.length),c=e=>{const t={...n,pageNum:e};o(t)},u=(0,Gt().A)(),g=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:Td,theme:e,containerMarginTop:0})),[]),m=r.map(((e,t)=>({id:t.toString(),auditLogEntry:e,parentStore:a,isClickable:!1}))),p=(0,s.useCallback)((()=>{const e=n.sortOrder===vl().K7.CreatedOldest?vl().K7.CreatedNewest:vl().K7.CreatedOldest;o({...n,sortOrder:e,pageNum:1})}),[n,o]),h=(0,s.useMemo)((()=>({column:Id,sortAscending:n.sortOrder===vl().K7.CreatedOldest})),[n]),f=Td.map((e=>({...e,headerStyle:u.tableHeader})));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Et().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:f,rows:m,sortState:h,onSortStateChanged:p,renderNoRowsComponent:kd,styles:g}),d?(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:[(0,i.jsx)(fd().M,{onClick:()=>{c(n.pageNum-1)},disabled:1===n.pageNum,children:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.previousPage",defaultMessage:"Previous"})}),(0,i.jsx)(fd().M,{disabled:!l,onClick:()=>{c(n.pageNum+1)},children:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.nextPage",defaultMessage:"Next"})})]}):null]})}));function Dd(e){let{organizationId:t,selectedSpaceId:a,parentStore:n}=e;const o=(0,y().v3)(),[r]=(0,S().$y)(Tl),[l]=(0,S().$y)(yl().A),d=(0,yl()._)(l)!==r.filterStr?void 0:r.cachedResponses[l.pageNum];return(0,s.useEffect)((()=>{n.id&&_l({environment:o,auditLogPointer:{id:n.id,table:n.table},organizationId:t})}),[o,n,l,t]),(0,s.useEffect)((()=>{Dl({environment:o,parentStore:n})}),[o,n]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",paddingTop:4,paddingBottom:12},children:[(0,i.jsx)(jc,{organizationId:t,selectedSpaceId:a,parentStore:n}),(0,i.jsx)(md().A,{parentStore:n})]}),"loading"===(null==d?void 0:d.status)&&(0,i.jsx)(bl().A,{}),"success"===(null==d?void 0:d.status)&&(0,i.jsx)(zd,{searchResponse:d,parentStore:n})]})}function Pd(e){const{organizationId:t,spaceId:a}=e,s=oa({spaceId:a}),n=(0,_a().E)({organizationId:t}),o=s||n;return o&&t?(0,i.jsx)(El().t,{children:(0,i.jsxs)("div",{style:{padding:"12px 16px"},children:[(0,i.jsx)(Ha()._,{title:(0,i.jsx)(v().sA,{id:"organization.auditLog.title",defaultMessage:"Audit log"}),byline:(0,i.jsx)(v().sA,{id:"organization.auditLog.byline",defaultMessage:"Access to detailed information about security and safety-related activity. This can help identify potential security issues, investigate suspicious behavior, and troubleshoot access."})}),(0,i.jsx)(Dd,{organizationId:t,selectedSpaceId:a,parentStore:o})]})}):null}var Nd=()=>a(718696),Rd=()=>a(454909),Bd=()=>a(69260),Ed=()=>a(416865),Ld=()=>a(104838),Od=()=>a(918625),Ud=()=>a(158918);const Fd="organization";function Hd(e){let{organizationId:t,currentTabRoute:a,currentTabProperties:n,shouldShowOrganizationOption:o,showAsPill:r,selectedSpaceStore:l}=e;const d=(0,y().v3)(),c=(0,_a().E)({organizationId:t}),u=(0,Ts().l)(),{itemIcon:g,itemName:m}=function(e){const t=qd(),{itemIcon:a,itemName:s}=(0,S().K8)((()=>{const a="Organization";return e?{itemIcon:(0,i.jsx)(L().B,{disabled:!0,icon:e.getIcon(),isEmptyPage:!1,title:e.getName(),size:Na().iK,isLarge:!0}),itemName:e.getName()}:{itemIcon:(0,i.jsx)("div",{style:t.organizationIconContainer,children:(0,f().V)(t.organizationIcon)}),itemName:a}}),[e,t]);return{itemIcon:a,itemName:s}}(l),p=(null==l?void 0:l.id)??(o?Fd:void 0),h=(0,j().IS)((e=>({container:{display:"inline-flex",width:"fit-content"},menuItem:{fontSize:"inherit",borderRadius:O().V.default,border:`1px solid ${e.stroke.secondary}`,paddingTop:4,paddingBottom:4}})),[]);(0,s.useEffect)((()=>{l&&(ve().default.setState({...ve().default.state,currentSpaceStore:l}),(0,Ld().$D)({environment:d,spaceId:l.id}))}),[l,d]);const x=(0,s.useCallback)((e=>{e?(0,gd().i)({environment:d,organizationId:t,tabRoute:a,properties:n,queryParams:{[Hf]:e}}):(0,gd().y)(d,t,a)}),[a,n,d,t]),b=(0,S().K8)((()=>u.map((e=>e.id))),[u]),w=(0,s.useMemo)((()=>o?[Fd,...b]:b),[b,o]),A=(0,S().K8)((()=>{const e=c?{key:c.id,value:Fd,title:(0,i.jsx)(v().sA,{id:"organizationConsole.table.filters.option.organization.title",defaultMessage:"Organization"}),shortTitle:(0,i.jsx)(v().sA,{id:"organizationConsole.table.filters.option.organization.title",defaultMessage:"Organization"})}:void 0,t=u.map((e=>({key:e.id,value:e.id,title:e.getName(),shortTitle:e.getName()})));return o&&e?[e,...t]:t}),[u,c,o]);return r?(0,i.jsx)(Ys().G0,{shouldUseCheck:!0,showActive:!0,shouldHidePrefix:!0,selectionRequired:!0,pillTitle:o?(0,i.jsx)(v().sA,{id:"organizationConsole.table.filters.orgOrWorkspaces.title",defaultMessage:"Organization or workspace"}):(0,i.jsx)(v().sA,{id:"organizationConsole.table.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:f().V,selectedItem:p,setSelectedItem:x,items:A}):(0,i.jsx)("div",{style:h.container,children:(0,i.jsx)(Ud().A,{items:w,getKey:et().D_,selectedItem:p,onSelect:x,width:300,renderItem:e=>{const t=e.value;return t===Fd?(0,i.jsx)(Wd,{isSelected:!p,...e}):(0,i.jsx)(Vd,{spaceId:t,isSelected:p===t,...e})},renderOrigin:e=>(0,i.jsx)(Od()._,{focused:!1,icon:g,title:m,style:h.menuItem,desktopIconStyle:{marginLeft:4,marginRight:0},...e})})})}function Vd(e){let{spaceId:t,isSelected:a,...n}=e;const o=(0,y().v3)(),{organizationOwnerRecordCache:r}=(0,s.useContext)(N().N),{icon:l,name:d}=(0,S().K8)((()=>{const e=new(z().SL)(o,{id:t,table:na().NX},{inMemoryRecordCache:r});return{icon:e.getIcon(),name:e.getName()}}),[t,r,o]);return(0,i.jsx)(We().A,{title:d,isChecked:a,icon:(0,i.jsx)(L().B,{disabled:!0,icon:l,isEmptyPage:!1,title:d,size:Na().iK,isLarge:!0}),...n})}function Wd(e){let{isSelected:t,...a}=e;const s=qd();return(0,i.jsx)(We().A,{title:"Organization",isChecked:t,icon:(0,i.jsx)("div",{style:s.organizationIconContainer,children:(0,f().V)(s.organizationIcon)}),...a})}function qd(){return(0,j().IS)((e=>({organizationIconContainer:{width:23,height:23,display:"flex",alignItems:"center",justifyContent:"center"},organizationIcon:{width:18,height:18}})),[])}function Gd(e){let{selectedTeamspaceIds:t,setSelectedTeamspaceIds:a,teamspaceStores:s}=e;const n=function(e){const t=(0,j().IS)((()=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block",paddingTop:4,paddingBottom:4}})),[]);return(0,S().K8)((()=>e.map((e=>{const a=e.getName(),s=e.getIcon();return{key:e.id,value:e.id,title:(0,i.jsxs)("div",{style:t.optionContainer,children:[(0,i.jsx)(L().B,{disabled:!0,icon:s,isEmptyPage:!1,size:Na().iK,title:a,isLarge:!0,emojiSize:Na().iK,isRaw:!1}),(0,i.jsx)(Ks().A,{style:t.optionTitle,children:a})]}),shortTitle:a}}))),[e,t])}(s);return(0,i.jsx)(Ys().VX,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationConsole.table.filters.teamspaces.title",defaultMessage:"Teamspaces"}),pillIcon:f().V,selectedItems:t,setSelectedItems:a,items:n})}var Kd=()=>a(578355);function Yd(e){let{audienceValues:t,selectedAudience:a,setSelectedAudience:n}=e;const o=(0,Kd().Ry)([]),r=(0,s.useMemo)((()=>(t??Rd().p).map((e=>({key:e.toString(),value:e,shortTitle:(0,Kd().j)(e),title:(0,Kd().j)(e),caption:(0,Kd().b0)(e),wrapCaption:!0})))),[t]);return(0,i.jsx)(Ys().VX,{pillTitle:o,pillIcon:Vn().peopleFillIcon,selectedItems:a,setSelectedItems:n,items:r})}var Qd=()=>a(195394);function $d(e){let{spaceStore:t,includeGuests:a,pillTitle:n,...o}=e;const{visibleUsers:r,loading:l}=(0,E().d)(t.id),d=ja(t.id,!o.includeGroups),c=r.filter(A().c7),u=r.filter(A().QE),{userIds:g,guestUserIds:m}=(0,s.useMemo)((()=>l?{userIds:[],guestUserIds:void 0}:a?{userIds:c.map((e=>e.userId)),guestUserIds:u.map((e=>e.userId))}:{userIds:c.map((e=>e.userId)),guestUserIds:void 0}),[l,a,c,u]),p=o.includeGroups?{...o,permissionGroups:null==d?void 0:d.map((e=>{let{group:t}=e;return Ka().Bj6.fromValue(qt().n,t)}))}:o;return(0,i.jsx)(Eo,{pillTitle:n,pillIcon:Qd().E,userIds:g,guestUserIds:m,showSearch:!0,...p})}var Xd=()=>a(297145),Zd=()=>a(956548),Jd=()=>a(944110);const ec=["alive","in_trash","deleted_from_trash"];function tc(e){let{spaceStore:t,selectedPageStatus:a,setSelectedPageStatus:n}=e;const o=(0,v().tz)(),{currentDeleteFromTrashDelayInSeconds:r,currentPurgeDelayInSeconds:l}=(0,S().K8)((()=>({currentDeleteFromTrashDelayInSeconds:(0,Xd().XX)(t.getModel())/1e3,currentPurgeDelayInSeconds:(0,Xd().NA)(t.getModel())/1e3})),[t]),d=(0,s.useMemo)((()=>(0,Jd().Rv)({currentDeleteFromTrashDelayInSeconds:r,currentPurgeDelayInSeconds:l,intl:o})),[r,l,o]),c=(0,s.useMemo)((()=>ec.map((e=>({key:e.toString(),value:e,shortTitle:(0,Jd().$E)([e]),title:(0,Jd().dU)(e),caption:d(e),wrapCaption:!0})))),[d]);return(0,i.jsx)(Ys().VX,{pillIcon:Zd().pageIcon,pillTitle:(0,Jd().$E)([]),selectedItems:a,setSelectedItems:n,items:c})}function ac(e){let{spaceStore:t,filters:a,setFilters:n,pageStores:o,organizationId:r}=e;const l=(0,s.useMemo)((()=>[t.id]),[t.id]),{teamStores:d}=(0,B().o)(l),c=d[t.id],u=(0,Hn().F)();return(0,i.jsxs)("div",{style:u.tableHeader,children:[(0,i.jsxs)("div",{style:u.leftContent,children:[(0,i.jsx)(Hd,{showAsPill:!0,organizationId:r,currentTabRoute:x().D8,currentTabProperties:{subtab:ic.ContentSearch},selectedSpaceStore:t}),(0,i.jsx)(tc,{spaceStore:t,selectedPageStatus:a.pageStatus,setSelectedPageStatus:function(e){n({pageStatus:e},{runSearchAfter:!0})}}),(0,i.jsx)(Ed().Z,{lastEditedTime:a.lastEditedTime,createdTime:a.createdTime,setLastEditedTime:function(e){n({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){n({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}}),(0,i.jsx)(Gd,{selectedTeamspaceIds:a.teamIds,setSelectedTeamspaceIds:function(e){n({teamIds:e},{runSearchAfter:!0})},teamspaceStores:c}),(0,i.jsx)($d,{spaceStore:t,selectedUsers:a.sharedWith??[],setSelectedUsers:function(e){n({sharedWith:e},{runSearchAfter:!0})},includeGroups:!0,includeGuests:!0,pillTitle:(0,i.jsx)(v().sA,{id:"adminContentSearchTab.pagesTable.filters.sharedWith.title",defaultMessage:"Shared with"})}),(0,i.jsx)(Yd,{selectedAudience:a.audience,setSelectedAudience:function(e){n({audience:e},{runSearchAfter:!0})},audienceValues:Rd().p}),(0,i.jsx)($d,{spaceStore:t,selectedUsers:a.createdBy,setSelectedUsers:function(e){n({createdBy:e},{runSearchAfter:!0})},includeGuests:!0,pillTitle:(0,i.jsx)(v().sA,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",defaultMessage:"Created by"})})]}),(0,i.jsxs)("div",{style:u.rightContent,children:[(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:a.query,setQueryFilter:function(e){n({query:e},{runSearchAfter:!0})}}),(0,i.jsx)(Bd().t,{spaceId:t.id,organizationId:r,disabled:0===o.length,filters:a,shouldUseIconButton:!0})]})]})}function sc(e){let{spaceStore:t,userStore:a,organizationId:n}=e;const{showSuggestions:o,loadNextPage:r,hasNextPage:l,pageStores:d,loading:c,error:u,runNewSearch:g,filters:m,setFilters:p,refreshSearchResult:h}=(0,ko().I)({spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:true,organizationId:n});return(0,s.useEffect)((()=>{g()}),[t.id,g]),(0,i.jsxs)(El().t,{children:[(0,i.jsx)(Ha()._,{title:(0,i.jsx)(v().sA,{id:"settingsConsole.spaceContentSearch.title",defaultMessage:"Content search"}),byline:(0,i.jsx)(v().sA,{id:"settingsConsole.spaceContentSearch.description",defaultMessage:"Organization owners can search for any page in the workspaces owned by the organization. This includes private pages and deleted pages retained per the data retention policy"})}),(0,i.jsx)(ac,{spaceStore:t,setFilters:p,filters:m,pageStores:d,organizationId:n}),(0,i.jsx)(Nd().r,{loading:c,error:u,pageStores:d,loadNextPage:r,hasNextPage:l,filters:m,setFilters:p,showSuggestions:o,runNewSearch:g,hasUserConfirmedAcknowledgement:true,refreshSearchResult:h,shouldShowLoadMore:!0})]})}function nc(e){let{spaceId:t,organizationId:a,subtab:n,queryParams:o,tabRoute:i}=e;const r=(0,y().v3)(),{spaceIds:l}=(0,s.useContext)(R().D);(0,s.useEffect)((()=>{!t&&l.length>0&&Ne().oo({environment:r,url:(0,ls().re)({organizationId:a,tabRoute:i,properties:{subtab:n},queryParams:{...o,[Hf]:l[0]}})})}),[r,t,a,l,n,o,i])}function oc(e){let{organizationId:t,spaceId:a,tabRoute:s,subtab:n,queryParams:o}=e;const r=(0,S().K8)((()=>ve().default.state.currentUserStore),[]),l=oa({spaceId:a});return nc({organizationId:t,spaceId:a,tabRoute:s,subtab:n,queryParams:o}),l&&r&&t?(0,i.jsx)(sc,{spaceStore:l,userStore:r,organizationId:t}):null}let ic=function(e){return e.LegalHolds="legal-holds",e.ContentSearch="content-search",e.AuditLog="audit-log",e}({});const rc={[ic.LegalHolds]:{title:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.legalHolds.title",defaultMessage:"Legal holds"})},[ic.ContentSearch]:{title:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.contentSearch.title",defaultMessage:"Content search"})},[ic.AuditLog]:{title:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.auditLog.title",defaultMessage:"Audit log"})}};function lc(e){const{subtab:t,organizationId:a}=e,n=(0,y().v3)(),o=(0,s.useMemo)((()=>t?function(e){switch(e){case ic.LegalHolds:return ic.LegalHolds;case ic.ContentSearch:return ic.ContentSearch;case ic.AuditLog:return ic.AuditLog;default:return ic.LegalHolds}}(t):void 0),[t]);if(!a)return null;let r=null;switch(o){case ic.ContentSearch:r=(0,i.jsx)(oc,{...e});break;case ic.AuditLog:r=(0,i.jsx)(Pd,{...e});break;case ic.LegalHolds:r=(0,i.jsx)(dd,{organizationId:a})}return r&&o?(0,i.jsx)(cd().D,{breadcrumbs:[{onClick:()=>{(0,gd().i)({environment:n,organizationId:a,from:{tabRoute:x().D8,properties:{subtab:o}},tabRoute:x().D8})},message:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.breadcrumb.goBack",defaultMessage:"Data & Compliance"})},{message:rc[o].title}],children:r}):(0,i.jsx)(dc,{...e})}function dc(e){let{organizationId:t}=e;const a=(0,y().v3)(),n=(0,de().Z)(),{availableOrganizationFeatures:o}=(0,s.useContext)(R().D),r=o.legal_holds_enabled,{legalHolds:l,loading:d}=Bl({organizationId:t,filters:{status:"active"}});return(0,i.jsxs)(ud,{children:[(0,i.jsx)(Ha()._,{title:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.title",defaultMessage:"Data & Compliance"}),byline:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.byline",defaultMessage:"Access tools for content search, audit logs, and legal holds to ensure data governance and meet regulatory requirements"}),bylineWidth:"70%"}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.title",defaultMessage:"Data governance"}),content:(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsx)(re,{title:rc[ic.LegalHolds].title,byline:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.legalHolds.byline",defaultMessage:"Place members on legal hold and export their content"}),rightContent:d?(0,i.jsx)(le().A,{style:n.longShimmer}):(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.legalHolds.rightContent",defaultMessage:"{numLegalHolds, plural, one {# active legal hold} other {# active legal holds}}",values:{numLegalHolds:l.length.toLocaleString()}}),onClick:()=>cc({environment:a,organizationId:t,tab:ic.LegalHolds})}),(0,i.jsx)(re,{title:rc[ic.ContentSearch].title,byline:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.contentSearch.byline",defaultMessage:"See all the pages this user has shared externally or with other members"}),onClick:()=>cc({environment:a,organizationId:t,tab:ic.ContentSearch})}),(0,i.jsx)(re,{title:rc[ic.AuditLog].title,byline:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.auditLog.byline",defaultMessage:"See all recent activity on Notion"}),onClick:()=>cc({environment:a,organizationId:t,tab:ic.AuditLog})})]})})]})}function cc(e){const{environment:t,organizationId:a,tab:s}=e;(0,gd().i)({environment:t,organizationId:a,from:{tabRoute:x().D8},tabRoute:x().D8,properties:{subtab:s}})}var uc=()=>a(837606);class gc extends uc().f{getInitialState(){return{categorySelections:{organization:uc().o.All},categoryToggleOpen:{organization:!0},searchQuery:void 0,actionSelections:(0,Ee().s8)(vl().cj,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"organization",orderedActions:vl().A1.organization}]}}}var mc=()=>a(577040),pc=()=>a(415806),hc=()=>a(151258);const fc=(0,v().j4)((function(e){const{parentStore:t,auditLogHistoricalUserStore:a,selectedActors:n,onChange:o,intl:r}=e,l=(0,y().v3)(),[d,c]=s.useState(new Set(n.map(mc().Ht))),u=(0,i.jsx)(v().sA,{id:"auditlogActorFilter.title",defaultMessage:"User"}),g=(0,s.useCallback)((()=>{const e=Array.from(d).map(mc().Hl).filter((e=>Boolean(e)));o(e)}),[d,o]),m=(0,s.useCallback)((()=>{const e=n.map(mc().Ht);c(new Set(e))}),[n]),h=(0,s.useCallback)((e=>{"applyButton"!==e?m():g()}),[g,m]),f={title:u,tokenInputPlaceholder:r.formatMessage({defaultMessage:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:r.formatMessage({defaultMessage:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"};return(0,i.jsx)(jl().A,{mode:jl().C.Pill,title:u,icon:p().z,iconStyles:{marginRight:2},items:Array.from(d),hasItemsSelected:(null==n?void 0:n.length)>0,onChange:e=>{c(new Set(e))},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:h,labelText:f,performRequest:e=>async function(e){let{args:t,auditLogHistoricalUserStore:a,selectedActors:s,environment:n,parentStore:o}=e;const{query:i}=t,{allUserIds:r,allBotIds:l}=a.getState(),d=100,c=await Ia().T.searchActions.load(),u=await c.searchActorsById({environment:n,query:i,userIds:[...r],botIds:[...l],store:o}),g=[...u.users.map((e=>`notion_user:${e.id}`)),...u.bots.map((e=>`bot:${e.id}`))];if(i.length>0)return g.slice(0,d);const m=s.map(mc().Ht),p=new Set(m),h=g.filter((e=>!p.has(e)));return[...m,...h].slice(0,Math.max(m.length,d))}({args:e,auditLogHistoricalUserStore:a,selectedActors:n,environment:l,parentStore:t}),renderResultMenuItem:(e,s)=>{var n;const o=bc(e,t);return(0,i.jsx)(xc,{...s,item:e,tempActorSelections:d,showRemovedBadge:a.isUserOrBotRemoved(null===(n=o.asActor)||void 0===n?void 0:n.id),actor:o,intl:r})},renderToken:(e,a)=>(0,i.jsx)(vc,{item:e,handlers:a,tempActorSelections:d,parentStore:t}),renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})})),xc=(0,s.forwardRef)(((e,t)=>{const{item:n,intl:o,tempActorSelections:r,showRemovedBadge:l,actor:d}=e,c=(0,S().K8)((()=>(0,Ga().lR)(o,d)),[o,d]);return(0,s.createElement)(ts().A,{...e,ref:t,key:n,actor:d,useEmailAsTooltip:!0,isChecked:r.has(n),userTitle:(0,i.jsxs)("div",{style:{display:"flex",gap:4},children:[c,l&&(0,i.jsx)(a(678523).A,{children:(0,i.jsx)(v().sA,{id:"auditlogActorFilter.removed_user",defaultMessage:"Removed"})})]})})}));function vc(e){let{item:t,handlers:a,tempActorSelections:s,parentStore:n}=e;const o=1===s.size,r=(0,S().K8)((()=>bc(t,n)),[n,t]);return r?(0,i.jsx)(pc().Ay,{format:hc().mI.Small,showRemoveButton:!0,isSingle:o,onClickRemove:a.onRemove,actor:r,shouldShrink:!0},t):null}function bc(e,t){const a=(0,mc().Hl)(e);return a?"notion_user"===a.actorType?(0,Ga().MR)(function(e,t){return z().LU.createChildStore(t,{table:w().oo,id:e}).getModel()}(a.actorId,t)):(0,Ga().oC)(function(e,t){return z().vK.createChildStore(t,{table:Al().GP,id:e}).getModel()}(a.actorId,t)):(0,Ga().MR)(void 0)}function yc(e){let{onChange:t}=e;const a=(0,S().uB)(void 0,gc),s=(0,S().uB)(void 0,gc);return(0,i.jsx)(Pl().A,{lastSelectionStore:a,componentStore:s,onChange:t})}function Sc(e){let{onChange:t}=e;const a=(0,S().uB)(void 0,Nl().D),s=(0,S().uB)(void 0,Nl().D);return(0,i.jsx)(Pl().A,{lastSelectionStore:a,componentStore:s,onChange:t})}xc.displayName="ResultMenuItem";const jc=(0,v().j4)((function(e){const{parentStore:t,organizationId:n,selectedSpaceId:o}=e,r=oa({spaceId:o}),{availableOrganizationFeatures:l}=(0,s.useContext)(R().D),[d,c]=(0,S().$y)(yl().A),[u,g,m]=(0,S().$y)(Cl);return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:4},children:[l.organization_console_new_data_compliance_view_enabled?(0,i.jsx)(Hd,{showAsPill:!0,shouldShowOrganizationOption:!0,organizationId:n,currentTabRoute:x().D8,currentTabProperties:{subtab:ic.AuditLog},selectedSpaceStore:r}):(0,i.jsx)(Hd,{showAsPill:!0,shouldShowOrganizationOption:!0,organizationId:n,currentTabRoute:x()._g,selectedSpaceStore:r}),(0,i.jsx)(Sl().A,{mode:jl().C.Pill,focused:!1,title:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlogDateFilter.title",defaultMessage:"Date"}),icon:Cr().D,value:d.timeRange,showButtons:"footer",onChange:e=>{c({...d,timeRange:e,pageNum:1})}}),(0,i.jsx)(fc,{parentStore:t,auditLogHistoricalUserStore:m,selectedActors:d.actors,onChange:e=>{c({...d,actors:e,pageNum:1})}}),(0,a(360482).nw)(t)?(0,i.jsx)(yc,{onChange:e=>{c({...d,actions:e,pageNum:1})}}):(0,i.jsx)(Sc,{onChange:e=>{c({...d,actions:e,pageNum:1})}})]})}));function wc(e){let{isHovered:t,auditLogEntry:a,eventColumnId:s}=e;const n=(0,v().tz)(),o=wd({auditLogEntry:a,eventColumnId:s});return(0,i.jsx)(cs,{isHovered:t,iconFunction:d().d,tooltipMessage:n.formatMessage(Ac.copyRow),buttonProps:{onClick:o}})}const Ac=(0,v().YK)({copyRow:{defaultMessage:"Copy row",id:"organization.auditLog.table.copyRow"}}),Mc=[{id:"timestampColumn",headerTitle:(0,i.jsx)(v().sA,{id:"auditlog.logTable.timestampColumn.header",defaultMessage:"Timestamp"}),renderCell:e=>{const t=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(pd().V,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{widthPercent:30,minWidth:160,maxWidth:200},sortable:!1},{id:"event",headerTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.singleUserView.auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(hd().m,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{widthPercent:70,minWidth:200,maxWidth:800},sortable:!1},{id:"copyAction",headerTitle:void 0,renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(wc,{isHovered:e.isRowHovered,auditLogEntry:e.auditLogEntry,eventColumnId:t})},widthData:{width:30},sortable:!1}];const Cc=(0,v().j4)((function(e){const{searchResponse:t,parentStore:a,filters:s,setFilters:n}=e,o=t.results||[],r=t.hasMoreResults,l=e=>{const t={...s,pageNum:e};n(t)},d=(0,Gt().A)(),c=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:Mc,theme:e,containerMarginTop:0})),[]),u=o.map(((e,t)=>({id:t.toString(),auditLogEntry:e,parentStore:a,isClickable:!1}))),g=Mc.map((e=>({...e,rowStyle:d.tableRow})));return(0,i.jsx)(Et().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:g,rows:u,renderNoRowsComponent:kd,styles:c,loadMoreMethod:{type:"pages",onLoadNext:()=>{l(s.pageNum+1)},onLoadPrevious:()=>{l(s.pageNum-1)},hasNextPage:r,hasPrevPage:s.pageNum>1,currentPage:s.pageNum}})}));function Ic(e){var t;let{userStore:a,organizationStore:n}=e;const o=(0,y().v3)(),r=(0,Ts().l)(),l=Do({spaceStores:r}),[d,c]=(0,s.useState)(null===(t=r[0])||void 0===t?void 0:t.id),u=oa({spaceId:d}),g=(0,S().O$)(Tl),[m,p]=(0,s.useState)({pageNum:1,pageSize:at().q,timeRange:{},actors:[{actorId:a.id,actorType:"notion_user"}],actions:[],sortOrder:vl().K7.CreatedNewest}),h=(0,yl()._)(m)!==g.filterStr?void 0:g.cachedResponses[m.pageNum];(0,s.useEffect)((()=>{u&&_l({environment:o,auditLogPointer:{id:u.id,table:u.table},organizationId:n.id,filters:m})}),[o,u,m,n.id]);const f=(0,j().IS)((()=>({filters:{display:"flex",flexDirection:"row"},actionContainer:{display:"flex",flexDirection:"row",margin:"0 auto 12px"}})),[]);return u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:f.actionContainer,children:(0,i.jsxs)("div",{style:f.filters,children:[(0,i.jsx)(Fo,{selectedSpaceId:d,setSelectedSpaceId:c,spaceData:l,shouldHideClear:!0}),(0,i.jsx)(Sl().A,{mode:jl().C.Pill,focused:!1,title:(0,i.jsx)(v().sA,{id:"singleUserAuditLogTable.datedFilter.title",defaultMessage:"Date"}),icon:Cr().D,value:m.timeRange,showButtons:"footer",onChange:e=>{p({...m,timeRange:e,pageNum:1})}}),(0,i.jsx)(Sc,{onChange:e=>{p({...m,actions:e,pageNum:1})}})]})}),"loading"===(null==h?void 0:h.status)&&(0,i.jsx)(bl().A,{}),"success"===(null==h?void 0:h.status)&&(0,i.jsx)(Cc,{searchResponse:h,parentStore:u,filters:m,setFilters:p})]}):null}const Tc=(0,v().YK)({auditLog:{id:"settingsConsole.singleUserView.auditLogTab.title",defaultMessage:"Audit log"},auditLogLabel:{id:"settingsConsole.singleUserView.auditLogTab.label",defaultMessage:"View all the audit log events for this user"}});function kc(e){const t=(0,v().tz)();return(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:t.formatMessage(Tc.auditLog),byline:t.formatMessage(Tc.auditLogLabel)}),(0,i.jsx)(Ic,{...e})]})}var _c=()=>a(289113),zc=()=>a(463787),Dc=()=>a(783271);function Pc(e){let{organizationStore:t,userStore:a,userData:n}=e;const{userSpaceAccessMap:o,updateUserRoleInSpaceCache:r,removeUserFromSpaceCache:l}=n,d=(0,v().tz)(),c=(0,j().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",gap:16,width:"100%",paddingBottom:16},divider:{color:e.stroke.secondary}})),[]),u=Array.from(o.values()).some((e=>(0,A().QE)(e))),[g,m]=s.useState({isOpen:!1}),[p,h]=s.useState({isOpen:!1}),f=(0,s.useCallback)((()=>{u&&m({isOpen:!0,memberSpaceIds:Array.from(o.entries()).map((e=>{let[t,a]=e;return(0,A().c7)(a)?t:void 0})).filter(Ee().O9)})}),[u,o]),x=(0,s.useCallback)((()=>{u&&h({isOpen:!0,guestSpaceIds:Array.from(o.entries()).map((e=>{let[t,a]=e;return(0,A().QE)(a)?t:void 0})).filter(Ee().O9)})}),[u,o]),b=(0,S().K8)((()=>a.getModel()),[a]);return u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:c.container,children:[(0,i.jsx)(D().D,{styleName:"Heading-17px/Regular",children:d.formatMessage(Nc.manageGuestAccessTitle)}),(0,i.jsx)(Ae().y,{title:d.formatMessage(Nc.convertGuestLabel),byline:d.formatMessage(Nc.convertGuestDescription),item:(0,i.jsx)(V().A,{size:"md",onClick:f,children:d.formatMessage(Nc.convertGuestButton)})}),(0,i.jsx)(Ir().A,{dividerColor:c.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:d.formatMessage(Nc.removeGuestLabel),byline:d.formatMessage(Nc.removeGuestDescription),item:(0,i.jsx)(V().A,{size:"md",onClick:x,children:d.formatMessage(Nc.removeGuestButton)})})]}),g.isOpen&&b&&(0,i.jsx)(Ns,{organizationStore:t,userModel:b,disabledSpaceIds:g.memberSpaceIds,onDismiss:()=>m({isOpen:!1}),refreshSpaceData:e=>r(e,"read_and_write")}),p.isOpen&&b&&(0,i.jsx)(Os,{organizationStore:t,userModel:b,guestSpaceIds:p.guestSpaceIds,onDismiss:()=>h({isOpen:!1}),refreshSpaceData:e=>l(e)})]}):null}const Nc=(0,v().YK)({manageGuestAccessTitle:{id:"organizationConsole.singleUserView.manageGuestAccess.manageGuestAccessTitle",defaultMessage:"Guest access"},convertGuestLabel:{id:"organizationConsole.singleUserView.manageUserActions.convertGuestLabel",defaultMessage:"Upgrade guest to member"},convertGuestDescription:{id:"organizationConsole.singleUserView.manageUserActions.convertGuestDescription",defaultMessage:"Upgrade this guest to a workspace member with full workspace access"},convertGuestButton:{id:"organizationConsole.singleUserView.manageUserActions.convertGuestButton",defaultMessage:"Upgrade to member"},removeGuestLabel:{id:"organizationConsole.singleUserView.manageUserActions.removeGuestLabel",defaultMessage:"Remove guest access"},removeGuestDescription:{id:"organizationConsole.singleUserView.manageUserActions.removeGuestDescription",defaultMessage:"Revoke this guest's access to all pages in select workspaces"},removeGuestButton:{id:"organizationConsole.singleUserView.manageUserActions.removeGuestButton",defaultMessage:"Remove guest access"}});var Rc=()=>a(631474);function Bc(e){const{userId:t,onDismiss:a,onSubmit:n,shouldWarnLegalHold:o}=e,r=(0,y().v3)(),l=(0,v().tz)(),d=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:440,display:"flex",flexDirection:"column",alignItems:"center"},confirmationContainer:{display:"flex",gap:10,alignItems:"center"}})),[]),c=(0,S().K8)((()=>{if(!t)return"";return new(vt().L)(r,{table:w().oo,id:t}).getDisplayName(l)}),[r,t,l]);const[u,g]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,rt().J)(d.icon),title:o?l.formatMessage(Ec.legalHoldTitle):l.formatMessage(Ec.title),byline:l.formatMessage(Ec.byline,{userName:c,b:e=>(0,i.jsx)("b",{children:e})})}),footer:(0,i.jsx)(Y().jl,{primaryText:l.formatMessage(Ec.buttonText),primaryAction:async()=>{g(!0),await async function(){await n(),a()}(),g(!1)},primaryDisabled:u||!m,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.destructiveUserAction.cancelButton",defaultMessage:"Cancel"}),secondaryAction:a,isDarkRed:!0}),children:(0,i.jsx)("div",{style:d.container,children:(0,i.jsxs)("div",{style:d.confirmationContainer,children:[(0,i.jsx)(dt().A,{checked:m,size:14,checkSize:10,onClick:()=>p(!m)}),(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:l.formatMessage(Ec.confirmationText)})]})})})})}const Ec=(0,v().YK)({title:{id:"orgConsole.people.modal.deleteUser.title",defaultMessage:"Are you sure you want to delete this user?"},legalHoldTitle:{id:"orgConsole.people.modal.deleteUser.legalHoldTitle",defaultMessage:"This user is currently on legal hold."},byline:{id:"orgConsole.people.modal.deleteUser.byline",defaultMessage:"<b>{userName}</b> will be removed from all workspaces, losing access to content, groups, and teamspaces. Restore within 30 days before permanent deletion."},confirmationText:{id:"orgConsole.people.modal.deleteUser.confirmationText",defaultMessage:"I understand this deletion is permanent"},buttonText:{id:"orgConsole.people.modal.deleteUser.buttonText",defaultMessage:"Delete user"}});function Lc(e){let{userStore:t,isSuspended:a,disabled:n,shouldWarnLegalHold:o}=e;const r=(0,y().v3)(),[l,d]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Le().E,{color:"uiRed",onClick:()=>d(!0),disabled:n,children:(0,i.jsx)(v().sA,{id:"organizationConsole.singleUserView.manageUserActions.deleteUserAccountButton",defaultMessage:"Delete user"})}),l&&(0,i.jsx)(Bc,{shouldWarnLegalHold:o,userId:t.id,onDismiss:()=>d(!1),onSubmit:async()=>await Oc({environment:r,isSuspended:a,userId:t.id})})]})}async function Oc(e){let{environment:t,isSuspended:a,userId:s}=e;Rc().KB(t,{user_status:a?"suspended":"notSuspended"});const n=await M().callApi({eventName:"deleteManagedUser",environment:t,data:{userId:s}});Rc().$W(t,{user_status:a?"suspended":"notSuspended"}),"failed"===n.type&&C().c1(n.error.message)}var Uc=()=>a(862067);function Fc(e){const t=(0,y().v3)(),{type:a,userId:n,onDismiss:o,onSubmit:r}=e,l=(0,v().tz)(),d=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:375}})),[]),c=(0,S().K8)((()=>{if(!n)return"";return new(vt().L)(t,{table:w().oo,id:n}).getDisplayName(l)}),[t,n,l]);const{title:u,byline:g,buttonText:m}=function(){switch(a){case"suspend":return{title:l.formatMessage(Hc.suspendTitle),byline:l.formatMessage(Hc.suspendByline,{userName:c,b:e=>(0,i.jsx)("b",{children:e})}),buttonText:l.formatMessage(Hc.suspendButton)};case"resetPasswordSingle":return{title:l.formatMessage(Hc.resetPasswordSingleTitle),byline:l.formatMessage(Hc.resetPasswordSingleByline),buttonText:l.formatMessage(Hc.resetPasswordSingleButton)};case"resetPasswordAll":return{title:l.formatMessage(Hc.resetPasswordAllTitle),byline:l.formatMessage(Hc.resetPasswordAllByline),buttonText:l.formatMessage(Hc.resetPasswordAllButton)};case"logoutSingle":return{title:l.formatMessage(Hc.logoutSingleTitle),byline:l.formatMessage(Hc.logoutSingleByline),buttonText:l.formatMessage(Hc.logoutSingleButton)};case"logoutAll":return{title:l.formatMessage(Hc.logoutAllTitle),byline:l.formatMessage(Hc.logoutAllByline),buttonText:l.formatMessage(Hc.logoutAllButton)};default:(0,Ee().HB)(a)}}();const[p,h]=(0,s.useState)(!1);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,qr().exclamationMarkTriangleIcon)(d.icon),title:u,byline:(0,i.jsx)("div",{style:d.container,children:g})}),footer:(0,i.jsx)(Y().jl,{primaryText:m,primaryAction:async()=>{h(!0),await async function(){await r(),o()}(),h(!1)},primaryDisabled:p,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.destructiveUserAction.cancelButton",defaultMessage:"Cancel"}),secondaryAction:o,isLightRed:!0})})})}const Hc=(0,v().YK)({suspendTitle:{id:"orgConsole.people.modal.destructiveUserAction.suspendTitle",defaultMessage:"Suspend this user?"},suspendByline:{id:"orgConsole.people.modal.destructiveUserAction.suspendByline",defaultMessage:"<b>{userName}</b> will lose all workspace and notification access. Their content, comments, and @mentions will stay visible, and integrations will remain active."},suspendButton:{id:"orgConsole.people.modal.destructiveUserAction.suspendButton",defaultMessage:"Suspend user"},resetPasswordSingleTitle:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordTitle",defaultMessage:"Reset password for this user?"},resetPasswordSingleByline:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordByline",defaultMessage:"This will log the user out, remove 2-step verification, and require re-authentication via email. The user must set a new password to log back into Notion."},resetPasswordSingleButton:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordButton",defaultMessage:"Reset password"},resetPasswordAllTitle:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordAllTitle",defaultMessage:"Reset password for all managed users?"},resetPasswordAllByline:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordAllByline",defaultMessage:"This will log the users out, remove 2-step verification, and require re-authentication via email. All managed users must set new passwords to log back into Notion."},resetPasswordAllButton:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordAllButton",defaultMessage:"Reset all passwords"},logoutSingleTitle:{id:"orgConsole.people.modal.destructiveUserAction.logoutTitle",defaultMessage:"Log out this user?"},logoutSingleByline:{id:"orgConsole.people.modal.destructiveUserAction.logoutByline",defaultMessage:"You are about to log out this user from their current session. They will need to re-authenticate to log back into Notion."},logoutSingleButton:{id:"orgConsole.people.modal.destructiveUserAction.logoutButton",defaultMessage:"Log out user"},logoutAllTitle:{id:"orgConsole.people.modal.destructiveUserAction.logoutAllTitle",defaultMessage:"Log out all managed users?"},logoutAllByline:{id:"orgConsole.people.modal.destructiveUserAction.logoutAllByline",defaultMessage:"You are about to log out the users from their current session. They will need to re-authenticate to log back into Notion."},logoutAllButton:{id:"orgConsole.people.modal.destructiveUserAction.logoutAllButton",defaultMessage:"Log out all users"}});function Vc(e){let{organizationStore:t,userId:a,disabled:n,isRed:o}=e;const r=(0,y().v3)(),[l,d]=(0,s.useState)(!1),c=a?(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedAccounts.logoutUsers.logoutButton",defaultMessage:"Force log out"}):(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedAccounts.logoutAllUsers.logoutButton",defaultMessage:"Log out all users"}),u=()=>d(!0);return(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)(Le().E,{color:"uiRed",disabled:n,onClick:u,children:c}):(0,i.jsx)(V().A,{size:"md",disabled:n,disabledFeedback:n,onClick:u,children:c}),l&&(0,i.jsx)(Fc,{type:a?"logoutSingle":"logoutAll",onDismiss:()=>d(!1),onSubmit:async()=>{a?await Wc({environment:r,organizationId:t.id,userId:a}):await async function(e){let{environment:t,organizationId:a,emailDomains:s}=e;Rc().V6(t,{email_domains:s}),await M().callApi({eventName:"logoutManagedUsers",environment:t,data:{organizationId:a,target:{type:Uc().u.Domains,emailDomains:s}}}),lt().D6({label:(0,i.jsx)(v().sA,{id:"managedAccounts.toastMessage.logout.all.success",defaultMessage:"Successfully logged out all managed accounts"})}),Rc().wE(t,{email_domains:s})}({environment:r,organizationId:t.id,emailDomains:t.getEmailDomains()})}})]})}async function Wc(e){let{environment:t,organizationId:a,userId:s}=e;Rc().fv(t),await M().callApi({eventName:"logoutManagedUsers",environment:t,data:{organizationId:a,target:{type:Uc().u.User,userId:s}}}),lt().D6({label:(0,i.jsx)(v().sA,{id:"managedAccounts.toastMessage.logout.single.success",defaultMessage:"Successfully logged out user"})}),Rc().fv(t)}const qc=(0,v().YK)({singleUserSuccess:{id:"managedAccounts.toastMessage.forcePasswordReset.userId.success",defaultMessage:"Initiated password reset for the managed account."},singleUserRateLimited:{id:"managedAccounts.toastMessage.forcePasswordReset.userId.ratelimiterror",defaultMessage:"A recent password reset request was made. Please try again later."},singleUserError:{id:"managedAccounts.toastMessage.forcePasswordReset.userId.error",defaultMessage:"There was an error resetting the password for the managed account. Please try again later."},bulkSuccess:{id:"managedAccounts.toastMessage.forcePasswordReset.all.success",defaultMessage:"Initiated password reset for all managed accounts."},bulkRateLimited:{id:"managedAccounts.toastMessage.forcePasswordReset.all.ratelimiterror",defaultMessage:"A recent password reset request was made. Please try again later."},bulkError:{id:"managedAccounts.toastMessage.forcePasswordReset.all.error",defaultMessage:"There was an error resetting the passwords for all managed accounts. Please try again later."}});function Gc(e){return"success"===e.type?qc.singleUserSuccess:"failed"===e.type&&429===e.status?qc.singleUserRateLimited:qc.singleUserError}function Kc(e){return"success"===e.type?qc.bulkSuccess:"failed"===e.type&&429===e.status?qc.bulkRateLimited:qc.bulkError}function Yc(e){let{organizationStore:t,userId:a,disabled:n,isRed:o}=e;const r=(0,y().v3)(),[l,d]=(0,s.useState)(!1),c=a?(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedAccounts.forcePasswordReset.resetSingleButton",defaultMessage:"Reset password"}):(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedAccounts.forcePasswordReset.resetAllButton",defaultMessage:"Reset all passwords"}),u=()=>d(!0);return(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)(Le().E,{color:"uiRed",disabled:n,onClick:u,children:c}):(0,i.jsx)(V().A,{size:"md",disabled:n,disabledFeedback:n,onClick:u,children:c}),l&&(0,i.jsx)(Fc,{type:a?"resetPasswordSingle":"resetPasswordAll",onDismiss:()=>d(!1),onSubmit:async()=>{a?await Qc({environment:r,organizationId:t.id,userId:a}):await async function(e){let{environment:t,organizationId:a,emailDomains:s}=e;Rc().m6(t,{email_domains:s});const n=await M().callApi({eventName:"resetPasswordsForManagedUsers",environment:t,data:{organizationId:a,target:{type:Uc().u.Domains,emailDomains:s}}});lt().D6({label:(0,i.jsx)(v().sA,{...Kc(n)})}),Rc().Jm(t,{email_domains:s})}({environment:r,organizationId:t.id,emailDomains:t.getEmailDomains()})}})]})}async function Qc(e){let{environment:t,organizationId:a,userId:s}=e;Rc().HD(t);const n=await M().callApi({eventName:"resetPasswordsForManagedUsers",environment:t,data:{organizationId:a,target:{type:Uc().u.User,userId:s}}});lt().D6({label:(0,i.jsx)(v().sA,{...Gc(n)})}),Rc().CF(t)}var $c=()=>a(90760),Xc=()=>a(761800);function Zc(e){let{isAccessGranted:t,disabled:a,toggleDataAccessConsent:s}=e;const n=t?"granted":"denied",o=[{key:"granted",label:(0,i.jsx)(v().sA,{id:"organizationConsole.singleUserView.details.supportAccessGranted",defaultMessage:"Access granted"})},{key:"denied",label:(0,i.jsx)(v().sA,{id:"organizationConsole.singleUserView.details.supportAccessNotGranted",defaultMessage:"Not granted"})}],r=(0,j().IS)((e=>({button:{border:`1px solid ${e.outlineButtonBorder}`,...Xc().W,...a&&Xc().M}})),[a]);return(0,i.jsx)($c().m,{isMobile:!1,disabled:a,type:"dropdown",currentOption:n,options:o,onSelectOption:e=>{e!==n&&s()},buttonStyle:r.button,placementToOrigin:$a().W.Bottom,alignmentToOrigin:$a().C.End})}function Jc(e){let{userStore:t,isSuspended:a,disabled:n}=e;const o=(0,y().v3)(),[r,l]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V().A,{size:"md",onClick:async()=>{a?await eu({environment:o,isSuspended:a,userId:t.id}):l(!0)},disabled:n,disabledFeedback:n,children:a?(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedAccounts.suspendUser.reactivateButton",defaultMessage:"Re-activate user"}):(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedAccounts.suspendUser.suspendButton",defaultMessage:"Suspend user"})}),r&&(0,i.jsx)(Fc,{type:"suspend",userId:t.id,onDismiss:()=>l(!1),onSubmit:async()=>await eu({environment:o,isSuspended:a,userId:t.id})})]})}async function eu(e){let{environment:t,isSuspended:a,userId:s}=e;a||Rc().th(t);const n=await M().callApi({eventName:"updateUserSuspension",environment:t,data:{userId:s,suspend:!a}});a?Rc().P4(t):Rc().Az(t,{suspended_user_id:s}),"failed"===n.type&&C().f1((0,T().Hu)(k().A.getIntl(),n))}function tu(e){let{organizationStore:t,userStore:a,isUserManaged:s,isAccessGranted:n,toggleDataAccessConsent:o,isOnLegalHold:r}=e;const l=(0,v().tz)(),d=a.id,c=(0,S().K8)((()=>a.getIsSuspended()),[a]),u=(0,S().K8)((()=>t.isUserLastOwner(a.id)),[t,a.id]),g=(0,j().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]);return(0,i.jsxs)("div",{style:g.container,children:[(0,i.jsx)(D().D,{styleName:"Heading-17px/Semibold",children:l.formatMessage(su.manageUserTitle)}),!s&&(0,i.jsx)(Gr().l,{iconGroup:Wr().Z,label:l.formatMessage(su.settingsNotAvailable),description:l.formatMessage(su.settingsNotAvailableDescription),display:"inline",tint:"gray"}),(0,i.jsx)(Ae().y,{title:l.formatMessage(su.supportAccessLabel),byline:l.formatMessage(su.supportAccessDescription),item:(0,i.jsx)(au,{disableTooltip:s,children:(0,i.jsx)(Zc,{isAccessGranted:n,disabled:!s,toggleDataAccessConsent:o})})}),(0,i.jsx)(Ir().A,{dividerColor:g.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:l.formatMessage(su.changeStatusLabel),byline:l.formatMessage(su.changeStatusDescription),item:(0,i.jsx)(au,{disableTooltip:s,children:(0,i.jsx)(Jc,{userStore:a,isSuspended:c,disabled:!s})})}),(0,i.jsx)(Ir().A,{dividerColor:g.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:l.formatMessage(su.forcePasswordResetLabel),byline:l.formatMessage(su.forcePasswordResetDescription),item:(0,i.jsx)(au,{disableTooltip:s,children:(0,i.jsx)(Yc,{organizationStore:t,userId:d,disabled:!s})})}),(0,i.jsx)(Ir().A,{dividerColor:g.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:l.formatMessage(su.forceLogoutLabel),byline:l.formatMessage(su.forceLogoutDescription),item:(0,i.jsx)(au,{disableTooltip:s,children:(0,i.jsx)(Vc,{organizationStore:t,userId:d,disabled:!s})})}),(0,i.jsx)(Ir().A,{dividerColor:g.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:l.formatMessage(su.deleteUserAccountLabel),byline:l.formatMessage(su.deleteUserAccountDescription),item:(0,i.jsx)(au,{disableTooltip:s&&!u,disabledTooltipText:u&&s?su.deleteAccountDisabledForLastOrgOwner:void 0,children:(0,i.jsx)(Lc,{userStore:a,isSuspended:c,disabled:!s||u,shouldWarnLegalHold:s&&r})})})]})}function au(e){let{children:t,disableTooltip:a,disabledTooltipText:s}=e;const n=(0,v().tz)();return(0,i.jsx)(G().A,{renderTooltip:()=>n.formatMessage(s??su.settingsNotAvailableTooltip),render:e=>(0,i.jsx)("div",{...e,children:t}),disableTooltip:a})}const su=(0,v().YK)({manageUserTitle:{id:"organizationConsole.singleUserView.manageUserActions.manageUserTitle",defaultMessage:"Managed user access"},settingsNotAvailable:{id:"organizationConsole.singleUserView.manageUserActions.notAvailable",defaultMessage:"Managed actions are not available for this user"},settingsNotAvailableDescription:{id:"organizationConsole.singleUserView.manageUserActions.notAvailableDescription",defaultMessage:"These settings are only available for user accounts with verified domains"},settingsNotAvailableTooltip:{id:"organizationConsole.singleUserView.manageUserActions.notAvailableTooltip",defaultMessage:"Not available for this role"},supportAccessLabel:{id:"organizationConsole.singleUserView.manageUserActions.supportAccessLabel",defaultMessage:"Allow support access"},supportAccessDescription:{id:"organizationConsole.singleUserView.manageUserActions.supportAccessDescription",defaultMessage:"Enable Notion support to troubleshoot or recover content"},changeStatusLabel:{id:"organizationConsole.singleUserView.manageUserActions.changeStatusLabel",defaultMessage:"Suspend or re-activate user"},changeStatusDescription:{id:"organizationConsole.singleUserView.manageUserActions.changeStatusDescription",defaultMessage:"Suspend to restrict all workspace access while keeping content and integrations active. Reactivate to restore access."},forcePasswordResetLabel:{id:"organizationConsole.singleUserView.manageUserActions.forcePasswordResetLabel",defaultMessage:"Reset password"},forcePasswordResetDescription:{id:"organizationConsole.singleUserView.manageUserActions.forcePasswordResetDescription",defaultMessage:"Log out user and require password reset on next login"},forceLogoutLabel:{id:"organizationConsole.singleUserView.manageUserActions.forceLogoutLabel",defaultMessage:"Force log out"},forceLogoutDescription:{id:"organizationConsole.singleUserView.manageUserActions.forceLogoutDescription",defaultMessage:"Log out user from all workspaces and require re-authentication"},deleteUserAccountLabel:{id:"organizationConsole.singleUserView.manageUserActions.deleteUserAccountLabel",defaultMessage:"Delete user account"},deleteUserAccountDescription:{id:"organizationConsole.singleUserView.manageUserActions.deleteUserAccountDescription",defaultMessage:"Remove this user from all workspaces. You have 30 days to restore access and data."},deleteAccountDisabledForLastOrgOwner:{id:"organizationConsole.singleUserView.manageUserActions.deleteAccountDisabledForLastOrgOwner",defaultMessage:"At least one organization owner is required. Add a new organization owner to enable this action."}}),nu=(0,v().YK)({disabledEditButtonTooltip:{id:"organizationConsole.singleUserView.manageUserActions.notAvailableTooltip",defaultMessage:"Not available for this role"},emailLabel:{id:"organizationConsole.singleUserView.details.emailLabel",defaultMessage:"Email"},lastActiveLabel:{id:"organizationConsole.singleUserView.details.lastActiveLabel",defaultMessage:"Last active"},emptyLastActive:{id:"identityProvisioningSettings.managedUsers.details.emptyLastActive",defaultMessage:"No activity"},supportAccessLabel:{id:"organizationConsole.singleUserView.details.supportAccessLabel",defaultMessage:"Support access"},supportAccessGranted:{id:"organizationConsole.singleUserView.details.supportAccessGranted",defaultMessage:"Access granted"},supportAccessNotGranted:{id:"organizationConsole.singleUserView.details.supportAccessNotGranted",defaultMessage:"Not granted"},unsupported:{id:"organizationConsole.singleUserView.details.unsupported",defaultMessage:"Unsupported"},joinedLabel:{id:"organizationConsole.singleUserView.details.joinedLabel",defaultMessage:"Joined"},emptyAccountCreated:{id:"identityProvisioningSettings.managedUsers.details.emptyAccountCreated",defaultMessage:"Incomplete"},toastSuccessfulCopy:{defaultMessage:"Copied email to clipboard",id:"singleUserModal.emailCell.copyButton.successfulCopy"}});function ou(e){let{organizationStore:t,userStore:s,userData:n,isOnLegalHold:o}=e;const{lastActiveAt:r,userSpaceAccessMap:l}=n,d=(0,v().tz)(),c=(0,y().v3)(),{longTallShimmer:u}=(0,de().Z)(),{resetState:g,saveChanges:m,profilePhoto:p,name:h,email:f}=(0,a(223082).u)({userStore:s}),x=function(e){const t=Array.from(e.userSpaceAccessMap.values()).map((e=>(0,A().c7)(e)?(0,Is().jM)(e.role):(0,A().QE)(e)?"page_guest":void(0,Ee().HB)(e)));return(0,Cs().nn)(e.organizationRole,t)}(n),b=(0,S().K8)((()=>s.getIsSuspended()),[s]),w=(0,S().K8)((()=>b?{type:"suspended"}:(0,zc().qh)({profilePhoto:p.value,name:h.value,email:f.value})),[b,p.value,h.value,f.value]),{userName:M,userEmail:C}=(0,S().K8)((()=>s.isReady()?{userName:s.getDisplayName(d),userEmail:s.getEmail()}:{userName:void 0,userEmail:void 0}),[s,d]),I=(0,S().K8)((()=>{const e=t.getEmailDomains();if(C&&(0,pt().Wy)(e,C))return(0,pt().zN)(C)}),[t,C]),T=void 0!==I,{isAccessGranted:k,toggleDataAccessConsent:_}=(0,a(505790).e)({userId:s.id,isUserUnmanaged:!T}),z=function(e){let t;for(const a of e.values())(0,A().c7)(a)&&a.firstJoinedSpaceTime&&(void 0===t||t>a.firstJoinedSpaceTime)&&(t=a.firstJoinedSpaceTime);return t}(l),P=(0,j().IS)((e=>({avatarContainer:{marginTop:-88,display:"flex",width:"100%"},nameContainer:{paddingTop:13,color:e.primaryBlack,display:"flex",alignItems:"center",gap:8},nameInput:{fontSize:26,fontWeight:U().Wy.bold,maxWidth:300},badgesContainer:{paddingTop:9,display:"flex"},label:{color:e.text.secondary},divider:{paddingTop:28},emailCell:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},infoContainer:{display:"grid",gridAutoColumns:"minmax(0, 1fr)",gridAutoFlow:"column",rowGap:16,columnGap:20},mainContentContainer:{display:"flex",flexDirection:"column",gap:40}})),[]),N=(0,a(707781).H)(d),R=!(0,S().O$)(a(802955).e);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(J,{}),(0,i.jsxs)(te,{children:[(0,i.jsx)("div",{style:P.avatarContainer,children:(0,i.jsx)(zc().Ay,{size:80,avatarType:w,disabled:!T,isOffline:R,loading:p.loading,onUploadProfilePhoto:p.setAndSave,onRemoveProfilePhoto:p.removeAndSave})}),(0,i.jsxs)("div",{style:P.nameContainer,children:[M?(0,i.jsx)(D().D,{styleName:"UITitle-26px/Bold",children:M}):(0,i.jsx)(le().A,{style:u}),(0,i.jsx)(X,{icon:un().personCircleFillIcon,title:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.title",defaultMessage:"Edit user details"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.byline",defaultMessage:"Edit this user's name and email address below. Changes will take effect immediately upon saving."}),name:M,email:C,onDismiss:g,onSave:m,onNameChange:h.set,onEmailChange:f.set,disabled:!M||!T,disabledTooltipText:d.formatMessage(nu.disabledEditButtonTooltip)})]}),(0,i.jsxs)("div",{style:P.mainContentContainer,children:[(0,i.jsxs)("div",{style:P.badgesContainer,children:[b&&(0,i.jsx)(Dc().zJ,{}),(0,i.jsx)(Dc().NQ,{highestRole:x}),(0,i.jsx)(Dc()._B,{emailDomain:I}),o&&(0,i.jsx)(Dc().sg,{})]}),(0,i.jsxs)("div",{style:P.infoContainer,children:[(0,i.jsx)(Tr().LX,{row:1,col:1,children:(0,i.jsx)(kr,{iconFunction:Gs,label:nu.emailLabel,value:(0,i.jsxs)(oe().fI,{gap:4,alignItems:"center",children:[(0,i.jsx)("div",{style:P.emailCell,children:C}),C&&(0,i.jsx)(js().lz,{isHovered:!0,size:16,containerStyles:{marginBlock:1},onCopyClick:async()=>{const e=await Sd().R.clipboardActions.load();await e.copyString({stringValue:C,environment:c,copiedMessage:e.clipboardMessages.copiedPropertyToClipboard}),lt().D6({label:d.formatMessage(nu.toastSuccessfulCopy)})}})]})},"email")}),(0,i.jsx)(Tr().LX,{row:1,col:2,children:(0,i.jsx)(kr,{iconFunction:Cr().D,label:nu.lastActiveLabel,value:r?(0,_c().DG)(r):d.formatMessage(nu.emptyLastActive)},"lastActive")}),(0,i.jsx)(Tr().LX,{row:2,col:1,children:(0,i.jsx)(kr,{iconFunction:Mr().questionMarkCircleIcon,label:nu.supportAccessLabel,value:d.formatMessage(T?k?nu.supportAccessGranted:nu.supportAccessNotGranted:nu.unsupported)},"supportAccess")}),(0,i.jsx)(Tr().LX,{row:2,col:2,children:(0,i.jsx)(kr,{iconFunction:Cr().D,label:nu.joinedLabel,value:z?(0,a(846581).W_)(z,"medium",N):d.formatMessage(nu.emptyAccountCreated)},"joined")})]}),(0,i.jsx)(Ir().A,{size:1}),(0,i.jsx)(Pc,{organizationStore:t,userStore:s,userData:n}),(0,i.jsx)(tu,{organizationStore:t,userStore:s,isUserManaged:T,isAccessGranted:k,toggleDataAccessConsent:_,isOnLegalHold:o})]})]})]})}const iu=at().q;var ru=()=>a(579031);function lu(e){const{columnRenderInfo:t,rows:a,rowFilterFn:s,isFiltered:n,expandedState:o,setExpandedState:r}=e,l=a.map((e=>{var t,a,i;const l=Boolean(o[e.id]),d={...e,isExpanded:l,setIsExpanded:(e,t)=>{r({...o,[e]:t})}};let c=null===(t=e.collapsibleRows)||void 0===t?void 0:t.map((e=>({...e,depth:1})));var u;s&&(c=null===(u=c)||void 0===u?void 0:u.filter(s));return d.collapsibleRows=c,l&&null!==(a=c)&&void 0!==a&&a.length?[d,...c]:!s||s(d)||n&&null!==(i=c)&&void 0!==i&&i.length?[d]:[]})).flat();if(!t.length)return null;const d=t[0];return(0,i.jsx)(Et().WE,{...e,rows:l,columnRenderInfo:[{...d,renderCell:cu(d.renderCell)},...t.slice(1)]})}function du(e){let{row:t,renderCell:a}=e;const{id:s,hideToggle:n,collapsibleRows:o,isExpanded:r,setIsExpanded:l,depth:d=0}=t,c=function(e,t){return(0,j().IS)((a=>({toggleContainer:{marginRight:gu,marginLeft:t*(uu+gu)},cellContainer:{overflow:"hidden"},toggle:{display:"flex",justifyContent:"center",alignItems:"center",visibility:e?void 0:"hidden"},icon:{display:"flex",justifyContent:"center",alignItems:"center"},content:{display:"flex",justifyContent:"end",alignItems:"center"},toggleColor:{color:e?a.regularIconColor:a.mediumIconColor}})),[e,t])}(Boolean(null==o?void 0:o.length),d);return(0,i.jsxs)(i.Fragment,{children:[!n&&(0,i.jsx)("div",{style:c.toggleContainer,children:(0,i.jsx)(ru().A,{isSidebar:!1,fill:!0,style:c.toggle,color:c.toggleColor.color,open:Boolean(r),onClick:()=>!!l&&l(s,!r)})}),(0,i.jsx)("div",{style:c.cellContainer,children:a(t)})]})}function cu(e){return t=>(0,i.jsx)(du,{row:t,renderCell:e})}const uu=24,gu=20;var mu=()=>a(584548),pu=()=>a(942988);const hu="unset",fu="setting-name";function xu(){return[{key:"everyone",label:vu},{key:"none",label:bu}]}const vu=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.everyone",defaultMessage:"Enabled for everyone"}),bu=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.noOne",defaultMessage:"Disabled for everyone"});function yu(e){return!0===e?"none":!1===e?"everyone":void(0,Ee().HB)(e)}function Su(e){return"none"===e||"everyone"!==e&&void(0,Ee().HB)(e)}function ju(e){return!0===e?"no":!1===e?"yes":void(0,Ee().HB)(e)}function wu(e){return yu(e.getDisablePublicAccess())}const Au={settingName:"publish-sites",teamSettingName:"disable_public_access",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.publishingSites.title",defaultMessage:"Publishing sites, forms, and public links"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.publishingSites.byline",defaultMessage:"Control who can publish sites, forms, and public links to the web"}),getOptions:xu,getValueFromSpace:wu,getValueFromTeam:wu,getValueFromOrganization:e=>{const t=e.getDisablePublicAccess();if(void 0!==t)return yu(t)},formatValueToSave:e=>({disable_public_access:Su(e)}),formatUndefinedToSave:()=>({disable_public_access:null})};function Mu(e){return yu(e.getDisableExport())}const Cu={settingName:"export-pages",teamSettingName:"disable_export",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.exportingPages.title",defaultMessage:"Exporting Pages"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.exportingPages.byline",defaultMessage:"Control who can export pages"}),getOptions:xu,getValueFromSpace:Mu,getValueFromTeam:Mu,getValueFromOrganization:e=>{const t=e.getDisableExport();if(void 0!==t)return yu(t)},formatValueToSave:e=>({disable_export:Su(e)}),formatUndefinedToSave:()=>({disable_export:null})},Iu={settingName:"duplicate-pages",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.duplicatePages.title",defaultMessage:"Duplicating pages to other workspaces"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.duplicatePages.byline",defaultMessage:"Control who can duplicate pages into other workspaces"}),getOptions:xu,getValueFromSpace:e=>yu(e.getDisableMoveToSpace()),getValueFromOrganization:e=>{const t=e.getDisableMoveToSpace();if(void 0!==t)return yu(t)},formatValueToSave:e=>({disable_move_to_space:Su(e)}),formatUndefinedToSave:()=>({disable_move_to_space:null})};function Tu(e){let{store:t,guestRequestStore:a}=e;return ku({disableGuests:t.getDisableGuests(),enableGuestInviteRequests:a.getEnableGuestInviteRequest()})}function ku(e){let{disableGuests:t,enableGuestInviteRequests:a}=e;return!1===t?"everyone":!0===t&&!0===a?"request":!0===t?"none":void(0,Ee().HB)(t)}const _u={settingName:"guest-invites",teamSettingName:"disable_guests",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.addingGuests.title",defaultMessage:"Adding guests"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.addingGuests.byline",defaultMessage:"Manage how members can add guests to pages"}),getOptions:()=>[{key:"everyone",label:vu},{key:"request",label:Nu},{key:"none",label:bu}],getValueFromSpace:e=>Tu({store:e,guestRequestStore:e}),getValueFromTeam:(e,t)=>Tu({store:e,guestRequestStore:t}),getValueFromOrganization:e=>{const t=e.getDisableGuests(),a=e.getEnableGuestInviteRequest();if(void 0!==t&&void 0!==a)return ku({disableGuests:t,enableGuestInviteRequests:a})},formatValueToSave:e=>"none"===e?{disable_guests:!0,enable_guest_invite_requests:!1}:"request"===e?{disable_guests:!0,enable_guest_invite_requests:!0}:"everyone"===e?{disable_guests:!1,enable_guest_invite_requests:!1}:void(0,Ee().HB)(e),formatUndefinedToSave:()=>({disable_guests:null,enable_guest_invite_requests:null})},zu={settingName:"member-requests",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.memberRequests.title",defaultMessage:"Requesting membership"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.memberRequests.byline",defaultMessage:"Manage whether members can submit requests to add more members"}),getOptions:Uu,getValueFromSpace:e=>ju(e.getDisableMembershipRequests()),getValueFromOrganization:e=>{const t=e.getDisableMembershipRequests();if(void 0!==t)return ju(t)},formatValueToSave:e=>"yes"===e?{disable_membership_requests:!1}:"no"===e?{disable_membership_requests:!0}:void(0,Ee().HB)(e),formatUndefinedToSave:()=>({disable_membership_requests:null})},Du={settingName:"restrict-integrations",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.integrations.title",defaultMessage:"Adding integrations"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.integrations.byline",defaultMessage:"Control what integrations members can connect"}),getOptions:()=>[{key:"approved_only",label:Ru},{key:"approved_or_built_by_notion",label:Bu},{key:"no_restrictions",label:Eu}],getValueFromSpace:e=>e.getIntegrationRestrictions()??"no_restrictions",getValueFromOrganization:e=>e.getIntegrationRestrictions(),formatValueToSave:e=>({integration_restrictions:e}),formatUndefinedToSave:()=>({integration_restrictions:null})},Pu={settingName:"webhook-automations",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.webhookAutomations.title",defaultMessage:"Webhook automations"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.webhookAutomations.byline",defaultMessage:"Manage access to webhooks in database automations and buttons"}),getOptions:Uu,getValueFromSpace:e=>ju(e.getDisallowWebhookAutomationAction()),getValueFromOrganization:e=>{const t=e.getDisallowWebhookAutomationAction();if(void 0!==t)return ju(t)},formatValueToSave:e=>"yes"===e?{disallow_webhook_automation_action:!1}:"no"===e?{disallow_webhook_automation_action:!0}:void(0,Ee().HB)(e),formatUndefinedToSave:()=>({disallow_webhook_automation_action:null})},Nu=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.byRequest",defaultMessage:"By request only"}),Ru=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.onlyApproved",defaultMessage:"Approved only"}),Bu=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.approvedOrNotion",defaultMessage:"Native or approved"}),Eu=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.noRestrictions",defaultMessage:"All integrations"}),Lu=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.enabledForMembers",defaultMessage:"Enabled for members"}),Ou=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.disabledForMembers",defaultMessage:"Disabled for members"});function Uu(){return[{key:"yes",label:Lu},{key:"no",label:Ou}]}const Fu=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.workspaceManaged",defaultMessage:"Workspace managed"}),Hu={[Au.settingName]:Au,[Cu.settingName]:Cu,[Iu.settingName]:Iu,[_u.settingName]:_u,[zu.settingName]:zu,[Du.settingName]:Du,[Pu.settingName]:Pu};const Vu=(0,v().YK)({name:{id:"settingsConsole.securityTable.column.settingName.title",defaultMessage:"Name"},members:{id:"settingsConsole.securityTable.column.members.title",defaultMessage:"Members"},teams:{id:"settingsConsole.securityTable.column.team.title",defaultMessage:"Teamspaces"},guests:{id:"settingsConsole.securityTable.column.guests.title",defaultMessage:"Guests"},sites:{id:"settingsConsole.securityTable.column.sites.title",defaultMessage:"Sites"}}),Wu={id:"name",headerTitle:(0,i.jsx)(v().sA,{...Vu.name}),renderCell:e=>(0,i.jsx)(Lt().s7,{title:e.title,byline:e.byline,icon:(0,i.jsx)(L().B,{disabled:!0,icon:e.icon,title:e.title,size:e.iconSize,isLarge:!0,isEmptyPage:!1}),iconSize:e.iconSize,iconMargin:Lt().Ji,summaryStyles:{width:`calc(100% - ${e.iconSize+Lt().Ji}px)`}}),widthData:{widthPercent:0,minWidth:350,maxWidth:350},sortable:!1},qu={id:"teams",headerTitle:(0,i.jsx)(v().sA,{...Vu.teams}),renderCell:e=>{if(void 0!==e.teamCount)return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.column.team.value",defaultMessage:"{teamCount, plural, one {{teamCount} teamspace} other {{teamCount} teamspaces}}",values:{teamCount:e.teamCount}})})},widthData:{widthPercent:100,minWidth:160},sortable:!1},Gu={id:"members",headerTitle:(0,i.jsx)(v().sA,{...Vu.members}),renderCell:e=>void 0===e.memberCount?(0,i.jsx)(le().A,{style:{borderRadius:O().V.small,width:"60%",height:18}}):(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.column.members.value",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.memberCount}})}),widthData:{widthPercent:100,minWidth:150},sortable:!1},Ku={id:"setting",headerTitle:(0,i.jsx)("div",{}),renderCell:e=>(0,i.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"right",alignItems:"center"},children:[(0,i.jsx)(ne().p,{isBlue:!0,style:{fontWeight:510,visibility:e.shouldShowBulkApply?void 0:"hidden"},onClick:e.onBulkApply,disabled:!e.shouldShowBulkApply,children:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.bulkApply",defaultMessage:"Bulk apply"})}),(0,i.jsx)($u,{isPending:e.isPending,settingValue:e.settingValue,settingOptions:e.settingOptions,onSelectOption:e.onSelectOption})]}),widthData:{widthPercent:0,minWidth:100},sortable:!1},Yu={id:"guests",headerTitle:(0,i.jsx)(v().sA,{...Vu.guests}),renderCell:e=>{if(void 0!==e.guestCount)return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.column.guests.value",defaultMessage:"{guestCount, plural, one {{guestCount} guest} other {{guestCount} guests}}",values:{guestCount:e.guestCount}})})},widthData:{widthPercent:100,minWidth:120},sortable:!1},Qu={id:"sites",headerTitle:(0,i.jsx)(v().sA,{...Vu.sites}),renderCell:e=>{if(void 0!==e.siteCount)return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.column.sites.value",defaultMessage:"{siteCount, plural, one {{siteCount} site} other {{siteCount} sites}}",values:{siteCount:e.siteCount}})})},widthData:{widthPercent:100,minWidth:120},sortable:!1};function $u(e){let{settingValue:t,settingOptions:a,isPending:s,onSelectOption:n}=e;const o=(0,j().IS)((e=>({button:{marginTop:4,marginBottom:4,fontWeight:U().Wy.medium,color:e.text.primary,background:e.buttonHoveredBackground},buttonHover:{background:e.darkBannerBackground},menu:{width:300},container:{display:"flex",width:"100%",justifyContent:"right"},pendingIndicator:{position:"absolute",top:1,right:-3,background:"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[300],border:`1px solid ${e.contentBackground}`,width:9,height:9,borderRadius:9}})),[]);return(0,i.jsx)("div",{style:o.container,children:(0,i.jsxs)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",style:{position:"relative"},children:[(0,i.jsx)($c().m,{isMobile:!1,disabled:!1,type:"dropdown",currentOption:t,options:a,onSelectOption:n,buttonStyle:o.button,buttonHoverStyle:o.buttonHover,menuStyle:o.menu,placementToOrigin:$a().W.Bottom,alignmentToOrigin:$a().C.End}),s&&(0,i.jsx)("div",{style:o.pendingIndicator})]})})}function Xu(e){let{settingValue:t,spaceStore:a,teamStores:s,config:n}=e;const o={},i={},r=n.getValueFromSpace(a);if(o[a.id]=t!==r?t:void 0,n.teamSettingName)for(const l of s){const e=n.getValueFromTeam(l,a);i[l.id]=t!==e?t:void 0}return{spaceChanges:o,teamChanges:i}}function Zu(e){let{rows:t,appliedSorts:a}=e;const s=a.map((e=>{let{propertyId:t}=e;return t===Wu.id?e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase()}:t===Gu.id?"memberCount":t===qu.id?"teamCount":t===Qu.id?"siteCount":t===Yu.id?"guestCount":"title"})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Ee().HB)(t)}));return et().My(t,s,n)}function Ju(e){var t,a;const{spaceStores:n,teamStoresForSpace:o,teamAggregateDataForSpace:r,orgPeopleCountState:l,sitesForSpace:d,config:c,organizationStore:u,appliedSorts:g,setSpaceExpandedState:m}=e,{pendingSpaceSettings:p,pendingTeamSettings:h,setPendingSpaceSettings:f,setPendingTeamSettings:x,pendingOrgSetting:b}=(0,s.useContext)(mu().p),y=null===(t=l.value)||void 0===t?void 0:t.membersForSpace,j=null===(a=l.value)||void 0===a?void 0:a.guestsForSpace,w=(0,S().K8)((()=>n.map((e=>{var t,a,s;const n=o[e.id],l=p[e.id]??c.getValueFromSpace(e),S=function(e){let{teamStores:t,spaceStore:a,config:s,spaceSettingValue:n,teamAggregateDataForSpace:o,pendingTeamSettings:r,setPendingTeamSettings:l,appliedSorts:d}=e;if(!s.teamSettingName)return;const c=null==t?void 0:t.map((e=>{var t;const d=s.getValueFromTeam(e,a),c=null===(t=o[a.id])||void 0===t?void 0:t[e.id];return{id:e.id,iconSize:24,icon:e.getIcon(),title:e.getName()??"",byline:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.team.byline",defaultMessage:"Teamspace"}),memberCount:(null==c?void 0:c.memberCountWithGuests)??0,settingValue:r[e.id]??d,parentSettingValue:n,settingOptions:s.getOptions(),onSelectOption:t=>{const a=t===d?void 0:t;l({[e.id]:a})},isClickable:!1,isPending:(0,Ee().O9)(r[e.id])}}));return null!=d&&d.length&&c?Zu({rows:c,appliedSorts:d}):c}({teamStores:n,spaceStore:e,config:c,spaceSettingValue:l,setPendingTeamSettings:x,pendingTeamSettings:h,teamAggregateDataForSpace:r,appliedSorts:g}),w=c.getValueFromSpace(e),A={id:e.id,iconSize:28,icon:e.getIcon(),title:e.getName()??"",byline:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.organization.space",defaultMessage:"Workspace"}),guestCount:j?null===(t=j[e.id])||void 0===t?void 0:t.length:void 0,siteCount:d?d[e.id]:void 0,memberCount:y?null===(a=y[e.id])||void 0===a?void 0:a.length:void 0,teamCount:null==n?void 0:n.length,collapsibleRows:S,settingValue:l,parentSettingValue:b??c.getValueFromOrganization(u),settingOptions:c.getOptions(),onSelectOption:t=>{const a=t===w?void 0:t;f({[e.id]:a})},isClickable:!1,isPending:(0,Ee().O9)(p[e.id]),onBulkApply:()=>{const{spaceChanges:t,teamChanges:a}=Xu({spaceStore:e,teamStores:o[e.id],config:c,settingValue:l});f(t),x(a),Object.values(a).filter(Ee().O9).length&&m({[e.id]:!0})}};return A.shouldShowBulkApply=A.isPending&&A.onBulkApply&&Boolean(null===(s=A.collapsibleRows)||void 0===s?void 0:s.some((e=>e.settingValue!==A.settingValue))),A}))),[n,o,r,y,j,d,c,u,p,f,h,x,b,g,m]);return null!=g&&g.length&&w?Zu({rows:w,appliedSorts:g}):w}function eg(e){var t,a;let{organizationStore:n,spaceStores:o,teamStoresForSpace:r,config:l,hasTeamColumn:d,rowFilterFn:c,isFiltered:u,appliedSorts:m}=e;const p=(0,y().v3)(),h=(0,Gt().A)(),f=(0,s.useMemo)((()=>o.map((e=>e.id))),[o]),{teamAggregateDataForSpace:x}=(0,Bn().N)(f),b=Boolean("publish-sites"===l.settingName),w=function(e){let{environment:t,settingName:a}=e;const{spaceIds:n}=(0,s.useContext)(R().D),[o]=(0,tt().Yb)((async()=>{if((0,Ee().O9)(a)&&"publish-sites"!==a)return;let e=0;const s={};return await(0,st().lX)(n,at().O,(async a=>{const n=await M().callApi({eventName:"getPublishedPageCountForOrganizationSpace",environment:t,data:{spaceId:a},headers:(0,ea().WS)({spaceId:a})});"failed"!==n.type&&(e+=n.data.publishedPagesCount,s[a]=n.data.publishedPagesCount)})),{orgSitesCount:e,sitesCountForSpace:s}}),[t,n,a]);return{state:o}}({environment:p,settingName:l.settingName}),A=null===(t=w.state.value)||void 0===t?void 0:t.orgSitesCount,C=null===(a=w.state.value)||void 0===a?void 0:a.sitesCountForSpace,{state:I}=(0,pu().j)(),[T,k]=(0,s.useState)({}),[_,z]=(0,s.useState)({}),D=function(e){var t,a;const{organizationStore:n,orgPeopleCountState:o,orgSitesCount:r,teamStoresForSpace:l,config:d,spaceStores:c,setSpaceExpandedState:u}=e,{pendingOrgSetting:g,setPendingOrgSetting:m,setPendingSpaceSettings:p,setPendingTeamSettings:h}=(0,s.useContext)(mu().p),f=null===(t=o.value)||void 0===t?void 0:t.memberCount,x=null===(a=o.value)||void 0===a?void 0:a.guestCount;return(0,S().K8)((()=>{const e=d.getValueFromOrganization(n),t=g??e??hu;return{id:n.id,icon:n.getIcon(),iconSize:32,title:n.getName()??"Default",byline:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.organization.byline",defaultMessage:"Organization"}),memberCount:f,guestCount:x,siteCount:r,teamCount:Object.values(l).flat().length,settingValue:t,parentSettingValue:void 0,settingOptions:[{key:hu,label:Fu},...d.getOptions()],onSelectOption:t=>{let a=t===e?void 0:t;void 0===e&&t===hu&&(a=void 0),m(a)},onBulkApply:()=>{let e={},a={};const s={};for(const n of c){const{spaceChanges:o,teamChanges:i}=Xu({spaceStore:n,teamStores:l[n.id],config:d,settingValue:t});e={...e,...o},a={...a,...i},Object.values(i).filter(Ee().O9).length&&(s[n.id]=!0)}p(e),h(a),u(s)},isClickable:!1,hideToggle:!0,isPending:(0,Ee().O9)(g)}}),[n,c,l,f,x,r,d,g,m,p,h,u])}({organizationStore:n,orgPeopleCountState:I,orgSitesCount:A,teamStoresForSpace:r,config:l,spaceStores:o,setSpaceExpandedState:e=>k((t=>({...t,...e})))}),P=Ju({spaceStores:o,teamStoresForSpace:r,teamAggregateDataForSpace:x,orgPeopleCountState:I,sitesForSpace:C,config:l,organizationStore:n,appliedSorts:m,setSpaceExpandedState:e=>k((t=>({...t,...e})))}),N={...D,shouldShowBulkApply:D.isPending&&D.settingValue!==hu&&D.onBulkApply&&P.some((e=>{var t;return e.settingValue!==D.settingValue||Boolean(null===(t=e.collapsibleRows)||void 0===t?void 0:t.some((e=>e.settingValue!==D.settingValue)))}))},B="guest-invites"===l.settingName,E=(0,s.useMemo)((()=>[Wu,B?Yu:void 0,b?Qu:void 0,d?qu:void 0,Gu,Ku].filter(Ee().O9)),[d,B,b]),L=E.map((e=>({...e,headerStyle:h.tableHeader,rowStyle:h.tableRow}))),O=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:E,theme:e,containerMarginTop:0})),[E]);return(0,s.useEffect)((()=>{if(!0===u){const e={};for(const t of f)e[t]=!0;z(e)}else z({})}),[u,f]),(0,i.jsx)(lu,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,rows:[N,...P],rowFilterFn:c,isFiltered:u,columnRenderInfo:L,renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:g().h,title:(0,i.jsx)(v().sA,{id:"organizationSecuritySettingTable.empty",defaultMessage:"No settings found"}),byline:(0,i.jsx)(v().sA,{id:"organizationSecuritySettingTable.empty.byline",defaultMessage:"There are no settings that match this query"})}),styles:O,extendToFullScreen:Xt().e,expandedState:u?_:T,setExpandedState:u?z:k})}function tg(e){let{selectedGroupIds:t,setSelectedGroupIds:a,groups:s}=e;const n=function(e){const t=(0,j().IS)((()=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block",paddingTop:4,paddingBottom:4}})),[]);return(0,S().K8)((()=>e.map((e=>({key:e.groupId,value:e.groupId,title:(0,i.jsxs)("div",{style:t.optionContainer,children:[(0,i.jsx)(L().B,{disabled:!0,icon:e.groupIcon,isEmptyPage:!1,size:Na().iK,title:e.groupName,isLarge:!0,emojiSize:Na().iK,isRaw:!1}),(0,i.jsx)(Ks().A,{style:t.optionTitle,children:e.groupName})]}),shortTitle:e.groupName,count:(0,i.jsx)(v().sA,{id:"groupsFilter.numMembers",defaultMessage:"{count} {count, plural, one {member} other {members}}",values:{count:e.memberCount}})})))),[e,t])}(s);return(0,i.jsx)(Ys().VX,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationConsole.table.filters.groups.title",defaultMessage:"Groups"}),pillIcon:h,selectedItems:t,setSelectedItems:a,items:n})}const ag={id:"groups",headerTitle:(0,i.jsx)(v().sA,{id:"singleUserView.groupsTable.groupsColumn.header",defaultMessage:"Groups"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(Lt().s7,{title:e.groupName,icon:(0,i.jsx)(L().B,{disabled:!0,icon:e.groupIcon,isEmptyPage:!1,title:e.groupName,size:Na().p8,isLarge:!0}),iconSize:Na().p8,summaryStyles:{overflow:"hidden"}}),widthData:{widthPercent:40,minWidth:100},sortable:!1},sg={id:"members",headerTitle:(0,i.jsx)(v().sA,{id:"singleUserView.groupsTable.membersColumn.header",defaultMessage:"Members"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Wt().Kb,{}):(0,i.jsx)(D().D,{colorName:"secondary",children:(0,i.jsx)(v().sA,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"singleUserView.groupsTable.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:30,minWidth:50},sortable:!1};function ng(e,t){return{id:"teamspaces",headerTitle:(0,i.jsx)(v().sA,{id:"singleUserView.groupsTable.associatedTeamspacesColumn.header",defaultMessage:"Teamspaces"}),renderCell:a=>{if(a.type===Zt().T.Loading)return(0,i.jsx)(Wt().Kb,{});const s=a.associatedTeamspaceIds;if(0===s.length)return null;const n=e.filter((e=>s.includes(e.id)));return(0,i.jsx)(ee().tv,{teamStores:n,isLoading:t,showTooltip:!0})},widthData:{widthPercent:30,minWidth:50},sortable:!1}}function og(e){let{organizationStore:t,userStore:a}=e;const n=(0,Ts().l)(),o=(0,s.useMemo)((()=>n.map((e=>e.id))),[n]),[r,l]=(0,s.useState)(o[0]),{teamStores:d,loading:c}=(0,B().o)(o),u=(0,s.useMemo)((()=>d[r]??[]),[d,r]),g=s.useMemo((()=>{return[ag,sg,ng(u,c),(e=t.id,{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>t.type===Zt().T.Loading?null:(0,i.jsx)(us,{groupId:t.id,isHovered:t.isRowHovered,organizationId:e}),widthData:{width:30},sortable:!1})];var e}),[u,t.id,c]),p=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:g,theme:e,containerMarginTop:0})),[g]),h=(0,j().IS)((()=>({filters:{display:"flex",flexDirection:"row"},search:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px"},actionContainer:{display:"flex",flexDirection:"row"}})),[]),f=[{id:ag.id,name:k().A.formatMessage(Vu.name),type:"title"},{id:sg.id,name:k().A.formatMessage(Vu.members),type:"number"}],[x,b]=(0,s.useState)(),[y,w]=(0,s.useState)(!1),[A,M]=(0,s.useState)(),{rows:C,loading:I}=function(e){let{userId:t,spaceId:a,teamStores:n}=e;const o=(0,s.useMemo)((()=>[t]),[t]),i=(0,s.useMemo)((()=>[a]),[a]),{spaceIdToUserPermissionGroupMap:r,loading:l}=ot({userIds:o,spaceIds:i}),{permissionGroupsForSpace:d,loading:c}=nt({spaceIds:i}),u=(0,s.useMemo)((()=>{var e;return(null===(e=r[a])||void 0===e?void 0:e[t])??[]}),[a,r,t]),g=(0,s.useMemo)((()=>(d[a]??[]).filter((e=>u.includes(e.group.group_id)))),[a,d,u]);return{rows:(0,S().K8)((()=>g.map((e=>{const t=e.group;return{type:Zt().T.SingleUserGroup,id:t.group_id,groupId:t.group_id,groupName:t.name,groupIcon:t.icon?{pointer:{id:t.group_id,spaceId:t.space_id,table:qt().n},icon:t.icon}:void 0,memberCount:e.memberCount,associatedTeamspaceIds:n.filter((e=>e.isAssociatedWithPermissionGroup(t))).map((e=>e.id)),isClickable:!1}}))),[g,n]),loading:l||c}}({userId:a.id,spaceId:r,teamStores:u}),{filters:T,updateFilters:_,query:z,setQuery:D,filteredRows:P,onPageChange:N,hasMoreResults:R}=function(e,t){const[a,n]=(0,s.useState)({pageNum:1}),o=(0,s.useCallback)((e=>{n((t=>({...t,...e,pageNum:1})))}),[]),[i,r]=(0,s.useState)(""),{filteredRows:l,hasMoreResults:d}=(0,s.useMemo)((()=>{if(!e)return{filteredRows:[],hasMoreResults:!1};let s=e;i&&(s=(0,ht().Ay)(i,s,(e=>e.groupName))),a.groupIds&&a.groupIds.length>0&&(s=s.filter((e=>{var t;return null===(t=a.groupIds)||void 0===t?void 0:t.includes(e.groupId)}))),a.teamspaceIds&&a.teamspaceIds.length>0&&(s=s.filter((e=>{var t;return null===(t=a.teamspaceIds)||void 0===t?void 0:t.some((t=>e.associatedTeamspaceIds.includes(t)))}))),s=t&&t.length>0?s.sort(((e,a)=>{for(const s of t)if("groups"===s.propertyId){const t=e.groupName,n=a.groupName;if(t!==n)return"ascending"===s.direction?t.localeCompare(n):n.localeCompare(t)}else if("members"===s.propertyId){const t=e.memberCount,n=a.memberCount;if(t!==n)return"ascending"===s.direction?t-n:n-t}return 0})):s.sort(((e,t)=>e.groupName.localeCompare(t.groupName)));const n=s.length>a.pageNum*iu;return s=s.slice((a.pageNum-1)*iu,a.pageNum*iu),{filteredRows:s,hasMoreResults:n}}),[e,i,a.groupIds,a.teamspaceIds,a.pageNum,t]);return{filters:a,updateFilters:o,query:i,setQuery:r,filteredRows:l,onPageChange:e=>{const t={...a,pageNum:e};n(t)},hasMoreResults:d}}(C,x),E=Do({spaceStores:n}),L=A??x??[],O=I?(0,Zt().n)():P;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:h.actionContainer,children:[(0,i.jsxs)("div",{style:h.filters,children:[(0,i.jsx)(Fn().A,{children:(0,i.jsx)(Wa().e,{sortProperties:f,isMenuOpen:y,setIsMenuOpen:w,onApply:e=>{w(!1),b(e),M(void 0)},currentSorts:L})}),L.length>0?(0,i.jsx)(Un().he,{}):null,(0,i.jsx)(Fo,{selectedSpaceId:r,setSelectedSpaceId:e=>{_({teamspaceIds:void 0,groupIds:void 0}),l(e)},spaceData:E}),(0,i.jsx)(tg,{selectedGroupIds:T.groupIds||[],setSelectedGroupIds:e=>{_({groupIds:e})},groups:C},`${r}-groups`),(0,i.jsx)(Gd,{selectedTeamspaceIds:T.teamspaceIds||[],setSelectedTeamspaceIds:e=>{_({teamspaceIds:e})},teamspaceStores:u},`${r}-teamspaces`)]}),(0,i.jsxs)("div",{style:h.search,children:[(0,i.jsx)(Va().x,{appliedSorts:x,openSortPillMenu:e=>{e&&M([{propertyId:e,direction:"ascending"}]),w(!0)},sortProperties:f}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:z,setQueryFilter:D})]})]}),(0,i.jsx)(Et().WE,{hideHeaderRowPadding:!0,columnRenderInfo:g,rows:O,renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:m().peopleIcon,title:(0,i.jsx)(v().sA,{id:"singleUserView.groupsTable.empty",defaultMessage:"No groups found"}),byline:(0,i.jsx)(v().sA,{id:"singleUserView.groupsTable.empty.byline",defaultMessage:"There are no groups that match this query"})}),styles:p,showRowBorders:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{N(T.pageNum+1)},onLoadPrevious:()=>{N(T.pageNum-1)},hasNextPage:R,hasPrevPage:T.pageNum>1,currentPage:T.pageNum}})]})}const ig=(0,v().YK)({groups:{id:"settingsConsole.singleUserView.groupsTab.title",defaultMessage:"Groups"},groupsLabel:{id:"settingsConsole.singleUserView.groupsTab.label",defaultMessage:"View permission groups this user is a part of and associated teamspaces"}});function rg(e){const t=(0,v().tz)();return(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:t.formatMessage(ig.groups),byline:t.formatMessage(ig.groupsLabel)}),(0,i.jsx)(og,{...e})]})}var lg=()=>a(725494);function dg(e){const{userStore:t,metadata:a,onDismiss:n,onSubmit:o}=e,r=(0,v().tz)(),l=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.yellowPrimary},content:{height:"fit-content",width:390,border:"1px solid var(--stroke-regular, #E3E2E0)",borderRadius:6,padding:"4px 12px",display:"flex",alignItems:"center"},check:{height:20,width:20,color:e.text.tertiary}})),[]);const d=(0,S().K8)((()=>t.getDisplayName(r)),[t,r]),{state:c}=(0,pu().j)(),{workspaceName:u,workspaceIcon:g,memberCount:m}=(0,S().K8)((()=>{var e;return a.isExternal?{workspaceName:a.workspaceName,workspaceIcon:a.workspaceIcon,memberCount:0}:{workspaceName:a.spaceStore.getName(),workspaceIcon:a.spaceStore.getIcon(),memberCount:(null===(e=c.value)||void 0===e||null===(e=e.membersForSpace[a.spaceStore.id])||void 0===e?void 0:e.length)||0}}),[a,c]),p=a.isExternal,h=!p&&(0,Is().MN)(a.userRole),[f,x]=(0,s.useState)(!1);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,qr().exclamationMarkTriangleIcon)(l.icon),title:p||h?r.formatMessage(cg.removeMemberTitle):r.formatMessage(cg.removeGuestAccessTitle),byline:r.formatMessage(p?cg.removeMemberFromExternalWorkspaceByline:h?cg.removeMemberByline:cg.removeGuestAccessByline,{b:e=>(0,i.jsx)("b",{children:e}),userName:d})}),footer:(0,i.jsx)(Y().jl,{primaryText:p||h?r.formatMessage(cg.removeMemberButton):r.formatMessage(cg.removeGuestAccessButton),primaryAction:async()=>{x(!0),await async function(){await o(),n()}(),x(!1)},primaryDisabled:f,secondaryText:r.formatMessage(cg.cancelButton),secondaryAction:n}),children:(0,i.jsxs)("div",{style:l.content,children:[(0,i.jsx)(Lt().s7,{title:u,byline:p?r.formatMessage(cg.externalWorkspace):(0,i.jsxs)(i.Fragment,{children:[r.formatMessage(cg.workspace),(0,i.jsx)(P().A,{}),(0,i.jsx)(ge().Qq,{memberCount:m})]}),icon:(0,i.jsx)(L().B,{disabled:!0,icon:g,title:u,size:32,isLarge:!0,isEmptyPage:!1}),iconSize:32}),(0,lg().checkmarkIcon)(l.check)]})})})}const cg=(0,v().YK)({removeMemberTitle:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberTitle",defaultMessage:"Remove member from workspace"},removeGuestAccessTitle:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeGuestAccessTitle",defaultMessage:"Remove guest access"},removeMemberByline:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberByline",defaultMessage:"<b>{userName}</b> will lose access to all content, teamspaces, and groups in this workspace."},removeGuestAccessByline:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeGuestAccessByline",defaultMessage:"<b>{userName}</b> will lose guest access to all pages in this workspace."},removeMemberFromExternalWorkspaceByline:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberFromExternalWorkspaceByline",defaultMessage:"<b>{userName}</b> will lose access to all content, teamspaces, and groups in this external workspace."},removeMemberButton:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberButton",defaultMessage:"Remove member"},removeGuestAccessButton:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeGuestAccessButton",defaultMessage:"Remove guest access"},cancelButton:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.cancelButton",defaultMessage:"Cancel"},workspace:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.workspace",defaultMessage:"Workspace"},externalWorkspace:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.externalWorkspace",defaultMessage:"External workspace"}});function ug(e){const{row:t}=e,[a,n]=(0,s.useState)(!1);return(0,i.jsx)("div",{style:{marginRight:0,marginLeft:"auto"},children:function(e){switch(e.metadata.type){case"workspace":if(e.metadata.isExternal){const t=e.metadata.onClick;return(0,i.jsx)(Le().E,{color:"uiBlue",onClick:()=>{n(!0),t(),n(!1)},children:(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.removeFromWorkspace",defaultMessage:"Remove from workspace"})})}const t=e.metadata.onUpdateRole;return"none"===e.metadata.roleValue?(0,i.jsx)(Le().E,{color:"uiBlue",disabled:a,onClick:async()=>{n(!0),await t("member"),n(!1)},children:(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.addToWorkspace",defaultMessage:"Add to workspace"})}):"page_guest"===e.metadata.roleValue?(0,i.jsx)(Le().E,{color:"uiBlue",disabled:a,onClick:async()=>{n(!0),await t("none"),n(!1)},children:(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.removeGuestAccess",defaultMessage:"Remove guest access"})}):(0,i.jsx)(gg,{settingValue:e.metadata.roleValue,settingOptions:e.metadata.roleOptions,onSelectOption:t});case"teamspace":return;default:(0,Ee().HB)(e.metadata)}}(t)})}function gg(e){let{settingValue:t,settingOptions:a,onSelectOption:s}=e;const n=(0,j().IS)((e=>({dropdown:{marginTop:4,marginBottom:4,border:void 0,background:e.buttonHoveredBackground},buttonHover:{background:e.darkBannerBackground}})),[]);return(0,i.jsx)($c().m,{isMobile:!1,type:"dropdown",currentOption:t,options:a,onSelectOption:s,buttonStyle:{...Xc().W,...n.dropdown},placementToOrigin:$a().W.Bottom,alignmentToOrigin:$a().C.End,buttonHoverStyle:n.buttonHover})}const mg=[{id:"name",renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(ga,{iconSize:uu,iconStyles:{marginLeft:0}}):(0,i.jsxs)(oe().fI,{gap:8,children:[(0,i.jsx)(Lt().s7,{title:e.title,iconSize:uu,icon:(0,i.jsx)(L().B,{disabled:!0,icon:e.icon,title:e.title,size:uu,isLarge:!0,isEmptyPage:!1}),summaryStyles:{overflow:"hidden"}}),"workspace"===e.metadata.type&&e.metadata.isExternal&&(0,i.jsx)(Vt().A,{content:(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.externalWorkspace.badge",defaultMessage:"External"})})]}),headerTitle:void 0,sortable:!1,widthData:{widthPercent:40,minWidth:100}},{id:"metadata",renderCell:e=>{if(e.type===Zt().T.Loading)return(0,i.jsx)(Wt().Kb,{});if("workspace"===e.metadata.type&&e.metadata.isExternal)return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.externalWorkspace",defaultMessage:"External workspace"})});let t,a;switch(e.metadata.type){case"workspace":t=(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.workspace",defaultMessage:"Workspace"}),a=(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.teamspaceCount",defaultMessage:"{teamCount, plural, one {{teamCount} teamspace} other {{teamCount} teamspaces}}",values:{teamCount:e.metadata.teamCount}});break;case"teamspace":t=(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.teamspace",defaultMessage:"Teamspace"}),a=(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.teamspaceMemberCount",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:e.metadata.memberCount}});break;default:(0,Ee().HB)(e.metadata)}return(0,i.jsxs)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:[t," · ",a]})},headerTitle:void 0,sortable:!1,widthData:{widthPercent:30,minWidth:100}},{id:"action",renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Wt().Kb,{}):(0,i.jsx)(ug,{row:e}),headerTitle:void 0,sortable:!1,widthData:{widthPercent:30,minWidth:100}}];a(358848),a(91270);function pg(e){const{organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:o}=e,{externalSpaceRows:r,loading:l}=function(e){let{organizationStore:t,userStore:a,setRemoveUserModalState:n}=e;const o=(0,y().v3)(),{managedUser:r,reloadManagedUser:l,loading:d}=function(e){let{organizationStore:t,userStore:a}=e;const n=(0,y().v3)(),o=(0,S().K8)((()=>t.getEmailDomains()),[t]),i=(0,S().K8)((()=>{const e=a.getEmail();return!(!e||!(0,pt().Wy)(o,e))}),[o,a]),[r,l]=(0,s.useState)(void 0),[d,c]=(0,s.useState)(!1),[u,g]=(0,tt().Yb)((async()=>{if(0===o.length||!i)return;c(!0);const e=await M().callApi({eventName:"getManagedUsers",environment:n,data:{query:a.id,emailDomains:o}});if("failed"===e.type)throw c(!1),e.error;const t=e.data.results;l(t.at(0)),c(!1)}),[o,n,i,a.id]);return{managedUser:r,loading:d,reloadManagedUser:g}}({organizationStore:t,userStore:a}),c=(0,s.useMemo)((()=>(null==r?void 0:r.workspaces.filter((e=>e.isExternal)).map((e=>e.id)))??[]),[r]),u=(0,S().K8)((()=>c.map((e=>function(e){let{environment:t,userStore:a,spaceId:s,managedUser:n,reloadManagedUser:o,setRemoveUserModalState:r}=e;const l=null==n?void 0:n.workspaces.find((e=>e.id===s));if(!l)return;const d=l.name,c=l.icon?{pointer:{table:na().NX,id:s},icon:l.icon}:void 0,u={type:Zt().T.SingleUserWorkspace,id:s,spaceId:s,icon:c,title:d,metadata:{type:"workspace",isExternal:!0,onClick:()=>{r({userStore:a,metadata:{isExternal:!0,workspaceName:d??"",workspaceIcon:c},onSubmit:async()=>{await async function(e){let{environment:t,userId:a,spaceId:s,spaceName:n}=e;Rc().PG(t,{external_space_id:s});const o=await M().callApi({eventName:"removeManagedUserFromSpace",environment:t,data:{userId:a,targetSpaceId:s}});Rc().st(t,{external_space_id:s}),"success"===o.type?lt().D6({label:(0,i.jsx)(v().sA,{defaultMessage:"Successfully removed user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceConfirmation",values:{workspaceName:n}})}):lt().D6({label:(0,i.jsx)(v().sA,{defaultMessage:"Failed to remove user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceFailure",values:{workspaceName:n}})})}({environment:t,userId:a.id,spaceId:s,spaceName:d??""}),await o()}})}},isPending:!1,isClickable:!1};return u}({environment:o,userStore:a,spaceId:e,managedUser:r,reloadManagedUser:l,setRemoveUserModalState:n})))),[c,o,a,r,l,n]);return{externalSpaceRows:u,loading:d}}({organizationStore:t,userStore:a,setRemoveUserModalState:o}),{organizationSpaceRows:d,loading:c}=function(e){let{organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:o}=e;const i=(0,v().tz)(),r=(0,Ts().l)(),l=(0,Ts().l)(),d=(0,s.useMemo)((()=>r.map((e=>e.id))),[r]),{teamStores:c,loading:u}=(0,B().o)(d),{teamAggregateDataForSpace:g,loading:m}=(0,Bn().N)(d),p=function(e){let{organizationId:t,userId:a,userData:n}=e;const{removeUserFromSpaceCache:o,updateUserRoleInSpaceCache:i}=n,r=(0,y().v3)(),l=(0,v().tz)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(N().N),c=(0,s.useCallback)((async e=>{const s=e.id,n=await M().callApi({eventName:"removeUserFromOrganizationSpaces",environment:r,data:{organizationId:t,userIds:[a],spaceIds:[s]}});"success"===n.type?(lt().D6({label:l.formatMessage(yn.changeRoleSuccess)}),o(s),d({data:n.data}),(0,I().u4)({environment:r,event:{eventName:"org_console_people_remove_users",eventProperties:{organization_id:t,space_ids:[s],num_users_removed:1}}})):C().f1((0,T().Hu)(k().A.getIntl(),n))}),[r,t,a,l,o,d]),u=(0,s.useCallback)((async(e,s)=>{const n=await M().callApi({eventName:"updateUserRoleInOrganizationSpace",environment:r,data:{organizationId:t,userIds:[a],newRole:s,spaceId:e}});"success"===n.type?(lt().D6({label:l.formatMessage(yn.changeRoleSuccess)}),i(e,(0,Is().DR)(s)),d({data:n.data}),(0,I().u4)({environment:r,event:{eventName:"org_console_people_update_user_role",eventProperties:{organization_id:t,space_id:e}}})):C().f1((0,T().Hu)(k().A.getIntl(),n))}),[r,l,t,d,i,a]),g=(0,s.useCallback)((async(e,s)=>{const n=await M().callApi({eventName:"bulkAddUsersToOrganizationSpaces",environment:r,data:{organizationId:t,existingUserIds:[a],newUserEmails:[],spaceIds:[e],role:s}});"success"===n.type?(lt().D6({label:l.formatMessage(yn.addUserSuccess)}),i(e,(0,Is().DR)(s)),d({data:n.data}),(0,I().u4)({environment:r,event:{eventName:"org_console_people_add_members",eventProperties:{organization_id:t,space_ids:[e],num_users_added:1}}})):C().f1((0,T().Hu)(k().A.getIntl(),n))}),[r,l,t,d,i,a]);return(0,s.useCallback)((async(e,t,a)=>{if(t===a)return;const s=e.id;if((0,Is().MN)(t))switch(a){case"none":await c(e);break;case"page_guest":throw new(vn().yI4)("Cannot change role to guest.");case"owner":case"membership_admin":case"member":await u(s,a);break;default:(0,Ee().HB)(a)}else switch(a){case"none":await c(e);break;case"page_guest":throw new(vn().yI4)("Cannot change role to guest.");case"member":case"owner":case"membership_admin":await g(s,a);break;default:(0,Ee().HB)(a)}}),[g,c,u])}({organizationId:t.id,userId:a.id,userData:n}),h=(0,s.useMemo)((()=>[a.id]),[a]),{spaceIdToUserPermissionGroupMap:f,loading:x}=ot({userIds:h,spaceIds:d}),b=(0,s.useMemo)((()=>u||m||x),[u,m,x]),j=(0,S().K8)((()=>d.map((e=>{const t=l.find((t=>t.id===e));if(!t)return;const s=c[e]??[],r=g[e]??{};return function(e){let{userStore:t,spaceStore:a,teamStores:s,teamDataForSpace:n,userPermissionGroupIds:o,userData:i,intl:r,onUpdateMemberRole:l,setRemoveUserModalState:d}=e;const{userSpaceAccessMap:c}=i,u=c.get(a.id),g=u?(0,A().QE)(u)?"page_guest":(0,Is().jM)(u.role):"none",m=t.id,p=(0,Is().MN)(g)?null==s?void 0:s.map((e=>{var t;const s=n[e.id];return function(e){let{userId:t,spaceId:a,teamStore:s,teamData:n,userPermissionGroups:o,userRole:i}=e;const r=s.isMemberOrGuest(t,o,{membership_type:i,user_id:t});if(!r)return;const l={type:Zt().T.SingleUserWorkspace,id:s.id,spaceId:a,icon:s.getIcon(),title:s.getName()??"",metadata:{type:"teamspace",memberCount:(null==n?void 0:n.memberCountWithGuests)??0,onClick:()=>{}},isPending:!1,isClickable:!1};return l}({userId:m,spaceId:a.id,teamStore:e,teamData:s,userPermissionGroups:new Set((null===(t=o[a.id])||void 0===t?void 0:t[m])??[]),userRole:g})})).filter(Ee().O9):void 0,h={type:Zt().T.SingleUserWorkspace,id:a.id,spaceId:a.id,icon:a.getIcon(),title:a.getName()??"",metadata:{type:"workspace",isExternal:!1,teamCount:null==s?void 0:s.length,roleValue:g,roleOptions:g?hg(r):[],onUpdateRole:async e=>{"none"===e?d({userStore:t,metadata:{isExternal:!1,userRole:g,spaceStore:a},onSubmit:async()=>{await l(a,g,e,i)}}):await l(a,g,e,i)}},collapsibleRows:p,isPending:!1,isClickable:!1};return h}({userStore:a,spaceStore:t,teamStores:s,teamDataForSpace:r,userPermissionGroupIds:f,userData:n,intl:i,onUpdateMemberRole:p,setRemoveUserModalState:o})}))),[d,l,c,g,f,a,n,i,p,o]);return{organizationSpaceRows:j,loading:b}}({organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:o});return{spaceRows:(0,s.useMemo)((()=>et().My([...d,...r].filter(Ee().O9),(e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase()}),"asc")),[r,d]),loading:(0,s.useMemo)((()=>l||c),[l,c])}}function hg(e){return[{key:"owner",label:e.formatMessage(fg.workspaceOwnerOption)},{key:"membership_admin",label:e.formatMessage(fg.membershipAdminOption)},{key:"member",label:e.formatMessage(fg.workspaceMemberOption)},{key:"none",label:(0,i.jsx)("span",{style:{color:pi().Tj.red},children:e.formatMessage(fg.removeFromWorkspaceOption)})}]}const fg=(0,v().YK)({workspaceOwnerOption:{id:"settingsConsole.singleUserView.workspacesTab.workspaceOwnerOption",defaultMessage:"Workspace owner"},membershipAdminOption:{id:"settingsConsole.singleUserView.workspacesTab.membershipAdminOption",defaultMessage:"Membership admin"},workspaceMemberOption:{id:"settingsConsole.singleUserView.workspacesTab.workspaceMemberOption",defaultMessage:"Workspace member"},removeFromWorkspaceOption:{id:"settingsConsole.singleUserView.workspacesTab.removeFromWorkspaceOption",defaultMessage:"Remove from workspace"}});function xg(e){let{organizationStore:t,userStore:a,userData:n}=e;const o=(0,v().tz)(),r=(0,Gt().A)(),l=(0,j().IS)((e=>({filters:{display:"flex",flexDirection:"row"},headerStyle:{...r.tableHeader,boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`,height:12}})),[r.tableHeader]),d=Do({spaceStores:(0,Ts().l)()}),[c,u]=(0,s.useState)([]),[g,m]=(0,s.useState)(void 0),{spaceRows:p,loading:h}=pg({organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:m}),f=mg.map((e=>({...e,headerStyle:l.headerStyle,rowStyle:{...r.tableRow,height:56}}))),x=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:f,theme:e,containerMarginTop:0})),[f]),[b,y]=(0,s.useState)({}),S=h?(0,Zt().n)():p;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:l.filters,children:(0,i.jsx)(Uo,{selectedSpaceIds:c,setSelectedSpaceIds:u,spaceData:d})}),(0,i.jsx)(lu,{rows:S,rowFilterFn:e=>!(e.type===Zt().T.SingleUserWorkspace&&c.length>0)||c.includes(e.spaceId),isFiltered:c.length>0,columnRenderInfo:f,renderNoRowsComponent:()=>(0,i.jsx)("div",{children:o.formatMessage(vg.emptyState)}),styles:x,showRowBorders:!0,hideHeaderRowPadding:!0,expandedState:b,setExpandedState:y}),g&&(0,i.jsx)(dg,{...g,onDismiss:()=>{m(void 0)}})]})}const vg=(0,v().YK)({emptyState:{id:"settingsConsole.singleUserView.workspacesTab.emptyState",defaultMessage:"Empty!"}}),bg=(0,v().YK)({workspaces:{id:"settingsConsole.singleUserView.workspacesTab.title",defaultMessage:"Workspaces"},workspacesLabel:{id:"settingsConsole.singleUserView.workspacesTab.label",defaultMessage:"Add, remove, or adjust this user's role to control their workspace access and collaboration permissions"}});function yg(e){const t=(0,v().tz)();return(0,i.jsxs)(te,{children:[(0,i.jsx)(Ha()._,{title:t.formatMessage(bg.workspaces),byline:t.formatMessage(bg.workspacesLabel)}),(0,i.jsx)(xg,{...e})]})}var Sg=()=>a(467941),jg=()=>a(362344),wg=()=>a(53595),Ag=()=>a(976576);function Mg(e){const t=(0,y().v3)(),{spaceStore:a,daysFilter:s,sort:n}=e,[{value:o,status:i}]=(0,tt().Yb)((async()=>await Ag().i_({environment:t,spaceStore:a,nextGraphFilter:s,nextTableFilter:s,nextSort:n})),[t,a,s,n]);return{usersTabData:o,loading:"resolved"!==i}}const Cg={id:"user",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.memberViewTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(xd().A,{containerStyle:{height:52,width:"100%"},actorStore:e.userStore,spaceRole:e.userRole&&(0,xd().v)(e.userRole)}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},Ig={id:"pageViews",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.memberViewTable.pageViewsColumn.header",defaultMessage:"Page views"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Tg,{pageViews:e.pageViews}),widthData:{widthPercent:25,minWidth:100},sortable:!1,shouldShowSortTooltip:!1};function Tg(e){let{pageViews:t}=e;const s=(0,j().IS)((e=>({eyeHideIcon:{width:20,height:20,color:e.lightIconColor}})),[]);return void 0===t?(0,i.jsx)(G().A,{placement:$a().W.Bottom,render:e=>(0,i.jsx)("div",{...e,children:(0,a(99949).e)(s.eyeHideIcon)}),renderTooltip:e=>(0,i.jsx)(v().sA,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})}):(0,i.jsx)(Ks().A,{children:t})}const kg={id:"pageEdits",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.memberViewTable.pageEditsColumn.header",defaultMessage:"Page edits"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Ks().A,{children:e.pageEdits}),widthData:{widthPercent:25,minWidth:100},sortable:!1,shouldShowSortTooltip:!0,hasClickableContents:!1},_g={id:"lastActiveAt",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.memberViewTable.lastActiveColumn.header",defaultMessage:"Last active"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:150}}):(0,i.jsx)(Li().F,{lastActiveAt:e.lastActiveAt,isNoActivitySecondaryColor:!0}),widthData:{widthPercent:25,minWidth:150},sortable:!1,shouldShowSortTooltip:!0,hasClickableContents:!1};function zg(e,t){return{id:"teamspaces",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.memberViewTable.teamspacesColumn.header",defaultMessage:"Teamspaces"}),renderCell:a=>{if(a.type===Zt().T.Loading)return(0,i.jsx)(Wt().Kb,{});const s=a.associatedTeamspaceIds;if(0===s.length)return null;const n=e.filter((e=>s.includes(e.id)));return(0,i.jsx)(ee().tv,{teamStores:n,isLoading:t,showTooltip:!0})},widthData:{widthPercent:25,minWidth:150},sortable:!1}}function Dg(e){var t;const{spaceStore:a,daysFilter:n,isWorkspaceAnalyticsDisabled:o,sort:r}=e,l=(0,S().K8)((()=>a.getName()),[a]),d=a.id,c=(0,S().K8)((()=>[a.id]),[a.id]),{teamStores:u,loading:g}=(0,B().o)(c),p=(0,s.useMemo)((()=>u[d]??[]),[u,d]),[h,f]=(0,s.useState)(1);(0,s.useEffect)((()=>{f(1)}),[a.id,n,r]);const{usersTabData:x,loading:b}=Mg({spaceStore:a,daysFilter:n,sort:r}),{rows:y,hasMoreResults:w}=function(e){let{usersTabData:t,usersTabDataLoading:a,spaceId:n,teamspaceStores:o,currPage:i}=e;const r=(0,s.useMemo)((()=>(null==t?void 0:t.usersAndStats)??[]),[t]),l=(0,s.useMemo)((()=>r.map((e=>e.userStore.id))),[r]),d=(0,S().K8)((()=>[n]),[n]),{spaceIdToUserPermissionGroupMap:c,loading:u}=ot({userIds:l,spaceIds:d}),{visibleUsers:g,loading:m}=(0,E().d)(n),p=(0,S().K8)((()=>a||u||m||!t?(0,Zt().n)():r.map((e=>{var t;let{userStore:a,stats:s}=e;const i=null===(t=g.find((e=>e.userId===s.userId)))||void 0===t?void 0:t.role;return{type:Zt().T.AnalyticsMemberViewsRow,id:s.userId,userStore:a,userRole:i,pageViews:s.numPageViews,pageEdits:s.numPageEdits,lastActiveAt:s.lastActive,associatedTeamspaceIds:o.filter((e=>{var t;return e.isMemberOrGuest(s.userId,new Set((null===(t=c[n])||void 0===t?void 0:t[s.userId])??[]),{membership_type:i?(0,Is().jM)(i):"none",user_id:s.userId})})).map((e=>e.id)),isClickable:!1}}))),[a,u,m,t,r,g,o,c,n]),h=p.length>i*at().q,f=p.slice((i-1)*at().q,i*at().q);return{rows:f,hasMoreResults:h}}({usersTabData:x,usersTabDataLoading:b,spaceId:d,teamspaceStores:p,currPage:h}),A=s.useMemo((()=>[Cg,Ig,kg,_g,zg(p,g)]),[p,g]),M=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:A,theme:e,containerMarginTop:0})),[A]);return o?(0,i.jsx)(wg().H,{type:"disabled",spaceName:l}):"NotFoundError"===(null==x||null===(t=x.usersAndStatsError)||void 0===t?void 0:t.name)?(0,i.jsx)(wg().H,{type:"empty",spaceName:l}):(0,i.jsx)(Et().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,columnRenderInfo:A,rows:y,renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:m().peopleIcon,title:(0,i.jsx)(v().sA,{id:"analyticsMemberViewsTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(v().sA,{id:"analyticsMemberViewsTable.empty.byline",defaultMessage:"There are no members with available analytics data."})}),styles:M,showRowBorders:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{f(h+1)},onLoadPrevious:()=>{f(h-1)},hasNextPage:w,hasPrevPage:h>1,currentPage:h}})}var Pg=()=>a(996417),Ng=()=>a(727171);const Rg="last_90_days";function Bg(e){const{currentFilter:t,hideAllTime:a,onChangeFilter:s}=e,n=Ng().jf.filter((e=>!a||"all_time"!==e)).map((e=>({key:e,value:e,title:(0,i.jsx)(v().sA,{...Ng().jy[e]}),shortTitle:(0,i.jsx)(v().sA,{...Ng().jy[e]}),wrapCaption:!1})));return(0,i.jsx)(Ys().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationConsole.analytics.filters.timeRange.title",defaultMessage:"Time range"}),pillIcon:Cr().D,selectedItem:t,setSelectedItem:e=>{s(e??Rg)},items:n,shouldUseCheck:!0,selectionRequired:!0})}function Eg(e){let{organizationId:t,spaceStore:a,subtab:n,daysFilter:o,setDaysFilter:r,title:l,byline:d,disableFilters:c,sortProps:u,additionalFilters:g,querySearchProps:m,onExport:p}=e;const h=qa(),[f,v]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ha()._,{title:l,byline:d}),(0,i.jsxs)("div",{style:h.actionContainer,children:[(0,i.jsxs)("div",{style:h.filters,children:[u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Fn().A,{children:(0,i.jsx)(Wa().e,{...u.sortPillProps})}),u.sortPillProps.currentSorts.length>0?(0,i.jsx)(Un().he,{}):null]}):null,(0,i.jsx)(Hd,{showAsPill:!0,organizationId:t,selectedSpaceStore:a,currentTabRoute:x().Tr,currentTabProperties:{subtab:n}}),c?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Bg,{currentFilter:o,onChangeFilter:r}),g]})]}),c?null:(0,i.jsxs)("div",{style:h.rightContent,children:[u?(0,i.jsx)(Va().x,{...u.sortButtonProps}):null,m?(0,i.jsx)(Ot().nv,{...m}):null,p?(0,i.jsx)(Pg().K,{onClick:async()=>{v(!0),await p(),v(!1)},disabled:f}):null]})]})]})}function Lg(e){let{organizationId:t,spaceStore:a,daysFilter:n,setDaysFilter:o}=e;const r=(0,y().v3)(),l=(0,j().IS)((e=>({container:{width:"100%",padding:"22px 32px"}})),[]),d=(0,S().K8)((()=>Boolean(null==a?void 0:a.getSettings().disable_page_analytics)),[a]),[c,u]=(0,s.useState)(void 0),[g,m]=(0,s.useState)(),[p,h]=(0,s.useState)(!1),f=g??(c?[Og(c)]:[]);return(0,s.useEffect)((()=>{u(void 0),m(void 0),h(!1)}),[a.id]),(0,i.jsxs)("div",{style:l.container,children:[(0,i.jsx)(Eg,{organizationId:t,spaceStore:a,subtab:fm.MemberViews,daysFilter:n,setDaysFilter:o,disableFilters:d,title:(0,i.jsx)(v().sA,{id:"organization.memberViews.title",defaultMessage:"Member views"}),byline:(0,i.jsx)(v().sA,{id:"organization.memberViews.byline",defaultMessage:"View all member views and edits"}),sortProps:{sortPillProps:{sortProperties:Hg,isMenuOpen:p,setIsMenuOpen:h,onApply:e=>{h(!1),m(void 0);const t=e.at(0);u(t?function(e){return{field:e.propertyId===Ig.id?"page_views":e.propertyId===kg.id?"page_edits":"last_active",direction:"descending"===e.direction?"desc":"asc"}}(t):void 0)},currentSorts:f,preventMultipleSorts:!0},sortButtonProps:{appliedSorts:c?[Og(c)]:void 0,openSortPillMenu:e=>{e&&m([{propertyId:e,direction:"descending"}]),h(!0)},sortProperties:Hg}},onExport:async()=>{await(0,jg().K)({environment:r,spaceId:a.id,organizationId:t,analyticsType:Sg().e.Users,filters:{daysFilter:n}})}}),(0,i.jsx)(Dg,{organizationId:t,spaceStore:a,daysFilter:n,isWorkspaceAnalyticsDisabled:d,sort:c??Ug})]})}function Og(e){return{propertyId:"page_views"===e.field?Ig.id:"page_edits"===e.field?kg.id:_g.id,direction:"desc"===e.direction?"descending":"ascending"}}const Ug={field:"last_active",direction:"desc"},Fg=(0,v().YK)({pageViews:{id:"organization.analytics.memberViewTable.pageViewsColumn.sortHeader",defaultMessage:"Page views"},pageEdits:{id:"organization.analytics.memberViewTable.pageEditsColumn.sortHeader",defaultMessage:"Page edits"},lastActive:{id:"organization.analytics.memberViewTable.lastActiveColumn.sortHeader",defaultMessage:"Last active"}}),Hg=[{id:Ig.id,name:k().A.formatMessage(Fg.pageViews),type:"number"},{id:kg.id,name:k().A.formatMessage(Fg.pageEdits),type:"number"},{id:_g.id,name:k().A.formatMessage(Fg.lastActive),type:"date"}];var Vg=()=>a(893076),Wg=()=>a(608733),qg=()=>a(580359);const Gg={id:"views",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.viewsColumn.header",defaultMessage:"Views"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Ks().A,{children:e.views.toLocaleString()}),widthData:{widthPercent:10,minWidth:100},sortable:!1},Kg={id:"uniqueViews",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.uniqueViewsColumn.header",defaultMessage:"Unique views"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Ks().A,{children:e.uniqueViews.toLocaleString()}),widthData:{widthPercent:10,minWidth:100},sortable:!1},Yg={id:"location",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.locationColumn.header",defaultMessage:"Location"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(Yo().E,{blockStore:e.blockStore,teamStore:e.teamStore}),widthData:{widthPercent:20,minWidth:220},sortable:!1},Qg={id:"audience",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.audienceColumn.header",defaultMessage:"Audience"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:180}}):(0,i.jsx)(Ks().A,{children:(0,Ko().Z)(e.audience)}),widthData:{widthPercent:15,minWidth:180},sortable:!1},$g={id:"lastEditedBy",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.lastEditedByColumn.header",defaultMessage:"Last edited by"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:150}}):e.lastEditedById?(0,i.jsx)("div",{style:U().RC,children:(0,i.jsx)(Qo().T,{blockStore:e.blockStore,userIds:[e.lastEditedById]})}):null,widthData:{widthPercent:15,minWidth:150,maxWidth:180},sortable:!1},Xg={id:"lastEditedTime",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.lastEditedTimeColumn.header",defaultMessage:"Last edited at"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:150}}):(0,i.jsx)($o().d,{dateTs:e.lastEditedTime}),widthData:{widthPercent:15,minWidth:150},sortable:!1},Zg={id:"createdBy",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.createdByColumn.header",defaultMessage:"Created by"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:150}}):e.createdById?(0,i.jsx)("div",{style:U().RC,children:(0,i.jsx)(Qo().T,{blockStore:e.blockStore,userIds:[e.createdById]})}):null,widthData:{widthPercent:15,minWidth:150,maxWidth:180},sortable:!1},Jg={id:"createdAt",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.createdAtColumn.header",defaultMessage:"Created at"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:150}}):(0,i.jsx)($o().d,{dateTs:e.createdTime}),widthData:{widthPercent:15,minWidth:150},sortable:!1};function em(e){var t;const{spaceStore:a,loadMoreMethod:n,isWorkspaceAnalyticsDisabled:o}=e,r=(0,Wg().M)({spaceId:a.id}),l=(0,S().K8)((()=>a.getName()),[a]),c=function(e){const{loading:t,navigableBlockStores:a,analyticsByPageId:s}=e,n=(0,S().K8)((()=>a.map((e=>{var t,a,n;return{type:Zt().T.AnalyticsPageViewsRow,id:e.id,isClickable:!1,blockStore:e,views:(null===(t=s.get(e.id))||void 0===t?void 0:t.pageViews)||0,uniqueViews:(null===(a=s.get(e.id))||void 0===a?void 0:a.uniquePageViews)||0,teamStore:(0,Go().Uo)(e),lastEditedById:e.getLastEditedById(),lastEditedTime:e.getLastEditedTime(),createdTime:e.getCreatedTime(),createdById:e.getCreatedById(),audience:(null===(n=s.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[a,s]);if(t)return(0,Zt().n)();return n}(e),u=s.useMemo((()=>[{id:"page",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.pageColumn.header",defaultMessage:"Page"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(Xo().oc,{blockStore:e.blockStore,rightIcon:(0,i.jsx)(qg().r,{blockStore:e.blockStore})}),widthData:{width:275,maxWidth:275},sortable:!1},Gg,Kg,Yg,Qg,$g,Xg,Zg,Jg]),[a]),g=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:u,theme:e,containerMarginTop:0})),[u]);return o?(0,i.jsx)(wg().H,{type:"disabled",spaceName:l}):"NotFoundError"===(null==r||null===(t=r.error)||void 0===t?void 0:t.name)?(0,i.jsx)(wg().H,{type:"empty",spaceName:l}):(0,i.jsx)(Et().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,columnRenderInfo:u,rows:c,renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:d().d,title:(0,i.jsx)(v().sA,{id:"analyticsPageViewsTable.empty",defaultMessage:"No pages found"}),byline:(0,i.jsx)(v().sA,{id:"analyticsPageViewsTable.empty.byline",defaultMessage:"There are no pages that match this query"})}),styles:g,showRowBorders:!0,loadMoreMethod:n})}function tm(e){let{organizationId:t,spaceStore:a,daysFilter:n,setDaysFilter:o}=e;const r=(0,y().v3)(),l=(0,j().IS)((e=>({container:{width:"100%",padding:"22px 32px"}})),[]),d=(0,s.useMemo)((()=>[a.id]),[a.id]),{teamStores:c}=(0,B().o)(d),u=(0,s.useMemo)((()=>c[a.id]),[c,a.id]),[g,m]=(0,s.useState)(void 0),[p,h]=(0,s.useState)(),[f,x]=(0,s.useState)(!1),b=p??(g?[am(g)]:[]),[w,A]=(0,s.useState)([]),[C,I]=(0,s.useState)([]),[T,k]=(0,s.useState)({starting:void 0,ending:void 0}),[_,D]=(0,s.useState)({starting:void 0,ending:void 0}),[P,R]=(0,s.useState)("");(0,s.useEffect)((()=>{m(void 0),h(void 0),x(!1),A([]),I([]),k({starting:void 0,ending:void 0}),D({starting:void 0,ending:void 0}),R("")}),[a.id]);const{navigableBlockStores:E,analyticsByPageId:L,runNewSearch:O,loading:U,loadMoreMethod:F}=function(e){let{spaceStore:t,daysFilter:a,query:n,sort:o,teamIds:i,createdBy:r,createdOn:l,lastEditedOn:d}=e;const c=(0,y().v3)(),[u,g]=(0,s.useState)(void 0),[m,p]=(0,s.useState)([]);(0,s.useEffect)((()=>{g(void 0),p([])}),[t.id,a,n,o,i,r,l,d]);const{organizationOwnerRecordCache:h,updateCacheWithRecordMap:f}=(0,s.useContext)(N().N),[{value:x,status:v},b]=(0,tt().Yb)((async()=>{const e=m.at(-1),s=await M().callApi({eventName:"loadContentAnalytics",environment:c,data:{spaceId:t.id,sort:o,titleQuery:n,filters:{inTeams:i,createdBy:r,createdTime:(0,mc().ES)(l),lastEditedTime:(0,mc().ES)(d)},timeRange:a,startCursor:e},headers:{[Co().B3]:t.id}});if("failed"===s.type)return;f(s);const u=s.data.results,p=u.map((e=>e.id)),h=new Map(u.map((e=>[e.id,e.analytics])));return g(s.data.nextCursor),{navigableBlockIds:p,analyticsByPageId:h}}),[r,l,a,c,d,m,n,o,t.id,i,f]),S=(0,s.useMemo)((()=>((null==x?void 0:x.navigableBlockIds)??[]).map((e=>new(z().Bv)(c,{id:e,table:aa().ev},{inMemoryRecordCache:h})))),[null==x?void 0:x.navigableBlockIds,h,c]);return{loading:"pending"===v,analyticsByPageId:(null==x?void 0:x.analyticsByPageId)??new Map,navigableBlockStores:S,runNewSearch:b,loadMoreMethod:{type:"pages",hasPrevPage:Boolean(m.length>0),hasNextPage:Boolean(u),onLoadPrevious:()=>{g(m.at(-1)),p((e=>e.slice(0,-1)))},onLoadNext:()=>{u&&(p((e=>[...e,u])),g(void 0))},currentPage:m.length+1}}}({spaceStore:a,daysFilter:n,query:P,sort:g??sm,teamIds:w,createdBy:C,createdOn:T,lastEditedOn:_}),H=(0,S().K8)((()=>Boolean(null==a?void 0:a.getSettings().disable_page_analytics)),[a]);return(0,i.jsxs)("div",{style:l.container,children:[(0,i.jsx)(Eg,{organizationId:t,spaceStore:a,subtab:fm.PageViews,daysFilter:n,setDaysFilter:o,title:(0,i.jsx)(v().sA,{id:"organization.pageViews.title",defaultMessage:"Page views"}),byline:(0,i.jsx)(v().sA,{id:"organization.pageViews.byline",defaultMessage:"View all recent page views and edits"}),disableFilters:H,additionalFilters:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(zn().j,{selectedTeamIds:w,setSelectedTeamIds:A,onMenuClose:()=>{},teamStores:u}),(0,i.jsx)(Vg().Q,{spaceStore:a,createdByFilterIds:C,setCreatedByFilter:e=>{I(e)},includeGuests:!0}),(0,i.jsx)(Ed().Z,{lastEditedTime:_,createdTime:T,setLastEditedTime:e=>{D(e),k({starting:void 0,ending:void 0})},setCreatedOnTime:e=>{k(e),D({starting:void 0,ending:void 0})}})]}),sortProps:{sortPillProps:{sortProperties:om,isMenuOpen:f,setIsMenuOpen:x,onApply:e=>{x(!1),h(void 0);const t=e.at(0);m(t?function(e){return{field:e.propertyId===Gg.id?"pageViews":"uniquePageViews",direction:"descending"===e.direction?"desc":"asc"}}(t):void 0)},currentSorts:b,preventMultipleSorts:!0},sortButtonProps:{appliedSorts:g?[am(g)]:void 0,openSortPillMenu:e=>{e&&h([{propertyId:e,direction:"descending"}]),x(!0)},sortProperties:om}},querySearchProps:{mode:Ot().Ke.AnimatedSearchButton,query:P,setQueryFilter:e=>{R(e)}},onExport:async()=>{await(0,jg().K)({environment:r,spaceId:a.id,organizationId:t,analyticsType:Sg().e.Content,filters:{query:P,daysFilter:n,createdBy:C,teamIds:w,createdTime:(0,mc().ES)(T),lastEditedTime:(0,mc().ES)(_)}})}}),(0,i.jsx)(em,{organizationId:t,spaceStore:a,navigableBlockStores:E,analyticsByPageId:L,runNewSearch:O,loadMoreMethod:F,loading:U,isWorkspaceAnalyticsDisabled:H})]})}function am(e){return{propertyId:"pageViews"===e.field?Gg.id:Kg.id,direction:"desc"===e.direction?"descending":"ascending"}}const sm={field:"pageViews",direction:"desc"},nm=(0,v().YK)({views:{id:"organization.analytics.pageViewTable.viewsColumn.sortHeader",defaultMessage:"All views"},uniqueViews:{id:"organization.analytics.pageViewTable.uniqueViewsColumn.sortHeader",defaultMessage:"Unique views"}}),om=[{id:Gg.id,name:k().A.formatMessage(nm.views),type:"number"},{id:Kg.id,name:k().A.formatMessage(nm.uniqueViews),type:"number"}];var im=()=>a(218357),rm=()=>a(830820),lm=()=>a(487966),dm=()=>a(415385),cm=()=>a(182212),um=()=>a(203041),gm=()=>a(338951),mm=()=>a(456487),pm=()=>a(402918);function hm(e){var t,a,n;let{organizationId:o,spaceStore:r,daysFilter:l}=e;const d=(0,y().v3)(),c=(0,v().tz)(),[u,g]=(0,rm().z)(),{longTallShimmer:m,shortShimmer:p}=(0,de().Z)(),h=(0,S().K8)((()=>{var e;return null===(e=ve().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),{organizationOwnerRecordCache:f}=(0,s.useContext)(N().N),x=(0,um().C)({spaceStore:r,userId:h,isOrganizationOwner:!0,daysFilter:l}),{activeMembersCount:b,previousActiveMembersCount:A,activeGuestsCount:M,previousActiveGuestsCount:C,topTeamspaces:I,topViewers:T,topEditors:k}=x.data,_=(0,S().K8)((()=>I.map((e=>{let{teamspaceId:t,pageViews:a}=e;return{store:new(z().h4)(d,{id:t,table:im().yK},{inMemoryRecordCache:f}),caption:(0,i.jsx)(v().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:(0,i.jsx)(dm()._,{abbreviateNumber:!0,num:a})}})}})).filter((e=>e.store.canRead())).slice(0,5)),[d,I,f]),P=(0,S().K8)((()=>T.map((e=>{let{userId:t,pageViews:a}=e;return{store:new(z().LU)(d,{id:t,table:w().oo}),caption:(0,i.jsx)(v().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,i.jsx)(dm()._,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[d,T]),R=(0,S().K8)((()=>k.map((e=>{let{userId:t,pageEdits:a}=e;return{store:new(z().LU)(d,{id:t,table:w().oo}),caption:(0,i.jsx)(v().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,i.jsx)(dm()._,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[d,k]),{usersTabData:B}=Mg({spaceStore:r,daysFilter:l}),E=(0,Wg().g)({spaceId:r.id,daysFilter:l}),{pageViews:L,uniquePageViews:U,pageEdits:F,topPages:H}=E.data,V=(0,S().K8)((()=>H.map((e=>{let{pageId:t,pageViews:a}=e;return{store:new(z().Bv)(d,{id:t,table:aa().ev},{inMemoryRecordCache:f}),caption:(0,i.jsx)(v().sA,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,i.jsx)(dm()._,{abbreviateNumber:!1,num:a})}})}}))),[d,H,f]),W=(0,j().IS)((e=>({twoColumnGridWithGap:{display:"grid",columnGap:16,gridAutoColumns:"minmax(0, 1fr)",gridAutoFlow:"column",width:"100%",marginBottom:-6},twoColumnGridWithNoGap:{display:"grid",columnGap:0,gridAutoColumns:"minmax(0, 1fr)",gridAutoFlow:"column",width:"100%",border:`1px solid ${e.regularDividerColor}`,borderRadius:8,boxShadow:O().v},graphContainer:{width:"100%"},graphDisplayBox:{borderRadius:8,boxShadow:O().v},searchContainer:{width:"100%"},cardTitle:{fontSize:12,alignSelf:"start",color:e.text.secondary,fontWeight:510},analyticsCardListContainer:{border:"0px",borderRadius:0,padding:"14px 16px 14px 16px"},containerWithRightBorder:{borderRight:`1px solid ${e.regularDividerColor}`,height:"100%"},bylineShimmer:{...p,height:17}})),[p]),q=Math.floor(g-8),K=(0,S().K8)((()=>Boolean(null==r?void 0:r.getSettings().disable_page_analytics)),[r]),Y=(0,S().K8)((()=>null==r?void 0:r.getName()),[r]);return K?(0,i.jsx)(wg().H,{type:"disabled",spaceName:Y}):"NotFoundError"===(null===(t=E.error)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(a=x.error)||void 0===a?void 0:a.name)||"NotFoundError"===(null==B||null===(n=B.usersAndStatsError)||void 0===n?void 0:n.name)?(0,i.jsx)(wg().H,{type:"empty",spaceName:Y}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.title",defaultMessage:"User engagement"}),content:(0,i.jsxs)(oe().VP,{gap:16,width:"100%",children:[(0,i.jsxs)("div",{style:W.twoColumnGridWithGap,children:[(0,i.jsx)(Tr().LX,{row:1,col:1,children:(0,i.jsx)(re,{title:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.activeMembers.title",defaultMessage:"Active members"}),content:x.loading?(0,i.jsx)(le().A,{style:m}):(0,i.jsx)(D().D,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.members",defaultMessage:"{activeMembersCount} members",values:{activeMembersCount:(0,i.jsx)(dm()._,{abbreviateNumber:!1,num:b})}})}),byline:x.loading?(0,i.jsx)(le().A,{style:W.bylineShimmer}):void 0!==A?(0,i.jsx)(gm().Z,{userType:"members",daysFilter:l,count:b,previousCount:A}):null,onClick:()=>{ym({environment:d,organizationId:o,spaceId:r.id,tab:fm.MemberViews})}})}),(0,i.jsx)(Tr().LX,{row:1,col:2,children:(0,i.jsx)(re,{title:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.activeGuests.title",defaultMessage:"Active guests"}),content:x.loading?(0,i.jsx)(le().A,{style:m}):(0,i.jsx)(D().D,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.guests",defaultMessage:"{activeGuestsCount} guests",values:{activeGuestsCount:(0,i.jsx)(dm()._,{abbreviateNumber:!1,num:M})}})}),byline:x.loading?(0,i.jsx)(le().A,{style:W.bylineShimmer}):void 0!==C?(0,i.jsx)(gm().Z,{userType:"guests",daysFilter:l,count:M,previousCount:C}):null,onClick:void 0})})]}),(0,i.jsx)("div",{style:W.graphContainer,children:(0,i.jsx)(pm().N,{usersTabData:B,daysFilter:l,intl:c,containerRef:u,widthOfGraph:q,displayBoxStyle:W.graphDisplayBox,graphTitleStyle:W.cardTitle})}),(0,i.jsxs)("div",{style:W.twoColumnGridWithNoGap,children:[(0,i.jsx)(Tr().LX,{row:1,col:1,children:(0,i.jsx)("div",{style:W.containerWithRightBorder,children:(0,i.jsx)(cm().N,{loading:x.loading,error:x.error,title:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:P,titleStyle:W.cardTitle,containerStyle:W.analyticsCardListContainer})})}),(0,i.jsx)(Tr().LX,{row:1,col:2,children:(0,i.jsx)(cm().N,{loading:x.loading,error:x.error,title:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:R,titleStyle:W.cardTitle,containerStyle:W.analyticsCardListContainer})})]})]})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.analytics.contentEngagement.title",defaultMessage:"Content engagement"}),content:(0,i.jsxs)(oe().VP,{gap:16,width:"100%",children:[(0,i.jsxs)("div",{style:W.twoColumnGridWithGap,children:[(0,i.jsx)(Tr().LX,{row:1,col:1,children:(0,i.jsx)(re,{title:(0,i.jsx)(v().sA,{id:"organization.analytics.contentEngagement.pageViews.title",defaultMessage:"Page views"}),content:E.loading?(0,i.jsx)(le().A,{style:m}):(0,i.jsx)(D().D,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(v().sA,{id:"organization.analytics.contentEngagement.pageViews",defaultMessage:"{pageViews} total views",values:{pageViews:(0,i.jsx)(dm()._,{abbreviateNumber:!1,num:L})}})}),byline:E.loading?(0,i.jsx)(le().A,{style:W.bylineShimmer}):(0,i.jsx)(v().sA,{id:"organization.analytics.contentEngagement.uniqueViews.title",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,i.jsx)(dm()._,{abbreviateNumber:!1,num:U})}}),onClick:()=>ym({environment:d,organizationId:o,spaceId:r.id,tab:fm.PageViews})})}),(0,i.jsx)(Tr().LX,{row:1,col:2,children:(0,i.jsx)(re,{title:(0,i.jsx)(v().sA,{id:"organization.analytics.contentEngagement.pageEdits.title",defaultMessage:"Page edits"}),content:E.loading?(0,i.jsx)(le().A,{style:m}):(0,i.jsx)(D().D,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(v().sA,{id:"organization.analytics.contentEngagement.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,i.jsx)(dm()._,{abbreviateNumber:!1,num:F})}})}),byline:(0,i.jsx)(i.Fragment,{children:" "}),onClick:void 0})})]}),(0,i.jsxs)("div",{style:W.twoColumnGridWithNoGap,children:[(0,i.jsx)(Tr().LX,{row:1,col:1,children:(0,i.jsx)("div",{style:W.containerWithRightBorder,children:(0,i.jsx)(cm().N,{loading:x.loading,error:x.error,title:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:_,titleStyle:W.cardTitle,containerStyle:W.analyticsCardListContainer})})}),(0,i.jsx)(Tr().LX,{row:1,col:2,children:(0,i.jsx)(cm().N,{loading:E.loading,error:E.error,title:(0,i.jsx)(v().sA,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",defaultMessage:"Most popular pages"}),items:V,titleStyle:W.cardTitle,containerStyle:W.analyticsCardListContainer})})]})]})}),(0,i.jsx)(ie,{title:(0,i.jsxs)(oe().fI,{gap:8,children:[(0,i.jsx)(v().sA,{id:"organization.analytics.searchQueries.title",defaultMessage:"Search queries"}),(0,i.jsx)(G().A,{placement:$a().W.Bottom,render:e=>(0,i.jsx)(lm().A,{...e,href:(0,he().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq"}),renderTooltip:()=>(0,i.jsx)(v().sA,{id:"organization.analytics.searchQueries.tooltip",defaultMessage:"Displays popular search queries in the workspace from the selected date range."})})]}),content:(0,i.jsx)("div",{style:W.searchContainer,children:(0,i.jsx)(mm().A,{spaceStore:r,hideHeader:!0})})})]})}let fm=function(e){return e.PageViews="page-views",e.MemberViews="member-views",e}({});const xm={[fm.PageViews]:{title:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViews.title",defaultMessage:"Page views"})},[fm.MemberViews]:{title:(0,i.jsx)(v().sA,{id:"organization.analytics.memberViews.title",defaultMessage:"Member views"})}};function vm(e){let{spaceId:t,organizationId:a,subtab:n,queryParams:o,tabRoute:r}=e;const l=(0,y().v3)(),d=oa({spaceId:t});nc({spaceId:t,organizationId:a,subtab:n,queryParams:o,tabRoute:r});const c=(0,s.useMemo)((()=>n?function(e){switch(e){case fm.MemberViews:return fm.MemberViews;case fm.PageViews:return fm.PageViews;default:return fm.MemberViews}}(n):void 0),[n]),[u,g]=(0,s.useState)(Rg);if(!d||!t||!a)return null;let m=null;switch(c){case fm.MemberViews:m=(0,i.jsx)(Lg,{organizationId:a,spaceStore:d,daysFilter:u,setDaysFilter:g});break;case fm.PageViews:m=(0,i.jsx)(tm,{organizationId:a,spaceStore:d,daysFilter:u,setDaysFilter:g})}return m&&c?(0,i.jsx)(cd().D,{breadcrumbs:[{onClick:()=>{(0,gd().i)({environment:l,from:{tabRoute:x().Tr},organizationId:a,tabRoute:x().Tr,queryParams:o})},message:(0,i.jsx)(v().sA,{id:"organization.analytics.breadcrumb.goBack",defaultMessage:"Analytics"})},{message:xm[c].title}],children:m}):(0,i.jsx)(bm,{organizationId:a,spaceStore:d,daysFilter:u,setDaysFilter:g})}function bm(e){let{organizationId:t,spaceStore:a,daysFilter:s,setDaysFilter:n}=e;const o=(0,j().IS)((e=>({divider:{color:e.stroke.secondary,marginTop:16,marginBottom:16}})),[]);return(0,i.jsxs)(ud,{children:[(0,i.jsx)(Eg,{organizationId:t,spaceStore:a,daysFilter:s,setDaysFilter:n,title:(0,i.jsx)(v().sA,{id:"organization.analytics.title",defaultMessage:"Analytics"}),byline:(0,i.jsx)(v().sA,{id:"organization.analytics.byline",defaultMessage:"Overview of how your organization is engaging with content across the workspace"})}),(0,i.jsx)(Ir().A,{size:1,style:o.divider,dividerColor:o.divider.color}),(0,i.jsx)(hm,{organizationId:t,spaceStore:a,daysFilter:s})]})}function ym(e){const{environment:t,organizationId:a,spaceId:s,tab:n}=e;(0,gd().i)({environment:t,from:{tabRoute:x().Tr},organizationId:a,tabRoute:x().Tr,properties:{subtab:n},queryParams:{[Hf]:s}})}var Sm=()=>a(854285),jm=()=>a(110975),wm=()=>a(689510),Am=()=>a(70989);function Mm(e){let{organizationStore:t}=e;const a=(0,y().v3)(),s=(0,v().tz)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Be().Y,{}),(0,i.jsx)(Oe,{title:(0,i.jsx)(v().sA,{id:"organization.settings.deleteOrganization.title",defaultMessage:"Delete organization"}),byline:(0,i.jsx)(v().sA,{id:"organization.settings.deleteOrganization.caption",defaultMessage:"To confirm deletion, you’ll need to enter the organization name"}),buttonLabel:(0,i.jsx)(v().sA,{id:"organization.settings.deleteOrganization.button",defaultMessage:"Delete organization"}),type:"danger",onClick:async()=>{await async function(e,t,a){const{currentUserSettingsStore:s}=ve().default.state;if(!s)return;const n=e.getName()||t.formatMessage({defaultMessage:"Untitled organization",id:"organization.settings.deleteOrganization.untitledOrganization.placeholder"}),o=(0,i.jsx)(v().sA,{id:"organization.settings.deleteOrganization.confirmation.prompt",defaultMessage:"This will permanently delete the organization, including any security settings and verified domains. Workspaces will not be deleted. Please type the name of the organization to confirm."});if(await wm().h({title:(0,i.jsx)(v().sA,{id:"organization.settings.deleteOrganization.confirmation.title",defaultMessage:"Delete this organization permanently?"}),message:o,acceptLabel:(0,i.jsx)(v().sA,{id:"organization.settings.deleteOrganization.confirmation.button",defaultMessage:"Permanently delete organization"}),requiredInputValue:n})){Am().m({message:Cm.deletingOrganization});try{const s=await M().callApi({eventName:"deleteOrganization",environment:a,data:{organizationId:e.id}});if("success"!==s.type)return void C().f1((0,T().Hu)(t,s));Ne().oo({environment:a,url:De().JZ.root})}finally{Am().V()}}}(t,s,a)},modal:null})]})}const Cm=(0,v().YK)({deletingOrganization:{id:"organization.deleting.loading",defaultMessage:"Deleting organization..."}});var Im=()=>a(757877);const Tm=1,km=at().q;function _m(e){const{environment:t,organizationId:a,filters:s,appliedSorts:n,query:o}=e,i=Object.keys(et().fN(s,(e=>Boolean(e)&&(null==e?void 0:e.length))));(0,I().u4)({environment:t,event:{eventName:"org_console_general_table_query",eventProperties:{table:"spaces",organization_id:a,filter_keys:i.length?i:void 0,sort_columns:null==n?void 0:n.map((e=>e.propertyId)),has_query:Boolean(o)}}})}function zm(e,t){const a=(0,y().v3)(),[n,o]=(0,s.useState)({}),[i,r]=(0,s.useState)(),[l,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(Tm);(0,s.useEffect)((()=>{_m({organizationId:t,environment:a})}),[t,a]);const g=(0,s.useCallback)((e=>{o((t=>({...t,...e}))),u(Tm),_m({organizationId:t,environment:a,filters:{...n,...e},appliedSorts:i,query:l})}),[a,t,n,i,l]),m=(0,s.useCallback)((e=>{r(e),u(Tm),_m({organizationId:t,environment:a,filters:n,appliedSorts:e,query:l})}),[a,t,n,l]),p=(0,s.useCallback)((e=>{d(e),u(Tm),_m({organizationId:t,environment:a,filters:n,appliedSorts:i,query:e})}),[a,t,n,i]),h=(0,S().K8)((()=>{if(!e)return[];let t=e;l&&(t=(0,ht().Ay)(l,t,(e=>e.spaceName)));const a=[];return n.spaceIds&&n.spaceIds.length>0&&(t=t.filter((e=>{var t;return null===(t=n.spaceIds)||void 0===t?void 0:t.includes(e.id)})),a.push("spaceIds")),n.emailDomains&&n.emailDomains.length>0&&(t=t.filter((e=>{var t;return null===(t=n.emailDomains)||void 0===t?void 0:t.includes(e.emailDomain)})),a.push("emailDomains")),n.owners&&n.owners.length>0&&(t=t.filter((e=>e.owners.some((e=>{var t;return null===(t=n.owners)||void 0===t?void 0:t.includes(e)})))),a.push("owners")),function(e){let{rows:t,appliedSorts:a}=e;const s=null!=a&&a.length?a:[{propertyId:dp,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===gp.id?"memberCount":t===mp.id?"guestCount":e=>e.spaceName.toLowerCase()})),o=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Ee().HB)(t)}));return et().My(t,n,o)}({rows:t,appliedSorts:i})}),[e,n.spaceIds,n.emailDomains,n.owners,l,i]),f=(0,s.useMemo)((()=>{const e=(c-1)*km,t=e+km;return h.slice(e,t)}),[h,c]),x=(0,s.useMemo)((()=>c*km<h.length),[h,c]),v=c>Tm,b=(0,s.useCallback)((()=>{x&&u((e=>e+1))}),[x]),j=(0,s.useCallback)((()=>{v&&u((e=>e-1))}),[v]);return{filters:n,updateFilters:g,query:l,setQuery:p,paginatedRows:f,appliedSorts:i,setAppliedSorts:m,loadNextPage:b,loadPrevPage:j,hasNextPage:x,hasPrevPage:v,currentPage:c}}const Dm={};var Pm=()=>a(176936);const Nm={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M6.75 2.545a.55.55 0 0 1 .55-.55h5.4a.55.55 0 0 1 0 1.1H7.3a.55.55 0 0 1-.55-.55m-1.25 1.7a.55.55 0 1 0 0 1.1h9a.55.55 0 0 0 0-1.1zm7.036 5.847a.625.625 0 1 0-1.072-.643l-1.953 3.256-1.036-1.208a.625.625 0 1 0-.95.813l1.6 1.867a.625.625 0 0 0 1.011-.085z"}),(0,i.jsx)("path",{d:"M5.088 6.42a2.125 2.125 0 0 0-2.125 2.125v6.45c0 1.174.951 2.125 2.125 2.125h9.825a2.125 2.125 0 0 0 2.125-2.125v-6.45a2.125 2.125 0 0 0-2.125-2.125zm-.875 2.125c0-.483.392-.875.875-.875h9.825c.483 0 .875.392.875.875v6.45a.875.875 0 0 1-.875.875H5.088a.875.875 0 0 1-.875-.875z"})]})},Rm=(0,o().wt)("checkStack",Nm),Bm=(0,o().wt)("personTransfer",{viewBox:"0 0 26 20",svg:(0,i.jsx)("path",{d:"M5.918 10.085q-.738 0-1.347-.39a2.9 2.9 0 0 1-.964-1.039A3 3 0 0 1 3.252 7.2a2.85 2.85 0 0 1 1.32-2.44 2.5 2.5 0 0 1 1.346-.383q.732 0 1.333.376.61.375.97 1.018.363.643.363 1.43a2.92 2.92 0 0 1-1.333 2.494 2.4 2.4 0 0 1-1.333.39m0-1.155q.396 0 .725-.226.334-.232.533-.622.204-.39.205-.882 0-.485-.205-.861a1.5 1.5 0 0 0-.533-.588 1.3 1.3 0 0 0-.725-.219 1.3 1.3 0 0 0-.738.219 1.6 1.6 0 0 0-.527.602 1.8 1.8 0 0 0-.198.847q0 .5.198.889.198.39.527.615.335.226.738.226m-3.562 6.795q-.78 0-1.175-.267-.397-.267-.397-.82 0-.622.349-1.3.349-.675 1.012-1.264.663-.587 1.613-.95c.95-.363 1.351-.362 2.153-.362s1.518.12 2.147.362a5.2 5.2 0 0 1 1.613.95 4.4 4.4 0 0 1 1.019 1.265q.348.677.348 1.299 0 .553-.396.82-.398.267-1.176.267zm-.177-1.156h7.465q.13 0 .13-.116 0-.321-.24-.752a3 3 0 0 0-.724-.834 4 4 0 0 0-1.204-.683q-.724-.274-1.695-.274-.963 0-1.688.274a4.1 4.1 0 0 0-1.21.683 3.1 3.1 0 0 0-.732.834q-.24.43-.239.752 0 .116.137.116m17.91-4.457q-.738 0-1.347-.383a2.9 2.9 0 0 1-.964-1.045 3 3 0 0 1-.355-1.456q0-.773.355-1.415.363-.643.964-1.026a2.5 2.5 0 0 1 1.347-.383q.738 0 1.34.383.608.375.964 1.019.362.635.362 1.422 0 .8-.362 1.456a2.9 2.9 0 0 1-.971 1.039 2.4 2.4 0 0 1-1.333.39Zm0-1.155q.404 0 .731-.226.336-.232.527-.622.198-.39.198-.881 0-.486-.198-.862a1.47 1.47 0 0 0-.527-.588 1.3 1.3 0 0 0-.731-.218q-.404 0-.738.218a1.6 1.6 0 0 0-.527.602 1.8 1.8 0 0 0-.198.848q0 .498.198.888c.198.39.308.465.527.615q.334.226.738.226m-3.562 6.795q-.78 0-1.175-.267-.39-.265-.39-.82 0-.622.342-1.299.349-.676 1.011-1.258a5.2 5.2 0 0 1 1.614-.95q.949-.369 2.153-.369 1.203 0 2.153.37a5.2 5.2 0 0 1 1.614.95 4.3 4.3 0 0 1 1.011 1.257q.35.677.349 1.299 0 .555-.396.82-.398.267-1.176.267zm-.177-1.155h7.464q.137 0 .137-.117 0-.32-.246-.752a3 3 0 0 0-.724-.833 4 4 0 0 0-1.21-.677q-.725-.274-1.689-.274-.97 0-1.695.274a4 4 0 0 0-1.21.677 3 3 0 0 0-.718.834q-.24.43-.24.752 0 .116.13.116Zm-5.695-4.423a.63.63 0 0 1-.45-.185.63.63 0 0 1-.192-.458q0-.266.191-.458a.62.62 0 0 1 .451-.191.6.6 0 0 1 .458.191q.192.191.192.458c0 .267-.064.33-.192.458a.62.62 0 0 1-.458.185m2.345 0a.64.64 0 0 1-.458-.185.64.64 0 0 1-.185-.458.64.64 0 0 1 .185-.458.63.63 0 0 1 .458-.191q.267 0 .458.191.192.191.191.458c-.001.267-.063.33-.191.458a.64.64 0 0 1-.458.185m2.338 0a.64.64 0 0 1-.458-.185.64.64 0 0 1-.185-.458.64.64 0 0 1 .185-.458.63.63 0 0 1 .458-.191q.26 0 .451.191.192.191.191.458c-.001.267-.063.33-.19.458a.63.63 0 0 1-.452.185"})}),Em={claimableSpaces:[],filters:{query:""},loading:!1,error:void 0,nextEarliestCreatedAt:Date.now(),hasNextPage:!0};function Lm(e){let{organizationId:t}=e;const a=(0,y().v3)(),[n,o]=(0,s.useState)(Em),i=(0,s.useRef)(!1),r=(0,s.useRef)({}),l=(0,s.useCallback)((async e=>{let{nextEarliestCreatedAt:s,filters:n}=e;try{const{spaces:e,earliestCreatedAt:i,hasMoreSpaces:r}=await async function(e){const{environment:t,organizationId:a,emailDomains:s,spaceCreatedTimeUpperBound:n,memberCountFilter:o,query:i}=e,r=await M().callApi({eventName:"getClaimableWorkspacesInOrganization",environment:t,data:{organizationId:a,emailDomains:s,memberCountFilter:o,spaceCreatedTimeUpperBound:n,limit:at().q,filters:{query:i}}});if("failed"===r.type)throw r.error;return{spaces:r.data.results.map((e=>({id:e.id,name:e.spaceName,icon:e.spaceIcon,createdAt:e.spaceCreatedTime,memberCount:e.memberCount,subscriptionTier:e.subscriptionTier,creatorEmailDomain:e.spaceCreatedByDomain,creator:e.spaceCreator,admins:e.admins,spaceRequest:e.spaceRequest,isDelinquent:e.isDelinquent,isPendingBilling:e.isPendingBilling,isActorInSpace:e.isActorInSpace}))),earliestCreatedAt:r.data.hasMoreSpaces?r.data.earliestCreatedAt:void 0,hasMoreSpaces:r.data.hasMoreSpaces}}({environment:a,organizationId:t,emailDomains:n.emailDomains,memberCountFilter:n.memberCountFilter,query:n.query,spaceCreatedTimeUpperBound:s?s-1:Date.now()});o((t=>({...t,loading:!1,error:void 0,claimableSpaces:t.claimableSpaces.concat(e),nextEarliestCreatedAt:i,hasNextPage:r})))}catch(i){const e=(0,ws().A)(i);o((t=>({...t,loading:!1,error:e})))}}),[a,t]),d=(0,s.useCallback)((async e=>{let{restartSearch:a,nextEarliestCreatedAt:s}=e;if(!t)return;let i=n.loading,d=n.error;a&&(o((e=>({...Em,filters:e.filters}))),i=Em.loading,d=Em.error),i||d||(o((e=>({...e,loading:!0}))),r.current=n.filters,await l({nextEarliestCreatedAt:s,filters:n.filters}))}),[t,n,l]);(0,s.useEffect)((()=>{!i.current&&Boolean(t)&&(d({restartSearch:!0}),i.current=!0)}),[t,d]),(0,s.useEffect)((()=>{et().n4(r.current,n.filters)||d({restartSearch:!0})}),[n.filters,d]);const c=(0,s.useCallback)((async()=>{if(n.hasNextPage)return d({restartSearch:!1,nextEarliestCreatedAt:n.nextEarliestCreatedAt})}),[d,n.hasNextPage,n.nextEarliestCreatedAt]),u=(0,s.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),g=(0,s.useCallback)((e=>(o((t=>({...t,loading:Boolean(e),claimableSpaces:[]}))),d({restartSearch:!0}))),[d]);return{loadNextPage:c,claimableSpaces:n.claimableSpaces,nextEarliestCreatedAt:n.nextEarliestCreatedAt,filters:n.filters,loading:n.loading,error:n.error,hasNextPage:n.hasNextPage,setFilters:u,refreshPage:g}}function Om(e){let{selectedMemberCountType:t,setSelectedMemberCountType:a}=e;return(0,i.jsx)(Ys().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"filters.memberCountType.title",defaultMessage:"Member count"}),pillIcon:m().peopleIcon,selectedItem:t,setSelectedItem:a,items:Um,shouldUseCheck:!0})}const Um=[{key:"one",value:"single",title:(0,i.jsx)(v().sA,{id:"filters.memberCountType.option.single.title",defaultMessage:"Single member"}),shortTitle:(0,i.jsx)(v().sA,{id:"filters.memberCountType.option.single.title",defaultMessage:"Single member"})},{key:"multi",value:"multi",title:(0,i.jsx)(v().sA,{id:"filters.memberCountType.option.multi.title",defaultMessage:"Multiple members"}),shortTitle:(0,i.jsx)(v().sA,{id:"filters.memberCountType.option.multi.title",defaultMessage:"Multiple members"})}];function Fm(e){let{spaceId:t,spaceName:a,spaceIcon:s,shouldAccountForMultiselect:n,rightContent:o,badge:r}=e;const l=s?{pointer:{table:na().NX,id:t,spaceId:t},icon:s}:void 0;return(0,i.jsx)(Lt().s7,{icon:(0,i.jsx)(L().B,{disabled:!0,icon:l,isEmptyPage:!1,size:28,title:a,isLarge:!0,emojiSize:24,isRaw:!1}),title:a,badge:r,rightContent:o,summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:`calc(100% - ${n?Et().Gr:0}px)`}})}var Hm=()=>a(977541),Vm=()=>a(635616),Wm=()=>a(157440),qm=()=>a(269280);function Gm(){const e=(0,y().v3)(),t=(0,v().tz)(),[a,n]=(0,s.useState)(!1),{samlConfigs:o,loadSamlConfigs:r,refreshSamlConfigs:l}=(0,s.useContext)(R().D),d=o.at(0),c=(0,S().K8)((()=>!!d&&(0,Sm().J4)({samlConfigStatus:d.status,emailDomains:d.emailDomains,idp_metadata:d.idpMetadata,idp_metadata_url:d.idpMetadataUrl})),[d]);(0,qm().w)((()=>{r()}));const u=(0,s.useCallback)((async(a,s)=>{n(!0);const o=await M().callApi({eventName:"setSamlConfig",environment:e,data:{spaceId:a,...s}});return"failed"===o.type?(C().f1((0,T().Hu)(t,o)),n(!1),!1):(await l(),n(!1),lt().D6({label:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.saveChanges.toast.success",defaultMessage:"Successfully updated SAML configuration"})}),!0)}),[e,l,t]);return{samlConfig:d,isEnabled:c,refreshSamlConfigs:l,updateSamlConfig:u,loading:a}}async function Km(e){const{spaceIds:t,fn:a,successMessage:s}=e,n=(0,st().lX)(t,at().O,(async e=>a(e))),o=await n;return function(e){const{responses:t,successMessage:a}=e,s=t.find((e=>"failed"===(null==e?void 0:e.type)));if(s)return C().f1((0,T().Hu)(k().A.getIntl(),s));if(a)lt().D6({label:a})}({responses:o,successMessage:s}),o}function Ym(e){const{spaces:t}=e,a=(0,j().IS)((e=>({workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,boxSizing:"border-box",padding:"0 12px",width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column",maxHeight:200,overflowY:"auto"},content:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"100%"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16}})),[]);return(0,i.jsx)("div",{style:a.workspaceContainer,children:t.map((e=>(0,i.jsxs)("div",{style:a.content,children:[(0,i.jsx)(Hm().H,{id:e.id,name:e.name,icon:e.icon,subscriptionTier:e.subscriptionTier,memberCount:e.memberCount}),(0,i.jsx)("div",{style:a.checkContainer,children:(0,lg().checkmarkIcon)(a.check)})]},e.id)))})}function Qm(e){let{organizationId:t,claimableSpaces:a,onDismiss:n,onRefresh:o}=e;const{isEnabled:r}=Gm(),l=(0,y().v3)(),d=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{width:Y().J2,display:"flex",flexDirection:"column",gap:20}})),[]);const[c,u]=(0,s.useState)(!1);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,Vm().arrowInCircleUpIcon)(d.icon),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.title",defaultMessage:"Add workspace to organization?"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.byline",defaultMessage:"Send a request to claim ownership of this workspace. Once approved, it will be added to your organization."}),bylineWidthOverride:"90%"}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.button.primary",defaultMessage:"Send request"}),primaryAction:async()=>{u(!0),await async function(){await Km({spaceIds:a.map((e=>e.id)),fn:async e=>M().callApi({eventName:"requestClaimForSalesAssisted",environment:l,data:{requestingOrganizationId:t,targetSpaceId:e}}),successMessage:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.saveSuccess",defaultMessage:"Successfully requested to add {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await o(),n()}(),u(!1)},primaryDisabled:c,secondaryText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsxs)("div",{style:d.content,children:[(0,i.jsx)(Ym,{spaces:a}),r?(0,i.jsx)(Gr().l,{iconGroup:Wm().u,display:"inline",tint:"gray",label:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.samlWarning.label",defaultMessage:"Your organization’s SAML will be applied to this workspace"}),description:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.samlWarning.description",defaultMessage:"All workspaces added to this organization will inherit the organization’s existing SAML configuration."})}):null]})})})}var $m=()=>a(729632);function Xm(e){let{organizationId:t,claimableSpaces:a,onDismiss:n,onRefresh:o}=e;const r=(0,y().v3)(),l=(0,v().tz)(),[d,c]=(0,s.useState)(!1),[u,g]=(0,s.useState)(),[m,p]=(0,s.useState)(!0),h=(0,j().IS)((e=>({icon:{height:32,fill:e.icon.secondary},content:{width:440,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:Y().gA},confirmation:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",gap:10}})),[]);function f(){const e=(0,pt().qh)(u);return p((0,pt().DT)(e)),e}const[x,b]=(0,s.useState)(!1);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:Bm(h.icon),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.title",defaultMessage:"Request transfer"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.byline",defaultMessage:"Request the workspace owner to transfer this workspace to a personal account. Access will be restricted until transfer is complete."}),bylineWidthOverride:"85%"}),footer:(0,i.jsx)(Y().jl,{primaryDisabled:!d||x||!m||!u,primaryText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.button.primary",defaultMessage:"Request transfer"}),primaryAction:async()=>{b(!0),await async function(){const e=f();e&&(await Km({spaceIds:a.map((e=>e.id)),fn:async a=>M().callApi({eventName:"initiateOrganizationSpaceTransfer",environment:r,data:{organizationId:t,targetSpaceId:a,contactEmail:e}}),successMessage:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.saveSuccess",defaultMessage:"Successfully requested transfer for {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await o(),n())}(),b(!1)},secondaryText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsxs)("div",{style:h.content,children:[(0,i.jsx)(Ym,{spaces:a}),(0,i.jsx)($m().p,{value:u,onChange:e=>g(e.target.value),onBlur:f,placeholder:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.placeholder",defaultMessage:"admin@example.com"}),labelMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.contactEmailInput",defaultMessage:"Assign a contact for inquiries"}),helpMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.helpMessage",defaultMessage:"The Workspace Owner of the transfer requested workspace can contact this email for inquiries"}),errorMessage:m?void 0:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.errorMessage",defaultMessage:"Invalid email address"})}),(0,i.jsxs)("div",{style:h.confirmation,children:[(0,i.jsx)(dt().A,{checked:d,size:14,checkSize:10,onClick:()=>c((e=>!e))}),(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.confirmationCheckbox",defaultMessage:"I understand this cannot be undone"})})]})]})})})}function Zm(e){let{organizationId:t,claimableSpaces:a,onDismiss:n,onRefresh:o}=e;const r=(0,y().v3)(),l=(0,v().tz)(),[d,c]=(0,s.useState)(!1),[u,g]=(0,s.useState)(),[m,p]=(0,s.useState)(!0),h=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.uiRedPrimary},content:{display:"flex",flexDirection:"column",width:440,justifyContent:"center",alignItems:"center",gap:Y().gA},confirmation:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",gap:10}})),[]);function f(){const e=(0,pt().qh)(u);return p((0,pt().DT)(e)),e}const[x,b]=(0,s.useState)(!1);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,Bt().trashIcon)(h.icon),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.title",defaultMessage:"Delete workspace?"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.byline",defaultMessage:"Schedule this workspace deletion in 30 days, revoking access for all users and notifying workspace owners."}),bylineWidthOverride:"90%"}),footer:(0,i.jsx)(Y().jl,{isDarkRed:!0,primaryDisabled:!d||x||!m||!u,primaryText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.button.primary",defaultMessage:"Schedule deletion"}),primaryAction:async()=>{b(!0),await async function(){const e=f();e&&(await Km({spaceIds:a.map((e=>e.id)),fn:async a=>M().callApi({eventName:"deleteSpaceForOrganizationDomain",environment:r,data:{organizationId:t,targetSpaceId:a,contactEmail:e}}),successMessage:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.saveSuccess",defaultMessage:"Successfully scheduled to delete {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await o(),n())}(),b(!1)},secondaryText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsxs)("div",{style:h.content,children:[(0,i.jsx)(Ym,{spaces:a}),(0,i.jsx)($m().p,{value:u,onChange:e=>g(e.target.value),onBlur:f,placeholder:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.placeholder",defaultMessage:"admin@example.com"}),labelMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.contactEmailInput",defaultMessage:"Assign a contact for inquiries"}),helpMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.helpMessage",defaultMessage:"The Workspace Owner of the deleted workspace can contact this email for inquiries"}),errorMessage:m?void 0:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.errorMessage",defaultMessage:"Invalid email address"})}),(0,i.jsxs)("div",{style:h.confirmation,children:[(0,i.jsx)(dt().A,{checked:d,size:14,checkSize:10,onClick:()=>c((e=>!e))}),(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.confirmationCheckbox",defaultMessage:"I understand this cannot be undone after the 30-day period"})})]})]})})})}const Jm=[{id:"name",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(Fm,{shouldAccountForMultiselect:!0,rightContent:(0,i.jsx)(ap,{claimableSpace:e.claimableSpace,setSelectedSpaceId:e.setSelectedSpaceId,setOpenedModal:e.setOpenedModal}),spaceId:e.claimableSpace.id,spaceName:e.claimableSpace.name,spaceIcon:e.claimableSpace.icon,badge:e.claimableSpace.spaceRequest?(0,i.jsx)(sp,{claimableSpace:e.claimableSpace}):void 0}),widthData:{width:300,maxWidth:300},sortable:!1,shouldShowSortTooltip:!1},{id:"plan",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.plan.header",defaultMessage:"Plan"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,Hm().K)(e.claimableSpace.subscriptionTier,k().A.getIntl())}),widthData:{widthPercent:15,minWidth:40},sortable:!1,shouldShowSortTooltip:!1},{id:"memberCount",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.memberCount.header",defaultMessage:"Members"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:120}}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.memberCount.count",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.claimableSpace.memberCount}})}),widthData:{widthPercent:15,minWidth:40},sortable:!1,shouldShowSortTooltip:!1},{id:"domain",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.domain.header",defaultMessage:"Verified email domain"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.domain.email",defaultMessage:"@{domain}",values:{domain:e.claimableSpace.creatorEmailDomain}})}),widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1},{id:"owners",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.owners.header",defaultMessage:"Workspace owners"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Dn().p,{}):e.workspaceOwnerUserStores.length>0?(0,i.jsx)(Dn().l,{isClickable:!0,userStores:e.workspaceOwnerUserStores}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.owners.noOwners",defaultMessage:"Nobody"})}),hasClickableContents:!0,widthData:{widthPercent:15,minWidth:40},sortable:!1,shouldShowSortTooltip:!1},{id:"createdBy",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.createdBy.header",defaultMessage:"Created by"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Dn().p,{}):e.claimableSpace.creator?(0,i.jsx)(Dn().l,{isClickable:!0,userStores:[e.createdByUserStore]}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.createdBy.deletedUser",defaultMessage:"Deleted user"})}),hasClickableContents:!0,widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1},{id:"createdOn",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.createdOn.header",defaultMessage:"Created on"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:80}}):(0,i.jsx)($o().d,{useSecondaryColorTitle:!0,dateTs:e.claimableSpace.createdAt}),widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1}];var ep=function(e){return e.AddWorkspace="add-workspace",e.RequestTransfer="request-transfer",e.ScheduleDeletion="schedule-deletion",e}(ep||{});function tp(e){let{organizationId:t,claimableSpaces:a,hasMoreResults:n,onLoadMoreResults:o,refreshPage:r,loading:l,error:d,selectedIds:c,onSelectAll:u,onUnselectAll:g,onSelectRow:m}=e;const p=(0,y().v3)(),[h,x]=(0,s.useState)(),[b,S]=(0,s.useState)(),A=(0,Gt().A)(),M=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:Jm,theme:e,containerMarginTop:0})),[]),C=(0,s.useMemo)((()=>a.map((e=>({id:e.id,type:Zt().T.OrganizationClaimableWorkspace,claimableSpace:e,createdByUserStore:e.creator?new(z().LU)(p,{table:w().oo,id:e.creator.id}):void 0,workspaceOwnerUserStores:e.admins.map((e=>new(z().LU)(p,{table:w().oo,id:e.id}))),setSelectedSpaceId:x,setOpenedModal:S,isClickable:!0})))),[a,p]),I=l?0===C.length?(0,Zt().n)():[...C,...(0,Zt().n)(3)]:C,T=Jm.map((e=>({...e,headerStyle:A.tableHeaderForModal,rowStyle:A.tableRowForModal}))),k={header:{isDisabled:l,isSelected:c.length>0&&c.length===a.length,onClick:()=>{c.length===a.length?g():u()}},row:{getDisabledState:e=>l,getSelectedState:e=>e.type===Zt().T.OrganizationClaimableWorkspace&&c.includes(e.claimableSpace.id),onClick:e=>{e.type===Zt().T.OrganizationClaimableWorkspace&&m(e.claimableSpace.id)}}},_=h?a.find((e=>e.id===h)):void 0;return!l&&d?(0,i.jsx)($t,{error:d,runNewSearch:r}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Et().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:T,rows:I,styles:M,onRowClick:e=>m(e.id),multiselect:k,loadMoreMethod:!l&&n?{type:"button",onLoadMore:o}:void 0,renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:f().V,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.empty.title",defaultMessage:"No workspaces found"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.empty.byline",defaultMessage:"There are no workspaces that match this query"})})}),b===ep.AddWorkspace&&_?(0,i.jsx)(Qm,{organizationId:t,claimableSpaces:[_],onDismiss:()=>S(void 0),onRefresh:r}):null,b===ep.RequestTransfer&&_?(0,i.jsx)(Xm,{organizationId:t,claimableSpaces:[_],onDismiss:()=>S(void 0),onRefresh:r}):null,b===ep.ScheduleDeletion&&_?(0,i.jsx)(Zm,{organizationId:t,claimableSpaces:[_],onDismiss:()=>S(void 0),onRefresh:r}):null]})}function ap(e){const{claimableSpace:t,setSelectedSpaceId:a,setOpenedModal:s}=e,n=(0,j().IS)((()=>({icon20x20:{height:20,width:20,fill:"currentColor"}})),[]),o=[{key:"add-workspace",type:"action",icon:Rm(n.icon20x20),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.addWorkspace",defaultMessage:"Add workspace"}),caption:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.addWorkspace.caption",defaultMessage:"Claim ownership and add this workspace to your organization."}),disabled:(0,Pm().Rx)(t)||(0,Pm().NK)(t),tooltipTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.addWorkspace.disabledTooltip",defaultMessage:"You can only add workspaces to your organization that have more than one member and have no pending requests."}),tooltipDisabled:(0,Pm().eG)(t)&&!(0,Pm().NK)(t),action:()=>{s(ep.AddWorkspace),a(t.id)}},{key:"request-transfer",type:"action",icon:Bm(n.icon20x20),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.requestTransfer",defaultMessage:"Request transfer"}),caption:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.requestTransfer.caption",defaultMessage:"Prompt the owner to transfer workspace ownership to a personal account."}),disabled:(0,Pm().eG)(t)||(0,Pm().NK)(t),tooltipTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.requestTransfer.disabledTooltip",defaultMessage:"You can only request transfers for workspaces with one member and have no pending requests."}),tooltipDisabled:(0,Pm().Rx)(t)&&!(0,Pm().NK)(t),action:()=>{s(ep.RequestTransfer),a(t.id)}},{key:"schedule-deletion",type:"action",icon:(0,Bt().trashIcon)(n.icon20x20),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion",defaultMessage:"Schedule deletion"}),caption:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion.caption",defaultMessage:"Schedule for 30-day deletion, revoke access, and notify owners."}),disabled:(0,Pm().eG)(t)||(0,Pm().NK)(t)||(0,Pm().t_)(t),tooltipTitle:(0,Pm().t_)(t)?(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion.disabledTooltip.notFreeTier",defaultMessage:"Only workspaces on the free tier are eligible for deletion."}):(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion.disabledTooltip",defaultMessage:"You can only delete workspaces with one member and have no pending requests."}),tooltipDisabled:(0,Pm().Rx)(t)&&!(0,Pm().NK)(t)&&!(0,Pm().t_)(t),action:()=>{s(ep.ScheduleDeletion),a(t.id)}}];return(0,i.jsx)(Lt().bd,{items:o})}function sp(e){const{claimableSpace:t}=e,n=(0,v().tz)(),o=(0,s.useMemo)((()=>{const e=t.admins[0];return e?(0,a(14931).c6)(n,e):void 0}),[n,t]);const r=function(){var e;switch(null===(e=t.spaceRequest)||void 0===e?void 0:e.type){case"team_claim_upgrade":case"organization_claiming_space":return(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.claim",defaultMessage:"Workspace claim request is being processed."});case"organization_domain_claim_space_deletion":case"domain_claim_space_deletion":return(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.delete",defaultMessage:"Workspace is in the process of being deleted."});case"organization_personal_external_transfer":case"personal_external_transfer":return o?(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.transfer",defaultMessage:"Waiting for {ownerName} to transfer this workspace to an external account.",values:{ownerName:o}}):(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.transfer.noOwnerName",defaultMessage:"Waiting for the workspace owner to transfer this workspace to an external account."});default:return}}();return r?(0,i.jsx)(G().A,{renderTooltip:()=>r,render:e=>(0,i.jsx)(Vt().A,{...e,content:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.content",defaultMessage:"Pending"})})}):null}function np(e){let{organizationId:t,onDismiss:a}=e;const s=(0,j().IS)((e=>({content:{display:"flex",flexDirection:"column",width:"100%",gap:0,overflowY:"auto",padding:"16px 12px"}})),[]);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:a,areaConstraint:{height:{type:"fixed",length:800},width:{type:"fixed",length:1280}},render:e=>{let{sizeRange:a}=e;return(0,i.jsx)(H().tf,{sizeRange:a,showDismissButton:!1,header:null,footer:null,children:(0,i.jsxs)("div",{style:s.content,children:[(0,i.jsx)(Ha()._,{title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.title",defaultMessage:"Add workspaces"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.byline",defaultMessage:"Add workspaces created with a verified domain, or request ownership transfer to a personal account."})}),(0,i.jsx)(ip,{organizationId:t})]})})}})}var op=function(e){return e.AddWorkspace="add-workspace",e.RequestTransfer="request-transfer",e.ScheduleDeletion="schedule-deletion",e}(op||{});function ip(e){let{organizationId:t}=e;const[a,n]=(0,s.useState)(),o=(0,Hn().F)(),r=(0,v().tz)(),l=(0,y().v3)(),d=(0,_a().E)({organizationId:t}),c=(0,S().K8)((()=>(null==d?void 0:d.getEmailDomains())??[]),[d]),[u,g]=(0,s.useState)(!1),{claimableSpaces:m,filters:p,setFilters:h,loading:f,error:x,hasNextPage:b,loadNextPage:j,refreshPage:w}=Lm({organizationId:t}),A=(0,s.useMemo)((()=>m.map((e=>e.id))),[m]),{selectedIds:M,handleToggleId:C,handleSelectAllIds:I,handleUnselectAllIds:T}=Ut({allPossibleIds:A}),k=(0,s.useMemo)((()=>M.map((e=>m.find((t=>t.id===e)))).filter(Ee().O9)),[m,M]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:o.tableHeader,children:[(0,i.jsxs)("div",{style:o.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:M.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(Fa,{itemsSelectedCount:M.length}),onClick:T}),(0,i.jsx)(Ua,{icon:Rm,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.multiselect.addWorkspace",defaultMessage:"Add workspace"}),disabled:k.some(Pm().Rx)||k.some(Pm().NK),disabledTooltipText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.multiselect.addWorkspace.disabledTooltip",defaultMessage:"You can only add workspaces to your organization that have more than one member and have no pending requests."}),onClick:()=>n(op.AddWorkspace)}),(0,i.jsx)(Ua,{icon:Bm,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.multiselect.requestTransfer",defaultMessage:"Request transfer"}),disabled:k.some(Pm().eG)||k.some(Pm().NK),disabledTooltipText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.multiselect.requestTransfer.disabledTooltip",defaultMessage:"You can only request transfers for workspaces with one member and have no pending requests."}),onClick:()=>n(op.RequestTransfer)}),(0,i.jsx)(Ua,{isDestructive:!0,icon:Bt().trashIcon,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.multiselect.scheduleDeletion",defaultMessage:"Schedule deletion"}),disabled:k.some(Pm().eG)||k.some(Pm().NK)||k.some(Pm().t_),disabledTooltipText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.multiselect.scheduleDeletion.disabledTooltip",defaultMessage:"You can only delete workspaces with one member, no pending requests, and on the free tier."}),onClick:()=>n(op.ScheduleDeletion)})]}),(0,i.jsx)(Om,{selectedMemberCountType:p.memberCountFilter,setSelectedMemberCountType:e=>h({memberCountFilter:e})}),(0,i.jsx)(Qs,{pillTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.filters.email.title",defaultMessage:"Verified email domains"}),emailDomains:c,selectedEmailDomains:p.emailDomains||[],setSelectedEmailDomains:e=>{h({emailDomains:e})}})]}),(0,i.jsxs)("div",{style:o.rightContent,children:[(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:p.query,setQueryFilter:e=>h({query:e}),placeholderText:r.formatMessage({id:"organization.workspaces.addModal.filters.query.placeholder",defaultMessage:"Search by workspace name"})}),(0,i.jsx)(Pg().K,{disabled:u,onClick:async()=>{g(!0),await Ve().M0({environment:l,data:{organizationId:t}}),g(!1)}})]})]}),(0,i.jsx)(tp,{organizationId:t,claimableSpaces:m,hasMoreResults:b,onLoadMoreResults:j,refreshPage:()=>w(!0),loading:f,error:x,selectedIds:M,onSelectAll:I,onUnselectAll:T,onSelectRow:C}),a===op.AddWorkspace?(0,i.jsx)(Qm,{organizationId:t,claimableSpaces:k,onDismiss:()=>n(void 0),onRefresh:()=>w(!0)}):null,a===op.RequestTransfer?(0,i.jsx)(Xm,{organizationId:t,claimableSpaces:k,onDismiss:()=>n(void 0),onRefresh:()=>w(!0)}):null,a===op.ScheduleDeletion?(0,i.jsx)(Zm,{organizationId:t,claimableSpaces:k,onDismiss:()=>n(void 0),onRefresh:()=>w(!0)}):null]})}var rp=()=>a(12933);function lp(e){var t;let{spaceStore:a,organizationId:s,onDismiss:n}=e;const o=(0,S().K8)((()=>a.getName()),[a]),{state:r}=(0,pu().j)(),l=(null===(t=r.value)||void 0===t||null===(t=t.membersForSpace[a.id])||void 0===t?void 0:t.length)||0,d=(0,S().K8)((()=>(0,i.jsx)(L().B,{disabled:!0,icon:a.getIcon(),defaultIcon:(0,f().V)(),isEmptyPage:!1,size:ia().WK})),[a]),c=(0,S().K8)((()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v().sA,{id:"organization.general.workspace",defaultMessage:"Workspace"}),(0,i.jsx)(P().A,{style:{margin:"0 2px"}}),(0,i.jsx)(ge().Qq,{memberCount:l})]})),[l]);return(0,i.jsx)(ia().iv,{isOpen:!0,sidebarProps:{sidebarItemsTitle:(0,i.jsx)(v().sA,{id:"organization.workspaceModal.sidebarItemTitle",defaultMessage:"Workspace settings"}),sidebarTitleIcon:d,sidebarTitle:o,sidebarByline:c,hideSeparator:!0,bottomEntitySection:(0,i.jsx)(rp().Ir,{organizationId:s}),renderTooltip:()=>(0,i.jsx)(rp().uL,{})},tabRenderer:Yf,tabNames:x().yp,tabAccessor:Kf,defaultTab:"general",onDismiss:n,sceneProps:{spaceStore:a,organizationId:s,onCloseModal:n}})}const dp="space",cp=(0,v().YK)({workspace:{id:"organizationManageWorkspacesTable.spaceColumn.sortName",defaultMessage:"Workspace"},members:{id:"organizationManageWorkspacesTable.membersColumn.header",defaultMessage:"Members"},guests:{id:"organizationManageWorkspacesTable.guestsColumn.header",defaultMessage:"Guests"}});function up(e,t){return{id:"owners",headerTitle:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesTable.ownersColumn.header",defaultMessage:"Workspace owners"}),renderCell:a=>a.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{}):(0,i.jsx)(ce().t,{users:e.filter((e=>a.owners.includes(e.id))),totalMemberCount:a.owners.length,showTooltip:!0,isLoading:t}),widthData:{widthPercent:33,minWidth:140},sortable:!1}}const gp={id:"members",headerTitle:(0,i.jsx)(v().sA,{...cp.members}),renderCell:e=>e.type===Zt().T.Loading||void 0===e.memberCount?(0,i.jsx)(Lt().mf,{}):(0,i.jsx)(D().D,{colorName:"secondary",children:(0,i.jsx)(v().sA,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"organizationManageWorkspacesTable.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:33,minWidth:140},sortable:!1},mp={id:"guests",headerTitle:(0,i.jsx)(v().sA,{...cp.guests}),renderCell:e=>e.type===Zt().T.Loading||void 0===e.guestCount?(0,i.jsx)(Lt().mf,{}):(0,i.jsx)(D().D,{colorName:"secondary",children:(0,i.jsx)(ge().h6,{guestCount:e.guestCount})}),widthData:{widthPercent:33,minWidth:140},sortable:!1},pp=[{id:dp,name:k().A.formatMessage(cp.workspace),type:"title"},{id:gp.id,name:k().A.formatMessage(cp.members),type:"number"},{id:mp.id,name:k().A.formatMessage(cp.guests),type:"number"}];function hp(e){let{organizationId:t}=e;const a=(0,y().v3)(),{availableOrganizationFeatures:n,refreshOrganization:o}=(0,s.useContext)(R().D),r=n.has_access_to_domain_claim,l=(0,_().X)("organization_console_ga_enabled"),d=(0,Gt().A)(),c=(0,Ts().l)(),{workspaceOwnerIdsBySpaceId:u,loading:g}=function(e){let{organizationId:t}=e;const a=(0,y().v3)(),[{status:s,error:n,value:o}]=(0,tt().Yb)((async()=>{if(!t)return{userIdsBySpaceId:{}};const e=await M().callApi({eventName:"getWorkspaceOwnersInOrganization",environment:a,data:{organizationId:t}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,Ee().HB)(e)}),[a,t]);return{workspaceOwnerIdsBySpaceId:(null==o?void 0:o.userIdsBySpaceId)??Dm,loading:"pending"===s||"idle"===s,error:n}}({organizationId:t}),m=(0,S().K8)((()=>{const e=new Set(Object.values(u).flat());return Array.from(e).map((e=>new(vt().L)(a,{table:w().oo,id:e})))}),[a,u]),p=s.useMemo((()=>{return[(e=c.length,{id:dp,headerTitle:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesTable.spaceColumn.header",defaultMessage:"Workspaces ({numWorkspaces})",values:{numWorkspaces:e}}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{}):(0,i.jsx)(Lt().s7,{title:e.spaceName,icon:(0,i.jsx)(L().B,{disabled:!0,icon:e.spaceIcon,isEmptyPage:!1,title:e.spaceName,size:Na().p8,isLarge:!0}),iconSize:Na().p8,iconMargin:Lt().Ji,summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:`calc(100% - ${Et().Gr}px)`}}),widthData:{width:350,maxWidth:350},sortable:!1}),up(m,g),gp,mp];var e}),[m,c.length,g]),h=p.map((e=>({...e,headerStyle:d.tableHeader,rowStyle:d.tableRow}))),x=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:p,theme:e,containerMarginTop:0})),[p]),b=qa(),{spaceUsers:C}=(0,E().$)(c),{emailDomainsBySpace:I,allEmailDomains:T,isLoadingEmailDomains:k}=function(e,t){const a=(0,s.useMemo)((()=>t.map((e=>e.id))),[t]),n=(0,y().v3)(),[{value:o,status:i}]=(0,tt().Yb)((async()=>{if(0===a.length)return;const t=await M().callApi({eventName:"getWorkspaceCreatorEmailDomainsForOrg",environment:n,data:{organizationId:e,spaceIds:a}});return"success"===t.type?{emailDomainMap:t.data.emailDomainMap,emailDomains:[...new Set(Object.values(t.data.emailDomainMap).filter((e=>void 0!==e)))]}:void 0}),[n,e,a]);return{isLoadingEmailDomains:"pending"===i||"idle"===i,emailDomainsBySpace:null==o?void 0:o.emailDomainMap,allEmailDomains:null==o?void 0:o.emailDomains}}(t,c),z=(0,S().K8)((()=>0===c.length||k||c.some((e=>!e.isReady()))||m.some((e=>!e.isReady()))),[c,m,k]),D=(0,S().K8)((()=>c.map((e=>{const t=null==I?void 0:I[e.id],a=null==C?void 0:C[e.id];let s,n;if(a){s=a.filter(A().QE).filter((e=>!e.isTeamGuest&&e.isPageGuest)).length,n=a.filter((e=>(0,A().c7)(e))).length}return{type:Zt().T.OrganizationWorkspace,spaceName:e.getName()||"",spaceIcon:e.getIcon(),emailDomain:t||"",owners:u[e.id]||[],memberCount:n,guestCount:s,id:e.id,isClickable:!0}}))),[I,c,C,u]),{filters:P,updateFilters:N,query:B,setQuery:O,paginatedRows:U,appliedSorts:F,setAppliedSorts:H,loadNextPage:V,loadPrevPage:q,hasNextPage:K,hasPrevPage:Y,currentPage:Q}=zm(D,t),$=z?(0,Zt().n)():U,X=(0,s.useMemo)((()=>U.map((e=>e.id))),[U]),{selectedIds:Z,handleToggleId:J,handleSelectAllIds:ee,handleUnselectAllIds:te}=Ut({allPossibleIds:X}),ae=Do({spaceStores:c}),[se,ne]=(0,s.useState)(),[oe,ie]=(0,s.useState)(),[re,le]=(0,s.useState)(!1);const de=(0,S().K8)((()=>{if(se&&"viewWorkspace"===(null==se?void 0:se.type))return c.find((e=>e.id===se.spaceId))}),[se,c]),ce=oe??F??[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:b.tableHeader,children:[(0,i.jsxs)("div",{style:b.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:Z.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(Fa,{itemsSelectedCount:Z.length}),onClick:te}),(0,i.jsx)(Ua,{disabled:Z.length===D.length,disabledTooltipText:(0,i.jsx)(v().sA,{id:"manageWorkspacesTable.multiselect.removeAllWorkspacesTooltip",defaultMessage:"You must have at least one workspace in your organization"}),icon:Im().U,iconSize:14,title:(0,i.jsx)(v().sA,{id:"manageWorkspacesTable.multiselect.removeWorkspace",defaultMessage:"Remove workspace"}),onClick:()=>ne({type:"removeWorkspace",spaceIds:Z})})]}),(0,i.jsx)(Fn().A,{children:(0,i.jsx)(Wa().e,{sortProperties:pp,isMenuOpen:re,setIsMenuOpen:le,onApply:e=>{le(!1),H(e),ie(void 0)},currentSorts:ce})}),ce.length>0?(0,i.jsx)(Un().he,{}):null,(0,i.jsx)(Uo,{selectedSpaceIds:P.spaceIds||[],setSelectedSpaceIds:e=>N({spaceIds:e}),spaceData:ae}),(0,i.jsx)(Qs,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesTable.emailDomainsFilter.pillTitle",defaultMessage:"Verified email domain"}),emailDomains:T||[],selectedEmailDomains:P.emailDomains||[],setSelectedEmailDomains:e=>{N({emailDomains:e})}}),(0,i.jsx)(Eo,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesTable.ownersFilter.pillTitle",defaultMessage:"Workspace owners"}),pillIcon:ln,userIds:u?[...new Set(Object.values(u).flat())]:[],selectedUsers:P.owners||[],setSelectedUsers:e=>{N({owners:e})}})]}),(0,i.jsxs)("div",{style:b.rightContent,children:[(0,i.jsx)(Va().x,{appliedSorts:F,openSortPillMenu:e=>{e&&ie([{propertyId:e,direction:"ascending"}]),le(!0)},sortProperties:pp}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:B,setQueryFilter:O}),(0,i.jsx)(G().A,{renderTooltip:()=>(0,i.jsx)(v().sA,{defaultMessage:"Coming soon",id:"manageWorkspacesTable.comingSoon"}),disableTooltip:l,render:e=>r?(0,i.jsx)(W().A,{disabled:!l,onClick:()=>ne({type:"addWorkspaces"}),...e,children:(0,i.jsx)(v().sA,{defaultMessage:"Add workspace",id:"manageWorkspacesTable.addWorkspaceButton"})}):null})]})]}),"addWorkspaces"===(null==se?void 0:se.type)?(0,i.jsx)(np,{onDismiss:()=>ne(void 0),organizationId:t}):null,"viewWorkspace"===(null==se?void 0:se.type)&&de?(0,i.jsx)(lp,{spaceStore:de,onDismiss:()=>ne(void 0),organizationId:t}):null,"removeWorkspace"===(null==se?void 0:se.type)?(0,i.jsx)(ct,{spaceIds:se.spaceIds,organizationId:t,onCancel:()=>{ne(void 0)},onSubmit:()=>{ne(void 0),te()},refetchData:async()=>await o()}):null,(0,i.jsx)(Et().WE,{hideHeaderRowPadding:!0,columnRenderInfo:h,rows:$,loadMoreMethod:{type:"pages",onLoadNext:V,onLoadPrevious:q,hasNextPage:K,hasPrevPage:Y,currentPage:Q},renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:f().V,title:(0,i.jsx)(v().sA,{id:"manageWorkspacesTable.empty",defaultMessage:"No workspaces found"}),byline:(0,i.jsx)(v().sA,{id:"manageWorkspacesTable.empty.byline",defaultMessage:"There are no workspaces that match this query"})}),styles:x,showRowBorders:!0,onRowClick:function(e){e.type!==Zt().T.Loading&&e.isClickable&&ne({type:"viewWorkspace",spaceId:e.id})},multiselect:{header:{isDisabled:!1,isSelected:U.length>0&&Z.length===U.length,onClick:()=>{Z.length===U.length?te():ee()}},row:{getDisabledState:()=>!1,getSelectedState:e=>Z.includes(e.id),onClick:e=>{J(e.id)}}},allowHorizontalScroll:!0,extendToFullScreen:Xt().e})]})}function fp(e){let{organizationStore:t}=e;const a=(0,y().v3)(),s=(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesSubTab.title",defaultMessage:"Manage workspaces"});return(0,i.jsx)(cd().D,{breadcrumbs:[{message:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesSubTab.breadcrumb.goBack",defaultMessage:"General"}),onClick:()=>{(0,gd().i)({environment:a,from:{tabRoute:x().Vo,properties:{subtab:"workspaces"}},organizationId:t.id,tabRoute:x().Vo})}},{message:s}],children:(0,i.jsxs)(El().t,{children:[(0,i.jsx)(Ha()._,{title:s,byline:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesSubTab.description",defaultMessage:"View and manage all workspaces associated to this organization"})}),(0,i.jsx)(hp,{organizationId:t.id})]})})}function xp(e){const{samlConfig:t,updateCreateAccount:a,loading:s}=e,n=(0,v().tz)(),o=(0,y().v3)();return(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.automaticAccountCreation.title",defaultMessage:"Automatic account creation"}),badge:(0,i.jsx)(ds().A,{icon:Mr().questionMarkCircleIcon,ariaLabel:n.formatMessage({id:"organization.general.saml.settings.automaticAccountCreation.iconButton.ariaLabel",defaultMessage:"Learn more"}),onClick:()=>jm().f({environment:o,url:(0,he().xS)("guides.samlJIT")})}),byline:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.automaticAccountCreation.byline",defaultMessage:"Automatically create accounts for new SAML SSO users"}),item:(0,i.jsx)(we().A,{on:Boolean(null==t?void 0:t.createAccount),onClick:async function(){t&&await a(!t.createAccount)},disabled:!t||s})})}function vp(e){const{buttonTitle:t,buttonOnClick:a,buttonDisabled:s,...n}=e,o=(0,j().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",width:"100%",gap:12}})),[]);return(0,i.jsxs)("div",{style:o.container,children:[(0,i.jsx)(ne().p,{isBlue:!0,onClick:a,disabled:s,disabledFeedback:s,children:t}),(0,i.jsx)(we().A,{...n})]})}var bp=()=>a(633965),yp=function(e){return e.UpdateConfiguration="update-configuration",e.UpdateAndEnableConfiguration="update-and-enable-configuration",e}(yp||{});function Sp(e){const{samlConfig:t,onUpdateSamlStatus:a,onUpdateSamlMetadataUrl:n,onUpdateSamlMetadataXml:o,loading:r}=e,[l,d]=(0,s.useState)(),c=!!t&&("disabled"!==t.status&&"unconfigured"!==t.status);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.enableSamlSso.title",defaultMessage:"Enable SAML SSO"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.enableSamlSso.byline",defaultMessage:"Allow members to log in with SAML SSO using a verified domain"}),item:(0,i.jsx)(vp,{buttonTitle:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.enableSamlSso.configure.button",defaultMessage:"Configure"}),buttonOnClick:()=>d(yp.UpdateConfiguration),buttonDisabled:!t||r,on:c,onClick:async function(){if(!t)return;const{status:e,idpMetadata:s,idpMetadataUrl:n}=t,o=n||s;switch(e){case"disabled":o?await a("configured"):d(yp.UpdateAndEnableConfiguration);break;case"unconfigured":d(yp.UpdateAndEnableConfiguration);break;case"configured":case"enforced":await a("disabled");break;case"enforced_for_domain":break;default:(0,Ee().HB)(e)}},disabled:!t||r})}),l===yp.UpdateConfiguration?(0,i.jsx)(bp().N,{samlConfig:t,loading:r,onSave:async function(e){const{metadataUrl:t,metadataXml:a}=e;let s=!1;t?s=await n(t):a&&(s=await o(a)),s&&d(void 0)},onDismiss:()=>d(void 0)}):null,l===yp.UpdateAndEnableConfiguration?(0,i.jsx)(bp().N,{samlConfig:t,loading:r,onSave:async function(e){const{metadataUrl:t,metadataXml:a}=e;let s=!1;t?s=await n(t,!0):a&&(s=await o(a,!0)),s&&d(void 0)},onDismiss:()=>d(void 0),saveButtonText:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.configure.modal.primaryAction.saveAndEnable",defaultMessage:"Save & enable"})}):null]})}function jp(e){const{samlConfig:t,onUpdateSamlStatus:a,loading:s,isEnabled:n}=e,o=(0,j().IS)((e=>({button:{border:`1px solid ${e.outlineButtonBorder}`,...Xc().W}})),[]),r="enforced"===(null==t?void 0:t.status)?"enforced":"enforced_for_domain"===(null==t?void 0:t.status)?"enforced_for_domain":"not_enforced",l=[{key:"enforced",label:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.option.enforced",defaultMessage:"Only SAML SSO"})},{key:"not_enforced",label:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.option.notEnforced",defaultMessage:"Any method"})}];return"enforced_for_domain"===r?(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.title",defaultMessage:"Login method"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.byline",defaultMessage:"Customize login methods for SAML-enabled workspaces. Owners retain password access"}),item:(0,i.jsx)(V().A,{size:"md",disabled:!0,disabledFeedback:!0,children:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.option.enforcedForDomain",defaultMessage:"Enforced for domain"})})}):(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.title",defaultMessage:"Login method"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.byline",defaultMessage:"Customize login methods for SAML-enabled workspaces. Owners retain password access"}),item:(0,i.jsx)($c().m,{isMobile:!1,disabled:!t||s||!n,type:"dropdown",placementToOrigin:$a().W.Bottom,alignmentToOrigin:$a().C.End,currentOption:r,options:l,onSelectOption:async function(e){"enforced"===e?await a("enforced"):"enforced_for_domain"===e?await a("enforced_for_domain"):await a("configured")},buttonStyle:o.button})})}function wp(){const{samlConfig:e,updateSamlConfig:t,loading:a,isEnabled:s}=Gm();async function n(a){return!!e&&await t(e.id,{status:a})}return(0,i.jsx)(Ae().c,{items:[(0,i.jsx)(Sp,{samlConfig:e,onUpdateSamlStatus:n,onUpdateSamlMetadataUrl:async function(a,s){return!!e&&await t(e.id,{idpMetadataUrl:a,status:s?"configured":void 0})},onUpdateSamlMetadataXml:async function(a,s){return!!e&&await t(e.id,{idpMetadata:a,status:s?"configured":void 0})},loading:a},"enable-saml-sso"),(0,i.jsx)(jp,{samlConfig:e,onUpdateSamlStatus:n,loading:a,isEnabled:s},"login-method"),(0,i.jsx)(xp,{samlConfig:e,updateCreateAccount:async function(a){return!!e&&await t(e.id,{createAccount:a})},loading:a},"auto-account-creation")]})}a(107652);var Ap=()=>a(157111);function Mp(e){let{organizationStore:t,userStore:a,spaceId:n,onSubmit:o,onDismiss:r,onRefresh:l}=e;const d=(0,y().v3)(),c=(0,v().tz)(),u=oa({spaceId:n}),{visibleUsers:g}=(0,E().d)(n),{userData:m}=Vi({userStore:a,organizationStore:t}),p=(0,S().K8)((()=>null==u?void 0:u.getName()),[u]),h=(0,S().K8)((()=>{var e;return n?null===(e=m.userSpaceAccessMap.get(n))||void 0===e?void 0:e.role:void 0}),[m,n]),f=(0,S().K8)((()=>{var e;if(!u)return;const t=g.filter((e=>(0,A().c7)(e))).length;return{id:u.id,name:u.getName()??"",icon:null===(e=u.getIcon())||void 0===e?void 0:e.icon,subscriptionTier:u.getSubscriptionTier(),memberCount:t}}),[u,g]),x=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},container:{width:520},content:{width:"100%",display:"flex",flexDirection:"column",gap:16}})),[]);async function b(){o(),await async function(){const e=await M().callApi({eventName:"bulkAddUsersToOrganizationSpaces",environment:d,data:{organizationId:t.id,existingUserIds:[a.id],newUserEmails:[],spaceIds:[n],role:"owner"}});if("failed"===e.type)return void C().f1((0,T().Hu)(c,e));const s=new(z().SL)(d,{id:n,table:"space"});try{await(0,Ap().H)({environment:d,spaceStore:s,userStore:a})}catch(o){return void C().f1(c.formatMessage(Cp.genericCreationError))}lt().D6({label:c.formatMessage(Cp.successCreationMessage)})}(),await l(),r()}const[w,I]=(0,s.useState)(!1);return(0,i.jsx)(q().s,{isOpen:!0,onDismiss:r,render:()=>(0,i.jsx)(H().tf,{header:(0,i.jsx)(Y().rQ,{icon:(0,Vm().arrowInCircleUpIcon)(x.icon),title:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.title",defaultMessage:"Add new SCIM token"}),byline:(0,i.jsx)("div",{style:x.container,children:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.byline",defaultMessage:"This will generate a new SCIM token for this workspace."})})}),footer:(0,i.jsx)(Y().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.button.primary",defaultMessage:"Create SCIM token"}),primaryAction:async()=>{I(!0),await b(),I(!1)},primaryDisabled:w,secondaryText:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:r}),children:(0,i.jsxs)("div",{style:x.content,children:["editor"!==h?(0,i.jsx)(Gr().l,{iconGroup:Wr().Z,display:"inline",tint:"gray",label:p?(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.workspaceOwnerWarning.label.withWorkspaceName    ",defaultMessage:"You are not already a workspace owner of {workspaceName}.",values:{workspaceName:p}}):(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.workspaceOwnerWarning.label",defaultMessage:"You are not already a workspace owner."}),description:p?(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.workspaceOwnerWarning.description.withWorkspaceName",defaultMessage:"When creating a new SCIM token, you will be added as a workspace owner of <b>{workspaceName}</b>.",values:{workspaceName:p,b:e=>(0,i.jsx)("b",{children:e})}}):(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.workspaceOwnerWarning.description",defaultMessage:"When creating a new SCIM token, you will be added as a workspace owner of this workspace."})}):null,f?(0,i.jsx)(Ym,{spaces:[f]}):null]})})})}const Cp=(0,v().YK)({genericCreationError:{id:"organizationScimSubTab.genericCreationError",defaultMessage:"Failed to create SCIM token"},successCreationMessage:{id:"organizationScimSubTab.successCreationMessage",defaultMessage:"SCIM token created successfully"}}),Ip={viewBox:"0 0 16 16",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M8 3.8a.825.825 0 1 0 0 1.65.825.825 0 0 0 0-1.65"}),(0,i.jsx)("path",{d:"M8 1.375a4 4 0 0 0-2.125 7.39v3.922c0 .18.078.352.213.47l1.5 1.313a.625.625 0 0 0 .824 0l1.5-1.312a.625.625 0 0 0 .063-.877l-.777-.906.777-.906a.63.63 0 0 0 .15-.406V8.764A4 4 0 0 0 8 1.374m-2.75 4a2.75 2.75 0 1 1 3.972 2.464.63.63 0 0 0-.347.56V9.83L7.9 10.968c-.2.234-.2.58 0 .814l.723.842L8 13.17l-.875-.765V8.399a.63.63 0 0 0-.347-.56A2.75 2.75 0 0 1 5.25 5.375"})]})},Tp=(0,o().wt)("keySmall",Ip),kp={viewBox:"0 0 16 16",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M12.848 2.8a3.145 3.145 0 0 0-4.448 0L6.918 4.283a.625.625 0 0 0 .884.883l1.482-1.482c.74-.74 1.94-.74 2.68 0l.294.294c.74.74.74 1.94 0 2.68l-1.482 1.483a.625.625 0 1 0 .884.884l1.482-1.482a3.145 3.145 0 0 0 0-4.449z"}),(0,i.jsx)("path",{d:"M10.472 5.47a.625.625 0 0 0-.884 0L5.229 9.83a.625.625 0 1 0 .884.883l4.359-4.359a.625.625 0 0 0 0-.883"}),(0,i.jsx)("path",{d:"M5.167 6.918a.625.625 0 0 0-.884 0L2.8 8.4a3.146 3.146 0 0 0 0 4.448l.294.294a3.145 3.145 0 0 0 4.449 0l1.482-1.482a.625.625 0 0 0-.884-.884L6.66 12.258c-.74.74-1.94.74-2.68 0l-.295-.294c-.74-.74-.74-1.94 0-2.68L5.167 7.8a.625.625 0 0 0 0-.883"})]})},_p=(0,o().wt)("linkSmall",kp),zp={viewBox:"0 0 16 16",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M5.066 4.914a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076m2.162 0a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076M5.066 6.458a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077m2.162 0a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077M5.066 8.002a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077m2.162 0a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077m4.169.618a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076m0 1.544a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076"}),(0,i.jsx)("path",{d:"M4.063 2.977a1.934 1.934 0 0 0-1.935 1.935V12.4c0 .343.279.622.622.622h10.5a.62.62 0 0 0 .622-.622V8.772a1.934 1.934 0 0 0-1.934-1.934h-1.772V4.912a1.934 1.934 0 0 0-1.934-1.935zm-.691 1.935c0-.382.31-.691.69-.691h4.17c.381 0 .69.31.69.69v6.868H7.895v-1.54a.513.513 0 0 0-.512-.513H4.912a.513.513 0 0 0-.513.513v1.54H3.372zm6.794 6.867V8.08h1.772c.381 0 .69.31.69.691v3.007zm-4.742 0V10.75H6.87v1.028z"})]})},Dp=(0,o().wt)("teamspaceSmall",zp);var Pp=()=>a(740190);function Np(e){let{botId:t,spaceId:a,onDismiss:s,onRefresh:n}=e;const o=(0,y().v3)(),r=(0,v().tz)();return(0,i.jsx)(Pp().S,{onSubmit:async function(){await async function(){const e=await M().callApi({eventName:"deleteBotInOrganizationSpace",environment:o,data:{botId:t,spaceId:a}});"failed"!==e.type?lt().D6({label:r.formatMessage(Rp.successDeletionMessage)}):C().f1((0,T().Hu)(r,e))}(),await n(),s()},onCancel:s,headerText:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.deleteBotModal.action.innerModal.title",defaultMessage:"Are you sure you want to delete this bot?"}),bylineText:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.deleteBotModal.action.innerModal.byline",defaultMessage:"SCIM configurations using this token will stop working.{br}A new token will be required.",values:{br:(0,i.jsx)("br",{})}}),submitText:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.deleteBotModal.action.innerModal.button.primary",defaultMessage:"Revoke token"})})}const Rp=(0,v().YK)({successDeletionMessage:{id:"organizationScimSubTab.successDeletionMessage",defaultMessage:"SCIM token deleted successfully"}}),Bp=[{id:"user",headerTitle:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.userColumn.title",defaultMessage:"User"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(ga,{}):e.legacy?(0,i.jsx)(ua,{userId:Ul().rN,rightContent:(0,i.jsx)(Op,{scimBotId:e.id,spaceId:e.spaceId,setSelectedScimBotId:e.setSelectedScimBotId,setOpenedModal:e.setOpenedModal,organizationId:e.organizationId}),overrides:{name:"Deactivated user"}}):(0,i.jsx)(ua,{useThinTitle:!1,showEmailByline:!0,isNotMultiSelectable:!0,userId:e.ownerUserId,badge:e.ownedByCurrentUser?(0,i.jsx)(Vt().A,{style:{margin:0},content:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.userColumn.you",defaultMessage:"You"})}):void 0,rightContent:(0,i.jsx)(Op,{scimBotId:e.id,spaceId:e.spaceId,organizationId:e.organizationId,setSelectedScimBotId:e.setSelectedScimBotId,setOpenedModal:e.setOpenedModal})}),widthData:{width:275,maxWidth:275},sortable:!1},{id:"role",headerTitle:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.roleColumn.title",defaultMessage:"Highest role"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{}):e.legacy?(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.roleColumn.role.none",defaultMessage:"None"})}):e.isOrganizationOwner?(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.roleColumn.role.organizationOwner",defaultMessage:"Organization owner"})}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.roleColumn.role.workspaceOwner",defaultMessage:"Workspace owner"})}),widthData:{widthPercent:33,minWidth:100},sortable:!1},{id:"createdAt",headerTitle:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.createdAtColumn.title",defaultMessage:"Created at"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)($o().h,{}):(0,i.jsx)($o().d,{useSecondaryColorTitle:!0,dateTs:e.createdAt}),widthData:{widthPercent:33,minWidth:100},sortable:!1},{id:"token",headerTitle:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.tokenColumn.title",defaultMessage:"Token"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,title:"••••••••••••••••••••••"}),widthData:{widthPercent:33,minWidth:100},sortable:!1}];var Ep=function(e){return e.AddToken="add-token",e.RevokeToken="revoke-token",e.RegenerateToken="regenerate-token",e}(Ep||{});function Lp(e){const{organizationStore:t,spaceId:a,scimBots:n,loading:o,error:r,onRefresh:l}=e,[d,c]=(0,s.useState)(),[u,g]=(0,s.useState)(),m=(0,S().K8)((()=>{var e;return null===(e=ve().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),p=(0,Gt().A)(),h=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:Bp,theme:e,containerMarginTop:0})),[]),f=(0,S().K8)((()=>n.map((e=>e.isLegacy?{type:Zt().T.OrganizationSpaceScimBot,id:e.botId,createdAt:e.createdAt,spaceId:a,organizationId:t.id,setSelectedScimBotId:c,setOpenedModal:g,legacy:!0,isClickable:!1}:{type:Zt().T.OrganizationSpaceScimBot,id:e.botId,createdAt:e.createdAt,spaceId:a,organizationId:t.id,setSelectedScimBotId:c,setOpenedModal:g,ownerUserId:e.createdById,ownedByCurrentUser:e.createdById===m,isOrganizationOwner:t.getOwnerIds().includes(e.createdById),legacy:!1,isClickable:!1}))),[n,a,m,t]),x=Bp.map((e=>({...e,headerStyle:p.tableHeader,rowStyle:p.tableRow}))),b=o?(0,Zt().n)(3):f;return!o&&r?(0,i.jsx)($t,{error:r,runNewSearch:l}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Et().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:x,rows:b,styles:h,renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:Tp,title:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.empty",defaultMessage:"No SCIM tokens found"}),byline:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.empty.byline",defaultMessage:"There are no SCIM tokens that match this query"})}),extendToFullScreen:Xt().e}),u===Ep.RevokeToken&&d?(0,i.jsx)(Np,{botId:d,spaceId:a,onDismiss:()=>g(void 0),onRefresh:l}):null]})}function Op(e){const{scimBotId:t,spaceId:s,setSelectedScimBotId:n,setOpenedModal:o,organizationId:r}=e,l=(0,y().v3)(),d=(0,v().tz)(),c=(0,j().IS)((()=>({icon:{height:20,width:20,fill:"currentColor"}})),[]);async function u(e){const t=await Sd().R.clipboardActions.load();await t.copyString({stringValue:e,environment:l,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard}),lt().D6({label:d.formatMessage(js().DZ.toastSuccessfulCopy)})}const g=[{key:"copy-token",type:"action",icon:Tp(c.icon),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.copyToken",defaultMessage:"Copy SCIM token"}),action:()=>{!async function(){const e=await M().callApi({eventName:"getScimValueTokenForOrganizationSpace",environment:l,data:{spaceId:s,scimBotId:t},headers:(0,ea().WS)({cellId:void 0,spaceId:s})});if("failed"===e.type)return void C().f1((0,T().Hu)(d,e));u(e.data.token),(0,I().u4)({environment:l,event:{eventName:"org_console_general_read_scim_token",eventProperties:{organization_id:r,space_id:s,bot_id:t}}})}()}},{key:"copy-scim-base-url",type:"action",icon:_p(c.icon),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.copyScimBaseUrl",defaultMessage:"Copy SCIM base URL"}),action:()=>{u(Qt().A.domainBaseUrl+De().JZ.scimApiBasePath)}},{key:"copy-scim-space-id",type:"action",icon:Dp(c.icon),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.copyScimSpaceId",defaultMessage:"Copy workspace ID"}),action:()=>{u(s)}},{key:"divider",type:"divider"},{key:"revoke-token",type:"action",icon:(0,a(589215).trashSmallIcon)(c.icon),isDestructive:!0,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.revokeToken",defaultMessage:"Revoke token"}),action:()=>{o(Ep.RevokeToken),n(t)}}];return(0,i.jsx)(Lt().bd,{items:g})}const Up=["organization_owner","owner"],Fp=xn.filter((e=>Up.includes(e.value)));function Hp(e){let{organizationStore:t,subtab:a,queryParams:n}=e;const o=(0,y().v3)(),r=(0,_().X)("organization_console_ga_enabled"),l=(0,s.useMemo)((()=>n[Hf]),[n]);if(nc({organizationId:t.id,spaceId:l,tabRoute:x().Vo,subtab:a,queryParams:n}),!r)return(0,i.jsx)(v().sA,{...qp.gaNotEnabledError});const d=(0,i.jsx)(v().sA,{...qp.title});return(0,i.jsx)(cd().D,{breadcrumbs:[{message:(0,i.jsx)(v().sA,{...qp.goBack}),onClick:()=>{(0,gd().i)({environment:o,from:{tabRoute:x().Vo,properties:{subtab:x().al.Scim}},organizationId:t.id,tabRoute:x().Vo})}},{message:d}],children:(0,i.jsxs)(El().t,{children:[(0,i.jsx)(Ha()._,{title:d,byline:(0,i.jsx)(v().sA,{...qp.description})}),(0,i.jsx)(Wp,{organizationStore:t,spaceId:l})]})})}var Vp=function(e){return e.AddToken="add-token",e}(Vp||{});function Wp(e){const{organizationStore:t,spaceId:a}=e,n=(0,Hn().F)(),[o,r]=(0,s.useState)({}),[l,d]=(0,s.useState)(void 0),[c,u]=(0,s.useState)(!1),{scimBots:g,refresh:m,loading:p,error:h}=function(e){const t=(0,y().v3)(),[{status:a,value:s,error:n},o]=(0,tt().Yb)((async()=>{if(!e)return[];const a=await M().callApi({eventName:"getScimTokensForOrganizationSpace",environment:t,data:{spaceId:e},headers:(0,ea().WS)({cellId:void 0,spaceId:e})});if("success"===a.type)return a.data.scimBots;if("failed"===a.type)throw a.error;(0,Ee().HB)(a)}),[e,t]);return{loading:"pending"===a,error:n,scimBots:s??[],refresh:o}}(a),f=(0,S().K8)((()=>ve().default.state.currentUserStore),[]),b=!!p||g.some((e=>e.createdById===(null==f?void 0:f.id))),j=oa({spaceId:a}),w=!f||p||c||b,A=(0,S().K8)((()=>g.filter((e=>{if(!o.roles||0===o.roles.length)return!0;const a=t.getOwnerIds().includes(e.createdById)?"organization_owner":"owner";return o.roles.includes(a)}))),[g,o.roles,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:n.tableHeader,children:[(0,i.jsxs)("div",{style:n.leftContent,children:[(0,i.jsx)(Hd,{showAsPill:!0,organizationId:t.id,currentTabRoute:x().Vo,currentTabProperties:{subtab:x().al.Scim},selectedSpaceStore:j}),(0,i.jsx)(hn,{setUserRoles:e=>{(function(e){return e.every((e=>Up.includes(e)))})(e)&&r({...o,roles:e})},selectedUserRoles:o.roles||[],roles:Fp})]}),(0,i.jsx)("div",{style:n.rightContent,children:(0,i.jsx)(W().A,{disabled:w,onClick:()=>d(Vp.AddToken),children:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.button.addToken",defaultMessage:"Add token"})})})]}),(0,i.jsx)(Lp,{organizationStore:t,spaceId:a,loading:p,scimBots:A,error:h,onRefresh:async()=>{await m()}}),l===Vp.AddToken&&f?(0,i.jsx)(Mp,{organizationStore:t,userStore:f,spaceId:a,onSubmit:()=>u(!0),onDismiss:()=>{d(void 0),u(!1)},onRefresh:async()=>{await m()}}):null]})}const qp=(0,v().YK)({title:{id:"organizationScimSubTab.title",defaultMessage:"SCIM provisioning"},description:{id:"organizationScimSubTab.description",defaultMessage:"Seamlessly manage users and groups through your identity provider. Access SCIM tokens for each workspace below"},gaNotEnabledError:{id:"organizationScimSubTab.notEnabled",defaultMessage:"This feature is not available"},goBack:{id:"organizationScimSubTab.breadcrumb.goBack",defaultMessage:"General"}});var Gp=()=>a(381602);function Kp(){const e=(0,y().v3)(),{refreshOrganization:t}=(0,s.useContext)(R().D),a=(0,Ts().l)(),[n,o]=(0,s.useState)(!1),r=(0,S().K8)((()=>a.every((e=>e.getSettings().are_scim_invite_emails_suppressed))),[a]);return(0,i.jsx)(Ae().c,{items:[(0,i.jsx)(Gp().S,{isEnabled:r,onToggle:async function(){o(!0);const s=!r;await Km({spaceIds:a.map((e=>e.id)),fn:async t=>M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:e,data:{spaceId:t,spaceSettings:{are_scim_invite_emails_suppressed:s}}}),successMessage:(0,i.jsx)(v().sA,{id:"organization.general.scim.settings.suppressScimInviteEmails.success",defaultMessage:"Successfully updated SCIM invite emails setting for {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await t(!0),o(!1)},disabled:n},"suppress-scim-invite-emails")]})}function Yp(e){var t;let{organizationId:n,tabRoute:o,subtab:r,queryParams:l}=e;const d=(0,v().tz)(),c=(0,de().Z)(),u=(0,j().IS)((e=>({container:{display:"flex",gap:12,flexWrap:"wrap"},divider:{color:e.stroke.secondary},workspacesIcons:{display:"flex",height:24}})),[]),g=(0,y().v3)(),{state:m,loading:p}=(0,pu().j)(),h=(0,S().K8)((()=>m.value?m.value.sampleMemberIds.map((e=>new(vt().L)(g,{table:w().oo,id:e}))):[]),[g,m.value]),{scimBotCount:b,loading:A}=function(){const{spaceIds:e}=(0,s.useContext)(R().D),t=(0,y().v3)(),[{status:a,value:n}]=(0,tt().Yb)((async()=>(await Km({spaceIds:e,fn:async e=>M().callApi({eventName:"getScimTokensForOrganizationSpace",environment:t,data:{spaceId:e}})})).map((e=>"success"===(null==e?void 0:e.type)?e.data.scimBots.length:0)).reduce(((e,t)=>e+t),0)),[t,e]);return{loading:"pending"===a,didError:"rejected"===a,scimBotCount:n}}(),z=(null===(t=m.value)||void 0===t?void 0:t.memberCount)||0,B=(0,Ts().l)(),{domainVerifications:E}=(0,a(789874).J)({organizationId:n}),L=(0,S().K8)((()=>E?E.map((e=>(0,a(116944).W0)({id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,verifiedAt:e.verified_at,invalidatedAt:e.info.invalidated_at}))).filter((e=>{let{status:t}=e;return t===a(1051).A$.Pending})).length:0),[E]),{updateCacheWithRecordMap:O}=(0,s.useContext)(N().N),U=(0,_a().E)({organizationId:n}),F=(0,S().K8)((()=>null==U?void 0:U.getRawIcon()),[U]),H=(0,S().K8)((()=>(null==U?void 0:U.getName())||""),[U]),V=(0,S().K8)((()=>null==U?void 0:U.getEmailDomains().length),[U]),W=(0,_().X)("organization_console_ga_enabled"),[q,K]=(0,s.useState)();(0,s.useEffect)((()=>{K(H)}),[H]);const Y=(0,s.useMemo)((()=>r?function(e){switch(e){case x().al.Workspaces:return x().al.Workspaces;case x().al.EmailDomains:return x().al.EmailDomains;case x().al.Scim:return x().al.Scim;default:return x().al.Workspaces}}(r):void 0),[r]);const Q=()=>{(0,gd().i)({environment:g,from:{tabRoute:x().Vo},organizationId:n,tabRoute:x().Vo,properties:{subtab:x().al.Workspaces}})};return U?Y===x().al.Workspaces?(0,i.jsx)(fp,{organizationStore:U}):Y===x().al.EmailDomains?(0,i.jsx)(a(456456).CX,{organizationStore:U}):Y===x().al.Scim?(0,i.jsx)(Hp,{organizationStore:U,subtab:r,tabRoute:o,queryParams:l}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(J,{}),(0,i.jsxs)(ud,{children:[(0,i.jsx)(Z,{title:(0,i.jsx)(v().sA,{id:"organization.general.organization.title",defaultMessage:"Edit organization details"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.organization.byline",defaultMessage:"Edit this organization's name below. Changes will take effect immediately upon saving."}),bylineWidthOverride:"85%",icon:f().V,onSave:async function(){if(!U||q===H)return;const e=await M().callApi({eventName:"updateOrganization",environment:g,data:{organizationId:U.id,name:q}});"success"===e.type?(O(e),(0,I().u4)({environment:g,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:U.id,updated_fields:["name"]}}})):C().f1((0,T().Hu)(k().A.getIntl(),e))},onCancel:()=>{K(H)},onIconChange:async function(e){if(!U||!e)return;const t=await M().callApi({eventName:"updateOrganization",environment:g,data:{organizationId:U.id,icon:e}});"success"===t.type?(O(t),(0,I().u4)({environment:g,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:U.id,updated_fields:["icon"]}}})):C().f1((0,T().Hu)(k().A.getIntl(),t))},onNameChange:e=>K(e),entityName:H,localIconWithPointer:void 0===F?void 0:{pointer:U.pointer,icon:F},entityDescription:(0,i.jsxs)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:[(0,i.jsx)(v().sA,{id:"organization.general.orgMetadata",defaultMessage:"Enterprise plan"}),(0,i.jsx)(P().A,{style:{margin:"0 5px"}}),(0,i.jsx)(ge().Qq,{memberCount:z})]})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:u.container,children:[(0,i.jsx)(ue,{memberCount:z,sampleMemberUserStores:h,onClick:()=>{(0,gd().i)({environment:g,from:{tabRoute:x().Vo},organizationId:n,tabRoute:x().kr,properties:{subtab:"members"}})},isLoading:p||0===z}),(0,i.jsx)(ae().A,{headerText:(0,i.jsx)(v().sA,{id:"organization.general.workspaces.title",defaultMessage:"Workspaces"}),mainText:(0,i.jsx)(ge().Cx,{workspacesCount:B.length}),bottom:(0,i.jsx)("div",{style:u.workspacesIcons,children:(0,i.jsx)(ee().$,{spaceStores:B,isLoading:!1})}),onClick:Q})]}),(0,i.jsx)(Ir().A,{size:1,style:{marginTop:52},dividerColor:u.divider.color}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.general.configure.title",defaultMessage:"Manage organization"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(re,{title:(0,i.jsx)(v().sA,{id:"organization.general.manageWorkspaces.title",defaultMessage:"Manage workspaces"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.manageWorkspaces.subtitle",defaultMessage:"Add or remove workspaces from your organization"}),rightContent:0!==B.length&&(0,i.jsx)(ge().Cx,{workspacesCount:B.length}),onClick:Q}),W&&(0,i.jsx)(re,{title:(0,i.jsx)(v().sA,{id:"organization.general.manageEmailDomains.title",defaultMessage:"Manage email domains"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.manageEmailDomains.subtitle",defaultMessage:"Verify email domains to manage matching user accounts and workspaces"}),rightContent:V?(0,i.jsx)(ge().LL,{verifiedDomainsCount:V,pendingDomainsCount:L}):(0,i.jsx)(le().A,{style:c.shortShimmer}),onClick:()=>{(0,gd().i)({environment:g,from:{tabRoute:x().Vo},organizationId:n,tabRoute:x().Vo,properties:{subtab:x().al.EmailDomains}})}}),!W&&(0,i.jsx)(G().A,{renderTooltip:()=>(0,i.jsx)(v().sA,{id:"organization.general.tooltip",defaultMessage:"Coming soon"}),placement:$a().W.Right,render:e=>(0,i.jsx)(re,{disabled:!0,title:(0,i.jsx)(v().sA,{id:"organization.general.manageEmailDomains.title",defaultMessage:"Manage email domains"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.manageEmailDomains.subtitle",defaultMessage:"Verify email domains to manage matching user accounts and workspaces"}),onClick:()=>{},...e})})]})}),W?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.general.saml.title",defaultMessage:"SAML Single sign-on (SSO)"}),content:(0,i.jsx)(wp,{})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.general.scim.title",defaultMessage:"SCIM provisioning"}),content:(0,i.jsxs)(oe().VP,{gap:16,width:"100%",children:[(0,i.jsx)(Kp,{}),(0,i.jsx)(Ir().A,{size:1,dividerColor:u.divider.color}),(0,i.jsx)(re,{title:(0,i.jsx)(v().sA,{id:"organization.general.scimProvisioning.title",defaultMessage:"SCIM provisioning"}),badge:(0,i.jsx)(ds().A,{icon:Mr().questionMarkCircleIcon,ariaLabel:d.formatMessage({id:"organization.general.scimProvisioning.iconButton.ariaLabel",defaultMessage:"Learn more about SCIM provisioning"}),onClick:()=>jm().f({environment:g,url:(0,he().xS)("guides.scim")})}),byline:(0,i.jsx)(v().sA,{id:"organization.general.scimProvisioning.subtitle",defaultMessage:"Generate a token to configure SCIM"}),rightContent:A?(0,i.jsx)(le().A,{style:c.shortShimmer}):void 0!==b?(0,i.jsx)(ge().Ox,{scimTokensCount:b}):null,onClick:()=>{(0,gd().i)({environment:g,from:{tabRoute:x().Vo},organizationId:n,tabRoute:x().Vo,properties:{subtab:x().al.Scim}})}}),(0,i.jsx)(Gr().l,{display:"inline",iconGroup:a(915050).H,label:(0,i.jsx)(v().sA,{id:"organization.general.scimProvisioning.setupInformation.title",defaultMessage:"Setup information"}),tint:"gray",description:(0,i.jsxs)(oe().VP,{gap:12,paddingTop:16,children:[(0,i.jsxs)(oe().fI,{justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.general.scimProvisioning.setupInformation.samlId",defaultMessage:"SAML SSO Entity ID"})}),(0,i.jsx)(Qp,{text:(0,Sm().Hw)(Qt().A.domainBaseUrl),toastSuccessMessage:$p.entityIdSuccessfulCopy})]}),(0,i.jsx)(Ir().A,{size:1,dividerColor:u.divider.color}),(0,i.jsxs)(oe().fI,{justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.general.scimProvisioning.setupInformation.scimUrl",defaultMessage:"SCIM Base URL"})}),(0,i.jsx)(Qp,{text:Qt().A.domainBaseUrl+De().JZ.scimApiBasePath,toastSuccessMessage:$p.baseUrlSuccessfulCopy})]})]})})]})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.general.deleteOrganization.title",defaultMessage:"Organization settings"}),content:(0,i.jsx)(Mm,{organizationStore:U})})]}):null]})]})]}):null}function Qp(e){const{text:t,toastSuccessMessage:a}=e,s=(0,y().v3)(),n=(0,v().tz)();return(0,i.jsxs)(oe().fI,{justifyContent:"space-between",alignItems:"center",gap:8,children:[(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t}),(0,i.jsx)(js().lz,{isHovered:!0,onCopyClick:async function(e){e.stopPropagation();const o=await Sd().R.clipboardActions.load();await o.copyString({stringValue:t,environment:s,copiedMessage:o.clipboardMessages.copiedPropertyToClipboard}),lt().D6({label:n.formatMessage(a)})}})]})}const $p=(0,v().YK)({entityIdSuccessfulCopy:{defaultMessage:"Copied ID to clipboard",id:"organization.general.scimProvisioning.entityId.successfulCopy"},baseUrlSuccessfulCopy:{defaultMessage:"Copied URL to clipboard",id:"organization.general.scimProvisioning.baseUrl.successfulCopy"}});var Xp=()=>a(472980),Zp=()=>a(960087);function Jp(e){let{organizationStore:t}=e;const a=(0,y().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(N().N),o=(0,j().IS)((e=>({button:{border:`1px solid ${e.outlineButtonBorder}`,...Xc().W}})),[]),r=(0,s.useMemo)((()=>Object.entries(Xp().iI).map((e=>{let[t,a]=e;return{key:t,label:(0,i.jsx)(Ks().A,{children:(0,_c().OH)(0,a)})}}))),[]),l=(0,S().K8)((()=>{var e;return(0,Zp().k)(null===(e=t.getManagedUserSettings())||void 0===e?void 0:e.custom_session_duration)??Xp().DP}),[t]);return(0,i.jsx)($c().m,{isMobile:!1,disabled:!1,type:"dropdown",currentOption:l,options:r,onSelectOption:async function(e){var s;const o=(null===(s=t.getManagedUserSettings())||void 0===s?void 0:s.custom_session_duration)??Xp().iI[Xp().DP],r=Xp().iI[e];if(void 0===r)return;Rc().m4(a,{custom_session_duration_ms:o});const{accept:l}=await C().Gh({message:(0,i.jsx)(Ks().A,{style:C().xh.title,children:(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.message",defaultMessage:"Confirm change"})}),description:(0,i.jsxs)(Ks().A,{isMultiline:!0,isSecondaryColor:!0,children:[(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.description",defaultMessage:"You are about to change the session duration for all of your managed users from <b>{oldDuration}</b> to <b>{newDuration}.</b>",values:{oldDuration:(0,_c().OH)(0,o),newDuration:(0,_c().OH)(0,r),b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.jsx)("b",{children:t})}}}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.secondDescription",defaultMessage:"This may log some users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})]}),acceptLabel:(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.acceptLabel",defaultMessage:"Confirm change"}),cancelLabel:(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!l)return;Rc().JN(a,{new_session_duration_ms:r});const d=await M().callApi({eventName:"updateOrganization",environment:a,data:{organizationId:t.id,managedUserSettings:{customSessionDuration:(0,Zp().k)(r)}}});"success"===d.type?(n(d),(0,I().u4)({environment:a,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:t.id,updated_fields:["custom_session_duration"]}}})):C().f1((0,T().Hu)(k().A.getIntl(),d))},buttonStyle:o.button,placementToOrigin:$a().W.Bottom,alignmentToOrigin:$a().C.End})}function eh(e){let{organizationStore:t}=e;const a=(0,j().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]);return(0,i.jsxs)("div",{style:a.container,children:[(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.settings.actions.sessionDuration.title",defaultMessage:"Session duration"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.settings.actions.sessionDuration.byline",defaultMessage:"Set re-authentication interval for managed accounts"}),item:(0,i.jsx)(Jp,{organizationStore:t})}),(0,i.jsx)(Ir().A,{dividerColor:a.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.settings.actions.passwordManagement.title",defaultMessage:"Reset passwords for all users"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.settings.actions.passwordManagement.byline",defaultMessage:"Log out and force all managed users to reset their passwords on next login"}),item:(0,i.jsx)(Yc,{organizationStore:t,isRed:!0})}),(0,i.jsx)(Ir().A,{dividerColor:a.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.settings.actions.sessionManagement.title",defaultMessage:"Log out all users"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.settings.actions.sessionManagement.byline",defaultMessage:"Log out all managed users and require re-authentication"}),item:(0,i.jsx)(Vc,{organizationStore:t,isRed:!0})})]})}function th(e){const t=(0,y().v3)(),{updateCacheWithRecordMap:a}=(0,s.useContext)(N().N),n=(0,S().K8)((()=>e.getManagedUserSettings()),[e]),[o,i]=(0,s.useState)({prevent_profile_edits:!1,workspace_creation_enum:!1,prevent_members_joining_external_workspace:!1,prevent_granting_support_access:!1,disable_notion_mail:!1});return{prevent_profile_edits:{value:null==n?void 0:n.prevent_profile_edits,loading:o.prevent_profile_edits,toggle:async function(){i((e=>({...e,prevent_profile_edits:!0})));const s=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{preventProfileEdits:!(null!=n&&n.prevent_profile_edits)}}});"success"===s.type?(a(s),(0,I().u4)({environment:t,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:e.id,updated_fields:["prevent_profile_edits"]}}})):C().f1((0,T().Hu)(k().A.getIntl(),s)),i((e=>({...e,prevent_profile_edits:!1})))}},workspace_creation_enum:{value:null==n?void 0:n.workspace_creation_enum,loading:o.workspace_creation_enum,toggle:async function(){i((e=>({...e,workspace_creation_enum:!0})));const s="admins_only"===(null==n?void 0:n.workspace_creation_enum)?"unrestricted":"admins_only",o=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{workspaceCreationEnum:s}}});"success"===o.type?(a(o),(0,I().u4)({environment:t,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:e.id,updated_fields:["workspace_creation_enum"]}}})):C().f1((0,T().Hu)(k().A.getIntl(),o)),i((e=>({...e,workspace_creation_enum:!1})))}},prevent_members_joining_external_workspace:{value:null==n?void 0:n.prevent_members_joining_external_workspace,loading:o.prevent_members_joining_external_workspace,toggle:async function(){i((e=>({...e,prevent_members_joining_external_workspace:!0})));const s=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{preventMembersJoiningExternalWorkspace:!(null!=n&&n.prevent_members_joining_external_workspace)}}});"success"===s.type?(a(s),(0,I().u4)({environment:t,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:e.id,updated_fields:["prevent_members_joining_external_workspace"]}}})):C().f1((0,T().Hu)(k().A.getIntl(),s)),i((e=>({...e,prevent_members_joining_external_workspace:!1})))}},prevent_granting_support_access:{value:null==n?void 0:n.prevent_granting_support_access,loading:o.prevent_granting_support_access,toggle:async function(){i((e=>({...e,prevent_granting_support_access:!0})));const s=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{preventGrantingSupportAccess:!(null!=n&&n.prevent_granting_support_access)}}});"success"===s.type?(a(s),(0,I().u4)({environment:t,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:e.id,updated_fields:["prevent_granting_support_access"]}}})):C().f1((0,T().Hu)(k().A.getIntl(),s)),i((e=>({...e,prevent_granting_support_access:!1})))}},disable_notion_mail:{value:null==n?void 0:n.disable_notion_mail,loading:o.disable_notion_mail,toggle:async function(){i((e=>({...e,disable_notion_mail:!0})));const s=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{disableNotionMail:!(null!=n&&n.disable_notion_mail)}}});"success"===s.type?(a(s),(0,I().u4)({environment:t,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:e.id,updated_fields:["disable_notion_mail"]}}})):C().f1((0,T().Hu)(k().A.getIntl(),s)),i((e=>({...e,disable_notion_mail:!1})))}}}}function ah(e){let{organizationStore:t}=e;const a=th(t),s=(0,j().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]),n=(0,_().X)("enable_notion_mail_settings_toggle");return(0,i.jsxs)("div",{style:s.container,children:[(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.changeProfileInformation.title",defaultMessage:"Allow users to change profile information"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.changeProfileInformation.byline",defaultMessage:"Allow managed users to update their name, email, and profile photo"}),item:(0,i.jsx)(we().A,{on:!Boolean(a.prevent_profile_edits.value),onClick:a.prevent_profile_edits.toggle,disabled:a.prevent_profile_edits.loading})}),(0,i.jsx)(Ir().A,{dividerColor:s.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.createNewWorkspaces.title",defaultMessage:"Allow users to create new workspaces"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.createNewWorkspaces.byline",defaultMessage:"When on, any user can create workspaces. When off, only organization owners can."}),item:(0,i.jsx)(we().A,{on:"unrestricted"===a.workspace_creation_enum.value,onClick:a.workspace_creation_enum.toggle,disabled:a.workspace_creation_enum.loading})}),(0,i.jsx)(Ir().A,{dividerColor:s.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.joinExternalWorkspaces.title",defaultMessage:"Allow users to join external workspaces"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.joinExternalWorkspaces.byline",defaultMessage:"When on, all members can join external workspaces. When off, only organization owners can."}),item:(0,i.jsx)(we().A,{on:!Boolean(a.prevent_members_joining_external_workspace.value),onClick:a.prevent_members_joining_external_workspace.toggle,disabled:a.prevent_members_joining_external_workspace.loading})}),(0,i.jsx)(Ir().A,{dividerColor:s.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.grantSupportAccess.title",defaultMessage:"Allow users to grant support access to accounts"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.grantSupportAccess.byline",defaultMessage:"Allow Notion support to troubleshoot or recover content; access can be revoked anytime"}),item:(0,i.jsx)(we().A,{on:!Boolean(a.prevent_granting_support_access.value),onClick:a.prevent_granting_support_access.toggle,disabled:a.prevent_granting_support_access.loading})}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ir().A,{dividerColor:s.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.enableNotionMail.title",defaultMessage:"Enable Notion Mail"}),byline:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.enableNotionMail.byline",defaultMessage:"Enable Notion Mail for all members under your company domains."}),(0,i.jsx)("br",{}),(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.enableNotionMail.terms",defaultMessage:"If you re-enable Notion Mail, the changes will take 24 hours to fully propagate."})]}),item:(0,i.jsx)(we().A,{on:!Boolean(a.disable_notion_mail.value),onClick:a.disable_notion_mail.toggle,disabled:a.disable_notion_mail.loading})})]})]})}var sh=()=>a(153642);const nh=at().q,oh={managedUsers:[],filters:{query:"",multiFactorStatus:void 0,workspaceId:void 0},numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,paginationTokenHistory:[],loading:!1,error:void 0};var ih=()=>a(915341);function rh(e){let{selectedAccountStatus:t,setSelectedAccountStatus:a}=e;return(0,i.jsx)(Ys().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"managedAccounts.table.filters.accountStatus.title",defaultMessage:"Status"}),pillIcon:ih().E,selectedItem:t,setSelectedItem:a,items:lh,shouldUseCheck:!0})}const lh=[{key:"notSuspended",value:"notSuspended",title:(0,i.jsx)(v().sA,{id:"managedAccounts.table.filters.accountStatus.active",defaultMessage:"Active"}),shortTitle:(0,i.jsx)(v().sA,{id:"managedAccounts.table.filters.accountStatus.active",defaultMessage:"Active"}),wrapCaption:!0},{key:"suspended",value:"suspended",title:(0,i.jsx)(v().sA,{id:"managedAccounts.table.filters.accountStatus.suspended",defaultMessage:"Suspended"}),shortTitle:(0,i.jsx)(v().sA,{id:"managedAccounts.table.filters.accountStatus.suspended",defaultMessage:"Suspended"}),wrapCaption:!0}];const dh=(0,o().wt)("personSlash",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M16.2 16.675 3.52 3.987a.52.52 0 0 1-.158-.383.53.53 0 0 1 .547-.54q.225 0 .39.15l12.674 12.681a.52.52 0 0 1 .157.383q0 .225-.157.39a.53.53 0 0 1-.39.157.53.53 0 0 1-.383-.15M10 4.862q-.533 0-.97.328a1.9 1.9 0 0 0-.636.855l-.903-.902a3 3 0 0 1 1.06-1.06A2.74 2.74 0 0 1 10 3.68q.827 0 1.504.424.684.424 1.08 1.141a3.2 3.2 0 0 1 .403 1.6 3.34 3.34 0 0 1-.328 1.47 3.2 3.2 0 0 1-.868 1.12l-.854-.854a1.96 1.96 0 0 0 .587-.718q.226-.458.226-1.018a2.1 2.1 0 0 0-.24-1.012 1.87 1.87 0 0 0-.635-.71 1.56 1.56 0 0 0-.875-.26Zm3.514 10.405 1.169 1.162-.206.013a3 3 0 0 1-.218.007H5.734q-1.75 0-1.75-1.176 0-.642.363-1.346a5 5 0 0 1 1.039-1.347 6 6 0 0 1 1.64-1.073 6.8 6.8 0 0 1 2.167-.567l1.142 1.148a2 2 0 0 0-.17-.007 2 2 0 0 0-.165-.007q-1.135 0-2.017.322-.874.314-1.476.8-.595.478-.91.99-.314.507-.314.903 0 .096.048.137.055.04.178.04z"})}),ch=(0,o().wt)("rectanglePencilEllipsis",{viewBox:"0 0 22 20",svg:(0,i.jsx)("path",{d:"M2.523 15.942q-.963 0-1.49-.512-.52-.513-.52-1.477V8.04q0-.971.52-1.477.527-.512 1.49-.512h12.845L14.11 7.3H2.715q-.84 0-.841.842v5.708q0 .396.219.615t.622.219h13.802q.403 0 .622-.22.219-.218.218-.614V9.257l1.36-1.36v6.056q0 .964-.519 1.477-.52.512-1.49.512zm10.391-4.6q-.116.047-.219-.055-.095-.102-.04-.219l.649-1.401 5.885-5.893 1.067 1.06-5.9 5.886zm7.861-7.034-1.06-1.067.493-.485a.7.7 0 0 1 .451-.212.53.53 0 0 1 .438.157l.191.185a.59.59 0 0 1 .192.45.67.67 0 0 1-.212.466zM4.438 12.012a.99.99 0 0 1-.725-.301 1 1 0 0 1-.294-.718q0-.417.294-.718.3-.3.724-.3.417 0 .711.3.301.3.301.718a.98.98 0 0 1-.3.718q-.295.3-.712.3Zm3 0a.98.98 0 0 1-.717-.301 1 1 0 0 1-.294-.718q0-.417.294-.718.3-.3.717-.3.424 0 .718.3.3.3.301.718a.98.98 0 0 1-.3.718.97.97 0 0 1-.719.3Zm3.008 0a.98.98 0 0 1-.717-.301.98.98 0 0 1-.301-.718q0-.417.3-.718.301-.3.718-.3.418 0 .718.3t.3.718a.98.98 0 0 1-.3.718q-.3.3-.718.3Z"})}),uh={marginLeft:4,height:14,width:14,opacity:.5},gh={id:"user",headerTitle:(0,i.jsx)(v().sA,{id:"managedAccounts.table.user",defaultMessage:"Users"}),renderCell:e=>e.type===Zt().T.ManagedUser?(0,i.jsx)(ua,{useThinTitle:!1,userId:e.managedUser.userId,badge:e.usersOnLegalHold.has(e.managedUser.userId)?(0,i.jsx)(Oi,{}):null,rightContent:(0,i.jsx)(yh,{managedUser:e.managedUser,isLastOrgOwner:e.isLastOrgOwner,handleEditDetails:e.handleEditDetails,handleUpdateUserSuspension:e.handleUpdateUserSuspension,handleLogOutUser:e.handleLogOutUser,handleResetPassword:e.handleResetPassword,handleDeleteUser:e.handleDeleteUser})}):(0,i.jsx)(ga,{}),widthData:{width:275,maxWidth:275},sortable:!1},mh={id:"email",headerTitle:(0,i.jsx)(v().sA,{id:"organizationAccounts.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:240}}):(0,i.jsx)(js().xF,{userId:e.managedUser.userId}),widthData:{widthPercent:40,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},ph={id:"workspaces",headerTitle:(0,i.jsx)(v().sA,{id:"managedAccounts.table.workspaces",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Zt().T.ManagedUser?(0,i.jsx)(vh,{managedUser:e.managedUser}):(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}),widthData:{widthPercent:40,minWidth:120},sortable:!1},hh={id:"lastActive",headerTitle:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},children:[(0,i.jsx)(v().sA,{id:"managedAccounts.table.lastActive",defaultMessage:"Last active"}),(0,i.jsx)(G().A,{render:e=>(0,i.jsx)("div",{...e,children:(0,a(213255).A)(uh)}),renderTooltip:()=>(0,i.jsx)(v().sA,{id:"managedAccounts.table.lastActive.tooltip",defaultMessage:"This may be delayed by several hours."})})]}),renderCell:e=>e.type===Zt().T.ManagedUser?(0,i.jsx)(Li().F,{lastActiveAt:e.managedUser.lastActiveAt,containerStyle:{opacity:.5}}):(0,i.jsx)($o().h,{}),widthData:{widthPercent:20,minWidth:40},sortable:!1},fh=[gh,{id:"accountStatus",headerTitle:(0,i.jsx)(v().sA,{id:"organization.managedAccounts.table.accountStatus",defaultMessage:"Status"}),renderCell:e=>e.type===Zt().T.ManagedUser?(0,i.jsx)(bh,{status:e.managedUser.accountStatus}):(0,i.jsx)(Lt().mf,{containerStyles:{width:80}}),widthData:{width:60},sortable:!1},mh,ph,hh];function xh(e){let{organizationStore:t,usersOnLegalHold:a,managedUsers:n,loading:o,loadNextPage:r,loadPrevPage:l,currentPage:d,hasPreviousPage:c,hasNextPage:u,refreshPage:g,selectedIds:p,onSelectAll:h,onUnselectAll:f,onSelectRow:x}=e;const b=(0,y().v3)(),w=(0,Gt().A)(),A=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:fh,theme:e,containerMarginTop:0})),[]),[M,C]=(0,s.useState)({isOpen:!1}),I=()=>{C({isOpen:!1})},[T,k]=(0,s.useState)(void 0),_=()=>{k(void 0)},[z,D]=(0,s.useState)(void 0),P=()=>{D(void 0)},N=(0,S().K8)((()=>n.map((e=>({id:e.userId,type:Zt().T.ManagedUser,managedUser:e,isLastOrgOwner:t.isUserLastOwner(e.userId),isClickable:!0,usersOnLegalHold:a,handleEditDetails:()=>{C({isOpen:!0,onDismiss:I,userId:e.userId,organizationStore:t,lastActiveAt:e.lastActiveAt})},handleUpdateUserSuspension:async()=>{"notSuspended"===e.accountStatus?k({type:"suspend",userId:e.userId,onDismiss:_,onSubmit:async()=>{await eu({environment:b,isSuspended:"suspended"===e.accountStatus,userId:e.userId}),g()}}):(await eu({environment:b,isSuspended:"suspended"===e.accountStatus,userId:e.userId}),g())},handleLogOutUser:()=>{k({type:"logoutSingle",onDismiss:_,onSubmit:async()=>{await Wc({environment:b,organizationId:t.id,userId:e.userId}),g()}})},handleResetPassword:()=>{k({type:"resetPasswordSingle",userId:e.userId,onDismiss:_,onSubmit:async()=>{await Qc({environment:b,organizationId:t.id,userId:e.userId}),g()}})},handleDeleteUser:()=>{D({userId:e.userId,onDismiss:P,onSubmit:async()=>{await Oc({environment:b,isSuspended:"suspended"===e.accountStatus,userId:e.userId}),g()}})}})))),[b,n,t,g,a]);const R=o?(0,Zt().n)():N,B=fh.map((e=>({...e,headerStyle:w.tableHeader,rowStyle:w.tableRow}))),E={header:{isDisabled:o,isSelected:p.length>0&&p.length===n.length,onClick:()=>{p.length===n.length?f():h()}},row:{getDisabledState:e=>o,getSelectedState:e=>e.type===Zt().T.ManagedUser&&p.includes(e.managedUser.userId),onClick:e=>{e.type===Zt().T.ManagedUser&&x(e.managedUser.userId)}}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Et().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:B,rows:R,renderNoRowsComponent:()=>o?null:(0,i.jsx)(Yt,{icon:m().peopleIcon,title:(0,i.jsx)(v().sA,{id:"managedAccounts.table.empty",defaultMessage:"No users found"}),byline:(0,i.jsx)(v().sA,{id:"managedAccounts.table.empty.byline",defaultMessage:"There are no users that match this query"})}),loadMoreMethod:{type:"pages",onLoadNext:r,onLoadPrevious:l,hasNextPage:u,hasPrevPage:c,currentPage:d},styles:A,multiselect:E,onRowClick:function(e){e.type===Zt().T.ManagedUser&&C({isOpen:!0,onDismiss:I,userId:e.managedUser.userId,organizationStore:t,lastActiveAt:e.managedUser.lastActiveAt})},extendToFullScreen:Xt().e}),M.isOpen&&(0,i.jsx)(Wi,{...M,isOnLegalHold:a.has(M.userId)}),T&&(0,i.jsx)(Fc,{...T}),z&&(0,i.jsx)(Bc,{shouldWarnLegalHold:a.has(z.userId),...z})]})}function vh(e){let{managedUser:t}=e;return 0===t.workspaces.length?(0,i.jsx)(D().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.spacesColumn.noWorkspaces",defaultMessage:"No workspaces"})}):(0,i.jsx)(ee().Nt,{workspaces:t.workspaces,showTooltip:!0})}function bh(e){const{status:t}=e;let a,s,n,o;const r=(0,j().DP)();switch(t){case"notSuspended":a=(0,i.jsx)(v().sA,{id:"organization.managedAccounts.table.accountStatusValue.active",defaultMessage:"Active"}),s=r.statusTokenText.green,o=r.statusTokenBackground.green,n="green";break;case"suspended":a=(0,i.jsx)(v().sA,{id:"organization.managedAccounts.table.accountStatusValue.suspended",defaultMessage:"Suspended"}),s=r.statusTokenText.yellow,o=r.statusTokenBackground.yellow,n="yellow";break;default:(0,Ee().HB)(t)}return(0,i.jsx)(At().A,{format:mt().NY.Medium,value:a,isSingle:!0,showRemoveButton:!1,isRound:!0,backgroundColor:o,showColoredDot:n,color:s})}function yh(e){const t=(0,v().tz)(),{managedUser:s,isLastOrgOwner:n,handleEditDetails:o,handleUpdateUserSuspension:r,handleLogOutUser:l,handleResetPassword:d,handleDeleteUser:c}=e,u=(0,S().uB)(void 0,Bi().A),g=(0,j().IS)((()=>({popupMenu:{width:248},icon:{height:20,width:20,fill:"currentColor"}})),[]),m=[{key:"edit-details",render:e=>(0,i.jsx)(We().A,{...e,icon:(0,a(625491).M)(g.icon),title:(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.editDetails",defaultMessage:"Edit details"})}),action:()=>{o(),u.setState({...u.state,open:!1})}},{key:"log-out-user",render:e=>(0,i.jsx)(We().A,{...e,icon:(0,Im().U)(g.icon),title:(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.logoutUser",defaultMessage:"Log out"})}),action:()=>{l(),u.setState({...u.state,open:!1})}},{key:"reset-password",render:e=>(0,i.jsx)(We().A,{...e,icon:ch(g.icon),title:(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.resetPassword",defaultMessage:"Reset password"})}),action:()=>{d(),u.setState({...u.state,open:!1})}}],p={key:"actions",render:e=>(0,i.jsx)(qe().A,{title:(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.title",defaultMessage:"Managed account actions"}),...e}),items:m},h=[{key:"suspend-user",render:e=>(0,i.jsx)(We().A,{...e,isRedOnHover:!0,icon:"suspended"===s.accountStatus?(0,gi().D)(g.icon):dh(g.icon),title:"suspended"===s.accountStatus?(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.unSuspendUser",defaultMessage:"Reactivate user"}):(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.suspendUser",defaultMessage:"Suspend user"})}),action:()=>{r(),u.setState({...u.state,open:!1})}},{key:"delete-user",render:e=>(0,i.jsx)(We().A,{...e,isRedOnHover:!0,icon:(0,Bt().trashIcon)(g.icon),title:(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.deleteUser",defaultMessage:"Delete user"}),disabled:n,disabledFeedback:n}),action:()=>{c(),u.setState({...u.state,open:!1})}}],f={key:"destructive-actions",render:e=>(0,i.jsx)(qe().A,{topBorder:!0,...e}),items:h};return(0,i.jsx)(Ei().Ay,{stopClickPropagation:!0,popupType:Xa().n.Popup,alignmentToOrigin:$a().C.Start,placementToOrigin:$a().W.Bottom,style:g.popupMenu,render:()=>(0,i.jsx)(yt().A,{menuType:xt().gu.Popup,width:248,children:(0,i.jsx)(St().Ay,{type:St().Oh.Vertical,initialFocus:void 0,sections:[p,f]})}),onClose:()=>{},buttonPopupStore:u,renderOrigin:e=>(0,i.jsx)(ds().A,{ariaLabel:t.formatMessage({id:"managedUserActionsMenuButton.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:zi().W,...e})})}var Sh=()=>a(707004);function jh(e){let{selectedMfaMethod:t,setSelectedMfaMethod:a}=e;return(0,i.jsx)(Ys().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"managedUsersTab.table.filters.mfaMethod.title",defaultMessage:"2-step verification method"}),pillIcon:_i().g,selectedItem:t,setSelectedItem:a,items:Sh().l,shouldUseCheck:!0})}const wh=(0,v().YK)({placeholder:{id:"identityProvisioningSettings.managedUsers.searchInput.placeholder",defaultMessage:"Search name, email, or user ID"}});function Ah(e){let{organizationStore:t}=e;const a=(0,y().v3)(),s=(0,i.jsx)(v().sA,{id:"organization.people.accounts.title",defaultMessage:"Manage user accounts"});return(0,i.jsx)(cd().D,{breadcrumbs:[{message:(0,i.jsx)(v().sA,{id:"organizationGuestsSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{(0,gd().i)({environment:a,from:{tabRoute:x().kr,properties:{subtab:x().DE.ManagedUsers}},organizationId:t.id,tabRoute:x().kr})}},{message:s}],children:(0,i.jsxs)(El().t,{children:[(0,i.jsx)(Ha()._,{title:s,byline:(0,i.jsx)(v().sA,{id:"organization.people.accounts.byline",defaultMessage:"Manage user accounts with verified domain emails: adjust access, update profiles, and control permissions"})}),(0,i.jsx)(Ch,{organizationStore:t})]})})}var Mh=function(e){return e.AddToWorkspace="add-to-workspace",e.RemoveFromWorkspace="remove-from-workspace",e.DeleteUser="delete-user",e}(Mh||{});function Ch(e){let{organizationStore:t}=e;const a=(0,y().v3)(),n=(0,v().tz)(),o=(0,sh().V)()||0,r=(0,j().IS)((e=>({link:{fontSize:14,fontWeight:400,color:e.text.secondary,textDecoration:"none"},title:{marginTop:21,fontWeight:U().Wy.semibold,fontSize:17,display:"flex",justifyContent:"flex-start",alignItems:"center"},byline:{fontSize:14,fontWeight:U().Wy.regular,color:e.text.secondary,paddingBottom:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"},leftContent:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px",paddingTop:4,rowGap:4},rightContent:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},tableHeader:{position:"relative",display:"flex",flexDirection:"row"}})),[]),{managedUsers:l,filters:d,setFilters:c,loading:u,currentPage:g,hasPrevPage:m,hasNextPage:p,loadNextPage:h,loadPrevPage:f,refreshPage:x}=function(e){let{organizationStore:t}=e;const a=(0,y().v3)(),[n,o]=(0,s.useState)(oh),i=(0,s.useRef)(n.filters),r=(0,s.useRef)(!1),l=(0,S().K8)((()=>t.getEmailDomains()),[t]),d=(0,s.useMemo)((()=>n.filters.emailDomains&&n.filters.emailDomains.length>0?n.filters.emailDomains:l),[n.filters.emailDomains,l]),c=(0,s.useCallback)((async e=>{if(0===d.length)return;let s=n.loading,r=n.error,l=n.hasNextPage,c=n.paginationToken,u=n.paginationTokenHistory;if(e.restartSearch&&(o((e=>({...oh,filters:e.filters}))),s=oh.loading,r=oh.error,l=oh.hasNextPage,c=oh.paginationToken,u=[]),l&&!s&&!r){o((e=>({...e,loading:!0}))),i.current=n.filters;try{var g;const s=await M().callApi({eventName:"getManagedUsers",environment:a,data:{query:n.filters.query,multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId,userStatus:n.filters.managedUserStatus,paginationToken:c,emailDomains:d,limit:nh}});if(Rc().F2(a,{filters:{multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId},query_length:(null===(g=n.filters.query)||void 0===g?void 0:g.length)??0,current_page:c}),e.isRefreshing||(0,I().u4)({environment:a,event:{eventName:"org_console_people_table_query",eventProperties:{table:"managed_accounts",organization_id:t.id,filter_keys:Object.keys(et().fN(n.filters,(e=>Boolean(e))))}}}),"failed"===s.type)throw s.error;const i=s.data.nextPaginationToken,r=s.data.results;o((e=>({...e,managedUsers:r,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:i,paginationTokenHistory:c?[...u,c]:u,hasNextPage:Boolean(i)})))}catch(m){const e=(0,ws().A)(m);o((t=>({...t,loading:!1,error:e})))}}}),[a,n.loading,n.error,n.hasNextPage,n.paginationToken,n.paginationTokenHistory,n.filters,d,t.id]),u=(0,s.useCallback)((async e=>{if(0===d.length)return;let t=n.loading,s=n.error,r=n.paginationToken,l=n.paginationTokenHistory;if(e.restartSearch&&(o((e=>({...oh,filters:e.filters}))),t=oh.loading,s=oh.error,r=oh.paginationToken,l=[]),0===l.length||t)return;if(s)return;o((e=>({...e,loading:!0}))),i.current=n.filters;const c=l[l.length-2];try{var u;const e=await M().callApi({eventName:"getManagedUsers",environment:a,data:{query:n.filters.query,multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId,userStatus:n.filters.managedUserStatus,paginationToken:c,emailDomains:d,limit:nh}});if(Rc().F2(a,{filters:{multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId},query_length:(null===(u=n.filters.query)||void 0===u?void 0:u.length)??0,current_page:r}),"failed"===e.type)throw e.error;const t=e.data.nextPaginationToken,s=e.data.results;o((e=>({...e,managedUsers:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:t,paginationTokenHistory:l.slice(0,-1),hasNextPage:Boolean(t)})))}catch(g){const e=(0,ws().A)(g);o((t=>({...t,loading:!1,error:e})))}}),[a,n.loading,n.error,n.paginationToken,n.paginationTokenHistory,n.filters,d]);(0,s.useEffect)((()=>{!r.current&&d.length>0&&(c({restartSearch:!0}),r.current=!0)}),[d,c]),(0,s.useEffect)((()=>{et().n4(i.current,n.filters)||c({restartSearch:!0})}),[n.filters,c]);const g=(0,s.useCallback)((()=>c({restartSearch:!1})),[c]),m=(0,s.useCallback)((()=>u({restartSearch:!1})),[u]),p=(0,s.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),h=(0,s.useCallback)(((e,t)=>{o((a=>({...a,managedUsers:a.managedUsers.map((a=>a.userId===e?{...a,workspaces:a.workspaces.filter((e=>e.id!==t))}:a))})))}),[]),f=(0,s.useCallback)(((e,t)=>{o((a=>({...a,managedUsers:a.managedUsers.map((a=>a.userId===e?{...a,accountStatus:t}:a))})))}),[]),x=(0,s.useCallback)((e=>{o((t=>({...t,managedUsers:t.managedUsers.filter((t=>t.userId!==e))})))}),[]),v=(0,s.useCallback)((()=>c({restartSearch:!0,isRefreshing:!0})),[c]);return{managedUsers:n.managedUsers,filters:n.filters,loading:n.loading,error:n.error,removeWorkspaceFromUser:h,removeUserFromManagedUsers:x,setFilters:p,currentPage:n.paginationTokenHistory.length+1,hasNextPage:n.hasNextPage,loadNextPage:g,hasPrevPage:n.paginationTokenHistory.length>0,loadPrevPage:m,updateManagedUserAccountStatus:f,refreshPage:v}}({organizationStore:t}),b=(0,s.useMemo)((()=>l.map((e=>e.userId))),[l]),{selectedIds:A,handleToggleId:C,handleSelectAllIds:T,handleUnselectAllIds:k}=Ut({allPossibleIds:b}),{organizationOwnerRecordCache:_}=(0,s.useContext)(N().N),{spaceIds:D}=(0,s.useContext)(R().D),[P,B]=(0,s.useState)(),E=(0,S().K8)((()=>{const e=[];for(const t of D)e.push(new(z().SL)(a,{id:t,table:na().NX},{inMemoryRecordCache:_}));return e.map((e=>{var t;return{id:e.id,name:e.getName(),createdTime:e.getCreatedTime(),memberCount:o,icon:null===(t=e.getIcon())||void 0===t?void 0:t.icon,subscriptionTier:e.getSubscriptionTier()}}))}),[a,_,D,o]),{membersSet:L}=zo({organizationId:t.id});function O(){B(void 0)}async function F(){await x(),k()}const H=(0,S().K8)((()=>new Pa),[]),V=(0,S().K8)((()=>t.getEmailDomains()),[t]),W=(0,S().K8)((()=>A.map((e=>new(z().LU)(a,{table:w().oo,id:e}).getModel())).filter(Ee().O9).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[a,A]);(0,s.useEffect)((()=>{H.setState({...H.state,inviteTargets:W,inviteRole:"read_and_write",isInviteTargetsEmpty:!1})}),[H,W]);const{inviteTargets:q}=(0,S().K8)((()=>({inviteTargets:H.state.inviteTargets})),[H]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:r.tableHeader,children:[(0,i.jsxs)("div",{style:r.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:A.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(Fa,{itemsSelectedCount:A.length}),onClick:k}),(0,i.jsx)(Ua,{icon:Rt().x,title:(0,i.jsx)(v().sA,{id:"organizationManagedAccountsSubTab.multiselect.addToWorkspace",defaultMessage:"Add to workspace"}),onClick:()=>B(Mh.AddToWorkspace)}),(0,i.jsx)(Ua,{icon:Ss,title:(0,i.jsx)(v().sA,{id:"organizationManagedAccountsSubTab.multiselect.removeFromWorkspace",defaultMessage:"Remove from workspace"}),onClick:()=>B(Mh.RemoveFromWorkspace)})]}),(0,i.jsx)(Qs,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationManagedAccountsTable.emailDomainsFilter.pillTitle",defaultMessage:"Domain email"}),emailDomains:V,selectedEmailDomains:d.emailDomains||[],setSelectedEmailDomains:e=>{c({emailDomains:e})}}),(0,i.jsx)(Fo,{selectedSpaceId:d.workspaceId,setSelectedSpaceId:e=>{c({workspaceId:e})},spaceData:E}),(0,i.jsx)(jh,{selectedMfaMethod:d.multiFactorStatus,setSelectedMfaMethod:e=>{c({multiFactorStatus:e})}}),(0,i.jsx)(rh,{selectedAccountStatus:d.managedUserStatus,setSelectedAccountStatus:e=>{c({managedUserStatus:e})}})]}),(0,i.jsx)("div",{style:r.rightContent,children:(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:d.query,setQueryFilter:e=>c({query:e}),placeholderText:n.formatMessage(wh.placeholder)})})]}),P===Mh.AddToWorkspace?(0,i.jsx)(Ui,{permissionsInviteStore:H,onDismiss:O,organizationStore:t,refreshPage:F}):null,P===Mh.RemoveFromWorkspace?(0,i.jsx)(pn,{permissionsInviteStore:H,onDismiss:O,organizationStore:t,refreshPage:F,membersSpaceIds:Ih({managedUsers:l,inviteTargets:q})}):null,(0,i.jsx)(xh,{organizationStore:t,managedUsers:l,usersOnLegalHold:L,loading:u,currentPage:g,loadNextPage:h,loadPrevPage:f,hasPreviousPage:m,hasNextPage:p,selectedIds:A,onSelectAll:T,onUnselectAll:k,onSelectRow:C,refreshPage:F})]})}function Ih(e){let{managedUsers:t,inviteTargets:a}=e;const s=new Set;if(t)for(const n of a){const e=t.find((e=>e.userId===n.value.id));for(const t of(null==e?void 0:e.workspaces)??[])s.add(t.id)}return s}const Th=at().q,kh={groups:[],loading:!1,error:void 0,hasNextPage:!0,cursor:void 0,sortState:{column:pa,sortAscending:!0},filters:{},query:"",hasPreviousPage:!1},_h={columnName:"name",direction:"ascending"};function zh(e){return"name"===e.column.id?{columnName:"name",direction:e.sortAscending?"ascending":"descending"}:"members"===e.column.id?{columnName:"members",direction:e.sortAscending?"ascending":"descending"}:_h}const Dh=(0,v().YK)({placeholder:{id:"organizationGroupsSubTab.groupsSearch.placeholder",defaultMessage:"Search by email or name."},name:{id:"organizationGroupsSubTab.sort.name",defaultMessage:"Name"},memberCount:{id:"organizationGroupsSubTab.sort.memberCount",defaultMessage:"Member count"}});function Ph(e){let{organizationStore:t,groupId:a}=e;const s=(0,y().v3)(),n=(0,i.jsx)(v().sA,{id:"organization.people.groups.title",defaultMessage:"Manage groups"});return(0,i.jsx)(cd().D,{breadcrumbs:[{message:(0,i.jsx)(v().sA,{id:"organizationGroupsSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{(0,gd().i)({environment:s,from:{tabRoute:x().kr,properties:{subtab:x().DE.Groups}},organizationId:t.id,tabRoute:x().kr})}},{message:n}],children:(0,i.jsxs)(El().t,{children:[(0,i.jsx)(Ha()._,{title:n,byline:(0,i.jsx)(v().sA,{id:"organization.people.groups.byline",defaultMessage:"Set up groups to manage page permissions from the share menu and manage teamspace members in bulk"})}),(0,i.jsx)(Nh,{organizationStore:t,groupId:a})]})})}function Nh(e){let{organizationStore:t,groupId:a}=e;const n=(0,v().tz)(),{groups:o,loading:r,error:l,loadNextPage:d,setSortState:c,filters:u,setFilters:g,query:m,setQuery:p,refreshPage:h,currentPage:f,loadPreviousPage:x,hasPreviousPage:b,hasNextPage:S,removePagesFromGroup:j}=function(e){let{organizationStore:t}=e;const a=(0,y().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(N().N),[o,i]=(0,s.useState)(kh),[r,l]=(0,s.useState)(1),d=(0,s.useRef)(!1),c=(0,s.useRef)(kh.sortState),u=(0,s.useRef)({}),g=(0,s.useRef)(kh.query),m=(0,s.useRef)(kh.cursor),p=(0,s.useCallback)((async e=>{let{cursor:s,sortState:o,filters:r,query:l}=e;try{const e=await M().callApi({eventName:"getGroupsInOrganization",environment:a,data:{organizationId:t.id,sort:zh(o),cursor:s,filters:r,query:l,limit:Th}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Ee().HB)(e)}n({data:e.data}),i((t=>({...t,error:void 0,loading:!1,groups:e.data.groups,cursor:e.data.nextCursor,hasNextPage:e.data.hasNextPage,hasPreviousPage:void 0!==j()})))}catch(d){const e=(0,ws().A)(d);i((t=>({...t,loading:!1,error:e})))}}),[a,t.id,n]),h=(0,s.useCallback)((async e=>{var s;let{restartSearch:n,overridePage:r}=e;if(!t.id)return;let l=o.loading,d=o.error,h=r?r.hasNextPage:o.hasNextPage,f=r?r.cursor:o.cursor;if(n&&(i((e=>({...kh,sortState:e.sortState,filters:e.filters,query:e.query}))),l=kh.loading,d=kh.error,h=kh.hasNextPage,f=kh.cursor),!h||l)return;if(d)return;i((e=>({...e,loading:!0}))),u.current=o.filters,c.current=o.sortState,g.current=o.query,m.current=r?r.cursor:f;const x=null===(s=zh(o.sortState))||void 0===s?void 0:s.columnName;return(0,I().u4)({environment:a,event:{eventName:"org_console_people_table_query",eventProperties:{table:"groups",organization_id:t.id,filter_keys:Object.keys(o.filters),sort_columns:x?[x]:void 0,has_query:Boolean(o.query)}}}),p({cursor:f,sortState:o.sortState,filters:o.filters,query:o.query})}),[t.id,o,p,a]);(0,s.useEffect)((()=>{!d.current&&Boolean(t.id)&&(h({restartSearch:!0}),d.current=!0)}),[t,h]);const f=(0,s.useCallback)((()=>(l((e=>e+1)),h({restartSearch:!1}))),[h]);(0,s.useEffect)((()=>{et().n4(c.current,o.sortState)||h({restartSearch:!0})}),[o.sortState,h]),(0,s.useEffect)((()=>{et().n4(u.current,o.filters)||h({restartSearch:!0})}),[o.filters,h]),(0,s.useEffect)((()=>{et().n4(g.current,o.query)||h({restartSearch:!0})}),[o.query,h]);const x=(0,s.useCallback)((e=>{i((t=>({...t,filters:{...t.filters,...e}})))}),[]),v=(0,s.useCallback)((e=>{i((t=>({...t,sortState:e??kh.sortState})))}),[]),b=(0,s.useCallback)((e=>{i((t=>({...t,query:e})))}),[]),S=(0,s.useCallback)((async e=>(e&&i((e=>({...e,loading:!0,groups:[]}))),p({cursor:m.current,sortState:o.sortState,filters:o.filters,query:o.query}))),[p,o]);function j(){if(!m.current)return;const e=m.current.offset-Th;return e<0?void 0:e}const w=(0,s.useCallback)((async()=>{const e=j();void 0!==e&&(l((e=>Math.max(1,e-1))),await h({restartSearch:!1,overridePage:{cursor:{offset:e},hasNextPage:!0}}))}),[h]),A=(0,s.useCallback)(((e,t)=>{i((a=>({...a,groups:a.groups.map((a=>a.groupId===e?{...a,sharedPageIds:a.sharedPageIds.filter((e=>!t.includes(e)))}:a))})))}),[]);return{groups:o.groups,loading:o.loading,error:o.error,loadNextPage:f,currentPage:r,hasNextPage:o.hasNextPage,cursor:o.cursor,setSortState:v,sortState:o.sortState,setFilters:x,filters:o.filters,query:o.query,setQuery:b,loadPreviousPage:w,hasPreviousPage:o.hasPreviousPage,refreshPage:S,removePagesFromGroup:A}}({organizationStore:t}),w=Do({spaceStores:(0,Ts().l)()}),A=(0,Hn().F)(),C=[{id:pa.id,name:n.formatMessage(Dh.name),type:"title"},{id:xa.id,name:n.formatMessage(Dh.memberCount),type:"number"}],[T,k]=(0,s.useState)(),[_,z]=(0,s.useState)(!1),[D,P]=(0,s.useState)(),R=D??T??[];return(0,s.useEffect)((()=>{if(!T||0===T.length)return void c(void 0);const e=T[0];switch(e.propertyId){case pa.id:c({column:pa,sortAscending:"ascending"===e.direction});break;case xa.id:c({column:xa,sortAscending:"ascending"===e.direction})}}),[c,T]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:A.tableHeader,children:[(0,i.jsxs)("div",{style:A.leftContent,children:[(0,i.jsx)(Fn().A,{children:(0,i.jsx)(Wa().e,{preventMultipleSorts:!0,sortProperties:C,isMenuOpen:_,setIsMenuOpen:z,onApply:e=>{z(!1),k(e),P(void 0)},currentSorts:R})}),R.length>0?(0,i.jsx)(Un().he,{}):null,(0,i.jsx)(Uo,{selectedSpaceIds:u.spaceIds||[],setSelectedSpaceIds:e=>g({spaceIds:e}),spaceData:w})]}),(0,i.jsxs)("div",{style:A.rightContent,children:[(0,i.jsx)(Va().x,{appliedSorts:T,openSortPillMenu:e=>{e&&P([{propertyId:e,direction:"ascending"}]),z(!0)},sortProperties:C}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:m,setQueryFilter:p,placeholderText:n.formatMessage(Dh.placeholder)})]})]}),(0,i.jsx)(ba,{groupId:a,groups:o,loading:r,error:l,organizationStore:t,loadNextPage:d,currentPage:f,loadPreviousPage:x,hasPreviousPage:b,refreshPage:h,hasNextPage:S,removePagesFromGroup:j})]})}const Rh={id:"actor",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(ua,{useThinTitle:!1,userId:e.organizationGuest.userId,badge:e.usersOnLegalHold.has(e.organizationGuest.userId)?(0,i.jsx)(Oi,{}):null,rightContent:(0,i.jsx)(Wh,{userId:e.organizationGuest.userId,setSelectedUserId:e.setSelectedUserId,setOpenedModal:e.setOpenedModal})}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},Bh={id:"email",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:240}}):(0,i.jsx)(js().xF,{userId:e.organizationGuest.userId}),widthData:{widthPercent:35,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},Eh={id:"spaces",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.spacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):(0,i.jsx)(cr,{organizationGuest:e.organizationGuest}),widthData:{widthPercent:35,minWidth:120},sortable:!1,hasClickableContents:!1},Lh={id:"pages",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.pagesColumn.header",defaultMessage:"Pages"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Wt().Kb,{}):(0,i.jsx)(Vh,{organizationGuest:e.organizationGuest}),widthData:{widthPercent:15,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},Oh={id:"lastActive",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.lastActiveColumn.header",defaultMessage:"Last active"}),renderCell:e=>e.type===Zt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Li().F,{lastActiveAt:e.organizationGuest.lastActiveTime,isNoActivitySecondaryColor:!0}),widthData:{widthPercent:15,minWidth:100},sortable:!1,shouldShowSortTooltip:!0,hasClickableContents:!1},Uh=[Rh,Bh,Eh,Oh,Lh];var Fh=function(e){return e.ConvertToMember="convert-to-member",e.RemoveFromWorkspace="remove-from-workspace",e}(Fh||{});function Hh(e){let{guests:t,usersOnLegalHold:a,loading:n,error:o,organizationStore:r,loadNextPage:l,refreshPage:d,currentPage:c,hasNextPage:u,hasPreviousPage:g,loadPreviousPage:p,selectedIds:h,onSelectAll:f,onUnselectAll:x,onSelectRow:b}=e;const A=(0,y().v3)(),M=(0,Gt().A)(),C=(0,j().IS)((e=>(0,Et().rC)({columnRenderInfo:Uh,theme:e,containerMarginTop:0})),[]),[I,T]=(0,s.useState)(),[k,_]=(0,s.useState)(),[D,P]=(0,s.useState)({isOpen:!1}),N=t.map((e=>({organizationGuest:e,usersOnLegalHold:a,id:e.userId,isClickable:!0,type:Zt().T.OrganizationGuest,setSelectedUserId:T,setOpenedModal:_}))),R=n?(0,Zt().n)():N;function B(){_(void 0)}const E=()=>{P({isOpen:!1})};const L=Uh.map((e=>({...e,headerStyle:M.tableHeader,rowStyle:M.tableRow}))),O={header:{isDisabled:n,isSelected:h.length>0&&h.length===t.length,onClick:()=>{h.length===t.length?x():f()}},row:{getDisabledState:e=>n,getSelectedState:e=>e.type===Zt().T.OrganizationGuest&&h.includes(e.organizationGuest.userId),onClick:e=>{e.type===Zt().T.OrganizationGuest&&b(e.organizationGuest.userId)}}},U=(0,S().K8)((()=>{const e=new Pa,t=I?new(z().LU)(A,{table:w().oo,id:I}).getModel():void 0;return t?(e.setState({...e.state,inviteTargets:[{type:"existingUser",value:t,spaceRole:void 0}],inviteRole:"read_and_write",isInviteTargetsEmpty:!1}),e):e}),[A,I]);return!n&&o?(0,i.jsx)($t,{error:o,runNewSearch:()=>d(!0)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Et().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:L,rows:R,renderNoRowsComponent:()=>(0,i.jsx)(Yt,{icon:m().peopleIcon,title:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.empty",defaultMessage:"No guests found"}),byline:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.empty.byline",defaultMessage:"There are no guests that match this query"})}),styles:C,loadMoreMethod:{type:"pages",onLoadNext:l,onLoadPrevious:p,hasNextPage:u,hasPrevPage:g,currentPage:c},multiselect:O,onRowClick:function(e){e.type===Zt().T.OrganizationGuest&&P({isOpen:!0,onDismiss:E,userId:e.organizationGuest.userId,organizationStore:r,lastActiveAt:e.organizationGuest.lastActiveTime})},extendToFullScreen:Xt().e}),k===Fh.ConvertToMember?(0,i.jsx)(Rs,{organizationStore:r,permissionsInviteStore:U,onDismiss:B,refreshPage:d}):null,k===Fh.RemoveFromWorkspace?(0,i.jsx)(Hs,{permissionsInviteStore:U,onDismiss:B,organizationStore:r,refreshPage:d,organizationGuests:t}):null,D.isOpen&&(0,i.jsx)(Wi,{...D,isOnLegalHold:a.has(D.userId)})]})}function Vh(e){let{organizationGuest:t}=e;const a=Object.values(t.guestPages).flat();return(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.pagesColumn.title",defaultMessage:"{count, plural, one {# page} other {# pages}}",values:{count:a.length}})})}function Wh(e){const t=(0,v().tz)(),{userId:a,setSelectedUserId:s,setOpenedModal:n}=e,o=(0,S().uB)(void 0,Bi().A),r=(0,j().IS)((()=>({popupMenu:{width:248},icon:{height:20,width:20,fill:"currentColor"}})),[]),l=[{key:"convert-to-member",render:e=>(0,i.jsx)(We().A,{...e,icon:(0,Rt().x)(r.icon),title:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.userColumn.menu.convertToMember",defaultMessage:"Upgrade to member"})}),action:()=>{n(Fh.ConvertToMember),s(a),o.setState({...o.state,open:!1})}},{key:"remove-from-workspace",render:e=>(0,i.jsx)(We().A,{...e,icon:Ss(r.icon),title:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.userColumn.menu.removeUserFromWorkspace",defaultMessage:"Remove from workspace"})}),action:()=>{n(Fh.RemoveFromWorkspace),s(a),o.setState({...o.state,open:!1})}}],d={key:"actions",render:e=>(0,i.jsx)(qe().A,{title:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.userColumn.menu.title",defaultMessage:"Guest actions"}),...e}),items:l};return(0,i.jsx)(Ei().Ay,{stopClickPropagation:!0,popupType:Xa().n.Popup,alignmentToOrigin:$a().C.Start,placementToOrigin:$a().W.Bottom,style:r.popupMenu,render:()=>(0,i.jsx)(yt().A,{menuType:xt().gu.Popup,width:248,children:(0,i.jsx)(St().Ay,{type:St().Oh.Vertical,initialFocus:void 0,sections:[d]})}),onClose:et().lQ,buttonPopupStore:o,renderOrigin:e=>(0,i.jsx)(ds().A,{ariaLabel:t.formatMessage({id:"guestActionsMenuButton.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:zi().W,...e})})}const qh={guests:[],loading:!1,error:void 0,hasNextPage:!0,cursor:void 0,sortState:{column:Rh,sortAscending:!0},filters:{},query:"",hasPreviousPage:!1},Gh={columnName:"actor",direction:"ascending"};function Kh(e){return"actor"===e.column.id?{columnName:"actor",direction:e.sortAscending?"ascending":"descending"}:"lastActive"===e.column.id?{columnName:"lastActive",direction:e.sortAscending?"ascending":"descending"}:Gh}function Yh(e){let{selectedLastActiveOption:t,setSelectedLastActiveOption:a}=e;return(0,i.jsx)(Ys().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"filters.lastActive.title",defaultMessage:"Last active"}),pillIcon:Cr().D,selectedItem:t,setSelectedItem:a,items:Qh,shouldUseCheck:!0})}const Qh=[{key:"three-months",value:Pi.ThreeMonths,title:(0,i.jsx)(v().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanThreeMonths.title",defaultMessage:"Within the last 3 months"}),shortTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanThreeMonths.shortTitle",defaultMessage:"3 months"})},{key:"six-months",value:Pi.SixMonths,title:(0,i.jsx)(v().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanSixMonths.title",defaultMessage:"Within the last 6 months"}),shortTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanSixMonths.shortTitle",defaultMessage:"6 months"})},{key:"one-year",value:Pi.OneYear,title:(0,i.jsx)(v().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanOneYear.title",defaultMessage:"Within the last 1 year"}),shortTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanOneYear.shortTitle",defaultMessage:"1 year"})}],$h=(0,v().YK)({placeholder:{id:"organizationGuestsSubTab.guestsSearch.placeholder",defaultMessage:"Search by email or name."},name:{id:"organizationGuestsSubTab.sort.name",defaultMessage:"Name"}});function Xh(e){let{organizationStore:t}=e;const a=(0,y().v3)(),s=(0,i.jsx)(v().sA,{id:"organization.people.guests.title",defaultMessage:"Manage guests"});return(0,i.jsx)(cd().D,{breadcrumbs:[{message:(0,i.jsx)(v().sA,{id:"organizationGuestsSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{(0,gd().i)({environment:a,from:{tabRoute:x().kr,properties:{subtab:x().DE.Guests}},organizationId:t.id,tabRoute:x().kr})}},{message:s}],children:(0,i.jsxs)(El().t,{children:[(0,i.jsx)(Ha()._,{title:s,byline:(0,i.jsx)(v().sA,{id:"organization.people.guests.byline",defaultMessage:"Manage guests for page-specific access or upgrade them to members for broader permissions across the workspace"})}),(0,i.jsx)(Jh,{organizationStore:t})]})})}var Zh=function(e){return e.ConvertToMember="convert-to-member",e.RemoveFromWorkspace="remove-from-workspace",e}(Zh||{});function Jh(e){let{organizationStore:t}=e;const a=(0,v().tz)(),n=(0,y().v3)(),{guests:o,loading:r,error:l,loadNextPage:d,setSortState:c,filters:u,setFilters:g,query:m,setQuery:p,refreshPage:h,currentPage:f,loadPreviousPage:x,hasPreviousPage:b,hasNextPage:j}=function(e){let{organizationStore:t}=e;const a=(0,y().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(N().N),[o,i]=(0,s.useState)(qh),[r,l]=(0,s.useState)(1),d=(0,s.useRef)(!1),c=(0,s.useRef)(qh.sortState),u=(0,s.useRef)({}),g=(0,s.useRef)(qh.query),m=(0,s.useRef)(qh.cursor),p=(0,s.useCallback)((async e=>{let{cursor:s,sortState:o,filters:r,query:l}=e;try{const e=await M().callApi({eventName:"getGuestsInOrganization",environment:a,data:{organizationId:t.id,cursor:s,sort:Kh(o),filters:r,query:l}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Ee().HB)(e)}{n({data:e.data});const t=e.data.guests.map((t=>({userId:t.userId,guestPages:t.guestPages,lastActiveTime:e.data.guestIdToLastActive[t.userId]})));i((a=>({...a,loading:!1,guests:t,cursor:e.data.nextCursor,hasNextPage:e.data.hasNextPage,hasPreviousPage:void 0!==j()})))}}catch(d){const e=(0,ws().A)(d);i((t=>({...t,loading:!1,error:e})))}}),[a,t.id,n]),h=(0,s.useCallback)((async e=>{var s;let{restartSearch:n,overridePage:r}=e;if(!t.id)return;let l=o.loading,d=o.error,h=r?r.hasNextPage:o.hasNextPage,f=r?r.cursor:o.cursor;if(n&&(i((e=>({...qh,sortState:e.sortState,filters:e.filters,query:e.query}))),l=qh.loading,d=qh.error,h=qh.hasNextPage,f=qh.cursor),!h||l)return;if(d)return;i((e=>({...e,loading:!0}))),u.current=o.filters,c.current=o.sortState,g.current=o.query,m.current=r?r.cursor:f;const x=null===(s=Kh(o.sortState))||void 0===s?void 0:s.columnName;return(0,I().u4)({environment:a,event:{eventName:"org_console_people_table_query",eventProperties:{table:"guests",organization_id:t.id,filter_keys:Object.keys(o.filters),sort_columns:x?[x]:void 0,has_query:Boolean(o.query)}}}),p({cursor:f,sortState:o.sortState,filters:o.filters,query:o.query})}),[t.id,o,p,a]);(0,s.useEffect)((()=>{!d.current&&Boolean(t.id)&&(h({restartSearch:!0}),d.current=!0)}),[t,h]);const f=(0,s.useCallback)((()=>(l((e=>e+1)),h({restartSearch:!1}))),[h]);(0,s.useEffect)((()=>{et().n4(c.current,o.sortState)||h({restartSearch:!0})}),[o.sortState,h]),(0,s.useEffect)((()=>{et().n4(u.current,o.filters)||h({restartSearch:!0})}),[o.filters,h]),(0,s.useEffect)((()=>{et().n4(g.current,o.query)||h({restartSearch:!0})}),[o.query,h]);const x=(0,s.useCallback)((e=>{i((t=>({...t,filters:{...t.filters,...e}})))}),[]),v=(0,s.useCallback)((e=>{i((t=>({...t,sortState:e??qh.sortState})))}),[]),b=(0,s.useCallback)((e=>{i((t=>({...t,query:e})))}),[]),S=(0,s.useCallback)((async e=>(e&&i((e=>({...e,loading:!0,guests:[]}))),p({cursor:m.current,sortState:o.sortState,filters:o.filters,query:o.query}))),[p,o]);function j(){if(!m.current)return;const e=m.current.offset-at().q;return e<0?void 0:e}const w=(0,s.useCallback)((async()=>{const e=j();void 0!==e&&(l((e=>Math.max(1,e-1))),await h({restartSearch:!1,overridePage:{cursor:{offset:e},hasNextPage:!0}}))}),[h]);return{guests:o.guests,loading:o.loading,error:o.error,loadNextPage:f,currentPage:r,hasNextPage:o.hasNextPage,cursor:o.cursor,setSortState:v,sortState:o.sortState,setFilters:x,filters:o.filters,query:o.query,setQuery:b,loadPreviousPage:w,hasPreviousPage:o.hasPreviousPage,refreshPage:S}}({organizationStore:t}),A=(0,s.useMemo)((()=>o.map((e=>e.userId))),[o]),{selectedIds:C,handleToggleId:T,handleSelectAllIds:k,handleUnselectAllIds:_}=Ut({allPossibleIds:A}),D=Do({spaceStores:(0,Ts().l)()}),{membersSet:P}=zo({organizationId:t.id}),{guestEmailDomains:B}=(0,s.useContext)(R().D),[E,L]=(0,s.useState)(),O=(0,Hn().F)();function U(){L(void 0)}async function F(){await h(),_()}const H=(0,S().K8)((()=>new Pa),[]),V=(0,S().K8)((()=>C.map((e=>new(z().LU)(n,{table:w().oo,id:e}).getModel())).filter(Ee().O9).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[n,C]);(0,s.useEffect)((()=>{H.setState({...H.state,inviteTargets:V,inviteRole:"read_and_write",isInviteTargetsEmpty:!1})}),[H,V]);const W=[{id:Rh.id,name:a.formatMessage($h.name),type:"title"}],[q,G]=(0,s.useState)(),[K,Y]=(0,s.useState)(!1),[Q,$]=(0,s.useState)();(0,s.useEffect)((()=>{if(!q||0===q.length)return void c(void 0);const e=q[0];if(e.propertyId===Rh.id)c({column:Rh,sortAscending:"ascending"===e.direction})}),[c,q]);const X=Q??q??[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:O.tableHeader,children:[(0,i.jsxs)("div",{style:O.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:C.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(Fa,{itemsSelectedCount:C.length}),onClick:_}),(0,i.jsx)(Ua,{icon:Rt().x,title:(0,i.jsx)(v().sA,{id:"organizationGuestsSubTab.multiselect.addToWorkspace",defaultMessage:"Upgrade to member"}),onClick:()=>L(Zh.ConvertToMember)}),(0,i.jsx)(Ua,{icon:Ss,title:(0,i.jsx)(v().sA,{id:"organizationGuestsSubTab.multiselect.removeFromWorkspace",defaultMessage:"Remove from workspace"}),onClick:()=>L(Zh.RemoveFromWorkspace)})]}),(0,i.jsx)(Fn().A,{children:(0,i.jsx)(Wa().e,{preventMultipleSorts:!0,sortProperties:W,isMenuOpen:K,setIsMenuOpen:Y,onApply:e=>{Y(!1),G(e),$(void 0)},currentSorts:X})}),X.length>0?(0,i.jsx)(Un().he,{}):null,(0,i.jsx)(Qs,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationGuestsSubTab.filters.email.title",defaultMessage:"Email"}),emailDomains:B,selectedEmailDomains:u.emailDomains||[],setSelectedEmailDomains:e=>{g({emailDomains:e})}}),(0,i.jsx)(Uo,{selectedSpaceIds:u.spaceIds||[],setSelectedSpaceIds:e=>g({spaceIds:e}),spaceData:D}),(0,i.jsx)(Yh,{selectedLastActiveOption:u.lastActive,setSelectedLastActiveOption:e=>g({lastActive:e})})]}),(0,i.jsxs)("div",{style:O.rightContent,children:[(0,i.jsx)(Va().x,{appliedSorts:q,openSortPillMenu:e=>{e&&$([{propertyId:e,direction:"ascending"}]),Y(!0)},sortProperties:W}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:m,setQueryFilter:p,placeholderText:a.formatMessage($h.placeholder)})]})]}),E===Zh.ConvertToMember?(0,i.jsx)(Rs,{organizationStore:t,permissionsInviteStore:H,onDismiss:U,refreshPage:F}):null,E===Zh.RemoveFromWorkspace?(0,i.jsx)(Hs,{permissionsInviteStore:H,onDismiss:U,organizationStore:t,refreshPage:F,organizationGuests:o}):null,(0,i.jsx)(Hh,{guests:o,usersOnLegalHold:P,loading:r,error:l,organizationStore:t,loadNextPage:d,currentPage:f,loadPreviousPage:x,hasPreviousPage:b,refreshPage:h,hasNextPage:j,selectedIds:C,onSelectAll:k,onUnselectAll:_,onSelectRow:T})]})}var ef=()=>a(45629);const tf={members:[],filters:{},loading:!1,error:void 0,currentCursor:void 0,hasNextPage:!0,nextCursor:void 0,hasPreviousPage:!1,previousCursor:void 0,sortState:void 0,query:"",currentPage:1};function af(e){let{organizationId:t}=e;const a=(0,_().X)("settings_console_edge_cache"),n=function(e){let{organizationId:t}=e;const a=(0,y().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(N().N),[o,i]=(0,s.useState)(tf),r=(0,s.useRef)(!1),l=(0,s.useRef)({}),d=(0,s.useRef)(tf.sortState),c=(0,s.useRef)(tf.query);function u(e){return"actor"===(null==e?void 0:e.column.id)?{columnName:"actor",direction:e.sortAscending?"ascending":"descending"}:"role"===(null==e?void 0:e.column.id)?{columnName:"role",direction:e.sortAscending?"ascending":"descending"}:void 0}const g=(0,s.useCallback)((async e=>{let{cursor:s,filters:o,sortState:r,query:l}=e;const d=at().q;try{const e=await M().callApi({eventName:"getMembersInOrganization",environment:a,data:{organizationId:t,cursor:s,filters:o,sort:u(r),query:l,limit:d}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Ee().HB)(e)}n({data:e.data}),i((t=>({...t,members:e.data.members,loading:!1,error:void 0,hasNextPage:e.data.hasNextPage,hasPreviousPage:e.data.hasPreviousPage,currentPage:e.data.hasPreviousPage?t.currentPage:tf.currentPage})))}catch(c){const e=(0,ws().A)(c);i((t=>({...t,loading:!1,error:e})))}}),[a,t,n]),m=(0,s.useCallback)((async e=>{let{restartSearch:a,cursor:s}=e;if(!t)return;let n=o.loading,r=o.error;a&&(i((e=>({...tf,filters:e.filters,sortState:e.sortState,query:e.query}))),n=tf.loading,r=tf.error),n||r||(i((e=>({...e,loading:!0,members:[]}))),l.current=o.filters,d.current=o.sortState,c.current=o.query,await g({cursor:s,filters:o.filters,sortState:o.sortState,query:o.query}))}),[t,o,g]);(0,s.useEffect)((()=>{!r.current&&Boolean(t)&&(m({restartSearch:!0}),r.current=!0)}),[t,m]),(0,s.useEffect)((()=>{et().n4(l.current,o.filters)||m({restartSearch:!0})}),[o.filters,m]),(0,s.useEffect)((()=>{et().n4(d.current,o.sortState)||m({restartSearch:!0})}),[o.sortState,m]),(0,s.useEffect)((()=>{et().n4(c.current,o.query)||m({restartSearch:!0})}),[o.query,m]);const p=(0,s.useCallback)((async()=>{var e;if(!o.hasNextPage)return;i((e=>({...e,currentPage:e.currentPage+1})));const t=null===(e=o.members[o.members.length-1])||void 0===e?void 0:e.userId;return m({restartSearch:!1,cursor:t?{nextCursorId:t}:void 0})}),[m,o.members,o.hasNextPage]),h=(0,s.useCallback)((async()=>{var e;if(!o.hasPreviousPage)return;i((e=>({...e,currentPage:Math.max(1,e.currentPage-1)})));const t=null===(e=o.members[0])||void 0===e?void 0:e.userId;await m({restartSearch:!1,cursor:t?{previousCursorId:t}:void 0})}),[m,o.members,o.hasPreviousPage]),f=(0,s.useCallback)((e=>{i((t=>({...t,filters:{...t.filters,...e}})))}),[]),x=(0,s.useCallback)((e=>{i((t=>({...t,sortState:e})))}),[]),v=(0,s.useCallback)((e=>{var t;const a=null===(t=o.members[0])||void 0===t?void 0:t.userId;return e&&i((e=>({...e,loading:!0,members:[]}))),g({cursor:a?{currentCursorId:a}:void 0,filters:o.filters,sortState:o.sortState,query:o.query})}),[g,o.members,o.filters,o.sortState,o.query]),b=(0,s.useCallback)((e=>{i((t=>({...t,query:e})))}),[]);return{loadNextPage:p,loadPreviousPage:h,members:o.members,filters:o.filters,loading:o.loading,error:o.error,currentPage:o.currentPage,currentCursor:o.currentCursor,hasNextPage:o.hasNextPage,nextCursor:o.nextCursor,setFilters:f,sortState:o.sortState,setSortState:x,hasPreviousPage:o.hasPreviousPage,previousCursor:o.previousCursor,refreshPage:v,query:o.query,setQuery:b}}({organizationId:t}),o=function(e){let{organizationId:t}=e;const a=(0,y().v3)(),[n,o]=(0,s.useState)(tf),i=(0,s.useRef)(!1),r=(0,s.useRef)({}),l=(0,s.useRef)(tf.sortState),d=(0,s.useRef)(tf.query);function c(e){return"actor"===(null==e?void 0:e.column.id)?{columnName:"actor",direction:e.sortAscending?"ascending":"descending"}:"role"===(null==e?void 0:e.column.id)?{columnName:"role",direction:e.sortAscending?"ascending":"descending"}:void 0}const u=(0,s.useCallback)((async e=>{let{cursor:s,filters:n,sortState:i,query:r}=e;const l=at().q;try{const e=await M().callApi({eventName:"listOrgUsers",environment:a,data:{organizationId:t,cursor:s,filters:(0,ef().wq)({filters:n,defaultFilters:Ni}),sort:c(i),query:r,limit:l}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Ee().HB)(e)}o((t=>({...t,members:e.data.members.map(sf),loading:!1,error:void 0,hasNextPage:Boolean(e.data.nextCursor),nextCursor:e.data.nextCursor,hasPreviousPage:Boolean(e.data.previousCursor),previousCursor:e.data.previousCursor,currentPage:e.data.previousCursor?t.currentPage:tf.currentPage,currentCursor:s})))}catch(d){const e=(0,ws().A)(d);o((t=>({...t,loading:!1,error:e})))}}),[a,t]),g=(0,s.useCallback)((async e=>{var s;let{restartSearch:i,cursor:g}=e;if(!t)return;let m=n.loading,p=n.error;if(i&&(o((e=>({...tf,filters:e.filters,sortState:e.sortState,query:e.query}))),m=tf.loading,p=tf.error),m||p)return;o((e=>({...e,loading:!0,members:[]}))),r.current=n.filters,l.current=n.sortState,d.current=n.query;const h=null===(s=c(n.sortState))||void 0===s?void 0:s.columnName;(0,I().u4)({environment:a,event:{eventName:"org_console_people_table_query",eventProperties:{table:"members",organization_id:t,filter_keys:Object.keys(n.filters),sort_columns:h?[h]:void 0,has_query:Boolean(n.query)}}}),await u({cursor:g,filters:n.filters,sortState:n.sortState,query:n.query})}),[t,n,u,a]);(0,s.useEffect)((()=>{!i.current&&Boolean(t)&&(g({restartSearch:!0}),i.current=!0)}),[t,g]),(0,s.useEffect)((()=>{et().n4(r.current,n.filters)||g({restartSearch:!0})}),[n.filters,g]),(0,s.useEffect)((()=>{et().n4(l.current,n.sortState)||g({restartSearch:!0})}),[n.sortState,g]),(0,s.useEffect)((()=>{et().n4(d.current,n.query)||g({restartSearch:!0})}),[n.query,g]);const m=(0,s.useCallback)((async()=>{if(n.nextCursor)return o((e=>({...e,currentPage:e.currentPage+1}))),g({restartSearch:!1,cursor:n.nextCursor})}),[g,n.nextCursor]),p=(0,s.useCallback)((async()=>{n.previousCursor&&(o((e=>({...e,currentPage:Math.max(1,e.currentPage-1)}))),await g({restartSearch:!1,cursor:n.previousCursor}))}),[g,n.previousCursor]),h=(0,s.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),f=(0,s.useCallback)((e=>{o((t=>({...t,sortState:e})))}),[]),x=(0,s.useCallback)((e=>(e&&o((e=>({...e,loading:!0,members:[]}))),u({cursor:n.currentCursor,filters:n.filters,sortState:n.sortState,query:n.query}))),[u,n.filters,n.sortState,n.query,n.currentCursor]),v=(0,s.useCallback)((e=>{o((t=>({...t,query:e})))}),[]);return{loadNextPage:m,loadPreviousPage:p,members:n.members,filters:n.filters,loading:n.loading,error:n.error,currentPage:n.currentPage,currentCursor:n.currentCursor,hasNextPage:n.hasNextPage,nextCursor:n.nextCursor,previousCursor:n.previousCursor,setFilters:h,sortState:n.sortState,setSortState:f,hasPreviousPage:n.hasPreviousPage,refreshPage:x,query:n.query,setQuery:v}}({organizationId:t});return a?o:n}function sf(e){return{userId:e.id,userEmail:e.email,status:e.status,lastActiveAt:e.lastActiveAt,organizationRole:e.organizationRole,spacesInfo:e.spacesInfo.filter((e=>["owner","membership_admin","member"].includes(e.role)))}}const nf=(0,v().YK)({placeholder:{id:"organizationMemberSubTab.membersSearch.placeholder",defaultMessage:"Search by email or name."},name:{id:"organizationMemberSubTab.sort.name",defaultMessage:"Name"},highestRole:{id:"organizationMemberSubTab.sort.highestRole",defaultMessage:"Highest role"}});function of(e){let{organizationStore:t,userId:a}=e;const s=(0,y().v3)(),n=(0,i.jsx)(v().sA,{id:"organization.people.members.title",defaultMessage:"Manage members"});return(0,i.jsx)(cd().D,{breadcrumbs:[{message:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{(0,gd().i)({environment:s,from:{tabRoute:x().kr,properties:{subtab:x().DE.Members}},organizationId:t.id,tabRoute:x().kr})}},{message:n}],children:(0,i.jsxs)(El().t,{children:[(0,i.jsx)(Ha()._,{title:n,byline:(0,i.jsx)(v().sA,{id:"organization.people.members.byline",defaultMessage:"Add, remove, or change member roles to manage access and collaboration across workspaces"})}),(0,i.jsx)(lf,{organizationStore:t,userId:a})]})})}var rf=function(e){return e.AddNewMembers="add-new-members",e.AddToWorkspace="add-to-workspace",e.RemoveFromWorkspace="remove-from-workspace",e.PromoteToAdmin="promote-to-admin",e.DemoteAdmin="demote-admin",e}(rf||{});function lf(e){let{organizationStore:t,userId:a}=e;const n=(0,v().tz)(),o=(0,y().v3)(),{loadNextPage:r,members:l,loading:d,error:c,setFilters:u,filters:g,setSortState:m,loadPreviousPage:p,currentPage:h,hasPreviousPage:f,hasNextPage:x,refreshPage:b,query:j,setQuery:A}=af({organizationId:t.id}),M=(0,s.useMemo)((()=>l.map((e=>e.userId))),[l]),C=(0,S().K8)((()=>t.getOwnerIds()),[t]),{selectedIds:I,handleToggleId:T,handleSelectAllIds:k,handleUnselectAllIds:_}=Ut({allPossibleIds:M}),D=Do({spaceStores:(0,Ts().l)()}),{membersSet:P}=zo({organizationId:t.id}),{organizationMemberEmailDomains:N}=(0,s.useContext)(R().D),[B,E]=(0,s.useState)(),L=(0,Hn().F)();function O(){E(void 0)}async function U(){await b(),_()}const F=(0,S().K8)((()=>new Pa),[]),H=(0,S().K8)((()=>{const e=I.map((e=>new(z().LU)(o,{table:w().oo,id:e}).getModel())).filter(Ee().O9);return e.map((e=>({type:"existingUser",value:e,spaceRole:void 0})))}),[o,I]);(0,s.useEffect)((()=>{F.setState({...F.state,inviteTargets:H,inviteRole:"read_and_write",isInviteTargetsEmpty:!1})}),[F,H]);const{inviteTargets:V}=(0,S().K8)((()=>({inviteTargets:F.state.inviteTargets})),[F]),q=[{id:qi.id,name:n.formatMessage(nf.name),type:"title"},{id:Gi.id,name:n.formatMessage(nf.highestRole),type:"text"}],[G,K]=(0,s.useState)(),[Y,Q]=(0,s.useState)(!1),[$,X]=(0,s.useState)();(0,s.useEffect)((()=>{if(!G||0===G.length)return void m(void 0);const e=G[0];switch(e.propertyId){case qi.id:m({column:qi,sortAscending:"ascending"===e.direction});break;case Gi.id:m({column:Gi,sortAscending:"ascending"===e.direction})}}),[m,G]);const Z=$??G??[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:L.tableHeader,children:[(0,i.jsxs)("div",{style:L.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:I.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(Fa,{itemsSelectedCount:I.length}),onClick:_}),(0,i.jsx)(Ua,{icon:Rt().x,title:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.addToWorkspace",defaultMessage:"Add to workspace"}),onClick:()=>E(rf.AddToWorkspace)}),(0,i.jsx)(Ua,{icon:Ss,title:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.removeFromWorkspace",defaultMessage:"Remove from workspace"}),onClick:()=>E(rf.RemoveFromWorkspace)}),(0,i.jsx)(Ua,{disabled:I.filter((e=>C.includes(e))).length>0,disabledTooltipText:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.promoteToAdminTooltip",defaultMessage:"Selected members are already organization owners"}),icon:_i().g,title:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.promoteToAdmin",defaultMessage:"Make organization owner"}),onClick:()=>E(rf.PromoteToAdmin)}),(0,i.jsx)(Ua,{disabled:I.filter((e=>C.includes(e))).length===C.length||I.filter((e=>!C.includes(e))).length>0,disabledTooltipText:I.filter((e=>C.includes(e))).length===C.length?(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.demoteFromAdminTooltip.allOrgOwnersSelected",defaultMessage:"You must have at least one organization owner"}):(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.demoteFromAdminTooltip.notOrgOwnerSelected",defaultMessage:"Only available for organization owners"}),icon:Di,title:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.demoteFromAdmin",defaultMessage:"Downgrade organization owner"}),onClick:()=>E(rf.DemoteAdmin)})]}),(0,i.jsx)(Fn().A,{children:(0,i.jsx)(Wa().e,{preventMultipleSorts:!0,sortProperties:q,isMenuOpen:Y,setIsMenuOpen:Q,onApply:e=>{Q(!1),K(e),X(void 0)},currentSorts:Z})}),Z.length>0?(0,i.jsx)(Un().he,{}):null,(0,i.jsx)(hn,{setUserRoles:e=>u({roles:e}),selectedUserRoles:g.roles||[],roles:xn}),(0,i.jsx)(Qs,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.filters.email.title",defaultMessage:"Email"}),emailDomains:N,selectedEmailDomains:g.emailDomains||[],setSelectedEmailDomains:e=>{u({emailDomains:e})}}),(0,i.jsx)(Uo,{selectedSpaceIds:g.spaceIds||[],setSelectedSpaceIds:e=>u({spaceIds:e}),spaceData:D}),(0,i.jsx)(rh,{selectedAccountStatus:g.userStatus,setSelectedAccountStatus:e=>u({userStatus:e})}),(0,i.jsx)(Yh,{selectedLastActiveOption:g.lastActive,setSelectedLastActiveOption:e=>u({lastActive:e})})]}),(0,i.jsxs)("div",{style:L.rightContent,children:[(0,i.jsx)(Va().x,{appliedSorts:G,openSortPillMenu:e=>{e&&X([{propertyId:e,direction:"ascending"}]),Q(!0)},sortProperties:q}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:j,setQueryFilter:A,placeholderText:n.formatMessage(nf.placeholder)}),(0,i.jsx)(W().A,{onClick:()=>{E(rf.AddNewMembers)},children:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.button.addMembers",defaultMessage:"Add members"})})]})]}),B===rf.AddNewMembers?(0,i.jsx)(mn,{onDismiss:O,organizationStore:t,refreshPage:U}):null,B===rf.AddToWorkspace?(0,i.jsx)(Ui,{permissionsInviteStore:F,onDismiss:O,organizationStore:t,refreshPage:U}):null,B===rf.RemoveFromWorkspace?(0,i.jsx)(pn,{permissionsInviteStore:F,onDismiss:O,organizationStore:t,refreshPage:U,membersSpaceIds:df({organizationMembers:l,inviteTargets:V})}):null,B===rf.PromoteToAdmin?(0,i.jsx)(Hi,{permissionsInviteStore:F,onDismiss:O,organizationStore:t,refreshPage:U}):null,B===rf.DemoteAdmin?(0,i.jsx)(Fi,{permissionsInviteStore:F,onDismiss:O,organizationStore:t,refreshPage:U}):null,(0,i.jsx)(Zi,{members:l,usersOnLegalHold:P,loading:d,error:c,loadNextPage:r,loadPreviousPage:p,organizationStore:t,currentPage:h,hasPreviousPage:f,hasNextPage:x,refreshPage:b,userId:a,selectedIds:I,onSelectAll:k,onUnselectAll:_,onSelectRow:T})]})}function df(e){let{organizationMembers:t,inviteTargets:a}=e;const s=new Set;if(t)for(const n of a){const e=t.find((e=>e.userId===n.value.id));for(const t of(null==e?void 0:e.spacesInfo)??[])s.add(t.spaceId)}return s}function cf(e){let{organizationStore:t}=e;const a=(0,y().v3)(),s=(0,i.jsx)(v().sA,{id:"organization.people.roles.title",defaultMessage:"Manage user roles"});return(0,i.jsx)(cd().D,{breadcrumbs:[{message:(0,i.jsx)(v().sA,{id:"organizationRolesSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{(0,gd().i)({environment:a,from:{tabRoute:x().kr,properties:{subtab:x().DE.Roles}},organizationId:t.id,tabRoute:x().kr})}},{message:s}],children:(0,i.jsx)(El().t,{children:(0,i.jsx)(Ha()._,{title:s,byline:(0,i.jsx)(v().sA,{id:"organization.people.roles.byline",defaultMessage:"Create new or manage existing user roles. These custom roles apply to the entire organization."})})})})}function uf(e){var t;let{config:a,navigateToSettingTab:s,organizationStore:n,spaceStores:o}=e;const r=a.getOptions(),l=(0,S().K8)((()=>a.getValueFromOrganization(n)),[n,a]),d=(null===(t=r.find((e=>e.key===l)))||void 0===t?void 0:t.label)??Fu,c=(0,S().K8)((()=>o.map((e=>a.getValueFromSpace(e)))),[o,a]),u=Boolean(l&&c.filter((e=>e!==l)).length)?Fu:d;return(0,i.jsx)(re,{title:a.title,byline:a.byline,rightContent:u,onClick:()=>s(a.settingName)})}var gf=()=>a(761566),mf=()=>a(136583);const pf={settingName:"hover-cards",title:(0,i.jsx)(v().sA,{...mf().y.title}),byline:(0,i.jsx)(v().sA,{...mf().y.byline}),getOptions:xu,getValueFromSpace:e=>yu(Boolean(e.getSetting("disable_people_hover_card"))),getValueFromOrganization:e=>{const t=e.getSettingValue("disable_people_hover_card");if(void 0!==t)return yu(t)},formatValueToSave:e=>({disable_people_hover_card:Su(e)}),formatUndefinedToSave:()=>({disable_people_hover_card:null})},hf={settingName:"people-directory",title:(0,i.jsx)(v().sA,{...gf().H.title}),byline:(0,i.jsx)(v().sA,{...gf().H.byline}),getOptions:xu,getValueFromSpace:e=>yu(Boolean(e.getSetting("disable_people_directory"))),getValueFromOrganization:e=>{const t=e.getSettingValue("disable_people_directory");if(void 0!==t)return yu(t)},formatValueToSave:e=>({disable_people_directory:Su(e)}),formatUndefinedToSave:()=>({disable_people_directory:null})},ff={[pf.settingName]:pf,[hf.settingName]:hf};function xf(e){let{organizationStore:t}=e;const a=(0,y().v3)(),n=(0,Ts().l)(),o=(0,_().X)("organization_console_hover_card_enabled"),r=(0,_().X)("organization_console_people_directory_enabled"),l=(0,s.useCallback)((e=>(0,gd().i)({environment:a,from:{tabRoute:x().kr},organizationId:t.id,tabRoute:x().kr,queryParams:{[fu]:e}})),[a,t.id]);return r||o?(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"settingsConsole.people.peopleDirectorySettings",defaultMessage:"People directory"}),content:(0,i.jsxs)(i.Fragment,{children:[r?(0,i.jsx)(uf,{config:hf,organizationStore:t,spaceStores:n,navigateToSettingTab:l}):null,o?(0,i.jsx)(uf,{config:pf,organizationStore:t,spaceStores:n,navigateToSettingTab:l}):null]})}):null}function vf(e){let{selectedValues:t,setSelectedValues:a,options:s}=e;return(0,i.jsx)(Ys().VX,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationSecuritySettingFilter.filters.setting.title",defaultMessage:"Setting"}),pillIcon:u().gearIcon,selectedItems:t,setSelectedItems:a,items:s.map((e=>{let{key:t,label:a,count:s}=e;return{key:t,value:t,title:a,count:s}}))})}function bf(e){let{selectedValue:t,setSelectedValue:a}=e;return(0,i.jsx)(Ys().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:f().V,selectedItem:t,setSelectedItem:a,shouldUseCheck:!0,items:[{key:"pending",value:"pending",title:(0,i.jsx)(v().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.pending.title",defaultMessage:"With pending changes only"}),shortTitle:(0,i.jsx)(v().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.pending.shortTitle",defaultMessage:"Changes"})},{key:"custom",value:"custom",title:(0,i.jsx)(v().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.custom.title",defaultMessage:"With custom setting only"}),shortTitle:(0,i.jsx)(v().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.custom.shortTitle",defaultMessage:"Custom setting"})}]})}function yf(e){let{searchQuery:t,setSearchQuery:a,filters:n,setFilters:o,options:r,appliedSorts:l,setAppliedSorts:d,config:c}=e;const u=(0,j().IS)((()=>({leftContent:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px",minHeight:28,gap:6},tableHeader:{position:"relative",display:"flex",flexDirection:"row"}})),[]),g=[{id:Wu.id,name:k().A.formatMessage(Vu.name),type:"title"},{id:Gu.id,name:k().A.formatMessage(Vu.members),type:"number"},{id:qu.id,name:k().A.formatMessage(Vu.teams),type:"number"}];Boolean("publish-sites"===c.settingName)&&g.push({id:Qu.id,name:k().A.formatMessage(Vu.sites),type:"number"});Boolean("guest-invites"===c.settingName)&&g.push({id:Yu.id,name:k().A.formatMessage(Vu.guests),type:"number"});const[m,p]=(0,s.useState)(!1),[h,f]=(0,s.useState)(),x=h??l??[];return(0,i.jsxs)("div",{style:u.tableHeader,children:[(0,i.jsxs)("div",{style:u.leftContent,children:[(0,i.jsx)(Fn().A,{children:(0,i.jsx)(Wa().e,{sortProperties:g,isMenuOpen:m,setIsMenuOpen:p,onApply:e=>{p(!1),d(e),f(void 0)},currentSorts:x})}),x.length>0?(0,i.jsx)(Un().he,{}):null,(0,i.jsx)(bf,{selectedValue:n.workspaceFilter,setSelectedValue:e=>o({...n,workspaceFilter:e})}),(0,i.jsx)(vf,{selectedValues:n.settingFilter??[],setSelectedValues:e=>o({...n,settingFilter:e.length?e:void 0}),options:r})]}),(0,i.jsxs)("div",{style:u.rightContent,children:[(0,i.jsx)(Va().x,{appliedSorts:l,openSortPillMenu:e=>{e&&f([{propertyId:e,direction:"ascending"}]),p(!0)},sortProperties:g}),(0,i.jsx)(Ot().nv,{mode:Ot().Ke.AnimatedSearchButton,query:t,setQueryFilter:a})]})]})}function Sf(e){const{organizationStore:t,spaceStores:a,teamStoresForSpace:n,config:o,hasTeamColumn:r}=e,[l,d]=(0,s.useState)({}),[c,u]=(0,s.useState)(),[g,m]=(0,s.useState)(),{pendingOrgSetting:p,pendingSpaceSettings:h,pendingTeamSettings:f}=(0,s.useContext)(mu().p),x=Boolean(Object.values(l).filter((e=>(0,Ee().O9)(e))).length),v=(0,S().K8)((()=>function(e){let{config:t,organizationStore:a,spaceStores:s,teamStoresForSpace:n,pendingOrgSetting:o,pendingSpaceSettings:i,pendingTeamSettings:r}=e;const l={};for(const c of t.getOptions())l[c.key]={option:c,count:0};const d=o??t.getValueFromOrganization(a);if(d&&d!==hu){const e=l[d];e&&(l[d]={...e,count:e.count+1})}for(const c of s){const e=i[c.id]??t.getValueFromSpace(c),a=l[e];if(l[e]={...a,count:a.count+1},t.teamSettingName)for(const s of n[c.id]){const e=r[s.id]??t.getValueFromTeam(s,c),a=l[e];l[e]={...a,count:a.count+1}}}return Object.values(l).map((e=>{let{option:t,count:a}=e;return{...t,count:a}}))}({organizationStore:t,spaceStores:a,config:o,teamStoresForSpace:n,pendingOrgSetting:p,pendingSpaceSettings:h,pendingTeamSettings:f})),[t,a,n,o,p,h,f]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(yf,{appliedSorts:g,setAppliedSorts:m,searchQuery:c,setSearchQuery:u,filters:l,setFilters:d,options:v,config:o}),(0,i.jsx)(eg,{organizationStore:t,spaceStores:a,teamStoresForSpace:n,hasTeamColumn:r,config:o,rowFilterFn:e=>function(e,t,a){let s=!0;return t&&e.title&&(s=s&&e.title.toLowerCase().includes(t.toLowerCase())),a.workspaceFilter&&("custom"===a.workspaceFilter?s=s&&Boolean(e.parentSettingValue)&&e.parentSettingValue!==e.settingValue:"pending"===a.workspaceFilter?s=s&&e.isPending:(0,Ee().HB)(a.workspaceFilter)),a.settingFilter&&(s=s&&a.settingFilter.includes(e.settingValue)),s}(e,c,l),isFiltered:Boolean(c||x),appliedSorts:null!=g&&g.length?g:[{propertyId:"name",direction:"ascending"}]})]})}var jf=()=>a(536894);function wf(e){let{organizationStore:t,config:a,navigateBack:n,breadcrumbBackMessage:o}=e;const r=(0,y().v3)(),l=(0,j().DP)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(N().N),c=t.id,u=(0,Ts().l)(),g=(0,s.useMemo)((()=>u.map((e=>e.id))),[u]),m=Boolean(a.teamSettingName),{teamStores:p}=(0,B().o)(g,!m),{pendingOrgSetting:h,pendingSpaceSettings:f,pendingTeamSettings:x,clearAllPendingSettings:b,hasPendingCentralizedSettings:S}=(0,s.useContext)(mu().p);(0,s.useEffect)((()=>(b(),b)),[b]);const w=(0,s.useCallback)((async()=>{if(S()){const{accept:e}=await(0,jf().A)(l);if(!e)return;b()}n()}),[l,b,S,n]),A=S(),_=(0,s.useCallback)((async()=>{const e=async function(e){let{environment:t,pendingOrgSetting:a,config:s,organizationId:n,updateCacheWithRecordMap:o}=e;if(!a)return;const i=a===hu?s.formatUndefinedToSave():s.formatValueToSave(a),r=await M().callApi({eventName:"updateOrganizationSettings",environment:t,data:{organizationId:n,settings:i}});return"success"===r.type&&o({data:r.data}),r}({environment:r,pendingOrgSetting:h,config:a,organizationId:c,updateCacheWithRecordMap:d}),t=st().lX(g,at().O,(async e=>async function(e){let{environment:t,pendingSpaceSettings:a,pendingTeamSettings:s,spaceId:n,teamStoresForSpace:o,config:i,updateCacheWithRecordMap:r}=e;const l=function(e){let t,{pendingSpaceSettings:a,spaceId:s,config:n}=e;return a[s]&&(t=n.formatValueToSave(a[s])),t}({pendingSpaceSettings:a,spaceId:n,config:i}),d=function(e){let{pendingTeamSettings:t,config:a,teams:s}=e;const n=[];for(const o of s){const e=t[o.id];e&&n.push({teamId:o.id,...a.formatValueToSave(e)})}return n.length?n:void 0}({pendingTeamSettings:s,config:i,teams:o[n]});if(l||d){const e=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:t,data:{spaceId:n,spaceSettings:l,teamSettings:d}});return"success"===e.type&&r({data:e.data}),e}}({environment:r,pendingSpaceSettings:f,pendingTeamSettings:x,spaceId:e,teamStoresForSpace:p,config:a,updateCacheWithRecordMap:d})));!function(e){let{orgResponse:t,spaceResponses:a,pendingOrgSetting:s,pendingSpaceSettings:n,pendingTeamSettings:o,organizationId:r,environment:l,settingName:d}=e;const c=(null==a?void 0:a.find((e=>"failed"===(null==e?void 0:e.type))))??t;"failed"===(null==c?void 0:c.type)?C().f1((0,T().Hu)(k().A.getIntl(),c)):((0,I().u4)({environment:l,event:{eventName:"org_console_security_update_settings",eventProperties:{organization_id:r,space_ids:Object.keys(et().fN(n,(e=>(0,Ee().O9)(e)))),team_ids:Object.keys(et().fN(o,(e=>(0,Ee().O9)(e)))),setting_name:d,was_org_updated:(0,Ee().O9)(s)}}}),lt().D6({label:(0,i.jsx)(v().sA,{id:"organizationSecuritySettingPage.saveSettings.success",defaultMessage:"Successfully saved all settings"})}))}({orgResponse:await e,spaceResponses:await t,pendingOrgSetting:h,pendingSpaceSettings:f,pendingTeamSettings:x,environment:r,organizationId:c,settingName:a.settingName}),b()}),[r,c,a,h,x,f,b,g,p,d]);return(0,i.jsx)(cd().D,{breadcrumbs:[{onClick:w,message:(0,i.jsx)(v().sA,{...o})},{message:a.title}],headerRight:(0,i.jsx)($,{onCancel:b,onSave:_,disabled:!A,saveButtonText:(0,i.jsx)(v().sA,{id:"organizationSecuritySettingPage.saveChanges",defaultMessage:"Save changes"}),isLarge:!0}),children:(0,i.jsxs)(El().t,{children:[(0,i.jsx)(Ha()._,{title:a.title,byline:a.byline}),(0,i.jsx)(Sf,{organizationStore:t,spaceStores:u,teamStoresForSpace:p,hasTeamColumn:m,config:a})]})})}const Af=(0,v().YK)({backBreadcrumb:{id:"organizationPeopleSettingPage.breadcrumb.goBack",defaultMessage:"People"}});function Mf(e){let{organizationStore:t,settingName:a}=e;const n=(0,y().v3)(),o=function(e){return ff[e]}(a),r=(0,s.useCallback)((()=>(0,gd().i)({environment:n,from:{tabRoute:x().kr},organizationId:t.id,tabRoute:x().kr})),[n,t.id]);return(0,i.jsx)(wf,{organizationStore:t,config:o,navigateBack:r,breadcrumbBackMessage:Af.backBreadcrumb})}var Cf=()=>a(825497);function If(e){return(0,i.jsx)(Tf,{...e})}function Tf(e){const t=(0,_a().E)({organizationId:e.organizationId}),a=(0,s.useMemo)((()=>e.subtab?function(e){switch(e){case x().DE.Members:return x().DE.Members;case x().DE.Guests:return x().DE.Guests;case x().DE.Groups:return x().DE.Groups;case x().DE.ManagedUsers:return x().DE.ManagedUsers;case x().DE.Roles:return x().DE.Roles;default:return x().DE.Members}}(e.subtab):void 0),[e.subtab]);if(!t)return null;const n=e.queryParams[fu],o=(0,Ee().O)(ff,n)?n:void 0;if(o)return(0,i.jsx)(Mf,{settingName:o,organizationStore:t});switch(a){case x().DE.Members:return(0,i.jsx)(of,{organizationStore:t,userId:e.userId});case x().DE.Guests:return(0,i.jsx)(Xh,{organizationStore:t});case x().DE.Groups:return(0,i.jsx)(Ph,{organizationStore:t,groupId:e.groupId});case x().DE.ManagedUsers:return(0,i.jsx)(Ah,{organizationStore:t});case x().DE.Roles:return(0,i.jsx)(cf,{organizationStore:t});default:return(0,i.jsx)(kf,{...e})}}function kf(e){var t,a,n;let{organizationId:o}=e;const r=(0,y().v3)(),{availableOrganizationFeatures:l}=(0,s.useContext)(R().D),d=(0,_a().E)({organizationId:o}),c=(0,Cf().o)({organizationId:o}),{state:u,loading:g}=(0,pu().j)(),m=function(){const e=(0,Ts().l)(),t=(0,s.useMemo)((()=>e.map((e=>e.id))),[e]),{permissionGroupsForSpace:a,loadPermissionGroupsForSpace:n}=(0,s.useContext)(R().D);return(0,s.useEffect)((()=>{for(const e of t)n(e)}),[t,n]),{count:(0,s.useMemo)((()=>t.map((e=>{const t=a[e];return(null==t?void 0:t.length)??0})).reduce(((e,t)=>e+t),0)),[t,a]),loading:(0,s.useMemo)((()=>t.some((e=>void 0===a[e]))),[t,a])}}(),p=(0,S().K8)((()=>u.value?u.value.sampleMemberIds.map((e=>new(z().LU)(r,{table:w().oo,id:e}))):[]),[r,u.value]),h=(0,S().K8)((()=>d?d.getOwnerIds().length:void 0),[d]),f=null===(t=u.value)||void 0===t?void 0:t.memberCount,b=null===(a=u.value)||void 0===a?void 0:a.guestCount,A=m.loading?void 0:m.count,M=(0,de().Z)(),C=(0,j().IS)((e=>({actionContainer:{display:"flex",gap:24,justifyContent:"flex-start",alignItems:"center",height:32},divider:{color:e.stroke.secondary,marginTop:38,marginBottom:-12}})),[]),[I,T]=(0,s.useState)(!1);return d?(0,i.jsxs)(ud,{children:[(0,i.jsx)(Ha()._,{title:(0,i.jsx)(v().sA,{id:"organization.people.title",defaultMessage:"People"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.byline",defaultMessage:"Manage access, permissions, and user accounts. Oversee members, guests, and groups seamlessly."}),bylineWidth:"90%"}),(0,i.jsxs)("div",{style:C.actionContainer,children:[(0,i.jsx)(W().A,{onClick:()=>{T(!0)},children:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.button.addMembers",defaultMessage:"Add members"})}),(0,i.jsx)(ce().t,{users:p,totalMemberCount:f,isLoading:g})]}),(0,i.jsx)(Ir().A,{size:1,style:C.divider,dividerColor:C.divider.color}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.title",defaultMessage:"Roles & permissions"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(re,{title:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.members.title",defaultMessage:"Manage members"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.members.byline",defaultMessage:"Add, remove, or adjust member roles"}),rightContent:Boolean(void 0!==h&&void 0!==f)?(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.members.rightContent",defaultMessage:"{numOwners, plural, one {# org owner} other {# org owners}} · {numMembers, plural, one {# member} other {# members}}",values:{numOwners:h,numMembers:f}}):(0,i.jsx)(le().A,{style:M.longShimmer}),onClick:()=>_f({environment:r,organizationId:o,tab:x().DE.Members})}),(0,i.jsx)(re,{title:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.guests.title",defaultMessage:"Manage guests"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.guests.byline",defaultMessage:"Invite for page access or upgrade to members for full workspace access"}),rightContent:Boolean(void 0!==b)?(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.guests.rightContent",defaultMessage:"{numGuests, plural, one {# guest} other {# guests}}",values:{numGuests:b}}):(0,i.jsx)(le().A,{style:M.shortShimmer}),onClick:()=>_f({environment:r,organizationId:o,tab:x().DE.Guests})}),(0,i.jsx)(re,{title:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.groups.title",defaultMessage:"Manage groups"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.groups.byline",defaultMessage:"Add and remove members from permission groups"}),rightContent:Boolean(void 0!==A)?(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.groups.rightContent",defaultMessage:"{numGroups, plural, one {# permission group} other {# permission groups}}",values:{numGroups:A}}):(0,i.jsx)(le().A,{style:M.longShimmer}),onClick:()=>_f({environment:r,organizationId:o,tab:x().DE.Groups})}),(0,i.jsx)(re,{title:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.accounts.title",defaultMessage:"Manage user accounts"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.accounts.byline",defaultMessage:"Manage user accounts with verified domain emails"}),rightContent:Boolean(void 0!==c.count)?(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.accounts.rightContent",defaultMessage:"{numUsers} accounts",values:{numUsers:null===(n=c.count)||void 0===n?void 0:n.usersCount}}):(0,i.jsx)(le().A,{style:M.shortShimmer}),onClick:()=>_f({environment:r,organizationId:o,tab:x().DE.ManagedUsers})}),l.custom_admin_roles_enabled?(0,i.jsx)(re,{title:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.roles.title",defaultMessage:"Manage user roles"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.roles.byline",defaultMessage:"Create new or manage existing user roles"}),rightContent:Boolean(!0)?(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.roles.rightContent",defaultMessage:"{numCustomRoles, plural, one {# custom role} other {# custom roles}}",values:{numCustomRoles:0}}):(0,i.jsx)(le().A,{style:M.shortShimmer}),onClick:()=>_f({environment:r,organizationId:o,tab:x().DE.Roles})}):null]})}),(0,i.jsx)(xf,{organizationStore:d}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.title",defaultMessage:"Managed accounts"}),content:(0,i.jsx)(ah,{organizationStore:d})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.title",defaultMessage:"Account access"}),content:(0,i.jsx)(eh,{organizationStore:d})}),I?(0,i.jsx)(mn,{onDismiss:()=>T(!1),organizationStore:d,refreshPage:async()=>Promise.resolve()}):null]}):null}function _f(e){const{environment:t,organizationId:a,tab:s}=e;(0,gd().i)({environment:t,from:{tabRoute:x().kr},organizationId:a,tabRoute:x().kr,properties:{subtab:s}})}var zf=()=>a(611824);function Df(e){let{organizationStore:t}=e;const{spaceIds:a}=(0,s.useContext)(R().D),n=(0,y().v3)(),o=(0,Ts().l)(),r=()=>{(0,gd().i)({environment:n,from:{tabRoute:x().Xe},organizationId:t.id,tabRoute:x().Vo,properties:{subtab:x().al.Workspaces}})},l=e=>(0,gd().i)({environment:n,from:{tabRoute:x().Xe},organizationId:t.id,tabRoute:x().Xe,queryParams:{[fu]:e}});return(0,i.jsxs)(ud,{children:[(0,i.jsx)(Ha()._,{title:(0,i.jsx)(v().sA,{id:"settingsConsole.security.title",defaultMessage:"Security"}),byline:(0,i.jsx)(v().sA,{id:"settingsConsole.security.organizationSettings.landingPage.description",defaultMessage:"Enforce security settings to {workspaceCount, plural, one {the <workspaceslink>1 workspace</workspaceslink>} other {all <workspaceslink>{workspaceCount} workspaces</workspaceslink>}} in your organization. Once enforced, workspace owners will not be able to change them.",values:{workspaceCount:a.length,workspaceslink:e=>(0,i.jsx)(zf().A,{hoverColor:"blue",onClick:r,children:e})}})}),(0,i.jsx)(Pf,{navigateToSettingTab:l,organizationStore:t,spaceStores:o}),(0,i.jsx)(Nf,{navigateToSettingTab:l,organizationStore:t,spaceStores:o}),(0,i.jsx)(Rf,{navigateToSettingTab:l,organizationStore:t,spaceStores:o})]})}function Pf(e){return(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"settingsConsole.security.organizationSettings.pageAndPublishing.title",defaultMessage:"Publishing & pages"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(uf,{config:Au,...e}),(0,i.jsx)(uf,{config:Cu,...e}),(0,i.jsx)(uf,{config:Iu,...e})]})})}function Nf(e){return(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"settingsConsole.security.organizationSettings.membersAndGuests.title",defaultMessage:"Members & guests"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(uf,{config:zu,...e}),(0,i.jsx)(uf,{config:_u,...e})]})})}function Rf(e){return(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"settingsConsole.security.organizationSettings.integrations.title",defaultMessage:"Integrations"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(uf,{config:Du,...e}),(0,i.jsx)(uf,{config:Pu,...e})]})})}const Bf=(0,v().YK)({breadcrumbBack:{id:"organizationSecuritySettingPage.breadcrumb.goBack",defaultMessage:"Security"}});function Ef(e){let{organizationStore:t,settingName:a}=e;const n=(0,y().v3)(),o=function(e){return Hu[e]}(a),r=(0,s.useCallback)((()=>(0,gd().i)({environment:n,from:{tabRoute:x().Xe},organizationId:t.id,tabRoute:x().Xe})),[n,t.id]);return(0,i.jsx)(wf,{organizationStore:t,config:o,navigateBack:r,breadcrumbBackMessage:Bf.breadcrumbBack})}function Lf(e){let{organizationId:t,queryParams:a}=e;const s=(0,_a().E)({organizationId:t}),n=a[fu],o=(0,Ee().O)(Hu,n)?n:void 0;return s?o?(0,i.jsx)(Ef,{settingName:o,organizationStore:s}):(0,i.jsx)(Df,{organizationStore:s}):null}const Of={general:()=>!0,security:()=>!0,people:e=>{let{features:t,subtab:a}=e;return a!==x().DE.Roles||(t.custom_admin_roles_enabled??!1)},data_and_compliance:e=>{let{features:t}=e;return t.organization_console_new_data_compliance_view_enabled??!1},audit_log:e=>{let{features:t}=e;return!t.organization_console_new_data_compliance_view_enabled},analytics:e=>{let{features:t}=e;return t.organization_console_ga_enabled??!1},content_search:()=>!1},Uf="group-id",Ff={general:{tab:{icon:u().gearIcon,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(Yp,{subtab:e.properties.subtab,...e})},security:{tab:{icon:g().h,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.security",defaultMessage:"Security"})},scene:e=>(0,i.jsx)(Lf,{...e})},people:{tab:{icon:m().peopleIcon,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.people",defaultMessage:"People"})},scene:e=>(0,i.jsx)(If,{subtab:e.properties.subtab,userId:e.queryParams.userId,groupId:e.queryParams[Uf],...e})},data_and_compliance:{tab:{icon:r,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.dataAndCompliance",defaultMessage:"Data & Compliance"})},scene:e=>(0,i.jsx)(lc,{subtab:e.properties.subtab,spaceId:e.queryParams[Hf],...e})},audit_log:{tab:{icon:l().n,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.audit_log",defaultMessage:"Audit log"})},scene:e=>(0,i.jsx)(Pd,{...e,spaceId:e.queryParams[Hf]})},content_search:{tab:{icon:c().U,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.contentSearch",defaultMessage:"Content search"})},scene:e=>(0,i.jsx)(oc,{spaceId:e.queryParams[Hf],...e})},analytics:{tab:{icon:a(412961).o,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.contentAnalytics",defaultMessage:"Analytics"})},scene:e=>(0,i.jsx)(vm,{spaceId:e.queryParams[Hf],subtab:e.properties.subtab,...e})}},Hf="space-id",Vf={general:()=>!0,workspaces:()=>!0,groups:()=>!0,audit_log:()=>!0},Wf={general:{tab:{icon:u().gearIcon,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleUserView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(ou,{...e})},workspaces:{tab:{icon:f().V,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleUserView.tabNames.workspaces",defaultMessage:"Workspaces"})},scene:e=>(0,i.jsx)(yg,{...e})},groups:{tab:{icon:h,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleUserView.tabNames.groups",defaultMessage:"Groups"})},scene:e=>(0,i.jsx)(rg,{...e})},audit_log:{tab:{icon:l().n,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleUserView.tabNames.auditLog",defaultMessage:"Audit log"})},scene:e=>(0,i.jsx)(kc,{...e})}},qf={general:()=>!0,members:()=>!0,teamspaces:()=>!0,pages:()=>!0},Gf={general:{tab:{icon:u().gearIcon,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleGroupView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(Yr,{organizationId:e.organizationId,membersState:e.membersState,teamsState:e.teamsState,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal})},members:{tab:{icon:m().peopleIcon,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleGroupView.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,i.jsx)(ol,{organizationId:e.organizationId,membersState:e.membersState,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal})},teamspaces:{tab:{icon:f().V,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleGroupView.tabNames.teamspaces",defaultMessage:"Teamspaces"})},scene:e=>(0,i.jsx)(ro,{organizationId:e.organizationId,teamsState:e.teamsState,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal})},pages:{tab:{icon:d().d,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleGroupView.tabNames.pages",defaultMessage:"Pages"})},scene:e=>(0,i.jsx)(xl,{organizationId:e.organizationId,groupPageStores:e.groupPageStores,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal,removePagesFromGroup:e.removePagesFromGroup})}},Kf={general:()=>!0,members:()=>!0,guests:()=>b().default.checkGate({gateName:"organization_console_ga_enabled"}),groups:()=>b().default.checkGate({gateName:"organization_console_ga_enabled"}),teamspaces:()=>b().default.checkGate({gateName:"organization_console_ga_enabled"})},Yf={general:{tab:{icon:u().gearIcon,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(Nt,{...e})},members:{tab:{icon:m().peopleIcon,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,i.jsx)(_n,{...e})},guests:{tab:{icon:p().z,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.guests",defaultMessage:"Guests"})},scene:e=>(0,i.jsx)(on,{...e})},groups:{tab:{icon:h,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.groups",defaultMessage:"Groups"})},scene:e=>(0,i.jsx)(ys,{...e})},teamspaces:{tab:{icon:f().V,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.teamspaces",defaultMessage:"Teamspaces"})},scene:e=>(0,i.jsx)(jo,{...e})}},Qf={general:()=>!0,members:()=>!0,browse_content:()=>!1,exports:()=>!1},$f={general:()=>!0,members:()=>!0,browse_content:()=>!0,exports:e=>{let{features:t}=e;return t.legal_holds_exports_enabled??!1}},Xf={general:{tab:{icon:u().gearIcon,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleLegalHoldView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(Hr,{...e})},members:{tab:{icon:f().V,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleLegalHoldView.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,i.jsx)(Ar,{...e})},browse_content:{tab:{icon:c().U,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleLegalHoldView.tabNames.browseContent",defaultMessage:"Browse content"})},scene:e=>(0,i.jsx)(ci,{...e})},exports:{tab:{icon:n().f,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleLegalHoldView.tabNames.exports",defaultMessage:"Exports"})},scene:e=>(0,i.jsx)(Ci,{...e})}}},31996:(e,t,a)=>{a.d(t,{A:()=>n});a(242343);var s=a(163643);const n=function(){return(0,s.jsx)("div",{style:{},children:(0,s.jsx)(a(410194).A,{paragraphs:[{lineHeight:40,lineMargin:5,sectionWidths:[100],repeat:8,sectionMargin:10}]})})}},33176:(e,t,a)=>{a.d(t,{lT:()=>d});a(362833);var s=()=>a(486826),n=()=>a(141666),o=()=>a(524118);const i=7;function r(e){if(void 0===e)return s().c9.utc();const t={zone:"utc"};return"number"==typeof e?s().c9.fromMillis(e,t):s().c9.fromISO(e,t)}function l(e,t){const a=t?r(t):s().c9.utc(),n=r(e??function(e){const{days:t,endDate:a,startDate:n}=e;if(t<=0)throw new(o().yI4)("Days must be greater than 0");const i=a?r(a):s().c9.utc();if(!i.isValid)throw new(o().yI4)(`endDate ${a} is in an invalid format`);const l=n?r(n).toMillis():0,d=i.minus({days:t-1}).toMillis();return Math.max(d,l)}({days:i,endDate:t}));if(!n.isValid)throw new(o().yI4)(`startDate ${e} is in an invalid format`);if(!a.isValid)throw new(o().yI4)(`endDate ${t} is in an invalid format`);if(n>a)throw new(o().yI4)(`startDate ${e} => ${n.toISO()} is after endDate ${t} => ${a.toISO()}`);return{startTimestamp:n.toMillis(),endTimestamp:a.toMillis()}}function d(e,t){const{startTimestamp:a,endTimestamp:s}=l(e,t),o=[];let i=a;for(;i<=s;)o.push(r(i).toISODate()),i+=n().nD;return o}},44971:(e,t,a)=>{a.d(t,{S4:()=>r,am:()=>i,hv:()=>o});var s=()=>a(129978);const n={DowngradeModal:new(s().O2)("DowngradeModal",(async()=>Promise.all([a.e(98071),a.e(62173),a.e(48779),a.e(10815)]).then(a.bind(a,179140)))),RemoveAddOnModal:new(s().O2)("RemoveAddOnModal",(async()=>Promise.all([a.e(98071),a.e(62173),a.e(51466)]).then(a.bind(a,923948)))),DeletePaidWorkspaceModal:new(s().O2)("DeletePaidWorkspaceModal",(async()=>Promise.all([a.e(98071),a.e(62173),a.e(98906)]).then(a.bind(a,922664))))},o=(0,s()._h)(n.DowngradeModal,(e=>e.DowngradeModal)),i=(0,s()._h)(n.RemoveAddOnModal,(e=>e.RemoveAddOnModal)),r=(0,s()._h)(n.DeletePaidWorkspaceModal,(e=>e.DeletePaidWorkspaceModal))},53595:(e,t,a)=>{a.d(t,{H:()=>h});a(242343);var s=()=>a(237385),n=()=>a(174114),o=()=>a(478601),i=()=>a(284594),r=()=>a(653998),l=()=>a(110975),d=()=>a(477784),c=()=>a(392608),u=()=>a(209684),g=()=>a(35462),m=a(163643);const p=(0,r().YK)({emptyAnalyticsHeading:{id:"workspaceAnalyticsTabs.empty.heading",defaultMessage:"No workspace analytics in the last 90 days"},emptyAnalyticsDescription:{id:"workspaceAnalyticsTabs.empty.description",defaultMessage:"It may take some time for workspace analytics information to appear."},disabledAnalyticsHeading:{id:"workspaceAnalyticsTabs.disabled.heading",defaultMessage:"Analytics are disabled"},disabledAnalyticsDescription:{id:"workspaceAnalyticsTabs.disabled.description",defaultMessage:"An admin has turned off page view recording for {name}.{br}This information will not be available in your workspace settings or on individual pages."},disabledAnalyticsDescriptionNoSpaceName:{id:"workspaceAnalyticsTabs.disabled.description.unnamed",defaultMessage:"An admin has turned off page view recording for this space.{br}This information will not be available in your workspace settings or on individual pages."}});function h(e){const t=(0,n().IS)((e=>({outerDiv:{display:"flex",flexDirection:"column",justifyContent:"center",height:"80%",gap:24},innerDiv:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",gap:4},header:{fontSize:16,fontWeight:500},analyticsIcon:{fill:e.text.secondary,padding:20,height:150,width:150},learnMoreIcon:{width:14,height:14},learnMore:{gap:4}})),[]),a=(0,s().v3)(),{type:h,spaceName:f}=e,x=function(e,t){switch(e){case"empty":return{heading:d().A.formatMessage(p.emptyAnalyticsHeading),description:d().A.formatMessage(p.emptyAnalyticsDescription)};case"disabled":const e=t?(0,m.jsx)(r().sA,{...p.disabledAnalyticsDescription,values:{name:t,br:(0,m.jsx)("br",{})}}):(0,m.jsx)(r().sA,{...p.disabledAnalyticsDescriptionNoSpaceName,values:{br:(0,m.jsx)("br",{})}});return{heading:d().A.formatMessage(p.disabledAnalyticsHeading),description:e}}}(h,f);return(0,m.jsx)("div",{style:t.outerDiv,children:(0,m.jsxs)("div",{style:t.innerDiv,children:[(0,o().C)(t.analyticsIcon),(0,m.jsx)(g().A,{isSecondaryColor:!0,style:t.header,children:x.heading}),(0,m.jsx)(g().A,{isSecondaryColor:!0,children:x.description}),(0,m.jsxs)(u().p,{onClick:()=>l().f({environment:a,url:(0,c().xS)("guides.workspaceAnalytics")}),style:t.learnMore,children:[(0,i().$)(t.learnMoreIcon),(0,m.jsx)(g().A,{isSmall:!0,children:(0,m.jsx)(r().sA,{id:"workspaceAnalyticsTabs.disabled.learnMore",defaultMessage:"Learn more"})})]})]})})}},54852:(e,t,a)=>{a.d(t,{A:()=>w});a(362833),a(725707),a(491955),a(500234),a(403517);var s=a(242343),n=()=>a(803290),o=()=>a(599932),i=()=>a(214080),r=()=>a(769884),l=()=>a(409211),d=()=>a(653998),c=()=>a(31448),u=()=>a(861095),g=()=>a(360482),m=()=>a(907721),p=()=>a(714604),h=()=>a(413871),f=()=>a(535906),x=()=>a(858023),v=()=>a(975515),b=()=>a(625880),y=a(163643);const S=(0,d().YK)({invited_page:{id:"PermissionsInviteSearchRequest.userTooltip.invited_page",defaultMessage:"{userNameAndEmail} is invited to this page already"},invited_database:{id:"PermissionsInviteSearchRequest.userTooltip.invite_database",defaultMessage:"{userNameAndEmail} is invited to this database already"},invited_space:{id:"PermissionsInviteSearchRequest.userTooltip.invited_space",defaultMessage:"{userNameAndEmail} is invited to this workspace already"},invited_team:{id:"PermissionsInviteSearchRequest.userTooltip.invited_team",defaultMessage:"{userNameAndEmail} is invited to this teamspace already"},not_in_space:{id:"PermissionsInviteSearchRequest.userTooltip.admin",defaultMessage:"Click to invite {userNameAndEmail}"}});function j(e,t){return e.filter(((e,a)=>a<t))}const w=function(e){const{store:t,shouldShowBots:w,shouldShowGroups:A,sectionRenderLimit:M,membersOnly:C,hideCurrentUser:I,hideUserTypeToken:T,disableInvitedUsers:k,guestsMustBeRequested:_,hideTitle:z,defaultUserTitle:D,performSearchRequest:P}=e,[N,R,B]=(0,n().$y)(e.permissionsInviteStore),E=(0,a(237385).v3)(),{device:L}=E,O=(0,d().tz)(),{tokenQuery:U}=N,F=(0,s.useMemo)((()=>u()._c({environment:{device:L}})),[L]),H=(0,a(174114).IS)((e=>({roleBadge:{...F},invitedBadge:{...F,backgroundColor:e.defaultBadgeBackground}})),[F]),V="invitee",W=(0,n().K8)((()=>{const e=a(985532).A.state.shouldUseEdgeCache,t=a(836331).default.checkGate({gateName:"edge_cache_settings"});return e&&t}),[]),q={request:U,performRequest:e=>P?P({query:e,limit:10,environment:E}):a(235843).hQ({query:e,sectionLimit:{userLimit:10,botLimit:w?10:0,groupLimit:A?10:0,importContactLimit:0},membersOnly:C,environment:E,intl:O,shouldUseEdgeCacheRollout:W}),render:(e,s,n)=>{if(e)return(0,y.jsx)(b().z,{loading:!n,hideTitle:z,children:(0,y.jsx)(v().A,{title:(0,y.jsx)(d().sA,{id:"inviteUserModal.searchInput.errorMessage",defaultMessage:"Something went wrong"})})});const w=s&&{...s,inviteUsers:s.inviteUsers.filter((e=>!(0,u().mQ)({permissionsInviteStore:B,target:e})&&(!I||e.value.id!==E.currentUser.id))),importedContacts:(0,u().GZ)(s.inviteUsers,s.importedContacts)},C=w&&(null==U?void 0:U.length)>0,{inviteUsers:P,inviteGroups:R,importedContacts:L=[]}=C?w:(0,u().Es)({currentInviteActors:w,permissionsInviteStore:B,targetStore:t}),F=[...j(P,M),...j(L,10)].map(((e,s)=>{const n="newUser"===e.type?e.value.email:e.value.id,o=(0,u().$D)(e),c=Boolean(C&&(0,u().VF)({permissionsInviteStore:B,userTarget:e,targetStore:t}));return{key:n,render:s=>{const{tooltip:n,userTypeToken:p}=function(e){const{userTarget:t,targetStore:a,isInvited:s,userSpaceRole:n,styles:o,intl:i}=e,c="newUser"===t.type?null:r().Bj6.fromValue(l().oo,t.value).getDisplayName(i),m=t.value.email,p=c&&c!==m?`${c} (${m})`:m,f=n&&"not_in_space"!==n;if(s)return{tooltip:(0,g().Yu)(a)?i.formatMessage(S.invited_space,{userNameAndEmail:p}):a instanceof h().Bv?i.formatMessage(S.invited_page,{userNameAndEmail:p}):a instanceof h().md?i.formatMessage(S.invited_database,{userNameAndEmail:p}):i.formatMessage(S.invited_team,{userNameAndEmail:p}),userTypeToken:(0,y.jsx)("div",{style:{...o.invitedBadge},children:(0,y.jsx)(d().sA,{id:"inviteUserModal.userRole.invitedBadge.label",defaultMessage:"Invited"})})};if(f){const e=u().S6({role:n,intl:i,nameOrEmail:p});return{tooltip:e.tooltip,userTypeToken:(0,y.jsx)("div",{style:{...o.roleBadge},children:e.userRoleBadge})}}return{tooltip:i.formatMessage(S.not_in_space,{userNameAndEmail:p}),userTypeToken:void 0}}({userTarget:e,targetStore:t,userSpaceRole:o,isInvited:c,styles:H,intl:O});return"existingUser"===e.type?(0,y.jsx)(a(698995).A,{...s,actor:(0,a(950635).A7)(e.value),right:T?void 0:p,tooltip:n,tooltipPlacement:m().W.Left,disabled:k&&c,defaultUserTitle:D}):(0,y.jsx)(a(103151).A,{placement:m().W.Left,alignment:m().C.Start,textWrap:!0,render:t=>(0,y.jsx)(f().A,{...s,...t,icon:(0,i().n)({width:24,height:24}),right:p,title:e.value.email.trim(),disabled:k&&c}),disableTooltip:!n,renderTooltip:()=>n})},action:()=>{if(k&&c)return;if(!N.isInviteTargetsEmpty&&(0,p().qs)(N))return;const t={...e,..."existingUser"===e.type&&{spaceRole:o}};a(528643).kH(E,{subscription_tier:(0,a(764227).AI)(),invite_token_query:U,selected_user_token:e,selected_user_token_rank:s,from:"permission_invite"}),B.setState({...N,inviteTargets:[...N.inviteTargets,t],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:V})}}})),W=j(R,M).map((e=>{const{value:t}=e;return{key:t.id,render:e=>(0,y.jsx)(a(466051)._,{group:t,menuListItemProps:e}),action:()=>{!N.isInviteTargetsEmpty&&(0,p().qs)(N)||B.setState({...N,inviteTargets:[...N.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:V})}}})),q=[],G=N.isInviteTargetsEmpty||!(0,p().qs)(N);if(F.length>0&&G&&q.push({key:"user results",render:e=>(0,y.jsx)(b().z,{...e,loading:!n,hideTitle:z}),items:F}),A&&W.length>0&&G&&q.push({key:"group results",render:e=>(0,y.jsx)(a(88271).A,{...e,title:(0,y.jsx)(d().sA,{id:"inviteUserModal.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!n}),items:W}),0===q.length&&G){const e=(0,o().qh)(N.tokenQuery);if((0,o().DT)(e)){const o={type:"newUser",value:{email:e},source:"email"},i=(0,u().mQ)({target:o,permissionsInviteStore:B});if(!i)return;if(i)return(0,y.jsx)(b().z,{loading:!n,hideTitle:z,children:(0,y.jsx)(v().A,{title:(0,y.jsx)(d().sA,{id:"inviteUserModal.userAlreadyInvitedMessage",defaultMessage:"Already inviting {user}.",values:{user:(0,y.jsx)("span",{style:{fontWeight:c().Wy.bold},children:(0,u().Sk)({intl:O,target:i})})}})})});const r=(s&&s.inviteUsers||[]).find((t=>"existingUser"===t.type&&t.value.email===e));if(r&&"existingUser"===r.type&&(0,u().wF)({store:t,target:r}))return(0,y.jsx)(b().z,{loading:!n,hideTitle:z,children:(0,y.jsx)(v().A,{title:(0,y.jsx)(d().sA,{id:"inviteUserModal.userAlreadyHasPermissionMessage",defaultMessage:"{user} already has permission.",values:{user:(0,y.jsx)("span",{style:{fontWeight:c().Wy.bold},children:(0,a(14931).c6)(O,r.value)})}})})})}else{if(!N.tokenQuery)return null;q.push({key:"user results",render:e=>(0,y.jsx)(b().z,{...e,loading:!n,hideTitle:z,title:_?(0,y.jsx)(d().sA,{id:"inviteUserModal.searchDropdown.requestPeople",defaultMessage:"Keep typing to request inviting an email"}):(0,y.jsx)(d().sA,{id:"inviteUserModal.searchDropdown.addPeople",defaultMessage:"Keep typing to invite email"})}),items:[{key:N.tokenQuery,render:e=>(0,y.jsx)(f().A,{icon:(0,i().n)({width:24,height:24}),title:N.tokenQuery,...e}),action:()=>{}}]})}}return(0,y.jsx)(x().Ay,{type:x().Oh.Vertical,initialFocus:U.length>0?0:void 0,sections:q})}};return(0,y.jsx)(a(921637).A,{...q})}},69260:(e,t,a)=>{a.d(t,{t:()=>m});var s=a(242343),n=()=>a(237385),o=()=>a(174114),i=()=>a(653998),r=()=>a(137476);var l=()=>a(429318),d=()=>a(286404),c=()=>a(996417),u=a(163643);const g=(0,i().YK)({exportButton:{id:"adminContentSearchTab.export",defaultMessage:"Export results"}});function m(e){let{spaceId:t,organizationId:a,filters:m,disabled:p,shouldUseIconButton:h}=e;const[f,x]=(0,s.useState)(!1),v=(0,n().v3)(),b=p||f,y=(0,o().IS)((e=>({button:{opacity:b?.5:1}})),[b]);async function S(){x(!0),function(e,t){r().vd(e,"admin_content_search_analytics_export_requested",t)}(v,{filters:m}),await l().Lw(v,{spaceId:t,organizationId:a,filters:m}),x(!1)}return h?(0,u.jsx)(c().K,{onClick:S,disabled:b}):(0,u.jsx)(d().A,{size:"lg",style:y.button,disabled:b,onClick:S,children:(0,u.jsx)(i().sA,{...g.exportButton})})}},72757:(e,t,a)=>{a.d(t,{A:()=>D});a(362833),a(725707),a(107652),a(491955),a(403517),a(244387);var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(174114),r=()=>a(752903),l=()=>a(294997),d=()=>a(653998),c=()=>a(188877),u=()=>a(975392);function g(e,t){return{state:t,store:e}}class m extends(()=>a(129044))().default{getInitialState(){return{showAutoCompletePopup:!1,defaultTeams:{}}}addedAndCurrentTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"current-default"===t||"add-default"===t}))}addedTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"add-default"===t}))}removedTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"remove-default"===t}))}}const p=new m;function h(e){var t;let{teamStore:a}=e;return null===(t=p.state.defaultTeams[a.id])||void 0===t?void 0:t.state}function f(e,t){const a=p.state,s={...a.defaultTeams};t?s[e.id]=g(e,t):delete s[e.id],p.setState({...a,defaultTeams:s})}var x=()=>a(935091),v=()=>a(858023),b=()=>a(443252),y=()=>a(951540),S=()=>a(88271),j=()=>a(103151),w=()=>a(621301),A=()=>a(809785),M=()=>a(797715),C=()=>a(640979),I=()=>a(622163),T=()=>a(907721),k=()=>a(466321),_=()=>a(424339),z=a(163643);function D(e){let{immediateUpdate:t,onUpdate:a,tokenStyle:r,headerStyle:m,unarchivedTeams:A,description:I,isOrgOwner:_}=e;const D=(0,n().Y0)(),E=(0,d().tz)(),L=(0,n().v3)(),[O,U]=(0,s.useState)(!1),F=(0,o().uB)(p),[H,V]=(0,s.useState)(""),{addedTeams:W,removedTeams:q,addedAndCurrentTeams:G}=(0,o().K8)((()=>({addedAndCurrentTeams:F.addedAndCurrentTeams(),addedTeams:F.addedTeams(),removedTeams:F.removedTeams()})),[F]),K=(0,o().K8)((()=>A.reduce(((e,t)=>(e[t.id]=t.getName(),e)),{})),[A]),Y=(0,o().K8)((()=>A.filter((e=>e.isDefault()))),[A]);(0,s.useEffect)((()=>function(e){const t=p.state,a=e.reduce(((e,t)=>(e[t.id]=g(t,"current-default"),e)),{});p.setState({...t,defaultTeams:a})}(Y)),[Y]);let Q=null;0===A.length?Q=(0,z.jsx)(d().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.noUnarchivedTeamsExist",defaultMessage:"Create your first teamspace to set a default"}):0===W.length&&0===q.length?Q=(0,z.jsx)(d().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.noChangesToExistingDefaultTeams",defaultMessage:"Current selection already matches existing default teams"}):0===G.length&&(Q=(0,z.jsx)(d().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.atLeastOneDefaultTeamMustBeSelected",defaultMessage:"At least one default team must be selected"}));const $=e=>{U(!0),a({addedTeams:e.addedTeams,removedTeams:e.removedTeams}),U(!1)},X=e=>{!function(e){let{teamStore:t}=e;f(t,"add-default"===h({teamStore:t})?null:"remove-default")}({teamStore:e}),t&&$({addedTeams:[],removedTeams:[g(e,"remove-default")]})},Z=e=>{!function(e){let{teamStore:t}=e;f(t,"remove-default"===h({teamStore:t})?"current-default":"add-default")}({teamStore:e}),F.update((e=>({...e,showAutoCompletePopup:!1}))),t&&$({addedTeams:[g(e,"add-default")],removedTeams:[]}),V("")},J=L.currentUser.id,ee=(0,o().K8)((()=>J?A.filter((e=>{const t=e.getSettingsStore().getValue();return!!t&&((_||e.isOwner(J))&&"open"===(0,l().MA)(t)&&G.every((t=>t.store.id!==e.id)))})):[]),[J,A,_,G]),te=(0,c().Ay)(H,ee,(e=>K[e.id]??"")),ae=[];te.length>0&&H.length>0&&ae.push({key:"default-teams-list",render:e=>(0,z.jsx)(S().A,{...e,title:(0,z.jsx)(d().sA,{id:"defaultTeamsInput.defaultTeamList.title",defaultMessage:"Teamspaces"}),loading:!1}),items:te.map((e=>({key:e.id,render:t=>(0,z.jsx)(w().A,{...t,teamStore:e}),action:()=>Z(e)})))});const se=(0,o().K8)((()=>F.state.showAutoCompletePopup&&ae.length>0),[F,ae.length]),ne=(0,i().IS)((e=>({defaultTeamsHeader:{fontSize:14,marginBottom:2,...m},inputAndButtonContainer:{paddingTop:12,display:"flex"},inputContainer:{flexGrow:1},tokenInputMenu:{borderRadius:se?R:N,margin:0},menuList:{maxHeight:300,border:`1px solid ${e.regularDividerColor}`,borderTop:0,borderRadius:B},updateButton:{marginLeft:10,height:35}})),[se,m]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:ne.defaultTeamsHeader,children:(0,z.jsx)(d().sA,{id:"teamsWorkspaceSettings.defaultTeams.title",defaultMessage:"Default teamspaces"})}),I,(0,z.jsxs)("div",{style:ne.inputAndButtonContainer,children:[(0,z.jsx)("div",{style:ne.inputContainer,children:(0,z.jsx)(b().Ay,{popupType:k().n.Popup,placementToOrigin:T().W.Bottom,sameWidthAsOrigin:!0,open:se,borderRadius:B,onDismiss:()=>F.update((e=>({...e,showAutoCompletePopup:!1}))),origin:(0,z.jsx)(M().Ay,{disabled:O||0===A.length,style:ne.tokenInputMenu,focusInitial:D.isMobile,focusAfterAnimation:!0,format:M().le.Share,inputDivStyle:{alignItems:"center"},value:H,onChange:e=>{F.update((e=>({...e,showAutoCompletePopup:!0}))),V(e.target.value)},type:"default-teams",tokens:G.map((e=>(0,z.jsx)(P,{teamStore:e.store,onClickRemove:X,style:r,hideRemoveButton:1===G.length},e.store.id))),placeholder:E.formatMessage({id:"teamsWorkspaceSettings.defaultTeams.inputPlaceholder",defaultMessage:"Select a default teamspace..."}),onRemoveLastToken:()=>{const e=G,t=u().HV(e);t&&X(t.store)},onEmptySubmit:u().D_,showBorder:!0}),render:()=>(0,z.jsx)(x().A,{menuType:C().gu.Popup,tokenInputHeader:!0,disableHeaderBorder:!0,children:(0,z.jsx)("div",{style:ne.menuList,children:(0,z.jsx)(v().Ay,{type:v().Oh.Vertical,initialFocus:0,sections:ae})})}),trapFocus:!1})}),!t&&(0,z.jsx)(j().A,{placement:T().W.Top,alignment:T().C.Center,disableTooltip:null===Q,renderTooltip:()=>Q,style:{width:180},textWrap:!0,render:e=>(0,z.jsx)(y().A,{...e,style:ne.updateButton,disabled:null!==Q||O,size:"lg",onClick:()=>$({addedTeams:W,removedTeams:q}),children:(0,z.jsx)(d().sA,{id:"teamsWorkspaceSettings.updateButton.label.2",defaultMessage:"Update"})})})]})]})}function P(e){const t=(0,n().Y0)(),{teamStore:a,onClickRemove:s,style:i,hideRemoveButton:l}=e,{name:d}=(0,o().K8)((()=>({name:a.getName()})),[a]);return(0,z.jsx)(A().A,{showRemoveButton:!l,isSingle:!1,format:t.isMobile?r().NY.Large:r().NY.Medium,style:{marginLeft:6,...i},onClickRemove:()=>s(a),value:(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,z.jsx)(_().x,{disabled:!0,store:a,size:14,style:{marginRight:4}}),d]})})}const N=3,R=(0,I().Nb)({topLeft:N,topRight:N,bottomLeft:0,bottomRight:0}),B=(0,I().Nb)({topLeft:0,topRight:0,bottomLeft:N,bottomRight:N})},78161:(e,t,a)=>{a.d(t,{M:()=>o});a(242343);var s=()=>a(209684),n=a(163643);function o(e){const{children:t,disabled:a,onClick:o}=e;return(0,n.jsx)(s().p,{onClick:o,disabled:a,style:{justifyContent:"center",marginLeft:6},isBlue:!a,isLightGray:a,children:t})}},79196:(e,t,a)=>{a.d(t,{q:()=>o});a(725707),a(491955);var s=()=>a(803290),n=()=>a(904697);function o(e){const t=(0,n().useTeamsFromCache)();return(0,s().K8)((()=>{if(!e)return!1;const a=t.filter((e=>e.isDefault()&&!e.isArchived()));return 1===a.length&&a[0].id===e}),[e,t])}},81721:(e,t,a)=>{a.d(t,{A:()=>x});var s=a(242343),n=()=>a(237385),o=()=>a(174114),i=()=>a(327845),r=()=>a(653998),l=()=>a(31448),d=()=>a(441288),c=()=>a(502852),u=()=>a(594528),g=()=>a(615917),m=()=>a(356813),p=()=>a(435819),h=()=>a(59175),f=a(163643);function x(e){let{handleSearchQueryChange:t,handleEnterPressed:a,handleInputCleared:x,currentTab:v,isSearchBarAlwaysOpen:b}=e;const y=(0,n().v3)(),{styles:S,isSearchOpen:j,intl:w,handleSearchButtonClick:A,handleSearchDismiss:M,searchQuery:C,setSearchQuery:I}=function(e){let{handleSearchQueryChange:t,handleInputCleared:a,currentTab:i,isSearchBarAlwaysOpen:c}=e;const u=(0,o().IS)((e=>({searchIcon:{width:14,height:void 0,fill:e.text.secondary},topbarIconButton:{display:"flex",alignItems:"center",fontSize:14,height:28,width:28,padding:6,color:e.text.secondary,fill:e.mediumIconColor,fontWeight:l().Wy.regular,lineHeight:1,borderRadius:4},searchInput:{fontSize:14,lineHeight:1,paddingRight:4,color:e.text.primary,marginBottom:1}})),[]),g=(0,n().v3)(),[m,p]=(0,s.useState)(!1),[h,f]=(0,s.useState)(void 0),x=(0,s.useCallback)((()=>{p(!0),i&&d().Z9(g,{current_tab:i})}),[g,i]),v=(0,s.useCallback)((()=>{p(!1),f(void 0),t(void 0),null==a||a()}),[t,a]),b=(0,r().tz)();return{styles:u,isSearchOpen:m||c,intl:b,handleSearchButtonClick:x,handleSearchDismiss:v,searchQuery:h,setSearchQuery:f}}({handleSearchQueryChange:t,handleInputCleared:x,currentTab:v,isSearchBarAlwaysOpen:b});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m().A,{ariaLabel:w.formatMessage({id:"searchPlaceholder",defaultMessage:"Type to search..."}),icon:i().U,iconStyle:S.searchIcon,style:S.topbarIconButton,onClick:A,disableBackground:b}),(0,f.jsx)(g().A,{visible:j,animate:{width:150,opacity:1},initial:{width:0,opacity:0},exit:{width:0,opacity:0},skip:b,children:(0,f.jsx)(p().A,{capture:j,allowEsc:!0,render:e=>(0,f.jsx)("div",{style:{display:"flex",alignItems:"center",overflow:"hidden"},...e,children:(0,f.jsx)(h().A,{style:S.searchInput,format:h().C.Transparent,value:C,onChange:e=>{const a=e.target.value;I(a),t(a)},placeholder:w.formatMessage({id:"searchPlaceholder",defaultMessage:"Type to search..."}),focusInitial:j,showClearButton:!0,onCancel:M,onClick:c().kV,onClearButtonClick:M,onKeyDown:e=>{27===e.keyCode&&M(),a&&(0,u().A)(y,e,"enter")&&a()},onBlur:()=>{!C&&M()}})})})})]})}},86473:(e,t,a)=>{a.d(t,{I:()=>p,f:()=>m});a(403517),a(242343);var s=()=>a(803290),n=()=>a(174114),o=()=>a(346695),i=()=>a(528762),r=()=>a(455831),l=()=>a(653998),d=()=>a(266178),c=()=>a(28210),u=()=>a(35462),g=a(163643);function m(e){let{selectedSpaceId:t,setSelectedSpaceId:a,spaceData:s}=e;const n=p(s,(0,l().tz)());return(0,g.jsx)(d().zr,{pillTitle:(0,g.jsx)(l().sA,{id:"managedUsersTab.table.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:o().I,selectedItem:t,setSelectedItem:a,items:n})}function p(e,t,a){const o=function(e){return(0,n().IS)((t=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block"},optionCaption:{display:"block",color:t.text.secondary,fontSize:12,lineHeight:"15px"},container:{padding:e?"8px 0":"4px 0",overflow:"hidden"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:6,fill:"currentColor"}})),[e])}(a);return(0,s().K8)((()=>e.map((e=>{const s=e.name,n=e.icon?{pointer:{table:i().NX,id:e.id,spaceId:e.id},icon:e.icon}:void 0;return{key:e.id,value:e.id,title:(0,g.jsxs)("div",{style:o.optionContainer,children:[(0,g.jsx)(c().B,{disabled:!0,icon:n,isEmptyPage:!1,size:24,title:s,isLarge:!0,emojiSize:24,isRaw:!1}),(0,g.jsxs)("div",{style:o.container,children:[(0,g.jsx)(u().A,{style:o.optionTitle,children:s}),!a&&(0,g.jsx)(u().A,{style:o.optionCaption,children:(0,r().u2)({product:e.subscriptionTier,intl:t})})]})]}),shortTitle:s}}))),[e,t,o,a])}},101123:(e,t,a)=>{a.d(t,{Y:()=>f});var s=a(242343),n=()=>a(803290),o=()=>a(174114),i=()=>a(484157),r=()=>a(653998),l=()=>a(689510),d=()=>a(457655),c=()=>a(421338),u=()=>a(59175),g=()=>a(529305),m=()=>a(701270),p=()=>a(539048),h=a(163643);function f(){const e=(0,n().O$)(d().A);return e.open?(0,h.jsx)(x,{state:e}):null}function x(e){let{state:t}=e;const[a,n]=s.useState(null),[d,f]=s.useState(""),x=(b=Boolean(a),(0,o().IS)((e=>({input:{padding:"10px, 8px",width:"100%",height:36,background:e.surface.wash,borderRadius:6,border:`1px solid ${b?e.stroke.uiRedPrimary:e.stroke.primary}`,...b?{boxShadow:e.outlineRedInputBoxShadow}:{boxShadow:"none"}}})),[b]));var b;const{title:y,message:S,acceptLabel:j,requiredInputValue:w,content:A,width:M}=t,C=s.useCallback((()=>{v(d)===v(w)?l().V({didConfirm:!0}):n((0,h.jsx)(r().sA,{id:"confirmDialogInput.incorrectInputError.message",defaultMessage:'Please type "{requiredInputValue}" to continue',values:{requiredInputValue:w}}))}),[d,w]);return(0,h.jsx)(p().s,{isOpen:!0,onDismiss:()=>l().V({didConfirm:!1}),areaConstraint:{height:{type:"unlimited",scroll:"allow"},width:{type:"fixed",length:M??420}},render:()=>(0,h.jsx)(g().tf,{showDismissButton:!1,header:(0,h.jsx)(g().YA,{iconAndTitle:(0,h.jsx)(g().ZQ,{iconGroup:i().F,iconColorName:"uiRedPrimary",title:y}),description:S}),footer:(0,h.jsx)(g().aO,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:j,onClick:C}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,h.jsxs)(c().Y1,{gap:12,padding:2,children:[A,(0,h.jsxs)(c().Y1,{gap:4,children:[(0,h.jsx)(u().A,{style:x.input,value:d,onChange:e=>{n(void 0),f(e.target.value)},placeholder:w}),a?(0,h.jsx)(m().D,{styleName:"Caption-12px/Regular",colorName:"uiRedPrimary",children:a}):null]})]})})})}function v(e){return e.trim().toLowerCase().replace(/’/g,"'")}},106408:(e,t,a)=>{a.d(t,{DZ:()=>S,lz:()=>y,xF:()=>v});var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(174114),r=()=>a(908568),l=()=>a(409211),d=()=>a(653998),c=()=>a(91472),u=()=>a(575015),g=()=>a(413871),m=()=>a(356813),p=()=>a(103151),h=()=>a(35462),f=()=>a(59279),x=a(163643);function v(e){const t="userId"in e?e.userId:void 0,a="email"in e?e.email:void 0,r=(0,n().v3)(),m=(0,d().tz)(),[p,v]=(0,s.useState)(!1),j=(0,f().f0)({useThinTitle:!0,containerStyles:{width:"auto"},iconSize:34,icon:(0,x.jsx)("div",{})}),w=(0,i().IS)((t=>({...j,container:{cursor:"pointer",...j.container,...e.styles}})),[j,e.styles]),A=(0,o().K8)((()=>{if(t){const e=new(g().LU)(r,{table:l().oo,id:t});return{userStore:e,isReady:e.isReady(),userEmail:e.getEmail()}}}),[r,t]),M=t?null==A?void 0:A.userEmail:a;return null!=A&&A.isReady||a?(0,x.jsxs)("div",{style:w.container,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[(0,x.jsx)("div",{style:w.summaryContainer,children:(0,x.jsx)(h().A,{isSecondaryColor:!0,style:w.name,showTooltipWhenTruncated:!0,children:M})}),(0,x.jsx)(y,{onCopyClick:async function(e){if(e.stopPropagation(),!M)return void u().D6({label:m.formatMessage(S.toastFailedToCopy)});const t=await c().R.clipboardActions.load();await t.copyString({stringValue:M,environment:r,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard}),u().D6({label:m.formatMessage(S.toastSuccessfulCopy)})},isHovered:p})]}):(0,x.jsx)(b,{})}function b(){return(0,x.jsx)(f().mf,{})}function y(e){let{onCopyClick:t,isHovered:a,containerStyles:s,size:n=20}=e;const o=(0,d().tz)().formatMessage(S.copy),l=(0,i().IS)((e=>({container:{display:"flex",background:e.surface.elevated,padding:2,boxShadow:e.shadowSM,borderRadius:6,marginLeft:8,marginRight:2,visibility:a?"visible":"hidden",...s},buttonStyle:{height:n,width:n,boxShadow:"none"},iconStyle:{color:e.text.secondary,fill:e.text.secondary}})),[a,n,s]);return(0,x.jsx)(p().A,{renderTooltip:()=>o,render:e=>(0,x.jsx)("div",{style:l.container,...e,children:(0,x.jsx)(m().A,{onClick:t,ariaLabel:o,hasBackground:!0,icon:r().n,showShadow:!0,iconStyle:l.iconStyle,style:l.buttonStyle})})})}const S=(0,d().YK)({copy:{defaultMessage:"Copy to Clipboard",id:"baseTable.emailCell.copyButton.copyToClipboard"},toastFailedToCopy:{defaultMessage:"Failed to copy",id:"baseTable.emailCell.copyButton.failedToCopy"},toastSuccessfulCopy:{defaultMessage:"Copied email to clipboard",id:"baseTable.emailCell.copyButton.successfulCopy"}})},110879:(e,t,a)=>{a.d(t,{A:()=>M,B:()=>k});a(725707),a(491955),a(500234),a(403517),a(113085),a(242343);var s=()=>a(237385),n=()=>a(836693),o=()=>a(569948),i=()=>a(680369),r=()=>a(653998),l=()=>a(220413),d=()=>a(975392),c=()=>a(236339),u=()=>a(44405),g=()=>a(502852),m=()=>a(640979),p=()=>a(619493),h=()=>a(535906),f=()=>a(97787),x=()=>a(356813),v=()=>a(932322),b=()=>a(397791),y=()=>a(443252),S=()=>a(88271),j=()=>a(103151),w=a(163643);const A=(0,r().YK)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.collectionSortMenu.inputPlaceholder"},deleteButtonTooltip:{defaultMessage:"Remove sort rule",id:"database.sortMenu.deleteButtonTooltip"}});const M=function(e){let{schema:t,format:o,sorts:i,showDeleteAll:l,disabled:d,parentStore:g,collectionContextStore:p,onChange:h,onDeleteAll:f}=e;const x=(0,s().v3)(),{device:v}=x,b=!!Object.keys(t).some((e=>!i.find((t=>t.property===e)))),j=l&&i.length>0;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(z,{sorts:i,schema:t,disabled:d,parentStore:g,collectionContextStore:p,onChange:h}),(b||j)&&(0,w.jsxs)(S().A,{children:[b&&(0,w.jsx)(a(273520).Ay,{popupType:v.isMobile?y().nl.SlideUp:y().nl.Popup,renderOrigin:e=>(0,w.jsx)(u().A,{icon:a(178063).plusIcon,isGray:!0,title:(0,w.jsx)(r().sA,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"}),...e}),render:e=>{let s;return s=v.isMobile?{menuType:m().gu.ActionSheet}:{menuType:m().gu.Popup,width:280,height:287},(0,w.jsx)(a(935091).A,{...s,children:(0,w.jsx)(a(573951).A,{schema:t,format:o,getProperties:()=>Object.entries(t).filter((e=>{let[t,s]=e;return!i.find((e=>e.property===t))&&(0,a(716605).oH)(s)})).map((e=>{let[t]=e;return t})),onAccept:a=>{!function(e,t,a,s,n,o){var i;if(!e)return;const r=null===(i=a[e])||void 0===i?void 0:i.type,l=[...s,{property:e,direction:"ascending"}];n(l),(0,c().X)({environment:t,action:"create_sort_accept",collectionContextStore:o,property_type:r})}(a,x,t,i,h,p),e.close()},inputPlaceholder:a(477784).A.formatMessage(A.inputPlaceholder)})})}}),j&&(0,w.jsx)(u().A,{icon:n().trashIcon,isRed:!0,isGray:!0,title:(0,w.jsx)(r().sA,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"}),onClick:()=>function(e,t,a,s){t([]),null==s||s(),(0,c().X)({environment:e,action:"delete_all_sorts",collectionContextStore:a})}(x,h,p,f)})]})]})};function C(e,t,a,s,n,o){s(n.map(((a,s)=>s===e?t:a))),(0,c().X)({environment:a,collectionContextStore:o,action:"update_sort"})}function I(e,t,a,s,n){a(s.filter(((t,a)=>a!==e))),(0,c().X)({environment:t,action:"delete_sort",collectionContextStore:n})}function T(e){let{index:t,onChange:a,sorts:o,collectionContextStore:i}=e;const d=(0,s().v3)();return(0,w.jsx)(h().A,{title:(0,w.jsx)("div",{style:{color:l().Ay.red},children:(0,w.jsx)(r().sA,{defaultMessage:"Delete",id:"database.viewSettings.sortTab.mobileDeleteButtonTitle"})}),icon:(0,w.jsx)(b().I,{icon:n().trashIcon,color:"redPrimary"}),onClick:()=>I(t,d,a,o,i),focused:!1})}function k(e){let{onDeleteClick:t}=e;const a=(0,r().tz)();return(0,w.jsx)(j().A,{render:e=>(0,w.jsx)(x().A,{ariaLabel:a.formatMessage(A.deleteButtonTooltip),icon:o().xMarkSmallIcon,iconStyle:{width:i().Ev.sm,height:i().Ev.sm},onClick:t,style:{marginRight:-6},...e}),renderTooltip:()=>a.formatMessage(A.deleteButtonTooltip)})}function _(e){let{sort:t,index:a,schema:n,disabled:o,parentStore:i,collectionContextStore:r,onChange:l,sorts:d}=e;const c=(0,s().v3)(),{device:u}=c;return u.isMobile?(0,w.jsxs)(S().A,{children:[(0,w.jsx)(p().Ay,{index:a,sort:t,schema:n,parentStore:i,collectionContextStore:r,onChange:(e,t)=>C(e,t,c,l,d,r)}),!o&&(0,w.jsx)(T,{onChange:l,sorts:d,collectionContextStore:r,index:a})]}):(0,w.jsx)(S().A,{extraTopPadding:!0,desktopStyle:{padding:"8px 0 0 8px",width:"100%"},children:(0,w.jsx)(v().Ay,{showDragHandle:!u.isMobile&&!o,title:(0,w.jsx)("div",{style:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},onMouseDown:g().tr,children:(0,w.jsx)(p().Ay,{index:a,sort:t,schema:n,parentStore:i,collectionContextStore:r,onChange:(e,t)=>C(e,t,c,l,d,r)})}),right:!o&&(0,w.jsx)(k,{onDeleteClick:()=>I(a,c,l,d,r)}),rightStyle:{marginRight:19}})})}function z(e){let{sorts:t,schema:a,disabled:n,parentStore:o,collectionContextStore:i,onChange:r}=e;const l=(0,s().v3)(),{device:u}=l;if(u.isMobile)return(0,w.jsx)(w.Fragment,{children:t.map(((e,s)=>(0,w.jsx)(_,{schema:a,disabled:n,parentStore:o,collectionContextStore:i,onChange:r,sorts:t,sort:e,index:s},s)))});{const e=t.map(((e,t)=>t.toString()));return e.length>0?(0,w.jsx)("div",{style:{marginBottom:2},children:(0,w.jsx)(f().Ay,{direction:"vertical",keys:e,renderKey:e=>(0,w.jsx)(_,{schema:a,disabled:n,parentStore:o,collectionContextStore:i,onChange:r,sorts:t,sort:t[parseInt(e)],index:parseInt(e)}),onDrop:e=>function(e,t,a,s,n){a(d().oE(e.map((e=>s[parseInt(e)])))),(0,c().X)({environment:t,action:"reorder_sorts",collectionContextStore:n})}(e,l,r,t,i)})}):null}}},115692:(e,t,a)=>{a.r(t),a.d(t,{iconDefinition:()=>s,peopleIcon:()=>n});a(242343);const s={viewBox:"0 0 20 20",svg:(0,a(163643).jsx)("path",{d:"M11.794 3.936c.57-.71 1.414-1.141 2.456-1.141s1.886.43 2.456 1.14c.558.696.823 1.618.823 2.582s-.265 1.885-.823 2.58c-.57.71-1.414 1.141-2.456 1.141s-1.886-.43-2.456-1.14c-.558-.696-.823-1.618-.823-2.581 0-.964.265-1.886.823-2.581m.975.782c-.341.426-.548 1.052-.548 1.799s.207 1.373.548 1.798c.33.41.813.673 1.481.673s1.152-.262 1.481-.673c.342-.425.548-1.051.548-1.798s-.206-1.373-.548-1.799c-.33-.41-.813-.673-1.48-.673-.67 0-1.152.263-1.482.673M5.75 3.625c-.957 0-1.734.396-2.259 1.05-.513.64-.755 1.484-.755 2.362s.242 1.723.755 2.362c.525.654 1.302 1.05 2.259 1.05s1.734-.396 2.259-1.05c.513-.64.755-1.484.755-2.362s-.242-1.723-.755-2.362c-.525-.654-1.302-1.05-2.259-1.05M3.986 7.037c0-.661.183-1.21.48-1.58.284-.354.701-.582 1.284-.582s1 .228 1.284.582c.297.37.48.919.48 1.58s-.183 1.21-.48 1.58c-.284.354-.701.582-1.284.582s-1-.228-1.284-.583c-.297-.37-.48-.918-.48-1.579m-.948 8.918h4.69c.114.467.337.894.634 1.25H3.038c-.68 0-1.327-.286-1.742-.764-.432-.498-.606-1.209-.265-1.92.823-1.72 2.636-2.896 4.719-2.896 1.13 0 2.18.346 3.035.936a6.6 6.6 0 0 0-.681 1.05 4.1 4.1 0 0 0-2.354-.736c-1.611 0-2.98.908-3.592 2.186-.1.21-.063.393.082.56.161.186.455.334.798.334M14.25 11.21c-2.334 0-4.354 1.36-5.202 3.323-.31.715-.125 1.419.308 1.912.419.476 1.065.76 1.744.76h6.3c.679 0 1.325-.284 1.743-.76.434-.493.618-1.197.309-1.912-.848-1.963-2.868-3.324-5.202-3.324m-4.055 3.818c.646-1.494 2.208-2.569 4.055-2.569s3.409 1.075 4.054 2.57a.52.52 0 0 1-.1.59c-.166.19-.461.336-.804.336h-6.3c-.343 0-.639-.146-.805-.336a.52.52 0 0 1-.1-.59"})},n=(0,a(680369).wt)("people",s)},126910:(e,t,a)=>{a.d(t,{K4:()=>S,nb:()=>y,Ws:()=>j,x5:()=>A});var s=a(242343),n=()=>a(237385),o=()=>a(174114),i=()=>a(554834);a(725707),a(107652),a(403517);var r=()=>a(870122),l=()=>a(653998),d=()=>a(818369),c=()=>a(868325),u=()=>a(477784),g=()=>a(204435),m=()=>a(59175),p=()=>a(529305),h=()=>a(350979),f=()=>a(701270),x=()=>a(539048),v=()=>a(396218),b=a(163643);function y(e){const{organizationId:t,onDismiss:a,onSubmit:o}=e,r=A(),g=(0,n().v3)(),[m,h]=(0,s.useState)(),[f,y]=(0,s.useState)(),M=async()=>{if(!m)return y(w.invalidDomainError);if(!function(e){const{domain:t,allowSubDomain:a}=e,s=t.split(".").map((e=>e.replace(/\s/g,"").toLowerCase())),n=a?127:2;return s.length>=2&&s.length<=n&&s.every((e=>e.length>0&&e.length<=63))?s.join("."):void 0}({domain:m,allowSubDomain:!0}))return y(w.invalidDomainError);const e=await d().callApi({eventName:"createDomainVerificationCode",environment:g,data:{type:"org_saml_config",domain:m,organizationId:t}});"success"===e.type?o((0,i().pl)(e.data.domainVerification)):y((0,c().Hu)(u().A.getIntl(),e))};return(0,b.jsx)(x().s,{isOpen:!0,onDismiss:a,render:e=>{let{sizeRange:t}=e;return(0,b.jsx)(p().tf,{showDismissButton:!1,sizeRange:t,header:(0,b.jsx)(j,{}),footer:(0,b.jsx)(v().jl,{primaryText:(0,b.jsx)(l().sA,{...w.addButton}),primaryAction:M,secondaryText:(0,b.jsx)(l().sA,{...w.cancelButton}),secondaryAction:a}),children:(0,b.jsx)("div",{style:r.content,children:(0,b.jsx)(S,{pendingDomain:m,setPendingDomain:h,error:f})})})}})}function S(e){let{pendingDomain:t,setPendingDomain:a,error:s}=e;const n=A();return(0,b.jsxs)(g().VP,{gap:8,children:[(0,b.jsx)(f().D,{colorName:"secondary",styleName:"Body-12px/Medium",children:(0,b.jsx)(l().sA,{...w.inputLabel})}),(0,b.jsx)(m().A,{style:n.input,value:t,placeholder:u().A.formatMessage(w.emailDomainPlaceholder),onChange:e=>a(e.target.value),errorOutline:Boolean(s),inputElementAttributes:{required:!0,"aria-describedby":"domain-verification-validation-errors"}}),s?(0,b.jsx)("div",{style:n.error,children:(0,b.jsx)(h().R,{id:"domain-verification-validation-errors",error:s})}):null]})}function j(){const e=A();return(0,b.jsx)(v().rQ,{icon:(0,r().globeIcon)(e.headerIcon),title:(0,b.jsx)(l().sA,{...w.title}),byline:(0,b.jsx)(l().sA,{...w.byline})})}const w=(0,l().YK)({title:{id:"orgConsole.emailDomains.addEmailDomainModal.title",defaultMessage:"Add email domain"},byline:{id:"orgConsole.emailDomains.addEmailDomainModal.byline",defaultMessage:"Verify email domain to manage associated users and workspaces."},addButton:{id:"orgConsole.emailDomains.addEmailDomainModal.button.add",defaultMessage:"Get verification code"},cancelButton:{id:"orgConsole.emailDomains.addEmailDomainModal.button.cancel",defaultMessage:"Cancel"},inputLabel:{id:"orgConsole.emailDomains.addEmailDomainModal.domainInputLabel",defaultMessage:"Enter email domain"},invalidDomainError:{id:"orgConsole.emailDomains.addEmailDomainModal.invalidDomainError",defaultMessage:"Invalid domain, please check its format and spelling"},emailDomainPlaceholder:{id:"orgConsole.emailDomains.addEmailDomainModal.emailDomainPlaceholder",defaultMessage:"notion.so"}});function A(){return(0,o().IS)((e=>({headerIcon:{height:32,width:32,fill:e.icon.secondary},content:{width:v().J2},error:{height:15},input:{paddingTop:6,paddingBottom:6}})),[])}},136583:(e,t,a)=>{a.d(t,{O:()=>u,y:()=>c});a(242343);var s=()=>a(237385),n=()=>a(803290),o=()=>a(653998),i=()=>a(84543),r=()=>a(547851),l=()=>a(90760),d=a(163643);const c=(0,o().YK)({title:{id:"spacePermissionsSettings.people.peopleHoverCard.title",defaultMessage:"People cards"},byline:{id:"spacePermissionsSettings.people.peopleHoverCard.byline",defaultMessage:"Show a user’s information on hover"}});function u(e){let{spaceStore:t,isLocked:a,isMobile:u}=e;const g=(0,s().v3)(),m=(0,n().K8)((()=>Boolean(t.getSetting("disable_people_hover_card"))),[t]);return(0,d.jsx)(l().A,{isMobile:u,title:(0,d.jsx)(o().sA,{...c.title}),caption:(0,d.jsx)(o().sA,{...c.byline}),type:"toggle",isOn:!m,onToggle:()=>{a||function(e){let{environment:t,spaceStore:a,newValue:s}=e;i().createAndCommit({userAction:"SpacePermissionsSettings.DisablePeopleHoverCardSetting",environment:t,canUndo:!0,perform:e=>{i().applyOperation({store:a,operation:{pointer:a.pointer,path:["settings","disable_people_hover_card"],command:"set",args:s},transaction:e})}})}({environment:g,spaceStore:t,newValue:!m})},isLocked:a,lockedTooltip:a?(0,r().C)():void 0})}},137552:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(129044))().default{getInitialState(){return{name:"",emailDomains:[]}}getValueForSpace(e){if(e.isDefined())return{name:e.getName()||"",emailDomains:e.getEmailDomains()}}}const n=s},152124:(e,t,a)=>{a.d(t,{V:()=>u});a(242343);var s=()=>a(16791),n=()=>a(174114),o=()=>a(846581),i=()=>a(653998),r=()=>a(103151),l=()=>a(35462),d=()=>a(907721),c=a(163643);function u(e){const{auditLogEntry:t,id:a}=e,u=(0,n().IS)((()=>({container:{display:"block",width:"100%"}})),[]);return(0,c.jsx)(r().A,{renderTooltip:()=>(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",fontVariantNumeric:"tabular-nums"},children:(0,c.jsx)("div",{children:(0,c.jsx)(i().sA,{id:"auditLogSettings.timeTooltip.utcTime",defaultMessage:"UTC: {time}",values:{time:(0,o().qV)(t.serverTimestamp)}})})}),render:e=>(0,c.jsx)("div",{id:a,style:u.container,children:(0,c.jsx)(l().A,{isSecondaryColor:!0,...e,children:(0,o().W_)(t.serverTimestamp,"medium_with_time",s().locale)})}),placement:d().W.Bottom})}},152204:(e,t,a)=>{a.d(t,{u:()=>r});a(242343);var s=()=>a(653998),n=()=>a(76394),o=()=>a(59279),i=a(163643);function r(e){let{pageStatus:t}=e;return(0,i.jsx)(o().s7,{useThinTitle:!0,title:l(t)})}function l(e){switch(e){case"alive":return(0,i.jsx)(s().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.active",defaultMessage:"Active"});case"in_trash":return(0,i.jsx)(s().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.trash",defaultMessage:"In Trash"});case"deleted_from_trash":return(0,i.jsx)(s().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.retained",defaultMessage:"Retained"});default:(0,n().HB)(e)}}},152547:(e,t,a)=>{a.d(t,{A:()=>g,W:()=>u});var s=a(242343),n=()=>a(174114),o=()=>a(267521),i=()=>a(209684),r=()=>a(517198),l=()=>a(701270),d=()=>a(950786),c=a(163643);function u(e){let{headerText:t,mainText:a,bottom:u,onClick:g,isLoading:m,disabled:p}=e;const[h,f]=s.useState(!1),x=(0,n().IS)((e=>({loadingMainText:{width:140,borderRadius:4,height:25},loadingBottom:{width:120,borderRadius:4,height:24},container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:20,width:"100%",padding:16,borderRadius:d().V.medium,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,boxShadow:d().v,height:"auto",flex:"1 1 200px"},containerDark:{background:e.accentColors.translucentGray[30],borderColor:e.stroke.primary},content:{display:"flex",flexDirection:"column",gap:12},textContainer:{display:"flex",flexDirection:"column",gap:8},mainText:{color:e.accentColors.gray[900],fontSize:20},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:h?e.accentColors.translucentGray[300]:e.accentColors.gray[100],height:20,width:20},icon:{height:20,width:20,padding:4,color:h?e.accentColors.gray[800]:e.icon.primary,transform:"rotate(270deg)"},bottomContainer:{minHeight:28}})),[h]);return(0,c.jsxs)(i().p,{onClick:g,style:x.container,shouldShrink:!0,hoveredStyle:{...x.container,...x.containerDark},pressedStyle:{...x.container,...x.containerDark},onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),disabled:p,children:[(0,c.jsxs)("div",{style:x.content,children:[(0,c.jsxs)("div",{style:x.textContainer,children:[(0,c.jsx)(l().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:t}),m?(0,c.jsx)(r().A,{style:x.loadingMainText}):(0,c.jsx)(l().D,{customStyles:x.mainText,styleName:"UITitle-Medium-20px/Semibold",colorName:"primary",children:a})]}),(0,c.jsx)("div",{style:x.bottomContainer,children:m?(0,c.jsx)(r().A,{style:x.loadingBottom}):u})]}),!p&&(0,c.jsx)("div",{style:x.iconButton,children:(0,o().arrowChevronSingleDownFillIcon)(x.icon)})]})}const g=u},157111:(e,t,a)=>{a.d(t,{H:()=>f,K:()=>x});var s=a(242343),n=()=>a(237385),o=()=>a(339189),i=()=>a(653998),r=()=>a(76394),l=()=>a(129243),d=()=>a(145046),c=()=>a(477784),u=()=>a(907721),g=()=>a(209684),m=()=>a(103151),p=a(163643);const h=(0,i().YK)({failedCreatingNewScimToken:{id:"scimTokenSettings.error.failedCreatingNewScimToken",defaultMessage:"Failed to create a new SCIM token, please try again later."}});async function f(e){let{environment:t,spaceStore:a,userStore:s}=e;const{botStore:n,transactionPromise:o}=l().gI({environment:t,spaceStore:a,name:"SCIM",userId:s.id,spaceRole:"editor",type:"scim"});return await o,n.id}function x(e){const[t,a]=(0,s.useState)(!1),l=(0,n().v3)();const x=!t&&"Able"===e.tokenCreationAbility,v=t||"Able"!==e.tokenCreationAbility,b=(0,p.jsx)(g().p,{isBlue:x,isLightGray:v,disabled:v,style:{position:"relative",marginLeft:"auto",marginRight:0},icon:e=>(0,o().W)({...e,width:14,height:14,fill:"inherit",marginRight:"6px"}),onClick:async function(){a(!0);try{const t=await f({...e,environment:l});e.onNewScimToken(t)}catch(t){d().f1(c().A.formatMessage(h.failedCreatingNewScimToken))}a(!1)},children:(0,p.jsx)(i().sA,{id:"scimTokenSettings.NewSCIMTokenButton.title",defaultMessage:"Add token"})});let y;switch(e.tokenCreationAbility){case"Able":return b;case"Undefined":y=(0,p.jsx)(i().sA,{defaultMessage:"Not able to create a new SCIM token right now. Please try again later.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.undefined"});break;case"SpaceHasExistingToken":y=(0,p.jsx)(i().sA,{defaultMessage:"To create a new SCIM token, please revoke the existing token.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.spaceHasLegacyToken"});break;case"UserHasExistingToken":y=(0,p.jsx)(i().sA,{defaultMessage:"You already have a registered SCIM token. To create a new one, please revoke the token created by you.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.userHasExistingToken"});break;default:(0,r().HB)(e.tokenCreationAbility)}return(0,p.jsx)(m().A,{textWrap:!1,renderTooltip:()=>y,placement:u().W.Right,render:e=>(0,p.jsx)("div",{...e,style:{paddingLeft:"4px"},children:b})})}},157440:(e,t,a)=>{a.d(t,{u:()=>s});const s=(0,a(680369).xh)("questionMarkCircle",{default:{loader:()=>a.e(82106).then(a.bind(a,155342))},small:{loader:()=>a.e(82106).then(a.bind(a,350492))},fill:{loader:()=>a.e(82106).then(a.bind(a,85534))},fillSmall:{loader:()=>a.e(82106).then(a.bind(a,309175))}},["question","query","inquiry","uncertain","unknown","help","circle"])},161813:(e,t,a)=>{a.d(t,{Z:()=>c,c:()=>d});var s=()=>a(803290),n=()=>a(455831),o=()=>a(750177),i=()=>a(485966),r=()=>a(613313),l=()=>a(159448);function d(e){const{currentSpaceStore:t}=(0,s().O$)(i().default),a=e??t;return(0,s().K8)((()=>{const e=(null==a?void 0:a.getSubscriptionTier())??"free";return(0,n().rV)(e,"business")}),[a])}function c(){const{currentSpaceStore:e}=(0,s().O$)(i().default),t=(0,l().lh)({spaceId:null==e?void 0:e.id});return(0,s().K8)((()=>{const a=(null==e?void 0:e.getSubscriptionTier())??"free";return!(0,r().hG)()&&(0,n().rV)(a,"business")||(0,o().e)({billingData:t})}),[e,t])}},162028:(e,t,a)=>{a.d(t,{TD:()=>o,YS:()=>i});var s=()=>a(129978);const n={ConfirmHIPAAModal:new(s().O2)("ConfirmHIPAAModal",(async()=>a.e(77761).then(a.bind(a,446850)))),HIPAASuccessModal:new(s().O2)("HIPAASuccessModal",(async()=>a.e(50568).then(a.bind(a,518607))))},o=(0,s()._h)(n.ConfirmHIPAAModal,(e=>e.ConfirmHIPAAModal)),i=(0,s()._h)(n.HIPAASuccessModal,(e=>e.HIPAASuccessModal))},164428:(e,t,a)=>{a.d(t,{Z:()=>b});a(725707),a(491955),a(403517);var s=a(242343),n=()=>a(174114),o=()=>a(348588),i=()=>a(727171),r=()=>a(662505),l=()=>a(477784),d=()=>a(640979),c=()=>a(907721),u=()=>a(466321),g=()=>a(535906),m=()=>a(935091),p=()=>a(858023),h=()=>a(443252),f=()=>a(88271),x=()=>a(634369),v=a(163643);function b(e){const t=(0,n().IS)((e=>({popup:{width:125,marginLeft:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:a,hideAllTime:b}=e,[y,S]=(0,s.useState)(!1),j=i().jf.filter((e=>!b||"all_time"!==e)).map((t=>{const a=()=>{e.onChangeFilter(t),S(!1)};return{key:t,action:()=>{},render:()=>(0,v.jsx)(g().A,{focused:!1,onClick:a,title:l().A.formatMessage(i().jy[t])})}})),w=(0,v.jsx)(r().A,{on:Boolean(a),wrapStyle:t.pillStyle,icon:(0,o().D)({width:16,marginRight:6,fill:"currentColor"}),title:l().A.formatMessage(i().jy[a]),onClick:()=>{S(!0)}}),A=[{key:"filters",items:j,render:e=>(0,v.jsx)(f().A,{...e,title:null,loading:!1})}],M=(0,v.jsx)(m().A,{menuType:d().gu.Popup,header:null,children:(0,v.jsx)(p().Ay,{type:p().Oh.Vertical,initialFocus:0,sections:A})});return(0,v.jsx)(x().A,{marginAfter:!1,children:(0,v.jsx)(h().Ay,{popupType:u().n.Popup,placementToOrigin:c().W.Bottom,alignmentToOrigin:c().C.Start,open:y,render:()=>M,onDismiss:()=>S(!1),keepFocus:!0,origin:w,preventScaleTransition:!0,style:t.popup,trapFocus:!0,originGap:8})})}},172032:(e,t,a)=>{a.d(t,{A:()=>j});a(725707),a(491955),a(403517);var s=a(242343),n=()=>a(803290),o=()=>a(174114),i=()=>a(653998),r=()=>a(662505),l=()=>a(640979),d=()=>a(907721),c=()=>a(466321),u=()=>a(210466),g=()=>a(209684),m=()=>a(535906),p=()=>a(559637),h=()=>a(935091),f=()=>a(858023),x=()=>a(443252),v=()=>a(951540),b=()=>a(88271),y=()=>a(634369),S=a(163643);function j(e){let{allOptions:t,selectedOptions:a,setSelectedOption:j,onMenuClose:w,pillIcon:A,setPillTitleStringToActiveSelection:M,getFormattedStringTitle:C,getFormattedStringCaption:I,getPillTitle:T}=e;const k=(0,n().uB)(void 0,u().A),_=(0,o().IS)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8}})),[]),[z,D]=(0,s.useState)(!1);function P(){D(!1),w&&w()}function N(){j&&j([])}function R(e){const t=a.includes(e)?[...a.filter((t=>t!==e))]:[...a,e];j&&j(t)}const B=(0,S.jsx)(r().A,{on:a.length>0,icon:A(_.icon),title:M&&a[0]?T(a):T([]),onClick:()=>D(!0),disabled:!j,hideChevron:!j});return j?(0,S.jsx)(y().A,{children:(0,S.jsx)(x().Ay,{popupType:c().n.Popup,placementToOrigin:d().W.Bottom,alignmentToOrigin:d().C.Start,open:z,render:function(){const e={key:"menuOptions",items:Array.from(t).map((e=>({key:e,action:()=>R(e),render:t=>(0,S.jsx)(m().A,{...t,icon:(0,S.jsx)(p().A,{checked:a.includes(e),onClick:()=>R(e),size:16}),focused:!1,title:C(e),caption:I(e),shouldWrapCaption:!0})}))),render:e=>(0,S.jsx)(b().A,{...e,title:null,loading:!1})};return(0,S.jsxs)("div",{style:_.container,children:[(0,S.jsx)(h().A,{menuType:l().gu.Popup,header:null,maxHeight:250,width:300,children:(0,S.jsx)(f().Ay,{type:f().Oh.Vertical,store:k,initialFocus:0,sections:[e]})}),(0,S.jsxs)(b().A,{topBorder:!0,style:_.footer,children:[(0,S.jsx)(g().p,{onClick:N,children:(0,S.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.clearButton",defaultMessage:"Clear"})}),(0,S.jsx)(v().A,{onClick:P,children:(0,S.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:P,keepFocus:!0,origin:B,preventScaleTransition:!0,trapFocus:!0})}):B}},176936:(e,t,a)=>{a.d(t,{Av:()=>n,NK:()=>r,Rx:()=>i,eG:()=>o,t_:()=>l});var s=()=>a(514138);function n(e,t){if(void 0!==e&&(0,s().me)(e))return!1;const a=(0,s().kF)(e)||(0,s().zq)(e);return!(void 0===e||!a||0!==t)||1===t}function o(e){return e.memberCount>1}function i(e){return!o(e)}function r(e){return Boolean(e.spaceRequest)}function l(e){return"free"!==e.subscriptionTier}},182212:(e,t,a)=>{a.d(t,{N:()=>f});a(403517),a(242343);var s=()=>a(803290),n=()=>a(174114),o=()=>a(653998),i=()=>a(220413),r=()=>a(76394),l=()=>a(31448),d=()=>a(424339),c=()=>a(410194),u=()=>a(28210),g=()=>a(709237),m=()=>a(35462),p=()=>a(482570),h=a(163643);function f(e){let{title:t,items:a,loading:s,error:o,titleStyle:i,containerStyle:r}=e;const d=(0,n().IS)((e=>({title:{alignSelf:"center",maxWidth:"100%",fontWeight:l().Wy.semibold,marginBottom:8,...l().RC},container:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",height:"100%",width:"100%",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,padding:12,overflow:"hidden"}})),[]);return(0,h.jsxs)("div",{style:{...d.container,...r},children:[(0,h.jsx)(m().A,{style:{...d.title,...i},showTooltipWhenTruncated:!0,children:t}),s?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(v,{}),(0,h.jsx)(v,{}),(0,h.jsx)(v,{}),(0,h.jsx)(v,{}),(0,h.jsx)(v,{})]}):o?(0,h.jsx)(b,{}):a.map(((e,t)=>(0,h.jsx)(x,{item:e},t)))]})}function x(e){let{item:t}=e;const{store:a,caption:n}=t,i=(0,o().tz)(),l=y(),c=(0,s().K8)((()=>{switch(a.table){case"block":return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(u().B,{icon:a.getIcon(),size:18,isEmptyPage:!1,disabled:!0}),(0,h.jsx)(g().A,{store:a})]});case"notion_user":return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(p().A,{userStore:a,size:18}),(0,h.jsx)(m().A,{children:a.getDisplayName(i)})]});case"team":const e=a.getName();return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(d().x,{disabled:!0,store:a,size:20}),(0,h.jsx)(m().A,{children:e})]});default:(0,r().HB)(a)}}),[a,l.nameAndIconContainer,i]);return(0,h.jsxs)("div",{style:l.container,children:[(0,h.jsx)(m().A,{style:l.label,children:c}),(0,h.jsx)("div",{style:l.caption,children:(0,h.jsx)(m().A,{isSecondaryColor:!0,isSmall:!0,children:n})})]})}function v(){const e=y();return(0,h.jsxs)("div",{style:e.container,children:[(0,h.jsx)(m().A,{style:e.label,children:(0,h.jsx)(c().A,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})}),(0,h.jsx)("div",{style:e.loadingCaption,children:(0,h.jsx)(c().A,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})})]})}function b(){const e=y();return(0,h.jsx)("div",{style:e.container,children:(0,h.jsx)(m().A,{style:e.errorLabel,children:(0,h.jsx)(o().sA,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,h.jsx)("br",{})}})})})}function y(){return(0,n().IS)((e=>({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBlock:4,gap:4},nameAndIconContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:8,alignItems:"center",width:"100%"},label:{width:"100%"},caption:{display:"flex",justifyContent:"center",alignItems:"center"},loadingCaption:{display:"block",width:"50%"},errorLabel:{width:"100%",textAlign:"center",color:i().Ay.red}})),[])}},190457:(e,t,a)=>{a.d(t,{O:()=>n,q:()=>s});const s=20,n=25},195260:(e,t,a)=>{a.d(t,{D:()=>u,X:()=>g});a(362833);var s=a(242343),n=()=>a(237385),o=()=>a(269280),i=()=>a(519423),r=()=>a(818369),l=()=>a(329122),d=()=>a(379356),c=a(163643);const u=(0,s.createContext)({spaceIds:[],samlConfigs:[],teamIdsForSpace:{},teamAggregateDataForSpace:{},loadTeamsForSpace:function(e,t){return Promise.resolve()},visibleUsersForSpace:{},loadVisibleUsersForSpace:function(e,t){return Promise.resolve()},joinedUserIdsForSpace:{},permissionGroupsForSpace:{},loadPermissionGroupsForSpace:function(e,t){return Promise.resolve()},userPermissionGroupIdsBySpaceId:{},loadUserPermissionGroupIdsBySpaceId:function(e,t){return Promise.resolve()},refreshSamlConfigs:async()=>{},loadSamlConfigs:async()=>Promise.resolve([]),organizationMemberEmailDomains:[],memberEmailDomainsForSpace:{},guestEmailDomains:[],refreshOrganization:async function(){},availableOrganizationFeatures:{}});function g(e){let{children:t,organizationId:a}=e;const g=(0,n().v3)(),[m,p]=(0,s.useState)([]),[h,f]=(0,s.useState)([]),[x,v]=(0,s.useState)({}),[b,y]=(0,s.useState)({}),[S,j]=(0,s.useState)({}),[w,A]=(0,s.useState)({}),[M,C]=(0,s.useState)({}),[I,T]=(0,s.useState)({}),[k,_]=(0,s.useState)({}),[z,D]=(0,s.useState)([]),[P,N]=(0,s.useState)([]),{updateCacheWithRecordMap:R}=(0,s.useContext)(d().N),B=(0,s.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=await r().callApi({eventName:"getSpacesInOrganization",environment:g,data:{organizationId:a}});if("success"===t.type&&(p(t.data.spaceIds),R({data:t.data})),e)return;const s=await r().callApi({eventName:"getAllOrganizationMemberEmailDomains",environment:g,data:{organizationId:a}});"success"===s.type&&(N(s.data.orgMemberEmailDomains),_(s.data.memberEmailDomainsBySpace),D(s.data.guestEmailDomains))}),[g,a,R]),E=(0,s.useCallback)((async()=>{const e=await r().callApi({eventName:"getSamlConfigsForOrganization",environment:g,data:{organizationId:a}});"success"===e.type&&f(e.data.samlConfigs)}),[g,a]),L=(0,s.useCallback)((async()=>{if(h.length>0)return h;const e=await r().callApi({eventName:"getSamlConfigsForOrganization",environment:g,data:{organizationId:a}});return"success"===e.type?(f(e.data.samlConfigs),e.data.samlConfigs):[]}),[g,a,h]);(0,o().w)((()=>{B()}));const O=function(e,t){const{updateCacheWithRecordMap:a}=(0,s.useContext)(d().N),o=(0,n().v3)(),l=(0,s.useRef)({});return(0,s.useCallback)((async s=>{if(l.current[s])return;l.current[s]=!0;const n=await r().callApi({eventName:"getTeamsForOrganizationSpace",environment:o,data:{spaceId:s},headers:(0,i().WS)({spaceId:s})});"success"===n.type&&(a({data:n.data}),e(s,n.data.teamIds),t(s,n.data.teamAggregateData)),l.current[s]=!1}),[o,e,t,a])}((0,s.useCallback)(((e,t)=>{v((a=>({...a,[e]:t})))}),[]),(0,s.useCallback)(((e,t)=>{y((a=>({...a,[e]:t})))}),[])),U=(0,s.useCallback)((async(e,t)=>{const a=x[e],s=b[e];(void 0===a||void 0===s||t)&&await O(e)}),[O,b,x]),F=function(e,t){const a=(0,n().v3)(),o=(0,s.useRef)({});return(0,s.useCallback)((async s=>{if(void 0!==o.current[s])return void(await o.current[s]);const n=r().callApi({eventName:"getVisibleUsers",environment:a,data:{spaceId:s,supportsEdgeCache:!0},headers:(0,i().WS)({spaceId:s})}).then((a=>{if("success"===a.type){let n,o=[];"visibleUsers"in a.data?n=a.data.visibleUsers:(n=a.data.users,o=a.data.joinedMemberIds),e(s,n),t(s,o)}})).finally((()=>{delete o.current[s]}));o.current[s]=n,await n}),[a,t,e])}((0,s.useCallback)(((e,t)=>j((a=>({...a,[e]:t})))),[]),(0,s.useCallback)(((e,t)=>A((a=>({...a,[e]:t})))),[])),H=(0,s.useCallback)((async(e,t)=>{(void 0===S[e]||t)&&await F(e)}),[F,S]),V=(0,s.useCallback)(((e,t)=>C((a=>({...a,[e]:t})))),[]),W=function(e,t){const a=(0,n().v3)(),o=(0,s.useRef)({});return(0,s.useCallback)((async s=>{if(!o.current[s]){o.current[s]=!0;try{const n=await r().callApi({eventName:"getAllSpacePermissionGroupsWithMemberCount",environment:a,data:{spaceId:s,organizationId:e},headers:(0,i().WS)({cellId:void 0,spaceId:s})});"success"===n.type&&t(s,n.data.groupsWithMemberCount)}finally{o.current[s]=!1}}}),[a,e,t])}(a,V),q=(0,s.useCallback)((async(e,t)=>{(void 0===M[e]||t)&&await W(e)}),[W,M]),G=function(e){const t=(0,n().v3)(),a=(0,s.useRef)({});return(0,s.useCallback)((async(s,n)=>{const o=[];for(const e of n){var l;null!==(l=a.current[s])&&void 0!==l&&l[e]||o.push(e)}if(0!==o.length){void 0===a.current[s]&&(a.current[s]={});for(const e of o)a.current[s][e]=!0;try{const a=await r().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:t,data:{spaceId:s,userIds:o},headers:(0,i().WS)({cellId:void 0,spaceId:s})});if("success"===a.type){const t={};for(const e of o)t[e]=a.data.userToGroupMap[e]??[];e(s,t)}}finally{for(const e of o)a.current[s][e]=!1}}}),[t,e])}((0,s.useCallback)(((e,t)=>T((a=>({...a,[e]:{...a[e],...t}})))),[])),K=(0,s.useCallback)((async(e,t)=>{const a=[];for(const n of t){var s;null!==(s=I[e])&&void 0!==s&&s[n]||a.push(n)}a.length>0&&await G(e,a)}),[G,I]),{features:Y}=(0,l().z)(a);return(0,c.jsx)(u.Provider,{value:{spaceIds:m,samlConfigs:h,teamIdsForSpace:x,teamAggregateDataForSpace:b,loadTeamsForSpace:U,visibleUsersForSpace:S,loadVisibleUsersForSpace:H,joinedUserIdsForSpace:w,permissionGroupsForSpace:M,loadPermissionGroupsForSpace:q,userPermissionGroupIdsBySpaceId:I,loadUserPermissionGroupIdsBySpaceId:K,refreshSamlConfigs:E,loadSamlConfigs:L,organizationMemberEmailDomains:P,guestEmailDomains:z,memberEmailDomainsForSpace:k,refreshOrganization:B,availableOrganizationFeatures:Y},children:t})}u.displayName="OrganizationDataContext"},195394:(e,t,a)=>{a.d(t,{E:()=>n});a(242343);const s={viewBox:"0 0 20 20",svg:(0,a(163643).jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242m0 9.255c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h8.3c.68 0 1.328-.287 1.74-.767.429-.502.591-1.217.23-1.923-1.02-1.99-3.42-3.305-6.12-3.305"})},n=(0,a(680369).wt)("personFill",s)},196808:(e,t,a)=>{a.d(t,{F:()=>n});var s=()=>a(174114);function n(){return(0,s().IS)((e=>({leftContent:{display:"flex",flex:"auto",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},tableHeader:{position:"relative",display:"flex",flexDirection:"row"}})),[])}},200594:(e,t,a)=>{a.d(t,{L:()=>r});a(725707),a(403517),a(229032);var s=a(242343),n=()=>a(174114),o=()=>a(884373),i=a(163643);function r(e){let{children:t}=e;const a=(0,n().IS)((e=>({divider:{color:e.stroke.secondary},container:{display:"flex",flexDirection:"column",gap:16,width:"100%",paddingTop:14}})),[]),r=s.Children.toArray(t);return(0,i.jsx)("div",{style:a.container,children:r.map(((e,t)=>(0,i.jsxs)(s.Fragment,{children:[e,t<r.length-1&&(0,i.jsx)(o().A,{dividerColor:a.divider.color,size:1})]},t)))})}},203041:(e,t,a)=>{a.d(t,{C:()=>p,_:()=>m});var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(162901),r=()=>a(865415),l=()=>a(76394),d=()=>a(818369),c=()=>a(931371),u=()=>a(379356);const g={activeMembersCount:0,previousActiveMembersCount:0,activeGuestsCount:0,previousActiveGuestsCount:0,topTeamspaces:[],topViewers:[],topEditors:[]};function m(e){let{spaceStore:t,userId:a,isOrganizationOwner:n}=e;const[o,i]=(0,s.useState)("last_90_days");return{...p({spaceStore:t,userId:a,isOrganizationOwner:n,daysFilter:o}),daysFilter:o,setDaysFilter:i}}function p(e){let{spaceStore:t,userId:a,isOrganizationOwner:m,daysFilter:p}=e;const h=(0,n().v3)(),{updateCacheWithRecordMap:f}=(0,s.useContext)(u().N),x=(0,o().K8)((()=>t.id),[t]),v=(0,o().K8)((()=>Boolean(t&&a&&(0,c().dp)(t,a).isWorkspaceOwner())),[t,a]),[{status:b,value:y,error:S}]=(0,i().Yb)((async()=>{if(!a||!(m||v))return g;const e=await d().callApi({eventName:"getUserEngagementAnalytics",environment:h,data:{spaceId:x,daysFilter:p},headers:{[r().B3]:x}});switch(e.type){case"success":return f(e),{activeMembersCount:e.data.activeMembersCount,previousActiveMembersCount:e.data.previousActiveMembersCount,activeGuestsCount:e.data.activeGuestsCount,previousActiveGuestsCount:e.data.previousActiveGuestsCount,topTeamspaces:e.data.topTeamspaces,topViewers:e.data.topViewers,topEditors:e.data.topEditors};case"failed":throw e.body;default:(0,l().HB)(e)}}),[h,a,x,p,v,m,f]);return{data:(0,s.useMemo)((()=>y||g),[y]),loading:"pending"===b||"idle"===b,error:S}}},205830:(e,t,a)=>{a.d(t,{BS:()=>f,Hf:()=>h,J7:()=>g,NZ:()=>p,XC:()=>x,hs:()=>m});a(610931),a(362833),a(725707),a(491955),a(500234),a(403517);var s=()=>a(502140),n=()=>a(769884),o=()=>a(48723),i=()=>a(76394),r=()=>a(818369),l=()=>a(759625),d=()=>a(84543),c=()=>a(485966),u=()=>a(413871);function g(e){let{trustedDomainIds:t,spaceStore:a}=e;return t.map((e=>{const t=u().LX.createChildStore(a,{table:o().A,id:e,spaceId:a.id});if(t.canRead())return t})).filter(i().O9)}async function m(e){let{environment:t,spaceId:a,currentUserId:n,organizationId:o}=e;const i=await r().callApi({eventName:"getTrustedDomainsNumberOfMembers",environment:t,data:{spaceId:a,organizationId:o},userId:n});return"failed"===i.type?(s().rateLimitedLog({from:"trustedDomainHelpers",level:"error",type:"getTrustedDomainsNumberOfMembersForSpaceFailed"}),[]):i.data.results}function p(e){let{environment:t,trustedEmailDomain:a,trustedDomainStores:s,spaceStore:n,spaceBasicSettingsStore:i}=e,r=s.find((e=>e.getEmailDomain()===a));const c=i.state.emailDomains;return r?(d().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainDLSEnabled",environment:t,canUndo:!0,perform:e=>{l().zv({store:n,data:{email_domains:c},transaction:e}),l().zv({store:r,data:{domain_link_sharing_enabled:!0,join_space_method:"request_to_join"},transaction:e})}}),r):(d().createAndCommit({userAction:"trustedDomainActions.createTrustedDomain",environment:t,canUndo:!0,perform:e=>{l().zv({store:n,data:{email_domains:c},transaction:e});const s={space_id:n.id,join_space_method:"request_to_join",domain_link_sharing_enabled:!0,email_domain:a};r=l().eC({environment:t,table:o().A,value:s,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e})}}),r&&s.push(r),r)}function h(e){let{store:t,environment:a}=e;const{currentSpaceStore:s}=c().default.getState();if(!s)throw new Error("currentSpaceStore does not exist");if(s.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(d().createAndCommit({userAction:"trustedDomainActions.deleteTrustedDomain",environment:a,canUndo:!0,perform:e=>{l().zv({store:t,data:{domain_link_sharing_enabled:!1},transaction:e})}}),!0)}function f(e){let{store:t,environment:a,joinSpaceMethod:s}=e;const{currentSpaceStore:n}=c().default.getState();if(!n)throw new Error("currentSpaceStore does not exist");if(n.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(t.getJoinSpaceMethod()!==s&&(d().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainJoinSpaceMethod",environment:a,canUndo:!0,perform:e=>{l().zv({store:t,data:{join_space_method:s},transaction:e})}}),!0))}async function x(e){let{environment:t,spaceId:a}=e;const s=await r().callApi({eventName:"getTrustedDomainsForSpace",environment:t,data:{spaceId:a}});if("success"!==s.type)return[];return s.data.results.filter((e=>e.domain_link_sharing_enabled)).map((e=>n().Bj6.fromValue(o().A,e)))}},210131:(e,t,a)=>{a.d(t,{i:()=>d,y:()=>l});var s=()=>a(83072),n=()=>a(865226),o=()=>a(137476),i=()=>a(983050),r=()=>a(29215);function l(e,t,a){n().oo({environment:e,url:(0,s().re)({organizationId:t,tabRoute:a})})}function d(e){const{environment:t,from:a,organizationId:l,tabRoute:d,properties:c,queryParams:u}=e;function g(e,t){const a=null==e?void 0:e.name,s=null==t?void 0:t.subtab;return a?s?`${a}/${s}`:a:void 0}l&&(0,o().u4)({environment:t,event:{eventName:"org_console_navigate_to_page",eventProperties:{organizationId:l,route:g(d,c),from:g(null==a?void 0:a.tabRoute,null==a?void 0:a.properties),spaceId:null==u?void 0:u[r().ge]}}});const m=document.getElementById(i().g5j);m&&m.scrollTo({top:0}),n().oo({environment:t,url:(0,s().re)({organizationId:l,tabRoute:d,properties:c,queryParams:u})})}},212738:(e,t,a)=>{a.d(t,{RC:()=>l,S6:()=>d,tD:()=>c});var s=()=>a(803290),n=()=>a(297145),o=()=>a(846581),i=()=>a(16456),r=()=>a(836331);function l(){return r().default.getConfigKey("permanently_delete_tree_queue_task_override","cdrr_enabled_timestamp_override")??n().mu}function d(){return(0,s().K8)((()=>l()),[])}function c(e,t,a){const s=(0,i().AA)(e,t);if((0,i().ak)(s)){const e=s.end.diff(s.start),t=e.as("year");if(t>=1)return(0,o().up)({years:Math.round(t)},a);const n=e.as("days");if(n>=1&&n<=45)return(0,o().up)({days:Math.round(n)},a);const i=e.as("months");if(i>=1)return(0,o().up)({months:Math.round(i)},a);if(n>=1)return(0,o().up)({days:Math.round(n)},a);const r=e.as("hours");if(r>=1)return(0,o().up)({hours:Math.round(r)},a);const l=e.as("minutes");return(0,o().up)({minutes:Math.round(l)},a)}return""}},223082:(e,t,a)=>{a.d(t,{u:()=>x});a(362833);var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(653998),r=()=>a(631474),l=()=>a(818369),d=()=>a(145046),c=()=>a(575015),u=()=>a(663539),g=()=>a(868325),m=()=>a(485966),p=()=>a(35462),h=a(163643);const f=(0,i().YK)({uploadFailed:{defaultMessage:"Upload failed.",id:"identityAndProvisioning.managedUsers.modal.failedUpload"}});function x(e){const{userStore:t}=e,a=(0,i().tz)(),x=(0,n().v3)(),{userProfilePhoto:v,userName:b,userEmail:y,isSuspended:S}=(0,o().K8)((()=>({userProfilePhoto:t.getProfilePhoto(),userName:t.getFullName(a),userEmail:t.getEmail(),isSuspended:t.getIsSuspended()})),[t,a]),[j,w]=(0,s.useState)({loading:!1,error:void 0}),[A,M]=(0,s.useState)({value:v,loading:!1}),[C,I]=(0,s.useState)(b),[T,k]=(0,s.useState)(y);async function _(e){var s;const n=null===(s=m().default.state.currentSpaceStore)||void 0===s?void 0:s.id,o=[];A.value!==v&&o.push("profile_photo"),C!==b&&o.push("name"),T!==y&&o.push("email"),r().wF(x,{user_status:S?"suspended":"notSuspended",edited_fields:o});const{accept:u}=await d().Gh({message:(0,h.jsx)(p().A,{style:d().xh.title,children:(0,h.jsx)(i().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.message",defaultMessage:"Confirm changes"})}),description:(0,h.jsxs)(p().A,{isMultiline:!0,isSecondaryColor:!0,children:[(0,h.jsx)(i().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.description",defaultMessage:"Changes made to this user's account will be reflected across all workspaces they have access to."}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)(i().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.descriptionForScim",defaultMessage:"If this user is being provisioned through SCIM, your changes be later overwritten by the next SCIM sync."})]}),acceptLabel:(0,h.jsx)(i().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.acceptLabel",defaultMessage:"Save changes"}),cancelLabel:(0,h.jsx)(i().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!u)return void z();w({loading:!0,error:void 0});const f=await l().callApi({eventName:"updateUserProfile",environment:x,data:{userId:t.id,spaceId:n,name:C,email:T,profilePhoto:(null==e?void 0:e.profilePhoto)??A.value}});if(r().Mh(x,{user_status:S?"suspended":"notSuspended",edited_fields:o}),"failed"===f.type)return d().f1((0,g().Hu)(a,f)),void w({loading:!1,error:f.error});c().D6({label:(0,h.jsx)(i().sA,{id:"managedUsers.toastMessage.updateProfileData.success",defaultMessage:"Successfully updated user's profile"})}),setTimeout((()=>{w({loading:!1,error:void 0})}),500)}function z(){M({value:v,loading:!1}),I(b),k(y)}return{hasStagedChanges:A.value!==v||C!==b||T!==y,saveChanges:_,resetState:z,loading:j.loading,error:j.error,profilePhoto:{value:A.value,loading:A.loading,set:function(){u().Bz({environment:x,onStart:()=>{M((e=>({...e,loading:!0})))},bucket:"public",onError:()=>{M((e=>({...e,loading:!1}))),d().f1(a.formatMessage(f.uploadFailed))},onComplete:e=>{const t=e[0];M({value:t,loading:!1})},accept:"image/*"})},setAndSave:function(){u().Bz({environment:x,onStart:()=>{M((e=>({...e,loading:!0})))},bucket:"public",onError:()=>{M((e=>({...e,loading:!1}))),d().f1(a.formatMessage(f.uploadFailed))},onComplete:e=>{const t=e[0];M({value:t,loading:!1}),_({profilePhoto:t})},accept:"image/*"})},remove:function(){M({value:"",loading:!1})},removeAndSave:function(){M({value:"",loading:!1}),_({profilePhoto:""})}},name:{value:C,set:I},email:{value:T,set:k}}}},231628:(e,t,a)=>{a.d(t,{A:()=>o});var s=()=>a(174114),n=()=>a(31448);function o(){return(0,s().IS)((e=>({linkButton:{fontWeight:n().Wy.medium,fontSize:n().J.UIRegular.desktop,color:e.text.secondary},tableHeader:{background:e.surface.page},tableHeaderForModal:{background:e.surface.elevated},tableRow:{background:e.surface.page},tableRowForModal:{background:e.surface.elevated},roundAvatarBorder:{borderStyle:"solid",borderColor:e.white,borderWidth:2,borderRadius:"100%"}})),[])}},233309:(e,t,a)=>{a.d(t,{$s:()=>g,G4:()=>f,Jv:()=>r,Jy:()=>i,PH:()=>m,TJ:()=>l,Tm:()=>u,Wt:()=>p,Y5:()=>d,kJ:()=>h,lP:()=>c,n_:()=>n,wy:()=>o});var s=()=>a(137476);function n(e,t){s().vd(e,"overview_analytics_filter_change",t)}function o(e,t){s().vd(e,"user_analytics_engagement_timerange_filter_change",t)}function i(e,t){s().vd(e,"user_analytics_table_filter_change",t)}function r(e,t){s().vd(e,"user_analytics_table_sort_change",t)}function l(e,t){s().vd(e,"user_analytics_export_requested",t)}function d(e,t){s().vd(e,"content_analytics_engagement_timerange_filter_change",t)}function c(e,t){s().vd(e,"content_analytics_export_requested",t)}function u(e,t){s().vd(e,"content_analytics_table_filter_change",t)}function g(e,t){s().vd(e,"content_analytics_table_timerange_filter_change",t)}function m(e,t){s().vd(e,"content_analytics_table_sort_change",t)}function p(e,t){s().vd(e,"workspace_analytics_tab_click",t)}function h(e,t){s().vd(e,"search_analytics_table_timerange_filter_change",t)}function f(e,t){s().vd(e,"search_analytics_table_sort_change",t)}},247900:(e,t,a)=>{a.d(t,{H:()=>c});a(725707),a(107652),a(491955),a(403517);var s=()=>a(803290),n=()=>a(409211),o=()=>a(514138),i=()=>a(836331),r=()=>a(413871),l=()=>a(111826),d=()=>a(305043);function c(e){let{spaceStore:t}=e;return(0,s().K8)((()=>{const e=d().subscriptionDataStoreInstance.state;if(!e)return{loading:!0};if(i().default.checkGate({gateName:"dont_load_users"}))return{loading:!1,members:[],guests:[]};const a=l().Be(e);if(!a.every((e=>r().LU.createChildStore(t,{table:n().oo,id:e.userId}).isReady())))return{loading:!0};const s=a.filter(o().c7),c=a.filter(o().QE);return{loading:!1,members:s.map((e=>{let{userId:a}=e;return r().LU.createChildStore(t,{table:n().oo,id:a})})),guests:c.map((e=>{let{userId:a}=e;return r().LU.createChildStore(t,{table:n().oo,id:a})}))}}),[t])}},266178:(e,t,a)=>{a.d(t,{m1:()=>I,uI:()=>C,zr:()=>M});a(725707),a(491955),a(403517),a(113085);var s=a(242343),n=()=>a(803290),o=()=>a(174114),i=()=>a(150936),r=()=>a(653998),l=()=>a(975392),d=()=>a(662505),c=()=>a(640979),u=()=>a(907721),g=()=>a(466321),m=()=>a(210466),p=()=>a(204024),h=()=>a(634369),f=()=>a(209684),x=()=>a(535906),v=()=>a(559637),b=()=>a(935091),y=()=>a(858023),S=()=>a(443252),j=()=>a(951540),w=()=>a(88271),A=a(163643);function M(e){let{pillIcon:t,pillTitle:a,selectedItem:n,setSelectedItem:r,items:d,renderMenu:c,shouldSubmitOnDismiss:u,shouldUseCheck:g,selectionRequired:m,showActive:h,iconStyles:f}=e;const[x,v]=(0,s.useState)(n),b=(0,o().IS)((e=>({check:{height:16,width:16,color:e.text.primary}})),[]);return(0,A.jsx)(k,{pillIcon:t,pillTitle:a,items:d,renderMenu:c,shouldSubmitOnDismiss:u,shouldUseCheck:g,isFilterActive:h??void 0!==n,toggleSelectedItem:function(e){const t=(0,l().n4)(x,e)?void 0:e;m&&void 0===t||v(t)},renderItemOptionIcon:function(e){const t=(0,l().n4)(x,e);return g?t?(0,i().b)(b.check):(0,A.jsx)("div",{style:b.check}):(0,A.jsx)(p().A,{isSelected:t})},resetSelection:function(){r(void 0),v(void 0)},resetTempSelection:function(){v(n)},submitSelection:function(){r(x)},iconStyles:f})}function C(e){const[t,a]=(0,s.useState)(e.selectedItems);return(0,A.jsx)(I,{...e,tempSelectedItems:t,setTempSelectedItems:a})}function I(e){const{pillIcon:t,pillTitle:a,selectedItems:s,setSelectedItems:n,items:o,renderMenu:i,shouldSubmitOnDismiss:r,tempSelectedItems:d,setTempSelectedItems:c,onToggleSelected:u,iconStyles:g}=e;function m(e){const t=d.some((t=>(0,l().n4)(t,e)))?[...d.filter((t=>!(0,l().n4)(t,e)))]:[...d,e];c(t)}function p(){const e=o.map((e=>e.value));c(e)}return(0,A.jsx)(k,{iconStyles:g,pillIcon:t,pillTitle:a,items:o,isFilterActive:s.length>0,toggleSelectedItem:m,renderItemOptionIcon:function(e){return(0,A.jsx)(v().A,{checked:d.some((t=>(0,l().n4)(t,e))),size:14,checkSize:10,onClick:()=>{m(e),u&&u(e)}})},resetSelection:function(){n([]),c([])},resetTempSelection:function(){c(s)},submitSelection:function(){n(d)},renderMenu:i?e=>i({...e,selectAll:p}):void 0,shouldSubmitOnDismiss:r})}function T(e){let{items:t,toggleSelectedItem:a,renderItemOptionIcon:s,menuListStore:n,clearSelection:o,onSubmit:i}=e;const l=_(),d={key:"menuOptions",items:t.map((e=>({key:e.key,action:()=>a(e.value),render:t=>(0,A.jsx)(x().A,{...t,icon:s(e.value),title:e.title,caption:e.caption,shouldWrapCaption:e.wrapCaption,dontShrinkTitle:e.dontShrinkTitle})}))),render:e=>(0,A.jsx)(w().A,{...e,title:null,loading:!1})};return(0,A.jsxs)("div",{style:l.container,children:[(0,A.jsx)(b().A,{menuType:c().gu.Popup,header:null,maxHeight:250,width:300,children:(0,A.jsx)(y().Ay,{type:y().Oh.Vertical,store:n,initialFocus:0,sections:[d]})}),(0,A.jsxs)(w().A,{topBorder:!0,style:l.footer,children:[(0,A.jsx)(f().p,{onClick:o,children:(0,A.jsx)(r().sA,{id:"core.baseFilterPill.clearButton",defaultMessage:"Clear"})}),(0,A.jsx)(j().A,{onClick:i,children:(0,A.jsx)(r().sA,{id:"core.baseFilterPill.doneButton",defaultMessage:"Apply"})})]})]})}function k(e){const{pillIcon:t,pillTitle:a,isFilterActive:o,resetSelection:i,resetTempSelection:r,submitSelection:l,renderMenu:c,shouldSubmitOnDismiss:p,shouldUseCheck:f,iconStyles:x}=e,v=_(),b=(0,n().uB)(void 0,m().A),[y,j]=(0,s.useState)(!1);function w(){i()}function M(){l(),j(!1)}const C=(0,A.jsx)(d().A,{on:o,icon:t?t({...v.icon,...x}):void 0,title:a,onClick:()=>j(!0)});return(0,A.jsx)(h().A,{children:(0,A.jsx)(S().Ay,{popupType:g().n.Popup,originGap:8,placementToOrigin:u().W.Bottom,alignmentToOrigin:u().C.Start,open:y,render:()=>c?c({...e,menuListStore:b,clearSelection:w,onSubmit:M,shouldUseCheck:f}):(0,A.jsx)(T,{...e,menuListStore:b,clearSelection:w,onSubmit:M}),onDismiss:p?M:function(){j(!1),r()},keepFocus:!0,origin:C,preventScaleTransition:!0})})}function _(){return(0,o().IS)((e=>({container:{padding:"6px 0 6px"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginRight:8,fill:"currentColor"}})),[])}},269556:(e,t,a)=>{a.d(t,{F:()=>n});a(242343);var s=a(163643);const n=(0,a(680369).wt)("eyeHideInversePadded",{viewBox:"0 0 24 24",svg:(0,s.jsx)("path",{d:"M17.3867 18.1074C17.6055 18.3193 17.9404 18.333 18.1592 18.1074C18.3848 17.875 18.3711 17.5469 18.1592 17.335L6.5791 5.76855C6.37402 5.55664 6.01855 5.5498 5.80664 5.76855C5.60156 5.97363 5.60156 6.3291 5.80664 6.53418L17.3867 18.1074ZM12 6.1582C10.8105 6.1582 9.73047 6.36328 8.72559 6.69141L9.81934 7.78516C10.5098 7.58691 11.2275 7.4707 12 7.4707C16.3682 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 12.6113 18.7334 14.0059 16.9766 15.1064L17.9883 16.125C20.1348 14.7168 21.3857 12.8779 21.3857 12.0713C21.3857 10.6699 17.6055 6.1582 12 6.1582ZM12 17.9912C13.2646 17.9912 14.4199 17.7725 15.4658 17.4102L14.3789 16.3232C13.6338 16.542 12.8477 16.6787 12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.6133 5.32129 10.1299 7.19434 8.98145L6.16211 7.94922C3.92676 9.37109 2.60742 11.251 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM15.4111 13.3906C15.5889 12.9873 15.6914 12.5361 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C11.5283 8.39355 11.084 8.48242 10.6738 8.65332L15.4111 13.3906ZM12 15.7559C12.5332 15.7559 13.0322 15.6328 13.4766 15.4209L8.64355 10.5811C8.4248 11.0322 8.30176 11.5312 8.30176 12.0781C8.30859 14.0811 9.94238 15.7559 12 15.7559Z"})})},324458:(e,t,a)=>{a.d(t,{p:()=>C,I:()=>M});a(362833),a(333225),a(494367),a(516262),a(573119),a(240480),a(950443),a(619601),a(403517);var s=a(242343),n=()=>a(371807),o=()=>a(296599),i=()=>a(237385),r=()=>a(769884),l=()=>a(865415),d=()=>a(220574),c=()=>a(145017),u=()=>a(149467),g=()=>a(704082),m=()=>a(975392),p=()=>a(137476);var h=()=>a(818369),f=()=>a(972340),x=()=>a(577040),v=()=>a(622286),b=()=>a(413871);const y=20,S={query:"",createdBy:[],sharedWith:void 0,audience:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[],pageStatus:["alive"]},j={...S,audience:["shared_externally","shared_internally","shared_to_web"]},w={filters:S,pageStores:[],numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0,shouldReRunSearch:!1,showSuggestions:!0},A={...w,filters:j};function M(e){let{spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:r,organizationId:d}=e;const S=(0,v().X)("enabled_bev_default_audience_filter")?A:w,j=(0,i().v3)(),[M,I]=(0,s.useState)(S),T=(0,s.useRef)(S.filters),k=(0,s.useRef)(t.id),_=(0,s.useCallback)((async e=>{let{restartSearch:s,ignoreFilterComparison:i}=e;if(!r)return;if(!i&&m().n4(M.filters,T.current)&&t.id===k.current)return;T.current=M.filters,k.current=t.id;let f=M.loading,v=M.error,S=M.hasNextPage,A=M.numPagesLoaded,_=M.paginationToken;if(s&&(I((e=>({...w,showSuggestions:e.showSuggestions,filters:e.filters}))),f=w.loading,v=w.error,S=w.hasNextPage,A=w.numPagesLoaded,_=w.paginationToken),S&&!f&&!v){I((e=>({...e,showSuggestions:!1,loading:!0})));try{const e=await h().callApi({eventName:"adminContentSearch",environment:j,data:{spaceId:t.id,organizationId:d,sort:{field:"relevance",direction:"desc"},limit:y,paginationToken:_,query:M.filters.query,audience:M.filters.audience,lastEditedTime:(0,x().ES)(M.filters.lastEditedTime),createdTime:(0,x().ES)(M.filters.createdTime),createdBy:M.filters.createdBy,sharedWith:M.filters.sharedWith,teamspaceIds:M.filters.teamIds,deletionStatuses:M.filters.pageStatus},headers:{[l().B3]:t.id}});if("failed"===e.type)throw e.error;!function(e,t){p().vd(e,"admin_content_search_analytics_queried",t)}(j,{filters:M.filters,pageNumber:A});const s=e.data.paginationToken,i=e.data.recordIds,r=C({recordMapWithRoleJson:e.data.recordMap}),g=new(n().A)({name:o().a9,data:new(u().b)({[a.id]:r})});g.addCacheFallback(j.defaultRecordCache.inMemoryRecordCache),I((e=>{const t=[],a=new Set(e.pageStores.map((e=>e.id)));for(const s of i)if(!a.has(s)){const e=new(b().Bv)(j,{table:c().ev,id:s},{inMemoryRecordCache:g});t.push(e)}const n=[...e.pageStores,...t];return{...e,pageStores:n,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:s,hasNextPage:Boolean(s)}}))}catch(z){const e=(0,g().A)(z);I((t=>({...t,loading:!1,error:e})))}}}),[j,d,t,a,r,M.filters,M.loading,M.error,M.hasNextPage,M.numPagesLoaded,M.paginationToken]);(0,s.useEffect)((()=>{M.shouldReRunSearch&&(I((e=>({...e,shouldReRunSearch:!1}))),_({restartSearch:!0,ignoreFilterComparison:!1}))}),[M.shouldReRunSearch,_]);const z=(0,s.useCallback)((async()=>{M.shouldReRunSearch||await _({restartSearch:!1,ignoreFilterComparison:!0})}),[M.shouldReRunSearch,_]),D=(0,s.useCallback)((async e=>{await _({restartSearch:!0,ignoreFilterComparison:e||!1})}),[_]),P=(0,s.useCallback)(((e,t)=>{!function(e,t){p().vd(e,"admin_content_search_analytics_filter_change",t)}(j,{newFilters:e}),I((a=>({...a,filters:{...a.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})))}),[j]),N=(0,s.useCallback)((async e=>{const a=await async function(e){let{environment:t,blockId:a,spaceStore:s}=e;const n=await h().callApi({eventName:"getPrivatePageInfo",environment:t,data:{id:a}});if("failed"===n.type)return;const i=f().$({environment:t,blockId:a,privateRecordCacheName:o().a9,ancestorData:n.data,spaceId:s.id});return i}({environment:j,blockId:e,spaceStore:t});a?I((t=>{const s=[];for(const n of t.pageStores)n.id===e?a.pathHasPurgedDeletedPermission()||s.push(a):s.push(n);return{...t,pageStores:s,loading:!1,error:void 0}})):await _({restartSearch:!0,ignoreFilterComparison:!1})}),[j,t,_]);return{showSuggestions:M.showSuggestions,filters:M.filters,pageStores:M.pageStores,loading:M.loading,error:M.error,hasNextPage:M.hasNextPage,loadNextPage:z,runNewSearch:D,setFilters:P,refreshSearchResult:N}}function C(e){const{recordMapWithRoleJson:t}=e,a=d().RecordMapWithRole.create(t),s=d().RecordMapWithRole.create();for(const{pointer:n,model:o}of a)if(o){const e=r().Bj6.fromValue(n.table,m().mg(o.__IM_SORRY__getValue()));s.setModelAndRole(n,e,"editor")}return s}},329122:(e,t,a)=>{a.d(t,{z:()=>r});var s=()=>a(237385),n=()=>a(162901),o=()=>a(76394),i=()=>a(818369);function r(e){const t=(0,s().v3)(),[{value:a,status:r}]=(0,n().Yb)((async()=>{if(!e)return{};const a=await i().callApi({eventName:"getAvailableOrganizationFeatures",environment:t,data:{organizationId:e}});if("success"===a.type)return a.data;if("failed"===a.type)throw a.error;(0,o().HB)(a)}),[t,e]);return{loading:"pending"===r,features:a??{}}}},338951:(e,t,a)=>{a.d(t,{R:()=>z,Z:()=>D});a(725707),a(491955),a(403517);var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(174114),r=()=>a(246169),l=()=>a(218357),d=()=>a(409211),c=()=>a(727171),u=()=>a(653998),g=()=>a(76394),m=()=>a(31448),p=()=>a(233309),h=()=>a(477784),f=()=>a(392608),x=()=>a(830820),v=()=>a(907721),b=()=>a(413871),y=()=>a(731942),S=()=>a(103151),j=()=>a(35462),w=()=>a(487966),A=()=>a(415385),M=()=>a(379356),C=()=>a(182212),I=()=>a(571713),T=()=>a(164428),k=a(163643);const _=640;function z(e){let{data:t,loading:a,error:r,daysFilter:g,setDaysFilter:z}=e;const P=(0,n().v3)(),{activeMembersCount:N,previousActiveMembersCount:R,activeGuestsCount:B,previousActiveGuestsCount:E,topTeamspaces:L,topViewers:O,topEditors:U}=t,F=(0,i().IS)((e=>({title:{fontWeight:m().Wy.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},summaryCard:{minHeight:70},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16}})),[]),[H,V]=(0,x().z)(),{organizationOwnerRecordCache:W}=(0,s.useContext)(M().N),q=(0,s.useCallback)((e=>{p().n_(P,{filter:"user_engagement",daysFilter:e}),z(e)}),[P,z]),G=(0,o().K8)((()=>L.map((e=>{let{teamspaceId:t,pageViews:a}=e;return{store:new(b().h4)(P,{id:t,table:l().yK},{inMemoryRecordCache:W}),caption:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:(0,k.jsx)(A()._,{abbreviateNumber:!0,num:a})}})}})).filter((e=>e.store.canRead())).slice(0,5)),[P,L,W]),K=(0,o().K8)((()=>O.map((e=>{let{userId:t,pageViews:a}=e;return{store:new(b().LU)(P,{id:t,table:d().oo}),caption:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,k.jsx)(A()._,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[P,O]),Y=(0,o().K8)((()=>U.map((e=>{let{userId:t,pageEdits:a}=e;return{store:new(b().LU)(P,{id:t,table:d().oo}),caption:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,k.jsx)(A()._,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[P,U]);return(0,k.jsxs)("div",{style:F.container,ref:H,children:[(0,k.jsxs)("div",{style:F.titleContainer,children:[(0,k.jsxs)(j().A,{style:F.title,children:[(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.title",defaultMessage:"User engagement"}),(0,k.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,k.jsx)(w().A,{...e,href:(0,f().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:F.helpInfo}),renderTooltip:()=>"all_time"!==g?(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:h().A.formatMessage(c().Yr[g])}}):(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,k.jsx)(T().Z,{currentFilter:g,onChangeFilter:q})]}),(0,k.jsxs)(y().xA,{gap:16,children:[(0,k.jsx)(y().LX,{row:1,col:1,children:(0,k.jsx)(I().a,{style:F.summaryCard,loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,k.jsx)(A()._,{abbreviateNumber:V<_,num:N})}}),byline:void 0!==R?(0,k.jsx)(D,{userType:"members",daysFilter:g,count:N,previousCount:R}):null})}),(0,k.jsx)(y().LX,{row:1,col:2,children:(0,k.jsx)(I().a,{style:F.summaryCard,loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,k.jsx)(A()._,{abbreviateNumber:V<_,num:B})}}),byline:void 0!==E?(0,k.jsx)(D,{userType:"guests",daysFilter:g,count:B,previousCount:E}):null})})]}),(0,k.jsxs)(y().xA,{gap:16,children:[(0,k.jsx)(y().LX,{row:1,col:1,children:(0,k.jsx)(C().N,{loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:G})}),(0,k.jsx)(y().LX,{row:1,col:2,children:(0,k.jsx)(C().N,{loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:K})}),(0,k.jsx)(y().LX,{row:1,col:3,children:(0,k.jsx)(C().N,{loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:Y})})]})]})}function D(e){let{userType:t,daysFilter:a,count:s,previousCount:n}=e;const o=0===s&&0===n?0:Math.round((s-n)/n*100);let l;l=o===1/0?function(e,t,a){if("all_time"===a)return(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"});return"guests"===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.guests.positive",defaultMessage:"{changeValue} more guests than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:c().Eb[a].toLocaleString()}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.members.positive",defaultMessage:"{changeValue} more members than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:c().Eb[a].toLocaleString()}})}(t,s,a):function(e,t){switch(t){case"all_time":return 0===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"}):e>0?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.positive",defaultMessage:"{changeInPercentage}% more since the start",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.negative",defaultMessage:"{changeInPercentage}% less since the start",values:{changeInPercentage:Math.abs(e)}});case"last_90_days":return 0===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.none",defaultMessage:"No changes in previous 90 days"}):e>0?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.positive",defaultMessage:"{changeInPercentage}% more than previous 90 days",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.negative",defaultMessage:"{changeInPercentage}% less than previous 90 days",values:{changeInPercentage:Math.abs(e)}});case"last_28_days":return 0===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.none",defaultMessage:"No changes in previous 28 days"}):e>0?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.positive",defaultMessage:"{changeInPercentage}% more than previous 28 days",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.negative",defaultMessage:"{changeInPercentage}% less than previous 28 days",values:{changeInPercentage:Math.abs(e)}});case"last_7_days":return 0===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.none",defaultMessage:"No changes in previous 7 days"}):e>0?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.positive",defaultMessage:"{changeInPercentage}% more than previous 7 days",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.negative",defaultMessage:"{changeInPercentage}% less than previous 7 days",values:{changeInPercentage:Math.abs(e)}});default:(0,g().HB)(t)}}(o,a);const d=o>0?(0,r().y)({height:12,width:12,fill:"currentColor"}):o<0?(0,r().y)({height:12,width:12,transform:"rotate(90deg)",fill:"currentColor"}):void 0,m=(0,i().IS)((e=>({text:{color:o>0?e.accentColors.green[500]:o<0?e.accentColors.red[500]:e.text.tertiary,display:"flex",alignItems:"center",gap:4}})),[o]);return(0,k.jsxs)("span",{style:m.text,children:[d,l]})}},346695:(e,t,a)=>{a.d(t,{I:()=>n});a(242343);var s=a(163643);const n=(0,a(680369).wt)("settingsWorkspace",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M11.757 16.94v-1.333h4.812q.178 0 .267-.088.09-.09.089-.267v-7.95q0-.179-.09-.267-.087-.09-.266-.089h-4.327V5.62h4.703q.609 0 .957.383.35.376.349 1.032v8.484q0 .655-.349 1.039-.348.382-.957.382zm2.659-7.417q-.219 0-.219-.225V8.252q0-.232.219-.232h1.08q.226 0 .226.232v1.046q0 .225-.226.225zm0 2.53q-.219 0-.219-.233v-1.046q0-.232.219-.232h1.08q.226 0 .226.232v1.046q0 .233-.226.233zm0 2.522q-.219 0-.219-.232v-1.046q0-.226.219-.226h1.08q.226 0 .226.226v1.046q0 .232-.226.232zm-12.674.944V3.624q0-.663.349-1.039.349-.383.964-.383h8.627q.607 0 .957.383.355.376.355 1.039v11.895q0 .655-.355 1.039-.35.382-.957.382H3.055q-.616 0-.964-.382-.35-.384-.349-1.04Zm1.333-.267q0 .177.09.267.087.088.266.088h7.875q.177 0 .266-.088.09-.09.09-.267V3.897q0-.185-.09-.273-.089-.09-.266-.089H3.43q-.179 0-.267.089-.09.09-.089.273v11.355Zm1.853.991v-2.618q0-.437.205-.65.205-.218.622-.218H8.98q.417 0 .623.219.204.21.205.649v2.618h-1.04v-2.27q0-.204-.211-.204h-2.38q-.21 0-.211.205v2.27h-1.04Zm.198-9.755q-.26 0-.26-.273V4.943q0-.273.26-.273h1.306q.273 0 .273.273v1.272q0 .273-.273.273zm3.172 0q-.267 0-.267-.273V4.943q0-.273.267-.273h1.306q.266 0 .266.273v1.272q0 .273-.266.273zM5.126 9.106q-.26 0-.26-.273V7.568q0-.273.26-.273h1.306q.273 0 .273.273v1.265q0 .273-.273.273zm3.172 0q-.267 0-.267-.273V7.568q0-.273.267-.273h1.306q.266 0 .266.273v1.265q0 .273-.266.273zm-3.172 2.625q-.26 0-.26-.28v-1.264q0-.274.26-.274h1.306q.273 0 .273.274v1.264q0 .28-.273.28zm3.172 0q-.267 0-.267-.28v-1.264q0-.274.267-.274h1.306q.266 0 .266.274v1.264q0 .28-.266.28z"})})},350979:(e,t,a)=>{a.d(t,{R:()=>i});a(242343);var s=()=>a(653998),n=()=>a(701270),o=a(163643);function i(e){let{error:t,id:a}=e;return t?(0,o.jsx)(n().D,{id:a,styleName:"UISmall-12px/Regular",colorName:"uiRedPrimary",children:"object"==typeof t?(0,o.jsx)(s().sA,{...t}):t}):null}},361414:(e,t,a)=>{a.d(t,{A:()=>x});a(725707),a(491955),a(403517);var s=a(242343),n=()=>a(803290),o=()=>a(174114),i=()=>a(599932),r=()=>a(653998),l=()=>a(76394),d=()=>a(443252),c=()=>a(783e3),u=()=>a(797715),g=()=>a(861095),m=()=>a(907721),p=()=>a(714604),h=a(163643);function f(e){const{permissionsInviteStore:t}=e,a=(0,r().tz)(),d=(0,n().K8)((()=>{const{inputFocus:e}=t.state;return"invitee"===e}),[t]),m=(0,n().K8)((()=>t.state.tokenQuery),[t]),f=(0,n().K8)((()=>t.state.inviteTargets.filter((e=>(0,p().eL)(e)))),[t]),x=(0,n().K8)((()=>t.state.inviteRole||"editor"),[t]),v=(0,s.useCallback)((e=>{const{newInviteTargets:a,newInputValue:s,inputFocus:n}=e;a.length>0?t.setState({...t.state,inviteTargets:a,isInviteTargetsEmpty:!1,table:"space",inviteRole:x,...(0,l().O9)(s)&&{tokenQuery:s},...(0,l().O9)(n)&&{inputFocus:n}}):t.setState({...t.state,inviteTargets:[],isInviteTargetsEmpty:!0,table:"space",inviteRole:x,...(0,l().O9)(s)&&{tokenQuery:s},...(0,l().O9)(n)&&{inputFocus:n}})}),[x,t]),b=(0,s.useCallback)((e=>{const a=e.target.value,{extractedEmails:s,newInputValue:n}=(0,i().Ct)(a),o=s.map((e=>({type:"newUser",value:{email:e},source:"email"}))).filter((e=>!(0,g().mQ)({target:e,permissionsInviteStore:t}))).filter(p().eL),r=[...f,...o];v({newInviteTargets:r,newInputValue:n,inputFocus:"invitee"})}),[f,t,v]),y=(0,s.useCallback)((e=>{const t=f.filter((t=>t!==e));v({newInviteTargets:t})}),[f,v]),S=(0,s.useCallback)((()=>{const e=f.slice(0,-1);v({newInviteTargets:e})}),[f,v]),j=(0,o().IS)((()=>({tokenMenuItem:{borderRadius:6,padding:"6px 8px"}})),[]),w=f.map((e=>(0,h.jsx)(c().A,{target:e,onClickRemove:y},e.value.id)));return(0,h.jsx)(u().Ay,{focusInitial:!0,focus:d,showBorder:!0,format:u().le.Select,tokenWrapStyle:{gap:4},value:m,onChange:b,onRemoveLastToken:S,type:"email",placeholder:a.formatMessage({id:"spacePermissionsInviteEmailSection.tokenInput.placeholder",defaultMessage:"Search names or emails"}),tokens:w,focusAfterAnimation:!0,style:j.tokenMenuItem})}const x=function(e){const{permissionsInviteStore:t,disableAutoFocus:l,showCurrentUser:c}=e,u=(0,a(997310).r)(),x=e.parentStore||u,v=(0,n().K8)((()=>{var e;return"invitee"===(null===(e=t.state)||void 0===e?void 0:e.inputFocus)}),[t]),b=(0,s.useCallback)((()=>{const e=t.state.tokenQuery.trim();if((0,i().DT)(e)){const a=t.state.inviteTargets.filter((e=>(0,p().eL)(e))),s="editor",n=t.state.inviteRole||s,o={type:"newUser",value:{email:e},source:"email"};if(!(0,g().mQ)({target:o,permissionsInviteStore:t})){const e=[...a,o];t.setState({...t.state,inviteTargets:e,isInviteTargetsEmpty:!1,table:"space",inviteRole:n,tokenQuery:""})}}t.setState({...t.state,inputFocus:"none"})}),[t]),y=(0,s.useCallback)((e=>{t.setState({...t.state,inputFocus:"invitee"}),e.stopPropagation()}),[t]);(0,s.useEffect)((()=>{l||t.setState({...t.state,inputFocus:"invitee"})}),[t,l]);const S=(0,o().IS)((e=>({origin:{display:"flex",flexDirection:"column",width:"100%",gap:8,padding:2},emailText:{color:e.text.secondary}})),[]);return x?(0,h.jsx)(d().Ay,{placementToOrigin:m().W.Bottom,alignmentToOrigin:m().C.Start,originGap:10,open:v,popupType:d().nl.Popup,sameWidthAsOrigin:!0,disableMouseCapture:!0,enableOutsideClickDismiss:!0,onDismiss:b,render:()=>(0,h.jsx)(a(54852).A,{permissionsInviteStore:t,store:x,defaultRoleForSpaceBot:"editor",shouldShowBots:!1,shouldShowGroups:!1,sectionRenderLimit:4,membersOnly:!1,disableInvitedUsers:!1,hideCurrentUser:!c,hideUserTypeToken:!1,hideTitle:!0,defaultUserTitle:"name_and_email_unless_right",performSearchRequest:e.performSearchRequest}),origin:(0,h.jsxs)("div",{style:S.origin,onClick:y,children:[(0,h.jsx)(a(701270).D,{styleName:"UISmall-12px/Medium",customStyles:S.emailText,children:(0,h.jsx)(r().sA,{id:"spacePermissionsInviteEmailSection.title",defaultMessage:"Email addresses"})}),(0,h.jsx)(f,{permissionsInviteStore:t})]})}):null}},362344:(e,t,a)=>{a.d(t,{K:()=>p,L:()=>m});var s=a(242343),n=()=>a(237385),o=()=>a(653998),i=()=>a(76394),r=()=>a(233309),l=()=>a(429318),d=()=>a(863969),c=()=>a(467941),u=()=>a(286404),g=a(163643);function m(e){const{style:t,analyticsType:a,filters:i,disabled:r}=e,l=(0,n().v3)(),[c,m]=(0,s.useState)(!1),h=(0,d().O)(),f=r||c;return(0,g.jsx)(u().A,{size:"lg",style:t,disabled:f,onClick:async function(){h&&(m(!0),await p({environment:l,spaceId:h,analyticsType:a,filters:i}),m(!1))},children:(0,g.jsx)(o().sA,{id:"spaceAnalytics.usersTab.export",defaultMessage:"Export as CSV"})})}async function p(e){const{environment:t,spaceId:a,organizationId:s,analyticsType:n,filters:o}=e;if(a)switch(n){case c().e.Users:r().TJ(t,{daysFilter:o.daysFilter}),await l().aC(t,{spaceId:a,organizationId:s,daysFilter:o.daysFilter});break;case c().e.Content:r().lP(t,{filters:o}),await l().QF(t,{spaceId:a,organizationId:s,filters:o});break;default:(0,i().HB)(n)}}},381602:(e,t,a)=>{a.d(t,{S:()=>l,i:()=>d});a(242343);var s=()=>a(653998),n=()=>a(84543),o=()=>a(431551),i=()=>a(577831),r=a(163643);function l(e){let{isEnabled:t,onToggle:a,disabled:n}=e;return(0,r.jsx)(i().y,{title:(0,r.jsx)(s().sA,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.title",defaultMessage:"Suppress invite emails from SCIM provisioning"}),byline:(0,r.jsx)(s().sA,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.message",defaultMessage:"Control if users will receive invite emails when provisioned by SCIM to workspaces and groups"}),item:(0,r.jsx)(o().A,{on:t,onClick:a,disabled:n})})}function d(e){let{environment:t,areScimInviteEmailsSuppressed:a,spaceStore:s}=e;n().createAndCommit({userAction:"ScimSection.SuppressScimInviteEmailsSetting",environment:t,canUndo:!0,perform:e=>{n().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings","are_scim_invite_emails_suppressed"],command:"set",args:a},transaction:e})}})}},385500:(e,t,a)=>{a.d(t,{ng:()=>H,Nt:()=>F,tv:()=>U,$:()=>O});a(725707),a(500234),a(403517);var s=a(242343),n=()=>a(528762),o=()=>a(195260),i=()=>a(949282),r=()=>a(803290),l=()=>a(174114),d=()=>a(427091),c=()=>a(758989),u=()=>a(477784),g=()=>a(28210),m=()=>a(953739),p=()=>a(76394),h=()=>a(308265),f=()=>a(204435),x=()=>a(517198),v=()=>a(701270),b=()=>a(59279),y=()=>a(971404),S=()=>a(700896),j=()=>a(893943),w=()=>a(975149),A=()=>a(783271),M=()=>a(482491),C=a(163643);const I=24,T=24;function k(e){switch(e.type){case"workspace":return(0,C.jsx)(D,{spaceStore:e.store});case"team":return(0,C.jsx)(z,{teamStore:e.store});case"external_workspace":return(0,C.jsx)(P,{name:e.name,icon:e.icon});case"block":return(0,C.jsx)(N,{blockStore:e.store});default:(0,p().HB)(e)}}function _(e){let{iconCellInfoArray:t}=e;const a=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:4}})),[]);return(0,C.jsx)("div",{style:a.container,children:t.map((e=>k(e)))})}function z(e){var t;const{teamStore:a}=e,s=R(),n=(0,y().Z)(),{name:o,icon:i}=(0,r().K8)((()=>({name:a.getName(),icon:a.getIcon()})),[a]),l=(0,r().K8)((()=>a.getSpaceId()??""),[a]),d=(0,r().K8)((()=>[l]),[l]),{teamAggregateDataForSpace:c,loading:u}=(0,S().N)(d),m=(null==c||null===(t=c[l])||void 0===t||null===(t=t[a.id])||void 0===t?void 0:t.memberCount)??0;return(0,C.jsx)("div",{style:s.container,children:(0,C.jsx)(b().s7,{title:(0,C.jsx)("span",{style:s.primaryOnDarkBackground,children:o}),icon:(0,C.jsx)(g().B,{size:I,emojiSize:T,disabled:!0,icon:i,isEmptyPage:!1,title:o,isLarge:!0,isRaw:!1}),iconSize:I,byline:u?(0,C.jsx)(x().A,{style:n.shortShimmer}):(0,C.jsx)(v().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:s.secondaryOnDarkBackground,children:(0,C.jsx)(w().Qq,{memberCount:m})})})})}function D(e){var t;const{spaceStore:a}=e,s=R(),{name:n,icon:o}=(0,r().K8)((()=>({name:a.getName(),icon:a.getIcon()})),[a]),i=(0,r().K8)((()=>[a.id]),[a]),{teamStores:l,loading:d}=(0,j().o)(i);return(0,C.jsx)("div",{style:s.container,children:(0,C.jsx)(b().s7,{title:(0,C.jsx)("span",{style:s.primaryOnDarkBackground,children:n}),icon:(0,C.jsx)(g().B,{size:I,emojiSize:T,disabled:!0,icon:o,isEmptyPage:!1,title:n,isLarge:!0,isRaw:!1}),iconSize:I,byline:(0,C.jsx)(M().i,{spaceId:a.id,teamCount:(null===(t=l[a.id])||void 0===t?void 0:t.length)??0,loading:d,styles:s.secondaryOnDarkBackground})})})}function P(e){const{name:t,icon:a}=e,s=R();return(0,C.jsx)("div",{style:s.container,children:(0,C.jsx)(b().s7,{title:(0,C.jsxs)(f().fI,{gap:8,children:[t,(0,C.jsx)(A().YM,{content:"External"})]}),icon:(0,C.jsx)(g().B,{size:I,emojiSize:T,disabled:!0,icon:a,isEmptyPage:!1,title:t,isLarge:!0,isRaw:!1}),iconSize:I})})}function N(e){const{blockStore:t}=e,a=(0,h().BG)(),s=(0,r().K8)((()=>{const e=null==t?void 0:t.getModel();if(e&&t)return e.getRenderIcon({getRecordModel:t.getRecordModel})}),[t]),{pageTitle:n,placeholderTitle:o}=(0,r().K8)((()=>{const e=null==t?void 0:t.getModel();return e&&t?{pageTitle:e.getRenderTitle({getRecordModel:t.getRecordModel,userTimeZone:(0,d().P)(),intl:u().A.getIntl()}),placeholderTitle:e.getEmptyTitlePlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,d().P)(),intl:u().A.getIntl(),isWorkflowsAppContainerEnabled:a})}:{}}),[t,a]),i=R();return(0,C.jsx)("div",{style:i.container,children:(0,C.jsx)(b().s7,{title:n||o,icon:(0,C.jsx)(g().B,{icon:s,size:T,isEmptyPage:!1,disabled:!0}),iconSize:T})})}function R(){return(0,l().IS)((e=>({container:{width:250},primaryOnDarkBackground:{color:"dark"===e.mode?e.primaryBlack:e.white},secondaryOnDarkBackground:{color:"dark"===e.mode?e.primaryBlack:e.white,opacity:.8}})),[])}const B=2;function E(e){const{iconCellInfoArray:t,totalCount:a,showTooltip:s,isLoading:n}=e,o=(0,r().K8)((()=>t.sort(((e,t)=>{if("block"===e.type||"block"===t.type)return 0;const a="external_workspace"===e.type?e.name:e.store.getName(),s="external_workspace"===t.type?t.name:t.store.getName();return a||s?a&&!s?-1:!a&&s?1:a.localeCompare(s):0}))),[t]),i=(0,r().K8)((()=>o.map((e=>({renderAvatar:()=>(0,C.jsx)(L,{iconCellInfo:e}),renderTooltip:s?()=>k(e):void 0})))),[o,s]);return(0,C.jsx)(m().Qp,{avatars:i,totalCount:a,renderOverflowTooltip:s?()=>(0,C.jsx)(_,{iconCellInfoArray:o}):void 0,isLoading:n})}function L(e){const{iconCellInfo:t}=e,{name:a,icon:s}=(0,r().K8)((()=>{if("block"===t.type){const e=t.store.getModel();return e?{name:e.getRenderTitle({getRecordModel:t.store.getRecordModel,userTimeZone:(0,d().P)(),intl:u().A.getIntl()}),icon:e.getRenderIcon({getRecordModel:t.store.getRecordModel})}:{name:"",icon:void 0}}return"external_workspace"===t.type?{name:t.name,icon:t.icon}:{name:t.store.getName(),icon:t.store.getIcon()}}),[t]),n=(0,l().IS)((e=>({icon:{borderRadius:5,marginRight:-B,border:`${B}px solid ${e.modalBackground}`,display:"flex",alignItems:"center",justifyContent:"center",height:m().tR+2*B,width:m().tR+2*B,background:s&&(0,c().T8)(s.icon)?(0,c().ez)({icon:s.icon,mode:e.mode,useLightGrayColor:!1}):e.accentColors.gray[75],zIndex:2,position:"relative"},iconContainer:{position:"relative"},iconBackground:{position:"absolute",top:0,bottom:0,left:0,right:0,background:e.contentBackground,zIndex:1}})),[s]);return(0,C.jsxs)("div",{style:n.iconContainer,children:[(0,C.jsx)("div",{style:n.icon,children:(0,C.jsx)(g().B,{size:m().tR,emojiSize:m().Gz,disabled:!0,icon:s,isEmptyPage:!1,title:"block"===t.type?void 0:a,isLarge:"block"!==t.type,isRaw:!1})}),(0,C.jsx)("div",{style:n.iconBackground})]})}function O(e){const{spaceStores:t,totalCount:a,showTooltip:s,isLoading:n}=e;return(0,C.jsx)(E,{iconCellInfoArray:t.map((e=>({type:"workspace",store:e}))),totalCount:a,showTooltip:s,isLoading:n})}function U(e){const{teamStores:t,totalCount:a,isLoading:s,showTooltip:n}=e;return(0,C.jsx)(E,{iconCellInfoArray:t.map((e=>({type:"team",store:e}))),totalCount:a,showTooltip:n,isLoading:s})}function F(e){const{workspaces:t,totalCount:a,showTooltip:r}=e,{spaceIds:l}=(0,s.useContext)(o().D),d=(0,i().l)(l),c=t.map((e=>l.includes(e.id)?{type:"workspace",store:d.find((t=>t.id===e.id))}:{type:"external_workspace",name:e.name??"",icon:e.icon?{pointer:{table:n().NX,id:e.id},icon:e.icon}:void 0}));return(0,C.jsx)(E,{iconCellInfoArray:c,totalCount:a,showTooltip:r,isLoading:!1})}function H(e){const{blockStores:t,totalCount:a,showTooltip:s,isLoading:n}=e;return(0,C.jsx)(E,{iconCellInfoArray:t.map((e=>({type:"block",store:e}))),totalCount:a,showTooltip:s,isLoading:n})}},402633:(e,t,a)=>{a.d(t,{T:()=>l});a(403517),a(242343);var s=()=>a(803290),n=()=>a(409211),o=()=>a(413871),i=()=>a(685008),r=a(163643);function l(e){let{blockStore:t,userIds:a,isClickable:l}=e;const d=(0,s().K8)((()=>a.map((e=>o().LU.createChildStore(t,{table:n().oo,id:e})))),[t,a]);return(0,r.jsx)(i().l,{userStores:d,isClickable:l})}},402918:(e,t,a)=>{a.d(t,{N:()=>$,A:()=>Q});a(403517);var s=a(242343),n=()=>a(417021),o=()=>a(237385),i=()=>a(803290),r=()=>a(174114),l=()=>a(727171),d=()=>a(653998),c=()=>a(220413),u=()=>a(31448),g=()=>a(233309),m=()=>a(976576),p=()=>a(851363),h=()=>a(477784),f=()=>a(392608),x=()=>a(830820),v=()=>a(907721),b=()=>a(467941),y=()=>a(410194),S=()=>a(103151),j=()=>a(35462),w=()=>a(487966),A=()=>a(362344),M=()=>a(53595),C=()=>a(731942),I=()=>a(415385),T=()=>a(571713),k=()=>a(164428),_=()=>a(338951),z=a(163643);const D=640;function P(e){let{data:t,loading:a,error:s,daysFilter:n,setDaysFilter:o}=e;const[i,c]=(0,x().z)(),g=(0,r().IS)((e=>({title:{fontWeight:u().Wy.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},container:{display:"flex",flexDirection:"column",gap:16},helpInfo:{marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},summaryCard:{height:70},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{activeMembersCount:m,previousActiveMembersCount:p,activeGuestsCount:b,previousActiveGuestsCount:y}=t;return(0,z.jsxs)("div",{style:g.container,ref:i,children:[(0,z.jsxs)("div",{style:g.titleContainer,children:[(0,z.jsxs)(j().A,{style:g.title,children:[(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.title",defaultMessage:"User engagement"}),(0,z.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,z.jsx)(w().A,{...e,href:(0,f().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:g.helpInfo}),renderTooltip:()=>"all_time"!==n?(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:h().A.formatMessage(l().Yr[n])}}):(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,z.jsx)(k().Z,{currentFilter:n,onChangeFilter:o})]}),(0,z.jsxs)(C().xA,{gap:16,children:[(0,z.jsx)(C().LX,{row:1,col:1,children:(0,z.jsx)(T().a,{style:g.summaryCard,loading:a,error:s,title:(0,z.jsx)(d().sA,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,z.jsx)(I()._,{abbreviateNumber:c<D,num:m})}}),byline:void 0!==p?(0,z.jsx)(_().Z,{userType:"members",daysFilter:n,count:m,previousCount:p}):null})}),(0,z.jsx)(C().LX,{row:1,col:2,children:(0,z.jsx)(T().a,{style:g.summaryCard,loading:a,error:s,title:(0,z.jsx)(d().sA,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,z.jsx)(I()._,{abbreviateNumber:c<D,num:b})}}),byline:void 0!==y?(0,z.jsx)(_().Z,{userType:"guests",daysFilter:n,count:b,previousCount:y}):null})})]})]})}a(333225),a(494367),a(516262),a(573119),a(240480),a(950443),a(619601),a(725707),a(491955);var N=()=>a(162901),R=()=>a(519423),B=()=>a(242297),E=()=>a(818369),L=()=>a(931371),O=()=>a(150957),U=()=>a(485966),F=()=>a(537311),H=()=>a(419809);const V=(0,d().YK)({page_views:{id:"workspaceAnalytics.usersTab.usersTable.pageViews.tooltip",defaultMessage:"Total number of page views for the user across all pages in the workspace"},page_edits:{id:"workspaceAnalytics.usersTab.usersTable.pageEdits.tooltip",defaultMessage:"Total number of page edits for the user across all pages in the workspace"}}),W=(0,d().YK)({user:{id:"spaceAnalyticsUsersTab.column.user",defaultMessage:"User"},page_views:{id:"spaceAnalyticsUsersTab.column.pageViews",defaultMessage:"Page views"},page_edits:{id:"spaceAnalyticsUsersTab.column.pageEdits",defaultMessage:"Page edits"},last_active:{id:"spaceAnalyticsUsersTab.column.lastActive",defaultMessage:"Last active"},teams:{id:"spaceAnalyticsUsersTab.column.teams",defaultMessage:"Teamspaces"}}),q={user:{id:"user",renderCell:function(e){const{userStore:t,role:n}=e,o=(0,r().IS)((e=>({container:{height:52}})),[]);(0,s.useEffect)((()=>{t.load()}),[t]);return(0,i().K8)((()=>t.isReady()),[t])?(0,z.jsx)(O().A,{containerStyle:o.container,actorStore:t,spaceRole:n&&(0,O().v)(n)}):(0,z.jsx)(a(63108).a,{})},headerTitle:h().A.formatMessage(W.user),widthData:{width:100},sortable:!1},page_views:{id:"page_views",renderCell:function(e){const{page_views:t}=e,s=(0,r().IS)((e=>({eyeHideIcon:{width:20,height:20,color:e.lightIconColor}})),[]);if(void 0===t)return(0,z.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,z.jsx)("div",{...e,children:(0,a(269556).F)(s.eyeHideIcon)}),renderTooltip:e=>(0,z.jsx)(d().sA,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})});return(0,z.jsx)(j().A,{children:t})},headerTitle:(0,z.jsx)(H().Z,{tooltipMessageDescriptor:V.page_views,columnHeader:W.page_views}),widthData:{width:80},sortable:!0},page_edits:{id:"page_edits",renderCell:function(e){const{page_edits:t}=e;return(0,z.jsx)(j().A,{children:t})},headerTitle:(0,z.jsx)(H().Z,{tooltipMessageDescriptor:V.page_edits,columnHeader:W.page_edits}),widthData:{width:80},sortable:!0},last_active:{id:"last_active",renderCell:function(e){const t=e.last_active;let s;s=t?(0,z.jsx)(a(811132).d,{dateTs:t}):(0,z.jsx)(j().A,{isSecondaryColor:!0,children:(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userTable.lastActiveTimestamp.noLastActive",defaultMessage:"No activity"})});return(0,z.jsx)("div",{children:s})},headerTitle:h().A.formatMessage(W.last_active),widthData:{width:50},sortable:!0},teams:{id:"teams",renderCell:function(e){const{teamStores:t,userStore:s,role:n,userPermissionGroupIds:o}=e;if(!n)return(0,z.jsx)(j().A,{children:(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.teamsColumn.guest",defaultMessage:"None"})});return(0,z.jsx)(a(583362).Ay,{teamStores:t,memberId:s.id,userPermissionGroupIds:o})},headerTitle:h().A.formatMessage(W.teams),widthData:{width:50},sortable:!1}};const G=(0,a(76394).uv)(q).map((e=>q[e])),K=25;function Y(e){const t=(0,o().v3)(),[a,n]=(0,s.useState)(K),{teamStores:u,usersAndStats:m,filter:p,onUserTabFilterChange:h,usersAndStatsError:f}=e,{userRoles:x,spaceId:v}=(0,i().K8)((()=>{const{currentSpaceStore:e}=U().default.state,t=m.map((e=>e.userStore.id)),a=null==e?void 0:e.id,s={};for(const n of t){const t=(0,L().sE)(e,n),a=null==t?void 0:t.getMembershipType();if(a&&"none"!==a&&"page_guest"!==a){const e=(0,B().C4)(a);s[n]=e}}return{userRoles:s,spaceId:a}}),[m]),[{value:b}]=(0,N().Yb)((async()=>{if(void 0===v)return{};const e=await E().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:t,data:{spaceId:v,userIds:m.map((e=>e.userStore.id))},headers:(0,R().WS)({cellId:void 0,spaceId:v})});return"success"===e.type?e.data.userToGroupMap:{}}),[t,v,m],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),[y,S]=(0,s.useState)({column:q.last_active,sortAscending:!1}),w=(0,s.useCallback)((e=>{g().Jv(t,{column:e.column.id,isAscending:e.sortAscending}),S(e)}),[S,t]),A=m.map((e=>{let{userStore:t,stats:a}=e;return{id:a.userId,userStore:t,teamStores:u,isClickable:!1,last_active:a.lastActive,page_views:a.numPageViews,page_edits:a.numPageEdits,role:x[a.userId],userPermissionGroupIds:new Set((null==b?void 0:b[a.userId])||[])}})).sort(function(e){switch(e.column.id){case"last_active":return(t,a)=>(0,l().mj)(t.last_active,a.last_active,e.sortAscending);case"page_views":return(t,a)=>(0,l().xV)(t.page_views,a.page_views,e.sortAscending);case"page_edits":return(t,a)=>e.sortAscending?t.page_edits-a.page_edits:a.page_edits-t.page_edits;default:return(e,t)=>0}}(y)),M=(0,s.useMemo)((()=>A.slice(0,a)),[A,a]),C=(0,r().IS)((e=>({error:{color:c().Ay.red},dateFilterPill:{display:"flex",marginTop:10,marginBottom:15,flexFlow:"row",alignItems:"center"},timeFilterDescription:{marginRight:5}})),[]);const I=(0,s.useCallback)((e=>{g().Jy(t,{daysFilter:e}),h({tableFilter:e})}),[t,h]),T=(0,r().IS)((e=>(0,F().rC)({columnRenderInfo:G,theme:e,containerMarginTop:0})),[]);return(0,z.jsxs)(z.Fragment,{children:[f&&(0,z.jsx)(j().A,{isMultiline:!1,style:C.error,children:f}),(0,z.jsxs)("div",{style:C.dateFilterPill,children:[(0,z.jsx)(j().A,{isSecondaryColor:!0,style:C.timeFilterDescription,children:(0,z.jsx)(d().sA,{id:"workspaceAnalytics.timeFilter.description",defaultMessage:"Views and edits from"})}),(0,z.jsx)(k().Z,{currentFilter:p,onChangeFilter:I})]}),(0,z.jsx)(F().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,maxHeight:500,sortState:y,onSortStateChanged:w,columnRenderInfo:G,rows:M,renderNoRowsComponent:()=>(0,z.jsx)("div",{children:"N/A"}),styles:T,loadMoreMethod:{type:"scroll",onLoadMore:function(){a<m.length&&n(a+K)}}})]})}function Q(e){var t,a;let{spaceStore:n,teamStores:c,usersTabData:p,onUserTabFilterChange:y,userEngagement:C}=e;const[I,T]=(0,x().z)(),k=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:16},sectionTitle:{fontWeight:u().Wy.medium,fontSize:16},sectionTitleLeft:{marginBlock:"8px 4px",marginBottom:5,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},tableHeader:{marginTop:20,flexDirection:"row",display:"flex",justifyContent:"space-between",alignItems:"end"}})),[]),_=(0,o().v3)(),D=(0,d().tz)(),N=(0,s.useCallback)((e=>{g().wy(_,{daysFilter:e});y({graphFilter:"all_time"===e?"last_90_days":e}),C.setDaysFilter(e)}),[y,C,_]),R=(0,i().K8)((()=>n.getName()),[n]);if("NotFoundError"===(null==p||null===(t=p.usersAndStatsError)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(a=C.error)||void 0===a?void 0:a.name))return(0,z.jsx)(M().H,{type:"empty",spaceName:R});const B=Math.floor(T-8);return(0,z.jsxs)("div",{style:k.container,children:[(0,z.jsx)(P,{data:C.data,loading:C.loading,error:C.error,daysFilter:C.daysFilter,setDaysFilter:N}),(0,z.jsx)($,{usersTabData:p,daysFilter:C.daysFilter,intl:D,containerRef:I,widthOfGraph:B}),(0,z.jsxs)("div",{style:k.tableHeader,children:[(0,z.jsxs)("div",{style:k.sectionTitleLeft,children:[(0,z.jsx)(j().A,{style:k.sectionTitle,children:(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.allUsers.title",defaultMessage:"All members in Notion"})}),(0,z.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,z.jsx)(w().A,{...e,href:(0,f().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:k.helpInfo}),renderTooltip:()=>p&&"all_time"!==p.tableFilter?(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.allMembers.tooltip.lastDays",defaultMessage:"Per member workspace activity over the {dateRange}",values:{dateRange:h().A.formatMessage(l().Yr[p.tableFilter])}}):(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.allMembers.tooltip.allTime",defaultMessage:"All time per member workspace activity"})})]}),p?(0,z.jsx)(A().L,{analyticsType:b().e.Users,filters:{daysFilter:p.tableFilter}}):null]}),p?(0,z.jsx)(Y,{teamStores:c,filter:p.tableFilter,usersAndStats:p.usersAndStats,onUserTabFilterChange:y,usersAndStatsError:p.usersAndStatsError&&m().fP(p.usersAndStatsError,D)}):null]})}function $(e){let{usersTabData:t,daysFilter:a,containerRef:s,widthOfGraph:n,intl:o,displayBoxStyle:i,graphTitleStyle:r}=e;return(0,z.jsx)(X,{style:i,children:(0,z.jsx)("div",{ref:s,children:t?(0,z.jsx)(Z,{width:n,dailyUsersData:t.dailyUsersData,userEngagementDaysFilter:a,daysFilter:t.graphFilter,dailyUsersError:t.dailyUsersError&&m().fP(t.dailyUsersError,o),graphTitleStyle:r}):(0,z.jsx)(J,{})})})}function X(e){const t=(0,r().IS)((t=>({border:{borderRadius:4,overflow:"hidden",border:`1px solid ${t.regularDividerColor}`,backgroundColor:t.contentBackground,color:t.text.primary,padding:20,...e.style}})),[e.style]);return(0,z.jsx)("div",{style:t.border,children:e.children})}function Z(e){const{width:t,dailyUsersData:a,userEngagementDaysFilter:s,daysFilter:o,dailyUsersError:g}=e,m=(0,r().IS)((t=>({graphHeader:{marginBottom:10,display:"flex",justifyContent:"space-between"},graphTitle:{fontSize:u().J.UIRegular.desktop,fontWeight:"bolder",display:"flex",alignItems:"center",height:24,...e.graphTitleStyle},helpInfo:{marginLeft:4},emptyGraphBody:{textAlign:"center",paddingTop:50,paddingBottom:50},error:{color:c().Ay.red},graphSubLabel:{paddingTop:4,color:"grey"}})),[e.graphTitleStyle]),{blueLayer:x}=(0,n().useTimeSeriesPalette)(),b=(0,i().K8)((()=>{if(0===a.length)return;return{startDate:a[0].ds,endDate:a[a.length-1].ds}}),[a]),y=(0,i().K8)((()=>a.map((e=>({ds:e.ds,values:{active_members:e.active_members||0}})))),[a]);let A;return A=!b||a.length<3?(0,z.jsx)("div",{style:m.emptyGraphBody,children:(0,z.jsx)(j().A,{isSecondaryColor:!0,children:(0,z.jsx)(d().sA,{id:"workspaceAnalytics.usersOverTime.emptyGraph",defaultMessage:"Not enough data to display graph"})})}):(0,z.jsx)(p().b,{startDate:b.startDate,endDate:b.endDate,width:t,data:y,height:300,layers:[{key:"active_members",...x,renderLabel:e=>(0,z.jsx)(d().sA,{id:"workspaceAnalytics.usersOverTime.activeMembers",defaultMessage:"{activeMembers, plural, one {1 active member} other {{activeMembers} active members}}",values:{activeMembers:e}})}],renderTooltipSubLabel:()=>(0,z.jsx)("div",{style:m.graphSubLabel,children:(0,z.jsx)(d().sA,{id:"workspaceAnalytics.usersOverTime.activeMembers.sublabel",defaultMessage:"Viewed a page in the {dateRange}",values:{dateRange:h().A.formatMessage(l().Yr[o])}})})}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:m.graphHeader,children:(0,z.jsxs)(j().A,{style:m.graphTitle,children:[(0,z.jsx)(d().sA,{id:"workspaceAnalytics.membersOverTime.title",defaultMessage:"Active members over time"}),"all_time"===s&&(0,z.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,z.jsx)(w().A,{...e,href:(0,f().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:m.helpInfo}),renderTooltip:()=>(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.membersOverTime.allTimeTooltip",defaultMessage:"All Time selection shows members who have viewed a page in the last 90 days."})})]})}),g&&(0,z.jsx)(j().A,{isMultiline:!1,style:m.error,children:g}),A]})}function J(){return(0,z.jsxs)("div",{children:[(0,z.jsx)(y().A,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]}),(0,z.jsx)(y().A,{paragraphs:[{lineHeight:300,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:12}]})]})}},410087:(e,t,a)=>{a.d(t,{F:()=>l});a(242343);var s=()=>a(174114),n=()=>a(653998),o=()=>a(811132),i=()=>a(35462),r=a(163643);function l(e){let{lastActiveAt:t,containerStyle:a,useSecondaryColorTitle:l,isNoActivitySecondaryColor:d}=e;const c=(0,s().IS)((e=>({container:{...a}})),[a]);return(0,r.jsx)("div",{style:c.container,children:t?(0,r.jsx)(o().d,{useSecondaryColorTitle:l,dateTs:t}):(0,r.jsx)(i().A,{isSecondaryColor:d,children:(0,r.jsx)(n().sA,{id:"identityAndProvisioning.managedUsers.table.lastActive.unknown",defaultMessage:"No activity"})})})}},410194:(e,t,a)=>{a.d(t,{A:()=>r});a(403517);var s=a(242343),n=()=>a(174114),o=()=>a(517198),i=a(163643);function r(e){let{paragraphs:t}=e;const a=(0,n().IS)((e=>({skeletonRect:{borderRadius:4,backgroundColor:e.lightDividerColor}})),[]),r=null==t?void 0:t.map(((e,t)=>{const n={height:e.lineHeight,marginTop:e.lineMargin,marginBottom:e.lineMargin},r={marginTop:e.sectionMargin,marginBottom:e.sectionMargin},l=[...Array(e.repeat||1)].map(((t,s)=>(0,i.jsx)("div",{style:r,children:e.sectionWidths.map(((e,t)=>(0,i.jsx)(o().A,{style:{...a.skeletonRect,...n,width:`${e}%`}},t)))},s)));return(0,i.jsxs)(s.Fragment,{children:[" ",l," "]},t)}));return(0,i.jsxs)(i.Fragment,{children:[" ",r," "]})}},412961:(e,t,a)=>{a.d(t,{o:()=>n});a(242343);const s={viewBox:"0 0 20 20",svg:(0,a(163643).jsx)("path",{d:"M3.75 3.125c.345 0 .625.28.625.625v7.097l3.016-2.639a.625.625 0 0 1 .854.028l3.036 3.037 3.485-3.485H12.75a.625.625 0 1 1 0-1.25h3.5c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0V8.696l-3.902 3.902a.625.625 0 0 1-.884 0L7.774 9.534l-3.399 2.974v2.242c0 .483.392.875.875.875h11a.625.625 0 1 1 0 1.25h-11a2.125 2.125 0 0 1-2.125-2.125v-11c0-.345.28-.625.625-.625"})},n=(0,a(680369).wt)("chartLineUptrend",s)},413851:(e,t,a)=>{a.d(t,{g:()=>o});a(242343);var s=a(163643);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M12.876 7.978a.625.625 0 1 0-1.072-.643L9.25 11.59 7.815 9.916a.625.625 0 0 0-.95.814l2 2.333a.625.625 0 0 0 1.01-.085z"}),(0,s.jsx)("path",{d:"M10.28 2.241a.63.63 0 0 0-.56 0l-1.89.945a7.5 7.5 0 0 1-3.342.789H3.7a.625.625 0 0 0-.625.625v6.933a5.13 5.13 0 0 0 3.106 4.71l3.573 1.532a.63.63 0 0 0 .492 0l3.573-1.532a5.13 5.13 0 0 0 3.106-4.71V4.6a.625.625 0 0 0-.625-.625h-.788c-1.16 0-2.305-.27-3.343-.79zM8.39 4.304 10 3.499l1.61.805a8.7 8.7 0 0 0 3.902.921h.163v6.308c0 1.55-.924 2.95-2.349 3.562L10 16.52l-3.326-1.425a3.88 3.88 0 0 1-2.349-3.562V5.225h.163c1.354 0 2.69-.315 3.902-.921"})]})},o=(0,a(680369).wt)("checkmarkShield",n)},415385:(e,t,a)=>{a.d(t,{_:()=>l});a(242343);var s=()=>a(707781),n=()=>a(653998),o=()=>a(907721),i=()=>a(103151),r=a(163643);function l(e){let{num:t,abbreviateNumber:a}=e;const l=(0,n().tz)(),d=(0,s().H)(l),c=t.toLocaleString(d),u=Intl.NumberFormat(d,{notation:"compact",maximumFractionDigits:1}).format(t);return a?(0,r.jsx)(i().A,{placement:o().W.Bottom,render:e=>(0,r.jsx)("span",{...e,children:u}),renderTooltip:()=>c}):(0,r.jsx)("span",{children:c})}},416865:(e,t,a)=>{a.d(t,{Z:()=>y});var s=a(242343),n=()=>a(803290),o=()=>a(174114),i=()=>a(871002),r=()=>a(633427),l=()=>a(348588),d=()=>a(653998),c=()=>a(76394),u=()=>a(31448),g=()=>a(577040),m=()=>a(36746),p=()=>a(126451),h=()=>a(535906),f=()=>a(158918),x=()=>a(849417),v=()=>a(634444),b=a(163643);function y(e){let{lastEditedTime:t,createdTime:a,setLastEditedTime:o,setCreatedOnTime:r}=e;const p=(0,d().tz)(),[h,f]=(0,s.useState)("createdTime"),y=(0,s.useMemo)((()=>{switch(h){case"createdTime":return a;case"lastEditedTime":return t;default:(0,c().HB)(h)}}),[t,a,h]),j=(0,s.useMemo)((()=>{switch(h){case"createdTime":return r;case"lastEditedTime":return o;default:(0,c().HB)(h)}}),[o,r,h]);const w=(0,n().K8)((()=>{if((0,g().jO)(y))switch(h){case"createdTime":return(0,b.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.createdOn.title",defaultMessage:"Created on"});case"lastEditedTime":return(0,b.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.title",defaultMessage:"Last edited on"});default:(0,c().HB)(h)}const e=(0,g().ES)(y),t=m().tX(e,p,i().vz);switch(h){case"createdTime":return(0,b.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.createdOn.titleWithDateRange",defaultMessage:"<b>Created on</b>: {dateRangeString}",values:{dateRangeString:t,b:e=>(0,b.jsx)("span",{style:{fontWeight:u().Wy.medium},children:e})}});case"lastEditedTime":return(0,b.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.titleWithDateRange",defaultMessage:"<b>Last edited on</b>: {dateRangeString}",values:{dateRangeString:t,b:e=>(0,b.jsx)("span",{style:{fontWeight:u().Wy.medium},children:e})}});default:(0,c().HB)(h)}}),[y,h,p]);return(0,b.jsx)(x().A,{header:(0,b.jsx)(S,{selectedItem:h,setSelectedItem:function(e){f(e)}}),mode:v().C.Pill,focused:!1,hideTime:!0,pillTitle:w,title:w,icon:l().D,value:y,showButtons:"footer",onChange:e=>{j(e)}})}function S(e){let{selectedItem:t,setSelectedItem:a}=e;const s=(0,o().IS)((e=>({button:{margin:"14px 12px 4px",padding:"2px 8px",width:"fit-content",borderRadius:4},text:{display:"flex",alignItems:"center",color:e.text.secondary,fill:e.lightIconColor,fontWeight:500,fontSize:13},icon:{height:14,width:14,marginLeft:4}})),[]),n={width:190,items:["createdTime","lastEditedTime"],selectedItem:t,getKey:e=>e,onSelect:e=>a(e),renderItem:e=>(0,b.jsx)(h().A,{title:j(e.value),...e}),renderOrigin:e=>(0,b.jsx)(p().A,{...e,style:s.button,children:(0,b.jsxs)("div",{style:s.text,children:[j(t),(0,r().arrowChevronSingleDownIcon)(s.icon)]})})};return(0,b.jsx)(f().A,{...n,mobileActionSheet:!0})}function j(e){return{lastEditedTime:(0,b.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.option",defaultMessage:"Last edited on"}),createdTime:(0,b.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.createdOn.option",defaultMessage:"Created on"})}[e]}},419809:(e,t,a)=>{a.d(t,{Z:()=>l});a(242343);var s=()=>a(653998),n=()=>a(477784),o=()=>a(907721),i=()=>a(103151),r=a(163643);function l(e){const{tooltipMessageDescriptor:t,columnHeader:a}=e;return(0,r.jsx)(i().A,{placement:o().W.Top,renderTooltip:e=>(0,r.jsx)("div",{...e,children:(0,r.jsx)(s().sA,{...t})}),render:e=>(0,r.jsx)("div",{...e,children:n().A.formatMessage(a)})})}},454909:(e,t,a)=>{a.d(t,{p:()=>s});const s=["private","shared_internally","shared_externally","shared_to_web"]},456456:(e,t,a)=>{a.d(t,{q3:()=>we,CX:()=>Ce,Hj:()=>Te});a(725707),a(491955),a(403517);var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(686487),r=()=>a(653998),l=()=>a(975392),d=()=>a(76394),c=()=>a(818369),u=()=>a(145046),g=()=>a(500418),m=()=>a(137476),p=()=>a(868325),h=()=>a(477784),f=()=>a(622286),x=()=>a(951540),v=()=>a(116944),b=()=>a(634369),y=()=>a(893576),S=()=>a(1051),j=()=>a(789874),w=()=>a(162901),A=()=>a(379356);var M=()=>a(825497),C=()=>a(196808),I=()=>a(210131),T=()=>a(631472),k=()=>a(855410),_=()=>a(853745),z=()=>a(605827),D=()=>a(909497),P=()=>a(915341),N=()=>a(472589),R=a(163643);function B(e){let{selectedStatuses:t,setSelectedStatuses:a}=e;return(0,R.jsx)(N().VX,{pillTitle:(0,R.jsx)(r().sA,{id:"organizationEmailDomains.table.filters.status.title",defaultMessage:"Status"}),pillIcon:P().E,selectedItems:t,setSelectedItems:a,items:E})}const E=[S().A$.Success,S().A$.Pending,S().A$.Failure].map((e=>({key:e,value:e,title:(0,R.jsx)(v().d9,{status:e}),shortTitle:(0,v().xF)(e),dontShrinkTitle:!0})));var L=()=>a(126910),O=()=>a(174114),U=()=>a(870122),F=()=>a(529305),H=()=>a(286404),V=()=>a(539048),W=()=>a(396218);function q(e){const{onDismiss:t,domainVerification:a}=e,s=(0,O().IS)((e=>({headerIcon:{height:32,width:32,fill:e.icon.secondary},content:{width:400},fullButton:{width:"100%"}})),[]);return(0,R.jsx)(V().s,{isOpen:!0,onDismiss:t,render:e=>{let{sizeRange:n}=e;return(0,R.jsx)(F().tf,{showDismissButton:!1,sizeRange:n,header:(0,R.jsx)(W().rQ,{icon:(0,U().globeIcon)(s.headerIcon),title:(0,R.jsx)(r().sA,{id:"settingsConsole.emailDomains.invalidDomainModal.title",defaultMessage:"Unable to verify email domain"}),byline:(0,R.jsx)(r().sA,{id:"settingsConsole.emailDomains.invalidDomainModal.invalid",defaultMessage:"You are unable to verify the email domain <b>{domain}</b> because it has already been verified by another workspace or organization.",values:{domain:a.domain,b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,R.jsx)("b",{children:t})}}})}),footer:(0,R.jsx)("div",{style:s.content,children:(0,R.jsx)(H().A,{size:"lg",onClick:t,style:s.fullButton,children:(0,R.jsx)(r().sA,{id:"settingsConsole.emailDomains.invalidDomainModal.okay",defaultMessage:"OK"})})})})}})}var G=()=>a(516998),K=()=>a(528762),Y=()=>a(188877),Q=()=>a(31448),$=()=>a(575015),X=()=>a(413871),Z=()=>a(559637),J=()=>a(204435),ee=()=>a(966789),te=()=>a(701270),ae=()=>a(28210),se=()=>a(195260),ne=()=>a(563680);function oe(e){let{domainVerification:t,onDismiss:a,organizationId:o,associatedAccountCount:i,linkedSpaceIds:l}=e;const g=(0,O().IS)((e=>({icon:{height:30,width:30,color:e.text.uiRedPrimary},confirmation:{display:"flex",width:"100%",justifyContent:"center",gap:10},modalContainer:{width:W().NF},loadingContainer:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",height:100}})),[]),m=(0,n().v3)(),{refreshOrganization:f}=(0,s.useContext)(se().D),[x,v]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),S=(0,s.useCallback)((async()=>{if(!x||b)return;y(!0);const e=await c().callApi({eventName:"deleteVerifiedDomainsForOrganization",environment:m,data:{organizationId:o,emailDomainsToRemove:[t.domain]}});y(!1),a(),"success"===e.type?(f(),$().D6({label:(0,R.jsx)(te().D,{styleName:"UIRegular-14px/Regular",children:(0,R.jsx)(r().sA,{id:"organizationEmailDomainsTable.toastMessage.removeDomain.success",defaultMessage:"Successfully removed <b>{domain}</b>",values:{domain:t.domain,b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,R.jsx)("b",{children:t})}}})})})):u().f1((0,p().Hu)(h().A.getIntl(),e))}),[m,o,f,a,x,b,t.domain]);return(0,R.jsx)(V().s,{isOpen:!0,onDismiss:a,render:e=>{let{sizeRange:s}=e;return(0,R.jsx)("div",{style:g.modalContainer,children:(0,R.jsx)(F().tf,{gap:W().gA,showDismissButton:!1,sizeRange:s,header:(0,R.jsx)(W().rQ,{icon:(0,G().J)(g.icon),title:(0,R.jsx)(r().sA,{...re.title}),byline:(0,d().O9)(l)&&(0,d().O9)(i)?(0,R.jsx)(r().sA,{id:"orgConsole.emailDomains.removeEmailDomainModal.byline",defaultMessage:"This will disable SAML SSO, revoke management for <b>{userCount, plural, one {# user} other {# users}}</b>, and remove <b>{spaceCount, plural, one {# linked workspace} other {# linked workspaces}}</b>.",values:{userCount:i,spaceCount:l.length,domain:t.domain,b:e=>(0,R.jsx)("span",{style:{fontWeight:Q().Wy.semibold},children:e})}}):null}),footer:(0,R.jsx)(W().jl,{isDarkRed:!0,primaryDisabled:!x||b,primaryText:(0,R.jsx)(r().sA,{...re.removeButton}),primaryAction:S,secondaryText:(0,R.jsx)(r().sA,{...re.cancelButton}),secondaryAction:a}),children:(0,d().O9)(l)?(0,R.jsxs)(J().VP,{gap:W().gA,width:"100%",children:[l.length?(0,R.jsx)(ie,{linkedSpaceIds:l}):null,(0,R.jsxs)("div",{style:g.confirmation,children:[(0,R.jsx)(Z().A,{checked:x,size:14,checkSize:10,onClick:()=>v(!x)}),(0,R.jsx)(te().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,R.jsx)(r().sA,{...re.confirmation})})]})]}):(0,R.jsx)("div",{style:g.loadingContainer,children:(0,R.jsx)(ee().A,{})})})})}})}function ie(e){const{linkedSpaceIds:t}=e,a=(0,n().v3)(),{organizationOwnerRecordCache:i}=(0,s.useContext)(A().N),[l,d]=(0,s.useState)(""),c=t.map((e=>new(X().SL)(a,{id:e,table:K().NX},{inMemoryRecordCache:i}))),u=(0,o().K8)((()=>c.map((e=>({id:e.id,icon:(0,R.jsx)(ae().B,{disabled:!0,icon:e.getIcon(),isEmptyPage:!1,title:e.getName(),size:ne().iK,isLarge:!0}),name:e.getName()})))),[c]),g=(0,Y().Ay)(l,u,(e=>e.name??""));return(0,R.jsx)(W().p6,{items:g,titleText:(0,R.jsx)(r().sA,{...re.linkedWorkspaces}),headerText:(0,R.jsx)(r().sA,{...re.workspaces}),headerAction:(0,R.jsx)(y().nv,{mode:y().Ke.AnimatedSearchButton,query:l,setQueryFilter:d})})}const re=(0,r().YK)({title:{id:"orgConsole.emailDomains.removeEmailDomainModal.title",defaultMessage:"Remove email domain and workspaces?"},removeButton:{id:"orgConsole.emailDomains.removeEmailDomainModal.button.remove",defaultMessage:"Remove domain and workspaces"},cancelButton:{id:"orgConsole.emailDomains.removeEmailDomainModal.button.cancel",defaultMessage:"Cancel"},confirmation:{id:"orgConsole.emailDomains.removeEmailDomainModal.confirmation",defaultMessage:"I understand this cannot be undone"},linkedWorkspaces:{id:"orgConsole.emailDomains.removeEmailDomainModal.spacesList.title",defaultMessage:"Linked workspaces"},workspaces:{id:"orgConsole.emailDomains.removeEmailDomainModal.spacesList.header",defaultMessage:"Workspaces"}});var le=()=>a(499582),de=(a(362833),()=>a(213255)),ce=()=>a(537311),ue=()=>a(59279),ge=()=>a(231628),me=()=>a(730096),pe=()=>a(587727);const he=(0,r().YK)({domain:{id:"settingsConsole.organizationEmailDomains.table.header.domain",defaultMessage:"Email domain"},status:{id:"organizationEmailDomains.table.header.status",defaultMessage:"Status"}}),fe={id:"domain",headerTitle:(0,R.jsx)(r().sA,{...he.domain}),renderCell:e=>e.type===pe().T.Loading?(0,R.jsx)(ue().mf,{}):(0,R.jsx)(ue().s7,{title:e.domain,rightContent:(0,R.jsx)(je,{domainStatus:e.status,onViewDetails:"success"!==e.status?e.onShowDetails:void 0,onRemove:e.onRemove,isOnlyVerifiedDomain:e.isOnlyVerifiedDomain}),summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:"100%"}}),widthData:{width:275,maxWidth:275},sortable:!1},xe={id:"spaces",headerTitle:(0,R.jsx)(r().sA,{id:"organizationEmailDomains.table.header.spaces",defaultMessage:"Linked workspaces"}),headerInfoTooltip:(0,R.jsx)(r().sA,{id:"organizationEmailDomains.table.header.spaces.tooltip",defaultMessage:"Workspaces in your organization that have been created by a user with the verified email domain."}),renderCell:e=>e.type!==pe().T.Loading&&e.spaceStores?"success"===e.status?e.spaceStores.length<1?(0,R.jsx)(te().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,R.jsx)(r().sA,{id:"organizationEmailDomains.table.spacesColumn.noSpaces",defaultMessage:"None"})}):(0,R.jsx)(a(385500).$,{spaceStores:e.spaceStores,showTooltip:!0,isLoading:!1}):void 0:(0,R.jsx)(ue().mf,{}),widthData:{widthPercent:33,minWidth:100},sortable:!1},ve={id:"associatedAccounts",headerTitle:(0,R.jsx)(r().sA,{id:"organizationEmailDomains.table.header.associatedAccounts",defaultMessage:"Associated user accounts"}),renderCell:e=>e.type===pe().T.Loading||e.isAssociatedAccountCountLoading?(0,R.jsx)(ue().mf,{}):"success"===e.status?(0,R.jsx)(te().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,R.jsx)(r().sA,{id:"organizationEmailDomains.table.associatedAccountsCount",defaultMessage:"{count, plural, one {# account} other {# accounts}}",values:{count:e.associatedAccountCount??0}})}):void 0,widthData:{widthPercent:33,minWidth:100},sortable:!1},be={id:"status",headerTitle:(0,R.jsx)(r().sA,{...he.status}),renderCell:e=>e.type===pe().T.Loading?(0,R.jsx)(ue().mf,{}):(0,R.jsx)(v().d9,{status:e.status}),widthData:{widthPercent:33,minWidth:100},sortable:!1},ye=[fe,be,xe,ve];function Se(e){let{domains:t,loading:a,setSelectedDomain:o,setOpenedModal:i,managedUsersCountState:l,spaceIdsForDomain:g,refetchPendingDomains:m}=e;const h=(0,n().v3)(),{organizationOwnerRecordCache:f}=(0,s.useContext)(A().N),x=(0,r().tz)(),b=(0,ge().A)(),y=(0,O().IS)((e=>(0,ce().rC)({columnRenderInfo:ye,theme:e,containerMarginTop:0})),[]);const S=1===t.filter((e=>"verified"===e.data.type)).length,j=t.map((e=>{var t,a;let{domain:s,status:n,data:r}=e;const v=g?g[s]??[]:void 0;return{type:pe().T.OrganizationEmailDomain,id:"verified"===r.type?s:r.id,isClickable:!1,domain:s,status:n,spaceStores:v?v.map((e=>{let{spaceId:t}=e;return new(X().SL)(h,{id:t,table:K().NX},{inMemoryRecordCache:f})})):void 0,managedUsersCountState:l,associatedAccountCount:null!==(t=l.count)&&void 0!==t&&t.countsPerDomain?null===(a=l.count)||void 0===a?void 0:a.countsPerDomain[s]:void 0,isAssociatedAccountCountLoading:l.loading,onShowDetails:()=>function(e){o(e);const t="invalid"===e.type&&Date.now()<=e.expiresAt;i(t?we.InvalidEmailDomain:we.VerifyEmailDomain)}(r),onRemove:()=>async function(e){const{type:t}=e;if("invalid"===t||"unverified"===t){const t=await c().callApi({eventName:"deleteDomainVerificationCode",environment:h,data:{id:e.id}});return"failed"===t.type?u().f1((0,p().Hu)(x,t)):void("success"===t.type&&await m())}"verified"===t?(o(e),i(we.RemoveEmailDomain)):(0,d().HB)(t)}(r),isOnlyVerifiedDomain:S&&"verified"===r.type}})),w=a?0===j.length?(0,pe().n)(5):[...j,...(0,pe().n)(3)]:j,M=ye.map((e=>({...e,headerStyle:b.tableHeader,rowStyle:b.tableRow})));return(0,R.jsx)(ce().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:M,rows:w,styles:y,renderNoRowsComponent:()=>(0,R.jsx)(v().Jd,{}),extendToFullScreen:me().e})}function je(e){let{onViewDetails:t,onRemove:s,domainStatus:n,isOnlyVerifiedDomain:o}=e;const i=(0,v().Rf)(),l=[];return t&&"pending"===n&&l.push({key:"verify",type:"action",icon:(0,de().A)(i.menuIcon),title:(0,R.jsx)(r().sA,{defaultMessage:"Verify domain",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.verify"}),caption:(0,R.jsx)(r().sA,{defaultMessage:"Confirm your DNS record was successfully updated.",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.verifyCaption"}),action:()=>t()}),t&&"failure"===n&&l.push({key:"details",type:"action",icon:(0,de().A)(i.menuIcon),title:(0,R.jsx)(r().sA,{defaultMessage:"View details",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.details"}),caption:(0,R.jsx)(r().sA,{defaultMessage:"See more information about the state of this domain verification record.",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.detailsCaption"}),action:()=>t()}),s&&l.push({key:"remove",type:"action",icon:(0,a(836693).trashIcon)(i.menuIcon),title:(0,R.jsx)(r().sA,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.remove",defaultMessage:"Remove domain"}),caption:"success"===n?(0,R.jsx)(r().sA,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.removeSuccessfulCaption",defaultMessage:"Delete domain verification and remove linked organization workspaces."}):(0,R.jsx)(r().sA,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.removeCaption",defaultMessage:"Delete domain verification record."}),action:()=>{o||s()},disabled:o,tooltipTitle:(0,R.jsx)(r().sA,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.disabledTooltip",defaultMessage:"You may not remove the last verified domain from your organization."}),tooltipDisabled:!o}),0===l.length?null:(0,R.jsx)(ue().bd,{items:l})}let we=function(e){return e.AddEmailDomain="add-email-domain",e.VerifyEmailDomain="verify-email-domain",e.RemoveEmailDomain="remove-email-domain",e.InvalidEmailDomain="invalid-email-domain",e}({});const Ae=[{id:fe.id,name:h().A.formatMessage(he.domain),type:"title"},{id:be.id,name:h().A.formatMessage(he.status),type:"status"}];function Me(e){const{environment:t,organizationId:a,isStatusFiltered:s,appliedSorts:n,query:o}=e;(0,m().u4)({environment:t,event:{eventName:"org_console_general_table_query",eventProperties:{table:"email_domains",organization_id:a,filter_keys:s?["status"]:void 0,sort_columns:null==n?void 0:n.map((e=>e.propertyId)),has_query:Boolean(o)}}})}function Ce(e){var t;let{organizationStore:a}=e;const u=(0,n().v3)(),m=(0,f().X)("organization_console_ga_enabled"),p=(0,C().F)(),[h,S]=(0,s.useState)([]),[P,N]=(0,s.useState)(),[E,L]=(0,s.useState)(),[O,U]=(0,s.useState)(!1),[F,H]=(0,s.useState)(),V=F??E??[];(0,s.useEffect)((()=>Me({environment:u,organizationId:a.id})),[u,a.id]);const W=(0,M().o)({organizationId:a.id,includeCountsPerDomain:!0}),q=(0,o().K8)((()=>a.getEmailDomains()),[a]),G=function(e){const{organizationId:t,domains:a}=e,o=(0,n().v3)(),{updateCacheWithRecordMap:i}=(0,s.useContext)(A().N),[{status:r,value:l}]=(0,w().Yb)((async()=>{const e=await c().callApi({eventName:"getOrganizationSpacesForDomain",environment:o,data:{organizationId:t,domains:a}});if("success"===e.type)return i({data:e.data}),e.data;if("failed"===e.type)throw e.error;return(0,d().HB)(e)}),[o,t,a,i]);return{loading:"pending"===r,didError:"rejected"===r,data:l}}({organizationId:a.id,domains:q}),K=G.loading?void 0:l().$z(null===(t=G.data)||void 0===t?void 0:t.spaceEmailDomains,(e=>e.emailDomain)),Y=(0,s.useMemo)((()=>q.map(v().vv).filter((e=>ke(e,P,h)))),[q,h,P]),{domainVerifications:Q,refetchDomainVerifications:$,loading:X}=(0,j().J)({organizationId:a.id}),Z=function(e){let{domains:t,appliedSorts:a}=e;if(!a)return t;const s=a.map((e=>{let{propertyId:t}=e;return t===be.id?e=>_e[e.status]:e=>{var t;return null===(t=e.domain)||void 0===t?void 0:t.toLowerCase()}})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,d().HB)(t)}));return l().My(t,s,n)}({domains:[...Y,...(0,o().K8)((()=>Q?Q.map((e=>Te(e))).filter((e=>ke(e,P,h))):[]),[Q,h,P])],appliedSorts:E}),[J,ee]=(0,s.useState)(),[te,ae]=(0,s.useState)();if(!m)return(0,R.jsx)(r().sA,{...ze.gaNotEnabledError});const se=(0,R.jsx)(r().sA,{...ze.title});return(0,R.jsx)(T().D,{breadcrumbs:[{message:(0,R.jsx)(r().sA,{...ze.goBack}),onClick:()=>{(0,I().i)({environment:u,from:{tabRoute:i().Vo,properties:{subtab:i().al.EmailDomains}},organizationId:a.id,tabRoute:i().Vo})}},{message:se}],children:(0,R.jsxs)(k().t,{children:[(0,R.jsx)(_()._,{title:se,byline:(0,R.jsx)(r().sA,{...ze.description})}),(0,R.jsxs)("div",{style:p.tableHeader,children:[(0,R.jsxs)("div",{style:p.leftContent,children:[(0,R.jsx)(b().A,{children:(0,R.jsx)(D().e,{sortProperties:Ae,isMenuOpen:O,setIsMenuOpen:U,onApply:e=>{U(!1),L(e),H(void 0),Me({environment:u,organizationId:a.id,appliedSorts:e,query:P,isStatusFiltered:Boolean(null==h?void 0:h.length)})},currentSorts:V})}),V.length>0?(0,R.jsx)(g().he,{}):null,(0,R.jsx)(B,{selectedStatuses:h,setSelectedStatuses:e=>{S(e),Me({environment:u,organizationId:a.id,appliedSorts:E,query:P,isStatusFiltered:Boolean(null==e?void 0:e.length)})}})]}),(0,R.jsxs)("div",{style:p.rightContent,children:[(0,R.jsx)(z().x,{appliedSorts:E,openSortPillMenu:e=>{e&&H([{propertyId:e,direction:"ascending"}]),U(!0)},sortProperties:Ae}),(0,R.jsx)(y().nv,{mode:y().Ke.AnimatedSearchButton,query:P,setQueryFilter:e=>{N(e),Me({environment:u,organizationId:a.id,appliedSorts:E,query:e,isStatusFiltered:Boolean(null==h?void 0:h.length)})}}),(0,R.jsx)(x().A,{onClick:()=>ee(we.AddEmailDomain),children:(0,R.jsx)(r().sA,{...ze.addDomainButton})})]})]}),(0,R.jsx)(Se,{domains:Z,loading:X,setOpenedModal:ee,setSelectedDomain:ae,managedUsersCountState:W,spaceIdsForDomain:K,refetchPendingDomains:$}),(0,R.jsx)(Ie,{openedModal:J,setOpenedModal:ee,selectedDomain:te,setSelectedDomain:ae,organizationId:a.id,refetchPendingDomains:$,managedUsersCountState:W,spaceIdsForDomain:K})]})})}function Ie(e){let{openedModal:t,setOpenedModal:a,refetchPendingDomains:o,selectedDomain:i,setSelectedDomain:l,organizationId:g,managedUsersCountState:m,spaceIdsForDomain:h}=e;const f=(0,n().v3)(),x=(0,r().tz)(),v=()=>a(void 0),b=(0,s.useCallback)((async e=>{const t=await c().callApi({eventName:"deleteDomainVerificationCode",environment:f,data:{id:e.id}});if("failed"===t.type)return u().f1((0,p().Hu)(x,t));const a=await c().callApi({eventName:"createDomainVerificationCode",environment:f,data:{type:"org_saml_config",domain:e.domain,organizationId:g}});if("failed"===a.type)return u().f1((0,p().Hu)(x,a));o(),l(Te(a.data.domainVerification).data)}),[f,x,g,o,l]);if(!t)return null;if(t===we.RemoveEmailDomain){var y;if(!i||"verified"!==i.type)return null;const e=h?(h[i.domain]??[]).map((e=>e.spaceId)):void 0;return(0,R.jsx)(oe,{organizationId:g,onDismiss:v,domainVerification:i,associatedAccountCount:null!==(y=m.count)&&void 0!==y&&y.countsPerDomain?m.count.countsPerDomain[i.domain]:void 0,linkedSpaceIds:e})}return t===we.VerifyEmailDomain?i&&"verified"!==i.type?(0,R.jsx)(le().p,{onDismiss:v,refetchPendingDomains:o,domainVerification:i,regenerateCode:b,organizationId:g}):null:t===we.AddEmailDomain?(0,R.jsx)(L().nb,{organizationId:g,onDismiss:v,onSubmit:e=>{o(),l(e),a(we.VerifyEmailDomain)}}):t===we.InvalidEmailDomain?i&&"invalid"===i.type?(0,R.jsx)(q,{onDismiss:v,domainVerification:i}):null:void(0,d().HB)(t)}function Te(e){return(0,v().W0)({id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,verifiedAt:e.verified_at,invalidatedAt:e.info.invalidated_at})}function ke(e,t,a){let s=!t||e.domain.toLowerCase().includes(t.toLowerCase());return a.length&&(s=s&&a.includes(e.status)),s}const _e={[S().A$.Success]:0,[S().A$.Pending]:1,[S().A$.Failure]:2};const ze=(0,r().YK)({title:{id:"organizationEmailDomainsSubTab.title",defaultMessage:"Manage email domains"},description:{id:"organizationEmailDomainsSubTab.description",defaultMessage:"Verify email domains to manage matching user accounts and associated organization workspaces"},addDomainButton:{id:"organizationEmailDomainsSubTab.button.addEmailDomain",defaultMessage:"Add email domain"},gaNotEnabledError:{id:"organizationEmailDomainsSubTab.notEnabled",defaultMessage:"This feature is not available"},goBack:{id:"organizationEmailDomainsSubTab.breadcrumb.goBack",defaultMessage:"General"}})},456487:(e,t,a)=>{a.d(t,{A:()=>W});var s=a(242343),n=()=>a(803290),o=()=>a(174114),i=()=>a(951592),r=()=>a(727171),l=()=>a(653998),d=()=>a(31448),c=()=>a(477784),u=()=>a(392608),g=()=>a(907721),m=()=>a(103151),p=()=>a(35462),h=()=>a(487966),f=()=>a(164428),x=()=>a(53595),v=(a(610931),a(362833),a(333225),a(494367),a(516262),a(573119),a(240480),a(950443),a(619601),a(403517),()=>a(237385)),b=()=>a(524118),y=()=>a(865415),S=()=>a(975392),j=()=>a(233309),w=()=>a(818369),A=()=>a(868325);const M={field:"num_searches",direction:"desc"},C=a(976576).Jb,I={sort:M,timeRange:C,searchAnalyticsDataList:[],numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};a(725707),a(491955);var T=()=>a(76394),k=()=>a(715187),_=()=>a(537311),z=()=>a(535906),D=()=>a(204435),P=()=>a(966789),N=()=>a(701270),R=()=>a(88271),B=()=>a(575460),E=()=>a(419809),L=a(163643);const O=(0,l().YK)({numSearches:{id:"workspaceAnalytics.searchTab.searchTable.searches.tooltip",defaultMessage:"Number of times users in the workspace have searched the query"},numUniqueUsers:{id:"workspaceAnalytics.searchTab.searchTable.uniqueSearches.tooltip",defaultMessage:"Total number of users that have searched the query"},ctr:{id:"workspaceAnalytics.searchTab.searchTable.ctr.tooltip",defaultMessage:"Percentage of times users have opened page from results of this query"}}),U=(0,l().YK)({queryText:{id:"spaceAnalyticsSearchTable.column.query",defaultMessage:"Query"},numSearches:{id:"spaceAnalyticsSearchTable.column.searches",defaultMessage:"Searches"},numUniqueUsers:{id:"spaceAnalyticsSearchTable.column.uniqueSearches",defaultMessage:"Unique searches"},ctr:{id:"spaceAnalyticsSearchTable.column.ctr",defaultMessage:"Click-through rate"}});function F(e){let{searchAnalyticsDataList:t,runNewSearch:a,sort:i,setSort:d,loadNextPage:u,loading:g,error:m,dateFilterProps:h}=e;const f=(0,s.useMemo)((()=>function(e){const{dateFilterProps:t}=e;return{queryText:{id:"queryText",headerTitle:(0,L.jsxs)(D().fI,{gap:8,alignItems:"center",children:[c().A.formatMessage(U.queryText),t?(0,L.jsx)(V,{currentFilter:t.currentFilter,onChangeFilter:t.onChangeFilter}):null]}),renderCell:e=>(0,L.jsx)(p().A,{children:e.queryText}),widthData:{width:200,maxWidth:300},sortable:!1},numSearches:{id:"numSearches",headerTitle:(0,L.jsx)(E().Z,{tooltipMessageDescriptor:O.numSearches,columnHeader:U.numSearches}),renderCell:e=>(0,L.jsx)(H,{value:e.numSearches}),widthData:{width:120,maxWidth:120},sortable:!0},numUniqueUsers:{id:"numUniqueUsers",headerTitle:(0,L.jsx)(E().Z,{tooltipMessageDescriptor:O.numUniqueUsers,columnHeader:U.numUniqueUsers}),renderCell:e=>(0,L.jsx)(H,{value:e.numUniqueUsers}),widthData:{width:120,maxWidth:120},sortable:!0},ctr:{id:"ctr",headerTitle:(0,L.jsx)(E().Z,{tooltipMessageDescriptor:O.ctr,columnHeader:U.ctr}),renderCell:e=>(0,L.jsx)(H,{value:Math.round(1e3*e.ctr)/1e3,isPercentage:!0}),widthData:{width:120,maxWidth:120},sortable:!0}}}({dateFilterProps:h})),[h]),x=(0,T().uv)(f).map((e=>f[e])),v=(0,n().K8)((()=>t.map((e=>({id:e.queryText,isClickable:!1,...e})))),[t]),b=(0,s.useMemo)((()=>function(e,t){const a=r().tV[t.field];if(!a)return;const s=e[a];return{column:s,sortAscending:"asc"===t.direction}}(f,i)),[f,i]),y=(0,o().IS)((e=>(0,_().rC)({columnRenderInfo:x,theme:e,containerMarginTop:0})),[x]),S=(0,o().IS)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return m?(0,L.jsx)(k().t,{error:m,runNewSearch:a}):(0,L.jsxs)("div",{children:[(0,L.jsx)(_().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:x,rows:v,sortState:b,onSortStateChanged:e=>{d(function(e){const t=r().Bt[e.column.id],a=e.sortAscending?"asc":"desc";if(!t)return{field:"num_searches",direction:a};return{field:t,direction:a}}(e))},loadMoreMethod:{type:"scroll",onLoadMore:u},renderNoRowsComponent:()=>(0,L.jsx)(p().A,{isSmall:!0,style:S.emptyQuery,children:!g&&0===t.length&&(0,L.jsx)(l().sA,{id:"settings.workspaceAnalytics.searchTable.table.empty",defaultMessage:"No search query analytics to display."})}),styles:y}),g?(0,L.jsx)(P().A,{style:S.loadingSpinner}):null]})}function H(e){let{value:t,isPercentage:a}=e;const s=(0,o().IS)((e=>({centered:{width:"100%",textAlign:"center"}})),[]),n=a?`${t}%`:t;return(0,L.jsx)(p().A,{style:s.centered,children:n})}function V(e){return(0,L.jsx)(B().A,{selectedTitle:(0,L.jsx)(N().D,{styleName:"UISmall-12px/Regular",children:c().A.formatMessage(r().jy[e.currentFilter])}),renderMenuSections:t=>[{key:"day_filter_selector",render:e=>(0,L.jsx)(R().A,{...e}),items:r().jf.filter((e=>"all_time"!==e)).map((a=>({key:a,action:()=>{},render:()=>(0,L.jsx)(z().A,{focused:!1,onClick:()=>{e.onChangeFilter(a),t.close()},title:(0,L.jsx)(N().D,{styleName:"UISmall-12px/Regular",children:c().A.formatMessage(r().jy[a])})})})))}]})}function W(e){const{spaceStore:t,hideHeader:a=!1}=e,T=(0,o().IS)((()=>({header:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginBottom:16},sectionTitle:{fontWeight:d().Wy.semibold,fontSize:16,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4}})),[]),k=(0,s.useRef)(!1),{searchAnalyticsDataList:_,timeRange:z,sort:D,loading:P,error:N,loadNextPage:R,runNewSearch:B,setTimeRange:E,setSort:O}=function(e){let{spaceStore:t}=e;const a=(0,v().v3)(),[n,o]=(0,s.useState)(I),i=(0,s.useRef)(M),r=(0,s.useRef)(C),d=(0,l().tz)(),c=(0,s.useCallback)((async e=>{let{fetchFromFirstPage:s,ignoreSearchInputComparison:l}=e;const d=!S().n4(n.sort,i.current)||!S().n4(n.timeRange,r.current);if(!l&&!d)return;i.current=n.sort,r.current=n.timeRange;let c=n.loading,u=n.error,g=n.hasNextPage,m=n.paginationToken;if(s&&(o((e=>({...I,timeRange:e.timeRange,sort:e.sort}))),c=I.loading,u=I.error,g=I.hasNextPage,m=I.paginationToken),!g||c)return;if(u)return;o((e=>({...e,loading:!0})));const p=await w().callApi({eventName:"loadSearchAnalytics",environment:a,data:{spaceId:t.id,sort:n.sort,timeRange:n.timeRange,startCursor:m},headers:{[y().B3]:t.id}});if("failed"===p.type)return void o((e=>({...e,loading:!1,error:p})));const h=p.data.results;o((e=>{const t=[],a=new Set(e.searchAnalyticsDataList.map((e=>e.queryText)));for(const n of h){const e=n.queryText;a.has(e)||(t.push(n),a.add(e))}const s=[...e.searchAnalyticsDataList,...t];return{...e,searchAnalyticsDataList:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:p.data.nextCursor,hasNextPage:Boolean(p.data.nextCursor)}}))}),[a,t,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken]);(0,s.useEffect)((()=>{n.shouldReRunSearch&&(o((e=>({...e,shouldReRunSearch:!1}))),c({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,c]);const u=(0,s.useCallback)((async()=>{n.shouldReRunSearch||await c({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,c]),g=(0,s.useCallback)((async e=>{await c({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[c]),m=(0,s.useCallback)((e=>{"all_time"!==e&&(o((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),j().kJ(a,{daysFilter:e}))}),[a]),p=(0,s.useCallback)((e=>{o((t=>({...t,sort:e,shouldReRunSearch:!0}))),j().G4(a,{column:e.field,isAscending:"asc"===e.direction})}),[a]),h=(0,s.useMemo)((()=>{if(n.error)return 404===n.error.status?new(b().m_B)({message:(0,A().Hu)(d,n.error)}):new Error((0,A().Hu)(d,n.error))}),[n.error,d]);return{...n,error:h,loadNextPage:u,runNewSearch:g,setTimeRange:m,setSort:p}}({spaceStore:t}),U=(0,i().ZC)(t.id),H=(0,s.useMemo)((()=>void 0!==U&&t.id!==U),[t.id,U]);(0,s.useEffect)((()=>{k.current&&!H||(B(!0),k.current=!0)}),[B,H]);const V=(0,n().K8)((()=>t.getName()),[t]);return"NotFoundError"===(null==N?void 0:N.name)?(0,L.jsx)(x().H,{type:"empty",spaceName:V}):(0,L.jsxs)(L.Fragment,{children:[a?null:(0,L.jsxs)("div",{style:T.header,children:[(0,L.jsxs)(p().A,{style:T.sectionTitle,children:[(0,L.jsx)(l().sA,{id:"settings.workspaceAnalytics.searchTab.searchQueries.title",defaultMessage:"Search queries"}),(0,L.jsx)(m().A,{placement:g().W.Bottom,render:e=>(0,L.jsx)(h().A,{...e,href:(0,u().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:T.helpInfo}),renderTooltip:()=>(0,L.jsx)(l().sA,{id:"settings.workspaceAnalytics.searchTab.searchQueries.tooltip",defaultMessage:"Displays popular search queries in the workspace from the {dateRange}",values:{dateRange:c().A.formatMessage(r().Yr[z])}})})]}),(0,L.jsx)(f().Z,{currentFilter:z,onChangeFilter:E,hideAllTime:!0})]}),(0,L.jsx)(F,{searchAnalyticsDataList:_,runNewSearch:B,sort:D,setSort:O,loadNextPage:R,loading:P,error:N,dateFilterProps:a?{currentFilter:z,onChangeFilter:E}:void 0})]})}},463787:(e,t,a)=>{a.d(t,{Ay:()=>b,Ew:()=>S,qh:()=>j});var s=a(242343),n=()=>a(174114),o=()=>a(829090),i=()=>a(81322),r=()=>a(316983),l=()=>a(339189),d=()=>a(653998),c=()=>a(220413),u=()=>a(907721),g=()=>a(126451),m=()=>a(392968),p=()=>a(966789),h=()=>a(283992),f=()=>a(103151),x=a(163643);const v=18;function b(e){let{size:t,style:a,avatarType:o,isOffline:r,disabled:l,loading:m,disabledTooltipMessage:p,onUploadProfilePhoto:h,onRemoveProfilePhoto:b}=e;const[S,j]=(0,s.useState)(!1),w=(0,n().IS)((e=>{const a=(t??v)/2,s=Math.ceil(Math.sqrt(a/2)-8);return(0,n().$4)({avatarButton:{position:"relative",padding:0,border:0,background:"none",borderRadius:"50%"},removeIconButton:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:s+2,right:s+2,height:16,width:16,padding:0,borderRadius:"50%",border:"none",background:"light"===e.mode?e.contentBackground:e.tooltipBackground,boxShadow:e.shadowSM,transition:"background 0.2s ease"},removeIcon:{fill:"light"===e.mode?c().XA.light.gray[400]:c().XA.dark.gray[800],height:10,width:10},buttonPressed:{borderRadius:"50%",background:"light"===e.mode?c().XA.light.gray[200]:c().XA.dark.gray[600]},buttonHovered:{borderRadius:"50%",background:"light"===e.mode?c().XA.light.gray[100]:c().XA.dark.gray[500]}})}),[t]),A=(0,s.useCallback)((()=>S?(0,x.jsx)(d().sA,{id:"editableUserAvatar.profilePhoto.remove",defaultMessage:"Remove photo"}):"photo"===o.type?(0,x.jsx)(d().sA,{id:"editableUserAvatar.profilePhoto.replace",defaultMessage:"Replace photo"}):(0,x.jsx)(d().sA,{id:"editableUserAvatar.profilePhoto.upload",defaultMessage:"Upload photo"})),[o.type,S]);return m?(0,x.jsx)(y,{size:t??v,isOffline:r,avatarType:o,loading:m}):l?(0,x.jsx)(f().A,{disableTooltip:!p,renderTooltip:()=>p,placement:u().W.Bottom,alignment:u().C.Center,render:e=>(0,x.jsx)("div",{...e,children:(0,x.jsx)(y,{size:t??v,isOffline:r,avatarType:o})})}):(0,x.jsx)(f().A,{renderTooltip:A,placement:u().W.Bottom,alignment:u().C.Center,render:(e,s)=>(0,x.jsxs)(g().A,{style:{...w.avatarButton,...a},pressedStyle:w.buttonPressed,hoveredStyle:w.buttonHovered,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:h,children:[(0,x.jsx)(y,{size:t??v,isOffline:r,avatarType:o}),s&&"photo"===o.type&&(0,x.jsx)(g().A,{style:w.removeIconButton,pressedStyle:w.buttonPressed,hoveredStyle:w.buttonHovered,onClick:e=>{b(),e.stopPropagation()},onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:(0,i().V)(w.removeIcon)})]})})}function y(e){let{size:t,isOffline:a,loading:o,avatarType:i}=e;const d=(0,n().IS)((e=>(0,n().$4)({avatarWrapStyle:{background:e.buttonHoveredBackground,borderRadius:"100%",boxShadow:"none",..."light"===e.mode?{border:`1px solid ${c().XA.light.gray[100]}`}:{}},avatarStyle:{borderRadius:"100%",width:t,height:t,maxWidth:"100%",maxHeight:"100%",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",WebkitUserSelect:"none",opacity:a?.3:1},avatarIcon:{width:Math.ceil(.6*t),height:Math.ceil(.6*t),color:e.mediumIconColor},imageBox:{width:"100%",height:"100%",borderRadius:"100%"},initialStyle:{boxSizing:"content-box",border:"none",borderRadius:"100%",width:t-2,height:t-2,lineHeight:t-2+"px",overflow:"hidden",textAlign:"center",fontSize:Math.max(t*(14/32),10),userSelect:"none",WebkitUserSelect:"none",color:e.regularIconColor,opacity:a?.3:1},suspendedUserStyle:{boxSizing:"content-box",borderRadius:"100%",width:t-2,height:t-2,overflow:"hidden",background:e.suspendedUIUserAvatarBackground,userSelect:"none",WebkitUserSelect:"none",color:e.text.primary,opacity:a?.3:1,display:"flex",justifyContent:"center",alignItems:"center"},suspendedUserIconStyle:{width:t-2,height:t-2,color:e.lightIconColor}})),[t,a]),u=(0,s.useMemo)((()=>o?(0,x.jsx)(p().A,{}):"photo"===i.type?(0,x.jsx)(h().A,{stripGoogleIconQuery:!0,url:i.profilePhoto,isAuthenticated:!1,width:t||v,render:(e,t)=>(0,x.jsx)(m().Ay,{src:t,style:d.imageBox})}):"initial"===i.type?(0,x.jsx)("div",{style:d.initialStyle,children:i.firstUpperCasedGrapheme}):"icon"===i.type?(0,l().W)(d.avatarIcon):"suspended"===i.type?(0,x.jsx)("div",{style:d.suspendedUserStyle,children:(0,r().o)(d.suspendedUserIconStyle)}):void 0),[i,t,o,d]);return(0,x.jsx)("div",{style:d.avatarWrapStyle,children:(0,x.jsx)("div",{style:d.avatarStyle,children:u})})}function S(e,t){if(!e.isDefined())return{type:"icon"};if(e.getIsSuspended())return{type:"suspended"};return j({profilePhoto:e.getProfilePhoto(),name:e.getFullName(t),email:e.getEmail()})}function j(e){const{profilePhoto:t,name:a,email:s}=e;if(t)return{type:"photo",profilePhoto:t};const n=o().PE(a)[0]||o().PE(s)[0];return n?{type:"initial",firstUpperCasedGrapheme:n.toUpperCase()}:{type:"icon"}}},466051:(e,t,a)=>{a.d(t,{_:()=>p});var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(653998),r=()=>a(591130),l=()=>a(485966),d=()=>a(535906),c=()=>a(969836),u=()=>a(932322),g=()=>a(28210),m=a(163643);function p(e){const t=(0,n().Y0)(),{group:a,menuListItemProps:p,spaceStore:h,iconSizeOverride:f}=e,x=(0,i().tz)(),v=(0,o().K8)((()=>{const e=h??l().AppStoreCurrentSpaceStore.state;if(e&&a.icon)return{pointer:{table:e.table,id:e.id},icon:a.icon}}),[a,h]),b=(0,s.useMemo)((()=>(0,r().Pf)({intl:x,groupName:a.name})),[a.name,x]),y=f||(t.isMobile?u().nd:u().pg);return(0,m.jsx)(d().A,{...p,icon:v?(0,m.jsx)(g().B,{disabled:!0,size:y,icon:v,isEmptyPage:!1,title:b}):(0,m.jsx)(c().A,{size:y}),title:b})}},467941:(e,t,a)=>{a.d(t,{A:()=>o,e:()=>s});let s=function(e){return e.Overview="overview",e.Users="users",e.Content="content",e.Search="search",e}({});class n extends(()=>a(129044))().default{getInitialState(){return{}}shouldRefreshState(e){const t=this.getState();return e!==t.currentSpaceId||!(t.currentTab!==s.Users||t.usersTabData&&t.usersTabData.usersAndStats)}}const o=new n},472589:(e,t,a)=>{a.d(t,{G0:()=>C,V$:()=>T,VX:()=>I});a(725707),a(491955),a(500234),a(403517),a(113085);var s=a(242343),n=()=>a(803290),o=()=>a(174114),i=()=>a(752903),r=()=>a(653998),l=()=>a(975392),d=()=>a(76394),c=()=>a(31448),u=()=>a(640979),g=()=>a(736851),m=()=>a(266178),p=()=>a(209684),h=()=>a(535906),f=()=>a(935091),x=()=>a(858023),v=()=>a(701270),b=()=>a(951540),y=()=>a(168980),S=()=>a(88271),j=()=>a(35462),w=()=>a(809785),A=()=>a(732863),M=a(163643);function C(e){const{pillTitle:t,selectedItem:a,items:s,shouldHidePrefix:n,selectionRequired:o}=e,i=s.find((e=>(0,l().n4)(e.value,a)));return(0,M.jsx)(m().zr,{...e,iconStyles:{marginRight:5},renderMenu:e=>(0,M.jsx)(_,{...e,pillTitle:t,selectionRequired:o}),pillTitle:(0,M.jsx)("div",{style:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis"},children:n?i?i.shortTitle:t:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{style:Boolean(i)?{fontWeight:c().Wy.medium}:void 0,children:t}),Boolean(i)?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{children:": "}),(0,M.jsx)("span",{children:null==i?void 0:i.shortTitle})]}):void 0]})})})}function I(e){const{pillTitle:t}=e,[a,n]=(0,s.useState)(e.selectedItems);return(0,M.jsx)(k,{...e,tempSelectedItems:a,setTempSelectedItems:n,renderMenu:e=>(0,M.jsx)(_,{...e,pillTitle:t})})}function T(e){const{pillTitle:t,pageSize:a,searchPlaceholder:n,items:o}=e,[i,r]=(0,s.useState)(e.selectedItems),[l,d]=(0,s.useState)("");return(0,M.jsx)(k,{...e,tempSelectedItems:i,setTempSelectedItems:r,onToggleSelected:()=>d(""),renderMenu:e=>(0,M.jsx)(z,{...e,items:o,pageSize:a,pillTitle:t,searchPlaceholder:n,tempSelectedItems:i,setTempSelectedItems:r,query:l,setQuery:d})})}function k(e){const{pillTitle:t,selectedItems:a,items:s,renderMenu:n,tempSelectedItems:o,setTempSelectedItems:i}=e;let d;if(1===a.length){const e=s.find((e=>(0,l().n4)(e.value,a[0])));d=(null==e?void 0:e.shortTitle)||(null==e?void 0:e.title)}else a.length>1&&(d=(0,M.jsx)(r().sA,{id:"settingsConsoleFilterPill.numSelected",defaultMessage:"{count} selected",values:{count:a.length}}));return(0,M.jsx)(m().m1,{...e,iconStyles:{marginRight:5},tempSelectedItems:o,setTempSelectedItems:i,renderMenu:n,pillTitle:(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{style:Boolean(d)?{fontWeight:c().Wy.medium}:void 0,children:t}),Boolean(d)?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{children:": "}),(0,M.jsx)("span",{children:d})]}):void 0]})})}function _(e){let{items:t,toggleSelectedItem:a,renderItemOptionIcon:s,menuListStore:n,clearSelection:o,pillTitle:i,selectAll:l,shouldUseCheck:d,selectionRequired:c,onSubmit:m,handleScroll:j,renderSearchInput:w}=e;const A=D(),C={key:"menuOptions",items:t.length?t.map((e=>({key:e.key,action:()=>a(e.value),render:t=>(0,M.jsx)(h().A,{...t,icon:d?void 0:s(e.value),title:e.title,caption:e.caption,shouldWrapCaption:e.wrapCaption,dontShrinkTitle:e.dontShrinkTitle,hoveredStyle:A.hoveredItem,right:d?s(e.value):(0,M.jsx)(v().D,{colorName:"tertiary",children:e.count})})}))):[g().v8],render:e=>(0,M.jsx)(S().A,{...e,title:null,loading:!1})};return(0,M.jsxs)("div",{style:A.container,children:[(0,M.jsxs)(S().A,{topBorder:!1,style:A.header,children:[(0,M.jsx)(v().D,{styleName:"UISmall-12px/Medium",colorName:"tertiary",children:i}),l?(0,M.jsx)("div",{style:A.buttonContainer,children:(0,M.jsx)(p().p,{onClick:l,isBlue:!0,size:"xs",children:(0,M.jsx)(r().sA,{id:"settingsConsoleFilterPill.selectAllButton",defaultMessage:"Select all"})})}):void 0]}),w?w():void 0,(0,M.jsxs)(f().A,{menuType:u().gu.Popup,header:null,maxHeight:250,width:320,children:[(0,M.jsx)(x().Ay,{type:x().Oh.Vertical,store:n,initialFocus:void 0,sections:[C]}),j&&(0,M.jsx)(y().A,{onChange:j})]}),(0,M.jsxs)(S().A,{topBorder:!0,style:A.footer,children:[c?(0,M.jsx)("div",{}):(0,M.jsx)(p().p,{onClick:o,style:A.clearButton,children:(0,M.jsx)(r().sA,{id:"settingsConsoleFilterPill.clearButton",defaultMessage:"Clear"})}),(0,M.jsx)(b().A,{onClick:m,children:(0,M.jsx)(r().sA,{id:"core.baseFilterPill.doneButton",defaultMessage:"Apply"})})]})]})}function z(e){const{items:t,pageSize:a,searchPlaceholder:o,tempSelectedItems:r,setTempSelectedItems:c,query:u,setQuery:g}=e,m=D(),p=(0,s.useMemo)((()=>u?t.filter((e=>e.searchTerms.some((e=>e.includes(u.toLowerCase()))))):t),[u,t]),h=(0,s.useCallback)((e=>{g(e.target.value)}),[g]),[f,x]=(0,s.useState)(a),v=(0,s.useMemo)((()=>a?p.slice(0,f):p),[p,f,a]);const b=(0,n().K8)((()=>r.map((e=>{const a=t.find((t=>(0,l().n4)(t.value,e)));if(a)return(0,M.jsx)(w().A,{isSingle:!0,format:i().NY.Inline,style:m.tokenContainer,showRemoveButton:!0,onClickRemove:()=>{const e=r.filter((e=>!(0,l().n4)(e,a.value)));c(e)},value:(0,M.jsxs)("div",{style:m.tokenContents,children:[a.tokenIcon,(0,M.jsx)(j().A,{children:a.shortTitle})]}),backgroundColor:a.tokenColor},a.key)})).filter(d().O9)),[r,c,m,t]);return(0,M.jsx)(_,{...e,toggleSelectedItem:t=>{e.toggleSelectedItem(t),g("")},items:v,handleScroll:function(e){a&&f&&e<5&&f<p.length&&x(f+a)},renderSearchInput:()=>(0,M.jsx)(A().A,{focus:!0,value:u,style:m.search,placeholder:o??"",onChange:h,onRemoveLastToken:()=>{const e=r.slice(0,-1);c(e)},tokens:b})})}function D(){return(0,o().IS)((e=>({container:{padding:"8px 0 6px"},header:{padding:"0px 8px 6px 12px",justifyContent:"space-between",display:"flex",alignItems:"center",flexDirection:"row"},icon:{width:12,marginRight:6,fill:"currentColor"},buttonContainer:{display:"flex",alignItems:"center"},check:{width:16,height:16,color:e.text.tertiary},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},clearButton:{fontWeight:c().Wy.medium},search:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},tokenContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},tokenContainer:{margin:"0px 6px 6px 0px",height:20},hoveredItem:{background:e.buttonHoveredBackground}})),[])}},482491:(e,t,a)=>{a.d(t,{O:()=>b,i:()=>y});a(725707),a(491955),a(403517);var s=a(242343),n=()=>a(803290),o=()=>a(174114),i=()=>a(446588),r=()=>a(653998),l=()=>a(188877),d=()=>a(517198),c=()=>a(701270),u=()=>a(28210),g=()=>a(893576),m=()=>a(971404),p=()=>a(893943),h=()=>a(684862),f=()=>a(396218),x=()=>a(563680),v=a(163643);function b(e){let{spaceStores:t,selectedSpaceIds:a,onSelectHeader:o,onSelect:i,disabledRowMetadata:d}=e;const m=(0,n().K8)((()=>t.map((e=>e.id))),[t]),[h,b]=(0,s.useState)(""),{teamStores:S}=(0,p().o)(m),j=(0,n().K8)((()=>t.map((e=>{const t=S[e.id]??[],a=d&&d.disabledSpaceIds.includes(e.id);return{id:e.id,icon:(0,v.jsx)(u().B,{size:x().iK,emojiSize:x().iK,disabled:!0,icon:e.getIcon(),isEmptyPage:!1,title:e.getName(),isLarge:!0,isRaw:!1}),name:e.getName(),byline:a?(0,v.jsx)(c().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:d.disabledByline}):(0,v.jsx)(y,{spaceId:e.id,teamCount:t.length})}}))),[t,S,d]),w=(0,l().Ay)(h,j,(e=>e.name??""));return(0,v.jsx)(f().p6,{items:w,selectedIds:a,disabledIds:(null==d?void 0:d.disabledSpaceIds)??[],onSelectHeader:o,onSelect:i,titleText:(0,v.jsx)(r().sA,{id:"orgConsole.people.modal.workspacesSelect.selectTitle",defaultMessage:"Select workspaces"}),headerText:(0,v.jsx)(r().sA,{id:"orgConsole.people.modal.workspacesSelect.headerRowTitle",defaultMessage:"Workspaces{selectedCount, plural, =0 {} one { ({selectedCount})} other { ({selectedCount})}}",values:{selectedCount:a.length}}),headerAction:(0,v.jsx)(g().nv,{mode:g().Ke.AnimatedSearchButton,query:h,setQueryFilter:b})})}function y(e){const{spaceId:t,teamCount:a,loading:s,styles:n}=e,{visibleUsers:l,loading:u}=(0,h().d)(t),g=l?l.filter((e=>(0,i().DH)(e.role))).length:0,p=(0,m().Z)(),f=(0,o().IS)((e=>({shimmer:{background:"rgba(255, 255, 255, 0.4)",marginTop:1,width:"80%"}})),[]);return s||u?(0,v.jsx)(d().A,{style:{...p.shortShimmer,...f.shimmer}}):(0,v.jsx)(c().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:n,children:(0,v.jsx)(r().sA,{id:"orgConsole.people.modal.workspacesSelect.workspaceRowByline",defaultMessage:"{teamCount, plural, one {# teamspace} other {# teamspaces}} · {memberCount, plural, one {# member} other {# members}}",values:{teamCount:a,memberCount:g}})})}},484157:(e,t,a)=>{a.d(t,{F:()=>s});const s=(0,a(680369).xh)("exclamationMarkCircle",{default:{loader:()=>a.e(64087).then(a.bind(a,639239))},small:{loader:()=>a.e(64087).then(a.bind(a,369337))},fill:{loader:()=>a.e(64087).then(a.bind(a,43029))},fillSmall:{loader:()=>a.e(64087).then(a.bind(a,158686))}},["exclamation","circle","alert","warning","attention"])},492251:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K,getBlockExportTypeTitle:()=>Y,getBlockIncludeContentsTitle:()=>Q,getCollectionViewExportTypeTitle:()=>$});a(403517);var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(174114),r=()=>a(83544),l=()=>a(185912),d=()=>a(361308),c=()=>a(66460),u=()=>a(528762),g=()=>a(653998),m=()=>a(975392),p=()=>a(429318),h=()=>a(640979),f=()=>a(906230),x=()=>a(427277),v=()=>a(162339),b=()=>a(907721),y=()=>a(962373),S=()=>a(802955),j=()=>a(558714),w=()=>a(943066),A=()=>a(879759),M=()=>a(209684),C=()=>a(535906),I=()=>a(441292),T=()=>a(59175),k=()=>a(935091),_=()=>a(858023),z=()=>a(951540),D=()=>a(88271),P=()=>a(575460),N=()=>a(431551),R=()=>a(703329),B=()=>a(35462),E=()=>a(671622),L=()=>a(84979),O=a(163643);const U=["pdf","html","markdown"],F=["currentView","all"],H=1;function V(e){return e>.1&&e<2}const W=["everything","no_files"],q=(0,g().YK)({dialogLabel:{id:"exportModal.dialogLabel",defaultMessage:"Export"}});function G(e){let{value:t,onChange:a}=e;const n=(0,g().tz)(),o=s.useCallback((e=>{const t=e.target.value,s=(0,d().sA)(t)||(0,x().q)(t,n);let o;"object"==typeof s?o="percent"===s.format?s.value:s.value/100:"number"==typeof s&&(o=s/100),void 0!==o&&a(o)}),[a,n]),[i,r]=s.useState(!1),l=s.useMemo((()=>(0,d().ZV)(Math.round(100*t),"number",n)),[t,n]);return(0,O.jsx)(I().A,{debugName:"ExportModal",capture:i,children:(0,O.jsx)(T().A,{value:l,onChange:o,onFocus:()=>r(!0),onBlur:()=>r(!1),style:{width:60},inputStyle:{textAlign:"right"}})})}const K=function(){const e=(0,g().tz)(),t=(0,o().uB)(void 0,y().A),n=(0,o().uB)(void 0,y().A),i=(0,o().uB)(void 0,y().A),r=(0,o().uB)(void 0,y().A),l=(0,s.useCallback)((()=>(0,O.jsx)(me,{includeContentsPopupStore:r,exportTypePopupStore:i,pdfFormatPopupStore:n,collectionViewExportTypePopupStore:t})),[r,i,n,t]),d=(0,o().K8)((()=>j().Ay.state.open),[]);return(0,O.jsx)(a(754313).A,{ariaLabel:e.formatMessage(q.dialogLabel),onDismiss:ae,render:l,isOpen:d})};function Y(e){switch(e){case"pdf":return(0,O.jsx)(g().sA,{id:"exportModal.exportFormatButton.pdf.label",defaultMessage:"PDF"});case"markdown":return(0,O.jsx)(g().sA,{id:"exportModal.exportFormatButton.markdownAndCSV.label",defaultMessage:"Markdown & CSV"});case"html":return(0,O.jsx)(g().sA,{id:"exportModal.exportFormatButton.html.label",defaultMessage:"HTML"})}}function Q(e){switch(e){case"everything":return(0,O.jsx)(g().sA,{id:"exportModal.includeContentTypes.everything.label",defaultMessage:"Everything"});case"no_files":return(0,O.jsx)(g().sA,{id:"exportModal.includeContentTypes.no_files.label",defaultMessage:"No files or images"})}}function $(e){switch(e){case"all":return(0,O.jsx)(g().sA,{id:"exportModal.includeDatabases.all.label.defaultView",defaultMessage:"Default View"});case"currentView":return(0,O.jsx)(g().sA,{id:"exportModal.includeDatabases.currentView.label",defaultMessage:"Current view"})}}function X(e){switch(e){case"Letter":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.letter.label",defaultMessage:"Letter"});case"A3":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.a3.label",defaultMessage:"A3"});case"A4":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.a4.label",defaultMessage:"A4"});case"Legal":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.legal.label",defaultMessage:"Legal"});case"Tabloid":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.tabloid.label",defaultMessage:"Tabloid"})}}function Z(){const e=j().Ay.state;return e.open&&(0,j().xt)(e)?void 0===e.exportOptions.scale?H:e.exportOptions.scale:H}function J(){return V(Z())}function ee(e){return{width:320,padding:24,fontSize:14,color:e.text.secondary}}function te(){const e=(0,i().DP)();return(0,O.jsx)("div",{style:ee(e),children:(0,O.jsx)(g().sA,{defaultMessage:"Please go online to export.",id:"exportModal.offlineMessage.description"})})}function ae(){p()._3()}function se(e){const t=j().Ay.state;if(t.open){if((0,j().xt)(t)&&!p().Dd(e))return void w().K(e,{from:"export_modal",upsell:{type:"product",product:"enterprise",limit:{type:"none"},trialability:"none"}});p().z_(e,{...t,recursive:!t.recursive})}}function ne(e){if(!J())return;const t=j().Ay.state;t.open&&(p()._3(),void 0===t.exportOptions.flattenExportFiletree&&e.device.isWindows&&(t.exportOptions.flattenExportFiletree=!0),t.root.table===u().NX?p().P_(e,{spaceId:t.root.id,exportOptions:t.exportOptions,shouldExportComments:t.shouldExportComments}):p().UP(e,{block:{id:t.root.id,spaceId:(0,c().e)(t.root.spaceId)},recursive:t.recursive,exportOptions:t.exportOptions,shouldExportComments:t.shouldExportComments}))}function oe(e,t,a,s){const n=j().Ay.state,o=n.open&&"pdf"===e&&"space"===n.root.table&&!p().Dd(s)&&"business";return{key:e,action:()=>{t.close(),o?w().K(s,{from:"export_modal",upsell:{type:"product",product:o,limit:{type:"none"},trialability:"none"}}):function(e,t,a){const s=j().Ay.state;if(!s.open)return;const{exportOptions:n}=s;if(e===n.exportType)return;let o;o="pdf"===e?{...n,exportType:"pdf",pdfFormat:p().id(t)}:{...n,exportType:e},p().z_(a,{...s,exportOptions:o})}(e,a,s)},render:t=>{let{onClick:a,key:s,...n}=t;return(0,O.jsx)(A().A,{requireUpgradeToTier:o,analyticsName:"export_modal",onClick:a,render:(t,a)=>(0,O.jsx)(C().A,{...(0,f().A)(n,t),title:Y(e),right:a}),renderUpgradeTooltip:()=>(0,O.jsx)(L().A,{imageURL:r().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,O.jsx)(g().sA,{defaultMessage:"Upgrade to export the workspace as PDFs",id:"exportModal.workspacePdfUpgradeTooltip.title"}),caption:(0,O.jsx)(g().sA,{defaultMessage:"Creates a zip file containing all pages in the workspace as PDF files.",id:"exportModal.workspacePdfUpgradeTooltip.caption"})}),tooltipPlacement:b().W.Left,upgradeButtonDesktopStyle:{marginTop:2}},s)}}}function ie(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=j().Ay.state;a.open&&p().z_(t,{...a,exportOptions:{...a.exportOptions,includeContents:e}})}(e,a)},render:t=>(0,O.jsx)(C().A,{...t,title:Q(e)})}}function re(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=j().Ay.state;a.open&&p().z_(t,{...a,exportOptions:{...a.exportOptions,collectionViewExportType:e}})}(e,a)},render:t=>(0,O.jsx)(C().A,{...t,title:$(e)})}}function le(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=j().Ay.state;a.open&&(0,j().xt)(a)&&p().z_(t,{...a,exportOptions:{...a.exportOptions,pdfFormat:e}})}(e,a)},render:t=>(0,O.jsx)(C().A,{...t,title:X(e)})}}function de(){const e=(0,i().DP)(),t=(0,n().v3)(),a=(0,o().K8)((()=>Z()),[]),s=(0,v().A)(!0,500,100);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",height:32},children:[(0,O.jsx)(B().A,{style:{color:e.text.tertiary},children:(0,O.jsx)(g().sA,{id:"exportModal.pageScale.description",defaultMessage:"Scale percent"})}),(0,O.jsx)(G,{value:a,onChange:e=>function(e,t){const a=j().Ay.state;a.open&&(0,j().xt)(a)&&p().z_(t,{...a,exportOptions:{...a.exportOptions,scale:e}})}(e,t)})]}),!V(a)&&s&&(0,O.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:32,padding:"4px 0"},children:(0,O.jsx)(B().A,{isSmall:!0,isMultiline:!0,style:{color:e.errorText},children:(0,O.jsx)(g().sA,{id:"exportModal.pageScale.invalidScaleError",defaultMessage:"Scale percent must be a number between 10 and 200"})})})]})}function ce(e){let{modalState:t,includeContentsPopupStore:a,exportTypePopupStore:s,pdfFormatPopupStore:d,collectionViewExportTypePopupStore:c}=e;const u=(0,i().DP)(),m=(0,n().v3)(),h=(0,o().uB)(c,y().A),f=(0,o().uB)(d,y().A),x=(0,o().uB)(s,y().A),v=(0,o().uB)(a,y().A),{device:S,currentUser:w}=m,C=(0,o().K8)((()=>(0,j().xt)(t)&&!p().Dd(m)&&"business"),[t,m]),I=m.device.isWindows,T=(0,o().K8)((()=>J()),[]),k=(0,o().K8)((()=>$(t.exportOptions.collectionViewExportType||"currentView")),[t]);return(0,O.jsxs)("div",{style:{width:320,padding:24,fontSize:14},children:[(0,O.jsx)(P().A,{isMenuItem:S.isMobile,buttonPopupStore:x,label:(0,O.jsx)(g().sA,{id:"exportModal.exportFormat.description",defaultMessage:"Export format"}),selectedTitle:Y(t.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,O.jsx)(D().A,{...e}),items:U.map((t=>oe(t,e,w.id,m)))}]}),t.exportOptions.collectionViewExportType&&(0,O.jsx)(P().A,{isMenuItem:S.isMobile,buttonPopupStore:h,label:(0,O.jsx)(g().sA,{id:"exportModal.includeDatabases.description",defaultMessage:"Include databases"}),selectedTitle:k,renderMenuSections:e=>[{key:"exportCollection",render:e=>(0,O.jsx)(D().A,{...e}),items:F.map((t=>re(t,e,m)))}]}),(0,O.jsx)(P().A,{isMenuItem:S.isMobile,buttonPopupStore:v,label:(0,O.jsx)(g().sA,{id:"exportModal.includeContents.description",defaultMessage:"Include content"}),selectedTitle:Q(t.exportOptions.includeContents||"everything"),renderMenuSections:e=>[{key:"includeContents",render:e=>(0,O.jsx)(D().A,{...e}),items:W.map((t=>ie(t,e,m)))}]}),(0,j().xt)(t)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(P().A,{isMenuItem:S.isMobile,buttonPopupStore:f,label:(0,O.jsx)(g().sA,{id:"exportModal.pageFormat.description",defaultMessage:"Page format"}),selectedTitle:X(t.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>(0,O.jsx)(D().A,{...e}),items:l().yC.map((t=>le(t,e,m)))},{key:"otherPaperFormats",render:e=>(0,O.jsx)(D().A,{topBorder:!0,...e}),items:l().hj.map((t=>le(t,e,m)))}]}),(0,O.jsx)(de,{})]}),"space"!==t.root.table&&(0,O.jsx)(A().A,{requireUpgradeToTier:C,analyticsName:"export_modal",onClick:()=>se(m),render:(e,a)=>(0,O.jsxs)("div",{...e,style:{display:"flex",alignItems:"center",height:32},children:[(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:"auto",color:u.text.tertiary,fontSize:14},children:[(0,O.jsx)(g().sA,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})," ",a&&(0,O.jsx)("div",{style:{marginLeft:8},children:a})]}),(0,O.jsx)(N().A,{on:t.recursive,disabled:Boolean(C)})]}),renderUpgradeTooltip:()=>(0,O.jsx)(L().A,{imageURL:r().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,O.jsx)(g().sA,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:(0,O.jsx)(g().sA,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:b().W.Left,upgradeButtonDesktopStyle:{marginTop:2}}),(0,O.jsx)(R().A,{title:(0,O.jsx)(g().sA,{id:"exportModal.flattenExportFiletree.description",defaultMessage:"Create folders for subpages"}),subtitle:"",style:{color:u.text.tertiary,fontSize:14,display:"flex",alignItems:"center",marginRight:"auto",height:32},on:void 0===t.exportOptions.flattenExportFiletree?!I:!t.exportOptions.flattenExportFiletree,disabled:!t.recursive,onChange:()=>function(e){const t=j().Ay.state;t.open&&p().z_(e,{...t,exportOptions:{...t.exportOptions,flattenExportFiletree:!t.exportOptions.flattenExportFiletree}})}(m)}),"html"===t.exportOptions.exportType?(0,O.jsx)(R().A,{title:(0,O.jsx)(g().sA,{id:"exportModal.shouldExportComments.description",defaultMessage:"Export comments"}),subtitle:"",style:{color:u.text.tertiary,fontSize:14,display:"flex",alignItems:"center",marginRight:"auto",height:32},on:t.shouldExportComments,onChange:()=>function(e){const t=j().Ay.state;t.open&&p().z_(e,{...t,shouldExportComments:!t.shouldExportComments})}(m)}):null,(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:16},children:[(0,O.jsx)(M().p,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:ae,children:(0,O.jsx)(g().sA,{defaultMessage:"Cancel",id:"exportModal.cancelButton.label"})}),(0,O.jsx)(z().A,{onClick:()=>ne(m),disabled:!T,children:(0,O.jsx)(g().sA,{defaultMessage:"Export",id:"exportModal.exportButton.label"})})]})]})}function ue(e,t,a,s){const{currentUser:n,device:o}=t;return m().oE([{key:"export type",render:s=>{let{ref:i,...r}=s;return(0,O.jsx)(P().A,{...r,isMenuItem:o.isMobile,buttonPopupStore:a,label:(0,O.jsx)(g().sA,{defaultMessage:"Export format",id:"exportModal.exportFormat.description"}),selectedTitle:Y(e.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,O.jsx)(D().A,{...e}),items:U.map((a=>oe(a,e,n.id,t)))}]})},action:()=>{a.setState({open:!0})}},(0,j().xt)(e)&&{key:"pdf format",render:a=>{let{ref:n,...i}=a;return(0,O.jsx)(P().A,{...i,isMenuItem:o.isMobile,buttonPopupStore:s,label:(0,O.jsx)(g().sA,{defaultMessage:"Page format",id:"exportModal.pageFormat.description"}),selectedTitle:X(e.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>(0,O.jsx)(D().A,{...e}),items:l().yC.map((a=>le(a,e,t)))},{key:"otherPaperFormats",render:e=>(0,O.jsx)(D().A,{topBorder:!0,...e}),items:l().hj.map((a=>le(a,e,t)))}]})},action:()=>{s.setState({open:!0})}},"space"!==e.root.table&&{key:"recursive",render:a=>{let{onClick:s,key:n,...o}=a;const i=(0,j().xt)(e)&&!p().Dd(t)&&"business";return(0,O.jsx)(A().A,{requireUpgradeToTier:i,analyticsName:"export_modal",onClick:s,render:(t,a)=>{const s=(0,f().A)(o,t);return(0,O.jsx)(C().A,{...s,title:(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,O.jsx)(g().sA,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})," ",a&&(0,O.jsx)("div",{style:{marginLeft:8},children:a})]}),right:(0,O.jsx)(N().A,{...s,on:e.recursive,disabled:Boolean(i)})})},renderUpgradeTooltip:()=>(0,O.jsx)(L().A,{imageURL:r().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,O.jsx)(g().sA,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:(0,O.jsx)(g().sA,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:b().W.Left,upgradeButtonDesktopStyle:{marginTop:2}},n)},action:()=>se(t)}])}function ge(e){let{modalState:t,exportTypePopupStore:a,pdfFormatPopupStore:s}=e;const o=(0,n().v3)(),i={menuType:h().gu.Modal,title:(0,O.jsx)(g().sA,{id:"exportModal.title",defaultMessage:"Export"}),right:(0,O.jsx)(g().sA,{id:"exportModal.closeButton.label",defaultMessage:"Close"}),onClickRight:ae};return(0,O.jsx)(k().A,{...i,children:(0,O.jsx)(_().Ay,{type:_().Oh.Vertical,initialFocus:void 0,sections:[{key:"exportOptions",render:e=>(0,O.jsx)(D().A,{...e}),items:ue(t,o,a,s)},{key:"actions",render:e=>{let{children:t,...a}=e;return(0,O.jsx)(D().A,{...a,children:t})},items:[{key:"submit",render:e=>{const{onClick:t,...a}=e;return(0,O.jsx)(E().A,{...a,onClick:t||(()=>ne(o)),disabled:!J(),title:(0,O.jsx)(g().sA,{id:"exportModal.exportButton.label",defaultMessage:"Export"})})},action:()=>ne(o)}]}]})})}function me(e){let{includeContentsPopupStore:t,exportTypePopupStore:a,pdfFormatPopupStore:s,collectionViewExportTypePopupStore:i}=e;const r=(0,n().v3)(),{device:l}=r,d=(0,o().O$)(S().e),c=(0,o().O$)(j().Ay);return d?c.open?l.isMobile?(0,O.jsx)(ge,{exportTypePopupStore:a,pdfFormatPopupStore:s,modalState:c}):(0,O.jsx)(ce,{includeContentsPopupStore:t,exportTypePopupStore:a,pdfFormatPopupStore:s,collectionViewExportTypePopupStore:i,modalState:c}):null:(0,O.jsx)(te,{})}},492455:(e,t,a)=>{a.d(t,{Z:()=>g});a(242343);var s=()=>a(16791),n=()=>a(803290),o=()=>a(846581),i=()=>a(409211),r=()=>a(653998),l=()=>a(76394),d=()=>a(740699),c=()=>a(811132),u=a(163643);function g(e){let{pageStatus:t,lastEditedTime:a,lastEditedById:g,movedToTrashTime:m,deletedFromTrashTime:p}=e;const h=(0,d().y)(g),f=(0,n().K8)((()=>{if("alive"===t)return(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.lastEdited",defaultMessage:"Last edited by {name} on {time}",values:{name:h,time:(0,o().W_)(a,"month_day_time",s().locale)}});if((0,l().O9)(p)){return!!g&&(0,i().O5)(g)?(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.autoDeletedFromTrash",defaultMessage:"Automatically deleted from Trash on {time}",values:{time:(0,o().W_)(p,"month_day_time",s().locale)}}):(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.deletedFromTrash",defaultMessage:"Deleted from Trash by {name} on {time}",values:{name:h,time:(0,o().W_)(p,"month_day_time",s().locale)}})}return(0,l().O9)(m)?(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.movedToTrash",defaultMessage:"Moved to Trash by {name} on {time}",values:{name:h,time:(0,o().W_)(m,"month_day_time",s().locale)}}):void 0}),[p,g,a,m,t,h]);return(0,u.jsx)(c().d,{dateTs:a,tooltip:f})}},493127:(e,t,a)=>{a.d(t,{J:()=>i});a(242343);var s=()=>a(174114),n=()=>a(983050),o=a(163643);function i(e){let{left:t,right:a,showElevatedConsoleContainer:i}=e;const r=(0,s().IS)((e=>({grid:{display:"grid",gridTemplateColumns:"250px 1fr",background:i?e.surface.wash:void 0,height:"100%"},leftColumnFixed:{position:"relative",boxSizing:"border-box",maxHeight:"100%",overflow:"auto"},rightColumn:{position:"relative",background:e.surface.page,boxSizing:"border-box",maxHeight:"100%",overflow:"auto",...i?{borderRadius:12,border:"1px solid rgba(0, 0, 0, 0.08)",margin:"8px 8px 8px 0",boxShadow:"0 4px 0 -2px rgba(0, 0, 0, 0.04)",maxHeight:"calc(100% - 16px)"}:{}}})),[i]);return(0,o.jsxs)("div",{style:r.grid,children:[(0,o.jsx)("div",{style:r.leftColumnFixed,children:t}),(0,o.jsx)("div",{id:n().g5j,style:r.rightColumn,children:a})]})}},499582:(e,t,a)=>{a.d(t,{$:()=>w,p:()=>j});var s=a(242343),n=()=>a(237385),o=()=>a(174114),i=()=>a(653998),r=()=>a(818369),l=()=>a(145046),d=()=>a(575015),c=()=>a(137476),u=()=>a(868325),g=()=>a(204435),m=()=>a(529305),p=()=>a(701270),h=()=>a(539048),f=()=>a(788921),x=()=>a(195260),v=()=>a(950786),b=()=>a(396218),y=()=>a(126910),S=a(163643);function j(e){let{refetchPendingDomains:t,onDismiss:a,domainVerification:o,regenerateCode:g,organizationId:f}=e;const v=(0,n().v3)(),j=(0,i().tz)(),[M,C]=(0,s.useState)(!1),I=(0,y().x5)(),{refreshOrganization:T}=(0,s.useContext)(x().D),k=(0,s.useCallback)((async()=>{if(M)return;C(!0);const e=await r().callApi({eventName:"verifyDomain",environment:v,data:{verificationId:o.id}});"success"===e.type?(C(!1),t(),T(),d().D6({label:(0,S.jsx)(p().D,{styleName:"UIRegular-14px/Regular",children:(0,S.jsx)(i().sA,{id:"organizationEmailDomainsTable.toastMessage.verifyDomain.success",defaultMessage:"Successfully verified <b>{domain}</b>",values:{domain:o.domain,b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,S.jsx)("b",{children:t})}}})})}),a(),(0,c().u4)({environment:v,event:{eventName:"org_console_general_create_entity",eventProperties:{entity:"verified_domain",organization_id:f}}})):(l().f1((0,u().Hu)(j,e)),C(!1))}),[v,j,M,C,t,T,o.id,o.domain,a,f]);return(0,S.jsx)(h().s,{isOpen:!0,onDismiss:a,render:e=>{let{sizeRange:t}=e;return(0,S.jsx)(m().tf,{showDismissButton:!1,sizeRange:t,header:(0,S.jsx)(y().Ws,{}),footer:(0,S.jsx)(b().jl,{primaryText:(0,S.jsx)(i().sA,{...A.verifyButton}),primaryAction:k,primaryDisabled:"invalid"===o.type,secondaryText:(0,S.jsx)(i().sA,{...A.cancelButton}),secondaryAction:a,isLoading:M}),children:(0,S.jsx)("div",{style:I.content,children:(0,S.jsx)(w,{domainVerification:o,regenerateCode:g})})})}})}function w(e){let{domainVerification:t,regenerateCode:a}=e;const s=(0,o().IS)((e=>({instructionsContainer:{padding:16,borderRadius:v().V.medium,background:e.cardBackground,display:"flex",flexDirection:"column",gap:16},list:{color:e.text.secondary,fontSize:12,lineHeight:"16px"}})),[]);return(0,S.jsxs)(g().VP,{gap:b().gA,children:[(0,S.jsxs)(g().VP,{gap:12,children:[(0,S.jsx)(f().bi,{domainVerification:t,regenerateCode:a}),(0,S.jsx)(f().KS,{domainVerification:t})]}),(0,S.jsxs)("div",{style:s.instructionsContainer,children:[(0,S.jsx)(p().D,{styleName:"Body-12px/Medium",children:(0,S.jsx)(i().sA,{...A.instructionsHeader})}),(0,S.jsx)(f().vr,{listStyles:s.list})]})]})}const A=(0,i().YK)({verifyButton:{id:"orgConsole.emailDomains.verifyEmailDomainModal.button.verify",defaultMessage:"Verify domain"},cancelButton:{id:"orgConsole.emailDomains.verifyEmailDomainModal.button.cancel",defaultMessage:"Cancel"},instructionsHeader:{id:"orgConsole.emailDomains.verifyEmailDomainModal.instuctionsHeader",defaultMessage:"Instructions to verify your domain"}})},505790:(e,t,a)=>{a.d(t,{e:()=>g});var s=a(242343),n=()=>a(237385),o=()=>a(896958),i=()=>a(653998),r=()=>a(631474),l=()=>a(818369),d=()=>a(145046),c=()=>a(575015);const u=(0,i().YK)({getSupportAccessFailed:{defaultMessage:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.getSupportAccessFailed"},setSupportAccessFailed:{defaultMessage:"Failed to update user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.setSupportAccessFailed"},toastDisabled:{id:"managedUsers.toastMessage.supportAccessDisabled",defaultMessage:"Successfully disabled user's support access status"},toastEnabled:{id:"managedUsers.toastMessage.supportAccessEnabled",defaultMessage:"Successfully enabled user's support access status"}});function g(e){const{spaceId:t,userId:a,isUserUnmanaged:g}=e,m=(0,i().tz)(),p=(0,n().v3)(),[h,f]=(0,s.useState)({loading:!1,error:void 0}),[x,v]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{!async function(){const e=await async function(){if(!a)return;if(g)return;f({loading:!0,error:void 0});const e=await l().callApi({eventName:"getDataAccessConsentForManagedUser",environment:p,data:{spaceId:t,userId:a}});return"failed"===e.type?(f({loading:!1,error:e.error}),void d().c1(m.formatMessage(u.getSupportAccessFailed))):(f({loading:!1,error:void 0}),e.data.expiryTime)}();v(e)}()}),[p,m,t,a,g]);const b=(0,s.useMemo)((()=>Boolean(x&&Number(x)>Date.now())),[x]),y=(0,s.useCallback)((async()=>{if(!a)return;f({loading:!0,error:void 0});const e=b?void 0:Date.now()+o().f,s=await l().callApi({eventName:"setDataAccessConsentForManagedUser",environment:p,data:{spaceId:t,userId:a,expiryTime:e}});if(r().MZ(p,{new_value:Boolean(e)}),"failed"===s.type)return f({loading:!1,error:s.error}),void d().c1(m.formatMessage(u.setSupportAccessFailed));v(e),e?c().D6({label:m.formatMessage(u.toastEnabled)}):c().D6({label:m.formatMessage(u.toastDisabled)}),f({loading:!1,error:void 0})}),[p,m,t,a,b]);return{isAccessGranted:b,toggleDataAccessConsent:y,loading:h.loading,error:h.error}}},536894:(e,t,a)=>{a.d(t,{A:()=>l});a(242343);var s=()=>a(308439),n=()=>a(653998),o=()=>a(145046),i=()=>a(35462),r=a(163643);async function l(e){return o().Gh({message:(0,r.jsx)(i().A,{style:o().xh.title,children:(0,r.jsx)(n().sA,{id:"organizationSecuritySettings.discardChanges.confirmation.message",defaultMessage:"Discard unsaved changes?"})}),description:(0,r.jsx)(i().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,r.jsx)(n().sA,{id:"organizationSecuritySettings.discardChanges.confirmation.description",defaultMessage:"Once discarded, changes cannot be recovered."})}),acceptLabel:(0,r.jsx)(n().sA,{id:"organizationSecuritySettings.discardChanges.confirmation.acceptLabel",defaultMessage:"Discard"}),cancelLabel:(0,r.jsx)(n().sA,{id:"organizationSecuritySettings.discardChanges.confirmation.cancelLabel",defaultMessage:"Cancel"}),icon:(0,s().exclamationMarkTriangleIcon)({width:24,height:24,fill:e.text.uiRedPrimary})})}},540389:(e,t,a)=>{a.d(t,{X:()=>P,j:()=>D});a(362833),a(725707),a(491955),a(500234),a(403517);var s=a(242343),n=()=>a(803290),o=()=>a(174114),i=()=>a(752903),r=()=>a(427240),l=()=>a(653998),d=()=>a(76394),c=()=>a(662505),u=()=>a(477784),g=()=>a(640979),m=()=>a(904697),p=()=>a(907721),h=()=>a(466321),f=()=>a(210466),x=()=>a(424339),v=()=>a(209684),b=()=>a(535906),y=()=>a(935091),S=()=>a(858023),j=()=>a(443252),w=()=>a(951540),A=()=>a(88271),M=()=>a(35462),C=()=>a(204024),I=()=>a(634369),T=()=>a(809785),k=()=>a(732863),_=a(163643);const z=(0,l().YK)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.teams.placeholder",defaultMessage:"Search for teamspaces..."}});function D(e){let{selectedTeamIds:t,setSelectedTeamIds:a,onMenuClose:D,teamStores:N}=e;const R=(0,n().uB)(void 0,f().A),B=(0,o().IS)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},pillText:{marginLeft:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8},optionTitle:{display:"block"},noResultsMessage:{width:"100%",margin:"8px 12px"},optionCaption:{display:"block",color:e.text.secondary,fontSize:12,lineHeight:"15px"}})),[]),[E,L]=(0,s.useState)(!1),[O,U]=(0,s.useState)(""),F=(0,n().K8)((()=>[...N].sort(m().compareTeamspaceStores)),[N]),H=(0,n().K8)((()=>t.map((e=>N.find((t=>t.id===e)))).filter(d().O9)),[N,t]);function V(){L(!1),U(""),D()}function W(){U(""),a([])}function q(e){const s=t.includes(e)?[]:[e];a(s),U("")}const G=(0,s.useCallback)((e=>{U(e.target.value)}),[]),K=(0,n().K8)((()=>H.map((e=>{const s=e.getName();return(0,_.jsx)(T().A,{isSingle:!0,format:i().NY.Inline,showRemoveButton:!0,onClickRemove:()=>{const s=t.filter((t=>t!==e.id));a(s)},style:B.pillContainer,value:(0,_.jsxs)("div",{style:B.pillContents,children:[(0,_.jsx)(x().x,{disabled:!0,store:e,size:16}),(0,_.jsx)(M().A,{style:B.pillText,children:s})]})},e.id)}))),[H,t,a,B]);const Y=(0,_.jsx)(c().A,{on:t.length>0,icon:(0,r().peopleFillIcon)(B.icon),title:(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.title",defaultMessage:"Teamspace"}),onClick:()=>L(!0)});return(0,_.jsx)(I().A,{children:(0,_.jsx)(j().Ay,{popupType:h().n.Popup,placementToOrigin:p().W.Bottom,alignmentToOrigin:p().C.Start,open:E,render:function(){const e=[];for(const n of F){const a=n.getName(),s=n.getTeamAccessLevel(),o=n.isDefault();a&&a.toLocaleLowerCase().includes(O)&&e.push({key:n.id,action:()=>q(n.id),render:e=>(0,_.jsx)(b().A,{...e,icon:(0,_.jsx)(C().A,{isSelected:t.includes(n.id)}),focused:!1,title:(0,_.jsxs)("div",{style:B.optionContainer,children:[(0,_.jsx)(x().x,{disabled:!0,store:n,size:24,style:B.teamIcon}),(0,_.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,_.jsx)(M().A,{style:B.optionTitle,children:a}),(0,_.jsx)(M().A,{style:B.optionCaption,children:P(s,o)})]})]})})})}const a={key:"no-results",action:()=>{},render:e=>(0,_.jsx)(M().A,{isSecondaryColor:!0,style:B.noResultsMessage,...e,children:(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.noResultsMessage",defaultMessage:"No results found."})})},s={key:"teamOptions",items:e.length>0?e:[a],render:e=>(0,_.jsx)(A().A,{...e,title:null,loading:!1})};return(0,_.jsxs)("div",{style:B.container,children:[(0,_.jsx)(k().A,{focus:!0,value:O,style:B.input,placeholder:u().A.formatMessage(z.placeholder),onChange:G,onRemoveLastToken:W,tokens:K}),(0,_.jsx)(y().A,{menuType:g().gu.Popup,header:null,maxHeight:250,width:300,children:(0,_.jsx)(S().Ay,{type:S().Oh.Vertical,store:R,initialFocus:0,sections:[s]})}),(0,_.jsxs)(A().A,{topBorder:!0,style:B.footer,children:[(0,_.jsx)(v().p,{onClick:W,children:(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.clearButton",defaultMessage:"Clear"})}),(0,_.jsx)(w().A,{onClick:V,children:(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:V,keepFocus:!0,origin:Y,preventScaleTransition:!0})})}function P(e,t){if(t)return(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.default",defaultMessage:"Default"});switch(e){case"private":return(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.private",defaultMessage:"Private"});case"closed":return(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.closed",defaultMessage:"Closed"});case"open":return(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.open",defaultMessage:"Open"});default:(0,d().HB)(e)}}},545046:(e,t,a)=>{a.d(t,{D:()=>o});var s=()=>a(394591),n=()=>a(837606);class o extends n().f{getInitialState(){return{categorySelections:{page:n().o.All,space:n().o.All,team:n().o.All,account:n().o.All,form:n().o.All},categoryToggleOpen:{page:!0,space:!0,team:!0,account:!0,form:!0},searchQuery:void 0,actionSelections:(0,a(76394).s8)(s().D$,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"page",orderedActions:s().Dj.page},{category:"space",orderedActions:s().Dj.space},{category:"account",orderedActions:s().Dj.account},{category:"team",orderedActions:s().Dj.team},{category:"form",orderedActions:s().Dj.form}]}}}},563680:(e,t,a)=>{a.d(t,{iK:()=>n,p8:()=>s});const s=28,n=24},571713:(e,t,a)=>{a.d(t,{a:()=>u});a(242343);var s=()=>a(174114),n=()=>a(524118),o=()=>a(653998),i=()=>a(220413),r=()=>a(31448),l=()=>a(410194),d=()=>a(35462),c=a(163643);function u(e){let{icon:t,iconStyles:a,textStyles:u,style:g,title:m,byline:p,loading:h,error:f}=e;const x=function(e,t,a){return(0,s().IS)((s=>({title:{fontWeight:r().Wy.medium,fontSize:16,maxWidth:"100%"},byline:{fontSize:r().J.UISmall.desktop,marginTop:4},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",overflow:"hidden",...t},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:8},icon:{height:28,width:28,color:s.text.tertiary,fill:"currentcolor",...e},container:{height:"100%",flex:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",border:`1px solid ${s.outlineButtonBorder}`,borderRadius:4,padding:12,gap:8,...a},loadingTitle:{display:"block",width:"40%"},loadingByline:{display:"block",width:"60%",marginTop:8,marginBottom:8},errorTitle:{textAlign:"center",color:i().Ay.red}})),[e,t,a])}(a,u,g);return h?(0,c.jsx)("div",{style:x.container,children:(0,c.jsxs)("div",{style:x.textContainer,children:[(0,c.jsx)("div",{style:x.loadingTitle,children:(0,c.jsx)(l().A,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}),p?(0,c.jsx)("div",{style:x.loadingByline,children:(0,c.jsx)(l().A,{paragraphs:[{lineHeight:14,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}):null]})}):f?(0,c.jsx)("div",{style:x.container,children:(0,c.jsx)("div",{style:x.titleContainer,children:(0,c.jsx)(d().A,{style:x.errorTitle,children:(0,n().op4)(f)?f.message:(0,c.jsx)(o().sA,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,c.jsx)("br",{})}})})})}):(0,c.jsxs)("div",{style:x.container,children:[t?t(x.icon):null,(0,c.jsxs)("div",{style:x.textContainer,children:[(0,c.jsx)(d().A,{style:x.title,showTooltipWhenTruncated:!0,children:m}),p?(0,c.jsx)(d().A,{style:x.byline,isMultiline:!0,children:p}):null]})]})}},573951:(e,t,a)=>{a.d(t,{A:()=>f});a(362833),a(725707),a(491955),a(403517);var s=a.n(a(567012)),n=a(242343),o=()=>a(653998),i=()=>a(975392),r=()=>a(535906),l=()=>a(858023),d=()=>a(397791),c=()=>a(88271),u=()=>a(395705),g=()=>a(477784),m=a(163643);const p=(0,o().YK)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.propertySelect.inputPlaceholder"},none:{defaultMessage:"None",id:"database.viewSettings.propertySelect.noneMessage"},remove:{defaultMessage:"Remove",id:"database.viewSettings.propertySelect.removeMessage"}});function h(e){let{currentProperty:t,showNoneOption:h,showRemoveOption:f,getProperties:x,onAccept:v,inputPlaceholder:b,defaultShowPropertyCount:y,disableSortByPageFormat:S,schema:j,format:w,renderProperty:A}=e;const M=(0,a(237385).Y0)(),[C,I]=(0,n.useState)(""),[T,k]=(0,n.useState)(!1),_=(0,a(803290).uB)(void 0,a(210466).A),z=(0,a(622286).X)("db_ux_mobile_filter_sheet"),D=(0,a(174114).IS)((e=>({menuItem:{color:e.text.secondary}})),[]),[P,N]=(0,a(875878).$)(),R=(0,a(875089).L)(w,j,void 0,a(810111).jf.Page).collection_page_properties||[],B=!y||T,E=g().A.formatMessage(p.none),L=h?{key:"none",render:e=>(0,m.jsx)(r().A,{...e,isChecked:!t,title:E}),action:()=>{v(void 0)}}:void 0,O=f?{key:"remove",render:e=>(0,m.jsx)(r().A,{...e,icon:(0,m.jsx)(d().I,{icon:a(836693).trashIcon}),title:g().A.formatMessage(p.remove)}),action:()=>{v(void 0)}}:void 0,U=x();let F=U;if(S||(F=i().Ul(U,(e=>R.findIndex((t=>t.property===e))))),C){const e=new Map;let t=F.map((t=>{const s=j[t],n=s?`${s.name} ${a(206183).dC[s.type]}`:"";return e.set(t,n),n}));t=s().filter(C,t).map((e=>{let{original:t}=e;return t})),F=F.filter((a=>t.includes(e.get(a)||"")))}else!B&&y&&(F=F.slice(0,y));const H=i().oE([!C||s().test(C,E)?L:void 0,...F.map((e=>function(e,t,a,s,n){const o=t[e];if(!o)return;const i={key:e,render:t=>{const a=e===s;return n?n(t,e,a,o):(0,m.jsx)(u().G,{...t,propertySchema:o,format:u().e.Name,isChecked:a})},action:()=>{a(e)}};return i}(e,j,v,t,A)))]);if(!B&&U.length>F.length&&!C){const e={key:"show_more",render:e=>(0,m.jsx)(r().A,{...e,icon:(0,m.jsx)(d().I,{icon:a(794484).L}),style:D.menuItem,title:(0,m.jsx)(o().sA,{defaultMessage:"{moreCount} more",id:"database.viewSettings.propertySelect.showMoreTitle",values:{moreCount:U.length-F.length}})}),action:()=>{k(!0)}};H.push(e)}const V=H.length>0,W=Boolean(C),q=!O||V||W;q&&!V&&H.push({action:i().lQ,key:"noResults",render:e=>(0,m.jsx)(a(725460).A,{...e,caption:(0,m.jsx)(o().sA,{defaultMessage:"No results",id:"database.viewSettings.propertySelect.noResultsTitle"})})});const G=[];if(q){const e=(0,m.jsx)(a(401382).Ay,{focusInitial:!M.isMobile||void 0,focus:!M.isMobile||void 0,value:C,onChange:e=>{I(e.target.value),_.setState({..._.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}}),k(!1)},placeholder:b||g().A.formatMessage(p.inputPlaceholder),...P});M.isMobile&&z?H.unshift({key:"input",render:()=>e,action:i().lQ}):G.push({key:"input",comp:(0,m.jsx)(c().A,{isInput:!0,children:e})})}return(H.length>0||O)&&G.push({key:"properties",comp:(0,m.jsx)(l().Ay,{type:l().Oh.Vertical,initialFocus:0,comboboxProps:q?N:void 0,sections:[...H.length>0?[{key:"results",render:e=>(0,m.jsx)(c().A,{...e}),items:H}]:[],...O?[{key:"remove",render:e=>(0,m.jsx)(c().A,{topBorder:H.length>0,...e}),items:[O]}]:[]],store:_})}),(0,m.jsx)(m.Fragment,{children:G.map((e=>{let{key:t,comp:a}=e;return(0,m.jsx)(n.Fragment,{children:a},t)}))})}const f=n.memo(h,a(21045).A)},577831:(e,t,a)=>{a.d(t,{c:()=>g,y:()=>u});a(403517);var s=a(242343),n=()=>a(174114),o=()=>a(884373),i=()=>a(204435),r=()=>a(701270),l=a(163643);const d=24,c=12;function u(e){let{title:t,titleId:a,byline:s,bylineId:o,item:u,onClick:g,padding:m,itemStyles:p,bylineStyles:h,styles:f,badge:x,shouldHighlight:v}=e;const b=(0,n().IS)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:m,cursor:g?"pointer":"default",position:"relative"},settingLeft:{flex:3,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:6},settingRight:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-start"},highlight:{height:`calc(100% + ${c}px)`,width:`calc(100% + ${d}px)`,left:`-${d/2}px`,position:"absolute",backgroundColor:e.buttonHoveredBackground},byline:{lineHeight:"18px",...h}})),[m,g,h]),y={...b.settingContainer,...f};return(0,l.jsxs)("div",{style:y,...g?{onClick:g,role:"button",tabIndex:0}:{},children:[(0,l.jsxs)("div",{style:b.settingLeft,children:[(0,l.jsxs)(i().fI,{alignItems:"center",children:[(0,l.jsx)(r().D,{id:a,styleName:"UIRegular-14px/Medium",colorName:"primary",children:t}),x]}),s&&(0,l.jsx)(r().D,{id:o,styleName:"UIMedium-13px/Regular",colorName:"secondary",customStyles:b.byline,children:s})]}),(0,l.jsx)("div",{style:{...b.settingRight,...p},children:u}),v&&(0,l.jsx)("div",{style:b.highlight})]})}function g(e){const{items:t}=e,a=(0,n().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]);return(0,l.jsx)("div",{style:a.container,children:t.map(((e,n)=>(0,l.jsxs)(s.Fragment,{children:[e,n<t.length-1?(0,l.jsx)(o().A,{dividerColor:a.divider.color,size:1}):null]},n)))})}},578355:(e,t,a)=>{a.d(t,{Ry:()=>c,b0:()=>g,j:()=>u,tE:()=>d});a(333225),a(494367),a(516262),a(573119),a(240480),a(950443),a(619601),a(242343);var s=()=>a(167089),n=()=>a(454909),o=()=>a(653998),i=()=>a(76394),r=()=>a(172032),l=a(163643);function d(e){let{audienceValues:t,selectedAudience:a,setSelectedAudience:o,onMenuClose:i,setPillTitleStringToActiveSelection:d}=e;return(0,l.jsx)(r().A,{allOptions:t?new Set(t):new Set(n().p),getFormattedStringCaption:g,getFormattedStringTitle:u,getPillTitle:c,selectedOptions:a,setSelectedOption:o,pillIcon:s().M,onMenuClose:i,setPillTitleStringToActiveSelection:d})}function c(e){return e[0]?u(e[0]):(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.title",defaultMessage:"Audience"})}function u(e){switch(e){case"private":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.private",defaultMessage:"Private"});case"shared_externally":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.external",defaultMessage:"Shared externally"});case"shared_internally":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.internal",defaultMessage:"Shared internally"});case"shared_to_web":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.publishedToWeb",defaultMessage:"Shared to web"});default:(0,i().HB)(e)}}function g(e){switch(e){case"private":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.private",defaultMessage:"Pages that only a single workspace member has access to."});case"shared_externally":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.external",defaultMessage:"Pages that are shared with guests or connections."});case"shared_internally":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.internal",defaultMessage:"Pages that are shared with other workspace members."});case"shared_to_web":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.publishedToWeb",defaultMessage:"Pages that are available for anyone to see on the web."});default:(0,i().HB)(e)}}},580359:(e,t,a)=>{a.d(t,{r:()=>M});a(242343);var s=()=>a(237385),n=()=>a(803290),o=()=>a(174114),i=()=>a(712437),r=()=>a(706412),l=()=>a(711361),d=()=>a(319989),c=()=>a(653998),u=()=>a(91472),g=()=>a(110975),m=()=>a(29869),p=()=>a(640979),h=()=>a(907721),f=()=>a(962373),x=()=>a(535906),v=()=>a(273520),b=()=>a(356813),y=()=>a(935091),S=()=>a(858023),j=()=>a(443252),w=()=>a(88271),A=a(163643);function M(e){let{blockStore:t}=e;const a=(0,s().v3)(),M=(0,n().uB)(void 0,f().A),C=(0,o().IS)((e=>({changePermissionsIcon:{height:18,width:18,color:e.regularIconColor,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor"},openLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor",transform:"rotate(-45deg)"}})),[]);const I={key:"actions",render:e=>(0,A.jsx)(w().A,{...e}),items:[{key:"copy-link",render:e=>(0,A.jsx)(x().A,{...e,icon:(0,d().w)(C.copyLinkIcon),title:(0,A.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:async function(){const e=(0,m().Ay)({store:t,pageVisitSource:i().y8.CopyLink}),s=await u().R.clipboardActions.load();await s.copyString({environment:a,stringValue:e,copiedMessage:s.clipboardMessages.copiedLinkToClipboard}),M.setState({open:!1})}},{key:"open-page-in-new-tab",render:e=>(0,A.jsx)(x().A,{...e,icon:(0,r().Z)(C.openLinkIcon),title:(0,A.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.page.actions.openLink",defaultMessage:"Open in new tab"})}),action:function(){const e=(0,m().Ay)({store:t,pageVisitSource:i().y8.LinkInPage});g().f({environment:a,url:e}),M.setState({open:!1})}}]},T=(0,c().tz)();return(0,A.jsx)(v().Ay,{popupType:j().nl.Popup,alignmentToOrigin:h().C.Center,placementToOrigin:h().W.Right,style:{width:248},render:()=>(0,A.jsx)(y().A,{menuType:p().gu.Popup,width:248,children:(0,A.jsx)(S().Ay,{type:S().Oh.Vertical,initialFocus:void 0,sections:[I]})}),buttonPopupStore:M,renderOrigin:e=>(0,A.jsx)(b().A,{icon:l()._,ariaLabel:T.formatMessage({id:"pageCellActions.iconButton.ariaLabel",defaultMessage:"More actions"}),...e})})}},584548:(e,t,a)=>{a.d(t,{$:()=>l,p:()=>i});a(725707),a(491955),a(244387);var s=a(242343),n=()=>a(76394),o=a(163643);const i=(0,s.createContext)({pendingTeamSettings:{},pendingSpaceSettings:{},pendingOrgSetting:void 0,setPendingTeamSettings:()=>{},setPendingSpaceSettings:()=>{},setPendingOrgSetting:()=>{},clearAllPendingSettings:()=>{},hasPendingCentralizedSettings:()=>!1});function r(e){return Object.entries(e).filter((e=>{let[t,a]=e;return(0,n().O9)(a)})).reduce(((e,t)=>{let[a,s]=t;return e[a]=s,e}),{})}function l(e){let{children:t}=e;const[a,n]=(0,s.useState)({}),[l,d]=(0,s.useState)({}),[c,u]=(0,s.useState)(void 0),g=(0,s.useCallback)((e=>{n(r({...a,...e}))}),[a]),m=(0,s.useCallback)((e=>{d(r({...l,...e}))}),[l]),p=(0,s.useCallback)((()=>{n({}),d({}),u(void 0)}),[n,d,u]),h=(0,s.useCallback)((()=>Boolean(c||Object.keys(l).length||Object.keys(a).length)),[c,l,a]);return(0,o.jsx)(i.Provider,{value:{pendingTeamSettings:a,pendingSpaceSettings:l,pendingOrgSetting:c,setPendingTeamSettings:g,setPendingSpaceSettings:m,setPendingOrgSetting:u,clearAllPendingSettings:p,hasPendingCentralizedSettings:h},children:t})}i.displayName="OrganizationCentralizedSettingsContext"},587727:(e,t,a)=>{a.d(t,{T:()=>n,n:()=>o});a(403517);var s=()=>a(190457);let n=function(e){return e.Loading="loading",e.ManagedUser="managed-user",e.OrganizationSpaceScimBot="organization-space-scim-bot",e.OrganizationWorkspace="organization-workspace",e.OrganizationGroup="organization-group",e.OrganizationGroupMember="organization-group-member",e.OrganizationGroupPage="organization-group-page",e.OrganizationGuest="organization-guest",e.OrganizationMember="organization-member",e.OrganizationClaimableWorkspace="organization-claimable-workspace",e.OrganizationEmailDomain="organization-email-domain",e.SingleUserGroup="single-user-group",e.SingleUserWorkspace="single-user-workspace",e.OrganizationLegalHold="organization-legal-hold",e.SingleLegalHoldMemberUser="single-legal-hold-member-user",e.SingleLegalHoldMemberGuest="single-legal-hold-member-guest",e.SingleLegalHoldMemberDeletedUser="single-legal-hold-member-deleted-user",e.SingleLegalHoldPage="single-legal-hold-page",e.SingleWorkspaceTeam="workspace-team",e.SingleWorkspaceGuest="workspace-guest",e.AnalyticsMemberViewsRow="analytics-member-view",e.AnalyticsPageViewsRow="analytics-page-views",e.SingleLegalHoldExport="single-legal-hold-export",e}({});function o(e){return new Array(e??s().q).fill(0).map(((e,t)=>({id:`loading-${t}`,isClickable:!1,type:n.Loading})))}},589215:(e,t,a)=>{a.r(t),a.d(t,{iconDefinition:()=>n,trashSmallIcon:()=>o});a(242343);var s=a(163643);const n={viewBox:"0 0 16 16",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M6.688 6.3a.575.575 0 0 0-.575.575v4.5a.575.575 0 1 0 1.15 0v-4.5a.575.575 0 0 0-.575-.575m2.625 0a.575.575 0 0 0-.575.575v4.5a.575.575 0 1 0 1.15 0v-4.5a.575.575 0 0 0-.575-.575"}),(0,s.jsx)("path",{d:"M6.625 2.125a1.5 1.5 0 0 0-1.5 1.5v.75h-2a.625.625 0 0 0 0 1.25h.528l.29 6.4c.048 1.035.9 1.85 1.936 1.85h4.242a1.94 1.94 0 0 0 1.935-1.85l.291-6.4h.528a.625.625 0 1 0 0-1.25h-2v-.75a1.5 1.5 0 0 0-1.5-1.5zm-.25 1.5a.25.25 0 0 1 .25-.25h2.75a.25.25 0 0 1 .25.25v.75h-3.25zm-1.183 8.344-.288-6.344h6.192l-.288 6.344a.687.687 0 0 1-.687.656H5.879a.687.687 0 0 1-.687-.656"})]})},o=(0,a(680369).wt)("trashSmall",n)},590344:(e,t,a)=>{a.d(t,{u:()=>w});a(725707),a(500234),a(403517),a(242343);var s=()=>a(237385),n=()=>a(803290),o=()=>a(174114),i=()=>a(198654),r=()=>a(855470),l=()=>a(535906),d=()=>a(273520),c=()=>a(935091),u=()=>a(858023),g=()=>a(88271),m=()=>a(103151),p=()=>a(640979),h=()=>a(906230),f=()=>a(907721),x=()=>a(755769),v=()=>a(872241),b=()=>a(883466),y=()=>a(935449),S=()=>a(832211),j=a(163643);function w(e){let{currentAccessLevel:t,currentIsDefault:a=!1,onChange:w,teamStore:A,disabledWithRightChevron:M=!1,style:C,parentSpaceStore:I}=e;const{device:T}=(0,s().v3)(),k=(0,y().R)(A),_=(0,b().O)(),z=(0,o().IS)((e=>({chevron:{width:12,marginLeft:3,marginRight:3,fill:e.lightIconColor},selectedButton:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${e.outlineButtonBorder}`,...C},icon:{alignSelf:"center",marginTop:0}})),[C]),D=(0,n().K8)((()=>(null==A?void 0:A.isDefault())??a),[A,a]),P=D?"default":t,N=(0,S().Z)({teamStore:A,onChange:w,isDefault:D,parentSpaceStore:I});return(0,j.jsx)(d().Ay,{popupType:T.isMobile?d().z7.SlideUp:d().z7.Popup,renderOrigin:e=>{const t=N.find((e=>e.key===P));if(!t)return null;const a=t.disableAllOptionsTooltip,s=M||Boolean(a)||Boolean(A)&&!k;return(0,j.jsx)(m().A,{placement:f().W.Bottom,alignment:f().C.Start,disableTooltip:!a||!k,renderTooltip:()=>a,style:{width:350},textWrap:!0,render:a=>(0,j.jsx)(l().A,{...(0,h().A)(e,a),title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:z.icon,disabled:s,right:M?(0,r().V)(z.chevron):s?void 0:(0,i().b)(z.chevron),focused:!1,shouldWrapCaption:!0,buttonStyle:z.selectedButton})})},placementToOrigin:x().UV.Bottom,alignmentToOrigin:x().MY.Start,sameWidthAsOrigin:!0,render:e=>{const t=[{key:"access levels",render:e=>(0,j.jsx)(g().A,{...e,topBorder:0!==e.index}),items:N.map((t=>{const a=t.key===P;return{key:t.key,render:e=>(0,j.jsx)(m().A,{placement:f().W.Top,disableTooltip:!t.tooltip,renderTooltip:()=>t.tooltip,render:s=>(0,j.jsx)(l().A,{...(0,h().A)(e,s),title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:z.icon,isChecked:a,disabled:t.disabled,shouldWrapCaption:!0})}),action:()=>{t.onSelect(),e.close()}}}))},..._?[{key:"try private teamspaces",render:()=>(0,j.jsx)(v().c,{openedFrom:"business_trial_private_teamspaces_upsell",styleOverrides:{margin:"4px 12px 12px 12px"}}),items:[]}]:[]];return(0,j.jsx)(c().A,{menuType:p().gu.Popup,children:(0,j.jsx)(u().Ay,{type:u().Oh.Vertical,initialFocus:void 0,sections:t})})}})}},593774:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(129044))().default{getInitialState(){return{displaySummary:!0,openDropdown:!1,query:""}}}const n=new s},605827:(e,t,a)=>{a.d(t,{x:()=>h});var s=a(242343),n=()=>a(174114),o=()=>a(17127),i=()=>a(477784),r=()=>a(619493),l=()=>a(164045),d=()=>a(273520),c=()=>a(356813),u=()=>a(443252),g=()=>a(103151),m=()=>a(805469),p=a(163643);function h(e){const{appliedSorts:t,openSortPillMenu:a}=e,[h,f]=(0,s.useState)(!1),x=Boolean(null==t?void 0:t.length),v=function(e){let{hasSort:t}=e;return(0,n().IS)((e=>({iconStyle:{width:21,height:void 0,fill:t?e.icon.uiBluePrimary:e.actionMenuButtonTextColor},buttonStyle:{...(0,l().j)({theme:e,isInHomeWidget:!1}),marginRight:4}})),[t])}({hasSort:x}),b=(0,s.useCallback)((()=>{x?a():f(!0)}),[f,a,x]),y=i().A.formatMessage(r().CL.menuTitle);return(0,p.jsx)(u().Ay,{popupType:d().z7.Popup,open:h,origin:(0,p.jsx)(g().A,{renderTooltip:()=>y,render:e=>(0,p.jsx)(c().A,{...e,ariaLabel:y,icon:o().C,iconStyle:v.iconStyle,style:v.buttonStyle,onClick:b})}),onDismiss:()=>f(!1),originGap:4,render:()=>(0,p.jsx)(m().J,{...e,currentSorts:t,onClick:e=>{a(e),f(!1)}})})}},608733:(e,t,a)=>{a.d(t,{M:()=>u,g:()=>g});var s=a(242343),n=()=>a(237385),o=()=>a(162901),i=()=>a(865415),r=()=>a(76394),l=()=>a(818369),d=()=>a(379356);const c={pageViews:0,uniquePageViews:0,pagesCreated:0,pageEdits:0,topPages:[]};function u(e){let{spaceId:t}=e;const[a,n]=(0,s.useState)("last_90_days");return{...g({spaceId:t,daysFilter:a}),daysFilter:a,setDaysFilter:n}}function g(e){let{spaceId:t,daysFilter:a}=e;const u=(0,n().v3)(),{updateCacheWithRecordMap:g}=(0,s.useContext)(d().N),[{status:m,value:p,error:h}]=(0,o().Yb)((async()=>{const e=await l().callApi({eventName:"getContentEngagementAnalytics",environment:u,data:{spaceId:t,daysFilter:a},headers:{[i().B3]:t}});switch("success"===e.type&&g(e),e.type){case"success":return{pageViews:e.data.pageViews,uniquePageViews:e.data.uniquePageViews,pagesCreated:e.data.pagesCreated,pageEdits:e.data.pageEdits,topPages:e.data.topPages};case"failed":throw e.body;default:(0,r().HB)(e)}}),[u,t,a,g]);return{data:(0,s.useMemo)((()=>p||c),[p]),loading:"pending"===m||"idle"===m,error:h}}},614046:(e,t,a)=>{a.d(t,{A:()=>r,_:()=>l});a(403517),a(875472),a(76509),a(863754);var s=()=>a(16456),n=()=>a(394591),o=()=>a(577040);class i extends(()=>a(129044))().default{getInitialState(){return{pageNum:1,pageSize:10,timeRange:{},actors:[],actions:[],sortOrder:n().K7.CreatedNewest}}}const r=new i;function l(e){const{timeRange:t,actors:a,actions:i,sortOrder:r}=e,l=new URLSearchParams;return t.starting&&l.append("starting",`${s().C6.toUnixMs(t.starting)}`),t.ending&&l.append("ending",`${s().C6.toUnixMs(t.ending)}`),(null==a?void 0:a.length)>0&&l.append("actors",a.map(o().Ht).join(",")),(null==i?void 0:i.length)>0&&l.append("actions",i.join(",")),l.append("sort",`${r||n().K7.CreatedNewest}`),l.toString()}},619493:(e,t,a)=>{a.d(t,{Ay:()=>x,CL:()=>b,bL:()=>v});var s=a(242343),n=()=>a(237385),o=()=>a(716605),i=()=>a(851774),r=()=>a(653998),l=()=>a(236339),d=()=>a(719485),c=()=>a(535906),u=()=>a(273520),g=()=>a(158918),m=()=>a(493264),p=()=>a(294821),h=()=>a(978669),f=a(163643);const x=function(e){let{schema:t,sort:a,disabled:n,onChange:o,index:i,collectionViewType:r,collectionContextStore:l}=e;const d=t[a.property];return d?(0,f.jsxs)(s.Fragment,{children:[(0,f.jsx)(S,{disabled:n,schema:t,sort:a,onChange:o,index:i,collectionViewType:r,collectionContextStore:l,propertySchema:d}),(0,f.jsx)(y,{sort:a,index:i,onChange:o,collectionViewType:r,collectionContextStore:l,disabled:n})]}):null},v={ascending:(0,f.jsx)(r().sA,{defaultMessage:"Ascending",id:"collectionSortMenuRow.sortDirectionSelectMenu.ascending"}),descending:(0,f.jsx)(r().sA,{defaultMessage:"Descending",id:"collectionSortMenuRow.sortDirectionSelectMenu.descending"})},b=(0,r().YK)({menuTitle:{id:"collectionSortMenuRow.sortDirectionSelectMenu.title",defaultMessage:"Sort"},emptyPlaceholder:{id:"collectionSortMenuRow.sortDirectionSelectMenu.placeholder",defaultMessage:"Empty"}});function y(e){let{sort:t,index:a,onChange:s,collectionViewType:o,collectionContextStore:u,disabled:m}=e;const h=(0,n().v3)(),x=(0,r().tz)(),y=t.direction,S={menuTitle:x.formatMessage(b.menuTitle),items:[...i().FU],getKey:e=>e,selectedItem:y,disabled:m,onSelect:e=>{const n={...t,direction:e};s(a,n),u?(0,l().X)({environment:h,action:"set_sort_direction",sort_direction:e,collectionContextStore:u}):o&&(0,d().D)(h,{view_type:o,action:"set_sort_direction"})},renderItem:e=>(0,f.jsx)(c().A,{title:v[e.value],...e}),renderOrigin:e=>(0,f.jsx)(p().A,{...e,placeholder:x.formatMessage(b.emptyPlaceholder),title:y&&v[y],disabled:m,desktopStyle:{opacity:1}})};return(0,f.jsx)(g().A,{...S,mobileActionSheet:!0},"direction")}function S(e){let{propertySchema:t,disabled:a,schema:s,sort:i,onChange:r,index:c,collectionViewType:g,collectionContextStore:p}=e;const x=(0,n().v3)(),{device:v}=x;return(0,f.jsx)(u().Ay,{popupType:v.isMobile?u().z7.SlideUp:u().z7.Popup,renderOrigin:e=>(0,f.jsx)(h().A,{...e,propertySchema:t,disabled:a,textWrapperStyle:{opacity:1}}),render:e=>(0,f.jsx)(m().A,{isRelationProperty:!1,schema:s,onAccept:e=>function(e,t,a,s,n,o,i){s(n,{...a,property:e}),i?(0,l().X)({environment:t,action:"set_sort_property",collectionContextStore:i}):o&&(0,d().D)(t,{view_type:o,action:"set_sort_property"})}(e,x,i,r,c,g,p),onClose:e.close,allowProperty:o().oH}),disabled:a})}},625880:(e,t,a)=>{a.d(t,{z:()=>r});a(242343);var s=()=>a(174114),n=()=>a(653998),o=()=>a(88271),i=a(163643);function r(e){const t=(0,s().IS)((()=>({container:{paddingBlock:4}})),[]);return(0,i.jsx)(o().A,{title:e.hideTitle?void 0:(0,i.jsx)(n().sA,{id:"inviteUserModal.searchDropdown.selectPersonTitle",defaultMessage:"Select a person"}),style:t.container,...e})}},631472:(e,t,a)=>{a.d(t,{D:()=>l});a(403517);var s=a(242343),n=()=>a(174114),o=()=>a(209684),i=()=>a(701270),r=a(163643);function l(e){let{breadcrumbs:t,headerRight:a,children:l}=e;const d=(0,n().IS)((e=>({container:{margin:"0 auto"},top:{padding:"14px 16px",border:0,borderBottom:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,backgroundColor:e.contentBackground,zIndex:10},breadcrumb:{display:"flex",justifyContent:"flex-start",width:"fit-content",alignItems:"center",gap:8},content:{padding:"14px 16px"}})),[]);return(0,r.jsxs)("div",{style:d.container,children:[(0,r.jsxs)("div",{style:d.top,children:[(0,r.jsx)("div",{style:d.breadcrumb,children:t.map(((e,t)=>{let a;return 0!==t&&(a=(0,r.jsx)(i().D,{styleName:"Body-14px/Regular",colorName:"quaternary",as:"span",children:"/"})),(0,r.jsxs)(s.Fragment,{children:[a,(0,r.jsx)(o().p,{onClick:e.onClick,isGray:Boolean(e.onClick),disabled:!e.onClick,children:e.message})]},`breadcrumb-${t}`)}))}),a]}),(0,r.jsx)("div",{style:d.content,children:l})]})}},633965:(e,t,a)=>{a.d(t,{N:()=>M});var s=a(242343),n=()=>a(237385),o=()=>a(174114),i=()=>a(413851),r=()=>a(854285),l=()=>a(653998),d=()=>a(91472),c=()=>a(927685),u=()=>a(392608),g=()=>a(529305),m=()=>a(539048),p=()=>a(611824),h=()=>a(396218),f=(a(403517),()=>a(155342)),x=()=>a(209684),v=()=>a(701270),b=()=>a(103151),y=()=>a(204024),S=a(163643);function j(e){const t=(0,o().IS)((e=>({labelContainer:{display:"inline-flex",alignItems:"center",marginBottom:8},container:{position:"relative",width:"100%"},textBelowInput:{marginTop:6},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:14,width:14},inputContainer:{display:"flex",alignItems:"center",gap:8},radioOption:{display:"flex",alignItems:"center"}})),[]);return(0,S.jsxs)("div",{style:t.container,children:[(0,S.jsxs)("div",{style:t.labelContainer,children:[(0,S.jsx)(v().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:e.labelMessage}),e.helpMessage&&(0,S.jsx)(b().A,{renderTooltip:()=>e.helpMessage,render:e=>(0,S.jsx)("span",{...e,children:(0,f().questionMarkCircleIcon)(t.helpIcon)})})]}),(0,S.jsx)("div",{style:t.inputContainer,children:e.items.map((a=>(0,S.jsxs)(x().p,{style:t.radioOption,onClick:a.onClick,children:[(0,S.jsx)(y().A,{isSelected:e.selectedItem===a.value}),(0,S.jsx)(v().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:a.label})]},a.id)))}),e.secondaryMessage?(0,S.jsx)(v().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:t.textBelowInput,children:e.secondaryMessage}):null]})}var w=()=>a(729632),A=function(e){return e.MetadataUrl="metadataUrl",e.MetadataXml="metadataXml",e}(A||{});function M(e){let{saveButtonText:t,samlConfig:a,loading:f,onSave:x,onDismiss:v,headerByline:b}=e;const y=(0,n().v3)(),M=(0,l().tz)(),[I,T]=(0,s.useState)(null!=a&&a.idpMetadata?A.MetadataXml:A.MetadataUrl),[k,_]=(0,s.useState)(null==a?void 0:a.idpMetadataUrl),[z,D]=(0,s.useState)(null==a?void 0:a.idpMetadata),[P,N]=(0,s.useState)(void 0),[R,B]=(0,s.useState)(void 0),E=(0,o().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},byline:{paddingInline:32},container:{width:h().J2,display:"flex",flexDirection:"column",gap:h().gA,overflowY:"auto"}})),[]),L=a?(0,r().zW)(null==a?void 0:a.id,c().A.domainBaseUrl):null,O=(0,r().Hw)(c().A.domainBaseUrl),U=(0,s.useCallback)((async e=>{if(!e)return;const t=await d().R.clipboardActions.load();t.copyString({environment:y,stringValue:e,copiedMessage:t.clipboardMessages.copiedLinkToClipboard})}),[y]),F=[{id:"metadataUrl",value:A.MetadataUrl,label:"URL",onClick:()=>T(A.MetadataUrl)},{id:"metadataXml",value:A.MetadataXml,label:"Metadata XML",onClick:()=>T(A.MetadataXml)}];async function H(){switch(I){case A.MetadataUrl:return void("valid"===(0,r().vU)(k??"").type?await x({metadataUrl:k}):N((0,r().vU)(k??"")));case A.MetadataXml:return void("valid"===(0,r().$W)(z??"").type?await x({metadataXml:z}):B((0,r().$W)(z??"")))}}return(0,S.jsx)(m().s,{isOpen:!0,onDismiss:v,areaConstraint:{width:{type:"fixed",length:h().NF}},render:e=>{let{sizeRange:a}=e;return(0,S.jsx)(g().tf,{sizeRange:a,header:(0,S.jsx)(h().rQ,{icon:(0,i().g)(E.icon),title:(0,S.jsx)(l().sA,{id:"organization.general.saml.settings.configure.modal.title",defaultMessage:"Set up SAML SSO"}),byline:(0,S.jsx)("div",{style:E.byline,children:b||(0,S.jsx)(l().sA,{id:"organization.general.saml.settings.configure.modal.byline",defaultMessage:"Allow organization members to log into Notion through your identity provider (IDP). <guidelink>Learn more</guidelink>",values:{guidelink:e=>(0,S.jsx)(p().A,{hoverColor:"blue",href:(0,u().xS)("guides.samlSettings"),external:!0,children:e})}})})}),footer:(0,S.jsx)(h().jl,{primaryText:t??(0,S.jsx)(l().sA,{id:"organization.general.saml.settings.configure.modal.primaryAction",defaultMessage:"Save"}),primaryAction:H,primaryDisabled:f,secondaryText:(0,S.jsx)(l().sA,{id:"organization.general.saml.settings.configure.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:v}),children:(0,S.jsxs)("div",{style:E.container,children:[L?(0,S.jsx)(w().p,{disabled:!0,onCopyClick:()=>U(L),value:L,placeholder:"https://notion.so/sso/saml/...",labelMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.urlInput.label",defaultMessage:"Assertion Consumer Service (ACS) URL"}),secondaryMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.urlInput.secondary",defaultMessage:"Add this URL to your IDP’s SAML SSO configuration"})}):null,O?(0,S.jsx)(w().p,{disabled:!0,onCopyClick:()=>U(O),value:O,placeholder:"https://notion.so/sso/saml/",labelMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.entityIdInput.label",defaultMessage:"SAML SSO Entity ID"})}):null,(0,S.jsx)(j,{items:F,selectedItem:I,labelMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.label",defaultMessage:"Setup method"})}),I===A.MetadataUrl?(0,S.jsx)(w().p,{value:k,onChange:e=>_(e.target.value),onBlur:()=>N((0,r().vU)(k??"")),placeholder:"https://...",labelMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.url.value.label",defaultMessage:"URL"}),secondaryMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.url.value.secondary",defaultMessage:"Paste the URL from your IDP"}),errorMessage:P?C(P,M):void 0}):I===A.MetadataXml?(0,S.jsx)(w().p,{multiline:!0,value:z,onChange:e=>D(e.target.value),onBlur:()=>B((0,r().$W)(z??"")),placeholder:'<md:EntityDescriptor entityID="...',labelMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.xml.value.label",defaultMessage:"Metadata XML"}),secondaryMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.xml.value.secondary",defaultMessage:"Paste the XML from your IDP"}),errorMessage:R?C(R,M):void 0}):null]})})}})}function C(e,t){if("valid"!==e.type)switch(e.reason){case"empty":return t.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.value.error.empty",defaultMessage:"You cannot leave this field empty"});case"signed_request":return t.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.value.error.signedRequest",defaultMessage:"Requests cannot be signed"})}}},635616:(e,t,a)=>{a.r(t),a.d(t,{arrowInCircleUpIcon:()=>o,iconDefinition:()=>n});a(242343);var s=a(163643);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M13.042 9.554a.625.625 0 0 1-.884 0l-1.533-1.533v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 0 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"}),(0,s.jsx)("path",{d:"M17.625 10a7.625 7.625 0 1 1-15.25 0 7.625 7.625 0 0 1 15.25 0M10 16.375a6.375 6.375 0 1 0 0-12.75 6.375 6.375 0 0 0 0 12.75"})]})},o=(0,a(680369).wt)("arrowInCircleUp",n)},651873:(e,t,a)=>{a.r(t),a.d(t,{AccessLevelSection:()=>J,SidebarCreateTeamModal:()=>se,TeamDescriptionRow:()=>G,TeamIconAndNameRow:()=>Q});a(403517);var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(174114),r=()=>a(83544),l=()=>a(81322),d=()=>a(972076),c=()=>a(653998),u=()=>a(975392),g=()=>a(76394),m=()=>a(31448),p=()=>a(539174),h=()=>a(126451),f=()=>a(59175),x=()=>a(655830),v=()=>a(966789),b=()=>a(922172),y=()=>a(35462),S=()=>a(482570),j=()=>a(412084),w=()=>a(477784),A=()=>a(548694),M=()=>a(904697),C=()=>a(611948),I=()=>a(485966),T=()=>a(413871),k=()=>a(734225),_=()=>a(898055),z=()=>a(628854),D=()=>a(951540),P=()=>a(810526),N=()=>a(863969),R=()=>a(764227),B=()=>a(127776),E=()=>a(732566),L=a(163643);function O(){const e=(0,n().v3)(),{currentSpaceStore:t,spaceViewStore:a}=(0,o().K8)((()=>({currentSpaceStore:I().default.state.currentSpaceStore,spaceViewStore:I().default.state.currentSpaceViewStore})),[]),r=(0,N().O)(),l=(0,_().l)({spaceId:r}),d=(0,o().O$)(C().A),m=(0,M().useShouldShowZeroTeamsExperience)(l),p=function(){const e=(0,o().K8)((()=>R().El()&&!C().A.state.isDefault),[]),t=C().o.Team,a=C().o.Members;return e?[t,a]:[t]}(),{screen:h,pageNumber:f,teamId:x}=d,v=""===d.name,b=(0,i().IS)((e=>({box:{justifyContent:"space-between",alignItems:"center",display:"flex",width:"100%",paddingTop:22},button:{marginLeft:8},learnMoreLink:{overflow:"hidden"}})),[]),y=(0,s.useCallback)(((a,s)=>{t&&function(e){let{pageOrder:t,pageNumber:a,teamId:s,currentSpaceStore:n,environment:o,from:i}=e;const r=a+1;if(r<=t.length)C().A.update((e=>({...e,loading:!1,screen:t[r-1],pageNumber:r})));else if(s){const e=T().h4.createChildStore(n,{table:"team",id:s,spaceId:n.id});z().L0({environment:o,teamStore:e,shouldScroll:!0}),z().lJ({environment:o,from:i,teamStore:e})}}({pageOrder:p,pageNumber:f,teamId:s||x,currentSpaceStore:t,environment:e,from:a})}),[t,e,f,p,x]),S=u().sg((async()=>{if(!t||!a)return;let s=x;switch(h){case C().o.Team:s=await async function(e){var t;let{spaceStore:a,environment:s,shouldShowZeroTeamsExperience:n,sidebarCreateTeamModalStoreState:o}=e;const{name:i,description:r,icon:l,flowId:d,accessLevel:c,isDefault:u}=o,g=await(0,P().d$)({environment:s,spaceStore:a,teamName:i});if(!g)return;let m;C().A.update((e=>({...e,loading:!0}))),m=n?await B().oH({environment:s,name:i,description:r,icon:l,flowId:d,trackCreateTeamComplete:!0}):await B().gj({environment:s,name:i,description:r,icon:l,accessLevel:c,isDefault:u,flowId:d,createTeamHome:!0});if(!m)return;const p=null===(t=m)||void 0===t?void 0:t.id;return C().A.update((e=>({...e,teamId:p}))),p}({spaceStore:t,environment:e,shouldShowZeroTeamsExperience:m,sidebarCreateTeamModalStoreState:d});break;case C().o.Members:break;default:(0,g().HB)(h)}s?y("success",s):C().A.update((e=>({...e,loading:!1})))}),1e3,{leading:!0,trailing:!1}),j=(0,s.useCallback)(S,[S]);return(0,L.jsxs)("div",{style:b.box,children:[(0,L.jsx)(E().A,{containerStyle:b.learnMoreLink,helpCenterLocation:"bestPractices",analyticsFrom:"teams_learn_more_sidebar_create_team_modal"}),(0,L.jsx)("div",{style:{display:"inline-flex"},children:(0,L.jsx)(D().A,{size:"lg",onClick:j,disabled:v,style:b.button,children:(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.footer.createTeam",defaultMessage:"Create teamspace"})})})]})}var U=()=>a(590344),F=()=>a(801008),H=()=>a(424339);const V={userSelect:"none",WebkitUserSelect:"none",position:"relative",padding:"22px 26px"},W={createTeamContainer:{...V,width:480},addMembersContainer:{...V,width:500},full:{width:"100%"}},q=(0,c().YK)({teamNamePlaceholder:{id:"sidebarCreateTeamModal.teamScreen.namePlaceholder",defaultMessage:"Acme Labs"},teamDescriptionPlaceholder:{id:"sidebarCreateTeamModal.teamScreen.descriptionPlaceholder",defaultMessage:"Details about your teamspace"}});function G(e){let{hasMarginTop:t=!0}=e;const a=(0,o().K8)((()=>C().A.state.description),[]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(j().A,{hasMarginTop:t,children:(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamScreen.teamDescriptionLabel",defaultMessage:"Description"})}),(0,L.jsx)(f().A,{value:a,placeholder:w().A.formatMessage(q.teamDescriptionPlaceholder),textarea:!0,onChange:e=>{C().A.update((t=>({...t,description:e.target.value})))}})]})}function K(e){return(0,L.jsx)("div",{id:e.titleAriaId,style:{fontSize:18,fontWeight:m().Wy.semibold},children:(()=>{switch(e.screen){case C().o.Team:return(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamTitle.label",defaultMessage:"Create a new teamspace"});case C().o.Members:return(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.membersTitle.label",defaultMessage:"Add people"});default:(0,g().HB)(e.screen)}})()})}function Y(e){const t=(0,n().v3)(),{screen:a,teamId:i}=(0,o().K8)((()=>{const{screen:e,teamId:t}=C().A.state;return{screen:e,teamId:t}}),[]),r=(0,s.useCallback)(((e,a)=>{z().lJ({environment:t,from:a,teamStore:e})}),[t]);switch(a){case C().o.Team:return(0,L.jsx)(X,{titleAriaId:e.titleAriaId,descriptionAriaId:e.descriptionAriaId,parentSpaceStore:e.parentSpaceStore});case C().o.Members:return i?(0,L.jsx)(ee,{teamId:i,onCompleted:e=>{r(e,"success")},onCanceled:e=>{r(e,"dismiss_button")}}):null;default:(0,g().HB)(a)}}function Q(e){let{parentSpaceStore:t,hasMarginTop:a=!0,inputStyles:s}=e;const n=(0,o().K8)((()=>t??I().default.state.currentSpaceStore),[t]),{icon:r,name:l}=(0,o().K8)((()=>{const{icon:e,name:t}=C().A.state;return{icon:e,name:t}}),[]),d=(0,i().IS)((e=>({container:{display:"inline-flex",width:"100%",verticalAlign:"middle"},icon:{marginRight:8,marginTop:1}})),[]);if(!n)return null;const u=r?{icon:r,pointer:{table:"space",id:n.id}}:void 0;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(j().A,{hasMarginTop:a,children:(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamScreen.teamNameLabel",defaultMessage:"Icon & name"})}),(0,L.jsxs)("div",{style:d.container,children:[(0,L.jsx)(H().x,{icon:u,size:26,style:d.icon,onChange:e=>{C().A.update((t=>({...t,icon:e})))},iconLoggingData:{recordTable:"team",source:"team_creation"},parentSpaceStore:t}),(0,L.jsx)(f().A,{style:s,value:l,placeholder:w().A.formatMessage(q.teamNamePlaceholder),onChange:e=>{C().A.update((t=>({...t,name:e.target.value})))},preventSafariAutofill:!0})]})]})}function $(e){const t=(0,i().IS)((()=>({description:{marginTop:3,marginBottom:26}})),[]);return(0,L.jsx)(y().A,{id:e.descriptionAriaId,isMultiline:!0,isSmall:!0,isSecondaryColor:!0,style:t.description,children:(()=>{switch(e.screen){case C().o.Team:return(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamDescription.label",defaultMessage:"Teamspaces are where your team organizes pages, permissions, and members"});case C().o.Members:return null;default:(0,g().HB)(e.screen)}})()})}function X(e){const t=(0,n().v3)(),{open:a,from:i,flowId:r}=(0,o().K8)((()=>{const e=C().A.state;return{open:e.open,from:e.open?e.from:void 0,flowId:e.flowId}}),[]);return(0,s.useEffect)((()=>{a&&i&&p().H8(t,{from:i,flowId:r})}),[]),(0,L.jsxs)("div",{style:W.createTeamContainer,children:[(0,L.jsx)(K,{titleAriaId:e.titleAriaId,screen:C().o.Team}),(0,L.jsx)($,{descriptionAriaId:e.descriptionAriaId,screen:C().o.Team}),(0,L.jsxs)("div",{style:W.full,children:[(0,L.jsx)(Q,{parentSpaceStore:e.parentSpaceStore}),(0,L.jsx)(G,{}),(0,L.jsx)(J,{parentSpaceStore:e.parentSpaceStore})]}),(0,L.jsx)(O,{})]})}function Z(){const e=(0,o().K8)((()=>C().A.state.loading),[]),t=(0,i().IS)((e=>({spinner:{width:"100%",height:"100%",backgroundColor:e.modalUnderlayBackground,position:"absolute",top:0,left:0}})),[]);return(0,L.jsx)(L.Fragment,{children:e&&(0,L.jsx)("div",{style:t.spinner,children:(0,L.jsx)(v().A,{style:{position:"absolute",top:"50%",left:"50%"}})})})}function J(e){let{parentSpaceStore:t,hasMarginTop:a=!0}=e;const s=(0,i().IS)((e=>({openAccessMessage:{fontSize:13,color:e.text.secondary,marginTop:20,lineHeight:1.4,display:"flex"},iconContainer:{marginRight:8},openTeamIcon:{width:24,fill:e.mediumIconColor}})),[]),r=(0,_().l)({spaceId:null==t?void 0:t.id}),l=(0,M().useShouldShowZeroTeamsExperience)(r),u=(0,n().v3)(),g=(0,o().K8)((()=>{const e=t??I().default.state.currentSpaceStore;return e?(0,A().GK)(u,e):"this workspace"}),[u,t]),{accessLevel:m,isDefault:p}=(0,o().K8)((()=>{const{accessLevel:e,isDefault:t}=C().A.state;return{accessLevel:e,isDefault:t}}),[]);return l?(0,L.jsxs)("div",{style:s.openAccessMessage,children:[(0,L.jsx)("div",{style:s.iconContainer,children:(0,d().X)(s.openTeamIcon)}),(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamScreen.openAccessLabel",defaultMessage:"Everyone at {spaceName} and new members will have access to this teamspace",values:{spaceName:g}})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(j().A,{hasMarginTop:a,children:(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamScreen.permissionsLabel",defaultMessage:"Permissions"})}),(0,L.jsx)(U().u,{currentAccessLevel:m,currentIsDefault:p,onChange:(e,t)=>{t?C().A.update((e=>({...e,accessLevel:"open",isDefault:t}))):C().A.update((a=>({...a,accessLevel:e,isDefault:t})))},parentSpaceStore:t})]})}function ee(e){const t=(0,n().v3)(),a=(0,o().uB)(void 0,k().A);(0,o().K8)((()=>{const{defaultInviteTargets:e,flowId:t}=C().A.state;a.setState({...a.state,flowId:t}),e&&a.setState({...a.state,isInviteTargetsEmpty:!1,inviteTargets:e})}),[a]);const s=(0,o().K8)((()=>e.parentSpaceStore??I().default.state.currentSpaceStore),[e.parentSpaceStore]);if(!s)return null;const i=T().h4.createChildStore(s,{table:"team",id:e.teamId,spaceId:s.id});return(0,L.jsx)("div",{style:W.full,children:(0,L.jsx)("div",{style:W.addMembersContainer,children:(0,L.jsx)(F().A,{store:i,permissionsInviteStore:a,isNewlyCreatedTeam:!0,onSubmitSuccessful:()=>{e.onCompleted(i),z().L0({environment:t,teamStore:i,shouldScroll:!0})},onDismiss:()=>{e.onCanceled(i)}})})})}const te=[r().A.images.avatars.avatar1Png,r().A.images.avatars.avatar2Png,r().A.images.avatars.avatar3Png];function ae(e){let{handleModalClose:t}=e;const a=(0,i().IS)((e=>({container:{borderTopLeftRadius:5,borderTopRightRadius:5,background:e.inputBackground,boxShadow:e.inputBoxShadow},header:{display:"flex",padding:14,fontWeight:m().Wy.medium},avatarGroup:{display:"flex",width:"100",marginLeft:4,alignSelf:"center"},avatar:{marginLeft:-4},message:{paddingLeft:14,paddingRight:14},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.text.secondary}})),[]);return(0,L.jsx)("div",{style:a.container,children:(0,L.jsxs)("div",{style:a.header,children:[(0,L.jsx)("div",{style:a.avatarGroup,children:te.map(((e,t)=>(0,L.jsx)(S().A,{avatarShouldShowShadow:!0,style:a.avatar,size:28,avatar:{avatarUrl:e}},t)))}),(0,L.jsx)(y().A,{style:a.message,isMultiline:!0,isSmall:!0,children:(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamScreen.firstTeamHeader",defaultMessage:"Create your first teamspace to start using Notion with your teammates"})}),(0,L.jsx)(h().A,{onClick:t,style:a.closeButton,hoveredStyle:a.closeButtonHover,children:(0,l().V)(a.closeButtonIcon)})]})})}function se(e){let{parentSpaceStore:t}=e;const a=(0,n().v3)(),r=(0,s.useId)(),d=(0,s.useId)(),c=(0,i().IS)((e=>({modal:{maxWidth:500,borderRadius:5,overflow:"visible"},closeButton:{position:"absolute",top:14,right:14,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:14,fill:e.text.secondary},wrapper:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none"}})),[]),g=(0,s.useCallback)((e=>{z().lJ({environment:a,from:e})}),[a]),{open:m,loading:p,screen:f}=(0,o().K8)((()=>{const{open:e,loading:t,screen:a}=C().A.state;return{open:e,loading:t,screen:a}}),[]),v=(0,_().l)({spaceId:null==t?void 0:t.id}),y=(0,M().useShouldShowZeroTeamsExperience)(v),S=(0,s.useRef)(y);return(0,s.useEffect)((()=>{p||(S.current=y&&f===C().o.Team)}),[p,f,y]),m?(0,L.jsx)(b().a,{ariaLabelledBy:r,ariaDescribedBy:d,open:m,innerStyle:c.modal,onDismiss:()=>{g("modal")},render:()=>{const{device:e}=a;return(0,L.jsxs)("div",{style:{height:"100%"},children:[!e.isMobile&&(S.current?(0,L.jsx)(ae,{handleModalClose:()=>{g("close_button")}}):(0,L.jsx)(h().A,{onClick:()=>{g("close_button")},style:c.closeButton,hoveredStyle:c.closeButtonHover,children:(0,l().V)(c.closeButtonIcon)})),(0,L.jsx)("div",{style:c.wrapper,children:(0,L.jsx)(x().A,{debugName:"SidebarCreateTeamModal",capture:!0,onBackspace:u().D_,onLeft:u().D_,onRight:u().D_,onSelectAll:u().D_,onRedo:u().D_,onUndo:u().D_,onCut:u().D_,onCopy:u().D_,onPaste:u().D_,onKeypress:u().D_,onDelete:u().D_,onTab:u().D_,children:(0,L.jsx)(Y,{titleAriaId:r,descriptionAriaId:d,parentSpaceStore:t})})}),(0,L.jsx)(Z,{})]})}}):null}},655656:(e,t,a)=>{a.d(t,{Ay:()=>dt,Fu:()=>vt,Sr:()=>mt});a(725707),a(491955),a(403517);var s=a(242343),n=()=>a(16791),o=()=>a(237385),i=()=>a(803290),r=()=>a(174114),l=()=>a(712437),d=()=>a(752903),c=()=>a(599932),u=()=>a(528762),g=()=>a(409211),m=()=>a(663571),p=()=>a(455831),h=()=>a(401574),f=()=>a(653998),x=()=>a(188877),v=()=>a(577860),b=()=>a(975392),y=()=>a(631474),S=()=>a(27989),j=()=>a(818369),w=()=>a(689510),A=()=>a(145046),M=()=>a(429318),C=()=>a(759625),I=()=>a(349947),T=()=>a(791107),k=()=>a(783759),_=()=>a(84543),z=()=>a(782150),D=()=>a(137476),P=()=>a(477784),N=()=>a(640979),R=()=>a(547851),B=()=>a(392608),E=()=>a(548694),L=()=>a(863969),O=()=>a(167532),U=()=>a(162028),F=()=>a(466321),H=()=>a(485966),V=()=>a(836331),W=()=>a(300481),q=()=>a(413871),G=()=>a(593774),K=()=>a(330358),Y=()=>a(44971),Q=()=>a(24281),$=()=>a(111826),X=()=>a(159448),Z=()=>a(133926),J=()=>a(305043),ee=()=>a(205830),te=()=>a(81322),ae=()=>a(870122),se=()=>a(809811),ne=()=>a(209684),oe=()=>a(286270),ie=()=>a(884373),re=()=>a(204435),le=()=>a(356813),de=()=>a(59175),ce=()=>a(701270),ue=()=>a(951540),ge=()=>a(754313),me=()=>a(629457),pe=a(163643);const he=(0,f().YK)({closeModalAriaLabel:{id:"requestMembershipCustomizationUrlButton.closeModalAriaLabel",defaultMessage:"Close request membership customization modal"}});function fe(e){const t=(0,o().v3)(),{spaceStore:a,isOpen:n,onDismiss:i}=e,[l,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),g=(0,s.useCallback)((e=>""===e||(0,se().AY)(e)),[]);(0,s.useEffect)((()=>{d(a.getSettings().request_membership_customization_redirect_url||"")}),[a]);const m=(0,r().IS)((e=>({modal:{maxWidth:500,paddingTop:20,fontSize:14,borderRadius:10},cancelButton:{position:"absolute",top:"10px",right:"10px"},title:{margin:"10px 0"},errorText:{color:e.errorText,fontSize:12},button:{padding:"6px 12px"},icon:{width:36,height:36,color:e.text.secondary},header:{padding:"0px 20px",maxWidth:300}})),[]),p=(0,s.useCallback)((async e=>{await j().callApi({eventName:"updateSpaceTrustedDomainSettings",environment:t,data:{spaceId:a.id,newRequestMembershipCustomizationRedirectUrl:e}})}),[t,a]);return(0,pe.jsx)(ge().A,{innerStyle:m.modal,isOpen:n,onDismiss:i,render:()=>(0,pe.jsxs)(re().VP,{alignItems:"center",children:[(0,pe.jsx)(le().A,{icon:te().V,onClick:i,style:m.cancelButton,ariaLabel:P().A.formatMessage(he.closeModalAriaLabel)}),(0,pe.jsx)(me().A,{large:!0,style:m.header,children:(0,pe.jsxs)(re().VP,{alignItems:"center",children:[(0,pe.jsx)("div",{style:{...m.icon},children:(0,ae().globeIcon)()}),(0,pe.jsx)(ce().D,{styleName:"Heading-17px/Semibold",colorName:"primary",customStyles:m.title,children:(0,pe.jsx)(f().sA,{id:"requestMembershipCustomizationUrlButton.title",defaultMessage:"Customize request access link"})}),(0,pe.jsx)(ce().D,{styleName:"Body-14px/Regular",colorName:"secondary",customStyles:{textAlign:"center"},children:(0,pe.jsx)(f().sA,{id:"requestMembershipCustomizationUrlButton.byline",defaultMessage:"Customize the destination when users request to join workspace"})})]})}),(0,pe.jsxs)(re().VP,{alignItems:"start",gap:4,marginTop:24,paddingLeft:20,paddingRight:20,children:[(0,pe.jsx)(ce().D,{styleName:"Body-12px/Medium",colorName:"secondary",customStyles:{marginBottom:6},children:(0,pe.jsx)(f().sA,{id:"requestMembershipCustomizationUrlButton.input.label",defaultMessage:"Custom URL"})}),(0,pe.jsx)(de().A,{type:"text",value:l,onChange:e=>{const t=e.target.value;d(t),u(!g(t))},focusInitial:!0}),c?(0,pe.jsx)("div",{style:{...m.errorText},children:(0,pe.jsx)(f().sA,{id:"requestMembershipCustomizationUrlButton.invalidUrl",defaultMessage:"Invalid URL"})}):null,(0,pe.jsx)(ce().D,{styleName:"Body-12px/Regular",colorName:"secondary",customStyles:{marginTop:6,textAlign:"start",marginBottom:14},children:(0,pe.jsx)(f().sA,{id:"requestMembershipCustomizationUrlButton.input.hint",defaultMessage:"Users will be redirected to this URL when they request to join workspace."})})]}),(0,pe.jsx)(ie().A,{size:20}),(0,pe.jsxs)(re().fI,{justifyContent:"flex-end",gap:12,paddingLeft:20,paddingRight:20,paddingBottom:12,width:"100%",children:[(0,pe.jsx)(oe().E,{style:m.button,onClick:i,children:(0,pe.jsx)(f().sA,{defaultMessage:"Cancel",id:"requestMembershipCustomizationUrlButton.cancel.label"})}),(0,pe.jsx)(ue().A,{style:m.button,onClick:async()=>{await p(l),i()},disabled:!g(l),children:(0,pe.jsx)(f().sA,{defaultMessage:"Save action",id:"requestMembershipCustomizationUrlButton.save.label"})})]})]})})}function xe(e){const{spaceStore:t}=e,[a,n]=(0,s.useState)(!1);return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(ne().p,{isBlue:!0,style:{marginRight:"16px"},onClick:()=>n(!0),children:(0,pe.jsx)(f().sA,{defaultMessage:"Customize",id:"requestMembershipCustomizationUrlButton.customizeAction.label"})}),(0,pe.jsx)(fe,{spaceStore:t,isOpen:a,onDismiss:()=>n(!1)})]})}var ve=()=>a(537311),be=()=>a(35462),ye=()=>a(231628),Se=()=>a(535906),je=()=>a(935091),we=()=>a(858023),Ae=()=>a(88271);const Me=function(e){const t=(0,r().DP)(),n=e.store,l=(0,i().K8)((()=>null==n?void 0:n.state.modalOpen),[n]),d=(0,r().IS)((e=>({input:{margin:12,boxShadow:e.inputBoxShadow,borderRadius:4,fontSize:12,maxWidth:326,marginRight:"auto"},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]),c=(0,s.useCallback)((()=>{b(""),n.setState({...n.state,loading:!1,modalOpen:!1})}),[n]),{spaceBasicSettingsStore:u,spaceStore:g,trustedDomainNumMembers:m}=e,p=(0,o().v3)(),{device:h}=p,[v,b]=(0,s.useState)(""),y=(0,i().K8)((()=>(null==u?void 0:u.state.emailDomains)??[]),[u]),S=(0,i().K8)((()=>vt({subscriptionData:J().subscriptionDataStoreInstance.state,spaceStore:g,emailDomainsToExclude:[...y,...m]})),[g,y,m]),j=(0,f().tz)(),w=(0,s.useCallback)((e=>{b(e.target.value)}),[]);return(0,pe.jsx)(a(922172).a,{open:l,preventHideChildrenWhileOpening:!0,onDismiss:c,render:()=>{const s=v.trim(),n=(0,pe.jsx)(f().sA,{id:"trustedDomainSettings.trustedEmailDomainsSection.emailDomainsDropdown.placeholder",defaultMessage:"Choose an email domain"}),o=(0,pe.jsx)(f().sA,{id:"trustedDomainSettings.trustedEmailDomainsSection.emailDomainsDropdown.placeholderNoResults",defaultMessage:"Type an email domain of a member of this workspace"}),i=(0,x().Ay)(s,S,(e=>e)).map(((t,a)=>({key:a,render:e=>(0,pe.jsx)(Se().A,{...e,title:t}),action:()=>{b(""),e.addTrustedDomain(t),c()}})));let r;return r=h.isMobile?{menuType:N().gu.ActionSheet}:{menuType:N().gu.Popup,width:"100%"},(0,pe.jsx)(je().A,{...r,children:(0,pe.jsxs)("div",{style:{background:t.popoverBackground,width:350,borderRadius:2},children:[(0,pe.jsx)(de().A,{placeholder:j.formatMessage({defaultMessage:"Search domains...",id:"manageTrustedDomains.searchFilter.placeholder"}),style:d.input,left:(0,a(668657).q)(d.searchIcon),value:v,onChange:w,format:de().C.Small,showClearButton:!0}),(0,pe.jsx)(we().Ay,{style:{padding:14,margin:"0px -12px"},type:we().Oh.Vertical,initialFocus:i.length>0?0:void 0,sections:[{key:0,render:e=>(0,pe.jsx)(Ae().A,{...e,disableDesktopPadding:!0,title:i.length>0?n:o}),items:i}]})]})})}})};var Ce=()=>a(76394),Ie=()=>a(501578);const Te=(0,pe.jsx)(f().sA,{id:"manageTrustedDomainsTable.joinSpaceCell.clickToJoin",defaultMessage:"Click to join workspace"}),ke=(0,pe.jsx)(f().sA,{id:"manageTrustedDomainsTable.joinSpaceCell.requestToJoin",defaultMessage:"Request to join workspace"}),_e=(0,pe.jsx)(f().sA,{id:"manageTrustedDomainsTable.joinSpaceCell.disabled",defaultMessage:"Disabled"});function ze(e){let{data:t}=e;const a=(0,r().IS)((e=>({text:{color:e.text.primary}})),[]);return(0,pe.jsx)(Ie().j,{style:a.text,children:t.emailDomain})}function De(e){let{data:t}=e;return(0,pe.jsx)("div",{children:Pe(t.joinSpaceMethod)})}function Pe(e){return"click_to_join"===e?Te:"request_to_join"===e?ke:"disabled"===e?_e:void(0,Ce().HB)(e)}function Ne(e){let{data:t}=e;return(0,pe.jsx)(Ie().j,{children:(0,pe.jsx)(f().sA,{id:"manageTrustedDomainsTable.numMembersCell",defaultMessage:"{numMembers, plural, one {{numMembers} member} other {{numMembers} members}}",values:{numMembers:t.numMembers}})})}const Re=[{id:"emailDomainColumn",headerTitle:(0,pe.jsx)(f().sA,{id:"manageTrustedDomainsTable.columnTitle.emailDomain",defaultMessage:"Email Domain"}),renderCell:e=>(0,pe.jsx)(ze,{data:e}),widthData:{width:10},sortable:!1},{id:"numMembersColumn",headerTitle:(0,pe.jsx)(f().sA,{id:"manageTrustedDomainsTable.columnTitle.numMembers",defaultMessage:"Members"}),renderCell:e=>(0,pe.jsx)(Ne,{data:e}),widthData:{minWidth:10,widthPercent:20},sortable:!1},{id:"joinSpaceMethodColumn",headerTitle:(0,pe.jsx)(f().sA,{id:"manageTrustedDomainsTable.columnTitle.joinSpaceMethod",defaultMessage:"Join Workspace"}),renderCell:e=>(0,pe.jsx)(De,{data:e}),widthData:{minWidth:10,widthPercent:40},sortable:!1}];function Be(e){let{addTrustedDomainStore:t,spaceStore:a,spaceBasicSettingsStore:s,trustedDomainNumMembers:n,trustedDomainStores:l}=e;const d=(0,ye().A)(),c=(0,r().IS)((e=>{const t=(0,ve().rC)({columnRenderInfo:Re,theme:e,containerMarginTop:0});return{...t,container:{...t.container,marginBottom:24}}}),[]),u=(0,r().IS)((e=>({noTrustedDomainsLabel:{marginTop:15,marginBottom:30,textAlign:"center"}})),[]),g=(0,o().v3)(),m=(0,i().K8)((()=>{if(!l)return[];const e=new Map;for(const t of n)e.set(t.trustedDomain.email_domain,t.numMembers);return b().oE(l.filter((e=>e.getDomainLinkSharingEnabled())).map((t=>{const a=t.getModel();if(!a||!t.canRead()||!t.isReady())return;const s=e.get(a.getEmailDomain())??0;return{id:a.id,emailDomain:a.getEmailDomain(),numMembers:s,joinSpaceMethod:a.getJoinSpaceMethod(),domainLinkSharingEnabled:a.getDomainLinkSharingEnabled(),isClickable:!1,onJoinSpaceMethodChange:e=>{let{joinSpaceMethod:a}=e;return(0,ee().BS)({store:t,environment:g,joinSpaceMethod:a})},onRemoveTrustedDomain:()=>(0,ee().Hf)({store:t,environment:g})}})))}),[n,l,g]),p=Re.map((e=>({...e,headerStyle:d.tableHeader}))),h=(0,i().K8)((()=>b().oE(l.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())))),[l]);return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(Me,{store:t,spaceStore:a,spaceBasicSettingsStore:s,trustedDomainNumMembers:h,addTrustedDomain:function(e){(0,ee().NZ)({environment:g,trustedEmailDomain:e,trustedDomainStores:l,spaceStore:a,spaceBasicSettingsStore:s})}}),(0,pe.jsx)(ve().WE,{columnRenderInfo:p,rows:m,renderNoRowsComponent:()=>(0,pe.jsx)(Ee,{style:u.noTrustedDomainsLabel,numDomains:m.length}),styles:c,showRowBorders:!0})]})}function Ee(e){let{style:t,numDomains:a}=e;return a>0?null:(0,pe.jsx)(be().A,{isSmall:!0,style:t,children:(0,pe.jsx)(f().sA,{id:"manageTrustedDomainsTable.emptyManageTrustedDomainsTableDisclaimer.noTrustedDomainsExist",defaultMessage:"Could not find any email domains."})})}class Le extends(()=>a(129044))().default{getInitialState(){return{modalOpen:!1,loading:!1,trustedDomain:void 0}}}const Oe=Le;var Ue=()=>a(847723),Fe=()=>a(286404),He=()=>a(443252),Ve=()=>a(28210),We=()=>a(431551),qe=()=>a(487966);const Ge=function(e){let{handleExportClick:t}=e;const n=(0,i().O$)(H().default),{currentSpaceStore:r}=n,l=(0,i().O$)(a(986392).A),d=(0,o().v3)();return(0,s.useEffect)((()=>{M().X({environment:d,spaceId:null==r?void 0:r.id})}),[null==r?void 0:r.id,d]),(0,pe.jsxs)(s.Fragment,{children:[(0,pe.jsx)(me().A,{children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.exportContentSection.title",defaultMessage:"Export content"})}),(0,pe.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,pe.jsx)(Fe().A,{disabled:Boolean(l.count),size:"lg",onClick:t,children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.exportContentSection.exportButton.label",defaultMessage:"Export all workspace content"})}),l.count?(0,pe.jsxs)(a(610271).Ye,{gap:4,children:[(0,pe.jsx)(a(966789).A,{}),(0,pe.jsxs)(be().A,{isSmall:!0,children:[(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.exportContentSection.exportInProgress",defaultMessage:"Export in progress"}),l.exportedPageCount?(0,pe.jsx)(pe.Fragment,{children:` (${l.exportedPageCount} pages exported)`}):(0,pe.jsx)(pe.Fragment,{})]})]}):(0,pe.jsx)(pe.Fragment,{})]}),(0,pe.jsx)("div",{style:{height:12}}),(0,pe.jsx)(qe().A,{title:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.exportContentSection.helpButton.caption",defaultMessage:"Learn about exporting workspaces."}),href:(0,B().xS)("guides.exportWorkspace"),analyticsFrom:"space_settings"})]})};var Ke=()=>a(611824),Ye=()=>a(877199),Qe=()=>a(90760),$e=()=>a(304372),Xe=()=>a(761566),Ze=()=>a(136583);function Je(e){let{spaceStore:t,organizationOverrides:a}=e;const n=(0,o().v3)(),{isMobile:i}=n.device,l=(0,$e().CR)({spaceStore:t}),d=(0,$e().tU)({spaceStore:t}),c=(0,r().IS)((()=>({settingsItem:{paddingBottom:24}})),[]);if(!l&&!d)return null;const u=Boolean(a.disable_people_hover_card),g=Boolean(a.disable_people_directory);return(0,pe.jsxs)(s.Fragment,{children:[(0,pe.jsx)(me().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.general.peopleSection.title",defaultMessage:"People"})}),d?(0,pe.jsx)("div",{style:c.settingsItem,children:(0,pe.jsx)(Xe().V,{spaceStore:t,isLocked:g,isMobile:i})}):null,l?(0,pe.jsx)("div",{style:c.settingsItem,children:(0,pe.jsx)(Ze().O,{spaceStore:t,isLocked:u,isMobile:i})}):null]})}var et=()=>a(809785),tt=()=>a(732863);function at(){return(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.workspaceNameSection.nameInput.caption",defaultMessage:"You can use your organization or company name. Keep it simple."})}const st=(0,f().YK)({nameInputPlaceholder:{id:"spaceBasicSettings.nameInput.placeholder",defaultMessage:"e.g. company name"},allowedEmailDomainsInputPlaceholder:{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.placeholder",defaultMessage:"Type an email domain…"},activateHIPAAButton:{id:"spaceBasicSettings.hipaaCompliance.activateButton.label",defaultMessage:"Activate"},deactivateHIPAAButton:{id:"spaceBasicSettings.hipaaCompliance.deactivateButton.label",defaultMessage:"Deactivate"}});function nt(e){const{spaceStore:t,organizationOverrides:n,billingData:l}=e,d=(0,o().v3)(),{canAdminSpaceStore:c,spaceId:u}=(0,i().K8)((()=>({canAdminSpaceStore:t.canAdmin(),spaceId:t.id})),[t]),g=(0,i().K8)((()=>{var e;return null===(e=H().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),m=(0,i().uB)(e.spaceBasicSettingsStore,a(137552).A),p=(0,i().uB)(e.securitySettingsStore,a(190230).A),h=(0,i().K8)((()=>(0,E().IL)(t)),[t]),x=(0,Z().P9)({name:"hipaa_compliance",spaceId:u,userId:g});(0,a(269280).l)((()=>{const e=m.getValueForSpace(t),a=p.getValueForSpace(t);e&&m.setState(e),a&&p.setState(a)}));const v=(0,a(622286).X)("notion_ai_workspace_settings"),S=(0,i().K8)((()=>!v&&(0,Ue().LR)({spaceStore:t,billingData:l})),[t,v,l]),j=(0,i().K8)((()=>!v&&(0,a(561775).Q)(d)),[d,v]),w=x&&c,[C]=(0,a(162901).Yb)((async()=>({trustedDomainNumMembers:c?await(0,ee().hs)({environment:d,spaceId:t.id,currentUserId:g}):[]})),[d,t,g,c]),I=(0,i().K8)((()=>{if("resolved"!==C.status)return[];const e=C.value.trustedDomainNumMembers.map((e=>e.trustedDomain.id));return(0,ee().J7)({trustedDomainIds:e,spaceStore:t})}),[t,C]),T=(0,i().K8)((()=>b().oE(I.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())))),[I]),_=(0,i().K8)((()=>$().vl(d)),[d]),z=(0,i().K8)((()=>c&&!t.getDisableExport()),[c,t]),D=(0,a(153642).V)()??1,P=(0,r().IS)((()=>({dangerZoneContainer:{display:"flex",flexWrap:"wrap",gap:"16px 12px"},gap:{height:12}})),[]),N=jt();return(0,pe.jsxs)(a(309461).Ay,{controlRow:c&&(0,pe.jsx)(St,{spaceStore:t,spaceBasicSettingsStore:m,securitySettingsStore:p}),controlRowPaddingTopBottom:14,children:[c&&(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(gt,{}),(0,pe.jsx)(ot,{spaceStore:t,spaceBasicSettingsStore:m}),(0,pe.jsx)(it,{spaceStore:t,spaceBasicSettingsStore:m})]}),(j||S||w)&&(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(ut,{}),j&&(0,pe.jsx)("div",{style:N.settingsItem,children:(0,pe.jsx)(Ue().aV,{billingData:l,spaceStore:t})}),S&&(0,pe.jsx)("div",{style:N.settingsItem,children:(0,pe.jsx)(Ue().Iu,{securitySettingsStore:p})}),w&&(0,pe.jsx)(ht,{spaceStore:t,securitySettingsStore:p,spaceBasicSettingsStore:m})]}),(0,pe.jsx)(ct,{}),h&&(0,pe.jsx)("div",{style:N.settingsItem,children:(0,pe.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.guestLimitedAccessMessage",defaultMessage:"You are currently a guest in this workspace. Ask an admin to add you as a member in order to see other pages."})})}),c&&_&&(0,pe.jsxs)(s.Fragment,{children:[(0,pe.jsxs)("div",{style:N.settingsItem,children:[(0,pe.jsx)(me().A,{children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.title",defaultMessage:"Allowed email domains"})}),(0,pe.jsx)(xt,{spaceStore:t,spaceBasicSettingsStore:m,trustedEmailDomains:T}),(0,pe.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:{marginTop:4,marginBottom:4},children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.caption",defaultMessage:"Anyone with email addresses at these domains can automatically join your workspace."})})]}),(0,pe.jsx)(bt,{spaceBasicSettingsStore:m,spaceStore:t,trustedDomainsState:C,trustedDomainStores:I})]}),z||c?(0,pe.jsx)(me().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.export.subtitle",defaultMessage:"Export"})}):void 0,z&&(0,pe.jsx)("div",{style:N.settingsItem,children:(0,pe.jsx)(Ge,{handleExportClick:()=>function(e){const{currentSpaceStore:t}=H().default.state;t&&M().Ss({environment:e,root:{table:"space",id:t.id,spaceId:t.id},isCollectionViewExportTypeSupported:!0})}(d)})}),c&&(0,pe.jsx)(lt,{}),c&&(0,pe.jsx)(rt,{spaceStore:t,spaceBasicSettingsStore:m,organizationOverrides:n}),(0,pe.jsx)(Je,{spaceStore:t,organizationOverrides:n}),(0,pe.jsx)(me().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.dangerousSettingsSection.title",defaultMessage:"Danger zone"})}),(0,pe.jsxs)("div",{style:P.dangerZoneContainer,children:[(D>1||h)&&(0,pe.jsx)(Fe().A,{size:"lg",onClick:()=>function(e,t){const{currentUserSettingsStore:a}=H().default.state;a&&A().ui({message:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.prompt",defaultMessage:"Are you sure you want to leave this workspace?"}),showCancel:!0,keepFocus:!0,items:[{label:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.leaveButton.label",defaultMessage:"Leave"}),color:"red",onAccept:async()=>{await k().ev({environment:t,spaceId:e.id,userSettingsStore:a})&&(y().dp(t),K().A.setState({...K().A.state,open:!1}))}}]})}(t,d),children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.dangerousSettingsSection.leaveWorkspaceButton.label",defaultMessage:"Leave workspace"})}),c&&(0,pe.jsx)(yt,{spaceStore:e.spaceStore})]}),c&&(0,pe.jsxs)(s.Fragment,{children:[(0,pe.jsx)("div",{style:P.gap}),(0,pe.jsx)(qe().A,{title:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceHelpButton.caption",defaultMessage:"Learn about deleting workspaces."}),href:(0,B().xS)("guides.deleteWorkspace"),analyticsFrom:"space_settings"})]})]})}function ot(e){let{spaceStore:t,spaceBasicSettingsStore:a}=e;const n=(0,i().K8)((()=>a.state.name),[a]),o=(0,s.useCallback)((e=>{a.setState({...a.state,name:e.target.value})}),[a]),l=(0,r().IS)((()=>({label:{marginTop:4}})),[]),d=jt();return(0,pe.jsxs)("div",{style:d.settingsItem,children:[(0,pe.jsx)(me().A,{children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.workspaceNameSection.title",defaultMessage:"Name"})}),(0,pe.jsx)(de().A,{value:n,placeholder:P().A.formatMessage(st.nameInputPlaceholder),readOnly:!1,onChange:o,maxlength:u().zX}),(0,pe.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:l.label,children:(0,pe.jsx)(at,{})})]})}function it(e){let{spaceStore:t,spaceBasicSettingsStore:a}=e;const n=(0,o().v3)(),l=(0,i().K8)((()=>(0,E().c2)(n,t)),[n,t]),d=(0,i().K8)((()=>a.state.name),[a]),c=(0,i().K8)((()=>({recordTable:t.table,source:"workspace_settings"})),[t]),u=(0,s.useCallback)((e=>{_().createAndCommit({userAction:"SpaceBasicSettings.handleRecordIconChange",environment:n,canUndo:!0,perform:a=>{C().KY({store:t.getIconStore(),value:e,transaction:a})}})}),[n,t]),g=(0,r().IS)((e=>({iconContainer:{width:72,height:72,border:`1px solid ${e.regularDividerColor}`,borderRadius:6,display:"flex",justifyContent:"center",alignItems:"center"},label:{marginTop:8}})),[]),m=jt();return(0,pe.jsxs)("div",{style:m.settingsItem,children:[(0,pe.jsx)(me().A,{children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.workspaceIconSection.title",defaultMessage:"Icon"})}),(0,pe.jsx)("div",{style:g.iconContainer,children:(0,pe.jsx)(Ve().B,{bucket:"public",disabled:!1,icon:l,isEmptyPage:!1,title:d,size:64,iconLoggingData:c,onChange:u})}),(0,pe.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:g.label,children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.workspaceIconSection.caption",defaultMessage:"Upload an image or pick an emoji. It will show up in your sidebar and notifications."})})]})}function rt(e){let{spaceStore:t,spaceBasicSettingsStore:a,organizationOverrides:n}=e;const l=(0,o().v3)(),{isMobile:d}=l.device,c=(0,i().K8)((()=>t.getSettings().disable_page_analytics),[t]),u=Boolean(n.disable_page_analytics),g=(0,i().K8)((()=>a.state.name),[a]),m=(0,s.useCallback)((()=>{if(u)return;const e=!c;_().createAndCommit({userAction:"SpaceBasicSettings.analyticsSettings.onSelectOption",environment:l,canUndo:!0,perform:a=>{C().zv({store:t,data:{settings:{...t.getSettings(),disable_page_analytics:e}},transaction:a})}}),D().vd(l,e?"page_analytics_workspace_opt_out":"page_analytics_workspace_opt_in")}),[c,l,u,t]),p=(0,r().IS)((()=>({toggleContainer:{display:"flex",gap:12,flexDirection:"column"}})),[]),h=jt();return(0,pe.jsxs)(s.Fragment,{children:[(0,pe.jsx)(me().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.analytics.title",defaultMessage:"Analytics"})}),(0,pe.jsxs)("div",{style:{...p.toggleContainer,...h.settingsItem},children:[(0,pe.jsx)(Qe().A,{isMobile:d,title:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.analytics.settings.title",defaultMessage:"Save and display page view analytics"}),caption:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.analytics.settings.description",defaultMessage:"People with edit or full access will be able to see how many views a page has. If this is turned off, page views will not be stored for all pages in {workspaceName}.",values:{workspaceName:g}}),type:"toggle",isOn:!c,isLocked:u,lockedTooltip:(0,R().C)(),onToggle:m}),(0,pe.jsx)(qe().A,{title:(0,pe.jsx)(f().sA,{defaultMessage:"Learn about workspace analytics.",id:"spaceBasicSettings.workspaceAnalytics.helpButton.caption"}),href:(0,B().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq"})]})]})}function lt(){const e=(0,o().v3)(),t=(0,f().tz)(),a=(0,L().O)(),n=(0,i().K8)((()=>{var t;return null===(t=e.currentUser)||void 0===t?void 0:t.id}),[e]),l=(0,Z()._X)({name:"export_members",spaceId:a,userId:n}),d=(0,O().J)(),c=(0,i().K8)((()=>d&&"available"===(null==l?void 0:l.type)),[d,l]),u=(0,s.useCallback)((()=>{!function(e,t){const{currentSpaceStore:a}=H().default.state,s=J().subscriptionDataStoreInstance.state;a&&s&&"subscribed_admin"===s.type&&M().IG(t,{spaceStore:a,subscriptionData:s,intl:e})}(t,e)}),[e,t]),g=(0,r().IS)((()=>({header:{display:"flex",alignItems:"center"},title:{marginRight:8},desktop:{marginTop:-1},button:{display:"flex"},gap:{height:12}})),[]),m=jt();return(0,pe.jsxs)("div",{style:m.settingsItem,children:[(0,pe.jsxs)(me().A,{style:g.header,children:[(0,pe.jsx)("span",{style:g.title,children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.exportMembersSection.title",defaultMessage:"Export members"})}),!c&&(null==l?void 0:l.upsell)&&(0,pe.jsx)(Q().B,{upsell:l.upsell,analyticsName:"space_export_members",desktopStyle:g.desktop})]}),(0,pe.jsx)("div",{style:g.button,children:(0,pe.jsx)(Fe().A,{size:"lg",disabled:!c,onClick:u,disabledFeedback:!0,children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.exportMembersSection.exportAsCSVButton.label",defaultMessage:"Export members as CSV"})})}),(0,pe.jsx)("div",{style:g.gap}),(0,pe.jsx)(qe().A,{title:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.exportMembersSection.helpButton.caption",defaultMessage:"Learn about exporting members."}),href:(0,B().xS)("guides.exportMembers"),analyticsFrom:"space_settings"})]})}const dt=s.memo(nt);function ct(){return(0,pe.jsx)(me().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.public.subtitle",defaultMessage:"Public settings"})})}function ut(){return(0,pe.jsx)(me().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.feature.subtitle",defaultMessage:"Feature settings"})})}function gt(){return(0,pe.jsx)(me().A,{large:!0,divider:"full",children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.title",defaultMessage:"Workspace settings"})})}async function mt(e,t,a,s,o){const{currentUserSettingsStore:i}=H().default.state;if(!i)return;const r=(0,E().GK)(a,e)||t.formatMessage({defaultMessage:"Untitled workspace",id:"spaceBasicSettings.deleteWorkspace.untitledWorkspace.placeholder"}),l=(0,v().vL)(n().locale)?(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.prompt",defaultMessage:"This action cannot be undone. This will permanently delete the workspace, including all pages and files. Please type the name of the workspace to confirm."}):(0,pe.jsx)(pe.Fragment,{children:(0,pe.jsx)(Ye().A,{translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente el espacio de trabajo, incluidas todas las páginas y archivos. Por favor escriba el nombre del espacio de trabajo para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит рабочее пространство, включая все страницы и файлы. Пожалуйста, введите название рабочей области для подтверждения.",zh:"此操作无法撤消。 这将永久删除工作区，包括所有页面和文件。 请输入要确认的工作空间的名称。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird der Arbeitsbereich einschließlich aller Seiten und Dateien dauerhaft gelöscht. Bitte geben Sie den Namen des Arbeitsbereichs zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement l'espace de travail, y compris toutes les pages et tous les fichiers. Veuillez saisir le nom de l'espace de travail pour confirmer.",ja:"この操作を元に戻すことはできません。 これにより、すべてのページとファイルを含むワークスペースが完全に削除されます。 確認するワークスペースの名前を入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'area di lavoro, incluse tutte le pagine e i file. Digita il nome dell'area di lavoro per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente o espaço de trabalho, incluindo todas as páginas e arquivos. Por favor, digite o nome do espaço de trabalho para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt de werkruimte permanent verwijderd, inclusief alle pagina's en bestanden. Typ de naam van de werkruimte om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie obszaru roboczego, w tym wszystkich stron i plików. Wpisz nazwę obszaru roboczego, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort arbetsytan permanent, inklusive alla sidor och filer. Vänligen skriv in arbetsplatsens namn för att bekräfta.",uk:"Цю дію не можна скасувати. Це дозволить остаточно видалити робочу область, включаючи всі сторінки та файли. Введіть назву робочої області для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette arbeidsområdet, inkludert alle sider og filer. Vennligst skriv navnet på arbeidsområdet for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu, tüm sayfaları ve dosyaları içeren çalışma alanını kalıcı olarak siler. Lütfen onaylamak için çalışma alanının adını yazın.",cs:"Tuto akci nelze vrátit zpět. Tím se trvale odstraní pracovní prostor včetně všech stránek a souborů. Zadejte prosím název pracovního prostoru, který chcete potvrdit.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn không gian làm việc, bao gồm tất cả các trang và tệp. Vui lòng nhập tên của không gian làm việc để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette arbejdsområdet, inklusive alle sider og filer. Indtast navnet på arbejdsområdet for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a munkaterületet, beleértve az összes oldalt és fájlt. Kérjük, írja be a munkaterület nevét a megerősítéshez.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي ذلك إلى حذف مساحة العمل كليا ، بما يشمل جميع الصفحات والملفات. يرجى كتابة اسم مساحة العمل للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบพื้นที่ทำงานอย่างถาวรรวมถึงหน้าและไฟล์ทั้งหมด โปรดพิมพ์ชื่อของพื้นที่ทำงานเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את סביבת העבודה, כולל כל הדפים והקבצים. הקלד את שם מרחב העבודה כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa työtilan pysyvästi, mukaan lukien kaikki sivut ja tiedostot. Vahvista kirjoittamalla työtilan nimi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus ruang kerja, termasuk semua halaman dan file. Silakan ketik nama ruang kerja untuk mengonfirmasi."}})});await w().h({title:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.title",defaultMessage:"Delete this entire workspace permanently?"}),message:l,acceptLabel:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.deleteWorkspaceButton.label",defaultMessage:"Permanently delete workspace"}),requiredInputValue:r})&&(k().cN({environment:a,spaceId:e.id,onDelete:s,organizationId:o}),y().db(a),K().A.setState({...K().A.state,open:!1}))}function pt(){K().A.setState({...K().A.state,open:!1}),G().A.setState(G().A.getInitialState())}function ht(e){let{spaceStore:t,securitySettingsStore:a,spaceBasicSettingsStore:s}=e;const n=(0,r().IS)((()=>({title:{display:"flex",alignItems:"center",gap:8}})),[]),o=jt();return(0,pe.jsx)("div",{style:o.settingsItem,children:(0,pe.jsx)(Qe().A,{type:"custom",isMobile:!1,title:(0,pe.jsxs)("div",{style:n.title,children:[(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.hipaaCompliance.label",defaultMessage:"HIPAA Compliance"}),(0,pe.jsx)(qe().A,{href:(0,B().xS)("guides.hipaaCompliancy"),analyticsFrom:"space_settings"})]}),caption:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.hipaaCompliance.description",defaultMessage:"Store and process Protected Health Information (PHI) by enabling HIPAA compliance. By enabling HIPAA compliance, you are agreeing to Notion’s <inlinelink>Business Associate Agreement</inlinelink>",values:{inlinelink:e=>(0,pe.jsx)(Ke().A,{href:(0,B().xS)("guides.hipaaBAA"),external:!0,onClick:e=>e.stopPropagation(),children:e})}}),customButton:(0,pe.jsx)(ft,{spaceStore:t,securitySettingsStore:a})})})}function ft(e){let{spaceStore:t,securitySettingsStore:a}=e;const n=(0,o().v3)(),r=(0,i().K8)((()=>(0,E().Ar)(t)),[t]),[l,d]=s.useState(r),[c,u]=s.useState(!1),[g,m]=s.useState(!1),p=(0,s.useCallback)((()=>async function(e){let{securitySettingsStore:t,spaceStore:a,environment:s,isGoingToDisableHIPAACompliancy:n,openModal:o,closeModal:i}=e;i(),t.setState({...t.state,zeroRetentionEnabled:!t.state.zeroRetentionEnabled}),T().V(s,{spaceStore:a,securitySettingsState:t.state}),k().xu(s,a),o(),await j().callApi({eventName:"sendHIPAACompliancyUpdate",environment:s,data:{spaceId:a.id,isDisablingHIPAA:n}})}({securitySettingsStore:a,spaceStore:t,environment:n,isGoingToDisableHIPAACompliancy:l,openModal:()=>m(!0),closeModal:()=>u(!1)})),[n,a,t,l]);return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(U().YS,{isOpen:g,hasDisabledHIPAACompliancy:l,onClose:()=>m(!1)}),(0,pe.jsx)(U().TD,{isOpen:c,onClose:()=>u(!1),onConfirmDecision:p,isDisablingHIPAACompliancy:l}),(0,pe.jsx)(Fe().A,{size:"lg",onClick:()=>{u(!0),d(a.state.zeroRetentionEnabled)},children:(0,pe.jsx)(f().sA,{...r?st.deactivateHIPAAButton:st.activateHIPAAButton})})]})}function xt(e){let{spaceStore:t,spaceBasicSettingsStore:a,trustedEmailDomains:n}=e;const r=(0,o().v3)(),l=(0,f().tz)(),{device:c}=r,[u,g]=(0,s.useState)(""),m=(0,i().K8)((()=>a.state.emailDomains),[a]),p=(0,i().K8)((()=>t.canAdmin()),[t]),h=(0,i().O$)(J().subscriptionDataStoreInstance),v=(0,s.useCallback)((e=>{g(e.target.value)}),[]);return(0,pe.jsx)(He().Ay,{popupType:c.isMobile?F().n.SlideUp:F().n.Popup,sameWidthAsOrigin:!0,open:u.length>0,origin:(0,pe.jsx)(tt().A,{placeholder:l.formatMessage(st.allowedEmailDomainsInputPlaceholder),value:u,onChange:v,readOnly:!p,onRemoveLastToken:()=>{const e=m.slice(0,m.length-1);a.setState({...a.state,emailDomains:e})},tokens:m.map((e=>(0,pe.jsx)(et().A,{showRemoveButton:!0,isSingle:!1,format:d().NY.Medium,onClickRemove:()=>{const t=m.filter((t=>t!==e));a.setState({...a.state,emailDomains:t})},value:e},e)))}),render:()=>{const e=u.trim(),s=(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholder",defaultMessage:"Type an email domain…"}),o=(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholderNoResults",defaultMessage:"Type an email domain of a member of this workspace…"}),i=vt({subscriptionData:h,spaceStore:t,emailDomainsToExclude:[...m,...n]}),r=(0,x().Ay)(e,i,(e=>e)).map(((e,t)=>({key:t,render:t=>(0,pe.jsx)(Se().A,{...t,title:e}),action:()=>{const t=[...m,e];a.setState({...a.state,emailDomains:t}),g("")}})));let l;return l=c.isMobile?{menuType:N().gu.ActionSheet}:{menuType:N().gu.Popup,width:"100%"},(0,pe.jsx)(je().A,{...l,children:(0,pe.jsx)(we().Ay,{type:we().Oh.Vertical,initialFocus:r.length>0?0:void 0,sections:[{key:0,render:e=>(0,pe.jsx)(Ae().A,{...e,disableDesktopPadding:!0,title:r.length>0?s:o}),items:r}]})})},onDismiss:()=>{g("")}})}function vt(e){const{subscriptionData:t,spaceStore:a,emailDomainsToExclude:s}=e;return t?$().Ye(t).map((e=>{if(("unsubscribed_admin"===t.type||"unsubscribed_member"===t.type||"subscribed_admin"===t.type)&&t.joinedMemberIds.includes(e.userId)){const t=q().LU.createChildStore(a,{table:g().oo,id:e.userId}).getEmail();return t&&(0,c().zN)(t)}})).filter(((e,t,a)=>Boolean(e&&t===a.indexOf(e)&&!s.includes(e)))):[]}function bt(e){let{spaceStore:t,spaceBasicSettingsStore:a,trustedDomainsState:n,trustedDomainStores:r}=e;const l=(0,o().v3)(),{isMobile:d}=l.device,c=(0,i().uB)(void 0,Oe),u=(0,s.useCallback)((()=>{z().SI({environment:l,from:"trusted_domain_settings_section"})}),[l]),g=(0,i().K8)((()=>(0,p().OX)(t.getSubscriptionTier())),[t]),m=(0,i().K8)((()=>t.getName()),[t]),x=(0,i().K8)((()=>Boolean("request_to_join"===t.getSettings().join_space_method)),[t]),v=(0,i().K8)((()=>(0,h().ko)(t.getModel())),[t]),b=(0,i().K8)((()=>(0,h().Hm)(t.getModel())),[t]),y=(0,i().K8)((()=>V().default.checkGate({gateName:"domain_link_sharing_redesign_override",disableExposureLogging:!0})||"on"===V().default.getEligibleGroup({experimentId:"domain_link_sharing_redesign",defaultGroup:"control"})),[]),S=(0,s.useCallback)((async e=>{const{newDomainLinkSharingValue:a,newJoinSpaceMethod:s}=e;await j().callApi({eventName:"updateSpaceTrustedDomainSettings",environment:l,data:{spaceId:t.id,newDomainLinkSharingValue:a,newJoinSpaceMethod:s}})}),[l,t]),w=(0,s.useCallback)((async()=>{await S({newDomainLinkSharingValue:!b})}),[S,b]),A=(0,s.useCallback)((async()=>{const e=x?"click_to_join":"request_to_join";await S({newJoinSpaceMethod:e})}),[S,x]),M=(0,i().K8)((()=>t.getEmailDomains().length>0),[t]),C=jt();return"resolved"===n.status&&M&&v?y?(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)("div",{style:C.settingsItem,children:(0,pe.jsx)(Qe().A,{isMobile:d,disabled:!g,upsellOptions:{shouldUpsell:!g,subscriptionTier:"enterprise",analyticsName:"trusted_domain_item"},title:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.trustedDomainsSection.allowShareWithTrustedDomains.title",defaultMessage:"Enable organization-wide access for pages shared with this workspace"}),caption:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.trustedDomainsSection.allowShareWithTrustedDomains.description",defaultMessage:"Allow teammates with trusted email domains who aren’t workspace members to access pages shared with “Everyone at {spaceName}”",values:{spaceName:m}}),type:"toggle",isOn:b,onToggle:w})}),(0,pe.jsx)("div",{style:C.settingsItem,children:(0,pe.jsx)(Qe().A,{isMobile:d,disabled:!g,upsellOptions:{shouldUpsell:!g,subscriptionTier:"enterprise",analyticsName:"trusted_domain_item"},title:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.trustedDomainsSection.setJoinSpaceMethod.title",defaultMessage:"Teammates with trusted email domains can join"}),caption:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.trustedDomainsSection.setJoinSpaceMethod.description",defaultMessage:"Allow teammates with trusted email domains to join this workspace without requesting access"}),type:"custom",customButton:(0,pe.jsxs)(re().fI,{children:[x&&g&&(0,pe.jsx)(xe,{spaceStore:t}),(0,pe.jsx)(re().VP,{justifyContent:"center",children:(0,pe.jsx)(We().A,{on:!x,disabled:!g,onClick:A})})]}),disableSettingsItemClick:!0})})]}):(0,pe.jsxs)(s.Fragment,{children:[(0,pe.jsx)(Qe().A,{type:"custom",isMobile:!1,title:(0,pe.jsxs)(re().fI,{gap:8,children:[(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.trustedDomainLinkSharingSection.title",defaultMessage:"Share pages with anyone at your company"}),(0,pe.jsx)(qe().A,{href:(0,B().xS)("guides.guides"),analyticsFrom:"space_settings"})]}),caption:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.trustedDomainsSection.addTrustedDomain.caption",defaultMessage:"Members can share pages with anyone with these trusted email domains, even if they're not yet on Notion. Please message <supportLink>support</supportLink> if you need assistance.",values:{supportLink:e=>(0,pe.jsx)(Ke().A,{onClick:u,children:e})}}),customButton:(0,pe.jsx)(pe.Fragment,{})}),(0,pe.jsx)(re().fI,{marginTop:8,children:(0,pe.jsx)(Be,{addTrustedDomainStore:c,spaceStore:t,spaceBasicSettingsStore:a,trustedDomainNumMembers:n.value.trustedDomainNumMembers,trustedDomainStores:r})})]}):null}function yt(e){let{spaceStore:t}=e;const a=(0,o().v3)(),n=(0,f().tz)(),[r,d]=s.useState(!1),c=(0,i().K8)((()=>H().default.state.currentUserRootStore),[]),u=(0,i().K8)((()=>H().default.state.currentUserSettingsStore),[]),g=(0,X().lh)({spaceId:t.id}),p=(0,s.useCallback)((async()=>{c&&u&&(await I().sy({environment:a,inMemoryRecordCache:a.defaultRecordCache.inMemoryRecordCache,pointer:{table:m().GD,id:c.id},userId:a.currentUser.id}),k().t9({environment:a,userRootStore:c,ignoreSpaceId:t.id,userSettingsStore:u,pageVisitSource:l().y8.SwitchSpace}))}),[a,c,u,t.id]);return(0,pe.jsxs)(pe.Fragment,{children:[r?(0,pe.jsx)(Y().S4,{billingData:g,isOpen:r,onClose:()=>d(!1),onConfirmDelete:async()=>await mt(t,n,a,p),spaceStore:t}):null,(0,pe.jsx)(Fe().A,{size:"lg",color:"uiRed",onClick:async()=>await async function(e){const{environment:t,spaceStore:a,intl:s,showDowngradeModal:n,onDelete:o}=e,i=J().subscriptionDataStoreInstance.state,r=$().RJ(i);if((0,S().H)(t),r)return void n();await mt(a,s,t,o)}({environment:a,spaceStore:t,intl:n,showDowngradeModal:()=>d(!0),onDelete:p}),children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceButton.label",defaultMessage:"Delete entire workspace"})})]})}function St(e){let{spaceStore:t,spaceBasicSettingsStore:a,securitySettingsStore:n}=e;const i=(0,o().v3)(),r=(0,s.useCallback)((()=>async function(e,t,a,s){await k().Ef({environment:e,spaceStore:t,spaceBasicSettingsStore:a,securitySettingsStore:s}),G().A.setState(G().A.getInitialState()),K().A.setState({...K().A.state,open:!1}),W().A.resetData(e,{spaceId:t.id})}(i,t,a,n)),[i,t,a,n]);return(0,pe.jsxs)("div",{style:{display:"flex"},children:[(0,pe.jsx)(ue().A,{size:"lg",onClick:r,disabled:!1,children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.updateButton.label",defaultMessage:"Update"})}),(0,pe.jsx)(Fe().A,{size:"lg",style:{marginLeft:12},onClick:pt,children:(0,pe.jsx)(f().sA,{id:"spaceBasicSettings.cancelButton.label",defaultMessage:"Cancel"})})]})}function jt(){return(0,r().IS)((()=>({settingsItem:{paddingBottom:24}})),[])}},659490:(e,t,a)=>{a.d(t,{A:()=>n});a(403517),a(242343);var s=a(163643);const n=function(e){let{userStores:t,permissionGroups:n}=e;const o=(0,a(174114).IS)((()=>({container:{display:"flex",flexDirection:"column",gap:4}})),[]);return(0,s.jsxs)("div",{style:o.container,children:[t.map((e=>(0,s.jsx)(a(482570).A,{userStore:e,type:"avatar-name-email",size:a(953739).tR,avatarShouldShowShadow:!1,hasTooltip:!1,iconStyle:{fontSize:12}},e.id))),null==n?void 0:n.map((e=>(0,s.jsx)(a(709582).h,{permissionGroup:e,type:"avatar-name-count"},e.group.group_id)))]})}},684862:(e,t,a)=>{a.d(t,{$:()=>d,d:()=>l});a(403517);var s=a(242343),n=()=>a(162901),o=()=>a(190457),i=()=>a(23371),r=()=>a(195260);function l(e){const{visibleUsersForSpace:t,joinedUserIdsForSpace:a,loadVisibleUsersForSpace:o}=(0,s.useContext)(r().D),i=(0,s.useMemo)((()=>t[e]??[]),[t,e]),l=(0,s.useMemo)((()=>a[e]??[]),[a,e]),[d,c]=(0,s.useState)(!1);return(0,n().Yb)((async()=>{c(!0),await o(e),c(!1)}),[e,o]),{visibleUsers:i,joinedUserIds:l,loading:d}}function d(e){const{visibleUsersForSpace:t,loadVisibleUsersForSpace:a}=(0,s.useContext)(r().D),l=(0,s.useMemo)((()=>e.map((e=>e.id))),[e]),[d,c]=(0,s.useState)(!1);return(0,n().Yb)((async()=>{c(!0),await(0,i().lX)(l,o().O,(e=>a(e))),c(!1)}),[l,a]),{spaceUsers:t,loading:d}}},685008:(e,t,a)=>{a.d(t,{p:()=>w,l:()=>y});a(403517),a(242343);var s=()=>a(237385),n=()=>a(803290),o=()=>a(174114),i=()=>a(350638),r=()=>a(14931),l=()=>a(653998),d=()=>a(110975),c=()=>a(35462),u=()=>a(482570),g=()=>a(209684),m=()=>a(103151),p=()=>a(274347);function h(e){let{totalCount:t,shownCount:a}=e;const s=t-a;return s>0?s:0}var f=()=>a(59279),x=a(163643);const v=24,b=4;function y(e){let{userStores:t,isClickable:a,useSecondaryColorTitle:i,useIconsOnly:g,totalCount:f,customAvatarStyles:y}=e;const w=(0,l().tz)(),A=(0,s().v3)(),M=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingTop:8,paddingBottom:8},iconsWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},icons:{display:"flex",flexDirection:"row",alignItems:"center"},iconContainer:{marginRight:-v/4,display:"flex",alignItems:"center",justifyContent:"center"},avatar:{marginRight:4,...y},plusMore:{opacity:.5,marginLeft:4,display:"inline-block"},tooltip:{color:e.text.contrastPrimary,fontSize:12}})),[y]),C=t.slice(0,b),I=(0,n().K8)((()=>{if(C[0])return C.map((e=>{if(e)return e.computeWithRecordValues((t=>{let{getRecordValueAndSubscribe:a}=t;return a(e)}))}))}),[C]),T=I&&I[0],k=(0,x.jsxs)("div",{style:M.container,children:[(0,x.jsx)(u().A,{style:M.avatar,userValue:T,size:v}),(0,x.jsx)(l().sA,{id:"baseTable.usersCell.userName",defaultMessage:"{remainingCount, plural, =0 {<user>{firstUser}</user>} one {<user>{firstUser}</user><gray>+{remainingCount}</gray>} other {<user>{firstUser}</user><gray>+{remainingCount}</gray>}}",values:{firstUser:(0,r().c6)(w,T),remainingCount:h({totalCount:f||t.length,shownCount:1}),user:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,x.jsx)(c().A,{isSecondaryColor:i,children:t})},gray:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,x.jsx)(c().A,{style:M.plusMore,children:t})}}})]});let _=k;if(g){const e=h({totalCount:f||t.length,shownCount:C.length});_=(0,x.jsxs)("div",{style:M.iconsWrapper,children:[(0,x.jsx)("div",{style:M.icons,children:null==I?void 0:I.map(((e,t)=>(0,x.jsx)("div",{style:M.iconContainer,children:(0,x.jsx)(u().A,{userValue:e,size:v})},(null==e?void 0:e.id)||t)))}),e>0&&(0,x.jsx)(l().sA,{id:"baseTable.usersCell.remainingUsers",defaultMessage:"<gray>+{remainingCount}</gray>",values:{remainingCount:e,gray:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,x.jsx)(c().A,{style:{...M.plusMore,marginLeft:M.plusMore.marginLeft+-1*M.iconContainer.marginRight},children:t})}}})]})}if(!a)return(0,x.jsx)(m().A,{disableTooltip:t.length<=1,render:e=>(0,x.jsx)("div",{...e,children:_}),renderTooltip:()=>(0,x.jsx)(x.Fragment,{children:t.map(((e,t)=>(0,x.jsx)(c().A,{style:M.tooltip,children:(0,x.jsx)(j,{userStore:e})},e?e.id:t)))})});const z=t.map(((e,t)=>({key:null!=e&&e.id?null==e?void 0:e.id:t,render:t=>(0,x.jsx)(S,{userStore:e,...t}),action:()=>null!=e&&e.getEmail?d().f({environment:A,url:`mailto:${null==e?void 0:e.getEmail()}`}):void 0})));return(0,x.jsx)(p().ED,{hideDropdownIcon:!0,title:_,items:z,itemMaxWidth:380})}function S(e){let{userStore:t,...a}=e;const s=(0,n().K8)((()=>null==t?void 0:t.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:a}=e;return a(t)}))),[t]),r=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingBlock:8,marginInline:4},avatarContainer:{display:"flex",justifyContent:"center",alignItems:"center"},copyContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",opacity:.5},nameContainer:{marginLeft:8,marginRight:8},name:{fontSize:14,lineHeight:1.2,maxWidth:400},email:{fontSize:12,lineHeight:1.2,opacity:.5,maxWidth:400}})),[]);return(0,x.jsxs)(g().p,{style:r.container,...a,children:[(0,x.jsx)("div",{style:r.avatarContainer,children:(0,x.jsx)(u().A,{userValue:s,size:v})}),(0,x.jsxs)("div",{style:r.nameContainer,children:[(0,x.jsx)(c().A,{style:r.name,children:(0,x.jsx)(j,{userStore:t})}),s?(0,x.jsx)(c().A,{style:r.email,children:s.email}):null]}),(0,x.jsx)("div",{style:r.copyContainer,children:(0,i().F)({height:18,width:18})})]})}function j(e){const t=(0,l().tz)(),{userStore:a}=e,s=(0,n().K8)((()=>null==a?void 0:a.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:t}=e;return t(a)}))),[a]);return(0,x.jsx)(x.Fragment,{children:(0,r().c6)(t,s)})}function w(){const e=(0,o().IS)((()=>({icon:{borderRadius:"100%"},title:{width:"80%"}})),[]);return(0,x.jsx)(f().mf,{titleStyles:e.title,includeIcon:!0,iconStyles:e.icon})}},700896:(e,t,a)=>{a.d(t,{N:()=>l});var s=a(242343),n=()=>a(162901),o=()=>a(190457),i=()=>a(23371),r=()=>a(195260);function l(e){const{teamAggregateDataForSpace:t,loadTeamsForSpace:a}=(0,s.useContext)(r().D),[l,d]=(0,s.useState)(!1);return(0,n().Yb)((async()=>{d(!0),await(0,i().lX)(e,o().O,(e=>a(e))),d(!1)}),[e,a]),{teamAggregateDataForSpace:t,loading:l}}},703329:(e,t,a)=>{a.d(t,{A:()=>o});a(242343);var s=a(163643);function n(e){let{title:t,subtitle:n,on:o,onChange:i,disabled:r,style:l}=e;const d=(0,a(174114).IS)((()=>({container:{display:"flex",alignItems:"center",width:"100%"},title:{fontSize:14,marginRight:8,flexGrow:1}})),[]);return(0,s.jsxs)("div",{style:{...d.container,...l},children:[(0,s.jsxs)("div",{style:d.title,children:[t,(0,s.jsx)(a(35462).A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"95%"},children:n})]}),(0,s.jsx)(a(431551).A,{on:o,disabled:r,onClick:i})]})}n.defaultProps={disabled:!1,style:{}};const o=n},707004:(e,t,a)=>{a.d(t,{M:()=>r,l:()=>l});a(242343);var s=()=>a(678751),n=()=>a(653998),o=()=>a(266178),i=a(163643);function r(e){let{selectedMfaMethod:t,setSelectedMfaMethod:a}=e;return(0,i.jsx)(o().zr,{pillTitle:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.title",defaultMessage:"2-step verification method"}),pillIcon:s().K,selectedItem:t,setSelectedItem:a,items:l})}const l=[{key:"totp",value:"totp",title:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.totp",defaultMessage:"Authenticator"}),shortTitle:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.totp",defaultMessage:"Authenticator"}),caption:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.totp.caption",defaultMessage:"Users who have enabled 2-step verification through an authenticator app"}),wrapCaption:!0},{key:"sms",value:"sms",title:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.sms",defaultMessage:"Phone number"}),shortTitle:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.sms",defaultMessage:"Phone number"}),caption:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.sms.caption",defaultMessage:"Users who have enabled 2-step verification through their phone number"}),wrapCaption:!0},{key:"backup_code",value:"backup_code",title:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.backupCode",defaultMessage:"Backup code"}),shortTitle:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.backupCode",defaultMessage:"Backup code"}),caption:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.backup_code.caption",defaultMessage:"Users who have enabled 2-step verification with active backup codes."}),wrapCaption:!0}]},709582:(e,t,a)=>{a.d(t,{h:()=>g});a(242343);var s=()=>a(174114),n=()=>a(758989),o=()=>a(653998),i=()=>a(907721),r=()=>a(103151),l=()=>a(482570),d=()=>a(713542),c=()=>a(953739),u=a(163643);function g(e){let{permissionGroup:t,hasTooltip:a,type:g="avatar"}=e;const{group:m,memberCount:p}=t,h=m.name,f=m.space_id,x=m.icon,{tooltipTextStyle:v,tooltipAvatarContainer:b,tooltipContainer:y,tooltipUserInfoContainer:S}=(0,l().n)(),j=(0,s().IS)((e=>({iconContainer:{position:"relative"},iconBackground:{position:"absolute",top:0,bottom:0,left:0,right:0,background:e.contentBackground,zIndex:1,borderRadius:"100%"},icon:{position:"relative",zIndex:2,height:c().tR,width:c().tR,background:x&&(0,n().T8)(x)?(0,n().ez)({icon:x,mode:e.mode,useLightGrayColor:!1}):e.accentColors.gray[75]}})),[x]),w=e=>(0,u.jsxs)("div",{style:j.iconContainer,...e,children:[(0,u.jsx)(d().e,{icon:x,spaceId:f,size:c().Gz,containerStyles:j.icon}),(0,u.jsx)("div",{style:j.iconBackground})]}),A=e=>(0,u.jsxs)("div",{style:y,children:[(0,u.jsx)("div",{style:b,children:w()}),(0,u.jsxs)("div",{style:S,children:[h,!e&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("br",{}),(0,u.jsx)("span",{style:v,children:(0,u.jsx)(o().sA,{id:"organization.workspace.teamspaces.groupAvatar.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:p}})})]})]})]});return a?(0,u.jsx)(r().A,{renderTooltip:()=>A("avatar-name"===g),placement:i().W.Bottom,alignment:i().C.Start,render:e=>w(e)}):"avatar-name"===g||"avatar-name-count"===g?A("avatar-name"===g):(0,u.jsx)("div",{children:w()})}},710567:(e,t,a)=>{a.d(t,{E:()=>d});var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(16043),r=()=>a(413871),l=()=>a(379356);function d(e){let{organizationId:t}=e;const a=(0,n().v3)(),{organizationOwnerRecordCache:d}=(0,s.useContext)(l().N);return(0,o().K8)((()=>{if(t)return new(r().Vl)(a,{table:i().y7,id:t},{inMemoryRecordCache:d})}),[a,t,d])}},713542:(e,t,a)=>{a.d(t,{e:()=>l});a(242343);var s=()=>a(174114),n=()=>a(77654),o=()=>a(528762),i=()=>a(436599),r=a(163643);function l(e){const{icon:t,spaceId:a,size:l,containerStyles:d}=e,c=(0,s().IS)((e=>({icon:{fill:e.icon.secondary}})),[]);return t&&a?(0,r.jsx)(i().A,{iconSize:l,type:"circle",iconType:"recordIcon",icon:{icon:t,pointer:{table:o().NX,id:a}},containerStyle:{background:"transparent",...d}}):(0,r.jsx)(i().A,{iconSize:l,type:"circle",iconType:"function",iconFn:n().personCircleFillIcon,iconStyle:c.icon,containerStyle:{background:"transparent",...d}})}},715187:(e,t,a)=>{a.d(t,{t:()=>d});a(242343);var s=()=>a(174114),n=()=>a(222324),o=()=>a(653998),i=()=>a(31448),r=()=>a(286404),l=a(163643);function d(e){let{runNewSearch:t,error:a}=e;const d=(0,s().IS)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:28,height:28,color:e.redBadgeBackground,fill:"currentColor"},title:{margin:"8px auto",fontWeight:i().Wy.medium,fontSize:16},description:{fontWeight:i().Wy.regular,fontSize:14,lineHeight:1.3,color:e.text.tertiary,textAlign:"center",width:328,margin:"0 auto 16px"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:i().Tf.mono,fontSize:12,color:e.text.tertiary,padding:"18px 24px",margin:"0 auto 12px"},errorButton:{width:195,margin:"8px auto 0",textAlign:"center"}})),[]);return(0,l.jsxs)("div",{style:d.container,children:[(0,n().f)(d.headerIcon),(0,l.jsx)("h1",{style:d.title,children:(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.error.title",defaultMessage:"Something went wrong"})}),(0,l.jsx)("p",{style:d.description,children:(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.error.description",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})}),null,(0,l.jsx)(r().A,{size:"lg",style:d.errorButton,onClick:()=>t(!0),children:(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})})]})}},718696:(e,t,a)=>{a.d(t,{r:()=>Se});a(403517);var s=a(242343),n=()=>a(803290),o=()=>a(174114),i=()=>a(653998),r=()=>a(378219),l=()=>a(700734),d=()=>a(305043),c=()=>a(537311),u=()=>a(204435),g=()=>a(966789),m=()=>a(811132),p=()=>a(35462),h=()=>a(237385),f=()=>a(670481),x=()=>a(748267),v=()=>a(31448),b=()=>a(137476);var y=()=>a(110975),S=()=>a(13769),j=()=>a(392608),w=()=>a(209684),A=()=>a(951540),M=a(163643);function C(e){const t=(0,h().v3)(),a=(0,o().IS)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:36,height:36,color:e.text.tertiary,fill:"currentColor"},disclaimerTitle:{margin:"12px auto",fontWeight:v().Wy.medium,fontSize:16},disclaimer:{fontWeight:v().Wy.regular,fontSize:14,color:e.text.tertiary,textAlign:"center",width:432,margin:"0 auto 16px"},acknowledgeButton:{width:195,margin:"8px auto 0"},learnMoreButton:{width:195,margin:"8px auto 0",justifyContent:"center",color:e.text.tertiary},learnMoreButtonIcon:{width:12,height:12,marginRight:4}})),[]),n=(0,s.useCallback)((()=>{!function(e){b().vd(e,"admin_content_search_analytics_acknowledge_confirm")}(t),S().dK(t)}),[t]);return(0,M.jsxs)("div",{style:a.container,children:[(0,x().g)(a.headerIcon),(0,M.jsx)("h1",{style:a.disclaimerTitle,children:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimerTitle",defaultMessage:"Before using this feature"})}),(0,M.jsx)("p",{style:a.disclaimer,children:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimer",defaultMessage:"As a workspace owner, you can use content search to find pages that you don't have access to, including the private pages of other workspace members. Consult with your organization's legal department on how to use this feature. Actions taken here will be recorded in the audit log."})}),(0,M.jsx)(A().A,{style:a.acknowledgeButton,onClick:n,children:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.confirm",defaultMessage:"Acknowledge"})}),(0,M.jsxs)(w().p,{style:a.learnMoreButton,onClick:()=>{const e=(0,j().xS)("adminContentSearch");y().f({environment:t,url:e})},children:[(0,f().G)(a.learnMoreButtonIcon),(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.learnMore",defaultMessage:"Learn more"})]})]})}var I=()=>a(715187),T=()=>a(887508),k=()=>a(578355);function _(e){let{filters:t,setFilters:a}=e;const s=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{margin:"12px auto",fontWeight:v().Wy.medium,fontSize:16},description:{fontWeight:v().Wy.regular,fontSize:14,color:e.text.tertiary,textAlign:"center",maxWidth:386,margin:"0 auto 16px"},suggestion:{position:"relative",height:38,width:"100%",maxWidth:440,margin:"12px auto 0",justifyContent:"center",color:e.darkTextColor,boxShadow:e.shadow2XS},filterContainer:{margin:"0 8px",display:"flex",alignItems:"center",justifyContent:"center"},arrowIconContainer:{position:"absolute",right:12,transform:"rotate(180deg)"},arrowIcon:{width:18,height:18,opacity:.5,color:e.text.tertiary,fill:"currentColor"}})),[]);return(0,M.jsxs)("div",{style:s.container,children:[(0,M.jsx)("h1",{style:s.title,children:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.suggestions.title",defaultMessage:"Search pages in your workspace"})}),(0,M.jsx)("p",{style:s.description,children:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.suggestions.description",defaultMessage:"Use filters to find pages with specific sharing and permissions settings, such as:"})}),(0,M.jsxs)(w().p,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_externally"],teamIds:[]},{runSearchAfter:!0})},children:[(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,M.jsx)("div",{style:s.filterContainer,children:(0,M.jsx)(k().tE,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_externally"]})})}}),(0,M.jsx)("div",{style:s.arrowIconContainer,children:(0,T().v)(s.arrowIcon)})]}),(0,M.jsxs)(w().p,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_to_web"],teamIds:[]},{runSearchAfter:!0})},children:[(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,M.jsx)("div",{style:s.filterContainer,children:(0,M.jsx)(k().tE,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_to_web"]})})}}),(0,M.jsx)("div",{style:s.arrowIconContainer,children:(0,T().v)(s.arrowIcon)})]})]})}a(725707),a(491955);var z=()=>a(711361),D=()=>a(76394),P=()=>a(872856),N=()=>a(640979),R=()=>a(422340),B=()=>a(907721),E=()=>a(962373),L=()=>a(60020),O=()=>a(420401),U=()=>a(273520),F=()=>a(356813),H=()=>a(935091),V=()=>a(858023),W=()=>a(443252),q=()=>a(628685),G=()=>a(252811),K=()=>a(71781);function Y(e){const{pageStatus:t,blockStore:a,refreshSearchResult:s}=e;switch(t){case"alive":case"in_trash":return(0,M.jsx)(Q,{pageStatus:t,blockStore:a,refreshSearchResult:s});case"deleted_from_trash":return(0,M.jsx)($,{pageStatus:t,blockStore:a,getValidDeletedPermissions:e.getValidDeletedPermissions,refreshSearchResult:s});default:(0,D().HB)(t)}}function Q(e){let{blockStore:t,pageStatus:a,refreshSearchResult:o}=e;const r=(0,i().tz)(),l=(0,n().uB)(void 0,E().A),d=(0,h().v3)(),c=(0,n().uB)(void 0,O().A),u=(0,n().uB)(void 0,L().Ay),g=(0,K().o)(),[m,p]=(0,s.useState)(!1);(0,s.useEffect)((()=>{c.setState({...c.state,privatePageStore:t,changePermissionsEnabled:!0,loading:!1,error:void 0})}),[t,c]);const f=[(0,G().j9)({environment:d,pageStatus:a,popupStore:l,blockStore:t,handleOpenPermissionsMenu:()=>p(!0),onRestoreOrDeletePage:o,from:"adminContentSearch"}),(0,G().CT)({environment:d,pageStatus:a,popupStore:l,blockStore:t,onRestoreOrDeletePage:o,from:"adminContentSearch"})].filter(D().O9);return(0,M.jsx)(U().Ay,{popupType:W().nl.Popup,alignmentToOrigin:B().C.Start,placementToOrigin:B().W.Bottom,style:m?g.popupShareModal:g.popupMenu,render:()=>m?(0,M.jsx)(P().k,{store:t,sudoModeStore:c,inviteTargetsStore:u,location:"admin_content_search"}):(0,M.jsx)(H().A,{menuType:N().gu.Popup,width:248,children:(0,M.jsx)(V().Ay,{type:V().Oh.Vertical,initialFocus:void 0,sections:f})}),onClose:()=>{p(!1),R().Ay.reset()},buttonPopupStore:l,renderOrigin:e=>(0,M.jsx)(F().A,{ariaLabel:r.formatMessage({id:"pageCellActions.aliveOrInTrash.iconButton.ariaLabel",defaultMessage:"More actions for page"}),icon:z()._,...e})})}function $(e){let{blockStore:t,getValidDeletedPermissions:a,refreshSearchResult:n}=e;const o=(0,i().tz)(),r=(0,s.useCallback)((e=>(0,M.jsx)(F().A,{ariaLabel:o.formatMessage({id:"pageCellActions.deletedFromTrash.iconButton.ariaLabel",defaultMessage:"More actions for deleted from trash page"}),icon:z()._,...e})),[o]),l=(0,h().v3)();return(0,M.jsx)(q().V,{environment:l,renderPopupOrigin:r,blockStore:t,placementToOrigin:B().W.Bottom,includeNonRestoreActions:!0,getValidDeletedPermissions:a,onRestoreOrDeletePage:n,from:"adminContentSearch"})}var X=()=>a(297145),Z=()=>a(297513),J=()=>a(141666),ee=()=>a(695951),te=()=>a(103151);function ae(e){let{pageStatus:t,blockStore:s}=e;const r=(0,o().IS)((e=>({grayBadge:{width:"fit-content",whiteSpace:"nowrap",display:"flex",flexDirection:"row"},trashIcon:{marginRight:2,height:12,width:12}})),[]),{deleteFromTrashDelayMs:l,purgeDelayMs:d}=(0,n().K8)((()=>{const e=s.getSpaceStore();return{deleteFromTrashDelayMs:(0,X().XX)(null==e?void 0:e.getModel()),purgeDelayMs:(0,X().NA)(null==e?void 0:e.getModel())}}),[s]),c=(0,n().K8)((()=>{if("in_trash"===t)return(0,X().BT)(s.pointer,s.getRecordModel)}),[s,t]),u=(0,n().K8)((()=>{if("deleted_from_trash"===t)return(0,X().uZ)(s.pointer,s.getRecordModel)}),[s,t]),g=(0,a(212738).S6)();switch(t){case"alive":return null;case"in_trash":return Date.now()>=(0,X().vw)({movedToTrashTime:c,deleteFromTrashDelayMs:l,cdrrDeletionEnabledTimestamp:g})?(0,M.jsx)(se,{deleteFromTrashDelaySeconds:l/J().TD,purgeDelaySeconds:d/J().TD,pageStatus:t}):(0,M.jsx)(ee().A,{style:r.grayBadge,content:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{children:(0,a(52531).I)(r.trashIcon)}),(0,M.jsx)(i().sA,{id:"adminContentSearch.pageStatusBadge.trash",defaultMessage:"In Trash"})]})});case"deleted_from_trash":return Date.now()>=(u??X().mZ)+d?(0,M.jsx)(se,{deleteFromTrashDelaySeconds:l/J().TD,purgeDelaySeconds:d/J().TD,pageStatus:t}):(0,M.jsx)(ee().A,{style:r.grayBadge,content:(0,M.jsx)(i().sA,{id:"adminContentSearch.pageStatusBadge.retained",defaultMessage:"Retained"})});default:(0,D().HB)(t)}}function se(e){const{pageStatus:t,deleteFromTrashDelaySeconds:a,purgeDelaySeconds:s}=e,n=(0,i().tz)(),r=(0,o().IS)((e=>({redBadge:{color:e.text.uiRedPrimary,backgroundColor:e.fill.redPrimary,width:"fit-content",whiteSpace:"nowrap"},secondaryTooltip:{color:e.text.contrastSecondary}})),[]);return"in_trash"===t?(0,M.jsx)(te().A,{renderTooltip:()=>(0,M.jsx)(i().sA,{id:"adminContentSearch.pageStatusBadge.deletionPending.trash.tooltip",defaultMessage:"<primary>We are processing the deletion from Trash</primary><secondary>This page is past {duration} in Trash</secondary>",values:{primary:e=>(0,M.jsx)("div",{children:e}),secondary:e=>(0,M.jsx)("div",{style:r.secondaryTooltip,children:e}),duration:(0,Z().rN)(a,n)}}),placement:B().W.Bottom,render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(ee().A,{style:r.redBadge,content:(0,M.jsx)(i().sA,{id:"adminContentSearch.pageStatusBadge.trash.deletionPending",defaultMessage:"Deleted from Trash soon"})})})}):"deleted_from_trash"===t?(0,M.jsx)(te().A,{renderTooltip:()=>(0,M.jsx)(i().sA,{id:"adminContentSearch.pageStatusBadge.deletionPending.perm.tooltip",defaultMessage:"<primary>Will be permanently deleted soon </primary> <secondary>Retained pages are permanently deleted after {duration}</secondary>",values:{primary:e=>(0,M.jsx)("div",{children:e}),secondary:e=>(0,M.jsx)("div",{style:r.secondaryTooltip,children:e}),duration:(0,Z().rN)(s,n)}}),placement:B().W.Bottom,render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(ee().A,{style:r.redBadge,content:(0,M.jsx)(i().sA,{id:"adminContentSearch.pageStatusBadge.perm.deletionPending",defaultMessage:"Permanently deleted soon"})})})}):null}var ne=()=>a(997310);var oe=()=>a(59279);function ie(e){let{deletedFromTrashTime:t}=e;const a=function(){const e=(0,ne().r)();return(0,n().K8)((()=>{const t=null==e?void 0:e.getModel();return(0,X().NA)(t)}),[e])}();if((0,D().O9)(t)){const e=t+a;return e>Date.now()?(0,M.jsx)(m().d,{dateTs:e,omitTooltip:!0}):(0,M.jsx)(te().A,{render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(oe().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,M.jsx)(i().sA,{defaultMessage:"N/A",id:"adminContentSearchTab.pagesTable.deletedTimeCell.notAvailable"})})}),renderTooltip:()=>(0,M.jsx)(i().sA,{defaultMessage:"This page is in process of being permanently deleted",id:"adminContentSearchTab.pagesTable.deletedTimeCell.beingPurged.tooltip"})})}return(0,M.jsx)(oe().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,M.jsx)(i().sA,{defaultMessage:"N/A",id:"adminContentSearchTab.pagesTable.deletedTimeCell.notAvailable"})})}var re=()=>a(402633);const le={id:"page",headerTitle:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.page.name",defaultMessage:"Page"}),renderCell:e=>(0,M.jsx)(a(462125).oc,{blockStore:e.pageStore,rightIcon:(0,M.jsx)(Y,{blockStore:e.pageStore,pageStatus:e.pageStatus,getValidDeletedPermissions:e.filterDeletedPermissions,refreshSearchResult:e.refreshSearchResult}),inlineTitleContent:(0,M.jsx)(ae,{pageStatus:e.pageStatus,blockStore:e.pageStore})}),widthData:{width:320,maxWidth:320},sortable:!1},de={id:"location",headerTitle:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.location.name",defaultMessage:"Location"}),renderCell:e=>(0,M.jsx)(a(22422).E,{blockStore:e.pageStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},ce={id:"createdTime",headerTitle:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.createdTime.name",defaultMessage:"Created on"}),renderCell:e=>(0,M.jsx)(m().d,{dateTs:e.createdTime}),widthData:{width:140},sortable:!1},ue={id:"lastEditedTime",headerTitle:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.name",defaultMessage:"Last edited on"}),renderCell:e=>(0,M.jsx)(a(492455).Z,{lastEditedTime:e.lastEditedTime,lastEditedById:e.lastEditedById,deletedFromTrashTime:e.deletedFromTrashTime,movedToTrashTime:e.movedToTrashTime,pageStatus:e.pageStatus}),widthData:{width:140},sortable:!1},ge={id:"createdBy",headerTitle:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.createdBy.name",defaultMessage:"Created by"}),renderCell:e=>e.createdById?(0,M.jsx)(re().T,{blockStore:e.pageStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},me={id:"lastEditedBy",headerTitle:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.lastEditedBy.name",defaultMessage:"Last edited by"}),renderCell:e=>e.lastEditedById?(0,M.jsx)(re().T,{blockStore:e.pageStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1};function pe(e){let{blockStore:t}=e;const s=(0,n().O$)(a(485966).AppStoreCurrentSpaceStore);return s?(0,M.jsx)(a(22377).b,{blockStore:t,spaceStore:s}):null}const he={id:"audience",headerTitle:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.audience.name",defaultMessage:"Audience"}),renderCell:e=>(0,M.jsx)(pe,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},fe={id:"sharedWith",headerTitle:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWith.name",defaultMessage:"Shared with"}),renderCell:e=>(0,M.jsx)(a(436559).o,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},xe={id:"retainedUntil",headerTitle:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.retainedUntil.name",defaultMessage:"Retained until"}),renderCell:e=>(0,M.jsx)(ie,{deletedFromTrashTime:e.deletedFromTrashTime}),widthData:{width:140},sortable:!1},ve={id:"pageStatus",headerTitle:(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.pageStatus.name",defaultMessage:"Page status"}),renderCell:e=>(0,M.jsx)(a(152204).u,{pageStatus:e.pageStatus}),widthData:{width:140},sortable:!1},be=[le,de,he,fe,me,ue,ge,ce],ye=[le,de,ve,xe,he,fe,me,ue,ge,ce];function Se(e){let{loading:t,error:a,loadNextPage:m,hasNextPage:h,filters:f,setFilters:x,pageStores:v,showSuggestions:b,runNewSearch:y,hasUserConfirmedAcknowledgement:S,refreshSearchResult:j,shouldShowLoadMore:w}=e;const A=S&&!t&&!b,T=S&&!b,k=(0,n().O$)(d().subscriptionDataStoreInstance),z=(0,l().T)({subscriptionData:k}),D=(0,s.useMemo)((()=>f.pageStatus.includes("deleted_from_trash")||f.pageStatus.includes("in_trash")||0===f.pageStatus.length),[f.pageStatus]),P=D?ye:be,N=(0,n().K8)((()=>v.map((e=>{const t=D&&e.pathIsDead()?e.pathHasDeletedPermission()?"deleted_from_trash":"in_trash":"alive";return{id:e.id,isClickable:!1,pageStore:e,teamStore:(0,r().Uo)(e),createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),pageStatus:t,movedToTrashTime:e.getMovedToTrashTime(),deletedFromTrashTime:"deleted_from_trash"===t?e.getDeletedFromTrashAt():void 0,filterDeletedPermissions:"deleted_from_trash"===t?z:void 0,refreshSearchResult:j}}))),[v,D,z,j]),R=(0,o().IS)((e=>(0,c().rC)({columnRenderInfo:P,theme:e,containerMarginTop:0})),[P]);return a?(0,M.jsx)(I().t,{runNewSearch:y,error:a}):S?b&&0===N.length?(0,M.jsx)(_,{filters:f,setFilters:x}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(c().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:w?void 0:400,columnRenderInfo:P,rows:N,loadMoreMethod:T?w?{type:"button",onLoadMore:m,hasNextPage:h}:{type:"scroll",onLoadMore:m}:void 0,renderNoRowsComponent:()=>(0,M.jsx)(p().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:A&&(0,M.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.empty",defaultMessage:"No pages found with your query."})}),styles:R}),t?(0,M.jsx)(u().fI,{justifyContent:"center",children:(0,M.jsx)(g().A,{style:{margin:"24px auto 24px"}})}):null]}):(0,M.jsx)(C,{})}},729632:(e,t,a)=>{a.d(t,{p:()=>u});a(242343);var s=()=>a(174114),n=()=>a(155342),o=()=>a(31448),i=()=>a(59175),r=()=>a(701270),l=()=>a(106408),d=()=>a(103151),c=a(163643);function u(e){const t=(0,s().IS)((e=>({labelContainer:{display:"inline-flex",alignItems:"center",marginBottom:8},container:{position:"relative",width:"100%"},input:{padding:"6px 10px"},textBelowInput:{marginTop:6},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:14,width:14},inputContainer:{display:"flex",alignItems:"center"},inputElementWithCopyButton:{width:"calc(100% - 24px)",...o().RC},inputElementWhenMultiline:{minHeight:94},copyButton:{position:"absolute",right:4,height:"fit-content"}})),[]);return(0,c.jsxs)("div",{style:t.container,children:[(0,c.jsxs)("div",{style:t.labelContainer,children:[(0,c.jsx)(r().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:e.labelMessage}),e.helpMessage&&(0,c.jsx)(d().A,{renderTooltip:()=>e.helpMessage,render:e=>(0,c.jsx)("span",{...e,children:(0,n().questionMarkCircleIcon)(t.helpIcon)})})]}),(0,c.jsxs)("div",{style:t.inputContainer,children:[(0,c.jsx)(i().A,{textarea:e.multiline,value:e.value,placeholder:e.placeholder,disabled:e.disabled,onChange:e.onChange,onBlur:e.onBlur,style:t.input,inputStyle:{...e.onCopyClick?t.inputElementWithCopyButton:void 0,...e.multiline?t.inputElementWhenMultiline:void 0}}),e.onCopyClick?(0,c.jsx)(l().lz,{onCopyClick:e.onCopyClick,isHovered:!0,containerStyles:t.copyButton}):null]}),e.secondaryMessage?(0,c.jsx)(r().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:t.textBelowInput,children:e.secondaryMessage}):null,e.errorMessage?(0,c.jsx)(r().D,{styleName:"UISmall-12px/Regular",colorName:"uiRedPrimary",customStyles:t.textBelowInput,children:e.errorMessage}):null]})}},730096:(e,t,a)=>{a.d(t,{e:()=>s});const s={rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}},732566:(e,t,a)=>{a.d(t,{A:()=>g});a(242343);var s=()=>a(174114),n=()=>a(653998),o=()=>a(76394),i=()=>a(487966),r=()=>a(392608),l=()=>a(501578),d=a(163643);function c(e){switch(e){case"bestPractices":return(0,r().xS)("guides.teamspacesLearnMore");case"workspaceOwnerGuide":return(0,r().xS)("guides.teamspacesWorkspaceOwner");case"settingsAndPermissions":return(0,r().xS)("guides.teamspacesSettingsAndPermissions");default:return(0,o().HB)(e)}}function u(e){return e||(0,d.jsx)(l().j,{children:(0,d.jsx)(n().sA,{defaultMessage:"Learn about teamspaces",id:"teamsLearnMoreLink"})})}function g(e){let{onClick:t,message:a,helpCenterLocation:n,analyticsFrom:o,containerStyle:r}=e;const l=(0,s().IS)((()=>({button:{maxWidth:"100%"}})),[]);return(0,d.jsx)("div",{style:r,children:(0,d.jsx)(i().A,{buttonStyle:l.button,title:u(a),analyticsFrom:o,href:c(n),onClick:t})})}},736851:(e,t,a)=>{a.d(t,{FS:()=>Z,Jo:()=>$,tp:()=>X,uU:()=>K,v8:()=>Q});a(362833),a(333225),a(494367),a(516262),a(573119),a(240480),a(950443),a(619601),a(725707),a(491955),a(500234),a(403517);var s=a(242343),n=()=>a(803290),o=()=>a(174114),i=()=>a(752903),r=()=>a(162901),l=()=>a(870122),d=()=>a(427240),c=()=>a(195394),u=()=>a(528762),g=()=>a(409211),m=()=>a(14931),p=()=>a(653998),h=()=>a(23371),f=()=>a(76394),x=()=>a(662505),v=()=>a(477784),b=()=>a(640979),y=()=>a(591130),S=()=>a(199557),j=()=>a(907721),w=()=>a(466321),A=()=>a(485966),M=()=>a(736953),C=()=>a(985532),I=()=>a(836331),T=()=>a(210466),k=()=>a(413871),_=()=>a(209684),z=()=>a(535906),D=()=>a(559637),P=()=>a(935091),N=()=>a(858023),R=()=>a(443252),B=()=>a(951540),E=()=>a(28210),L=()=>a(168980),O=()=>a(88271),U=()=>a(35462),F=()=>a(482570),H=()=>a(204024),V=()=>a(634369),W=()=>a(809785),q=()=>a(732863),G=a(163643);const K=(0,p().YK)({usersPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersPlaceholder",defaultMessage:"Search for users..."},usersAndGroupsPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersAndGroupsPlaceholder",defaultMessage:"Search for users and groups..."}}),Y=10,Q={key:"no-results",action:()=>{},render:e=>(0,G.jsx)(U().A,{isSecondaryColor:!0,style:{width:"100%",margin:"8px 12px"},...e,children:(0,G.jsx)(p().sA,{id:"adminContentSearchTab.pagesTable.filters.users.noResultsMessage",defaultMessage:"No results found."})})};function $(e){const{title:t,selectedItems:a,setSelectedItems:o,onMenuClose:u,isMultiSelect:$,includePermissionGroups:ee,includeGuests:te}=e,ae=(0,p().tz)(),se=(0,n().uB)(void 0,T().A),ne=J(),[oe,ie]=(0,s.useState)(Y),[re,le]=(0,s.useState)(!1),[de,ce]=(0,s.useState)(""),ue=(0,n().O$)(A().AppStoreCurrentSpaceStore),ge=(0,n().K8)((()=>{const e=C().A.state.shouldUseEdgeCache,t=I().default.checkGate({gateName:"edge_cache_helpers"});return e&&t}),[]),me=(0,S().n)({query:de,filter:te?void 0:"members",disable:!ge}),{users:pe,hasMore:he}=(0,n().K8)((()=>({users:(null==me?void 0:me.rowsStore.state.rows)??[],hasMore:(null==me?void 0:me.rowsStore.state.hasMore)??!1})),[me]),[{value:fe}]=(0,r().Yb)((async()=>{if(!ge)return e.userStores;if(!ue)return[];return await(0,h().lX)(pe,pe.length,(async e=>{const t=k().LU.createChildStore(ue,{table:g().oo,id:e.id});return await t.load(),t}))}),[ge,ue,pe,e.userStores]),xe=(0,s.useMemo)((()=>ge?te?new Set(pe.filter((e=>"page_guest"===e.membership_type)).map((e=>e.id))):new Set:e.guestUserIdSet),[ge,e.guestUserIdSet,pe,te]),ve=(null==fe?void 0:fe.length)??0,be=(0,s.useMemo)((()=>a.map((e=>{let{id:t}=e;return t}))),[a]),ye=(0,n().K8)((()=>ee?M().A.state.permissionGroupsAndMemberCounts.map((e=>e.group)):[]),[ee]),Se=(0,n().K8)((()=>ue?be.map((e=>k().LU.createChildStore(ue,{table:g().oo,id:e}))).filter((e=>e.isReady())):[]),[be,ue]),je=(0,n().K8)((()=>be.map((e=>ye.find((t=>t.group_id===e)))).filter(f().O9)),[be,ye]);function we(){ge&&(null==me||me.refresh()),ie(Y),le(!1),ce(""),u()}function Ae(){ce(""),o([])}function Me(e){ge?e<5&&he&&(null==me||me.loadMore()):e<5&&oe<ve&&ie(oe+Y)}function Ce(e){if($){return be.includes(e.id)?[...a.filter((t=>{let{id:a}=t;return a!==e.id}))]:[...a,e]}return be.includes(e.id)?[]:[e]}function Ie(e){const t=Ce({id:e,type:"user"});o(t),ce("")}function Te(e){const t=Ce({id:e,type:"permission_group"});o(t),ce("")}const ke=(0,s.useCallback)((e=>{ce(e.target.value)}),[]),_e=(0,n().K8)((()=>Se.map((e=>{const t=(0,m().c6)(ae,e.getModel()),a=!!xe&&xe.has(e.id);return(0,G.jsx)(W().A,{isSingle:!0,format:i().NY.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=be.filter((t=>t!==e.id)).map((e=>({id:e,type:"user"})));o(t)},style:a?ne.guestPillContainer:ne.pillContainer,value:(0,G.jsxs)("div",{style:ne.pillContents,children:[a?(0,l().globeIcon)(ne.guestIcon):(0,G.jsx)(F().A,{userStore:e,size:16}),(0,G.jsx)(U().A,{style:ne.pillText,children:t})]})},e.id)}))),[be,Se,o,xe,ne,ae]),ze=(0,n().K8)((()=>je.map((e=>{const t=y().Pf({intl:ae,groupName:e.name});return(0,G.jsx)(W().A,{isSingle:!0,format:i().NY.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=be.filter((t=>t!==e.group_id)).map((e=>({id:e,type:"permission_group"})));o(t)},style:ne.pillContainer,value:(0,G.jsxs)("div",{style:ne.pillContents,children:[(0,G.jsx)(E().B,{disabled:!0,icon:e.icon&&ue?{pointer:ue.pointer,icon:e.icon}:void 0,size:14,isEmptyPage:!1,title:t,defaultIcon:(0,d().peopleFillIcon)(ne.defaultGroupIconPill),style:ne.groupIconSpacing}),(0,G.jsx)(U().A,{style:ne.pillText,children:t})]})},e.id)}))),[be,je,o,ne,ue,ae]);const De=(0,G.jsx)(x().A,{on:be.length>0,icon:(0,c().E)(ne.icon),title:t,onClick:()=>le(!0)});return(0,G.jsx)(V().A,{children:(0,G.jsx)(R().Ay,{popupType:w().n.Popup,placementToOrigin:j().W.Bottom,alignmentToOrigin:j().C.Start,open:re,render:function(){const e=[];for(const a of fe??[]){var t;const s=(0,m().c6)(ae,a.getModel()),n=!!xe&&xe.has(a.id);(s.toLocaleLowerCase().includes(de)||null!==(t=a.getEmail())&&void 0!==t&&t.toLocaleLowerCase().includes(de))&&e.push({key:a.id,action:()=>Ie(a.id),render:e=>(0,G.jsx)(z().A,{...e,icon:$?(0,G.jsx)(D().A,{checked:be.includes(a.id),onClick:()=>Ie(a.id),size:16}):(0,G.jsx)(H().A,{isSelected:be.includes(a.id)}),focused:!1,title:(0,G.jsx)(X,{userStore:a,isGuest:n})})})}const s=[];for(const a of ye){y().Pf({intl:ae,groupName:a.name}).toLocaleLowerCase().includes(de)&&s.push({key:a.id,action:()=>Te(a.group_id),render:e=>(0,G.jsx)(z().A,{...e,icon:$?(0,G.jsx)(D().A,{checked:be.includes(a.group_id),onClick:()=>Te(a.group_id),size:16}):(0,G.jsx)(H().A,{isSelected:be.includes(a.group_id)}),focused:!1,title:(0,G.jsx)(Z,{group:a,spaceId:null==ue?void 0:ue.id})})})}let n=[];n=ge?he?[...e]:[...e,...s]:[...e,...s].slice(0,oe);const i={key:"userOptions",items:n.length>0?n:[Q],render:e=>(0,G.jsx)(O().A,{...e,title:null,loading:!1})};return(0,G.jsxs)("div",{style:ne.container,children:[(0,G.jsx)(q().A,{focus:!0,value:de,style:ne.input,placeholder:v().A.formatMessage(ee?K.usersAndGroupsPlaceholder:K.usersPlaceholder),onChange:ke,onRemoveLastToken:()=>{const e=a.slice(0,-1);o(e)},tokens:[..._e,...ze]}),(0,G.jsxs)(P().A,{menuType:b().gu.Popup,header:null,maxHeight:250,width:300,children:[(0,G.jsx)(N().Ay,{type:N().Oh.Vertical,store:se,initialFocus:0,sections:[i]}),(0,G.jsx)(L().A,{onChange:Me})]}),(0,G.jsxs)(O().A,{topBorder:!0,style:ne.footer,children:[(0,G.jsx)(_().p,{onClick:Ae,children:(0,G.jsx)(p().sA,{id:"adminContentSearchTab.pagesTable.filters.users.clearButton",defaultMessage:"Clear"})}),(0,G.jsx)(B().A,{onClick:we,children:(0,G.jsx)(p().sA,{id:"adminContentSearchTab.pagesTable.filters.users.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:we,keepFocus:!0,origin:De,preventScaleTransition:!0,originGap:8})})}function X(e){let{userStore:t,isGuest:a}=e;const s=(0,p().tz)(),o=J(),i=(0,n().K8)((()=>t.getDisplayName(s)),[t,s]);return(0,G.jsxs)("div",{style:o.optionContainer,children:[(0,G.jsx)(F().A,{userStore:t,size:24,style:o.optionAvatar}),(0,G.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,G.jsx)(U().A,{style:o.optionTitle,children:i}),(0,G.jsx)(U().A,{style:o.optionCaption,children:a?(0,G.jsx)(p().sA,{id:"adminContentSearchTab.pagesTable.filters.users.guestCaption",defaultMessage:"Guest"}):(0,G.jsx)(p().sA,{id:"adminContentSearchTab.pagesTable.filters.users.memberCaption",defaultMessage:"Member"})})]})]})}function Z(e){let{group:t,spaceId:a}=e;const s=J(),n=(0,p().tz)(),o=y().Pf({intl:n,groupName:t.name});return(0,G.jsxs)("div",{style:s.optionContainer,children:[(0,G.jsx)(E().B,{disabled:!0,icon:t.icon&&a?{pointer:{id:a,table:u().NX},icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:o,defaultIcon:(0,d().peopleFillIcon)(s.defaultGroupIcon),style:s.groupIconSpacing}),(0,G.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,G.jsx)(U().A,{style:s.optionTitle,children:o}),(0,G.jsx)(U().A,{style:s.optionCaption,children:(0,G.jsx)(p().sA,{id:"adminContentSearchTab.pagesTable.filters.users.groupCaption",defaultMessage:"Group"})})]})]})}function J(){return(0,o().IS)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:8},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginRight:4,fill:"currentColor"},defaultGroupIcon:{height:22,width:22,color:e.text.secondary,fill:"currentColor"},defaultGroupIconPill:{height:14,width:14,color:e.text.secondary,fill:"currentColor"},groupIconSpacing:{marginRight:8},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},guestPillContainer:{margin:"0px 6px 6px 0px",background:e.guestTokenBackground,height:20},guestIcon:{height:16,width:16,color:e.guestIconColor},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},pillText:{marginLeft:4},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.text.secondary,fontSize:12,lineHeight:"15px"}})),[])}},740190:(e,t,a)=>{a.d(t,{S:()=>c});var s=a(242343),n=()=>a(484157),o=()=>a(653998),i=()=>a(396218),r=()=>a(529305),l=()=>a(539048),d=a(163643);function c(e){let{onCancel:t,onSubmit:a,headerText:c,bylineText:u,submitText:g}=e;const[m,p]=(0,s.useState)(!1);return(0,d.jsx)(l().s,{isOpen:!0,onDismiss:t,areaConstraint:{width:{type:"min",length:i().NF}},render:()=>(0,d.jsx)(r().tf,{header:(0,d.jsx)(r().YA,{iconAndTitle:(0,d.jsx)(r().ZQ,{iconGroup:n().F,iconColorName:"uiRedPrimary",title:c}),description:u}),footer:(0,d.jsx)(r().aO,{primaryButtons:[{buttonType:"destructive",label:g,onClick:async()=>{p(!0),await a(),p(!1)},isDisabled:m}],secondaryButtons:[{buttonType:"dismiss",label:(0,d.jsx)(o().sA,{id:"destructiveActionModal.button.cancel",defaultMessage:"Cancel"})}],layout:"vertical"})})})}},740699:(e,t,a)=>{a.d(t,{L:()=>d,y:()=>l});var s=()=>a(803290),n=()=>a(409211),o=()=>a(653998),i=()=>a(485966),r=()=>a(413871);function l(e){const t=(0,o().tz)();return(0,s().K8)((()=>{const{currentSpaceStore:a}=i().default.state;if(!a||!e)return;return r().LU.createChildStore(a,{table:n().oo,id:e}).getDisplayName(t)}),[t,e])}function d(){const e=(0,o().tz)();return(0,s().K8)((()=>{const{currentUserStore:t}=i().default.state,a=null!=t&&t.isDefined()?t.getModel():void 0;return a?a.getDisplayName(e):void 0}),[e])}},750177:(e,t,a)=>{a.d(t,{e:()=>r});var s=()=>a(76394),n=()=>a(871002);var o=()=>a(613313),i=()=>a(764227);function r(e){var t;let{billingData:a}=e;return function(e){let{subscriptionTier:t,subscriptionCreatedAtTime:a,useLegacyBehavior:o}=e;return"enterprise"===t||!("plus"!==t||!o)&&(0,s().O9)(a)&&a<n().fQ}({subscriptionTier:(0,i().AI)(),subscriptionCreatedAtTime:null==a||null===(t=a.subscription)||void 0===t||null===(t=t.startDate)||void 0===t?void 0:t.toMillis(),useLegacyBehavior:!(0,o().hG)()})}},757877:(e,t,a)=>{a.d(t,{U:()=>o});a(242343);var s=a(163643);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-1.062h-1.25V15.5a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875v-11c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v1.125h1.25V4.5a2.125 2.125 0 0 0-2.125-2.125z"}),(0,s.jsx)("path",{d:"M17.942 9.558a.625.625 0 0 1 0 .884l-2.5 2.5a.625.625 0 1 1-.884-.884l1.408-1.408H10a.625.625 0 1 1 0-1.25h6.016l-1.458-1.458a.625.625 0 1 1 .884-.884z"})]})},o=(0,a(680369).wt)("arrowRightFromRectangle",n)},761566:(e,t,a)=>{a.d(t,{H:()=>c,V:()=>u});a(242343);var s=()=>a(237385),n=()=>a(803290),o=()=>a(653998),i=()=>a(84543),r=()=>a(547851),l=()=>a(90760),d=a(163643);const c=(0,o().YK)({title:{id:"spacePermissionsSettings.people.peopleDirectory.title",defaultMessage:"People directory"},byline:{id:"spacePermissionsSettings.people.peopleDirectory.byline",defaultMessage:"Enable the people directory in Notion"}});function u(e){let{spaceStore:t,isLocked:a,isMobile:u}=e;const g=(0,s().v3)(),m=(0,n().K8)((()=>Boolean(t.getSetting("disable_people_directory"))),[t]);return(0,d.jsx)(l().A,{isMobile:u,title:(0,d.jsx)(o().sA,{...c.title}),caption:(0,d.jsx)(o().sA,{...c.byline}),type:"toggle",isOn:!m,onToggle:()=>{a||function(e){let{environment:t,spaceStore:a,newValue:s}=e;i().createAndCommit({userAction:"SpacePermissionsSettings.DisablePeopleDirectorySetting",environment:t,canUndo:!0,perform:e=>{i().applyOperation({store:a,operation:{pointer:a.pointer,path:["settings","disable_people_directory"],command:"set",args:s},transaction:e})}})}({environment:g,spaceStore:t,newValue:!m})},isLocked:a,lockedTooltip:a?(0,r().C)():void 0})}},768794:(e,t,a)=>{a.d(t,{m:()=>de});var s=a(242343),n=(a(403517),()=>a(653998)),o=()=>a(975392),i=()=>a(76394),r=()=>a(419851),l=()=>a(508530),d=()=>a(362672),c=()=>a(297145),u=()=>a(732541),g=()=>a(765886),m=()=>a(502140),p=()=>a(486540),h=()=>a(394591),f=()=>a(145017),x=()=>a(472980),v=()=>a(528762),b=()=>a(218357),y=()=>a(297513),S=()=>a(727171),j=()=>a(63641),w=()=>a(668649),A=a(163643);function M(e){return"workspace"!==e}function C(e){var t,a,s,n,o,i,r;const l={read_content:null===(t=e.capabilities)||void 0===t?void 0:t.read_content,update_content:null===(a=e.capabilities)||void 0===a?void 0:a.update_content,insert_content:null===(s=e.capabilities)||void 0===s?void 0:s.insert_content,read_comment:null===(n=e.capabilities)||void 0===n?void 0:n.read_comment,insert_comment:null===(o=e.capabilities)||void 0===o?void 0:o.insert_comment,user_capabilities:null!==(i=e.capabilities)&&void 0!==i&&i.read_user_with_email?"read_user_including_email":null!==(r=e.capabilities)&&void 0!==r&&r.read_user_without_email?"read_user_excluding_email":"none"};return JSON.stringify(l)}const I=(0,n().YK)({started:{id:"space.spaceContentDuplicationStatus.started",defaultMessage:"Started"},completed:{id:"space.spaceContentDuplicationStatus.completed",defaultMessage:"Completed"},failed:{id:"space.spaceContentDuplicationStatus.failed",defaultMessage:"Failed"}}),T=(0,n().YK)({equallyRestrictive:{defaultMessage:". This is the same as the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_equal"},moreRestrictive:{defaultMessage:". This is more restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_more_restrictive"},lessRestrictive:{defaultMessage:". This is less restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_less_restrictive"}});function k(e,t){if(void 0!==e&&void 0!==t)return e===t?(0,A.jsx)(n().sA,{...T.equallyRestrictive}):!e&&t?(0,A.jsx)(n().sA,{...T.moreRestrictive}):e&&!t?(0,A.jsx)(n().sA,{...T.lessRestrictive}):void 0}function _(e){return e.name?`“${e.name}“ group`:(0,A.jsx)(n().sA,{...l().D.group})}function z(e){return e.changes.name.oldValue&&e.changes.name.newValue?(0,A.jsx)(n().sA,{defaultMessage:"from “{oldTeamName}“ to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_old_team_name_to_new_team_name",values:{oldTeamName:e.changes.name.oldValue,newTeamName:e.changes.name.newValue}}):!e.changes.name.oldValue&&e.changes.name.newValue?(0,A.jsx)(n().sA,{defaultMessage:"from some teamspace name to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_unknown_team_name_to_new_team_name",values:{newTeamName:e.changes.name.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"for {teamName}",id:"auditlog.actionNames.eventColumn.for_team_name",values:{teamName:(0,d().if)(e)}})}function D(e){if(e)switch(e){case"owner":return(0,A.jsx)(n().sA,{...l().D.team_owner});case"member":return(0,A.jsx)(n().sA,{...l().D.team_member});case"team_level_guest":return(0,A.jsx)(n().sA,{...l().D.team_level_guest})}return(0,A.jsx)(n().sA,{...l().D.team_member})}function P(e){var t,a;return{oldRole:(0,A.jsx)(n().sA,{...N(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.oldValue)}),newRole:(0,A.jsx)(n().sA,{...N(null===(a=e.changes)||void 0===a||null===(a=a.permission)||void 0===a?void 0:a.newValue)})}}function N(e){if(!e)return p().Sf.noAccessLabel;switch(e){case"editor":return p().Sf.workspaceOwnerLabel;case"membership_admin":return p().Sf.membershipAdminLabel;case"read_and_write":return p().Sf.memberLabel;default:return p().Sf.noAccessLabel}}function R(e){var t,a;return null!==(t=e.target)&&void 0!==t&&null!==(t=t.page)&&void 0!==t&&null!==(t=t.meta)&&void 0!==t&&t.parent&&"title"in(null===(a=e.target)||void 0===a||null===(a=a.page)||void 0===a||null===(a=a.meta)||void 0===a?void 0:a.parent)?`“${e.target.page.meta.parent.title}“`:(0,A.jsx)(n().sA,{...j().Qk.anUntitledPage})}function B(e){var t;return null!==(t=e.actor.meta)&&void 0!==t&&t.platform?(0,A.jsx)(n().sA,{defaultMessage:"on {platform}",id:"auditlog.actionNames.eventColumn.logged_in_platform",values:{platform:e.actor.meta.platform}}):""}function E(e){switch(e){case"google":return(0,A.jsx)(n().sA,{defaultMessage:"Google",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.google"});case"email":return(0,A.jsx)(n().sA,{defaultMessage:"temporary passcode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.email"});case"admin":return(0,A.jsx)(n().sA,{defaultMessage:"Notion support access",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.admin"});case"saml":return(0,A.jsx)(n().sA,{defaultMessage:"SAML SSO",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.saml"});case"apple":return(0,A.jsx)(n().sA,{defaultMessage:"Apple ID",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.apple"});case"microsoft":return(0,A.jsx)(n().sA,{defaultMessage:"Microsoft",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.microsoft"});case"password":case"password-no-mfa":case"password-sms":case"password-totp":case"password-backup-code":return(0,A.jsx)(n().sA,{defaultMessage:"password",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.password"});case"passkey":return(0,A.jsx)(n().sA,{defaultMessage:"passkey",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.passkey"});default:(0,i().HB)(e)}}function L(e){return e.changes.name.oldValue?(0,A.jsx)(n().sA,{defaultMessage:"from “{oldDomain}“",id:"auditlog.actionNames.eventColumn.old_domain",values:{oldDomain:e.changes.name.oldValue}}):""}function O(e,t){return"block"===e.table?(0,A.jsx)(n().sA,{defaultMessage:"{teamName} page {parentPage}",id:"auditlog.actionNames.eventColumn.team_parent_page",values:{teamName:(0,d().nZ)(t),parentPage:U(e)}}):"team"===e.table?(0,d().nZ)(t):void 0}function U(e){return"title"in e?`“${e.title}“`:(0,A.jsx)(n().sA,{...j().Qk.anUntitledPage})}function F(e,t){if(!t)return(0,A.jsx)(n().sA,{...j().Qk.anUntitledPage});const a=t.table;return"space"===a?t.id!==e?(0,A.jsx)(n().sA,{...l().D.otherWorkspace}):M(t.permissionLevel)?(0,A.jsx)(n().sA,{...l().D.private}):(0,A.jsx)(n().sA,{...l().D.thisWorkspace}):"team"===a?(0,d().nZ)(t):"block"===a?t.title?`“${t.title}“`:(0,A.jsx)(n().sA,{...j().Qk.anUntitledPage}):void 0}const H=(0,n().YK)({open:{defaultMessage:"Open",id:"auditlog.actionNames.eventColumn.team_privacy_types.open"},closed:{defaultMessage:"Closed",id:"auditlog.actionNames.eventColumn.team_privacy_types.closed"},private:{defaultMessage:"Private",id:"auditlog.actionNames.eventColumn.team_privacy_types.private"},default:{defaultMessage:"Default",id:"auditlog.actionNames.eventColumn.team_privacy_types.default"},unknown:{defaultMessage:"an unknown privacy state",id:"auditlog.actionNames.eventColumn.team_privacy_types.unknown"}});function V(e){return e?(0,A.jsx)(n().sA,{...H[e]}):(0,A.jsx)(n().sA,{...H.unknown})}function W(e){return e.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.disabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.enabled"})}function q(e){return e.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.disabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.enabled"})}function G(e){return"approved"===e.changes.requestStatus.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Approved",id:"auditlog.actionNames.eventColumn.membership_request_resolved.approved"}):(0,A.jsx)(n().sA,{defaultMessage:"Declined",id:"auditlog.actionNames.eventColumn.membership_request_resolved.declined"})}function K(e){return e.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.enabled"})}function Y(e){return e.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.disabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.enabled"})}const Q=(0,n().YK)({team_members:{defaultMessage:"any teamspace member",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_members"},team_owners:{defaultMessage:"only teamspace owners",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_owners"},unknown:{defaultMessage:"unknown",id:"auditlog.actionNames.eventColumn.team_access_level_types.unknown"}});function $(e){var t,a,s,p,T,N,U,H,$,Z,J,ee,te,ae,se,ne,oe,ie,re,le,de,ce,ue,ge,me,pe,he,fe,xe,ve,be,ye,Se,je,we,Ae,Me,Ce,Ie,Te,ke,_e,ze,De,Pe;const{auditLogEntry:Ne,env:Re,intl:Be}=e;if((0,r().nS)(Ne))return(0,r().ZD)({...e,auditLogEntry:Ne});switch(Ne.actionName){case"page.properties_edited":{const xt=Ne.meta.propertiesUpdated,vt=Ne.meta.propertiesUpdated.map((e=>`“${e.propertyName}“`)).join(", ");return 1===xt.length?(0,A.jsx)(n().sA,{defaultMessage:"Edited property {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.single_property",values:{properties:vt,pageName:(0,j().wS)(Ne)}}):(0,A.jsx)(n().sA,{defaultMessage:"Edited properties {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.multiple_properties",values:{properties:vt,pageName:(0,j().wS)(Ne)}})}case"page.suggestion.comment.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Edited comment on suggestion on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.comment.updated",values:{pageName:(0,j().wS)(Ne)}});case"page.discussion.comment.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Edited comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.updated",values:{pageName:(0,j().wS)(Ne)}});case"page_edited":return(0,A.jsx)(n().sA,{defaultMessage:"Edited {pageName}",id:"auditlog.actionNames.eventColumn.page_edited",values:{pageName:(0,j().wS)(Ne)}});case"page_deleted":return Ne.target.page.meta.permanentDeletion?(0,A.jsx)(n().sA,{defaultMessage:"Deleted {pageName} from Trash",id:"auditlog.actionNames.eventColumn.page_permanently_deleted",values:{pageName:(0,j().wS)(Ne)}}):(0,A.jsx)(n().sA,{defaultMessage:"Moved {pageName} to Trash",id:"auditlog.actionNames.eventColumn.page_deleted",values:{pageName:(0,j().wS)(Ne)}});case"page.purged":return(0,A.jsx)(n().sA,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page.purged",values:{pageName:(0,j().wS)(Ne)}});case"page_restored":return(0,A.jsx)(n().sA,{defaultMessage:"Restored {pageName}{withAdminPerms, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_restored",values:{pageName:(0,j().wS)(Ne),withAdminPerms:(0,d().th)(Ne)}});case"page_exported":return(0,A.jsx)(n().sA,{defaultMessage:"Exported {pageName}",id:"auditlog.actionNames.eventColumn.page_exported",values:{pageName:(0,j().wS)(Ne)}});case"page_moved":{var Ee,Le,Oe;const bt=null===(Ee=Ne.changes)||void 0===Ee?void 0:Ee.team,yt=Ne.changes.parent.oldValue,St=Ne.changes.parent.newValue;let jt=F(Ne.spaceId,Ne.changes.parent.oldValue),wt=F(Ne.spaceId,Ne.changes.parent.newValue);null!=bt&&bt.oldValue&&null!=bt&&bt.newValue&&yt&&St&&("block"===yt.table||"block"===St.table)?(jt=O(yt,null==bt?void 0:bt.oldValue),wt=O(St,null==bt?void 0:bt.newValue)):"space"===(null===(Le=Ne.changes.parent.oldValue)||void 0===Le?void 0:Le.table)&&"space"===(null===(Oe=Ne.changes.parent.newValue)||void 0===Oe?void 0:Oe.table)&&Ne.changes.parent.oldValue.id===Ne.changes.parent.newValue.id&&(M(Ne.changes.parent.oldValue.permissionLevel)||M(Ne.changes.parent.newValue.permissionLevel))&&(jt=M(Ne.changes.parent.oldValue.permissionLevel)?(0,A.jsx)(n().sA,{...l().D.private}):(0,A.jsx)(n().sA,{...l().D.workspaceLevel}),wt=M(Ne.changes.parent.newValue.permissionLevel)?(0,A.jsx)(n().sA,{...l().D.private}):(0,A.jsx)(n().sA,{...l().D.workspaceLevel}));const At=jt?Be.formatMessage({id:"auditLogEntry.changes.page_moved.old_parent",defaultMessage:" from {oldParentName}"},{oldParentName:jt}):"",Mt=wt?Be.formatMessage({id:"auditLogEntry.changes.page_moved.new_parent",defaultMessage:" to {newParentName}"},{newParentName:wt}):"";return(0,A.jsx)(n().sA,{defaultMessage:"Moved {pageName}{oldParentMessage}{newParentMessage}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_moved",values:{pageName:(0,j().wS)(Ne),oldParentMessage:At,newParentMessage:Mt,inSudoMode:(0,j().AJ)(Ne)}})}case"page_permission_updated":return function(e,t){var a,s,o;const i="bot"in t.target,r="space"in t.target,l="team"in t.target,c="group"in t.target,u="user"in t.target&&"guest"===(null===(a=t.target.user.meta)||void 0===a?void 0:a.spaceRole);var g,m;if(i)return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for bot {botName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_bot",values:{botName:(0,d().xC)(e,t),oldRole:(0,j().H8)(null===(g=t.changes)||void 0===g||null===(g=g.permission)||void 0===g?void 0:g.oldValue),newRole:(0,j().H8)(null===(m=t.changes)||void 0===m||null===(m=m.permission)||void 0===m?void 0:m.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}});var p,h,f,x,v,b;if(r)return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for everyone in the workspace from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_space",values:{oldRole:(0,j().H8)(null===(p=t.changes)||void 0===p||null===(p=p.permission)||void 0===p?void 0:p.oldValue),newRole:(0,j().H8)(null===(h=t.changes)||void 0===h||null===(h=h.permission)||void 0===h?void 0:h.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}});if(l)return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for {teamName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_team",values:{oldRole:(0,j().H8)(null===(f=t.changes)||void 0===f||null===(f=f.permission)||void 0===f?void 0:f.oldValue),newRole:(0,j().H8)(null===(x=t.changes)||void 0===x||null===(x=x.permission)||void 0===x?void 0:x.newValue),pageName:(0,j().wS)(t),teamName:(0,d().if)(t),inSudoMode:(0,j().AJ)(t)}});if(u)return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for guest {guestNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_guest",values:{guestNameAndEmail:(0,d().xC)(e,t),oldRole:(0,j().H8)(null===(v=t.changes)||void 0===v||null===(v=v.permission)||void 0===v?void 0:v.oldValue),newRole:(0,j().H8)(null===(b=t.changes)||void 0===b||null===(b=b.permission)||void 0===b?void 0:b.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}});if(c){var y,S;return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for group {groupName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_group",values:{groupName:(0,d().xC)(e,t),oldRole:(0,j().H8)(null===(y=t.changes)||void 0===y||null===(y=y.permission)||void 0===y?void 0:y.oldValue),newRole:(0,j().H8)(null===(S=t.changes)||void 0===S||null===(S=S.permission)||void 0===S?void 0:S.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}})}return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for {memberNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_default",values:{memberNameAndEmail:(0,d().xC)(e,t),oldRole:(0,j().H8)(null===(s=t.changes)||void 0===s||null===(s=s.permission)||void 0===s?void 0:s.oldValue),newRole:(0,j().H8)(null===(o=t.changes)||void 0===o||null===(o=o.permission)||void 0===o?void 0:o.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}})}(Be,Ne);case"page_created":const qe=(0,h().fS)(Ne);if(null!=qe&&null!==(t=qe.meta)&&void 0!==t&&t.parent){var Ue,Fe,He,Ve;if(qe.meta.parent.table===v().NX)return"private"===(null===(He=qe.meta)||void 0===He?void 0:He.permissionLevel)||"private"===(null===(Ve=qe.meta)||void 0===Ve?void 0:Ve.pageAudience)?(0,A.jsx)(n().sA,{defaultMessage:"Created a private page",id:"auditlog.actionNames.eventColumn.page_created_private"}):(0,A.jsx)(n().sA,{defaultMessage:"Created a page in the workspace",id:"auditlog.actionNames.eventColumn.page_created_workspace"});if((null===(Ue=qe.meta)||void 0===Ue?void 0:Ue.parent.table)===b().yK)return(0,A.jsx)(n().sA,{defaultMessage:"Created a page under {teamName}",id:"auditlog.actionNames.eventColumn.page_created_team",values:{teamName:(0,d().nZ)(qe.meta.parent)}});if((null===(Fe=qe.meta)||void 0===Fe?void 0:Fe.parent.table)===f().ev)return(0,A.jsx)(n().sA,{defaultMessage:"Created a page under {parentPageName}",id:"auditlog.actionNames.eventColumn.page_created_under",values:{parentPageName:R(Ne)}})}return(0,A.jsx)(n().sA,{defaultMessage:"Created a page",id:"auditlog.actionNames.eventColumn.page_created_general"});case"page_shared_to_web":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,A.jsx)(n().sA,{defaultMessage:"Disabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.disabled",values:{pageName:(0,j().wS)(e),inSudoMode:(0,j().AJ)(e)}});return(0,A.jsx)(n().sA,{defaultMessage:"Enabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.enabled",values:{pageName:(0,j().wS)(e),inSudoMode:(0,j().AJ)(e),newRole:(0,j().H8)(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(Ne);case"page.shared_with_email_domain":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,A.jsx)(n().sA,{defaultMessage:"Unshared {pageName} with email domains{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_with_email_domain.disabled",values:{pageName:(0,j().wS)(e),inSudoMode:(0,j().AJ)(e)}});return(0,A.jsx)(n().sA,{defaultMessage:"Shared {pageName} with email domains{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_with_email_domain.enabled",values:{pageName:(0,j().wS)(e),inSudoMode:(0,j().AJ)(e),newRole:(0,j().H8)(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(Ne);case"login":return function(e,t){var a,s,o;const i=null===(a=e.meta)||void 0===a?void 0:a.authType;return null!==(s=e.actor.meta)&&void 0!==s&&s.countryCode&&i?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod} in {geolocation}",values:{platform:B(e),geolocation:(0,w().BN)(e,t),loginMethod:E(i)}}):null!==(o=e.actor.meta)&&void 0!==o&&o.countryCode&&!i?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry",defaultMessage:"Logged in {platform} in {geolocation}",values:{platform:B(e),geolocation:(0,w().BN)(e,t)}}):i?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.loginWithPlatform.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod}",values:{platform:B(e),loginMethod:E(i)}}):(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.loginWithPlatform",defaultMessage:"Logged in {platform}",values:{platform:B(e)}})}(Ne,Be);case"allowed_support_access":return(0,A.jsx)(n().sA,{defaultMessage:"Granted support access for {name} until {date}",id:"auditlog.actionNames.allowed_support_access",values:{date:Be.formatDate(Ne.changes.expiresAt),name:Ne.target.user.name}});case"revoked_support_access":return(0,A.jsx)(n().sA,{defaultMessage:"Revoked support access for {name}",id:"auditlog.actionNames.revoked_support_access",values:{name:Ne.target.user.name}});case"preferred_name_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id),o=e.changes.name.oldValue,i=e.changes.name.newValue;if(s){if(o&&i)return(0,A.jsx)(n().sA,{defaultMessage:"Changed {memberNameAndEmail} name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed",values:{memberNameAndEmail:(0,d().xC)(t,e),oldValue:o,newValue:i}});if(!o&&i)return(0,A.jsx)(n().sA,{defaultMessage:"Set {memberNameAndEmail} name to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_to_value",values:{memberNameAndEmail:(0,d().xC)(t,e),newValue:i}});if(o&&!i)return(0,A.jsx)(n().sA,{defaultMessage:"Removed {memberNameAndEmail} name “{oldValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_from_value",values:{memberNameAndEmail:(0,d().xC)(t,e),oldValue:o}})}if(o&&i)return(0,A.jsx)(n().sA,{defaultMessage:"Changed name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed",values:{oldValue:o,newValue:i}});if(!o&&i)return(0,A.jsx)(n().sA,{defaultMessage:"Set name to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_to_value",values:{newValue:i}});if(o&&!i)return(0,A.jsx)(n().sA,{defaultMessage:"Removed name “{oldValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_from_value",values:{oldValue:o}});return(0,A.jsx)(n().sA,{defaultMessage:"Name was changed",id:"auditlog.actionNames.eventColumn.preferred_name_changed_generic"})}(Ne,Be);case"email_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,A.jsx)(n().sA,{defaultMessage:"Changed {memberNameAndEmail} email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.external_email_changed",values:{memberNameAndEmail:(0,d().xC)(t,e),oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.email_changed",values:{oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}})}(Ne,Be);case"picture_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,A.jsx)(n().sA,{defaultMessage:"Changed {memberNameAndEmail} profile picture",id:"auditlog.actionNames.eventColumn.external_picture_changed",values:{memberNameAndEmail:(0,d().xC)(t,e)}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed profile picture",id:"auditlog.actionNames.eventColumn.picture_changed"})}(Ne,Be);case"member_invited":{const Ct=P(Ne);return(0,A.jsx)(n().sA,{defaultMessage:"Invited {memberNameAndEmail} to the workspace as {newRole}",id:"auditlog.actionNames.eventColumn.member_invited",values:{memberNameAndEmail:(0,d().xC)(Be,Ne),newRole:Ct.newRole}})}case"member_role_updated":{const It=P(Ne);return(0,A.jsx)(n().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.member_role_updated",values:{memberNameAndEmail:(0,d().xC)(Be,Ne),oldRole:It.oldRole,newRole:It.newRole}})}case"member_removed":return Ne.actor.actorId===Ne.target.user.id?(0,A.jsx)(n().sA,{defaultMessage:"Left the workspace",id:"auditlog.actionNames.eventColumn.member_left"}):(0,A.jsx)(n().sA,{defaultMessage:"Removed {memberNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.member_removed",values:{memberNameAndEmail:(0,d().xC)(Be,Ne)}});case"guest_removed":return(0,A.jsx)(n().sA,{defaultMessage:"Removed guest {guestNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.guest_removed",values:{guestNameAndEmail:(0,d().xC)(Be,Ne)}});case"file_downloaded":return function(e){return(0,A.jsx)(n().sA,{defaultMessage:"Downloaded {fileName} from {pageName}",id:"auditlog.actionNames.eventColumn.file_downloaded",values:{fileName:X(e),pageName:(0,j().wS)(e)}})}(Ne);case"invite_link_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{id:"auditlog.actionNames.eventColumn.inviteLink.enabled",defaultMessage:"Enabled invite link"}):(0,A.jsx)(n().sA,{id:"auditlog.actionNames.eventColumn.inviteLink.disabled",defaultMessage:"Disabled invite link"});case"public_page_sharing_toggled":case"workspace_sidebar_editing_toggled":case"disable_guests_toggled":case"pages_to_other_workspaces_toggled":case"export_toggled":case"page_access_requests_toggled":return(0,r().ez)((0,d().sp)(Ne,Be));case"workspace_name_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_name_changed",values:{oldValue:Ne.changes.name.oldValue,newValue:Ne.changes.name.newValue}});case"workspace_domain_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace domain {oldValue} to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_domain_changed",values:{oldValue:L(Ne),newValue:Ne.changes.name.newValue}});case"workspace_integration_restriction_changed":return function(e){const t=void 0,{oldValue:a,newValue:s}=e.changes.integration_restrictions;if(s===t)return(0,A.jsx)(n().sA,{defaultMessage:"Enabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.no_restrictions"});if(a===t&&"approved_only"===s)return(0,A.jsx)(n().sA,{defaultMessage:"Disabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.approved_only"});if("approved_or_built_by_notion"===a&&"approved_only"===s)return(0,A.jsx)(n().sA,{defaultMessage:"Disabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.disabled_built_by_notion.from_approved_or_built_by_notion"});if("approved_only"===a&&"approved_or_built_by_notion"===s)return(0,A.jsx)(n().sA,{defaultMessage:"Enabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.enabled_built_by_notion"});return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace integration restriction",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.fallback_message"})}(Ne);case"workspace.settings.disallow_webhook_automation_action_toggled":return function(e){const{newValue:t}=e.changes.enabled;if(t)return(0,A.jsx)(n().sA,{defaultMessage:"Disabled using 'Send webhook' action in automations",id:"auditlog.actionNames.eventColumn.workspace.settings.disallow_webhook_automation_action_toggled.enabled"});return(0,A.jsx)(n().sA,{defaultMessage:"Enabled using 'Send webhook' action in automations",id:"auditlog.actionNames.eventColumn.workspace.settings.disallow_webhook_automation_action_toggled.disabled"})}(Ne);case"allowed_email_domain_added":return(0,A.jsx)(n().sA,{defaultMessage:"Added “{addedValue}“ into allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_added",values:{addedValue:Ne.changes.domain}});case"allowed_email_domain_removed":return(0,A.jsx)(n().sA,{defaultMessage:"Removed “{removedValue}“ from allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_removed",values:{removedValue:Ne.changes.domain}});case"public_page_set":return Ne.changes.name.oldValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed public home page from “{oldPage}“ to “{newPage}“",id:"auditlog.actionNames.eventColumn.public_page_changed",values:{oldPage:Ne.changes.name.oldValue,newPage:Ne.changes.name.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"Set “{newPage}“ as public home page",id:"auditlog.actionNames.eventColumn.public_page_set",values:{newPage:Ne.changes.name.newValue}});case"idp_metadata_url_updated":case"organization.saml.idp_metadata_url_updated":return Ne.changes.url.oldValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed IDP metadata URL from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_updated",values:{oldValue:Ne.changes.url.oldValue,newValue:Ne.changes.url.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"Set IDP metadata URL to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_set",values:{newValue:Ne.changes.url.newValue}});case"saml_toggled":case"organization.saml.toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{...l().D.saml_enabled}):(0,A.jsx)(n().sA,{...l().D.saml_disabled});case"saml_enforce_toggled":case"organization.saml.enforce_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{...l().D.saml_enforced}):(0,A.jsx)(n().sA,{...l().D.saml_unenforced});case"automatic_account_creation_toggled":case"organization.saml.automatic_account_creation_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{...l().D.automatic_account_creation_enabled}):(0,A.jsx)(n().sA,{...l().D.automatic_account_creation_disabled});case"workspace_analytics_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{...l().D.workspace_analytics_enabled}):(0,A.jsx)(n().sA,{...l().D.workspace_analytics_disabled});case"workspace_creation_set_for_email_domain":case"organization.managed_user_settings.workspace_creation_enum_updated":return function(e,t){const{oldValue:a,newValue:s}=e.changes.workspace_creation;if(!a&&!s)return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace creation setting",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain.fallback_message"});const o=e.changes.workspace_creation.oldValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.beforeSetting",defaultMessage:" from {prevWorkspaceCreationSetting}"},{prevWorkspaceCreationSetting:(0,x().XB)(e.changes.workspace_creation.oldValue,t)}):"",i=e.changes.workspace_creation.newValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.afterSetting",defaultMessage:" to {afterWorkspaceCreationSetting}"},{afterWorkspaceCreationSetting:(0,x().XB)(e.changes.workspace_creation.newValue,t)}):"";return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace creation setting{before}{after}.",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain",values:{before:o,after:i}})}(Ne,Be);case"member_added_to_group":return(0,A.jsx)(n().sA,{defaultMessage:"Added {memberNameAndEmail} to {groupName}",id:"auditlog.actionNames.eventColumn.member_added_to_group",values:{memberNameAndEmail:(0,d().xC)(Be,Ne),groupName:_(Ne.target.group)}});case"member_removed_from_group":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {memberNameAndEmail} from {groupName}",id:"auditlog.actionNames.eventColumn.member_removed_from_group",values:{memberNameAndEmail:(0,d().xC)(Be,Ne),groupName:_(Ne.target.group)}});case"space_transfer_status_changed":return function(e,t){const{oldValue:a,newValue:s}=e.changes.spaceTransferStatus,o=e.target.space.name?t.formatMessage({id:"auditLogEntry.changes.space_transfer_status_changed.space_name",defaultMessage:" for {spaceName}"},{spaceName:e.target.space.name}):"";if(!a&&!s)return(0,A.jsx)(n().sA,{defaultMessage:"Workspace transfer status changed{spaceNameMessage}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.fallback_message",values:{spaceNameMessage:o}});if(!s)return(0,A.jsx)(n().sA,{defaultMessage:"Workspace transfer request cleared{spaceNameMessage} from prior status of {oldStatus}",id:"auditlog.actionNames.eventColumn.space_transfer_status_cleared",values:{spaceNameMessage:o,oldStatus:a}});return(0,A.jsx)(n().sA,{defaultMessage:"{newStatus, select, requested {Workspace transfer request initiated{spaceNameMessage}.} started {Workspace transfer started{spaceNameMessage}} completed {Workspace transfer completed{spaceNameMessage}} other {Workspace transfer status change to {newStatus}{spaceNameMessage}}}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.newStatus",values:{spaceNameMessage:o,newStatus:s}})}(Ne,Be);case"space_claim_and_upgrade_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,A.jsx)(n().sA,{defaultMessage:"Status changed for workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,A.jsx)(n().sA,{defaultMessage:"Pending workspace claim for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,A.jsx)(n().sA,{defaultMessage:"{workspaceName} has been claimed and upgraded to the Enterprise plan",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,A.jsx)(n().sA,{defaultMessage:"Request to claim and upgrade {workspaceName} has been sent.",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(Ne);case"space_claim_deletion_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimDeletionStatus,s=(0,A.jsx)(n().sA,{defaultMessage:"Claimable workspace deletion status change for {spaceName}",id:"auditlog.actionNames.eventColumn.space_claim_deletion_status_changed.fallback_message",values:{spaceName:e.target.space.name}});if(!t&&!a)return s;if(!a||"canceled"===a)return(0,A.jsx)(n().sA,{defaultMessage:"Recovered workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.status_cleared",values:{spaceName:e.target.space.name}});return(0,A.jsx)(n().sA,{defaultMessage:"Deleted workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.deleted",values:{spaceName:e.target.space.name}})}(Ne);case"organization.domain_claim.claim_and_upgrade_status_updated":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,A.jsx)(n().sA,{defaultMessage:"Status changed for organization's workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,A.jsx)(n().sA,{defaultMessage:"Pending workspace claim by organization for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,A.jsx)(n().sA,{defaultMessage:"{workspaceName} has been successfully claimed by organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,A.jsx)(n().sA,{defaultMessage:"Request sent to claim workspace: {workspaceName} for organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(Ne);case"membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.membership_requests_toggled",values:{enabled:W(Ne)}});case"external_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled",values:{enabled:q(Ne)}});case"membership_request_resolved":return(0,A.jsx)(n().sA,{defaultMessage:"{status} request to add {email} to the workspace as a member",id:"auditlog.actionNames.eventColumn.membership_request_resolved",values:{status:G(Ne),email:(0,d().xC)(Be,Ne)}});case"guest_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled",values:{enabled:K(Ne)}});case"team_created":return(0,A.jsx)(n().sA,{defaultMessage:"Created {teamName}",id:"auditlog.actionNames.eventColumn.team_created",values:{teamName:(0,d().if)(Ne)}});case"team_archived":return(0,A.jsx)(n().sA,{defaultMessage:"Archived {teamName}",id:"auditlog.actionNames.eventColumn.team_archived",values:{teamName:(0,d().if)(Ne)}});case"team_default_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Added {teamName} to the default teamspace list. Workspace members will automatically be added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_enabled",values:{teamName:(0,d().if)(Ne)}}):(0,A.jsx)(n().sA,{defaultMessage:"Removed {teamName} from the default teamspace list. Workspace members will no longer be automatically added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_disabled",values:{teamName:(0,d().if)(Ne)}});case"team_public_page_sharing_toggled":return Ne.changes.enabled.newValue?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Disabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_disabled",values:{teamName:(0,d().if)(Ne)}}),k((null===(a=Ne.meta)||void 0===a?void 0:a.spacePublicPageSharingDisabled)??(null==Ne?void 0:Ne.spacePublicPageSharingDisabled),Ne.changes.enabled.newValue)]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Enabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_enabled",values:{teamName:(0,d().if)(Ne)}}),k((null===(s=Ne.meta)||void 0===s?void 0:s.spacePublicPageSharingDisabled)??(null==Ne?void 0:Ne.spacePublicPageSharingDisabled),Ne.changes.enabled.newValue)]});case"team_export_toggled":return Ne.changes.enabled.newValue?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Disabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_disabled",values:{teamName:(0,d().if)(Ne)}}),k((null===(p=Ne.meta)||void 0===p?void 0:p.spaceExportDisabled)??(null==Ne?void 0:Ne.spaceExportDisabled),Ne.changes.enabled.newValue)]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Enabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_enabled",values:{teamName:(0,d().if)(Ne)}}),k((null===(T=Ne.meta)||void 0===T?void 0:T.spaceExportDisabled)??(null==Ne?void 0:Ne.spaceExportDisabled),Ne.changes.enabled.newValue)]});case"team_sidebar_editing_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_disabled",values:{teamName:(0,d().if)(Ne)}}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_enabled",values:{teamName:(0,d().if)(Ne)}});case"team_creation_admins_setting_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_disabled",values:{teamName:(0,d().if)(Ne)}}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_enabled",values:{teamName:(0,d().if)(Ne)}});case"team_guests_toggled":return Ne.changes.enabled.newValue?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Disabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_disabled",values:{teamName:(0,d().if)(Ne)}}),k((null===(N=Ne.meta)||void 0===N?void 0:N.spaceDisableGuests)??Ne.spaceDisableGuests,Ne.changes.enabled.newValue)]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Enabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_enabled",values:{teamName:(0,d().if)(Ne)}}),k((null===(U=Ne.meta)||void 0===U?void 0:U.spaceDisableGuests)??Ne.spaceDisableGuests,Ne.changes.enabled.newValue)]});case"team_name_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed teamspace name {oldTeamNameToNewTeamName}",id:"auditlog.actionNames.eventColumn.team_name_changed",values:{oldTeamNameToNewTeamName:z(Ne)}});case"team_description_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed description of {teamName}",id:"auditlog.actionNames.eventColumn.team_description_changed",values:{teamName:(0,d().if)(Ne)}});case"team_icon_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed icon of {teamName}",id:"auditlog.actionNames.eventColumn.team_icon_changed",values:{teamName:(0,d().if)(Ne)}});case"member_added_to_team":return(0,A.jsx)(n().sA,{defaultMessage:"Invited {memberNameAndEmail} to {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_added_to_team",values:{memberNameAndEmail:(0,d().xC)(Be,Ne),teamName:(0,d().if)(Ne),teamRole:D(Ne.changes.teamRole.newValue)}});case"group_added_to_team":return(0,A.jsx)(n().sA,{defaultMessage:"Invited {groupName} to {teamName} as teamspace member",id:"auditlog.actionNames.eventColumn.group_added_to_team",values:{groupName:_(Ne.target.group),teamName:(0,d().if)(Ne)}});case"member_removed_from_team":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {memberNameAndEmail} from {teamName}",id:"auditlog.actionNames.eventColumn.member_removed_from_team",values:{memberNameAndEmail:(0,d().xC)(Be,Ne),teamName:(0,d().if)(Ne)}});case"group_removed_from_team":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {groupName} from {teamName}",id:"auditlog.actionNames.eventColumn.group_removed_from_team",values:{groupName:_(Ne.target.group),teamName:(0,d().if)(Ne)}});case"member_joined_team":const Ge=(0,d().if)(Ne),Ke=D(Ne.changes.teamRole.newValue);return(0,j().AJ)(Ne)?(0,A.jsx)(n().sA,{defaultMessage:"Joined {teamName} as {teamRole} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_joined_team_privileged",values:{teamName:Ge,teamRole:Ke}}):(0,A.jsx)(n().sA,{defaultMessage:"Joined {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_joined_team",values:{teamName:Ge,teamRole:Ke}});case"member_left_team":return(0,A.jsx)(n().sA,{defaultMessage:"Left {teamName}",id:"auditlog.actionNames.eventColumn.member_left_team",values:{teamName:(0,d().if)(Ne)}});case"member_team_role_updated":const Ye=(0,d().xC)(Be,Ne),Qe=D(Ne.changes.teamRole.oldValue),$e=D(Ne.changes.teamRole.newValue),Xe=(0,d().if)(Ne);return(0,j().AJ)(Ne)?(0,A.jsx)(n().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_team_role_updated_privileged",values:{memberNameAndEmail:Ye,oldTeamRole:Qe,newTeamRole:$e,teamName:Xe}}):(0,A.jsx)(n().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName}",id:"auditlog.actionNames.eventColumn.member_team_role_updated",values:{memberNameAndEmail:Ye,oldTeamRole:Qe,newTeamRole:$e,teamName:Xe}});case"team_user_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated {userNameOrEmail}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_user_permission_updated",values:{userNameOrEmail:(0,d().xC)(Be,Ne),oldPermission:(0,j().H8)(Ne.changes.permission.oldValue),newPermission:(0,j().H8)(Ne.changes.permission.newValue),teamName:(0,d().if)(Ne)}});case"team_group_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated {groupName}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_group_permission_updated",values:{groupName:_(Ne.target.group),oldPermission:(0,j().H8)(Ne.changes.permission.oldValue),newPermission:(0,j().H8)(Ne.changes.permission.newValue),teamName:(0,d().if)(Ne)}});case"team_member_default_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated default page permissions for teamspace members in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_member_default_permission_updated",values:{teamName:(0,d().if)(Ne),oldRole:(0,j().H8)(null===(H=Ne.changes)||void 0===H||null===(H=H.permission)||void 0===H?void 0:H.oldValue),newRole:(0,j().H8)(null===($=Ne.changes)||void 0===$||null===($=$.permission)||void 0===$?void 0:$.newValue)}});case"team_guest_default_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated default page permissions for teamspace guests in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_guest_default_permission_updated",values:{teamName:(0,d().if)(Ne),oldRole:(0,j().H8)(null===(Z=Ne.changes)||void 0===Z||null===(Z=Z.permission)||void 0===Z?void 0:Z.oldValue),newRole:(0,j().H8)(null===(J=Ne.changes)||void 0===J||null===(J=J.permission)||void 0===J?void 0:J.newValue)}});case"team_workspace_default_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated default page permissions for everyone else in the workspace for {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_workspace_default_permission_updated",values:{teamName:(0,d().if)(Ne),oldRole:(0,j().H8)(null===(ee=Ne.changes)||void 0===ee||null===(ee=ee.permission)||void 0===ee?void 0:ee.oldValue),newRole:(0,j().H8)(null===(te=Ne.changes)||void 0===te||null===(te=te.permission)||void 0===te?void 0:te.newValue)}});case"team_privacy_type_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed the teamspace privacy type for {teamName} from {oldType} to {newType}",id:"auditlog.actionNames.eventColumn.team_privacy_type_changed",values:{teamName:(0,d().if)(Ne),oldType:V(null===(ae=Ne.changes)||void 0===ae?void 0:ae.teamAccessLevel.oldValue),newType:V(null===(se=Ne.changes)||void 0===se?void 0:se.teamAccessLevel.newValue)}});case"team_invite_access_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed who can invite teamspace members to {newType} for {teamName}",id:"auditlog.actionNames.eventColumn.team_invite_access_changed",values:{teamName:(0,d().if)(Ne),newType:(We=null===(ne=Ne.changes)||void 0===ne||null===(ne=ne.teamInviteAccess)||void 0===ne?void 0:ne.newValue,We?(0,A.jsx)(n().sA,{...Q[We]}):(0,A.jsx)(n().sA,{...Q.unknown}))}});case"teams_enabled_for_space":return(0,A.jsx)(n().sA,{defaultMessage:"Enabled teamspaces for {workspaceName}",id:"auditlog.actionNames.eventColumn.teams_enabled_for_space",values:{workspaceName:Ne.target.space.name}});case"private_content_transferred":return(0,A.jsx)(n().sA,{defaultMessage:"Transferred private content from {fromUserName} to {toUserName}",id:"auditLog.actionNames.eventColumn.private_content_transferred",values:{fromUserName:(0,d().q4)(Be,Ne.changes.userPermission.oldValue),toUserName:(0,d().q4)(Be,Ne.changes.userPermission.newValue)}});case"user_analytics_exported":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}",values:{daysFilterString:Be.formatMessage(S().jy[(null===(oe=Ne.meta)||void 0===oe?void 0:oe.daysFilter)||"last_90_days"]).toLowerCase()}});case"content_analytics_exported":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}",values:{daysFilterString:Be.formatMessage(S().jy[(null===(ie=Ne.meta)||void 0===ie?void 0:ie.daysFilter)||"last_90_days"]).toLowerCase()}});case"admin_content_search_queried":case"admin_content_search_exported":function Ze(e){return e.join(Be.formatMessage(l().D.adminContentSearchPredicateSplit))}function Je(e){return"starting"in e&&"ending"in e?`${e.starting} - ${e.ending}`:"starting"in e?`${e.starting} - `:"ending"in e?` - ${e.ending}`:void 0}const et=Ne.searchParameters.query&&Be.formatMessage(l().D.adminContentSearchQuery,{query:Ne.searchParameters.query}),tt=Ne.searchParameters.teamspaces&&Ne.searchParameters.teamspaces.length>0&&Be.formatMessage(l().D.adminContentSearchTeamspaces,{teamspaceCount:Ne.searchParameters.teamspaces.length,teamspaces:Ze(Ne.searchParameters.teamspaces)}),at=Ne.searchParameters.createdBy&&Ne.searchParameters.createdBy.length>0&&Be.formatMessage(l().D.adminContentSearchCreatedBy,{createdBy:Ze(Ne.searchParameters.createdBy)}),st=Ne.searchParameters.sharedWith&&Ne.searchParameters.sharedWith.length>0&&Be.formatMessage(l().D.adminContentSearchSharedWith,{sharedWith:Ze(Ne.searchParameters.sharedWith)}),nt=Ne.searchParameters.audience&&Ne.searchParameters.audience.length>0&&Be.formatMessage(l().D.adminContentSearchAudience,{audience:Ze(Ne.searchParameters.audience)}),ot=Ne.searchParameters.createdTime&&Be.formatMessage(l().D.adminContentSearchCreatedTime,{createdTime:Je(Ne.searchParameters.createdTime)}),it=Ne.searchParameters.lastEditedTime&&Be.formatMessage(l().D.adminContentSearchLastEditedTime,{lastEditedTime:Je(Ne.searchParameters.lastEditedTime)}),rt=Ne.searchParameters.deletionStatuses&&Ne.searchParameters.deletionStatuses.length>0&&Be.formatMessage(l().D.adminContentSearchDeletionStatus,{deletionStatuses:Ze(Ne.searchParameters.deletionStatuses.map((e=>Be.formatMessage((0,g().uT)(e))))),deletionStatusesCount:Ne.searchParameters.deletionStatuses.length}),lt=o().oE([et,tt,at,st,nt,ot,it,rt]);if("admin_content_search_queried"===Ne.actionName){if(0===lt.length)return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried.no_filters",defaultMessage:"Ran a content search with no filters"});{const Tt=Ze(lt);return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried",defaultMessage:"Ran a content search with the following criteria: {searchCriteria}",values:{searchCriteria:Tt}})}}if(0===lt.length)return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported.no_filters",defaultMessage:"Exported a content search result with no filters"});{const kt=Ze(lt);return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported",defaultMessage:"Exported a content search result with the following criteria: {searchCriteria}",values:{searchCriteria:kt}})}case"admin_managed_users_log_out_all":case"organization.managed_users.log_out":{const _t=Be.formatList(Ne.meta.emailDomains,{type:"conjunction"});return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_managed_users_log_out_all",defaultMessage:"Logged out all managed users with the email domains {emailDomains}",values:{emailDomains:_t}})}case"admin_managed_users_log_out_one":case"organization.managed_users.log_out_one":return(0,A.jsx)(n().sA,{defaultMessage:"Logged out {guestNameAndEmail} from all of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_log_out_one",values:{guestNameAndEmail:(0,d().xC)(Be,Ne)}});case"admin_managed_users_password_cleared_one":case"organization.managed_users.password_cleared_one":return(0,A.jsx)(n().sA,{defaultMessage:"Reset the password and MFA settings for {guestNameAndEmail} and logged them out of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_password_cleared_one",values:{guestNameAndEmail:(0,d().xC)(Be,Ne)}});case"admin_managed_users_password_cleared":case"organization.managed_users.password_cleared":{const zt=Be.formatList(Ne.meta.emailDomains,{type:"conjunction"});return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_managed_users_password_cleared",defaultMessage:"Cleared passwords for all users with the email domains {emailDomains}",values:{emailDomains:zt}})}case"automation_edited":return(0,A.jsx)(n().sA,{id:"auditlog.actionNames.eventColumn.automation_edited",defaultMessage:"Edited {automationType} on {pageTitle}",values:{automationType:(0,d().KE)(Ne.meta.automationType),pageTitle:(0,j().wS)(Ne)}});case"ai_admin_legal_acceptance_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} Notion AI for the workspace.",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled",values:{enabled:Y(Ne)}});case"workspace.settings.hipaa_compliance_updated":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Enabled HIPAA compliance",id:"auditlog.actionNames.eventColumn.hipaa_compliance_updated.enabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Disabled HIPAA compliance",id:"auditlog.actionNames.eventColumn.hipaa_compliance_updated.disabled"});case"space_consolidation_started":case"space_consolidation_completed":case"space_consolidation_failed":const dt=Ne.spaceId===Ne.meta.spaceConsolidationMetadata.source_space_id,ct=Ne.meta.spaceConsolidationMetadata.source_space_name??Ne.meta.spaceConsolidationMetadata.source_space_id,ut=Ne.meta.spaceConsolidationMetadata.target_space_name??Ne.meta.spaceConsolidationMetadata.target_space_id,gt=Ne.changes.spaceContentDuplicationStatus.newValue;return(0,A.jsx)(n().sA,{defaultMessage:"{status} workspace consolidation {direction} {spaceName}.",id:"auditlog.actionNames.eventColumn.space_consolidation_status_changed",values:{status:gt?(0,A.jsx)(n().sA,{...I[gt]}):"",spaceName:dt?ut:ct,direction:(0,A.jsx)(n().sA,{...dt?l().D.into:l().D.from})}});case"mfa_sms_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} SMS MFA on “{value}“",id:"auditlog.actionNames.eventColumn.mfa_sms_toggled",values:{value:null!==(re=Ne.changes)&&void 0!==re&&re.maskedPhoneNumber.oldValue?null===(le=Ne.changes)||void 0===le?void 0:le.maskedPhoneNumber.oldValue:null===(de=Ne.changes)||void 0===de?void 0:de.maskedPhoneNumber.newValue,enabled:null!==(ce=Ne.changes)&&void 0!==ce&&ce.enabled.newValue?"Enabled":"Disabled"}});case"mfa_totp_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} TOTP MFA",id:"auditlog.actionNames.eventColumn.mfa_totp_toggled",values:{enabled:null!==(ue=Ne.changes)&&void 0!==ue&&ue.enabled.newValue?"Enabled":"Disabled"}});case"mfa_backup_code_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} backup codes for MFA",id:"auditlog.actionNames.eventColumn.mfa_backup_code_toggled",values:{enabled:null!==(ge=Ne.changes)&&void 0!==ge&&ge.enabled.newValue?"Enabled":"Disabled"}});case"user_suspended":return(0,A.jsx)(n().sA,{defaultMessage:"Suspended {userNameAndEmail}",id:"auditLogEntry.user_suspended",values:{userNameAndEmail:(0,d().xC)(Be,Ne)}});case"user_unsuspended":return(0,A.jsx)(n().sA,{defaultMessage:"Reactivated {userNameAndEmail}",id:"auditLogEntry.user_unsuspended",values:{userNameAndEmail:(0,d().xC)(Be,Ne)}});case"user_deleted":return Ne.target?(0,A.jsx)(n().sA,{defaultMessage:"Deleted {userNameAndEmail}",id:"auditLogEntry.user_deleted",values:{userNameAndEmail:(0,d().q4)(Be,Ne.target.user)}}):(0,A.jsx)(n().sA,{...l().D.user_deleted});case"workspace.settings.prevent_granting_support_access_updated":case"organization.managed_user_settings.prevent_granting_support_access_updated":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.enabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.disabled"});case"workspace.settings.prevent_profile_edits_updated":case"organization.managed_user_settings.prevent_profile_edits_updated":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.enabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.disabled"});case"workspace.settings.external_workspace_access_updated":case"organization.managed_user_settings.external_workspace_access_updated":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.enabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.disabled"});case"workspace.settings.delete_from_trash_delay":return void 0!==Ne.changes.valueS.oldValue||void 0!==Ne.changes.valueS.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed duration for when pages are deleted from Trash from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_settings_delete_from_trash_delay",values:{oldDuration:(0,y().rN)(Ne.changes.valueS.oldValue??c().I4,Be),newDuration:(0,y().rN)(Ne.changes.valueS.newValue??c().I4,Be)}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed duration for when pages are deleted from Trash.",id:"auditLogEntry.workspace_settings_delete_from_trash_delay.generic"});case"workspace.settings.purge_delay":return void 0!==Ne.changes.valueS.oldValue||void 0!==Ne.changes.valueS.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed duration for when deleted pages are permanently deleted from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_settings_purge_delay",values:{oldDuration:(0,y().rN)(Ne.changes.valueS.oldValue??c().qI,Be),newDuration:(0,y().rN)(Ne.changes.valueS.newValue??c().qI,Be)}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed duration for when deleted pages are permanently deleted.",id:"auditLogEntry.workspace_settings_purge_delay.generic"});case"workspace.settings.custom_session_duration_updated":case"organization.managed_user_settings.custom_session_duration_updated":return void 0!==Ne.changes.valueMs.oldValue&&void 0!==Ne.changes.valueMs.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed the session duration for all managed users from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated",values:{oldDuration:(0,u().lH)(Ne.changes.valueMs.oldValue,Be),newDuration:(0,u().lH)(Ne.changes.valueMs.newValue,Be)}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed the session duration for all managed users.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated.disabled"});case"workspace.public_domain.created":return(0,A.jsx)(n().sA,{defaultMessage:"Public domain “{name}“ created",id:"auditLogEntry.workspace_public_domain_created",values:{name:Ne.target.publicDomain.domainName}});case"workspace.public_domain.updated":return void 0!==(null===(me=Ne.changes.name)||void 0===me?void 0:me.oldValue)&&void 0!==(null===(pe=Ne.changes.name)||void 0===pe?void 0:pe.newValue)?(0,A.jsx)(n().sA,{defaultMessage:"Changed public domain name from “{oldValue}“ to “{newValue}“",id:"auditLogEntry.workspace_public_domain_updated.domain_name",values:{oldValue:Ne.changes.name.oldValue,newValue:Ne.changes.name.newValue}}):void 0===(null===(he=Ne.changes.publicHomePage)||void 0===he?void 0:he.oldValue)&&void 0!==(null===(fe=Ne.changes.publicHomePage)||void 0===fe?void 0:fe.newValue)?(0,A.jsx)(n().sA,{defaultMessage:"Changed public domain add home page “{newValue}“",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.add",values:{newValue:Ne.changes.publicHomePage.newValue}}):void 0!==(null===(xe=Ne.changes.publicHomePage)||void 0===xe?void 0:xe.oldValue)&&void 0!==(null===(ve=Ne.changes.publicHomePage)||void 0===ve?void 0:ve.newValue)?(0,A.jsx)(n().sA,{defaultMessage:"Changed public domain home page from “{oldValue}“ to “{newValue}“",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.update",values:{oldValue:Ne.changes.publicHomePage.oldValue,newValue:Ne.changes.publicHomePage.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed public domain",id:"auditLogEntry.workspace_public_domain_updated.unknown"});case"workspace.public_domain.deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Public domain “{name}“ deleted",id:"auditLogEntry.workspace_public_domain_deleted",values:{name:Ne.target.publicDomain.domainName}});case"workspace.custom_emoji.updated":const mt=null===(be=Ne.changes.name)||void 0===be?void 0:be.oldValue,pt=null===(ye=Ne.changes.name)||void 0===ye?void 0:ye.newValue,ht=null===(Se=Ne.changes.url)||void 0===Se?void 0:Se.oldValue,ft=null===(je=Ne.changes.url)||void 0===je?void 0:je.newValue;return void 0!==mt&&void 0!==pt&&void 0!==ht&&void 0!==ft?(0,A.jsx)(n().sA,{defaultMessage:"Changed image and name of custom emoji from “{oldName}“ to “{newName}“",id:"auditLogEntry.workspace_custom_emoji_updated.name_image",values:{oldName:mt,newName:pt}}):void 0!==mt&&void 0!==pt?(0,A.jsx)(n().sA,{defaultMessage:"Changed name of custom emoji from “{oldName}“ to “{newName}“",id:"auditLogEntry.workspace_custom_emoji_updated.name",values:{oldName:mt,newName:pt}}):void 0!==ht&&void 0!==ft?(0,A.jsx)(n().sA,{defaultMessage:"Changed image of custom emoji “{name}“",id:"auditLogEntry.workspace_custom_emoji_updated.image",values:{name:Ne.target.customEmoji.name}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed custom emoji",id:"auditLogEntry.workspace_custom_emoji_updated.unknown"});case"workspace.custom_emoji.deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Deleted custom emoji “{name}“",id:"auditLogEntry.workspace_custom_emoji_deleted",values:{name:Ne.target.customEmoji.name}});case"integration.created":return(0,A.jsx)(n().sA,{defaultMessage:"Added {botName} to the workspace",id:"auditLogEntry.integration.created",values:{botName:(0,d().Hg)(Be,Ne.meta.bot)}});case"integration.deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {botName} from workspace",id:"auditLogEntry.integration.deleted",values:{botName:(0,d().Hg)(Be,Ne.meta.bot)}});case"page.automation_deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Deleted automation {automationType} from {pageTitle}",id:"auditLogEntry.page.automation_deleted",values:{automationType:(0,d().KE)(Ne.meta.automationType),pageTitle:(0,j().wS)(Ne)}});case"page.file_deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Deleted file {fileName} from {pageTitle}",id:"auditLogEntry.page.file_deleted",values:{fileName:X(Ne),pageTitle:(0,j().wS)(Ne)}});case"integration.secret_reset":return(0,A.jsx)(n().sA,{defaultMessage:"Reset authentication secret of {botName}",id:"auditLogEntry.integration.secret_reset",values:{botName:(0,d().Hg)(Be,Ne.meta.bot)}});case"integration.settings.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated settings of {botName}",id:"auditLogEntry.integration.settings.update",values:{botName:(0,d().Hg)(Be,Ne.meta.bot)}});case"integration.permission.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated capabilities of {botName}: {botCapabilities}",id:"auditLogEntry.integration.permission.update",values:{botName:(0,d().Hg)(Be,Ne.meta.bot),botCapabilities:C(Ne.meta.bot)}});case"workspace.external_account_connected":return(0,A.jsx)(n().sA,{defaultMessage:"Connected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_connected",values:{integrationName:(0,d().Hg)(Be,Ne.meta.bot)}});case"workspace.external_account_disconnected":return(0,A.jsx)(n().sA,{defaultMessage:"Disconnected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_disconnected",values:{integrationName:(0,d().Hg)(Be,Ne.meta.bot)}});case"workspace.integration_added":return(0,A.jsx)(n().sA,{defaultMessage:"Added {integrationName} to the workspace",id:"auditLogEntry.workspace.workspace.integration_added",values:{integrationName:(0,d().Hg)(Be,Ne.meta.bot)}});case"workspace.integration_removed":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {integrationName} from workspace",id:"auditLogEntry.workspace.workspace.integration_removed",values:{integrationName:(0,d().Hg)(Be,Ne.meta.bot)}});case"workspace.integration_webhook_inactivated":return(0,A.jsx)(n().sA,{defaultMessage:"Webhook events for {integrationName} failing",id:"auditLogEntry.workspace.integration_webhook_inactivated",values:{integrationName:(0,d().Hg)(Be,Ne.meta.bot)}});case"workspace.integration_webhook_reactivated":return(0,A.jsx)(n().sA,{defaultMessage:"Webhook events for {integrationName} restored",id:"auditLogEntry.workspace.integration_webhook_reactivated",values:{integrationName:(0,d().Hg)(Be,Ne.meta.bot)}});case"user.settings.analytics_tracking_setting_updated":return(0,A.jsx)(n().sA,{defaultMessage:"{enabledOrDisabled} page view tracking on their user account",id:"auditLogEntry.user.settings.analytics_tracking_setting_updated",values:{enabledOrDisabled:(0,d().ko)(Be,Boolean(null===(we=Ne.changes)||void 0===we||null===(we=we.enabled)||void 0===we?void 0:we.newValue))}});case"workspace.settings.guest_invite_request_setting_updated":return function(e,t){var a;return(0,A.jsx)(n().sA,{defaultMessage:"{enabledOrDisabled} allowing members to request inviting guests",id:"auditLogEntry.workspace.settings.guest_invite_request_setting_updated",values:{enabledOrDisabled:(0,d().ko)(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(Ne,Be);case"workspace.settings.ai_leap_toggled":return function(e,t){var a;return(0,A.jsx)(n().sA,{defaultMessage:"{enabledOrDisabled} Notion AI LEAP (Learning & Early Access Program)",id:"auditLogEntry.workspace.settings.ai_leap_toggled",values:{enabledOrDisabled:(0,d().ko)(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(Ne,Be);case"workspace.guest_invite_request_resolved":return function(e,t){const a=e.changes.requestStatus.newValue;return"approved"===a?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.approved",defaultMessage:"Approved {requestorNameAndEmail}'s request to add guest {guestNameAndEmail} to {pageTitle}",values:{requestorNameAndEmail:(0,d().q4)(t,e.target.user),guestNameAndEmail:(0,d().q4)(t,e.meta.targetGuest),pageTitle:(0,j().uU)(e.meta.pagesAndRoles[0].page)}}):"rejected"===a?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.rejected",defaultMessage:"Declined request to add guest {guestNameAndEmail} to {pageTitle}",values:{guestNameAndEmail:(0,d().q4)(t,e.meta.targetGuest),pageTitle:(0,j().uU)(e.meta.pagesAndRoles[0].page)}}):(0,A.jsx)(A.Fragment,{})}(Ne,Be);case"workspace.settings.integration_restrictions.integration_added_to_allowlist":case"workspace.settings.integration_restrictions.integration_removed_from_allowlist":return function(e){if("workspace.settings.integration_restrictions.integration_added_to_allowlist"===e.actionName)return(0,A.jsx)(n().sA,{defaultMessage:"Added {integrationName} to the approved connections list",id:"auditLogEntry.workspace.settings.integration_allowlist_add",values:{integrationName:e.meta.integrationName}});return(0,A.jsx)(n().sA,{defaultMessage:"Removed {integrationName} from the approved connections list",id:"auditLogEntry.workspace.settings.integration_allowlist_remove",values:{integrationName:e.meta.integrationName}})}(Ne);case"workspace_exported":case"public_page_cleared":case"password_changed":case"password_cleared":case"password_set":case"member_joined":case"scim_token_generated":case"scim_token_revoked":case"invite_link_reset":case"idp_metadata_xml_removed":case"idp_metadata_xml_updated":case"workspace.members_exported":case"organization.created":return(0,A.jsx)(n().sA,{...l().D[Ne.actionName]});case"organization.saml.idp_metadata_xml_removed":return(0,A.jsx)(n().sA,{...l().D.idp_metadata_xml_removed});case"organization.saml.idp_metadata_xml_updated":return(0,A.jsx)(n().sA,{...l().D.idp_metadata_xml_updated});case"organization.owner.added":return(0,A.jsx)(n().sA,{defaultMessage:"Added {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.added",values:{ownerNameAndEmail:(0,d().xC)(Be,Ne)}});case"organization.owner.removed":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.removed",values:{ownerNameAndEmail:(0,d().xC)(Be,Ne)}});case"organization.audit_log_exported":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.organization.audit_log_exported",defaultMessage:"Exported the organization audit log for last {duration} days",values:{duration:Ne.meta.duration}});case"organization.settings.name_changed":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.organization.settings.name_changed",defaultMessage:"Changed the organization name from “{oldValue}“ to “{newValue}“",values:{oldValue:Ne.changes.name.oldValue,newValue:Ne.changes.name.newValue}});case"organization.workspace.removed":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.organization.workspace.removed",defaultMessage:"Removed workspace “{workspaceName}“ from the organization",values:{workspaceName:Ne.target.space.name}});case"organization.email_domain.verified":return(0,A.jsx)(n().sA,{defaultMessage:"Added a verified email domain “{emailDomain}“ to the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.verified",values:{emailDomain:Ne.changes.domain}});case"organization.email_domain.unverified":return(0,A.jsx)(n().sA,{defaultMessage:"Removed a verified email domain “{emailDomain}“ from the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.unverified",values:{emailDomain:Ne.changes.domain}});case"organization.default_space_settings.disable_guests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for guests",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.disable_guests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(Ae=Ne.changes)||void 0===Ae||null===(Ae=Ae.enabled)||void 0===Ae?void 0:Ae.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_ai_feature_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for AI feature",id:"auditlog.actionNames.eventColumn.organization.enable_ai_feature_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(Me=Ne.changes)||void 0===Me||null===(Me=Me.enabled)||void 0===Me?void 0:Me.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_page_analytics_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for page view tracking for workspace analytics",id:"auditlog.actionNames.eventColumn.organization.disable_page_analytics_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(Ce=Ne.changes)||void 0===Ce||null===(Ce=Ce.enabled)||void 0===Ce?void 0:Ce.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_public_access_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for members sharing pages publicly",id:"auditlog.actionNames.eventColumn.organization.disable_public_access_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(Ie=Ne.changes)||void 0===Ie||null===(Ie=Ie.enabled)||void 0===Ie?void 0:Ie.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_move_to_space_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for moving or duplicating pages to other workspaces",id:"auditlog.actionNames.eventColumn.organization.disable_move_to_space_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(Te=Ne.changes)||void 0===Te||null===(Te=Te.enabled)||void 0===Te?void 0:Te.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_export_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for exporting pages",id:"auditlog.actionNames.eventColumn.organization.disable_export_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(ke=Ne.changes)||void 0===ke||null===(ke=ke.enabled)||void 0===ke?void 0:ke.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.organization.disable_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(_e=Ne.changes)||void 0===_e||null===(_e=_e.enabled)||void 0===_e?void 0:_e.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_guest_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_guest_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(ze=Ne.changes)||void 0===ze||null===(ze=ze.enabled)||void 0===ze?void 0:ze.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_guest_invite_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request inviting guests",id:"auditlog.actionNames.eventColumn.organization.enable_guest_invite_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(De=Ne.changes)||void 0===De||null===(De=De.enabled)||void 0===De?void 0:De.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_external_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_external_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(Pe=Ne.changes)||void 0===Pe||null===(Pe=Pe.enabled)||void 0===Pe?void 0:Pe.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.integration_restriction_updated":return function(e){const t=void 0,{newValue:a}=e.changes.integration_restrictions;if(a===t)return(0,A.jsx)(n().sA,{defaultMessage:"Updated organization integrations setting: workspaces may have their own integration restrictions",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.undefined"});switch(a){case"no_restrictions":return(0,A.jsx)(n().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install all integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.no_restrictions"});case"approved_only":return(0,A.jsx)(n().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install only approved integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.approved_only"});case"approved_or_built_by_notion":return(0,A.jsx)(n().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install only approved and Notion-built integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.approved_or_built_by_notion"});default:(0,i().HB)(a)}}(Ne);case"form_response.created":return(0,A.jsx)(n().sA,{defaultMessage:"New form submission for {formName} created",id:"auditLogEntry.workspace_form_submission_created",values:{formName:(0,j().$T)(Ne)}});case"form.created":return(0,A.jsx)(n().sA,{defaultMessage:"Created form",id:"auditLogEntry.workspace_form_created"});case"form.content.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Edited form {formName}",id:"auditLogEntry.workspace_form_edited",values:{formName:(0,j().$T)(Ne)}});case"page.viewed.by_shared_email_domain_user":return(0,A.jsx)(n().sA,{defaultMessage:"{pageName} viewed by user on shared email domain",id:"auditLogEntry.page_viewed_by_shared_email_domain_user",values:{pageName:(0,j().wS)(Ne)}});default:if("local"!==Re)return m().log({level:"error",from:"auditLogEvent",type:"AuditLogEvent",data:{miscDataToConvertToString:{data:Ne}}}),(0,A.jsx)(A.Fragment,{});(0,i().HB)(Ne)}var We}function X(e){const{name:t,extension:a}=e.target.file;return t?`“${t}“`:a?(0,A.jsx)(n().sA,{...l().D.a_file_with_extension,values:{extension:a}}):(0,A.jsx)(n().sA,{...l().D.a_file})}var Z=()=>a(31448),J=()=>a(103151),ee=()=>a(907721),te=()=>a(803290),ae=()=>a(174114),se=()=>a(712437),ne=()=>a(579494),oe=()=>a(29869),ie=()=>a(485966),re=()=>a(413871);function le(e){const{pageAuditLogEntry:t}=e,{table:a,id:s,meta:n}=t.target.page||{},o=(0,ae().IS)((e=>({link:{display:"inline",color:e.text.secondary,textDecoration:"underline"}})),[]),i=(0,te().K8)((()=>{const{currentSpaceStore:e}=ie().default.state;return null!=n&&n.parent&&e?(0,re().Oo)(e,n.parent):e}),[n]),r=(0,te().K8)((()=>s&&a&&i?re().Bv.createChildStore(i,{id:s,table:a}):null),[i,s,a]),l=(0,te().K8)((()=>r?(0,oe().Ay)({store:r,pageVisitSource:se().y8.AuditLog}):null),[r]);return l?(0,A.jsxs)(A.Fragment,{children:["“",(0,A.jsx)(ne().A,{style:o.link,external:!0,href:l,children:(0,j().wS)(t,{noQuotes:!0})}),"“"]}):(0,A.jsx)(A.Fragment,{children:(0,j().wS)(t)})}function de(e){const{auditLogEntry:t,id:a}=e,[o,i]=(0,s.useState)(""),r=(0,n().tz)();return(0,s.useEffect)((()=>{const e=document.getElementById(a);i((null==e?void 0:e.textContent)||"")}),[a]),(0,A.jsx)(J().A,{style:{whiteSpace:"normal"},delayThreshold:80,renderTooltip:()=>(0,A.jsx)(ue,{text:o,auditLogEntry:t}),placement:ee().W.Bottom,render:e=>(0,A.jsx)("div",{...e,style:{fontSize:14,...Z().RC},id:a,children:(0,A.jsx)(ce,{auditLogEntry:t,env:"production",intl:r})})})}function ce(e){const{auditLogEntry:t,env:a,intl:s}=e;return $({auditLogEntry:t,env:a,intl:s,options:{renderPageName:e=>(0,A.jsx)(le,{pageAuditLogEntry:e})}})}function ue(e){var t,a;const{auditLogEntry:s,text:o}=e,i=(0,n().tz)(),r=(0,w().aj)({auditLogEntry:s,intl:i}),l=(0,w().Bb)({auditLogEntry:s,intl:i});return(0,A.jsxs)("div",{children:[o,(null===(t=s.actor.meta)||void 0===t?void 0:t.ipAddress)&&(0,A.jsx)("div",{children:(0,A.jsx)(n().sA,{defaultMessage:"IP address: {ip}",values:{ip:null===(a=s.actor.meta)||void 0===a?void 0:a.ipAddress},id:"auditLogSettings.metadata.ipAddress"})}),(0,A.jsx)("div",{children:(0,w().BN)(s,i)}),r&&(0,A.jsx)(n().sA,{id:"auditLogColumnEvent.tooltip.audienceMessage",defaultMessage:"Page audience: {audience}",values:{audience:r}}),l&&(0,A.jsx)(n().sA,{id:"auditLogColumnEvent.tooltip.audienceMessage.forms",defaultMessage:"Form audience: {audience}",values:{audience:l}})]})}},783e3:(e,t,a)=>{a.d(t,{A:()=>c});a(242343);var s=()=>a(466003),n=()=>a(752903),o=()=>a(670481),i=()=>a(14931),r=()=>a(76394),l=()=>a(591130),d=a(163643);const c=function(e){let{isStrikedThrough:t,backgroundColor:c,onClickRemove:u,target:g,disabled:m,showInfoIcon:p,style:h,shouldWrap:f}=e;const x=(0,a(237385).v3)(),v=(0,a(653998).tz)(),{device:b}=x,y=(0,a(803290).K8)((()=>function(e){let t,{target:a,intl:n,showInfoIcon:c}=e;switch(a.type){case"newUser":t=a.value.email.trim();break;case"existingUser":t=(0,i().c6)(n,a.value);break;case"bot":t=(0,s().Hg)(a.value);break;case"group":t=(0,l().Pf)({intl:n,groupName:a.value.name});break;default:(0,r().HB)(a)}return c?(u=t,(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,o().G)({marginRight:4,width:14,height:14}),u]})):t;var u}({target:g,intl:v,showInfoIcon:p})),[g,v,p]);return(0,d.jsx)(a(809785).A,{showRemoveButton:!0,isSingle:!0,isStrikedThrough:t,backgroundColor:c,format:b.isMobile?n().NY.Large:n().NY.Medium,onClickRemove:e=>function(e,t,a){e.stopPropagation(),t(a)}(e,u,g),disabled:m,disabledFeedback:!0,value:y,style:h,shouldWrap:f})}},783271:(e,t,a)=>{a.d(t,{NQ:()=>u,YM:()=>d,_B:()=>g,sg:()=>m,zJ:()=>c});a(242343);var s=()=>a(174114),n=()=>a(653998),o=()=>a(220413),i=()=>a(76394),r=()=>a(695951),l=a(163643);function d(e){let{content:t,isBlue:a}=e;const n=(0,s().IS)((e=>({badge:{marginLeft:0,marginRight:6,padding:"2px 6px",fontSize:13,lineHeight:"18px",...a&&{background:"light"===e.mode?o().Tj.diffBackground:"rgba(35, 131, 226, 0.2)",color:e.blueColor}}})),[a]);return(0,l.jsx)(r().A,{content:t,style:n.badge})}function c(){return(0,l.jsx)(d,{content:(0,l.jsx)(n().sA,{id:"organizationConsole.singleUserView.suspendedBadge",defaultMessage:"Suspended"})})}function u(e){let{highestRole:t}=e;const a=function(){switch(t){case"owner":return(0,l.jsx)(n().sA,{id:"organizationConsole.organizationRole.ownerRole",defaultMessage:"Org owner"});case"member":return(0,l.jsx)(n().sA,{id:"organizationConsole.organizationRole.memberRole",defaultMessage:"Member"});case"guest":return(0,l.jsx)(n().sA,{id:"organizationConsole.organizationRole.guestRole",defaultMessage:"Guest"});case"none":return;default:(0,i().HB)(t)}}();return a?(0,l.jsx)(d,{isBlue:!0,content:a}):null}function g(e){let{emailDomain:t}=e;return t?(0,l.jsx)(d,{content:(0,l.jsx)(n().sA,{id:"organizationConsole.singleUserView.managedByDomainBadge",defaultMessage:"Managed by {domain}",values:{domain:t}})}):null}function m(){return(0,l.jsx)(d,{content:(0,l.jsx)(n().sA,{id:"organizationConsole.singleUserView.legalHoldBadge",defaultMessage:"On legal hold"})})}},785435:(e,t,a)=>{a.d(t,{A:()=>D});a(362833),a(725707),a(244387);var s=a(242343),n=()=>a(803290),o=()=>a(174114),i=()=>a(878627),r=()=>a(668649),l=()=>a(781045),d=()=>a(653998),c=()=>a(220413),u=()=>a(188877),g=()=>a(975392),m=()=>a(76394),p=()=>a(662505),h=()=>a(209684),f=()=>a(535906),x=()=>a(559637),v=()=>a(59175),b=()=>a(935091),y=()=>a(858023),S=()=>a(951540),j=()=>a(88271),w=()=>a(35462),A=()=>a(307542),M=()=>a(640979),C=()=>a(907721),I=()=>a(836331),T=()=>a(579031),k=a(163643);const _={page:(0,k.jsx)(d().sA,{id:"auditlogEventFilter.categoryName.page",defaultMessage:"Page"}),space:(0,k.jsx)(d().sA,{id:"auditlogEventFilter.categoryName.workspace",defaultMessage:"Workspace"}),team:(0,k.jsx)(d().sA,{id:"auditlogEventFilter.categoryName.team",defaultMessage:"Teamspace"}),account:(0,k.jsx)(d().sA,{id:"auditlogEventFilter.categoryName.account",defaultMessage:"Account"}),organization:(0,k.jsx)(d().sA,{id:"auditlogEventFilter.categoryName.organization",defaultMessage:"Organization"}),form:(0,k.jsx)(d().sA,{id:"auditlogEventFilter.categoryName.form",defaultMessage:"Form"})};function z(e){let{totalNumEventsForCategory:t,numSelectedForCategory:a,category:s,categoryOpen:n,shouldShowCount:i,onCategoryClick:r,onCategoryToggleClick:l,...c}=e;const u=(0,o().IS)((e=>({textWrapperStyle:{margin:0},title:{margin:0,display:"flex",alignItems:"center"},categoryText:{marginLeft:8,fontWeight:600},categorySubHeader:{marginLeft:6},toggleButton:{marginLeft:2,marginRight:2}})),[]);let g,m;return g=i?t===a?(0,k.jsx)(d().sA,{id:"auditlogEventFilter.allEventsSelected",defaultMessage:"({totalNum} events)",values:{totalNum:t}}):(0,k.jsx)(d().sA,{id:"auditlogEventFilter.numEventsSelected",defaultMessage:"({numSelected} of {totalNum} events selected)",values:{numSelected:a,totalNum:t}}):null,m=t===a||0!==a&&"partial",(0,k.jsx)(f().A,{...c,className:"notranslate",textWrapperStyle:u.textWrapperStyle,focused:!1,title:(0,k.jsxs)("div",{style:u.title,children:[(0,k.jsx)(T().A,{style:u.toggleButton,open:n,onClick:l,isSidebar:!1,fill:!1,icon:"chevron"}),(0,k.jsx)(x().A,{checked:m,size:14,checkSize:8,onClick:r}),(0,k.jsx)(w().A,{style:u.categoryText,children:_[s]}),(0,k.jsx)(w().A,{isSecondaryColor:!0,style:u.categorySubHeader,children:g})]})})}const D=function(e){let{onChange:t,lastSelectionStore:i,componentStore:r}=e;const l=(0,o().DP)(),c=(0,n().uB)(void 0,a(210466).A),u=(0,n().K8)((()=>r.state.isMenuOpen),[r]),g=(0,s.useCallback)((()=>(0,k.jsx)(U,{onChange:t,componentStore:r,lastSelectionStore:i,menuListStore:c})),[t,r,i,c]),m=(0,s.useCallback)((()=>function(e,t){e.setState({...e.state,actionSelections:{...t.state.actionSelections}}),L(!1,e)}(r,i)),[r,i]),p=R(l),h=(0,k.jsx)(d().sA,{id:"auditlogEventFilter.title",defaultMessage:"Event"}),f=(0,k.jsx)(O,{componentStore:r,title:h});return(0,k.jsx)(a(634369).A,{marginAfter:!1,children:(0,k.jsx)(a(443252).Ay,{popupType:a(466321).n.Popup,placementToOrigin:C().W.Bottom,alignmentToOrigin:C().C.Start,open:u,render:g,onDismiss:m,keepFocus:!0,origin:f,preventScaleTransition:!0,style:p.popup})})};function P(e){var t;return g().oE([e.key,null===(t=e.localizedActionName)||void 0===t?void 0:t.toLowerCase()]).join(" ")}function N(e){let{totalNumSelected:t,totalNumEvents:a}=e;const s=(0,o().IS)((e=>({container:{background:c().Ay.diffBackground,color:c().Ay.diffTextColor,paddingInline:6,margin:8,marginBottom:0,borderRadius:4,fontWeight:510,width:"fit-content"}})),[]);return(0,k.jsx)(w().A,{style:s.container,children:(0,k.jsx)(d().sA,{id:"auditLogEventFilter.selectedPill",defaultMessage:"{totalNumSelected} of {totalNumEvents} selected",values:{totalNumSelected:t,totalNumEvents:a}})})}function R(e){return{container:{minWidth:460},searchInput:{padding:8,borderBottomLeftRadius:0,borderBottomRightRadius:0,boxShadow:"none",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.lightDividerColor},popup:{paddingBottom:8}}}function B(e){const{renderGroup:t,shouldShowCount:a,totalNumEventsForCategory:s,numSelectedForCategory:n,componentStore:o}=e,i=t.category,r=()=>{o.toggleCategorySelection(t)},l=()=>{o.selectCategorySelection(t)};return{key:i,action:r,render:e=>(0,k.jsx)(z,{totalNumEventsForCategory:s,numSelectedForCategory:n,category:i,categoryOpen:o.state.categoryToggleOpen[i],shouldShowCount:a,onCategoryToggleClick:r,onCategoryClick:l,...e}),localizedActionName:null,actionName:null}}function E(e){const{actionName:t,renderGroup:a,componentStore:s,intl:n}=e,o=()=>{s.selectActionName(t,a)},i=n.formatMessage(r().T0[t]);return{key:t,action:o,render:e=>(0,k.jsx)(f().A,{...e,icon:(0,k.jsx)(x().A,{checked:s.state.actionSelections[t],size:14,checkSize:8,onClick:o}),focused:!1,title:i,className:"notranslate",style:{paddingLeft:32},textWrapperStyle:{marginLeft:4}}),actionName:t,localizedActionName:i}}function L(e,t){t.setState({...t.state,isMenuOpen:e})}function O(e){let{title:t,componentStore:a}=e;const s=(0,n().K8)((()=>a.hasActionNameSelected()),[a]);return(0,k.jsx)(p().A,{on:s,icon:(0,l().lightningIcon)({width:16,marginRight:6,fill:"currentColor"}),title:(0,k.jsx)("span",{children:t}),onClick:()=>{L(!0,a)}})}function U(e){let{onChange:t,componentStore:a,lastSelectionStore:r,menuListStore:l}=e;const c=(0,o().DP)(),g=(0,d().tz)(),p=(0,s.useCallback)((e=>function(e,t){t.updateSearchQuery(e.target.value)}(e,a)),[a]),f=R(c),x=(0,n().K8)((()=>[...(0,m().WP)(i().BU).reduce(((e,t)=>{let[a,s]=t;return I().default.checkGate({gateName:a})?e:[...e,...s]}),[]),...(0,A().Qd)()?[]:["team_guest_default_permission_updated"],...(0,A().nJ)()?[]:["guest_membership_requests_toggled"],"page.shared_with_email_domain"]),[]),{actionSelections:w,categoryToggleOpen:C,renderOrder:T,searchQuery:_}=(0,n().K8)((()=>{const{actionSelections:e,categoryToggleOpen:t,renderOrder:s,searchQuery:n}=a.state;return{actionSelections:e,categoryToggleOpen:t,renderOrder:s,searchQuery:n}}),[a]),z=[];let D=0,O=0;for(const s of T){const e=s.category,t=[];let n=0;for(const o of s.orderedActions)x.includes(o)||(t.push(E({actionName:o,renderGroup:s,intl:g,componentStore:a})),w[o]&&n++);if(D+=n,O+=t.length,z.push(B({renderGroup:s,shouldShowCount:!Boolean(_),totalNumEventsForCategory:t.length,numSelectedForCategory:n,componentStore:a})),C[e])if(_){const e=(0,u().Ay)(_,t,P);z.push(...e)}else z.push(...t)}const U={key:"results",items:z,render:e=>(0,k.jsx)(j().A,{...e,title:null,loading:!1})};return(0,k.jsxs)("div",{style:f.container,children:[(0,k.jsx)(v().A,{style:f.searchInput,placeholder:g.formatMessage({id:"auditlogEventFilter.searchPlaceholder",defaultMessage:"Search for an event"}),onChange:p,value:_,showClearButton:!0}),_&&(0,k.jsx)(N,{totalNumSelected:D,totalNumEvents:O}),(0,k.jsx)(b().A,{menuType:M().gu.Popup,header:null,maxHeight:356,children:(0,k.jsx)(y().Ay,{type:y().Oh.Vertical,store:l,initialFocus:0,sections:[U]})}),(0,k.jsxs)(j().A,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},children:[(0,k.jsx)(h().p,{onClick:()=>{!function(e){e.clearAllSelections()}(a)},children:(0,k.jsx)(d().sA,{id:"auditlogEventFilter.clearButton",defaultMessage:"Clear"})}),(0,k.jsx)(S().A,{onClick:()=>{!function(e,t,a){const s=t.getAllActionNames(),n=t.getSelectedActionNames();e(s.length===n.length?[]:n),0===n.length&&t.reset(),a.setState({...a.state,actionSelections:{...t.state.actionSelections}}),L(!1,t)}(t,a,r)},children:(0,k.jsx)(d().sA,{id:"auditlogEventFilter.applyButton",defaultMessage:"Apply"})})]})]})}},789874:(e,t,a)=>{a.d(t,{J:()=>r});var s=()=>a(237385),n=()=>a(162901),o=()=>a(76394),i=()=>a(818369);function r(e){const{organizationId:t}=e,a=(0,s().v3)(),[{status:r,value:l},d]=(0,n().Yb)((async()=>{if(!t)return;const e=await i().callApi({eventName:"getDomainVerificationCodesForOrganization",environment:a,data:{organizationId:t}});if("success"===e.type)return e.data.domainVerifications;if("failed"===e.type)throw e.error;return(0,o().HB)(e)}),[a,t]);return{loading:"pending"===r,didError:"rejected"===r,domainVerifications:l,refetchDomainVerifications:d}}},801008:(e,t,a)=>{a.d(t,{m:()=>_,A:()=>z});a(725707),a(491955),a(403517),a(113085);var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(174114),r=()=>a(319989),l=()=>a(653998),d=()=>a(31448),c=()=>a(539174),u=()=>a(91472),g=()=>a(235843),m=()=>a(575015),p=()=>a(209684),h=()=>a(966789),f=()=>a(286404),x=()=>a(951540),v=()=>a(103151),b=()=>a(35462),y=()=>a(129978);const S=new(y().O2)("teamPermissionsInvite",(async()=>await Promise.all([a.e(96159),a.e(75134),a.e(43380),a.e(9304),a.e(96346),a.e(36192),a.e(55373),a.e(62475),a.e(3151),a.e(44711),a.e(98629),a.e(53321),a.e(58550),a.e(16471),a.e(90825),a.e(37353),a.e(29151),a.e(16908),a.e(22900),a.e(49889),a.e(97727),a.e(85128),a.e(83700),a.e(95555),a.e(58823),a.e(36209),a.e(92845),a.e(71718),a.e(48486),a.e(83324),a.e(63077),a.e(41870),a.e(90966),a.e(88552),a.e(90214),a.e(74562),a.e(8184),a.e(28271),a.e(17254),a.e(18895),a.e(78708),a.e(28721),a.e(4422),a.e(28866),a.e(67435),a.e(17989),a.e(48632),a.e(90625),a.e(76181),a.e(59794),a.e(72832),a.e(90280),a.e(26483),a.e(33813),a.e(81768),a.e(71104),a.e(2804),a.e(82850),a.e(84778),a.e(69914),a.e(11341),a.e(92011),a.e(19361),a.e(63327),a.e(26090),a.e(38482),a.e(12341),a.e(50984),a.e(47864),a.e(40828),a.e(76007),a.e(5023),a.e(90978),a.e(65554),a.e(53571),a.e(66885),a.e(21194),a.e(67780),a.e(96933),a.e(87598),a.e(23063),a.e(84341),a.e(3965),a.e(93052),a.e(67200),a.e(6463),a.e(98071),a.e(45620),a.e(96453),a.e(8081),a.e(25368),a.e(38546),a.e(80759),a.e(67183),a.e(45354),a.e(82720),a.e(83181),a.e(68455),a.e(28773),a.e(76074),a.e(78917),a.e(72883),a.e(1440),a.e(45986),a.e(67378),a.e(9353),a.e(91137),a.e(21864),a.e(52181),a.e(92924),a.e(66406),a.e(19167),a.e(55717),a.e(10152),a.e(40186),a.e(73738),a.e(70584),a.e(97074),a.e(48979),a.e(91957),a.e(76026),a.e(67262),a.e(29616),a.e(75681)]).then(a.bind(a,159671)))),j=(0,y()._h)(S,(e=>e.TeamPermissionsInvite));var w=()=>a(307542),A=()=>a(861095),M=()=>a(904697),C=a(163643);const I={button:{height:32},multiButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"space-between"},singleButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"right"},containerLeftAligned:{display:"flex",alignItems:"left",justifyContent:"left",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none",width:"100%"},titleAndIcon:{paddingBottom:18,alignItems:"center",display:"flex"},addMembersTo:{minWidth:"25%"},icon:{paddingRight:3,paddingLeft:3},teamName:{paddingRight:10,fontWeight:d().Wy.medium,...d().RC,maxWidth:250},full:{width:"100%"},inviteInput:{zIndex:1},submitTooltip:{minWidth:250},subtitle:{paddingTop:16,position:"relative",zIndex:-1}};function T(e){var t;let{isLoading:a,isNewlyCreatedTeam:s,onDismiss:n,onSubmit:i,inviteTargets:r,inviteRole:d,canEditSpaceMembership:c,membershipRequestsDisabled:u,spaceAllowedDomains:g,hasTeamGuestsMatchAllowedDomain:m}=e;const p=r.length>0,b=r.filter((e=>(0,A().yi)(e))).length>0&&u&&!c,y=(0,o().K8)((()=>(0,w().Qd)()&&"team_level_guest"===d&&r.some((e=>"group"===e.type||"existingUser"===e.type&&"none"!==e.spaceRole&&"not_in_space"!==e.spaceRole))),[d,r]),S=y||b||m;if(a)return(0,C.jsx)(x().A,{style:{...I.button,minWidth:80},disabled:!0,children:(0,C.jsx)(h().A,{onDarkBackground:!0})});if(s&&!p)return(0,C.jsx)(f().A,{size:"lg",style:I.button,onClick:n,disabled:a,children:(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.inviteModal.skipForNow",defaultMessage:"Skip for now"})});const j=y?(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.memberOrGroupInvitedAsTeamGuestTooltip",defaultMessage:"Cannot add space members or groups as teamspace guests. Remove them to continue."}):m?(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.hasTeamGuestsMatchAllowedDomain",defaultMessage:"Cannot add users with {emailDomains} as teamspace guests. Remove them to continue.",values:{emailDomains:null==g||null===(t=g.map((e=>`@${e}`)))||void 0===t?void 0:t.join(", ")}}):null;return(0,C.jsx)(v().A,{textWrap:!0,style:I.submitTooltip,disableTooltip:!j,renderTooltip:()=>j,render:e=>(0,C.jsx)(x().A,{style:I.button,onClick:i,disabled:!p||a||S,...e,children:(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlayV2.inviteButton.label",defaultMessage:"Invite"})})})}function k(e){let{inviteTargets:t,workspaceName:a,canEditSpaceMembership:s,membershipRequestsDisabled:n,isFreeTier:o,inviteRole:i,hasTeamGuestsMatchAllowedDomain:r}=e;if(void 0===s)return null;if(!t||0===t.length)return null;const d=t.map((e=>{if("group"!==e.type&&(0,A().yi)(e))return e.value.email})).filter((e=>e));if(!d||0===d.length)return null;const c=e=>(0,C.jsx)("b",{children:e}),u=a??"this workspace";return s?o?(0,C.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingularOwner.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a workspace owner.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPluralOwners.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as workspace owners.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})}):"team_level_guest"===i?r?null:(0,C.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.teamGuest.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed teamspace guest.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.teamGuest.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed teamspace guests.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})}):(0,C.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed workspace member.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed workspace members.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})}):n?(0,C.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipDisabled.subtitle",defaultMessage:"You can't add workspace guests to a teamspace. Ask your admin to add them as workspace members first."})}):(0,C.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipSingular.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{guestEmail}</b> as a member to {workspaceName}.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipPlural.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> as members to {workspaceName}.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})})}function _(e){const{store:t,isSmall:a}=e,s=(0,n().v3)(),o=(0,i().IS)((e=>({button:{marginRight:5,marginLeft:5,height:32,fontSize:a?12:14},icon:{width:a?12:14,height:a?12:14}})),[a]);return(0,C.jsx)(p().p,{onClick:async()=>{const e=await u().R.clipboardActions.load();e.copyString({environment:s,stringValue:(0,M().createTeamInviteLink)(t.id),copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),c().lY(s,{store:t})},icon:r().w,style:o.button,iconStyle:o.icon,isBlue:!0,children:a?(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.copyLinkCondensedButton.label",defaultMessage:"Copy link"}):(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.copyLinkButton.label",defaultMessage:"Copy invite link"})})}const z=function(e){let{store:t,permissionsInviteStore:i,isNewlyCreatedTeam:r,onSubmitSuccessful:d,onDismiss:c}=e;const u=(0,n().v3)(),{teamName:p,workspaceName:h,canEditSpaceMembership:f,membershipRequestsDisabled:x,spaceAllowedDomains:v}=(0,o().K8)((()=>{const{currentSpaceStore:e}=a(485966).default.state;return{teamName:t.getName(),workspaceName:null==e?void 0:e.getName(),canEditSpaceMembership:null==e?void 0:e.canEditMembership(),membershipRequestsDisabled:null==e?void 0:e.getDisableMembershipRequests(),spaceAllowedDomains:null==e?void 0:e.getEmailDomains()}}),[t]);(0,s.useEffect)((()=>()=>{r&&a(628854).L0({environment:u,teamStore:t,shouldScroll:!0})}),[r,t,u]);const[b,y]=(0,s.useState)(!1),S=(0,o().K8)((()=>i.state.inviteTargets),[i]),z=(0,o().K8)((()=>i.state.inviteTargets.length),[i]),D=(0,o().K8)((()=>i.state.inviteRole),[i]),P=(0,o().K8)((()=>a(764227).dL()),[]),N=(0,o().K8)((()=>!(null==v||!v.length||"team_level_guest"!==D||!(0,w().Qd)())&&S.some((e=>"group"!==e.type&&(0,a(599932).Wy)(v,e.value.email)))),[v,D,S]),R=(0,o().K8)((()=>!P&&!(0,M().isTeamInviteLinkDisabled)(t)),[t,P]),B=async()=>{if(y(!0),z>0){const e=i.state.inviteTargets,{success:a}=await g().l5({environment:u,store:t,permissionsInviteStore:i,inviteOrigin:"team_invite_overlay"});if(void 0!==f)if(a){const a=(0,A().c3)({inviteTargets:e,recordStore:t,canEditSpaceMembership:f});if(!a)return;setTimeout((()=>{m().D6({label:a})}))}else setTimeout((()=>{m().D6({label:(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlay.inviteMembersFailure.message",defaultMessage:"Failed to send invites"})})}))}g().Oo({permissionsInviteStore:i}),y(!1),null==d||d()};return(0,C.jsx)("div",{className:a(983050).jnS,style:{...I.full},children:(0,C.jsxs)("div",{style:I.containerLeftAligned,children:[(0,C.jsxs)("div",{style:I.titleAndIcon,children:[(0,C.jsx)("div",{style:I.addMembersTo,children:(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.membersTitle.label",defaultMessage:"Invite people to"})}),(0,C.jsx)("div",{style:I.icon,children:(0,C.jsx)(a(424339).x,{disabled:!0,store:t,size:20})}),(0,C.jsx)(a(501578).j,{style:I.teamName,children:p})]}),(0,C.jsxs)("div",{style:I.inviteInput,children:[(0,C.jsx)(j,{store:t,permissionsInviteStore:i,onEmptySubmit:B}),(0,C.jsx)("div",{style:I.subtitle,children:(0,C.jsx)(k,{inviteTargets:S,workspaceName:h,canEditSpaceMembership:f,membershipRequestsDisabled:x,isFreeTier:P,inviteRole:D,hasTeamGuestsMatchAllowedDomain:N})})]}),(0,C.jsx)("div",{style:R?I.multiButtonContainer:I.singleButtonContainer,children:(0,C.jsxs)("div",{style:R?I.multiButtonContainer:{},children:[R&&(0,C.jsx)(_,{store:t}),(0,C.jsx)(T,{isLoading:b,onSubmit:B,onDismiss:()=>{g().Oo({permissionsInviteStore:i}),null==c||c()},isNewlyCreatedTeam:r,inviteTargets:S,inviteRole:D,canEditSpaceMembership:f,membershipRequestsDisabled:x,spaceAllowedDomains:v,hasTeamGuestsMatchAllowedDomain:N})]})})]})})}},805469:(e,t,a)=>{a.d(t,{J:()=>c});a(725707),a(491955),a(403517),a(113085),a(242343);var s=()=>a(76394),n=()=>a(640979),o=()=>a(935091),i=()=>a(858023),r=()=>a(88271),l=()=>a(395705),d=a(163643);function c(e){let{sortProperties:t,onClick:a,currentSorts:c}=e;const u=t.map((e=>{if(null==c?void 0:c.some((t=>{let{propertyId:a}=t;return a===e.id})))return;return{key:e.name,render:t=>(0,d.jsx)(l().G,{...t,propertySchema:e,format:l().e.Name}),action:()=>a(e.id)}})).filter(s().O9);return u.length?(0,d.jsx)(o().A,{menuType:n().gu.Popup,children:(0,d.jsx)(i().Ay,{type:i().Oh.Vertical,initialFocus:void 0,sections:[{key:"properties",render:e=>(0,d.jsx)(r().A,{...e}),items:u}]})}):null}},825497:(e,t,a)=>{a.d(t,{o:()=>r});var s=()=>a(237385),n=()=>a(162901),o=()=>a(76394),i=()=>a(818369);function r(e){const{organizationId:t,includeCountsPerDomain:a}=e,r=(0,s().v3)(),[{status:l,value:d}]=(0,n().Yb)((async()=>{if(!t)return;const e=await i().callApi({eventName:"getVerifiedUsersCountForOrganization",environment:r,data:{organizationId:t,includeCountsPerDomain:a}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,o().HB)(e)}),[r,t,a]);return{loading:"pending"===l,didError:"rejected"===l,count:d}}},831585:(e,t,a)=>{a.d(t,{WK:()=>g,iv:()=>m});a(725707),a(491955),a(403517);var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(485966),r=()=>a(539048),l=()=>a(493127),d=()=>a(195260),c=()=>a(12933),u=a(163643);const g=40;function m(e){let{sidebarProps:t,tabRenderer:a,tabNames:n,tabAccessor:o,defaultTab:i,sceneProps:d,isOpen:c,onDismiss:g}=e;const[m,h]=(0,s.useState)(i),f=a[m];return(0,u.jsx)(r().s,{isOpen:c,onDismiss:g,render:()=>(0,u.jsx)(l().J,{left:(0,u.jsx)(p,{sidebarProps:t,tabRenderer:a,tabNames:n,tabAccessor:o,selectedTabName:m,setSelectedTab:h}),right:(0,u.jsx)("div",{style:{width:"calc(100% - 8px)"},children:f.scene({...d,setSelectedTab:h})}),showElevatedConsoleContainer:!0}),areaConstraint:{width:{type:"fixed",length:1280},height:{type:"fixed",length:800}},borderRadius:20})}function p(e){let{sidebarProps:t,tabRenderer:a,tabNames:r,tabAccessor:l,selectedTabName:g,setSelectedTab:m}=e;const p=(0,n().v3)(),{availableOrganizationFeatures:h}=(0,s.useContext)(d().D),f=(0,o().K8)((()=>i().default.state.currentUserStore),[]),x=(0,o().K8)((()=>r.filter((e=>l[e]({environment:p,currentUserStore:f,features:h})))),[f,p,l,r,h]),v=(0,s.useMemo)((()=>r.map((e=>({id:e,name:a[e].tab.name,icon:a[e].tab.icon,isSelected:g===e,onClick:()=>{m(e)},disabled:!x.includes(e)})))),[r,a,g,x,m]);return(0,u.jsx)(c().yc,{items:v,...t})}},832211:(e,t,a)=>{a.d(t,{Z:()=>S});a(242343);var s=()=>a(237385),n=()=>a(803290),o=()=>a(174114),i=()=>a(870122),r=()=>a(555296),l=()=>a(115692),d=()=>a(109926),c=()=>a(680369),u=()=>a(294997),g=()=>a(653998),m=()=>a(220413),p=()=>a(548694),h=()=>a(485966),f=()=>a(943066),x=a(163643);const v=function(e){let{tier:t}=e;const s=()=>"business"===t?(0,x.jsx)(g().sA,{id:"upgradeToBusinessBadge",defaultMessage:"Business"}):(0,x.jsx)(g().sA,{id:"upgradeToEnterpriseBadge",defaultMessage:"Enterprise"});return(0,x.jsx)(a(678523).A,{children:(0,x.jsx)(s,{})})};var b=()=>a(161813),y=()=>a(79196);function S(e){let{teamStore:t,isDefault:a,onChange:S=(()=>{}),parentSpaceStore:w}=e;const A=(0,s().v3)(),M=(0,y().q)(null==t?void 0:t.id),C=(0,b().c)(w),I="business",T=(0,n().K8)((()=>w??h().default.state.currentSpaceStore),[w]),k=(0,n().K8)((()=>(null==T?void 0:T.canAdmin())??!1),[T]),_=(0,n().K8)((()=>{if(T)return(0,p().GK)(A,T)}),[A,T]),z=(0,n().K8)((()=>{const e=null==t?void 0:t.getSettingsStore().getValue();return!!e&&"private"===(0,u().MA)(e)}),[t]),D=(0,o().IS)((()=>({icon:{width:c().Ev.default,height:c().Ev.default},iconContainer:{width:c().Ev.default,height:c().Ev.default,display:"flex",justifyContent:"center",alignItems:"center",marginLeft:5,marginRight:5}})),[]),P=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.privateTeamspaceUpsellBusiness.tooltip",defaultMessage:"Upgrade to Business Plan to enable Private teamspaces"}),N=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.defaultTeamSpace.title",defaultMessage:"Default"}),R=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.openTeamspace.title",defaultMessage:"Open"}),B=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.closedTeamSpace.title",defaultMessage:"Closed"}),E=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.privateTeamSpace.title",defaultMessage:"Private"}),L="dark"===(0,o().DP)().mode?m().Ay.uiLightGray:m().Ay.black,O=[{key:"open",icon:e=>(0,x.jsx)("div",{style:D.iconContainer,children:(0,d().V)({...e,...D.icon})}),iconColor:L,level:R,title:R,caption:(0,x.jsx)(g().sA,{id:"CreateTeamspaceMenu.openTeamspace.caption",defaultMessage:"Anyone can see and join this teamspace"}),disabled:!1,onSelect:()=>S("open",!1)},{key:"closed",icon:e=>(0,x.jsx)("div",{style:D.iconContainer,children:(0,l().peopleIcon)({...e,...D.icon})}),iconColor:L,level:B,title:B,caption:(0,x.jsx)(g().sA,{id:"CreateTeamspaceMenu.closedTeamspace.caption",defaultMessage:"Anyone can see this teamspace but not join"}),disabled:!1,onSelect:()=>S("closed",!1)},{key:"private",icon:e=>(0,x.jsx)("div",{style:D.iconContainer,children:(0,r().h)({...e,...D.icon})}),iconColor:L,level:E,title:C?E:(0,x.jsx)(j,{title:E,badge:(0,x.jsx)(v,{tier:I})}),caption:(0,x.jsx)(g().sA,{id:"CreateTeamspaceMenu.privateTeamspace.caption",defaultMessage:"Only members can see that this teamspace exists"}),disabled:!C&&!k,tooltip:C?void 0:P,onSelect:()=>{if(!C&&!z)return f().K(A,{from:"team_security_settings",upsell:{type:"product",product:I,limit:{type:"none"},trialability:"none"},dontOpenPlansOnCancel:!0});S("private",!1)}}];if(a||k){const e=a&&(!k||M),t={key:"default",icon:e=>(0,x.jsx)("div",{style:D.iconContainer,children:(0,i().globeIcon)({...e,...D.icon})}),iconColor:L,level:N,title:N,caption:(0,x.jsx)(g().sA,{id:"CreateTeamspaceMenu.defaultTeamspace.caption",defaultMessage:"Everyone at {spaceName} must be a member",values:{spaceName:_}}),disabled:!1,disableAllOptionsTooltip:e?k?(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.closeOrPrivateTeamspace.disabledTooltipOnlyDefaultTeam",defaultMessage:"Add another default teamspace to change teamspace permissions."}):(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.defaultTeamspace.disabledTooltipNonAdmin",defaultMessage:"You can't change this setting because you are not a workspace admin"}):void 0,onSelect:()=>S("open",!0)};O.unshift(t)}return O}function j(e){let{title:t,badge:a}=e;const s=(0,o().IS)((()=>({container:{display:"flex",flexWrap:"wrap",alignItems:"center"},badge:{marginLeft:5}})),[]);return(0,x.jsxs)("div",{style:s.container,children:[t,(0,x.jsx)("div",{style:s.badge,children:a})]})}},837606:(e,t,a)=>{a.d(t,{f:()=>o,o:()=>n});a(725707),a(491955),a(500234),a(771702);var s=()=>a(76394);let n=function(e){return e.All="All",e.Partial="Partial",e.None="None",e}({});class o extends(()=>a(129044))().default{getAllActionNames(){return(0,s().uv)(this.state.actionSelections)}getSelectedActionNames(){return this.getAllActionNames().filter((e=>this.state.actionSelections[e]))}hasActionNameSelected(){const e=this.getAllActionNames(),t=this.getSelectedActionNames();return t.length>0&&t.length!==e.length}updateSearchQuery(e){this.setState({...this.state,searchQuery:e})}toggleCategorySelection(e){const t=e.category;this.setState({...this.state,categoryToggleOpen:{...this.state.categoryToggleOpen,[t]:!this.state.categoryToggleOpen[t]}})}selectCategorySelection(e){const t=e.category,a=this.state.categorySelections[t],s=a===n.None||a===n.Partial?n.All:n.None,o=s===n.All,i={...this.state.actionSelections},r=this.state.renderOrder.find((e=>e.category===t));r&&(r.orderedActions.forEach((e=>{i[e]=o})),this.setState({...this.state,actionSelections:i,categorySelections:{...this.state.categorySelections,[r.category]:s}}))}selectActionName(e,t){const a=this.state.actionSelections[e],s={...this.state.actionSelections,[e]:!a},o=t.orderedActions.filter((e=>s[e])).length,i=0===o?n.None:o===t.orderedActions.length?n.All:n.Partial;this.setState({...this.state,actionSelections:s,categorySelections:{...this.state.categorySelections,[t.category]:i}})}clearAllSelections(){const e=this.getBulkUpdateNextActionSelectionState((0,s().uv)(this.state.actionSelections),!1),t=this.getBulkUpdateNextCategorySelectionState((0,s().uv)(this.state.categorySelections),n.None);this.setState({...this.state,actionSelections:e,categorySelections:t})}getBulkUpdateNextCategorySelectionState(e,t){const a={...this.state.categorySelections};return e.forEach((e=>{a[e]=t})),a}getBulkUpdateNextActionSelectionState(e,t){const a={...this.state.actionSelections};return e.forEach((e=>{a[e]=t})),a}}},849417:(e,t,a)=>{a.d(t,{A:()=>le});var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(174114),r=()=>a(214263),l=()=>a(653998),d=()=>a(76394),c=()=>a(577040),u=()=>a(662505),g=()=>a(36746),m=()=>a(907721),p=()=>a(466321),h=()=>a(17969),f=()=>a(676586),x=()=>a(356833),v=()=>a(209684),b=()=>a(535906),y=()=>a(655830),S=()=>a(443252),j=()=>a(951540),w=()=>a(88271),A=()=>a(16456),M=()=>a(427091),C=()=>a(477784),I=()=>a(640979),T=()=>a(703275),k=()=>a(743668),_=()=>a(725599),z=()=>a(381971),D=()=>a(918695),P=()=>a(922126),N=()=>a(59175),R=a(163643);const B=(0,l().YK)({invalidDateError:{id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"},invalidDateRangeError:{id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"},notSupportedDateRangeError:{id:"dateInputError.notSupportedDateRangeError.tooltip",defaultMessage:"The date is not supported"}});const E=function(e){const t=(0,l().tz)(),n=(0,o().uB)(void 0,P().A),{value:i,customErrorMessage:r}=e;(0,s.useEffect)((()=>{n.reset()}),[i,n]);const d=(0,s.useCallback)((()=>(0,R.jsx)(q,{dateTimeInputMenuItemProps:e,store:n})),[e,n]),c=(0,o().K8)((()=>O(t,n,r)),[t,n,r]);return c?(0,R.jsx)(a(103151).A,{renderTooltip:()=>c,forceVisibleState:!0,placement:m().W.Left,render:d,originGap:-8}):(0,R.jsx)(q,{dateTimeInputMenuItemProps:e,store:n})};function L(e,t){const{device:a}=e;return!!a.isMobile||!t}function O(e,t,a){if(!t.state.error)return;const s=a&&a(t.state.error);if(s)return s;switch(t.state.error){case P().$.INVALID_DATE:return e.formatMessage(B.invalidDateError);case P().$.INVALID_RANGE:return e.formatMessage(B.invalidDateRangeError);case P().$.NOT_SUPPORTED:return e.formatMessage(B.notSupportedDateRangeError);default:(0,d().HB)(t.state.error)}}function U(e,t,a,s,n,o){const i=function(e,t,a,s,n){if(!a.state.dateEdited&&!a.state.timeEdited)return;if(!a.state.temporaryValue.date&&!a.state.temporaryValue.time)return{value:void 0};const o=(0,D().J8)(a.state.temporaryValue.date||"",t);if(o){let t="";return t=s?(null==e?void 0:e.start_time)||"00:00":n?"23:59":"00:00",{value:{type:"datetime",start_date:o,time_zone:(null==e?void 0:e.time_zone)||(0,M().P)(),start_time:t}}}const i=(0,D().KZ)(a.state.temporaryValue.time||"",t);return(null!=e&&e.start_date||o)&&i?{value:{type:"datetime",start_date:(null==e?void 0:e.start_date)||o,start_time:i,time_zone:(null==e?void 0:e.time_zone)||(0,M().P)()}}:{error:P().$.INVALID_DATE}}(e,t,a,n,o);if(i)return s?s(i):i}function F(e){const{theme:t,disabled:a,focus:s,intl:n,store:o,customErrorMessage:i}=e,r=function(e){return{inputDefault:{background:e.inputBackground,boxShadow:e.inputBoxShadow},inputFocused:{boxShadow:e.outlineBlueInputBoxShadow},inputError:{boxShadow:e.outlineRedInputBoxShadow},placeholder:{color:e.text.tertiary}}}(t),l=O(n,o,i);if(!a)return l?r.inputError:s?r.inputFocused:r.inputDefault}function H(e,t,a,s,n,o,i,r,l,d,c){const{device:u}=e,g=function(e,t){return{menuItem:{marginBottom:e.device.isMobile?1:12},inputWrapper:{borderRadius:6,height:28,paddingRight:L(e,t)?6:0,position:"relative"},inputEditRegion:{width:L(e,t)?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"}}}(e,d);return{style:{...g.menuItem,...n},inputOuterStyle:{...g.inputWrapper,...s,...F({theme:t,disabled:o,focus:i,intl:r,store:l,customErrorMessage:c})},inputStyle:{...g.inputEditRegion,...u.isMobile&&g.inputEditRegionMobile,...a}}}function V(e,t,a,s,n,o,i,r,l,d){let c;(!r||"date"===t&&null!=n&&n.start_time||"time"===t&&null!=n&&n.start_date)&&(c=U(n,o,i,l,r,d),c&&(a(c),c.error?i.setState({...i.state,dateEdited:!1,error:c.error}):i.reset())),s&&s(e,c)}function W(e,t,a,s,n,o,i,r,l){const d=U(t,a,s,o,i,r);d?(e(d),d.error?s.setState({...s.state,dateEdited:!1,timeEdited:!1,error:d.error}):s.reset()):s.setState({...s.state,dateEdited:!1,timeEdited:!1}),l&&n&&n(l)}function q(e){let{dateTimeInputMenuItemProps:t,store:a}=e;const{store:r,hideClearButton:d,focus:u,showTime:g,placeholder:m,customErrorMessage:p,...h}=t,{onBlur:f,onClear:x,onDateFocus:v,onSubmit:b,onTimeFocus:y,onUpdate:S,isEndingDate:j,inputStyle:w,inputOuterStyle:A,style:M,disabled:I,validate:T,value:k}=t,_=(0,l().tz)(),z=(0,i().DP)(),D=(0,n().v3)(),P=(0,s.useCallback)((e=>function(e,t,a,s,n,o,i,r,l,d){const{device:c}=t;o.setState({...o.state,timeEdited:!0,temporaryValue:{...o.state.temporaryValue,time:e.target.value||""}}),c.isAndroid&&W(a,s,n,o,i,r,l,d)}(e,D,S,k,_,a,f,T,g,j)),[D,S,k,_,a,f,T,g,j]),B=(0,s.useCallback)((e=>function(e,t,a){t.setState({...t.state,timeEdited:!1}),a&&a(e)}(e,a,y)),[a,y]),E=(0,s.useCallback)((()=>function(e,t,a,s,n,o,i,r){s.setState({...s.state,dateEdited:!0,timeEdited:!0,temporaryValue:{date:void 0,time:void 0},error:void 0});const l=U(t,a,s,o,i,r);l&&e(l),s.setState({...s.state,dateEdited:!1,timeEdited:!1}),n&&n()}(S,k,_,a,x,T,g,j)),[S,k,_,a,x,T,g,j]),O=(0,s.useCallback)((e=>W(S,k,_,a,f,T,g,j)),[S,k,_,a,f,T,g,j]),F=(0,s.useCallback)((e=>function(e,t,a,s,n,o,i,r,l,d){const{device:c}=t;o.setState({...o.state,dateEdited:!0,temporaryValue:{...o.state.temporaryValue,date:e.target.value||""}}),c.isAndroid&&W(a,s,n,o,i,r,l,d)}(e,D,S,k,_,a,f,T,g,j)),[D,S,k,_,a,f,T,g,j]),q=(0,s.useCallback)((e=>function(e,t,a){t.setState({...t.state,dateEdited:!1}),a&&a(e)}(e,a,v)),[a,v]),{device:K}=D,Y=K.isMobile?"date":"text",Q=K.isMobile?"time":"text",$=N().C.Transparent,X=K.isMobile?void 0:u,Z=(0,o().K8)((()=>H(D,z,w,A,M,I,X,_,a,d,p)),[D,z,w,A,M,I,X,_,a,d,p]),J={display:"flex",alignItems:"center",lineHeight:2,background:z.inputBackground,paddingLeft:8,flexBasis:"50%",...Z.inputOuterStyle},ee=(0,o().K8)((()=>function(e,t,a,s){const{device:n}=e;return n.isMobile?t?c().Tq(t,a):"":s.state.temporaryValue.date?s.state.temporaryValue.date:s.state.dateEdited?s.state.temporaryValue.date||"":t?c().Tq(t,a):""}(D,k,_,a)),[D,k,_,a]),te=(0,o().K8)((()=>function(e,t,a,s){const{device:n}=e;return n.isMobile?t?c().Em(t,a):"":s.state.temporaryValue.time?s.state.temporaryValue.time:s.state.timeEdited?s.state.temporaryValue.time||"":t?c().Em(t,a):""}(D,k,_,a)),[D,k,_,a]);return(0,R.jsxs)("div",{style:J,children:[(0,R.jsx)(N().A,{...h,type:Y,format:$,placeholder:m,focus:"date"===X,onFocus:q,onChange:F,onSubmit:e=>V(e,"date",S,b,k,_,a,g,T,j),onBlur:O,value:ee,size:1,style:{fontSize:K.isMobile?16:14},showClearButton:!g&&L(D,d),onClearButtonClick:E}),g&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{style:{height:14,width:1,background:z.regularDividerColor,marginLeft:6,marginRight:12,flexShrink:0}}),(0,R.jsx)(N().A,{...h,placeholder:C().A.formatMessage(G.timePlaceholder),type:Q,format:$,focus:"time"===X,onFocus:B,onChange:P,onSubmit:e=>V(e,"time",S,b,k,_,a,g,T,j),onBlur:O,value:te,size:1,style:{fontSize:K.isMobile?16:14},showClearButton:L(D,d),onClearButtonClick:E})]})]})}const G=(0,l().YK)({startingDateMessage:{defaultMessage:"Starting",id:"auditLog.dateTimeRangeMenu.startingDatePlaceholder"},endingDateMessage:{defaultMessage:"Ending",id:"auditLog.dateTimeRangeMenu.endingDatePlaceholder"},timePlaceholder:{defaultMessage:"12:00 AM",id:"auditLog.dateTimeRangeMenu.timePlaceholderInNumber"}});const K=function(e){let{title:t,value:s,onUpdate:i,onDismiss:r,disabled:l,footer:d,header:c,hideTime:u,showTime:g,store:m,dayRangeStore:p,minDate:h,maxDate:v,customErrorMessage:b}=e;const y=(0,n().v3)(),S=(0,o().uB)(p,x().A),j=(0,o().uB)(m,f().Ay);(0,a(269280).l)((()=>{void 0!==g&&j.setState({...j.state,showTime:g})}));const{device:w}=y;return(0,R.jsx)(a(935091).A,{...se(y,t,s,i,j,S,r,l,d,h,v),children:(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,R.jsxs)("div",{children:[c,!w.isMobile&&(0,R.jsx)(ae,{value:s,disabled:l,onUpdate:i,store:j,dayRangeStore:S,minDate:h,maxDate:v,customErrorMessage:b}),(0,R.jsx)(X,{value:s,onUpdate:i,store:j,dayRangeStore:S,minDate:h,maxDate:v})]}),(0,R.jsx)(te,{onUpdate:i,value:s,hideTime:u,store:j,dayRangeStore:S})]})})};function Y(e){const{field:t,parsed:a,value:s,minValue:n,maxValue:o}=e;return a.error?a:function(e){const{range:t,minValue:a,maxValue:s}=e,n=t.starting?A().C6.notionDateTimeToLuxon(t.starting):void 0,o=t.ending?A().C6.notionDateTimeToLuxon(t.ending):void 0;if(n&&o&&o<n)return{error:T().$.INVALID_RANGE};const i=e=>(0,d().O9)(a)&&(0,d().O9)(e)&&e<a,r=e=>(0,d().O9)(s)&&(0,d().O9)(e)&&e>s;return i(n)||i(o)||r(n)||r(o)?{error:T().$.NOT_SUPPORTED}:{value:t}}({range:{...s,[t]:a.value},minValue:n,maxValue:o})}function Q(e){const{field:t,parsed:a,value:s,minValue:n,maxValue:o}=e;if(a.error)return a;return function(e){const{range:t,minValue:a,maxValue:s}=e,n=t.starting?A().C6.notionDateToLuxon(t.starting):void 0,o=t.ending?A().C6.notionDateToLuxon(t.ending):void 0;if(n&&o&&o<n)return{error:T().$.INVALID_RANGE};const i=e=>a&&e&&e<a,r=e=>s&&e&&e>s;return i(n)||i(o)||r(n)||r(o)?{error:T().$.NOT_SUPPORTED}:{value:t}}({range:{...c().BI(s),[t]:a.value},minValue:n,maxValue:o})}function $(e,t){return{pickerSection:{paddingLeft:16,paddingRight:16},pickerSectionMobile:{paddingTop:16,paddingBottom:8},sidebar:{paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",flex:"0 0 220px",backgroundColor:t.sidebarSecondaryBackground,borderLeft:`1px solid ${t.regularDividerColor}`,maxWidth:"fit-content"},menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4,color:t.text.secondary}}}function X(e){let{value:t,onUpdate:a,store:s,dayRangeStore:r,minDate:l,maxDate:d}=e;const u=(0,i().DP)(),g=(0,n().v3)(),m=(0,o().uB)(r,x().A),p=(0,o().uB)(s,f().Ay),{device:h}=g,v=$(g,u),b=function(e){return{pickerSectionMobile:{background:e.popoverBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}}(u),y={...v.pickerSection,...h.isMobile&&v.pickerSectionMobile,...h.isMobile&&b.pickerSectionMobile};return(0,R.jsx)(w().A,{children:(0,R.jsx)("div",{style:y,children:(0,R.jsx)(z().A,{value:c().BI(t),dateTimeStore:p,store:m,onUpdate:e=>{if(e.error)return null;const s=c().y2(t,e.value);return a({error:e.error,value:s})},minDate:l,maxDate:d,validate:(e,a)=>Q({field:e,parsed:a,value:t,minValue:l,maxValue:d})})})})}function Z(e,t,a){t.setState({...t.state,focus:e});const s=f().yL[e];a.setState({...a.state,focus:s})}function J(e,t){t.setState({...t.state,focus:e})}function ee(e,t,a){e.ending&&Z(h().xQ.EndDate,t,a),t.setState({...t.state,temporaryDateRange:e}),a.setState({...a.state,displayMonth:e.starting||e.ending?A().mF(e.starting||e.ending):void 0,temporaryDateRange:{starting:c().qC(e.starting),ending:c().qC(e.ending)}})}function te(e){let{onUpdate:t,value:a,hideTime:s,store:r,dayRangeStore:d}=e;const c=(0,i().DP)(),u=(0,n().v3)(),g=(0,o().K8)((()=>r.state.showTime),[r]);return(0,R.jsxs)("aside",{style:$(u,c).sidebar,children:[s?null:(0,R.jsx)(_().A,{title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.timeToggle",defaultMessage:"Use time"}),on:g,onClick:()=>{if(r.toggleShowTime(),r.state.showTime){const e=a;e.starting&&(e.starting.start_time="00:00"),e.ending&&(e.ending.start_time="23:59"),t({value:e})}},focused:!1}),(0,R.jsx)(b().A,{focused:!1,title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.quickFilters.today",defaultMessage:"Today"}),onClick:()=>{const e=Date.now(),t=A().KQ(e,(0,M().P)());ee({starting:{...t,start_time:"00:00"},ending:t},r,d)},style:$(u,c).menuItem}),(0,R.jsx)(b().A,{focused:!1,title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.quickFilters.yesterday",defaultMessage:"Yesterday"}),onClick:()=>{const e=A().jI((0,M().P)());ee({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M().P)()},ending:{type:"datetime",start_date:e.start_date,start_time:"23:59",time_zone:(0,M().P)()}},r,d)},style:$(u,c).menuItem}),(0,R.jsx)(b().A,{focused:!1,title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.quickFilters.lastWeek",defaultMessage:"Last 7 days"}),onClick:()=>{const e=A().t0((0,M().P)()),t=A().KQ(Date.now(),(0,M().P)());ee({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M().P)()},ending:t},r,d)},style:$(u,c).menuItem}),(0,R.jsx)(b().A,{focused:!1,title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.quickFilters.lastMonth",defaultMessage:"Last 30 days"}),onClick:()=>{const e=A().ZG((0,M().P)()),t=A().KQ(Date.now(),(0,M().P)());ee({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M().P)()},ending:t},r,d)},style:$(u,c).menuItem})]})}function ae(e){let{value:t,disabled:a,onUpdate:s,store:r,dayRangeStore:d,minDate:u,maxDate:g,customErrorMessage:m}=e;const p=(0,l().tz)(),f=(0,i().DP)(),x=(0,n().v3)(),{device:v,WindowSizeStore:b}=x,y=(0,o().K8)((()=>r.getFocus()),[r]);let S="date";y!==h().xQ.StartTime&&y!==h().xQ.EndTime||(S="time");const j=function(e,t){return{earliestValidEnding:e.starting&&c().r6(e.starting,t),latestValidStarting:e.ending&&c().r6(e.ending,t)}}(t,p),w=(0,o().K8)((()=>r.state.showTime),[r]),A=(0,o().K8)((()=>b.getSafePaddingLeftCSS(16)),[b]);return(0,R.jsxs)("div",{style:{paddingTop:v.isMobile?16:12,paddingBottom:v.isMobile?16:8,paddingLeft:v.isMobile?A:14,paddingRight:v.isMobile?A:14,display:w?"block":"flex",...v.isMobile&&{boxShadow:`\n                        0 1px 0 ${f.regularDividerColor}\n                    `,position:"relative",zIndex:2},background:v.isMobile?f.popoverBackground:void 0},children:[(0,R.jsx)(E,{disabled:a,placeholder:C().A.formatMessage(G.startingDateMessage),focus:y===h().xQ.StartDate||y===h().xQ.StartTime?S:void 0,value:t.starting,validate:e=>function(e){const{parsed:t,value:a,minValue:s,maxValue:n}=e,o=Y({field:"starting",parsed:t,value:a,minValue:s,maxValue:n});return o.error?o:{value:o.value.starting}}({parsed:e,value:t,minValue:u,maxValue:g}),customErrorMessage:m,onUpdate:e=>function(e,t,a){e.error||t({value:{...a,starting:e.value}})}(e,s,t),onDateFocus:()=>Z(h().xQ.StartDate,r,d),onTimeFocus:()=>J(h().xQ.StartTime,r),onSubmit:(e,t)=>function(e,t,a,s,n){t&&t.error||(a===h().xQ.StartDate&&s.state.showTime?s.setState({...s.state,focus:h().xQ.StartTime}):(s.setState({...s.state,focus:h().xQ.EndDate}),n.setState({...n.state,focus:"ending"})))}(0,t,y,r,d),inputElementAttributes:{max:j.latestValidStarting},showTime:w}),(0,R.jsx)("div",{style:{width:12,height:8}}),(0,R.jsx)(E,{disabled:a,placeholder:C().A.formatMessage(G.endingDateMessage),focus:y===h().xQ.EndDate||y===h().xQ.EndTime?S:void 0,value:t.ending,validate:e=>function(e){const{parsed:t,value:a,minValue:s,maxValue:n}=e,o=Y({field:"ending",parsed:t,value:a,minValue:s,maxValue:n});return o.error?o:{value:o.value.ending}}({parsed:e,value:t,minValue:u,maxValue:g}),customErrorMessage:m,onUpdate:e=>function(e,t,a){e.error||t({value:{...a,ending:e.value}})}(e,s,t),onDateFocus:()=>Z(h().xQ.EndDate,r,d),onTimeFocus:()=>J(h().xQ.EndTime,r),onSubmit:(e,t)=>function(e,t,a,s){t&&t.error||a===h().xQ.EndDate&&s.state.showTime&&s.setState({...s.state,focus:h().xQ.EndTime})}(0,t,y,r),inputElementAttributes:{min:j.earliestValidEnding},showTime:w})]})}function se(e,t,a,s,n,o,i,r,l,d,c){const{device:u}=e;if(u.isMobile){return{menuType:I().gu.Modal,title:t,right:(0,R.jsx)(k().DoneMenuText,{}),onClickRight:i,header:(0,R.jsx)(ae,{value:a,disabled:r,onUpdate:s,store:n,dayRangeStore:o,minDate:d,maxDate:c})}}return{menuType:I().gu.Popup,onClickOutside:i,footer:l}}var ne=()=>a(489090),oe=()=>a(634444),ie=()=>a(348618),re=()=>a(634369);const le=(0,l().j4)((function(e){let{onChange:t,onMenuDismiss:a,showButtons:i,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,icon:m,mode:p,focused:h,pillTitle:v,minDate:b,maxDate:y,customErrorMessage:S}=e;const j=(0,n().v3)(),w=(0,o().uB)(void 0,x().A),A=(0,o().uB)(void 0,f().Ay);(0,s.useEffect)((()=>{fe({value:u},A,w)}),[u,A,w]);const{device:M}=j;return M.isMobile?(0,R.jsx)(Me,{onChange:t,onMenuDismiss:a,showButtons:i,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,icon:m,store:A,dayRangeStore:w,mode:p,minDate:b,maxDate:y,customErrorMessage:S}):(0,R.jsx)(Ae,{onChange:t,onMenuDismiss:a,showButtons:i,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,focused:h,icon:m,mode:p,pillTitle:v,store:A,dayRangeStore:w,minDate:b,maxDate:y,customErrorMessage:S})}));function de(e){const{device:t}=e;return t.isMobile?p().n.SlideUp:p().n.Popup}function ce(e){return{buttonMenuItem:{color:e.text.secondary},activeMenuItem:{color:e.text.primary}}}function ue(e){e.preventDefault&&e.preventDefault()}function ge(e){e({starting:void 0,ending:void 0})}function me(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},icon:{height:16,width:16,marginRight:6},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:0,paddingBottom:8},popupWithSidebar:{display:"flex"},menuItemTitleDesktop:{width:"100%"},summary:{display:"inline-flex"}}}function pe(e,t,a){a||(e.setState({...e.state,isOpen:!0,focus:h().xQ.StartDate}),t.setState({...t.state,isOpen:!0,focus:"starting"}))}function he(e,t,a,s,n,o){const{temporaryDateRange:i}=a.state;g().a9(e)||(o||t(i),a.setState({...a.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),s.setState({...s.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),n&&n())}function fe(e,t,a){if(e.error)return;const s={starting:(0,c().qC)(e.value.starting),ending:(0,c().qC)(e.value.ending)};return a.setState({...a.state,temporaryDateRange:{...a.state.temporaryDateRange,...s}}),t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})}function xe(e){let{disabled:t,icon:a,title:o,store:i,dayRangeStore:r}=e;const l=(0,n().v3)(),d=(0,s.useCallback)((()=>pe(i,r,t)),[i,r,t]),c=me(l);return(0,R.jsx)(b().A,{disabled:t,focused:!1,icon:a(c.icon),title:o,onClick:d})}function ve(e){let{disabled:t,title:a,value:o,intl:i,onChange:l,store:d,dayRangeStore:c}=e;const u=(0,n().v3)(),m=(0,s.useCallback)((()=>pe(d,c,t)),[d,c,t]),p=me(u),h=(0,R.jsxs)("div",{style:p.summary,children:[(0,r().k)(p.iconActiveMobile),g().tX(o,i)]});return(0,R.jsx)(ie().A,{disabled:t,onClick:m,onClickClear:()=>ge(l),label:a,title:h})}function be(e){let{disabled:t,value:a,focused:o,intl:l,onChange:d,store:c,dayRangeStore:u}=e;const m=(0,i().DP)(),p=(0,n().v3)(),h=(0,s.useCallback)((()=>pe(c,u,t)),[c,u,t]),f=me(p),x=ce(m),v={...f.menuItem,...x.activeMenuItem},y=g().tX(a,l),S=(0,R.jsx)(ne().A,{onClick:()=>ge(d),disabled:t});return(0,R.jsx)(b().A,{focused:o,disabled:t,icon:(0,r().k)(f.iconActiveDesktop),title:y,right:S,isTokenTitle:!0,alignIconTop:!0,onClick:h,desktopTitleStyle:f.menuItemTitleDesktop,desktopIconStyle:f.iconActiveDesktopWrapper,style:v})}function ye(e){let{disabled:t,title:a,icon:o,focused:r,mode:l,store:d,dayRangeStore:c}=e;const u=(0,i().DP)(),g=(0,n().v3)(),m=(0,s.useCallback)((()=>pe(d,c,t)),[d,c,t]),p=me(g),h=ce(u),f={...p.menuItem,...h.buttonMenuItem,...l===oe().C.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return(0,R.jsx)(b().A,{focused:r,disabled:t,icon:o(p.icon),title:a,onClick:m,style:f})}function Se(e){let{disabled:t,value:a,pillTitle:n,store:o,dayRangeStore:i}=e;const d=(0,s.useCallback)((()=>pe(o,i,t)),[o,i,t]),c=(0,R.jsx)(l().sA,{id:"searchDateFilter.shortTitle",defaultMessage:"Date"});return(0,R.jsx)(u().A,{on:Boolean(a.starting||a.ending),icon:(0,r().k)({width:16,marginRight:6,fill:"currentColor"}),title:(0,R.jsx)("span",{children:n||c}),onClick:d})}function je(e){let{onChange:t,onMenuDismiss:a,showButtons:s,store:n,dayRangeStore:o}=e;return(0,R.jsxs)(w().A,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},children:[(0,R.jsx)(v().p,{onClick:()=>{n.clearTemporaryDateRange(),o.clearTemporaryDateRange(),t({starting:void 0,ending:void 0})},children:(0,R.jsx)(l().sA,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})}),(0,R.jsx)(j().A,{onClick:e=>{t(n.state.temporaryDateRange),he(e,t,n,o,a,s)},children:(0,R.jsx)(l().sA,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})})]})}function we(e){let{onChange:t,onMenuDismiss:a,showButtons:n,title:i,header:r,sidebar:d,hideTime:c,value:u,store:g,dayRangeStore:m,minDate:p,maxDate:h,customErrorMessage:f}=e;const x=(0,s.useCallback)((e=>he(e,t,g,m,a,n)),[t,g,m,a,n]),b=(0,s.useCallback)((e=>fe(e,g,m)),[g,m]),y=(0,o().K8)((()=>function(e,t){const{temporaryDateRange:a}=t.state;return{...e,...a}}(u,g)),[u,g]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(K,{title:i,value:y,onUpdate:b,store:g,dayRangeStore:m,onDismiss:x,footer:"footer"===n&&(0,R.jsx)(je,{onChange:t,onMenuDismiss:a,showButtons:n,store:g,dayRangeStore:m}),sidebar:d,hideTime:c,header:r,minDate:p,maxDate:h,customErrorMessage:f}),"side"===n&&(0,R.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,R.jsx)(v().p,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:x,children:(0,R.jsx)(l().sA,{defaultMessage:"Cancel",id:"DateTimeFilter.cancelButton.label"})}),(0,R.jsx)(j().A,{onClick:()=>t(g.state.temporaryDateRange),children:(0,R.jsx)(l().sA,{defaultMessage:"Accept",id:"DateTimeFilter.acceptButton.label"})})]})]})}function Ae(e){let{mode:t,onChange:a,onMenuDismiss:i,showButtons:r,title:c,header:u,sidebar:g,hideTime:p,value:h,disabled:f,focused:x,icon:v,pillTitle:b,store:j,dayRangeStore:w,minDate:A,maxDate:M,customErrorMessage:C}=e;const I=(0,n().v3)(),T=(0,l().tz)(),k=(0,s.useCallback)((e=>he(e,a,j,w,i,r)),[a,j,w,i,r]),_=(0,s.useCallback)((()=>(0,R.jsx)(we,{onChange:a,onMenuDismiss:i,showButtons:r,title:c,header:u,sidebar:g,hideTime:p,value:h,store:j,dayRangeStore:w,minDate:A,maxDate:M,customErrorMessage:C})),[a,i,r,c,u,g,p,h,j,w,A,M,C]),z=me(I),D=t===oe().C.Section,P=D?c:void 0,N=t===oe().C.Section?(0,R.jsx)(be,{disabled:f,value:h,focused:x,intl:T,onChange:a,store:j,dayRangeStore:w}):t===oe().C.Button?(0,R.jsx)(ye,{disabled:f,title:c,icon:v,focused:x,mode:t,store:j,dayRangeStore:w}):t===oe().C.Pill?(0,R.jsx)(Se,{disabled:f,value:h,pillTitle:b,store:j,dayRangeStore:w}):void(0,d().HB)(t),B=(0,o().K8)((()=>j.state.isOpen),[j]);return(0,R.jsx)(re().A,{title:P,marginAfter:D,children:(0,R.jsx)(y().A,{debugName:"DateTimeFilter",capture:B,onUp:ue,onDown:ue,onEnter:ue,children:(0,R.jsx)(S().Ay,{popupType:de(I),open:B,origin:N,render:_,onDismiss:k,placementToOrigin:m().W.Bottom,alignmentToOrigin:m().C.Start,style:g?z.popupWithSidebar:z.popup,originGap:8,trapFocus:!0})})})}function Me(e){let{mode:t,onChange:a,onMenuDismiss:n,showButtons:i,title:r,header:d,sidebar:c,hideTime:u,value:g,disabled:m,icon:h,store:f,dayRangeStore:x,minDate:v,maxDate:b,customErrorMessage:y}=e;const j=(0,l().tz)(),w=(0,s.useCallback)((e=>he(e,a,f,x,n,i)),[a,f,x,n,i]),A=(0,s.useCallback)((()=>(0,R.jsx)(we,{onChange:a,onMenuDismiss:n,showButtons:i,title:r,header:d,sidebar:c,hideTime:u,value:g,store:f,dayRangeStore:x,minDate:v,maxDate:b,customErrorMessage:y})),[a,n,i,r,d,c,u,g,f,x,v,b,y]),M=(0,o().K8)((()=>f.state.isOpen),[f]),C=t===oe().C.Section?(0,R.jsx)(ve,{disabled:m,title:r,value:g,intl:j,onChange:a,store:f,dayRangeStore:x}):(0,R.jsx)(xe,{disabled:m,icon:h,title:r,store:f,dayRangeStore:x});return(0,R.jsx)(S().Ay,{popupType:p().n.SlideUp,open:M,origin:C,render:A,onDismiss:w,preventScaleTransition:!0})}},851363:(e,t,a)=>{a.d(t,{b:()=>o});var s=()=>a(129978);const n=new(s().O2)("time-series",(async()=>await Promise.resolve().then(a.bind(a,417021)))),o=(0,s()._h)(n,(e=>e.TimeSeries))},853745:(e,t,a)=>{a.d(t,{_:()=>l});a(403517),a(242343);var s=()=>a(174114),n=()=>a(31448),o=()=>a(701270),i=()=>a(629457),r=a(163643);function l(e){const{title:t}=e,a=d({bylineWidth:"byline"in e&&e.byline?e.bylineWidth:void 0}),s="byline"in e?{marginBottom:0,paddingBottom:0}:{},n={...a.headingStyle,...s};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i().A,{large:!0,style:n,children:(0,r.jsx)("div",{style:a.titleContainer,children:(0,r.jsx)(o().D,{styleName:"UITitle-22px/Semibold",children:t})})}),"byline"in e&&(0,r.jsx)("div",{style:a.children,children:(0,r.jsx)(o().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:e.byline})})]})}function d(e){let{bylineWidth:t}=e;return(0,s().IS)((e=>({headingStyle:{marginBottom:16,paddingBottom:8,display:"flex",justifyContent:"space-between",alignItems:"center"},titleContainer:{display:"flex",justifyContent:"center",alignItems:"center",gap:12},title:{fontSize:20,fontWeight:n().Wy.medium,lineHeight:"150%",display:"flex",alignItems:"center",gap:0,margin:0},children:{width:t??"80%",marginTop:12,marginBottom:22},tabContainerStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14,overflow:"visible"},tabStyle:{marginLeft:-8,marginRight:8},tabTitleStyle:{paddingLeft:8,paddingRight:8},tabBorderStyle:{left:8,right:8}})),[t])}},855410:(e,t,a)=>{a.d(t,{t:()=>o});a(242343);var s=()=>a(174114),n=a(163643);function o(e){let{children:t}=e;const a=(0,s().IS)((e=>({container:{margin:"24px 32px 24px",padding:"0 16px",boxSizing:"border-box"}})),[]);return(0,n.jsx)("div",{style:a.container,children:t})}},862067:(e,t,a)=>{a.d(t,{u:()=>s});let s=function(e){return e.User="user",e.Domains="domains",e}({})},879759:(e,t,a)=>{a.d(t,{A:()=>n});a(242343);var s=a(163643);const n=function(e){const t=(0,a(237385).v3)(),{render:n,requireUpgradeToTier:o,analyticsName:i,renderUpgradeTooltip:r,onUpgradeClick:l,alwaysAllowClick:d,tooltipPlacement:c,upgradeButtonDesktopStyle:u,upgradeButtonMobileStyle:g}=e;let m,{onClick:p,renderTooltip:h}=e;return o&&(m=(0,s.jsx)(a(404042).A,{subscriptionTier:o,analyticsName:i,desktopStyle:{display:"inline-block",pointerEvents:"none",...u},mobileStyle:{display:"inline-block",pointerEvents:"none",...g}}),d||(p=e=>{a(943066).K(t,{from:i,upsell:{type:"product",product:o,limit:{type:"none"},trialability:"none"}}),l&&l(e)},h=r)),(0,s.jsx)(a(103151).A,{renderTooltip:h||(()=>null),render:e=>n((0,a(906230).A)(e,{onClick:p}),m),disableTooltip:!h,placement:c})}},893076:(e,t,a)=>{a.d(t,{Q:()=>l});a(333225),a(494367),a(516262),a(573119),a(240480),a(950443),a(619601),a(403517);var s=a(242343),n=()=>a(653998),o=()=>a(247900),i=()=>a(736851),r=a(163643);function l(e){let{spaceStore:t,createdByFilterIds:a,setCreatedByFilter:l,runNewSearch:d,includeGuests:c}=e;const u=(0,o().H)({spaceStore:t}),g=(0,s.useMemo)((()=>u.loading?[]:c?[...u.members,...u.guests]:u.members),[u,c]),m=(0,s.useMemo)((()=>u.loading?new Set:new Set(u.guests.map((e=>e.id)))),[u]);const p=(0,s.useMemo)((()=>a.map((e=>({id:e,type:"user"})))),[a]);return(0,r.jsx)(i().Jo,{userStores:g,title:(0,r.jsx)(n().sA,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",defaultMessage:"Created by"}),selectedItems:p,setSelectedItems:function(e){const t=e.map((e=>{let{id:t}=e;return t}));l(t)},onMenuClose:d||(()=>{}),isMultiSelect:!0,guestUserIdSet:m,includeGuests:c})}},893379:(e,t,a)=>{a.d(t,{U:()=>o});a(242343);var s=a(163643);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("g",{clipPath:"url(#clip0_9041_11328)",children:[(0,s.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h4.923a4.8 4.8 0 0 1-.789-1.25H6.25a.875.875 0 0 1-.875-.875v-11c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v5.252a5 5 0 0 1 1.25.132V4.5a2.125 2.125 0 0 0-2.125-2.125z"}),(0,s.jsx)("path",{d:"M7.25 5.2a.55.55 0 0 0 0 1.1h5.5a.55.55 0 0 0 0-1.1zM6.7 8.25a.55.55 0 0 1 .55-.55h5.5a.55.55 0 0 1 0 1.1h-5.5a.55.55 0 0 1-.55-.55m11 8.357a3.625 3.625 0 1 0-.893.878l1.223 1.427a.625.625 0 1 0 .94-.823zM12.376 14.5a2.375 2.375 0 1 1 4.75 0 2.375 2.375 0 0 1-4.75 0"})]}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_9041_11328",children:(0,s.jsx)("path",{d:"M0 0h20v20H0z"})})})]})},o=(0,a(680369).wt)("docTextMagnifyingGlass",n)},893576:(e,t,a)=>{a.d(t,{Jj:()=>p,Ke:()=>m,nv:()=>h});var s=a(242343),n=()=>a(174114),o=()=>a(327845),i=()=>a(653998),r=()=>a(975392),l=()=>a(477784),d=()=>a(59175),c=()=>a(951540),u=()=>a(81721),g=a(163643);let m=function(e){return e.OnChange="on-change",e.Button="button",e.AnimatedSearchButton="animated-search-button",e}({});const p=(0,i().YK)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.query.placeholder",defaultMessage:"Search by page ID, title or content"},titleOnlyPlaceholder:{id:"settings.workspaceAnalytics.contentTab.placeholder",defaultMessage:"Search by title"}});function h(e){let{mode:t,query:a,setQueryFilter:h,placeholderText:f,disabled:x}=e;const[v,b]=(0,s.useState)(a??""),y=function(e){return(0,n().IS)((t=>({searchIcon:{color:t.lightIconColor,width:14},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:t.modalBackground,opacity:e?.5:1},button:{opacity:e?.5:1},searchInputContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",flexDirection:"row"}})),[e])}(x),S=(0,s.useMemo)((()=>(0,r().sg)(h,500)),[h]),j=(0,s.useCallback)((e=>{void 0===e&&t===m.AnimatedSearchButton||(b(e??""),t!==m.OnChange&&t!==m.AnimatedSearchButton||S(e??""))}),[S,t]),w=(0,s.useCallback)((e=>{j(e.target.value)}),[j]);return t===m.AnimatedSearchButton?(0,g.jsx)("div",{style:y.searchInputContainer,children:(0,g.jsx)(u().A,{handleSearchQueryChange:j,handleEnterPressed:()=>h(v),handleInputCleared:()=>h(""),isSearchBarAlwaysOpen:!1})}):(0,g.jsx)(d().A,{value:v,style:y.input,left:(0,o().U)(y.searchIcon),placeholder:f||l().A.formatMessage(p.placeholder),focus:!x&&void 0,onChange:w,onSubmit:()=>h(v),disabled:x,right:t===m.Button?(0,g.jsx)(c().A,{onClick:()=>h(v),disabled:x,style:y.button,children:(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.query.searchButton",defaultMessage:"Search"})}):null})}},893943:(e,t,a)=>{a.d(t,{o:()=>m});a(403517);var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(162901),r=()=>a(218357),l=()=>a(190457),d=()=>a(23371),c=()=>a(413871),u=()=>a(379356),g=()=>a(195260);function m(e,t){const a=(0,n().v3)(),{organizationOwnerRecordCache:m}=(0,s.useContext)(u().N),{teamIdsForSpace:p,loadTeamsForSpace:h}=(0,s.useContext)(g().D);(0,i().Yb)((async()=>{t||await(0,d().lX)(e,l().O,(async e=>h(e)))}),[e,h,t]);const{teamStoresForSpace:f,isLoading:x}=(0,o().K8)((()=>{const t={};let s=!1;for(const n of e){const e=p[n];s=s||void 0===e,t[n]=(null==e?void 0:e.map((e=>new(c().h4)(a,{id:e,table:r().yK},{inMemoryRecordCache:m}))))??[]}return{teamStoresForSpace:t,isLoading:s}}),[e,p,m,a]);return{teamStores:f,loading:x}}},894626:(e,t,a)=>{a.d(t,{t:()=>l});a(403517),a(242343);var s=()=>a(482570),n=()=>a(231628),o=()=>a(953739),i=()=>a(659490),r=a(163643);function l(e){const{users:t,totalMemberCount:a,showTooltip:l,isLoading:d}=e,c=(0,n().A)(),u=t.map((e=>({renderAvatar:()=>(0,r.jsx)(s().A,{userStore:e,size:o().tR,avatarShouldShowShadow:!1,hasTooltip:l,iconStyle:{fontSize:12,outlineOffset:0},delayThreshold:0,showAvatarInTooltip:!0},e.id)})));return(0,r.jsx)(o().Qp,{avatarStyles:c.roundAvatarBorder,avatars:u,totalCount:a,renderOverflowTooltip:l?()=>(0,r.jsx)(i().A,{userStores:t}):void 0,isLoading:d})}},904324:(e,t,a)=>{a.d(t,{A:()=>w});a(242343);var s=()=>a(237385),n=()=>a(803290),o=()=>a(653998),i=()=>a(145046),r=()=>a(429318),l=()=>a(535906),d=()=>a(935091),c=()=>a(858023),u=()=>a(443252),g=()=>a(951540),m=()=>a(88271),p=()=>a(103151),h=()=>a(477784),f=()=>a(640979),x=()=>a(907721),v=()=>a(466321);class b extends(()=>a(129044))().default{getInitialState(){return{open:!1}}}const y=new b;var S=a(163643);const j=(0,o().YK)({30:{id:"auditLogCSV.menu.30days",defaultMessage:"Last 30 days"},60:{id:"auditLogCSV.menu.60days",defaultMessage:"Last 60 days"},90:{id:"auditLogCSV.menu.90days",defaultMessage:"Last 90 days"},365:{id:"auditLogCSV.menu.365days",defaultMessage:"Last 1 year"},Export:{id:"auditLogCSV.menu.export",defaultMessage:"Export"}});function w(e){let{parentStore:t}=e;const a=(0,o().tz)(),s=(0,n().O$)(y);return(0,S.jsx)(u().Ay,{popupType:v().n.Popup,open:s.open,placementToOrigin:x().W.Bottom,alignmentToOrigin:x().C.End,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,keepFocus:!1,render:()=>(0,S.jsx)(T,{parentStore:t}),onDismiss:M,enableOutsideClickDismiss:!0,origin:(0,S.jsx)(p().A,{renderTooltip:()=>(0,S.jsx)(o().sA,{id:"auditLogCSV.popup.tooltip",defaultMessage:"Click for options to export the Audit Log in CSV form"}),render:e=>(0,S.jsx)(g().A,{size:"lg",onClick:()=>{return e=!s.open,void y.setState({open:e});var e},...e,children:a.formatMessage(j.Export)})})})}function A(e,t,a){r().uU(e,{targetPointer:a.pointer,exportOptions:{duration:t}})}function M(){y.setState({open:!1})}function C(e,t,a){return{key:e,render:()=>(0,S.jsx)(l().A,{focused:!1,title:h().A.formatMessage(j[e]),onClick:()=>{M(),A(t,e,a)}}),action:()=>{}}}function I(e,t,a){return{key:e,render:()=>(0,S.jsx)(l().A,{focused:!1,title:h().A.formatMessage(j[e]),onClick:()=>{i().ui({message:(0,S.jsx)(o().sA,{id:"auditLogCSV.menu.365days.prompt",defaultMessage:"Are you sure you want to export a one year CSV? You can't repeat this action while this is processing in the background."}),showCancel:!0,keepFocus:!0,items:[{label:(0,S.jsx)(o().sA,{id:"AuditLogCSV.exportConfirmationDialog.label",defaultMessage:"Export"}),color:"blue",onAccept:()=>{M(),A(t,e,a)}}]})}}),action:()=>{}}}function T(e){let{parentStore:t}=e;const a=(0,s().v3)(),n=[C(30,a,t),C(60,a,t),C(90,a,t),I(365,a,t)];return(0,S.jsx)(d().A,{menuType:f().gu.Popup,children:(0,S.jsx)(c().Ay,{type:c().Oh.Vertical,sections:[{key:"results",render:e=>(0,S.jsx)(m().A,{...e}),items:n}],initialFocus:0})})}},909497:(e,t,a)=>{a.d(t,{e:()=>E});a(725707),a(500234);var s=a(242343),n=()=>a(174114),o=()=>a(520596),i=()=>a(814627),r=()=>a(17127),l=()=>a(653998),d=()=>a(662505),c=()=>a(273520),u=()=>a(443252),g=(a(491955),a(403517),()=>a(178063)),m=()=>a(836693),p=()=>a(76394),h=()=>a(640979),f=()=>a(535906),x=()=>a(97787),v=()=>a(935091),b=()=>a(701270),y=()=>a(88271),S=()=>a(851774),j=()=>a(110879),w=()=>a(619493),A=()=>a(932322),M=()=>a(158918),C=()=>a(294821),I=()=>a(978669),T=()=>a(805469),k=a(163643);function _(e){let{sort:t,sortProperties:a,onChange:s,currentSorts:o}=e;const i=(0,n().IS)((()=>({sortRow:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},section:{padding:"8px 0 0 8px",width:"100%"}})),[]);if(!t)return null;return(0,k.jsx)(y().A,{extraTopPadding:!0,style:i.section,children:(0,k.jsx)(A().Ay,{showDragHandle:!0,title:(0,k.jsxs)("div",{style:i.sortRow,children:[(0,k.jsx)(D,{currentPropertyId:t.propertyId,sortProperties:a,currentSorts:o,onChange:s}),(0,k.jsx)(z,{sort:t,currentSorts:o,onChange:s})]}),right:(0,k.jsx)(j().B,{onDeleteClick:()=>{const e=o.filter((e=>{let{propertyId:a}=e;return a!==(null==t?void 0:t.propertyId)}));s(e)}}),rightStyle:{marginRight:19}})})}function z(e){let{sort:t,onChange:a,currentSorts:s}=e;const n=(0,l().tz)(),o=t.direction;return(0,k.jsx)(M().A,{menuTitle:n.formatMessage(w().CL.menuTitle),items:[...S().FU],selectedItem:o,onSelect:e=>{const n=s.map((a=>a.propertyId===t.propertyId?{...a,direction:e}:a));a(n)},getKey:e=>e,renderItem:e=>(0,k.jsx)(f().A,{title:w().bL[e.value],...e}),renderOrigin:e=>(0,k.jsx)(C().A,{...e,placeholder:n.formatMessage(w().CL.emptyPlaceholder),title:o&&w().bL[o],desktopStyle:{opacity:1}})},"direction")}function D(e){let{currentPropertyId:t,sortProperties:a,currentSorts:s,onChange:n}=e;const o=a.find((e=>e.id===t));return o?(0,k.jsx)(c().Ay,{popupType:c().z7.Popup,renderOrigin:e=>(0,k.jsx)(I().A,{...e,disabled:s.length===a.length,propertySchema:o,textWrapperStyle:{opacity:1}}),render:e=>{let{close:o}=e;return(0,k.jsx)(T().J,{onClick:e=>{(e=>{const a=s.map((a=>a.propertyId===t?{propertyId:e,direction:a.direction}:a));n(a)})(e),o()},currentSorts:s,sortProperties:a})}}):null}function P(e){let{sortProperties:t,currentSorts:a,onChange:s,preventMultipleSorts:n}=e;const o=a.map((e=>e.propertyId));return(0,k.jsxs)(v().A,{menuType:h().gu.Popup,minWidth:320,children:[(0,k.jsx)(x().Ay,{direction:"vertical",keys:o,renderKey:e=>(0,k.jsx)(_,{sortProperties:t,onChange:s,currentSorts:a,sort:a.find((t=>t.propertyId===e))}),onDrop:e=>function(e,t,a){const s=e.map((e=>a.find((t=>t.propertyId===e)))).filter(p().O9);t(s)}(e,s,a)}),(0,k.jsxs)(y().A,{children:[n?null:(0,k.jsx)(N,{sortProperties:t,currentSorts:a,onChange:s}),(0,k.jsx)(R,{currentSorts:a,onChange:s})]})]})}function N(e){let{sortProperties:t,currentSorts:a,onChange:s}=e;const n=B();if(!(a.length<t.length))return null;return(0,k.jsx)(c().Ay,{popupType:u().nl.Popup,renderOrigin:e=>(0,k.jsx)(f().A,{focused:!1,icon:(0,g().plusIcon)(n.icon),title:(0,k.jsx)(b().D,{colorName:"secondary",children:(0,k.jsx)(l().sA,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"})}),...e}),render:e=>{let{close:n}=e;return(0,k.jsx)(T().J,{sortProperties:t,currentSorts:a,onClick:e=>{s([...a,{propertyId:e,direction:"ascending"}]),n()}})}})}function R(e){let{currentSorts:t,onChange:a}=e;const s=B();return t.length>0?(0,k.jsx)(f().A,{focused:!1,icon:(0,m().trashIcon)(s.icon),title:(0,k.jsx)(b().D,{colorName:"secondary",children:(0,k.jsx)(l().sA,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"})}),onClick:()=>a([])}):null}function B(){return(0,n().IS)((e=>({icon:{width:24,height:16,marginRight:-2,fill:e.mediumIconColor}})),[])}function E(e){const{currentSorts:t,isMenuOpen:a,setIsMenuOpen:g,sortProperties:m,onApply:p,preventMultipleSorts:h}=e,f=(0,n().IS)((e=>({sortDirectionIcon:{width:12,height:22,marginRight:6,fill:"currentColor"},multiSortIcon:{width:16,height:22,marginRight:6,fill:"currentColor"},empty:{height:24}})),[]),[x,v]=(0,s.useState)(t.length?t:void 0),b=x??t;let y,S;if(1===b.length){var j;const e=b[0];y="ascending"===e.direction?(0,i().f)(f.sortDirectionIcon):(0,o().C)(f.sortDirectionIcon),S=null===(j=m.find((t=>t.id===e.propertyId)))||void 0===j?void 0:j.name}else y=(0,r().C)(f.multiSortIcon),S=(0,k.jsx)(l().sA,{defaultMessage:"{sortCount} sorts",id:"settingsConsoleSortButton.multiSorts.label",values:{sortCount:b.length}});const w=b.length||a?(0,k.jsx)(d().A,{on:b.length>0,icon:y,title:S,onClick:()=>g(!0)}):(0,k.jsx)("div",{style:f.empty});return(0,k.jsx)(u().Ay,{popupType:c().z7.Popup,open:a,origin:w,onDismiss:()=>{p(b),v(void 0),g(!1)},originGap:4,render:()=>(0,k.jsx)(P,{...e,preventMultipleSorts:b.length>0&&h,onChange:v,currentSorts:b})})}},915341:(e,t,a)=>{a.d(t,{E:()=>n});a(242343);var s=a(163643);const n=(0,a(680369).wt)("circleDottedCircle",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M9.993 16.626a6.8 6.8 0 0 1-2.727-.554 7.1 7.1 0 0 1-2.256-1.524 7.3 7.3 0 0 1-1.525-2.256 6.8 6.8 0 0 1-.553-2.728q0-1.449.553-2.727a7.24 7.24 0 0 1 3.773-3.78 6.8 6.8 0 0 1 2.728-.554q1.456 0 2.735.554t2.256 1.53a7.1 7.1 0 0 1 1.53 2.25 6.8 6.8 0 0 1 .554 2.727q0 1.45-.553 2.728a7.22 7.22 0 0 1-3.787 3.78 6.8 6.8 0 0 1-2.728.554m0-1.395q1.184 0 2.208-.437a5.7 5.7 0 0 0 1.805-1.217 5.7 5.7 0 0 0 1.217-1.804q.437-1.026.437-2.209a5.55 5.55 0 0 0-.437-2.2 5.66 5.66 0 0 0-3.029-3.029 5.6 5.6 0 0 0-2.208-.438q-1.176 0-2.208.438A5.6 5.6 0 0 0 5.98 5.552a5.7 5.7 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.201q0 1.183.438 2.209a5.7 5.7 0 0 0 1.21 1.804 5.6 5.6 0 0 0 4.013 1.654Zm0-8.162a.49.49 0 0 1-.513-.506.49.49 0 0 1 .513-.505.49.49 0 0 1 .506.505.49.49 0 0 1-.506.506m1.504.404a.5.5 0 0 1-.362-.144.5.5 0 0 1-.144-.369.49.49 0 0 1 .506-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.513m1.1 1.1a.49.49 0 0 1-.505-.506.49.49 0 0 1 .506-.505.49.49 0 0 1 .505.505.49.49 0 0 1-.505.506Zm.404 1.504a.49.49 0 0 1-.506-.506.49.49 0 0 1 .506-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.506m-.403 1.51a.49.49 0 0 1-.506-.505.49.49 0 0 1 .506-.513.49.49 0 0 1 .506.513.49.49 0 0 1-.506.506Zm-1.1 1.095a.49.49 0 0 1-.506-.506.49.49 0 0 1 .505-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.506Zm-1.505.403a.49.49 0 0 1-.513-.506.49.49 0 0 1 .513-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.506m-1.51-.403a.49.49 0 0 1-.506-.506.49.49 0 0 1 .505-.506q.219 0 .363.143.15.144.15.363a.48.48 0 0 1-.15.362.5.5 0 0 1-.363.144Zm-1.101-1.094a.49.49 0 0 1-.506-.506.49.49 0 0 1 .506-.513.49.49 0 0 1 .506.513.49.49 0 0 1-.506.506m-.403-1.51a.49.49 0 0 1-.506-.507.49.49 0 0 1 .506-.506.49.49 0 0 1 .505.506.49.49 0 0 1-.505.506Zm.403-1.505a.49.49 0 0 1-.506-.506.49.49 0 0 1 .506-.505.49.49 0 0 1 .506.505.49.49 0 0 1-.506.506m1.1-1.1a.49.49 0 0 1-.505-.513.49.49 0 0 1 .505-.506q.219 0 .363.144.15.143.15.362 0 .225-.15.37a.5.5 0 0 1-.363.143"})})},922126:(e,t,a)=>{a.d(t,{$:()=>s,A:()=>o});const s={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range",NOT_SUPPORTED:"Not supported"};class n extends(()=>a(129044))().default{getInitialState(){return{dateEdited:!1,timeEdited:!1,temporaryValue:{date:void 0,time:void 0},error:void 0}}}const o=n},935449:(e,t,a)=>{a.d(t,{R:()=>o});var s=()=>a(237385),n=()=>a(803290);function o(e){const t=(0,s().v3)();return(0,n().K8)((()=>{const a=t.currentUser.id;return!!(e&&e.isDefined()&&a)&&Boolean(e.isOwner(a))}),[t.currentUser.id,e])}},942415:(e,t,a)=>{a.d(t,{o:()=>c});a(242343);var s=()=>a(803290),n=()=>a(174114),o=()=>a(791976),i=()=>a(653998),r=()=>a(424339),l=()=>a(59279),d=a(163643);function c(e){let{teamStore:t,iconSize:a=24,useThinTitle:c,showMemberCount:u,memberCountOverride:g}=e;const m=(0,n().IS)((e=>({icon:{height:a-4,width:a-4,color:e.lightIconColor,fill:"currentColor"},hiddenTeamName:{color:e.text.tertiary}})),[a]),[p,h]=(0,s().K8)((()=>[null==t?void 0:t.getName(),null==t?void 0:t.getRawMembership().length]),[t]);return p?(0,d.jsx)(l().s7,{useThinTitle:c,icon:t?(0,d.jsx)(r().x,{disabled:!0,store:t,size:a}):void 0,title:p,byline:u&&void 0!==h?(0,d.jsx)(i().sA,{id:"baseTable.teamCell.memberCount",defaultMessage:"{numMembers, plural, one {# member} other {# members}}",values:{numMembers:g??h}}):null}):(0,d.jsx)(l().s7,{useThinTitle:c,icon:(0,o().T)(m.icon),title:(0,d.jsx)("span",{style:m.hiddenTeamName,children:(0,d.jsx)(i().sA,{id:"baseTable.teamCell.hiddenTeam",defaultMessage:"Hidden"})})})}},942988:(e,t,a)=>{a.d(t,{j:()=>u});a(333225),a(494367),a(516262),a(573119),a(240480),a(950443),a(619601),a(725707),a(491955),a(771702),a(403517);var s=()=>a(237385),n=()=>a(162901),o=()=>a(409211),i=()=>a(514138),r=()=>a(413871),l=()=>a(953739),d=()=>a(949282),c=()=>a(684862);function u(){const e=(0,d().l)(),t=(0,s().v3)(),{spaceUsers:a,loading:u}=(0,c().$)(e),[g]=(0,n().Yb)((()=>{if(u)return Promise.resolve(void 0);const s=new Set,n=new Set,d=new Set,c={},g={};for(const t of e){const e=a[t.id]??[],o=e.filter(i().c7);o.forEach((e=>{n.add(e.userId),"editor"===e.role&&s.add(e.userId)}));const r=e.filter(i().QE);r.forEach((e=>d.add(e.userId))),c[t.id]=o,g[t.id]=r}const m=Array.from(s).map((e=>new(r().LU)(t,{table:o().oo,id:e}))).sort(((e,t)=>e.getProfilePhoto()?-1:t.getProfilePhoto()?1:0)).map((e=>e.id));return Promise.resolve({memberCount:n.size,guestCount:d.size,sampleMemberIds:Array.from(new Set([...m,...n])).slice(0,l().iP),membersForSpace:c,guestsForSpace:g,loading:u})}),[u,e,a,t]);return{state:g,loading:u}}},944110:(e,t,a)=>{a.d(t,{$E:()=>f,MC:()=>m,Rv:()=>h,dU:()=>p});a(333225),a(494367),a(516262),a(573119),a(240480),a(950443),a(619601);var s=a(242343),n=()=>a(803290),o=()=>a(297145),i=()=>a(25165),r=()=>a(250122),l=()=>a(297513),d=()=>a(653998),c=()=>a(76394),u=()=>a(172032),g=a(163643);function m(e){let{spaceStore:t,selectedPageStatus:a,setSelectedPageStatus:i,onMenuClose:l}=e;const c=(0,d().tz)(),m=new Set(["alive","in_trash","deleted_from_trash"]),{currentDeleteFromTrashDelayInSeconds:x,currentPurgeDelayInSeconds:v}=(0,n().K8)((()=>({currentDeleteFromTrashDelayInSeconds:(0,o().XX)(t.getModel())/1e3,currentPurgeDelayInSeconds:(0,o().NA)(t.getModel())/1e3})),[t]),b=(0,s.useMemo)((()=>h({currentDeleteFromTrashDelayInSeconds:x,currentPurgeDelayInSeconds:v,intl:c})),[x,v,c]);return(0,g.jsx)(u().A,{pillIcon:r().n,allOptions:m,selectedOptions:a,setSelectedOption:i,setPillTitleStringToActiveSelection:!0,onMenuClose:l,getFormattedStringTitle:p,getFormattedStringCaption:b,getPillTitle:f})}function p(e){switch(e){case"alive":return(0,g.jsx)(d().sA,{...i().o.alive});case"in_trash":return(0,g.jsx)(d().sA,{...i().o.trash});case"deleted_from_trash":return(0,g.jsx)(d().sA,{...i().o.retained});default:(0,c().HB)(e)}}function h(e){return function(t){switch(t){case"alive":return null;case"in_trash":return(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.caption.trash",defaultMessage:"Trashed pages are automatically deleted after {duration}",values:{duration:(0,l().rN)(e.currentDeleteFromTrashDelayInSeconds,e.intl)}});case"deleted_from_trash":return(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.caption.internal",defaultMessage:"Pages deleted from Trash are retained for {duration}",values:{duration:(0,l().rN)(e.currentPurgeDelayInSeconds,e.intl)}});default:(0,c().HB)(t)}}}function f(e){if(0===e.length)return(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.default",defaultMessage:"Page status"});const t=e.includes("alive"),a=e.includes("in_trash"),s=e.includes("deleted_from_trash");return t?a&&s?(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.allStatusSelected",defaultMessage:"All pages"}):a||s?(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveStatusWithActive",defaultMessage:"Include {trashSelected, select, true {Trash} other {retained pages}}",values:{trashSelected:a}}):(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.activeOnly",defaultMessage:"Active pages"}):a&&s?(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveOnly",defaultMessage:"Inactive pages"}):(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.singleInactiveStatus",defaultMessage:"{trashSelected, select, true {Trash} other {Retained pages}} only",values:{trashSelected:a}})}},949282:(e,t,a)=>{a.d(t,{l:()=>c});a(403517);var s=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(528762),r=()=>a(413871),l=()=>a(379356),d=()=>a(195260);function c(e){const t=(0,n().v3)(),{organizationOwnerRecordCache:a}=(0,s.useContext)(l().N),{spaceIds:c}=(0,s.useContext)(d().D);return(0,o().K8)((()=>(e??c).map((e=>new(r().SL)(t,{id:e,table:i().NX},{inMemoryRecordCache:a})))),[a,c,e,t])}},950786:(e,t,a)=>{a.d(t,{V:()=>s,v:()=>n});const s={mini:3,small:4,default:6,medium:8,large:12,max:16},n="0px 4px 0px -2px #00000005"},953739:(e,t,a)=>{a.d(t,{Gz:()=>v,Qp:()=>y,iP:()=>f,tR:()=>x});a(403517);var s=a(242343),n=()=>a(803290),o=()=>a(174114),i=()=>a(951592),r=()=>a(653998),l=()=>a(907721),d=()=>a(98508),c=()=>a(517198),u=()=>a(701270),g=()=>a(142708),m=()=>a(103151),p=()=>a(971404),h=a(163643);const f=4,x=24,v=18,b=10;function y(e){const{avatars:t,totalCount:a,avatarLimit:x,renderOverflowTooltip:v,isLightBackground:y,avatarStyles:S,isLoading:j}=e,w=(0,p().Z)(),A=(0,o().IS)((e=>({bottom:{display:"flex"},userAvatarContainer:{display:"flex",flexDirection:"row",isolation:"isolate",alignItems:"center",cursor:"default"},hiddenAvatarCount:{display:"flex",marginLeft:12,alignItems:"center"},scroller:{maxWidth:250,maxHeight:300,padding:0}})),[]),{pinTooltip:M,unpinTooltip:C,setImmediateState:I,isHovering:T}=function(){const[e,t]=(0,s.useState)(!1),a=(0,i().lW)(e,400,Object.is),[n,o]=(0,s.useState)(void 0),r=n||a,l=(0,s.useCallback)((()=>o(r)),[r]),d=(0,s.useCallback)((()=>{o(void 0)}),[]);return{pinTooltip:l,unpinTooltip:d,setImmediateState:t,isHovering:!1===e&&!0===r}}(),k=(0,n().K8)((()=>{let e=t;t.length>(x||f)&&(e=t.slice(0,x||f));for(const t of e)if(!t.renderAvatar)return[];return e}),[x,t]),_=(0,s.useCallback)((e=>({marginRight:e+1===k.length?0:-b,...S})),[S,k.length]);if(j)return(0,h.jsxs)("div",{style:A.bottom,children:[(0,h.jsx)("div",{style:A.userAvatarContainer,children:new Array(f).fill(null).map(((e,t)=>(0,h.jsx)(c().A,{style:{...w.avatarShimmer,..._(t)}},t)))}),(0,h.jsx)("div",{style:A.hiddenAvatarCount,children:(0,h.jsx)(c().A,{style:w.shortShimmer})})]});const z=x||f,D=(a||t.length)-z;return(0,h.jsxs)("div",{style:A.bottom,children:[(0,h.jsx)("div",{style:A.userAvatarContainer,children:k.map(((e,t)=>(0,h.jsx)(m().A,{isLightBackground:y,disableTooltip:!e.renderTooltip,delayThreshold:0,renderTooltip:e.renderTooltip??(()=>{}),placement:l().W.Bottom,alignment:l().C.Start,render:a=>(0,h.jsx)("div",{style:{zIndex:z-t,..._(t)},...a,children:e.renderAvatar()})},`avatar-${t}`)))}),D>0&&(0,h.jsx)(m().A,{disableTooltip:!v,placement:l().W.Bottom,alignment:l().C.Start,style:{paddingRight:0},forceVisibleState:T||void 0,delayThreshold:0,renderTooltip:e=>v?(0,h.jsx)(g().H,{...e,onMouseEnter:M,onMouseLeave:C,type:d().A.Y,style:A.scroller,children:v(e)}):void 0,allowHover:!0,render:e=>(0,h.jsx)("div",{style:A.hiddenAvatarCount,...e,onMouseEnter:t=>{var a;I(!0),null===(a=e.onMouseEnter)||void 0===a||a.call(e,t)},onMouseLeave:t=>{var a;I(!1),null===(a=e.onMouseLeave)||void 0===a||a.call(e,t)},children:(0,h.jsx)(u().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,h.jsx)(r().sA,{defaultMessage:"+{numHiddenAvatars}",id:"settingsConsole.general.numHiddenAvatars",values:{numHiddenAvatars:D.toLocaleString()}})})}),isLightBackground:y})]})}},960087:(e,t,a)=>{a.d(t,{a:()=>o,k:()=>i});a(725707),a(500234);var s=()=>a(472980);const n={externalWorkspaceName:{defaultMessage:"External workspace",id:"managedUsers.externalWorkspaceName",description:"A generic name to replace the real name of an external workspace."}};function o(e){return e.formatMessage(n.externalWorkspaceName)}function i(e){if(!e)return;const t=Object.entries(s().iI).find((t=>{let[a,s]=t;return s===e}));if(t){return t[0]}}},971404:(e,t,a)=>{a.d(t,{Z:()=>n});var s=()=>a(174114);function n(){return(0,s().IS)((e=>({longShimmer:{borderRadius:4,height:14,width:185},longTallShimmer:{borderRadius:4,height:25,width:185},shortShimmer:{borderRadius:4,height:14,width:70},avatarShimmer:{borderRadius:"100%",height:28,width:28,background:"light"===e.mode?"rgb(243 243 243)":"rgb(38 38 38)"}})),[])}},975149:(e,t,a)=>{a.d(t,{Cx:()=>r,LL:()=>d,Ox:()=>c,Qq:()=>o,h6:()=>l,tL:()=>i});a(242343);var s=()=>a(653998),n=a(163643);function o(e){const{memberCount:t}=e;return(0,n.jsx)(s().sA,{id:"organization.general.members.count",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:t.toLocaleString()}})}function i(e){const{teamCount:t}=e;return(0,n.jsx)(s().sA,{id:"organization.general.teamspaces.count",defaultMessage:"{teamCount, plural, one {{teamCount} teamspace} other {{teamCount} teamspaces}}",values:{teamCount:t.toLocaleString()}})}function r(e){const{workspacesCount:t}=e;return(0,n.jsx)(s().sA,{id:"organization.general.workspaces.count",defaultMessage:"{workspacesCount, plural, one {{workspacesCount} workspace} other {{workspacesCount} workspaces}}",values:{workspacesCount:t}})}function l(e){const{guestCount:t}=e;return(0,n.jsx)(s().sA,{defaultMessage:"{numGuests} {numGuests, plural, one {guest} other {guests}}",id:"organizationManageWorkspacesTable.numGuests",values:{numGuests:t}})}function d(e){const{verifiedDomainsCount:t,pendingDomainsCount:a}=e;return(0,n.jsx)(s().sA,{defaultMessage:"{verifiedDomainsCount} verified · {pendingDomainsCount} pending",id:"organizationEmailDomainsTable.emailDomainsSummaryCounts",values:{verifiedDomainsCount:t,pendingDomainsCount:a}})}function c(e){const{scimTokensCount:t}=e;return(0,n.jsx)(s().sA,{defaultMessage:"{scimTokensCount} tokens",id:"organizationEmailDomainsTable.scimTokensCount",values:{scimTokensCount:t}})}},976576:(e,t,a)=>{a.d(t,{Jb:()=>d,OJ:()=>h,fP:()=>x,i_:()=>f});a(725707),a(491955),a(403517);var s=()=>a(524118),n=()=>a(865415),o=()=>a(409211),i=()=>a(868325),r=()=>a(413871),l=()=>a(818369);const d="last_90_days",c={field:"last_active",direction:"desc"};async function u(e){const{environment:t,filter:a,spaceId:s,currentSpaceId:n,usersTabData:o}=e,i=null==o?void 0:o.dailyUsersData;return i&&a===(null==o?void 0:o.graphFilter)&&n===s?i:g({environment:t,spaceId:s,filter:a})}async function g(e){const{environment:t,spaceId:a,filter:s}=e,o=await l().callApi({eventName:"getDailyUsersAnalytics",environment:t,data:{spaceId:a,activeWindow:"all_time"===s?"last_90_days":s},headers:{[n().B3]:a}});return"failed"===o.type?o.body:o.data}async function m(e){const{environment:t,filter:a,sort:s,spaceStore:n,currentSpaceId:o,usersTabData:i}=e,r=null==i?void 0:i.tableFilter,l=null==i?void 0:i.userTableSort;return null!=i&&i.usersAndStats&&r===a&&l&&l.direction===s.direction&&l.field===s.field&&o===n.id?i.usersAndStats:p({environment:t,filter:a,sort:s,spaceStore:n})}async function p(e){const{environment:t,filter:a,sort:s,spaceStore:i}=e,d=await l().callApi({eventName:"loadWorkspaceAnalyticsUsers",environment:t,data:{spaceId:i.id,filters:{timeRange:a},sort:s},headers:{[n().B3]:i.id}});return"failed"===d.type?d.body:d.data.users.map((e=>({stats:e,userStore:r().LU.createChildStore(i,{table:o().oo,id:e.userId})})))}async function h(e){const{environment:t,spaceStore:a,currentTab:n,currentSpaceId:o,usersTabData:i,setState:r,graphFilter:l,tableFilter:g}=e,p=await async function(e){const{environment:t,spaceStore:a,currentSpaceId:n,usersTabData:o,graphFilter:i,tableFilter:r}=e,l=i||(null==o?void 0:o.graphFilter)||d,g=r||(null==o?void 0:o.tableFilter)||d,p=(null==o?void 0:o.userTableSort)||c,[h,f]=await Promise.all([u({environment:t,filter:l,spaceId:a.id,currentSpaceId:n,usersTabData:o}),m({environment:t,filter:g,sort:p,spaceStore:a,currentSpaceId:n,usersTabData:o})]),x=(0,s().OwV)(h)||!h?[]:h,v=(0,s().OwV)(f)||!f?[]:f;return{graphFilter:l,tableFilter:g,userTableSort:p,dailyUsersError:(0,s().OwV)(h)?h:void 0,dailyUsersData:x,usersAndStatsError:(0,s().OwV)(f)?f:void 0,usersAndStats:v}}({environment:t,spaceStore:a,currentSpaceId:o,usersTabData:i,graphFilter:l,tableFilter:g});r({currentSpaceId:a.id,currentTab:n,usersTabData:p})}async function f(e){const{environment:t,spaceStore:a}=e,n=e.nextGraphFilter||d,o=e.nextTableFilter||d,i=e.nextSort||c,[r,l]=await Promise.all([g({environment:t,filter:n,spaceId:a.id}),p({environment:t,filter:o,sort:i,spaceStore:a})]),u=(0,s().OwV)(r)||!r?[]:r,m=(0,s().OwV)(l)||!l?[]:l;return{graphFilter:n,tableFilter:o,userTableSort:i,dailyUsersError:(0,s().OwV)(r)?r:void 0,dailyUsersData:u,usersAndStatsError:(0,s().OwV)(l)?l:void 0,usersAndStats:m}}function x(e,t){if((0,s().vP6)(e)){const a=(0,i().DX)(t,e);if(a)return a}return t.formatMessage({defaultMessage:"Failed to retrieve analytics. Try refreshing and reopening the settings.",id:"workspaceAnalytics.usersTab.refershUserAnalytics.defaultFailed"})}},977541:(e,t,a)=>{a.d(t,{H:()=>c,K:()=>g});a(242343);var s=()=>a(174114),n=()=>a(528762),o=()=>a(653998),i=()=>a(76394),r=()=>a(28210),l=()=>a(35462),d=a(163643);function c(e){let{id:t,name:a,icon:i,subscriptionTier:c,memberCount:u,highlightIconContainer:m}=e;const p=(0,o().tz)(),h=i?{pointer:{table:n().NX,id:t,spaceId:t},icon:i}:void 0,f=(0,s().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:"8px 0",width:"100%"},summaryContainer:{width:"calc(100% - 38px)"},iconContainer:{height:38,width:38,flexGrow:0,flexShrink:0,flexBasis:38,marginRight:12,display:"flex",justifyContent:"center",alignItems:"center",background:m?e.selectLightGray[50]:void 0,borderRadius:6},name:{fontSize:14,fontWeight:500},byline:{fontSize:12,opacity:.5}})),[m]);return(0,d.jsxs)("div",{style:f.container,children:[(0,d.jsx)("div",{style:f.iconContainer,children:(0,d.jsx)(r().B,{disabled:!0,icon:h,isEmptyPage:!1,size:32,title:a,isLarge:!0,emojiSize:28,isRaw:!1})}),(0,d.jsxs)("div",{style:f.summaryContainer,children:[(0,d.jsx)(l().A,{style:f.name,showTooltipWhenTruncated:!0,children:a}),(0,d.jsx)(l().A,{style:f.byline,children:(0,d.jsx)(o().sA,{id:"identityAndProvisioning.claimWorkspaces.summaryByline",defaultMessage:"{subscriptionTier} · {memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{subscriptionTier:g(c,p),memberCount:u}})})]})]})}const u=(0,o().YK)({free:{id:"subscriptionTier.free",defaultMessage:"Free"},personal:{id:"subscriptionTier.personal",defaultMessage:"Personal Pro"},plus:{id:"subscriptionTier.plus",defaultMessage:"Plus"},business:{id:"subscriptionTier.business",defaultMessage:"Business"},enterprise:{id:"subscriptionTier.enterprise",defaultMessage:"Enterprise"}});function g(e,t){switch(e){case"personal_free":case"team_free":case"free":return t.formatMessage(u.free);case"student":case"personal":return t.formatMessage(u.personal);case"plus":return t.formatMessage(u.plus);case"business":return t.formatMessage(u.business);case"enterprise":return t.formatMessage(u.enterprise);default:(0,i().HB)(e)}}},996417:(e,t,a)=>{a.d(t,{K:()=>l});a(242343);var s=()=>a(174114),n=()=>a(792104),o=()=>a(653998),i=()=>a(356813),r=a(163643);function l(e){const t=(0,o().tz)(),a=(0,s().IS)((e=>({icon:{width:21,height:void 0,fill:e.text.secondary},button:{display:"flex",alignItems:"center",fontSize:14,height:28,width:28,padding:6,color:e.text.secondary,fill:e.mediumIconColor,lineHeight:1,borderRadius:4}})),[]);return(0,r.jsx)(i().A,{ariaLabel:t.formatMessage({id:"organization.shared.table.exportButton.label",defaultMessage:"Export content"}),icon:n().f,iconStyle:a.icon,style:a.button,onClick:e.onClick,disabled:e.disabled,disabledFeedback:e.disabled,disableBackground:e.disabled})}}}]);