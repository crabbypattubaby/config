"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[75436],{33368:(e,t,r)=>{r.d(t,{D:()=>h});var i=r(242343),n=()=>r(237385),a=()=>r(803290),s=()=>r(331863),o=()=>r(395665),c=()=>r(818369),d=()=>r(548694),l=()=>r(997310),u=()=>r(485966),p=()=>r(384055),m=()=>r(898055),g=()=>r(647242),f=()=>r(613313);function h(){const e=(0,n().v3)(),t=(0,l().r)(),r=null==t?void 0:t.id,h=(0,m().l)({spaceId:r}),[x,v]=(0,i.useState)(!1),{currentSpaceStore:y}=(0,a().K8)((()=>{const{currentSpaceStore:e}=u().default.state;return{currentSpaceStore:e}}),[]),b=(0,a().K8)((()=>y?(0,d().GK)(e,y):void 0),[y,e]),S=function(e){return(0,a().K8)((()=>(0,f().vv)()&&Boolean("free"===(0,g().AI)(e))),[e])}(h),j=(0,a().K8)((()=>null==t?void 0:t.canAdmin()),[t]);return(0,i.useEffect)((()=>{!async function(){if(S&&r&&j)try{const t=await c().callApi({eventName:"getCustomerOffer",environment:e,data:{spaceId:r,offerCampaign:"resurrection_offer"}});if("failed"===t.type)return;if("offer"in t.data){const r=(0,s().RS)(t.data.offer);(0,o().u6)(r)&&(v(!0),b&&(0,p().Zc)({environment:e,spaceName:b,offerCampaign:"resurrection_offer"}))}}catch(t){return}}()}),[e,r,S,b,j]),x}},75199:(e,t,r)=>{r.d(t,{G5:()=>u,Ux:()=>g,g3:()=>p,jn:()=>l,o2:()=>m});r(725707),r(403517),r(244387);var i=()=>r(237385),n=()=>r(162901),a=()=>r(423600),s=()=>r(331863),o=()=>r(395665),c=()=>r(818369),d=()=>r(111826);function l(e){const{items:t,promo:r}=e;return t.map((e=>e.price.getDiscountPerBillingInterval({quantity:e.quantity,promo:r}))).reduce(((e,t)=>e.plus(t)))}function u(e){const{items:t,coupon:r}=e,i=r?(0,o().Pz)((0,s().Pq)(r)):void 0;return t.map((e=>e.price.getCostPerBillingInterval({quantity:e.quantity,offer:i}))).reduce(((e,t)=>e.plus(t)))}function p(e){const{taxAmount:t,calculatingTax:r,currencyCode:i}=e,n=t&&!r?t:0;return new(a().W)(i,n)}function m(e,t){const r=Math.min(0,d().o2(e));return new(a().W)(t,-r)}function g(e){const t=(0,i().v3)(),[r]=(0,n().Yb)((async()=>{if(!e)return;const r=await c().callApi({eventName:"getPromoCode",environment:t,data:{code:e.code}});return"failed"!==r.type?r.data.promo:void 0}),[t,e]);return"resolved"===r.status?r.value:void 0}},83251:(e,t,r)=>{r.r(t),r.d(t,{MidtermCheckoutModal:()=>ee});var i=r(242343),n=()=>r(237385),a=()=>r(803290),s=()=>r(647242),o=()=>r(649074),c=()=>r(224317);const d=["enterprise_three_months","enterprise_annual","business_three_months","business_annual","team_three_months","team_annual","ai_fifty_percent_downgrade"];var l=()=>r(395665),u=()=>r(539048),p=()=>r(983050),m=()=>r(104838),g=()=>r(159448),f=()=>r(305043),h=()=>r(146907),x=(r(725707),r(491955),r(403517),()=>r(174114)),v=()=>r(83544),y=()=>r(844081),b=()=>r(423600),S=()=>r(653998),j=()=>r(975392),I=()=>r(76394),A=()=>r(421338),w=()=>r(884373),M=()=>r(392968),C=()=>r(701270),D=()=>r(245388),P=()=>r(910200),T=()=>r(724574),k=()=>r(669199),N=()=>r(613313),U=()=>r(75199),B=()=>r(764227),E=()=>r(700432),L=()=>r(979740),O=()=>r(243919),_=()=>r(556673),R=()=>r(499670),K=()=>r(784473),W=()=>r(502140),q=()=>r(331863),F=()=>r(421650),z=()=>r(790250),G=()=>r(980759),Y=()=>r(505316),H=()=>r(403551),V=()=>r(926765),X=r(163643);function Z(e){let{desiredState:t,subscription:r,spaceStore:a,showTrialEndDisclaimer:s,modalId:c,primaryButtonText:d,postUpgradeCallback:l,couponOffer:u}=e;const p=(0,n().v3)(),m=(0,S().tz)(),[g,f]=i.useState(void 0),[x,v]=i.useState(!1);return(0,X.jsx)(V().i,{textAlign:"center",primaryButtons:[{buttonType:"primary",label:d??(0,X.jsx)(S().sA,{id:"subscriptionUpdateModal.confirmationButton",defaultMessage:"Confirm changes"}),onClick:async()=>{F().wD(p,{modalId:c}),v(!0);const e=await(0,Y().getStripe)();if(!e)return(0,W().log)({level:"error",from:"MidtermCheckoutModal",type:"StripeError",error:{miscDataString:"Stripe elements not initialized when user tried to upgrade"}}),f(m.formatMessage({id:"spaceSubscriptionUpgradeModal.stripeNotLoaded",defaultMessage:"We could not reach our payment processor. Please reload the page or try again later."})),void v(!1);if((0,z().v4)({environment:p,currentState:r,desiredState:t})){if(!(await(0,H().Z)(p)))return void v(!1)}const i=await(0,K().F3)({environment:p,spaceStore:a,desiredState:t,stripe:e,intl:m,postUpgradeCallback:l,coupon:(0,q().RS)(u)});if(null!=i&&i.error)return f(i.error),void v(!1);(0,h().A)(p,c)},baseStyleOverride:{borderRadius:8},isDisabled:x,isLoading:x}],termsOfService:(0,X.jsx)(G().w,{products:(0,o().Fe)(t),showTrialEndDisclaimer:s}),error:g})}var J=()=>r(82482);function Q(e){let{from:t,desiredProducts:r,desiredInterval:c,billingData:d,subscription:l,subscriptionData:u,spaceStore:p,modalId:m,prices:g,postUpgradeCallback:f,couponOffer:h}=e;const W=(0,n().v3)(),q=(0,x().IS)((()=>({headerImage:{width:49,height:52}})),[]),F=(0,x().DP)(),z=(0,s().Ry)(d)??"USD",G=(0,U().o2)(u,z),{desiredState:Y,quantities:H,newItems:V}=(0,K().cP)({desiredProducts:r,desiredInterval:c,billingData:d,prices:g}),Q=(0,i.useMemo)((()=>(0,K().Dd)(z,Y,h)),[z,Y,h]),$=(0,i.useMemo)((()=>Y.items.map(P().Kz).filter(I().O9)),[Y.items]),{tax:ee,isLoading:te}=(0,K().Fy)({environment:W,currencyCode:z,address:d.address,lineItems:$,taxableAmount:Q,billingData:d}),{subtotal:re,lineItems:ie,isLoading:ne,couponApplicationResult:ae}=(0,K().vF)({spaceStore:p,quantities:H,desiredState:Y,currencyCode:z,couponOffer:h}),se=(0,i.useMemo)((()=>ie&&(0,I().EI)(ie)?ie.map((e=>(0,P().gM)({line:e}))):[]),[ie]),{tax:oe,isLoading:ce}=(0,K().Fy)({environment:W,currencyCode:z,address:d.address,lineItems:se,taxableAmount:re??new(b().W)(z,0),billingData:d}),de=(0,y().Cg)(g,d,Y,H,{}),le=(0,L().Hj)(d,de),ue=(0,K().Vq)({change:de.subscription,interval:(0,o().yw)(Y),currentPeriodEnd:l.currentPeriodEnd,now:d.clock.now}),pe=(0,i.useMemo)((()=>(0,k().Sk)(d)?(0,j().Lc)(de.subscription.immediate.items,l.items,"price.externalId"):V),[d,de.subscription.immediate.items,l.items,V]),me=r[0],ge=!(0,k().Sk)(d)&&c!==(0,s().q8)(d),fe=(0,a().K8)((()=>(0,N().Le)()),[]),he=(0,E().q)(),xe=(0,B().YS)({product:me,currentSubscriptionTier:(0,s().AI)(d),salesStatus:he,packagingChangesEnabled:fe}),ve=ge?(0,K().eO)({interval:c,effectiveDate:(0,y().AL)(de.subscription)?void 0:ue}):(0,R().P8)({from:t,product:xe,may13PackagingChangesEnabled:fe}),ye=ge?(0,X.jsx)(M().Ay,{src:"light"===F.mode?v().A.images.pricing.light.changeBillingPeriodPng:v().A.images.pricing.dark.changeBillingPeriodPng,style:q.headerImage}):(0,T().f)({headerContent:ve,primaryProduct:me}),[be,Se]=(0,i.useState)(!1);return(0,X.jsxs)(A().Y1,{gap:28,padding:"28px 32px",children:[(0,X.jsx)(O().K,{...ve,title:(0,X.jsx)(C().D,{styleName:"Title-Large-26px/Bold",colorName:"primary",children:ve.title}),image:ye}),(0,X.jsx)(_().I,{billingData:d}),(0,X.jsxs)(A().Y1,{gap:20,children:[(0,X.jsx)(w().A,{size:1}),(0,X.jsx)(J().J,{immediate:{subtotal:re,tax:oe,isLoading:ce||ne},recurring:{subtotal:Q,tax:ee,isLoading:te},nextBillingDate:ue,accountBalance:G,items:pe,chargeType:(0,y().AL)(de.subscription)?{chargeType:"immediate"}:{chargeType:"nextPeriod",periodEnd:ue},modalId:m,isExpanded:be,setIsExpanded:Se,couponApplicationResult:ae}),(0,X.jsx)(Z,{desiredState:Y,subscription:l,spaceStore:p,showTrialEndDisclaimer:le,modalId:m,primaryButtonText:ge?void 0:(0,X.jsx)(S().sA,{id:"subscriptionUpgradeModal.upgradeButton.upgradeAi",defaultMessage:"Upgrade now"}),postUpgradeCallback:f,couponOffer:h})]}),(0,X.jsx)(D().Rz,{style:{top:16,right:16}})]})}var $=()=>r(791022);function ee(e){let{spaceStore:t}=e;const r=(0,n().v3)();(0,i.useEffect)((()=>{m().o2({environment:r,spaceStore:t})}),[r,t]);const d=(0,g().lh)({spaceId:t.id}),x=(0,g().o2)(),v=(0,a().O$)(f().subscriptionDataStoreInstance),y=(0,a().K8)((()=>$().A.state),[]);if(!(d&&d.subscription&&y.open&&v&&0!==x.length))return null;const b=d.subscription,S=(0,s().lQ)(d),j=y.desiredProducts??(0,o().Fe)(S),I=y.desiredInterval??(0,o().yw)(S)??(0,o().yw)(b)??"month",A=function(e,t){if("coupon"===(null==e?void 0:e.type)&&(0,c().MN)(e.campaign,t))return e}((0,l().Pz)(y.couponCampaign),j);return(0,X.jsx)(u().s,{ariaLabelledBy:p().Kvs,isOpen:!0,onDismiss:()=>(0,h().A)(r,y.modalId),animateSizeTransition:!1,areaConstraint:{width:{type:"min",length:480},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,X.jsx)(Q,{from:y.from,desiredProducts:j,desiredInterval:I,billingData:d,subscription:b,subscriptionData:v,spaceStore:t,modalId:y.modalId,prices:x,postUpgradeCallback:y.postUpgradeCallback,couponOffer:A})})}},724574:(e,t,r)=>{r.d(t,{f:()=>p});r(242343);var i=()=>r(83544),n=()=>r(174114),a=r(163643);function s(e){const{style:t,shadowVariant:r="strong",wrapStyle:i,imageSrc:s,variant:o="medium",alt:c,wrapWithPadding:d=!0}=e;let l=36;"medium"===o?l=36:"large"===o&&(l=48);const u=(0,n().IS)((e=>({faceImgWrap:{width:l,height:l,borderRadius:"100%",background:e.assistantCornerButtonBackground,..."strong"===r&&{boxShadow:e.shadowMD},..."light"===r&&{borderRadius:"50%",boxShadow:e.shadowSM},overflow:"hidden",...i},faceImg:{height:l,width:l,...d&&{pointerEvents:"none"},...t}})),[r,i,d,t,l]),p=(0,a.jsx)("img",{style:u.faceImg,src:s,alt:c});return d?(0,a.jsx)("div",{children:(0,a.jsx)("div",{style:u.faceImgWrap,children:p})}):p}function o(){const e=(0,n().IS)((e=>({meetingNotesLight:{width:104,height:104,top:-17,left:-31,bottom:-28,position:"absolute"}})),[]);return(0,a.jsx)("div",{style:{width:47.3,height:48.7},children:(0,a.jsx)("img",{src:i().A.images.subscriptions.meetingNotesLightSvg,alt:"Notion AI Meeting Notes",style:e.meetingNotesLight})})}var c=()=>r(338563);function d(){const e=(0,n().IS)((e=>({wrapper:{display:"inline-block",position:"relative",width:52,height:52},mailIcon:{position:"absolute",width:24,objectFit:"cover",right:0,bottom:0}})),[]);return(0,a.jsxs)("div",{style:e.wrapper,children:[(0,a.jsx)(s,{imageSrc:c(),variant:"large",alt:"Notion AI Mail Icon"}),(0,a.jsx)("img",{style:e.mailIcon,src:i().A.images.subscriptions.notionAiMailSvg,alt:"Notion AI Mail Icon"})]})}var l=()=>r(531568),u=()=>r(849469);function p(e){const{headerContent:t,primaryProduct:r}=e;if("featureWithCustomImage"in t)switch(t.featureWithCustomImage){case"coreAI":case"aiConnectors":return(0,a.jsx)(l().cG,{variant:"medium_large"});case"meetingNotes":return(0,a.jsx)(o,{});case"researchMode":return(0,a.jsx)(s,{imageSrc:i().A.images.subscriptions.researchModeSvg,variant:"large",alt:"Notion Research Mode"});case"notionAIForMail":return(0,a.jsx)(d,{})}else if("ai"===r)return(0,a.jsx)(l().cG,{variant:"medium_large"});return(0,a.jsx)(u().X,{product:r})}},980759:(e,t,r)=>{r.d(t,{w:()=>b});r(725707),r(113085);var i=r(242343),n=()=>r(237385),a=()=>r(803290),s=()=>r(174114),o=()=>r(395665),c=()=>r(653998),d=()=>r(818369),l=()=>r(701270),u=()=>r(611824),p=()=>r(392608),m=()=>r(863969),g=()=>r(172553),f=()=>r(33368),h=()=>r(879205),x=()=>r(31448),v=r(163643);const y=function(){const e=(0,s().IS)((e=>({discountDescription:{alignItems:"center",color:e.text.secondary,fontSize:12,lineHeight:x().K_.UISmall.desktop}})),[]);return(0,v.jsx)("div",{style:e.discountDescription,children:(0,v.jsx)(c().sA,{id:"spaceSubscriptionSettings.orderOptions.estimatedPriceWarning",defaultMessage:"The final amount due may be impacted by prorations and member changes since your last invoice."})})};function b(e){const{products:t,showTrialEndDisclaimer:r,showProductTerms:i=!0}=e,n=(0,s().IS)((()=>({termsOfService:{display:"flex",flexDirection:"column",gap:12}})),[]),c=(0,a().K8)((()=>h().A.state.selectedCurrencyCode),[]),d=t.includes("ai"),u=t.some((e=>"ai"!==e)),p=void 0!==c&&"USD"!==c,m=(0,a().K8)((()=>{var e;return g().A.state.open?null===(e=g().A.state)||void 0===e?void 0:e.coupon:void 0}),[]),x=(0,f().D)()&&t.includes("plus")&&(0,o().u6)(m);return(0,v.jsx)(l().D,{styleName:"Body-12px/Regular",colorName:"secondary",children:(0,v.jsxs)("div",{style:n.termsOfService,children:[r?(0,v.jsx)(j,{}):null,i?(0,v.jsx)(S,{hasAi:d,hasPlan:u}):null,u&&x&&(0,v.jsx)(M,{}),p?(0,v.jsx)(C,{currencyCode:c}):null]})})}function S(e){let{hasAi:t,hasPlan:r}=e;return(0,v.jsxs)(v.Fragment,{children:[t&&!r?(0,v.jsx)(I,{}):null,t&&r?(0,v.jsx)(A,{}):null,!t&&r?(0,v.jsx)(w,{}):null]})}function j(){return(0,v.jsx)("div",{children:(0,v.jsx)(c().sA,{id:"spaceSubscriptionUpgradeModal.trialWillEndToday.message",defaultMessage:"Upgrading will end your trial and your workspace will be billed immediately."})})}function I(){const e=function(){const e=(0,n().v3)(),t=(0,m().O)(),[r,a]=(0,i.useState)();return(0,i.useEffect)((()=>{async function r(){var r;if(!t)return!1;const i=await d().callApi({eventName:"getSpaceMembershipUpdates",environment:e,data:{spaceId:t}});if("failed"===i.type)return!1;const n=!1===(null===(r=i.data[0])||void 0===r?void 0:r.isProcessed);a(!!n)}r()}),[e,t]),r}();return(0,v.jsxs)("div",{children:[(0,v.jsx)(c().sA,{id:"subscriptionUpgradeModal.confirmation.aiOnly",defaultMessage:"By continuing, you agree to the <aiTerms>Notion AI Product Specific Terms</aiTerms>.",values:{br:(0,v.jsx)("br",{}),aiTerms:e=>(0,v.jsx)(u().A,{href:(0,p().xS)("ai.terms"),external:!0,children:e})}}),e?(0,v.jsx)(y,{}):null]})}function A(){return(0,v.jsx)("div",{children:(0,v.jsx)(c().sA,{id:"subscriptionUpgradeModal.confirmation.planWithAi",defaultMessage:"By continuing, you agree to the <terms>Notion Terms and Conditions</terms> and <aiTerms>Notion AI Product Specific Terms</aiTerms>.",values:{br:(0,v.jsx)("br",{}),terms:e=>(0,v.jsx)(u().A,{href:(0,p().xS)("terms"),external:!0,children:e}),aiTerms:e=>(0,v.jsx)(u().A,{href:(0,p().xS)("ai.terms"),external:!0,children:e})}})})}function w(){return(0,v.jsx)("div",{children:(0,v.jsx)(c().sA,{id:"subscriptionUpgradeModal.confirmation.planOnly",defaultMessage:"By continuing, you agree to the <terms>Notion Terms and Conditions</terms>.",values:{terms:e=>(0,v.jsx)(u().A,{href:(0,p().xS)("terms"),external:!0,children:e})}})})}function M(){return(0,v.jsx)("div",{children:(0,v.jsx)(c().sA,{id:"subscriptionUpgradeModal.confirmation.planOnlyResurrection",defaultMessage:"Enjoy 50% off your first 3 months of billing, then standard rates apply. <learnMore>Learn more</learnMore>",values:{learnMore:e=>(0,v.jsx)(u().A,{href:(0,p().xS)("resurrectionLearnMore"),external:!0,children:e})}})})}function C(e){return(0,v.jsx)("div",{children:(0,v.jsx)(c().sA,{id:"subscriptionUpgradeModal.confirmation.currencyRateWarning",defaultMessage:"<terms>Learn about FX rates</terms>. Rates will refresh throughout the billing period.",values:{terms:e=>(0,v.jsx)(u().A,{href:(0,p().xS)("terms.currency.fxRates"),external:!0,children:e})}})})}}}]);