"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[84350],{189542:(e,t,o)=>{o.d(t,{C:()=>_});var i=o(242343),n=()=>o(237385),r=()=>o(803290),a=()=>o(86280),s=()=>o(653998),c=()=>o(76394),l=()=>o(189588),d=()=>o(245272),u=()=>o(745454),p=(o(725707),o(113085),()=>o(174114)),f=()=>o(950635),m=()=>o(650199),v=()=>o(195394),g=()=>o(348588),y=()=>o(827086),h=()=>o(326259),b=()=>o(31448),M=()=>o(640979),V=()=>o(471979),x=()=>o(907721),w=()=>o(535906),C=()=>o(935091),S=()=>o(858023),k=()=>o(743668),A=()=>o(397791),P=()=>o(88271),T=()=>o(103151),j=()=>o(35462),R=()=>o(349185),O=()=>o(308925),B=o(163643);function D(e){const{onClose:t,blockStore:o,setVerificationMenuDisplay:i}=e,a=(0,n().v3)(),c=(0,s().tz)(),l=a.device.isMobile,D=(0,r().K8)((()=>(0,V().i1)(o)),[o]),H="verified"===D.type,I="verified"===D.type||"expired"===D.type,U=(0,r().K8)((()=>{const{verificationOwners:e}=(0,V().h4)({blockStore:o}),t=e.length;if(t<=0)return c.formatMessage(O().n.noOwners);const i=e[0],n=(0,f().xC)({pointer:i,getRecordModel:o.getRecordModel}),r=null==n?void 0:n.asActor,a=null==r?void 0:r.getDisplayName(c);if(!a)return c.formatMessage(O().n.noOwners);const s=t-1;return c.formatMessage(O().n.ownersAttribution,{actorName:a,numOtherActors:s})}),[o,c]),E=(0,r().K8)((()=>o.canEdit()),[o]),z=(0,r().K8)((()=>{const{verificationOwners:e}=(0,V().h4)({blockStore:o}),t=a.currentUser.id;return e.some((e=>e.id===t))}),[o,a.currentUser]),_=(0,p().IS)((e=>({disabledButton:{opacity:.7},redStyling:{color:e.text.uiRedPrimary},buttonRightContainer:{display:"flex",alignItems:"center",maxWidth:150,gap:2,color:e.icon.secondary},buttonRightText:{color:e.icon.secondary,fontSize:l?b().J.UIRegular.mobile:b().J.UISmall.desktop},footer:{color:e.text.secondary,fontSize:b().J.UISmall.desktop,borderTop:l?`1px solid ${e.regularDividerColor}`:void 0}})),[l]),N="none"!==D.type&&(0,B.jsx)("div",{style:_.footer,children:(0,B.jsx)(R().d,{lastVerifiedDate:H&&D.isIndefinite?D.startDateTime:D.dateTimeRange.start,getRecordModel:o.getRecordModel,actorPointer:D.actorPointer})});let K;return K=l?{menuType:M().gu.Modal,title:c.formatMessage(O().n.verificationMenuTitle),right:(0,B.jsx)(k().DoneMenuText,{}),onClickRight:t,footer:N}:{menuType:M().gu.Popup,width:320,footer:N},(0,B.jsx)(C().A,{...K,children:(0,B.jsx)(S().Ay,{type:S().Oh.Vertical,initialFocus:0,sections:[{key:"Verification Configuration",render:e=>(0,B.jsx)(P().A,{...e,hideTitle:l,title:c.formatMessage(O().n.verificationMenuTitle),disableMobilePadding:!0,disableMobileBorders:!0}),items:[{key:"Expiration",render:e=>{let t=c.formatMessage(O().n.noExpiration);"verified"!==D.type||D.isIndefinite?"expired"===D.type&&(t=h().OH({dateTime:D.dateTimeRange.end,intl:c,shortenDateAndRange:!0})):t=h().OH({dateTime:D.dateTimeRange.end,intl:c,shortenDateAndRange:!0});const o=!z,i=(0,B.jsxs)("div",{style:_.buttonRightContainer,children:[(0,B.jsx)(j().A,{style:_.buttonRightText,showTooltipWhenTruncated:!0,children:t}),z&&(0,B.jsx)(A().I,{icon:m().x,size:"sm"})]});return(0,B.jsx)(T().A,{placement:x().W.Right,render:t=>(0,B.jsx)(w().A,{...e,...t,title:c.formatMessage(O().n.expirationProperty),icon:(0,B.jsx)(A().I,{icon:g().D}),right:i,disabled:o,buttonStyle:o?_.disabledButton:void 0}),renderTooltip:()=>c.formatMessage(O().n.nonOwnersCannotEditVerification),disableTooltip:!o})},action:()=>{i("expiration")}},{key:"Verifier",render:e=>(0,B.jsx)(w().A,{...e,title:c.formatMessage(O().n.verifierProperty),icon:(0,B.jsx)(A().I,{icon:v().E}),right:(0,B.jsxs)("div",{style:_.buttonRightContainer,children:[(0,B.jsx)(j().A,{style:_.buttonRightText,showTooltipWhenTruncated:!0,children:U}),(0,B.jsx)(A().I,{icon:m().x,size:"sm"})]}),disabled:!E}),action:()=>{i("owner")}},{key:"Remove",render:e=>{const t=!z||!I;return(0,B.jsx)(T().A,{placement:x().W.Right,render:o=>(0,B.jsx)(w().A,{...e,...o,title:c.formatMessage(O().n.removeVerificationProperty),icon:(0,B.jsx)(A().I,{icon:y().xMarkIcon}),style:_.redStyling,disabled:t,buttonStyle:t?_.disabledButton:void 0}),renderTooltip:()=>c.formatMessage(O().n.nonOwnerCannotRemoveVerification),disableTooltip:!t})},action:()=>{var e;e={value:void 0,metadata:{action:"remove",entrypoint:"page_menu"}},d().h({environment:a,blockStore:o,verificationValue:e.value}),(0,u().q)({environment:a,blockStore:o,update:e}),t()}}]}]})})}var H=()=>o(575015),I=()=>o(84543),U=()=>o(396305);function E(e){const{blockStore:t,onClose:o}=e,i=(0,n().v3)(),l=(0,s().tz)(),{verifierValue:d,isDefaultUnpersistedValue:p}=(0,r().K8)((()=>{const{verificationOwners:e,isCreatedByDefault:o}=(0,V().h4)({blockStore:t});return{verifierValue:e,isDefaultUnpersistedValue:Boolean(o)}}),[t]);return(0,B.jsx)(U().Ay,{value:d,format:"page",valueIsUnpersistedDefaultValue:p,propertySchema:{name:l.formatMessage(O().n.verifierProperty),type:"person",limit:void 0,default:"created_by"},schema:{},insertChar:void 0,disabled:!1,onChange:e=>{(e=>{const o=t.getPropertyStore(a()._e.Owner);"personPropertyMenuUpdateAddPerson"===e.type?(I().createAndCommit({userAction:"PageVerificationBadge.addVerifier",environment:i,canUndo:!0,perform:t=>{for(const i of e.newValues)I().applyOperation({transaction:t,store:o,operation:{path:o.path,pointer:o.pointer,command:"addPersonAfter",args:{pointer:i}}})}}),(0,u().y)({environment:i,blockStore:t,entrypoint:"breadcrumbs",action:"add"})):"personPropertyMenuUpdateRemovePerson"===e.type?1===d.length?H().D6({label:(0,B.jsx)(s().sA,{id:"pageVerification.removeLastVerifier.error",defaultMessage:"At least one owner is required for verification."})}):(I().createAndCommit({userAction:"PageVerificationBadge.removeVerifier",environment:i,canUndo:!0,perform:t=>{I().applyOperation({transaction:t,store:o,operation:{path:o.path,pointer:o.pointer,command:"removePerson",args:{pointer:e.removedValue}}})}}),(0,u().y)({environment:i,blockStore:t,entrypoint:"breadcrumbs",action:"remove"})):"personPropertyMenuUpdateReplacePerson"===e.type?(I().createAndCommit({userAction:"PageVerificationBadge.replaceVerifier",environment:i,canUndo:!0,perform:t=>{I().applyOperation({transaction:t,store:o,operation:{path:o.path,pointer:o.pointer,command:"addPersonAfter",args:{pointer:e.newValue}}})}}),(0,u().y)({environment:i,blockStore:t,entrypoint:"breadcrumbs",action:"replace"})):(0,c().HB)(e)})(e)},onDismiss:o,parentStore:t,isTemplatePage:!1,formQuestionStore:void 0})}var z=()=>o(538878);function _(e){const{onClose:t,blockStore:o,entrypoint:r}=e,a=(0,n().v3)(),[s,l]=(0,i.useState)("mainVerificationMenu");return"mainVerificationMenu"===s?(0,B.jsx)(D,{onClose:t,blockStore:o,setVerificationMenuDisplay:l}):"owner"===s?(0,B.jsx)(N,{blockStore:o,onClose:a.device.isMobile?()=>l("mainVerificationMenu"):t,setVerificationMenuDisplay:l}):"expiration"===s?(0,B.jsx)(K,{blockStore:o,onClose:a.device.isMobile?()=>l("mainVerificationMenu"):t,setVerificationMenuDisplay:l,entrypoint:r}):void(0,c().HB)(s)}function N(e){const{onClose:t,blockStore:o,setVerificationMenuDisplay:i}=e,r=(0,n().v3)(),a=(0,s().tz)(),c=r.device.isMobile;return(0,B.jsxs)(B.Fragment,{children:[!c&&(0,B.jsx)(z().o,{label:W(a,"owner"),onClickBackButton:()=>i("mainVerificationMenu"),onClose:t,showBottomBorder:!0,width:350}),(0,B.jsx)(E,{blockStore:o,onClose:t})]})}function K(e){const{onClose:t,blockStore:o,setVerificationMenuDisplay:i,entrypoint:c}=e,p=(0,n().v3)(),f=(0,s().tz)(),m=p.device.isMobile,v=(0,r().K8)((()=>o.getPropertyStore(a()._e.Verification).getValue()),[o]);return(0,B.jsx)(l().y,{propertyName:"Verification Status",onChange:e=>{(e=>{d().h({environment:p,blockStore:o,verificationValue:e.value}),(0,u().q)({environment:p,blockStore:o,update:e})})(e)},verificationValue:(0,a().U1)(v),getRecordModel:o.getRecordModel,blockId:o.id,onClose:t,showTitle:m,showRemoveVerificationButton:m,showVerificationFooter:m,showCurrentStatusHeader:m,showCustomHeader:!m,customHeader:!m&&(0,B.jsx)(z().o,{label:W(f,"expiration"),onClickBackButton:()=>i("mainVerificationMenu"),onClose:t,showBottomBorder:!0,width:320}),entrypoint:c})}function W(e,t){return"expiration"===t?e.formatMessage(O().n.expirationProperty):"owner"===t?e.formatMessage(O().n.verifierProperty):"mainVerificationMenu"===t?null:void(0,c().HB)(t)}},238107:(e,t,o)=>{o.d(t,{A:()=>a});var i=o(242343),n=o(163643);function r(e){let{onClose:t,style:i}=e;const r=(0,o(653998).tz)(),{isMobile:a}=(0,o(237385).Y0)(),s=(0,o(174114).IS)((()=>({closeButton:{borderRadius:"100%",width:a?28:22,height:a?28:22,...i},closeButtonIconStyle:a?{width:18,height:18}:{}})),[a,i]);return(0,n.jsx)(o(356813).A,{iconStyle:s.closeButtonIconStyle,style:s.closeButton,hovered:!0,icon:o(81322).V,onClick:t,ariaLabel:r.formatMessage({id:"circleCloseButton.ariaLabel",defaultMessage:"Close"})})}const a=i.memo(r)},245272:(e,t,o)=>{o.d(t,{b:()=>c,h:()=>l});var i=()=>o(716605),n=()=>o(409211),r=()=>o(86280),a=()=>o(448316),s=()=>o(84543);function c(e){const{environment:t,blockStore:o,verificationValue:c}=e,l=o.getPropertyStore(r()._e.Verification),d=(0,i().j2)(c),u=o.getPropertyStore(r()._e.Owner),p=t.currentUser.id,f=p?{table:n().oo,id:p}:void 0;s().createAndCommit({userAction:"PageAddVerificationButton.verifyPage",environment:t,canUndo:!0,perform:e=>{a().R9({environment:t,store:l,value:d,transaction:e}),f&&s().applyOperation({transaction:e,store:u,operation:{path:u.path,pointer:u.pointer,command:"addPersonAfter",args:{pointer:f}}})}})}function l(e){const{environment:t,blockStore:o,verificationValue:n}=e,c=o.getPropertyStore(r()._e.Verification),l=(0,i().j2)(n);s().createAndCommit({userAction:"PageVerificationBadge.updatePageVerification",environment:t,canUndo:!0,perform:e=>{a().R9({environment:t,store:c,value:l,transaction:e})}})}},308925:(e,t,o)=>{o.d(t,{n:()=>i});const i=(0,o(653998).YK)({expirationProperty:{defaultMessage:"Expiration",id:"verificationHelpers.menuTitle.Expiration"},noExpiration:{defaultMessage:"None",id:"verificationHelpers.noExpiration"},verifierProperty:{defaultMessage:"Owner",id:"verificationHelpers.menuTitle.Owner"},noOwners:{defaultMessage:"No owners",id:"verificationHelpers.noOwners.placeholder"},removeVerificationProperty:{defaultMessage:"Remove verification",id:"verificationHelpers.removeVerification"},nonOwnerCannotRemoveVerification:{defaultMessage:"Only owners can remove verification",id:"verificationHelpers.nonOwnerCannotRemoveVerification"},nonOwnersCannotEditVerification:{defaultMessage:"Only owners can edit verification",id:"verificationHelpers.nonOwnersCannotEditVerification"},ownersAttribution:{defaultMessage:"{numOtherActors, plural, =0 {{actorName}} one {{actorName} and {numOtherActors} other} other {{actorName} and {numOtherActors} others}}",id:"verificationHelpers.displayPageOwners"},verificationMenuTitle:{defaultMessage:"Configure Verification",id:"verificationHelpers.verificationMenu.menuTitle.configureVerification"},addVerificationMenuTitle:{defaultMessage:"Verification Status",id:"verificationHelpers.verificationMenu.menuTitle.addVerification"}})}}]);