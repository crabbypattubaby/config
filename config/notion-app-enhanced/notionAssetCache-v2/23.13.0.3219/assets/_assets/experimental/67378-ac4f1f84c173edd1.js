"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[67378],{149256:(e,t,n)=>{n.d(t,{D:()=>i});n(333225),n(494367),n(516262),n(573119),n(240480),n(950443),n(619601),n(725707),n(107652),n(491955);function i(e){let{teamPagesByTeam:t,sharedPageIds:n}=e;const i=new Set(n);return Object.keys(t).filter((e=>t[e].every((e=>i.has(e)))))}},192064:(e,t,n)=>{n.d(t,{I:()=>u});n(242343);var i=()=>n(680369),o=()=>n(653998),s=()=>n(421338),a=()=>n(701270),r=()=>n(709237),l=()=>n(424339),c=n(163643);const d=(0,o().YK)({pageCount:{id:"creatorProfile.integrations.pageAccess.teamIconAndTitle.pageCount",defaultMessage:"({count, plural, one {1 top-level page} other {{count} top-level pages}})"}});function u(e){const{teamStore:t,pageCount:n,showPageCount:u}=e;return(0,c.jsxs)(s().Y1,{direction:"horizontal",gap:8,width:"hug",children:[(0,c.jsx)(l().x,{disabled:!0,store:t,size:i().Ev.default}),(0,c.jsx)(a().D,{styleName:"UIRegular-14px/Medium",children:(0,c.jsx)(r().A,{store:t})}),!1!==u&&(0,c.jsx)(a().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,c.jsx)(o().sA,{...d.pageCount,values:{count:n}})})]})}},208762:(e,t,n)=>{n.d(t,{Ay:()=>Ee,s_:()=>qe});n(610931),n(362833),n(725707),n(491955),n(403517),n(244387),n(113085);var i=n(242343),o=()=>n(237385),s=()=>n(803290),a=()=>n(174114),r=()=>n(83544),l=()=>n(30958),c=()=>n(246169),d=()=>n(981985),u=()=>n(214144),g=()=>n(858270),p=()=>n(518797),m=()=>n(409211),h=()=>n(514138),f=()=>n(405297),y=()=>n(653998),v=()=>n(975392),S=()=>n(76394),x=()=>n(31448),A=()=>n(336519),b=()=>n(759625),j=()=>n(110975),I=()=>n(84543);const C=n.p+"ce499dd1f3aabcfa.png";var w=()=>n(113920),k=()=>n(688522),M=()=>n(357050),P=()=>n(547851),B=()=>n(392608),T=()=>n(622286),N=()=>n(980936),_=()=>n(485966),D=()=>n(884534),L=()=>n(755450),O=()=>n(781661),z=()=>n(836331),W=()=>n(773082),R=()=>n(14944),K=()=>n(330469),U=()=>n(413871),E=()=>n(14679),H=()=>n(330358),G=()=>n(298520),F=()=>n(943066),q=()=>n(764227),$=()=>n(133926),Y=()=>n(879205),V=()=>n(339189),X=()=>n(220413),J=()=>n(477784),Z=()=>n(907721),Q=()=>n(466321),ee=()=>n(706788),te=()=>n(188658),ne=()=>n(3311),ie=()=>n(818369),oe=()=>n(640979),se=()=>n(359441),ae=()=>n(802955),re=()=>n(921637),le=()=>n(535906),ce=()=>n(935091),de=()=>n(932322),ue=()=>n(858023),ge=()=>n(678523),pe=()=>n(28210),me=()=>n(88271),he=()=>n(35462),fe=()=>n(23082),ye=n(163643);function ve(e){const{query:t}=e,n=(0,o().v3)(),a=(0,s().O$)(_().AppStoreCurrentSpaceStore),r=(0,s().K8)((()=>null==a?void 0:a.getBotSettingsStore().getValue()),[a]),l="approved_or_built_by_notion"===(null==r?void 0:r.integration_restrictions),c=(0,s().K8)((()=>null!=r&&r.integration_approval_statuses?Object.keys(r.integration_approval_statuses):[]),[r]),d=(0,s().K8)((()=>Object.keys(ee().Nu).map((e=>{const t=null==a?void 0:a.getRecordModel({id:e,table:te().Li});if("published"===(null==t?void 0:t.status))return e})).filter(S().O9)),[a]),u=(0,i.useMemo)((()=>d.some((e=>e===ee().Hd))),[d]),p=(0,s().K8)((()=>d.filter((e=>!c.includes(e))).slice(0,5)),[c,d]);return(0,ye.jsx)(ce().A,{menuType:oe().gu.Popup,width:255,header:Ae(t,p,l),children:(0,ye.jsx)(re().A,{request:t,performRequest:e=>async function(e){const{query:t,integrationType:n,environment:i,spaceId:o,approvedIntegrationIds:s,popularIntegrationIds:a,autoApproveBuiltByNotion:r}=e;if(!ae().A.state.online||!o)return[];if((0,ne().uj)(t)||(0,ne().c_)(t))return[t];if(""===t&&!r)return a;const l=await ie().callApi({eventName:"searchIntegrations",environment:i,data:{query:t,type:n,spaceId:o}});if("success"===l.type){const e=l.data.integrationIds.filter((e=>!s.includes(e))),t="production";if(!r){return e.sort(((e,n)=>(0,ee().CX)({integrationId:e,env:t})===(0,ee().CX)({integrationId:n,env:t})?0:(0,ee().CX)({integrationId:e,env:t})?-1:1)).slice(0,5)}return e.filter((e=>!(0,ee().CX)({integrationId:e,env:t}))).slice(0,5)}if("failed"===l.type)throw l.error;return(0,S().HB)(l)}({query:e,environment:n,spaceId:null==a?void 0:a.id,approvedIntegrationIds:c,popularIntegrationIds:p,autoApproveBuiltByNotion:l}),debounce:se().tu,render:(i,o,s)=>{if(!o||!s)return(0,ye.jsx)(me().A,{children:(0,ye.jsx)(fe().A,{})});const l=g().Gw.filter((e=>t&&e.name.toLowerCase().includes(t.toLowerCase())&&!c.includes(e.id)&&(e.id!==g().IQ||!u))),d=[];if(0===o.length&&0===l.length)d.push({key:"no_results",render:()=>(0,ye.jsx)(he().A,{isSmall:!0,style:{marginLeft:8},children:(0,ye.jsx)(y().sA,{id:"adminIntegrationSettings.search.label.noResults",defaultMessage:"No results"})}),action:()=>{}});else{const t=o.map((t=>{const i={table:te().Li,id:t};if(!a)return;const o=U().CX.createChildStore(a,i);if("internal"===o.getType())return;const s=o.getInfo(),l=null==s?void 0:s.icon;return{key:`${t}`,render:e=>(0,ye.jsx)(le().A,{...e,title:(0,ye.jsx)(he().A,{style:{fontWeight:x().Wy.semibold},children:o.getName()}),icon:l&&(0,ye.jsx)(pe().B,{disabled:!0,icon:{pointer:i,icon:l},isEmptyPage:!1,size:20}),style:l?{paddingBottom:12}:{paddingLeft:30,paddingBottom:12},shouldWrapCaption:!0,caption:(0,ye.jsx)(be,{tagline:null==s?void 0:s.tagline,isNotionIntegration:(0,ee().CX)({integrationId:o.id,env:"production"})}),className:"notranslate"}),action:()=>{e.closeDropdown(),xe({environment:n,currentSpaceStore:a,botSettings:r,integrationId:t})}}})).filter(S().O9),i=l.map((t=>{const i=t.info;return{key:`${t.id}`,render:e=>(0,ye.jsx)(le().A,{...e,title:(0,ye.jsx)(he().A,{style:{fontWeight:x().Wy.semibold},children:t.name}),icon:(0,ye.jsx)("img",{src:i.icon,style:{height:20}}),caption:i.tagline,style:{paddingBottom:12},shouldWrapCaption:!0,className:"notranslate"}),action:()=>{e.closeDropdown(),xe({environment:n,currentSpaceStore:a,botSettings:r,integrationId:t.id})}}})).filter(S().O9);d.push(...t,...i)}return(0,ye.jsx)(ue().Ay,{type:ue().Oh.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,ye.jsx)(me().A,{...e}),items:d}]})}})})}function Se(e){const{query:t}=e,n=(0,o().v3)(),i=(0,s().O$)(_().AppStoreCurrentSpaceStore);return i?(0,ye.jsx)(ce().A,{menuType:oe().gu.Popup,width:255,header:Ae(t,[],!1),children:(0,ye.jsx)(re().A,{request:t,performRequest:e=>async function(e){const{query:t,environment:n,spaceId:i}=e;if(!ae().A.state.online||!i)return[];if((0,ne().uj)(t)||(0,ne().c_)(t))return[t];const o=await ie().callApi({eventName:"searchIntegrations",environment:n,data:{query:t,type:"compliance",spaceId:i}});if("success"===o.type)return o.data.integrationIds;if("failed"===o.type)throw o.error;return(0,S().HB)(o)}({query:e,environment:n,spaceId:null==i?void 0:i.id}),debounce:se().tu,render:(t,n,o)=>{if(!n||!o)return(0,ye.jsx)(me().A,{children:(0,ye.jsx)(fe().A,{})});const s=[];if(0===n.length)s.push({key:"no_results",render:()=>(0,ye.jsx)(he().A,{isSmall:!0,style:{marginLeft:8},children:(0,ye.jsx)(y().sA,{id:"adminIntegrationSettings.search.label.noResults",defaultMessage:"No results"})}),action:()=>{}});else{const t=D().A.state.loaded&&W().A.state.loaded?D().A.state.webhookSubscriptions.map((e=>{var t;return null===(t=W().A.getBotsAsRecordMap().getValue({table:p().GP,id:e.bot_id}))||void 0===t?void 0:t.integration_id})):[],o=n.map((n=>{var o;const s=U().CX.createChildStore(i,{id:n,table:te().Li});if(t.includes(n))return;const a={table:te().Li,id:n},r=U().CX.createChildStore(i,a),l=null===(o=r.getInfo())||void 0===o?void 0:o.icon,c=(0,f().Hr)(r.id);return{key:`${n}`,render:e=>(0,ye.jsx)(le().A,{...e,title:(0,ye.jsxs)("div",{style:{display:"flex",float:"left",alignItems:"center"},children:[(0,ye.jsx)(he().A,{style:{fontWeight:x().Wy.semibold},children:r.getName()}),(null==c?void 0:c.type)&&(0,ye.jsx)("div",{style:{marginLeft:4},children:(0,ye.jsx)(ge().A,{children:c.type})})]}),icon:l&&(0,ye.jsx)(pe().B,{disabled:!0,icon:{pointer:a,icon:l},isEmptyPage:!1,size:20}),style:null!=c&&c.icon?{paddingBottom:12}:{paddingLeft:30,paddingBottom:12},shouldWrapCaption:!0,caption:(0,ye.jsx)(be,{tagline:null!=c&&c.tagline?J().A.formatMessage(null==c?void 0:c.tagline):"A SIEM or DLP partner",isNotionIntegration:!1})}),action:()=>{var t;e.closeDropdown();s.getModel()&&(null!=c&&null!==(t=c.oauth)&&void 0!==t&&t.accountInfoPropertyNames||"dlp"===(null==c?void 0:c.type))?O().A.setState({open:!0,integrationId:r.id}):L().A.setState({open:!0,integrationId:r.id})}}})).filter(S().O9);s.push(...o)}return(0,ye.jsx)(ue().Ay,{type:ue().Oh.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,ye.jsx)(me().A,{...e}),items:s}]})}})}):null}function xe(e){const{environment:t,currentSpaceStore:n,botSettings:i,integrationId:o}=e;if(n&&!(0,f().NV)(o)){const e={...null==i?void 0:i.integration_approval_statuses,[o]:{type:"integration",status:"approved"}};I().createAndCommit({userAction:"AdminIntegrationSettingsSearchResults.handleIntegrationSelection",environment:t,canUndo:!0,perform:t=>{b().zv({store:n,data:{bot_settings:{...i,integration_approval_statuses:e}},transaction:t})}})}}function Ae(e,t,n){return!e&&!n&&t.length>0&&(0,ye.jsx)(de().Ay,{title:(0,ye.jsx)(he().A,{isSmall:!0,style:{marginTop:4,fontWeight:x().Wy.medium},children:(0,ye.jsx)(y().sA,{defaultMessage:"Popular integrations",id:"adminIntegrationSettings.search.title.popularIntegrations"})})})}function be(e){const{tagline:t,isNotionIntegration:n}=e,i=(0,a().DP)(),o=n?{}:{maxHeight:52,overflow:"auto"};return t?(0,ye.jsxs)("div",{style:o,children:[t,n&&(0,ye.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:8},children:[(0,ye.jsx)(y().sA,{defaultMessage:"Developed by Notion",id:"adminIntegrationSettings.search.subtitle.notionBuilt"}),(0,d().m)({marginLeft:3,width:12,height:12,fill:i.invoiceGreen})]})]}):null}var je=()=>n(126451),Ie=()=>n(209684),Ce=()=>n(59175),we=()=>n(443252);const ke=(0,y().YK)({searchInputPlaceholder:{id:"adminConnectionsSettings.search.input.placeholder",defaultMessage:"Add by name or integration ID"},complianceIntegrationSearchInputPlaceholder:{id:"adminConnectionsSettings.search.input.complianceIntegrationPlaceholder",defaultMessage:"Add by name"}});function Me(){const e=(0,o().WS)(),t=(0,a().DP)(),[n,s]=(0,i.useState)(!0),[r,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(""),u=(0,i.useRef)(null);return n?(0,ye.jsx)(je().A,{style:{display:"flex",alignItems:"center",height:28,fontWeight:x().Wy.medium,fontSize:x().J.UIRegular.desktop,color:X().Ay.blue,padding:"0px 6px"},onClick:()=>{s(!1)},children:(0,ye.jsx)(y().sA,{id:"adminConnectionsSettings.search.button.label",defaultMessage:"{plusIcon} Add approved connection",values:{plusIcon:(0,V().W)({fill:X().Ay.blue,width:14,height:14,flexGrow:0,flexShrink:0})}})}):(0,ye.jsx)(we().Ay,{alignmentToOrigin:Z().C.Start,keepFocus:e,onDismiss:()=>{var e;const t=null===(e=window)||void 0===e?void 0:e.document.activeElement;u.current&&t===u.current&&u.current.blur(),s(!0),l(!1)},origin:(0,ye.jsx)(Ce().A,{type:"text",style:{width:255},left:(0,V().W)({fill:t.lightIconColor,width:14,height:14,marginRight:8,flexGrow:0,flexShrink:0}),ref:u,value:c,onFocus:()=>{l(!0)},placeholder:J().A.formatMessage(ke.searchInputPlaceholder),onChange:e=>d(e.target.value)}),open:r,popupType:Q().n.Popup,style:{width:255},render:()=>(0,ye.jsx)(ve,{query:c,closeDropdown:()=>l(!1)})})}function Pe(){const e=(0,o().WS)(),t=(0,a().DP)(),[n,s]=(0,i.useState)(!0),[r,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(""),u=(0,i.useRef)(null);return n?(0,ye.jsx)(Ie().p,{isBlue:!0,style:{display:"flex",alignItems:"center",height:28,fontWeight:x().Wy.medium,fontSize:x().J.UIRegular.desktop,color:X().Ay.blue,padding:"0px 6px"},onClick:()=>{var e;s(!1),null===(e=u.current)||void 0===e||e.focus()},children:(0,ye.jsx)(y().sA,{id:"adminConnectionsSettingsAddComplianceMenu.search.button.label",defaultMessage:"{plusIcon} Add connection",values:{plusIcon:(0,V().W)({fill:X().Ay.blue,width:14,height:14,flexGrow:0,flexShrink:0})}})}):(0,ye.jsx)(we().Ay,{alignmentToOrigin:Z().C.Start,keepFocus:e,onDismiss:()=>{var e;const t=null===(e=window)||void 0===e?void 0:e.document.activeElement;u.current&&t===u.current&&u.current.blur(),s(!0),l(!1)},origin:(0,ye.jsx)(Ce().A,{type:"text",style:{width:255},left:(0,V().W)({fill:t.lightIconColor,width:14,height:14,marginRight:8,flexGrow:0,flexShrink:0}),focus:!0,ref:u,value:c,onFocus:()=>{l(!0)},placeholder:J().A.formatMessage(ke.complianceIntegrationSearchInputPlaceholder),onChange:e=>d(e.target.value)}),open:r,popupType:Q().n.Popup,style:{width:255},render:()=>(0,ye.jsx)(Se,{query:c,closeDropdown:()=>{s(!0),l(!1)}})})}var Be=()=>n(635510),Te=()=>n(937999),Ne=()=>n(752405),_e=()=>n(417653),De=()=>n(884373),Le=()=>n(402557),Oe=()=>n(951540),ze=()=>n(611824),We=()=>n(90760),Re=()=>n(207762);const Ke=["member_connections","workspace_connections"],Ue=(0,y().YK)({aiSettingsCardName:{id:"AdminConnectionsSettings.aiSettingsCardName",defaultMessage:"Notion AI Connectors"},aiSettingsCardCaption:{id:"AdminConnectionsSettings.aiSettingsCardCaption",defaultMessage:"Get search results, AI answers, summaries and more without leaving Notion."}});function Ee(e){const t=(0,o().v3)(),{isMobile:n}=t.device,{guestBotIds:d,organizationOverrides:h}=e,A=(0,s().O$)(_().AppStoreCurrentSpaceStore),b=(0,s().K8)((()=>D().A.webhookSubscriptions.state.reduce(((e,t)=>{const n=t.getBotId();return n&&(e[n]=t.id),e}),{})),[]),I=(0,s().K8)((()=>z().default.checkGate({gateName:"webhooks_beta"})||z().default.checkGate({gateName:"e_discovery"})),[]),C=(0,T().X)("ai_connector_discoverability"),P=(0,T().X)("notion_ai_workspace_settings"),B=C&&!P,V=(0,y().tz)();let X=P?qe(V):function(e){const t=[];return t.push({id:l().e5,appName:"Slack",account:void 0,caption:"Get answers about public Slack channels and conversations using Notion AI",logo:r().A.images.externalIntegrations.slackIconPng,capabilities:null,canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const n=await(0,$().Bw)(e,{name:"ai_connectors",spaceId:null===(t=_().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("unavailable"===n.type)return void F().K(e,{from:"slack_connect_button",upsell:n.upsell});const i=u().JW();k().R.setState({...k().R.state,currentScreen:"introduction",analyticsFrom:"connection_settings",sessionId:i})},integrationTypes:["aiConnector"]}),t.push({id:l()._u,appName:"Google Drive",account:void 0,caption:"Get answers about Google Docs, Slides and Sheets using Notion AI",logo:r().A.images.googleDriveLogoPng,capabilities:null,canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const n=await(0,$().Bw)(e,{name:"ai_connectors",spaceId:null===(t=_().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("unavailable"===n.type)return void F().K(e,{from:"google_drive_connect_button",upsell:n.upsell});const i=u().JW();R().d.setState({...R().d.state,analyticsFrom:"connection_settings",sessionId:i,currentScreen:"info_screen"})},integrationTypes:["aiConnector"]}),t.push({id:l().Fl,appName:"GitHub",account:void 0,caption:"Get answers about GitHub PRs, issues and code repositories using Notion AI",logo:r().A.images.externalIntegrations.githubIconPng,capabilities:(0,ye.jsx)("div",{style:{display:"none"}}),canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const n=await(0,$().Bw)(e,{name:"ai_connectors",spaceId:null===(t=_().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("unavailable"===n.type)return void F().K(e,{from:"github_connect_button",upsell:n.upsell});const i=u().JW();N().o.setState({...N().o.state,analyticsFrom:"connection_settings",sessionId:i,currentScreen:"introduction"})},integrationTypes:["aiConnector"]}),t.push({id:l().S,appName:"Jira",account:void 0,caption:"Get answers about Jira projects, issues and boards using Notion AI",logo:r().A.images.externalIntegrations.jiraPng,capabilities:(0,ye.jsx)("div",{style:{display:"none"}}),canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const n=await(0,$().Bw)(e,{name:"ai_connectors",spaceId:null===(t=_().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("unavailable"===n.type)return void F().K(e,{from:"jira_connect_button",upsell:n.upsell});const i=u().JW();K().y.setState({...K().y.state,analyticsFrom:"connection_settings",sessionId:i,currentScreen:"info_screen"})},integrationTypes:["aiConnector"]}),t}(t);const J=(0,s().K8)((()=>A?(0,v().sb)([...d,...W().A.bots.state.map((e=>e.id))]).map((e=>{const t=U().vK.createChildStore(A,{table:p().GP,id:e,spaceId:A.id});return t.getAlive()?t:void 0})).filter(S().O9):[]),[A,d]),Z=(0,s().K8)((()=>(0,M().Mo)(J)),[J]),Q=(0,s().K8)((()=>w().A.state.appsConnectionData),[]),ee=(0,s().K8)((()=>function(e){return e.filter((e=>e.isInternalBot())).map((e=>e.id))}(J)),[J]),te=(0,s().K8)((()=>function(e,t){if(!t)return{};return e.reduce(((e,n)=>{const i=E().L.createChildStore(t,{table:m().oo,id:n.getCreatedById()}),o=n.getIntegrationId();return o?e[o]=o in e?[...e[o],i]:[i]:e[n.id]=[i],e}),{})}(J,A)),[J,A]),ne=(0,s().K8)((()=>null==A?void 0:A.getBotSettingsStore().getValue()),[A]),ie=(0,s().K8)((()=>Object.keys(Z.nonCompliance).length+ee.length),[Z.nonCompliance,ee]),oe=(0,s().K8)((()=>{const e=Object.values(Z.compliance).flat().length;return P?e:e+Q.length}),[Z.compliance,Q,P]),se=(0,s().K8)((()=>null!=ne&&ne.integration_approval_statuses?Object.keys(ne.integration_approval_statuses).length+ee.length:ee.length),[ne,ee]),ae={member_connections:(0,ye.jsx)(y().sA,{id:"admin.connections.tabs.member_connections",defaultMessage:"Member{numberOfIntegrations}",values:{numberOfIntegrations:0!==ie&&(0,ye.jsx)(he().A,{isSecondaryColor:!0,style:{marginLeft:6},children:ie+g().Ei.length})}}),workspace_connections:(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(y().sA,{id:"admin.connections.tabs.workspace_connections",defaultMessage:"Workspace{numberOfIntegrations}",values:{numberOfIntegrations:0!==oe&&(0,ye.jsx)(he().A,{isSecondaryColor:!0,style:{marginLeft:6},children:oe})}}),(0,ye.jsx)(Le().A,{})]})},re=Ke.map((e=>ae[e])),le=(0,s().K8)((()=>"integrations"===H().A.state.currentTab?H().A.state.defaultSubtab:void 0),[]),ce=(0,s().K8)((()=>D().A.integrations.state),[]),[de,ue]=(0,i.useState)(le||"member_connections"),ge=(0,s().K8)((()=>(0,q().OX)()),[]),pe=Boolean(h.integration_restrictions),me=Boolean(h.disallow_webhook_automation_action),fe=(0,a().IS)((e=>({connectedSection:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative"},connectedSectionDescription:{fontSize:14,marginRight:8,color:e.text.tertiary,fontWeight:400,marginBottom:12},addMenu:{position:"absolute",right:0,top:0},discoverSectionUpsell:{backgroundColor:e.accentColors.uiBlue[100],padding:16,borderRadius:6},discoverSectionHeader:{display:"flex",justifyContent:"space-between",marginBottom:8},discoverSectionTitle:{fontSize:16,fontWeight:510},discoverSectionButtons:{display:"flex"},learnMoreButton:{padding:"0px 8px",borderRadius:4,display:"flex",alignItems:"center",color:e.blueColor},upgradeButton:{marginLeft:12,padding:"0px 14px"},alias:{marginLeft:6,width:"0.9em",height:"0.9em",padding:1,border:"1px solid",borderRadius:2}})),[]),ve={member_connections:()=>(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(He,{isIntegrationRestrictionsControlledByOrganization:pe}),(null==ne?void 0:ne.integration_restrictions)&&(0,ye.jsx)("div",{style:{marginTop:"19px"},children:(0,ye.jsx)(Ge,{isIntegrationRestrictionsControlledByOrganization:pe})}),(0,ye.jsx)("div",{style:{marginTop:"19px"},children:(0,ye.jsx)(Fe,{isDisallowWebhookAutomationsControlledByOrganization:me})}),(0,ye.jsx)(De().A,{size:n?32:18,isHidden:!n}),Boolean(null==ne?void 0:ne.integration_restrictions)?(0,ye.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:19},children:[(0,ye.jsx)(he().A,{style:{fontWeight:x().Wy.medium,display:"flex",alignItems:"center",height:28},children:(0,ye.jsx)(y().sA,{id:"adminConnectionsSettings.table.allowIntegrations.title",defaultMessage:"Approved connections{numberOfIntegrations}",values:{numberOfIntegrations:0!==se&&(0,ye.jsx)(he().A,{isSecondaryColor:!0,style:{marginLeft:6},children:se})}})}),(0,ye.jsx)(Me,{})]}):(0,ye.jsx)(he().A,{style:{fontWeight:x().Wy.medium,display:"flex",height:28,alignItems:"center",marginBottom:"19px"},children:(0,ye.jsx)(y().sA,{id:"adminConnectionsSettings.table.default.title",defaultMessage:"All connections{numberOfIntegrations}",values:{numberOfIntegrations:0!==ie&&(0,ye.jsx)(he().A,{isSecondaryColor:!0,style:{marginLeft:6},children:ie+g().Ei.length})}})}),(0,ye.jsx)(Be().Ay,{integrationIdToBotIds:Z.nonCompliance,internalIntegrationIds:ee,integrationIdToUsers:te}),(0,ye.jsx)("div",{style:{marginTop:16,marginBottom:32,display:"grid",gridTemplateColumns:"1fr",gap:4},children:(0,ye.jsx)(Ne().A,{})})]}),workspace_connections:()=>{const e=Object.keys(Z.compliance),n=e.length>0||B&&Q.length>0,i=function(e){const{allIntegrations:t,connectedIntegrationIds:n,isEnterprise:i}=e,o=[];for(const s of t)if(!n.includes(s.id)){const e=(0,f().Hr)(s.id);if(!e)continue;if("internal"===s.type)continue;o.push({id:s.id,appName:s.name,account:void 0,caption:s.getInfo().tagline,logo:s.getInfo().icon,shouldHideInDiscover:!1,shouldShowNewBadge:!1,shouldHideConnectAccount:!0,shouldShowUpsell:!i,integrationTypes:[e.type],capabilities:(0,ye.jsx)(ye.Fragment,{}),canSelectPageAccess:!1,onConnect:()=>{var t;null!=e&&null!==(t=e.oauth)&&void 0!==t&&t.accountInfoPropertyNames||"dlp"===(null==e?void 0:e.type)||"ediscovery"===(null==e?void 0:e.type)?O().A.setState({open:!0,integrationId:s.id}):L().A.setState({open:!0,integrationId:s.id})},onDisconnect:()=>{}})}return o}({allIntegrations:ce,connectedIntegrationIds:e,isEnterprise:ge});X=X.filter((e=>!Q.some((t=>t.id===e.id)))),ge&&i.unshift(...X);const o=i.length>0||X.length>0;return(0,ye.jsx)(ye.Fragment,{children:I?(0,ye.jsxs)(ye.Fragment,{children:[n&&(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)("span",{style:fe.connectedSectionDescription,children:(0,ye.jsx)(y().sA,{id:"admin.connections.tab.workspace_connections.description",defaultMessage:"These integrations connect your workspace to external apps, or improve security and compliance. Only workspace owners can install them"})}),(0,ye.jsxs)("div",{style:fe.connectedSection,children:[(0,ye.jsx)("div",{style:fe.addMenu,children:(0,ye.jsx)(Pe,{})}),(0,ye.jsx)(Be().KM,{botIdToWebhookSubscriptionId:b,complianceIntegrationsIdToBotIds:Z.compliance,aiConnectedApps:Q})]})]}),o&&(0,ye.jsxs)("div",{children:[!ge&&B&&0!==X.length&&(0,ye.jsx)("div",{style:{marginBottom:10,marginTop:10},children:(0,ye.jsx)(Te().A,{apps:X,numberOfConnectedApps:0,title:(0,ye.jsx)("div",{style:fe.discoverSectionTitle,children:(0,ye.jsx)(y().sA,{id:"connectionsSettings.discoverNewConnectionsSection.title",defaultMessage:"Discover new connections"})})})}),(0,ye.jsx)("div",{style:{...ge?{}:fe.discoverSectionUpsell,marginTop:n?32:void 0},children:(0,ye.jsx)(Te().A,{apps:i,numberOfConnectedApps:e.length,numberOfDisplayRows:2,title:(0,ye.jsxs)("div",{style:fe.discoverSectionHeader,children:[(0,ye.jsx)("div",{style:fe.discoverSectionTitle,children:ge?(0,ye.jsx)(y().sA,{id:"connectionsSettings.discoverNewConnectionsSection.title",defaultMessage:"Discover new connections"}):(0,ye.jsx)(y().sA,{id:"connectionsSettings.discoverNewConnectionsSection.titleUpsell",defaultMessage:"Upgrade to Enterprise to use these connections"})}),!ge&&(0,ye.jsxs)("div",{style:fe.discoverSectionButtons,children:[(0,ye.jsxs)(_e().A,{onClick:()=>{j().f({environment:t,url:"https://www.notion.so/integrations/collections/security-and-compliance"})},style:fe.learnMoreButton,children:[(0,ye.jsx)(y().sA,{defaultMessage:"Learn more",id:"connectionsSettings.discoverNewConnectionsSection.learnMore"}),(0,c().y)(fe.alias)]}),(0,ye.jsx)(Oe().A,{style:fe.upgradeButton,onClick:async()=>{A&&(G().$W({environment:t,spaceId:A.id}),await Y().A.waitUntilReady()),F().K(t,{from:"workspace_connections",upsell:{type:"product",product:"enterprise",limit:{type:"none"},trialability:"none"},dontOpenPlansOnCancel:!0})},children:(0,ye.jsx)(y().sA,{defaultMessage:"Upgrade",id:"connectionsSettings.discoverNewConnectionsSection.upgrade"})})]})]})})})]})]}):null})}},Se=e=>ve[e];return I?(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Re().Ay,{tabs:re,selectedIndex:Ke.findIndex((e=>e===de)),onChange:e=>(e=>{ue(Ke[e])})(e),style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitleStyle:{fontSize:16}}),Se(de)()]}):Se("member_connections")()}function He(e){let{isIntegrationRestrictionsControlledByOrganization:t}=e;const n=(0,o().v3)(),i=(0,s().O$)(_().AppStoreCurrentSpaceStore),{isMobile:a}=n.device,r=(0,s().K8)((()=>(0,q().OX)()),[]),l=(0,s().K8)((()=>null==i?void 0:i.getBotSettingsStore().getValue()),[i]);return(0,ye.jsx)(We().A,{isMobile:a,isLocked:t,lockedTooltip:(0,P().C)(),title:(0,ye.jsx)(y().sA,{id:"adminConnectionsSettings.requireApprovalSetting.title",defaultMessage:"Restrict members from adding connections"}),caption:(0,h().az)(l)?(0,ye.jsx)(y().sA,{id:"adminConnectionsSettings.requireApprovalSetting.allowList.workspaceOwner.caption",defaultMessage:"Workspace members can only install connections pre-approved by workspace owners."}):(0,ye.jsx)(y().sA,{id:"adminConnectionsSettings.requireApprovalSetting.off.caption",defaultMessage:"Workspace members can install any new connection."}),upsellOptions:{shouldUpsell:!r,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"dropdown",currentOption:(0,h().az)(l)?"allow_list":"any_integrations",options:[{key:"any_integrations",label:(0,ye.jsx)(y().sA,{id:"adminIntegrationSettings.integrationRestrictions.off.title",defaultMessage:"No restrictions"}),caption:(0,ye.jsx)(y().sA,{id:"adminConnectionsSettings.connectionRestrictions.off.caption",defaultMessage:"Workspace members can install any connection."})},{key:"allow_list",label:(0,ye.jsx)(y().sA,{id:"adminIntegrationSettings.integrationRestrictions.allowList.title",defaultMessage:"Only from approved list"}),caption:(0,ye.jsx)(y().sA,{id:"adminConnectionsSettings.connectionRestrictions.allowList.caption",defaultMessage:"Workspace members can only install connections pre-approved by a workspace owner."})}],onSelectOption:e=>{t||function(e){const{environment:t,currentSpaceStore:n,botSettings:i,setting:o}=e;if(n){if("allow_list"===o&&(0,h().az)(i))return;const e="allow_list"===o?"approved_only":void 0;I().createAndCommit({userAction:"AdminIntegrationSettings.handleIntegrationRestrictionSelect",environment:t,canUndo:!0,perform:t=>{b().zv({store:n,data:{bot_settings:{...i,integration_restrictions:e}},transaction:t})}})}}({environment:n,currentSpaceStore:i,botSettings:l,setting:e})},info:[{key:"learn_more",label:(0,ye.jsx)(y().sA,{id:"adminConnectionsSettings.connectionRestrictions.info.title",defaultMessage:"Workspace owners can always install and approve new connections."})}]})}function Ge(e){const{isIntegrationRestrictionsControlledByOrganization:t}=e,n=(0,o().v3)(),i=(0,a().DP)(),r=(0,s().O$)(_().AppStoreCurrentSpaceStore),{isMobile:l}=n.device,c=(0,s().K8)((()=>(0,q().OX)()),[]),u=(0,s().K8)((()=>null==r?void 0:r.getBotSettingsStore().getValue()),[r]);return(0,ye.jsx)(We().A,{isMobile:l,title:(0,ye.jsx)(y().sA,{id:"adminConnectionsSettings.autoApproveBuiltByNotion.title",defaultMessage:"Auto-approve <builtbynotion>Built by Notion</builtbynotion> connections",values:{builtbynotion:e=>(0,ye.jsxs)("span",{style:{color:i.invoiceGreen,marginRight:4,marginLeft:4},children:[(0,d().m)({width:14,display:"inline",verticalAlign:"bottom",marginRight:2}),e]})}}),caption:(0,ye.jsx)(y().sA,{defaultMessage:"Toggle this on to approve all workspace members to install connections <helpcenterlink>built by Notion</helpcenterlink>.",id:"adminConnectionsSettings.autoApproveBuiltByNotion.caption",values:{helpcenterlink:e=>(0,ye.jsx)(ze().A,{href:(0,B().xS)("guides.enterpriseIntegrationSettings"),children:e})}}),upsellOptions:{shouldUpsell:!c,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"toggle",isOn:"approved_or_built_by_notion"===(null==u?void 0:u.integration_restrictions),onToggle:()=>{t||function(e){const{environment:t,currentSpaceStore:n,botSettings:i}=e;if(n){const e="approved_or_built_by_notion"===(null==i?void 0:i.integration_restrictions)?"approved_only":"approved_or_built_by_notion";I().createAndCommit({userAction:"AdminIntegrationSettings.handleAutoApproveBuiltByNotionToggle",environment:t,canUndo:!0,perform:t=>{b().zv({store:n,data:{bot_settings:{...i,integration_restrictions:e}},transaction:t})}})}}({environment:n,currentSpaceStore:r,botSettings:u})},isLocked:t,lockedTooltip:(0,P().C)()})}function Fe(e){let{isDisallowWebhookAutomationsControlledByOrganization:t}=e;const n=(0,o().v3)(),{isMobile:a}=n.device,r=(0,s().O$)(_().AppStoreCurrentSpaceStore),l=(0,s().K8)((()=>(0,q().OX)()),[]),c=(0,s().K8)((()=>Boolean(null==r?void 0:r.getSettingsStore().getKeyStore("disallow_webhook_automation_action").getValue())),[r]),d=!c,u=(0,i.useCallback)((()=>{r&&!t&&I().createAndCommit({userAction:"AdminIntegrationSettings.handleAutoApproveBuiltByNotionToggle",environment:n,canUndo:!0,perform:e=>{b().zv({store:r.getSettingsStore(),data:{disallow_webhook_automation_action:!c},transaction:e})}})}),[r,c,n,t]);return(0,ye.jsx)(We().A,{isMobile:a,isLocked:t,lockedTooltip:(0,P().C)(),title:(0,ye.jsx)(y().sA,{id:"adminConnectionsSettings.allowWebRequestsInAutomations.title",defaultMessage:"Allow webhooks in automations"}),caption:(0,ye.jsx)(y().sA,{defaultMessage:"Allow webhooks to third-party tools in database automations and buttons.",id:"adminConnectionsSettings.allowWebRequestsInAutomations.caption"}),upsellOptions:{shouldUpsell:!l,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"toggle",isOn:d,onToggle:u})}function qe(e){return[{id:"ai_settings_link",appName:e.formatMessage(Ue.aiSettingsCardName),caption:e.formatMessage(Ue.aiSettingsCardCaption),account:void 0,shouldShowNewBadge:!0,canSelectPageAccess:!1,onConnect:function(){A().Ow({currentTab:"ai"})},onDisconnect:function(){},logo:C,width:"auto",capabilities:(0,ye.jsx)("div",{style:{display:"none"}}),isAIConnectorsUpsell:!0}]}},369160:(e,t,n)=>{n.d(t,{f:()=>j});n(725707),n(491955),n(403517),n(242343);var i=()=>n(237385),o=()=>n(803290),s=()=>n(162901),a=()=>n(446588),r=()=>n(145017),l=()=>n(653998),c=()=>n(76394),d=()=>n(640979),u=()=>n(129978),g=()=>n(509484),p=()=>n(359441),m=()=>n(413871),h=()=>n(935091),f=()=>n(858023),y=()=>n(975515),v=()=>n(701513),S=()=>n(709237),x=()=>n(88271),A=()=>n(23082),b=n(163643);function j(e){const{spaceId:t,onSelectPage:n,query:j,source:I,findSelectedBlockAncestorId:C,spaceStore:w}=e,k=(0,i().v3)();let M=null;const P=(0,u().fJ)(g().T.searchActions),[{status:B,value:T}]=(0,s().Yb)((async()=>{if("resolved"!==P.status)return;const e=P.value;return await e.searchPagesInSpace({environment:k,query:j,limit:10,requireEditPermissions:!0,spaceId:t,excludeTemplates:!0,source:I,boostRecentlyViewedPages:!1,spaceStore:w})}),[P.status,P.value,k,j,t,I,w],{debounce:p().tu}),N=(0,o().K8)((()=>"idle"===B||"pending"===B?[]:((null==T?void 0:T.results)||[]).map((e=>{let{id:t}=e;const i=new(m().Bv)(k,{table:r().ev,id:t});return function(e){const{store:t,environment:n,alreadySelectedAncestorId:i,onSelectPage:o}=e;if(i&&i===t.id)return{key:t.id,action:()=>{},render:e=>(0,b.jsx)(v().A,{...e,store:t,hidePath:!0,disabled:!0,style:{opacity:.5},caption:(0,b.jsx)(l().sA,{id:"oauthPageSearchResults.disabledResult.bySelf.message",defaultMessage:"Already added"})})};if(i){const e=new(m().Bv)(n,{table:r().ev,id:i});return{key:t.id,action:()=>{},render:n=>(0,b.jsx)(v().A,{...n,store:t,hidePath:!0,disabled:!0,style:{opacity:.5},caption:(0,b.jsx)(l().sA,{id:"oauthPageSearchResults.disabledResult.byAncestor.message",defaultMessage:"Already added via {ancestorPageName}",values:{ancestorPageName:(0,b.jsx)(S().A,{store:e,style:{display:"inline"}})}})})}}const s=t.getRole();return s&&a().Km(s)?{key:t.id,action:()=>o(t.id),render:e=>(0,b.jsx)(v().A,{store:t,hidePath:!1,...e})}:void 0}({store:i,alreadySelectedAncestorId:C(i),environment:k,onSelectPage:n})})).filter(c().O9)),[k,C,n,null==T?void 0:T.results,B]);M="idle"===B||"pending"===B?(0,b.jsx)(x().A,{children:(0,b.jsx)(A().A,{})}):0===N.length?(0,b.jsx)(x().A,{children:(0,b.jsx)(y().A,{title:(0,b.jsx)(l().sA,{id:"oauthPageSearchResults.noResults.placeholder",defaultMessage:"No results"})})}):function(e){return(0,b.jsx)(f().Ay,{type:f().Oh.Vertical,initialFocus:void 0,sections:[{key:"results",items:e,render:e=>(0,b.jsx)(x().A,{...e})}]})}(N);const _={menuType:d().gu.Popup};return(0,b.jsx)(h().A,{..._,children:M})}},575145:(e,t,n)=>{n.d(t,{g:()=>d});n(333225),n(494367),n(516262),n(573119),n(240480),n(950443),n(619601),n(725707),n(491955),n(403517),n(244387);var i=n(242343),o=()=>n(237385),s=()=>n(803290),a=()=>n(145017),r=()=>n(218357),l=()=>n(548694),c=()=>n(413871);function d(e){let{blockIdsSharedWithBot:t,pageIdsSharedWithUser:n,currentSpaceViewStore:d,spaceStore:u}=e;const g=(0,o().v3)(),p=(0,s().K8)((()=>d.getSpaceId()),[d]),m=(0,s().K8)((()=>t.map((e=>new(c().Bv)(g,{table:a().ev,id:e,spaceId:p})))),[t,g,p]),h=(0,s().K8)((()=>n.map((e=>new(c().Bv)(g,{table:a().ev,id:e,spaceId:p})))),[n,g,p]),f=(0,s().K8)((()=>((null==d?void 0:d.getTeamsStores())??[]).reduce(((e,t)=>{const n=t.getTeamPagesStores().filter((e=>e.isLoadedNonCopyIndicator()));return n.length>0&&(e[t.id]=n.map((e=>e.id))),e}),{})),[d]),y=(0,s().K8)((()=>Object.keys(f).map((e=>new(c().h4)(g,{table:r().yK,id:e,spaceId:p})))),[g,p,f]),v=(0,s().K8)((()=>d.getPrivatePages(g)??[]),[d,g]),S=(0,s().K8)((()=>{const e=d.getUserId();return e?h.filter((t=>(0,l().Bz)({store:t,userId:e,spaceStore:u}))):[]}),[d,h,u]),x=i.useMemo((()=>new Set(v.map((e=>e.id)))),[v]),A=i.useMemo((()=>new Set(S.map((e=>e.id)))),[S]),b=(0,s().K8)((()=>m.filter((e=>!x.has(e.id)&&!A.has(e.id)&&e.getSpaceId()===p&&e.isNavigableBlock()&&!e.isTopLevelPrivatePage()&&!e.isTopLevelWorkspacePage(p)))),[m,x,A,p]);return{allTeams:y,teamPagesByTeam:f,allPrivatePages:v,allSharedPages:S,subpages:b}}},611506:(e,t,n)=>{n.d(t,{p:()=>o});n(242343);var i=n(163643);const o=(0,n(680369).wt)("checkMarkLine",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M6.79297 13.2871C6.48047 13.2871 6.21484 13.1523 5.99609 12.8828L2.96094 9.14453C2.875 9.04297 2.8125 8.94336 2.77344 8.8457C2.73828 8.74805 2.7207 8.64648 2.7207 8.54102C2.7207 8.30664 2.79883 8.11328 2.95508 7.96094C3.11133 7.80859 3.30859 7.73242 3.54688 7.73242C3.81641 7.73242 4.04297 7.84766 4.22656 8.07812L6.76953 11.3008L11.7324 3.4375C11.834 3.28125 11.9395 3.17188 12.0488 3.10938C12.1582 3.04297 12.2949 3.00977 12.459 3.00977C12.6973 3.00977 12.8926 3.08398 13.0449 3.23242C13.1973 3.38086 13.2734 3.57031 13.2734 3.80078C13.2734 3.89453 13.2578 3.98828 13.2266 4.08203C13.1953 4.17578 13.1465 4.27344 13.0801 4.375L7.5957 12.8594C7.4082 13.1445 7.14062 13.2871 6.79297 13.2871Z"})})},613160:(e,t,n)=>{n.d(t,{A:()=>Ce,s:()=>Ie});n(362833),n(725707),n(491955),n(500234),n(403517),n(113085);var i=n(242343),o=()=>n(237385),s=()=>n(803290),a=()=>n(83544),r=()=>n(466003),l=()=>n(706788),c=()=>n(162901),d=()=>n(858270),u=()=>n(518797),g=()=>n(528762),p=()=>n(514138),m=()=>n(405297),h=()=>n(653998),f=()=>n(975392),y=()=>n(76394),v=()=>n(505381),S=()=>n(818369),x=()=>n(545250),A=()=>n(809811),b=()=>n(145046),j=()=>n(927685),I=()=>n(142548);const C=new(n(962373).A);var w=()=>n(70989),k=()=>n(961987);const M=(0,h().YK)({authenticatingWithAsana:{id:"asanaActions.authenticatingWithAsana.loadingMessage",defaultMessage:"Authenticating with Asana…"},titleMessage:{defaultMessage:"Asana login",id:"asanaActions.loginWithAsanaPopupModal.title"}});var P=()=>n(129243),B=()=>n(905053),T=()=>n(700380),N=()=>n(738674),_=()=>n(423392),D=()=>n(436452),L=()=>n(271674);var O=()=>n(548694),z=()=>n(98508),W=()=>n(485966),R=()=>n(836331),K=()=>n(773082),U=()=>n(413871),E=()=>n(331736),H=()=>n(305043),G=()=>n(208762),F=()=>n(937999),q=()=>n(752405),$=()=>n(142708),Y=()=>n(629457),V=(n(771702),()=>n(28210)),X=()=>n(35462),J=()=>n(96365),Z=()=>n(129044),Q=()=>n(220413),ee=()=>n(781274),te=()=>n(575145),ne=()=>n(782422),ie=()=>n(640979),oe=()=>n(622286),se=()=>n(98809),ae=()=>n(824646),re=()=>n(535906),le=()=>n(273520),ce=()=>n(935091),de=()=>n(858023),ue=()=>n(286404),ge=()=>n(951540),pe=()=>n(88271),me=()=>n(350208),he=n(163643);function fe(e){const{botId:t,canSelectPageAccess:n,onConnect:a,onDisconnect:r,botSharedPagesStore:l}=e,[c]=(0,i.useState)(Z().default.createValue({})),d=(0,s().O$)(W().AppStoreCurrentSpaceStore),g=(0,o().v3)(),p=(0,o().Y0)(),m=(0,oe().X)("public_api_clearer_integration_access_connections_page_picker"),[f,y]=(0,i.useState)(!1),v=(0,s().O$)((0,ne().rp)(g)),{allSharedPagesStores:S=[]}=v??{},x=(0,s().O$)(W().AppStoreCurrentSpaceViewStore),A=(0,s().O$)(c),b=(0,s().K8)((()=>{var e;const n={};return((null===(e=l.state.result)||void 0===e||null===(e=e[t])||void 0===e?void 0:e.pageIds)??[]).forEach((e=>{n[e]=!0})),n}),[l,t]);(0,i.useEffect)((()=>{n&&d&&c.setState(b)}),[n,d,b,c]);const{subpages:j,teamPagesByTeam:I,allTeams:C,allPrivatePages:w}=(0,te().g)({blockIdsSharedWithBot:Object.keys(A).filter((e=>A[e])),currentSpaceViewStore:x,spaceStore:d,pageIdsSharedWithUser:S.map((e=>e.id))}),k=[];n&&d&&k.push({key:"actions for user guest connections",render:e=>(0,he.jsx)(pe().A,{...e}),items:[{key:"update selected pages",render:(e,n)=>m?(0,he.jsx)(re().A,{...e,title:(0,he.jsx)("div",{children:(0,he.jsx)(h().sA,{id:"userConnectionsSettings.actionMenu.selectPagesNewPagePicker.label",defaultMessage:"Select page access"})}),onClick:()=>{y(!0)}}):(0,he.jsx)(me().A,{...e,onFocus:n.onFocus,disableDefaultClick:!0,renderOrigin:e=>(0,he.jsx)(re().A,{...e,title:(0,he.jsx)(h().sA,{id:"userConnectionsSettings.actionMenu.selectPages.label",defaultMessage:"Access selected pages"})}),renderExtension:(e,n)=>{return(0,he.jsxs)("div",{style:{width:400,padding:20},children:[(0,he.jsx)(ae().A,{selectedBlockIdsStore:c}),(i={leftText:(0,he.jsx)(h().sA,{id:"userConnectionsSettings.actionMenu.pagePicker.cancel",defaultMessage:"Cancel"}),leftAction:()=>{c.setState(b),n.close()},rightText:(0,he.jsx)(h().sA,{id:"userConnectionsSettings.actionMenu.pagePicker.update",defaultMessage:"Update access"}),rightAction:()=>{!function(e){const{botId:t,currentSpaceStore:n,environment:i,selectedBlockIdsStore:o,currentAccessedPages:s}=e,a=[],r=[],l=o.state;Object.keys(l).forEach((e=>{s.hasOwnProperty(e)&&!l[e]?a.push(e):!s.hasOwnProperty(e)&&l[e]&&r.push(e)}));const c=U().sk.createChildStore(n,{table:u().GP,id:t});P().L0({environment:i,currentSpaceStore:n,botStore:c,pages:a}),P().L0({environment:i,currentSpaceStore:n,botStore:c,pages:r,addPermission:!0})}({selectedBlockIdsStore:c,environment:g,currentSpaceStore:d,botId:t,currentAccessedPages:b}),n.close()}},(0,he.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:24},children:[(0,he.jsx)(ue().A,{size:"lg",onClick:i.leftAction,children:i.leftText}),(0,he.jsx)(ge().A,{size:"lg",onClick:i.rightAction,children:i.rightText})]}))]});var i}}),action:()=>{}}]});const M=[];if(a&&M.push({key:"connect account",render:e=>(0,he.jsx)(re().A,{...e,title:(0,he.jsx)(h().sA,{id:"userConnectionsSettings.actionMenu.connectAccount.label",defaultMessage:"Connect another account"}),onClick:a}),action:a}),M.push({key:"disconnect account",render:e=>(0,he.jsx)(re().A,{...e,title:(0,he.jsx)("div",{style:{color:Q().Ay.red},children:(0,he.jsx)(h().sA,{id:"userConnectionsSettings.actionMenu.disconnectAccount.label",defaultMessage:"Disconnect account"})}),onClick:()=>{r()}}),action:()=>r()}),k.push({key:"actions for all user connections",render:e=>(0,he.jsx)(pe().A,{...e}),items:M}),!d)return null;const B=U().sk.createChildStore(d,{table:u().GP,id:t});return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(le().Ay,{popupType:p.isMobile?le().z7.SlideUp:le().z7.Popup,renderOrigin:e=>(0,he.jsx)(se().A,{...e,isMobile:p.isMobile}),render:()=>(0,he.jsx)(ce().A,{menuType:p.isMobile?ie().gu.ActionSheet:ie().gu.Popup,children:(0,he.jsx)(de().Ay,{type:de().Oh.Vertical,sections:k,initialFocus:void 0})})}),(0,he.jsx)(ee().r,{isOpen:f,teamPagesByTeam:I,manuallySelectedPages:j,pageIdsAlreadySharedWithBot:Object.keys(A),spaceId:d.id,onClose:()=>y(!1),allTeams:C,privatePages:w,pagesSharedWithUser:S,botStore:B,spaceStore:d,refetchBotSharedPages:void 0,selectedBlockIdsStore:c})]})}const ye=28;function ve(e){const{userConnections:t,botSharedPagesStore:n}=e;return(0,he.jsx)(J().A,{columns:[{key:"connection",header:(0,he.jsx)(h().sA,{id:"userConnectionsSettings.connectionsTable.connectionsColumn.title",defaultMessage:"Connection"}),style:{width:"40%"}},{key:"access",header:(0,he.jsx)(h().sA,{id:"userConnectionsSettings.connectionsTable.accessColumn.title",defaultMessage:"Access"}),style:{width:"40%"}},{key:"more",header:void 0,style:{width:"5%"}}],rows:Se(t,n)})}function Se(e,t){const n=[];return e.forEach((e=>{const{account:i,onDisconnect:o}=e;if(Array.isArray(i)){const s=i.map((n=>xe({connection:{...e,onDisconnect:()=>{o(n)}},account:n,botSharedPagesStore:t})));n.push(...s)}else n.push(xe({connection:e,account:i,botSharedPagesStore:t}))})),n}function xe(e){const{account:t,connection:{id:n,appName:i,canSelectPageAccess:o,capabilities:s,logo:a,onConnect:r,onDisconnect:l},botSharedPagesStore:c}=e,d=void 0!==t&&"string"!=typeof t,u=d?t.accountName:t,g=d?t.accountId:n;return{key:`${g}-${u}`,columns:[(0,he.jsx)(Ae,{accountName:u,connectionLogo:a,connectionName:i},"connection-title"),s,(0,he.jsx)(fe,{botId:g,canSelectPageAccess:o,connectionName:i,onConnect:r,onDisconnect:l,botSharedPagesStore:c},"connection-action-menu")]}}function Ae(e){const{accountName:t,connectionLogo:n,connectionName:i}=e;return(0,he.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:12},children:["string"==typeof n?(0,he.jsx)("img",{src:n,style:{height:ye,maxWidth:ye}}):(0,he.jsx)(V().B,{disabled:!0,icon:n,title:i,isEmptyPage:!1,size:ye,isLarge:!0,useInvertedColors:!0}),(0,he.jsxs)("div",{style:{marginLeft:15},children:[(0,he.jsx)(X().A,{children:i}),t&&(0,he.jsx)(X().A,{isSmall:!0,children:t})]})]})}const be={height:"100%",padding:"36px 60px"},je={alignItems:"center",display:"flex",flexDirection:"column",flex:1,height:"100%",justifyContent:"center"};function Ie(e){const t=[];return null!=e&&e.read_content&&t.push((0,he.jsx)(h().sA,{id:"userConnectionsSettings.connectionsTable.botAccess.readContent",defaultMessage:"view"})),null!=e&&e.insert_content&&t.push((0,he.jsx)(h().sA,{id:"userConnectionsSettings.connectionsTable.botAccess.insertContent",defaultMessage:"insert"})),null!=e&&e.update_content&&t.push((0,he.jsx)(h().sA,{id:"userConnectionsSettings.connectionsTable.botAccess.updateContent",defaultMessage:"update"})),t}const Ce=function(e){let{location:t,spaceStore:i}=e;const a=(0,o().v3)(),r=(0,s().uB)(void 0,E().A);return(0,he.jsx)(n(921637).A,{request:a,performRequest:()=>async function(e){const{currentSpaceStore:t}=W().default.state;return{guestBotIds:await Pe(e),connectionStatus:await B()._s(e,null==t?void 0:t.id)}}(a),requestStore:r,render:(e,o)=>null!=o&&o.connectionStatus?(0,he.jsx)(Te,{location:t,requestStore:r,spaceStore:i,guestBotIds:o.guestBotIds}):(0,he.jsx)("div",{style:je,children:(0,he.jsx)(n(966789).A,{})})})};function we(e){return{display:"flex",flexDirection:"column",height:"100%",width:"sidebar-modal"===e?"100%":"auto"}}function ke(e,t){const{currentSpaceStore:n}=W().default.state;if(!n||(0,O().IL)(n))return[];return e.map((e=>{const i=U().sk.createChildStore(n,{table:u().GP,id:e}),o=i.getName();if(!i.getAlive()||!o||i.isInternalBot())return;const s=i.getIntegrationPointer(),a=i.getIcon(),r=a&&s?{pointer:s,icon:a}:void 0;return{id:i.id,appName:o,caption:void 0,account:void 0,logo:r,capabilities:(0,he.jsx)(h().sA,{id:"userConnectionsSettings.connectionsTable.accessColumn.userGuest",defaultMessage:"Can {capabilities} content",values:{capabilities:(0,he.jsx)(h().dT,{value:Ie(i.getCapabilities()),type:"conjunction"})}}),canSelectPageAccess:!0,onDisconnect:async()=>{const{accept:e}=await b().Gh({message:(0,he.jsx)("span",{children:(0,he.jsx)(h().sA,{id:"userConnectionsSettings.deleteExternalAuthorization.withoutAccountName.confirmationMessage",defaultMessage:"Revoke access for this account?"})}),acceptLabel:(0,he.jsx)(h().sA,{id:"userConnectionsSettings.deleteExternalAuthorization.confirmDelete.label",defaultMessage:"Yes"})});e&&await P().KA({environment:t,botId:i.id,onSuccess:()=>{}})}}})).filter(y().O9)}function Me(e){const{currentSpaceStore:t}=W().default.state;if(!t||!t.canEdit())return[];const n=t.getBotSettingsStore().getValue(),i=t.id,{integrations:{state:o},bots:{state:s},externalAuthentications:{state:a}}=K().A,c=t.canAdmin(),g=l().bh,S={[l().zG]:1,[l().Hd]:2,[l().F6]:3,[l().e1]:4,[l().ob]:5,[g]:6};o.sort(((e,t)=>(S[e.id]??1/0)-(S[t.id]??1/0)));const x=[l().ob,l().F6,l().mn];return o.map((o=>{var g;if(!o.info.icon)return;if(!c&&x.includes(o.id))return;if((0,m().Hr)(o.id))return;const y=s.filter((e=>e.integration_id===o.id)),S=f().oE(y.map((e=>{const t=a.find((t=>t.parent_id===e.id));if(t)return{accountId:e.id,accountName:t.account_name}}))),A=(0,p().nH)({spaceBotSettings:n,integrationId:o.id,env:"production"}),j=S.length>0;if(!A&&!j)return;if(!j&&o.id===l().io)return;const I=!A,C=function(e){const t=[];return(0,d().v_)(e)&&t.push((0,he.jsx)(h().sA,{id:"userConnectionsSettings.connectionsTable.botAccess.previewLinks",defaultMessage:"preview links"},"previewLinks")),function(e){return!!e.info.original_url_patterns&&e.info.original_url_patterns.some((e=>{var t;return null===(t=e.additional_types)||void 0===t?void 0:t.collection}))}(e)&&t.push((0,he.jsx)(h().sA,{id:"userConnectionsSettings.connectionsTable.botAccess.syncDatabases",defaultMessage:"sync databases"},"syncedDatabase")),(0,d().mt)(e)&&t.push((0,he.jsx)(h().sA,{id:"userConnectionsSettings.connectionsTable.botAccess.automationAction",defaultMessage:"run automations"},"automationAction")),t}(o),w=!f().Im(C)&&(0,he.jsx)(h().sA,{id:"userConnectionsSettings.connectionsTable.accessColumn.external",defaultMessage:"Can {capabilities}",values:{capabilities:(0,he.jsx)(h().dT,{value:C,type:"conjunction"})}}),k=(0,r().qs)(o.capabilities),M=null===(g=o.capabilities)||void 0===g?void 0:g.inherit_creator_permissions,B=k&&!M,T=[];return(0,d().Hy)(o)&&T.push("linkPreview"),(0,d().Z1)(o)&&T.push("databaseSync"),(0,d().mt)(o)&&T.push("automation_action"),{id:o.id,appName:o.name,caption:o.info.tagline,logo:o.info.icon,account:S,shouldHideConnectAccount:I,shouldShowNewBadge:!o.info.hide_new_badge,integrationTypes:T,capabilities:(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)("div",{children:w}),k?(0,he.jsx)("div",{children:(0,he.jsx)(h().sA,{id:"userConnectionsSettings.connectionsTable.accessColumn.externalWithCapabilities",defaultMessage:"Can {capabilities} content",values:{capabilities:(0,he.jsx)(h().dT,{value:Ie(o.capabilities),type:"conjunction"})}})}):null]}),canSelectPageAccess:B,onConnect:async()=>{await _().Jq({environment:e,integration:o,spaceId:i,from:"connected_apps_settings"}),L().oX({environment:e})},onDisconnect:async n=>{const i=s.find((e=>e.id===(null==n?void 0:n.accountId)));if(i){const s=U().sk.createChildStore(t,{table:u().GP,id:i.id,spaceId:i.space_id}),a=null!=n&&n.accountName?(0,he.jsx)(h().sA,{id:"connectedAppSettings.deleteExternalAuthorization.withAccountName.confirmationMessage",defaultMessage:'Revoke access for "{accountName}"?',values:{accountName:n.accountName}}):(0,he.jsx)(h().sA,{id:"connectedAppSettings.deleteExternalAuthorization.withoutAccountName.confirmationMessage",defaultMessage:"Revoke access for this account?"}),{accept:r}=await b().Gh({message:(0,he.jsx)("span",{children:a}),acceptLabel:(0,he.jsx)(h().sA,{id:"connectedAppSettings.deleteExternalAuthorization.confirmDelete.label",defaultMessage:"Yes"})});r&&(await P().KA({environment:e,botId:s.id,onSuccess:()=>{}}),v().hy(e,{integrationId:o.id}))}}}})).filter(y().O9)}async function Pe(e){const{currentSpaceStore:t,currentUserStore:n}=W().default.state;if(!t||!n||!H().subscriptionDataStoreInstance.state)return[];return(await P().Ju({environment:e,table:g().NX,id:t.id,type:"guest"})).botIds.filter((e=>U().sk.createChildStore(t,{table:u().GP,id:e}).getCreatedById()===n.id))}function Be(e,t,n){var i;const o=n;let s=!1;const{currentSpaceStore:r}=W().default.state,c=null===(i=o.state.result)||void 0===i?void 0:i.connectionStatus,u=(null==c?void 0:c.drive)&&(null==c?void 0:c.drive.length)>0,g=function(){const{integrations:{state:e}}=K().A;return!e.some((e=>e.id===l().Hd))}();if(g){const e=null==r?void 0:r.getBotSettingsStore().getValue();s=!(0,p().az)(e)||Boolean((null==e?void 0:e.integration_approval_statuses)&&e.integration_approval_statuses[d().IQ])}const m=(0,he.jsx)(h().sA,{id:"userConnectionsSettings.connectionsTable.accessColumn.legacyImporter",defaultMessage:"Can only add pages"});return[...g&&(s||u)?[{id:"drive",appName:"Google Drive",caption:t.formatMessage({id:"connectedAppsSettings.googleDrive.caption",defaultMessage:"Find and embed your files."}),shouldHideConnectAccount:!s,shouldHideInDiscover:!g,logo:a().A.images.import.googleDrivePng,account:null==c?void 0:c.drive,capabilities:(0,he.jsx)(h().sA,{id:"userConnectionsSettings.connectionsTable.accessColumn.googleDrive",defaultMessage:"Can embed content"}),canSelectPageAccess:!1,onConnect:()=>async function(e,t){v().iT(e,{integration_name:"google",from:"connected_apps"}),await T().W3(e),await B()._s(e),await t.refresh()}(e,n),onDisconnect:i=>{i&&function(e,t,n,i){b().ui({message:n.formatMessage({id:"connectedAppsSettings.disconnectGoogleDriveModal.message",defaultMessage:"Disconnecting disables file preview on Google Drive files embedded in all of your workspaces. It would not delete your embeds from Notion, so you can re-connect at anytime."}),showCancel:!0,keepFocus:!0,items:[{label:n.formatMessage({id:"connectedAppsSettings.disconnectGoogleDriveModal.disconnectButton.label",defaultMessage:"Disconnect"}),color:"red",onAccept:async()=>{await S().callApi({eventName:"disconnectDrive",environment:t,data:{googleUserId:e.accountId}}),await B()._s(t),await i.refresh()}}]})}(i,e,t,n)}}]:[],{id:"evernote",appName:"Evernote",caption:t.formatMessage({id:"connectedAppsSettings.evernote.caption",defaultMessage:"Import notebooks."}),logo:a().A.images.import.evernotePng,account:null==c?void 0:c.evernote,capabilities:m,shouldHideInDiscover:!0,canSelectPageAccess:!1,integrationTypes:["importer"],onConnect:()=>N().J({environment:e,requestStore:o}),onDisconnect:()=>B().rA(e,o)},{id:"trello",appName:"Trello",caption:t.formatMessage({id:"connectedAppsSettings.trello.caption",defaultMessage:"Import your boards."}),logo:a().A.images.import.trelloPng,shouldHideInDiscover:!0,account:null==c?void 0:c.trello,capabilities:m,integrationTypes:["importer"],canSelectPageAccess:!1,onConnect:()=>D().P({environment:e,requestStore:o}),onDisconnect:()=>B().x_(e,o)},{id:"asana",appName:"Asana",caption:t.formatMessage({id:"connectedAppsSettings.asana.caption",defaultMessage:"Import tasks from boards and lists."}),logo:a().A.images.import.asanaPng,shouldHideInDiscover:!0,integrationTypes:["importer"],account:null==c?void 0:c.asana,capabilities:m,canSelectPageAccess:!1,onConnect:()=>async function(e){const{environment:t,requestStore:n}=e,i=(0,I().LX)(t);let o=(0,x().Rq)(j().A.domainBaseUrl,{authType:i,userId:t.currentUser.id});o=i.redirectToAuth?o:await(0,I().YN)(t,o);const s=await k().P(t,{width:580,height:800,url:o,titleMessage:M.titleMessage});if(!s)return;const a=A().qg(s);if(!a.query.code||!a.query.state)return;w().m({message:M.authenticatingWithAsana});const r=await S().callApi({eventName:"authWithAsana",environment:t,data:{code:a.query.code,encryptedState:a.query.state}});"failed"===r.type?(console.error(r.error),b().Qg(r),w().V()):(v().mu(t,{integration_name:"asana"}),await n.refresh(),C.setState({open:!0}),w().V())}({environment:e,requestStore:o}),onDisconnect:()=>B().HC(e,o)},...null!=r&&r.id?[{id:"confluence",appName:"Confluence",caption:t.formatMessage({id:"connectedAppsSettings.confluence.caption",defaultMessage:"Import Spaces from Confluence."}),logo:a().A.images.import.confluencePng,shouldHideInDiscover:!0,account:null==c?void 0:c.confluence,capabilities:m,integrationTypes:["importer"],canSelectPageAccess:!1,onDisconnect:()=>B().Pz(e,o,r.id)}]:[]]}function Te(e){let{guestBotIds:t,location:n,requestStore:i,spaceStore:a}=e;const r=(0,o().v3)(),l=(0,h().tz)(),{connected:d,discover:u}=(0,s().K8)((()=>function(e,t,n,i){let o;o=R().default.checkGate({gateName:"notion_ai_workspace_settings"})?(0,G().s_)(n):[];const s=f().$z([...o,...Me(t),...Be(t,n,i)],(e=>e.account&&e.account.length>0?"connected":"discover"));return{connected:[...ke(e,t),...s.connected||[]],discover:s.discover||[]}}(t,r,l,i)),[t,r,l,i]),g=(0,s().uB)(void 0,E().A);(0,c().Yb)((async()=>{g.update((e=>({...e,loading:!0,ready:!1,result:void 0})));const e=d.filter((e=>e.canSelectPageAccess)).map((e=>e.id)),t=a.canRead()?await P().GO({environment:r,currentSpaceStore:a,botIds:e}):void 0;g.update((e=>({...e,loading:!1,ready:!0,result:null==t?void 0:t.bots})))}),[r,a,d,g]);const p=d.length>0;return(0,he.jsx)("div",{style:we(n),children:(0,he.jsxs)($().H,{style:be,type:z().A.Y,children:[p&&(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(Y().A,{large:!0,divider:"full",style:{borderBottom:"none",marginBottom:0},children:(0,he.jsx)(h().sA,{id:"connectionsSettings.connectionsSection.title",defaultMessage:"My connections"})}),(0,he.jsx)(ve,{userConnections:d,botSharedPagesStore:g})]}),(0,he.jsx)("div",{style:{marginTop:p?32:void 0},children:(0,he.jsx)(F().A,{apps:u,numberOfConnectedApps:d.length,title:(0,he.jsx)("div",{style:{display:"flex",justifyContent:"space-between",minHeight:28,fontSize:16,fontWeight:510},children:(0,he.jsx)(h().sA,{id:"connectionsSettings.discoverNewConnectionsSection.title",defaultMessage:"Discover new connections"})})})}),(0,he.jsx)("div",{style:{marginTop:20},children:(0,he.jsx)(q().A,{})})]})})}},635510:(e,t,n)=>{n.d(t,{KM:()=>Ze,Ay:()=>Je,de:()=>Xe});n(362833),n(725707),n(491955),n(324989),n(771702),n(403517),n(113085);var i=n(242343),o=()=>n(16791),s=()=>n(237385),a=()=>n(803290),r=()=>n(174114),l=()=>n(30958),c=()=>n(846581),d=()=>n(706788),u=()=>n(260773),g=()=>n(611506),p=()=>n(222324),m=()=>n(745758),h=()=>n(390317),f=()=>n(981985),y=()=>n(365721),v=()=>n(474894),S=()=>n(723361),x=()=>n(858270),A=()=>n(518797),b=()=>n(188658),j=()=>n(150160),I=()=>n(76394);const C=(0,I().u0)((e=>(0,I().O9)(e)&&"active"!==e.status?{false:e}:{true:e}));var w=()=>n(514138),k=()=>n(405297),M=()=>n(14931),P=()=>n(653998),B=()=>n(220413),T=()=>n(31448),N=()=>n(646240),_=()=>n(901928),D=()=>n(831586),L=()=>n(158960),O=()=>n(548694),z=()=>n(622286),W=()=>n(907721),R=()=>n(485966),K=()=>n(413871),U=()=>n(14679),E=()=>n(98809),H=(n(500234),n(244387),()=>n(466003)),G=()=>n(409211),F=()=>n(188877),q=()=>n(505381),$=()=>n(129243),Y=()=>n(110975),V=()=>n(575015),X=()=>n(84543),J=()=>n(640979),Z=()=>n(392608),Q=()=>n(962373),ee=()=>n(755450),te=()=>n(486540),ne=()=>n(711593),ie=()=>n(932322),oe=n(163643);function se(e){const{capabilities:t}=e,n=(0,P().tz)(),{device:i}=(0,s().v3)(),o=(0,te().MD)(t),a=(0,te().kL)(t),r=(0,te().KI)(e.capabilities),l=[...(0,ne().I2)(o),...(0,ne().YC)(a),...(0,ne().AC)(r)];return(0,oe.jsx)(ie().Ay,{...e,title:n.formatMessage((0,te().sK)(o,void 0).label),shouldWrapCaption:!0,style:i.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,oe.jsx)("div",{children:l})})}var ae=()=>n(535906),re=()=>n(273520),le=()=>n(401382),ce=()=>n(966789),de=()=>n(935091),ue=()=>n(858023),ge=()=>n(922172),pe=()=>n(286404),me=()=>n(443252),he=()=>n(88271),fe=()=>n(35462),ye=()=>n(732165);function ve(e){const{integrationId:t,integrationTable:n,isLegacy:o,disableDisconnectUser:r,disableDisconnectAll:l,disableDisallow:c,botIds:u}=e,g=(0,a().O$)(R().AppStoreCurrentSpaceStore),p=(0,s().Y0)(),m=(0,s().v3)(),h=(0,P().tz)(),f=De(),[y,v]=(0,i.useState)(void 0),[S,j]=(0,i.useState)(!1),[C,k]=(0,i.useState)(!1),[M,B]=(0,i.useState)(!1),[T,N]=(0,i.useState)(void 0),_=(0,a().K8)((()=>g&&n?(0,K().Oo)(g,{table:n,id:t}):void 0),[g,t,n]),D=(0,a().K8)((()=>{if(o){const e=x().Gw.find((e=>e.id===t));return{name:null==e?void 0:e.name,url:(0,Z().xS)("guides.connectedApps")}}if(g&&n){const o=g.getRecordModel({table:n,id:t});if(n===b().Li&&!(0,d().CX)({integrationId:t,env:"production"})){var e,i;const t=o;return{name:null==o?void 0:o.name,url:null==t||null===(e=t.getInfo())||void 0===e?void 0:e.website_url,email:null==t||null===(i=t.getInfo())||void 0===i?void 0:i.email}}return{name:null==o?void 0:o.name}}}),[g,t,n,o]),L=(0,a().K8)((()=>u&&!r?u.map((e=>g&&_?K().sk.createChildStore(_,{table:A().GP,id:e,spaceId:g.id}):void 0)):[]),[g,u,_,r]).filter(I().O9),O=(0,a().K8)((()=>L.filter((e=>e.getAlive()))),[L]),z=(0,a().K8)((()=>{if(g&&O&&!r){return O.map((e=>e.getCreatedById())).filter(I().O9).map((e=>U().L.createChildStore(g,{table:G().oo,id:e}))).filter((e=>e.isDefined()))}return[]}),[O,g,r]),W=(0,a().K8)((()=>null==g?void 0:g.getBotSettingsStore().getValue()),[g]),H=(0,a().K8)((()=>null==O?void 0:O.reduce(((e,t)=>{const n=z.find((e=>e.id===t.getCreatedById()));return e[t.id]={userStore:n,botCapabilities:t.getCapabilities()},e}),{})),[O,z]),q=(0,a().K8)((()=>y?(0,F().Ay)(y,Object.entries(H),(e=>{let[,{userStore:t}]=e;return t.getSearchName(h)})):Object.entries(H)),[H,y,h]),$=!r&&(null==u?void 0:u.length)&&(0,oe.jsx)(he().A,{isInput:!0,style:{padding:8},children:(0,oe.jsx)(le().Ay,{textWrapperStyle:{margin:0},focus:!p.isMobile||void 0,focusAfterAnimation:!0,value:y||"",onChange:e=>v(e.target.value),placeholder:h.formatMessage({id:"integrationInstallerFilter.userSearch.placeholder",defaultMessage:"Filter by user"})})}),Y=q.length?[{key:"disconnect user section",render:e=>(0,oe.jsx)(he().A,{...e}),items:xe({users:q,disableDisconnectUser:r,showDisplayModal:()=>k(!0),setSelectedUser:N,intl:h})}]:[],V=(null==D?void 0:D.url)||(null==D?void 0:D.email),Q=Boolean(null==u?void 0:u.length)||(0,w().az)(W)&&!c,ee=(0,oe.jsxs)(oe.Fragment,{children:[V&&(0,oe.jsxs)(he().A,{topBorder:Boolean(q.length),children:[(null==D?void 0:D.url)&&(0,oe.jsx)(be,{environment:m,developerWebsite:D.url}),(null==D?void 0:D.email)&&(0,oe.jsx)(je,{environment:m,developerEmail:D.email})]},"app-links"),Q&&(0,oe.jsxs)(he().A,{topBorder:Boolean(q.length||V),children:[Boolean(null==u?void 0:u.length)&&(0,oe.jsx)(Ie,{showDisplayModal:()=>B(!0)}),(0,w().az)(W)&&!c&&(0,oe.jsx)(Ce,{showDisplayModal:()=>j(!0)})]})]});return(V||Q)&&D?(0,oe.jsx)(re().Ay,{popupType:p.isMobile?re().z7.SlideUp:re().z7.Popup,renderOrigin:e=>(0,oe.jsx)(E().A,{...e,isMobile:p.isMobile,style:{marginLeft:8,marginRight:8}}),render:()=>(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(de().A,{menuType:p.isMobile?J().gu.ActionSheet:J().gu.Popup,header:!r&&$,footer:ee,width:230,children:(0,oe.jsx)(ue().Ay,{type:ue().Oh.Vertical,sections:Y,initialFocus:void 0})}),(0,oe.jsx)(ge().a,{open:!r&&C,onDismiss:()=>{k(!1)},transitionAppearance:"none",showCloseIcon:!0,innerStyle:f.innerModal,render:()=>(0,oe.jsx)(we,{title:(0,oe.jsx)(Te,{integrationName:D.name}),caption:(0,oe.jsx)(Ne,{integrationName:D.name,userName:null==T?void 0:T.userName}),type:"disconnect",handleCancel:()=>{k(!1),N(void 0)},handleConfirmation:async()=>{T&&(await Se({botIds:[T.botId],environment:m}),N(void 0)),k(!1)}})}),(0,oe.jsx)(ge().a,{open:!l&&M,onDismiss:()=>{B(!1)},transitionAppearance:"none",showCloseIcon:!0,innerStyle:f.innerModal,render:()=>(0,oe.jsx)(we,{title:(0,oe.jsx)(Pe,{integrationName:D.name}),caption:(0,oe.jsx)(Be,{integrationName:D.name}),type:"disconnect",handleCancel:()=>B(!1),handleConfirmation:async()=>{await Se({botIds:u,environment:m}),B(!1)}})}),(0,oe.jsx)(ge().a,{open:!c&&S,onDismiss:()=>{j(!1)},transitionAppearance:"none",showCloseIcon:!0,innerStyle:f.innerModal,render:()=>(0,oe.jsx)(we,{title:(0,oe.jsx)(ke,{integrationName:D.name}),caption:(0,oe.jsx)(Me,{integrationName:D.name,disableDisconnectAll:l}),type:"disapprove",handleCancel:()=>j(!1),handleConfirmation:async()=>{!function(e){const{currentSpaceStore:t,environment:n,integrationId:i}=e;t&&X().createAndCommit({userAction:"AdminIntegrationSettingsActionMenu.handleDisapproveIntegration",environment:n,canUndo:!0,perform:e=>{X().applyOperation({store:t,operation:{pointer:t.pointer,path:["bot_settings","integration_approval_statuses"],command:"update",args:{[i]:null}},transaction:e})}})}({currentSpaceStore:g,environment:m,integrationId:t}),l||await Se({botIds:u,environment:m}),j(!1)}})})]})}):null}async function Se(e){let{botIds:t,environment:n}=e;t&&await Promise.all(t.map((e=>$().KA({environment:n,botId:e,onSuccess:()=>{q().hs(n,{type:"public"})}}))))}function xe(e){const{intl:t,disableDisconnectUser:n,users:i,showDisplayModal:o,setSelectedUser:s}=e;return n?[]:i.map((e=>{let[n,{userStore:i,botCapabilities:a}]=e;return{key:i.id,render:e=>(0,oe.jsx)(Ae,{buttonMenuProps:e,userStore:i,botCapabilities:a,selectAction:()=>{o(),s({botId:n,userName:i.getDisplayName(t)})}}),action:()=>{o(),s({botId:n,userName:i.getDisplayName(t)})}}}))}function Ae(e){const{buttonMenuProps:t,userStore:n,botCapabilities:o,selectAction:a}=e,r=(0,s().Y0)(),[l,c]=(0,i.useState)(!1);return(0,oe.jsx)(me().Ay,{popupType:r.isMobile?re().z7.SlideUp:re().z7.Popup,placementToOrigin:re().sx.Right,open:l,onDismiss:()=>c(!1),origin:(0,oe.jsx)(ae().A,{...t,title:(0,oe.jsx)("div",{style:{display:"flex",alignContent:"center",justifyContent:"space-between"},children:(0,oe.jsx)(ye().A,{userStore:n,avatarSize:18,inline:!0,avatarShouldShowShadow:!0,style:{flexShrink:1}})}),textWrapperStyle:{marginLeft:12,marginRight:12},focused:!1,onClick:()=>c(!0)}),render:()=>(0,oe.jsx)(de().A,{width:240,menuType:r.isMobile?J().gu.ActionSheet:J().gu.Popup,header:(0,oe.jsx)("div",{style:{padding:2,marginTop:4,marginBottom:4},children:(0,oe.jsx)(se,{capabilities:o})}),children:(0,oe.jsx)(ue().Ay,{type:ue().Oh.Vertical,sections:[{key:"integration capabilities",render:e=>(0,oe.jsx)(he().A,{...e,topBorder:!0}),items:[{key:"remove",render:e=>(0,oe.jsx)(ae().A,{...e,focused:!1,title:(0,oe.jsx)("div",{style:{color:B().Ay.red},children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.revokeUserAccess.label",defaultMessage:"Disconnect user"})})}),action:a}]}],initialFocus:void 0})})})}function be(e){let{environment:t,developerWebsite:n}=e;return(0,oe.jsx)(ae().A,{onClick:()=>{Y().f({environment:t,url:n}),q().Vk(t,{href:n,from:"integration-settings"})},title:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.visitDeveloperWebsite.label",defaultMessage:"Visit developer website"}),shouldWrapCaption:!0,focused:!1,textWrapperStyle:{marginLeft:12,marginRight:12}})}function je(e){let{environment:t,developerEmail:n}=e;return(0,oe.jsx)(ae().A,{onClick:()=>{Y().f({environment:t,url:`mailto:${n}`}),q().z$(t,{from:"integration-settings"})},title:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.contactDeveloperSupport.label",defaultMessage:"Contact support"}),shouldWrapCaption:!0,focused:!1,textWrapperStyle:{marginLeft:12,marginRight:12}})}function Ie(e){let{showDisplayModal:t}=e;return(0,oe.jsx)(ae().A,{onClick:t,title:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.disconnectAll.label",defaultMessage:"Disconnect all users"}),shouldWrapCaption:!0,focused:!1,textWrapperStyle:{marginLeft:12,marginRight:12,color:B().Ay.red}})}function Ce(e){let{showDisplayModal:t}=e;return(0,oe.jsx)(ae().A,{onClick:t,title:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.label",defaultMessage:"Remove from approved list"}),focused:!1,textWrapperStyle:{marginLeft:12,marginRight:12,color:B().Ay.red}})}function we(e){let{title:t,caption:n,handleConfirmation:o,handleCancel:s,type:a}=e;const[r,l]=(0,i.useState)(!1);return(0,oe.jsxs)("div",{style:{padding:20,width:333},children:[(0,oe.jsx)(fe().A,{isMultiline:!0,style:{marginBottom:8,fontWeight:T().Wy.semibold,paddingRight:30},children:t}),(0,oe.jsx)(fe().A,{isMultiline:!0,isSecondaryColor:!0,style:{marginBottom:8},children:n}),(0,oe.jsxs)("div",{style:{display:"flex",marginTop:12},children:[(0,oe.jsx)(pe().A,{style:{width:140,marginRight:9},size:"lg",onClick:s,disabled:r,children:(0,oe.jsx)(fe().A,{children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.button.cancel",defaultMessage:"Cancel"})})}),(0,oe.jsx)(pe().A,{style:{width:140},size:"lg",onClick:async()=>await o(l),backgroundColor:B().Ay.red,disabled:r,children:(0,oe.jsxs)(fe().A,{style:{color:B().Ay.white},children:["disconnect"===a&&!0===r&&(0,oe.jsx)(ce().A,{onDarkBackground:!0}),"disconnect"===a&&!1===r&&(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.button.disconnect",defaultMessage:"Disconnect"}),"disapprove"===a&&(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.button.remove",defaultMessage:"Remove"})]})})]})]})}function ke(e){let{integrationName:t}=e;return(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.title",defaultMessage:"Remove {integrationName} from approved integrations",values:{integrationName:t}})}function Me(e){let{integrationName:t,disableDisconnectAll:n}=e;return n?(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.caption",defaultMessage:"Prevent members from installing {integrationName}.",values:{integrationName:t}}):(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApprovalAndDisconnectAll.caption",defaultMessage:"Revoke access for {integrationName} for all users in this workspace and prevent members from installing {integrationName}.",values:{integrationName:t}})}function Pe(e){let{integrationName:t}=e;return(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.disconnectAll.modal.label",defaultMessage:"Disconnect {integrationName} for all users in workspace",values:{integrationName:t}})}function Be(e){let{integrationName:t}=e;return(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.disconnectAll.modal.caption",defaultMessage:"Revoke access for {integrationName} for all users in this workspace.",values:{integrationName:t}})}function Te(e){let{integrationName:t}=e;return(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.disconnectUser.modal.label",defaultMessage:"Disconnect {integrationName}?",values:{integrationName:t}})}function Ne(e){let{integrationName:t,userName:n}=e;return(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.disconnectUser.modal.caption",defaultMessage:"Revoke access for {integrationName} for {userName}",values:{integrationName:t,userName:n}})}function _e(e){const{adminIntegrationConfig:t,botId:n,maybeWebhookSubscriptionId:o}=e,r=(0,s().Y0)(),l=(0,s().v3)(),[c,d]=(0,i.useState)(!1),u=De(),g=(0,a().O$)(R().AppStoreCurrentSpaceStore),p=(0,a().K8)((()=>{const e=null==g?void 0:g.getRecordModel({table:A().GP,id:n});return null==e?void 0:e.getCapabilities()}),[g,n]),m=t.developer_name;if(!m)return null;const h=new(Q().A),f={key:"manage",action:()=>{ee().A.setState({open:!0,integrationId:t.id,webhookSubscriptionId:o}),h.setState({open:!1})},render:e=>(0,oe.jsx)(ae().A,{...e,title:(0,oe.jsx)(P().sA,{id:"complianceIntegrationSettings.actionMenu.manage",defaultMessage:"Manage"})})},y={key:"learn more",action:()=>{Y().f({environment:l,url:t.integrationGalleryUrl})},render:e=>(0,oe.jsx)(ae().A,{...e,title:(0,oe.jsx)(P().sA,{id:"complianceIntegrationSettings.actionMenu.learnMore",defaultMessage:"Learn more"})})},v={key:"disconnect",action:()=>{h.setState({open:!1}),d(!0)},render:e=>(0,oe.jsx)(ae().A,{...e,title:(0,oe.jsx)("span",{style:u.disconnect,children:(0,oe.jsx)(P().sA,{id:"complianceIntegrationSettings.actionMenu.disconnect",defaultMessage:"Disconnect"})})})},S=[...t.oauth||(0,H().qs)(p)||(0,k().jl)(t.id)?[]:[f],...t.oauth||(0,H().qs)(p)?[y]:[],v];return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(re().Ay,{popupType:r.isMobile?re().z7.SlideUp:re().z7.Popup,renderOrigin:e=>(0,oe.jsx)(E().A,{...e,isMobile:r.isMobile,style:{marginLeft:8,marginRight:8}}),buttonPopupStore:h,render:()=>(0,oe.jsx)(de().A,{menuType:r.isMobile?J().gu.ActionSheet:J().gu.Popup,width:230,children:(0,oe.jsx)(ue().Ay,{type:ue().Oh.Vertical,sections:[{key:"options",render:e=>(0,oe.jsx)(he().A,{...e}),items:S}],initialFocus:void 0})})}),(0,oe.jsx)(ge().a,{open:c,onDismiss:()=>d(!1),transitionAppearance:"none",showCloseIcon:!0,innerStyle:u.innerModal,render:()=>(0,oe.jsx)(we,{title:(0,oe.jsx)(P().sA,{id:"complianceIntegrationSettings.disconnectModal.title",defaultMessage:"Disconnect {integrationName}?",values:{integrationName:m}}),caption:(0,oe.jsx)(P().sA,{id:"complianceIntegrationSettings.disconnectModal.subtitle",defaultMessage:"Revoke {integrationName}'s access to this workspace. Workspace events will no longer be sent to {integrationName}.",values:{integrationName:m}}),type:"disconnect",handleCancel:()=>d(!1),handleConfirmation:async()=>{await $().KA({environment:l,botId:n,onSuccess:()=>{}}),q().kV(l,{integration_id:t.id}),V().D6({label:(0,oe.jsx)(P().sA,{id:"complianceIntegrationSettings.snackbar.title",defaultMessage:"Disconnected {integrationName} from your workspace",values:{integrationName:m}})})}})})]})}function De(){return(0,r().IS)((()=>({disconnect:{color:B().Ay.red},innerModal:{borderRadius:10}})),[])}var Le=()=>n(695951),Oe=()=>n(678523),ze=()=>n(28210),We=()=>n(59279),Re=()=>n(103151),Ke=()=>n(482570),Ue=()=>n(162901),Ee=()=>n(758611),He=()=>n(3311),Ge=()=>n(91472),Fe=()=>n(865226);function qe(e){const{botId:t}=e,[,,n]=(0,a().$y)(void 0,Q().A),o=(0,s().Y0)(),r=(0,s().v3)(),l=(0,a().O$)(R().AppStoreCurrentSpaceStore),[c,d]=(0,i.useState)(!1),u=(0,a().K8)((()=>l?K().sk.createChildStore(l,{table:A().GP,id:t,spaceId:l.id}):void 0),[t,l]),g=(0,a().K8)((()=>(0,H().Hg)(null==u?void 0:u.getModel())),[u]),[{value:p}]=(0,Ue().Yb)((async()=>{if(u){return await $().dA({environment:r,botId:null==u?void 0:u.id})}}),[r,u]);if(!u)return null;let m;return m=o.isMobile?{menuType:J().gu.ActionSheet}:{menuType:J().gu.Popup},(0,oe.jsx)(re().Ay,{popupType:o.isMobile?re().z7.SlideUp:re().z7.Popup,buttonPopupStore:n,renderOrigin:e=>(0,oe.jsx)(E().A,{isMobile:o.isMobile,...e,style:{marginLeft:8,marginRight:8}}),render:()=>(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(de().A,{...m,children:(0,oe.jsx)(ue().Ay,{type:ue().Oh.Vertical,sections:[{key:"integration options",render:e=>(0,oe.jsx)(he().A,{...e}),items:[...p?[$e({environment:r,botToken:p})]:[],{key:"manage",action:()=>Fe().oo({environment:r,url:`${Ee().JZ.creatorProfileIntegrations}/internal/${He().Xw(t)}`,openInNew:"tab"}),render:e=>(0,oe.jsx)(ae().A,{title:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.manageIntegration.label",defaultMessage:"Manage in developer portal"}),...e})},{key:"delete",action:()=>d(!0),render:e=>(0,oe.jsx)(ae().A,{title:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.disconnectIntegrationButton.label",defaultMessage:"Disconnect {integrationName}",values:{integrationName:g}}),style:{color:B().Ay.red},...e})}]}],initialFocus:void 0})}),(0,oe.jsx)(ge().a,{open:c,onDismiss:()=>{d(!1)},transitionAppearance:"none",render:()=>(0,oe.jsxs)("div",{style:{padding:20,width:333},children:[(0,oe.jsx)(fe().A,{isMultiline:!0,style:{marginBottom:8,fontWeight:T().Wy.semibold},children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.removeIntegration.modal.label.title",defaultMessage:"Disconnect {integrationName} in workspace",values:{integrationName:g}})}),(0,oe.jsx)(fe().A,{isMultiline:!0,isSecondaryColor:!0,style:{marginBottom:8},children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.removeIntegration.modal.label.caption",defaultMessage:"Revoke access for {integrationName} in workspace",values:{integrationName:g}})}),(0,oe.jsxs)("div",{style:{display:"flex",marginTop:12},children:[(0,oe.jsx)(pe().A,{style:{width:140,marginRight:9},size:"lg",onClick:()=>d(!1),children:(0,oe.jsx)(fe().A,{children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.button.cancel",defaultMessage:"Cancel"})})}),(0,oe.jsx)(pe().A,{style:{width:140},size:"lg",onClick:async()=>{d(!1),await $().KA({environment:r,botId:u.id,onSuccess:()=>{q().hs(r,{type:"internal"})}})},backgroundColor:B().Ay.red,children:(0,oe.jsx)(fe().A,{style:{color:B().Ay.white},children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.disconnectIntegration..modal.button.disconnect",defaultMessage:"Disconnect"})})})]})]})})]})})}function $e(e){const{botToken:t,environment:n}=e;return{key:"copy bot token",action:async()=>{const e=await Ge().R.clipboardActions.load();e.copyString({environment:n,stringValue:t,copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),q().Er(n,{from:"integration-settings",table:A().GP})},render:e=>(0,oe.jsx)(ae().A,{title:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.actionMenu.copyInternalIntegrationTokenButton.label",defaultMessage:"Copy internal integration token"}),...e})}}var Ye=()=>n(610271),Ve=()=>n(96365);const Xe={automation_action:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.automation_action",defaultMessage:"Automation Action"}),internal:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.internal",defaultMessage:"Internal"}),databaseSync:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.sync",defaultMessage:"Sync"}),linkPreview:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.preview",defaultMessage:"Link Preview"}),importer:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.importer",defaultMessage:"Importer"}),dlp:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.dlp",defaultMessage:"DLP"}),siem:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.siem",defaultMessage:"SIEM"}),ediscovery:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.ediscovery",defaultMessage:"eDiscovery"}),aiConnector:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.aiConnector",defaultMessage:"AI connector"})};function Je(e){const{integrationIdToBotIds:t,internalIntegrationIds:n,integrationIdToUsers:i}=e,o=(0,a().O$)(R().AppStoreCurrentSpaceStore),s=(0,r().DP)(),l=(0,a().K8)((()=>null==o?void 0:o.getBotSettingsStore().getValue()),[o]),c=(0,a().K8)((()=>"approved_or_built_by_notion"===(null==l?void 0:l.integration_restrictions)),[l]),u=(0,a().K8)((()=>Boolean(null==l?void 0:l.integration_restrictions)),[l]),g=(0,a().K8)((()=>null!=l&&l.integration_approval_statuses?Object.keys(l.integration_approval_statuses):[]),[l]),p=g.filter((e=>!Object.keys(t).includes(e)&&!x().Ei.includes(e))),m=p.some((e=>e===d().Hd)),h=(0,a().K8)((()=>null==o?void 0:o.id),[o]),f=t?Object.entries(t).map((e=>{let[t,n]=e;return Qe({integrationPointer:{table:b().Li,id:t},userStores:i[t],botIds:n,autoApproveBuiltByNotion:c})})):[],y=h?n.map((e=>Qe({integrationPointer:{table:A().GP,id:e,spaceId:h},userStores:i[e],botIds:[e]}))):[],v=u?p.map((e=>Qe({integrationPointer:{table:b().Li,id:e},userStores:[],botIds:[],autoApproveBuiltByNotion:c}))):[],S=x().Gw.filter((e=>!(0,w().az)(l)||g.includes(e.id)&&(e.id!==x().IQ||!m))).map((e=>function(e){const{legacyIntegration:t}=e,{id:n,name:i,info:o}=t;return{key:n,columns:[(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",maxWidth:300},children:[(0,oe.jsx)("img",{src:o.icon,style:{height:28}}),(0,oe.jsxs)("div",{style:{minWidth:0,marginLeft:15},children:[(0,oe.jsx)("div",{style:{display:"flex"},children:(0,oe.jsx)(fe().A,{children:i})}),(0,oe.jsx)(fe().A,{isSmall:!0,style:{display:"flex"},children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.legacy",defaultMessage:"Notion Connected App"})})]})]},0),(0,oe.jsx)(ct,{renderedUsers:void 0,displayUsers:!1},1),(0,oe.jsx)("div",{children:(0,oe.jsx)(ve,{integrationId:n,isLegacy:!0,disableDisconnectAll:!0,disableDisconnectUser:!0})},2)]}}({botSettings:l,legacyIntegration:e}))),j=f.length+y.length+v.length+S.length;return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Ve().A,{columns:[{key:"integration",header:(0,oe.jsx)(P().sA,{id:"spaceConnectionsSettings.connectionsTable.connectionsColumn.title",defaultMessage:"Connection"}),style:{width:"40%"}},{key:"added_by",header:(0,oe.jsx)(P().sA,{id:"spaceConnectionsSettings.connectionsTable.creationInfoColumn.title",defaultMessage:"Users and access"})},{key:"more",header:void 0,style:{width:"5%"}}],rows:[...f,...y,...v,...S]}),0===j?(0,oe.jsx)("div",{style:{height:120,width:"100%",fontSize:12,color:s.text.tertiary,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${s.lightDividerColor}`},children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.emptyTable.message",defaultMessage:"No integration installed"})}):void 0]})}function Ze(e){const{botIdToWebhookSubscriptionId:t,complianceIntegrationsIdToBotIds:n,aiConnectedApps:i}=e,o=(0,r().IS)((e=>({emptyTable:{height:120,width:"100%",fontSize:12,color:e.text.tertiary,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${e.lightDividerColor}`}})),[]),s=(0,a().O$)(R().AppStoreCurrentSpaceStore),c=(0,z().X)("ai_connector_discoverability"),d=(0,a().K8)((()=>{if(!s)return[];return Object.entries(n).flatMap((e=>{let[n,i]=e;return i.map((e=>{const i=K().vK.createChildStore(s,{table:A().GP,id:e,spaceId:s.id});return{integrationPointer:{table:b().Li,id:n},botId:e,lastEditedAt:Number(i.getLastEditedAt()),lastEditedByPointer:i.getLastEditedByPointer(),webhookSubscriptionId:t[e]}}))})).filter(I().O9)}),[t,s,n]).map((e=>function(e){const{integrationPointer:t,lastEditedAt:n,lastEditedByPointer:i,botId:o,webhookSubscriptionId:s}=e,a=t.id,r=(0,k().Q2)(a);if(!r)return;const l=k().lW[r];if(!l)return;return{key:`${a}:${o}`,columns:[(0,oe.jsx)(it,{integrationTable:b().Li,integrationId:a,maybeWebhookSubscriptionId:s},"integration-title"),(0,oe.jsx)(rt,{editedByPointer:i},"integration-edited-by"),(0,oe.jsx)(lt,{lastEditedOn:n},"integration-last-edited-on"),(0,oe.jsx)(_e,{adminIntegrationConfig:l,maybeWebhookSubscriptionId:s,botId:o},"integration-menu")]}}(e))).filter(I().O9),u=c?function(e){const{aiConnectedApps:t}=e,n=[],i=function(e){const t=[];return e.forEach((e=>{switch(e.id){case l().e5:t.push({...e,integrationIcon:v().z,integrationName:"Slack",moreSettingsComponent:(0,oe.jsx)(L().SlackConnectionOptions,{})});break;case l()._u:t.push({...e,integrationIcon:h().u,integrationName:"Google Drive",moreSettingsComponent:(0,oe.jsx)(_().A,{callGetStatusAPI:!0})});break;case l().Fl:t.push({...e,integrationIcon:m().F,integrationName:"GitHub",moreSettingsComponent:(0,oe.jsx)(N().Q,{})});break;case l().S:t.push({...e,integrationIcon:y().y,integrationIconColor:"rgba(35, 131, 226, 1)",integrationName:"Jira",moreSettingsComponent:(0,oe.jsx)(D().B,{})})}})),t}(t);return i.forEach((e=>{let t;e.connectorNotionId&&(t={table:"notion_user",id:e.connectorNotionId});const i=e.connectorNotionId?(0,oe.jsx)(rt,{editedByPointer:t},"integration-edited-by"):(0,oe.jsx)("div",{children:e.connectorEmail},`ai-connector-editor${e.id}`);n.push({key:e.id,columns:[(0,oe.jsx)(tt,{aiConnectedApp:e},`ai-connector-title${e.id}`),i,(0,oe.jsx)(lt,{lastEditedOn:e.connectionLastEditedTimestamp},`ai-connector-last-edited-on${e.id}`),(0,oe.jsx)(et,{moreSettingsComponent:e.moreSettingsComponent},`"ai-connector-more-setting"${e.id}`)]})})),n||[]}({aiConnectedApps:i}):[],g=[...u,...d];return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Ve().A,{columns:[{key:"integration",header:(0,oe.jsx)(P().sA,{id:"spaceConnectionsSettings.complianceConnectionsTable.connectionsColumn.title",defaultMessage:"Connection"}),style:{width:"30%"}},{key:"integration-edited-by",header:(0,oe.jsx)(P().sA,{id:"spaceConnectionsSettings.complianceConnectionsTable.integrationEditorColumn.title",defaultMessage:"Edited by"}),style:{width:"30%"}},{key:"integration-edited-on",header:(0,oe.jsx)(P().sA,{id:"spaceConnectionsSettings.complianceConnectionsTable.integrationDateLastEdited.title",defaultMessage:"Edited on"})},{key:"more",header:void 0,style:{width:"5%"}}],rows:g,tableStyle:{borderTop:"none"}}),0===g.length?(0,oe.jsx)("div",{style:o.emptyTable,children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.emptyTable.message",defaultMessage:"No integration installed"})}):void 0]})}function Qe(e){const{integrationPointer:t,userStores:n,botIds:i,autoApproveBuiltByNotion:o}=e;if(t.table===b().Li){const e=t.id,s=(0,d().CX)({integrationId:e,env:"production"});return{key:e,columns:[(0,oe.jsx)(it,{integrationTable:b().Li,integrationId:e},"integration-title"),(0,oe.jsx)(ct,{renderedUsers:n,displayUsers:!s},"integration-installer-info"),(0,oe.jsx)(ve,{integrationId:e,integrationTable:b().Li,botIds:i,disableDisconnectUser:s||void 0,disableDisallow:s&&o},"admin-integration-settings-menu")]}}if(t.table===A().GP)return{key:t.id,columns:[(0,oe.jsx)(it,{integrationTable:A().GP,integrationId:t.id},"integration-title"),(0,oe.jsx)(ct,{renderedUsers:n,displayUsers:!1},"integration-installer-info"),(0,oe.jsx)(qe,{botId:t.id},"integration-settings-menu")]};(0,I().HB)(t)}function et(e){const{moreSettingsComponent:t}=e,n=(0,s().Y0)();return t?(0,oe.jsx)(re().Ay,{popupType:n.isMobile?re().z7.SlideUp:re().z7.Popup,renderOrigin:e=>(0,oe.jsx)(E().A,{...e,isMobile:n.isMobile,style:{marginLeft:8,marginRight:8}}),render:e=>i.cloneElement(t,{parent:e,from:"connection_settings"})}):(0,oe.jsx)(oe.Fragment,{})}function tt(e){const{aiConnectedApp:t}=e,n=t.connectionStatus,i=(0,r().IS)((e=>({inProgressIcon:{width:14,height:14,fill:e.blueColor,marginRight:4},connectedIcon:{width:14,height:14,marginRight:4},error:{width:16,height:16,fill:e.icon.orangePrimary}})),[]);return(0,oe.jsxs)(Ye().Ye,{children:[t.integrationIcon({fill:t.integrationIconColor??void 0,width:28,height:28,marginTop:4}),(0,oe.jsxs)("div",{style:{minWidth:0,marginLeft:15},children:[(0,oe.jsxs)("div",{style:{display:"flex"},children:[(0,oe.jsx)(fe().A,{children:t.integrationName}),(0,oe.jsx)(Le().A,{content:"AI Connector"})]}),(0,oe.jsx)(fe().A,{isSmall:!0,style:{display:"flex"},children:nt(n,i)})]})]})}function nt(e,t){switch(e){case"connected":return(0,oe.jsxs)(Ye().Ye,{children:[(0,g().p)(t.connectedIcon),(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.installerInfoColumn.aiConnector.connected",defaultMessage:"Connected"})]});case"disconnecting":return(0,oe.jsxs)(Ye().Ye,{children:[(0,u().y)(t.inProgressIcon),(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.installerInfoColumn.aiConnector.disconnectionInProgress",defaultMessage:"Disconnection in progress"})]});case"in_progress":return(0,oe.jsxs)(Ye().Ye,{children:[(0,u().y)(t.inProgressIcon),(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.installerInfoColumn.aiConnector.inProgress",defaultMessage:"Connection in progress"})]});case"error":return(0,oe.jsxs)(Ye().Ye,{children:[(0,p().f)(t.inProgressIcon),(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.installerInfoColumn.aiConnector.Error",defaultMessage:"Connection error, Try again"})]});default:return(0,oe.jsx)(oe.Fragment,{})}}function it(e){const{integrationId:t,integrationTable:n,maybeWebhookSubscriptionId:i}=e,o=(0,a().O$)(R().AppStoreCurrentSpaceStore),s=(0,a().K8)((()=>{if(o)return o.getRecordModel({table:n,id:t})}),[o,t,n]),r=(0,a().K8)((()=>{var e;if(o&&i)return null===(e=o.getRecordModel({table:j().TF,id:i,spaceId:o.id}))||void 0===e?void 0:e.getHealth()}),[o,i]),[l,c,d,u]=(0,a().K8)((()=>{if(!s)return[];let e;const i=[];let o;if(n===A().GP){const a=s;a.icon&&(e={pointer:{table:n,id:t},icon:a.icon}),i.push("internal"),o=(0,oe.jsx)(ot,{botId:a.id})}else if(n===b().Li){const a=s,r=a.getInfo();r.icon&&(e={pointer:{table:n,id:t},icon:r.icon}),(0,x().Hy)(a)&&(i.push("linkPreview"),(0,x().Z1)(a)&&i.push("databaseSync")),o=(0,k().NV)(a.id)?null:(0,oe.jsx)(st,{integrationId:a.id})}else(0,I().HB)(n);return[null==s?void 0:s.name,e,i,o]}),[n,t,s]);if(!s||!d)return(0,oe.jsx)(ce().A,{});let g=null;return C(r)||(g=(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:3},children:[(0,S().Q)({width:12,color:B().XA.light.red[500]}),(0,oe.jsx)(fe().A,{isSmall:!0,style:{color:B().XA.light.red[500]},children:(0,oe.jsx)(P().sA,{id:"workspaceIntegrationSettings.integrationTable.titleColumn.webhookError",defaultMessage:"Webhook error"})})]})),(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",maxWidth:300},children:[(0,oe.jsx)(ze().B,{disabled:!0,icon:c,title:l,isEmptyPage:!1,size:28,isLarge:!0,useInvertedColors:!0}),(0,oe.jsxs)("div",{style:{minWidth:0,marginLeft:15},children:[(0,oe.jsxs)("div",{style:{display:"flex",marginRight:16},children:[(0,oe.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,oe.jsx)(fe().A,{children:l}),g]}),d.map((e=>e&&(0,oe.jsx)(Oe().A,{desktopStyle:{marginLeft:4},children:Xe[e]},e)))]}),u]})]})}function ot(e){let{botId:t}=e;const n=(0,a().O$)(R().AppStoreCurrentSpaceStore),i=(0,P().tz)(),o=(0,a().K8)((()=>null==n?void 0:n.getRecordModel({table:A().GP,id:t})),[n,t]),s=(0,a().K8)((()=>{if(n&&o){const e=n.getRecordModel({table:o.created_by_table,id:o.created_by_id});return(0,M().c6)(i,e)}}),[n,o,i]);return s?(0,oe.jsx)(fe().A,{className:"notranslate",isSmall:!0,children:s}):(0,oe.jsx)(at,{})}function st(e){let{integrationId:t}=e;const n=(0,a().O$)(R().AppStoreCurrentSpaceStore),i=(0,r().DP)(),o=(0,a().K8)((()=>{const e=null==n?void 0:n.getRecordModel({table:b().Li,id:t});if("internal"!==(null==e?void 0:e.type))return null==e?void 0:e.getInfo().developer_name}),[n,t]);return(0,d().CX)({integrationId:t,env:"production"})?(0,oe.jsx)(fe().A,{isSmall:!0,style:{display:"flex",alignItems:"center"},children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.notion",defaultMessage:"Notion {icon}",values:{icon:(0,oe.jsx)(Re().A,{renderTooltip:()=>(0,oe.jsx)("div",{children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.installerInfo.notion.tooltip",defaultMessage:"Developed by Notion"})}),placement:W().W.Right,render:e=>(0,oe.jsx)("div",{...e,children:(0,f().m)({width:12,height:12,fill:i.invoiceGreen})})})}})}):o?(0,oe.jsx)(fe().A,{className:"notranslate",isSmall:!0,children:o}):(0,oe.jsx)(at,{})}function at(){return(0,oe.jsx)(fe().A,{isSmall:!0,children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.label.unverifiedDeveloper",defaultMessage:"Unverified developer"})})}function rt(e){const{editedByPointer:t}=e,n=(0,P().tz)(),i=(0,a().K8)((()=>{const e=R().default.state.currentSpaceStore;if(e)return e&&t?U().L.createChildStore(e,t):void 0}),[t]),o=(0,a().K8)((()=>null==i?void 0:i.getDisplayName(n)),[i,n]);return i&&o?(0,oe.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:8,alignItems:"center",width:"100%"},children:[(0,oe.jsx)(Ke().A,{userStore:i,size:18}),(0,oe.jsx)(fe().A,{children:o})]}):null}function lt(e){const{lastEditedOn:t}=e;return void 0===t?null:(0,oe.jsx)(We().s7,{useThinTitle:!0,title:(0,c().W_)(t,"long",o().locale)})}function ct(e){const{renderedUsers:t,displayUsers:n}=e,o=(0,a().O$)(R().AppStoreCurrentSpaceStore),r=(0,P().tz)(),l=(0,s().v3)(),c=(0,a().K8)((()=>{if(o)return(0,O().GK)(l,o)}),[l,o]),d=(0,i.useMemo)((()=>t&&t.length),[t]),u=(0,a().K8)((()=>t&&t.length>0?t[0]:void 0),[t]),g=(0,a().K8)((()=>u?u.getDisplayName(r):void 0),[u,r]);return n&&void 0!==d?u?(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,oe.jsx)(Ke().A,{userStore:u,avatarShouldShowShadow:!0,style:{marginRight:8},size:28}),(0,oe.jsx)(fe().A,{children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.listOfUsers",defaultMessage:"{remainingCount, plural, =0 {{firstUser}} one {{firstUser} +{remainingCount}} other {{firstUser} +{remainingCount}}}",values:{firstUser:g,remainingCount:d-1}})})]}):(0,oe.jsx)(fe().A,{isSecondaryColor:!0,style:{display:"flex",alignItems:"center"},children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.noUsers",defaultMessage:"No users"})}):(0,oe.jsx)(fe().A,{style:{display:"flex",alignItems:"center"},children:(0,oe.jsx)(P().sA,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.anyone",defaultMessage:"Anyone in {spaceName}",values:{spaceName:(0,oe.jsx)(fe().A,{style:{fontWeight:T().Wy.medium},children:c})}})})}},752405:(e,t,n)=>{n.d(t,{A:()=>S});n(242343);var i=()=>n(237385),o=()=>n(803290),s=()=>n(246169),a=()=>n(284594),r=()=>n(403026),l=()=>n(758611),c=()=>n(653998),d=()=>n(505381),u=()=>n(307542),g=()=>n(392608),p=()=>n(622286),m=()=>n(421338),h=()=>n(209684),f=()=>n(579494),y=()=>n(793613),v=n(163643);function S(){const e=(0,i().v3)(),t=(0,p().X)("notion_ai_workspace_settings"),n=(0,o().K8)((()=>(0,u().WN)()),[]);return(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,v.jsx)(f().A,{style:{display:"flex",marginLeft:-6},className:"notion-print-ignore",href:`${l().JZ.integrations}/all`,external:!0,onClick:()=>{d().j5(e,{from:"integration-settings",href:`${l().JZ.integrations}/all`})},children:(0,v.jsx)(h().p,{icon:s().y,size:"sm",isLightGray:!0,children:(0,v.jsx)(c().sA,{id:"connectionsSettingsLinks.connectionsGallery",defaultMessage:"Browse connections in Gallery"})})}),(0,v.jsx)(f().A,{style:{display:"flex",marginLeft:-6},className:"notion-print-ignore",href:l().JZ.creatorProfileIntegrations,external:!0,onClick:()=>{d().yQ(e,{from:"integration-settings",href:l().JZ.creatorProfileIntegrations})},children:(0,v.jsx)(h().p,{icon:s().y,size:"sm",isLightGray:!0,children:(0,v.jsxs)(m().Y1,{direction:"horizontal",width:"hug",children:[(0,v.jsx)(c().sA,{id:"connectionsSettingsLinks.manageConnections",defaultMessage:"Develop or manage integrations"}),n&&(0,v.jsx)(y().E,{newBadgeKey:"show_integration_webhooks_callout",didUserEngage:!1,keyType:"date"})]})})}),(0,v.jsx)(f().A,{style:{display:"flex",marginLeft:-6},className:"notion-print-ignore",href:(0,g().xS)("guides.publicAPI"),external:!0,children:(0,v.jsx)(h().p,{icon:a().$,size:"sm",isLightGray:!0,children:(0,v.jsx)(c().sA,{id:"connectionsSettingsLinks.helpCenter",defaultMessage:"Learn more about connections"})})}),!t&&(0,v.jsx)(f().A,{style:{display:"flex",marginLeft:-6},className:"notion-print-ignore",href:(0,g().xS)("guides.aiConnectorsSlack"),external:!0,children:(0,v.jsx)(h().p,{icon:r().X,size:"sm",isLightGray:!0,children:(0,v.jsx)(c().sA,{id:"connectionsSettingsLinks.aiConnectorsHelpCenter",defaultMessage:"Notion AI connectors"})})})]})}},755450:(e,t,n)=>{n.d(t,{A:()=>o});class i extends(()=>n(129044))().default{getInitialState(){return{open:!1}}}const o=new i},781274:(e,t,n)=>{n.d(t,{r:()=>q});n(362833),n(333225),n(494367),n(516262),n(573119),n(240480),n(950443),n(619601),n(725707),n(500234),n(403517);var i=n(242343),o=()=>n(237385),s=()=>n(803290),a=()=>n(174114),r=()=>n(427091),l=()=>n(842940),c=()=>n(956548),d=()=>n(680369),u=()=>n(145017),g=()=>n(653998),p=()=>n(31448),m=()=>n(129243),h=()=>n(421338),f=()=>n(209684),y=()=>n(559637),v=()=>n(996314),S=()=>n(401382),x=()=>n(858023),A=()=>n(397791),b=()=>n(701270),j=()=>n(286404),I=()=>n(443252),C=()=>n(951540),w=()=>n(539048),k=()=>n(88271),M=()=>n(369160),P=()=>n(396218),B=()=>n(378219),T=()=>n(466321),N=()=>n(413871),_=()=>n(976087),D=()=>n(535906),L=()=>n(28210),O=()=>n(709237),z=n(163643);function W(e){let{pageStore:t,isSelected:n,onToggle:i,styles:o}=e;const{blockId:a,icon:r,isEmpty:l}=(0,s().K8)((()=>({blockId:t.id,icon:t.getIcon(),isEmpty:t.isEmptyPage()})),[t]);return(0,z.jsx)(D().A,{onClick:i,focused:!1,icon:(0,z.jsx)(y().A,{checked:n,size:14,checkSize:8,onClick:e=>{e.stopPropagation(),i()}}),title:(0,z.jsxs)(h().Y1,{direction:"horizontal",gap:8,width:"hug",children:[(0,z.jsx)(L().B,{disabled:!0,icon:r,title:void 0,size:d().Ev.default,pageIconStyle:o.pageIconStyle,isEmptyPage:l}),(0,z.jsx)(b().D,{styleName:"UIRegular-14px/Medium",children:(0,z.jsx)(O().A,{store:t})})]})},a)}var R=()=>n(192064);function K(e){let{teamspaceStore:t,checkType:n,onToggle:i,pageCount:o}=e;return(0,z.jsx)(D().A,{onClick:i,focused:!1,icon:(0,z.jsx)(y().A,{checked:n,size:14,checkSize:8,onClick:e=>{e.stopPropagation(),i()}}),title:(0,z.jsx)(R().I,{teamStore:t,pageCount:o})},t.id)}var U=()=>n(149256);n(491955);const E=(0,g().YK)({selectPagesLabel:{id:"pageAccess.modal.selectPagesLabel",defaultMessage:"Select pages"},modalHeader:{id:"pageAccess.modal.header",defaultMessage:"Select page access"},byline:{id:"pageAccess.modal.byline",defaultMessage:"Select which pages this integration will have access to. Unlinked pages must be added manually via search."},manuallySelectedPagesHeader:{id:"pageAccess.modal.manuallySelectedPages.header",defaultMessage:"{count, plural, one {1 manually selected page} other {{count} manually selected pages}}"},teamspacesHeader:{id:"pageAccess.modal.teamspaces.header",defaultMessage:"{count, plural, one {1 teamspace} other {{count} teamspaces}}"},sharedPagesHeader:{id:"pageAccess.modal.sharedPages.header",defaultMessage:"{count, plural, one {1 shared page} other {{count} shared pages}}"},privatePagesHeader:{id:"pageAccess.modal.privatePages.header",defaultMessage:"{count, plural, one {1 private page} other {{count} private pages}}"},saveButton:{id:"pageAccess.modal.saveButton",defaultMessage:"Select pages"},cancelButton:{id:"pageAccess.modal.cancelButton",defaultMessage:"Cancel"},searchPlaceholder:{id:"pageAccess.modal.searchPlaceholder",defaultMessage:"Search pages"},removeButton:{id:"pageAccess.modal.removeButton",defaultMessage:"Remove"},removeAll:{id:"pageAccess.modal.removeAll",defaultMessage:"Remove all"}});function H(e){let{key:t,title:n,allItems:i,styles:o}=e;return 0===i.length?{key:t,title:n,content:null,collapsible:!1}:{key:t,title:n,content:(0,z.jsx)("div",{style:o.menuList,children:(0,z.jsx)(x().Ay,{type:x().Oh.Vertical,sections:[{key:t,render:e=>(0,z.jsx)(k().A,{...e}),items:i}],initialFocus:void 0})}),sectionContentStyleOverride:{padding:0}}}const G=n(129044).default.createClass({},{name:"SelectedBlockIdsStore"});function F(e){let{pageIdsAlreadySharedWithBot:t,teamPagesByTeam:n,pagesSharedWithUser:x,privatePages:w,manuallySelectedPages:k,onClose:D,allTeams:L,botStore:O,spaceStore:R,selectedBlockIdsStore:F,refetchBotSharedPages:q}=e;const $=(0,g().tz)(),Y=(0,o().v3)(),[V,X]=i.useState(""),[J,Z]=i.useState(!1),Q=(0,s().uB)(F,G),{selected:ee,toggleSelection:te,setSelectedOfType:ne}=function(e){let{pageIdsAlreadySharedWithBot:t,allSharedPages:n,allPrivatePages:o,manuallySelectedPages:s}=e;const[a,r]=i.useState((()=>({sharedPages:new Set(n.filter((e=>t.includes(e.id))).map((e=>e.id))),privatePages:new Set(o.filter((e=>t.includes(e.id))).map((e=>e.id))),manuallySelectedPages:new Set(s.map((e=>{let{id:t}=e;return t})))})));return{selected:a,toggleSelection:(e,t)=>{r((n=>{const i=new Set(n[e]);return i.has(t)?i.delete(t):i.add(t),{...n,[e]:i}}))},setSelectedOfType:(e,t)=>{r((n=>({...n,[e]:t})))}}}({pageIdsAlreadySharedWithBot:t,allSharedPages:x,allPrivatePages:w,manuallySelectedPages:k});const ie=(0,i.useCallback)((e=>function(e,t){if(t.has(e.id))return e.id;const n=(0,B().g7)(e).find((e=>e.table===u().ev&&t.has(e.id)));return n?n.id:void 0}(e,new Set([...ee.sharedPages,...ee.privatePages,...ee.manuallySelectedPages]))),[ee.privatePages,ee.sharedPages,ee.manuallySelectedPages]),oe=(0,a().IS)((e=>({icon:{width:d().Ev.xl,height:d().Ev.xl,color:e.icon.secondary},header:{width:"70%"},menuList:{maxHeight:300,overflowY:"auto"},pageIconStyle:{fill:e.mediumIconColor},sectionsWrapper:{height:290},sectionsContainer:{maxHeight:380,borderRadius:8},pageSections:{overflowY:"scroll",maxHeight:230},pageSelectionHeader:{display:"flex",marginBottom:8,gap:10},footer:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:8,marginTop:20,paddingTop:20,borderTop:`1px solid ${e.regularDividerColor}`},button:{minWidth:120},sectionHeading:{padding:4,color:e.accentColors.gray[500],fontWeight:p().Wy.regular},pageSelectionContainer:{maxHeight:380,borderRadius:8,border:`1px solid ${e.stroke.secondary}`},searchInputContainer:{marginTop:20,marginBottom:20},footerButtons:{marginTop:20}})),[]),se=(0,r().P)(),ae=(0,s().K8)((()=>{const e=(0,z.jsx)("div",{style:oe.sectionHeading,children:(0,z.jsxs)(h().Y1,{direction:"horizontal",width:"hug",gap:8,align:"center",children:[(0,z.jsx)(g().sA,{...E.manuallySelectedPagesHeader,values:{count:ee.manuallySelectedPages.size}}),ee.manuallySelectedPages.size>0?(0,z.jsx)(f().p,{isBlue:!0,onClick:()=>{ne("manuallySelectedPages",new Set)},children:(0,z.jsx)(g().sA,{...E.removeAll})}):null]})});if(0===ee.manuallySelectedPages.size)return{title:e,key:"manuallySelectedPages",content:null,collapsible:!1};const t=Array.from(ee.manuallySelectedPages).map((e=>new(N().Bv)(Y,{table:u().ev,id:e,spaceId:R.id})));return{title:e,key:"manuallySelectedPages",content:(0,z.jsx)(h().Y1,{direction:"vertical",gap:12,children:t.sort(((e,t)=>(e.getRenderTitle({intl:$,userTimeZone:se})||"").localeCompare(t.getRenderTitle({intl:$,userTimeZone:se})||""))).map((e=>(0,z.jsxs)(h().Y1,{direction:"horizontal",width:"fill",gap:"auto",children:[(0,z.jsx)(_().y,{blockStore:e,styles:oe,includeBreadcrumb:!0}),(0,z.jsx)(f().p,{isBlue:!0,onClick:()=>te("manuallySelectedPages",e.id),children:$.formatMessage(E.removeButton)})]},e.id)))}),collapsible:!0}}),[oe,ee.manuallySelectedPages,Y,R.id,$,se,te,ne]),re=new Set((0,U().D)({teamPagesByTeam:n,sharedPageIds:[...ee.manuallySelectedPages,...ee.sharedPages,...ee.privatePages]})),le=ee.sharedPages.size===x.length||0!==ee.sharedPages.size&&"partial",ce=ee.privatePages.size===w.length||0!==ee.privatePages.size&&"partial",de=re.size===L.length||0!==re.size&&"partial",ue=[ae,H({key:"teamspaces",title:(0,z.jsx)("div",{style:oe.sectionHeading,children:(0,z.jsxs)(h().Y1,{direction:"horizontal",width:"hug",gap:8,align:"center",children:[L.length>0?(0,z.jsx)(y().A,{checked:de,size:14,checkSize:8,onClick:()=>{const e=new Set(ee.manuallySelectedPages);if(!1!==de)for(const t of Object.values(n).flat())e.has(t)&&e.delete(t);else for(const t of Object.values(n).flat())e.add(t);ne("manuallySelectedPages",e)}}):null,(0,z.jsx)(g().sA,{...E.teamspacesHeader,values:{count:L.length}})]})}),allItems:L.map((e=>{const t=re.has(e.id);return{key:e.id,action:()=>{},render:()=>(0,z.jsx)(K,{teamspaceStore:e,checkType:t,onToggle:()=>{const t=new Set(ee.manuallySelectedPages);if(re.has(e.id))for(const i of n[e.id])t.has(i)&&t.delete(i);else for(const i of n[e.id])t.add(i);ne("manuallySelectedPages",t)},pageCount:n[e.id].length})}})),styles:oe}),H({key:"sharedPages",title:(0,z.jsx)("div",{style:oe.sectionHeading,children:(0,z.jsxs)(h().Y1,{direction:"horizontal",width:"hug",gap:8,align:"center",children:[x.length>0?(0,z.jsx)(y().A,{checked:le,size:14,checkSize:8,onClick:()=>{ne("sharedPages",!1!==le?new Set:new Set(x.map((e=>e.id))))}}):null,(0,z.jsx)(g().sA,{...E.sharedPagesHeader,values:{count:x.length}})]})}),allItems:x.map((e=>({key:e.id,action:()=>te("sharedPages",e.id),render:()=>(0,z.jsx)(W,{pageStore:e,isSelected:ee.sharedPages.has(e.id),onToggle:()=>te("sharedPages",e.id),styles:oe})}))),styles:oe}),H({key:"privatePages",title:(0,z.jsx)("div",{style:oe.sectionHeading,children:(0,z.jsxs)(h().Y1,{direction:"horizontal",width:"hug",gap:8,align:"center",children:[w.length>0?(0,z.jsx)(y().A,{checked:ce,size:14,checkSize:8,onClick:()=>{ne("privatePages",!1!==ce?new Set:new Set(w.map((e=>e.id))))}}):null,(0,z.jsx)(g().sA,{...E.privatePagesHeader,values:{count:w.length}})]})}),allItems:w.map((e=>({key:e.id,action:()=>te("privatePages",e.id),render:()=>(0,z.jsx)(W,{pageStore:e,isSelected:ee.privatePages.has(e.id),onToggle:()=>te("privatePages",e.id),styles:oe})}))),styles:oe})];return(0,z.jsxs)(h().Y1,{padding:24,children:[(0,z.jsx)(P().rQ,{icon:(0,c().pageIcon)(oe.icon),title:$.formatMessage(E.modalHeader),byline:$.formatMessage(E.byline),bylineWidthOverride:"80%"}),(0,z.jsx)("div",{style:oe.searchInputContainer,children:(0,z.jsx)(I().Ay,{trapFocus:!1,origin:(0,z.jsx)(S().Ay,{focus:!0,focusAfterAnimation:!0,value:V||"",onChange:e=>{X(e.target.value)},placeholder:$.formatMessage(E.searchPlaceholder),inputLeft:(0,z.jsx)(A().I,{icon:l().J,color:"secondary"})}),sameWidthAsOrigin:!0,popupType:T().n.Popup,open:""!==V,render:()=>(0,z.jsx)(M().f,{spaceId:R.id,spaceStore:R,onSelectPage:e=>{te("manuallySelectedPages",e)},query:V||"",source:"internal_integrations_page_picker",findSelectedBlockAncestorId:ie}),onDismiss:()=>X("")})}),(0,z.jsxs)("div",{style:oe.sectionsWrapper,children:[(0,z.jsx)("div",{style:oe.pageSelectionHeader,children:(0,z.jsx)(b().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,z.jsx)(g().sA,{...E.selectPagesLabel})})}),(0,z.jsx)("div",{style:oe.pageSelectionContainer,children:(0,z.jsx)("div",{style:oe.sectionsContainer,children:(0,z.jsx)("div",{style:oe.pageSections,children:(0,z.jsx)(v().b,{sections:ue})})})}),(0,z.jsxs)("div",{style:oe.footer,children:[(0,z.jsx)(j().A,{size:"lg",style:oe.button,onClick:D,disabled:J,children:$.formatMessage(E.cancelButton)}),(0,z.jsx)(C().A,{size:"lg",style:oe.button,onClick:async()=>await(async()=>{Z(!0);const e=[...ee.sharedPages,...ee.privatePages,...ee.manuallySelectedPages],n=[];for(const i of[...e,...t])t.includes(i)&&!e.includes(i)?(Q.setState({...Q.state,[i]:!1}),n.push({pageId:i,operationType:"remove"})):!t.includes(i)&&e.includes(i)&&(Q.setState({...Q.state,[i]:!0}),n.push({pageId:i,operationType:"add"}));await m().iN({environment:Y,spaceStore:R,botStore:O,pageIdAndOperations:n,concurrency:20}),q&&await q(),Z(!1),D()})(),isLoading:J,disabled:J,children:$.formatMessage(E.saveButton)})]})]})]})}function q(e){let{isOpen:t,...n}=e;return(0,z.jsx)(w().s,{areaConstraint:{width:{type:"fixed",length:600},height:{type:"min",length:600}},isOpen:t,onClosed:n.onClose,render:()=>(0,z.jsx)(F,{...n})})}},781661:(e,t,n)=>{n.d(t,{A:()=>o});class i extends(()=>n(129044))().default{getInitialState(){return{open:!1}}}const o=new i},824646:(e,t,n)=>{n.d(t,{A:()=>C});n(362833),n(725707),n(107652),n(491955),n(500234),n(403517),n(244387),n(113085);var i=n(242343),o=()=>n(803290),s=()=>n(174114),a=()=>n(129044),r=()=>n(446588),l=()=>n(145017),c=()=>n(653998),d=()=>n(220413),u=()=>n(378219),g=()=>n(535906),p=()=>n(559637),m=()=>n(28210),h=()=>n(24071),f=n(163643);const y={display:"flex",alignItems:"center"};const v=function(e){const{nestingLevel:t,isChecked:i,onClick:o,store:s,isMobile:a}=e;return(0,f.jsx)(g().A,{...e,title:(0,f.jsx)(h().A,{childrenStyle:y,left:(0,f.jsx)(S,{isChecked:i,onClick:o}),icon:(0,f.jsx)(x,{store:s,isMobile:a}),style:{marginLeft:8*t},children:(0,f.jsx)(n(709237).A,{store:s})})})};function S(e){let{isChecked:t,onClick:n}=e;return(0,f.jsx)(p().A,{size:16,checked:t,onClick:n})}function x(e){let{store:t,isMobile:n}=e;const i=(0,s().DP)(),a=(0,o().K8)((()=>t.getIcon()),[t]),r=(0,o().K8)((()=>t.isEmptyPage()),[t]);return(0,f.jsx)(m().B,{disabled:!0,icon:a,title:void 0,isEmptyPage:r,size:n?24:20,pageIconStyle:{fill:i.mediumIconColor}})}var A=()=>n(858023),b=()=>n(88271);const j=a().default.createClass({},{name:"SelectedBlockIdsStore"}),I=a().default.createClass({open:!1,query:void 0},{name:"SearchStore"});const C=function(e){let{selectedBlockIdsStore:t}=e;const a=(0,c().tz)(),r=(0,s().DP)(),g=(0,n(237385).v3)(),p=(0,n(863969).O)(),m=g.currentUser.id;(0,i.useEffect)((()=>{p&&m&&(n(737682).Z({environment:g,spaceId:p,userId:m}),n(723).J({environment:g,spaceId:p,userId:m}))}),[g,p,m]);const y=(0,o().uB)(void 0,I),v=(0,o().uB)(t,j),S=(0,i.useCallback)((()=>function(e){const t=e.state;e.setState({...t,open:!1,query:void 0})}(y)),[y]),x=(0,i.useCallback)((e=>function(e,t){const n=t.state[e.id];if(n)return e.id;const i=u().E(e),o=i.find((e=>e.table===l().ev&&Boolean(t.state[e.id])));if(o)return o.id}(e,v)),[v]),C=(0,o().O$)((0,n(782422).rp)(g)),{allSharedPagesStores:k=[],showWorkspaceSection:B=!1,showTeamSection:N=!1,showSharedSection:_=!1,showPrivateSection:D=!1,showOnlyPrivateSection:L=!1}=C??{},{currentSpaceViewStore:O,currentSpaceStore:z}=(0,o().K8)((()=>{const{currentSpaceViewStore:e,currentSpaceStore:t}=n(485966).default.state;return{currentSpaceViewStore:e,currentSpaceStore:t}}),[]),W=(0,o().O$)(v),R=(0,o().K8)((()=>{const e=(null==O?void 0:O.getTeamsStores())??[];return N?e.map((e=>[e,e.getTeamPagesStores().filter((e=>e.isLoadedNonCopyIndicator()))])):[]}),[N,O]),K=(0,o().K8)((()=>{var e;return(null==O||null===(e=O.getWorkspacePages())||void 0===e?void 0:e.filter((e=>e.isLoadedNonCopyIndicator())))??[]}),[O]),U=(0,o().K8)((()=>{var e;return(null==O||null===(e=O.getPrivatePages(g))||void 0===e?void 0:e.filter((e=>e.isLoadedNonCopyIndicator())))??[]}),[O,g]),E=Object.keys(W).filter((e=>W[e])).map((e=>new(n(413871).Bv)(g,{table:l().ev,id:e}))),H=(0,o().K8)((()=>E.filter((e=>e.getSpaceId()===(null==z?void 0:z.id)&&e.isNavigableBlock()&&!e.isTopLevelPrivatePage()&&!e.isTopLevelWorkspacePage(z.id)&&!(e.getParentTable()===n(218357).yK)&&!(null!=k&&k.some((t=>t.id===e.id)))))),[E,z,k]),G=(0,o().K8)((()=>z?(0,n(548694).GK)(g,z):void 0),[z,g]),{open:F,query:q}=(0,o().K8)((()=>{const{open:e,query:t}=y.state;return{open:e,query:t}}),[y]),$=(0,o().K8)((()=>function(e){let{environment:t,theme:n,intl:i,subpages:o,selectedBlockIdsStore:s,showWorkspaceSection:a,workspacePages:r,showTeamSection:l,teamPagesByTeam:d,showSharedSection:u,allSharedPagesStores:g,showPrivateSection:p,showOnlyPrivateSection:m,spaceName:y,privatePages:v}=e;const S=[];o.length>0&&S.push({key:"manual",render:e=>(0,f.jsx)(b().A,{...e,title:(0,f.jsx)(h().A,{style:w(),children:(0,f.jsx)(c().sA,{id:"oauthAuthorizationPage.selectPagesStep.pagePicker.manuallyAddedPagesSection.title",defaultMessage:"Manually added"})})}),items:o.map((e=>P(e,0,t,s)))});a&&S.push(T("workspace",i.formatMessage({id:"oauthAuthorizationPage.selectPagesStep.pagePicker.workspaceSection.title",defaultMessage:"Workspace"}),r,t,n,s));if(l)for(const[c,h]of d){const e=c.id,i=c.getName();e&&void 0!==i&&S.push(T(`team-${e}`,i,h,t,n,s))}u&&S.push(T("shared",i.formatMessage({id:"oauthAuthorizationPage.selectPagesStep.pagePicker.sharedSection.title",defaultMessage:"Shared"}),g,t,n,s));if(p){const e=m?y||"":i.formatMessage({id:"oauthAuthorizationPage.selectPagesStep.pagePicker.privateSection.title",defaultMessage:"Private"});S.push(T("private",e,v,t,n,s))}return S}({environment:g,theme:r,intl:a,subpages:H,selectedBlockIdsStore:v,showWorkspaceSection:B,workspacePages:K,showTeamSection:N,teamPagesByTeam:R,showSharedSection:_,allSharedPagesStores:k,showPrivateSection:D,showOnlyPrivateSection:L,spaceName:G,privatePages:U})),[g,r,a,H,v,B,K,N,R,_,k,D,L,G,U]);if(!C)return(0,f.jsx)(n(966789).A,{style:{alignSelf:"center"}});if(!O||!z)return null;const Y={width:14,height:14,marginLeft:8,marginRight:8,flexGrow:0,flexShrink:0,fill:d().Ay.mediumIconColor};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n(443252).Ay,{origin:(0,f.jsx)(n(401382).Ay,{style:{marginBottom:8},itemMarginLeft:0,itemMarginRight:0,focus:!0,focusAfterAnimation:!0,value:q||"",onChange:e=>{!function(e,t){const n=t.state,i=e.length>0;t.setState({...n,query:e,open:i})}(e.target.value,y)},placeholder:a.formatMessage({id:"oauthAuthorizationPage.selectPagesStep.pagePicker.search.placeholder",defaultMessage:"Search for pages in {workspaceName}"},{workspaceName:G}),inputLeft:(0,n(668657).q)(Y)}),sameWidthAsOrigin:!0,popupType:n(466321).n.Popup,open:F,render:()=>(0,f.jsx)(n(369160).f,{spaceId:z.id,spaceStore:z,onSelectPage:e=>M(e,!1,v),query:q||"",source:"oauth",findSelectedBlockAncestorId:x}),onDismiss:S}),(0,f.jsx)("div",{style:{alignItems:"left",width:"100%",height:380,borderWidth:1,borderStyle:"solid",borderColor:d().Ay.contentBorder,borderRadius:6,overflowY:"auto"},children:(0,f.jsx)(A().Ay,{type:A().Oh.Vertical,sections:$,initialFocus:void 0})})]})};function w(){return{textTransform:"uppercase",fontSize:12,fontWeight:600,color:d().Ay.mediumTextColor,padding:"2px 0"}}function k(e){return{key:"empty",action:()=>{},render:t=>(0,f.jsx)(g().A,{...t,title:(0,f.jsx)(h().A,{style:{fontSize:14,color:e.text.secondary,padding:"2px 32px"},children:(0,f.jsx)(c().sA,{id:"oauthAuthorizationPage.selectPageStep.empty",defaultMessage:"No pages inside"})})})}}function M(e,t,n){n.setState({...n.state,[e]:!t})}function P(e,t,n,i){const{device:o}=n,s=Boolean(i.state[e.id]);return{key:e.id,action:()=>M(e.id,s,i),render:n=>(0,f.jsx)(v,{...n,isMobile:o.isMobile,store:e,isChecked:s,disabled:!1,nestingLevel:t})}}function B(e,t,n){const i=t.length>0&&t.every((e=>n.state[e.id]));return{key:e,action:()=>function(e,t){const n=e.every((e=>t.state[e.id]));t.setState({...t.state,...e.reduce(((e,t)=>(e[t.id]=!n,e)),{})})}(t,n),render:t=>(0,f.jsx)(g().A,{...t,title:(0,f.jsx)(h().A,{left:(0,f.jsx)(p().A,{onClick:t.onClick,checked:i,size:16}),style:w(),children:e})})}}function T(e,t,n,i,o,s){const a=n.filter((e=>r().Km(e.getRole()||"none")));return{key:e,render:e=>(0,f.jsx)(b().A,{...e}),items:[B(t,a,s),...0===a.length?[k(o)]:a.map((e=>P(e,1,i,s)))]}}},937999:(e,t,n)=>{n.d(t,{A:()=>T});n(725707),n(491955),n(403517);var i=n(242343),o=()=>n(237385),s=()=>n(803290),a=()=>n(174114),r=()=>n(226e3);const l=(0,n(680369).xh)("arrowDiagonalUpRight",{default:{loader:()=>n.e(66972).then(n.bind(n,740520))},small:{loader:()=>n.e(66972).then(n.bind(n,312430))},fill:{loader:()=>n.e(66972).then(n.bind(n,634468))},fillSmall:{loader:()=>n.e(66972).then(n.bind(n,916757))}},["arrow","up","right","direction","navigation"]);var c=()=>n(748267),d=()=>n(178063),u=()=>n(653998),g=()=>n(76394),p=()=>n(31448),m=()=>n(505381),h=()=>n(602690),f=()=>n(741329),y=()=>n(635510),v=()=>n(126451),S=()=>n(209684),x=()=>n(286270),A=()=>n(397791),b=()=>n(206799),j=()=>n(678523),I=()=>n(28210),C=()=>n(629457),w=n(163643);const k=2,M=1,P=3,B=36;function T(e){const{apps:t,numberOfConnectedApps:n,title:s,subtitle:a,numberOfDisplayRows:r}=e,l=(0,o().v3)(),[c,d]=(0,i.useState)(!1),p=(r||M)*P,h=t.filter((e=>!e.shouldHideInDiscover)),f=h.length>p&&!c,y=c?h:h.slice(0,p);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(C().A,{large:!0,divider:"none",children:[s,a]}),(0,w.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:16,overflow:"hidden"},children:y.map((e=>{var t;return e.onConnect&&(0,w.jsx)(N,{appName:e.appName,caption:e.caption,shouldShowNewBadge:e.shouldShowNewBadge,shouldShowUpsell:e.shouldShowUpsell,logo:e.logo,width:e.width,integrationTypes:null===(t=e.integrationTypes)||void 0===t?void 0:t.slice(0,k),isAIConnectorsUpsell:e.isAIConnectorsUpsell,onConnect:e.onConnect},e.id)})).filter((e=>(0,g().O9)(e)))}),f&&(0,w.jsx)(S().p,{style:{marginTop:10,gap:10,marginLeft:-8},isGray:!0,onClick:()=>{c||(d(!0),m().PR(l,{numberOfConnectedApps:n}))},children:(0,w.jsx)(u().sA,{id:"connectedAppsSettings.discoverNewAppSection.seeAll.label",defaultMessage:"See all"})})]})}function N(e){const{appName:t,caption:n,logo:i,shouldShowUpsell:o,integrationTypes:g,onConnect:m,width:S,isAIConnectorsUpsell:C}=e,k=(0,s().K8)((()=>(0,f().kB)()),[]),M=(0,a().IS)((e=>({card:{display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:8,border:`1px solid ${e.tableDividerColor}`,padding:12,height:"100%",overflow:"hidden",minWidth:120,gap:12,maxWidth:256},upsellCard:{backgroundColor:e.whiteButtonBackground},aiConnectorAssetWrapper:{display:"flex",gap:6,alignItems:"center",paddingTop:8,paddingBottom:12},connectedAppIcon:{width:S||B,height:B,padding:4,borderRadius:6},titleAndNewBadgeContainer:{alignItems:"center",display:"flex",marginLeft:2},title:{fontWeight:p().Wy.medium,fontSize:14,lineHeight:1.3,marginBottom:4},caption:{marginLeft:2,marginRight:2,fontWeight:p().Wy.regular,color:e.text.secondary,fontSize:12,maxHeight:72,overflow:"hidden",lineHeight:1.3},pillContainer:{marginTop:8,marginBottom:6,fontSize:12,color:e.text.tertiary,display:"flex",gap:4,fontWeight:500},lockedIcon:{color:e.mediumIconColor,width:16,height:16,marginLeft:6},logoTitleContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:8}})),[S]),P=(0,w.jsxs)("div",{style:M.aiConnectorAssetWrapper,children:[(0,w.jsx)(A().I,{icon:r().v}),(0,w.jsx)(A().I,{icon:d().plusIcon,size:"xxs",color:"secondary"}),(0,w.jsx)(h().hC,{connectors:k,maxBubbles:6,iconSize:14})]}),T=(0,w.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,w.jsx)(u().sA,{id:"adminConnectionsSettings.aiSettingsCard.actionButtonLabel",defaultMessage:"Manage in AI Settings"}),(0,w.jsx)(b().Q,{iconGroup:l,variantName:"default"})]}),N=(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{style:M.logoTitleContainer,children:[C&&k.length>0?P:"string"==typeof i?(0,w.jsx)("img",{src:i,style:M.connectedAppIcon}):(0,w.jsx)(I().B,{disabled:!0,icon:i,title:t,isEmptyPage:!1,size:B,isLarge:!0,useInvertedColors:!0,style:M.connectedAppIcon}),(0,w.jsxs)("div",{style:M.titleAndNewBadgeContainer,children:[(0,w.jsx)("div",{style:M.title,children:t}),o&&(0,c().g)(M.lockedIcon)]})]}),(0,w.jsx)("div",{style:M.caption,children:n}),(0,w.jsx)("div",{style:M.pillContainer,children:null==g?void 0:g.map((e=>e&&(0,w.jsx)(j().A,{children:y().de[e]},e)))})]});return o?(0,w.jsx)("div",{style:{...M.card,...M.upsellCard},children:N}):(0,w.jsxs)(v().A,{onClick:m,style:M.card,children:[N,(0,w.jsx)(x().E,{color:"uiBlue",onClick:m,children:C?T:(0,w.jsx)(u().sA,{id:"connectedAppSettingsDiscoverItem.connectButton.label",defaultMessage:"Connect"})})]})}},976087:(e,t,n)=>{n.d(t,{y:()=>g});n(242343);var i=()=>n(803290),o=()=>n(680369),s=()=>n(421338),a=()=>n(701270),r=()=>n(28210),l=()=>n(709237),c=()=>n(989372),d=n(163643);function u(e){let{blockStore:t}=e;return(0,i().K8)((()=>(0,c().a6)(t)),[t])?(0,d.jsx)(c().Ay,{store:t,showFullPathInTooltip:!0}):null}function g(e){let{blockStore:t,styles:n,includeBreadcrumb:c}=e;const{pageIcon:g,isEmptyPage:p}=(0,i().K8)((()=>({pageIcon:t.getIcon(),isEmptyPage:t.isEmptyPage()})),[t]);return(0,d.jsxs)(s().Y1,{direction:"horizontal",gap:8,width:"hug",children:[(0,d.jsx)(r().B,{disabled:!0,icon:g,title:void 0,size:o().Ev.default,pageIconStyle:null==n?void 0:n.pageIconStyle,isEmptyPage:p}),(0,d.jsxs)(s().Y1,{gap:"auto",align:"start",children:[(0,d.jsx)(a().D,{styleName:"UIRegular-14px/Medium",children:(0,d.jsx)(l().A,{store:t})}),Boolean(c)&&(0,d.jsx)(u,{blockStore:t})]})]})}},981985:(e,t,n)=>{n.d(t,{m:()=>o});n(242343);var i=n(163643);const o=(0,n(680369).wt)("integrationSecurity",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.996 16c.152 0 .37-.056.59-.16C13.407 13.481 15 12.242 15 9.38V3.421c0-.927-.38-1.263-1.205-1.59-.919-.36-4.03-1.408-4.931-1.696A3.17 3.17 0 0 0 7.996 0c-.278 0-.59.064-.86.136-.91.272-4.012 1.335-4.93 1.695C1.378 2.151 1 2.495 1 3.422V9.38c0 2.863 1.66 3.99 6.414 6.461.22.112.439.16.582.16Zm-.936-4.398c-.32 0-.573-.128-.817-.424L4.178 8.796a.86.86 0 0 1-.228-.568c0-.408.346-.744.775-.744.262 0 .464.096.683.352l1.627 1.96 3.481-5.294c.185-.272.421-.416.683-.416.421 0 .809.28.809.696 0 .184-.101.383-.22.56l-3.952 5.836a.915.915 0 0 1-.776.424Z"})})},996314:(e,t,n)=>{n.d(t,{b:()=>g});n(403517);var i=n(242343),o=()=>n(174114),s=()=>n(633427),a=()=>n(680369),r=()=>n(31448),l=()=>n(610271),c=()=>n(126451),d=()=>n(35462),u=n(163643);function g(e){const{sections:t}=e,n=(0,o().IS)((e=>({container:{display:"grid",gap:4},sectionButton:{background:e.accentColors.translucentGray[50],borderRadius:6},sectionButtonHovered:{background:e.accentColors.translucentGray[100]},sectionButtonPressed:{background:e.lightGrayButtonPressedBackground},sectionButtonLabel:{padding:"12px 13px",justifyContent:"space-between",display:"flex",alignItems:"center"},sectionTitle:{fontWeight:r().Wy.medium},sectionButtonIconArea:{alignItems:"center"},chevronIcon:{width:a().Ev.xs,height:a().Ev.xs,marginLeft:12,transition:"transform 200ms ease-out"},sectionContent:{padding:"12px 24px"}})),[]),[g,p]=i.useState({});return(0,u.jsx)("div",{style:n.container,children:t.map((e=>{if(e.hidden)return null;const t=Boolean(g[e.key]),i=!1!==e.collapsible;return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{children:i?(0,u.jsx)(c().A,{onClick:()=>p({...g,[e.key]:!t}),style:n.sectionButton,hoveredStyle:n.sectionButtonHovered,children:(0,u.jsxs)(l().Ye,{style:n.sectionButtonLabel,children:[(0,u.jsx)("div",{children:(0,u.jsx)(d().A,{style:n.sectionTitle,children:e.title})}),(0,u.jsxs)(l().Ye,{style:n.sectionButtonIconArea,children:[e.secondaryLabel&&(0,u.jsx)(d().A,{isSecondaryColor:!0,children:e.secondaryLabel}),(0,s().arrowChevronSingleDownIcon)({...n.chevronIcon,transform:`rotateZ(${t?180:0}deg)`})]})]})}):(0,u.jsx)("div",{style:n.sectionButton,children:(0,u.jsxs)(l().Ye,{style:n.sectionButtonLabel,children:[(0,u.jsx)("div",{children:(0,u.jsx)(d().A,{style:n.sectionTitle,children:e.title})}),e.secondaryLabel&&(0,u.jsx)(d().A,{isSecondaryColor:!0,children:e.secondaryLabel})]})})}),t&&e.content&&(0,u.jsx)("div",{style:e.sectionContentStyleOverride?e.sectionContentStyleOverride:n.sectionContent,children:e.content})]},e.key)}))})}}}]);