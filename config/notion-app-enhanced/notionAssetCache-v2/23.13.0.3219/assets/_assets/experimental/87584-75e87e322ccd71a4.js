"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[87584],{649074:(e,n,t)=>{t.d(n,{DS:()=>r,Fe:()=>u,GB:()=>l,Gf:()=>d,V_:()=>c,j1:()=>s,j8:()=>a,yp:()=>p,yw:()=>o});var i=()=>t(647242);function r(e){return(0,i().Fq)({subscription:e})}function a(e){return(0,i().Ry)({subscription:e,trial:void 0})}function l(e){let{subscriptionState:n,logFunction:t,spaceId:r}=e;const a=g(n);return(0,i().yB)({billingData:{subscription:a,trial:void 0},logFunction:t,spaceId:r})}function o(e){return(0,i().q8)({subscription:e})}function s(e){return(0,i().V9)({subscription:g(e),trial:void 0})}function u(e){return(0,i().d$)({subscription:g(e),trial:void 0})}function c(e){return(0,i().ji)({subscription:g(e),trial:void 0})}function d(e){return(0,i().AI)({subscription:g(e),trial:void 0})}function p(e,n){return(0,i().KH)({subscription:g(e),trial:void 0},n)}function g(e){return e?{...e,trialEnd:void 0}:void 0}},669199:(e,n,t)=>{t.d(n,{D_:()=>I,Ft:()=>A,HN:()=>M,MA:()=>v,Sk:()=>P,Yn:()=>w,e9:()=>m,eJ:()=>k,su:()=>y});t(362833),t(725707),t(500234),t(113085);var i=()=>t(532444),r=()=>t(647242),a=()=>t(649074),l=()=>t(455831),o=()=>t(653998),s=()=>t(477784),u=()=>t(670682);const c=(0,o().YK)({cancellationError:{id:"midtermSubscriptionHelpers.cancellationFailed",defaultMessage:"There was an error attempting to cancel your pending changes. Please try again."},unableToCancelError:{id:"midtermSubscriptionHelpers.unableToCancel",defaultMessage:"We cannot cancel your scheduled changes right now. Please contact support for more help."},cancellationSuccess:{id:"midtermSubscriptionHelpers.cancellationSucceeded",defaultMessage:"Pending changes have been canceled"},invalidSubscriptionId:{id:"midtermSubscriptionHelpers.invalidSubscriptionId",defaultMessage:"Unable to cancel your pending changes. Something was wrong with your pending subscription changes."}});function d(e){return(0,l().dL)(e)?"free":(0,l().wb)(e)?"education":(0,l().sP)(e)?"singlePlayerPlus":(0,l().$P)(e)?"plus":(0,l().tL)(e)?"business":(0,l().OX)(e)?"enterprise":"legacy"}const p=(0,o().YK)({freePlan:{defaultMessage:"Free Plan",id:"freePlan.title"},educationPlusPlan:{defaultMessage:"Education Plus Plan",id:"educationPlusPlan.title"},plusPlan:{defaultMessage:"Plus Plan",id:"plusPlan.title"},businessPlan:{id:"businessPlan.title",defaultMessage:"Business Plan"},enterprisePlan:{defaultMessage:"Enterprise Plan",id:"enterprisePlan.label"},legacyPlan:{defaultMessage:"Legacy Plan",id:"legacyPlan.label"}}),g={free:{planTitle:p.freePlan},singlePlayerPlus:{planTitle:p.plusPlan},education:{planTitle:p.educationPlusPlan},plus:{planTitle:p.plusPlan},business:{planTitle:p.businessPlan},enterprise:{planTitle:p.enterprisePlan},legacy:{planTitle:p.legacyPlan}},f=(0,o().YK)({notionAI:{defaultMessage:"Notion AI",id:"notionAI.title"},removeAI:{defaultMessage:"Remove AI",id:"notionAI.remove.title"}}),b=(0,o().YK)({month:{defaultMessage:"Monthly billing",id:"billingInterval.monthly"},year:{defaultMessage:"Annual billing",id:"billingInterval.annual"}});function m(){return s().A.formatMessage(c.unableToCancelError)}function v(){return s().A.formatMessage(c.cancellationSuccess)}function h(e){var n;const t=null==e||null===(n=e.subscription)||void 0===n?void 0:n.pending;if(!t)return;const i=(0,r().PP)(e),l=(0,r().lQ)(e);return{oldTier:(0,a().Gf)(i)??"free",newTier:(0,a().Gf)(l)??"free",oldAIAddOn:(0,a().V_)(i).find((e=>"ai"===e)),newAIAddOn:(0,a().V_)(l).find((e=>"ai"===e)),oldInterval:(0,a().yw)(i),newInterval:(0,a().yw)(l),phaseOneEndDate:t.startDate}}function P(e){const n=h(e);return!(!n||!n.newInterval)&&n.oldInterval!==n.newInterval}function M(e){const n=h(e);return!!n&&n.oldTier!==n.newTier}function y(e){const n=h(e),t=[];if(!n)return{scheduledChanges:t,periodEndDate:null};const{newTier:i,oldTier:r,oldAIAddOn:a,newAIAddOn:l,oldInterval:o,newInterval:u,phaseOneEndDate:c}=n;var p,m;return r!==i&&t.push(function(e,n){const t=d(e),i=s().A.formatMessage(g[t].planTitle);if(!n)return"";const r=d(n);return`${i} → ${s().A.formatMessage(g[r].planTitle)}`}(r,i)),a!==l&&t.push((p=a,m=l,`${s().A.formatMessage(p?f.notionAI:f.removeAI)} → ${s().A.formatMessage(m?f.notionAI:f.removeAI)}`)),o!==u&&t.push(function(e,n){return e&&n?`${s().A.formatMessage("month"===e?b.month:b.year)} → ${s().A.formatMessage("month"===n?b.month:b.year)}`:""}(o,u)),{scheduledChanges:t,periodEndDate:c}}function A(e,n){if(!e)return;const t=(0,r().PP)(e).items,i=(0,r().lQ)(e).items;var a;return(0,r().HO)(t,i).some((e=>{let[t,i]=e;return(0,r().IE)(t??i)===n&&t&&!i}))?null===(a=e.subscription)||void 0===a||null===(a=a.pending)||void 0===a?void 0:a.startDate:void 0}function I(e){if(!e)return;var n;return 0===(0,r().lQ)(e).items.length?null===(n=e.subscription)||void 0===n||null===(n=n.pending)||void 0===n?void 0:n.startDate:void 0}function k(e){let{billingData:n}=e;const t=(0,u().a9)(n);if(!t)return!1;if((0,r().et)(n))return!1;const i=(0,r().bO)(t),a=(0,r().N8)(null==t?void 0:t.subscription);return!i&&!a}function w(e){const n=(0,r().V9)(e),t=(0,r().ji)(e).length>0;return!n||(!i().xd.includes(n)||!(!t||!i().iV.includes(n)))}},754907:(e,n,t)=>{t.r(n),t.d(n,{default:()=>S});t(242343);var i=()=>t(237385),r=()=>t(803290),a=()=>t(613313),l=()=>t(269280);const o=(0,t(680369).xh)("blockLimit",{default:{loader:()=>t.e(77704).then(t.bind(t,411107))},small:{loader:()=>t.e(46014).then(t.bind(t,656845))},mini:{loader:()=>t.e(69062).then(t.bind(t,728117))},large:{loader:()=>t.e(31414).then(t.bind(t,165637))}});var s=()=>t(653998),u=()=>t(421650),c=()=>t(759625),d=()=>t(84543),p=()=>t(772357),g=()=>t(863969),f=()=>t(167532),b=()=>t(485966),m=()=>t(943066),v=()=>t(669199),h=()=>t(111826),P=()=>t(898055),M=()=>t(305043),y=t(163643);const A=(0,s().YK)({overFreeBlockLimitLong:{id:"subscriptionActions.overFreeBlockLimit.longMessage",defaultMessage:"You are over the block limit for the Free plan"},overFreeBlockLimitMobileNative:{id:"subscriptionActions.overFreeBlockLimit.mobileNative",defaultMessage:"Your free blocks have been used up. Unfortunately, unlimited blocks cannot be purchased on mobile."},upgradeForUnlimited:{id:"subscriptionActions.upgradeForUnlimitedBlocks.longMessage",defaultMessage:"Upgrade for unlimited"},upgradePlan:{id:"subscriptionActions.upgradePlan",defaultMessage:"Upgrade plan"},gracePeriodMessage:{id:"subscriptionActions.gracePeriodMessage",defaultMessage:"You have {dayCount, plural, one {1 day} other {{dayCount} days}} left to upgrade"},overFreeBlockLimitShort:{id:"subscriptionActions.overFreeBlockLimitShort",defaultMessage:"You've used all of this workspace's free blocks"}});function I(){const{isMobileNative:e}=(0,i().Y0)(),n=(0,i().v3)(),t=(0,r().O$)(b().AppStoreCurrentSpaceStore),a=(0,r().O$)(M().subscriptionDataStoreInstance),o=(0,f().J)();return(0,l().l)((()=>{const e=null==t?void 0:t.pointer.spaceId;if(e&&o){var i;const r=null===(i=t.getSettings())||void 0===i?void 0:i.reach_block_limit_time;!r&&a&&h().V$(n,a,e)&&d().createAndCommit({userAction:"OverFreeBlockLimitBanner.initialMount",environment:n,canUndo:!0,perform:e=>{c().zv({store:t,data:{settings:{...t.getSettings(),reach_block_limit_time:Date.now()}},transaction:e})}}),u().ab(n,{reach_block_limit_time:r??Date.now(),eligible_for_trial:!1})}})),e?(0,y.jsx)(w,{}):(0,y.jsx)(k,{})}function k(){const e=(0,s().tz)(),n=(0,i().v3)(),t=(0,r().K8)((()=>(0,a().Km)(n)),[n]),l=(0,g().O)(),u=(0,P().l)({spaceId:l}),c=(0,r().K8)((()=>(0,v().eJ)({billingData:u})),[u]),d=(0,r().K8)((()=>function(e,n){if(!n)return e.formatMessage(A.overFreeBlockLimitLong);const t=(0,a().PK)();return t>0?e.formatMessage(A.gracePeriodMessage,{dayCount:t}):e.formatMessage(A.overFreeBlockLimitShort)}(e,t)),[t,e]),f=(0,r().K8)((()=>function(e){if(!e)return"red";return(0,a().PK)()>0?"yellow":"red"}(t)),[t]),b=[{label:t?e.formatMessage(A.upgradePlan):e.formatMessage(A.upgradeForUnlimited),onClick:()=>{m().K(n,{from:"block_limit_banner",upsell:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"}})}}];return(0,y.jsx)(p().l,{label:d,display:"full-width",tint:f,iconGroup:o,actions:c?b:[]})}function w(){const e=(0,s().tz)().formatMessage(A.overFreeBlockLimitMobileNative);return(0,y.jsx)(p().l,{label:e,display:"full-width",tint:"red"})}function S(){const e=(0,i().v3)();return(0,r().K8)((()=>(0,a().Km)(e)),[e])?(0,y.jsx)("div",{style:{position:"sticky",left:0,right:"100%",width:"100%"},children:(0,y.jsx)(I,{})}):(0,y.jsx)(I,{})}}}]);