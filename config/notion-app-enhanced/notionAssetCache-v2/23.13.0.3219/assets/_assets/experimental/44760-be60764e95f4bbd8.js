"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[44760],{433364:(e,t,i)=>{i.d(t,{KD:()=>d,gt:()=>c,i9:()=>s,ll:()=>a,tb:()=>l,x$:()=>n});var o=()=>i(612408),r=()=>i(975392);function n(e,t){return a(c(e,t))}function a(e){return void 0!==e&&(e===o().q_||e===o().YD)}function l(e,t){if(a(t))return;const i=o().c$[e],r=i.steps.findIndex((e=>e.id===t));return-1===r?i.steps[0].id:r===i.steps.length-1?o().q_:i.steps[r+1].id}function s(e,t){const i=c(e,t);if(i&&!a(i))return l(t,i)}function d(e,t){const i=c(e,t);if(i)return function(e,t){const i=o().c$[e];var n;if(a(t))return null===(n=(0,r().HV)(i.steps))||void 0===n?void 0:n.id;const l=i.steps.findIndex((e=>e.id===t));return-1!==l&&0!==l?i.steps[l-1].id:void 0}(t,i)}function c(e,t){var i;if(!e)return;const r=((null===(i=e.getSettings())||void 0===i?void 0:i.tutorials)||{})[t];return void 0===r?o().c$[t].steps[0].id:r}},497097:(e,t,i)=>{i.d(t,{Hc:()=>te,ph:()=>G,RD:()=>ee,Ay:()=>ie});var o=i(242343),r=()=>i(237385),n=()=>i(803290),a=()=>i(174114),l=()=>i(762847),s=()=>i(76394),d=()=>i(106144),c=()=>i(4822),p=()=>i(185866),u=()=>i(413871),g=()=>i(48913),m=(i(610931),()=>i(145017)),y=()=>i(653998),S=()=>i(31448),b=()=>i(945792),f=()=>i(783759),v=()=>i(283759),h=()=>i(931085),I=()=>i(709237),x=()=>i(103151),w=()=>i(35462),j=()=>i(24071),A=()=>i(29869),k=()=>i(136239),C=()=>i(378219),M=()=>i(904697),T=()=>i(289113),B=()=>i(271748),V=()=>i(907721),D=()=>i(485966),O=()=>i(759625),_=()=>i(84543),K=()=>i(28210),P=()=>i(520969),L=i(163643);function N(e){const{targetStore:t,canEditItem:i}=e,o=(0,y().tz)(),l=(0,r().v3)(),{isMobile:s}=l.device,d=(0,n().K8)((()=>t.getIcon()),[t]),c=(0,n().K8)((()=>!s&&i&&!t.isNonEditableState()&&!(0,P().Nh)(t.id)),[s,i,t]),p=(0,n().K8)((()=>{var e;return null===(e=t.getIconStore())||void 0===e?void 0:e.table}),[t]),u=(0,a().IS)((e=>({pageIcon:{fill:e.sidebarSecondaryColor}})),[]),g=e=>{const i=t.getIconStore();i&&_().createAndCommit({userAction:"OutlinerItem.handleRecordIconChange",environment:l,canUndo:!0,perform:t=>{O().KY({store:i,value:e,transaction:t})}})},m=(0,n().K8)((()=>{var e;return{recordTable:p,source:"sidebar",block_type:t.getType(),collection_id:"collection"===p?null===(e=t.getIconStore())||void 0===e?void 0:e.id:void 0}}),[p,t]);return(0,L.jsx)(x().A,{renderTooltip:()=>(0,L.jsx)(y().sA,{defaultMessage:"Change icon",id:"sidebarItem.changeIconButton.tooltip"}),placement:V().W.Bottom,render:e=>c?(0,L.jsx)(K().B,{bucket:"secure",disabled:!0,icon:d,store:t,title:void 0,isEmptyPage:t.isEmptyPage(),size:s?24:20,onChange:g,pageIconStyle:u.pageIcon,...e,largeIcon:!0,iconLoggingData:m,label:o.formatMessage({defaultMessage:"Change page icon",id:"sidebarItem.changeIconButton.buttonLabel"}),disableAnimation:!0}):(0,L.jsx)(K().B,{disabled:!0,icon:d,title:void 0,isEmptyPage:t.isEmptyPage(),size:s?24:20,pageIconStyle:u.pageIcon,largeIcon:!0,label:o.formatMessage({defaultMessage:"Page icon",id:"sidebarItem.changeIconButton.disabledLabel"}),disableAnimation:!0,iconLoggingData:m})})}var E=()=>i(579031);function F(e){const{store:t,from:i,type:o,itemIndex:n,itemDepth:l,isOpen:s,onToggle:d}=e,p=(0,r().v3)(),u=(0,a().IS)((e=>({toggle:{color:e.lightIconColor}})),[]);return(0,L.jsx)(E().A,{isSidebar:!0,fill:!0,icon:"chevron",open:s,color:u.toggle.color,onClick:()=>{const e=0===l,r=C().Uo(t);b().tD(p,{teamStore:r,type:e?"top_level":"nested",is_toggled:!s,outliner_type:o,outliner_position:n,outliner_depth:l,outliner_location:"main_sidebar"===i?"sidebar":"pane"}),d(),c().s4({store:t,toOpen:!s,environment:p,isTopLevelItem:e})},"aria-describedby":e["aria-describedby"],"aria-controls":e["aria-controls"]})}var R=()=>i(114430);const W=function(e){const{store:t,from:l,variant:s,style:d,targetStore:c,itemDepth:p,type:u,nestedOutlinerAriaId:m,titleAriaId:S,isOpen:v,itemIndex:I,onFocus:w,onBlur:A,onMouseMove:M,onMouseLeave:T,onNavigate:O,spaceViewStore:_}=e,K=(0,r().v3)(),P=K.device.isMobile,N=(0,n().K8)((()=>U({targetStore:c,type:u,from:l})),[l,c,u]),E=(0,o.useCallback)((()=>U({targetStore:c,type:u,from:l,openInSidePeek:!0})),[l,c,u]),{isCopyIndicator:F,shouldShowAsLoadingSpinner:R}=(0,g().v8)(t),W=(0,n().K8)((()=>{const{mainEditorCurrentBlockStore:e}=D().default.state;return e&&t.id===e.id}),[t]),H=(0,n().K8)((()=>(0,i(964968).W)(K,t.id)),[K,t]),z=(0,n().K8)((()=>{const e=t.getFormat();if("workflow_template_placeholder"===e.collection_view_sub_type&&e.placeholder_workflow_template_id&&t.isCollectionView())return{collectionTemplateId:e.placeholder_workflow_template_id,collectionViewBlockStore:t}}),[t]),Y=(0,n().K8)((()=>(0,k().sQ)({isMobile:P})),[P]),X=(0,g().ab)(),q=(0,a().IS)((e=>({sidebarItem:{...!P&&{paddingLeft:5},...W&&X.currentSelectedSidebarItem,...!P&&(0,k().Jg)(),...d,..."secondary"===s&&{padding:8,height:"unset"}},children:{display:"flex",alignItems:"center"},loadingSpinner:{marginLeft:6},moveOrDuplicateProgress:{flex:1,marginLeft:P?10:6,marginRight:P?12:void 0},link:{width:"100%"},sidebarItemHovered:{background:e.sidebarItemSelectedBackground},tooltipContainer:{maxWidth:280,width:"max-content"},tooltipMessage:{color:e.text.secondary}})),[P,W,X.currentSelectedSidebarItem,d,s]),Q=(0,o.useCallback)((e=>{if(H)return;O&&O(t);if(!(e.metaKey||e.ctrlKey)){("secondary_sidebar"===l?"peek"===B().default.state.mode&&B().default.isVisible():B().default.isVisible())&&i(610489).VI({environment:K,skipAnimation:!0})}const o=C().Uo(t);b().zg(K,{teamStore:o,type:0===p?"top_level":"nested",outliner_type:u,outliner_position:I,outliner_depth:p})}),[l,O,u,I,t,K,p,H]),J=(0,o.useCallback)((async e=>{if(_){const{currentSpaceStore:t}=D().default.state;if(!((null==t?void 0:t.id)===_.getSpaceId())){const t=await f().yV({environment:K,spaceViewStore:_});if(t.switchedUser)return e(t.newEnvironment)}}e()}),[K,_]),Z={role:"treeitem","aria-current":W?"page":void 0,"aria-expanded":!!v,"aria-owns":m,"aria-labelledby":S};if(F)return R?(0,L.jsxs)(j().A,{style:q.sidebarItem,childrenStyle:q.children,onFocus:w,onBlur:A,onMouseMove:M,onMouseLeave:T,children:[(0,L.jsx)(i(966789).A,{style:q.loadingSpinner}),(0,L.jsx)(i(992577).A,{targetRecordId:t.id,style:q.moveOrDuplicateProgress})]}):null;if(z)return(0,L.jsx)(i(126451).A,{onClick:async()=>{const{collectionTemplateId:e,collectionViewBlockStore:o}=z,{getCollectionTemplateFromId:r}=await i(439154).tA.load(),n=r(e);if(!n)throw new Error("Collection template not found");O&&O(t);const{onNavigateToPlaceholderWorkflowTemplateBlock:a}=await i(893007).O.load();a({environment:K,collectionTemplate:n,collectionViewBlockStore:o})},children:(0,L.jsx)($,{...e,onFocus:w,onBlur:A,sidebarItemStyle:q.sidebarItem,sidebarItemChildrenStyle:q.children,titleAriaId:S,nestedOutlinerAriaId:m,isWorkflowTemplatePlaceholder:!0,...Z})});const G=(0,L.jsxs)("div",{style:q.tooltipContainer,children:[(0,L.jsx)(y().sA,{id:"blockSidebarItem.offlineTooltip.title",defaultMessage:"Unavailable offline"}),(0,L.jsx)("div",{style:q.tooltipMessage,children:(0,L.jsx)(y().sA,{id:"blockSidebarItem.offlineTooltip.message",defaultMessage:"Return online to view or make the page available offline."})})]});return N?(0,L.jsx)(x().A,{disableTooltip:!H,placement:V().W.Right,textWrap:!0,renderTooltip:()=>G,render:t=>(0,L.jsx)(h().A,{altHref:E,disabled:H,disabledFeedback:H,onFocus:w,onBlur:A,style:q.link,href:H?void 0:N,onClick:Q,innerStyle:Y,hoveredStyle:q.sidebarItemHovered,preNavigationAction:J,...Z,...t,children:(0,L.jsx)($,{...e,sidebarItemStyle:q.sidebarItem,sidebarItemChildrenStyle:q.children,titleAriaId:S,nestedOutlinerAriaId:m,disableRightButtons:H})})}):(0,L.jsx)($,{...e,onFocus:w,onBlur:A,sidebarItemStyle:q.sidebarItem,sidebarItemChildrenStyle:q.children,titleAriaId:S,nestedOutlinerAriaId:m,...Z})};function $(e){const{store:t,variant:i,from:o,parentStore:s,targetStore:d,itemDepth:p,type:g,onFocus:y,onBlur:b,onMouseMove:f,onMouseLeave:h,onToggle:x,titleAriaId:A,nestedOutlinerAriaId:C,isOpen:B,isHovered:V,isFocused:D}=e,O=(0,n().K8)((()=>function(e){const{store:t,parentStore:i,isTopLevelItem:o,type:r}=e;if(t.isDefined()&&(0,v().sZ)(t))return!1;const n=(0,M().getActiveTeamCount)()>0;if(t.isCollectionView()&&!n)return 0===t.getAllSourceCollectionStores().length;if("block"===(null==i?void 0:i.table)){if(u().Bv.createChildStore(i,{table:m().ev,id:i.id,spaceId:t.getSpaceId()}).isType("collection_view_page"))return!1}if(t.isDefined()&&t.getType()===l().xd.alias)return!0;if(o&&"team"!==r)return!1;if(!i)return!1;if(t.isDefined())return t.getParentId()!==i.id;return!1}({store:t,parentStore:s,isTopLevelItem:0===p,type:g})),[t,s,p,g]),_=(0,r().Y0)().isMobile,K=(0,n().K8)((()=>{const e=t.getLastEditedTime();return(0,T().nl)(e,{useLowercase:!1,useCompactFormat:!0})}),[t]),P=V||D,E=(0,n().K8)((()=>{if((0,M().isHideEmptySidebarTogglesEnabled)()){const e=Boolean(null==d?void 0:d.isCollectionView()),i=c().Mr(t).length>0;return e||i}return!0}),[t,d]),W=P&&E,$=(0,a().IS)((t=>({iconContainer:{display:"grid"},toggle:{gridColumn:1,gridRow:1,zIndex:1,opacity:W?1:0,order:W?1:0,transition:`opacity ${k().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:W?0:1,transition:`opacity ${k().bM}`,order:W?0:1,..."secondary"===i&&{marginTop:-6}},rightIcons:{...!_&&{opacity:P?1:0,transition:`opacity ${k().bM}`}},childrenStyle:{...e.sidebarItemChildrenStyle,..."secondary"===i&&{display:"flex",flexDirection:"column",alignItems:"flex-start"}},title:{fontWeight:S().Wy.medium,..."secondary"===i&&{width:"100%"}},subtitle:{marginTop:2}})),[_,e.sidebarItemChildrenStyle,P,i,W]);return(0,L.jsxs)(j().A,{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:e.sidebarItemStyle,childrenStyle:$.childrenStyle,left:_?(0,L.jsx)(F,{store:t,from:o,type:g,itemIndex:e.itemIndex,itemDepth:p,"aria-controls":C,"aria-describedby":A,onToggle:x,isOpen:B}):void 0,icon:_?d&&(0,L.jsx)(N,{targetStore:d,canEditItem:e.canEditItem}):(0,L.jsxs)("div",{style:$.iconContainer,children:[E&&(0,L.jsx)("div",{style:$.toggle,children:(0,L.jsx)(F,{store:t,from:o,type:g,itemIndex:e.itemIndex,itemDepth:p,"aria-controls":C,"aria-describedby":A,onToggle:x,isOpen:B})}),(0,L.jsx)("div",{style:$.itemIcon,children:d&&(0,L.jsxs)(L.Fragment,{children:[e.isWorkflowTemplatePlaceholder&&(0,L.jsx)(H,{}),(0,L.jsx)(N,{targetStore:d,canEditItem:e.canEditItem})]})})]}),right:e.disableRightButtons?void 0:(0,L.jsx)("div",{style:$.rightIcons,children:(0,L.jsx)(R().Ay,{store:t,from:o,type:g,itemIndex:e.itemIndex,itemDepth:p,canEditItem:e.canEditItem,onToggle:x,isHovered:V,isFocused:D})}),onFocus:y,onBlur:b,onMouseMove:f,onMouseLeave:h,isAlias:O,children:[(0,L.jsx)(I().A,{id:A,store:t,style:$.title}),"secondary"===i&&(0,L.jsx)(w().A,{isSmall:!0,isSecondaryColor:!0,style:$.subtitle,children:K})]})}function H(){const e=(0,a().IS)((e=>({circle:{position:"absolute",background:e.blueColor,borderRadius:"50%",border:`1px solid ${e.surface.wash}`,width:8,height:8,left:14,zIndex:1}})),[]);return(0,L.jsx)("div",{style:e.circle})}function U(e){const{targetStore:t,type:i,from:o,openInSidePeek:r=!1}=e;if(!t)return;const n=(0,c().NX)({type:i,from:o}),a=r?{openInSidePeek:!0,peekMode:"s",peekViewBlockId:t.id}:{};if(t.isNavigableBlock())return(0,A().Ay)({...a,store:t,fullyQualified:!1,pageVisitSource:n});{const e=C().Nq(t);if(e)return(0,A().Ay)({...a,store:e,scrollToBlockId:t.id,fullyQualified:!1,pageVisitSource:n})}}i(403517);var z=()=>i(502852),Y=(i(725707),i(113085),()=>i(559181)),X=()=>i(881075);function q(e){const{store:t,collectionViewStore:i,onNavigate:l,type:s,from:d,spaceViewStore:m}=e,y=(0,r().v3)(),S=(0,n().K8)((()=>t.getCollectionViewStores().some((e=>"page"===e.getType()))),[t]),b=(0,n().K8)((()=>{if(S)return!1;const{mainEditorCurrentBlockStore:e,currentCollectionViewStore:o}=D().default.state;return Boolean(e&&t.id===e.id&&o&&o.id===i.id)}),[i.id,t.id,S]),v=(0,g().ab)(),I=(0,a().IS)((t=>({initialIcon:{fontSize:12,fontWeight:500,marginLeft:5,color:t.text.secondary},sidebarItem:{...b&&v.currentSelectedSidebarItem,...(0,k().Jg)(),...e.style},hoveredItem:{background:t.sidebarItemSelectedBackground},linkBox:{width:"100%"}})),[b,v.currentSelectedSidebarItem,e.style]),x=(0,n().K8)((()=>(0,A().Ay)({store:t,fullyQualified:!1,collectionViewId:i.id,pageVisitSource:(0,c().NX)({type:s,from:d})})),[i.id,d,t,s]),w=(0,n().K8)((()=>({ready:i.isReady(),type:i.getType(),pagePointer:i.getFormat().page_pointer,name:i.getName()})),[i]),C=(0,n().K8)((()=>{if("page"!==w.type||!w.pagePointer)return null;const e=u().Bv.createChildStore(t,{table:w.pagePointer.table,id:w.pagePointer.id});return{ready:(0,p().X)(e),outlinerItems:(0,c().yD)({rootStore:e})}}),[w,t]),M=(0,n().K8)((()=>t.getContentStore()),[t]),T=(0,o.useCallback)((()=>{l&&l(t)}),[t,l]),B=(0,n().K8)((()=>(0,k().sQ)({isMobile:y.device.isMobile})),[y]),V=(0,o.useCallback)((async e=>{if(m){const{currentSpaceStore:t}=D().default.state;if(!((null==t?void 0:t.id)===m.getSpaceId())){const t=await f().yV({environment:y,spaceViewStore:m});if(t.switchedUser)return e(t.newEnvironment)}}e()}),[y,m]);if(!w.ready)return null;if("page"===w.type&&C){const{ready:t,outlinerItems:i}=C;return(0,L.jsx)(X().A,{type:e.type,childStores:i,areChildrenLoading:!t,itemDepth:e.itemDepth+1,parentStore:M,itemStyle:I.sidebarItem,itemToggleStyle:e.itemToggleStyle,onNavigate:e.onNavigate,disabled:e.disabled,from:d,spaceViewStore:e.spaceViewStore})}return S?null:(0,L.jsx)(h().A,{href:x,style:I.linkBox,hoveredStyle:I.hoveredItem,innerStyle:B,preNavigationAction:V,onClick:T,role:"treeitem","aria-current":b?"step":void 0,children:(0,L.jsx)(j().A,{icon:(0,L.jsx)("div",{style:I.initialIcon,children:"•"}),style:I.sidebarItem,children:(0,L.jsx)(Y().A,{collectionViewName:w.name,collectionViewType:w.type??"table"})})})}function Q(e){const{store:t,from:i}=e,o=(0,n().K8)((()=>t.getCollectionViewStores()),[t]);return(0,L.jsx)("div",{role:"group",id:e.id,"aria-labelledby":e["aria-labelledby"],onContextMenu:e=>{e.preventDefault(),(0,z().SQ)({event:e,context:z().y$.EditorContextMenu,callback:()=>{}})},children:o.map((o=>(0,L.jsx)(q,{store:t,from:i,collectionViewStore:o,style:e.itemStyle,onNavigate:e.onNavigate,type:e.type,itemDepth:e.itemDepth,disabled:e.disabled,childStores:e.childStores,spaceViewStore:e.spaceViewStore},o.id)))})}function J(e){const{disabled:t,store:i,from:o,style:l,targetStore:s,itemDepth:d,nestedOutlinerAriaId:u,titleAriaId:g,onNavigate:m,type:y,toggleStyle:S,spaceViewStore:b}=e,{isMobile:f}=(0,r().Y0)(),v=(0,n().K8)((()=>!(0,p().X)(i)),[i]),h=(0,n().K8)((()=>s.isCollectionView()?s:null),[s]),I=(0,n().K8)((()=>(0,c().Mr)(i)),[i]),x=(0,n().K8)((()=>s.getContentStore()),[s]),w=(0,a().IS)((()=>{const e="number"==typeof(null==l?void 0:l.paddingLeft)?l.paddingLeft:f?G:5,t=f?ee:te;return{item:{...l,paddingLeft:e+t}}}),[l,f]);return h?(0,L.jsx)(Q,{store:h,from:o,itemStyle:w.item,onNavigate:m,type:y,childStores:I,areChildrenLoading:!1,itemDepth:d+1,parentStore:x,itemToggleStyle:e.toggleStyle,disabled:t,id:u,"aria-labelledby":g,spaceViewStore:b}):(0,L.jsx)(X().A,{from:o,type:y,childStores:I,areChildrenLoading:v,itemDepth:d+1,parentStore:x,itemStyle:w.item,itemToggleStyle:S,onNavigate:m,disabled:t,id:u,"aria-labelledby":g,spaceViewStore:b})}function Z(e){return`Outliner-${e.id}`}const G=6,ee=22,te=8,ie=function(e){const{store:t,itemIndex:c,parentStore:p,type:m,itemDepth:y,disabled:S,from:b,variant:f,spaceViewStore:v}=e,h=(0,r().v3)(),I=(0,i(556078).S)(),x=function(e){return 0===e}(y),[w,j]=(0,o.useState)((()=>{if((0,s().O9)(e.itemOpenByDefault))return e.itemOpenByDefault;if(x){const e=i(329911).K.get({userId:h.currentUser.id,key:Z(t)});if((0,s().O9)(e))return e}return!1})),[A,k]=(0,o.useState)(!1),[C,M]=(0,o.useState)(!1),T=(0,o.useId)(),B=(0,o.useId)(),V=(0,n().K8)((()=>function(e){if(e.getType()===l().xd.alias){const t=e.getAliasTargetStore();return t instanceof u().Bv?t:void 0}return e}(t)),[t]),D=(0,n().K8)((()=>g().UN(t)),[t]),O=0===c,_=(0,n().K8)((()=>!S&&(0,i(944498).p2L)({environment:h,blocks:[t],publicEditMode:I&&I.publicEditModeStore.state})),[S,I,h,t]),K=(0,n().K8)((()=>_&&!t.isLinkedCollectionView()),[t,_]),{isCopyIndicator:P,shouldShowAsLoadingSpinner:N}=(0,g().v8)(t),E=(0,o.useRef)(null);(0,i(158247).b)(i(237113).A,(()=>({store:t,parentStore:p,type:m,isTopLevelItem:x,getNode:()=>E.current})),[t,p,m,x]);const F=(0,o.useMemo)((()=>D&&p?{onInsertBelow:e=>d().o8({...e,environment:h,store:t,parentStore:p,before:!0,type:m}),onInsertAbove:e=>d().o8({...e,environment:h,store:t,parentStore:p,before:!1,type:m})}:{}),[D,h,p,t,m]),R=(0,o.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,i(152058).p)(t)&&M(!0)}),[]),$=(0,o.useCallback)((()=>{M(!1)}),[]),H=(0,o.useCallback)((()=>{i(330608).A.state.isDragging||k(!0)}),[]),U=(0,o.useCallback)((()=>{k(!1)}),[]),z=(0,o.useCallback)((e=>{j(void 0!==e?e:e=>!e)}),[]),Y=(0,a().IS)((()=>({selectableStyle:{display:"flex",flexDirection:"column",gap:1,paddingBottom:w&&"secondary"===f?8:0}})),[w,f]),X=(0,o.useCallback)((e=>{const o=t.getRecordStoreUIParent();null!=o&&o.valueIs(i(837694)._)&&d().Nr({...e,type:m,targetStore:t,targetParentStore:o,isTopLevelItem:x})}),[t,m,x]),{value:q}=(0,i(129978).fJ)(i(303298).VI.duplicateActions),Q=(0,o.useCallback)((async e=>{const{droppedDirection:i,droppedStores:o,duplicate:r}=e;p&&await d().Hu({environment:h,type:m,targetParentStore:p,targetStore:t,isTopLevelItem:x,droppedDirection:i,droppedStores:o,duplicate:r,isDroppingOnFullSection:!1,duplicateActions:q})}),[p,h,m,t,x,q]);return V?P&&!N?null:(0,L.jsxs)(i(367859).A,{analyticsName:"outliner_item",actionSectionGroupKey:"sidebar_outliner",contextMenuAndDragStores:[t],canDrag:D,canDropAbove:O,canDropBelow:D,canDropOnto:K,canInsertBelow:D,canInsertAbove:D,canSelect:D,canTriggerContextMenu:!0,onRemove:X,onSelectableDrop:Q,shouldShowDropZone:!0,showBlockMenuInput:!1,store:t,ref:E,style:Y.selectableStyle,...F,children:[(0,L.jsx)(W,{variant:f,from:b,store:t,style:e.style,parentStore:p,type:m,itemIndex:e.itemIndex,itemDepth:e.itemDepth,onNavigate:e.onNavigate,targetStore:V,canEditItem:_,nestedOutlinerAriaId:T,titleAriaId:B,onFocus:R,onBlur:$,onMouseMove:H,onMouseLeave:U,onToggle:z,isHovered:A,isFocused:C,isOpen:w,spaceViewStore:v}),w&&(0,L.jsx)(J,{disabled:S,store:t,from:b,style:e.style,targetStore:V,itemDepth:e.itemDepth,nestedOutlinerAriaId:T,titleAriaId:B,onNavigate:e.onNavigate,type:m,toggleStyle:e.toggleStyle,spaceViewStore:v})]}):null}},533666:(e,t,i)=>{i.d(t,{Y:()=>r});i(242343);const o={viewBox:"0 0 16 16",svg:(0,i(163643).jsx)("path",{d:"M3.2 6.725a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55"})},r=(0,i(680369).wt)("ellipsisSmall",o)},559181:(e,t,i)=>{i.d(t,{A:()=>n});i(242343);var o=()=>i(653998),r=i(163643);const n=function(e){let{collectionViewName:t,collectionViewType:n}=e;return t?(0,r.jsx)(i(826033).A,{children:t}):"page"===n?(0,r.jsx)(o().sA,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,r.jsx)(o().sA,{...i(91338).X[n]})}},612408:(e,t,i)=>{i.d(t,{YD:()=>n,c$:()=>o,q_:()=>r});const o={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},r="completed",n="dismissed"},778694:(e,t,i)=>{i.d(t,{c:()=>j,i:()=>w});var o=i(242343),r=()=>i(237385),n=()=>i(803290),a=()=>i(174114),l=()=>i(263873),s=()=>i(653998),d=()=>i(106144),c=()=>i(126451),p=()=>i(397791),u=()=>i(103151),g=()=>i(24071),m=()=>i(931371),y=()=>i(907721),S=()=>i(485966),b=()=>i(979537),f=()=>i(937968),v=()=>i(893007),h=()=>i(48913),I=()=>i(497097),x=i(163643);const w=2;function j(e){let{teamStore:t,numTeamPages:i,currentSpaceStore:j}=e;const A=(0,r().Y0)(),k=(0,r().v3)(),C=(0,n().K8)((()=>S().default.state.currentUserStore),[]),M=(0,n().K8)((()=>t.canAddOrRemoveTopLevelPages()),[t]),T=(0,n().K8)((()=>(0,f().EF)(k)),[k]),B=(0,n().K8)((()=>{if(!C)return!1;const e=(0,m().dp)(j,C.id).getModel();return t.canViewTopLevelPages(C.id,b()._.getSpacePermissionGroupIds({userId:C.id,spaceId:j.id}),e)}),[t,C,j]),V=i<=w,D=V&&M&&T;(0,o.useEffect)((()=>{D&&v().O.load()}),[D]);const O=(0,o.useCallback)((async()=>{const{currentSpaceStore:e,currentSpaceViewStore:i}=S().default.state;if(e&&i)if(A.isMobile)d().A5({environment:k,from:"sidebar_team_section_empty_state",spaceStore:e,spaceViewStore:i,teamStore:t,andNavigate:!0,appendOrPrepend:"append"});else{const{openTemplateOnboardingModal:e,getTemplateOnboardingVersion:i}=await v().O.load();e({origin:"sidebar_team_section_empty_state",parentStore:t,template:void 0,version:i({template:void 0})})}}),[k,t,A.isMobile]),_=(0,a().IS)((e=>({emptyPlaceholder:{color:e.text.tertiary,paddingLeft:29,...!A.isMobile&&{fontSize:14},...A.isMobile&&{display:"flex",alignItems:"center",height:32},display:"flex",alignItems:"center"},addPageButtonText:{color:e.sidebarSecondaryColor},addPageButton:{borderRadius:6,paddingLeft:A.isMobile?I().RD:I().Hc,height:h().Zr},addPageButtonHovered:{background:e.sidebarItemSelectedBackground},addPageIconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},tooltip:{width:"204px"}})),[A.isMobile]);return!V||!M&&i>0?null:M?(0,x.jsx)(u().A,{textWrap:!0,renderTooltip:()=>(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{children:(0,x.jsx)(s().sA,{defaultMessage:"You’ve used up your free blocks.",id:"teamOutliner.disabledTooltipUpper"})}),(0,x.jsx)("div",{children:(0,x.jsx)(s().sA,{defaultMessage:"Upgrade to add a new page.",id:"teamOutliner.disabledTooltipLower"})})]}),placement:y().W.Bottom,render:e=>(0,x.jsx)(c().A,{mobileFeedback:A.isMobile,onClick:O,style:_.addPageButton,hoveredStyle:_.addPageButtonHovered,disabled:!T,...e,children:(0,x.jsx)(g().A,{style:_.addPageButtonText,disableMobileBorder:!0,left:(0,x.jsx)("div",{style:_.addPageIconContainer,children:(0,x.jsx)(p().I,{icon:l().plusSmallIcon,size:"sm",color:A.isMobile?"tertiary":"secondary"})}),children:(0,x.jsx)(s().sA,{id:"teamOutlinerEmptyState.addNew",defaultMessage:"Add new"})})}),style:_.tooltip,disableTooltip:T}):(0,x.jsx)(g().A,{disableMobileBorder:!0,children:(0,x.jsx)("div",{style:_.emptyPlaceholder,children:(0,x.jsx)("span",{children:(()=>{if(C)return B?0===i?(0,x.jsx)(s().sA,{defaultMessage:"No pages inside",id:"teamOutliner.noOverflowEmptyMessage"}):void 0:(0,x.jsx)(s().sA,{defaultMessage:"No access",id:"teamOutliner.noOverflowEmptyMessage.noViewPermission"})})()})})})}},881075:(e,t,i)=>{i.d(t,{A:()=>w});i(725707),i(491955),i(403517);var o=i(242343),r=()=>i(237385),n=()=>i(803290),a=()=>i(174114),l=()=>i(688986),s=()=>i(653998),d=()=>i(730950),c=()=>i(106144),p=()=>i(229419),u=()=>i(24071),g=()=>i(983050),m=()=>i(4822),y=()=>i(485966),S=()=>i(893007),b=i(163643);const f=o.memo((e=>{const{disabled:t,childStores:a,areChildrenLoading:s,itemDepth:c,type:u}=e,f=(0,r().v3)(),w=(0,n().O$)(y().AppStoreMainEditorCurrentBlockStore),j=(0,n().K8)((()=>(0,i(433364).gt)(y().default.state.currentUserSettingsStore,"jira-sync-onboarding")),[]),A=f.device,k=(0,o.useRef)(),C=(0,o.useRef)(),M=(0,n().O$)(i(963768).Ay),T=(0,n().K8)((()=>{const e=(0,i(799220).Vk)();if(M.showOnboardingTour){let e=null,n=null;for(const o of a){if(o.isCollectionView()){const r=o.getCollectionStore();if((null==w?void 0:w.id)===o.id){var t;const a=null===(t=o.getCollectionStore())||void 0===t?void 0:t.getFormat();if("notion://projects_collection"===(null==a?void 0:a.app_config_uri)||"notion://tasks_collection"===(null==a?void 0:a.app_config_uri)){const t=(0,i(370639).Be)(r);e=t.projectCollectionPointer,n=t.taskCollectionPointer;break}}}}for(const t of a){if(t.isCollectionView()){var o,r;const i=t.getCollectionStore();if(i&&(null==i?void 0:i.id)===(null===(o=e)||void 0===o?void 0:o.id)){k.current=t.id;continue}if(i&&i.id===(null===(r=n)||void 0===r?void 0:r.id)){C.current=t.id;continue}}}}return(0,i(76394).O9)(e)?a.filter((t=>!e.includes(t.id))):a}),[a,null==w?void 0:w.id,M.showOnboardingTour]).map(((t,i)=>{const r=o.createRef();return M.showOnboardingTour&&k.current===t.id&&"all-projects-tooltip"===j?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{ref:r,style:{boxShadow:d().p.outlineBlueInputBoxShadow.light,borderRadius:6},children:(0,o.createElement)(I,{...e,key:t.id,store:t,index:i})}),(0,b.jsx)(p().jX,{origin:r})]},t.id):M.showOnboardingTour&&C.current===t.id&&"all-issues-tooltip"===j?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{ref:r,style:{boxShadow:d().p.outlineBlueInputBoxShadow.light,borderRadius:6},children:(0,o.createElement)(I,{...e,key:t.id,store:t,index:i})}),(0,b.jsx)(p().h9,{origin:r})]},t.id):(0,o.createElement)(I,{...e,key:t.id,store:t,index:i})})),B=(0,n().O$)(y().AppStoreCurrentSpaceViewStore),V=(0,n().K8)((()=>void 0!==B&&(0,m().XA)({spaceViewStore:B})),[B]),D=(0,n().K8)((()=>(0,i(904697).isHideEmptySidebarTogglesEnabled)()&&!A.isMobile),[A]),O=(0,n().K8)((()=>(0,i(937968).EF)(f)),[f]),_=0===c,K=0===(null==T?void 0:T.length),P=((null==T?void 0:T.length)<=i(778694).i||e.isHeaderless||A.isMobile)&&_&&("private"===u||"workspace"===u)&&!t,L=K&&!P&&!_&&!D,N={offline:g().lpW,bookmarks:g().X3W,workspace:g().rR7,shared:g().Bbz,private:g().$_L,team:g().zqk,[l().zt]:void 0,[l().AX]:void 0,[l().GU]:void 0,[l().st]:void 0,[l().yy]:void 0}[e.type],E=P&&O;return(0,o.useEffect)((()=>{E&&S().O.load()}),[E]),(0,b.jsxs)(i(46550).A,{id:e.id,"aria-labelledby":e["aria-labelledby"],role:_?"tree":"group",style:e.style,innerStyle:{display:"flex",flexDirection:"column",gap:1},className:N,loaded:!s,showSpinnerTimeout:3e3,spinnerSize:"relative",children:[(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:1},children:T}),K&&_&&!("private"===u&&V)&&(0,b.jsx)(x,{type:e.type,parentStore:e.parentStore}),P&&(0,b.jsx)(h,{type:e.type,from:"main_sidebar"}),L&&(0,b.jsx)(v,{itemStyle:e.itemStyle})]})}));function v(e){const{isMobile:t,isTablet:o}=(0,r().Y0)(),n=(0,a().IS)((e=>({placeholder:{color:e.text.tertiary,fontWeight:o?i(31448).Wy.regular:void 0,paddingLeft:16,...t&&{display:"flex",alignItems:"center",height:32,marginTop:o?"-8px":void 0}}})),[t,o]);return(0,b.jsx)(u().A,{role:"treeitem",style:e.itemStyle,children:(0,b.jsx)("div",{style:n.placeholder,children:(0,b.jsx)(s().sA,{defaultMessage:"No pages inside",id:"outliner.NoPagesInside.placeholder"})})})}function h(e){const{type:t,from:n}=e,l=(0,r().v3)(),d=(0,r().Y0)().isMobile,p=(0,a().IS)((e=>({sidebarItem:{color:e.sidebarSecondaryColor},hovered:{background:e.sidebarItemSelectedBackground}})),[]),g=(0,i(48913).ab)(),m=(0,o.useCallback)((async()=>{if("team"===t||!y().default.state.currentSpaceStore||!y().default.state.currentSpaceViewStore)return;if((0,i(527392).u)(l)){const{openTemplateOnboardingModal:e,getTemplateOnboardingVersion:t}=await S().O.load();return void e({origin:"sidebar_private_section_empty_state",parentStore:y().default.state.currentSpaceStore,template:void 0,version:t({template:void 0})})}await c().SE({environment:l,spaceStore:y().default.state.currentSpaceStore,spaceViewStore:y().default.state.currentSpaceViewStore,type:t,outlinerItemFrom:n,prepend:!1,shouldPersistToggleState:!0})&&d&&i(667801).close()}),[t,l,n,d]);return(0,b.jsx)(i(126451).A,{style:g.baseSidebarItem,hoveredStyle:p.hovered,mobileFeedback:d,onClick:m,children:(0,b.jsx)(u().A,{style:p.sidebarItem,left:(0,b.jsx)(i(397791).I,{icon:i(263873).plusSmallIcon,size:"sm",color:d?"tertiary":"secondary"}),disableMobileBorder:!0,children:(0,b.jsx)(s().sA,{defaultMessage:"Add new",id:"sidebar.addAWorkspaceOrPrivatePage.tooltip"})})})}f.displayName="Outliner";const I=o.memo((function(e){const{store:t,index:o}=e;return(0,b.jsx)(i(497097).Ay,{type:e.type,from:e.from,variant:"primary",store:t,style:e.itemStyle,toggleStyle:e.itemToggleStyle,itemIndex:o,itemDepth:e.itemDepth,itemOpenByDefault:e.itemOpenByDefault,parentStore:t.getRecordStoreUIParent(),onNavigate:e.onNavigate,disabled:e.disabled,spaceViewStore:e.spaceViewStore},t.id)})),x=o.memo((function(e){const t=(0,r().v3)(),{type:o,parentStore:n}=e,a=`OutlinerItem${o??""}${(null==n?void 0:n.id)??""}`,{value:l}=(0,i(129978).fJ)(i(303298).VI.duplicateActions);return(0,b.jsx)(i(473478).Tl,{dropTargetKey:a,canDropBelow:!0,onSelectableDrop:async e=>{await c().RM({dropArgs:e,environment:t,type:o,isDroppingOnFullSection:!1,parentStore:n,duplicateActions:l})},shouldShowDropZone:!0,canAcceptDrop:e=>{const{currentSpaceStore:i}=y().default.state;return!!i&&(0,m().ox)({environment:t,draggingStores:e.draggingStores,parentStore:n,currentSpaceStore:i})}})})),w=f}}]);