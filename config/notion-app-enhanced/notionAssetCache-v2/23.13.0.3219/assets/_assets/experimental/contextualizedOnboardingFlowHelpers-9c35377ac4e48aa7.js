"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[11126],{332305:(o,e,n)=>{n.r(e),n.d(e,{onboardingFlowNameToFlowConfig:()=>w});var t=n.n(n(485359)),a=()=>n(132793),i=()=>n(560320),r=()=>n(70989),l=()=>n(927685),s=()=>n(137476),d=()=>n(362621),_=()=>n(461201),b=()=>n(485966),g=()=>n(836331),c=()=>n(493065),p=()=>n(30299);var u=()=>n(652675),m=()=>n(672154);const w={education_flow:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","onboarding_workspace_choose","education_persona_survey","education_category_picker"],onStartFlow:()=>{},shouldShowFlowToUser:o=>!1},ai_onboarding_phase_2:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","app_builder","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","team_onboarding_function","team_onboarding_timed_trial_offer","team_onboarding_timed_trial_checkout"],onStartFlow:()=>{},shouldShowFlowToUser:o=>{const e=(0,d().R)(b().default.state.currentUserRootStore);void 0===e&&(0,s().u4)({environment:o,event:{eventName:"onboarding_undefined_space_view_count",eventProperties:{}}});const n=0===(e??0),t=o.device.isMobile;return n&&!t&&function(){const o=a().r9();return Boolean(o)}()&&"on"===g().default.getEligibleGroup({experimentId:"ai_first_onboarding_phase_two",defaultGroup:"control"})}},ai_onboarding_phase_2_5:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","onboarding_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","team_onboarding_function","team_onboarding_timed_trial_offer","team_onboarding_timed_trial_checkout","app_builder"],onStartFlow:()=>{},shouldShowFlowToUser:o=>{const e=(0,d().R)(b().default.state.currentUserRootStore);void 0===e&&(0,s().u4)({environment:o,event:{eventName:"onboarding_undefined_space_view_count",eventProperties:{}}});const t=0===(e??0),a=o.device.isMobile,i="en-US"===n(16791).locale;return t&&!a&&i&&("ai_step_in_onboarding"===g().default.getEligibleGroup({experimentId:"ai_first_onboarding_phase_two_point_five",defaultGroup:"control"})||"ai_step_in_onboarding_with_skip"===g().default.getEligibleGroup({experimentId:"ai_first_onboarding_phase_two_point_five",defaultGroup:"control"}))}},form_response_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile","onboarding_workspace_choose"],getMobileStages:()=>["mobile_profile","mobile_onboarding_workspace_choose"],onStartFlow:()=>{},onCompleteFlow:async(o,e,a)=>{t()("form_response_onboarding"===e.flowName);const{defaultOnboardingComplete:r}=await i().F.contextualizedOnboardingActions.load();await r(o,a),n(156973).V(e.formResponseId,e.secretKey,e.formSpaceId)},shouldShowFlowToUser:()=>0===(0,d().R)(b().default.state.currentUserRootStore)&&(0,n(785205).A)()},mail_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>[],getMobileStages:()=>[],onStartFlow:()=>{},onCompleteFlow:async(o,e,t)=>{const{setAndTrackContextualizedOnboardingComplete:s}=await i().F.contextualizedOnboardingActions.load(),{onboardingData:d,joinableSpaces:b}=e;if(!d)return;const{onboardingStateActions:g}=await n(58793).onboardingActionsDependency.load();if(r().m({message:g.messages.creatingWorkspace}),0===b.length&&d.canUserCreateSpace){const t=n(477784).A.getIntl(),a=d.userStore.getFullName(t),{spaceViewStore:i}=await n(783759).bz({environment:o,planType:"personal",planSelection:"personal",name:a?(0,_().JR)(a,t):(0,_().CD)(t),userRootStore:d.userRootStore,analyticsFrom:"onboarding",icon:void 0,userPersona:"unfilled"});n(13769).I$(o,i,!0),s({environment:o,onboardingState:e,userStore:d.userStore,spaceJoinOrCreate:"create",permissionLevel:"member"})}await c().transactionQueue.drain(),r().V();const p=(0,a().KB)({fileHostProtocol:l().A.secureFileConfig.protocol,fileHostName:l().A.secureFileConfig.hostname}),u=null==p?void 0:p.result,m=null==u?void 0:u.startsWith(`${l().A.mail.domainBaseUrl}/`);u&&m?n(865226).oo({environment:o,url:`${u}#activeUserID=${o.currentUser.id}`}):await(0,n(938051).Z)({environment:o,from:"contextualizedOnboarding",targetSelf:!0})},shouldShowFlowToUser:()=>"mail"===(0,a().dY)()},calendar_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile"],getMobileStages:()=>["mobile_profile"],onStartFlow:()=>{},onCompleteFlow:async(o,e,t)=>{await c().transactionQueue.drain(),await(0,n(313067).J7)({environment:o,url:`${l().A.domainBaseUrl}/calendarAuth/`,from:"contextualizedOnboarding",targetSelf:!0})},shouldShowFlowToUser:()=>0===(0,d().R)(b().default.state.currentUserRootStore)&&"calendar"===(0,a().dY)()},performance_marketing_term_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","onboarding_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","team_onboarding_invite"],onStartFlow:()=>{},onCompleteFlow:async(o,e,n)=>{const{defaultOnboardingComplete:t}=await i().F.contextualizedOnboardingActions.load();await t(o,n)},shouldShowFlowToUser:o=>!o.device.isMobile&&("gantt"===(0,p().TQ)()||"crm"===(0,p().TQ)()||"projectManagement"===(0,p().TQ)())},mobile_tutorial_onboarding:{isEnabledForDesktop:!1,isEnabledForMobile:!0,getMobileStages:o=>(0,u().getMobileTutorialStages)(o),onStartFlow:()=>{},onCompleteFlow:async(o,e,n)=>{var t,a;const r=e.onboardingData;if(!r)return;const{redirectAfterContextualizedOnboardingComplete:l}=await i().F.contextualizedOnboardingActions.load(),s=(0,_().sg)(r);await l({environment:o,spaceViewId:null===(t=b().default.state.currentSpaceViewStore)||void 0===t?void 0:t.id,spaceId:null===(a=b().default.state.currentSpaceStore)||void 0===a?void 0:a.id,onboardingData:r,spaceJoinOrCreate:"join",redirectData:s,onboardingFlow:e.flowName,onboardingState:e,permissionLevel:(0,_().S1)(s)})},shouldShowFlowToUser:(o,e)=>Boolean(e)},default:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile","onboarding_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","onboarding_category_survey",..."on"===f({experimentId:"onboarding_split_team_survey",disableExposureLogging:!0})?["team_onboarding_function","team_onboarding_role","team_onboarding_company_size"]:["team_onboarding_persona_survey"],"team_onboarding_use_cases","team_onboarding_workspace_create","team_onboarding_invite","team_onboarding_timed_trial_offer","team_onboarding_timed_trial_checkout"],getMobileStages:o=>[...["mobile_profile","mobile_onboarding_workspace_choose","mobile_onboarding_plan_type_choose","mobile_onboarding_collaborative_intent_choose",..."on"===f({experimentId:"onboarding_split_team_survey",disableExposureLogging:!0})?["mobile_team_onboarding_function","mobile_team_onboarding_role","mobile_team_onboarding_company_size"]:["mobile_team_onboarding_persona_survey"],"mobile_onboarding_category_survey","mobile_team_onboarding_use_cases","mobile_team_onboarding_workspace_create","mobile_team_onboarding_invite"],...(0,u().getMobileTutorialStages)(o)],onStartFlow:()=>{},shouldShowFlowToUser:(o,e)=>(void 0===(0,d().R)(b().default.state.currentUserRootStore)&&(0,s().u4)({environment:o,event:{eventName:"onboarding_undefined_space_view_count",eventProperties:{}}}),!e)},undefined:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>[],getMobileStages:()=>[],onStartFlow:()=>{},onCompleteFlow:async()=>{},shouldShowFlowToUser:()=>!1}};function f(o){const{experimentId:e,disableExposureLogging:n}=o,t=m().A.state.onboardingExperiments;if(null!=t&&t[e])return t[e];const a=g().default.getEligibleGroup({experimentId:e,defaultGroup:"control",disableExposureLogging:n});return m().A.setState({...m().A.state,onboardingExperiments:{...t,[e]:a}}),a}},362621:(o,e,n)=>{n.d(e,{R:()=>a});n(725707),n(491955),n(403517);var t=()=>n(975392);function a(o){return o&&o.isReady()?t().sb(o.getSpaceViewStores().filter((o=>o.getJoined())).map((o=>o.getSpaceId()))).length:void 0}},652675:(o,e,n)=>{n.r(e),n.d(e,{getContextualizedOnboardingFlowName:()=>r,getMobileTutorialStages:()=>l});var t=()=>n(443164),a=()=>n(307542),i=()=>n(332305);function r(o,e){for(const n of t().uL){if(i().onboardingFlowNameToFlowConfig[n].shouldShowFlowToUser(o,e))return n}return t().JT}function l(o){switch((0,a().DV)({environment:o})){case"v1":return["mobile_onboarding_home","mobile_onboarding_creation","mobile_onboarding_share","mobile_onboarding_multi_platform"];case"v2":return["mobile_onboarding_home","mobile_onboarding_creation","mobile_onboarding_share"];case"v3":return["mobile_onboarding_skill_mab","mobile_onboarding_skill_filing","mobile_onboarding_skill_swipe"];default:return["mobile_onboarding_editor","mobile_onboarding_sidebar","mobile_onboarding_desktop","mobile_onboarding_web_clipper","mobile_onboarding_app_download"]}}}}]);