"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[68455],{40642:(e,t,o)=>{o.d(t,{b:()=>i});o(242343);var n=o(163643);const i=(0,o(680369).wt)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},172694:(e,t,o)=>{o.d(t,{G:()=>r});o(242343);var n=o(163643);const i={viewBox:"0 0 16 16",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.204 1.93a3.47 3.47 0 0 0-4.097.39.625.625 0 1 0 .834.931 2.22 2.22 0 0 1 3.16.202.625.625 0 0 0 .944-.818 3.5 3.5 0 0 0-.84-.705m6.018.976A3.47 3.47 0 0 0 8.463 4.1l-5.077 8.476a.625.625 0 0 0 .437.938l4.41.715a.625.625 0 0 0 .2-1.234l-3.5-.568 4.602-7.685a2.22 2.22 0 0 1 3.822.02.625.625 0 1 0 1.08-.63 3.46 3.46 0 0 0-1.214-1.226m-7.83 2.105a1.094 1.094 0 1 0-.35 2.159 1.094 1.094 0 0 0 .35-2.159"}),(0,n.jsx)("path",{d:"M10.762 5.881a1.093 1.093 0 1 0-.35 2.159 1.093 1.093 0 0 0 .35-2.159"})]})},r=(0,o(680369).wt)("aiFaceSmall",i)},246545:(e,t,o)=>{o.d(t,{A$:()=>Pe,DZ:()=>rt,$S:()=>ot,xl:()=>Xe,HJ:()=>Fe,L7:()=>je,Re:()=>Oe,bj:()=>Ue,D1:()=>Le,b9:()=>Ge,f1:()=>ze,p1:()=>Be,Dm:()=>We,D9:()=>De,ds:()=>Ne});o(362833),o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601),o(725707),o(107652),o(491955),o(500234),o(324989),o(771702),o(403517),o(113085);var n=o(242343),i=()=>o(237385),r=()=>o(803290),a=()=>o(174114),l=()=>o(65866),s=()=>o(604657),c=()=>o(994966),p=()=>o(505966),d=()=>o(819851),u=()=>o(564134),m=()=>o(716605),g=()=>o(763711),y=()=>o(916963),f=()=>o(706788),S=()=>o(172694),h=()=>o(198654),b=()=>o(680369),v=()=>o(519423),w=()=>o(405317),T=()=>o(86280),x=()=>o(653998),_=()=>o(220413),A=()=>o(975392),I=()=>o(76394),C=()=>o(32901),k=()=>o(818369),P=()=>o(521325),M=()=>o(487454),j=()=>o(927999),N=()=>o(84543),D=()=>o(86452),O=()=>o(414997),R=()=>o(159809),E=()=>o(283759),K=()=>o(895721),B=()=>o(862185),F=()=>o(535906),W=()=>o(204435),L=()=>o(401382),G=()=>o(517198),U=()=>o(793613),z=()=>o(88271),$=()=>o(158918),V=()=>o(103151),H=()=>o(35462),q=()=>o(749975),Y=()=>o(137476),X=()=>o(654548),Z=()=>o(206183),J=()=>o(88442),Q=()=>o(945003),ee=()=>o(83544),te=()=>o(836331),oe=()=>o(773082),ne=()=>o(439146);const ie=[f().ob,f().Hd,f().e1,f().io,f().k0,f().zG];var re=()=>o(868325),ae=()=>o(477784),le=()=>o(906230),se=()=>o(471979),ce=()=>o(755989),pe=()=>o(622286),de=()=>o(167532),ue=()=>o(639659),me=()=>o(907721),ge=()=>o(485966),ye=()=>o(962373),fe=()=>o(802955),Se=()=>o(943066),he=()=>o(24281),be=()=>o(404042),ve=()=>o(362493),we=()=>o(194585),Te=()=>o(940445),xe=()=>o(727528),_e=()=>o(235786),Ae=()=>o(961716),Ie=()=>o(374886),Ce=()=>o(298770),ke=o(163643);const Pe=4,Me=10;function je(e){let{collectionContextStore:t,onAccept:o}=e;const n=(0,i().v3)(),l=(0,x().tz)(),s=(0,a().IS)((e=>({iconStyle:{fill:e.aiPurpleColor}})),[]),c=(0,r().K8)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getSchema()}),[t]),p=(0,r().K8)((()=>(0,J().QV)()),[]),d=!(0,r().O$)(fe().e),u=(0,r().K8)((()=>{if(d)return[];if(p){return it((0,Z().lO)({environment:n,collectionContextStore:t}),c)}return[]}),[t,c,n,p,d]);return(0,r().K8)((()=>Object.fromEntries(u.map((e=>[Z().dC[e.propertyType].toLowerCase(),Xe({collectionContextStore:t,propertyType:e.propertyType,propertyName:Z().dC[e.propertyType],disablePropertyTooltip:!0,intl:l,iconStyle:s.iconStyle,onAccept:o,isSuggestedProperty:!0,isOffline:d})])))),[t,l,o,s.iconStyle,u,d])}function Ne(e){let{collectionContextStore:t,propertySchema:o,disableSuggestions:c,hasAiEnabled:p,showAiSuggestions:d,getFilteredSuggestedItemKeys:u,onAccept:m,iconStyle:y,buttonStyle:f,onAfterAccept:S}=e;const h=(0,i().v3)(),b=(0,a().DP)(),w=(0,x().tz)(),T=(0,a().IS)((e=>({aiIconStyle:{fill:e.aiPurpleColor},defaultIconStyle:{fill:e.regularIconColor}})),[]),_=(0,r().K8)((()=>{var e;const o=null===(e=t.collectionStore())||void 0===e||null===(e=e.getFormat())||void 0===e?void 0:e.app_config_uri;return o?(0,E().lS)((0,O().appConfigs)(),o):void 0}),[t]);(0,_e().b)(t);const I=(0,Ae().Y)(t),C=(0,r().K8)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getSchema()}),[t]),P=(0,r().K8)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getFormat()}),[t]),M=function(e){let{collectionContextStore:t,showAiSuggestions:o}=e;const a=(0,i().v3)(),l=(0,r().K8)((()=>{var e;const o=null===(e=t.collectionStore())||void 0===e?void 0:e.getSchema();return o?A().oE(Object.values(o).map((e=>null==e?void 0:e.name.toLocaleLowerCase()))):[]}),[t]),s=(0,n.useCallback)((e=>e.filter((e=>!l.includes(e.name.toLocaleLowerCase())))),[l]),c=(0,r().K8)((()=>{const e=t.collectionStore(),o=null==e?void 0:e.getFormat();if(null!=o&&o.ai_suggested_properties&&(null==o?void 0:o.ai_suggested_properties.length)>0)return s(null==o?void 0:o.ai_suggested_properties)}),[t,s]),[p,d]=(0,n.useState)(c||"loading"),u=(0,n.useRef)(!1);return(0,n.useEffect)((()=>{if(u.current||c)return;(async()=>{const e=t.collectionStore(),o=null==e?void 0:e.getSpaceId(),n=null==e?void 0:e.id,i=[];if(o&&n&&e.getName()){const t=await k().callApi({eventName:"getAiSuggestedProperties",environment:a,data:{spaceId:null==e?void 0:e.getSpaceId(),collectionId:null==e?void 0:e.id,schema:A().oE(Object.values(e.getSchema())),collectionName:(0,X().r4)(e.getName(),e),numSuggestion:Me},headers:(0,v().WS)({spaceId:o})});if("success"===t.type){const o=t.data.properties.filter((e=>!l.includes(e.name.toLocaleLowerCase())));i.push(...o),N().createAndCommit({environment:a,perform:t=>{j().zA({stores:[e],update:{ai_suggested_properties:o},transaction:t})},canUndo:!0,userAction:"propertyType.generateAiSuggestion"})}}const r=s(i);d(r)})(),u.current=!0}),[t,a,p,o,c,l,s]),p}({collectionContextStore:t,showAiSuggestions:d}),D=(0,r().K8)((()=>(0,J().QV)()),[]),K=!(0,r().O$)(fe().e),B=(0,r().K8)((()=>{if(o||c||K)return[];const e=I.filter((e=>(0,Te().shouldShowInSuggestedProperties)(e)));if(_){const e=function(e){let{appConfig:t,collectionFormat:o,collectionSchema:n,hasAiEnabled:i}=e;if(!o||!n)return[];const r=e=>{const t=o.app_config_uri,r=g().u9.derivePropertyUris(n??{},o.app_uri_map);if(e.collectionUri!==t)return!1;let a=!0;e.uri===(0,R().Jb)().uri&&r.has(l().yx.GithubPrsRelation)&&(a=!1);return e.dependencies.some((e=>"property"===e.type&&e.collectionUri===t&&(0,s().LE)(e.uri)&&!r.has(e.uri)))&&(!e.isAi||i)&&a},a={};t.allFeatures.forEach((e=>{(0,E().$n)(e)&&e.variants.every((e=>Boolean(t.allFeatures.find((t=>t.uri===e&&(0,E().lK)(t)&&r(t))))))&&(a[e.uri]=e.variants)}));const c=Object.values(a).flat(),p=t.allFeatures.filter((e=>(0,E().lK)(e)&&!c.find((t=>t===e.uri))?r(e):!!(0,E().$n)(e)&&Boolean(a[e.uri])));return p.sort(((e,t)=>(0,E().$n)(e)?-1:(0,E().$n)(t)?1:e.dependencies.length-t.dependencies.length))}({appConfig:_,collectionFormat:P,collectionSchema:C,hasAiEnabled:p});return(D?e.filter((e=>"notion://tasks/task_summary_feature"!==e.uri)):e).map((e=>({type:"typed",appConfigFeature:e})))}if(e.length>0)return e.map((e=>({type:"workflow",template:e})));if(d)return"loading"===M?"loading":M.map((e=>({type:"ai_suggestion",propertySchema:e})));if(!D){return it((0,Z().lO)({environment:h,collectionContextStore:t}),C)}return[]}),[o,c,I,_,d,D,P,C,p,M,h,t,K]),F=(0,n.useMemo)((()=>{if("loading"===B)return[];const e=B.filter((e=>"workflow"===e.type)).map((e=>Ve(e.template.templateId)));return u(e).map(He)}),[B,u]);(0,Ie().O)({collectionContextStore:t,origin:"suggested_properties",shownTemplateIds:F});return(0,r().K8)((()=>"loading"===B?"loading":Object.fromEntries(B.map(((e,o)=>{switch(e.type){case"ai_suggestion":return[e.propertySchema.name.toLowerCase(),Xe({collectionContextStore:t,propertyType:e.propertySchema.type,propertyName:e.propertySchema.name,disablePropertyTooltip:!0,intl:w,onAccept:m,isSuggestedProperty:!0,iconStyle:y,isOffline:K,buttonStyle:f})];case"typed":return[e.appConfigFeature.name.toLowerCase(),Ye({appConfig:_,suggestedProperty:e.appConfigFeature,isDisabled:!1,environment:h,collectionContextStore:t,theme:b,iconStyle:y??T.defaultIconStyle,buttonStyle:f,onAfterAccept:S})];case"workflow":return[(0,Te().getWorkflowTemplateName)(e.template).toLowerCase(),qe({environment:h,template:e.template,collectionContextStore:t,iconStyle:y??T.defaultIconStyle,suggestedFeatureAnalytics:{origin:"suggested_properties",selectedIndex:F.indexOf(e.template.templateId),shownTemplateIds:F},buttonStyle:f,onAccept:S})];case"derived_ai_property":return[Z().dC[e.propertyType].toLowerCase(),Xe({collectionContextStore:t,propertyType:e.propertyType,propertyName:Z().dC[e.propertyType],disablePropertyTooltip:!0,intl:w,iconStyle:T.aiIconStyle,onAccept:m,isSuggestedProperty:!0,isOffline:K,buttonStyle:f})]}})))),[_,t,h,w,B,b,m,F,y,T,K,f,S])}function De(e){const{hasMoreSuggestions:t,filteredSuggestedPropertyItems:o,showAiSuggestions:i,setIsShowingMoreSuggestions:r,hasSearchInput:l,disableSuggestions:s,isLoading:c,title:p,desktopTitleStyle:d,desktopStyle:u}=e,m=(0,pe().X)("db_ux_properties"),g=(0,a().IS)((e=>({loadingShimmer:{height:10,borderRadius:4,margin:"12px 14px",backgroundColor:e.lightDividerColor},loadingText:{color:e.text.secondary},moreSuggestionsButtonContainer:{display:"flex",alignItems:"center",lineHeight:1.2,color:e.text.secondary,fontSize:12},titleContainer:{display:"flex",alignItems:"center"},aiIcon:{display:"inline-flex",width:b().Ev.sm,height:b().Ev.sm,fill:e.icon.secondary,marginRight:6}})),[]),y=(0,n.useMemo)((()=>({key:"suggested",render:e=>(0,ke.jsx)(z().A,{...e,title:(0,ke.jsxs)("span",{style:g.titleContainer,children:[(0,S().G)(g.aiIcon),(0,ke.jsx)("span",{className:"notion-shimmer-text-darker",style:g.loadingText,children:(0,ke.jsx)(x().sA,{...rt.loadingSuggestedSectionTitle})})]}),disableMobileBorders:!0}),items:[]})),[g.aiIcon,g.loadingText,g.titleContainer]),f=(0,n.useMemo)((()=>({key:"suggested",render:e=>(0,ke.jsxs)(z().A,{...e,title:ae().A.formatMessage(rt.suggestedSectionTitle),disableMobileBorders:!0,children:[(0,ke.jsx)(G().A,{style:{width:"80%",...g.loadingShimmer}}),(0,ke.jsx)(G().A,{style:{width:"50%",...g.loadingShimmer}}),(0,ke.jsx)(G().A,{style:{width:"60%",...g.loadingShimmer}}),(0,ke.jsx)(G().A,{style:{width:"50%",...g.loadingShimmer}})]}),items:[]})),[g.loadingShimmer]),v=(0,n.useMemo)((()=>m?y:f),[m,y,f]),w=(0,n.useMemo)((()=>({key:"more-suggestions",render:e=>(0,ke.jsx)(F().A,{...e,title:(0,ke.jsxs)("div",{style:g.moreSuggestionsButtonContainer,children:[(0,ke.jsx)(x().sA,{id:"database.collectionsettings.propertySuggestions.more",defaultMessage:"More"}),(0,h().b)({fill:_().Ay.uiGray,width:12,height:12,marginLeft:4})]})}),action:e=>{r(!0),e.event&&"stopPropagation"in e.event&&e.event.stopPropagation()}})),[r,g.moreSuggestionsButtonContainer]);return(0,n.useMemo)((()=>s?{key:"suggested",render:()=>null,items:[]}:o.length?{key:"suggested",render:e=>(0,ke.jsx)(z().A,{...e,title:p,desktopTitleStyle:d,desktopStyle:u}),items:t&&!l?[...o,w]:o}:c&&i&&!l?v:{key:"suggested",render:()=>null,items:[]}),[s,o,t,l,w,c,i,v,p,d,u])}function Oe(e){let{environment:t,collectionContextStore:o,propertySchema:i,onAccept:a,intl:l,section:s,iconStyle:c,buttonStyle:p}=e;const d=(0,r().K8)((()=>(0,Z().xm)({collectionContextStore:o,environment:t})),[o,t]),u=(0,n.useMemo)((()=>"all"===s?d:s.flatMap((e=>{switch(e){case"basic":return Re;case"advanced":return Ee;case"metadata":return Ke;default:(0,I().HB)(e)}}))),[s,d]),m=!(0,r().O$)(fe().e);return(0,r().K8)((()=>Object.fromEntries(u.map((e=>[Z().dC[e].toLowerCase(),Xe({propertyType:e,propertyName:Z().dC[e],collectionContextStore:o,onAccept:a,intl:l,propertySchema:i,isSuggestedProperty:!1,iconStyle:c,isOffline:m,buttonStyle:p})])))),[o,l,a,i,u,c,m,p])}const Re=["text","number","select","multi_select","status","date","person","file","checkbox","url","phone_number","email"],Ee=["relation","rollup","formula","button","auto_increment_id"],Ke=["created_time","last_edited_time","created_by","last_edited_by"];function Be(e,t){const o=(0,i().v3)(),n=(0,q().ET)(),l=(0,a().IS)((e=>({defaultIconStyle:{fill:e.regularIconColor}})),[]),s=(0,r().K8)((()=>{const i=function(e){var t;let{environment:o,collectionContextStore:n,spaceStore:i}=e;if(!(0,se().Io)())return!1;const r=null==i?void 0:i.getModel();if(!r||!(0,T().Xi)(r))return!1;const a=null===(t=n.collectionViewBlockStore())||void 0===t?void 0:t.isCollectionViewPageWithContent();if(a)return!1;const l=n.collectionStore();if(!l)return!1;const s=(0,xe().NU)({environment:o,collectionStore:l,templateId:c().z$});if(s)return!1;return!0}({environment:o,collectionContextStore:n,spaceStore:ge().default.getState().currentSpaceStore}),r=(0,se().$3)({environment:o,collectionStore:n.collectionStore()});if(!i&&!r)return{};const a=Te().globalWorkflowTemplates.fromId(c().z$);if(!(0,p().bz)(a))return{};const s=(0,se().xE)(o),d="verification_upsell_item_collection_entrypoint",u=r?(0,ke.jsx)(be().A,{subscriptionTier:"business",analyticsName:d}):s?(0,ke.jsx)(U().E,{style:{marginLeft:2},newBadgeKey:"verification",didUserEngage:!1,keyType:"date"}):void 0;return{[a.templateId]:qe({environment:o,template:a,collectionContextStore:n,suggestedFeatureAnalytics:void 0,titleBadge:u,onAccept:()=>{var e,t;r?(0,Se().K)(o,{from:d,upsell:{type:"product",product:"business",limit:{type:"none"},trialability:"none"}}):(0,Y().u4)({environment:o,event:{eventName:"page_verification_property_added",eventProperties:{space_id:null===(e=ge().default.getState().currentSpaceStore)||void 0===e?void 0:e.id,collection_id:null===(t=n.collectionStore())||void 0===t?void 0:t.id}}})},titleOverride:ae().A.formatMessage(D().Gl.verificationPropertyName),isUpsell:r,tooltip:(0,ke.jsx)(x().sA,{...at.verification}),iconStyle:e??l.defaultIconStyle,buttonStyle:t})}}),[n,o,e,l.defaultIconStyle,t]);return s}function Fe(e){let{filteredAiDerivedPropertyItems:t}=e;return(0,n.useMemo)((()=>t.length?{key:"autofill",render:e=>(0,ke.jsx)(z().A,{...e,title:ae().A.formatMessage(rt.autofillSectionTitle)}),items:t}:{key:"autofill",render:()=>null,items:[]}),[t])}function We(e){let{filteredStandardPropertyItems:t,key:o,desktopStyle:i,title:r,topBorder:a,desktopTitleStyle:l,searchProperties:s}=e;const c=(0,pe().X)("db_ux_properties"),p=(0,n.useMemo)((()=>{if(!c)return t;if(!s)return t;const{searchInput:e,showSearchInput:o,handleSearchInputChange:n}=s;if(!o)return t;return[{key:"search-input",render:t=>(0,ke.jsx)(L().Ay,{...t,placeholder:ae().A.formatMessage(rt.newSearchPlaceholder),value:e,onChange:n}),action:()=>{}},...t]}),[t,c,s]);return(0,n.useMemo)((()=>p.length?{key:o,render:e=>(0,ke.jsx)(z().A,{...e,topBorder:a,title:r,desktopStyle:i,desktopTitleStyle:l}),items:p}:{key:o,render:()=>null,items:[]}),[p,a,i,l,r,o])}function Le(e){let{collectionContextStore:t,propertySchema:o,propertyGroupId:a,buttonStyle:s,propertyName:c,onAfterAccept:p}=e;const d=(0,i().v3)(),u=(0,x().tz)(),g=(0,r().K8)((()=>oe().A.bots.state),[]),y=(0,r().K8)((()=>t.collectionStore()),[t]),S=(0,r().K8)((()=>(null==y?void 0:y.getSchema())??{}),[y]),h=(0,r().K8)((()=>Boolean(null==y?void 0:y.isPageTreeCollection())),[y]),b=(0,r().K8)((()=>t.databaseType),[t]),v=(0,r().K8)((()=>{var e;return null===(e=ge().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit()}),[]),T=(0,r().K8)((()=>{if(void 0===o)return function(e,t){if(!e)return[];const o=te().default.checkGate({gateName:"cron_connected_relation"}),n=te().default.checkGate({gateName:"connected_relation"}),i=te().default.checkGate({gateName:"slack_connected_relation"}),r=te().default.checkGate({gateName:"salesforce_connected_relation_database_actions_enabled"}),a=e.getDatabaseType()===l().dC,s=oe().A.state;if(!s.loaded)return[];const c=s.integrations,p={};if(!a){const e=c.find((e=>e.id===f().ob)),t=(0,R().Jb)();var d;e&&(p[t.name]={name:t.name,pattern:Q().Y,integration:e,tooltipImage:{img:ee().A.images.tooltips.properties.githubSyncPullStatusPng,scale:.5},description:t.description,canOnlyAdminAuth:{disabledPropertyTooltipMessage:null===(d=t.canOnlyAdminAuth)||void 0===d?void 0:d.disabledPropertyTooltipMessage}})}const u=[];if(t&&(u.push(f().Hd,f().e1,f().k0),i&&u.push(f().zG)),o&&u.push(f().io),u.forEach((e=>{const t=c.find((t=>t.id===e));if(null!=t&&t.info.original_url_patterns)for(const n of t.info.original_url_patterns){var o;null!==(o=n.additional_types)&&void 0!==o&&o.connectedRelation&&(p[n.name]||(p[n.name]={name:(0,ne().Fe)({pattern:n,integration:t}),pattern:n,integration:t}))}})),!n)return Object.values(p);for(const l of c)if(l.info.original_url_patterns&&t&&![...ie,f().F6].includes(l.id))for(const e of l.info.original_url_patterns){var m;null!==(m=e.additional_types)&&void 0!==m&&m.connectedRelation&&(p[e.name]||(l.id===f().mn&&r?p[l.name]={name:l.name,pattern:e,integration:l}:p[e.name]={name:(0,ne().Fe)({pattern:e,integration:l}),pattern:e,integration:l}))}return Object.values(p)}(y,v)}),[y,o,v]),_=(0,r().K8)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getSpaceId()}),[t]),A=(0,r().K8)((()=>{var e;return null===(e=ge().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),C=(0,ce().Ld)({spaceId:_,userId:A}),k=(0,r().K8)((()=>Boolean(null==y?void 0:y.isSyncedCollection())),[y]),P=(0,de().J)(),M=(0,ue().a)(),j=!(0,r().O$)(fe().e),N=(0,n.useMemo)((()=>{if(null!=T&&T.length&&!M&&!j)return Object.fromEntries(T.map((e=>{const{isDisabled:o,featureAvailability:n,propertyDisabledTooltip:i}=function(e){let{propertyConfig:t,databaseType:o,bots:n,isSpaceAdmin:i,isMobile:r,isWikiCollection:a,isSyncedCollection:s,schema:c,intl:p,featureAvailabilities:d}=e;const u="integration"in t?t.integration.id:t.integrationId;if(!u)return{isDisabled:!1};const g=d[u];if(g&&!(0,w().e2)(g))return{isDisabled:!0,featureAvailability:g,propertyDisabledTooltip:p.formatMessage(rt.upgradeRequired)};var y;if((0,m().iY)({isAuthed:Boolean(n.find((e=>e.integration_id===u))),isSpaceAdmin:i,isPropertyAdminAuthOnly:Boolean(t.canOnlyAdminAuth),isMobile:r}))return{isDisabled:!0,propertyDisabledTooltip:null===(y=t.canOnlyAdminAuth)||void 0===y?void 0:y.disabledPropertyTooltipMessage};if(u===f().ob){if(et(c,f().ob))return{isDisabled:!0,propertyDisabledTooltip:p.formatMessage(rt.duplicateGithubPropertyTooltip)};if(a)return{isDisabled:!0,propertyDisabledTooltip:p.formatMessage(rt.wikiGithubPropertyTooltip)};if(s)return{isDisabled:!0,propertyDisabledTooltip:p.formatMessage(rt.syncedDatabaseGithubPropertyTooltip)}}else if(u===f().io){if(et(c,f().io),o!==l().TC)return{isDisabled:!0,propertyDisabledTooltip:p.formatMessage(rt.nonMeetingsCronPropertyTooltip)};if(et(c,f().io))return{isDisabled:!0,propertyDisabledTooltip:p.formatMessage(rt.duplicateCronEventPropertyTooltip)}}return{isDisabled:!1}}({propertyConfig:e,bots:g,isSpaceAdmin:P,environment:d,isWikiCollection:h,databaseType:b,isSyncedCollection:k,schema:S,intl:u,isMobile:d.device.isMobile,featureAvailabilities:C});return[e.name.toLowerCase(),Ze({connectedRelationProperty:e,isDisabled:o,propertyDisabledTooltip:i,environment:d,intl:u,collectionContextStore:t,propertyGroupId:a,featureAvailability:n,buttonStyle:s,propertyName:c,onAfterAccept:p})]})).filter(I().O9))}),[T,M,g,P,d,h,b,k,S,u,t,a,C,j,s,c,p]);return N}function Ge(e){const{collectionContextStore:t,buttonStyle:o,onAfterAccept:a}=e,l=(0,i().v3)(),s=(0,r().K8)((()=>{var e;return(null===(e=t.collectionStore())||void 0===e?void 0:e.getSchema())??{}}),[t]),c=(0,pe().X)("connected_relations_database_actions_enabled"),p=!(0,r().O$)(fe().e),[d,m]=(0,n.useMemo)((()=>{if(!c)return[{},[]];const e={};for(const[n,i]of Object.entries(s)){if(!i||!(0,u().UU)(i))continue;const r=i.connectedRelation.integration_id;if(!r||!(0,f().KB)(r))continue;const s=Je({propertySchema:i,environment:l,collectionContextStore:t,propertyId:n,integrationId:r,isOffline:p,buttonStyle:o,onAfterAccept:a});e[r]||(e[r]={}),e[r][i.name.toLowerCase()]=s}return[e,Object.values(e).flat()]}),[s,c,l,t,p,o,a]);return[d,m]}function Ue(e){let{filteredConnectedPropertyItems:t,hideTitle:o,desktopStyle:i}=e;return(0,n.useMemo)((()=>t.length?{key:"connected",render:e=>(0,ke.jsx)(z().A,{...e,title:ae().A.formatMessage(rt.connectedRelationSectionTitle),hideTitle:o,topBorder:o,desktopStyle:i}),items:t}:{key:"connected",render:()=>null,items:[]}),[t,o,i])}function ze(e){let{filteredConnectedPropertyItemsPerIntegration:t}=e;return(0,n.useMemo)((()=>0===Object.keys(t).length?[{key:"existingConnectedRelations",render:()=>null,items:[]}]:Object.entries(t).map((e=>{let[t,o]=e;return 0===o.length?{key:t,render:()=>null,items:[]}:{key:t,render:e=>(0,ke.jsx)(z().A,{...e,title:ae().A.formatMessage(rt.existingConnectedRelationSectionTitle,{integrationName:(0,f().mi)(t)})}),items:o}}))),[t])}const $e="workflow.";function Ve(e){return`${$e}${e}`}function He(e){return e.replace($e,"")}function qe(e){let{environment:t,template:o,collectionContextStore:n,suggestedFeatureAnalytics:i,titleBadge:r,titleOverride:a,isUpsell:l,onAccept:s,tooltip:c,iconStyle:p,buttonStyle:d}=e;const u=a||(0,Te().getWorkflowTemplateName)(o);return{key:Ve(o.templateId),action:()=>{l||(0,ve().p)({environment:t,template:o,collectionContextStore:n,suggestedFeatureAnalytics:i}),s&&s()},render:e=>(0,ke.jsx)(V().A,{style:{whiteSpace:"break-spaces"},placement:me().W.Left,renderTooltip:()=>c,disableTooltip:!c,render:t=>(0,ke.jsx)(F().A,{...(0,le().A)(t,e),title:(0,ke.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,ke.jsx)(H().A,{style:{marginRight:4},children:u}),r]}),icon:(0,ke.jsx)(we().z,{template:o,size:16,iconStyle:p}),style:d})})}}function Ye(e){let{appConfig:t,suggestedProperty:o,isDisabled:n,propertyDisabledTooltip:i,environment:r,collectionContextStore:a,theme:l,iconStyle:c,buttonStyle:p,onAfterAccept:d}=e;const m=a.collectionStore(),f=g().u9.derivePropertyUris((null==m?void 0:m.getSchema())??{},null==m?void 0:m.getPropertyMapping()),S=te().default.checkGate({gateName:"db_ux_properties"}),h=(e,t,o,i)=>{const r=o.dependencies.find((e=>{var t;return"property"===e.type&&e.collectionUri===(null==m||null===(t=m.getFormat())||void 0===t?void 0:t.app_config_uri)&&(0,s().LE)(e.uri)&&!f.has(e.uri)})),a=o.dependencies.find((e=>"property"===e.type&&(0,u().$M)(e.propertySchema)&&(0,u().om)(e.propertySchema)));if(r)return(0,ke.jsx)(F().A,{...e,disabled:n,disabledFeedback:n,title:(0,ke.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[t,a?(0,ke.jsx)(K().A,{}):null,o.isNew?"notion://projects/tasks_with_sprints_feature"===o.uri&&(0,ke.jsx)(B().A,{}):null]}),icon:(0,ke.jsx)(y().zB,{type:r.propertySchema.type,theme:l,icon:i,size:16,style:c}),style:p})},b=new(ye().A);return{key:o.name,render:e=>{var n,l;return(0,ke.jsx)(Ce().A,{showImage:!i,caption:i??o.description,tooltipImage:i||S||null===(n=o.tooltipImage)||void 0===n?void 0:n.img,tooltipImageScale:null===(l=o.tooltipImage)||void 0===l?void 0:l.scale,render:n=>{if((0,E().lK)(o))return h({...(0,le().A)(e,n)},o.name,o,o.icon);{const i=A().oE(o.variants.map((e=>{const o=null==t?void 0:t.allFeatures.find((t=>t.uri===e));if(o&&(0,E().lK)(o))return o})));return(0,ke.jsx)($().A,{buttonPopupStore:b,items:i,getKey:e=>e.name,onSelect:async e=>{await M().h3({environment:r,feature:e,collectionContextStore:a,addFeatureFrom:"new_property"}),P().os({collectionSettingsStore:a.settingsStore}),d&&d()},selectedItem:void 0,renderOrigin:t=>h({focused:Boolean(e.focused),...(0,le().A)(A().cJ(e,"onClick","focused"),(0,le().A)(n,t))},o.name,i[0],o.icon),renderItem:e=>(0,ke.jsx)(F().A,{...e,title:e.value.name,shouldWrapCaption:!0,shouldWrapTitle:!0,style:p})})}}})},action:async()=>{(0,E().lK)(o)?(await M().h3({environment:r,feature:o,collectionContextStore:a,addFeatureFrom:"new_property"}),P().os({collectionSettingsStore:a.settingsStore})):b.setState({open:!0}),d&&d()}}}function Xe(e){let{collectionContextStore:t,propertySchema:o,propertyName:n,propertyType:i,disablePropertyTooltip:r,intl:a,onAccept:l,iconStyle:s,isSuggestedProperty:c,isOffline:p,buttonStyle:u}=e;const m={key:n,render:e=>{const l=o&&(null==o?void 0:o.type)===i,c=function(e){let{collectionContextStore:t,propertyType:o,propertySchema:n,isOffline:i}=e;if(i&&ot({propertyType:o,propertySchema:n}))return ae().A.formatMessage(C().AY.unavailableOfflineTooltip);if("auto_increment_id"===o){var r;if(null!=n&&n.type)return ae().A.formatMessage(re().qh.convert_to_auto_increment_id_property);const e=t.collectionStore();if(null==e?void 0:e.isPageTreeCollection())return ae().A.formatMessage(re().qh.wiki_forbidden_auto_increment_id_property);if(Boolean(null==e?void 0:e.isSyncedCollection()))return ae().A.formatMessage(re().qh.synced_database_forbidden_auto_increment_id_property);const o=e&&e.id,i=e&&e.getFormat(),a=e&&(null===(r=e.getSpaceStore())||void 0===r?void 0:r.id),l=e&&e.getSchema(),s=e&&e.getDeletedSchema();if(!(o&&i&&a&&l&&s))return;const c=e.getModel();if(c&&(0,d().N_)(c))return ae().A.formatMessage(re().qh.duplicate_auto_increment_id_property)}}({collectionContextStore:t,propertyType:i,propertySchema:o,isOffline:p}),m=void 0!==c,g=te().default.checkGate({gateName:"db_ux_properties"}),y=r||!at.hasOwnProperty(i)||g?void 0:a.formatMessage(at[i]);return(0,ke.jsx)(Qe,{isChecked:l,buttonMenuItemProps:e,propertyName:n,propertyType:i,isDisabled:m,tooltip:c??y,iconStyle:s,buttonStyle:u})},action:()=>{l(i,c,n)}};return m}function Ze(e){let{connectedRelationProperty:t,isDisabled:o,propertyDisabledTooltip:n,environment:i,collectionContextStore:r,intl:a,propertyGroupId:l,featureAvailability:s,buttonStyle:c,propertyName:p,onAfterAccept:d}=e;return{key:t.name,render:e=>{const i=s&&!(0,w().e2)(s);return(0,ke.jsxs)(W().fI,{children:[(0,ke.jsx)(Qe,{buttonMenuItemProps:e,propertyName:t.name,propertyType:"relation",isDisabled:o,tooltip:n,icon:t.integration.info.icon,buttonStyle:i?{...c,width:"fit-content"}:c}),i&&(0,ke.jsx)(he().B,{upsell:s.upsell,analyticsName:"collection_connected_property",disableTooltip:!0})]})},action:async()=>{const e=te().default.checkGate({gateName:"salesforce_connected_relation_database_actions_enabled"});if(t.integration.id===f().mn&&e){const e=r.collectionStore();(0,Y().u4)({environment:i,event:{eventName:"salesforce_actions",eventProperties:{actionType:"navigate_to_object_selection",integrationId:t.integration.id,collectionId:null==e?void 0:e.id}}}),P().a2({collectionSettingsStore:r.settingsStore,item:{type:"connectedRelationDatabaseActions",source:"ConnectedRelationObjectSelection",integrationId:t.integration.id}})}else await M().XO({environment:i,connectedRelationProperty:t,collectionContextStore:r,intl:a,from:"new_property",propertyGroupId:l,propertyName:p});d&&d()}}}function Je(e){const{propertySchema:t,collectionContextStore:o,propertyId:n,integrationId:i,isOffline:r,buttonStyle:a,onAfterAccept:l}=e;return{key:n,render:e=>(0,ke.jsx)(Qe,{buttonMenuItemProps:e,propertyName:t.name,propertyType:"relation",icon:t.icon,isDisabled:r,tooltip:r?ae().A.formatMessage(C().AY.unavailableOfflineTooltip):void 0,buttonStyle:a}),action:()=>{P().a2({collectionSettingsStore:o.settingsStore,item:{type:"connectedRelationDatabaseActions",source:"connectedRelationAddProperties",rootPropertyId:n,integrationId:i,rootPropertySchema:t}}),l&&l()}}}const Qe=n.memo((function(e){let{buttonMenuItemProps:t,isChecked:o,propertyName:i,propertyType:r,isDisabled:l,badge:s,tooltip:c,tooltipImage:p,tooltipImageScale:d,icon:u,iconStyle:m,buttonStyle:g}=e;const f=(0,a().DP)(),S=(0,a().IS)((e=>({container:{display:"inline-flex",alignItems:"center",maxWidth:"100%",overflow:"hidden"},span:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},defaultIconStyle:{fill:e.regularIconColor}})),[]),h=(0,pe().X)("nds_default_property_noticon"),b=(0,n.useCallback)((e=>(0,ke.jsx)(F().A,{...e?(0,le().A)(t,e):t,disabled:l,disabledFeedback:l,title:(0,ke.jsxs)("div",{style:S.container,children:[(0,ke.jsx)("span",{style:S.span,children:i}),s]}),isChecked:o,icon:(0,ke.jsx)(y().zB,{type:r,theme:f,icon:u,size:16,style:m??S.defaultIconStyle,isDefaultNoticonEnabled:h}),buttonStyle:g})),[t,l,i,s,o,r,u,g,S,f,m,h]);return c?(0,ke.jsx)(Ce().A,{showImage:!l,caption:c,tooltipImage:l?void 0:p,tooltipImageScale:d,render:e=>b(e)}):b(void 0)}));function et(e,t){for(const n in e){var o;const i=e[n];if(i&&"connectedRelation"in i&&(null===(o=i.connectedRelation)||void 0===o?void 0:o.integration_id)===t)return!0}return!1}const tt=["button","formula","auto_increment_id"];function ot(e){const{propertyType:t,propertySchema:o}=e,n=(0,I().O9)(o)&&(0,u().$M)(o)&&(0,I().O9)((0,u().om)(o)),i=(0,I().O9)((0,m().Dz)(o));return tt.includes(t)||n||i}const nt=["ai_summary"];function it(e,t){const o=t?function(e){const t=new Set;for(const n in e){const i=e[n];if(i&&"ai_inference"in i){var o;const e=null===(o=i.ai_inference)||void 0===o?void 0:o.type;if(e)switch(e){case"custom":t.add("ai_custom_prompt");break;case"summarize":t.add("ai_summary");break;case"extract":t.add("ai_extract");break;case"translate":t.add("ai_translate")}}else i&&"select_ai_inference"in i&&t.add("ai_keywords")}return t}(t):new Set;return e.map((e=>({type:"derived_ai_property",propertyType:e}))).filter((e=>!nt.includes(e.propertyType)||!o.has(e.propertyType)))}const rt=(0,x().YK)({searchPlaceholder:{defaultMessage:"Search or add new property",id:"database.viewSettings.propertyTypeSelect.searchPlaceholder"},newSearchPlaceholder:{defaultMessage:"Search...",id:"database.viewSettings.propertyTypeSelect.newSearchPlaceholder"},searchToChangePlaceholder:{defaultMessage:"Search for property type",id:"database.viewSettings.propertyTypeSelect.searchToChangePlaceholder"},propertyNameInputPlaceholder:{defaultMessage:"Enter property name...",id:"database.viewSettings.propertyTypeSelect.propertyNameInputPlaceholder"},suggestedSectionTitle:{defaultMessage:"Suggested",id:"database.viewSettings.propertyTypeSection.suggested"},loadingSuggestedSectionTitle:{defaultMessage:"Thinking...",id:"database.viewSettings.propertyTypeSection.loadingSuggested"},connectedRelationSectionTitle:{defaultMessage:"Connections",id:"database.viewSettings.propertyTypeSection.connected"},existingConnectedRelationSectionTitle:{defaultMessage:"{integrationName}",id:"database.viewSettings.propertyTypeSection.existingConnectedIntegrationTitle"},typesSectionTitle:{defaultMessage:"Type",id:"database.viewSettings.propertyTab.propertyType"},autofillSectionTitle:{defaultMessage:"AI autofill",id:"database.viewSettings.propertyTab.autofillProperties"},newProperty:{defaultMessage:"New property",id:"database.viewSettings.newProperty"},newPropertyWithDatabaseName:{defaultMessage:"New property on {databaseName}",id:"database.viewSettings.newPropertyOnDatabase"},changePropertyType:{defaultMessage:"Change property type",id:"database.viewSettings.changePropertyType"},selectToAddNewProperty:{defaultMessage:"Select to add",id:"database.viewSettings.selectToAdd"},newPill:{defaultMessage:"New",id:"database.viewSettings.newHighlightedFeature"},duplicateGithubPropertyTooltip:{defaultMessage:"A database can only have one GitHub Pull Requests property",id:"database.viewSettings.propertyTab.duplicateGithubProperty.tooltip"},wikiGithubPropertyTooltip:{defaultMessage:"A wiki cannot have a GitHub Pull Requests property",id:"database.viewSettings.propertyTab.wikiGithubProperty.tooltip"},syncedDatabaseGithubPropertyTooltip:{defaultMessage:"A synced database cannot have a GitHub Pull Requests property",id:"database.viewSettings.propertyTab.syncedDatabaseGithubProperty.tooltip"},nonMeetingsCronPropertyTooltip:{defaultMessage:"The Cron Calendar property can only be added to a Meetings database",id:"database.viewSettings.propertyTab.nonMeetingsCronProperty.tooltip"},duplicateCronEventPropertyTooltip:{defaultMessage:"A database can only have one Cron Calendar event property",id:"database.viewSettings.propertyTab.duplicateCronEventProperty.tooltip"},upgradeRequired:{defaultMessage:"Please upgrade to use this property",id:"database.viewSettings.propertyTab.upgradeRequired"},selectType:{defaultMessage:"Select type",id:"database.viewSettings.propertyTabGrid.selectType"}}),at=(0,x().YK)({text:{defaultMessage:"Add text that can be formatted. Great for summaries, notes, or descriptions.",id:"database.viewSettings.propertyTab.textProperty.tooltip"},number:{defaultMessage:"Accepts numbers. These can also be formatted as currency or progress bars. Useful for tracking counts, prices, and completion.",id:"database.viewSettings.propertyTab.numberProperty.tooltip"},select:{defaultMessage:"Select one option from a list of tags. Useful for categorization.",id:"database.viewSettings.propertyTab.selectProperty.tooltip"},multi_select:{defaultMessage:"Select one or more options from a list of tags. Useful for tagging items across multiple categories.",id:"database.viewSettings.propertyTab.multiSelectProperty.tooltip"},date:{defaultMessage:"Accepts a date or a date range (time optional). Useful for deadlines, especially with calendar and timeline views.",id:"database.viewSettings.propertyTab.dateProperty.tooltip"},formula:{defaultMessage:"Perform calculations based on other properties using Notion’s formula language.",id:"database.viewSettings.propertyTab.formulaProperty.tooltip"},relation:{defaultMessage:"Connect databases and mention database pages. Useful for connecting items across your workspace.",id:"database.viewSettings.propertyTab.relationProperty.tooltip"},rollup:{defaultMessage:"View and aggregate information about properties from relation properties. Useful for summarizing interconnected data.",id:"database.viewSettings.propertyTab.rollupProperty.tooltip"},person:{defaultMessage:"Tag anyone in your Notion workspace. Useful for assigning tasks or referencing relevant team members.",id:"database.viewSettings.propertyTab.personProperty.tooltip"},file:{defaultMessage:"Upload files and images for easy retrieval. Useful for storing documents and photos.",id:"database.viewSettings.propertyTab.filesProperty.tooltip"},checkbox:{defaultMessage:"Use a checkbox to indicate whether a condition is true or false. Useful for lightweight task tracking.",id:"database.viewSettings.propertyTab.checkboxProperty.tooltip"},url:{defaultMessage:"Accepts a link to a website and opens the link in a new tab when clicked.",id:"database.viewSettings.propertyTab.urlProperty.tooltip"},email:{defaultMessage:"Accepts an email address and launches your mail client when clicked.",id:"database.viewSettings.propertyTab.emailProperty.tooltip"},phone_number:{defaultMessage:"Accepts a phone number and prompts your device to call it when clicked.",id:"database.viewSettings.propertyTab.phoneNumberProperty.tooltip"},created_time:{defaultMessage:"Records the timestamp of an item’s creation. Auto-generated and not editable.",id:"database.viewSettings.propertyTab.createdTimeProperty.tooltip"},created_by:{defaultMessage:"Automatically records the person who created the item. Auto-generated and not editable.",id:"database.viewSettings.propertyTab.createdByProperty.tooltip"},last_edited_time:{defaultMessage:"Records the timestamp of an item’s last edit. Auto-updated and not editable.",id:"database.viewSettings.propertyTab.lastEditedTimeProperty.tooltip"},last_edited_by:{defaultMessage:"Records the person who edited the item last. Auto-updated and not editable.",id:"database.viewSettings.propertyTab.lastEditedByProperty.tooltip"},auto_increment_id:{defaultMessage:"Automatically creates a numerical ID for each item. IDs are unique and cannot be manually changed.",id:"database.viewSettings.propertyTab.uniqueIdProperty.tooltip"},status:{defaultMessage:"Track this item’s progress using status tags categorized by To-do, In progress, and Complete.",id:"database.viewSettings.propertyTab.statusProperty.tooltip"},verification:{defaultMessage:"Indicate whether a page has been verified by the page owner, with the option to set an expiration date.",id:"database.viewSettings.propertyTab.verificationProperty.tooltip"},button:{defaultMessage:"Trigger actions based on the item properties.",id:"database.viewSettings.propertyTab.buttonProperty.tooltip"},ai_summary:{defaultMessage:"Text property with AI summary set up for you. Generates a summary based on page content and properties.",id:"database.viewSettings.propertyTab.aiSummaryProperty.tooltip"},ai_translate:{defaultMessage:"Text property with AI translate set up for you. Translate a property to another language using AI. ",id:"database.viewSettings.propertyTab.aiTranslateProperty.tooltip"},ai_category:{defaultMessage:"Select property that automatically adds tags based on the page content and properties.",id:"database.viewSettings.propertyTab.aiCategoryProperty.tooltip"},ai_keywords:{defaultMessage:"Multi-select property that automatically adds tags based on the page content and properties.",id:"database.viewSettings.propertyTab.aiKeywordsProperty.tooltip"},ai_custom_prompt:{defaultMessage:"Text property with a custom AI prompt. Generate content based on the page content and properties.",id:"database.viewSettings.propertyTab.aiCustomPromptProperty.tooltip"},ai_extract:{defaultMessage:"Text property with a custom AI prompt. Extract key info based on the page content and properties.",id:"database.viewSettings.propertyTab.aiExtractProperty.tooltip"},title:{defaultMessage:"Add a title for your database item. This determines the page’s title.",id:"database.viewSettings.propertyTab.titleProperty.tooltip"},location:{defaultMessage:"Display the location of which database this item belongs to.",id:"database.viewSettings.propertyTab.locationProperty.tooltip"},last_visited_time:{defaultMessage:"Records the timestamp of the last time you visited this page. Auto-updated and not editable.",id:"database.viewSettings.propertyTab.lastVisitedTimeProperty.tooltip"},geo_point:{defaultMessage:"Display a physical location on a map.",id:"database.viewSettings.propertyTab.geoPointProperty.tooltip"}})},298770:(e,t,o)=>{o.d(t,{A:()=>p});var n=o(242343),i=()=>o(174114),r=()=>o(220413),a=()=>o(103151),l=()=>o(84979),s=()=>o(907721),c=o(163643);function p(e){const{render:t,showImage:o,caption:p,description:d,tooltipImage:u,placement:m,tooltipDelayThreshold:g,hideTooltipBeforeImageLoaded:y,imageContainerStyle:f}=e,S=e.tooltipImageScale||1,[h,b]=n.useState(!1),[v,w]=n.useState({width:0,height:0});n.useEffect((()=>{if(u){const e=new Image;e.src=u,e.onload=()=>{w({width:"number"==typeof S?e.width*S:S.widthPx,height:"number"==typeof S?e.width*S:S.heightPx}),b(!0)}}}),[u,S]);const T=(0,i().IS)((()=>({tooltip:{whiteSpace:"break-spaces"},description:{fontWeight:"normal",color:r().Ay.uiLightGray}})),[]),x=(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:p}),d&&(0,c.jsx)("div",{style:T.description,children:d})]});return(0,c.jsx)(a().A,{placement:m??s().W.Left,disableTooltip:void 0===p||!h&&y,delayThreshold:g,style:T.tooltip,render:t,renderTooltip:()=>u&&h&&o?(0,c.jsx)(l().A,{caption:x,imageURL:u,imageWidth:v.width,imageHeight:v.height,imageContainerStyle:f}):x})}},362493:(e,t,o)=>{o.d(t,{Z:()=>C,p:()=>k});o(610931),o(403517),o(242343);var n=()=>o(237385),i=()=>o(803290),r=()=>o(174114),a=()=>o(505966),l=()=>o(564134),s=()=>o(76394),c=()=>o(521325),p=()=>o(84543),d=()=>o(471685),u=()=>o(91338),m=()=>o(137476),g=()=>o(477784),y=()=>o(518022),f=()=>o(605845),S=()=>o(716430),h=()=>o(707299),b=()=>o(940445),v=()=>o(727528),w=()=>o(590091),T=()=>o(921734),x=()=>o(772180),_=()=>o(413995),A=()=>o(194585),I=o(163643);function C(e){let{environment:t,template:o,isInSuggestedSection:n,collectionContextStore:i}=e;return{key:o.templateId,action:()=>{if(n)k({environment:t,template:o,collectionContextStore:i,suggestedFeatureAnalytics:void 0});else{const{collectionStore:e,collectionViewStore:n,collectionSettingsStore:r}=(0,w().i)(i);(0,S().UD)({template:o,environment:t,collectionStore:e,collectionViewStore:n,collectionSettingsStore:r,collectionContextStore:i})}},render:e=>(0,I.jsx)(P,{buttonMenuItemProps:e,template:o,isInSuggestedSection:n})}}function k(e){let{environment:t,collectionContextStore:o,template:n,suggestedFeatureAnalytics:i}=e;const r=o.collectionStore();if(!r)throw new Error("collectionStore not found");const l=r.getWorkflowTemplateId();i&&(0,m().u4)({environment:t,event:{eventName:"suggested_feature_template_clicked",eventProperties:{origin:i.origin,selected_index:i.selectedIndex,template_ids_shown:i.shownTemplateIds,template_id_clicked:n.templateId,collection_template_id:l}}});const s=o.settingsStore;if((0,x().isWorkflowTemplateWithConfirmStep)(n))c().a2({collectionSettingsStore:s,item:{type:"confirmAddTemplate",template:n}});else if((0,a().Sz)(n)){const{relatedCollectionTemplateId:e}=n;!function(e){var t;let{environment:o,template:n,collectionStore:i,relatedCollectionTemplateId:r}=e;const a=null===(t=i.getParentBlockStore())||void 0===t?void 0:t.getParentStore();if(!a)throw new Error(`parentStore not found for ${i.id}`);if(!(0,h().u)(a))throw new Error(`Incorrect parent store: ${a.table} ${a.id}`);const l=b().globalWorkflowTemplates.fromIdOfType({templateId:r,type:"collection"});(0,y().openSelectedTemplateOnboardingModalForInAppFlows)({environment:o,template:l,origin:"suggested_feature_template",parentStore:a,navigateToOnFinish:"skip",relationInfos:[{type:"source",collectionStore:i,relationPropertyTemplate:n}],aiPrompt:void 0})}({environment:t,template:n,collectionStore:r,relatedCollectionTemplateId:e})}else p().createAndCommit({userAction:"FeatureTemplateMenuItem.addFeatureTemplateToTarget",environment:t,canUndo:!0,perform:e=>{f().ai({environment:t,transaction:e,collectionStore:r,template:n,logger:new(b().WorkflowTemplateLogger),origin:"suggested_feature"}),i&&(0,m().u4)({environment:t,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:i.origin,template_id_added:n.templateId,collection_template_id:l}}});const a=o.collectionViewStore();a&&S().UD({template:n,environment:t,collectionStore:r,collectionViewStore:a,collectionSettingsStore:s,collectionContextStore:o})}})}function P(e){let{buttonMenuItemProps:t,template:o,isInSuggestedSection:a}=e;const c=(0,r().IS)((e=>({iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"},icon:{fill:e.regularIconColor}})),[]),{collectionStore:p}=(0,w().V)(),m=(0,n().v3)(),y=(0,i().K8)((()=>(0,v().NU)({environment:m,collectionStore:p,templateId:o.templateId})),[m,p,o.templateId]),f=(0,i().K8)((()=>function(e){let{template:t,collectionStore:o}=e;const{type:n}=t;switch(n){case"property":const{value:e}=t;if((0,l().DQ)(e)){const n=function(e){let{templateId:t,propertyTemplateSchema:o,collectionStore:n}=e;const i=(0,v().S1)({collectionStore:n,templateId:t,instancePointerType:"property"});if(!i)return o.options??[];const r=n.getSchema()[i.id];if(!r||!(0,l().DQ)(r))return[];return r.options??[]}({templateId:t.templateId,propertyTemplateSchema:e,collectionStore:o}).map((e=>e.value));return(0,b().getWorkflowTemplateItemsCaption)(n)}return;case"collection_view":return`${g().A.formatMessage(u().X[t.value.type])} view`;case"compound":return;default:(0,s().HB)(n)}}({template:o,collectionStore:p})),[o,p]),S=(0,b().getWorkflowTemplateName)(o);return a?(0,I.jsx)(d().I,{buttonMenuItemProps:t,title:S,icon:(0,I.jsx)(A().n,{template:o}),right:(0,I.jsx)(_().z,{isAdded:y})}):(0,I.jsx)(d().I,{buttonMenuItemProps:t,title:S,caption:f,icon:(0,I.jsx)("div",{style:c.iconContainer,children:(0,I.jsx)(A().z,{template:o,iconStyle:c.icon})}),right:(0,I.jsx)(T()._,{})})}},374886:(e,t,o)=>{o.d(t,{O:()=>l});var n=o(242343),i=()=>o(237385),r=()=>o(803290),a=()=>o(137476);function l(e){let{collectionContextStore:t,shownTemplateIds:o,origin:l}=e;const s=(0,i().v3)(),c=(0,r().K8)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getWorkflowTemplateId()}),[t]),p=(0,n.useRef)(!1);(0,n.useEffect)((()=>{!p.current&&o.length>0&&((0,a().u4)({environment:s,event:{eventName:"suggested_feature_templates_shown",eventProperties:{origin:l,collection_template_id:c,template_ids_shown:o}}}),p.current=!0)}))}},413995:(e,t,o)=>{o.d(t,{z:()=>l});o(242343);var n=()=>o(174114),i=()=>o(539645),r=()=>o(280704),a=o(163643);function l(e){let{isAdded:t}=e;const o=(0,n().IS)((e=>({circle:{height:24,width:24,borderRadius:50,display:"flex",alignItems:"center",justifyContent:"center",background:t?"dark"===e.mode?e.accentColors.blue[100]:e.accentColors.blue[50]:e.lightGrayButtonBackground},plusIcon:{height:15,width:15,fill:e.mediumIconColor},checkIcon:{height:12,width:12,fill:e.blueColor}})),[t]);return(0,a.jsx)("div",{style:o.circle,children:t?(0,i().o)(o.checkIcon):(0,r().b)(o.plusIcon)})}},471685:(e,t,o)=>{o.d(t,{I:()=>p,h:()=>c});o(242343);var n=()=>o(237385),i=()=>o(174114),r=()=>o(31448),a=()=>o(535906),l=()=>o(622163),s=o(163643);function c(e){let{environment:t}=e;return{padding:t.device.isMobile?"12px 2px":"6px",alignItems:"center"}}function p(e){let{buttonMenuItemProps:t,title:o,caption:p,icon:d,onClick:u,right:m,isDisabled:g}=e;const y=(0,n().v3)(),f=(0,i().IS)((e=>({menuItem:{display:"flex",...c({environment:y}),opacity:g?.4:void 0},title:{fontSize:(0,l().ny)(y,"UIRegular"),...r().RC},caption:{fontSize:(0,l().ny)(y,"UISmall"),overflow:"hidden",color:e.text.secondary,whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[y,g]),S={};return u&&(S.onClick=u),(0,s.jsx)(a().A,{...t,style:f.menuItem,disabled:g,title:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:f.title,children:o}),p&&(0,s.jsx)("div",{style:f.caption,children:p})]}),icon:d,right:m,...S})}},590091:(e,t,o)=>{o.d(t,{V:()=>a,i:()=>l});var n=()=>o(803290),i=()=>o(496580),r=()=>o(749975);function a(){const e=(0,r().ET)(),{collectionStore:t,collectionViewStore:o,collectionSettingsStore:i}=(0,n().K8)((()=>l(e)),[e]);return{collectionStore:t,collectionViewStore:o,collectionSettingsStore:i,collectionContextStore:e}}function l(e){return{collectionStore:(0,i().o9)(e.collectionStore(),"collectionStore not found"),collectionViewStore:(0,i().o9)(e.collectionViewStore(),"collectionViewStore not found"),collectionSettingsStore:e.settingsStore}}},591966:(e,t,o)=>{o.d(t,{$:()=>u,N:()=>p});o(362833),o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601),o(725707),o(491955),o(324989),o(403517);var n=()=>o(994966),i=()=>o(505966),r=()=>o(975392),a=()=>o(76394),l=()=>o(360482),s=()=>o(940445),c=()=>o(727528);function p(e,t){const o=(0,c().Xg)(e,t),n=new Set(function(e){const t=e.getParentBlockStore();if(null==t||!t.isDefined())return[];return(null==t?void 0:t.getCollectionViewStores().map((e=>e.getName())).filter(a().O9))??[]}(t));return function(e){const t=new Set(e.map((e=>e.templateId))),o=[];for(const n of e)o.push(...d(n).filter((e=>!t.has(e))).map((e=>s().globalWorkflowTemplates.fromId(e))).filter(i().bz).filter((e=>!(0,i().Sz)(e))));return o}(o).filter((e=>"collection_view"!==e.type||!n.has(e.value.name??"")))}function d(e){return"compound"===e.type||"collection"===e.type?e.value.templateItems.filter((e=>"optionalDefaultOn"===e.optionality||"optionalDefaultOff"===e.optionality)).map((e=>e.pointer)):[]}function u(e){let{persona:t,parentStore:o}=e;const i=t?(0,n().Qf)({persona:t}):[],a=s().globalWorkflowTemplates.allOfType({templateIds:i??[],type:"collection"}),c=r().hS(function(e){let{collectionTemplates:t,parentStore:o}=e;if(!o)return t;if((0,l().Yu)(o))return t;const n=(0,l().$R)(o)?o.getTeamPageStores():o.getContentStores(),i=new Set((0,r().oE)(n.flatMap((e=>{var t;return(null===(t=e.getCollectionStores())||void 0===t?void 0:t.map((e=>e.getWorkflowTemplateId())))??[]})))),a=[],s=[];for(const r of t)i.has(r.templateId)?a.push(r):s.push(r);return[...s,...a]}({collectionTemplates:[...a,...s().globalWorkflowTemplates.allOfType({templateIds:(0,n().dj)(),type:"collection"})],parentStore:o}),(e=>e.templateId));return c}},678523:(e,t,o)=>{o.d(t,{A:()=>l});o(242343);var n=()=>o(237385),i=()=>o(174114),r=()=>o(126451),a=o(163643);function l(e){const t=(0,n().Y0)(),o=(0,i().IS)((e=>({sharedStyle:{display:"flex",alignItems:"center",borderRadius:4},innerStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.defaultBadgeBackground,fontSize:t.isMobile?11:9,lineHeight:t.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[t.isAndroid,t.isMobile]);return t.isMobile?(0,a.jsx)(r().A,{style:{...o.sharedStyle,...e.mobileStyle},disabled:void 0===e.onClick,children:(0,a.jsx)("div",{style:{...o.innerStyle,...e.innerStyle},children:e.children})}):(0,a.jsx)(r().A,{style:{...o.sharedStyle,...e.desktopStyle},disabled:void 0===e.onClick,...e,children:(0,a.jsx)("div",{style:{...o.innerStyle,...e.innerStyle},children:e.children})})}},716430:(e,t,o)=>{o.d(t,{Sj:()=>s,UD:()=>l});o(610931);var n=()=>o(521325),i=()=>o(259897),r=()=>o(727528);const a={property:function(e){let{template:t,collectionStore:i,collectionViewStore:a,collectionSettingsStore:l}=e;const s=(0,r().S1)({collectionStore:i,templateId:t.templateId,instancePointerType:"property"});if(!s)throw new Error(`No property instance found for property template ${t.templateId}`);const c=a.getType();n().a2({collectionSettingsStore:l,item:{type:"property",property:s.id,formatKey:c?o(810111).u9(c):void 0}})},collection_view:function(e){let{template:t,environment:o,collectionStore:n,collectionContextStore:i}=e;const a=(0,r().S1)({collectionStore:n,templateId:t.templateId,instancePointerType:"collection_view"});if(!a)throw new Error(`No collection view instance found for property template ${t.templateId}`);s({environment:o,collectionContextStore:i,collectionViewId:a.id})},compound:function(e){}};function l(e){a[e.template.type](e)}function s(e){var t;let{environment:o,collectionContextStore:r,collectionViewId:a}=e;(null===(t=r.collectionViewStore())||void 0===t?void 0:t.id)!==a&&(0,i().t)({environment:o,collectionContextStore:r,collectionViewId:a,isFullScreen:r.isFullScreenStore.state,isRootChild:r.isRootChildStore.state,isInPeekRenderer:r.isInPeekRendererStore.state}),n().a2({collectionSettingsStore:r.settingsStore,item:{type:"main"}})}},772180:(e,t,o)=>{o.r(t),o.d(t,{WorkflowSettingsConfirmAddTemplate:()=>C,isWorkflowTemplateWithConfirmStep:()=>M});o(610931);var n=o(242343),i=()=>o(237385),r=()=>o(174114),a=()=>o(505966),l=()=>o(653998),s=()=>o(975392),c=()=>o(521325),p=()=>o(84543),d=()=>o(3364),u=()=>o(948120),m=()=>o(932322),g=()=>o(951540),y=()=>o(88271),f=()=>o(749975),S=()=>o(137476),h=()=>o(605845),b=()=>o(716430),v=()=>o(940445),w=(o(403517),()=>o(752903)),T=()=>o(837809),x=o(163643);function _(e){let{template:t,style:o}=e;const n=(0,r().IS)((e=>({container:{...o,padding:12,border:`1px solid ${e.regularDividerColor}`,borderRadius:6}})),[o]),i=function(e){if((0,a().Xq)(e,"property")&&(0,a().Io)(e)){const{options:t=[]}=e.value;if(0===t.length)return;return(0,x.jsx)(A,{options:t})}}(t);return i?(0,x.jsx)("div",{style:n.container,children:i}):null}function A(e){let{options:t}=e;const o=(0,r().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:8}})),[]);return(0,x.jsx)("div",{style:o.container,children:t.map((e=>(0,x.jsx)("div",{children:(0,x.jsx)(T().O,{format:w().NY.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1})},e.id)))})}var I=()=>o(194585);function C(e){let{template:t,collectionSettingsStore:o}=e;const[a,s]=(0,n.useState)("sample"===t.propertyOptionsType),{device:{isMobile:c}}=(0,i().v3)(),p=(0,r().IS)((e=>{const t={display:"flex",flexDirection:"column",minHeight:0};return{shrinkableHeight:t,noShrink:{flexShrink:0},featurePreviewWrapper:{...t,width:"-webkit-fill-available"},featurePreviewBody:{...t,gap:16,...c?{margin:"16px 0"}:{margin:0}},featurePreview:{...t,overflow:"auto"},addButtonContainer:{...c?{margin:"12px 0"}:{marginBottom:6}}}}),[c]),g=(0,v().getWorkflowTemplateName)(t);return(0,x.jsxs)(d().Ay,{collectionSettingsStore:o,title:(0,x.jsx)(l().sA,{id:"workflowTemplateSettings.confirmAddTemplate.title",defaultMessage:"Turn on {templateName}",values:{templateName:g}}),disableScroller:!0,menuScrollerStyle:p.shrinkableHeight,innerContentWrapperStyle:p.shrinkableHeight,children:[(0,x.jsx)(y().A,{style:p.shrinkableHeight,children:(0,x.jsx)(m().Ay,{style:p.shrinkableHeight,textWrapperStyle:p.featurePreviewWrapper,bodyStyle:p.featurePreviewBody,body:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(k,{template:t,style:p.noShrink}),(0,x.jsx)(_,{template:t,style:p.featurePreview})]})})}),(0,x.jsx)(y().A,{style:p.noShrink,children:t.value.options&&t.value.options.length>0&&(0,x.jsx)(u().A,{title:(0,x.jsx)(l().sA,{id:"workflowTemplateSettings.confirmAddTemplate.propertyOptionsToggle",defaultMessage:"Set my own options"}),switcherProps:{on:a,disallowTabbing:!0},onClick:()=>{s(!a)}})}),(0,x.jsx)(y().A,{style:p.noShrink,children:(0,x.jsx)(m().Ay,{body:(0,x.jsx)(P,{template:t,startEmpty:a}),bodyStyle:p.addButtonContainer})})]})}function k(e){let{template:t,style:o}=e;const n=(0,i().Y0)(),l=(0,r().IS)((()=>({container:{...o,display:"flex",alignItems:"center",gap:12},textWrapper:{lineHeight:n.isMobile?"20px":"18px"},title:{fontSize:n.isMobile?16:13},caption:{fontSize:n.isMobile?14:12,overflow:"hidden",color:"gray",whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[n,o]),s=(0,v().getWorkflowTemplateName)(t),c=(0,a().Uy)(t);return(0,x.jsxs)("div",{style:l.container,children:[(0,x.jsx)(I().n,{template:t,backgroundSize:32}),(0,x.jsxs)("div",{style:l.textWrapper,children:[(0,x.jsx)("div",{style:l.title,children:s}),c&&(0,x.jsx)("div",{style:l.caption,children:c})]})]})}function P(e){let{template:t,startEmpty:o}=e;const n=(0,r().IS)((()=>({button:{width:"100%"}})),[]),a=(0,i().v3)(),d=(0,f().ET)(),u=(0,v().getWorkflowTemplateName)(t),m=s().mg(t);return o&&delete m.value.options,(0,x.jsx)(g().A,{style:n.button,size:"lg",onClick:()=>{p().createAndCommit({userAction:"WorkflowSettingsConfirmAddTemplate.addFeatureTemplateToTarget",environment:a,canUndo:!0,perform:e=>{const o=d.collectionStore();if(!o)throw new Error("collectionStore not found");h().ai({environment:a,transaction:e,collectionStore:o,template:m,logger:new(v().WorkflowTemplateLogger),origin:"suggested_feature"});const n=d.settingsStore;c().yl({collectionSettingsStore:n});const i=o.getWorkflowTemplateId();(0,S().u4)({environment:a,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:"suggested_properties",template_id_added:t.templateId,collection_template_id:i}}});const r=d.collectionViewStore();r&&(0,b().UD)({template:t,environment:a,collectionStore:o,collectionViewStore:r,collectionSettingsStore:n,collectionContextStore:d})}})},children:(0,x.jsx)(l().sA,{id:"workflowTemplateSettings.confirmAddTemplate.button",defaultMessage:"Add {templateName}",values:{templateName:u}})})}function M(e){return"property"===e.type&&("select"===e.value.type||"multi_select"===e.value.type)}},895721:(e,t,o)=>{o.d(t,{A:()=>d});o(242343);var n=()=>o(237385),i=()=>o(803290),r=()=>o(653998),a=()=>o(88442),l=()=>o(485966),s=()=>o(795756),c=()=>o(695951),p=o(163643);function d(e){const{message:t}=e,o=(0,n().v3)();return(0,i().K8)((()=>{const e=l().default.state.mainEditorCurrentBlockStore,t=e&&s().A.getMode(o,e);return(0,a().ZE)(t)}),[o])?(0,p.jsx)(c().A,{color:"purple",style:{padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,...e.style},content:t??(0,p.jsx)(r().sA,{id:"aiBadgeComponent.label",defaultMessage:"AI"})}):null}},921734:(e,t,o)=>{o.d(t,{_:()=>a});o(242343);var n=()=>o(174114),i=()=>o(855470),r=o(163643);function a(){const e=(0,n().IS)((e=>({icon:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out"}})),[]);return(0,r.jsx)(r.Fragment,{children:(0,i().V)(e.icon)})}},948120:(e,t,o)=>{o.d(t,{A:()=>i});o(242343);var n=o(163643);const i=function(e){let{switcherProps:t,...i}=e;return(0,n.jsx)(o(44405).A,{right:(0,n.jsx)(o(431551).A,{onClick:i.onClick,disabled:i.disabled,...t}),...i})}},961716:(e,t,o)=>{o.d(t,{Y:()=>l});var n=()=>o(237385),i=()=>o(803290),r=()=>o(591966),a=()=>o(235786);function l(e){const t=(0,n().v3)();return(0,a().b)(e),(0,i().K8)((()=>{const o=e.collectionStore();return o?(0,r().N)(t,o):[]}),[t,e])}}}]);