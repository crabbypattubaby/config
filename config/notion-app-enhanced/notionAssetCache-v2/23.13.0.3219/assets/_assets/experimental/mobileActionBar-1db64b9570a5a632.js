"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[49222],{33176:(e,t,i)=>{i.d(t,{lT:()=>c});i(362833);var o=()=>i(486826),n=()=>i(141666),a=()=>i(524118);const r=7;function s(e){if(void 0===e)return o().c9.utc();const t={zone:"utc"};return"number"==typeof e?o().c9.fromMillis(e,t):o().c9.fromISO(e,t)}function l(e,t){const i=t?s(t):o().c9.utc(),n=s(e??function(e){const{days:t,endDate:i,startDate:n}=e;if(t<=0)throw new(a().yI4)("Days must be greater than 0");const r=i?s(i):o().c9.utc();if(!r.isValid)throw new(a().yI4)(`endDate ${i} is in an invalid format`);const l=n?s(n).toMillis():0,c=r.minus({days:t-1}).toMillis();return Math.max(c,l)}({days:r,endDate:t}));if(!n.isValid)throw new(a().yI4)(`startDate ${e} is in an invalid format`);if(!i.isValid)throw new(a().yI4)(`endDate ${t} is in an invalid format`);if(n>i)throw new(a().yI4)(`startDate ${e} => ${n.toISO()} is after endDate ${t} => ${i.toISO()}`);return{startTimestamp:n.toMillis(),endTimestamp:i.toMillis()}}function c(e,t){const{startTimestamp:i,endTimestamp:o}=l(e,t),a=[];let r=i;for(;r<=o;)a.push(s(r).toISODate()),r+=n().nD;return a}},60525:(e,t,i)=>{i.d(t,{A:()=>n});i(242343);var o=i(163643);const n=function(e){let{loading:t,onLoadMore:n,loadMoreOffsetThreshold:a,resultSize:r,fetchSize:s}=e;return(0,o.jsx)(i(168980).A,{onChange:e=>function(e,t,i,o,n,a){if(t)return;const r=o||200;if(e>r)return;const s=void 0===n||void 0===a||n>=a;s&&i()}(e,t,n,a,r,s)})}},64256:(e,t,i)=>{i.d(t,{BY:()=>f,Lg:()=>y,id:()=>x,nE:()=>S,xi:()=>h});i(362833),i(725707),i(324989),i(403517);var o=()=>i(502140),n=()=>i(707781),a=()=>i(446588),r=()=>i(647242),s=()=>i(818369),l=()=>i(919536),c=()=>i(575015),d=()=>i(477784),u=()=>i(485966),m=()=>i(436622),g=()=>i(138385),b=()=>i(133926),p=()=>i(307542),v=()=>i(814059);async function f(e){const{environment:t,spaceStore:i,contextualInviteStore:o}=e;!function(e){const{spaceStore:t,contextualInviteStore:i}=e,o=t.getRole();if(!o||!(0,a().NB)(o))return!1;if(!i.hasGuests())return!1;if(t.getDisableMembershipRequests())return!1;return(0,p().x3)()}({environment:t,spaceStore:i,contextualInviteStore:o})?await async function(e){const{spaceStore:t,contextualInviteStore:i,environment:o}=e,n=t.getRole();if(!n||!(0,a().vp)(n))return!1;if(!i.hasGuests())return!1;return await(0,b().Se)(o,{name:"members",spaceId:t.id,userId:t.userId,amount:1})}({environment:t,spaceStore:i,contextualInviteStore:o})?o.startWorkspaceInvite():o.setState({...o.state,inviteStage:g().d5.closed}):o.startRequestMembership()}async function y(e){const{environment:t,spaceStore:i,contextualInviteStore:n,from:a,intl:r}=e,{selection:s,flowId:d}=n.state;if("page_guest"===s||!n.hasGuests())return n.reset(),!1;const{inviteTargets:u,unknownEmails:m}=await k({environment:t,contextualInviteStore:n}),g={...n.state};n.reset();const p=await(0,b().Se)(t,{name:"non_admin_members",spaceId:i.id,userId:i.userId})?e.inviteRole??"read_and_write":"editor";try{await l().eP({environment:t,store:i,inviteTargets:u,inviteRole:p,isOnboarding:!1,invite:{inviteOrigin:a,inviteFlowId:d,disable_invite_email:!0}})}catch(v){return function(e,t){if(0===t.length)return;c().D6({label:e.formatMessage({id:"contextual_invite.contextual_invite_failure",defaultMessage:"{userCount, plural, one {Failed to invite {users} as member} other {Failed to invite {users} as members}}"},{users:x(t,e),userCount:t.length})})}(r,g.invitedUsers),o().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.inviteTargets",data:{miscDataToConvertToString:{...g,inviteTargets:u}}}),!1}finally{m.length&&o().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.unknownUserId",data:{miscDataToConvertToString:{...g,unknownEmails:m}}})}return!0}async function h(e){const{environment:t,spaceStore:i,originId:n,originType:a,reasonMessage:r,contextualInviteStore:l,intl:d}=e,{selection:u}=l.state;if("page_guest"===u||!l.hasGuests())return l.reset(),!1;const{inviteTargets:m,unknownEmails:g}=await k({environment:t,contextualInviteStore:l}),b={...l.state};l.reset();const p=[];try{const e=m.map((e=>s().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",forActorId:e.value.id,spaceId:i.id,message:r,attributes:{origin_id:n,origin_type:a,origin_table:"share_menu"===a?"block":"space",add_permissions_on_approval:!1}}}).catch((()=>p.push(e)))));await Promise.all(e)}catch(v){return function(e,t){if(0===t.length)return;c().D6({label:e.formatMessage({id:"contextual_invite.request_members_failure",defaultMessage:"Failed to request {users} to become members"},{users:x(t,e)})})}(d,b.invitedUsers),o().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.inviteTargets",data:{miscDataToConvertToString:{...b,inviteTargetsWithErrors:p}}}),!1}finally{g.length&&o().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.unknownUserId",data:{miscDataToConvertToString:{...b,unknownEmails:g}}})}return!0}async function k(e){const{environment:t,contextualInviteStore:i}=e,{invitedEmailToUserIdMap:o}=i.state,n=[],a=[];for(const r of i.state.invitedUsers){if(!r.isGuest)continue;const e=await A(t,r,o);e?n.push({type:"existingUser",value:{id:e,email:r.email,version:1}}):a.push(r.email)}return{inviteTargets:n,unknownEmails:a}}async function A(e,t,i){const o=await async function(e,t,i){let o=t.id;if(o||(o=i[t.email]),!o){const i=await s().callApi({eventName:"findUser",environment:e,data:{email:t.email}});if("failed"!==i.type){const e=i.data;e.value&&(o=e.value.value.id)}}return o}(e,t,i);if(o)return o;const a=(0,n().H)(d().A.getIntl()),r=await s().callApi({eventName:"createEmailUser",environment:e,data:{email:t.email,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:a}});return"failed"!==r.type?r.data.userId:void 0}function x(e,t){return(0,v().l)(e.flatMap((e=>e.email||[])))}function S(e,t){var i;const{state:o}=t,n=null===(i=u().default.state.currentSpaceStore)||void 0===i?void 0:i.id,a=n?(0,r().AI)(m().A.getData(e,{spaceId:n})):void 0,s=t.getGuestEmails();return{invite_flow_id:o.flowId,user_count:s.length,user_emails:s,invite_space_role_selection:o.selection,is_bot:!1,subscription_tier:a}}},87464:(e,t,i)=>{i.r(t),i.d(t,{default:()=>P});var o=i(242343),n=()=>i(237385),a=()=>i(803290),r=()=>i(174114),s=()=>i(653998),l=()=>i(993659),c=()=>i(373143),d=()=>i(810310),u=()=>i(649334),m=()=>i(640979),g=()=>i(707423),b=()=>i(245313),p=()=>i(342338),v=()=>i(466321),f=()=>i(129044);class y extends f().default{getInitialState(){return{}}}const h=y;class k extends f().default{getInitialState(){return{isOpen:!1,isInsertOpen:!1,isTurnIntoOpen:!1,isColorOpen:!1,isTemplatesOpen:!1}}}const A=k;var x=()=>i(134915),S=()=>i(182613),T=()=>i(518397),M=()=>i(935091),w=()=>i(743668),C=()=>i(443252),I=()=>i(232780),_=()=>i(978060),B=i(163643);const P=function(e){let{currentBlockStore:t,makeActionBarComponent:r,isNativeMobileActionBar:s}=e;const l=(0,n().v3)(),c=(0,i(556078).S)(),d=(0,a().uB)(void 0,i(210466).A),u=(0,a().uB)(void 0,h),m=(0,a().uB)(void 0,A),p=(0,a().K8)((()=>g().rV(l,t,null==c?void 0:c.publicEditModeStore.state)),[l,t,c]),{shouldShow:v}=p,{device:f,WindowSizeStore:y}=l,k=(0,a().K8)((()=>function(e,t,i){const{device:o}=e;return o.isMobileBrowser?t.state.isOpen:i}(l,m,v)),[l,m,v]),x=(0,a().K8)((()=>y.state.paddingBottomCSS),[y]),S=(0,i(955885).A)(!0),T=l.NativeMobileActionBarStore,M=(0,a().K8)((()=>g().jk(l)),[l]),w=(0,a().K8)((()=>"editing"!==i(205670).default.state.mode&&Boolean(null==T?void 0:T.state.shouldRestoreSelectionForMenu)),[T]);return(0,b().A)({shouldPreserveTextSelection:M,shouldPreserveBlockSelection:!1,shouldRestoreSelection:w}),(0,B.jsxs)(o.Fragment,{children:[(0,B.jsxs)("div",{...S,style:{position:"relative",width:"100%",height:0,zIndex:99},children:[r({store:m,ignoreSelectionAreaStore:u,templatePickerMenuListStore:d}),!s&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(j,{store:m}),(0,B.jsx)(U,{store:m}),(0,B.jsx)(L,{store:m})]}),(0,B.jsx)(D,{})]}),!k&&f.isIPhoneX&&f.isNative&&(0,B.jsx)("div",{style:{position:"absolute",bottom:0,background:"transparent",height:x,width:"100%",pointerEvents:"none",WebkitUserSelect:"none"}})]})};function R(e){e.setState({...e.state,isInsertOpen:!1})}function j(e){let{store:t}=e;const i=(0,n().v3)(),r=(0,o.useCallback)((()=>R(t)),[t]),{device:l}=i,d=(0,a().K8)((()=>t.state.isInsertOpen),[t]),u=(0,o.useMemo)((()=>(0,c().s7)(i)),[i]),{insertActions:g}=(0,a().O$)(u);return(0,B.jsx)(C().Ay,{popupType:l.isMobile?v().n.SlideUp:v().n.Popup,preventBlockRenderQueueOnEnter:!0,open:d,keepFocus:!0,onDismiss:()=>{R(t)},render:()=>(0,B.jsx)(M().A,{menuType:m().gu.Modal,title:(0,B.jsx)(s().sA,{defaultMessage:"Insert block",id:"mobileActionBar.insertBlock.modalTitle"}),right:(0,B.jsx)(w().CancelMenuText,{}),onClickRight:()=>{R(t)},children:(0,B.jsx)(T().A,{sections:g,context:{environment:i,blocks:S().default.state.stores,publicEditMode:void 0,analyticsFrom:"mobile_action_bar_actions"},onAccept:r})})})}function U(e){let{store:t}=e;const i=(0,n().v3)(),r=(0,o.useCallback)((()=>function(e){e.setState({...e.state,isTurnIntoOpen:!1})}(t)),[t]),l=(0,a().K8)((()=>t.state.isTurnIntoOpen),[t]);(0,b().A)({shouldPreserveTextSelection:l,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0});const{device:c}=i;return(0,B.jsx)(C().Ay,{popupType:c.isMobile?v().n.SlideUp:v().n.Popup,open:l,keepFocus:!0,onDismiss:r,preventBlockRenderQueueOnEnter:!0,render:()=>(0,B.jsx)(M().A,{menuType:m().gu.Modal,title:(0,B.jsx)(s().sA,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.modalTitle"}),right:(0,B.jsx)(w().CancelMenuText,{}),onClickRight:r,children:(0,B.jsx)(T().A,{sections:[{...d().t3,title:""}],context:{environment:i,blocks:S().default.state.stores,publicEditMode:void 0,analyticsFrom:"mobile_action_bar_actions"},onAccept:r})})})}function L(e){let{store:t}=e;const i=(0,n().v3)(),r=(0,o.useCallback)((()=>function(e){e.setState({...e.state,isColorOpen:!1})}(t)),[t]),{device:c}=i,d=(0,a().K8)((()=>t.state.isColorOpen),[t]);return(0,b().A)({shouldPreserveTextSelection:d,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0}),(0,B.jsx)(C().Ay,{popupType:c.isMobile?v().n.SlideUp:v().n.Popup,open:d,keepFocus:!0,onDismiss:r,preventBlockRenderQueueOnEnter:!0,render:()=>(0,B.jsx)(M().A,{menuType:m().gu.Modal,title:(0,B.jsx)(s().sA,{defaultMessage:"Block color",id:"mobileActionBar.blockColor.modalTitle"}),right:(0,B.jsx)(w().CancelMenuText,{}),onClickRight:r,children:(0,B.jsx)(T().A,{sections:[l().kl,l().qW,l().J1],context:{environment:i,blocks:S().default.state.stores,publicEditMode:void 0,analyticsFrom:"mobile_action_bar_actions"},onAccept:r})})})}function D(){const e=(0,n().v3)(),t=(0,r().IS)((e=>({popupStyles:{background:e.contentBackground}})),[]),i=(0,o.useCallback)((()=>function(e,t){const i=x().A.state.isFromNativeHome;x().A.setState({open:!1}),t.shouldCancel&&i&&(0,_().handleCancelQuickAdd)(e,{isMobileHorizon1QuickCapture:!1})}(e,{shouldCancel:!0})),[e]),{isTemplatesOpen:l}=(0,a().K8)((()=>({isTemplatesOpen:x().A.state.open})),[]);(0,b().A)({shouldPreserveTextSelection:l,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0});const{device:c}=e;return(0,B.jsx)(C().Ay,{popupType:c.isMobile?v().n.SlideUp:v().n.Popup,open:l,onDismiss:i,keepFocus:!0,style:t.popupStyles,render:()=>(0,B.jsx)(M().A,{menuType:m().gu.Modal,whiteBackground:!0,disableHeaderShadow:l,hideMobileTopbar:l,title:(0,B.jsx)(s().sA,{defaultMessage:"Templates",id:"mobileActionBar.templates.modalTitle"}),right:(0,B.jsx)(I().CloseTemplatesPopupComponent,{handleClick:i,style:{marginRight:20}}),disableScroller:!0,onClickRight:i,shouldRenderRightDirectly:!0,onCancel:i,forceFullScreenSlideUp:!0,children:(0,B.jsx)(p().A,{onTemplateItemSelect:t=>{u().openWithItem({environment:e,item:t,createNewPage:!1,isPrivate:!1,disablePointerEvents:!0})},onClose:i})})})}},93004:(e,t,i)=>{i.d(t,{P:()=>r});var o=()=>i(21164),n=()=>i(818369),a=()=>i(413871);async function r(e){const{environment:t,teamStore:i}=e,r=null==i?void 0:i.getSpaceId(),s=i&&r&&{id:i.id,table:o().Vl,spaceId:r},l=i&&s&&a().md.createChildStore(i,s),c=l&&l.isReady()&&!l.isDefined()&&l.canEdit();if(i&&r&&l&&c){const e=await n().callApi({eventName:"createCollectionViewBlockForPosts",environment:t,data:{spaceId:r,teamId:i.id}});if("failed"===e.type)throw e.error;if("success"===e.type){const{collectionViewBlockId:t}=e.data;return t}}}},98809:(e,t,i)=>{i.d(t,{A:()=>s});i(242343);var o=()=>i(174114),n=()=>i(711361),a=()=>i(126451),r=i(163643);function s(e){let{onClick:t,className:i,isMobile:s,style:l,onFocus:c,onBlur:d,onMouseDown:u,onMouseEnter:m,onMouseLeave:g}=e;const{buttonStyle:b,iconStyle:p}=(0,o().IS)((e=>({buttonStyle:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,borderRadius:6,width:s?45:24,height:s?45:24,marginRight:s?-8:-6,...l},iconStyle:{width:s?18:14,height:s?18:14,fill:e.mediumIconColor}})),[s,l]);return(0,r.jsx)(a().A,{onClick:t,style:b,className:i,mobileFeedback:s,onFocus:c,onBlur:d,onMouseDown:u,onMouseEnter:m,onMouseLeave:g,children:(0,n()._)(p)})}},115692:(e,t,i)=>{i.r(t),i.d(t,{iconDefinition:()=>o,peopleIcon:()=>n});i(242343);const o={viewBox:"0 0 20 20",svg:(0,i(163643).jsx)("path",{d:"M11.794 3.936c.57-.71 1.414-1.141 2.456-1.141s1.886.43 2.456 1.14c.558.696.823 1.618.823 2.582s-.265 1.885-.823 2.58c-.57.71-1.414 1.141-2.456 1.141s-1.886-.43-2.456-1.14c-.558-.696-.823-1.618-.823-2.581 0-.964.265-1.886.823-2.581m.975.782c-.341.426-.548 1.052-.548 1.799s.207 1.373.548 1.798c.33.41.813.673 1.481.673s1.152-.262 1.481-.673c.342-.425.548-1.051.548-1.798s-.206-1.373-.548-1.799c-.33-.41-.813-.673-1.48-.673-.67 0-1.152.263-1.482.673M5.75 3.625c-.957 0-1.734.396-2.259 1.05-.513.64-.755 1.484-.755 2.362s.242 1.723.755 2.362c.525.654 1.302 1.05 2.259 1.05s1.734-.396 2.259-1.05c.513-.64.755-1.484.755-2.362s-.242-1.723-.755-2.362c-.525-.654-1.302-1.05-2.259-1.05M3.986 7.037c0-.661.183-1.21.48-1.58.284-.354.701-.582 1.284-.582s1 .228 1.284.582c.297.37.48.919.48 1.58s-.183 1.21-.48 1.58c-.284.354-.701.582-1.284.582s-1-.228-1.284-.583c-.297-.37-.48-.918-.48-1.579m-.948 8.918h4.69c.114.467.337.894.634 1.25H3.038c-.68 0-1.327-.286-1.742-.764-.432-.498-.606-1.209-.265-1.92.823-1.72 2.636-2.896 4.719-2.896 1.13 0 2.18.346 3.035.936a6.6 6.6 0 0 0-.681 1.05 4.1 4.1 0 0 0-2.354-.736c-1.611 0-2.98.908-3.592 2.186-.1.21-.063.393.082.56.161.186.455.334.798.334M14.25 11.21c-2.334 0-4.354 1.36-5.202 3.323-.31.715-.125 1.419.308 1.912.419.476 1.065.76 1.744.76h6.3c.679 0 1.325-.284 1.743-.76.434-.493.618-1.197.309-1.912-.848-1.963-2.868-3.324-5.202-3.324m-4.055 3.818c.646-1.494 2.208-2.569 4.055-2.569s3.409 1.075 4.054 2.57a.52.52 0 0 1-.1.59c-.166.19-.461.336-.804.336h-6.3c-.343 0-.639-.146-.805-.336a.52.52 0 0 1-.1-.59"})},n=(0,i(680369).wt)("people",o)},127776:(e,t,i)=>{i.d(t,{Vs:()=>C,gj:()=>w,hX:()=>B,oH:()=>_,v4:()=>I});i(610931);var o=()=>i(488587),n=()=>i(502140),a=()=>i(427091),r=()=>i(214144),s=()=>i(218357),l=()=>i(412527),c=()=>i(779470),d=()=>i(34662),u=()=>i(539174),m=()=>i(818369),g=()=>i(649334),b=()=>i(84543),p=()=>i(477784),v=()=>i(213124),f=()=>i(904697),y=()=>i(513060),h=()=>i(196387),k=()=>i(320462),A=()=>i(485966),x=()=>i(413871),S=()=>i(810733),T=()=>i(93004),M=()=>i(628854);async function w(e){let{environment:t,name:i,description:o,icon:n,accessLevel:a,isDefault:r,flowId:l,createTeamHome:c,teamPermissionRole:d,spacePermissionRole:g,members:b,settings:p}=e;const{currentSpaceStore:v}=A().default.getState();if(!v)throw new Error("currentSpaceStore does not exist");const f=h().default.mark("client_create_team_latency"),y=v.id,k=await m().callApi({eventName:"createTeam",environment:t,data:{spaceId:y,name:i,description:o,icon:n,isDefault:r,accessLevel:a,teamPermissionRole:d,spacePermissionRole:g,members:b,settings:p}});if("failed"===k.type)return void(0,M().O)(k);const{teamId:S}=k.data,w=x().h4.createChildStore(v,{table:s().yK,id:S,spaceId:y});return await w.load(),(0,T().P)({environment:t,teamStore:w}),c&&P({environment:t,teamStore:w}),u()._P(t,{store:w,flowId:l}),h().default.measure(f,{environment:t}),w}function C(e){var t;let{environment:i,page:o}=e;const n=r().JW(),a=(null===(t=o.getParentPointer())||void 0===t?void 0:t.table)!==s().yK?"page_to_team_nested":"page_to_team";u().H8(i,{from:a,flowId:n}),S().A.setState({open:!0,pageStore:o,flowId:n})}async function I(e){var t;let{environment:i,page:o,flowId:n,intl:r}=e;const{accessLevel:l,spacePermissionRole:c,teamPermissionRole:u,members:m}=(0,f().getAccessLevelAndPermissionsForTeamCreatedFromPage)(o),g=(o.isDefined()?o.getModel().getRenderTitle({intl:r,userTimeZone:(0,a().P)(),getRecordModel:o.getRecordModel}):void 0)??d().q4_(o.getTitleValue()),p=await w({environment:i,name:g,icon:null===(t=o.getIcon())||void 0===t?void 0:t.icon,accessLevel:l,isDefault:!1,description:"",flowId:n,createTeamHome:!1,teamPermissionRole:u,spacePermissionRole:c,members:m});if(!p)return;const{currentSpaceViewStore:v}=A().default.state;if(!v)return;const h=await(0,y().U)();b().createAndCommit({userAction:"teamActions.movePageToCreatedTeam",environment:i,canUndo:!0,perform:e=>{h({environment:i,currentSpaceViewStore:v,transaction:e,teamStore:p,action:"move",value:{type:s().yK,id:p.id},targets:[o],location:{type:"append"}})}}),(0,M().F2)({environment:i,teamId:p.id,tab:k().p.Members,from:"create_team_from_page"}),await new Promise((e=>setTimeout((()=>(0,M().Mh)({teamStore:p,environment:i})),100)))}async function _(e){let{environment:t,name:i,description:o,icon:n,flowId:a,trackCreateTeamComplete:r}=e;const{currentSpaceStore:l}=A().default.getState();if(!l)throw new Error("currentSpaceStore does not exist");const c=l.id,d=await m().callApi({eventName:"enableTeams",environment:t,data:{spaceId:c,defaultTeamName:i,defaultTeamIcon:n,defaultTeamDescription:o}});if("failed"===d.type)return void(0,M().O)(d);const{teamId:g}=d.data,b=x().h4.createChildStore(l,{table:s().yK,id:g,spaceId:c});return await b.load(),await P({environment:t,teamStore:b}),u().b0(t,{spaceId:c,store:b,flowId:a}),r&&g&&u()._P(t,{store:b,flowId:a}),b}async function B(e){var t;let{environment:i,teamStore:n,from:a,buttonPopupStore:s}=e;if(!i.currentUser.id)return!1;const l=r().JW(),c=n.isDefault(),d=n.getTeamAccessLevel();if(c)return!1;const m=n.getName(),g=await w({environment:i,name:(0,o().Q)(m||""),description:"",icon:n.getRawIcon(),accessLevel:d,isDefault:c,createTeamHome:!0,teamPermissionRole:null===(t=n.getTeamPermission())||void 0===t?void 0:t.role,spacePermissionRole:n.getSpacePermissionRole(),members:[],settings:n.getSettings(),flowId:l});return!!g&&(u().KK(i,{store:g,from:a}),(0,M().L0)({environment:i,teamStore:g,shouldScroll:!0}),(0,M().F2)({environment:i,teamId:g.id,tab:k().p.General,from:"duplicate_team",buttonPopupStore:s}),new Promise((e=>setTimeout(e,500))).then((()=>{(0,v().jH)(m)})),!0)}async function P(e){const{environment:t,teamStore:i}=e,o=A().default.state.currentSpaceStore,a=A().default.state.currentSpaceViewStore;if(!o||!a)return n().log({level:"error",from:"teamActions",type:"createHomepageOnTeamCreation-SpaceOrSpaceViewStoreError"}),!1;const r=(s=p().A.getIntl(),(0,c().B)(l().wA.teamsHomepage,s));var s;return!!(await g().createTemplateInstance({environment:t,item:r,spaceStore:o,spaceViewStore:a,useMinimalTemplates:!1,type:"inTeam",teamStore:i,from:"homepage_team",isOnboarding:!1}))||(n().log({level:"error",from:"teamActions",type:"createHomepageOnTeamCreation-PageNotCreated"}),!1)}},134917:(e,t,i)=>{i.d(t,{M:()=>n});i(242343);const o={viewBox:"0 0 20 20",svg:(0,i(163643).jsx)("path",{d:"M10.282 3.66a5.39 5.39 0 0 0-5.217-.54l-.711.305a.63.63 0 0 0-.38.575v12.425a.625.625 0 1 0 1.25 0v-3.913l.333-.142a4.14 4.14 0 0 1 4.008.414 5.39 5.39 0 0 0 5.504.405l1.06-.53a.63.63 0 0 0 .346-.56V4a.625.625 0 0 0-.905-.558l-1.06.53c-1.36.68-2.983.56-4.228-.312m-5.057 7.495V4.412l.332-.142a4.14 4.14 0 0 1 4.008.413 5.39 5.39 0 0 0 5.504.406l.156-.078v6.703l-.715.357c-1.36.68-2.983.56-4.228-.312a5.4 5.4 0 0 0-5.057-.604"})},n=(0,i(680369).wt)("flag",o)},138385:(e,t,i)=>{i.d(t,{Ay:()=>r,NJ:()=>o,d5:()=>n});i(725707),i(491955),i(403517),i(113085);let o=function(e){return e.unselected="unselected",e.workspace_member="workspace_member",e.request_workspace_member="request_workspace_member",e.page_guest="page_guest",e.closed="closed",e}({}),n=function(e){return e[e.closed=0]="closed",e[e.share_page=1]="share_page",e[e.share_workspace=2]="share_workspace",e[e.request_workspace=3]="request_workspace",e}({});class a extends(()=>i(129044))().default{getInitialState(){return{inviteStage:n.closed,selection:o.workspace_member,order:[o.workspace_member,o.page_guest],invitedUsers:[],invitedEmailToUserIdMap:{},flowId:i(214144).JW()}}startWorkspaceInvite(){this.setState({...this.state,inviteStage:n.share_workspace,order:[o.workspace_member,o.page_guest],selection:o.workspace_member})}startRequestMembership(){this.setState({...this.state,inviteStage:n.request_workspace,order:[o.request_workspace_member,o.page_guest],selection:o.request_workspace_member})}hasGuests(){return this.state.invitedUsers.some((e=>e.isGuest))}getGuestEmails(){return this.state.invitedUsers.filter((e=>e.isGuest)).map((e=>e.email))}}const r=a},164428:(e,t,i)=>{i.d(t,{Z:()=>h});i(725707),i(491955),i(403517);var o=i(242343),n=()=>i(174114),a=()=>i(348588),r=()=>i(727171),s=()=>i(662505),l=()=>i(477784),c=()=>i(640979),d=()=>i(907721),u=()=>i(466321),m=()=>i(535906),g=()=>i(935091),b=()=>i(858023),p=()=>i(443252),v=()=>i(88271),f=()=>i(634369),y=i(163643);function h(e){const t=(0,n().IS)((e=>({popup:{width:125,marginLeft:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:i,hideAllTime:h}=e,[k,A]=(0,o.useState)(!1),x=r().jf.filter((e=>!h||"all_time"!==e)).map((t=>{const i=()=>{e.onChangeFilter(t),A(!1)};return{key:t,action:()=>{},render:()=>(0,y.jsx)(m().A,{focused:!1,onClick:i,title:l().A.formatMessage(r().jy[t])})}})),S=(0,y.jsx)(s().A,{on:Boolean(i),wrapStyle:t.pillStyle,icon:(0,a().D)({width:16,marginRight:6,fill:"currentColor"}),title:l().A.formatMessage(r().jy[i]),onClick:()=>{A(!0)}}),T=[{key:"filters",items:x,render:e=>(0,y.jsx)(v().A,{...e,title:null,loading:!1})}],M=(0,y.jsx)(g().A,{menuType:c().gu.Popup,header:null,children:(0,y.jsx)(b().Ay,{type:b().Oh.Vertical,initialFocus:0,sections:T})});return(0,y.jsx)(f().A,{marginAfter:!1,children:(0,y.jsx)(p().Ay,{popupType:u().n.Popup,placementToOrigin:d().W.Bottom,alignmentToOrigin:d().C.Start,open:k,render:()=>M,onDismiss:()=>A(!1),keepFocus:!0,origin:S,preventScaleTransition:!0,style:t.popup,trapFocus:!0,originGap:8})})}},189812:(e,t,i)=>{i.d(t,{a:()=>c,E:()=>l});i(610931);var o=i(242343),n=()=>i(237385),a=(i(725707),i(500234),()=>i(758611));a().GJ.downloadMac,a().GJ.downloadMacUniversal,a().GJ.downloadMacIntel,a().GJ.downloadMacAppleSilicon,a().GJ.downloadWindows,a().GJ.downloadWindowsArm;const r=[{route:a().GJ.downloadMac,architecture:"universal",operatingSystem:"mac",target:"macUniversal"},{route:a().GJ.downloadMacIntel,architecture:"x86",operatingSystem:"mac",target:"mac"},{route:a().GJ.downloadMacUniversal,architecture:"universal",operatingSystem:"mac",target:"macUniversal"},{route:a().GJ.downloadMacAppleSilicon,architecture:"arm",operatingSystem:"mac",target:"macArm64"},{route:a().GJ.downloadWindows,architecture:"x86",operatingSystem:"windows",target:"windows"},{route:a().GJ.downloadWindowsArm,architecture:"arm",operatingSystem:"windows",target:"windowsArm64"}];function s(e,t){const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e.toLowerCase();if(t.startsWith("arm"))return"arm";if(t.startsWith("x86")||"intel"===t)return"x86";return null}(e);if(!i||!("mac"===t||"windows"===t))return null;const o=r.find((e=>e.architecture===i&&e.operatingSystem===t));return(null==o?void 0:o.route)||null}function l(){const e=(0,o.useRef)(null),t=(0,n().Y0)();return(0,o.useEffect)((()=>{c(t).then((t=>{e.current=t??null})).catch((e=>{throw new Error(e)}))}),[t]),e}async function c(e){var t;if(!("userAgentData"in navigator))return e.isMac?a().GJ.downloadMacUniversal:a().GJ.downloadWindows;const i=navigator.userAgentData,o=await(null==i||null===(t=i.getHighEntropyValues)||void 0===t?void 0:t.call(i,["architecture"])),n=s(null==o?void 0:o.architecture,e.os);return n||null}},205830:(e,t,i)=>{i.d(t,{BS:()=>v,Hf:()=>p,J7:()=>m,NZ:()=>b,XC:()=>f,hs:()=>g});i(610931),i(362833),i(725707),i(491955),i(500234),i(403517);var o=()=>i(502140),n=()=>i(769884),a=()=>i(48723),r=()=>i(76394),s=()=>i(818369),l=()=>i(759625),c=()=>i(84543),d=()=>i(485966),u=()=>i(413871);function m(e){let{trustedDomainIds:t,spaceStore:i}=e;return t.map((e=>{const t=u().LX.createChildStore(i,{table:a().A,id:e,spaceId:i.id});if(t.canRead())return t})).filter(r().O9)}async function g(e){let{environment:t,spaceId:i,currentUserId:n,organizationId:a}=e;const r=await s().callApi({eventName:"getTrustedDomainsNumberOfMembers",environment:t,data:{spaceId:i,organizationId:a},userId:n});return"failed"===r.type?(o().rateLimitedLog({from:"trustedDomainHelpers",level:"error",type:"getTrustedDomainsNumberOfMembersForSpaceFailed"}),[]):r.data.results}function b(e){let{environment:t,trustedEmailDomain:i,trustedDomainStores:o,spaceStore:n,spaceBasicSettingsStore:r}=e,s=o.find((e=>e.getEmailDomain()===i));const d=r.state.emailDomains;return s?(c().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainDLSEnabled",environment:t,canUndo:!0,perform:e=>{l().zv({store:n,data:{email_domains:d},transaction:e}),l().zv({store:s,data:{domain_link_sharing_enabled:!0,join_space_method:"request_to_join"},transaction:e})}}),s):(c().createAndCommit({userAction:"trustedDomainActions.createTrustedDomain",environment:t,canUndo:!0,perform:e=>{l().zv({store:n,data:{email_domains:d},transaction:e});const o={space_id:n.id,join_space_method:"request_to_join",domain_link_sharing_enabled:!0,email_domain:i};s=l().eC({environment:t,table:a().A,value:o,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e})}}),s&&o.push(s),s)}function p(e){let{store:t,environment:i}=e;const{currentSpaceStore:o}=d().default.getState();if(!o)throw new Error("currentSpaceStore does not exist");if(o.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(c().createAndCommit({userAction:"trustedDomainActions.deleteTrustedDomain",environment:i,canUndo:!0,perform:e=>{l().zv({store:t,data:{domain_link_sharing_enabled:!1},transaction:e})}}),!0)}function v(e){let{store:t,environment:i,joinSpaceMethod:o}=e;const{currentSpaceStore:n}=d().default.getState();if(!n)throw new Error("currentSpaceStore does not exist");if(n.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(t.getJoinSpaceMethod()!==o&&(c().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainJoinSpaceMethod",environment:i,canUndo:!0,perform:e=>{l().zv({store:t,data:{join_space_method:o},transaction:e})}}),!0))}async function f(e){let{environment:t,spaceId:i}=e;const o=await s().callApi({eventName:"getTrustedDomainsForSpace",environment:t,data:{spaceId:i}});if("success"!==o.type)return[];return o.data.results.filter((e=>e.domain_link_sharing_enabled)).map((e=>n().Bj6.fromValue(a().A,e)))}},235843:(e,t,i)=>{i.d(t,{Ah:()=>U,D6:()=>j,KW:()=>_,Oo:()=>I,Pp:()=>L,St:()=>R,hQ:()=>N,iS:()=>P,kW:()=>B,l5:()=>C,lf:()=>D});i(610931),i(362833),i(333225),i(494367),i(516262),i(573119),i(240480),i(950443),i(619601),i(725707),i(491955),i(771702),i(403517);var o=()=>i(599932),n=()=>i(446588),a=()=>i(145017),r=()=>i(528762),s=()=>i(975392),l=()=>i(23371),c=()=>i(76394),d=()=>i(919536),u=()=>i(64256),m=()=>i(352723),g=()=>i(861095),b=()=>i(360482),p=()=>i(904697),v=()=>i(509484),f=()=>i(485966),y=()=>i(436622),h=()=>i(138385),k=()=>i(836331),A=()=>i(714604),x=()=>i(413871),S=()=>i(943066),T=()=>i(127776),M=()=>i(528643),w=()=>i(818369);async function C(e){const{environment:t,store:i,sudoModeStore:s,permissionsInviteStore:l,onInviteStart:u,contextualInviteStore:p,inviteOrigin:v}=e,{tokenQuery:f}=l.state;if((0,o().DT)(f.trim())&&(l.state.isInviteTargetsEmpty||!(0,A().qs)(l.state))){const e={type:"newUser",value:{email:f.trim()},source:"email"};g().mQ({target:e,permissionsInviteStore:l})||l.setState({...l.state,inviteTargets:[...l.state.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:""})}if(!l.state.isInviteTargetsEmpty&&l.state.inviteTargets.length>0){null==u||u();const e=l.state;if((0,A().qs)(e)){if(e.table===a().ev){if(!(0,b()._p)(i))throw new Error("Table mismatch.");const{inviteTargets:o,flowId:n,emailMessage:a}=e;l.reset();const r=await d().eP({environment:t,store:i,sudoModeStore:s,inviteTargets:o,inviteRole:void 0,isOnboarding:!1,invite:{inviteFlowId:n,inviteMessage:a,inviteOrigin:v}});return{success:r.success,requestedUserCount:r.success?Object.keys(r.requestedUsers).length:0}}if(e.table===r().NX){if(!(0,b().Yu)(i))throw new Error("Table mismatch.");const{inviteTargets:o,inviteRole:n,flowId:a}=e;l.reset();return{success:(await d().eP({environment:t,store:i,sudoModeStore:s,inviteTargets:o,inviteRole:n,isOnboarding:!1,invite:{inviteFlowId:a,inviteOrigin:v}})).success,requestedUserCount:0}}(0,c().HB)(e)}else{const{inviteRole:o,flowId:a,emailMessage:r}=e;l.reset();const c=await(0,m().hb)(i,e.inviteTargets);if((0,n().PW)(o)){const e=await d().eP({environment:t,store:i,sudoModeStore:s,inviteTargets:c,inviteRole:o,isOnboarding:!1,invite:{inviteFlowId:a,inviteMessage:r,inviteOrigin:v}});return e.success&&(null==p||p.setState({...null==p?void 0:p.state,invitedEmailToUserIdMap:e.invitedUsers})),{success:e.success,requestedUserCount:e.success?Object.keys(e.requestedUsers).length:0}}if((0,b().$R)(i)&&(0,A().nV)(e)){return{success:await d().sQ({environment:t,store:i,inviteTargets:e.inviteTargets,inviteRole:o,createNewTeamFlowId:a}),requestedUserCount:0}}}}return{success:!0,requestedUserCount:0}}function I(e){e.permissionsInviteStore.setState({...e.permissionsInviteStore.state,modalOpen:!1,flowId:void 0})}function _(e){const{permissionsInviteStore:t,contextualInviteStore:i}=e;if(!i)return;const o=[];t.state.inviteTargets.forEach((e=>{if("newUser"===e.type)o.push({email:e.value.email,isGuest:!0});else if("existingUser"===e.type){const t={...e.value,email:e.value.email,isGuest:"none"===e.spaceRole||"not_in_space"===e.spaceRole};o.push(t)}})),i.setState({...i.state,invitedUsers:o})}async function B(e){const{environment:t,store:i,sudoModeStore:o,permissionsInviteStore:n,contextualInviteStore:a,onInviteClick:s,onInviteComplete:l,inviteOrigin:c,intl:d}=e,m=i.getSpaceId(),g=new(x().SL)(t,{table:r().NX,id:m}),b=m?await y().A.awaitData(t,{spaceId:m}):void 0;if((null==a?void 0:a.state.selection)===h().NJ.workspace_member&&g&&(0,p().isEligibleToCreateTeamspace)(t,b)){if(!(await T().oH({environment:t,flowId:n.state.flowId||"",trackCreateTeamComplete:!1})))return;_({permissionsInviteStore:n,contextualInviteStore:a}),await(0,u().Lg)({environment:t,spaceStore:g,contextualInviteStore:a,from:c,intl:d})}else _({permissionsInviteStore:n,contextualInviteStore:a});let v={success:!1,requestedUserCount:0};try{v=await C({environment:t,store:i,sudoModeStore:o,permissionsInviteStore:n,contextualInviteStore:a,onInviteStart:()=>{null==s||s()},inviteOrigin:c})}catch(f){}finally{null==l||l(v.success,v.requestedUserCount)}}async function P(e){const{environment:t,permissionsInviteStore:i,from:o}=e;await g().iQ({environment:t,permissionsInviteStoreState:i.state,from:o})||i.reset()}function R(e){const{permissionsInviteStore:t,targetToRemove:i,defaultRoleForNonBot:o}=e;if(!t.state.isInviteTargetsEmpty)if((0,A().qs)(t.state))if((0,A().qs)(t.state)){const e=t.state.inviteTargets.filter((e=>e!==i));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:o,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}else(0,c().HB)(t.state);else{const e=t.state.inviteTargets.filter((e=>e!==i));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:o,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}}function j(e){const{environment:t,onUpgradeButtonClick:i,upgradeButtonName:o}=e;S().K(t,{from:o,upsell:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"}}),null==i||i()}async function U(e,t){const i=new Set(t),o=Array.from(i).map((async t=>{const i=await w().callApi({eventName:"findUser",environment:e,data:{email:t}});if("success"===i.type){const e=i.data;if(e.value){return{type:"existingUser",value:e.value.value}}}return{type:"newUser",value:{email:t},source:"email"}}));return await Promise.all(o)}async function L(e){const t="invitee",{environment:i,permissionsInviteStore:n,event:a}=e;if(!n.state.isInviteTargetsEmpty&&(0,A().qs)(n.state)){const e=a.target.value;n.setState({...n.state,inputFocus:t,tokenQuery:e})}else{const e=a.target.value,{extractedEmails:r,newInputValue:s}=(0,o().Ct)(e),l=(await U(i,r)).filter((e=>!g().mQ({target:e,permissionsInviteStore:n}))),c=[...n.state.inviteTargets,...l];c.length>0?n.setState({...n.state,inviteTargets:c,isInviteTargetsEmpty:!1,inputFocus:t,tokenQuery:s}):n.setState({...n.state,inviteTargets:[],isInviteTargetsEmpty:!0,inputFocus:t,tokenQuery:s})}}function D(e){const{environment:t,newRole:i,permissionsInviteStore:o}=e,{state:n}=o;M().Jy(t,{...g().oX(t,n),invite_updated_role:i}),!n.isInviteTargetsEmpty&&(0,A().qs)(n)||o.setState({...n,inviteRole:i})}async function N(e){var t;const{query:i,environment:o,sectionLimit:n,intl:a,membersOnly:r,importContactType:c,shouldUseEdgeCacheRollout:d}=e,{currentSpaceStore:u}=f().default.state;if(!u)return{inviteUsers:[],inviteBots:[],inviteGroups:[]};const m=k().default.getConfigKey("search_contacts_timeout","timeoutMs"),{userLimit:g,botLimit:b,groupLimit:p,importContactLimit:y}=n,h=await v().T.searchActions.load(),[A,x,S,{user:T,email:M},C]=await Promise.all([g>0?h.searchSpaceUsers({environment:o,query:i,membersOnly:r,limit:g,shouldUseEdgeCacheRollout:d}):[],b>0?h.searchSpaceBots({environment:o,query:i}):[],p>0?h.searchSpaceGroups({query:i,intl:a}):[],h.searchEmailUser(o,i),y>0?(0,l().nQ)(m,w().callApi({eventName:"searchContacts",environment:o,data:{spaceId:u.id,limit:y,query:i,importContactType:c,includeNonNotionUsers:!r,includeUserId:!0}})):void 0]),I=A.slice(0,g).map((e=>({type:"existingUser",value:e}))),_=x.slice(0,b).map((e=>({type:"bot",value:e}))),B=S.slice(0,p).map((e=>({type:"group",value:e})));T&&I.unshift({type:"existingUser",value:T}),M&&I.unshift({type:"newUser",value:{email:M},source:"email"});let P=[];return"success"===(null==C||null===(t=C.result)||void 0===t?void 0:t.type)&&(P=C.result.data.contacts.map((e=>({type:"newUser",value:{email:e.email,name:e.name,avatar_url:e.profile_photo,user_id:e.user_id},source:e.type})))),{inviteUsers:s().hS(I,(e=>e.value.email)),inviteBots:_,inviteGroups:B,importedContacts:P}}},269556:(e,t,i)=>{i.d(t,{F:()=>n});i(242343);var o=i(163643);const n=(0,i(680369).wt)("eyeHideInversePadded",{viewBox:"0 0 24 24",svg:(0,o.jsx)("path",{d:"M17.3867 18.1074C17.6055 18.3193 17.9404 18.333 18.1592 18.1074C18.3848 17.875 18.3711 17.5469 18.1592 17.335L6.5791 5.76855C6.37402 5.55664 6.01855 5.5498 5.80664 5.76855C5.60156 5.97363 5.60156 6.3291 5.80664 6.53418L17.3867 18.1074ZM12 6.1582C10.8105 6.1582 9.73047 6.36328 8.72559 6.69141L9.81934 7.78516C10.5098 7.58691 11.2275 7.4707 12 7.4707C16.3682 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 12.6113 18.7334 14.0059 16.9766 15.1064L17.9883 16.125C20.1348 14.7168 21.3857 12.8779 21.3857 12.0713C21.3857 10.6699 17.6055 6.1582 12 6.1582ZM12 17.9912C13.2646 17.9912 14.4199 17.7725 15.4658 17.4102L14.3789 16.3232C13.6338 16.542 12.8477 16.6787 12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.6133 5.32129 10.1299 7.19434 8.98145L6.16211 7.94922C3.92676 9.37109 2.60742 11.251 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM15.4111 13.3906C15.5889 12.9873 15.6914 12.5361 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C11.5283 8.39355 11.084 8.48242 10.6738 8.65332L15.4111 13.3906ZM12 15.7559C12.5332 15.7559 13.0322 15.6328 13.4766 15.4209L8.64355 10.5811C8.4248 11.0322 8.30176 11.5312 8.30176 12.0781C8.30859 14.0811 9.94238 15.7559 12 15.7559Z"})})},278107:(e,t,i)=>{i.d(t,{A:()=>s});i(242343);var o=()=>i(237385),n=()=>i(174114),a=()=>i(220413),r=i(163643);const s=function(e){const{color:t}=e;return(0,r.jsx)(i(535906).A,{...e,icon:(0,r.jsx)(l,{color:t}),title:(0,i(58889).mN)(t)})};function l(e){let{color:t}=e;const i=(0,n().DP)(),s=(0,o().v3)(),l=(0,a().LD)(i,t);return(0,r.jsx)("div",{style:{width:s.device.isMobile?24:18,height:s.device.isMobile?24:18,background:l.menuBackgroundColor,color:l.textColor,boxShadow:i.innerBorderBoxShadow,borderRadius:4}})}},286831:(e,t,i)=>{i.r(t),i.d(t,{MobileActionBar:()=>G});var o=i(242343),n=()=>i(16791),a=()=>i(660714),r=()=>i(237385),s=()=>i(556078),l=()=>i(803290),c=()=>i(174114),d=()=>i(762847),u=()=>i(198654),m=()=>i(680369),g=i(163643);const b=(0,m().wt)("indentDown",{viewBox:"0 0 30 30",svg:(0,g.jsx)("path",{d:"M24,15l-1.406-1.406L16,20.188V2h-2v18.188l-6.594-6.594L6,15l9,9L24,15z M2,26v2h26v-2H2z"})});const p=(0,m().wt)("moveUp",{viewBox:"0 0 30 30",svg:(0,g.jsx)("path",{d:"M14,5.813V24h2V5.813l6.594,6.594L24,11l-9-9l-9,9l1.406,1.406L14,5.813z M2,26v2h26v-2H2z"})}),v=(0,m().wt)("redo",{viewBox:"0 0 16 16",svg:(0,g.jsx)("path",{d:"M1.45117 10.6826C1.45117 13.4102 3.24219 15.208 6.29785 15.208H7.93848C8.38281 15.208 8.69727 14.873 8.69727 14.4629C8.69727 14.0459 8.38281 13.7109 7.93848 13.7109H6.3457C4.14453 13.7109 2.92773 12.4053 2.92773 10.6211C2.92773 8.84375 4.14453 7.59277 6.3457 7.59277H10.7002L12.2793 7.52441L11.0762 8.53613L9.31934 10.252C9.18262 10.3887 9.10059 10.5527 9.10059 10.7715C9.10059 11.1953 9.39453 11.5029 9.83203 11.5029C10.0234 11.5029 10.2285 11.4141 10.3721 11.2705L14.3027 7.40137C14.46 7.25098 14.542 7.05273 14.542 6.84766C14.542 6.64258 14.46 6.4375 14.3027 6.29395L10.3721 2.4248C10.2285 2.28125 10.0234 2.19238 9.83203 2.19238C9.39453 2.19238 9.10059 2.5 9.10059 2.91699C9.10059 3.14258 9.18262 3.30664 9.31934 3.43652L11.0762 5.15234L12.2793 6.1709L10.7002 6.10254H6.38672C3.2832 6.10254 1.45117 7.96875 1.45117 10.6826Z"})});var f=()=>i(361499),y=()=>i(653998),h=()=>i(31448),k=()=>i(392336),A=()=>i(57096),x=()=>i(399309),S=()=>i(73631),T=()=>i(707423),M=()=>i(481148),w=()=>i(621641),C=()=>i(729522),I=()=>i(955885),_=()=>i(907721),B=()=>i(308966),P=()=>i(367111),R=()=>i(134915),j=()=>i(779921),U=()=>i(182613),L=()=>i(205670),D=()=>i(126451),N=()=>i(443252),E=()=>i(248188),q=()=>i(390556),F=()=>i(934799),O=()=>i(148418),V=()=>i(777880);const H=42;function G(e){const{stores:t,position:i,currentBlockStore:u}=e,m=(0,r().v3)(),b=(0,s().S)(),p=(0,r().Y0)(),v=p.isMobileNative,f=p.isSmallPhone,R=(0,I().A)(!0),G=(0,l().K8)((()=>T().rV(m,u,null==b?void 0:b.publicEditModeStore.state)),[m,u,null==b?void 0:b.publicEditModeStore]),re=(0,l().K8)((()=>m.WindowSizeStore.state),[m]),se=(0,c().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap"},actionButton:{height:"100%",width:"100%",fontSize:15,display:"flex",boxShadow:i===M().nh.Bottom?e.bottomActionBarShadow:e.shadowMD,backgroundColor:e.keyboardActionBarBackground,paddingLeft:v?re.paddingLeftCSS:0,paddingRight:v?re.paddingRightCSS:0},item:{display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:f?8:10,paddingRight:f?8:10,borderRight:`1px solid ${e.regularDividerColor}`,whiteSpace:"nowrap",height:H,flexShrink:0,flexGrow:0,flexBasis:"auto",color:e.text.primary,minWidth:f?42:44},minorItem:{width:34,justifyContent:"center"},itemBorderLeft:{borderLeft:`1px solid ${e.regularDividerColor}`},selectionLinkSpan:{borderBottom:`1px solid ${e.linkDecorationColor}`},actionMenu:{flexGrow:1,flexShrink:1,marginRight:-1,display:"flex",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch"}})),[i,v,re,f]),le=(0,l().K8)((()=>m.device.isMobileBrowser?t.store.state.isOpen:G.shouldShow),[m,t,G]),ce=(0,l().K8)((()=>P().A.mobileNativeBottomPadding(m)),[m]),de=(0,l().K8)((()=>T().ou({environment:m,store:u})),[m,u]),ue=(0,l().K8)((()=>T().BT(t.ignoreSelectionAreaStore,m.TextSelectionCompositionStore,u,!1)),[t,m,u]),{canTriggerTextActions:me,canTriggerCommentAction:ge,canTriggerBlockActions:be,hasMultiBlockSelection:pe,currentSelection:ve}=(0,l().K8)((()=>{const e=T().xr(b&&b.publicEditModeStore.state,u),t=u.canComment(),i=!ue&&T().nC(b&&b.publicEditModeStore.state),o=L().default.state;return{canTriggerTextActions:e,canTriggerCommentAction:t,canTriggerBlockActions:i,hasMultiBlockSelection:"editing"===o.mode&&!(0,w().KP)(o.multiSelection),currentSelection:U().default.state.stores[0]}}),[b,u,ue]),fe=((0,l().K8)((()=>{const e=L().default.state;if("editing"===e.mode){const t=e.multiSelection.end;return{scrollTop:B().A.state.scrollTop_DEPRECATED,editing:!0,store:t.store.id,selection:t}}return{scrollTop:B().A.state.scrollTop_DEPRECATED,editing:!1}}),[]),(0,a().Y)((()=>k().cW(m)),500)),ye=(0,o.useRef)(null),he=(0,o.useRef)(void 0),ke=(0,o.useRef)(!1);(0,o.useLayoutEffect)((()=>{if(v)G.shouldShow!==ke.current&&(ke.current=G.shouldShow,ye.current&&(ye.current.scrollLeft=0));else{const e=t.store.state.isOpen;G.shouldShow?e?void 0!==he.current&&(window.clearTimeout(he.current),he.current=void 0):(t.store.setState({...t.store.state,isOpen:!0}),ye.current&&(ye.current.scrollLeft=0)):e&&void 0===he.current&&(he.current=window.setTimeout((()=>{he.current=void 0,t.store.setState({...t.store.state,isOpen:!1})}),200))}}),[m,v,G.shouldShow,t.store]);const Ae=(0,l().K8)((()=>({canIndent:A().v6(ve),canUnindent:A().mE(ve)})),[ve]),xe=(0,l().K8)((()=>{let e=!1,t=!1;const i=u.getType();if(i){const o=u.getFormat();(0,d().pD)(i,o)||(e=!0),(0,d().Q3)(i)||(t=!0)}return j().A.state.isOpen&&(e=!1),{canTriggerCommentAction:e,canTriggerMentionAction:t}}),[u]),Se=(0,l().K8)((()=>({canUndo:x().BB(),canRedo:x().fH()})),[]),Te=()=>{const{canTriggerCommentAction:e,canTriggerMentionAction:i}=xe;return(0,g.jsxs)("div",{ref:ye,style:se.actionMenu,onScroll:fe,children:[(0,g.jsxs)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:{...se.item,...!f&&{paddingLeft:12,paddingRight:12}},onClick:()=>{t.store.setState({...t.store.state,isInsertOpen:!0}),ae("insert",m)},disabled:!be,children:[J,(0,g.jsx)(W,{})]}),(0,g.jsxs)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:{...se.item,fontWeight:h().Wy.medium},onClick:e=>{t.store.setState({...t.store.state,isTurnIntoOpen:!0}),ae("turn_into",m)},disabled:!be,children:[(0,g.jsx)(y().sA,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.buttonTitle"}),(0,g.jsx)(W,{})]}),(0,g.jsx)(D().A,{mobileFeedback:!0,disabledFeedback:!0,...R,style:se.item,onClick:()=>T().FN(m),disabled:!i,children:(0,g.jsx)("span",{style:{fontSize:19,lineHeight:1,fontWeight:h().Wy.medium,marginBottom:m.device.isAndroid?4:0},children:"@"})}),(0,g.jsx)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:se.item,onClick:async()=>{const e=await S().T.formulas.load();T().aI(m,"mobile_action_bar",e)},disabled:!e,children:Q}),(0,g.jsx)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:se.item,onClick:()=>T().zc(m),disabled:!be,children:Z}),(0,g.jsx)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:se.item,onClick:()=>T()._Y(m),disabled:!be,children:X}),(0,g.jsxs)("div",{style:{...se.item,paddingLeft:6,paddingRight:6},children:[(0,g.jsx)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:se.minorItem,disabled:!be||!Ae.canUnindent,onClick:()=>T().u7(m),children:z}),(0,g.jsx)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:se.minorItem,disabled:!Ae.canIndent,onClick:()=>T().lS(m),children:$}),(0,g.jsx)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:se.minorItem,disabled:!be,onClick:()=>T().FP(m),children:ee}),(0,g.jsx)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:se.minorItem,disabled:!be,onClick:()=>T().cM(m),children:te})]}),(0,g.jsxs)("div",{style:{...se.item,paddingLeft:6,paddingRight:6},children:[(0,g.jsx)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:se.minorItem,disabled:!Se.canUndo,onClick:()=>T().RA(m),children:ie}),(0,g.jsx)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:se.minorItem,disabled:!Se.canRedo,onClick:()=>T().xT(m),children:oe})]}),(0,g.jsxs)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:{...se.item,fontWeight:h().Wy.medium},onClick:e=>{t.store.setState({...t.store.state,isColorOpen:!0}),ae("color",m)},disabled:!be,children:[(0,g.jsx)(y().sA,{defaultMessage:"Color",id:"mobileActionBar.color.buttonTitle"}),(0,g.jsx)(W,{})]}),(0,g.jsxs)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:{...se.item,fontWeight:h().Wy.medium},onClick:()=>T().al(m),disabled:!be,children:[(0,g.jsx)(y().sA,{defaultMessage:"More",id:"mobileActionBar.more.buttonTitle"}),(0,g.jsx)(W,{})]})]})},Me=()=>(0,g.jsxs)("div",{style:se.actionButton,children:[de?(0,g.jsx)(K,{itemStyle:se.item,actionMenuStyle:se.actionMenu}):ue?(0,g.jsxs)("div",{style:se.actionMenu,onScroll:fe,children:[ge&&!j().A.state.isOpen&&(0,g.jsx)(q().A,{style:se.item,blockStore:ve,iconOnly:!1}),(0,g.jsx)(F().A,{type:"b",style:se.item,onClick:()=>ae("bold",m),disabled:!me,children:(0,g.jsx)("span",{style:{fontWeight:h().Wy.semibold},children:(0,g.jsx)(y().sA,{defaultMessage:"B",id:"mobileActionBar.bold.symbol"})})}),(0,g.jsx)(F().A,{type:"i",style:se.item,onClick:()=>ae("italic",m),disabled:!me,children:(0,g.jsx)("span",{style:{fontStyle:"italic",fontWeight:h().Wy.semibold},children:(0,g.jsx)(y().sA,{defaultMessage:"i",id:"mobileActionBar.italic.symbol"})})}),(0,g.jsx)(F().A,{type:"_",style:se.item,onClick:()=>ae("underline",m),disabled:!me,children:(0,g.jsx)("span",{style:{textDecoration:"underline"},children:(0,g.jsx)(y().sA,{defaultMessage:"U",id:"mobileActionBar.underline.symbol"})})}),(0,g.jsx)(F().A,{type:"s",style:se.item,onClick:()=>ae("strike_through",m),disabled:!me,children:(0,g.jsx)("span",{style:{textDecoration:"line-through"},children:(0,g.jsx)(y().sA,{defaultMessage:"S",id:"mobileActionBar.strikeThrough.symbol"})})}),(0,g.jsx)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:se.button,disabled:!Ae.canUnindent,onClick:()=>T().u7(m),children:z}),(0,g.jsx)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:se.button,disabled:!Ae.canIndent,onClick:()=>T().lS(m),children:$}),(0,g.jsx)(F().A,{type:"c",style:se.item,onClick:()=>ae("code",m),disabled:!me,children:(0,g.jsx)("span",{style:{fontFamily:h().vc(n().locale).githubMono},children:(0,g.jsx)(y().sA,{defaultMessage:"Code",id:"mobileActionBar.code.symbol"})})}),(0,g.jsx)(V().A,{style:se.item,disabled:!me||pe,children:(0,g.jsx)("span",{style:se.selectionLinkSpan,children:(0,g.jsx)(y().sA,{defaultMessage:"Link",id:"mobileActionBar.link.symbol"})})}),(0,g.jsx)(O().A,{onClick:()=>ae("equation",m),disabled:!me||pe,style:se.item,children:Y}),(0,g.jsx)(E().A,{style:se.item,disabled:!me})]}):Te(),(0,g.jsx)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:{...se.item,...se.itemBorderLeft,borderRight:"none"},onClick:()=>T().EZ(t,m),children:ne})]});if(i===M().nh.Bottom)return(0,g.jsx)("div",{style:{position:"absolute",bottom:ce,left:0,height:H,width:"100%",pointerEvents:le?"auto":"none",opacity:le?1:0,transform:le?"translateY(0)":`translateY(${H}px)`,transition:"opacity 120ms ease-out, transform 120ms ease-out"},children:Me()});{const e=C().getSelectionRect();if(!e)return null;const t=document.body.getBoundingClientRect(),i={...e,left:10,top:e.top+10-t.top};return(0,g.jsx)(N().Ay,{popupType:v?N().nl.SlideUp:N().nl.Popup,open:le,preventBlockRenderQueueOnEnter:!0,placementToOrigin:_().W.Bottom,alignmentToOrigin:_().C.Start,originRect:i,disableMouseCapture:!0,keepFocus:!0,render:()=>(0,g.jsx)("div",{style:{height:H,borderRadius:4,overflow:"hidden"},children:Me()})})}}function K(e){let{itemStyle:t,actionMenuStyle:i}=e;const o=(0,r().v3)();return(0,g.jsx)("div",{style:i,children:(0,g.jsxs)(D().A,{mobileFeedback:!0,disabledFeedback:!0,style:{...t,borderRight:"none",fontWeight:h().Wy.medium},onClick:e=>{R().A.setState({open:!0}),ae("templates",o)},children:[(0,f().M)({width:20,marginRight:8}),(0,g.jsx)(y().sA,{defaultMessage:"Choose a template...",id:"mobileActionBar.templates.buttonTitle"}),(0,g.jsx)(W,{})]})})}function W(){const e=(0,c().IS)((e=>({chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);return(0,u().b)(e.chevron)}const z=b({width:18,height:18,transform:"rotate(90deg)",position:"relative",left:1}),$=b({width:18,height:18,transform:"rotate(-90deg)",position:"relative",left:-1}),Y=(0,i(273919).c)({width:16,height:16}),J=(0,i(528190).P)({width:14,height:14}),Q=(0,i(850525).M)({width:18,height:18}),Z=(0,i(413456).F)({width:18,height:18}),X=(0,i(52531).I)({width:18,height:18}),ee=p({width:18,height:18,position:"relative",left:2}),te=p({width:18,height:18,transform:"rotate(180deg)",position:"relative",left:2}),ie=(0,i(727567)._)({width:19,height:19}),oe=v({width:19,height:19}),ne=(0,i(572088).l)({width:18,height:18});function ae(e,t){k().np(t,{itemName:e})}},292955:(e,t,i)=>{i.r(t),i.d(t,{NativeMobileActionBar:()=>Ke});i(725707),i(107652),i(324989),i(771702),i(403517),i(113085);var o=i(242343),n=()=>i(151242),a=()=>i(237385),r=()=>i(551919),s=()=>i(556078),l=()=>i(803290),c=()=>i(81421),d=()=>i(762847),u=()=>i(810111),m=()=>i(758989),g=()=>i(214144),b=(i(333225),i(494367),i(516262),i(573119),i(240480),i(950443),i(619601),i(491955),i(500234),()=>i(220413)),p=()=>i(76394),v=()=>i(83544),f=(i(244387),()=>i(44658)),y=()=>i(627618);function h(e,t,i){const{content:o,apiRequestValue:n}=i;return{id:e,content:o,action:{type:t,apiRequestValue:n}}}function k(e,t,i,o,n){return h(e,"webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:t},accessibilityText:n,selected:o},apiRequestValue:{menuType:i,actionId:e,context:void 0}})}function A(e,t,i,o,n){return h(e,"webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:t},accessibilityText:n,selected:o},apiRequestValue:{menuType:i,actionId:e,context:void 0}})}const x=["insertBlock","turnInto","textColor","textSelectionColor"];const S=["suggested","textFormatting","slashMenu","turnInto","textColor","textSelectionColor","more"];function T(e,t){return{type:e,apiRequestValue:t}}function M(e,t){const i={from:t,data:e};return JSON.stringify(i)}const w=y().object({required:{data:y().object({required:{action:y().literals("bold","italic","underline","strikethrough","link","code","equation","mention","trash","comment","emojiPicker","filePicker","indent","unindent","moveUp","moveDown","undo","redo","dismissKeyboard","more","ai","voiceInput","filing","templates","todoListTemplate","weeklyPlanTemplate","copyLinkToBlock","databaseDiscoveryModal","teamspaceSelector","toggleNumberPositivity")},optional:{}})},optional:{from:y().literals("mobile_action_bar","mobile_text_formatting_menu")}});let C=function(e){return e[e.InvalidActionType=0]="InvalidActionType",e[e.MissingPayload=1]="MissingPayload",e[e.InvalidRequestType=2]="InvalidRequestType",e[e.InvalidData=3]="InvalidData",e}({});class I{constructor(e,t){this.type=e,this.message=t}}function _(e){return 0===e.reduce(((e,t)=>e+t.items.length),0)}const B=h("mab.button.back","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"chevron.backward.2",localImageIdentifier:"back"},accessibilityText:""},apiRequestValue:{subMenuType:void 0,context:void 0}});h("mab.button.noResults","nativeAction_setSubMenuType",{content:{type:"text_and_icon",imageReference:{},accessibilityText:"",text:"No results",fullWidth:!0,disabled:!0},apiRequestValue:{subMenuType:void 0,context:void 0}});function P(e,t,i,o){return h("mab.button.indent","webAction_generic",{content:{type:"icon",imageReference:o,disabled:e||t,accessibilityText:i},apiRequestValue:{jsonPayload:M({action:"indent"}),context:void 0}})}function R(e,t,i,o){return h("mab.button.unindent","webAction_generic",{content:{type:"icon",imageReference:o,accessibilityText:i,disabled:e||t},apiRequestValue:{jsonPayload:M({action:"unindent"}),context:void 0}})}function j(e,t,i){return h("mab.button.moveUp","webAction_generic",{content:{type:"icon",imageReference:i,accessibilityText:t,disabled:e},apiRequestValue:{jsonPayload:M({action:"moveUp"}),context:void 0}})}function U(e,t,i){return h("mab.button.moveDown","webAction_generic",{content:{type:"icon",imageReference:i,accessibilityText:t,disabled:e},apiRequestValue:{jsonPayload:M({action:"moveDown"}),context:void 0}})}function L(e){const{createAIAction:t,createDictationAction:i,createMeetingNotesAction:o,disableDictationActions:n,disableTextActions:a,disableAIAction:r,disableBlockActions:s,disableCommentAction:l,disableMentionAction:c,selectedMenuType:d,disableInsertBlockAction:u,disableTurnIntoAction:m,disableTextFormatting:g,disableTextColorAction:p,disableDeleteBlock:f,disableUndo:y,disableRedo:x,disableIndent:S,disableUnindent:T,disableLinkAction:w,disableCopyLinkToBlock:C,disableEquationAction:I,isEditingTitle:_,shouldShowTextActions:B,usePillStyling:L,isPersonalizedActionsEnabled:D,showNewMABIcons:N,textSelectionColor:E,textFormattingSelections:q,titleTexts:F,accessibilityTexts:V,teamIcon:G,teamspaceName:K,theme:W}=e,z=B?"textSelectionColor":"textColor",$=function(e){const{usePillStyling:t,titleTexts:i,theme:o}=e,n=t?"pill":"filled";return{todoListTemplate:h("mab.button.template.todolist","webAction_generic",{content:{type:"text_and_icon",text:i.todoListTemplate,style:n,imageReference:{imageUrl:v().A.images.mab.blocks.toDoSvg,imageTintColor:(0,b().vU)(o.icon.secondary)}},apiRequestValue:{jsonPayload:M({action:"todoListTemplate"}),context:void 0}}),weeklyPlanTemplate:h("mab.button.template.weeklyPlan","webAction_generic",{content:{type:"text_and_icon",text:i.weeklyPlanTemplate,style:n,imageReference:{imageUrl:v().A.images.mab.database.calendarViewSvg,imageTintColor:(0,b().vU)(o.icon.secondary)}},apiRequestValue:{jsonPayload:M({action:"weeklyPlanTemplate"}),context:void 0}}),templates:h("mab.buttonSection.template","webAction_generic",{content:{type:"text_and_icon",text:t?i.moreTemplates:i.template,style:n,imageReference:{imageUrl:v().A.images.mab.actions.moreSvg,imageTintColor:(0,b().vU)(o.icon.secondary)}},apiRequestValue:{jsonPayload:M({action:"templates"}),context:void 0}}),databaseDiscoveryModal:h("mab.buttonSection.databaseDiscoveryModal","webAction_generic",{content:{type:"text_and_icon",text:i.databaseDiscoveryModal,style:n,imageReference:{imageUrl:v().A.images.mab.blocks.simpleTableSvg,imageTintColor:(0,b().vU)(o.icon.secondary)}},apiRequestValue:{jsonPayload:M({action:"databaseDiscoveryModal"}),context:void 0}})}}({usePillStyling:L,titleTexts:F,theme:W});return{teamspaceSelector:h("mab.button.teamspaceSelector","webAction_generic",{content:{type:"text_and_icon",text:K||V.teamspaceSelector,imageReference:null!=G&&G.emoji?{emoji:G.emoji}:null!=G&&G.imageUrl?{imageUrl:G.imageUrl,imageTintColor:G.imageBackgroundColor}:{character:(K||V.teamspaceSelector).charAt(0).toUpperCase(),imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:"Name of currently selected teamspace to post to"},apiRequestValue:{jsonPayload:M({action:"teamspaceSelector"}),context:void 0}}),ai:t?h("mab.button.ai","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.aiFaceSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{localImageIdentifier:"ai"},disabled:r,accessibilityText:V.ai},apiRequestValue:{jsonPayload:M({action:"ai"}),context:void 0}}):void 0,speech:o?h("mab.button.speech","webAction_genericAction",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.blocks.transcriptionSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"mic.fill",localImageIdentifier:"micFilled"},style:L?"pill":void 0,accessibilityText:V.ai,disabled:n},apiRequestValue:{menuType:"insertBlock",actionId:"insert transcription-AI Meeting Notes",context:void 0}}):i?h("mab.button.speech","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.micSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"mic.fill",localImageIdentifier:"micFilled"},style:L?"pill":void 0,accessibilityText:V.ai,disabled:n},apiRequestValue:{jsonPayload:M({action:"voiceInput"}),context:void 0}}):void 0,insert:h("mab.button.insert","nativeAction_setMenuType",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.plusSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"plus",localImageIdentifier:"insertBlock"},accessibilityText:V.insert,disabled:s||u,selected:"insertBlock"===d},apiRequestValue:{menuType:"insertBlock",context:void 0}}),turnInto:h("mab.button.turnInto","nativeAction_setMenuType",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.turnIntoSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"arrow.2.squarepath",localImageIdentifier:"turnInto"},disabled:s||m,selected:"turnInto"===d,accessibilityText:V.turnInto},apiRequestValue:{menuType:"turnInto",context:void 0}}),emojiPicker:h("mab.button.emojiPicker","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.emojiSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},style:L?"pill":void 0,disabled:!_&&s,accessibilityText:V.emojiPicker},apiRequestValue:{jsonPayload:M({action:"emojiPicker"}),context:void 0}}),filePicker:h("mab.button.filePicker","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.photoMultipleSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"photo.on.rectangle.angled",localImageIdentifier:"filePicker"},style:L?"pill":void 0,disabled:!_&&s,accessibilityText:V.filePicker},apiRequestValue:{jsonPayload:M({action:"filePicker"}),context:void 0}}),mention:h("mab.button.mention","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.mentionSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"at",localImageIdentifier:"mention"},disabled:c,accessibilityText:V.mention},apiRequestValue:{jsonPayload:M({action:"mention"}),context:void 0}}),comment:h("mab.button.comment","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.commentSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"text.bubble",localImageIdentifier:"comment"},disabled:l,accessibilityText:V.comment},apiRequestValue:{jsonPayload:M({action:"comment"},"mobile_action_bar"),context:void 0}}),biu:h("bold.italic.underline","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.textFormattingSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"textformat",localImageIdentifier:"textFormat"},disabled:g,accessibilityText:V.textFormatting},apiRequestValue:{subMenuType:"textFormatting",context:void 0}}),delete:h("mab.button.delete","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.trashSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"trash",localImageIdentifier:"trash"},disabled:f,accessibilityText:V.trash},apiRequestValue:{jsonPayload:M({action:"trash"}),context:void 0}}),undo:h("mab.button.undo","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.undoSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"arrow.uturn.backward",localImageIdentifier:"undo"},disabled:y,accessibilityText:V.undo},apiRequestValue:{jsonPayload:M({action:"undo"}),context:void 0}}),redo:h("mab.button.redo","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.redoSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"arrow.uturn.forward",localImageIdentifier:"redo"},disabled:x,accessibilityText:V.redo},apiRequestValue:{jsonPayload:M({action:"redo"}),context:void 0}}),more:h("mab.button.more","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.moreSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"ellipsis",localImageIdentifier:"ellipsis"},accessibilityText:V.more,disabled:s},apiRequestValue:{jsonPayload:M({action:"more"}),context:void 0}}),indent:P(s,S,V.indent,N?{imageUrl:v().A.images.mab.actions.indentSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"increase.indent",localImageIdentifier:"indent"}),unindent:R(s,T,V.unindent,N?{imageUrl:v().A.images.mab.actions.outdentSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"decrease.indent",localImageIdentifier:"unindent"}),moveUp:j(s,V.moveUp,N?{imageUrl:v().A.images.mab.actions.moveUpSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"arrow.up.to.line.alt",localImageIdentifier:"moveUp"}),moveDown:U(s,V.moveDown,N?{imageUrl:v().A.images.mab.actions.moveDownSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"arrow.down.to.line.alt",localImageIdentifier:"moveDown"}),indentPrioritized:O(P(s,S,V.indent,N?{imageUrl:v().A.images.mab.actions.indentSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"increase.indent",localImageIdentifier:"indent"})),unindentPioritized:O(R(s,T,V.unindent,N?{imageUrl:v().A.images.mab.actions.outdentSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"decrease.indent",localImageIdentifier:"unindent"})),moveUpPrioritized:O(j(s,V.moveUp,N?{imageUrl:v().A.images.mab.actions.moveUpSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"arrow.up.to.line.alt",localImageIdentifier:"moveUp"})),moveDownPrioritized:O(U(s,V.moveDown,N?{imageUrl:v().A.images.mab.actions.moveDownSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"arrow.down.to.line.alt",localImageIdentifier:"moveDown"})),color:D?a||p?void 0:h("mab.button.textFormatting.textSelectionColor.native","nativeAction_setMenuType",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.textColorSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},selected:d===z,accessibilityText:V.textColor},apiRequestValue:{menuType:z,context:void 0}}):h("mab.button.textFormatting.textSelectionColor.native","nativeAction_setMenuType",{content:{type:"icon",imageReference:H(E,W),disabled:a||p,selected:d===z,accessibilityText:V.textColor},apiRequestValue:{menuType:z,context:void 0}}),bold:h("mab.button.bold","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.boldSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"bold",localImageIdentifier:"bold"},accessibilityText:V.bold,disabled:a,selected:q.bold},apiRequestValue:{jsonPayload:M({action:"bold"}),context:void 0}}),italic:h("mab.button.italic","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.italicSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"italic",localImageIdentifier:"italic"},disabled:a,selected:q.italic,accessibilityText:V.italics},apiRequestValue:{jsonPayload:M({action:"italic"}),context:void 0}}),underline:h("mab.button.underline","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.underlineSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"underline",localImageIdentifier:"underline"},disabled:a,selected:q.underline,accessibilityText:V.underline},apiRequestValue:{jsonPayload:M({action:"underline"}),context:void 0}}),strikethrough:h("mab.button.strikethrough","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.strikethroughSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"strikethrough",localImageIdentifier:"strikethrough"},disabled:a,selected:q.strikethrough,accessibilityText:V.strikethrough},apiRequestValue:{jsonPayload:M({action:"strikethrough"}),context:void 0}}),linkToPage:h("insert link_to_page-Link to page","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.linkToPageSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:"Link",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert link_to_page-Link to page",context:void 0}}),link:h("mab.button.link","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.linkAddSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"link.badge.plus",localImageIdentifier:"link"},accessibilityText:V.link,disabled:a||w,selected:q.link},apiRequestValue:{jsonPayload:M({action:"link"}),context:void 0}}),copyLinkToBlock:D?h("mab.button.copyLinkToBlock","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.linkSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"link",localImageIdentifier:"link"},accessibilityText:V.copyLinkToBlock,disabled:C},apiRequestValue:{jsonPayload:M({action:"copyLinkToBlock"}),context:void 0}}):void 0,code:h("mab.button.code","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.blocks.codeSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"chevron.left.slash.chevron.right",localImageIdentifier:"code"},accessibilityText:V.code,disabled:a,selected:q.code},apiRequestValue:{jsonPayload:M({action:"code"}),context:void 0}}),equation:h("mab.button.equation","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.blocks.inlineEquationSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"x.squareroot",localImageIdentifier:"equation"},accessibilityText:V.equation,disabled:a||I,selected:q.equation},apiRequestValue:{jsonPayload:M({action:"equation"}),context:void 0}}),filing:h("mab.button.filing","webAction_generic",{content:F.filing?{type:"text_and_icon",text:F.filing,style:"filled",imageReference:{sfProGlyphName:"folder",localImageIdentifier:"folder"},accessibilityText:V.filing}:{type:"icon",style:"filled",imageReference:{sfProGlyphName:"folder",localImageIdentifier:"folder"},accessibilityText:V.filing},apiRequestValue:{jsonPayload:M({action:"filing"}),context:void 0}}),text:D?h("insert text-Text","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.textSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:"Text",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert text-Text",context:void 0}}):void 0,encryptedText:D?h("insert encrypted_text-Encrypted Text","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.encryptedTextSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:"Encrypted Text",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert encrypted_text-Encrypted Text",context:void 0}}):void 0,page:D?h("insert page-Page","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.pageSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:"Page",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert page-Page",context:void 0}}):void 0,divider:h("insert divider-Divider","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.dividerSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:"Divider",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert divider-Divider",context:void 0}}),table:h("insert table-Table","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.simpleTableSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:"Table",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert table-Table",context:void 0}}),toDoList:D?h("insert to_do-To-do list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.toDoSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:V.todoList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert to_do-To-do list",context:void 0}}):void 0,h1:D?h("insert header-Heading 1","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.headerH1Svg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:V.h1,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert header-Heading 1",context:void 0}}):void 0,h2:D?h("insert sub_header-Heading 2","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.headerH2Svg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:V.h2,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert sub_header-Heading 2",context:void 0}}):void 0,h3:D?h("insert sub_sub_header-Heading 3","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.headerH3Svg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:V.h3,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert sub_sub_header-Heading 3",context:void 0}}):void 0,bulletedList:D?h("insert bulleted_list-Bulleted list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.bulletedListSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:V.bulletedList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert bulleted_list-Bulleted list",context:void 0}}):void 0,numberedList:D?h("insert numbered_list-Numbered list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.numberedListSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:V.numberedList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert numbered_list-Numbered list",context:void 0}}):void 0,toggleList:D?h("insert toggle-Toggle list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.toggleListSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:V.toggleList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert toggle-Toggle list",context:void 0}}):void 0,quote:D?h("insert quote-Quote","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.quoteSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:V.quote,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert quote-Quote",context:void 0}}):void 0,callout:D?h("insert callout-Callout","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.calloutSvg,imageTintColor:(0,b().vU)(W.icon.secondary)},accessibilityText:V.callout,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert callout-Callout",context:void 0}}):void 0,backgroundColorDefault:D&&"default_background"!==q.backgroundHighlight?A("action color default_background-Default background","dark"===W.mode?v().A.images.mab.textBackground.dark.defaultSvg:v().A.images.mab.textBackground.light.defaultSvg,z,!1,"Default"):void 0,backgroundColorGray:D?A("action color gray_background-Gray background","dark"===W.mode?v().A.images.mab.textBackground.dark.graySvg:v().A.images.mab.textBackground.light.graySvg,z,"gray_background"===q.backgroundHighlight,"Gray"):void 0,backgroundColorBrown:D?A("action color brown_background-Brown background","dark"===W.mode?v().A.images.mab.textBackground.dark.brownSvg:v().A.images.mab.textBackground.light.brownSvg,z,"brown_background"===q.backgroundHighlight,"Brown"):void 0,backgroundColorOrange:D?A("action color orange_background-Orange background","dark"===W.mode?v().A.images.mab.textBackground.dark.orangeSvg:v().A.images.mab.textBackground.light.orangeSvg,z,"orange_background"===q.backgroundHighlight,"Orange"):void 0,backgroundColorYellow:D?A("action color yellow_background-Yellow background","dark"===W.mode?v().A.images.mab.textBackground.dark.yellowSvg:v().A.images.mab.textBackground.light.yellowSvg,z,"yellow_background"===q.backgroundHighlight,"Yellow"):void 0,backgroundColorTeal:D?A("action color teal_background-Green background","dark"===W.mode?v().A.images.mab.textBackground.dark.greenSvg:v().A.images.mab.textBackground.light.greenSvg,z,"teal_background"===q.backgroundHighlight,"Green"):void 0,backgroundColorBlue:D?A("action color blue_background-Blue background","dark"===W.mode?v().A.images.mab.textBackground.dark.blueSvg:v().A.images.mab.textBackground.light.blueSvg,z,"blue_background"===q.backgroundHighlight,"Blue"):void 0,backgroundColorPurple:D?A("action color purple_background-Purple background","dark"===W.mode?v().A.images.mab.textBackground.dark.purpleSvg:v().A.images.mab.textBackground.light.purpleSvg,z,"purple_background"===q.backgroundHighlight,"Purple"):void 0,backgroundColorPink:D?A("action color pink_background-Pink background","dark"===W.mode?v().A.images.mab.textBackground.dark.pinkSvg:v().A.images.mab.textBackground.light.pinkSvg,z,"pink_background"===q.backgroundHighlight,"Pink"):void 0,backgroundColorRed:D?A("action color red_background-Red background","dark"===W.mode?v().A.images.mab.textBackground.dark.redSvg:v().A.images.mab.textBackground.light.redSvg,z,"red_background"===q.backgroundHighlight,"Red"):void 0,textColorRed:D?k("action color red-Red text","dark"===W.mode?v().A.images.mab.textColor.dark.redSvg:v().A.images.mab.textColor.light.redSvg,z,"red"===E,"Red"):void 0,textColorOrange:D?k("action color orange-Orange text","dark"===W.mode?v().A.images.mab.textColor.dark.orangeSvg:v().A.images.mab.textColor.light.orangeSvg,z,"orange"===E,"Orange"):void 0,textColorYellow:D?k("action color yellow-Yellow text","dark"===W.mode?v().A.images.mab.textColor.dark.yellowSvg:v().A.images.mab.textColor.light.yellowSvg,z,"yellow"===E,"Yellow"):void 0,textColorTeal:D?k("action color teal-Green text","dark"===W.mode?v().A.images.mab.textColor.dark.greenSvg:v().A.images.mab.textColor.light.greenSvg,z,"teal"===E,"Green"):void 0,textColorBlue:D?k("action color blue-Blue text","dark"===W.mode?v().A.images.mab.textColor.dark.blueSvg:v().A.images.mab.textColor.light.blueSvg,z,"blue"===E,"Blue"):void 0,textColorPurple:D?k("action color purple-Purple text","dark"===W.mode?v().A.images.mab.textColor.dark.purpleSvg:v().A.images.mab.textColor.light.purpleSvg,z,"purple"===E,"Purple"):void 0,textColorPink:D?k("action color pink-Pink text","dark"===W.mode?v().A.images.mab.textColor.dark.pinkSvg:v().A.images.mab.textColor.light.pinkSvg,z,"pink"===E,"Pink"):void 0,textColorGray:D?k("action color gray-Gray text","dark"===W.mode?v().A.images.mab.textColor.dark.graySvg:v().A.images.mab.textColor.light.graySvg,z,"gray"===E,"Gray"):void 0,textColorBrown:D?k("action color brown-Brown text","dark"===W.mode?v().A.images.mab.textColor.dark.brownSvg:v().A.images.mab.textColor.light.brownSvg,z,"brown"===E,"Brown"):void 0,textColorDefault:D&&"default"!==E?k("action color default-Default text","dark"===W.mode?v().A.images.mab.textColor.dark.defaultSvg:v().A.images.mab.textColor.light.defaultSvg,z,!1,"Default"):void 0,...$,dismissKeyboard:h("mab.dismissKeyboard","webAction_generic",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.keyboardDownSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"keyboard.chevron.compact.down",localImageIdentifier:"keyboardDown"},accessibilityText:V.dismissKeyboard},apiRequestValue:{jsonPayload:M({action:"dismissKeyboard"}),context:void 0}}),closeActionMenu:h("mab.dismissKeyboard","nativeAction_setMenuType",{content:{type:"icon",imageReference:N?{imageUrl:v().A.images.mab.actions.xCircleSvg,imageTintColor:(0,b().vU)(W.icon.secondary)}:{sfProGlyphName:"xmark.circle.fill",localImageIdentifier:"cancel"},accessibilityText:V.closeActionMenu},apiRequestValue:{menuType:void 0,context:void 0}}),toggleNumberPositivity:h("mab.button.toggleNumberPositivity","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"minus.forwardslash.plus",imageTintColor:(0,b().vU)(W.icon.secondary)},disabled:a,accessibilityText:V.toggleNumberPositivity},apiRequestValue:{jsonPayload:M({action:"toggleNumberPositivity"}),context:void 0}})}}function D(e){const{buttonMap:t,shouldShowTemplatePills:i,frecentlyRankedActions:o,isEditingTitle:n,isEditingHeader:a,isEditingSimpleTableOrCollectionTextPropertyInExp:r,isEditingCallout:s,isEditingQuote:l,shouldPrioritizeList:c,shouldShowEmojiPicker:d,shouldShowFiling:u,shouldShowTemplates:m,someBlockPrioritizesIndentation:g,isTablet:b,isPersonalizedActionsEnabled:v,isDBUXMobileEnabled:f,isMobileDiscoveryModalEnabled:y,shouldShowSelectedTextButtons:h,isIndentable:k,isEmpty:A,shouldShowTeamspaceSelector:x,shouldRenderMABForNumberProperty:S}=e,T={id:"mab.buttonSection.teamspace",buttons:[t.teamspaceSelector].filter(p().O9),skipSectionDivider:!1};let M=[];if(n)if(i)M=[t.todoListTemplate,t.weeklyPlanTemplate,...y?[t.databaseDiscoveryModal]:[],t.templates];else{const e=b?[]:[t.speech,t.filePicker,d?t.emojiPicker:void 0],i=u?[t.filing]:[],o=m?[t.templates]:[];M=[...i,...o,...e].filter(p().O9)}if(S)return[{id:"mab.buttonSection.main",buttons:[t.toggleNumberPositivity]}];if(!n&&v){let e=[];if(e=function(e,t,i,o,n,a,r,s){const l=new Set(["todoListTemplate","weeklyPlanTemplate","templates","filing","databaseDiscoveryModal"]),c=new Set(["bold","italic","underline","strikethrough","biu","dismissKeyboard","closeActionMenu","indent","unindent","moveUp","moveDown","ai","teamspaceSelector"]),d=new Set(["color","backgroundColorDefault","backgroundColorGray","backgroundColorBrown","backgroundColorOrange","backgroundColorYellow","backgroundColorTeal","backgroundColorBlue","backgroundColorPurple","backgroundColorPink","backgroundColorRed","textColorDefault","textColorGray","textColorBrown","textColorOrange","textColorYellow","textColorTeal","textColorBlue","textColorPurple","textColorPink","textColorRed"]);let u;u=n?new Set([...c,...l,...d,"insert","biu","turnInto","more"]):r||s?new Set([...c,...l,...d,"insert","turnInto","more"]):i?new Set([...c,...l,...d,"copyLinkToBlock","insert","turnInto","more"]):a?new Set([...c,...l,...d,"toDoList","h1","h2","h3","bulletedList","numberedList","toggleList","quote","callout","insert","speech","turnInto","filePicker","ai","more"]):new Set([...c,...l,...d,"insert","turnInto","more"]);const m=Object.keys(e).filter((i=>{var o;return!u.has(i)&&t.includes(i)&&!(null!==(o=e[i])&&void 0!==o&&null!==(o=o.content)&&void 0!==o&&o.disabled)})).sort(((e,i)=>t.indexOf(e)-t.indexOf(i))).map((t=>e[t])).filter(p().O9).slice(0,3).sort(((e,t)=>e.id>t.id?1:-1));return m}(t,o,A,0,a,r,s,l),e.length<3){const i=function(e,t){return t?[e.toDoList,e.bulletedList,e.toggleList].filter(p().O9):[e.toDoList,e.bulletedList,e.h1].filter(p().O9)}(t,a);e=Array.from(new Set([...e,...i])).slice(0,3)}const i=function(e){const{buttonMap:t,shouldShowEmojiPicker:i,shouldShowSelectedTextButtons:o,isIndentable:n,isEditingSimpleTableOrCollectionTextPropertyInExp:a,isEditingCallout:r,isDBUXMobileEnabled:s}=e;let l=[];l=a&&s?N(t,o):o?[t.color,t.bold,t.underline,t.italic,t.strikethrough,t.link,t.comment,t.turnInto,t.code,t.equation,t.copyLinkToBlock,t.more]:a?[t.color,t.bold,t.underline,t.italic,t.strikethrough,t.mention,t.link,t.comment,t.code,t.equation,t.copyLinkToBlock]:n?[t.unindent,t.indent,t.insert,t.biu,t.moveUp,t.moveDown,t.filePicker,t.speech,t.turnInto,i?t.emojiPicker:void 0,t.undo,t.redo,t.mention,t.delete,t.more]:r?[t.insert,t.biu,t.filePicker,t.speech,t.turnInto,i?t.emojiPicker:void 0,t.undo,t.redo,t.unindent,t.indent,t.moveUp,t.moveDown,t.delete,t.mention,t.more]:[t.insert,t.biu,t.filePicker,t.speech,t.turnInto,i?t.emojiPicker:void 0,t.undo,t.redo,t.unindent,t.indent,t.moveUp,t.moveDown,t.mention,t.delete,t.more];return l.filter(p().O9)}({buttonMap:t,shouldShowEmojiPicker:d,shouldShowSelectedTextButtons:h,isIndentable:k,isEditingSimpleTableOrCollectionTextPropertyInExp:r,isEditingCallout:s,isDBUXMobileEnabled:f}),n=function(e,t){const i=new Set(t.map((e=>e.id)));return e.filter((e=>!i.has(e.id)))}(i,e);return[x?T:void 0,e.length>0?{id:"mab.buttonSection.main.personalized",buttons:[...[t.ai,...e].filter(p().O9).entries()].map((e=>{let[t,i]=e;return q(i,t)})),skipSectionDivider:!1,shouldFadeIn:!0}:void 0,{id:"mab.buttonSection.main",buttons:[...n.entries()].map((e=>{let[t,i]=e;return q(i,t)})),shouldFadeIn:!0}].filter(p().O9)}if(c&&g){return[x?T:void 0,{id:"mab.buttonSection.main",buttons:[...[t.ai,t.unindentPioritized,t.indentPrioritized,t.moveUpPrioritized,t.moveDownPrioritized].filter(p().O9),...b?[t.insert,t.biu,t.turnInto,d?t.emojiPicker:void 0,t.filePicker,t.speech].filter(p().O9):[t.insert,t.biu,t.speech,t.filePicker,t.turnInto,d?t.emojiPicker:void 0].filter(p().O9),...[t.comment,t.undo,t.mention,t.delete,t.more].filter(p().O9)]}].filter(p().O9)}return[x?T:void 0,{id:"mab.buttonSection.main",buttons:(()=>{if(n)return M;if(f&&r)return N(t,h);const e=b?[t.turnInto,t.speech,t.filePicker]:[t.speech,t.filePicker,t.turnInto];return[u&&b?t.filing:void 0,t.ai,t.insert,t.biu,...e,d?t.emojiPicker:void 0,t.comment,t.undo,t.mention,t.delete,t.indent,t.unindent,t.moveUp,t.moveDown,t.more]})().filter(p().O9)}].filter(p().O9)}function N(e,t){return[e.bold,e.underline,e.italic,e.strikethrough,e.mention,e.link,...t?[e.comment]:[],e.code,e.equation,e.copyLinkToBlock].filter(p().O9)}const E="static-";function q(e,t){return{...e,id:`${e.id}.${E}${t}`}}function F(e){const t=e.split(".");if(t.length>0){if(t[t.length-1].startsWith(E))return t.slice(0,-1).join(".")}return e}function O(e){return e.id=`${e.id}.prioritized`,e}const V={"insert text-Text":"text","insert page-Page":"page","insert to_do-To-do list":"toDoList","insert header-Heading 1":"h1","insert sub_header-Heading 2":"h2","insert sub_sub_header-Heading 3":"h3","insert bulleted_list-Bulleted list":"bulletedList","insert numbered_list-Numbered list":"numberedList","insert toggle-Toggle list":"toggleList","insert quote-Quote":"quote","insert callout-Callout":"callout","insert link_to_page-Link to page":"linkToPage","insert divider-Divider":"divider","insert table-Table":"table","insert encrypted_text-Encrypted Text":"encryptedText","action color default_background-Default background":"backgroundColorDefault","action color gray_background-Gray background":"backgroundColorGray","action color brown_background-Brown background":"backgroundColorBrown","action color orange_background-Orange background":"backgroundColorOrange","action color yellow_background-Yellow background":"backgroundColorYellow","action color teal_background-Green background":"backgroundColorTeal","action color blue_background-Blue background":"backgroundColorBlue","action color purple_background-Purple background":"backgroundColorPurple","action color pink_background-Pink background":"backgroundColorPink","action color red_background-Red background":"backgroundColorRed","action color default-Default text":"textColorDefault","action color gray-Gray text":"textColorGray","action color brown-Brown text":"textColorBrown","action color orange-Orange text":"textColorOrange","action color yellow-Yellow text":"textColorYellow","action color teal-Green text":"textColorTeal","action color blue-Blue text":"textColorBlue","action color purple-Purple text":"textColorPurple","action color pink-Pink text":"textColorPink","action color red-Red text":"textColorRed"};function H(e,t){let i="textColor";const o=b().Wr.find((t=>t===e));let n;"default"===e||o&&(o.includes("background")?(n="background",i="textBackgroundColor"):n="color");const a=n&&o?(0,b().k5)(o,t)[n]:void 0;return{localImageIdentifier:i,imageTintColor:a?(0,b().vU)(a):void 0}}var G=()=>i(34662),K=()=>i(653998),W=()=>i(975392),z=()=>i(373143),$=()=>i(810310),Y=()=>i(133763),J=()=>i(870099),Q=()=>i(57096),Z=()=>i(399309),X=()=>i(150968),ee=()=>i(950347),te=()=>i(944498),ie=()=>i(137476),oe=()=>i(782422),ne=()=>i(88442),ae=()=>i(477784),re=()=>i(707423),se=()=>i(481148),le=()=>i(621641),ce=()=>i(733158),de=()=>i(360482),ue=()=>i(92451),me=()=>i(486881),ge=()=>i(53664);var be=()=>i(622286),pe=()=>i(483233);const ve={TIME_BUCKETS:[{hours:24,weight:100},{hours:96,weight:70},{hours:168,weight:50},{hours:720,weight:30}],DEFAULT_BUCKET_WEIGHT:10},fe={TIME_BUCKETS:[{hours:4,weight:100},{hours:12,weight:80},{hours:24,weight:70},{hours:72,weight:60},{hours:168,weight:50},{hours:336,weight:40},{hours:672,weight:30}],DEFAULT_BUCKET_WEIGHT:20};var ye=()=>i(82007),he=()=>i(709863),ke=()=>i(410888),Ae=()=>i(773552),xe=()=>i(485966),Se=()=>i(840024),Te=()=>i(802955),Me=()=>i(836331),we=()=>i(779921),Ce=()=>i(413871),Ie=()=>i(182613),_e=()=>i(205670),Be=(i(362833),()=>i(316515)),Pe=()=>i(993659),Re=()=>i(360378),je=()=>i(848105),Ue=()=>i(210562),Le=()=>i(735432),De=()=>i(938124);function Ne(e){const{type:t,actionSections:i,closeParentMenu:o,context:n}=e,a={},r=[];for(const s of i){const e={id:`${s.key}`,title:s.title,items:s.actions.map((e=>{var i;const r=`${e.key}-${e.analyticsName||""}`;return a[r]={...e,closeParentMenu:o},{id:r,title:e.displayName||"",icon:(null===(i=e.nativeImageReference)||void 0===i?void 0:i.call(e,n))??{},action:T("webAction_genericAction",{menuType:t,actionId:r,context:void 0}),checked:!1}}))};r.push(e)}return{actions:a,sections:r}}function Ee(e){const{key:t,displayName:i,analyticsName:o,closeParentMenu:n,action:a}=e,r=i;return{key:`action ${t}`,displayName:i?ae().A.formatMessage(i):void 0,analyticsName:o||`textformatting_action_${t}`,searchName:r?`${ae().A.formatMessage(r)} ${r.defaultMessage}`:void 0,validators:[],action:a,closeParentMenu:Boolean(n)}}const qe={bold:Ee({key:"bold",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().vD(t,["b"])}}),italic:Ee({key:"italic",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().vD(t,["i"])}}),underline:Ee({key:"underline",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().vD(t,["_"])}}),strikethrough:Ee({key:"strikethrough",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().vD(t,["s"])}}),code:Ee({key:"code",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().vD(t,["c"])}}),comment:Ee({key:"comment",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary());const n=await i(73631).T.formulas.load();re().aI(o,"mobile_action_bar",n)}}),emojiPicker:Ee({key:"emojiPicker",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),re().Rk(i)}}),equation:Ee({key:"equation",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),re().FM(i)}}),filePicker:Ee({key:"filePicker",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),re().zc(i)}}),indent:Ee({key:"indent",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().lS(t)}}),unindent:Ee({key:"unindent",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().u7(t)}}),moveDown:Ee({key:"moveDown",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().cM(t)}}),moveUp:Ee({key:"moveUp",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().FP(t)}}),undo:Ee({key:"undo",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().RA(t)}}),redo:Ee({key:"redo",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().xT(t)}}),trash:Ee({key:"trash",closeParentMenu:!1,action:e=>{let{environment:t}=e;re()._Y(t)}}),mention:Ee({key:"mention",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),re().FN(i)}}),ai:Ee({key:"ai",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),re().hW(i)}}),voiceInput:Ee({key:"voiceInput",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary());Ue().Ay.state.enabled&&!Ue().Ay.state.loading?await je().dictationActions.stopDictation({environment:i,from:"native_action"}):await je().dictationActions.smartToggleDictation({environment:i,from:"native_action",preCreateDictationBlock:i.device.isIOS&&Fe(),includeSystemAudio:!1})}}),link:Ee({key:"link",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),re().TK(i)}}),copyLinkToBlock:Ee({key:"copyLinkToBlock",closeParentMenu:!1,action:async e=>{let{environment:t}=e;const o=Ie().default.state.stores[0];if(!o)return;(await i(91472).R.clipboardActions.load()).copyLinkToBlock({environment:t,blocks:[o],event:void 0})}}),more:Ee({key:"more",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().al(t)}}),teamspaceSelector:Ee({key:"teamspaceSelector",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().rZ(t)}}),toggleNumberPositivity:Ee({key:"toggleNumberPositivity",closeParentMenu:!1,action:e=>{let{environment:t}=e;const o=we().A.state;if(!o.isOpen)return;const n=o.store.getPropertyValue(o.property);if(!n)return;const a=(0,i(716605).Me)(n);if(!a)return;const r=-1*a;(0,i(15123).YX)(r,t,(0,De().IB)(o)),(0,De()._H)(o,t,we().A)}}),filing:Ee({key:"filing",closeParentMenu:!1,action:async e=>{let{environment:t}=e;const o=(0,oe().ao)();if(!o)return;const n=o.getParentStore();if(!n)return;const{currentSpaceStore:a}=xe().default.state,r="space"===n.table&&a&&n.id===a.id,s=t.RouterStore.state.route,l="page"===s.name&&s.showMoveTo;await i(10895).LP({environment:t,blocks:[o],moveToContext:"quick_add_mab",disableSuccessToast:!0,onAccept:e=>{i(392336).l7(t)},onCanceled:()=>{},isAddTo:l,isDefaultPrivateLocation:r})}}),dismissKeyboard:Ee({key:"dismissKeyboard",closeParentMenu:!0,action:e=>{let{environment:t}=e;Re().IU({environment:t}),i(113269).wr(),re().i3(t,void 0,!1),re().Qu(t,void 0,!1),re().Km(t,"hide_keyboard"),i(384221).blurActiveElement()}}),todoListTemplate:Ee({key:"todoListTemplate",closeParentMenu:!1,action:e=>{let{environment:t}=e;Re().IU({environment:t}),re().XR(t,Be().kx.todoListMobile)}}),weeklyPlanTemplate:Ee({key:"weeklyPlanTemplate",closeParentMenu:!1,action:e=>{let{environment:t}=e;Re().IU({environment:t}),re().XR(t,Be().kx.weeklyPlanMobile)}}),templates:Ee({key:"templates",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().og(t)}}),databaseDiscoveryModal:Ee({key:"databaseDiscoveryModal",closeParentMenu:!1,action:e=>{let{environment:t}=e;const i=Ie().default.state.stores[0];re().v5(t,i)}})};function Fe(){if("editing"!==_e().default.state.mode)return!1;const e=_e().default.state.multiSelection.start.store;return!!(0,i(280630).Le)(e)}var Oe=i(163643);const Ve=(0,K().YK)({subMenuLabelSuggested:{defaultMessage:"Suggested",id:"mobileActionBar.subMenuLabel.suggested"},subMenuLabelInsert:{defaultMessage:"Add",id:"mobileActionBar.subMenuLabel.insert"},subMenuLabelTurnInto:{defaultMessage:"Turn into",id:"mobileActionBar.subMenuLabel.turnInto"},subMenuLabelTextFormatting:{defaultMessage:"Format",id:"mobileActionBar.subMenuLabel.textFormatting"},subMenuLabelTextColor:{defaultMessage:"Text color",id:"mobileActionBar.subMenuLabel.textColor"},templatesButtonTitle:{defaultMessage:"Templates",id:"mobileActionBar.templateButtonTitle"},moreTemplatesButtonTitle:{defaultMessage:"More",id:"mobileActionBar.moreTemplatesButtonTitle"},todoListTemplateTitle:{defaultMessage:"To-do list",id:"mobileActionBar.templateTitle.todoList"},weeklyPlanTemplateTitle:{defaultMessage:"Weekly plan",id:"mobileActionBar.templateTitle.weeklyPlan"},databaseDiscoveryModalTitle:{defaultMessage:"Database",id:"mobileActionBar.databaseDiscoveryModalTitle"},actionMenuInsertBlockTitle:{defaultMessage:"Insert Block",id:"mobileActionBar.actionMenuTitle.insertBlock"},actionMenuTurnIntoTitle:{defaultMessage:"Turn Into",id:"mobileActionBar.actionMenuTitle.turnInto"},actionMenuColorTitle:{defaultMessage:"Color",id:"mobileActionBar.actionMenuTitle.blockColor"},accessibilityInsert:{defaultMessage:"Add block",id:"mobileActionBar.accessibility.insertBlock"},accessibilityTurnInto:{defaultMessage:"Turn into block",id:"mobileActionBar.accessibility.turnInto"},accessibilityEmojiPicker:{defaultMessage:"Add emoji",id:"mobileActionBar.accessibility.emojiPicker"},accessibilityFilePicker:{defaultMessage:"Add image",id:"mobileActionBar.accessibility.filePicker"},accessibilityMention:{defaultMessage:"Add mention",id:"mobileActionBar.accessibility.mention"},accessibilityTextFormatting:{defaultMessage:"Open text formatting menu",id:"mobileActionBar.accessibility.textFormatting"},accessibilityComment:{defaultMessage:"Add comment",id:"mobileActionBar.accessibility.comment"},accessibilityTrash:{defaultMessage:"Delete block",id:"mobileActionBar.accessibility.trash"},accessibilityIndent:{defaultMessage:"Indent block",id:"mobileActionBar.accessibility.indent"},accessibilityDedent:{defaultMessage:"Unindent block",id:"mobileActionBar.accessibility.unindent"},accessibilityMoveUp:{defaultMessage:"Move a block up",id:"mobileActionBar.accessibility.moveUp"},accessibilityMoveDown:{defaultMessage:"Move a block down",id:"mobileActionBar.accessibility.moveDown"},accessibilityUndo:{defaultMessage:"Undo edit",id:"mobileActionBar.accessibility.undo"},accessibilityRedo:{defaultMessage:"Redo edit",id:"mobileActionBar.accessibility.redo"},accessibilityMore:{defaultMessage:"More block actions",id:"mobileActionBar.accessibility.more"},accessibilityBold:{defaultMessage:"Bold",id:"mobileActionBar.accessibility.bold"},accessibilityItalics:{defaultMessage:"Italicize",id:"mobileActionBar.accessibility.italics"},accessibilityUnderline:{defaultMessage:"Underline",id:"mobileActionBar.accessibility.underline"},accessibilityStrikethrough:{defaultMessage:"Strikethrough",id:"mobileActionBar.accessibility.strikethrough"},accessibilityTextColor:{defaultMessage:"Text color",id:"mobileActionBar.accessibility.textColor"},accessibilityCode:{defaultMessage:"Code",id:"mobileActionBar.accessibility.code"},accessibilityLink:{defaultMessage:"Add link",id:"mobileActionBar.accessibility.link"},accessibilityCopyLinkToBlock:{defaultMessage:"Copy link to block",id:"mobileActionBar.accessibility.copyLinkToBlock"},accessibilityEquation:{defaultMessage:"Add equation",id:"mobileActionBar.accessibility.equation"},accessibilityFiling:{defaultMessage:"Page location",id:"mobileActionBar.accessibility.filing"},accessibilityCloseTextFormattingMenu:{defaultMessage:"Close text formatting menu",id:"mobileActionBar.accessibility.close"},accessibilityDismissKeyboard:{defaultMessage:"End editing",id:"mobileActionBar.accessibility.endEditing"},accessibilityCloseActionMenu:{defaultMessage:"Close menu",id:"mobileActionBar.accessibility.closeMenu"},accessibilityAi:{defaultMessage:"Notion AI",id:"mobileActionBar.accessibility.ai"},accessibilityTeamspaceSelector:{defaultMessage:"Select teamspace",id:"mobileActionBar.accessibility.teamspaceSelector"},toggleNumberPositivity:{defaultMessage:"Toggle number positive or negative",id:"mobileActionBar.accessibility.toggleNumberPositivity"},filingButtonPrivateSection:{defaultMessage:"Private",id:"mobileActionBar.filing.private"},accessibilityTodoList:{defaultMessage:"Add a to-do list",id:"mobileActionBar.accessibility.todoList"},accessibilityH1:{defaultMessage:"Add an H1 heading",id:"mobileActionBar.accessibility.h1"},accessibilityH2:{defaultMessage:"Add an H2 heading",id:"mobileActionBar.accessibility.h2"},accessibilityH3:{defaultMessage:"Add an H3 heading",id:"mobileActionBar.accessibility.h3"},accessibilityBulletedList:{defaultMessage:"Add a bulleted list",id:"mobileActionBar.accessibility.bulletedList"},accessibilityNumberedList:{defaultMessage:"Add a numbered list",id:"mobileActionBar.accessibility.numberedList"},accessibilityToggleList:{defaultMessage:"Add a toggle list",id:"mobileActionBar.accessibility.toggleList"},accessibilityQuote:{defaultMessage:"Add a quote block",id:"mobileActionBar.accessibility.quote"},accessibilityCallout:{defaultMessage:"Add a callout block",id:"mobileActionBar.accessibility.callout"}}),He={text:!1,to_do:!0,bulleted_list:!0,numbered_list:!0,toggle:!0,column:!1,transclusion_container:!1,callout:!1,quote:!1,post:!1};function Ge(e){var t;const{onAction:i,fallbackRenderer:r,...s}=e,l=null===(t=(0,a().v3)().mobileNative)||void 0===t?void 0:t.api.renderMobileActionBar,c=(0,n().y)(l,s);return function(e,t,i,n){var r;const s=null===(r=(0,a().v3)().mobileNative)||void 0===r?void 0:r.componentEvents;(0,o.useEffect)((()=>{if(s&&n&&t)return s.addListener(e,t,i,n)}),[e,t,i,n,s])}("MobileActionBar",c,"onAction",i),!c&&r?(0,Oe.jsx)(Oe.Fragment,{children:r()}):null}function Ke(e){const{currentBlockStore:t,fallbackRenderer:i,stores:n,shouldShowMoveTo:v,renderApi:h}=e,k=(0,a().v3)(),A=(0,s().S)(),T=(0,K().tz)(),M=(0,Y().J)(),P=(0,l().K8)((()=>Me().default.getEligibleGroup({experimentId:"mab_personalized_section",defaultGroup:"control"})),[]),R="v1"===P||"v2"===P,j=(0,l().K8)((()=>Me().default.getEligibleGroup({experimentId:"mab_refresh_personalization",defaultGroup:"control"})),[]),U="v1"===j||"v2"===j,N=(0,be().X)("mobile_mab_emoji_picker"),E=(0,be().X)("db_ux_mobile"),q=(0,o.useRef)(void 0),O=(0,l().K8)((()=>{const e=null==A?void 0:A.publicEditModeStore.state;return re().rV(k,t,e)}),[k,t,null==A?void 0:A.publicEditModeStore]),H=(0,l().K8)((()=>{if(k.TabbedRouterStore){const t=(0,c().XB)(k.TabbedRouterStore.state);var e;if("web"===(null==t?void 0:t.type))return"team"===(null===(e=t.route)||void 0===e?void 0:e.name)}return!1}),[k.TabbedRouterStore]),ce=(0,o.useMemo)((()=>W().Bj((e=>{const{blocks:t,environment:i}=e;return function(e,t,i){return{insertBlock:Ne({type:"insertBlock",actionSections:Le().o2(t,e),context:e,closeParentMenu:!0}),turnInto:Ne({type:"turnInto",actionSections:Le().o2(i,e),context:e,closeParentMenu:!0}),textColor:Ne({type:"textColor",actionSections:Le().o2([Pe().qW,Pe().J1],e),context:e,closeParentMenu:!0}),textSelectionColor:Ne({type:"textSelectionColor",actionSections:Le().o2([Pe().qC,Pe().nd],e),context:e,closeParentMenu:!0})}}({environment:i,blocks:t,publicEditMode:void 0},function(e,t){return(0,z().dH)(e,t).state.insertActions}(i,U),[(0,$().kR)({showNewMABIcons:U})])}),(e=>{let{blocks:t,environment:i}=e;const o=t.map((e=>e.key)).join(",");return`${i.key}-${o}`}))),[U]),ke=(0,l().K8)((()=>ce({blocks:We(),environment:k,isPersonalizedActionsEnabled:R})),[k,ce,R]),Be=(0,l().K8)((()=>{const e=Xe(n.ignoreSelectionAreaStore);return 1===(null==e?void 0:e.length)?e[0]:void 0}),[n.ignoreSelectionAreaStore],{useDeepEqual:!0}),Re=(0,l().K8)((()=>!0===re().BT(n.ignoreSelectionAreaStore,k.TextSelectionCompositionStore,Be,R)),[k,n,Be,R]),je=(0,l().K8)((()=>{const e=Boolean(O.disableStyleAnnotations);return Re&&!e}),[O.disableStyleAnnotations,Re]),Ue=(0,l().K8)((()=>{const e=(e,t)=>{if(!e||"editing"!==e.mode)return;const{multiSelection:i}=e;return{startRecord:i.start.store.pointer,startIndex:i.start.index,endRecord:i.end.store.pointer,endIndex:i.end.index,source:t}};return e(_e().default.state,"TextSelectionStore")||e(n.ignoreSelectionAreaStore.state.savedTextSelectionStoreState,"IgnoreSelectionAreaStore")}),[n.ignoreSelectionAreaStore],{useDeepEqual:!0}),De=(0,l().K8)((()=>{if(!Ue)return;const{source:e,...t}=Ue;return t}),[Ue],{useDeepEqual:!0}),Ee=(0,l().K8)((()=>{var e;const t=he().u.state.selectedTeamStore;if(!t)return;const i=t.getIcon(),o=i?(0,u().WO)(i.icon):void 0,n=t.getName(),a=n?[...n][0].toUpperCase():void 0;return{name:n,icon:o?"unicode_emoji"===o.type?{emoji:o.emoji.unicode}:"notion_icon"===o.type?{imageUrl:o.icon,imageTintColor:null===(e=(0,m().DV)(o.icon))||void 0===e?void 0:e.color}:"custom_emoji"===o.type||"app_package_asset"===o.type||"url"===o.type?{imageUrl:o.icon}:void 0:a?{initial:a}:void 0}}),[]),Fe=(0,l().K8)((()=>t.isDraft()),[t]),Ke=!H&&Fe&&void 0!==(null==Ee?void 0:Ee.name)&&!k.device.isAndroid,tt=(0,se().GN)(),it=(0,l().K8)((()=>{const e=re().oG(we().A.state);return"number"===(null==e?void 0:e.type)&&tt}),[tt]),ot=(0,l().K8)((()=>{var e;const{NativeMobileActionBarStore:i}=k,o=(0,b().O4)({theme:k.ThemeModeStore.state}),a=t.getType(),r=t.getFormat(),s=ze(),l=Ye(E),c=we().A.state.isOpen,u=Ze(n.ignoreSelectionAreaStore),m=Boolean(u&&(0,le().KP)(u)),g=(0,ne().ZE)(null==A?void 0:A.publicEditModeStore.state),p=!(0,oe().Te)()&&(0,X().h)(),f=!(0,oe().Te)()&&(0,ee().M5)(),y=l||c,h=s||l,x=!re().xr(A&&A.publicEditModeStore.state,t),S=!re().nC(A&&A.publicEditModeStore.state),M=function(){let e;e="editing"===_e().default.state.mode?(0,me().x7)([G().Ifu.Bold,G().Ifu.Italic,G().Ifu.Underline,G().Ifu.Strike,G().Ifu.Code,G().Ifu.Link,G().Ifu.Equation,...(0,G().kJl)(G().Ifu.Highlight)],_e().default.state.multiSelection,_e().default.state.forceExtendAnnotations):{};const t=e.hf,i=e.hb;return{bold:Boolean(e[G().Ifu.Bold]),italic:Boolean(e[G().Ifu.Italic]),underline:Boolean(e[G().Ifu.Underline]),strikethrough:Boolean(Boolean(e[G().Ifu.Strike])),code:Boolean(e[G().Ifu.Code]),link:Boolean(e[G().Ifu.Link]),equation:Boolean(e[G().Ifu.Equation]),textHighlight:t&&(0,G().YuY)(t)?(0,G().uIc)(t):void 0,backgroundHighlight:i&&(0,G().YuY)(i)?(0,G().uIc)(i):void 0}}(),w=Boolean(O.disableStyleAnnotations),C=null==i||null===(e=i.state.menu)||void 0===e?void 0:e.type,I=_(ke.insertBlock.sections),B=_(ke.turnInto.sections),P=_(ke.textColor.sections),j=function(e,t,i){var o;const{NativeMobileActionBarStore:n}=e,a=n&&void 0!==(null===(o=n.state.menu)||void 0===o?void 0:o.type)?t.state.savedTextSelectionStoreState:void 0;if(!a)return i;const r="editing"===a.mode&&(0,me().x7)(["hf","hb"],a.multiSelection,a.forceExtendAnnotations);if(r){const e=r.hf??r.hb;return e&&(0,G().YuY)(e)?(0,G().uIc)(e):void 0}}(k,n.ignoreSelectionAreaStore,M.textHighlight),D=!Z().BB(),N=!Z().fH(),q=!We().every(Q().v6),F=!We().every(Q().mE),V=s||c,H=!m,K=!m,W=Boolean(a&&(0,d().Q3)(a))||!m,z=Boolean(a&&(0,d().pD)(a,r))||Boolean(O.disableComment),$=(null==Be?void 0:Be.isNavigableBlock())||(0,te().mEr)(Be),Y=s&&Qe(k,t)&&Je(k),J=v&&!Je(k),ie=function(e,t,i,o){if(!i||!t)return;if(e.device.isTablet&&!function(e){if(!e.hasContent())return!0;return e.getContentStores().every((e=>e.isEmptyEditableBlock()))}(t))return;const n=t.getParentStore();if(!n||!(0,ue().D_)(n))return;function a(e){if(!e)return;const t=10;return e.length>t?`${Array.from(e).slice(0,t).join("").trim()}`:e}const{currentSpaceStore:r}=xe().default.state;if(n instanceof Ce().SL&&r&&n.id===r.id)return a(ae().A.formatMessage(Ve.filingButtonPrivateSection));return a((0,ue().Qe)(n,o,e,Se().zD.shouldEnablePageTitleDiffs(e.device)))}(k,null==A?void 0:A.pageStore,J,T);return L({createAIAction:g,createDictationAction:p,createMeetingNotesAction:f,disableDictationActions:y,disableAIAction:h,disableTextActions:x,disableBlockActions:S,disableLinkAction:H,disableEquationAction:K,disableCommentAction:z,disableMentionAction:W,disableTextFormatting:w,disableInsertBlockAction:I,disableTurnIntoAction:B,disableTextColorAction:P,disableDeleteBlock:V,disableUndo:D,disableRedo:N,disableIndent:q,disableUnindent:F,disableCopyLinkToBlock:$,selectedMenuType:C,isEditingTitle:s,shouldShowTextActions:Re,usePillStyling:Y,isPersonalizedActionsEnabled:R,showNewMABIcons:U,textSelectionColor:j,textFormattingSelections:M,titleTexts:{filing:ie,template:ae().A.formatMessage(Ve.templatesButtonTitle),moreTemplates:ae().A.formatMessage(Ve.moreTemplatesButtonTitle),todoListTemplate:ae().A.formatMessage(Ve.todoListTemplateTitle),weeklyPlanTemplate:ae().A.formatMessage(Ve.weeklyPlanTemplateTitle),databaseDiscoveryModal:ae().A.formatMessage(Ve.databaseDiscoveryModalTitle)},accessibilityTexts:{insert:ae().A.formatMessage(Ve.accessibilityInsert),turnInto:ae().A.formatMessage(Ve.accessibilityTurnInto),emojiPicker:ae().A.formatMessage(Ve.accessibilityEmojiPicker),filePicker:ae().A.formatMessage(Ve.accessibilityFilePicker),mention:ae().A.formatMessage(Ve.accessibilityMention),comment:ae().A.formatMessage(Ve.accessibilityComment),textFormatting:ae().A.formatMessage(Ve.accessibilityTextFormatting),trash:ae().A.formatMessage(Ve.accessibilityTrash),ai:ae().A.formatMessage(Ve.accessibilityAi),undo:ae().A.formatMessage(Ve.accessibilityUndo),redo:ae().A.formatMessage(Ve.accessibilityRedo),more:ae().A.formatMessage(Ve.accessibilityMore),indent:ae().A.formatMessage(Ve.accessibilityIndent),unindent:ae().A.formatMessage(Ve.accessibilityDedent),moveUp:ae().A.formatMessage(Ve.accessibilityMoveUp),moveDown:ae().A.formatMessage(Ve.accessibilityMoveDown),bold:ae().A.formatMessage(Ve.accessibilityBold),italics:ae().A.formatMessage(Ve.accessibilityItalics),underline:ae().A.formatMessage(Ve.accessibilityUnderline),strikethrough:ae().A.formatMessage(Ve.accessibilityStrikethrough),textColor:ae().A.formatMessage(Ve.accessibilityTextColor),code:ae().A.formatMessage(Ve.accessibilityCode),link:ae().A.formatMessage(Ve.accessibilityLink),copyLinkToBlock:ae().A.formatMessage(Ve.accessibilityCopyLinkToBlock),equation:ae().A.formatMessage(Ve.accessibilityEquation),close:ae().A.formatMessage(Ve.accessibilityCloseTextFormattingMenu),filing:ae().A.formatMessage(Ve.accessibilityFiling),todoList:ae().A.formatMessage(Ve.accessibilityTodoList),h1:ae().A.formatMessage(Ve.accessibilityH1),h2:ae().A.formatMessage(Ve.accessibilityH2),h3:ae().A.formatMessage(Ve.accessibilityH3),bulletedList:ae().A.formatMessage(Ve.accessibilityBulletedList),numberedList:ae().A.formatMessage(Ve.accessibilityNumberedList),toggleList:ae().A.formatMessage(Ve.accessibilityToggleList),quote:ae().A.formatMessage(Ve.accessibilityQuote),callout:ae().A.formatMessage(Ve.accessibilityCallout),dismissKeyboard:ae().A.formatMessage(Ve.accessibilityDismissKeyboard),closeActionMenu:ae().A.formatMessage(Ve.accessibilityCloseActionMenu),teamspaceSelector:ae().A.formatMessage(Ve.accessibilityTeamspaceSelector),toggleNumberPositivity:ae().A.formatMessage(Ve.toggleNumberPositivity)},teamIcon:null==Ee?void 0:Ee.icon,teamspaceName:null==Ee?void 0:Ee.name,theme:o})}),[k,t,E,n.ignoreSelectionAreaStore,A,O.disableStyleAnnotations,O.disableComment,ke,Be,v,Re,R,U,T,Ee]),nt=(0,l().K8)((()=>{var e;const t=k.NativeMobileActionBarStore,i=Boolean(null==t||null===(e=t.state)||void 0===e?void 0:e.isSubMenuOverridden),o=Ae().A.state.open,n=E&&Ye(!0),a=je&&!R&&!n;var r;return i?null==t||null===(r=t.state.subMenu)||void 0===r?void 0:r.type:o?"slashMenu":a?"textFormatting":void 0}),[k.NativeMobileActionBarStore,E,R,je]),at=(0,be().X)("mobile_discovery_modal_gate"),rt=!(0,l().O$)(Te().e),st=(0,l().K8)((()=>{var e;const i=ze(),o=$e(Be),a=Ye(E),r="callout"===(null==(s=Be)||null===(l=s.getParentBlockStore())||void 0===l?void 0:l.getType());var s,l;const c=function(e){const t=null==e?void 0:e.getType();return"quote"===t}(Be),d=!re().nC(A&&A.publicEditModeStore.state),u=!We().every(Q().v6),m=!We().every(Q().mE),g=Xe(n.ignoreSelectionAreaStore),b=!!g&&g.some((e=>{const t=e.getType();return t&&He[t]})),p=!rt&&Qe(k,t)&&Je(k),f=Boolean(Be&&(0,de().P4)(Be)),y=null==Be?void 0:Be.getType(),h=y&&He[y],x=!Boolean(null===(e=k.NativeMobileActionBarStore)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.isSubMenuOverridden)&&je,S=!(d||u&&m),T=R?function(e,t){const i=new(pe().A),o=t?fe:ve;return i.getFrecencyRankedActions(e,o)}(ye().A.get(),"v2"===P):[];return D({buttonMap:ot,shouldShowTemplatePills:p,frecentlyRankedActions:T,isEditingTitle:i,isEditingHeader:o,isEditingSimpleTableOrCollectionTextPropertyInExp:a,isEditingCallout:r,isEditingQuote:c,shouldPrioritizeList:S,someBlockPrioritizesIndentation:b,shouldShowEmojiPicker:N,shouldShowFiling:v&&!Je(k),shouldShowTemplates:Qe(k,t),isTablet:k.device.isTablet,isPersonalizedActionsEnabled:R,isDBUXMobileEnabled:E,isMobileDiscoveryModalEnabled:at,shouldShowSelectedTextButtons:x,isIndentable:h,isEmpty:f,shouldShowTeamspaceSelector:Ke,shouldRenderMABForNumberProperty:it})}),[Be,E,at,A,n.ignoreSelectionAreaStore,k,t,je,R,P,ot,v,Ke,N,it,rt]),lt=(0,l().K8)((()=>{var e;const{NativeMobileActionBarStore:t}=k,i=null==t||null===(e=t.state.menu)||void 0===e?void 0:e.type,o=function(e){const{buttonMap:t,shouldShowTextActions:i}=e;let o;return o=i?[B,t.ai,t.color,t.comment,t.bold,t.italic,t.underline,t.strikethrough,t.link,t.code,t.equation].filter(p().O9):[B,t.color,t.bold,t.italic,t.underline,t.strikethrough,t.link,t.code,t.equation].filter(p().O9),{id:"mab.buttonSection.textFormatting",shouldFadeIn:!0,buttons:o}}({buttonMap:ot,shouldShowTextActions:Re}),n=void 0===i?ot.dismissKeyboard:ot.closeActionMenu,a=function(e){const{version:t,selectedMenu:i,selectedSubMenu:o,nativeMenus:n,buttonSections:a,nativeSubMenus:r,dismissKeyboardButton:s,localizedMessages:l}=e;return{nativeMenus:n,nativeSubMenus:r,localizedMessages:l,state:{buttonSections:a,selectedMenu:i,selectedSubMenu:o,dismissKeyboardButton:s},version:t}}({version:R||U?3:1,selectedMenu:i,selectedSubMenu:nt,nativeMenus:{textColor:{id:"textColor",title:ae().A.formatMessage(Ve.actionMenuColorTitle),sections:ke.textColor.sections},textSelectionColor:{id:"textSelectionColor",title:ae().A.formatMessage(Ve.actionMenuColorTitle),sections:ke.textSelectionColor.sections},insertBlock:{id:"insertBlock",title:ae().A.formatMessage(Ve.actionMenuInsertBlockTitle),sections:ke.insertBlock.sections},turnInto:{id:"turnInto",title:ae().A.formatMessage(Ve.actionMenuTurnIntoTitle),sections:ke.turnInto.sections}},nativeSubMenus:{suggested:[],textFormatting:[o],slashMenu:[],turnInto:[],textColor:[],textSelectionColor:[],more:[]},buttonSections:st,accessibilityTexts:{dismissKeyboard:ae().A.formatMessage(Ve.accessibilityDismissKeyboard),closeActionMenu:ae().A.formatMessage(Ve.accessibilityCloseActionMenu)},localizedMessages:{...et(nt)},dismissKeyboardButton:n});if(Me().default.checkGate({gateName:"mobile_mab_mrr"})){var r;const e=null===(r=k.NativeMobileActionBarStore)||void 0===r?void 0:r.state,t=7,o=Boolean(null==e?void 0:e.isSubMenuOverridden)?t:0;if(a.state.buttonSections.flatMap((e=>e.buttons)).forEach(((e,t)=>{e.action.apiRequestValue&&(e.action.apiRequestValue.context={index:t+1+o,id:e.id})})),nt){var s,l;let i=0;null!=e&&null!==(s=e.subMenu)&&void 0!==s&&s.type&&null!=e&&null!==(l=e.subMenu)&&void 0!==l&&l.context&&(i=t+e.subMenu.context.index),a.nativeSubMenus[nt].flatMap((e=>e.buttons)).forEach(((e,t)=>{e.action.apiRequestValue&&(e.action.apiRequestValue.context={index:t+1+i,id:e.id})}))}if(i){var c,d;let o=0;null!=e&&null!==(c=e.menu)&&void 0!==c&&c.type&&null!=e&&null!==(d=e.menu)&&void 0!==d&&d.context&&(o=t+e.menu.context.index),a.nativeMenus[i].sections.flatMap((e=>e.items)).forEach(((e,t)=>{e.action.apiRequestValue&&(e.action.apiRequestValue.context={index:t+1+o,id:e.id})}))}}return a}),[k,nt,Re,ot,ke,st,R,U],{useDeepEqual:!0,debugName:"getCurrentActionBarSchema"}),ct=(0,o.useCallback)((e=>{var t,i,o;let{action:n}=e;if(null!==(t=n.apiRequestValue)&&void 0!==t&&t.context&&null!==(i=n.apiRequestValue)&&void 0!==i&&i.context.id&&null!==(o=n.apiRequestValue)&&void 0!==o&&o.context.index){var a,r,s;const e=Boolean(Be&&(0,de().P4)(Be)),t=null==Be?void 0:Be.getType(),i=Boolean(t&&He[t]),o=null==Ue?void 0:Ue.startIndex,l=null==Ue?void 0:Ue.endIndex,c=Ie().default.state.stores[0],d={action_id:F(n.apiRequestValue.context.id),reciprocal_rank:1/(null===(a=n.apiRequestValue)||void 0===a?void 0:a.context.index),block_type:null==c?void 0:c.getType(),is_editing_title:ze(),text_selection_start_index:o,text_selection_end_index:l,is_indentable:i,is_empty:e,is_editing_header:$e(Be),session_id:null===(r=k.NativeMobileActionBarStore)||void 0===r||null===(r=r.state.session)||void 0===r?void 0:r.session_id,render_id:null===(s=k.NativeMobileActionBarStore)||void 0===s||null===(s=s.state.session)||void 0===s?void 0:s.render_id,algorithm_version:P};(0,ie().u4)({environment:k,event:{eventName:"mobile_action_bar_reciprocal_rank",eventProperties:d}})}switch(n.type){case"nativeAction_setMenuType":!function(e,t,i){var o;const n=function(e){if("nativeAction_setMenuType"!==e.type)return new I(C.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("menuType"in t))return new I(C.MissingPayload,void 0);null===t.menuType&&(t.menuType=void 0);const i=y().object({required:{menuType:y().undefinable(y().literals(...x))},optional:{}}),o=(0,f().tf)(i,t);return o?new I(C.InvalidRequestType,JSON.stringify(o)):t.menuType}(e);if(n instanceof I)return void console.error(JSON.stringify(n));const a=t.NativeMobileActionBarStore?null===(o=t.NativeMobileActionBarStore.state.menu)||void 0===o?void 0:o.type:void 0;if(a===n)re().i3(t,void 0,!0);else{var r;if(!n)return void re().i3(t,void 0,!0);switch(re().i3(t,{type:n,context:null===(r=e.apiRequestValue)||void 0===r?void 0:r.context},!0),i(n),n){case"insertBlock":re().Km(t,"insert");break;case"turnInto":re().Km(t,"turn_into");break;case"textColor":re().Km(t,"color","mobile_action_bar");break;case"textSelectionColor":re().Km(t,"color","mobile_text_formatting_menu")}}}(n,k,(e=>{const t=function(e){if("turnInto"===e)return"turnInto"}(e);void 0!==t&&ye().A.track(t)}));break;case"nativeAction_setSubMenuType":!function(e,t,i){const o=function(e){if("nativeAction_setSubMenuType"!==e.type)return new I(C.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("subMenuType"in t))return new I(C.MissingPayload,void 0);null===t.subMenuType&&(t.subMenuType=void 0);const i=y().object({required:{subMenuType:y().undefinable(y().literals(...S))},optional:{}}),o=(0,f().tf)(i,t);return o?new I(C.InvalidRequestType,JSON.stringify(o)):t.subMenuType}(e);if(o instanceof I)return void console.error(JSON.stringify(o));if(o){var n;re().Qu(t,{type:o,context:null===(n=e.apiRequestValue)||void 0===n?void 0:n.context},!0),i(o)}else re().Qu(t,void 0,!0)}(n,k,(e=>{const t=function(e){switch(e){case"textFormatting":return"biu";case"turnInto":return"turnInto";default:return}}(e);void 0!==t&&ye().A.track(t)}));break;case"webAction_generic":!function(e,t,i,o){const n=function(e){if("webAction_generic"!==e.type)return new I(C.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("jsonPayload"in t))return new I(C.MissingPayload,void 0);const i=JSON.parse(t.jsonPayload),o=(0,f().tf)(w,i);return o?new I(C.InvalidData,JSON.stringify(o)):i}(e);if(n instanceof I)return void console.error(JSON.stringify(n));const{mainEditorCurrentBlockStore:a}=xe().default.state;if(!a)return;const{device:r}=i,s=qe[n.data.action];s.closeParentMenu&&!r.isTablet&&re().i3(i,void 0,!0);s.action({environment:i,blocks:[a],publicEditMode:void 0,analyticsFrom:"mobile_action_bar_actions",lazyDependencies:t}),o(n.data.action)}(n,M,k,(e=>{const t=e??V[e];ot[t]&&ye().A.track(t)}));break;case"webAction_genericAction":!function(e,t,i,o,n,a){var r,s;const l=null===(r=e.apiRequestValue)||void 0===r?void 0:r.menuType,c=null===(s=e.apiRequestValue)||void 0===s?void 0:s.actionId;if(!l||!c)return;const d=i({environment:n,blocks:Ie().default.state.stores,isPersonalizedActionsEnabled:o})[l].actions[c];if(null==d||!d.action)return;d.closeParentMenu&&re().i3(n,void 0,!0);d.action({environment:n,blocks:Ie().default.state.stores,publicEditMode:void 0,analyticsFrom:"mobile_action_bar_actions",lazyDependencies:t});const u=Ie().default.state.stores[0];if(u){const e=u.getType(),t=u.getFormat();(0,J().N)(n,{analyticsName:d.analyticsName,action_type:d.analyticsActionType,from:"slash_menu",block_id:u.id,block_type:e,is_toggleable:e?(0,ge().Yt)(e,t):void 0,slash_menu_filter_length:0,slash_menu_section:`Mobile Action Bar ${l}`,parent_collection_id:u.getParentCollectionIdUpToTwoLevels()}),d.analyticsName&&re().Km(n,d.analyticsName,l)}a(c)}(n,M,ce,R,k,(e=>{const t=V[e];void 0!==t&&ot[t]&&ye().A.track(t)}))}}),[Be,null==Ue?void 0:Ue.startIndex,null==Ue?void 0:Ue.endIndex,k,P,M,ce,R,ot]);return(0,o.useEffect)((()=>{if(!O){const{NativeMobileActionBarStore:e}=k,t=window.setTimeout((()=>{var t,i;null!=e&&null!==(t=e.state.menu)&&void 0!==t&&t.type&&re().i3(k,void 0,!1),null!=e&&null!==(i=e.state.subMenu)&&void 0!==i&&i.type&&re().Qu(k,void 0,!1)}),500);return()=>{window.clearTimeout(t)}}}),[O,k]),(0,o.useEffect)((()=>{var e;const t=k.NativeMobileActionBarStore;Boolean(null==t||null===(e=t.state)||void 0===e?void 0:e.isSubMenuOverridden)||"slashMenu"!==nt&&"textFormatting"!==nt||null==t||t.update((e=>({...e,isSubMenuOverridden:!1,subMenu:void 0})))}),[k.NativeMobileActionBarStore,nt]),(0,o.useEffect)((()=>{var e;if(!Ue)return;const{NativeMobileActionBarStore:t,device:i}=k;"TextSelectionStore"===Ue.source&&null!=t&&null!==(e=t.state.menu)&&void 0!==e&&e.type&&!i.isTablet&&re().i3(k,void 0,!0)}),[k,Ue]),(0,o.useEffect)((()=>{var e;De&&null!==(e=k.NativeMobileActionBarStore)&&void 0!==e&&e.state.isSubMenuOverridden&&!Ae().A.state.open&&re().Qu(k,void 0,!1)}),[k,De]),(0,o.useEffect)((()=>{var e,t,i;const{NativeMobileActionBarStore:o}=k,n=O.shouldShow,a=(nt?lt.nativeSubMenus[nt]:lt.state.buttonSections).map((e=>{let{id:t,buttons:i}=e;return{id:t,buttonIds:i.map((e=>{let{id:t}=e;return F(t)}))}}));let r=!0,s=!0;q.current&&(r=n&&q.current.isOpen!==n,s=r||!W().n4(a,q.current.sectionsState));const l=null==o||null===(e=o.state.session)||void 0===e?void 0:e.session_id,c=s||!l?g().JW():l,d=null==o||null===(t=o.state.session)||void 0===t?void 0:t.render_id,u=s||!d?g().JW():d;if(null===(i=k.NativeMobileActionBarStore)||void 0===i||i.update((e=>({...e,session:{session_id:c,render_id:u}}))),q.current={isOpen:n,sectionsState:a},(r||s)&&n){const e=Boolean(Be&&(0,de().P4)(Be)),t=null==Be?void 0:Be.getType(),i=Boolean(t&&He[t]),o=null==Ue?void 0:Ue.startIndex,n=null==Ue?void 0:Ue.endIndex,a=Ie().default.state.stores[0];(0,ie().u4)({environment:k,event:{eventName:"mobile_action_bar_render",eventProperties:{session_id:c,render_id:u,block_type:null==a?void 0:a.getType(),is_editing_title:ze(),text_selection_start_index:o,text_selection_end_index:n,is_indentable:i,is_empty:e,is_editing_header:$e(Be),algorithm_version:P}}})}}),[k,lt,nt,O.shouldShow,Be,Ue,P]),(0,r().X)((0,o.useCallback)((()=>{h&&h({type:"unmount",id:""})}),[h])),(0,Oe.jsx)(Ge,{isOpen:O.shouldShow,canShow:O.canShowNativeBar,isEmpty:O.isEmpty,schema:lt,onAction:ct,fallbackRenderer:i&&(()=>i(n))})}function We(){return Ie().default.state.stores}function ze(){return(0,oe().fI)()||(0,oe().Te)()}function $e(e){const t=null==e?void 0:e.getType();return"header"===t||"sub_header"===t||"sub_sub_header"===t}function Ye(e){const t=ke().A.state.isActive,i=re().zN();return t||i&&e}function Je(e){return e.device.isMobileNative&&!e.device.isTablet}function Qe(e,t){return re().ou({environment:e,store:t})}function Ze(e){const t="editing"===_e().default.state.mode&&_e().default.state.multiSelection,i=e.state.savedTextSelectionStoreState,o=i&&"editing"===i.mode&&i.multiSelection;return t||o||void 0}function Xe(e){var t;const i=Ze(e);return i&&(null===(t=(0,ce().ZS)({multiSelection:i,focus:void 0,filterCommonAncestors:!1}))||void 0===t?void 0:t.stores)}function et(e){let t;switch(e){case void 0:break;case"suggested":t=ae().A.formatMessage(Ve.subMenuLabelSuggested);break;case"slashMenu":t=Ae().A.state.open&&Ae().A.state.isAddMenu?ae().A.formatMessage(Ve.subMenuLabelInsert):ae().A.formatMessage(Ve.subMenuLabelTurnInto);break;case"turnInto":t=ae().A.formatMessage(Ve.subMenuLabelTurnInto);break;case"textFormatting":t=ae().A.formatMessage(Ve.subMenuLabelTextFormatting);break;case"textColor":case"textSelectionColor":t=ae().A.formatMessage(Ve.subMenuLabelTextColor)}return t?{selectedSubMenuLabel:t}:void 0}},300481:(e,t,i)=>{i.d(t,{A:()=>n});const o=new(i(967203).U)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){var o;let{spaceId:n}=t;const a=await Promise.resolve().then(i.bind(i,818369)),r=await a.callApi({eventName:"getInternalDomains",environment:e,data:{spaceId:n}});return"success"===r.type?null===(o=r.data)||void 0===o?void 0:o.internalDomainsWithInfo:void 0}));i(996094).exposeDebugValue("InternalDomainsStore",o);const n=o},308439:(e,t,i)=>{i.r(t),i.d(t,{exclamationMarkTriangleIcon:()=>a,iconDefinition:()=>n});i(242343);var o=i(163643);const n={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M9.875 6.75c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5"}),(0,o.jsx)("path",{d:"M8.16 3.563c.818-1.417 2.863-1.417 3.68 0l5.846 10.125c.818 1.416-.204 3.187-1.84 3.187H4.155c-1.636 0-2.659-1.77-1.84-3.187zm2.598.624a.875.875 0 0 0-1.516 0L3.397 14.313a.875.875 0 0 0 .758 1.313h11.69a.875.875 0 0 0 .759-1.312z"})]})},a=(0,i(680369).wt)("exclamationMarkTriangle",n)},377403:(e,t,i)=>{i.d(t,{W:()=>a});var o=()=>i(803290),n=()=>i(950347);function a(){return(0,o().K8)((()=>(0,n().M5)()),[])}},427385:(e,t,i)=>{i.d(t,{C:()=>l});i(242343);var o=()=>i(174114),n=()=>i(907721),a=()=>i(103151),r=i(163643);const s=2;function l(e){const{percentage:t,ringWidth:i,size:l,style:c,label:d}=e,u=(0,o().DP)(),m=i??3,g=l/2-m/2,b=2*Math.PI*g,p=l/2,v=e.filledColor??u.accentColors.gray[500],f=e.unfilledColor??u.accentColors.gray[100],y=e.gapColor??"transparent",h=Math.min(Math.max(t,0),100),k=h>s&&h+2*s<95&&(0,r.jsx)("circle",{r:g,cx:p,cy:p,strokeWidth:m,stroke:y,strokeLinecap:"round",strokeDasharray:`${b} ${b*(100-(h+2*s))/100}`,strokeDashoffset:""+b*(100-(h+s))/100,fill:"transparent"}),A=e=>(0,r.jsx)("div",{role:"progressbar","aria-valuenow":h,style:{height:l,width:l,...c,pointerEvents:"auto"},...e,children:(0,r.jsxs)("svg",{viewBox:`0 0 ${l} ${l}`,color:"transparent",style:{width:"100%",height:"100%",transform:"rotate(-90deg)",transformOrigin:"50% 50%"},children:[(0,r.jsx)("circle",{r:g,cx:p,cy:p,strokeWidth:m,stroke:f,strokeLinecap:"round",fill:"transparent"}),k,(0,r.jsx)("circle",{r:g,cx:p,cy:p,strokeWidth:m,stroke:v,strokeLinecap:"round",strokeDasharray:b,strokeDashoffset:b-h/100*b,fill:"transparent"}),(0,r.jsx)("text",{x:p,y:p,textAnchor:"middle",dominantBaseline:"middle",fill:u.text.secondary,fontSize:"0.75em",style:{transformOrigin:"50% 50%",transform:"rotate(90deg)"},children:d})]})});return e.tooltip?(0,r.jsx)(a().A,{placement:n().W.Top,renderTooltip:()=>e.tooltip,render:A}):A()}},433051:(e,t,i)=>{i.d(t,{S:()=>n});i(242343);var o=i(163643);const n=(0,i(680369).wt)("filter",{viewBox:"0 0 16 16",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4C2 3.58579 2.33579 3.25 2.75 3.25H13.25C13.6642 3.25 14 3.58579 14 4C14 4.41421 13.6642 4.75 13.25 4.75H2.75C2.33579 4.75 2 4.41421 2 4Z"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 8C3.75 7.58579 4.08579 7.25 4.5 7.25H11.5C11.9142 7.25 12.25 7.58579 12.25 8C12.25 8.41421 11.9142 8.75 11.5 8.75H4.5C4.08579 8.75 3.75 8.41421 3.75 8Z"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12C5.5 11.5858 5.83579 11.25 6.25 11.25H9.75C10.1642 11.25 10.5 11.5858 10.5 12C10.5 12.4142 10.1642 12.75 9.75 12.75H6.25C5.83579 12.75 5.5 12.4142 5.5 12Z"})]})})},464335:(e,t,i)=>{i.d(t,{A:()=>a});i(242343);var o=()=>i(653998),n=i(163643);const a=function(e){let{on:t,menuListItemProps:a}=e;return(0,n.jsx)(i(725599).A,{...a,on:t,style:{alignItems:"flex-start",paddingTop:8,paddingBottom:8},title:(0,n.jsx)(o().sA,{defaultMessage:"Show large counts as 99+",id:"BoardAggregations.aggregationLimitToggle.title"}),captionStyle:{marginTop:6},shouldWrapCaption:!0,caption:(0,n.jsx)(o().sA,{defaultMessage:"This improves performance for large databases.",id:"BoardAggregations.aggregationLimitToggle.description"})})}},501673:(e,t,i)=>{i.d(t,{A:()=>r});i(403517);var o=()=>i(237385),n=()=>i(803290),a=()=>i(300481);function r(e){const t=(0,o().v3)();return(0,n().K8)((()=>{var i;const o=null==e?void 0:e.id;if(o)return null===(i=a().A.getData(t,{spaceId:o}))||void 0===i?void 0:i.map((e=>e.domain))}),[t,e])}},528190:(e,t,i)=>{i.d(t,{P:()=>n});i(242343);var o=i(163643);const n=(0,i(680369).wt)("thinPlus",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{d:"M 7.75 0L 6.25 0L 6.25 6.25L 0 6.25L 0 7.75L 6.25 7.75L 6.25 14L 7.75 14L 7.75 7.75L 14 7.75L 14 6.25L 7.75 6.25L 7.75 0Z"})})},572088:(e,t,i)=>{i.d(t,{l:()=>n});i(242343);var o=i(163643);const n=(0,i(680369).wt)("keyboard",{viewBox:"0 0 30 30",svg:(0,o.jsxs)("g",{children:[" ",(0,o.jsx)("path",{d:"M15,30l8-10H7Zm0-3.2L11.16,22h7.68Z"})," ",(0,o.jsx)("path",{d:"M6,4H4V6H6V4Zm4,0H8V6h2V4Zm4,0H12V6h2V4Zm4,0H16V6h2V4Zm4,0H20V6h2V4Zm4,0H24V6h2V4ZM10,8H8v2h2V8Zm4,0H12v2h2V8Zm4,0H16v2h2V8Zm4,0H20v2h2V8Zm-2,4H10v2H20V12Zm5,0H22v2h3V12ZM5,14H8V12H5v2ZM0,0V18H30V0H0ZM28,16H2V2H28V16Z"})," "]})})},617719:(e,t,i)=>{i.r(t),i.d(t,{appendTranscriptionBlockToPage:()=>A,createTranscriptionBlockInNewPage:()=>x});var o=()=>i(486826),n=()=>i(712437),a=()=>i(762847),r=()=>i(871002),s=()=>i(16456),l=()=>i(427091),c=()=>i(34662),d=()=>i(415029),u=()=>i(795394),m=()=>i(191756),g=()=>i(163875),b=()=>i(448316),p=()=>i(84543),v=()=>i(189170),f=()=>i(459742),y=()=>i(216143),h=()=>i(485966),k=()=>i(182613);function A(e){const{environment:t}=e;p().createAndCommit({userAction:"transcriptionNewPageActions.appendTranscriptionBlock",environment:t,canUndo:!0,perform:e=>{(0,v().insertBlockBelow)({environment:t,createBlockItem:f().ry[a().xd.transcription],analyticsFrom:"quick_templates",selection:[],transaction:e})}})}function x(e){const{environment:t,from:i}=e,v=h().default.state.currentSpaceStore,A=h().default.state.currentSpaceViewStore,x=k().default.getCurrentRecordCache();if(!x)return;if(!v||!A)return;const{performResult:{createdPage:S}}=p().createAndCommit({userAction:"transcriptionNewPageActions.createTranscriptionBlockInNewPage",environment:t,canUndo:!0,perform:e=>{const n=g().IT({environment:t,spaceStore:v,spaceViewStore:A,isPrivate:!0,transaction:e});if(n.isType(a().xd.page)){const i=n.getBlockTitleStore(),a=o().c9.now(),d=[c().wmz(c().Ww9({type:"datetime",start_date:a.toFormat(s().tr),start_time:a.toFormat(r().GE),time_zone:(0,l().P)(),date_format:"relative"}),[[c().BQP.Bold]])];b().yr({environment:t,store:i,tokens:d,transaction:e,index:0})}const m=f().ry[a().xd.transcription],p=d().w({environment:t,transaction:e,inMemoryRecordCache:x,from:i,selection:[],createBlockItem:m});return u().NI({childStore:p,parentStore:n,transaction:e}),{createdPage:n}}});m().uK({environment:t,store:S,visitType:y().ig.Link,pageVisitSource:n().y8.Create})}},636208:(e,t,i)=>{i.d(t,{$D:()=>c,CJ:()=>m,Sg:()=>l,iM:()=>y,kJ:()=>g,kx:()=>p,qj:()=>f,rL:()=>a,sH:()=>b,u6:()=>r,wo:()=>v,zr:()=>d});var o=()=>i(758989),n=()=>i(622163);const a=16,r=20,s=10,l=12,c=456,d=24,u=24,m=48;function g(e){let{theme:t,inheritanceBannerEnabled:i,isMobile:o}=e;return{background:t.tint.regular,borderRadius:8,paddingTop:8,paddingBottom:8,paddingLeft:8,paddingRight:8,marginLeft:o?0:a,marginRight:o?0:a,marginTop:4,marginBottom:8}}function b(e){let{isRedesignEnabled:t,isMobile:i}=e;return t?{...v({isMobile:i}),width:"unset",height:m,paddingTop:6,paddingBottom:6}:{}}function p(e){let{environment:t,isRedesignEnabled:i}=e;return i?(0,n().ny)(t,t.device.isMobile?"UISmall":"UIRegular"):(0,n().ny)(t,"UISmall")}function v(e){let{isMobile:t}=e;return{borderRadius:s,transition:"background 150ms ease-out"}}function f(e){let{isMobile:t}=e;return t?12:10}function y(e){let{theme:t,colorOverride:i,size:n=u,useLargeBorderRadius:a,useLightBackgroundColor:r,icon:s}=e;return{background:i||(s&&(0,o().T8)(s)?(0,o().ez)({icon:s,mode:t.mode,useLightGrayColor:r}):r?t.lightDividerColor:t.regularDividerColor),width:n,height:n,borderRadius:a?6:"0.25em"}}},758103:(e,t,i)=>{i.d(t,{R:()=>k,Y:()=>h});i(242343);var o=()=>i(237385),n=()=>i(803290),a=()=>i(174114),r=()=>i(575681),s=()=>i(452794),l=()=>i(836693),c=()=>i(486540),d=()=>i(16043),u=()=>i(528762),m=()=>i(653998),g=()=>i(220413),b=()=>i(76394),p=()=>i(622286),v=()=>i(268117),f=()=>i(209684),y=i(163643);function h(e){let{type:t,role:i,events:l,disabled:c,buttonStyle:d,buttonContents:u,icon:g,table:b,isCurrentUser:h,from:A}=e;const{isMobile:x}=(0,o().Y0)(),S=(0,a().IS)((e=>({button:{...d},icon:{width:10,marginLeft:4,fill:e.lightIconColor},label:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},iconContainer:{fill:e.icon.secondary,padding:2}})),[d]),T=g||!c&&r()._,M=(0,n().K8)((()=>"shareMenu"===A&&(0,v().FI)()),[A]),w=(0,p().X)("sharing_anyone_with_the_link");return x&&"shareMenu"===A&&M?c?null:(0,y.jsx)(f().p,{...l,disabled:c,style:S.iconContainer,children:(0,s().L)({height:24,width:24})}):(0,y.jsxs)(f().p,{id:void 0,...l,disabled:c,style:S.button,children:[u||(0,y.jsx)("span",{className:"notranslate",style:S.label,children:(0,y.jsx)(m().sA,{...k({type:t,role:i,table:b,isRemovable:!1,isCurrentUser:h,isRedesignEnabled:M,isPublicShareLink:w}).label})}),T&&T(S.icon)]})}function k(e){let{type:t,role:i,table:o,isRemovable:n,isCurrentUser:a,isRedesignEnabled:r,isPublicShareLink:s}=e;if("access"===i)return{label:c().Sf.variousAccessLabel};if("limited"===i)return{label:c().Sf.limitedAccessLabel};if((0,c().II)(i))return(0,c().sK)(i,o);switch(i){case"editor":return o===u().NX||o===d().y7?{label:c().Sf.workspaceOwnerLabel,caption:c().Sf.workspaceOwnerCaption}:{label:c().Sf.fullAccessLabel,caption:r?c().Sf.fullAccessCaptionV2:c().Sf.fullAccessCaption};case"membership_admin":return o===u().NX||o===d().y7?{label:c().Sf.membershipAdminLabel,caption:c().Sf.membershipAdminCaption}:{label:c().Sf.canEditLabel,caption:r?c().Sf.canEditCaptionV2:c().Sf.canEditCaption};case"read_and_write":return o===u().NX||o===d().y7?{label:c().Sf.memberLabel,caption:c().Sf.memberCaption}:{label:c().Sf.canEditLabel,caption:r?c().Sf.canEditCaptionV2:c().Sf.canEditCaption};case"content_only_editor":return{label:c().Sf.canEditContentLabel,caption:c().Sf.canEditContentCaption};case"reader":return{label:c().Sf.canReadLabel,caption:r?void 0:c().Sf.canReadCaption};case"comment_only":return{label:c().Sf.canCommentLabel,caption:r?c().Sf.canCommentCaptionV2:c().Sf.canCommentCaption};case"none":if("public_permission"===t)return s?{label:n?c().Sf.publicShareLinkRemoveLabel:c().Sf.publicShareLinkNoAccessLabel,hideSelectionCheckIcon:n}:{label:r?c().Sf.unpublishPageLabelV2:c().Sf.unpublishPageLabel,caption:c().Sf.unpublishPageCaption};if(n){if(o===u().NX||o===d().y7)return a?{label:c().Sf.leaveWorkspaceLabel,style:{color:g().Ay.red}}:{label:c().Sf.removeFromWorkspaceLabel,style:{color:g().Ay.red}};{const e="collection_property_permission"===t;return{label:e?c().Sf.removePermissionRuleLabel:c().Sf.removeWorkspaceLabel,style:{color:g().Ay.red},icon:e?(0,l().trashIcon)({height:20,width:20,marginRight:4}):void 0}}}return{label:c().Sf.noAccessLabel,style:{color:g().Ay.red}};default:(0,b().HB)(i)}}},808532:(e,t,i)=>{i.d(t,{A:()=>A});i(362833),i(725707),i(771702),i(403517),i(242343);var o=()=>i(120082),n=()=>i(653998),a=()=>i(975392),r=()=>i(995331),s=()=>i(86607),l=()=>i(640979),c=()=>i(906230),d=()=>i(907721),u=()=>i(464335),m=()=>i(535906),g=()=>i(935091),b=()=>i(858023),p=()=>i(743668),v=()=>i(88271),f=()=>i(103151),y=()=>i(350208),h=i(163643);const k=(0,n().YK)({noneText:{defaultMessage:"None",id:"database.propertyAggregationMenu.noneText"}});const A=(0,n().j4)((function(e){let{onClose:t,property:a,schema:r,currentAggregation:c,source:d,noneText:u,intl:f,onChange:A}=e;const x=(0,i(237385).v3)(),{device:w}=x;let C;C=w.isMobile?{menuType:l().gu.Modal,title:(0,h.jsx)(n().sA,{defaultMessage:"Table aggregation",id:"database.mobilePropertyAggregationMenu.title"}),right:(0,h.jsx)(p().DoneMenuText,{}),onClickRight:t}:{menuType:l().gu.Popup,width:200};const[I,_]=function(e){let{property:t,schema:i,source:n,intl:a,onChange:r,environment:c,currentAggregation:d,noneText:u}=e;const f=[];let A=0,x=0;const{device:w}=c,C=function(e,t,i,n,a){const r={},s=null==a?void 0:a.enforceMaxAggregationLimit,l=null==a?void 0:a.aggregator,c=t[e];if(!c)return{};const d=e=>i(e,s);for(const u of o().VD)r[u]=S(u===l,u,d);if((0,o().wG)(c))for(const u of o().CG)r[u]=S(u===l,u,d);if((0,o().OC)(c))for(const u of o().Sn)r[u]=S(u===l,u,d);if((0,o().fo)(c))for(const u of o().zE)r[u]=S(u===l,u,d);if((0,o().s_)(c))for(const u of o().QO)r[u]=S(u===l,u,d);if((0,o().q0)(c))for(const u of o().nJ)r[u]=T(e,u,a,t,i,n);if((0,o().pe)(c))for(const u of o().A3)r[u]=S(u===l,u,d);return r}(t,i,r,c,d);f.push({key:"none",render:e=>(0,h.jsx)(m().A,{...e,isChecked:!d,title:u||a.formatMessage(k.noneText)}),action:()=>r(void 0)});let I="tableAggregation"===n?1:2;return Object.entries(o().Kn).forEach((e=>{let[t,i]=e;const a=[];for(const r of i)if(C[r]){if("show_unique"===r)switch(n){case"tableAggregation":continue;case"rollupPropertyMenu":f.splice(1,0,C[r]),(null==d?void 0:d.aggregator)===r&&(A=1);continue}a.push(C[r]),(d&&(0,o().ET)(null==d?void 0:d.aggregator)&&d.aggregator.operator===r||(null==d?void 0:d.aggregator)===r)&&(A=I,x=a.length-1)}const c=[];if("count_aggregations"===t&&"tableAggregation"===n&&c.push({key:"limitToggleSection",render:e=>(0,h.jsx)(v().A,{...e}),items:[M(d,r)]}),c.push({key:"aggregations",render:e=>(0,h.jsx)(v().A,{topBorder:!0,...e}),items:a}),a.length>0){I++;const e=s().jA[t],i={key:e,render:(t,i)=>(0,h.jsx)(y().A,{...t,disableDefaultClick:!0,onFocus:i.onFocus,renderOrigin:(t,i)=>(0,h.jsx)(m().A,{...t,ref:i,title:e}),renderExtension:(t,o)=>{let n;return n=w.isMobile?{menuType:l().gu.Modal,title:e,right:(0,h.jsx)(p().DoneMenuText,{}),onClickRight:o.close,...t}:{menuType:l().gu.Popup,width:250,...t},(0,h.jsx)(g().A,{...n,children:(0,h.jsx)(b().Ay,{type:b().Oh.Vertical,initialFocus:x,sections:c,onAccept:(e,t,n)=>{o.close(),i.onAccept&&i.onAccept(e,t,n)}})})}}),action:()=>null};f.push(i)}})),[f,A]}({property:a,schema:r,source:d,intl:f,onChange:A,environment:x,currentAggregation:c,noneText:u});return(0,h.jsx)(g().A,{...C,children:(0,h.jsx)(b().Ay,{type:b().Oh.Vertical,initialFocus:_??0,sections:[{key:0,render:e=>(0,h.jsx)(v().A,{...e}),items:I}],onAccept:t})})}));function x(e){let{isSelected:t,aggregationType:i,label:o,props:n}=e;const a=s().cx[i];return(0,h.jsx)(f().A,{placement:d().W.Right,delayThreshold:0,render:e=>(0,h.jsx)(m().A,{title:o,isChecked:t,...(0,c().A)(e,n)}),renderTooltip:()=>(0,h.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[a&&(0,h.jsx)("img",{src:(0,r().L)(a),style:{borderRadius:4,width:140,marginTop:4}}),s().fp[i]]})},n.key)}function S(e,t,i){const o=s().zY[t],n=s().cx[t];return{key:o,render:i=>(0,h.jsx)(f().A,{placement:d().W.Right,delayThreshold:0,render:t=>(0,h.jsx)(m().A,{title:o,isChecked:e,...(0,c().A)(t,i)}),renderTooltip:()=>(0,h.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[n&&(0,h.jsx)("img",{src:(0,r().L)(n),style:{borderRadius:4,width:140,marginTop:4}}),s().fp[t]]})},i.key),action:()=>{i(t)}}}function T(e,t,i,n,r,c){const{device:d}=c,u=s().zY[t],f=a().oE(function(e,t,i,n,a){const r=n[t];if(!r||"status"!==r.type)return;const s=r.groups;return s?s.map((t=>{const n=(e&&(0,o().ET)(e.aggregator)&&e.aggregator.operator===i&&e.aggregator.groupName===t.name)??!1;return{key:`${i}${t.name}`,render:e=>(0,h.jsx)(x,{isSelected:n,aggregationType:i,label:t.name,props:e}),action:()=>{a({operator:i,groupName:t.name})}}})):void 0}(i,e,t,n,r));let k=0;if(i&&(0,o().ET)(null==i?void 0:i.aggregator)&&i.aggregator.operator===t){const e=i.aggregator.groupName,o=f.findIndex((i=>i.key===`${t}${e}`));-1!==o&&(k=o)}return{key:t,render:(e,t)=>(0,h.jsx)(y().A,{...e,onFocus:t.onFocus,renderOrigin:e=>(0,h.jsx)(m().A,{...e,title:u}),renderExtension:(e,i)=>{let o;return o=d.isMobile?{menuType:l().gu.Modal,title:u,right:(0,h.jsx)(p().DoneMenuText,{}),onClickRight:i.close,...e}:{menuType:l().gu.Popup,width:200,...e},(0,h.jsx)(g().A,{...o,children:(0,h.jsx)(b().Ay,{type:b().Oh.Vertical,initialFocus:k,sections:[{key:"groups",render:e=>(0,h.jsx)(v().A,{...e}),items:f}],onAccept:t.onAccept})})}}),action:()=>null}}function M(e,t){const i=Boolean(null==e?void 0:e.enforceMaxAggregationLimit);return{key:"aggregationLimitToggle",render:e=>(0,h.jsx)(u().A,{on:i,menuListItemProps:e}),action:()=>{t(e?e.aggregator:"count",!i)}}}},810733:(e,t,i)=>{i.d(t,{A:()=>n});class o extends(()=>i(129044))().default{getInitialState(){return{open:!1}}}const n=new o},851363:(e,t,i)=>{i.d(t,{b:()=>a});var o=()=>i(129978);const n=new(o().O2)("time-series",(async()=>await Promise.resolve().then(i.bind(i,417021)))),a=(0,o()._h)(n,(e=>e.TimeSeries))},858580:(e,t,i)=>{i.d(t,{l:()=>g});i(242343);var o=()=>i(174114),n=()=>i(361308),a=()=>i(975392),r=()=>i(141666),s=()=>i(361837),l=()=>i(477784),c=()=>i(805886),d=()=>i(427385),u=i(163643);const m=21;function g(e){const{numberValue:t,numberFormat:i,numberPrecision:g,numberShowAs:b,shouldRenderTooltip:p,withComma:v,style:f,ringWidth:y,className:h,barHeight:k}=e,A=(0,o().DP)();if(a().yr(t)||r().pN(t))return null;const x=e.progressSize??m,S=(null==b?void 0:b.showValue)??!0,T=S&&n().ZV(t,i,l().A.getIntl(),void 0,g);let M;if("bar"===(null==b?void 0:b.type)||"ring"===(null==b?void 0:b.type)){const o=n().XK(t,b.maxValue),{filledColor:a,gapColor:r,unfilledColor:l}=function(e){let{theme:t,color:i}=e;const o="default"===i?t.selectLightGray:t.accentColors[i],n="dark"===t.mode?o[500]:o[400],a=o[50],r="dark"===t.mode?o[200]:t.selectLightGray[200];return{filledColor:n,gapColor:a,unfilledColor:r}}({theme:A,color:b.color}),m=p?s().lh({numberValue:t,numberFormat:i,numberShowAs:b}):void 0;M="bar"===b.type?(0,u.jsx)(c().z,{percentage:o,filledColor:a,gapColor:r,unfilledColor:l,height:k,style:{height:x,...e.barStyle,...S?{}:{flexBasis:"100%"}},tooltip:m}):(0,u.jsx)(d().C,{percentage:o,filledColor:a,gapColor:r,unfilledColor:l,size:x,ringWidth:y,tooltip:m})}return(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:"6px 8px",...f},className:h,children:[T,M,v?", ":null]})}},872856:(e,t,i)=>{i.d(t,{k:()=>a});var o=()=>i(129978);const n=new(o().O2)("shareMenuContainer",(async()=>await Promise.all([i.e(96159),i.e(75134),i.e(43380),i.e(9304),i.e(96346),i.e(36192),i.e(55373),i.e(62475),i.e(3151),i.e(44711),i.e(98629),i.e(53321),i.e(58550),i.e(16471),i.e(90825),i.e(37353),i.e(29151),i.e(16908),i.e(22900),i.e(49889),i.e(97727),i.e(85128),i.e(83700),i.e(95555),i.e(58823),i.e(36209),i.e(92845),i.e(71718),i.e(48486),i.e(83324),i.e(63077),i.e(41870),i.e(90966),i.e(88552),i.e(90214),i.e(74562),i.e(8184),i.e(28271),i.e(17254),i.e(18895),i.e(78708),i.e(28721),i.e(4422),i.e(28866),i.e(67435),i.e(17989),i.e(48632),i.e(90625),i.e(76181),i.e(59794),i.e(72832),i.e(90280),i.e(26483),i.e(33813),i.e(81768),i.e(71104),i.e(2804),i.e(82850),i.e(84778),i.e(69914),i.e(11341),i.e(92011),i.e(19361),i.e(63327),i.e(26090),i.e(38482),i.e(12341),i.e(50984),i.e(47864),i.e(40828),i.e(76007),i.e(5023),i.e(90978),i.e(65554),i.e(53571),i.e(66885),i.e(21194),i.e(67780),i.e(96933),i.e(87598),i.e(23063),i.e(84341),i.e(3965),i.e(93052),i.e(67200),i.e(6463),i.e(98071),i.e(45620),i.e(96453),i.e(8081),i.e(25368),i.e(38546),i.e(80759),i.e(67183),i.e(45354),i.e(82720),i.e(83181),i.e(68455),i.e(28773),i.e(76074),i.e(78917),i.e(72883),i.e(1440),i.e(45986),i.e(67378),i.e(9353),i.e(91137),i.e(21864),i.e(52181),i.e(92924),i.e(66406),i.e(19167),i.e(55717),i.e(10152),i.e(40186),i.e(73738),i.e(70584),i.e(97074),i.e(48979),i.e(91957),i.e(76026),i.e(67262),i.e(29616),i.e(75681)]).then(i.bind(i,18179)))),a=(0,o()._h)(n,(e=>e.ShareMenuContainer))},951514:(e,t,i)=>{i.d(t,{Ay:()=>z});i(362833),i(725707),i(491955),i(500234),i(324989),i(403517),i(242343);var o=()=>i(237385),n=()=>i(803290),a=()=>i(174114),r=()=>i(83544),s=()=>i(486540),l=()=>i(446588),c=()=>i(21164),d=()=>i(16043),u=()=>i(528762),m=()=>i(653998),g=()=>i(76394),b=()=>i(441288),p=()=>i(145046),v=()=>i(927685),f=()=>i(983050),y=()=>i(477784),h=()=>i(640979),k=()=>i(906230),A=()=>i(352723),x=()=>i(392608),S=()=>i(863969),T=()=>i(432809),M=()=>i(907721),w=()=>i(485966),C=()=>i(943066),I=()=>i(103151),_=()=>i(24281),B=i(163643);function P(e){const t=(0,o().v3)(),{render:i,upsell:n,analyticsName:a,renderUpgradeTooltip:r,onUpgradeClick:s,alwaysAllowClick:l,tooltipPlacement:c,upgradeButtonDesktopStyle:d,upgradeButtonMobileStyle:u}=e;let m,{onClick:g,renderTooltip:b}=e;return n&&"product"===n.type&&(m=(0,B.jsx)(_().B,{upsell:n,analyticsName:a,desktopStyle:{display:"inline-block",pointerEvents:"none",...d},mobileStyle:{display:"inline-block",pointerEvents:"none",...u}}),l||(g=e=>{C().K(t,{from:a,upsell:n}),s&&s(e)},b=r)),(0,B.jsx)(I().A,{renderTooltip:b||(()=>null),render:e=>i((0,k().A)(e,{onClick:g}),m),disableTooltip:!b,placement:c})}var R=()=>i(613313),j=()=>i(111826),U=()=>i(764227),L=()=>i(133926),D=()=>i(535906),N=()=>i(273520),E=()=>i(935091),q=()=>i(858023),F=()=>i(678523),O=()=>i(88271),V=()=>i(35462),H=()=>i(611824),G=()=>i(758103),K=()=>i(84979);const W=(0,m().YK)({fullAccessTeamGuestsDisabledMessage:{id:"permissionRoleSelect.teamGuestPermissionItem.disabledPermissionitem.tooltip",defaultMessage:"Teamspace guests can't have full access."}});const z=function(e){let{isUserPermission:t,type:r,table:b,role:p,isInvite:v,availableRoleItems:k,roleItemOverrides:x,blockType:S,onClick:T,onClose:M,origin:w,isMenuItem:C,isRemovableOverride:I,disabled:_,buttonContents:P,buttonPopupStore:R,buttonStyle:j,placementToOrigin:U,alignmentToOrigin:L,upgradeButtonName:F,onUpgradeButtonClick:H,onChange:K,onRemoveMemberClick:z,onRemoveSelfClick:$,header:Y,footer:X,showPermissionOverrideWarning:ee,from:te}=e;const ie=(0,o().v3)(),oe=(0,n().uB)(R,i(962373).A),{device:ne}=ie,ae=Boolean(t),re=(0,i(622286).X)("sharing_anyone_with_the_link"),se=(0,n().K8)((()=>function(e){let{type:t,table:i,role:o,isInvite:n,availableRoleItems:a,roleItemOverrides:r,blockType:s,isPublicShareLink:m}=e;if(a&&a.length>0)return a;if("trusted_domain_permission"===t)return[{role:"reader"},{role:"none"}];if("collection_property_permission"===t)return[{role:"editor"},{role:"read_and_write"},{role:"comment_only"},{role:"reader"},{role:"none"}];if(i===c().Vl)return[{role:"editor"},{role:"read_and_write"},{role:"content_only_editor"},{role:"comment_only"},{role:"reader"},{role:"none"}];if(i===d().y7){let e=l().Gb.map((e=>({role:e})));return n&&(e=e.filter((e=>"none"!==e.role))),e}const g=[];"explicit_team_guest_permission"===t?g.push({role:"editor",disabledInfo:{isDisabled:!0,disabledMessage:y().A.formatMessage(W.fullAccessTeamGuestsDisabledMessage)}}):"bot_permission"!==t&&"public_permission"!==t&&g.push({role:"editor"});"space"===i&&(0,A().Qu)()&&g.push({role:"membership_admin"});g.push({role:"read_and_write"}),"collection_view"!==s&&"collection_view_page"!==s||"bot_permission"===t&&"content_only_editor"!==o||"public_permission"===t||g.push({role:"content_only_editor"});i!==u().NX&&("bot_permission"!==t&&g.push({role:"comment_only"}),"bot_permission"===t&&"reader"!==o||g.push({role:"reader"}));n||g.push({role:"none"});if(!r)return g;return g.map((e=>{const t=r.find((t=>t.role===e.role));return t||e}))}({type:r,table:b,role:p,isInvite:v,availableRoleItems:k,roleItemOverrides:x,blockType:S,isPublicShareLink:re})),[r,b,p,v,k,x,S,re]),le=(0,n().K8)((()=>"shareMenu"===te&&(0,i(268117).FI)()),[te]),ce=(0,n().K8)((()=>ne.isMobile&&le),[ne,le]),de=(0,n().K8)((()=>oe.state.open),[oe]),ue=(0,a().IS)((e=>({buttonPopupSheet:{borderTopLeftRadius:12,borderTopRightRadius:12,overflow:"hidden",paddingBottom:10,background:e.surface.wash},menuList:{width:"100%",margin:"0 auto"},sectionMenuItem:{overflow:"hidden",background:e.buttonBackground,borderRadius:12,marginLeft:16,marginRight:16,marginBottom:16,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,padding:void 0},scrollerStyle:{background:e.surface.wash},header:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:e.surface.wash,paddingTop:12,paddingBottom:20},headerLabel:{fontSize:16,fontWeight:i(31448).Wy.semibold,marginBottom:12},headerContent:{width:"100%"}})),[]);return(0,B.jsx)(N().Ay,{style:ce?ue.buttonPopupSheet:void 0,onClick:e=>{e.preventDefault(),e.stopPropagation(),T&&T()},onClose:M,popupType:ne.isMobile?N().z7.SlideUp:N().z7.Popup,buttonPopupStore:oe,open:de,renderOrigin:e=>w||(C?(0,B.jsx)(D().A,{...e,title:(0,B.jsx)(m().sA,{...(0,G().R)({type:r,role:p,table:b,isRemovable:!1,isCurrentUser:ae,isRedesignEnabled:le,isPublicShareLink:re}).label}),focused:!1,showExtensionArrow:!0}):(0,B.jsx)(G().Y,{type:r,role:p,events:e,disabled:_,buttonContents:P,buttonStyle:j,table:b,isCurrentUser:ae,from:te})),placementToOrigin:U||i(755769).UV.Bottom,alignmentToOrigin:L,render:e=>{let o,n;if((0,s().II)(p))o=[{key:"mixed_role_section",render:e=>(0,B.jsx)(O().A,{...e,topBorder:!1}),items:[{key:"mixed_role_description",render:()=>(0,B.jsx)(i(649198).F,{role:p}),action:()=>{}}]},{key:"bot_capabilities_warning",render:e=>(0,B.jsx)(O().A,{...e,topBorder:!0}),items:[{key:"warning_details",render:e=>(0,B.jsx)(i(932322).Ay,{...e,shouldWrapCaption:!0,caption:"Integration permissions cannot be changed on a page. You can manage integrations in settings."}),action:()=>{}}]},{key:"remove_bot",render:e=>(0,B.jsx)(O().A,{...e,topBorder:!0}),items:[{key:"none",render:e=>(0,B.jsx)(Q,{from:te,role:p,upgradeButtonName:F,onUpgradeButtonClick:H,focused:e.focused,props:e,availableRole:{role:"none"},isCurrentUser:Boolean(t),isRemovableOverride:I,table:b,type:r,isRedesignEnabled:le,isPublicShareLinkEnabled:re}),action:()=>{J("none",b,p,r,F,ie,se,re,K,H,t,z,$),e.close()}}]}];else if(o=[{key:"roles",render:e=>(0,B.jsx)(O().A,{...e,topBorder:0!==e.index,style:ce?ue.sectionMenuItem:void 0}),items:se.flatMap((i=>{const o={key:i.role,render:e=>(0,B.jsx)(Q,{from:te,role:p,upgradeButtonName:F,onUpgradeButtonClick:H,focused:e.focused,props:e,availableRole:i,isCurrentUser:Boolean(t),isRemovableOverride:I,table:b,type:r,isRedesignEnabled:le,isPublicShareLinkEnabled:re}),action:()=>{J(i.role,b,p,r,F,ie,se,re,K,H,t,z,$),e.close()}};return le&&"none"===i.role?[]:[i.prefixItem,o].filter(g().O9)}))}],le){const i=se.find((e=>"none"===e.role));(null==i?void 0:i.prefixItem)&&!ne.isMobile&&o.push({key:"prefix-item",render:e=>(0,B.jsx)(O().A,{...e,topBorder:!0,style:ce?ue.sectionMenuItem:void 0}),items:[null==i?void 0:i.prefixItem].filter(g().O9)});const n=se.filter((e=>"none"===e.role));n.length>0&&o.push({key:"none-role",render:e=>(0,B.jsx)(O().A,{...e,topBorder:!(ne.isMobile&&le),style:ce?ue.sectionMenuItem:void 0}),items:n.flatMap((i=>{const o={key:i.role,render:e=>(0,B.jsx)(Q,{from:te,role:p,upgradeButtonName:F,onUpgradeButtonClick:H,focused:e.focused,props:e,availableRole:i,isCurrentUser:Boolean(t),isRemovableOverride:I,table:b,type:r,isRedesignEnabled:le,isPublicShareLinkEnabled:re}),action:()=>{J(i.role,b,p,r,F,ie,se,re,K,H,t,z,$),e.close()}};return ne.isMobile?[i.prefixItem,o].filter(g().O9):[o].filter(g().O9)}))})}return n=ne.isMobile?{menuType:h().gu.Modal,title:(0,B.jsx)(m().sA,{id:"userPermissionsMenu.mobile.title",defaultMessage:"Select role"}),right:(0,B.jsx)(m().sA,{id:"userPermissionsMenu.mobile.doneButton.label",defaultMessage:"Done"}),onClickRight:e.close}:{menuType:h().gu.Popup,width:264},ce?(0,B.jsx)(E().A,{scrollerStyle:ue.scrollerStyle,menuType:h().gu.Popup,height:"50vh",maxWidth:"100%",className:f().yw8,header:(0,B.jsxs)("div",{style:ue.header,children:[(0,B.jsx)(V().A,{style:ue.headerLabel,children:(0,B.jsx)(m().sA,{defaultMessage:"Change access",id:"PermissionRoleSelect.Header.ChangeAccess"})}),(0,B.jsx)("div",{style:ue.headerContent,children:Y})]}),footer:(0,B.jsx)(B.Fragment,{children:X}),children:(0,B.jsx)(q().Ay,{type:q().Oh.Vertical,initialFocus:void 0,sections:o,style:ue.menuList})}):(0,B.jsx)(E().A,{className:f().yw8,header:Y,footer:(0,B.jsxs)(B.Fragment,{children:[X,ee&&(0,B.jsx)(Z,{})]}),...n,children:(0,B.jsx)(q().Ay,{type:q().Oh.Vertical,initialFocus:void 0,sections:o})})}})};function $(e,t,i,o){if(!o&&t!==d().y7){if((t===u().NX?l().NB(e):l().p2(e)&&!l().Km(e))&&"public_permission"!==i&&"bot_permission"!==i)return t===u().NX?(0,B.jsx)(K().A,{imageURL:r().A.images.tooltips.upsells.spaceReadAndWritePng,imageWidth:240,imageHeight:100,caption:(0,B.jsx)(m().sA,{defaultMessage:"Members cannot change workspace settings or invite new members.",id:"permissionRoleSelect.spaceReadAndWriteUpgradeTooltip.caption"}),title:(0,B.jsx)(m().sA,{defaultMessage:"Upgrade to add non-admin members",id:"permissionRoleSelect.spaceReadAndWriteUpgradeTooltip.title"})}):(0,B.jsx)(K().A,{imageURL:r().A.images.tooltips.upsells.userReadAndWritePng,imageWidth:240,imageHeight:100,caption:(0,B.jsx)(m().sA,{defaultMessage:"Users with edit access can edit a page but not share it with others.",id:"permissionRoleSelect.userReadAndWriteUpgradeTooltip.caption"}),title:(0,B.jsx)(m().sA,{defaultMessage:"Upgrade to add editors",id:"permissionRoleSelect.userReadAndWriteUpgradeTooltip.title"})})}return!1}function Y(e,t){if(void 0!==t)return t;switch(e){case"user_permission":case"bot_permission":case"group_permission":case"collection_property_permission":return!0;case"space_permission":case"space_owner_permission":case"explicit_team_permission":case"team_permission":case"team_owner_permission":case"explicit_team_owner_permission":case"explicit_team_guest_permission":case"public_permission":case"trusted_domain_permission":case"exclusive_user_permission":return!1;default:(0,g().HB)(e)}}async function J(e,t,i,o,n,a,r,l,c,g,f,y,h){var k,A;const S=(0,T().u)();if(i===e)return;const M=()=>{c&&c(e)};b().Uo({newRole:e,availableRoles:r});const I=await(0,L().Se)(a,{name:"block_read_and_write_role",spaceId:null===(k=w().default.state.currentSpaceStore)||void 0===k?void 0:k.id,userId:null===(A=w().default.state.currentUserStore)||void 0===A?void 0:A.id});if($(e,t,o,I)&&!v().A.isAdminMode)C().K(a,{from:n,upsell:{type:"product",product:j().Si(a)||"plus",limit:{type:"none"},trialability:"none"}}),g&&g();else if(function(e,t,i){return i&&(0,s().$q)(t,e)===t&&"none"===e}(e,i,f))h?h():p().ui({showCancel:!0,keepFocus:!1,message:t===u().NX||t===d().y7?(0,B.jsx)(m().sA,{id:"userPermissionsMenu.removePermissionsModal.removeSelfFromWorkspace.confirmationMessage",defaultMessage:"Are you sure you want to remove your own access? You will lose access to the workspace, and any private pages will be lost."}):(0,B.jsx)(m().sA,{id:"userPermissionsMenu.removePermissionsModal.removeSelfFromPage.confirmationMessage",defaultMessage:"Are you sure you want to remove your own access?"}),items:[{label:(0,B.jsx)(m().sA,{id:"userPermissionsMenu.removePermissionsModal.removeSelfButton.label",defaultMessage:"Remove"}),color:"red",onAccept:M}]});else if(function(e,t,i){return i&&(0,s().$q)(t,e)===t}(e,i,f))p().ui({showCancel:!0,keepFocus:!1,message:(0,B.jsx)(m().sA,{id:"userPermissionsMenu.downgradePermissionsModal.downgradeSelfFromWorkspaceOrPage.confirmationMessage",defaultMessage:"Are you sure you want to downgrade your own access?"}),items:[{label:(0,B.jsx)(m().sA,{id:"userPermissionsMenu.downgradePermissionsModal.downgradeSelfButton.label",defaultMessage:"Downgrade"}),color:"red",onAccept:M}]});else if(function(e,t){return(t===u().NX||t===d().y7)&&"none"===e}(e,t))if(y)y();else{await async function(e){const{message:t}=e;return new Promise((e=>{p().ui({showCancel:!0,keepFocus:!1,handleCancel:()=>e(!1),message:t,items:[{label:(0,B.jsx)(m().sA,{id:"userPermissionsMenu.removePermissionsModal.removeUserButton.label",defaultMessage:"Remove"}),color:"red",onAccept:()=>e(!0)}]})}))}({message:(_=!0,_&&(0,U().OX)()?(0,B.jsx)(m().sA,{id:"userPermissionsMenu.removePermissionsModal.removeUserFromWorkspace.enterprise.confirmationMessage",defaultMessage:"If you remove this member, they will lose workspace access. After their removal, you may transfer their private pages to another member. <transferpagelink>Learn more</transferpagelink>.",values:{transferpagelink:e=>(0,B.jsx)(H().A,{href:(0,x().xS)("guides.transferContent"),external:!0,children:e})}}):_?(0,B.jsx)(m().sA,{id:"userPermissionsMenu.removePermissionsModal.removeUserFromWorkspace.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to the workspace, and any private pages will be lost."}):(0,B.jsx)(m().sA,{id:"userPermissionsMenu.removePermissionsModal.removeUserFromPage.confirmationMessage",defaultMessage:"Are you sure you want to remove this person?"}))})&&M()}else if(function(e,t){return"public_permission"===e&&"none"===t}(o,e)&&S&&!l){await async function(){return new Promise((e=>{p().ui({showCancel:!0,keepFocus:!1,handleCancel:()=>e(!1),description:(0,B.jsx)(m().sA,{id:"permissionRoleSelect.unpublishConfirmation.description",defaultMessage:"Removing access will unpublish this page from the web."}),message:(0,B.jsx)(m().sA,{id:"permissionRoleSelect.unpublishConfirmation.message",defaultMessage:"Are you sure you want to remove access?"}),items:[{label:(0,B.jsx)(m().sA,{id:"userPermissionsMenu.removePermissionsModal.unpublishAction.label",defaultMessage:"Remove access"}),color:"red",onAccept:()=>e(!0)}]})}))}()&&M()}else M();var _}function Q(e){const{availableRole:t,isCurrentUser:i,role:r,table:s,type:l,isRemovableOverride:c,upgradeButtonName:d,onUpgradeButtonClick:u,isRedesignEnabled:g,isPublicShareLinkEnabled:b,from:p}=e,{label:v,caption:f,hideSelectionCheckIcon:y,icon:h}=(0,G().R)({type:l,role:t.role,table:s,isRemovable:Y(l,c),isCurrentUser:i,isRedesignEnabled:g,isPublicShareLink:b}),A=(0,a().DP)(),x=(0,o().v3)(),T=(0,S().O)(),C=(0,n().K8)((()=>{var e;return null===(e=x.currentUser)||void 0===e?void 0:e.id}),[x]),{device:_}=x,{onClick:j,key:U,...N}=e.props,E=t.disabledInfo,q=_.isMobile&&g,O=(0,L()._X)({name:"block_read_and_write_role",spaceId:T,userId:C}),V=(0,n().K8)((()=>$(t.role,s,l,"available"===(null==O?void 0:O.type))),[t,s,l,O]),H=(0,n().K8)((()=>x.device.isMobile&&!R().S$()),[x]),K=Boolean(V),W=(0,n().K8)((()=>{var e;return null===(e=w().default.getState().currentSpaceStore)||void 0===e?void 0:e.canAdmin()}),[]),z=K&&(!W||H),J=(0,a().IS)((e=>{const t={backgroundColor:e.surface.elevated,paddingTop:12,paddingBottom:12,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.stroke.secondary};return{buttonMenuItem:{...t},redButtonMenuItem:{...t,color:e.text.uiRedPrimary},disabledButtonMenuItem:{...t,color:e.text.tertiary}}}),[]);return _.isMobileNative&&K?null:E&&E.isDisabled?(0,B.jsx)(I().A,{delayThreshold:0,renderTooltip:e=>(0,B.jsx)("div",{...e,children:E.disabledMessage}),placement:M().W.Right,textWrap:!0,render:i=>(0,B.jsx)(D().A,{style:q?J.disabledButtonMenuItem:void 0,...i,focused:e.focused,disabled:!0,disabledFeedback:!0,isChecked:r===t.role&&!y,title:(0,B.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,B.jsx)("div",{style:{...e.style,marginRight:V?6:0},children:(0,B.jsx)(m().sA,{...v})})}),caption:f&&(0,B.jsx)("span",{style:{color:A.text.secondary},children:(0,B.jsx)(m().sA,{...f})}),shouldWrapCaption:!0})}):(0,B.jsx)(P,{upsell:K&&("unavailable"===(null==O?void 0:O.type)?O.upsell:void 0),analyticsName:d,renderUpgradeTooltip:()=>V,tooltipPlacement:M().W.Left,onClick:j,onUpgradeClick:u,render:(i,o)=>{const{focused:n,...a}=(0,k().A)(N,i);return(0,B.jsx)(D().A,{...a,style:q?"none"===t.role?J.redButtonMenuItem:J.buttonMenuItem:void 0,focused:n||e.focused,isChecked:r===t.role&&!y,title:(0,B.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,B.jsxs)("div",{style:{...e.style,marginRight:V?6:0,display:"flex",alignItems:"center"},children:[h,(0,B.jsx)(m().sA,{...v})]}),o,e.availableRole.tag&&(0,B.jsx)(F().A,{desktopStyle:{marginLeft:7},children:e.availableRole.tag})]}),caption:f&&(0,B.jsx)("span",{style:{color:A.text.secondary},children:(0,B.jsx)(m().sA,{...f})}),shouldWrapCaption:!0,disabled:z,isRedOnHover:(g||"spaceSettings"===p)&&!z&&"none"===t.role})}})}function Z(){const e=(0,a().DP)(),t=(0,o().v3)(),{device:i}=t;return(0,B.jsx)(V().A,{style:{padding:12,backgroundColor:e.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${e.regularDividerColor}`,marginTop:i.isMobile?28:1},isMultiline:!0,isSmall:!0,children:(0,B.jsx)(m().sA,{id:"permissionRoleSelect.overrideMessage.caption",defaultMessage:"Youll override permissions from the parent page if you change this role."})})}},972340:(e,t,i)=>{i.d(t,{$:()=>u,B:()=>d});var o=()=>i(371807),n=()=>i(296599),a=()=>i(145017),r=()=>i(836331),s=()=>i(413871),l=()=>i(133926),c=()=>i(818369);async function d(e){const{environment:t,sudoModeStore:i,pageBlockId:o,currentSpaceStore:a}=e,s=i.state.privatePageStore&&i.state.privatePageStore.id===o;if(t.device.isMobile||s||i.state.loading||i.state.error)return;await r().default.waitUntilStatsigReady();const d=(null==a?void 0:a.isReady())&&(null==a?void 0:a.canAdmin()),m=await function(e,t){return(0,l().Se)(e,{name:"sudo_mode",spaceId:t,userId:e.currentUser.id})}(t,null==a?void 0:a.id);if(!(o&&d&&a&&m))return;i.setState({...i.state,privatePageStore:void 0,loading:!0});const g=a.id,b=await c().callApi({eventName:"getPrivatePageInfo",environment:t,data:{id:o}});if("failed"===b.type)return void i.setState({...i.state,loading:!1,error:b.error});const p=b.data,v=u({environment:t,blockId:o,privateRecordCacheName:n().Rb,ancestorData:p,spaceId:g});i.setState({...i.state,privatePageStore:v,loading:!1,error:void 0})}function u(e){const{environment:t,privateRecordCacheName:i,ancestorData:n,spaceId:r,blockId:l}=e,c=new(o().A)({name:i});for(const o of n)switch(o.table){case"block":case"collection":case"team":c.setRecord({pointer:{spaceId:r,table:o.table,id:o.value.id},userId:t.currentUser.id},{role:"editor",value:o.value})}const d=new(s().Bv)(t,{table:a().ev,id:l},{inMemoryRecordCache:c});return d.inMemoryRecordCache.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),d}}}]);