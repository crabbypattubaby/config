"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[51195],{64256:(e,t,n)=>{n.d(t,{BY:()=>y,Lg:()=>_,id:()=>I,nE:()=>x,xi:()=>S});n(362833),n(725707),n(324989),n(403517);var i=()=>n(502140),o=()=>n(707781),r=()=>n(446588),s=()=>n(647242),a=()=>n(818369),l=()=>n(919536),c=()=>n(575015),u=()=>n(477784),d=()=>n(485966),p=()=>n(436622),m=()=>n(138385),v=()=>n(133926),f=()=>n(307542),g=()=>n(814059);async function y(e){const{environment:t,spaceStore:n,contextualInviteStore:i}=e;!function(e){const{spaceStore:t,contextualInviteStore:n}=e,i=t.getRole();if(!i||!(0,r().NB)(i))return!1;if(!n.hasGuests())return!1;if(t.getDisableMembershipRequests())return!1;return(0,f().x3)()}({environment:t,spaceStore:n,contextualInviteStore:i})?await async function(e){const{spaceStore:t,contextualInviteStore:n,environment:i}=e,o=t.getRole();if(!o||!(0,r().vp)(o))return!1;if(!n.hasGuests())return!1;return await(0,v().Se)(i,{name:"members",spaceId:t.id,userId:t.userId,amount:1})}({environment:t,spaceStore:n,contextualInviteStore:i})?i.startWorkspaceInvite():i.setState({...i.state,inviteStage:m().d5.closed}):i.startRequestMembership()}async function _(e){const{environment:t,spaceStore:n,contextualInviteStore:o,from:r,intl:s}=e,{selection:a,flowId:u}=o.state;if("page_guest"===a||!o.hasGuests())return o.reset(),!1;const{inviteTargets:d,unknownEmails:p}=await h({environment:t,contextualInviteStore:o}),m={...o.state};o.reset();const f=await(0,v().Se)(t,{name:"non_admin_members",spaceId:n.id,userId:n.userId})?e.inviteRole??"read_and_write":"editor";try{await l().eP({environment:t,store:n,inviteTargets:d,inviteRole:f,isOnboarding:!1,invite:{inviteOrigin:r,inviteFlowId:u,disable_invite_email:!0}})}catch(g){return function(e,t){if(0===t.length)return;c().D6({label:e.formatMessage({id:"contextual_invite.contextual_invite_failure",defaultMessage:"{userCount, plural, one {Failed to invite {users} as member} other {Failed to invite {users} as members}}"},{users:I(t,e),userCount:t.length})})}(s,m.invitedUsers),i().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.inviteTargets",data:{miscDataToConvertToString:{...m,inviteTargets:d}}}),!1}finally{p.length&&i().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.unknownUserId",data:{miscDataToConvertToString:{...m,unknownEmails:p}}})}return!0}async function S(e){const{environment:t,spaceStore:n,originId:o,originType:r,reasonMessage:s,contextualInviteStore:l,intl:u}=e,{selection:d}=l.state;if("page_guest"===d||!l.hasGuests())return l.reset(),!1;const{inviteTargets:p,unknownEmails:m}=await h({environment:t,contextualInviteStore:l}),v={...l.state};l.reset();const f=[];try{const e=p.map((e=>a().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",forActorId:e.value.id,spaceId:n.id,message:s,attributes:{origin_id:o,origin_type:r,origin_table:"share_menu"===r?"block":"space",add_permissions_on_approval:!1}}}).catch((()=>f.push(e)))));await Promise.all(e)}catch(g){return function(e,t){if(0===t.length)return;c().D6({label:e.formatMessage({id:"contextual_invite.request_members_failure",defaultMessage:"Failed to request {users} to become members"},{users:I(t,e)})})}(u,v.invitedUsers),i().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.inviteTargets",data:{miscDataToConvertToString:{...v,inviteTargetsWithErrors:f}}}),!1}finally{m.length&&i().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.unknownUserId",data:{miscDataToConvertToString:{...v,unknownEmails:m}}})}return!0}async function h(e){const{environment:t,contextualInviteStore:n}=e,{invitedEmailToUserIdMap:i}=n.state,o=[],r=[];for(const s of n.state.invitedUsers){if(!s.isGuest)continue;const e=await b(t,s,i);e?o.push({type:"existingUser",value:{id:e,email:s.email,version:1}}):r.push(s.email)}return{inviteTargets:o,unknownEmails:r}}async function b(e,t,n){const i=await async function(e,t,n){let i=t.id;if(i||(i=n[t.email]),!i){const n=await a().callApi({eventName:"findUser",environment:e,data:{email:t.email}});if("failed"!==n.type){const e=n.data;e.value&&(i=e.value.value.id)}}return i}(e,t,n);if(i)return i;const r=(0,o().H)(u().A.getIntl()),s=await a().callApi({eventName:"createEmailUser",environment:e,data:{email:t.email,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:r}});return"failed"!==s.type?s.data.userId:void 0}function I(e,t){return(0,g().l)(e.flatMap((e=>e.email||[])))}function x(e,t){var n;const{state:i}=t,o=null===(n=d().default.state.currentSpaceStore)||void 0===n?void 0:n.id,r=o?(0,s().AI)(p().A.getData(e,{spaceId:o})):void 0,a=t.getGuestEmails();return{invite_flow_id:i.flowId,user_count:a.length,user_emails:a,invite_space_role_selection:i.selection,is_bot:!1,subscription_tier:r}}},93004:(e,t,n)=>{n.d(t,{P:()=>s});var i=()=>n(21164),o=()=>n(818369),r=()=>n(413871);async function s(e){const{environment:t,teamStore:n}=e,s=null==n?void 0:n.getSpaceId(),a=n&&s&&{id:n.id,table:i().Vl,spaceId:s},l=n&&a&&r().md.createChildStore(n,a),c=l&&l.isReady()&&!l.isDefined()&&l.canEdit();if(n&&s&&l&&c){const e=await o().callApi({eventName:"createCollectionViewBlockForPosts",environment:t,data:{spaceId:s,teamId:n.id}});if("failed"===e.type)throw e.error;if("success"===e.type){const{collectionViewBlockId:t}=e.data;return t}}}},127086:(e,t,n)=>{n.d(t,{KG:()=>s,Xx:()=>r});var i=()=>n(129978);const o={SlackImportContactsButton:new(i().O2)("SlackImportContactsButton",(()=>n.e(55901).then(n.bind(n,33829)))),GoogleImportContactsButton:new(i().O2)("GoogleImportContactsButton",(()=>n.e(37398).then(n.bind(n,326638))))},r=(0,i()._h)(o.SlackImportContactsButton,(e=>e.default)),s=(0,i()._h)(o.GoogleImportContactsButton,(e=>e.GoogleImportContactsButton))},127776:(e,t,n)=>{n.d(t,{Vs:()=>k,gj:()=>T,hX:()=>M,oH:()=>D,v4:()=>C});n(610931);var i=()=>n(488587),o=()=>n(502140),r=()=>n(427091),s=()=>n(214144),a=()=>n(218357),l=()=>n(412527),c=()=>n(779470),u=()=>n(34662),d=()=>n(539174),p=()=>n(818369),m=()=>n(649334),v=()=>n(84543),f=()=>n(477784),g=()=>n(213124),y=()=>n(904697),_=()=>n(513060),S=()=>n(196387),h=()=>n(320462),b=()=>n(485966),I=()=>n(413871),x=()=>n(810733),w=()=>n(93004),A=()=>n(628854);async function T(e){let{environment:t,name:n,description:i,icon:o,accessLevel:r,isDefault:s,flowId:l,createTeamHome:c,teamPermissionRole:u,spacePermissionRole:m,members:v,settings:f}=e;const{currentSpaceStore:g}=b().default.getState();if(!g)throw new Error("currentSpaceStore does not exist");const y=S().default.mark("client_create_team_latency"),_=g.id,h=await p().callApi({eventName:"createTeam",environment:t,data:{spaceId:_,name:n,description:i,icon:o,isDefault:s,accessLevel:r,teamPermissionRole:u,spacePermissionRole:m,members:v,settings:f}});if("failed"===h.type)return void(0,A().O)(h);const{teamId:x}=h.data,T=I().h4.createChildStore(g,{table:a().yK,id:x,spaceId:_});return await T.load(),(0,w().P)({environment:t,teamStore:T}),c&&P({environment:t,teamStore:T}),d()._P(t,{store:T,flowId:l}),S().default.measure(y,{environment:t}),T}function k(e){var t;let{environment:n,page:i}=e;const o=s().JW(),r=(null===(t=i.getParentPointer())||void 0===t?void 0:t.table)!==a().yK?"page_to_team_nested":"page_to_team";d().H8(n,{from:r,flowId:o}),x().A.setState({open:!0,pageStore:i,flowId:o})}async function C(e){var t;let{environment:n,page:i,flowId:o,intl:s}=e;const{accessLevel:l,spacePermissionRole:c,teamPermissionRole:d,members:p}=(0,y().getAccessLevelAndPermissionsForTeamCreatedFromPage)(i),m=(i.isDefined()?i.getModel().getRenderTitle({intl:s,userTimeZone:(0,r().P)(),getRecordModel:i.getRecordModel}):void 0)??u().q4_(i.getTitleValue()),f=await T({environment:n,name:m,icon:null===(t=i.getIcon())||void 0===t?void 0:t.icon,accessLevel:l,isDefault:!1,description:"",flowId:o,createTeamHome:!1,teamPermissionRole:d,spacePermissionRole:c,members:p});if(!f)return;const{currentSpaceViewStore:g}=b().default.state;if(!g)return;const S=await(0,_().U)();v().createAndCommit({userAction:"teamActions.movePageToCreatedTeam",environment:n,canUndo:!0,perform:e=>{S({environment:n,currentSpaceViewStore:g,transaction:e,teamStore:f,action:"move",value:{type:a().yK,id:f.id},targets:[i],location:{type:"append"}})}}),(0,A().F2)({environment:n,teamId:f.id,tab:h().p.Members,from:"create_team_from_page"}),await new Promise((e=>setTimeout((()=>(0,A().Mh)({teamStore:f,environment:n})),100)))}async function D(e){let{environment:t,name:n,description:i,icon:o,flowId:r,trackCreateTeamComplete:s}=e;const{currentSpaceStore:l}=b().default.getState();if(!l)throw new Error("currentSpaceStore does not exist");const c=l.id,u=await p().callApi({eventName:"enableTeams",environment:t,data:{spaceId:c,defaultTeamName:n,defaultTeamIcon:o,defaultTeamDescription:i}});if("failed"===u.type)return void(0,A().O)(u);const{teamId:m}=u.data,v=I().h4.createChildStore(l,{table:a().yK,id:m,spaceId:c});return await v.load(),await P({environment:t,teamStore:v}),d().b0(t,{spaceId:c,store:v,flowId:r}),s&&m&&d()._P(t,{store:v,flowId:r}),v}async function M(e){var t;let{environment:n,teamStore:o,from:r,buttonPopupStore:a}=e;if(!n.currentUser.id)return!1;const l=s().JW(),c=o.isDefault(),u=o.getTeamAccessLevel();if(c)return!1;const p=o.getName(),m=await T({environment:n,name:(0,i().Q)(p||""),description:"",icon:o.getRawIcon(),accessLevel:u,isDefault:c,createTeamHome:!0,teamPermissionRole:null===(t=o.getTeamPermission())||void 0===t?void 0:t.role,spacePermissionRole:o.getSpacePermissionRole(),members:[],settings:o.getSettings(),flowId:l});return!!m&&(d().KK(n,{store:m,from:r}),(0,A().L0)({environment:n,teamStore:m,shouldScroll:!0}),(0,A().F2)({environment:n,teamId:m.id,tab:h().p.General,from:"duplicate_team",buttonPopupStore:a}),new Promise((e=>setTimeout(e,500))).then((()=>{(0,g().jH)(p)})),!0)}async function P(e){const{environment:t,teamStore:n}=e,i=b().default.state.currentSpaceStore,r=b().default.state.currentSpaceViewStore;if(!i||!r)return o().log({level:"error",from:"teamActions",type:"createHomepageOnTeamCreation-SpaceOrSpaceViewStoreError"}),!1;const s=(a=f().A.getIntl(),(0,c().B)(l().wA.teamsHomepage,a));var a;return!!(await m().createTemplateInstance({environment:t,item:s,spaceStore:i,spaceViewStore:r,useMinimalTemplates:!1,type:"inTeam",teamStore:n,from:"homepage_team",isOnboarding:!1}))||(o().log({level:"error",from:"teamActions",type:"createHomepageOnTeamCreation-PageNotCreated"}),!1)}},150957:(e,t,n)=>{n.d(t,{A:()=>y,v:()=>g});var i=n(242343),o=()=>n(803290),r=()=>n(850313),s=()=>n(518797),a=()=>n(409211),l=()=>n(653998),c=()=>n(76394),u=()=>n(951156),d=()=>n(35462),p=()=>n(482570),m=()=>n(485966),v=n(163643);function f(e){const{actorStore:t,avatar:n,isLarge:i}=e,o=i?32:28;return t?t.table===s().GP?(0,v.jsx)(u().A,{botStore:t,size:o}):t.table===a().oo?(0,v.jsx)(p().A,{userStore:t,size:o}):t.table===r().yj?(0,v.jsx)(p().A,{userStore:void 0,size:o}):void(0,c().HB)(t):n?(0,v.jsx)(p().A,{avatar:n,size:o}):(0,v.jsx)(p().A,{userStore:void 0,size:o})}function g(e){return"membership_admin"===e?"membership_admin":"editor"===e||"admin"===e?"admin":"none"===e||"guest"===e?"guest":"team_level_guest"===e?"team_level_guest":void("member"!==e&&"read_and_write"!==e&&"no_access"!==e&&"not_in_space"!==e&&e&&(0,c().HB)(e))}const y=function(e){const t=(0,l().tz)(),{actorStore:r,avatar:s,containerStyle:c,id:u,spaceRole:p,avatarBadge:g,caption:y,isLarge:_,restorationStatus:S,hideRolePill:h}=e,b=!h&&("admin"===p||"membership_admin"===p),I="guest"===p||"team_level_guest"===p,x=!h&&I,w=(0,o().K8)((()=>r?r.getDisplayName(t):null==s?void 0:s.name),[r,s,t]),A=(0,o().K8)((()=>{const{currentUserStore:e}=m().default.state;return!!e&&(!!r&&e.id===r.id)}),[r]),T=(0,n(174114).IS)((e=>({titleYouIndicator:{color:e.text.secondary}})),[]),k=(0,o().K8)((()=>Boolean(y)?y:r?r.getDetail():null==s?void 0:s.email),[y,r,s]),C=(0,o().O$)(m().AppStoreCurrentSpaceStore),D=(0,o().K8)((()=>(0,n(268117).FI)()),[]),[M,P]=(0,i.useState)(!1);return(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",maxWidth:_?"unset":300,marginLeft:_&&!D?2:0,...c},children:[(0,v.jsxs)("div",{style:{position:"relative",...!_&&{height:28,width:28}},children:[(0,v.jsx)(f,{actorStore:r,avatar:s,isLarge:_}),g]}),(0,v.jsxs)("div",{style:{minWidth:0,marginLeft:_?10:6,marginRight:_?10:6},children:[(0,v.jsxs)("div",{id:u,style:{display:"flex",gap:4},children:[(0,v.jsx)(d().A,{children:A?(0,v.jsx)(l().sA,{id:"cellMemberAvatar.displayName.title",defaultMessage:"{userFullDisplayName} <youIndicatorText>(You)</youIndicatorText>",values:{userFullDisplayName:w,youIndicatorText:e=>(0,v.jsx)("span",{style:T.titleYouIndicator,children:e})}}):w}),b&&(0,v.jsx)(n(829182).A,{role:p}),x&&(0,v.jsx)(n(781007).Q,{labelType:p,shouldUseTabStyle:D}),C&&S&&(0,v.jsx)(n(614434).A,{spaceStore:C,restorationStatus:S,didAttemptRecovery:M})]}),(0,v.jsx)(d().A,{isSmall:!0,style:{display:"flex"},children:(0,v.jsx)(d().A,{isSmall:!0,children:k})})]}),!I&&!M&&C&&(null==r?void 0:r.table)===a().oo&&w&&"canBeRestored"===(null==S?void 0:S.status)&&(0,v.jsx)(n(726623).A,{userStore:r,spaceId:C.id,onSubmit:()=>P(!0)})]})}},151004:(e,t,n)=>{n.d(t,{GH:()=>u,JD:()=>d,Kt:()=>c,Ng:()=>a,k_:()=>l,we:()=>p,xC:()=>m,yF:()=>v});var i=()=>n(137476),o=()=>n(995625),r=()=>n(836331),s=()=>n(764227);function a(e,t){const n=s().AI(),r=o().FX();(0,i().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_render_button",eventProperties:{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id}}})}function l(e,t){const n=s().AI(),r=o().FX();(0,i().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_render_invite_popup",eventProperties:{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id}}})}function c(e,t){const n=s().AI(),r=o().FX();(0,i().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_click_invite_button",eventProperties:{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id}}})}function u(e,t){const n=s().AI(),r=o().FX();(0,i().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_completed",eventProperties:{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage}}})}function d(e,t){const n=s().AI(),r=o().FX();(0,i().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_dismiss_popup",eventProperties:{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id}}})}function p(e,t){const n=s().AI(),r=o().FX();(0,i().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_click_select_all",eventProperties:{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query}}})}function m(e,t){const n=s().AI(),a=o().FX();(0,i().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_start_google_contacts_integration",eventProperties:{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from}}}),r().default.logEvent("google_contacts_imports_invite_start_google_contacts_integration",void 0,{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function v(e,t){const n=s().AI(),a=o().FX();(0,i().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_complete_google_contacts_integration",eventProperties:{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}}}),r().default.logEvent("google_contacts_imports_invite_complete_google_contacts_integration",void 0,{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}},159448:(e,t,n)=>{n.d(t,{lh:()=>s().l,bw:()=>c,UL:()=>I,lI:()=>A,IU:()=>k,g4:()=>b().g,Wo:()=>T().W,EF:()=>C().E,o2:()=>D().o});var i=()=>n(237385),o=()=>n(162901),r=()=>n(818369);var s=()=>n(898055),a=()=>n(803290),l=()=>n(669199);function c(e){return(0,a().K8)((()=>(0,l().eJ)({billingData:e})),[e])}var u=n(242343),d=()=>n(331863),p=()=>n(395665),m=()=>n(997310),v=()=>n(647242),f=()=>n(548694),g=()=>n(863969),y=()=>n(153642),_=()=>n(485966),S=()=>n(670682),h=()=>n(764227),b=()=>n(967010);function I(e){const t=(0,i().v3)(),[n,o]=(0,u.useState)(!1),s=function(e){const t=(0,b().g)("ai_fifty_percent_upgrade"),n=(0,g().O)(),i=(0,S().f_)({spaceId:n}),o=(0,v().eh)(i,"ai"),r=(0,y().V)();return(0,a().K8)((()=>{const n=t&&!o&&(0,h().wb)()&&1===r,i=(0,f().aB)(_().default.state.currentSpaceStore);return Boolean(n&&(!i||"sidebar"!==e||i>=7))}),[t,o,r,e])}(e),l=(0,m().r)(),c=(0,a().K8)((()=>null==l?void 0:l.canAdmin()),[l]),I=(0,a().K8)((()=>null==l?void 0:l.getSpaceId()),[l]);return(0,u.useEffect)((()=>{!async function(){if(s&&I&&c)try{const n=await r().callApi({eventName:"getCustomerOffer",environment:t,data:{spaceId:I,offerCampaign:"ai_fifty_percent_upgrade"}});if("failed"===n.type)return;if("offer"in n.data){var e;const t=(0,d().RS)(null===(e=n.data)||void 0===e?void 0:e.offer);o((0,p().J5)(t))}}catch(n){return}}()}),[t,s,I,c]),n}var x=()=>n(167532),w=()=>n(320168);function A(e){let{spaceId:t}=e;const n=(0,i().v3)(),o=(0,x().J)();return(0,a().K8)((()=>{if(!t||!o)return;const e=w().A.getData(n,{spaceId:t});return null==e?void 0:e.billingData}),[n,t,o])}var T=()=>n(653928);function k(e,t){const n=(0,a().O$)(e),i=(0,y().V)()??1,c=(0,g().O)(),u=(0,s().l)({spaceId:c}),d=(0,a().K8)((()=>(0,l().eJ)({billingData:u})),[u]),[{value:p}]=(0,o().Yb)((()=>r().callApi({eventName:"isEmailEducation",environment:t,data:{}})),[t]);return!!p&&("failed"!==p.type&&(!!p.data.isEligible&&(!!n&&(!!u&&(!Boolean((0,v().KH)(u,"plan"))&&(d&&1===i))))))}var C=()=>n(499104),D=()=>n(338578)},202027:(e,t,n)=>{n.d(t,{f:()=>i});const i=n(975392).sg((e=>{let{environment:t,flowId:i,origin:o,type:r}=e;switch(r){case"slack":n(726984).tr(t,{origin:o,invite_flow_id:i});break;case"google":n(151004).Ng(t,{origin:o,invite_flow_id:i});break;default:(0,n(76394).HB)(r)}}),2e3)},206069:(e,t,n)=>{n.d(t,{O:()=>a});n(242343);var i=()=>n(174114),o=()=>n(539645),r=()=>n(220413),s=n(163643);function a(e){const{checked:t}=e,n=(0,i().IS)((e=>({circleCheckmark:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"50%",borderStyle:"solid",borderWidth:1.75,borderColor:t?r().Ay.blue:e.buttonPressedBackground,backgroundColor:t?r().Ay.blue:"transparent"},checkIcon:{height:12,width:12,color:"white"}})),[t]);return(0,s.jsx)("div",{style:n.circleCheckmark,children:t&&(0,o().o)(n.checkIcon)})}},225679:(e,t,n)=>{n.d(t,{JQ:()=>u,d5:()=>d,vt:()=>c});var i=()=>n(950635),o=()=>n(850313),r=()=>n(518797),s=()=>n(409211),a=()=>n(76394),l=()=>n(413871);function c(e){const{parentStore:t,pointer:n}=e,o=(0,l().Oo)(t,n).getValue();if(o)return(0,i().D3)({table:n.table,value:o})}function u(e){const{parentStore:t,pointer:n}=e;return n.table===r().GP?l().vK.createChildStore(t,n):n.table===s().oo?l().LU.createChildStore(t,n):n.table===o().yj?l().pH.createChildStore(t,n):void(0,a().HB)(n)}function d(e){return e.table===r().GP?(0,i().oC)(e.getValue()):e.table===s().oo?(0,i().MR)(e.getValue()):e.table===o().yj?(0,i().w2)(e.getValue()):void(0,a().HB)(e)}},226518:(e,t,n)=>{n.d(t,{J:()=>l});var i=()=>n(237385),o=()=>n(803290),r=()=>n(485966),s=()=>n(133926),a=()=>n(785061);function l(){const e=(0,o().O$)(r().AppStoreCurrentSpaceStore),t=(0,i().v3)(),n=(0,o().K8)((()=>{var e;return null===(e=t.currentUser)||void 0===e?void 0:e.id}),[t]),l=(0,o().K8)((()=>t.device.isMobile),[t]),c=(0,s().P9)({name:"slack_imports_invite",spaceId:null==e?void 0:e.id,userId:n}),u=(0,s().P9)({name:"google_imports_invite",spaceId:null==e?void 0:e.id,userId:n}),d=(0,o().K8)((()=>(null==e?void 0:e.canEditMembership())??!1),[e]);return(0,a().vC)({canEditPermission:d,isMobile:l,hasAccessToFeature:(c||u)??!1})}},235843:(e,t,n)=>{n.d(t,{Ah:()=>B,D6:()=>j,KW:()=>D,Oo:()=>C,Pp:()=>F,St:()=>R,hQ:()=>W,iS:()=>P,kW:()=>M,l5:()=>k,lf:()=>E});n(610931),n(362833),n(333225),n(494367),n(516262),n(573119),n(240480),n(950443),n(619601),n(725707),n(491955),n(771702),n(403517);var i=()=>n(599932),o=()=>n(446588),r=()=>n(145017),s=()=>n(528762),a=()=>n(975392),l=()=>n(23371),c=()=>n(76394),u=()=>n(919536),d=()=>n(64256),p=()=>n(352723),m=()=>n(861095),v=()=>n(360482),f=()=>n(904697),g=()=>n(509484),y=()=>n(485966),_=()=>n(436622),S=()=>n(138385),h=()=>n(836331),b=()=>n(714604),I=()=>n(413871),x=()=>n(943066),w=()=>n(127776),A=()=>n(528643),T=()=>n(818369);async function k(e){const{environment:t,store:n,sudoModeStore:a,permissionsInviteStore:l,onInviteStart:d,contextualInviteStore:f,inviteOrigin:g}=e,{tokenQuery:y}=l.state;if((0,i().DT)(y.trim())&&(l.state.isInviteTargetsEmpty||!(0,b().qs)(l.state))){const e={type:"newUser",value:{email:y.trim()},source:"email"};m().mQ({target:e,permissionsInviteStore:l})||l.setState({...l.state,inviteTargets:[...l.state.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:""})}if(!l.state.isInviteTargetsEmpty&&l.state.inviteTargets.length>0){null==d||d();const e=l.state;if((0,b().qs)(e)){if(e.table===r().ev){if(!(0,v()._p)(n))throw new Error("Table mismatch.");const{inviteTargets:i,flowId:o,emailMessage:r}=e;l.reset();const s=await u().eP({environment:t,store:n,sudoModeStore:a,inviteTargets:i,inviteRole:void 0,isOnboarding:!1,invite:{inviteFlowId:o,inviteMessage:r,inviteOrigin:g}});return{success:s.success,requestedUserCount:s.success?Object.keys(s.requestedUsers).length:0}}if(e.table===s().NX){if(!(0,v().Yu)(n))throw new Error("Table mismatch.");const{inviteTargets:i,inviteRole:o,flowId:r}=e;l.reset();return{success:(await u().eP({environment:t,store:n,sudoModeStore:a,inviteTargets:i,inviteRole:o,isOnboarding:!1,invite:{inviteFlowId:r,inviteOrigin:g}})).success,requestedUserCount:0}}(0,c().HB)(e)}else{const{inviteRole:i,flowId:r,emailMessage:s}=e;l.reset();const c=await(0,p().hb)(n,e.inviteTargets);if((0,o().PW)(i)){const e=await u().eP({environment:t,store:n,sudoModeStore:a,inviteTargets:c,inviteRole:i,isOnboarding:!1,invite:{inviteFlowId:r,inviteMessage:s,inviteOrigin:g}});return e.success&&(null==f||f.setState({...null==f?void 0:f.state,invitedEmailToUserIdMap:e.invitedUsers})),{success:e.success,requestedUserCount:e.success?Object.keys(e.requestedUsers).length:0}}if((0,v().$R)(n)&&(0,b().nV)(e)){return{success:await u().sQ({environment:t,store:n,inviteTargets:e.inviteTargets,inviteRole:i,createNewTeamFlowId:r}),requestedUserCount:0}}}}return{success:!0,requestedUserCount:0}}function C(e){e.permissionsInviteStore.setState({...e.permissionsInviteStore.state,modalOpen:!1,flowId:void 0})}function D(e){const{permissionsInviteStore:t,contextualInviteStore:n}=e;if(!n)return;const i=[];t.state.inviteTargets.forEach((e=>{if("newUser"===e.type)i.push({email:e.value.email,isGuest:!0});else if("existingUser"===e.type){const t={...e.value,email:e.value.email,isGuest:"none"===e.spaceRole||"not_in_space"===e.spaceRole};i.push(t)}})),n.setState({...n.state,invitedUsers:i})}async function M(e){const{environment:t,store:n,sudoModeStore:i,permissionsInviteStore:o,contextualInviteStore:r,onInviteClick:a,onInviteComplete:l,inviteOrigin:c,intl:u}=e,p=n.getSpaceId(),m=new(I().SL)(t,{table:s().NX,id:p}),v=p?await _().A.awaitData(t,{spaceId:p}):void 0;if((null==r?void 0:r.state.selection)===S().NJ.workspace_member&&m&&(0,f().isEligibleToCreateTeamspace)(t,v)){if(!(await w().oH({environment:t,flowId:o.state.flowId||"",trackCreateTeamComplete:!1})))return;D({permissionsInviteStore:o,contextualInviteStore:r}),await(0,d().Lg)({environment:t,spaceStore:m,contextualInviteStore:r,from:c,intl:u})}else D({permissionsInviteStore:o,contextualInviteStore:r});let g={success:!1,requestedUserCount:0};try{g=await k({environment:t,store:n,sudoModeStore:i,permissionsInviteStore:o,contextualInviteStore:r,onInviteStart:()=>{null==a||a()},inviteOrigin:c})}catch(y){}finally{null==l||l(g.success,g.requestedUserCount)}}async function P(e){const{environment:t,permissionsInviteStore:n,from:i}=e;await m().iQ({environment:t,permissionsInviteStoreState:n.state,from:i})||n.reset()}function R(e){const{permissionsInviteStore:t,targetToRemove:n,defaultRoleForNonBot:i}=e;if(!t.state.isInviteTargetsEmpty)if((0,b().qs)(t.state))if((0,b().qs)(t.state)){const e=t.state.inviteTargets.filter((e=>e!==n));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:i,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}else(0,c().HB)(t.state);else{const e=t.state.inviteTargets.filter((e=>e!==n));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:i,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}}function j(e){const{environment:t,onUpgradeButtonClick:n,upgradeButtonName:i}=e;x().K(t,{from:i,upsell:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"}}),null==n||n()}async function B(e,t){const n=new Set(t),i=Array.from(n).map((async t=>{const n=await T().callApi({eventName:"findUser",environment:e,data:{email:t}});if("success"===n.type){const e=n.data;if(e.value){return{type:"existingUser",value:e.value.value}}}return{type:"newUser",value:{email:t},source:"email"}}));return await Promise.all(i)}async function F(e){const t="invitee",{environment:n,permissionsInviteStore:o,event:r}=e;if(!o.state.isInviteTargetsEmpty&&(0,b().qs)(o.state)){const e=r.target.value;o.setState({...o.state,inputFocus:t,tokenQuery:e})}else{const e=r.target.value,{extractedEmails:s,newInputValue:a}=(0,i().Ct)(e),l=(await B(n,s)).filter((e=>!m().mQ({target:e,permissionsInviteStore:o}))),c=[...o.state.inviteTargets,...l];c.length>0?o.setState({...o.state,inviteTargets:c,isInviteTargetsEmpty:!1,inputFocus:t,tokenQuery:a}):o.setState({...o.state,inviteTargets:[],isInviteTargetsEmpty:!0,inputFocus:t,tokenQuery:a})}}function E(e){const{environment:t,newRole:n,permissionsInviteStore:i}=e,{state:o}=i;A().Jy(t,{...m().oX(t,o),invite_updated_role:n}),!o.isInviteTargetsEmpty&&(0,b().qs)(o)||i.setState({...o,inviteRole:n})}async function W(e){var t;const{query:n,environment:i,sectionLimit:o,intl:r,membersOnly:s,importContactType:c,shouldUseEdgeCacheRollout:u}=e,{currentSpaceStore:d}=y().default.state;if(!d)return{inviteUsers:[],inviteBots:[],inviteGroups:[]};const p=h().default.getConfigKey("search_contacts_timeout","timeoutMs"),{userLimit:m,botLimit:v,groupLimit:f,importContactLimit:_}=o,S=await g().T.searchActions.load(),[b,I,x,{user:w,email:A},k]=await Promise.all([m>0?S.searchSpaceUsers({environment:i,query:n,membersOnly:s,limit:m,shouldUseEdgeCacheRollout:u}):[],v>0?S.searchSpaceBots({environment:i,query:n}):[],f>0?S.searchSpaceGroups({query:n,intl:r}):[],S.searchEmailUser(i,n),_>0?(0,l().nQ)(p,T().callApi({eventName:"searchContacts",environment:i,data:{spaceId:d.id,limit:_,query:n,importContactType:c,includeNonNotionUsers:!s,includeUserId:!0}})):void 0]),C=b.slice(0,m).map((e=>({type:"existingUser",value:e}))),D=I.slice(0,v).map((e=>({type:"bot",value:e}))),M=x.slice(0,f).map((e=>({type:"group",value:e})));w&&C.unshift({type:"existingUser",value:w}),A&&C.unshift({type:"newUser",value:{email:A},source:"email"});let P=[];return"success"===(null==k||null===(t=k.result)||void 0===t?void 0:t.type)&&(P=k.result.data.contacts.map((e=>({type:"newUser",value:{email:e.email,name:e.name,avatar_url:e.profile_photo,user_id:e.user_id},source:e.type})))),{inviteUsers:a().hS(C,(e=>e.value.email)),inviteBots:D,inviteGroups:M,importedContacts:P}}},338054:(e,t,n)=>{n.d(t,{V:()=>r});n(242343);var i=()=>n(653998),o=n(163643);function r(e){let{totalInviteCount:t}=e;return 0===t?(0,o.jsx)(i().sA,{id:"invite.contacts_imports.button.title.no_selected",defaultMessage:"Add members",values:{totalInviteCount:t}}):(0,o.jsx)(i().sA,{id:"invite.contacts_imports.button.title.selected",defaultMessage:"Add {totalInviteCount} {totalInviteCount, plural, one {member} other {members}}",values:{totalInviteCount:t}})}},338578:(e,t,n)=>{n.d(t,{o:()=>c});var i=n(242343),o=()=>n(237385),r=()=>n(803290),s=()=>n(485966),a=()=>n(298520),l=()=>n(879205);function c(){const e=(0,o().v3)(),{spaceId:t,isGuest:n}=(0,r().K8)((()=>{const e=s().default.state.currentSpaceStore,t=null==e?void 0:e.getPublicSpaceData();return{spaceId:null==e?void 0:e.id,isGuest:"none"===(null==t?void 0:t.role)}}),[]);return(0,i.useEffect)((()=>{t&&!n&&(0,a().$W)({environment:e,spaceId:t})}),[e,t,n]),(0,r().K8)((()=>l().A.state.prices),[])}},367824:(e,t,n)=>{n.d(t,{V:()=>a});n(242343);var i=()=>n(653998),o=()=>n(975515),r=()=>n(625880),s=n(163643);function a(e){let{isLoading:t}=e;return(0,s.jsx)(r().z,{loading:t,children:(0,s.jsx)(o().A,{title:(0,s.jsx)(i().sA,{id:"contactsImportsInviteSearchRequest.searchInput.errorMessage",defaultMessage:"Something went wrong"})})})}},433119:(e,t,n)=>{n.d(t,{A:()=>o});n(242343);var i=n(163643);const o=function(e){const t=(0,n(237385).v3)(),{modalStyle:o}=e,r=(0,n(174114).IS)((e=>({modalStyle:{top:n(129808).jq(t.device.isElectronMac),borderRadius:12,overflow:"hidden",boxShadow:e.shadowLG,background:e.contentBackground,...o}})),[t,o]),{device:s}=t;return s.isMobile?(0,i.jsx)(n(443252).Ay,{popupType:n(466321).n.SlideUp,open:e.open,render:e.renderContent,preventSlideUpTransition:e.disableAnimation,onDismiss:e.onDismiss,origin:e.origin,trapFocus:!1,ariaLabel:e.ariaLabel}):(0,i.jsx)(n(922172).a,{open:e.open,preventHideChildrenWhileOpening:!0,style:{alignItems:"flex-start"},innerStyle:r.modalStyle,onDismiss:e.onDismiss,render:e.renderContent,origin:e.origin,isWaxPaper:e.modalIsWaxPaper,backgroundStyle:e.modalBackgroundStyle,transitionAppearance:e.disableAnimation?"none":void 0,ariaLabel:e.ariaLabel})}},442161:(e,t,n)=>{n.d(t,{t:()=>s});var i=n(242343),o=()=>n(237385),r=()=>n(818369);function s(){const e=(0,o().v3)(),[t,n]=(0,i.useState)();return(0,i.useEffect)((()=>{!async function(){const t=await r().callApi({eventName:"getExternalOrgData",environment:e,data:{}});if("failed"===t.type)return;const i=t.data;n(i)}()}),[e]),t}},449450:(e,t,n)=>{n.d(t,{s:()=>s});var i=()=>n(502140),o=()=>n(450475),r=()=>n(998865);async function s(e){const{environment:t,onInviteComplete:n,onInviteClick:s,flowId:a,intl:l,spaceStore:c,inviteTargetsStore:u,inviteOrigin:d,onError:p}=e;let m={success:!1};try{const e=await r().uf.personPropertyInviteActions.load();m=await e.inviteToSpaceAsMembers({environment:t,spaceStore:c,from:d,flowId:a,intl:l,inviteTargetsStore:u,onInviteStart:()=>{null==s||s()}})}catch(v){null==p||p(v),i().log({level:"error",from:"contactsImportsInviteActions",type:"handleMemberInvite",error:(0,o().convertErrorToLog)(v)})}finally{null==n||n(m)}}},499104:(e,t,n)=>{n.d(t,{E:()=>r});var i=()=>n(803290),o=()=>n(111826);function r(e){return(0,i().K8)((()=>o().Fq(e.state)),[e])}},614434:(e,t,n)=>{n.d(t,{A:()=>f});n(242343);var i=()=>n(16791),o=()=>n(803290),r=()=>n(174114),s=()=>n(846581),a=()=>n(653998),l=()=>n(31448),c=()=>n(225679),u=()=>n(907721),d=()=>n(695951),p=()=>n(103151),m=()=>n(35462),v=n(163643);function f(e){let{spaceStore:t,restorationStatus:n,didAttemptRecovery:i}=e;const o=y();return(0,v.jsx)(p().A,{placement:u().W.Bottom,renderTooltip:()=>(0,v.jsx)(g,{spaceStore:t,restorationStatus:n,didAttemptRecovery:i}),render:e=>(0,v.jsx)("div",{...e,children:(0,v.jsx)(d().A,{content:(0,v.jsx)(m().A,{style:o.recentlyReaddedText,children:(0,v.jsx)(a().sA,{id:"userCell.recentlyReadded.label",defaultMessage:"Recently re-added"})}),style:o.recentlyReaddedBadge})})})}function g(e){let{spaceStore:t,restorationStatus:n,didAttemptRecovery:r}=e;const l=y(),{displayName:u,displayTime:d}=function(e){let{spaceStore:t,restorationStatus:n}=e;const r="restored"===n.status?{table:n.restoredByTable,id:n.restoredById,spaceId:t.id}:void 0,l=r?(0,c().JQ)({parentStore:t,pointer:r}):void 0,u=(0,a().tz)(),{displayName:d}=(0,o().K8)((()=>({displayName:null==l?void 0:l.getDisplayName(u)})),[l,u]),p="restored"===n.status?(0,s().W_)(n.restoredTime,"medium_with_time",i().locale):void 0;return{displayName:d,displayTime:p}}({spaceStore:t,restorationStatus:n});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{style:l.tooltipFirstLine,children:(0,v.jsx)(a().sA,{id:"userCell.recentlyReaddedTooltip.label",defaultMessage:"Member was removed and re-added within the last 30 days"})}),r&&(0,v.jsx)("div",{style:l.tooltipSecondLine,children:(0,v.jsx)(a().sA,{id:"userCell.recentlyReaddedTooltip.inProgress.description",defaultMessage:"Restoration of access is in progress",values:{displayName:u,displayTime:d}})}),!r&&u&&d&&(0,v.jsx)("div",{style:l.tooltipSecondLine,children:(0,v.jsx)(a().sA,{id:"userCell.recentlyReaddedTooltip.description",defaultMessage:"{displayName} restored their access on {displayTime}",values:{displayName:u,displayTime:d}})})]})}function y(){return(0,r().IS)((e=>({recentlyReaddedBadge:{background:e.fill.blueSecondary,marginLeft:0,maxWidth:"max-content"},recentlyReaddedText:{color:e.text.bluePrimary,fontSize:l().J.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px"},tooltipFirstLine:{color:e.text.contrastPrimary,fontWeight:l().Wy.semibold},tooltipSecondLine:{color:e.text.contrastSecondary}})),[])}},625880:(e,t,n)=>{n.d(t,{z:()=>a});n(242343);var i=()=>n(174114),o=()=>n(653998),r=()=>n(88271),s=n(163643);function a(e){const t=(0,i().IS)((()=>({container:{paddingBlock:4}})),[]);return(0,s.jsx)(r().A,{title:e.hideTitle?void 0:(0,s.jsx)(o().sA,{id:"inviteUserModal.searchDropdown.selectPersonTitle",defaultMessage:"Select a person"}),style:t.container,...e})}},649074:(e,t,n)=>{n.d(t,{DS:()=>o,Fe:()=>c,GB:()=>s,Gf:()=>d,V_:()=>u,j1:()=>l,j8:()=>r,yp:()=>p,yw:()=>a});var i=()=>n(647242);function o(e){return(0,i().Fq)({subscription:e})}function r(e){return(0,i().Ry)({subscription:e,trial:void 0})}function s(e){let{subscriptionState:t,logFunction:n,spaceId:o}=e;const r=m(t);return(0,i().yB)({billingData:{subscription:r,trial:void 0},logFunction:n,spaceId:o})}function a(e){return(0,i().q8)({subscription:e})}function l(e){return(0,i().V9)({subscription:m(e),trial:void 0})}function c(e){return(0,i().d$)({subscription:m(e),trial:void 0})}function u(e){return(0,i().ji)({subscription:m(e),trial:void 0})}function d(e){return(0,i().AI)({subscription:m(e),trial:void 0})}function p(e,t){return(0,i().KH)({subscription:m(e),trial:void 0},t)}function m(e){return e?{...e,trialEnd:void 0}:void 0}},653928:(e,t,n)=>{n.d(t,{W:()=>r});var i=n(242343),o=()=>n(442161);function r(){const e=(0,o().t)(),[t,n]=(0,i.useState)();return(0,i.useEffect)((()=>{n(!(!e||!("company_employee_count"in e))&&parseInt(e.company_employee_count)>99)}),[e]),t}},657412:(e,t,n)=>{n.d(t,{P4:()=>o,U1:()=>s,lW:()=>a});n(362833),n(725707),n(491955),n(113085);var i=()=>n(599932);function o(e){const{target:t,inviteTargetsStore:n}=e;return n.state.inviteTargets.some((e=>"newUser"===t.type?e.type===t.type&&t.value.email===e.value.email:"invalidUser"===t.type?e.type===t.type&&t.value.text===e.value.text:"group"===t.type?e.type===t.type&&e.value.group_id===t.value.group_id:e.type===t.type&&e.value.id===t.value.id))}function r(e){return"invalidUser"!==e.type}function s(e){const{inviteTargetsStore:t,includeInputFieldText:n}=e,s=[...t.state.inviteTargets];if(n){const e=function(e){const t=e.state.tokenQuery.trim();if(!(0,i().DT)(t))return;const n={type:"newUser",value:{email:t},source:"email"};return o({target:n,inviteTargetsStore:e})?void 0:n}(t);e&&s.push(e)}return s.filter(r)}function a(e){const{inviteTargetsStore:t,inviteTarget:n}=e;if(o({target:n,inviteTargetsStore:t})){const e=t.state.inviteTargets.filter((e=>"group"===n.type&&"group"===e.type?n.value.group_id!==e.value.group_id:"existingUser"===n.type&&"existingUser"===e.type?n.value.id!==e.value.id:"newUser"!==n.type||"newUser"!==e.type||n.value.email!==e.value.email));return t.setState({...t.state,inviteTargets:e}),!1}return t.setState({inviteTargets:[...t.state.inviteTargets,n],tokenQuery:""}),!0}},669199:(e,t,n)=>{n.d(t,{D_:()=>x,Ft:()=>I,HN:()=>h,MA:()=>y,Sk:()=>S,Yn:()=>A,e9:()=>g,eJ:()=>w,su:()=>b});n(362833),n(725707),n(500234),n(113085);var i=()=>n(532444),o=()=>n(647242),r=()=>n(649074),s=()=>n(455831),a=()=>n(653998),l=()=>n(477784),c=()=>n(670682);const u=(0,a().YK)({cancellationError:{id:"midtermSubscriptionHelpers.cancellationFailed",defaultMessage:"There was an error attempting to cancel your pending changes. Please try again."},unableToCancelError:{id:"midtermSubscriptionHelpers.unableToCancel",defaultMessage:"We cannot cancel your scheduled changes right now. Please contact support for more help."},cancellationSuccess:{id:"midtermSubscriptionHelpers.cancellationSucceeded",defaultMessage:"Pending changes have been canceled"},invalidSubscriptionId:{id:"midtermSubscriptionHelpers.invalidSubscriptionId",defaultMessage:"Unable to cancel your pending changes. Something was wrong with your pending subscription changes."}});function d(e){return(0,s().dL)(e)?"free":(0,s().wb)(e)?"education":(0,s().sP)(e)?"singlePlayerPlus":(0,s().$P)(e)?"plus":(0,s().tL)(e)?"business":(0,s().OX)(e)?"enterprise":"legacy"}const p=(0,a().YK)({freePlan:{defaultMessage:"Free Plan",id:"freePlan.title"},educationPlusPlan:{defaultMessage:"Education Plus Plan",id:"educationPlusPlan.title"},plusPlan:{defaultMessage:"Plus Plan",id:"plusPlan.title"},businessPlan:{id:"businessPlan.title",defaultMessage:"Business Plan"},enterprisePlan:{defaultMessage:"Enterprise Plan",id:"enterprisePlan.label"},legacyPlan:{defaultMessage:"Legacy Plan",id:"legacyPlan.label"}}),m={free:{planTitle:p.freePlan},singlePlayerPlus:{planTitle:p.plusPlan},education:{planTitle:p.educationPlusPlan},plus:{planTitle:p.plusPlan},business:{planTitle:p.businessPlan},enterprise:{planTitle:p.enterprisePlan},legacy:{planTitle:p.legacyPlan}},v=(0,a().YK)({notionAI:{defaultMessage:"Notion AI",id:"notionAI.title"},removeAI:{defaultMessage:"Remove AI",id:"notionAI.remove.title"}}),f=(0,a().YK)({month:{defaultMessage:"Monthly billing",id:"billingInterval.monthly"},year:{defaultMessage:"Annual billing",id:"billingInterval.annual"}});function g(){return l().A.formatMessage(u.unableToCancelError)}function y(){return l().A.formatMessage(u.cancellationSuccess)}function _(e){var t;const n=null==e||null===(t=e.subscription)||void 0===t?void 0:t.pending;if(!n)return;const i=(0,o().PP)(e),s=(0,o().lQ)(e);return{oldTier:(0,r().Gf)(i)??"free",newTier:(0,r().Gf)(s)??"free",oldAIAddOn:(0,r().V_)(i).find((e=>"ai"===e)),newAIAddOn:(0,r().V_)(s).find((e=>"ai"===e)),oldInterval:(0,r().yw)(i),newInterval:(0,r().yw)(s),phaseOneEndDate:n.startDate}}function S(e){const t=_(e);return!(!t||!t.newInterval)&&t.oldInterval!==t.newInterval}function h(e){const t=_(e);return!!t&&t.oldTier!==t.newTier}function b(e){const t=_(e),n=[];if(!t)return{scheduledChanges:n,periodEndDate:null};const{newTier:i,oldTier:o,oldAIAddOn:r,newAIAddOn:s,oldInterval:a,newInterval:c,phaseOneEndDate:u}=t;var p,g;return o!==i&&n.push(function(e,t){const n=d(e),i=l().A.formatMessage(m[n].planTitle);if(!t)return"";const o=d(t);return`${i} → ${l().A.formatMessage(m[o].planTitle)}`}(o,i)),r!==s&&n.push((p=r,g=s,`${l().A.formatMessage(p?v.notionAI:v.removeAI)} → ${l().A.formatMessage(g?v.notionAI:v.removeAI)}`)),a!==c&&n.push(function(e,t){return e&&t?`${l().A.formatMessage("month"===e?f.month:f.year)} → ${l().A.formatMessage("month"===t?f.month:f.year)}`:""}(a,c)),{scheduledChanges:n,periodEndDate:u}}function I(e,t){if(!e)return;const n=(0,o().PP)(e).items,i=(0,o().lQ)(e).items;var r;return(0,o().HO)(n,i).some((e=>{let[n,i]=e;return(0,o().IE)(n??i)===t&&n&&!i}))?null===(r=e.subscription)||void 0===r||null===(r=r.pending)||void 0===r?void 0:r.startDate:void 0}function x(e){if(!e)return;var t;return 0===(0,o().lQ)(e).items.length?null===(t=e.subscription)||void 0===t||null===(t=t.pending)||void 0===t?void 0:t.startDate:void 0}function w(e){let{billingData:t}=e;const n=(0,c().a9)(t);if(!n)return!1;if((0,o().et)(t))return!1;const i=(0,o().bO)(n),r=(0,o().N8)(null==n?void 0:n.subscription);return!i&&!r}function A(e){const t=(0,o().V9)(e),n=(0,o().ji)(e).length>0;return!t||(!i().xd.includes(t)||!(!n||!i().iV.includes(t)))}},702888:(e,t,n)=>{n.d(t,{g:()=>a});var i=()=>n(237385),o=()=>n(803290),r=()=>n(485966),s=()=>n(855827);function a(e){let{spaceId:t}=e;const n=(0,i().v3)(),a=(0,o().K8)((()=>{var e;return null===(e=r().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit()}),[]);return(0,o().K8)((()=>{if(t&&a)return s().A.getData(n,{spaceId:t})}),[n,t,a])}},726623:(e,t,n)=>{n.d(t,{A:()=>A});var i=n(242343),o=()=>n(727567),r=()=>n(653998),s=()=>n(31448),a=()=>n(907721),l=()=>n(356813),c=()=>n(103151),u=()=>n(237385),d=()=>n(803290),p=()=>n(174114),m=()=>n(818369),v=()=>n(145046),f=()=>n(575015),g=()=>n(529305),y=()=>n(539048),_=()=>n(289241),S=()=>n(421338),h=()=>n(204435),b=()=>n(701270),I=()=>n(482570),x=n(163643);function w(e){let{spaceId:t,userStore:n,onDismiss:o,onSubmit:s}=e;const a=(0,u().v3)(),l=n.id,c=(0,r().tz)(),y=(0,d().K8)((()=>n.getDisplayName(c)),[n,c]),_=(0,p().IS)((e=>({secondaryIcon:{fill:e.icon.uiBlueSecondary},primaryIcon:{fill:e.icon.uiBluePrimary},title:{color:e.text.primary,textAlign:"center",fontSize:17,fontWeight:500,lineHeight:"22px"}})),[]),w=(0,i.useCallback)((async()=>{const e=await m().callApi({eventName:"recoverUserContentInSpace",environment:a,data:{spaceId:t,userId:l}});if("failed"===e.type)throw v().Qg(e),e;s(),o(),f().D6({label:(0,x.jsx)(r().sA,{id:"restoreAccessModal.snackbarMessage",defaultMessage:"Initiated restoration of access for{nbsp}{displayName}",values:{displayName:(0,x.jsx)("b",{children:y}),nbsp:(0,x.jsx)(x.Fragment,{children:" "})}})})}),[a,t,l,y,o,s]);return(0,x.jsx)(g().tf,{header:(0,x.jsx)(g().YA,{iconAndTitle:(0,x.jsxs)(S().Y1,{align:"top-center",gap:9,children:[(0,x.jsx)(I().A,{userStore:n,size:40}),(0,x.jsx)("div",{style:_.title,children:(0,x.jsx)(r().sA,{defaultMessage:"Restore access",id:"restoreAccessModal.title"})})]}),description:(0,x.jsx)(r().sA,{id:"restoreAccessModal.subtitle",defaultMessage:"Restore additional access for members who were removed and re-added within the last 30 days"})}),footer:(0,x.jsx)(g().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,x.jsx)(r().sA,{defaultMessage:"Restore access",id:"restoreAccessModal.restoreButton"}),onClick:w}],secondaryButtons:[{buttonType:"secondary",label:(0,x.jsx)(r().sA,{defaultMessage:"Cancel",id:"restoreAccessModal.cancelButton"}),onClick:o}]}),children:(0,x.jsxs)(h().VP,{gap:24,children:[(0,x.jsx)(b().D,{styleName:"Body-14px/Regular",colorName:"primary",customStyles:{textAlign:"center"},children:(0,x.jsx)(r().sA,{id:"restoreAccessModal.contextDescription",defaultMessage:"<b>{displayName}</b> already has access to their private pages",values:{b:e=>(0,x.jsx)("b",{children:e}),displayName:y}})}),(0,x.jsx)(b().D,{styleName:"Body-14px/Regular",colorName:"primary",customStyles:{textAlign:"center"},children:(0,x.jsx)(r().sA,{id:"restoreAccessModal.actionDescription",defaultMessage:"Would you like to restore <b>{displayName}</b>'s access to their shared pages, groups, and teamspaces?",values:{b:e=>(0,x.jsx)("b",{children:e}),displayName:y}})})]})})}function A(e){let{spaceId:t,userStore:n,onSubmit:i}=e;const s=(0,r().tz)();return(0,x.jsx)(c().A,{placement:a().W.Right,renderTooltip:()=>(0,x.jsx)(T,{}),render:e=>(0,x.jsx)(l().A,{icon:o()._,ariaLabel:s.formatMessage({id:"restoreAccessButton.aria",defaultMessage:"Restore access"}),onClick:()=>async function(e,t,n){return await _().T.showAsyncModal((i=>(0,x.jsx)(y().s,{isOpen:i.isOpen,onDismiss:i.onDismiss,onClosed:i.onClosed,areaConstraint:{width:{type:"fixed",length:380}},render:()=>(0,x.jsx)(w,{spaceId:e,userStore:t,onDismiss:i.onDismiss,onSubmit:n})})))}(t,n,i),...e})})}function T(){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:{fontWeight:s().Wy.semibold},children:(0,x.jsx)(r().sA,{id:"userCell.restoreAccessTooltip.label",defaultMessage:"Restore access to teamspaces, groups, and shared pages"})}),(0,x.jsx)("div",{children:(0,x.jsx)(r().sA,{id:"userCell.restoreAccessTooltip.description",defaultMessage:"Only available if a member was removed and re-added in the last 30 days"})})]})}},726984:(e,t,n)=>{n.d(t,{C6:()=>y,Eu:()=>d,FY:()=>a,MP:()=>f,YT:()=>u,d2:()=>g,fK:()=>_,lL:()=>c,mH:()=>S,oI:()=>l,sD:()=>m,tr:()=>p,yS:()=>v});var i=()=>n(137476),o=()=>n(995625),r=()=>n(836331),s=()=>n(764227);function a(e){i().vd(e,"add_slack_integration")}function l(e){i().vd(e,"remove_slack_integration")}function c(e,t){i().vd(e,"slack_notification_create",t)}function u(e,t){i().vd(e,"slack_notification_delete",t)}function d(e,t){i().vd(e,"slack_notification_update",t)}function p(e,t){const n=s().AI(),r=o().FX();i().vd(e,"slack_imports_invite_render_button",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function m(e,t){const n=s().AI(),r=o().FX();i().vd(e,"slack_imports_invite_render_invite_popup",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function v(e,t){const n=s().AI(),r=o().FX();i().vd(e,"slack_imports_invite_click_invite_button",{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function f(e,t){const n=s().AI(),r=o().FX();i().vd(e,"slack_imports_invite_completed",{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage})}function g(e,t){const n=s().AI(),r=o().FX();i().vd(e,"slack_imports_invite_dismiss_popup",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function y(e,t){const n=s().AI(),r=o().FX();i().vd(e,"slack_imports_invite_click_select_all",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query})}function _(e,t){const n=s().AI(),a=o().FX();i().vd(e,"slack_imports_invite_start_slack_integration",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from}),r().default.logEvent("slack_imports_invite_start_slack_integration",void 0,{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function S(e,t){const n=s().AI(),a=o().FX();i().vd(e,"slack_imports_invite_complete_slack_integration",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}),r().default.logEvent("slack_imports_invite_complete_slack_integration",void 0,{metadata:{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}})}},785061:(e,t,n)=>{n.d(t,{Hc:()=>c,Io:()=>d,Mg:()=>m,S3:()=>a,X3:()=>l,dE:()=>p,iO:()=>u,vC:()=>v,vG:()=>s});n(362833),n(725707),n(771702);var i=()=>n(174114),o=()=>n(220413),r=()=>n(31448);function s(e){const{focus:t}=e;return(0,i().IS)((e=>({searchBar:{padding:16},inputStyle:{minWidth:60,width:"auto",borderTopLeftRadius:4,borderTopRightRadius:4,fontSize:14,fontWeight:r().Wy.regular},inputOuterStyle:{padding:6,borderRadius:6,height:20,alignItems:"center",minHeight:32,background:e.accentColors.gray[30],...t&&{background:"none"}}})),[t])}function a(){return(0,i().IS)((e=>({selectAllSectionStyle:{display:"flex",flexDirection:"column",gap:2,padding:"8px 0px 16px 0px"},sectionMenuItem:{padding:"12px 0px 0px 2px",display:"flex",flexDirection:"column",gap:2},dividerStyle:{margin:"0px 16px"},dividerInnerStyle:{borderBottom:`1px solid ${e.stroke.secondary}`},selectAllStyle:{display:"flex",fontSize:14,color:e.text.primary},totalCountsStyle:{paddingLeft:3,fontSize:14,color:e.text.tertiary}})),[])}function l(){return(0,i().IS)((e=>({footerStyle:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:60,padding:"12px 16px 16px 16px",borderTop:`1px solid ${e.stroke.secondary}`}})),[])}function c(){return(0,i().IS)((e=>({labelContainer:{display:"flex",alignItems:"center",color:o().Ay.uiLightBlack,size:14,gap:6},importListButton:{height:28,borderRadius:4,border:void 0,width:"100%"},importListButtonContainer:{padding:"0 6px",alignItems:"center"}})),[])}function u(){return(0,i().IS)((e=>({topContainer:{display:"flex",alignItems:"center",width:"100%",height:40,padding:"0 16px",borderBottom:`1px solid ${e.stroke.secondary}`},sendInviteLabel:{color:e.text.primary,fontSize:14,fontWeight:r().Wy.medium,textAlign:"left",verticalAlign:"top"}})),[])}function d(e,t){return(0,i().IS)((n=>({buttonContainer:{padding:"0 8px",...t},button:{height:32,borderRadius:4,border:`1px solid ${n.stroke.primary}`,...e}})),[e,t])}function p(e){const{filteredImportedContacts:t,inviteTargetsStore:n}=e,i=n.state.inviteTargets.length;return 0!==i&&i===t.length}function m(e){const{filteredImportedContacts:t}=e,n={};return t.forEach(((e,t)=>{const i=e.value.email[0].toUpperCase(),o=/^[A-Za-z]$/.test(i)?i:"#";n[o]||(n[o]=[]),n[o].push(e)})),n}function v(e){const{canEditPermission:t,isMobile:n,hasAccessToFeature:i}=e;return!(n||i||!t)}},797588:(e,t,n)=>{n.d(t,{N:()=>l});n(242343);var i=()=>n(174114),o=()=>n(839996),r=()=>n(653998),s=()=>n(206799),a=n(163643);function l(e){let{inviteTarget:t}=e;const n=(0,i().IS)((e=>({notionMemberLine:{display:"flex",alignItems:"center",gap:2},notionMemberIcon:{display:"flex",alignItems:"center",justifyContent:"center",color:e.icon.uiBluePrimary}})),[]);return(0,a.jsxs)("div",{style:n.notionMemberLine,children:[(0,a.jsxs)("div",{style:n.notionMemberIcon,children:[(0,a.jsx)(s().Q,{variantName:"fillSmall",iconGroup:o().g}),(0,a.jsx)(r().sA,{id:"invite.google_imports.notion_member.title",defaultMessage:"Notion Member"})]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("div",{children:t.value.email})]})}},797715:(e,t,n)=>{n.d(t,{Ay:()=>v,le:()=>m,sA:()=>p});var i=n(242343),o=()=>n(237385),r=()=>n(803290),s=()=>n(174114),a=()=>n(975392),l=()=>n(640979),c=()=>n(59175),u=()=>n(655830),d=n(163643);const p="20px";let m=function(e){return e[e.Select=0]="Select",e[e.Person=1]="Person",e[e.Relation=2]="Relation",e[e.FilterValue=3]="FilterValue",e[e.Share=4]="Share",e[e.Group=5]="Group",e[e.Geopoint=6]="Geopoint",e}({});const v=i.forwardRef((function(e,t){const{disabled:i,value:o,message:r,right:s,showClearButton:l,format:c,focus:p,dontShowBorderBottom:m,showBorder:v,style:f,onClick:g,inputAndTokenWrapRightStyle:y,tokens:_,hideInput:S,onRemoveLastToken:h,onKeyDown:I,onChange:x,focusInitial:w,focusAfterAnimation:A,preventScrollOnFocus:T,inputFullWidth:k,inputDivStyle:C,inputStyle:D,rightWrapStyle:M,tokenWrapStyle:P,type:R,placeholder:j,onEmptySubmit:B,onSubmit:F,textarea:E,autoComplete:W,onClearButtonClick:O,inputElementAttributes:U,suppressFocusRing:N,onFocus:L,onBlur:K}=e;return(0,d.jsx)(u().A,{debugName:"TokenInputMenuItem",capture:!i,onLeft:a().D_,onRight:a().D_,onSelectAll:a().D_,onRedo:a().D_,onUndo:a().D_,onToggleBold:a().D_,onToggleItalics:a().D_,onToggleCode:a().D_,onCut:a().D_,onCopy:a().D_,onPaste:a().D_,onKeypress:a().D_,children:(0,d.jsx)(u().A,{debugName:"TokenInputMenuItem",capture:!i&&o.length>0,onDelete:a().D_,onBackspace:a().D_,children:(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",flex:1,minWidth:0,gap:r?4:void 0},children:[(0,d.jsx)(b,{ref:t,right:s,showClearButton:l,format:c,focus:p,dontShowBorderBottom:m,disabled:i,showBorder:v,style:f,rightWrapStyle:M,onClick:g,inputAndTokenWrapRightStyle:y,tokens:_,hideInput:S,value:o,onRemoveLastToken:h,onKeyDown:I,onChange:x,focusInitial:w,focusAfterAnimation:A,preventScrollOnFocus:T,inputFullWidth:k,inputDivStyle:C,inputStyle:D,type:R,placeholder:j,onEmptySubmit:B,onSubmit:F,textarea:E,autoComplete:W,onClearButtonClick:O,inputElementAttributes:U,suppressFocusRing:N,onFocus:L,onBlur:K,tokenWrapStyle:P}),r&&(0,d.jsx)(n(35462).A,{isSmall:!0,children:r})]})})})}));function f(e){return e===m.Group}function g(e,t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:t?"none":e.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden",fontSize:14,minHeight:28,padding:4,borderRadius:6}}function y(e){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${e.regularDividerColor}`,fontSize:16,background:e.popoverBackground}}const _={borderRadius:4};function S(e){return{[m.Select]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:_,inputDivDesktopFocusStyle:{}},[m.Person]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:_,inputDivDesktopFocusStyle:{}},[m.Relation]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:_,inputDivDesktopFocusStyle:{}},[m.Group]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:_,inputDivDesktopFocusStyle:{}},[m.FilterValue]:{desktopWrapStyleOverride:{padding:"4px 6px",boxShadow:e.inputBoxShadow,background:e.inputBackground},inputDivDesktopStyle:_,inputDivDesktopFocusStyle:{}},[m.Geopoint]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:_,inputDivDesktopFocusStyle:{}},[m.Share]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:{margin:"0 0 0 2px",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}}}}const h=i.forwardRef((function(e,t){let{tokens:n,disabled:r,value:a,onRemoveLastToken:l,onKeyDown:u,onChange:p,focus:m,focusInitial:v,focusAfterAnimation:f,preventScrollOnFocus:g,format:y,inputFullWidth:_,inputDivStyle:S,inputStyle:h,type:b,placeholder:I,onEmptySubmit:w,onSubmit:A,textarea:T,autoComplete:k,inputMenuItemStore:C,onFocus:D,onBlur:M,inputElementAttributes:P,suppressFocusRing:R}=e;const j=(0,s().DP)(),B=(0,o().v3)(),F=(0,i.useCallback)((e=>{"Backspace"===e.key&&0===a.length&&l(),u&&u(e)}),[a,l,u]),E=(0,i.useCallback)((e=>{0===a.length&&w&&w(),A&&A(e)}),[a,w,A]),W=(0,i.useCallback)((()=>{C.setState({focused:!1}),null==M||M()}),[C,M]),O=(0,i.useCallback)((()=>{C.setState({focused:!0}),null==D||D()}),[C,D]),U=0===n.length;return(0,d.jsx)(c().A,{disabled:r,format:c().C.Transparent,onKeyDown:F,onChange:p,value:a,focus:m,focusInitial:v,focusAfterAnimation:f,preventScrollOnFocus:g,style:x(y,B,j,_,S),inputStyle:h||{height:B.device.isMobile?24:20},size:1,ref:t,type:b,placeholder:U?I:"",onSubmit:E,onFocus:O,onBlur:W,textarea:T,autoComplete:k,inputElementAttributes:P,suppressFocusRing:R})})),b=i.forwardRef((function(e,t){const{right:a,showClearButton:c,format:u,focus:p,dontShowBorderBottom:m,disabled:v,showBorder:_,style:b,onClick:x,inputAndTokenWrapRightStyle:w,tokenWrapStyle:A,tokens:T,hideInput:k,value:C,onRemoveLastToken:D,onKeyDown:M,onChange:P,focusInitial:R,focusAfterAnimation:j,preventScrollOnFocus:B,inputFullWidth:F,inputDivStyle:E,inputStyle:W,rightWrapStyle:O,type:U,placeholder:N,onEmptySubmit:L,onSubmit:K,textarea:H,autoComplete:G,onClearButtonClick:q,onFocus:V,onBlur:z,inputElementAttributes:Q,suppressFocusRing:X}=e,$=(0,s().DP)(),J=(0,o().v3)(),Y=(0,i.useContext)(l().xu),[Z,ee]=i.useState(!1),te=(0,r().uB)(void 0,n(185087).A);(0,n(269280).l)((()=>{(p||R)&&te.setState({focused:!0})})),(0,i.useEffect)((()=>{B&&ee(!0),void 0!==p&&te.setState({focused:p})}),[p,te,B]);const ne=(0,r().K8)((()=>te.state.focused),[te]),ie=(0,i.useRef)(null),[oe,re]=(0,n(152058).A)(),se=(0,n(381988).A)(t,ie,oe),ae=(0,i.useCallback)((()=>{var e;v||(null===(e=ie.current)||void 0===e||e.focus(),null==x||x())}),[v,x,ie]),le="combobox"===(null==Q?void 0:Q.role)&&re&&!X,ce=function(e){let{environment:t,theme:n,format:i,focus:o,dontShowBorderBottom:s,disabled:a,showBorder:c,menuContext:u,showFocusRing:d}=e;return(0,r().K8)((()=>{const{WindowSizeStore:e}=t,r=S(n)[i];return t.device.isMobile?{...y(n),paddingTop:14,paddingBottom:14,paddingLeft:(null==u?void 0:u.menuType)!==l().gu.Popup?e.getSafePaddingLeftCSS(16):16,paddingRight:(null==u?void 0:u.menuType)!==l().gu.Popup?e.getSafePaddingRightCSS(16):16,...s&&{borderBottom:"none"}}:{...g(n,a),...r.desktopWrapStyleOverride,...c&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...c&&o&&{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},...o&&r.inputDivDesktopFocusStyle,...d&&{boxShadow:n.outlineBlueInputBoxShadow}}}),[a,s,t,o,i,null==u?void 0:u.menuType,c,n,d])}({environment:J,theme:$,format:u,focus:p,dontShowBorderBottom:m,disabled:v,showBorder:_,menuContext:Y,showFocusRing:le}),{inputElementAttributes:ue,wrapperElementAttributes:de}=(0,i.useMemo)((()=>{if("combobox"===(null==Q?void 0:Q.role)){const{role:e,"aria-expanded":t,"aria-haspopup":n,"aria-controls":i,"aria-orientation":o,...r}=Q;return{inputElementAttributes:r,wrapperElementAttributes:{role:e,"aria-expanded":t,"aria-haspopup":n,"aria-controls":i,"aria-orientation":o}}}return{inputElementAttributes:Q,wrapperElementAttributes:{}}}),[Q]);return!J.device.isMobile||a||c?(0,d.jsxs)(n(142708).H,{type:n(98508).A.All,style:{...ce,flexWrap:"nowrap",...b},onClick:ae,...de,children:[(0,d.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...A,...a||c?w:null},children:[T,!k&&(0,d.jsx)(h,{ref:se,tokens:T,disabled:v,value:C,onRemoveLastToken:D,onKeyDown:M,onChange:P,focus:p,focusInitial:R,focusAfterAnimation:j,preventScrollOnFocus:Z,format:u,inputFullWidth:F,inputDivStyle:E,inputStyle:W,type:U,placeholder:N,onEmptySubmit:L,onSubmit:K,textarea:H,autoComplete:G,inputMenuItemStore:te,onFocus:V,onBlur:z,inputElementAttributes:ue,suppressFocusRing:X})]}),a||c?(0,d.jsx)("div",{style:{flexShrink:0,...O},children:(0,d.jsx)(I,{showClearButton:c,right:a,onClearButtonClick:q,tokens:T,value:C})}):null]}):(0,d.jsxs)("div",{style:{...ce,flexWrap:"nowrap",...b},onClick:ae,tabIndex:-1,role:"none",...de,children:[(0,d.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,gap:6,overflow:"hidden",marginRight:f(u)?6:0},children:[T,!k&&(0,d.jsx)(h,{ref:se,tokens:T,disabled:v,value:C,onRemoveLastToken:D,onKeyDown:M,onChange:P,focus:p,focusInitial:R,focusAfterAnimation:j,format:u,inputFullWidth:F,inputDivStyle:E,inputStyle:W,type:U,placeholder:N,onEmptySubmit:L,onSubmit:K,textarea:H,autoComplete:G,inputMenuItemStore:te,onFocus:V,onBlur:z,inputElementAttributes:ue,suppressFocusRing:X})]}),(0,d.jsx)(n(792824).A,{show:ne})]})}));function I(e){let{showClearButton:t,right:i,onClearButtonClick:r,tokens:a,value:l}=e;const c=(0,n(653998).tz)(),u=(0,s().DP)(),p=(0,o().v3)(),{isMobile:m}=p.device;return i?(0,d.jsx)(d.Fragment,{children:i}):t&&(a.length>0||l.length>0)?(0,d.jsx)(n(126451).A,{"aria-label":c.formatMessage({id:"tokenInputMenuItem.clearButton",defaultMessage:"Clear"}),onClick:r,style:{flexShrink:0,flexGrow:0,borderRadius:m?24:20,marginTop:2},children:(0,n(210106).J)({width:m?16:14,height:m?16:14,fill:u.lightIconColor})}):null}function x(e,t,n,i,o){return{flexGrow:1,flexShrink:1,flexBasis:i?"100%":60,minWidth:60,width:"auto",lineHeight:p,...t.device.isMobile?{margin:"0 8px 0 0"}:S(n)[e].inputDivDesktopStyle,...o}}},810733:(e,t,n)=>{n.d(t,{A:()=>o});class i extends(()=>n(129044))().default{getInitialState(){return{open:!1}}}const o=new i},829182:(e,t,n)=>{n.d(t,{A:()=>s});n(242343);var i=()=>n(653998),o=()=>n(678523),r=n(163643);function s(e){return(0,r.jsx)(o().A,{...e,children:"membership_admin"===e.role?(0,r.jsx)(i().sA,{id:"spacePermissionsSettings.user.membershipAdmin",defaultMessage:"Membership admin"}):(0,r.jsx)(i().sA,{id:"spacePermissionsSettings.user.workspaceOwner",defaultMessage:"Workspace owner"})})}},839996:(e,t,n)=>{n.d(t,{g:()=>i});const i=(0,n(680369).xh)("checkmarkCircle",{default:{loader:()=>n.e(44032).then(n.bind(n,423162))},small:{loader:()=>n.e(44032).then(n.bind(n,29152))},fill:{loader:()=>n.e(44032).then(n.bind(n,135866))},fillSmall:{loader:()=>n.e(44032).then(n.bind(n,796627))}},["check","mark","tick","confirm","approve"])},855827:(e,t,n)=>{n.d(t,{A:()=>o});const i=new(n(967203).U)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{var i;let{spaceId:o}=t;if(null===(i=n(485966).default.state.currentSpaceStore)||void 0===i||!i.canAdmin())return;const r=await Promise.resolve().then(n.bind(n,818369)),s=await r.callApi({eventName:"getCustomerOffersReceived",environment:e,data:{spaceId:o},headers:(0,n(519423).WS)({cellId:void 0,spaceId:o})});return"success"===s.type&&(0,n(76394).EI)(s.data)?s.data:void 0}));n(996094).exposeDebugValue("OffersReceivedStore",i);const o=i},967010:(e,t,n)=>{n.d(t,{g:()=>l});var i=n(242343),o=()=>n(237385),r=()=>n(863969),s=()=>n(384055),a=()=>n(702888);function l(e){var t;const n=(0,o().v3)(),[l,c]=(0,i.useState)(),u=(0,r().O)(),d=(null===(t=(0,a().g)({spaceId:u}))||void 0===t?void 0:t.length)??0;return(0,i.useEffect)((()=>{!async function(){u&&c(await(0,s().L6)({environment:n,spaceId:u,offerCampaign:e}))}()}),[n,u,e,d]),l}}}]);