"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[28866],{17969:(e,t,n)=>{n.d(t,{Ay:()=>a,dz:()=>o,xQ:()=>i});let i=function(e){return e.StartDate="startDate",e.StartTime="startTime",e.EndDate="endDate",e.EndTime="endTime",e}({}),o=function(e){return e.InvalidDate="Invalid date",e.InvalidTime="Invalid time",e.InvalidRange="Invalid range",e}({});class r extends(()=>n(129044))().default{getInitialState(){return{focus:i.StartDate,inputIsFocused:!1,inputTemporaryValue:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0},error:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0}}}}const a=r},173692:(e,t,n)=>{n.d(t,{A:()=>v});n(725707),n(491955),n(403517),n(242343);var i=()=>n(237385),o=()=>n(15552),r=()=>n(969481),a=()=>n(477784),s=()=>n(640979),l=()=>n(535906),u=()=>n(273520),d=()=>n(935091),c=()=>n(858023),p=()=>n(443252),g=()=>n(88271),f=n(163643);function v(e){const{filterValue:t,renderOrigin:n,buttonPopupStore:v}=e,h=(0,i().v3)(),m=e=>"relative"===e.filter.type&&"custom"===e.filter.value?a().A.formatMessage(r().IZ[e.filter.value]):"date"===e.type?(0,r().RR)(e.filter):(0,r().kz)(e.filter);return(0,f.jsx)(u().Ay,{popupType:h.device.isMobile?p().nl.SlideUp:p().nl.Popup,buttonPopupStore:v,render:()=>{let n;n=h.device.isMobile?{menuType:s().gu.ActionSheet}:{menuType:s().gu.Popup};const i="date"===e.type?(()=>{const e=o().ty;return[...e.filter((e=>"relative"===e.type)),...e.filter((e=>"exact"===e.type))]})().map((n=>({key:"relative"===n.type?n.value:n.type,render:e=>(0,f.jsx)(l().A,{...e,title:m({type:"date",filter:n}),isChecked:n.type===t.type&&(void 0===n.value||n.value===t.value)}),action:()=>{e.onUpdate(n),v.setState({open:!1})}}))):(()=>{const e=(0,o().mM)();return[...e.filter((e=>"relative"===e.type)),...e.filter((e=>"exact"===e.type))]})().map((n=>({key:(0,o().q5)(n),render:e=>(0,f.jsx)(l().A,{...e,title:m({type:"daterange",filter:n}),isChecked:n.type===t.type&&(void 0===n.value||n.value===t.value)}),action:()=>{e.onUpdate(n),v.setState({open:!1})}})));return(0,f.jsx)(d().A,{...n,children:(0,f.jsx)(c().Ay,{type:c().Oh.Vertical,sections:[{key:"filterOperators",render:e=>(0,f.jsx)(g().A,{disableMobilePadding:!0,...e}),items:i}],initialFocus:void 0})})},renderOrigin:n,style:{width:240},originGap:2,placementToOrigin:u().sx.Bottom,alignmentToOrigin:u().yP.Center,disabled:e.disabled})}},294821:(e,t,n)=>{n.d(t,{A:()=>o});n(242343);var i=n(163643);const o=function(e){let{title:t,disabled:o,innerStyle:r,placeholder:a,onClick:s,disableMargins:l,desktopStyle:u}=e;const d=(0,n(174114).DP)(),c=(0,n(237385).v3)(),{device:p}=c,g=Boolean(t);if(p.isMobile)return(0,i.jsx)(n(535906).A,{showExtensionArrow:!o,focused:!1,title:g?(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",...r},children:t}):(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",color:n(220413).Ay.uiGray,...r},children:a}),onClick:s});{const e="dark"===d.mode?d.text.tertiary:d.text.secondary;return(0,i.jsx)(n(799772).H,{action:()=>function(e){e&&e()}(s),disabled:o,render:s=>(0,i.jsxs)(n(286404).A,{...s,hovered:s.focused,size:"lg",backgroundColor:d.buttonBackground,style:{marginRight:8,maxWidth:180,padding:"0 8px",...s.disabled&&{opacity:.5},...l&&{marginRight:0,maxWidth:"100%",justifyContent:"space-between"},...u},children:[(0,i.jsx)("div",{style:{display:"flex",minWidth:0,color:g?d.text.primary:e,...r},children:g?t:a}),!o&&(0,n(198654).b)({width:10,marginLeft:6,fill:d.lightIconColor})]})})}}},296814:(e,t,n)=>{n.d(t,{A:()=>b});var i=n(242343),o=()=>n(237385),r=()=>n(803290),a=()=>n(174114),s=()=>n(871002),l=()=>n(16456),u=()=>n(918695),d=()=>n(653998),c=()=>n(76394),p=()=>n(969481),g=()=>n(36746),f=()=>n(703275),v=()=>n(59175),h=()=>n(401382),m=n(163643);const y=(0,d().YK)({invalidDateError:{id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"},invalidDateRangeError:{id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"},notSupportedDateRangeError:{id:"dateInputError.notSupportedDateRangeError.tooltip",defaultMessage:"The date is not supported"}});const b=function(e){const t=(0,d().tz)(),o=(0,r().uB)(void 0,f().A),{value:a}=e;(0,i.useEffect)((()=>{o.reset()}),[a,o]);const s=(0,i.useCallback)((()=>(0,m.jsx)(B,{dateInputMenuItemProps:e,store:o})),[e,o]),l=(0,r().K8)((()=>A(t,o)),[t,o]);return l?(0,m.jsx)(n(103151).A,{renderTooltip:()=>l,forceVisibleState:!0,placement:n(907721).W.Left,render:s,originGap:-8}):(0,m.jsx)(B,{dateInputMenuItemProps:e,store:o})};function x(e,t){const{device:n}=e;return n.isMobile?"YYYY-MM-DD":t??s().vz}function S(e,t){const{device:n}=e;return!!n.isMobile||!t}function D(e){return{inputDefault:{background:e.inputBackground,boxShadow:e.inputBoxShadow},inputFocused:{background:e.inputBackground,boxShadow:e.outlineBlueInputBoxShadow},inputError:{background:e.inputBackground,boxShadow:e.outlineRedInputBoxShadow},placeholder:{color:e.text.tertiary}}}function k(e,t){return{menuItem:{marginBottom:e.device.isMobile?1:0},inputWrapper:{borderRadius:6,height:28,paddingRight:S(e,t)?8:0,position:"relative"},inputEditRegion:{width:S(e,t)?"calc(100% - 14px)":"87%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"},placeholder:{position:"absolute",left:e.device.isIpad?26:12,top:e.device.isIpad?void 0:"50%",transform:"translateY(-50%)"}}}function C(e){let{inputType:t,placeholder:n,value:i,hideClearButton:r}=e;const s=(0,a().DP)(),l=k((0,o().v3)(),r),u=D(s);return"date"!==t||i?null:(0,m.jsx)("div",{style:{...l.placeholder,...u.placeholder},children:n})}function A(e,t){if(t.state.error)switch(t.state.error){case f().$.INVALID_DATE:return e.formatMessage(y.invalidDateError);case f().$.INVALID_RANGE:return e.formatMessage(y.invalidDateRangeError);case f().$.NOT_SUPPORTED:return e.formatMessage(y.notSupportedDateRangeError);default:(0,c().HB)(t.state.error)}}function M(e,t,n,i,o){const r=function(e,t,n,i){if(!n.state.edited)return;if(!n.state.temporary)return{value:void 0};const o=(0,u().yc)(n.state.temporary,e.device.isMobile?l().tr:x(e,i),t);return o?{value:{type:"date",start_date:o}}:{error:f().$.INVALID_DATE}}(e,t,n,o);if(r)return i?i(r):r}function w(e,t,n,i,o){const r=D(e),a=A(i,o);if(!t)return a?r.inputError:n?r.inputFocused:r.inputDefault}function R(e,t,n,i,o,r,a,s){const l=M(e,n,i,r,a);l?(t(l),l.error?i.setState({...i.state,edited:!1,error:l.error}):i.reset()):i.setState({...i.state,edited:!1}),s&&o&&o(s)}function B(e){let{dateInputMenuItemProps:t,store:n}=e;const{store:s,hideClearButton:u,focused:c,value:f,...y}=t,{onBlur:b,onClearButtonClick:D,onFocus:A,onSubmit:B,onUpdate:j,placeholder:T,validate:I,desktopDateFormat:E,inputStyle:F,inputOuterStyle:P,style:W,disabled:L}=t,O=(0,d().tz)(),_=(0,a().DP)(),U=(0,o().v3)(),Y=(0,i.useCallback)((e=>R(U,j,O,n,b,I,E)),[U,j,O,n,b,I,E]),N=(0,i.useCallback)((e=>function(e,t,n,i,o,r,a,s){const l=M(t,i,o,a,s);l&&(n(l),l.error?o.setState({...o.state,edited:!1,error:l.error}):o.reset()),r&&r(e,l)}(e,U,j,O,n,B,I,E)),[U,j,O,n,B,I,E]),z=(0,i.useCallback)((e=>function(e,t,n,i,o,r,a,s){const{device:l}=t;o.setState({...o.state,edited:!0,temporary:e.target.value||""}),l.isAndroid&&R(t,n,i,o,r,a,s)}(e,U,j,O,n,b,I,E)),[U,j,O,n,b,I,E]),K=(0,i.useCallback)((()=>function(e,t,n,i,o,r,a){o.setState({...o.state,edited:!0,temporary:"",error:void 0});const s=M(e,i,o,r,a);s&&n(s),o.setState({...o.state,edited:!1}),t&&t()}(U,D,j,O,n,I,E)),[U,D,j,O,n,I,E]),G=(0,i.useCallback)((e=>function(e,t,n){n.setState({...n.state,edited:!1}),t&&t(e)}(e,A,n)),[A,n]),{device:V}=U,J=V.isMobile&&"relative"!==(null==f?void 0:f.type)?"date":"text",Q="date"===J?v().C.Transparent:v().C.Default,H=V.isMobile?void 0:c,$=(0,r().K8)((()=>function(e,t,n,i,o){const{device:r}=e;if(t&&"relative"===t.type)return(0,p().RR)(t);const a=t&&"date"!==t.type?l().fN(t):t;return r.isMobile?a?g().Yq(a,n,x(e,o)):"":i.state.temporary||i.state.edited?i.state.temporary:a?g().Yq(a,n,x(e,o)):""}(U,f,O,n,E)),[U,f,O,n,E]),X=(0,r().K8)((()=>function(e,t,n,i,o,r,a,s,l,u){const{device:d}=e,c=k(e,u);return{style:{...c.menuItem,...o,marginRight:0},inputOuterStyle:{...w(t,r,a,s,l),...c.inputWrapper,...i},inputStyle:{...c.inputEditRegion,...d.isMobile&&c.inputEditRegionMobile,...n}}}(U,_,F,P,W,L,c,O,n,u)),[U,_,F,P,W,L,c,O,n,u]);return(0,m.jsx)(h().Ay,{...y,type:J,format:Q,left:V.isMobile&&(0,m.jsx)(C,{placeholder:T,value:f,hideClearButton:u,inputType:J}),showClearButton:S(U,u),focus:H,onFocus:G,onClearButtonClick:K,onChange:z,onSubmit:N,onBlur:Y,value:$,disableInput:"relative"===(null==f?void 0:f.type),...X})}},356833:(e,t,n)=>{n.d(t,{A:()=>o});class i extends(()=>n(129044))().default{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();const t={...this.getInitialState()};e.initialDateRange&&(t.temporaryDateRange=e.initialDateRange),e.shouldAlsoUpdateSearchStore&&(t.shouldAlsoUpdateSearchStore=e.shouldAlsoUpdateSearchStore),this.setState(t)}getInitialState(){return{isOpen:!1,focus:"starting",temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,dateFilterType:"lastEditedTime",shouldAlsoUpdateSearchStore:!1}}getFocus(){return this.state.focus}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const o=i},381971:(e,t,n)=>{n.d(t,{A:()=>p});n(362833);var i=n.n(n(309102)),o=n(242343),r=()=>n(803290),a=()=>n(16456),s=()=>n(220413),l=()=>n(31448),u=()=>n(782422),d=()=>n(676586),c=n(163643);const p=function(e){let{readonly:t,store:p,value:g,validate:f,onUpdate:v,disabled:h,dateTimeStore:m,minDate:y,maxDate:b}=e;const x=(0,n(174114).DP)(),S=(0,o.useRef)(),D=(0,r().K8)((()=>{if(p.state.displayMonth)return p.state.displayMonth.toJSDate();if("starting"===p.getFocus()){if(g.starting)return a().C6.notionDateToJsDate(g.starting);if(g.ending)return a().C6.notionDateToJsDate(g.ending)}if("ending"===p.getFocus()){if(g.ending)return a().C6.notionDateToJsDate(g.ending);if(g.starting)return a().C6.notionDateToJsDate(g.starting)}if(!S.current){const e=a().Ec((0,n(427091).P)());S.current=a().C6.notionDateToJsDate(e)}return S.current}),[S,p,g]),k=(0,r().K8)((()=>u().XX.state),[]),C=(0,r().K8)((()=>function(e){const{store:t,value:n,componentIsDisabled:i,minDate:o,maxDate:r}=e,s=function(e){const{store:t,value:n,componentIsDisabled:i,minDate:o,maxDate:r}=e;if(i)return[!0];const s=[];o&&s.push({before:o.toJSDate()});r&&s.push({after:r.toJSDate()});const l=e=>"ending"===t.getFocus()&&{before:e},u=e=>"starting"===t.getFocus()&&{after:e};if(n.starting){const e=a().C6.notionDateToJsDate(n.starting);s.push(l(e))}if(n.ending){const e=a().C6.notionDateToJsDate(n.ending);s.push(u(e))}return s}({value:n,store:t,componentIsDisabled:i,minDate:o,maxDate:r}),{hovered:l}=t.state;if(i)return{disabled:s};if(n.starting&&n.ending){const e=a().C6.notionDateToJsDate(n.starting),t=a().C6.notionDateToJsDate(n.ending);return{range:{from:e,to:t},start:e,end:t,disabled:s}}if(n.starting){const e=a().C6.notionDateToJsDate(n.starting);return{range:l&&{from:e,to:l},start:e,end:l,disabled:s,selected:[e,l]}}if(n.ending){const e=a().C6.notionDateToJsDate(n.ending);return{range:l&&{from:l,to:e},start:l,end:e,disabled:s,selected:[e,l]}}return{disabled:s}}({store:p,value:g,componentIsDisabled:h,minDate:y,maxDate:b})),[p,g,h,y,b]),A=(0,n(622286).X)("nds_datepicker_refresh"),M=(0,r().K8)((()=>function(e,t,n){const i=function(e){return{monthControl:{position:"absolute",top:0,right:0,display:"flex"},selectedRange:{backgroundColor:e?"transparent":s().Ay.blueWithAlpha(.15)},active:{backgroundColor:s().Ay.blue,color:s().Ay.white},inactive:{backgroundColor:s().Ay.blueWithAlpha(.43)},disabled:{pointerEvents:"none"},today:{fontWeight:l().Wy.regular}}}(n),o=function(e){return{disabled:{color:e.text.tertiary},today:{color:s().Ay.white}}}(t),r=e.getFocus(),a=i.selectedRange,u={...i.disabled,...o.disabled},d={...i.today,...o.today};return{range:a,start:"starting"===r?i.active:i.inactive,end:"ending"===r?i.active:i.inactive,disabled:u,today:d}}(p,x,A)),[p,x,A]);return(0,c.jsx)(n(789894).n,{className:i()("notion-calendar-picker",{"is-readonly":t}),defaultMonth:D,month:D,numberOfMonths:1,weekStartsOn:k,locale:n(16791).locale,showOutsideDays:!0,fixedWeeks:!0,onDayClick:e=>function(e,t,n,i,o,r,s,l){if(r||l)return;const u=t.getFocus(),c=a().C6.toPersistedDate(e.valueOf()),p=i(u,{value:c}),g=p.error?p:{value:{[u]:p.value[u]}};o(g),t.setState({...t.state,hovered:void 0}),s&&s.setState({...s.state,hovered:void 0});if(p.error)return;"starting"!==u||n.ending||(t.setState({...t.state,focus:"ending"}),s&&s.setState({...s.state,focus:d().Ah.ending}));const f="starting"===u?"ending":"starting";t.setState({...t.state,focus:f}),s&&s.setState({...s.state,focus:d().Ah[f]})}(e,p,g,f,v,h,m,t),onDayMouseEnter:e=>function(e,t,n,i,o,r){const s=t.getFocus(),l=a().C6.jsDateToLuxon(e);if(i||r)return;if("starting"===s&&n.ending&&!n.starting){a().C6.notionDateToLuxon(n.ending)>=l&&(t.setState({...t.state,hovered:e}),o&&o.setState({...o.state,hovered:e}))}else if("ending"===s&&n.starting&&!n.ending){a().C6.notionDateToLuxon(n.starting)<=l&&(t.setState({...t.state,hovered:e}),o&&o.setState({...o.state,hovered:e}))}}(e,p,g,h,m,t),onMonthSelected:e=>function(e,t,n){t.setState({...t.state,displayMonth:a().C6.jsDateToLuxon(e)}),n&&n.setState({...n.state,displayMonth:a().C6.jsDateToLuxon(e)})}(e,p,m),modifiers:C,modifiersStyles:M,disabled:!!t||void 0})}},676586:(e,t,n)=>{n.d(t,{Ah:()=>r,Ay:()=>s,yL:()=>o});var i=()=>n(17969);const o={[i().xQ.StartDate]:"starting",[i().xQ.StartTime]:"starting",[i().xQ.EndDate]:"ending",[i().xQ.EndTime]:"ending"},r={starting:i().xQ.StartDate,ending:i().xQ.EndDate};class a extends(()=>n(129044))().default{getInitialState(){return{isOpen:!1,focus:i().xQ.StartDate,temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,showTime:!1}}getFocus(){return this.state.focus}toggleShowTime(){this.setState({...this.state,showTime:!this.state.showTime})}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const s=a},703275:(e,t,n)=>{n.d(t,{$:()=>i,A:()=>r});const i={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range",NOT_SUPPORTED:"Not supported"};class o extends(()=>n(129044))().default{getInitialState(){return{edited:!1,temporary:"",error:void 0}}}const r=o},789894:(e,t,n)=>{n.d(t,{n:()=>r});var i=()=>n(129978);const o=new(i().O2)("react-day-picker",(async()=>await Promise.all([n.e(95555),n.e(75831),n.e(68548)]).then(n.bind(n,210513)))),r=(0,i()._h)(o,(e=>e.default))},797715:(e,t,n)=>{n.d(t,{Ay:()=>f,le:()=>g,sA:()=>p});var i=n(242343),o=()=>n(237385),r=()=>n(803290),a=()=>n(174114),s=()=>n(975392),l=()=>n(640979),u=()=>n(59175),d=()=>n(655830),c=n(163643);const p="20px";let g=function(e){return e[e.Select=0]="Select",e[e.Person=1]="Person",e[e.Relation=2]="Relation",e[e.FilterValue=3]="FilterValue",e[e.Share=4]="Share",e[e.Group=5]="Group",e[e.Geopoint=6]="Geopoint",e}({});const f=i.forwardRef((function(e,t){const{disabled:i,value:o,message:r,right:a,showClearButton:l,format:u,focus:p,dontShowBorderBottom:g,showBorder:f,style:v,onClick:h,inputAndTokenWrapRightStyle:m,tokens:y,hideInput:b,onRemoveLastToken:x,onKeyDown:D,onChange:k,focusInitial:C,focusAfterAnimation:A,preventScrollOnFocus:M,inputFullWidth:w,inputDivStyle:R,inputStyle:B,rightWrapStyle:j,tokenWrapStyle:T,type:I,placeholder:E,onEmptySubmit:F,onSubmit:P,textarea:W,autoComplete:L,onClearButtonClick:O,inputElementAttributes:_,suppressFocusRing:U,onFocus:Y,onBlur:N}=e;return(0,c.jsx)(d().A,{debugName:"TokenInputMenuItem",capture:!i,onLeft:s().D_,onRight:s().D_,onSelectAll:s().D_,onRedo:s().D_,onUndo:s().D_,onToggleBold:s().D_,onToggleItalics:s().D_,onToggleCode:s().D_,onCut:s().D_,onCopy:s().D_,onPaste:s().D_,onKeypress:s().D_,children:(0,c.jsx)(d().A,{debugName:"TokenInputMenuItem",capture:!i&&o.length>0,onDelete:s().D_,onBackspace:s().D_,children:(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",flex:1,minWidth:0,gap:r?4:void 0},children:[(0,c.jsx)(S,{ref:t,right:a,showClearButton:l,format:u,focus:p,dontShowBorderBottom:g,disabled:i,showBorder:f,style:v,rightWrapStyle:j,onClick:h,inputAndTokenWrapRightStyle:m,tokens:y,hideInput:b,value:o,onRemoveLastToken:x,onKeyDown:D,onChange:k,focusInitial:C,focusAfterAnimation:A,preventScrollOnFocus:M,inputFullWidth:w,inputDivStyle:R,inputStyle:B,type:I,placeholder:E,onEmptySubmit:F,onSubmit:P,textarea:W,autoComplete:L,onClearButtonClick:O,inputElementAttributes:_,suppressFocusRing:U,onFocus:Y,onBlur:N,tokenWrapStyle:T}),r&&(0,c.jsx)(n(35462).A,{isSmall:!0,children:r})]})})})}));function v(e){return e===g.Group}function h(e,t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:t?"none":e.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden",fontSize:14,minHeight:28,padding:4,borderRadius:6}}function m(e){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${e.regularDividerColor}`,fontSize:16,background:e.popoverBackground}}const y={borderRadius:4};function b(e){return{[g.Select]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:y,inputDivDesktopFocusStyle:{}},[g.Person]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:y,inputDivDesktopFocusStyle:{}},[g.Relation]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:y,inputDivDesktopFocusStyle:{}},[g.Group]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:y,inputDivDesktopFocusStyle:{}},[g.FilterValue]:{desktopWrapStyleOverride:{padding:"4px 6px",boxShadow:e.inputBoxShadow,background:e.inputBackground},inputDivDesktopStyle:y,inputDivDesktopFocusStyle:{}},[g.Geopoint]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:y,inputDivDesktopFocusStyle:{}},[g.Share]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:{margin:"0 0 0 2px",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}}}}const x=i.forwardRef((function(e,t){let{tokens:n,disabled:r,value:s,onRemoveLastToken:l,onKeyDown:d,onChange:p,focus:g,focusInitial:f,focusAfterAnimation:v,preventScrollOnFocus:h,format:m,inputFullWidth:y,inputDivStyle:b,inputStyle:x,type:S,placeholder:D,onEmptySubmit:C,onSubmit:A,textarea:M,autoComplete:w,inputMenuItemStore:R,onFocus:B,onBlur:j,inputElementAttributes:T,suppressFocusRing:I}=e;const E=(0,a().DP)(),F=(0,o().v3)(),P=(0,i.useCallback)((e=>{"Backspace"===e.key&&0===s.length&&l(),d&&d(e)}),[s,l,d]),W=(0,i.useCallback)((e=>{0===s.length&&C&&C(),A&&A(e)}),[s,C,A]),L=(0,i.useCallback)((()=>{R.setState({focused:!1}),null==j||j()}),[R,j]),O=(0,i.useCallback)((()=>{R.setState({focused:!0}),null==B||B()}),[R,B]),_=0===n.length;return(0,c.jsx)(u().A,{disabled:r,format:u().C.Transparent,onKeyDown:P,onChange:p,value:s,focus:g,focusInitial:f,focusAfterAnimation:v,preventScrollOnFocus:h,style:k(m,F,E,y,b),inputStyle:x||{height:F.device.isMobile?24:20},size:1,ref:t,type:S,placeholder:_?D:"",onSubmit:W,onFocus:O,onBlur:L,textarea:M,autoComplete:w,inputElementAttributes:T,suppressFocusRing:I})})),S=i.forwardRef((function(e,t){const{right:s,showClearButton:u,format:d,focus:p,dontShowBorderBottom:g,disabled:f,showBorder:y,style:S,onClick:k,inputAndTokenWrapRightStyle:C,tokenWrapStyle:A,tokens:M,hideInput:w,value:R,onRemoveLastToken:B,onKeyDown:j,onChange:T,focusInitial:I,focusAfterAnimation:E,preventScrollOnFocus:F,inputFullWidth:P,inputDivStyle:W,inputStyle:L,rightWrapStyle:O,type:_,placeholder:U,onEmptySubmit:Y,onSubmit:N,textarea:z,autoComplete:K,onClearButtonClick:G,onFocus:V,onBlur:J,inputElementAttributes:Q,suppressFocusRing:H}=e,$=(0,a().DP)(),X=(0,o().v3)(),q=(0,i.useContext)(l().xu),[Z,ee]=i.useState(!1),te=(0,r().uB)(void 0,n(185087).A);(0,n(269280).l)((()=>{(p||I)&&te.setState({focused:!0})})),(0,i.useEffect)((()=>{F&&ee(!0),void 0!==p&&te.setState({focused:p})}),[p,te,F]);const ne=(0,r().K8)((()=>te.state.focused),[te]),ie=(0,i.useRef)(null),[oe,re]=(0,n(152058).A)(),ae=(0,n(381988).A)(t,ie,oe),se=(0,i.useCallback)((()=>{var e;f||(null===(e=ie.current)||void 0===e||e.focus(),null==k||k())}),[f,k,ie]),le="combobox"===(null==Q?void 0:Q.role)&&re&&!H,ue=function(e){let{environment:t,theme:n,format:i,focus:o,dontShowBorderBottom:a,disabled:s,showBorder:u,menuContext:d,showFocusRing:c}=e;return(0,r().K8)((()=>{const{WindowSizeStore:e}=t,r=b(n)[i];return t.device.isMobile?{...m(n),paddingTop:14,paddingBottom:14,paddingLeft:(null==d?void 0:d.menuType)!==l().gu.Popup?e.getSafePaddingLeftCSS(16):16,paddingRight:(null==d?void 0:d.menuType)!==l().gu.Popup?e.getSafePaddingRightCSS(16):16,...a&&{borderBottom:"none"}}:{...h(n,s),...r.desktopWrapStyleOverride,...u&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...u&&o&&{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},...o&&r.inputDivDesktopFocusStyle,...c&&{boxShadow:n.outlineBlueInputBoxShadow}}}),[s,a,t,o,i,null==d?void 0:d.menuType,u,n,c])}({environment:X,theme:$,format:d,focus:p,dontShowBorderBottom:g,disabled:f,showBorder:y,menuContext:q,showFocusRing:le}),{inputElementAttributes:de,wrapperElementAttributes:ce}=(0,i.useMemo)((()=>{if("combobox"===(null==Q?void 0:Q.role)){const{role:e,"aria-expanded":t,"aria-haspopup":n,"aria-controls":i,"aria-orientation":o,...r}=Q;return{inputElementAttributes:r,wrapperElementAttributes:{role:e,"aria-expanded":t,"aria-haspopup":n,"aria-controls":i,"aria-orientation":o}}}return{inputElementAttributes:Q,wrapperElementAttributes:{}}}),[Q]);return!X.device.isMobile||s||u?(0,c.jsxs)(n(142708).H,{type:n(98508).A.All,style:{...ue,flexWrap:"nowrap",...S},onClick:se,...ce,children:[(0,c.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...A,...s||u?C:null},children:[M,!w&&(0,c.jsx)(x,{ref:ae,tokens:M,disabled:f,value:R,onRemoveLastToken:B,onKeyDown:j,onChange:T,focus:p,focusInitial:I,focusAfterAnimation:E,preventScrollOnFocus:Z,format:d,inputFullWidth:P,inputDivStyle:W,inputStyle:L,type:_,placeholder:U,onEmptySubmit:Y,onSubmit:N,textarea:z,autoComplete:K,inputMenuItemStore:te,onFocus:V,onBlur:J,inputElementAttributes:de,suppressFocusRing:H})]}),s||u?(0,c.jsx)("div",{style:{flexShrink:0,...O},children:(0,c.jsx)(D,{showClearButton:u,right:s,onClearButtonClick:G,tokens:M,value:R})}):null]}):(0,c.jsxs)("div",{style:{...ue,flexWrap:"nowrap",...S},onClick:se,tabIndex:-1,role:"none",...ce,children:[(0,c.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,gap:6,overflow:"hidden",marginRight:v(d)?6:0},children:[M,!w&&(0,c.jsx)(x,{ref:ae,tokens:M,disabled:f,value:R,onRemoveLastToken:B,onKeyDown:j,onChange:T,focus:p,focusInitial:I,focusAfterAnimation:E,format:d,inputFullWidth:P,inputDivStyle:W,inputStyle:L,type:_,placeholder:U,onEmptySubmit:Y,onSubmit:N,textarea:z,autoComplete:K,inputMenuItemStore:te,onFocus:V,onBlur:J,inputElementAttributes:de,suppressFocusRing:H})]}),(0,c.jsx)(n(792824).A,{show:ne})]})}));function D(e){let{showClearButton:t,right:i,onClearButtonClick:r,tokens:s,value:l}=e;const u=(0,n(653998).tz)(),d=(0,a().DP)(),p=(0,o().v3)(),{isMobile:g}=p.device;return i?(0,c.jsx)(c.Fragment,{children:i}):t&&(s.length>0||l.length>0)?(0,c.jsx)(n(126451).A,{"aria-label":u.formatMessage({id:"tokenInputMenuItem.clearButton",defaultMessage:"Clear"}),onClick:r,style:{flexShrink:0,flexGrow:0,borderRadius:g?24:20,marginTop:2},children:(0,n(210106).J)({width:g?16:14,height:g?16:14,fill:d.lightIconColor})}):null}function k(e,t,n,i,o){return{flexGrow:1,flexShrink:1,flexBasis:i?"100%":60,minWidth:60,width:"auto",lineHeight:p,...t.device.isMobile?{margin:"0 8px 0 0"}:b(n)[e].inputDivDesktopStyle,...o}}},799772:(e,t,n)=>{n.d(t,{H:()=>y,i:()=>h});n(333225),n(494367),n(516262),n(573119),n(240480),n(950443),n(619601),n(725707),n(491955),n(403517);var i=n(242343),o=n(535370),r=()=>n(484992),a=()=>n(484844),s=()=>n(803290),l=()=>n(975392),u=()=>n(263512),d=()=>n(286555),c=()=>n(655830),p=n(163643);const g=i.createContext(void 0);g.displayName="DynamicMenuContext";const f={Up:{x:0,y:-1},Down:{x:0,y:1},Left:{x:-1,y:0},Right:{x:1,y:0}},v=n(129044).default.createValue(void 0);function h(e){const t=e.debug,n=(0,i.useRef)(void 0),o=(0,i.useRef)(new Set),a=(0,s().uB)(v),l=(0,i.useCallback)((()=>Array.from(o.current)),[]),u=(0,i.useCallback)((()=>l().map((e=>({entry:e,element:e.getDomElement()}))).filter((e=>{let{element:t}=e;return void 0!==t})).sort(((e,t)=>(0,r().A)(e.element,t.element))).map((e=>{let{entry:t}=e;return t}))),[l]),h=(0,i.useCallback)((e=>{o.current.add(e)}),[]),m=(0,i.useCallback)(((e,t)=>{e&&!o.current.has(e)||e!==a.state&&(e&&e.disabled||(a.setState(e),n.current=t))}),[a]),y=(0,i.useCallback)((e=>{const t=a.state,n=u(),i=t?n.indexOf(t):-1,o=e>0?n.length:-1;for(let r=i+e;e>0?r<o:r>o;r+=e){const e=n[r];if(e&&!e.disabled)return e}}),[a,u]),S=(0,i.useCallback)(((e,t)=>{const n=y(e);if(n)return null==t||t.preventDefault(),m(n,void 0),n}),[y,m]),D=(0,i.useCallback)(((e,i)=>{const o=a.state,r=n.current,s=l().filter((e=>!e.disabled));if(0===s.length)return;i&&i.preventDefault&&i.preventDefault();const u=o&&o.getRect();if(!u){const t=e.x*e.y>0?1:-1;return S(t,void 0)||S(1,void 0)}const c=s.map((e=>({entry:e,rect:e.getRect()}))).filter((e=>void 0!==e.rect&&e.entry!==o));let p;if(0===e.x&&void 0!==r&&r.left>u.left){const n=u.top-r.top,i=new(d().z8)(r.left,r.top+n,r.width,u.height);i.height=u.height,x("maxLeftRect",i,"orange",t),p=b(i,e,c,t),p&&x("found from maxLeft",p.rect,"yellow",t)}p||(p=b(u,e,c,t),p&&x("found from originRect",p.rect,"yellow",t));const g=0!==e.x||void 0===r;if(p){const e=p.rect;return m(p.entry,g?e:r),p.entry}g&&(n.current=u)}),[t,a,l,m,S]),k=(0,i.useCallback)((e=>{const t=a.state;if(o.current.delete(e),e===t){if(D({x:-1,y:-1},void 0))return;m(void 0,void 0)}}),[a,m,D]),C=(0,i.useCallback)((e=>{const t=a.state;t&&t.onAction(e,void 0)}),[a]),A=(0,i.useCallback)((()=>{var t;a.state?m(void 0,void 0):(t=e.onClose)&&t()}),[a,m,e.onClose]),M=(0,i.useCallback)((()=>{m(void 0,void 0)}),[m]),w=(0,i.useCallback)((e=>D(f.Up,e)),[D]),R=(0,i.useCallback)((e=>D(f.Right,e)),[D]),B=(0,i.useCallback)((e=>D(f.Down,e)),[D]),j=(0,i.useCallback)((e=>D(f.Left,e)),[D]),T=(0,i.useCallback)((e=>S(1,e)),[S]),I=(0,i.useCallback)((e=>S(-1,e)),[S]),E=(0,i.useMemo)((()=>({registerEntry:h,unregisterEntry:k,onFocusEvent:m,focusedEntryStore:a})),[h,k,m,a]);return(0,p.jsx)(c().A,{debugName:"DynamicMenu",capture:!e.disableKeyboard,onUp:w,onDown:B,onLeft:j,onRight:R,onEnter:C,onCommandEnter:C,onEsc:A,onTab:T,onUntab:I,children:(0,p.jsx)("div",{onMouseLeave:M,children:(0,p.jsx)(g.Provider,{value:E,children:e.children})})})}function m(e){const{action:t,render:n,dynamicMenuContext:r}=e,a=(0,i.useRef)(null);(0,i.useEffect)((()=>{const t=e.dynamicMenuContext,n=h.current;if(t)return t.registerEntry(n),()=>{t.unregisterEntry(n)}}),[]);const l=(0,i.useCallback)((e=>{r&&r.onFocusEvent(h.current,e)}),[r]),u=(0,i.useCallback)((e=>{t(e,r)}),[t,r]),d=(0,i.useCallback)((e=>{if(!e)return void(a.current=null);if(e instanceof Element)return void(a.current=e);const t=o.findDOMNode(e);t instanceof Element?a.current=t:a.current=null}),[]),c=(0,i.useCallback)((()=>a.current||void 0),[]),g=(0,i.useCallback)((()=>{if(a.current)return a.current.getBoundingClientRect()}),[]),f=Boolean(e.disabled),v=(0,i.useCallback)((e=>{t(e,r)}),[t,r]),h=(0,i.useRef)({getDomElement:c,getRect:g,disabled:f,onAction:v}),m=(0,s().K8)((()=>!!r&&r.focusedEntryStore.state===h.current),[r]);return(0,p.jsx)(p.Fragment,{children:n({onMouseEnter:l,onClick:u,ref:d,focused:m,disabled:f},e.dynamicMenuContext)})}function y(e){const t=(0,i.useContext)(g);return(0,p.jsx)(m,{...e,dynamicMenuContext:t})}function b(e,t,n,i){const o=(0,d().GL)(e),r=[o.top,o.left];let a=(0,d().fT)(e,-5);t.x>0&&(a=new(d().z8)(o.left,a.top,1/0,a.height)),t.x<0&&(a=new(d().z8)(0,a.top,o.right,a.height)),t.y>0&&(a=new(d().z8)(a.left,o.top,a.width,1/0)),t.y<0&&(a=new(d().z8)(a.left,0,a.width,o.bottom)),i&&x("search space",a,"magenta");const s=n.filter((e=>(0,d().HY)(a,e.rect))),c=l().Ul(s.map((e=>{const t=(0,d().GL)(e.rect);return{entry:e,distance:u().Io(r,[t.top,t.left])}})),(e=>e.distance))[0];if(c)return c.entry}function x(e,t){(arguments.length>3?arguments[3]:void 0)&&async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"magenta";await(0,a().Iz)(t,e,n)}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"magenta")}},804867:(e,t,n)=>{n.d(t,{i:()=>R});n(725707),n(491955),n(242343);var i=()=>n(237385),o=()=>n(803290),r=()=>n(174114),a=()=>n(198654),s=()=>n(653998),l=()=>n(141666),u=()=>n(969481),d=()=>n(477784),c=()=>n(640979),p=()=>n(622286),g=()=>n(962373),f=()=>n(81e4),v=()=>n(535906),h=()=>n(273520),m=()=>n(356813),y=()=>n(401382),b=()=>n(935091),x=()=>n(858023),S=()=>n(286404),D=()=>n(443252),k=()=>n(88271),C=()=>n(35462),A=()=>n(294821),M=n(163643);function w(e){const{humanReadableLabel:t,placeholder:n,outlineButtonStyle:i,buttonWrapperStyle:o,renderAsQueryDropdown:s,events:l,isMobile:u}=e,d=(0,r().IS)((e=>({iconStyle:{...!u&&{height:12,width:12},color:e.mediumIconColor},textStyle:{marginLeft:6,color:e.text.primary}})),[u]);return s?(0,M.jsx)(A().A,{...l,placeholder:n,title:(0,M.jsx)(C().A,{isMobile:u,children:t}),disableMargins:!0}):(0,M.jsx)("div",{style:o,...l,children:(0,M.jsxs)(S().A,{size:u?"lg":void 0,style:i,children:[(0,M.jsx)("div",{style:d.textStyle,children:t}),(0,M.jsx)(m().A,{disableBackground:!0,icon:a().b,iconStyle:d.iconStyle})]})})}function R(e){const{onUpdate:t,filter:n,renderAsQueryDropdown:a}=e,m=(0,i().Y0)(),S=(0,s().tz)(),C=(0,o().uB)(void 0,g().A),A=(0,o().uB)(void 0,g().A),R="count"in n,B=(0,p().X)("nds_datepicker_refresh"),j=(0,r().IS)((e=>({directionButtonStyle:{paddingLeft:4,paddingRight:4,width:"100%",justifyContent:"space-between",...m.isMobile&&{marginTop:12,width:"100%",paddingLeft:12,marginBottom:6}},unitButtonStyle:{paddingLeft:4,paddingRight:4,justifyContent:"space-between",width:"100%",...m.isMobile&&{paddingLeft:12,marginTop:6}},directionButtonWrapperStyle:{...m.isMobile&&{width:"100%"},flexGrow:1},unitButtonWrapperStyle:{...m.isMobile&&{width:"100%"},flexGrow:1},inputStyle:B?{padding:0}:{minWidth:35,height:16},inputOuterStyle:{minWidth:60,height:f().RO.md},container:{display:"flex",justifyContent:"start",alignItems:"center",flexDirection:m.isMobile?"column":"row",width:"100%",gap:B?4:8},textWrapper:{marginRight:6,marginLeft:a?16:6}})),[m.isMobile,a,B]);function T(e){return"this"===e?d().A.formatMessage(u().Cj[e]):d().A.formatMessage(u().zZ[e])}function I(e,t){return t&&t>1?d().A.formatMessage(u().o1[e]):d().A.formatMessage(u().EA[e])}const E=["day","week","month","year"].map((e=>({key:e,render:t=>(0,M.jsx)(v().A,{...t,title:I(e,R?n.count:void 0),isChecked:e===n.unit}),action:i=>{t({...n,unit:e}),C.setState({open:!1})}}))),F=["past","future","this"].map((e=>({key:e,render:t=>(0,M.jsx)(v().A,{...t,isChecked:"surrounding"===n.value?"this"===e:e===n.direction,title:T(e)}),action:i=>{"this"===e&&"custom"===n.value?t({type:"relative",value:"surrounding",unit:n.unit}):"this"!==e&&"surrounding"===n.value?t({type:"relative",value:"custom",count:1,direction:e,unit:n.unit}):"this"!==e&&"custom"===n.value&&t({...n,direction:e}),A.setState({open:!1})}})));return(0,M.jsxs)("div",{style:j.container,children:[(0,M.jsx)(h().Ay,{buttonPopupStore:A,popupType:m.isMobile?D().nl.SlideUp:D().nl.Popup,renderOrigin:e=>(0,M.jsx)(w,{events:e,placeholder:S.formatMessage(u().Ms.direction),renderAsQueryDropdown:a,isMobile:m.isMobile,outlineButtonStyle:j.directionButtonStyle,buttonWrapperStyle:j.directionButtonWrapperStyle,humanReadableLabel:T("direction"in n?n.direction:"this")}),render:()=>(0,M.jsx)(b().A,{menuType:m.isMobile?c().gu.ActionSheet:c().gu.Popup,children:(0,M.jsx)(x().Ay,{initialFocus:void 0,type:x().Oh.Vertical,sections:[{key:"directionOptions",render:e=>(0,M.jsx)(k().A,{disableMobilePadding:!0,...e}),items:F}]})})}),R&&(0,M.jsx)(y().Ay,{type:"number",style:j.inputStyle,textWrapperStyle:j.textWrapper,inputOuterStyle:j.inputOuterStyle,min:"1",value:n.count.toString(),onChange:e=>{const i=parseInt(e.target.value);!(0,l().Et)(i)||i<1||t({...n,count:i})}}),(0,M.jsx)(h().Ay,{buttonPopupStore:C,popupType:m.isMobile?D().nl.SlideUp:D().nl.Popup,renderOrigin:e=>(0,M.jsx)(w,{events:e,placeholder:S.formatMessage(u().Ms.unit),renderAsQueryDropdown:a,isMobile:m.isMobile,outlineButtonStyle:j.unitButtonStyle,buttonWrapperStyle:j.unitButtonWrapperStyle,humanReadableLabel:I(n.unit,"count"in n?n.count:void 0)}),render:()=>(0,M.jsx)(b().A,{menuType:m.isMobile?c().gu.ActionSheet:c().gu.Popup,children:(0,M.jsx)(x().Ay,{initialFocus:void 0,type:x().Oh.Vertical,sections:[{key:"unitOptions",render:e=>(0,M.jsx)(k().A,{disableMobilePadding:!0,...e}),items:E}]})})})]})}},867988:(e,t,n)=>{n.d(t,{A:()=>B});n(725707),n(491955);var i=n(242343),o=()=>n(237385),r=()=>n(803290),a=()=>n(174114),s=()=>n(15552),l=()=>n(16456),u=()=>n(427091),d=()=>n(653998),c=()=>n(76394),p=()=>n(782422),g=()=>n(477784),f=()=>n(640979),v=()=>n(36746),h=()=>n(703275),m=()=>n(356833),y=()=>n(932322),b=()=>n(743668),x=()=>n(88271),S=()=>n(35462),D=()=>n(296814),k=()=>n(173692),C=()=>n(381971),A=()=>n(804867),M=n(163643);const w={pickerSectionMobile:{paddingTop:16,paddingBottom:8}},R=(0,d().YK)({startingMessage:{defaultMessage:"Starting",id:"search.dateRangeMenu.startingMessage"},endingMessage:{defaultMessage:"Ending",id:"search.dateRangeMenu.endingMessage"}});const B=function(e){let{disableMenuWrap:t,hideDateInputMenuItems:i,value:a,relativeRangePopupStore:s,onUpdateRelativeFilter:l,disabled:u,allowRelativeRangeFilter:c,onUpdate:p,onDismiss:g,title:f,store:v,maxDate:h,minDate:y}=e;const b=(0,o().v3)(),x=(0,d().tz)(),S=(0,r().uB)(v,m().A),{device:D}=b;return t?(0,M.jsxs)(M.Fragment,{children:[!i&&(0,M.jsx)(L,{value:a,relativeRangePopupStore:s,onUpdateRelativeFilter:l,disabled:u,allowRelativeRangeFilter:c,intl:x,onUpdate:p,onDismiss:g,store:S}),(0,M.jsx)(F,{value:a,onUpdate:p,store:S,maxDate:h,minDate:y})]}):(0,M.jsxs)(n(935091).A,{...O(b,f,a,x,p,S,g,s,l,u,c),children:[!D.isMobile&&!i&&(0,M.jsx)(L,{value:a,relativeRangePopupStore:s,onUpdateRelativeFilter:l,disabled:u,allowRelativeRangeFilter:c,intl:x,onUpdate:p,onDismiss:g,store:S}),(0,M.jsx)(F,{value:a,onUpdate:p,store:S,maxDate:h,minDate:y})]})};function j(e){return{type:"date",start_date:l().hp(Date.now(),l().Lm(),e).toFormat(l().tr)}}function T(e){return"custom"===e.value?function(e,t,n){const i=(0,s().k0)(e,t,n,(0,u().P)());switch(e){case"past":return{starting:l().lN(i),ending:l().Ec((0,u().P)())};case"future":return{starting:l().Ec((0,u().P)()),ending:l().lN(i)};default:(0,c().HB)(e)}}(e.direction,e.count,e.unit):"surrounding"===e.value?function(e){const{start:t,end:n}=(0,s().yM)(e,(0,u().P)(),p().XX.state);return{starting:l().lN(t),ending:l().lN(n)}}(e.unit):function(e){switch(e.value){case"this_week":return{starting:(t=(0,u().P)(),{type:"date",start_date:l().iB(Date.now(),l().Lm(),t).toFormat(l().tr)}),ending:j((0,u().P)())};case"the_past_month":return{starting:l().ZG((0,u().P)()),ending:l().Ec((0,u().P)())};case"the_past_week":return{starting:l().t0((0,u().P)()),ending:l().Ec((0,u().P)())};case"the_past_year":return{starting:l().Yz((0,u().P)()),ending:l().Ec((0,u().P)())};case"the_next_month":return{starting:l().Ec((0,u().P)()),ending:l().wc((0,u().P)())};case"the_next_week":return{starting:l().Ec((0,u().P)()),ending:l().En((0,u().P)())};case"the_next_year":return{starting:l().Ec((0,u().P)()),ending:l().le((0,u().P)())};default:(0,c().HB)(e)}var t}(e)}function I(e){let{events:t,onUpdateFilter:n,filter:i}=e;const r=(0,o().v3)();return(0,M.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:r.device.isMobile?"wrap":void 0,padding:"0px 12px"},children:(0,M.jsx)(A().i,{onUpdate:n,filter:i})})}function E(e,t,n){if("type"in n)return{value:{starting:void 0,ending:void 0}};if(t.error)return t;const i=t.value&&"date"!==t.value.type?l().fN(t.value):t.value;return function(e){if(e.starting&&e.ending){const t=l().C6.notionDateToLuxon(e.starting);return l().C6.notionDateToLuxon(e.ending)>=t?{value:e}:{error:h().$.INVALID_RANGE}}return{value:e}}({...n,[e]:i})}function F(e){let{value:t,onUpdate:n,store:i,maxDate:s,minDate:l}=e;const u=(0,a().DP)(),c=(0,o().v3)(),p=(0,r().uB)(i,m().A),{device:g}=c,f=function(e){return{pickerSectionMobile:{background:e.popoverBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}}(u),v={paddingLeft:8,paddingRight:8,paddingBottom:8,paddingTop:4,...g.isMobile&&w.pickerSectionMobile,...g.isMobile&&f.pickerSectionMobile},h=(0,r().K8)((()=>"type"in t?T(t):t),[t]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(x().A,{disableMobilePadding:!0,disableMobileBorders:!0,children:(0,M.jsx)("div",{style:v,children:(0,M.jsx)(C().A,{value:h,store:p,onUpdate:n,validate:(e,n)=>E(e,n,t),readonly:"type"in t,maxDate:s,minDate:l})})}),"type"in t&&(0,M.jsx)(x().A,{disableMobilePadding:!0,disableMobileBorders:!0,topBorder:!0,children:(0,M.jsx)(y().Ay,{title:(0,M.jsx)(S().A,{isSmall:!0,isSecondaryColor:!0,children:(0,M.jsx)(d().sA,{id:"collectionFilterMenu.dateRangeFilter.relativeDateRangeFilter.description",defaultMessage:"Filter will update with the current date"})})})})]})}function P(e,t){t.setState({...t.state,focus:e})}function W(e){let{events:t,value:n,disabled:a,allowRelativeRangeFilter:s,onUpdate:l,onDismiss:u,store:c}=e;const p=(0,o().v3)(),f=(0,d().tz)(),h=(0,i.useCallback)(((e,t)=>function(e,t,n){t&&t.error||n.setState({...n.state,focus:"ending"})}(0,t,c)),[c]),m=(0,r().K8)((()=>c.getFocus()),[c]),y=function(e,t){if("type"in e)return;return{earliestValidEnding:e.starting&&v().Yq(e.starting,t,"YYYY-MM-DD"),latestValidStarting:e.ending&&v().Yq(e.ending,t,"YYYY-MM-DD")}}(n,f),b="type"in n?{starting:void 0,ending:void 0}:n;return(0,M.jsxs)("div",{...t,style:{display:"flex",flexDirection:s&&!p.device.isMobile?"row":"column",alignItems:"center",gap:8,padding:"1px 12px 8px 12px",width:void p.device.isMobile},children:[(0,M.jsx)(D().A,{disabled:a,placeholder:p.device.isMobile?void 0:g().A.formatMessage(R.startingMessage),focused:"starting"===m,value:b.starting,validate:e=>function(e,t){const n=E("starting",e,t);return n.error?n:{value:n.value.starting}}(e,n),onUpdate:e=>function(e,t){e.error||t({value:{starting:e.value}})}(e,l),onFocus:()=>P("starting",c),onSubmit:h,inputElementAttributes:y?{max:y.latestValidStarting}:void 0,desktopDateFormat:s?"YYYY/MM/DD":void 0,style:{padding:0}}),(0,M.jsx)(D().A,{disabled:a,placeholder:p.device.isMobile?void 0:g().A.formatMessage(R.endingMessage),focused:"ending"===m,value:b.ending,validate:e=>function(e,t){const n=E("ending",e,t);return n.error?n:{value:n.value.ending}}(e,n),onUpdate:e=>function(e,t){e.error||t({value:{ending:e.value}})}(e,l),onFocus:()=>P("ending",c),onSubmit:(e,t)=>function(e,t,n){t&&t.error||n&&n(e)}(e,t,u),inputElementAttributes:y?{min:y.earliestValidEnding}:void 0,textWrapperStyle:s&&!p.device.isMobile?{marginLeft:2}:{},desktopDateFormat:s?"YYYY/MM/DD":void 0,style:{padding:0}})]})}function L(e){let{value:t,relativeRangePopupStore:n,onUpdateRelativeFilter:i,disabled:o,allowRelativeRangeFilter:r,intl:a,onUpdate:s,onDismiss:l,store:u}=e;if(n&&i){const e="type"in t?t:{type:"exact",value:void 0};return(0,M.jsx)(k().A,{type:"daterange",filterValue:e,onUpdate:i,renderOrigin:n=>"exact"===e.type?(0,M.jsx)(W,{value:t,disabled:o,allowRelativeRangeFilter:r,onUpdate:s,onDismiss:l,store:u,events:n}):"relative"!==e.type||"surrounding"!==e.value&&"custom"!==e.value?void 0:(0,M.jsx)(I,{events:n,onUpdateFilter:i,filter:e}),disabled:"exact"===e.type,buttonPopupStore:n})}return(0,M.jsx)(W,{value:t,disabled:o,allowRelativeRangeFilter:r,onUpdate:s,onDismiss:l,store:u})}function O(e,t,n,i,o,r,a,s,l,u,d){const{device:c}=e;if(c.isMobile){return{menuType:f().gu.Modal,title:t,right:(0,M.jsx)(b().DoneMenuText,{}),onClickRight:a,header:(0,M.jsx)(L,{value:n,relativeRangePopupStore:s,onUpdateRelativeFilter:l,disabled:u,allowRelativeRangeFilter:d,intl:i,onUpdate:o,onDismiss:a,store:r})}}return{menuType:f().gu.Popup,onClickOutside:a}}}}]);