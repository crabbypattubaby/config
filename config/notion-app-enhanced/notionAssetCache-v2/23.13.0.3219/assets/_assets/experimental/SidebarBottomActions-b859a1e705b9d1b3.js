"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[66249],{105373:(e,t,n)=>{n.d(t,{P:()=>s});var r=()=>n(758611),o=()=>n(865226);function s(e){const{environment:t}=e;o().oo({environment:t,url:r().JZ.marketplace,redirect:!1})}},129243:(e,t,n)=>{n.d(t,{GO:()=>q,Ju:()=>_,KA:()=>T,L0:()=>j,L2:()=>V,dA:()=>U,gI:()=>C,iN:()=>R,oG:()=>E,sK:()=>N});n(725707),n(491955),n(771702);var r=()=>n(519423),o=()=>n(486540),s=()=>n(446588),a=()=>n(220574),i=()=>n(145017),c=()=>n(518797),l=()=>n(66460),d=()=>n(528762),u=()=>n(409211),m=()=>n(23371),p=()=>n(76394),h=()=>n(145046),v=()=>n(303298),b=()=>n(754697),g=()=>n(477784),y=()=>n(352723),S=()=>n(413871),f=()=>n(818369),I=()=>n(70989),A=()=>n(919536),P=()=>n(759625),w=()=>n(575015),M=()=>n(84543),k=()=>n(271674);const B=(0,n(653998).YK)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function x(e,t){const{environment:n,spaceStore:r,spaceRole:o}=t,s=function(e){const{name:t,spaceStore:n,userId:r,icon:o,type:s,environment:a}=e,i=Date.now(),l={name:t,created_at:i,created_by_table:u().oo,created_by_id:r,alive:!0,icon:o,space_id:n.id,last_edited_at:i,last_edited_by_id:r,last_edited_by_table:u().oo};switch(s){case"guest":return{...l,type:"guest",capabilities:e.capabilities,parent_table:d().NX,parent_id:n.id,integration_id:void 0};case"scim":return{...l,id:(0,b().Z1)({environment:a,table:c().GP,spaceId:n.id}),type:"scim",parent_table:u().oo,parent_id:r};default:(0,p().HB)(s)}}(t),a=P().eC({environment:n,table:c().GP,value:s,inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e});return A().dy({environment:n,spaceStore:r,permissionItems:[{type:"bot_permission",role:o,bot_id:a.id}],transaction:e}),{botStore:a}}function C(e){const{environment:t}=e,{serverCommitResult:n,performResult:{botStore:r}}=M().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>x(t,e)});return{botStore:r,transactionPromise:n}}async function T(e){const{environment:t,botId:n,onSuccess:r}=e,o=await f().callApi({eventName:"deleteBot",environment:t,data:{botId:n}});"failed"===o.type?h().Qg(o):"success"===o.type&&r&&(await k().oX({environment:t}),r())}async function _(e){const{environment:t,table:n,id:o,type:s}=e,a=await f().callApi({eventName:"getBots",environment:t,data:{table:n,id:o,type:s},headers:(0,r().WS)({spaceId:n===d().NX?o:void 0})});return"failed"===a.type?(h().Qg(a),{botIds:[],recordMap:{}}):{botIds:a.data.botIds,recordMap:a.data.recordMap}}async function q(e){const{environment:t,currentSpaceStore:n,botIds:r}=e;if(!n)return;const o=await f().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:n.id,botIds:r}});if("failed"!==o.type)return o.data;h().Qg(o)}async function U(e){const{environment:t,botId:n}=e,r=await f().callApi({eventName:"getBotToken",environment:t,data:{botId:n}});if("failed"!==r.type)return r.data.token;h().Qg(r)}function N(e){const{botValue:t,store:n,environment:r}=e,{id:s,parent_id:a,parent_table:i,capabilities:c}=t,l={type:"bot_permission",bot_id:s,parent_id:a,parent_table:i,role:(0,o().MD)(c)};M().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:r,canUndo:!0,perform:e=>{A().zP({environment:r,store:n,permissionItems:[l],transaction:e})}})}function E(e){const{botId:t,store:n,environment:r}=e,o=n.getPermissionItems().filter((0,p().u0)((e=>(0,s().P3)(e)?{true:e}:{false:e})));for(const s of o)if(s.bot_id===t){const e={...s,role:"none"};M().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:r,canUndo:!0,perform:t=>{A().zP({environment:r,store:n,permissionItems:[e],transaction:t})}})}}function j(e){const{currentSpaceStore:t,environment:n,pages:r,botStore:o,addPermission:s}=e;if(!t)return;const a=(0,y().Ws)({botStore:o,addPermission:s});r.forEach((e=>{const r=S().sk.createChildStore(t,{table:i().ev,id:e,spaceId:t.getSpaceId()});M().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:n,canUndo:!0,perform:e=>{A().zP({environment:n,store:r,permissionItems:[a],transaction:e})}})}))}async function R(e){const{environment:t,spaceStore:n,botStore:r,pageIdAndOperations:o,concurrency:s=20}=e;0!==o.length&&await(0,m().lX)(o,s,(async e=>{const o=S().sk.createChildStore(n,{table:i().ev,id:e.pageId,spaceId:n.getSpaceId()}),s=(0,y().Ws)({botStore:r,addPermission:"add"===e.operationType}),{serverCommitResult:a}=M().createAndCommit({userAction:`botActions.updateBotPermissionsForPages.${e.operationType}`,environment:t,canUndo:!0,perform:e=>{A().zP({environment:t,store:o,permissionItems:[s],transaction:e})}});await a}))}async function V(e){const{environment:t,spaceStore:n,spaceViewStore:o,templatePageId:s,botValue:i,pages:d}=e;if(!n)return;const u=S().sk.createChildStore(n,{table:c().GP,id:i.id});if(s)return await async function(e){const{environment:t,spaceStore:n,spaceViewStore:o,templatePageId:s,botStore:i}=e;if(!n||!o)return;try{I().m({message:B.duplicatingTemplate});const e=await f().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:s,spaceId:(0,l().e)(void 0)},shallow:!1},headers:(0,r().WS)({recordId:s})});if("failed"===e.type)return;const c=a().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:d}=await(0,v().nd)(),{performResult:u}=M().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const r=d({environment:t,recordMap:c,copyPageId:s,isPrivate:!0,spaceStore:n,spaceViewStore:o,transaction:e,allowCopyExternalObjectInstances:!1}),a=o.getPrivatePageIds();a.length>0&&P().zv({store:o,data:{private_pages:[r.id,...a]},transaction:e});const l=(0,y().Ws)({botStore:i,addPermission:!0});return A().zP({environment:t,store:r,permissionItems:[l],transaction:e}),r}});return u}catch(c){w().D6({label:g().A.formatMessage(B.duplicatingTemplateError)})}finally{I().V()}}({environment:t,templatePageId:s,botStore:u,spaceStore:n,spaceViewStore:o});j({environment:t,currentSpaceStore:n,botStore:u,pages:d,addPermission:!0})}},143779:(e,t,n)=>{n.d(t,{U:()=>v,W:()=>h});n(242343);var r=()=>n(237385),o=()=>n(803290),s=()=>n(688508),a=()=>n(653998),i=()=>n(366247),c=()=>n(907721),l=()=>n(931085),d=()=>n(397791),u=()=>n(103151),m=()=>n(24071),p=n(163643);function h(e){const{styles:t}=e,n=(0,r().v3)(),h=(0,a().tz)(),b=(0,o().K8)((()=>{const{RouterStore:e}=n;return e.state.route}),[n]),g=(0,i().U)("marketplace_sidebar_option_click");return(0,p.jsx)(u().A,{renderTooltip:()=>h.formatMessage(v.templatesMwnTooltip),originGap:6,placement:c().W.Right,render:e=>(0,p.jsx)(l().A,{style:t.sidebarItemButtonStyle,hoveredStyle:t.buttonHoveredStyle,onClick:g,...e,children:(0,p.jsx)(m().A,{left:(0,p.jsx)(d().I,{icon:s().templatesIcon,color:"secondary",size:"lg"}),isBottomItem:!0,style:"gallery"===b.name?t.sidebarItemActiveStyle:{},children:h.formatMessage(v.title)})})})}const v=(0,a().YK)({templatesMwnTooltip:{defaultMessage:"Find all the best templates and set-ups built by Notionâ€™s community",id:"sidebar.openTemplatePickerButton.tooltip.mwn"},title:{defaultMessage:"Templates",id:"sidebar.openTemplatePickerButton"}})},146856:(e,t,n)=>{n.d(t,{A:()=>P,B:()=>B});var r=n(242343),o=()=>n(237385),s=()=>n(803290),a=()=>n(836693),i=()=>n(653998),c=()=>n(164186),l=()=>n(84543),d=()=>n(137476),u=()=>n(906230),m=()=>n(633990),p=()=>n(48913),h=()=>n(600648),v=()=>n(639916),b=()=>n(485966),g=()=>n(126451),y=()=>n(273520),S=()=>n(397791),f=()=>n(367859),I=()=>n(24071),A=n(163643);const P=function(e){let{store:t,onClick:n,onMouseEnter:a,onMouseLeave:i,buttonStyles:c,isMobile:l}=e;const d=(0,o().v3)(),u=(0,r.useCallback)((e=>(0,A.jsx)(k,{store:t,onClick:n,onMouseEnter:a,onMouseLeave:i,buttonStyles:c,isMobile:l,buttonPopupEvents:e})),[t,n,a,i,c,l]),{device:m,mobileNative:p}=d,v=(0,s().K8)((()=>(null==p?void 0:p.supportsNativeHomeOnPhone())||!1),[p]);return(0,A.jsx)(y().Ay,{popupType:m.isMobile?y().z7.SlideUp:y().z7.Popup,hidesMobileNativeBottomBar:v,preventSlideUpTransition:v,buttonPopupStore:h().A,alignmentToOrigin:y().yP.Start,placementToOrigin:y().sx.Right,originGap:0,onClick:e=>M(e,d),isFullWidthOnMobile:!0,render:()=>(0,A.jsx)(w,{}),preventScaleTransition:!0,renderOrigin:u})};function w(){return(0,s().O$)(b().AppStoreCurrentSpaceStore)?(0,A.jsx)(m().V2,{}):null}function M(e,t){v().Ay.setState({...v().Ay.state,currentTab:"all_pages"}),function(e){d().vd(e,"open_trash",(0,p().hX)({environment:e}))}(t)}function k(e){let{store:t,buttonPopupEvents:n,onClick:d,onMouseEnter:m,onMouseLeave:v,buttonStyles:b,isMobile:y}=e;const P=(0,o().v3)(),{onClick:w,...k}=(0,r.useMemo)((()=>(0,u().A)(n,{onClick:d,onMouseEnter:m,onMouseLeave:v})),[n,d,m,v]),B=(0,r.useMemo)((()=>t.clone()),[t]),x=(0,s().O$)(h().A),C=(0,p().ab)();return(0,A.jsx)(f().A,{store:B,canDropOnto:!0,onSelectableDrop:e=>function(e,t){const{droppedStores:n,duplicate:r}=e;r||l().createAndCommit({userAction:"SidebarTrashButton.handleDrop",environment:t,canUndo:!0,perform:e=>{c().ZL({environment:t,blocks:n,transaction:e})}})}(e,P),analyticsName:"sidebar_trash",shouldShowDropZone:!0,children:(0,A.jsx)(g().A,{...k,style:{...C.baseSidebarItem,...x.open&&C.currentSelectedSidebarItem},hoveredStyle:null==b?void 0:b.hoveredStyle,onClick:w||(e=>M(0,P)),mobileFeedback:y,children:(0,A.jsx)(I().A,{left:(0,A.jsx)(S().I,{icon:a().trashIcon,color:"secondary",size:"lg"}),disableMobileBorder:!0,isBottomItem:!0,children:(0,A.jsx)(i().sA,{defaultMessage:"Trash",id:"sidebarTrashButton.text"})})})})}function B(e){const{buttonStyles:t,isMobile:n,...r}=e,o=(0,p().ab)();return(0,A.jsx)(g().A,{...r,style:{...o.baseSidebarItem},hoveredStyle:null==t?void 0:t.hoveredStyle,mobileFeedback:n,children:(0,A.jsx)(I().A,{left:(0,A.jsx)(S().I,{icon:a().trashIcon,color:"secondary",size:"lg"}),disableMobileBorder:!0,isBottomItem:!0,children:(0,A.jsx)(i().sA,{defaultMessage:"Trash",id:"sidebarTrashButton.text"})})})}},151216:(e,t,n)=>{n.d(t,{A:()=>c});n(242343);var r=()=>n(174114),o=()=>n(209718),s=()=>n(653998),a=()=>n(77993),i=n(163643);const c=function(e){let{hasActivePlan:t}=e;const r=(0,n(237385).v3)(),o=t?(0,i.jsx)(s().sA,{id:"upgradeMobileButton.manageButton.label",defaultMessage:"Manage Plan"}):(0,i.jsx)(s().sA,{id:"upgradeMobileButton.upgradeButton.label",defaultMessage:"Upgrade Plan"});return(0,i.jsx)(n(126451).A,{mobileFeedback:!0,onClick:l(r),children:(0,i.jsx)(n(24071).A,{left:(0,i.jsx)(d,{}),disableMobileBorder:!0,children:o})})};function l(e){return()=>{const{mobileNative:t}=e;t&&t.openUpgradeModal({spaceId:a().LU(),from:"mobile_sidebar",showActivePlan:!0})}}function d(){const e=(0,r().DP)();return(0,o().H)({fill:e.mediumIconColor,width:16})}},153642:(e,t,n)=>{n.d(t,{V:()=>s});var r=()=>n(803290),o=()=>n(485966);function s(){return(0,r().K8)((()=>{const{currentSpaceStore:e}=o().default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())??void 0}),[])}},209718:(e,t,n)=>{n.d(t,{H:()=>o});n(242343);var r=n(163643);const o=(0,n(680369).wt)("settingsUpgradeFilled",{viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M10 19c4.935 0 9.009-4.073 9.009-9 0-4.926-4.082-9-9.018-9C5.065 1 1 5.074 1 10c0 4.927 4.074 9 9 9zm0-4.422c-.47 0-.818-.33-.818-.8v-4.23l.087-1.863-.81 1.01-1 1.053a.762.762 0 01-.558.235c-.435 0-.757-.314-.757-.74 0-.218.07-.392.218-.549l2.994-3.029c.2-.217.4-.313.644-.313.261 0 .461.104.662.313l2.976 3.03a.73.73 0 01.227.548c0 .426-.322.74-.758.74a.73.73 0 01-.557-.235l-.992-1.045-.818-1.027.087 1.871v4.23c0 .47-.348.801-.827.801z"})})},366247:(e,t,n)=>{n.d(t,{U:()=>d});var r=n(242343),o=()=>n(237385),s=()=>n(758611),a=()=>n(865226),i=()=>n(119186),c=()=>n(137476),l=()=>n(105373);function d(e,t){const n=(0,o().v3)(),{isPhone:d}=(0,o().Y0)(),u=(0,r.useContext)(i().e);return(0,r.useCallback)((r=>{if((0,c().u4)({environment:n,event:{eventName:e,eventProperties:{}}}),d)null==u||u(),a().oo({environment:n,url:"/nativetab/templates",redirect:!0});else{const e="click"===r.type&&(r.metaKey||r.ctrlKey);(null==t?void 0:t.forceOpenInNewTab)||e?a().oo({environment:n,url:s().JZ.marketplace,openInNew:"tab",makeTabActive:!e&&n.device.isDesktop}):(0,l().P)({environment:n})}}),[n,e,t,d,u])}},387643:(e,t,n)=>{n.r(t),n.d(t,{ENGLISH_PERSONAL_PRONOUNS:()=>Ce,TEST_ONLY__getVisibleSpaceUserIds:()=>Te,checkIsTrashEmpty:()=>pe,getLocalCacheFromAppState:()=>oe,isPersonalPronoun:()=>xe,searchActorsById:()=>Ne,searchCollections:()=>he,searchCollectionsWithRecents:()=>ve,searchEmailUser:()=>Ue,searchInstallableIntegrations:()=>Ie,searchLocalNavigableBlocks:()=>be,searchMentionablePages:()=>Ee,searchPageIds:()=>ae,searchPageIdsInAncestor:()=>ue,searchPagesInAncestor:()=>de,searchPagesInCollection:()=>ie,searchPagesInSpace:()=>se,searchPagesWithParent:()=>ce,searchPublicPages:()=>Re,searchSpaceActorIds:()=>qe,searchSpaceActors:()=>_e,searchSpaceBots:()=>ye,searchSpaceGroups:()=>ge,searchSpaceUsers:()=>Me,searchTeams:()=>Ve,searchTrashPages:()=>me,searchUsers:()=>Pe,searchUsersByNameWithNoSpaces:()=>we,searchVisibleSpaceUsers:()=>ke});n(362833),n(333225),n(494367),n(516262),n(573119),n(240480),n(950443),n(619601),n(725707),n(491955),n(500234),n(324989),n(403517);var r=n.n(n(567012)),o=()=>n(466003),s=()=>n(599932),a=()=>n(706788),i=()=>n(502140),c=()=>n(769884),l=()=>n(673447),d=()=>n(446588),u=()=>n(220574),m=()=>n(545250),p=()=>n(145017),h=()=>n(518797),v=()=>n(21164),b=()=>n(528762),g=()=>n(409211),y=()=>n(32194),S=()=>n(294997),f=()=>n(34662),I=()=>n(14931),A=()=>n(188877),P=()=>n(975392),w=()=>n(23371),M=()=>n(3311),k=()=>n(204132),B=()=>n(76394),x=()=>n(141666),C=()=>n(818369),T=()=>n(129243),_=()=>n(855225),q=()=>n(927685),U=()=>n(137476),N=()=>n(782422),E=()=>n(307542),j=()=>n(378219),R=()=>n(352723),V=()=>n(646591),O=()=>n(36746),z=()=>n(591130),F=()=>n(196387),W=()=>n(520969),D=()=>n(485966),L=()=>n(802955),H=()=>n(736953),G=()=>n(985532),K=()=>n(836331),Q=()=>n(761079),X=()=>n(271932),Y=()=>n(614300),$=()=>n(413871),J=()=>n(472951),Z=()=>n(104838),ee=()=>n(111826),te=()=>n(305043),ne=()=>n(723969),re=()=>n(867834);async function oe(e){const{currentSpaceStore:t,currentSpaceViewStore:n}=D().default.state;if(!t)return;return K().default.checkGate({gateName:"search_use_local_search_cache"})?(X().A.state.localSearchableBlocksCache||await X().A.waitUntil((()=>Boolean(X().A.state.localSearchableBlocksCache))),X().A.state.localSearchableBlocksCache):await(0,re().h)({environment:e,currentSpaceStore:t,currentSpaceViewStore:n})}async function se(e){const{environment:t,query:n,limit:r,currentPageId:o,searchSessionId:s,searchSessionFlowNumber:a,recentlyMentionedPageIds:i,spaceId:c,requireEditPermissions:l,excludeTemplates:d,source:m,boostRecentlyViewedPages:p,ignoresHighlight:h,filterOverrides:v,spaceStore:b}=e,g={results:[],recordMap:u().RecordMapWithRole.create().toJson(),total:0,trackEventProperties:void 0};if(!b)return g;const S=await oe(t),f=y().N2({isDeletedOnly:!1,navigableBlockContentOnly:!0,excludeTemplates:d,requireEditPermissions:l||void 0,...v}),I={field:"relevance"};if(!n&&S){const e=(0,ne().k)({query:{query:{text:n,filters:f,sort:I},limit:r},localCachedPages:S,userId:t.currentUser.id,environment:t});return e||g}const A=await C().callApi({eventName:"search",environment:t,data:{type:y().Vz.BlocksInSpace,query:n,spaceId:c,currentPageId:o,searchSessionId:s,searchSessionFlowNumber:a,recentlyMentionedPageIds:i,limit:r,filters:f,sort:I,source:m,recentPagesForBoosting:p?(0,V().cs)(Q().A.getWithoutSubscribing(c)):void 0,ignoresHighlight:h}});if("failed"===A.type)throw A.error;return A.data}async function ae(e){const t=await se(e);return{results:t.results.map((e=>e.id)),recordMap:t.recordMap}}async function ie(e){const{environment:t,query:n,collectionId:r,limit:o,spaceId:s,excludeTemplates:a,source:i,includePublicPagesWithoutExplicitAccess:c,boostRecentlyViewedPages:l,ignoresHighlight:d}=e,u=new Array,m=await oe(t),p=y().N2({isDeletedOnly:!1,navigableBlockContentOnly:!0,includePublicPagesWithoutExplicitAccess:c,excludeTemplates:a}),h={field:"relevance"},b=C().callApi({eventName:"search",environment:t,data:{type:y().Vz.BlocksInCollection,query:n,spaceId:s,collectionId:r,limit:o,filters:p,sort:h,source:i,recentPagesForBoosting:l?(0,V().cs)(Q().A.getWithoutSubscribing(s)):void 0,ignoresHighlight:d}});if(m){const e={table:v().Vl,id:r,spaceId:s},a=new($().md)(t,e);await a.load();const i=(0,ne().k)({query:{query:{text:n,filters:a.isPageTreeCollection()?{...p,ancestors:[r]}:{...p,parentId:r},sort:h},limit:o},localCachedPages:m,userId:t.currentUser.id,environment:t});i&&u.push(...i.results)}const g=await b;if("failed"===g.type){if(0===u.length)throw g.error}else{let e=g.data.results;n||(e=O().Fj({sort:h,batchSize:o,currentUserId:t.currentUser.id,unsorted:e})),u.push(...e)}return{results:P().oE(P().sb(u.map((e=>e.id))))}}async function ce(e){const{environment:t,query:n,parentId:r,limit:o,spaceId:s,excludeTemplates:a,source:i,includePublicPagesWithoutExplicitAccess:c,boostRecentlyViewedPages:l,ignoresHighlight:d}=e,[u,m]=await Promise.all([C().callApi({eventName:"search",environment:t,data:{type:y().Vz.BlocksInParent,query:n,spaceId:s,parentId:r,limit:o,filters:y().N2({isDeletedOnly:!1,navigableBlockContentOnly:!0,includePublicPagesWithoutExplicitAccess:c,excludeTemplates:a}),sort:{field:"relevance"},source:i,recentPagesForBoosting:l?(0,V().cs)(Q().A.getWithoutSubscribing(s)):void 0,ignoresHighlight:d}}),le(e)]);if("failed"===u.type)throw u.error;return{results:P().oE(P().sb([m,...u.data.results.map((e=>e.id))]))}}async function le(e){const{environment:t,query:n,parentId:r,spaceId:o}=e,s=(0,m().parseRoute)({url:n,baseUrl:q().A.domainBaseUrl,publicDomainName:q().A.publicDomainName,isMobile:t.device.isMobile,protocol:q().A.protocol,currentUrl:window.location.href}),a="page"===s.name?s.peekViewBlockId||s.blockId:void 0,i=((0,M().c_)(n)?(0,M().np)(n):void 0)||a;if(i){const e={table:p().ev,id:i},n=new($().Bv)(t,e);await n.load();const s=n.id,a=n.getParentId(),c=n.getSpaceId();if(a===r&&c===o)return s}}async function de(e){const{environment:t,query:n,ancestorId:r,limit:o,excludeTemplates:s,source:a,currentPageId:i,searchSessionId:c,searchSessionFlowNumber:l,recentlyMentionedPageIds:d,ignoresHighlight:u,includePublicPagesWithoutExplicitAccess:m,spaceId:p}=e,h=await C().callApi({eventName:"search",environment:t,data:{type:y().Vz.BlocksInAncestor,query:n,ancestorId:r,filters:y().N2({navigableBlockContentOnly:!0,excludeTemplates:s,includePublicPagesWithoutExplicitAccess:m}),sort:{field:"relevance"},limit:o,source:a,spaceId:p,currentPageId:i,searchSessionId:c,searchSessionFlowNumber:l,recentlyMentionedPageIds:d,ignoresHighlight:u}});if("failed"===h.type)throw h.error;return h.data}async function ue(e){return{results:(await de(e)).results.map((e=>e.id))}}async function me(e){const{environment:t,query:n,limit:r,spaceId:o}=e,s=0===n.trim().length?{field:"lastEdited",direction:"desc"}:{field:"relevance"},a={query:n,filters:y().N2({isDeletedOnly:!0,navigableBlockContentOnly:!0,excludeTemplates:!1,editedBy:e.editedByIds||[],ancestors:e.ancestorIds||[],inTeams:e.teamspaceIds||[]}),sort:s,limit:r,spaceId:o,source:"trash"},i=C().callApi({eventName:"search",environment:t,data:{type:y().Vz.BlocksInSpace,...a}}),c=await i;if("failed"===c.type)throw c.error;{const{results:e,recordMap:t,total:n}=c.data;return{results:e.map((e=>e.id)),recordMap:u().RecordMapWithRole.create(t),endOfResultsReached:n===e.length}}}async function pe(e){const{currentSpaceStore:t,currentUserStore:n}=D().default.state;if(!t||!n)return!1;return 0===(await me({environment:e,query:"",limit:1,spaceId:t.id,ancestorIds:[],editedByIds:[],teamspaceIds:[]})).results.length}async function he(e,t){const{query:n,limit:r,source:o,requireEditPermissions:s,databaseType:a,spaceStore:i,searchSessionId:c}=t;if(!i)return{results:[],total:0};const l=i.id,[d,u]=await Promise.all([Oe(e,{...t,spaceId:l,requireEditPermissions:s,databaseType:a,parentStore:i}),C().callApi({eventName:"search",environment:e,data:{type:y().Vz.CollectionsInSpace,query:n,spaceId:l,limit:r,filters:{...y().N2({excludeTemplates:!0,requireEditPermissions:s,databaseType:a})},sort:{field:"relevance"},source:o,recentPagesForBoosting:(0,V().cs)(Q().A.get(l)),searchSessionId:c}})]),m=P().KC("success"===u.type?P().oE(u.data.results.map((e=>e.collectionId))):[],d).slice(0,r);return{results:m,total:"success"===u.type?u.data.total:m.length}}async function ve(e){const{environment:t,collectionViewBlockStore:n,spaceStore:r,parentStore:o,query:s,limit:a,requireEditPermissions:i,databaseType:c,searchSessionId:l}=e;let d=[],u=0;if(!s){const e=t.currentUser.id;r&&(d=[...(0,_().F)({currentUserId:e,spaceId:r.id}).map((e=>$().md.createChildStore(o,{table:v().Vl,id:e})))]),d=[...P().oE(null==n?void 0:n.getCollectionViewStores().map((e=>e.getCollectionStore()))),...d],c&&(d=d.filter((e=>{const t=e.getDatabaseType();return!!t&&c.includes(t)}))),d=P().hS(d,(e=>e.id)).filter((e=>!i||e.canEdit()))}const m=await he(t,{query:s,limit:a,source:"collection_settings_source",requireEditPermissions:i,databaseType:c,spaceStore:r,searchSessionId:l});return d=[...d,...m.results.map((e=>$().md.createChildStore(o,{table:v().Vl,id:e})))],u=m.total,d=d.filter((e=>!(0,j().ze)(e)&&e.canRead())),await Promise.all(d.map((async e=>{await e.load()}))),{results:P().hS(d,(e=>e.id)).slice(0,a).map((e=>e.id)),total:u}}async function be(e){const{environment:t,searchQuery:n,blockTypes:r,currentSpaceStore:o,currentSpaceViewStore:s,limit:a,parentId:i}=e,c=await(0,re().h)({environment:t,currentSpaceStore:o,currentSpaceViewStore:s}),l={query:{text:n,filters:(0,y().N2)({requireEditPermissions:!1,isDeletedOnly:!1,excludeTemplates:!0,navigableBlockContentOnly:!0,blockTypes:r,parentId:i}),sort:{field:"relevance"}},limit:a},d=(0,ne().r)({query:l,localCachedPages:c,parentStore:o,isOnline:L().A.state.online,environment:t,shouldLimitLocalResultsWhenOnline:!1,applyScoreThresholdWhenOnline:!0,canUseLtr:!1});return d&&k().Q.isSuccess(d)?d.value.results.filter((e=>e.store.pathIsAccessibleAndAlive())):[]}function ge(e){const{query:t,intl:n}=e,r=H().A.state.permissionGroupsAndMemberCounts.map((e=>e.group));if(0===r.length)return[];return t?(0,A().Ay)(t,r,(e=>(0,z().Pf)({intl:n,groupName:e.name})),{normalizeFuzzyScore:!0}):r}async function ye(e){const{query:t,limit:n}=e,{currentSpaceStore:r}=D().default.state;if(!r)return[];return fe({parentStore:r,query:t,botIds:await Se(e)}).slice(0,n)}async function Se(e){const{environment:t}=e,{currentSpaceStore:n}=D().default.state;if(!n)return[];const r=n.id,o=await T().Ju({environment:t,table:b().NX,id:r,type:"guest"});return P().sb(o.botIds)}function fe(e){const{parentStore:t,query:n,botIds:r}=e,s=P().oE(r.map((e=>{const n=t.table===b().NX?t.id:void 0;return(0,$().Oo)(t,{table:h().GP,id:e,spaceId:n}).getValue()})));return n?(0,A().Ay)(n,s,o().tb):s}async function Ie(e){const{query:t,environment:n,spaceId:r,botSettings:o}=e;if(!r)return[];const s=await C().callApi({eventName:"searchIntegrations",environment:n,data:{query:t}});if("success"===s.type){const e=s.data.integrationIds,t=o&&o.integration_approval_statuses?Object.keys(o.integration_approval_statuses):[],n=Boolean(null==o?void 0:o.integration_restrictions),r=Boolean("approved_or_built_by_notion"===(null==o?void 0:o.integration_restrictions));return n?e.filter((e=>r?t.includes(e)||(0,a().CX)({integrationId:e,env:"production"}):t.includes(e))):e}if("failed"===s.type)throw s.error;(0,B().HB)(s)}const Ae=new Set(["gmail.com","yahoo.com","hotmail.com","outlook.com","icloud.com","aol.com"]);async function Pe(e){var t;let{environment:n,parentStore:r,query:o,userIds:a,minFuzzyScore:c,placeSelfFirst:l}=e;const d=F().default.mark("user_search_latency"),u=K().default.checkGate({gateName:"search_batch_load_users"}),m=w().lX(a,u?300:Math.max(a.length,1),(async e=>{const t=$().LU.createChildStore(r,{table:g().oo,id:e});return await t.load(),t.getValue()}));(await(0,w().nQ)(1e4,[m])).timeout&&(i().log({level:"error",from:"searchActions.searchUsers",type:"UserStoreLoadTimeoutV1",error:{message:"The UserStore.load()'s took longer than 10 seconds"},data:{searchedUserIdCount:a.length,queryLength:o.length,parentStoreLoaded:r.isReady(),documentVisibilityState:document.visibilityState}}),(0,U().u4)({environment:n,event:{eventName:"user_search_timeout",eventProperties:{searchedUserIdCount:a.length,queryLength:o.length,parentStoreLoaded:r.isReady(),documentVisibilityState:document.visibilityState}}}));const p=P().oE(await m);let h;const v=null===(t=D().default.state.currentUserStore)||void 0===t?void 0:t.userId;if(l&&v){const e=p.findIndex((e=>v===e.id));e>-1&&(h=p[e],p.splice(e,1))}const b=J().k.state??{},y=Math.max(...Object.values(b));function S(e){var t;return e===(null===(t=D().default.state.currentUserRootStore)||void 0===t?void 0:t.userId)?y+1e-5:b[e]??0}const f=P().Im(b)?p:p.sort(((e,t)=>{const n=S(e.id);return S(t.id)-n})),M=new Set(r.getEmailDomains()),k=o?(0,A().Ay)(o,f,I().T2,{minThreshold:c,getSortScore:e=>{const{original:t,score:n}=e,r=t.email&&(0,s().zN)(t.email),o=h&&(0,s().zN)(h.email),a=r&&M.has(r),i=o===r,c=o&&Ae.has(o);return n*(a||i&&!c?-2:-1)}}):p;return F().default.measure(d,{environment:n}),h?[h,...k]:k}async function we(e){const{environment:t,query:n,membersOnly:r,shouldUseEdgeCacheRollout:o}=e;if(o&&G().A.state.shouldUseEdgeCache){const e=D().default.state.currentSpaceStore;if(!e)return[];const o=await C().callApi({eventName:"listUsers",environment:t,data:{cursor:void 0,membershipFilter:r?"members":void 0,limit:1,uniqueNameWithoutSpaces:n,spaceId:e.id}});if("success"!==o.type||0===o.data.users.length)return[];const s=$().LU.createChildStore(e,{table:g().oo,id:o.data.users[0].id});await s.load();const a=s.getModel();return a?[a]:[]}return(await ke({environment:t,query:n,membersOnly:r})).map((e=>c().Bj6.fromValue(g().oo,e)))}async function Me(e){return e.shouldUseEdgeCacheRollout&&G().A.state.shouldUseEdgeCache?async function(e){const{environment:t,membersOnly:n,minFuzzyScore:r=1e3,placeSelfFirst:o,limit:s}=e,{currentSpaceStore:a,mainEditorCurrentBlockStore:i,currentUserStore:c}=D().default.state;if(!a)return[];const l=e.query.startsWith("@")?e.query.slice(1):e.query,u=J().k.getSortedUserIds().slice(0,100),m=i&&!n?(0,R().i0)(i).flatMap((e=>{let{permissionItem:t}=e;return(0,d().B2)(t)?[t.user_id]:[]})):[],p=await Pe({environment:e.environment,parentStore:a,query:l,userIds:P().sb([...P().oE([null==c?void 0:c.userId]),...u,...m]),minFuzzyScore:r,placeSelfFirst:o});if(s&&p.length>=s)return p.slice(0,s);const h=await C().callApi({eventName:"listUsers",environment:t,data:{cursor:void 0,membershipFilter:n?"members":void 0,limit:s?s-p.length:100,query:l,spaceId:a.id}});if("success"!==h.type||0===h.data.users.length)return p;const v=h.data.users.sort(((e,t)=>{var n,r;const o=(null===(n=J().k.state)||void 0===n?void 0:n[e.id])??0;return((null===(r=J().k.state)||void 0===r?void 0:r[t.id])??0)-o})),b=await(0,w().lX)(v,v.length,(async e=>{const t=$().LU.createChildStore(a,{table:g().oo,id:e.id});return await t.load(),t.getValue()}));return P().hS([...p,...P().oE(b)],(e=>e.id))}(e):ke(e)}async function ke(e){const{currentSpaceStore:t}=D().default.state;if(!t)return[];const n=e.query.startsWith("@")?e.query.slice(1):e.query,r=await Be(e);return(await Pe({environment:e.environment,parentStore:t,query:n,userIds:r,minFuzzyScore:e.minFuzzyScore,placeSelfFirst:e.placeSelfFirst})).slice(0,e.limit)}async function Be(e){const{environment:t,membersOnly:n}=e,{currentSpaceStore:r}=D().default.state;if(!r)return[];await Z().$D({environment:t,spaceId:r.id});const o=te().subscriptionDataStoreInstance.state;if(!o)return[];const s=(0,ee().Be)(o).filter((e=>!(n&&!(0,d().DH)(e.role)))),{mainEditorCurrentBlockStore:a,currentUserStore:i}=D().default.state,c=a&&!n?(0,R().i0)(a).flatMap((e=>{let{permissionItem:t}=e;return(0,d().B2)(t)?[t.user_id]:[]})):[],l=(0,E().Qd)()&&a?function(e,t){const n=j().Uo(e);if(n){const e=new Set((0,S().gm)({membership:n.getRawMembership()}));return t.filter((t=>"none"!==t.role||t.isPageGuest||t.isTeamGuest&&e.has(t.userId)))}return t.filter((e=>"none"!==e.role||e.isPageGuest))}(a,s):s,u=l.map((e=>e.userId));return P().sb([...P().oE([null==i?void 0:i.userId]),...c,...u])}function xe(e,t){return!(!t.startsWith("en-")||!Ce.has(e.toLowerCase()))}const Ce=new Set(["me","you","i"]),Te=Be;async function _e(e){const{query:t}=e,[n,r]=await Promise.all([Me({...e,placeSelfFirst:""===t||xe(t,e.userLocale)}),ye(e)]);return{users:n,bots:r}}async function qe(e){const[t,n]=await Promise.all([Be(e),Se(e)]);return{userIds:t,botIds:n}}async function Ue(e,t){const n=(0,s().qh)(t);if((0,s().DT)(n)&&n){const t=await C().callApi({eventName:"findUser",environment:e,data:{email:n}});if("failed"===t.type)throw t.error;const r=t.data;return r.value?{user:r.value.value}:{email:n}}return{}}async function Ne(e){const{query:t,userIds:n,botIds:r,store:o,environment:s}=e;if(K().default.checkGate({gateName:"dont_load_users"}))return{users:[],bots:[]};let a=o;if(!a){const{currentSpaceStore:e}=D().default.state;if(!e)return{users:[],bots:[]};a=e}return{users:await Pe({environment:s,parentStore:a,query:t,userIds:n}),bots:fe({parentStore:a,query:t,botIds:r})}}async function Ee(e){const{nearBlock:t,environment:n,query:r,source:o,searchSessionId:s,searchSessionFlowNumber:a}=e,{currentSpaceStore:i}=D().default.state,c=(0,N().s0)(),l=t&&(0,R().i0)(t).find((e=>{let{permissionItem:t}=e;return(0,d().FP)(t)})),u=Y().A.getMentionedIds(n.currentUser.id);if(i){return je(await se({environment:n,query:r,limit:20,spaceId:i.id,currentPageId:c,searchSessionId:s,searchSessionFlowNumber:a,recentlyMentionedPageIds:u,requireEditPermissions:!1,excludeTemplates:!0,source:o,boostRecentlyViewedPages:!0,ignoresHighlight:!0,spaceStore:i}))}if(l&&l.from.table===p().ev){return je(await de({environment:n,query:r,limit:20,ancestorId:l.from.blockId,excludeTemplates:!0,source:o,currentPageId:c,searchSessionId:s,searchSessionFlowNumber:a,recentlyMentionedPageIds:u,ignoresHighlight:!0}))}return[]}function je(e){const{trackEventProperties:t,results:n}=e,r=(0,x().MU)((0,B().WP)(t).map((e=>{let[t,n]=e;return[`server-${t}`,n]})));return n.map((e=>({...e,serverEventProperties:r})))}async function Re(e){const{environment:t,query:n,source:r,limit:o}=e,{currentSpaceStore:s}=D().default.state;if(!s)return[];return(await se({environment:t,query:n,limit:o||20,spaceId:s.id,requireEditPermissions:!0,excludeTemplates:!0,source:r,boostRecentlyViewedPages:!1,spaceStore:s})).results.filter((e=>{const t=$().Bv.createChildStore(s,{table:p().ev,id:e.id}),n=(0,j().E)(t);return(0,l().ot)(n)}))}async function Ve(e){let{spaceViewStore:t,query:n,teamStores:r}=e;const o=P().oE(await Promise.all(r.map((async e=>(await e.load(),e.getValue()))))),s=t.getTeamsStores(),a=new Set(s.map((e=>e.id)));return n?(0,A().Ay)(n,o,(e=>e.name),{getSortScore:e=>{const{original:t,score:n}=e;return n*(a.has(t.id)?-2:-1)}}):o}function Oe(e,t){const{query:n,limit:o,spaceId:s,requireEditPermissions:a,databaseType:i}=t,c=[];if(o>0){const l=new AbortController;e.defaultRecordCache.inMemoryRecordCache.forEachRecord(e.currentUser.id,(e=>{let{model:u,role:m}=e;if(u.table===v().Vl){const e=u.space_id===s,p=!a||(0,d().p2)(m);if(!e||!p||(0,W().Nh)(u.getParentId()))return;const h=u.getDatabaseType();if(!(!i||h&&i.includes(h)))return;const v=(0,f().q4_)(u.getName());if(!r().test(n,v))return;const b=$().md.createChildStore(t.parentStore,u.pointer),g=j().g7(b);if(!j().yR(g))return;c.push(u.pointer.id),c.length>=o&&l.abort()}}),l.signal)}return c}},389324:(e,t,n)=>{n.r(t),n.d(t,{gearIcon:()=>s,iconDefinition:()=>o});n(242343);var r=n(163643);const o={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M7.29 10c0 1.5 1.22 2.71 2.71 2.71 1.5 0 2.71-1.21 2.71-2.71S11.5 7.29 10 7.29 7.29 8.5 7.29 10m1.25 0c0-.81.66-1.46 1.46-1.46.81 0 1.46.65 1.46 1.46s-.65 1.46-1.46 1.46-1.46-.65-1.46-1.46"}),(0,r.jsx)("path",{d:"M8.49 17.64q.75.15 1.53.15v-.01c.47 0 .94-.04 1.41-.13.26-.05.46-.25.5-.51l.26-1.53.15-.06 1.28.91c.21.14.49.14.71 0 .41-.28.8-.61 1.18-.98.33-.33.63-.7.9-1.09.15-.21.15-.5 0-.71l-.9-1.27.06-.15 1.55-.27c.26-.05.46-.25.51-.5a7.8 7.8 0 0 0 .02-2.94.62.62 0 0 0-.51-.5l-1.53-.26-.06-.15.91-1.28c.14-.21.14-.49 0-.71a7.9 7.9 0 0 0-2.07-2.08.62.62 0 0 0-.71 0l-1.27.9-.15-.06-.27-1.55a.64.64 0 0 0-.5-.51c-.5-.1-1-.15-1.53-.15-.47 0-.95.04-1.41.13-.26.05-.46.25-.5.51l-.26 1.53-.15.06-1.28-.91a.65.65 0 0 0-.71 0 7.9 7.9 0 0 0-2.08 2.07c-.15.21-.15.5 0 .71l.9 1.27-.06.15-1.55.27c-.26.05-.46.25-.51.5-.1.5-.15 1-.15 1.53 0 .47.04.95.13 1.41.05.26.25.46.51.5l1.53.26.06.15-.91 1.28c-.14.21-.15.49 0 .71.29.42.61.81.98 1.18.34.34.7.65 1.09.91.21.15.5.15.71 0l1.27-.9.15.06.27 1.55c.05.26.25.46.5.51m2.29-1.15c-.53.07-1.09.07-1.63 0l-.25-1.47a.62.62 0 0 0-.42-.49 6 6 0 0 1-.68-.28.63.63 0 0 0-.65.04l-1.2.85a6.8 6.8 0 0 1-1.14-1.16l.86-1.21c.13-.19.15-.43.05-.64-.11-.22-.21-.45-.28-.68a.62.62 0 0 0-.49-.43l-1.45-.25a6.7 6.7 0 0 1 0-1.63l1.47-.25c.23-.04.42-.2.49-.42.07-.23.17-.46.28-.68.11-.21.09-.46-.04-.65l-.85-1.2A6.8 6.8 0 0 1 6.01 4.8l1.21.86c.19.13.43.15.64.05.22-.11.45-.21.68-.28s.39-.26.43-.49l.25-1.45c.53-.07 1.09-.07 1.63 0l.25 1.47c.04.23.2.42.42.49.23.07.46.17.68.28.21.11.46.09.65-.04l1.2-.85A6.8 6.8 0 0 1 15.19 6l-.86 1.21c-.13.19-.15.43-.05.64.11.22.21.45.28.68s.26.39.49.43l1.45.25a6.7 6.7 0 0 1 0 1.63l-1.47.25c-.23.04-.42.2-.49.42-.07.23-.17.46-.28.68-.11.21-.09.46.04.65l.85 1.2a6.8 6.8 0 0 1-1.16 1.14l-1.21-.86a.64.64 0 0 0-.64-.05c-.22.11-.45.21-.68.28s-.39.26-.43.49z"})]})},s=(0,n(680369).wt)("gear",o)},472951:(e,t,n)=>{n.d(t,{k:()=>o});n(403517);class r extends(()=>n(129044))().default{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[n,r]=e,[o,s]=t;return s-r})).map((e=>{let[t,n]=e;return t}))}}const o=new r;(0,n(996094).exposeDebugValue)("UserSimilarityStore",o)},490069:(e,t,n)=>{n.r(t),n.d(t,{SidebarBottomActions:()=>x});var r=n(242343),o=()=>n(237385),s=()=>n(803290),a=()=>n(174114),i=()=>n(653998),c=()=>n(136239),l=()=>n(813235),d=()=>n(907721),u=()=>n(485966),m=()=>n(670682),p=()=>n(335142),h=()=>n(798138),v=()=>n(162901),b=()=>n(658388),g=()=>n(795610),y=()=>n(995625),S=()=>n(548694),f=()=>n(387643),I=()=>n(639916);var A=()=>n(103151),P=()=>n(541709),w=()=>n(146856),M=()=>n(143779),k=()=>n(151216),B=n(163643);function x(){const e=(0,o().v3)(),t=(0,s().O$)(u().AppStoreMainEditorCurrentBlockStore),n=(0,s().O$)(u().AppStoreCurrentSpaceStore),x=(0,m().f_)({spaceId:null==n?void 0:n.id}),C=(0,a().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:1},sidebarItemButtonStyle:{...(0,c().sQ)({isMobile:!1})},sidebarItemHoveredStyle:{background:e.sidebarItemSelectedBackground},sidebarItemActiveStyle:{...(0,c().sQ)({isMobile:!1}),background:e.sidebarItemSelectedBackground,color:e.text.primary}})),[]),{isTablet:T}=(0,o().Y0)(),_=(0,l().p)(),q=function(e){let{environment:t}=e;const n=(0,s().K8)((()=>(0,S().s7)(t)),[t]),{isDesktop:a}=(0,o().Y0)(),i=(0,s().K8)((()=>I().Ay.state.isTrashEmpty),[]),c=(0,s().K8)((()=>(0,g().f1)({environment:t,experimentId:"adoption_hide_features_v2",variant:h().T.trash,isUserWorkspaceOwner:n,isDesktop:a})),[t,n,a]),l=(0,s().K8)((()=>{var e;const n=(0,y().R$)(t);return(null==n||null===(e=n.getSettings())||void 0===e?void 0:e.adoption_sidebar_trash)??!1}),[t]),[{value:d}]=(0,v().Yb)((async()=>!(!l&&c)||!(await(0,f().checkIsTrashEmpty)(t))),[t,l,c]);return(0,r.useEffect)((()=>{!c||l||i||b().hT(t)}),[c,l,i,t]),!c||!i||d||l}({environment:e}),U=(0,h().I)({environment:e,section:"templates"}),N=(0,h().I)({environment:e,section:"settings"});return(0,B.jsxs)("div",{style:C.container,children:[_&&(0,B.jsx)(k().A,{hasActivePlan:(0,m().UU)(x)}),N&&(0,B.jsx)(P().A,{buttonStyles:{hoveredStyle:C.sidebarItemHoveredStyle}}),!T&&U&&(0,B.jsx)(p().n,{step:"explore_templates",children:(0,B.jsx)(M().W,{styles:{sidebarItemButtonStyle:C.sidebarItemButtonStyle,buttonHoveredStyle:C.sidebarItemHoveredStyle,sidebarItemActiveStyle:C.sidebarItemActiveStyle}})}),q?t?(0,B.jsx)(A().A,{renderTooltip:()=>(0,B.jsx)(i().sA,{defaultMessage:"Restore deleted pages.",id:"sidebar.openTrashModalButton.tooltip"}),originGap:6,placement:d().W.Right,render:e=>(0,B.jsx)(w().A,{store:t,buttonStyles:{hoveredStyle:C.sidebarItemHoveredStyle},isMobile:!1,...e})}):(0,B.jsx)(A().A,{renderTooltip:()=>(0,B.jsx)(i().sA,{defaultMessage:"Unable to use trash from this view.",id:"sidebar.openTrashModalButton.tooltip.disabled"}),originGap:6,placement:d().W.Right,render:e=>(0,B.jsx)(w().B,{buttonStyles:{hoveredStyle:C.sidebarItemHoveredStyle},isMobile:!1,...e})}):null]})}},541709:(e,t,n)=>{n.d(t,{A:()=>i,O:()=>a});var r=n(242343),o=()=>n(653998),s=n(163643);const a=(0,o().YK)({settingsAndMembers:{id:"sidebarSettingsButton.settingsAndMembers",defaultMessage:"Settings & members"},settings:{id:"sidebarSettingsButton.settings",defaultMessage:"Settings"},tooltip:{id:"sidebarSettingsButton.tooltip",defaultMessage:"Manage your account and settings"}}),i=function(e){const{buttonStyles:t}=e,i=(0,o().tz)(),c=i.formatMessage(a.settings),l=(0,n(48913).ab)(),d=(0,r.useCallback)((()=>{n(336519).Ow({openedFrom:"sidebar",currentTab:"user_settings"})}),[]);return(0,s.jsx)(n(103151).A,{renderTooltip:()=>i.formatMessage(a.tooltip),originGap:6,textWrap:!0,placement:n(907721).W.Right,render:e=>(0,s.jsx)(n(126451).A,{...e,onClick:d,style:l.baseSidebarItem,hoveredStyle:null==t?void 0:t.hoveredStyle,children:(0,s.jsx)(n(24071).A,{left:(0,s.jsx)(n(397791).I,{icon:n(389324).gearIcon,color:"secondary",size:"lg"}),children:c})})})}},688508:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>r,templatesIcon:()=>o});n(242343);const r={viewBox:"0 0 20 20",svg:(0,n(163643).jsx)("path",{d:"M7.682 5.716V4.182c0-.858.7-1.557 1.557-1.557h5.823c.858 0 1.557.7 1.557 1.557v5.59a1.56 1.56 0 0 1-1.093 1.486l2.185 3.786c.589 1.038-.154 2.331-1.354 2.331H9.38c-1.138 0-1.895-1.18-1.421-2.201q-.513.113-1.057.114a4.81 4.81 0 0 1-4.818-4.818 4.812 4.812 0 0 1 5.6-4.754M9.24 3.875a.31.31 0 0 0-.307.307v5.6a.3.3 0 0 0 .298.296h1.66l.622-1.075a.6.6 0 0 1 .073-.103 1.56 1.56 0 0 1 2.638.1l.002.003.62 1.075h.217a.31.31 0 0 0 .307-.306v-5.59a.31.31 0 0 0-.307-.307zm-.01 7.453a1.55 1.55 0 0 1-1.547-1.547V6.99a3.562 3.562 0 0 0-4.35 3.481 3.56 3.56 0 0 0 3.569 3.568 3.54 3.54 0 0 0 2.09-.669l1.178-2.04zm3.914-1.7a.31.31 0 0 0-.54.002 1 1 0 0 1-.057.08L9.11 15.665l-.001.002a.306.306 0 0 0 .27.458h6.978a.31.31 0 0 0 .268-.463z"})},o=(0,n(680369).wt)("templates",r)},813235:(e,t,n)=>{n.d(t,{p:()=>m});var r=()=>n(237385),o=()=>n(803290),s=()=>n(647242),a=()=>n(481148),i=()=>n(819788),c=()=>n(670682),l=()=>n(167532),d=()=>n(153642),u=()=>n(997310);function m(){const e=(0,r().v3)(),t=(0,l().J)(),n=(0,d().V)(),m=(0,u().r)(),p=(0,c().f_)({spaceId:null==m?void 0:m.id});return(0,o().K8)((()=>!!(0,a().mM)({environment:e})&&(!(!p||!t||1!==n)&&((0,i().T)("supportsAiIAP")?(0,c().UU)(p)||!(0,s().Fq)(p):!(0,c().UU)(p)&&!(0,s().Fq)(p)))),[e,p,t,n])}}}]);