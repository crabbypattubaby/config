"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[91325],{78245:(e,t,s)=>{s.d(t,{z:()=>a});s(242343);var i=()=>s(129978),n=s(163643);const o=new(i().O2)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await s.e(79883).then(s.bind(s,824997));return{CollectionItemCover:e}})),a=(0,i()._h)(o,(e=>e.CollectionItemCover),{renderLoading:(e,t)=>{const{coverHeight:i,coverSizeFormat:o,emptyGalleryCoverStyle:a,showEmptyGalleryCover:r}=t;return r?(0,n.jsx)(s(803291).t,{coverHeight:i,coverSizeFormat:o,emptyGalleryCoverStyle:a}):null}})},138598:(e,t,s)=>{s.d(t,{J:()=>n});s(242343);var i=s(163643);const n=(0,s(680369).wt)("blueCircleDot",{viewBox:"0 0 16 16",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("circle",{cx:"8",cy:"8",r:"8",fill:"none",stroke:"#2383E2",children:[(0,i.jsx)("animate",{attributeName:"r",from:"3",to:"8",dur:"1s",begin:"0s",repeatCount:"indefinite"}),(0,i.jsx)("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0s",repeatCount:"indefinite"})]}),(0,i.jsx)("circle",{cx:"8",cy:"8",r:"3",fill:"#2383E2"})]})})},229402:(e,t,s)=>{s.d(t,{A:()=>j});var i=s(242343),n=()=>s(237385),o=()=>s(803290),a=()=>s(174114),r=()=>s(887508),l=()=>s(138598),c=()=>s(145017),d=()=>s(653998),u=()=>s(31448),p=()=>s(356813),g=()=>s(35462),h=()=>s(493124),b=()=>s(432809),m=()=>s(688266),x=()=>s(760034),y=()=>s(33705),S=()=>s(413871),f=s(163643);function j(e){let{spaceStore:t,blockId:s,onClose:i,onUnpublish:a}=e;const r=(0,n().v3)(),l=S().Bv.createChildStore(t,{table:c().ev,id:s}),d=(0,o().K8)((()=>b().dR({store:l,environment:r}).mostPermissivePublicItem),[r,l]);return"none"===d.permissionItem.role?(i(),null):(0,f.jsx)(v,{store:l,mostPermissivePublicItem:d,onClose:i,onUnpublish:a})}function v(e){const{store:t,mostPermissivePublicItem:s,onClose:n,onUnpublish:r}=e,c=(0,o().K8)((()=>"seo"===y().A.state.siteSettingContentType||"embed"===y().A.state.siteSettingContentType),[]),p=(0,i.useCallback)((()=>{x().Bp("initial")}),[]),b=(0,a().IS)((()=>({container:{flex:1,paddingBottom:8},titleContainer:{display:"flex",alignItems:"center",gap:4,padding:20,fontSize:14,lineHeight:1.25,fontWeight:u().Wy.semibold,paddingLeft:c?8:20},publishIcon:{height:16,width:16}})),[c]);return(0,f.jsxs)("div",{style:b.container,children:[(0,f.jsxs)("div",{style:b.titleContainer,children:[c&&(0,f.jsx)(C,{onClick:p}),(0,f.jsx)(g().A,{children:(0,f.jsx)(d().sA,{defaultMessage:"Publish settings",id:"publishSiteSettings.settings.title"})}),(0,l().J)(b.publishIcon),(0,f.jsx)(h().R,{onClick:n})]}),(0,f.jsx)(m().d,{store:t,mostPermissivePublicItem:s,sudoModeStore:void 0,location:"published_site_settings",showManageAllDomains:!1,showAllPublishedSites:!1,onUnpublish:r,shouldAskForConfirmationOnPublish:!0})]})}function C(e){const{onClick:t}=e,s=(0,d().tz)(),i=(0,a().IS)((()=>({topContainer:{display:"flex",alignItems:"center",width:"max-content"},iconButton:{marginRight:6,height:24,width:24},arrowIcon:{height:16,width:16,strokeWidth:u().Wy.semibold}})),[]);return(0,f.jsx)("div",{style:i.topContainer,children:(0,f.jsx)(p().A,{icon:r().v,iconStyle:i.arrowIcon,style:i.iconButton,onClick:t,ariaLabel:s.formatMessage({id:"publishSiteSettings.settings.backbutton.ariaLabel",defaultMessage:"Go back to publish settings."})})})}},382160:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(242343),n=()=>s(907721),o=s(163643);function a(e){let{store:t,...a}=e;const r=(0,i.useCallback)((e=>(0,o.jsx)(s(206363).yf,{store:t,events:e})),[t]);return(0,o.jsx)(s(103151).A,{noStyle:!0,delayThreshold:400,placement:n().W.Bottom,alignment:n().C.Start,renderTooltip:r,...a})}const r=i.memo(a)},688266:(e,t,s)=>{s.d(t,{Js:()=>a,Ns:()=>n,d:()=>o});var i=()=>s(129978);const n={publishSite:new(i().O2)("PublishSite",(async()=>await Promise.all([s.e(9304),s.e(67780),s.e(96933),s.e(52979),s.e(16345)]).then(s.bind(s,883929)))),publishedSiteSettings:new(i().O2)("PublishedSiteSettings",(async()=>await Promise.all([s.e(75134),s.e(9304),s.e(62475),s.e(3151),s.e(98629),s.e(37353),s.e(29151),s.e(16908),s.e(28721),s.e(76181),s.e(90280),s.e(26483),s.e(33813),s.e(81768),s.e(2804),s.e(82850),s.e(69914),s.e(19361),s.e(63327),s.e(50984),s.e(67780),s.e(96933),s.e(22542),s.e(62922),s.e(39301)]).then(s.bind(s,529840))))},o=(0,i()._h)(n.publishedSiteSettings,(e=>e.default)),a=(0,i()._h)(n.publishSite,(e=>e.default))},803291:(e,t,s)=>{s.d(t,{t:()=>o});var i=s(242343),n=s(163643);const o=i.memo((function(e){const{coverHeight:t,coverSizeFormat:i,emptyGalleryCoverStyle:o}=e,a=(0,s(174114).IS)((()=>({container:{height:(0,s(869596).F)(t,i),...o}})),[t,i,o]);return(0,n.jsx)("div",{style:a.container})}))},859407:(e,t,s)=>{s.r(t),s.d(t,{PublicPagesSection:()=>ot});var i=s(242343),n=()=>s(237385),o=()=>s(803290),a=()=>s(162901),r=()=>s(622286),l=(s(610931),s(362833),()=>s(220574)),c=()=>s(145017),d=()=>s(34662),u=()=>s(975392),p=()=>s(23371),g=()=>s(818369),h=()=>s(413871),b=()=>s(129044);class m extends b().default{getInitialState(){return{forms:{},sortAscending:!0,sortColumn:void 0,type:"forms"}}initializeResultsForSpace(e,t){this.state.forms[e]=t,this.emit()}resetSpace(e){this.state.forms[e]=void 0}getDataForSpace(e){return this.state.forms[e]}}const x=new m;class y extends b().default{getInitialState(){return{publicShareLinks:{},sortAscending:!0,sortColumn:void 0,type:"publicShareLinks"}}initializeResultsForSpace(e,t){this.state.publicShareLinks[e]=t,this.emit()}getDataForSpace(e){return this.state.publicShareLinks[e]}getSortedPublicShareLinksForSpace(e,t){const{sortAscending:s,sortColumn:i}=this.state,n=this.state.publicShareLinks[e];if(n)switch(i){case"page":return u().My(n,(e=>d().q4_(e.store.getTitleValue()).toLowerCase()),s?"asc":"desc");case"published-by":return u().My(n,(e=>{const s=e.publishedMetadata.publishedBy,i=s?h().sk.createChildStore(e.store,s):void 0;return null==i?void 0:i.getDisplayName(t).toLowerCase()}),s?"asc":"desc");case"published-date":return u().My(n,(e=>e.publishedMetadata.publishedTime),s?"asc":"desc");default:return n}}resetSpace(e){this.state.publicShareLinks[e]=void 0}}const S=new y;s(725707),s(491955);class f extends b().default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0,type:"sites"}}initializeResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}resetSpace(e){this.state.sites[e]=void 0}getDataForSpace(e){return this.state.sites[e]}unpublishSiteFromSpace(e,t){const s=this.state.sites[e];s&&(this.state.sites[e]=s.filter((e=>e.store.id!==t)),this.emit())}}const j=new f,v=50;async function C(e){const{environment:t,spaceStore:s,store:i,limit:n}=e;if(!s.id)return;const o=i.getDataForSpace(s.id)?0:1500,[a]=await Promise.all([g().callApi({eventName:"getPublicBlocksForUser",environment:t,data:{spaceId:s.id,limit:n||v,fetchPublishedMetadata:!0,type:i.state.type}}),(0,p().wR)(o)]);if("failed"===a.type)throw new Error("Failed to fetch published pages.");if(a.data.recordMap){const e=[],t=l().RecordMapWithRole.create(a.data.recordMap),n=a.data.publishedEdits;for(const{model:i}of t)if(i&&i.table===c().ev){var r;const t=h().Bv.createChildStore(s,{table:c().ev,id:i.id}),o=n[t.id],a=null==o||null===(r=o.authors)||void 0===r?void 0:r[0],l={publishedTime:null==o?void 0:o.timestamp,publishedBy:a};e.push({store:t,publishedMetadata:l})}return i.initializeResultsForSpace(s.id,e),e}}class k extends b().default{getInitialState(){return{view:"landing"}}setTabView(e){this.state.view=e,this.emit()}}const w=new k;var A=()=>s(653998),I=(s(403517),()=>s(174114)),P=()=>s(421338),T=()=>s(96365),M=()=>s(450351),B=()=>s(486826),L=()=>s(712437),R=()=>s(846581),_=()=>s(794484),F=()=>s(273520),D=()=>s(356813),O=()=>s(539048),H=()=>s(907721),W=()=>s(507190),z=()=>s(389324),V=()=>s(870122),U=()=>s(91472),E=()=>s(110975),N=()=>s(535906),$=()=>s(935091),K=()=>s(858023),G=()=>s(397791),Y=()=>s(88271),X=()=>s(103151),J=()=>s(640979),q=()=>s(906230),Q=()=>s(76394),Z=()=>s(29869),ee=()=>s(208897);function te(e){const{settingsTabStore:t,store:s,pageVisitSource:i}=e,n=t.state.type;switch(n){case"forms":return(0,Z().Ay)({store:s,preferPublicLink:!0,pageVisitSource:i});case"sites":return ee().R({store:s,pageVisitSource:i});case"publicShareLinks":return(0,Z().Ay)({store:s,pageVisitSource:i});default:(0,Q().HB)(n)}}var se=s(163643);function ie(e){const{store:t,settingsTabStore:s,parent:i,isSettingsDisabled:a,onOpenSettingsModal:r}=e,l=(0,n().v3)(),c=[{key:"copy",render:e=>(0,se.jsx)(N().A,{...e,icon:(0,se.jsx)(G().I,{icon:W().V}),title:(0,se.jsx)(A().sA,{id:"publicPages.tables.copy",defaultMessage:"Copy link"})}),action:async()=>{const e=te({store:t,settingsTabStore:s,pageVisitSource:L().y8.CopyLink}),n=await U().R.clipboardActions.load();await n.copyString({environment:l,stringValue:e,copiedMessage:n.clipboardMessages.copiedLinkToClipboard}),i.close()}}],d=(0,o().O$)(s).type,u=(0,se.jsx)(A().sA,{id:"publicPages.tables.settings",defaultMessage:"Settings"});"publicShareLinks"!==d&&c.push({key:"view",render:e=>(0,se.jsx)(N().A,{...e,icon:(0,se.jsx)(G().I,{icon:V().globeIcon}),title:(0,se.jsx)(A().sA,{id:"publicPages.tables.view",defaultMessage:"View"})}),action:()=>{const e=te({store:t,settingsTabStore:s,pageVisitSource:L().y8.PublicPageSettings});E().f({environment:l,url:e}),i.close()}});const p=[{key:"settings",render:e=>a?(0,se.jsx)(X().A,{renderTooltip:()=>(0,se.jsx)(A().sA,{id:"publicPages.settingsActions.noEditAccess",defaultMessage:"You do not have access to update the settings for this public page."}),placement:H().W.Bottom,render:t=>(0,se.jsx)(N().A,{...(0,q().A)(t,e),icon:(0,se.jsx)(G().I,{icon:z().gearIcon}),title:u,disabled:a})}):(0,se.jsx)(N().A,{...e,icon:(0,se.jsx)(G().I,{icon:z().gearIcon}),title:u}),action:()=>{r(t.id),i.close()}}];return(0,se.jsx)($().A,{menuType:J().gu.Popup,width:160,children:(0,se.jsx)(K().Ay,{initialFocus:void 0,type:K().Oh.Vertical,sections:[{key:"link",render:e=>(0,se.jsx)(Y().A,{...e}),items:c},{key:"settings",render:e=>(0,se.jsx)(Y().A,{...e,topBorder:!0}),items:p}]})})}var ne=()=>s(229402),oe=()=>s(138598),ae=()=>s(31448),re=()=>s(854466),le=()=>s(35462),ce=()=>s(245388),de=()=>s(432809);function ue(e){const{blockStore:t,onClose:s}=e,i=(0,n().v3)(),a=(0,o().K8)((()=>de().dR({store:t,environment:i})),[i,t]),r=(0,I().IS)((()=>({container:{flex:1,paddingBottom:8},titleContainer:{display:"flex",alignItems:"center",gap:4,padding:20,fontSize:14,lineHeight:1.25,fontWeight:ae().Wy.semibold,paddingLeft:20},publishIcon:{height:16,width:16}})),[]);return(0,se.jsxs)("div",{style:r.container,children:[(0,se.jsxs)("div",{style:r.titleContainer,children:[(0,se.jsx)(le().A,{children:(0,se.jsx)(A().sA,{defaultMessage:"Share settings",id:"publicPages.publicShareLinkSettings.title"})}),(0,oe().J)(r.publishIcon),(0,se.jsx)(ce().Rz,{onClick:s})]}),(0,se.jsx)(re().cN,{store:t,calculatedPermissions:a,permissionItemArgs:{location:"public_pages_settings"}})]})}function pe(e){const{blockStore:t,settingsTabStore:s,onClose:i,spaceStore:n}=e,a=(0,o().O$)(s).type;switch(a){case"sites":return(0,se.jsx)(ne().A,{spaceStore:n,blockId:t.id,onClose:i,onUnpublish:()=>{j.unpublishSiteFromSpace(n.id,t.id)}});case"publicShareLinks":return(0,se.jsx)(ue,{blockStore:t,onClose:i});case"forms":return null;default:(0,Q().HB)(a)}}function ge(e){const t=(0,A().tz)(),s=(0,n().v3)(),{blockStore:o,settingsTabStore:a,isSettingsDisabled:r,spaceStore:l}=e,[c,d]=(0,i.useState)(!1),u=(0,i.useCallback)((e=>{d(!0)}),[d]),p=(0,i.useCallback)((async()=>{d(!1),await C({environment:s,spaceStore:l,store:a})}),[d,s,l,a]),g=(0,I().IS)((()=>({settingButtonIcon:{width:18,height:18}})),[]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(F().Ay,{alignmentToOrigin:H().C.End,renderOrigin:e=>(0,se.jsx)(D().A,{...e,ariaLabel:t.formatMessage({id:"publicPages.tables.settingsEllipsis",defaultMessage:"Settings"}),icon:_().L,iconStyle:g.settingButtonIcon}),popupType:F().z7.Popup,render:e=>(0,se.jsx)(ie,{store:o,settingsTabStore:a,parent:e,isSettingsDisabled:r,onOpenSettingsModal:u})}),(0,se.jsx)(O().s,{isOpen:c,onDismiss:p,areaConstraint:{width:{type:"fixed",length:480}},render:()=>(0,se.jsx)(pe,{blockStore:o,settingsTabStore:a,onClose:p,spaceStore:l})})]})}function he(e){const{text:t}=e,s=(0,I().IS)((e=>({text:{width:"fit-content",maxWidth:"98%",...ae().RC}})),[]);return t?(0,se.jsx)("div",{style:s.text,children:t}):null}var be=()=>s(250122),me=()=>s(333889),xe=()=>s(931085),ye=()=>s(28210),Se=()=>s(709237),fe=()=>s(382160),je=()=>s(330358);function ve(e){const{store:t,style:s,hideIcon:n}=e,a=(0,o().K8)((()=>{if(t)return{icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),url:(0,Z().J8)({store:t,pageVisitSource:L().y8.PublicPageSettings})}}),[t]),r=(0,i.useCallback)((e=>{e.metaKey||je().A.setState({...je().A.state,open:!1})}),[]),l=(0,I().IS)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden",cursor:"default"},emptyPageIcon:{height:18,width:18,fill:e.accentColors.gray[500]},iconContainer:{position:"relative",width:20,height:20,marginRight:4},linkBox:{borderRadius:3,maxWidth:"100%"},linkIcon:{position:"absolute",width:10,height:10,right:0,bottom:0},pageRecordContainer:{display:"flex",alignItems:"center",paddingTop:2,paddingBottom:2,paddingRight:4,paddingLeft:4,...s},pageTitle:{wordBreak:"break-word",borderBottom:`0.05em solid ${e.lightDividerColor}`}})),[s]);if(!t||!a)return null;const c=(0,se.jsxs)("div",{style:l.pageRecordContainer,children:[!n&&(0,se.jsxs)("div",{style:l.iconContainer,children:[a.icon?(0,se.jsx)(ye().B,{icon:a.icon,store:t,disabled:!0,size:16,isEmptyPage:a.isEmptyPage,emojiSize:20}):(0,be().n)(l.emptyPageIcon),(0,me().G)(l.linkIcon)]}),(0,se.jsx)(Se().A,{store:t,style:l.pageTitle})]});return(0,se.jsx)("div",{style:l.container,children:(0,se.jsx)(fe().A,{store:t,render:e=>(0,se.jsx)(xe().A,{href:null==a?void 0:a.url,style:l.linkBox,...(0,q().A)(e,{onClick:r}),children:c})})})}s(875472),s(76509),s(863754);var Ce=()=>s(209684);function ke(e){const{url:t}=e,s=new URL(t),i=`${s.host}${s.pathname}`,o=(0,n().v3)(),a=(0,I().IS)((e=>({copyUrl:{color:e.text.secondary},domainButton:{width:"fit-content",maxWidth:"98%",background:e.lightGrayButtonBackground},domainButtonHover:{background:e.lightGrayButtonHoveredBackground},domainButtonPressed:{background:e.lightGrayButtonPressedBackground},relativeUrl:{color:e.text.tertiary}})),[]);return(0,se.jsx)(X().A,{allowHover:!0,renderTooltip:()=>(0,se.jsxs)(se.Fragment,{children:[t,(0,se.jsx)("div",{style:a.copyUrl,children:(0,se.jsx)(A().sA,{id:"publicPages.publicShareLinks.copyLink",defaultMessage:"Click to copy full URL"})})]}),render:e=>(0,se.jsx)("div",{...e,children:(0,se.jsx)(Ce().p,{onClick:async()=>{const e=await U().R.clipboardActions.load();await e.copyString({environment:o,stringValue:t,copiedMessage:e.clipboardMessages.copiedLinkToClipboard})},style:a.domainButton,size:"xs",hoveredStyle:a.domainButtonHover,pressedStyle:a.domainButtonPressed,children:(0,se.jsxs)("span",{style:{...ae().RC},children:[i,(0,se.jsx)("span",{style:a.relativeUrl,children:"/..."})]})})}),placement:H().W.Bottom})}var we=()=>s(732165),Ae=()=>s(14679);function Ie(e){const{publisher:t,store:s}=e,i=(0,I().IS)((e=>({uiUser:{width:"fit-content",maxWidth:"98%"}})),[]),n=(0,A().tz)(),a=t?h().sk.createChildStore(s,t):void 0,r=(0,o().K8)((()=>null==a?void 0:a.getDisplayName(n)),[a,n]);return a instanceof Ae().L?(0,se.jsx)(we().A,{userStore:a,avatarSize:20,style:i.uiUser}):(0,se.jsx)(he,{text:r})}function Pe(e){const t=(0,A().tz)(),{spaceStore:s,settingsTabStore:i}=e,n=(0,o().K8)((()=>{const e=function(e){const{settingsTabStore:t,spaceId:s,intl:i}=e,{sortAscending:n,sortColumn:o}=t.state,a=t.getDataForSpace(s);if(a)switch(o){case"page":return u().My(a,(e=>d().q4_(e.store.getTitleValue()).toLowerCase()),n?"asc":"desc");case"published-by":return u().My(a,(e=>{const t=e.publishedMetadata.publishedBy,s=t?h().sk.createChildStore(e.store,t):void 0;return null==s?void 0:s.getDisplayName(i).toLowerCase()}),n?"asc":"desc");case"published-date":return u().My(a,(e=>e.publishedMetadata.publishedTime),n?"asc":"desc");default:return a}}({settingsTabStore:i,spaceId:s.id,intl:t});if(!e)return;const n=[];for(const t of e){const{store:e,publishedMetadata:o}=t,a=e.id,r=s.canAdmin(),l=o.publishedTime?(0,R().eV)({value:B().c9.fromMillis(o.publishedTime),preset:"medium"}):"",c=te({store:e,settingsTabStore:i,pageVisitSource:L().y8.CopyLink}),d=[(0,se.jsx)(ve,{store:e},`${a}-public-page-record`),(0,se.jsx)(ke,{url:c},`${a}-table-link-tooltip`),(0,se.jsx)(Ie,{publisher:o.publishedBy,store:e},`${a}-table-publisher`),(0,se.jsx)(he,{text:l},`${a}-published-on`),(0,se.jsx)(ge,{blockStore:e,settingsTabStore:i,isSettingsDisabled:!r,spaceStore:s},`${a}-actions`)];n.push({key:a,columns:d})}return n}),[s,i,t]);return n}var Te=()=>s(884373);function Me(){const e=(0,I().IS)((e=>({message:{textAlign:"center",marginTop:12,marginBottom:12,color:e.text.tertiary}})),[]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(le().A,{style:e.message,children:(0,se.jsx)(A().sA,{id:"publicPages.table.empty",defaultMessage:"You have no published pages of this type"})}),(0,se.jsx)(Te().A,{size:1})]})}var Be=()=>s(898941),Le=()=>s(126451);function Re(e){const{header:t,settingsTabStore:s,column:n}=e,a=(0,I().IS)((e=>({wrapper:{display:"flex"},sortButton:{display:"flex",alignItems:"center",padding:"3px 5px",overflow:"hidden",maxWidth:"100%",borderRadius:4},sortIcon:{fill:e.text.secondary,width:12,height:12,marginLeft:4}})),[]),{sortColumn:r,sortAscending:l}=(0,o().O$)(s),c=(0,i.useCallback)((e=>{const{sortColumn:t,sortAscending:i}=s.state,n=e!==t||!i;s.setState({...s.state,sortAscending:n,sortColumn:e})}),[s]),d=["page","published-by","published-date"].includes(n),u=()=>{if(n===r)return(0,Be().m)({...a.sortIcon,...!l&&{transform:"rotate(180deg)"}})};return t&&d?(0,se.jsx)("div",{style:a.wrapper,children:(0,se.jsxs)(Le().A,{style:a.sortButton,onClick:()=>c(n),children:[t,u()]})}):t?(0,se.jsx)("div",{style:a.wrapper,children:t}):null}function _e(e){const{spaceStore:t,store:s,pageHeader:i}=e,n=(0,I().IS)((e=>({container:{minWidth:750,maxHeight:"100%",overflow:"auto"},tableBox:{tableLayout:"fixed"},cell:{paddingRight:12,height:44}})),[]),a=Pe({spaceStore:t,settingsTabStore:s}),r=function(e){const{table:t}=e;return[{key:"page",header:(0,se.jsx)(A().sA,{id:"publicPages.table.pageColumnHeader",defaultMessage:"Page"}),style:{width:"32%"}},{key:"sites"===t?"domain":"link",header:"sites"===t?(0,se.jsx)(A().sA,{id:"publicPages.table.domainColumnHeader",defaultMessage:"Domain"}):(0,se.jsx)(A().sA,{id:"publicPages.table.linkColumnHeader",defaultMessage:"Link"}),style:{width:"28%"}},{key:"published-by",header:(0,se.jsx)(A().sA,{id:"publicPages.table.publishedByColumnHeader",defaultMessage:"Published by"}),style:{width:"20%"}},{key:"published-date",header:(0,se.jsx)(A().sA,{id:"publicPages.table.publishedDateColumnHeader",defaultMessage:"Published date"}),style:{width:"16%"}},{key:"edit",header:null,style:{width:"4%"}}]}({table:(0,o().O$)(s).type}).map((e=>({key:e.key,header:(0,se.jsx)(Re,{column:e.key,header:e.header,settingsTabStore:s}),style:e.style})));return(0,se.jsx)(P().Y1,{direction:"vertical",padding:"36px 60px",style:n.container,children:(0,se.jsxs)(P().Y1,{direction:"vertical",gap:16,children:[(0,se.jsx)(M().n,{title:i,goBack:()=>{w.setTabView("landing")}}),(0,se.jsx)(T().A,{columns:r,rows:a??[],tableStyle:n.tableBox,cellStyle:n.cell}),0===(null==a?void 0:a.length)?(0,se.jsx)(Me,{}):void 0]})})}function Fe(e){const t=(0,se.jsx)(A().sA,{id:"publicPagesTab.forms.title",defaultMessage:"Public forms"}),{spaceStore:s}=e;return(0,se.jsx)(_e,{spaceStore:s,store:x,pageHeader:t})}var De=()=>s(152547),Oe=()=>s(517198);function He(){const e=(0,I().IS)((e=>({shimmerHeader:{height:12,width:120,borderRadius:6},shimmerMain:{height:25,width:140,borderRadius:6},shimmerBottom:{height:24,width:120,borderRadius:6}})),[]);return(0,se.jsx)(De().W,{headerText:(0,se.jsx)(Oe().A,{style:e.shimmerHeader}),mainText:(0,se.jsx)(Oe().A,{style:e.shimmerMain}),bottom:(0,se.jsx)(Oe().A,{style:e.shimmerBottom}),onClick:()=>{},isLoading:!0})}var We=()=>s(701270);function ze(){return(0,se.jsx)(We().D,{styleName:"UISmall-12px/Regular",colorName:"tertiary",children:(0,se.jsx)(A().sA,{id:"publicPages.tile.noPages",defaultMessage:"No public pages"})})}const Ve=3;function Ue(e){const{pageIcons:t}=e,s=(0,I().IS)((e=>({bottomContainer:{minHeight:24,display:"flex",alignItems:"flex-end"},iconsContainer:{display:"flex",gap:4,alignItems:"center"}})),[]);if(!(0,r().X)("public_pages_settings_tab"))return null;const i=t.slice(0,Ve).map(((e,t)=>(0,se.jsx)(ye().B,{icon:e,size:20,disabled:!0,isEmptyPage:!0},t)));return(0,se.jsx)("div",{style:s.bottomContainer,children:0===t.length?(0,se.jsx)(ze,{}):(0,se.jsx)("div",{style:s.iconsContainer,children:i})})}function Ee(e){const{spaceStore:t}=e,{formsCount:s,pageIcons:i}=(0,o().K8)((()=>{const e=x.state.forms[t.id];return e?{formsCount:e.length,pageIcons:e.map((e=>e.store.getIcon()))}:{formsCount:void 0,pageIcons:void 0}}),[t.id]);return(0,r().X)("public_pages_settings_tab")?(0,Q().O9)(s)&&(0,Q().O9)(i)?(0,se.jsx)(De().W,{headerText:(0,se.jsx)(A().sA,{id:"publicPages.tile.publicForms.header",defaultMessage:"Public forms"}),mainText:(0,se.jsx)(A().sA,{id:"publicPages.tile.publicForms.count",defaultMessage:"{count}",values:{count:s}}),bottom:(0,se.jsx)(Ue,{pageIcons:i}),onClick:()=>{w.setTabView("forms")}}):(0,se.jsx)(He,{}):null}var Ne=()=>s(455831),$e=()=>s(431551),Ke=()=>s(200594),Ge=()=>s(577831),Ye=()=>s(61801),Xe=()=>s(485966);function Je(){const e=(0,I().IS)((e=>({settingsTitle:{fontWeight:"normal",color:e.text.primary},settingsByline:{color:e.text.secondary},headerContainer:{marginTop:32}})),[]),[t,s]=(0,i.useState)(!0),{currentSpaceStore:n}=(0,o().O$)(Xe().default),a=(0,o().K8)((()=>(0,Ne().OX)(null==n?void 0:n.getSubscriptionTier())),[n]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:e.headerContainer,children:(0,se.jsx)(We().D,{children:(0,se.jsx)(A().sA,{id:"publicPages.settings.title",defaultMessage:"Permissions"})})}),a&&(0,se.jsx)(Ye().A,{icon:V().globeIcon,title:(0,se.jsx)(A().sA,{id:"publicPages.settings.disablePublishing.title",defaultMessage:"Disable publishing public pages in the <bold>Security</bold> tab",values:{bold:e=>(0,se.jsx)("span",{style:{fontWeight:ae().Wy.semibold},children:e})}}),deeplinkTab:{currentTab:"security",defaultSubtab:"security"}}),(0,se.jsx)(Ke().L,{children:(0,se.jsx)(Ge().y,{title:(0,se.jsx)("div",{style:e.settingsTitle,children:(0,se.jsx)(A().sA,{id:"publicPages.settings.showBanner.title",defaultMessage:"Always show published banner on sites"})}),byline:(0,se.jsx)("div",{style:e.settingsByline,children:(0,se.jsx)(A().sA,{id:"publicPages.settings.showBanner.description",defaultMessage:"Published pages will display a blue banner at the top"})}),item:(0,se.jsx)($e().A,{on:t,onClick:()=>s(!t)})})})]})}function qe(e){const{spaceStore:t}=e,{publicShareLinksCount:s,pageIcons:i}=(0,o().K8)((()=>{const e=S.state.publicShareLinks[t.id];return e?{publicShareLinksCount:e.length,pageIcons:e.map((e=>e.store.getIcon()))}:{publicShareLinksCount:void 0,pageIcons:void 0}}),[t.id]);return(0,r().X)("public_pages_settings_tab")?(0,Q().O9)(s)&&(0,Q().O9)(i)?(0,se.jsx)(De().W,{headerText:(0,se.jsx)(A().sA,{id:"publicPages.tile.publicLinks.header",defaultMessage:"Anyone with a link"}),mainText:(0,se.jsx)(A().sA,{id:"publicPages.tile.publicLinks.count",defaultMessage:"{count}",values:{count:s}}),bottom:(0,se.jsx)(Ue,{pageIcons:i}),onClick:()=>{w.setTabView("publicShareLinks")}}):(0,se.jsx)(He,{}):null}s(333225),s(494367),s(516262),s(573119),s(240480),s(950443),s(619601);var Qe=()=>s(515347),Ze=(s(500234),()=>s(419817));function et(e,t){var s;if(e)return null===(s=function(e){if(!e)return[];return(0,u().oE)(e.getPublicDomainIds().map((t=>e.getRecordModel({id:t,table:Ze()._6,spaceId:e.id}))))}(e))||void 0===s?void 0:s.find((e=>e.id===t))}function tt(e){const{spaceStore:t}=e,s=(0,I().IS)((e=>({bottomContainer:{minHeight:24,display:"flex",justifyContent:"flex-end",alignItems:"flex-end",gap:4},domainText:{backgroundColor:e.lightGrayButtonBackground,padding:4,borderRadius:4},domainPlus:{paddingBottom:4,color:e.text.tertiary}})),[]),{sitesCount:i,sitesDomains:n}=(0,o().K8)((()=>{const e=j.state.sites[t.id];if(!e)return{sitesCount:void 0,sitesDomains:void 0};const s=new Set(e.map((e=>Qe().UP(e.store)))),i=Array.from(s).map((e=>{const s=et(t,e);return null==s?void 0:s.getDomainName()})).filter((e=>(0,Q().O9)(e)));return{sitesCount:e.length,sitesDomains:i}}),[t]);if(!(0,r().X)("public_pages_settings_tab"))return null;return(0,Q().O9)(i)?(0,se.jsx)(De().W,{headerText:(0,se.jsx)(A().sA,{id:"publicPages.tile.publishedSites.header",defaultMessage:"Published sites"}),mainText:(0,se.jsx)(A().sA,{id:"publicPages.tile.publishedSites.count",defaultMessage:"{sitesCount}",values:{sitesCount:i}}),bottom:(0,Q().O9)(i)?(0,se.jsx)("div",{style:s.bottomContainer,children:i>0?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(We().D,{styleName:"UIMini-10px/Regular",colorName:"primary",style:s.domainText,children:null==n?void 0:n[0]}),(0,Q().O9)(n)&&n.length>1&&(0,se.jsx)(We().D,{styleName:"UIMini-10px/Regular",style:s.domainPlus,children:"+"+(n.length-1)})]}):(0,se.jsx)(ze,{})}):null,onClick:()=>{w.setTabView("sites")}}):(0,se.jsx)(He,{})}function st(e){const{spaceStore:t}=e,s=(0,I().IS)((e=>({container:{minWidth:750},domainStyles:{marginTop:36}})),[]);return(0,r().X)("public_pages_settings_tab")?(0,se.jsx)(P().Y1,{direction:"vertical",padding:"36px 60px",style:s.container,children:(0,se.jsxs)(P().Y1,{direction:"vertical",children:[(0,se.jsx)(M().n,{title:(0,se.jsx)(A().sA,{id:"publicPages.header.title",defaultMessage:"Public Pages"})}),(0,se.jsxs)(P().Y1,{direction:"horizontal",gap:14,children:[(0,se.jsx)(tt,{spaceStore:t}),(0,se.jsx)(Ee,{spaceStore:t}),(0,se.jsx)(qe,{spaceStore:t})]}),(0,se.jsx)("div",{style:s.domainStyles,children:(0,se.jsx)(re().$O,{spaceStore:t})}),(0,se.jsx)(Je,{})]})}):null}function it(e){const t=(0,se.jsx)(A().sA,{id:"publicPagesTab.publicShareLinks.title",defaultMessage:"Anyone with a link"}),{spaceStore:s}=e;return(0,se.jsx)(_e,{spaceStore:s,store:S,pageHeader:t})}function nt(e){const t=(0,se.jsx)(A().sA,{id:"publicPagesTab.sites.title",defaultMessage:"Published sites"}),{spaceStore:s}=e;return(0,se.jsx)(_e,{spaceStore:s,store:j,pageHeader:t})}function ot(e){const{spaceStore:t}=e,s=(0,n().v3)();(0,a().Yb)((async()=>{await async function(e){const{environment:t,spaceStore:s}=e;await Promise.all([C({environment:t,spaceStore:s,store:x}),C({environment:t,spaceStore:s,store:j}),C({environment:t,spaceStore:s,store:S})])}({environment:s,spaceStore:t})}),[s,t]),(0,i.useEffect)((()=>()=>{w.setTabView("landing")}),[]);const l=(0,o().O$)(w).view;if(!(0,r().X)("public_pages_settings_tab"))return null;switch(l){case"landing":return(0,se.jsx)(st,{spaceStore:t});case"sites":return(0,se.jsx)(nt,{spaceStore:t});case"forms":return(0,se.jsx)(Fe,{spaceStore:t});case"publicShareLinks":return(0,se.jsx)(it,{spaceStore:t})}}},869596:(e,t,s)=>{s.d(t,{F:()=>n});var i=()=>s(551116);function n(e,t){if(e)return e;switch(t){case"large":return i().A.card.desktop.large.height;case"small":return i().A.card.desktop.small.height;default:return i().A.card.desktop.medium.height}}}}]);