"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[45354],{77654:(e,i,t)=>{t.r(i),t.d(i,{iconDefinition:()=>s,personCircleFillIcon:()=>n});t(242343);var o=t(163643);const s={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10 5.125c-.95 0-1.723.393-2.245 1.044-.51.635-.75 1.474-.75 2.346s.24 1.71.75 2.346c.522.65 1.295 1.044 2.245 1.044s1.723-.394 2.245-1.044c.51-.635.75-1.474.75-2.346s-.24-1.711-.75-2.346c-.522-.65-1.294-1.044-2.245-1.044"}),(0,o.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 0 0-4.087 11.268C6.702 13.495 8.246 12.56 10 12.56s3.298.934 4.087 2.332A6.375 6.375 0 0 0 10 3.626"})]})},n=(0,t(680369).wt)("personCircleFill",s)},171521:(e,i,t)=>{t.d(i,{QX:()=>m,YY:()=>d,dK:()=>a,ek:()=>l,rC:()=>c});var o=()=>t(446588),s=()=>t(76394),n=()=>t(799220),r=()=>t(413871);function a(e){let{permissionItem:i,store:t}=e;return"display_only_inherited_permission"!==i.type&&(t instanceof r().md?"collection_property_permission"===i.type?t.pathIsDead()||!t.canAdmin():t.pathIsDead():t instanceof r().Bv?t.pathIsDead()||!d(i)&&!t.canAdmin()||(0,n().dL)(t):void(0,s().HB)(t))}function l(e){let{permissionItem:i,store:t}=e;const s=(0,o().Yi)(i.from);return i.from.table!==t.table||s!==t.id}function d(e){return"display_only_overview_permission"===e.type}function c(e){return"display_only_inherited_permission"===e.type}function m(e){const i=e&&"from"in e?e.permissionItem:e;if(!i||!(0,o().Tt)(i.role))return"private";return(0,o().Ni)(i)&&"none"!==i.role?"unlisted":"open"}},379356:(e,i,t)=>{t.d(i,{$:()=>c,N:()=>d});var o=t(242343),s=()=>t(371807),n=()=>t(237385),r=()=>t(220574),a=()=>t(485966),l=t(163643);const d=(0,o.createContext)({organizationOwnerRecordCache:void 0,updateCacheWithRecordMap:e=>{}});function c(e){let{children:i}=e;const t=(0,n().v3)(),[s,c]=(0,o.useState)(void 0);(0,o.useEffect)((()=>{const e=m(t);c(e)}),[t]);const u=(0,o.useCallback)((e=>{var i;const o=null===(i=a().default.state.currentUserStore)||void 0===i?void 0:i.id;if(!o||!e.data.organizationOwnerRecordMap)return;if(!e.data.organizationOwnerRecordMap)return;const s=r().RecordMap.create(e.data.organizationOwnerRecordMap);c((e=>{if(!e)return m(t);for(const{pointer:i,model:t}of s)e.setModelAndRole({pointer:i,userId:o},t,"editor");return m(t,e.data)}))}),[t]);return s?(0,l.jsx)(d.Provider,{value:{organizationOwnerRecordCache:s,updateCacheWithRecordMap:u},children:i}):null}function m(e,i){const t=new(s().A)({name:"organizationSettingsConsoleCache",data:i});return t.addCacheFallback(e.defaultRecordCache.inMemoryRecordCache),t}d.displayName="OrganizationCacheContext"},401574:(e,i,t)=>{t.d(i,{Hb:()=>s,Hm:()=>r,ko:()=>n});t(725707),t(491955),t(403517);var o=()=>t(455831);function s(e){let{space:i,trustedDomains:t,enableTrustedDomainPermissionRedesign:s}=e;return i&&n(i)?s?(0,o().OX)(i.subscription_tier)?(t||[]).filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())):i.getEmailDomains():(t||[]).filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())):[]}function n(e){return Boolean(e&&(0,o().jR)(e.subscription_tier))}function r(e){return!(!e||!n(e))&&(!(0,o().OX)(e.subscription_tier)||(e.getSettings().domain_link_sharing_enabled??!0))}},427240:(e,i,t)=>{t.r(i),t.d(i,{iconDefinition:()=>o,peopleFillIcon:()=>s});t(242343);const o={viewBox:"0 0 20 20",svg:(0,t(163643).jsx)("path",{d:"M14.25 2.795c-1.042 0-1.886.43-2.456 1.14-.558.696-.823 1.618-.823 2.582s.265 1.885.823 2.58c.57.71 1.414 1.141 2.456 1.141s1.886-.43 2.456-1.14c.558-.696.823-1.618.823-2.581 0-.964-.265-1.886-.823-2.581-.57-.71-1.414-1.141-2.456-1.141M3.491 4.675c.525-.654 1.303-1.05 2.26-1.05s1.733.396 2.258 1.05c.513.64.755 1.484.755 2.362S8.522 8.76 8.01 9.399c-.525.654-1.302 1.05-2.259 1.05s-1.734-.396-2.259-1.05c-.513-.64-.755-1.484-.755-2.362s.242-1.723.755-2.362M1.03 14.52c.824-1.719 2.637-2.895 4.72-2.895 1.13 0 2.18.346 3.035.936a6.6 6.6 0 0 0-.884 1.476c-.509 1.177-.215 2.356.461 3.168H3.038c-.68 0-1.327-.286-1.742-.764-.432-.498-.606-1.209-.265-1.92M14.25 11.21c-2.334 0-4.354 1.36-5.202 3.323-.309.715-.125 1.419.309 1.912.418.476 1.064.76 1.743.76h6.3c.68 0 1.325-.284 1.744-.76.433-.493.617-1.197.308-1.912-.848-1.963-2.868-3.324-5.202-3.324"})},s=(0,t(680369).wt)("peopleFill",o)},436599:(e,i,t)=>{t.d(i,{A:()=>d});var o=t(242343),s=()=>t(174114),n=()=>t(895048),r=t(163643);function a(e){let{type:i,isMobile:o,containerStyle:a,iconSize:d,...c}=e;const m=d??20,u=(0,s().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"center",...(0,t(636208).iM)({theme:e,size:d??(o?n().Bj:n().Ev),useLargeBorderRadius:!0,useLightBackgroundColor:!0}),..."circle"===i&&{borderRadius:"100%"},...a}})),[a,o,i,d]);return(0,r.jsx)("div",{style:u.container,children:"function"===c.iconType?(0,r.jsx)(l,{iconFn:c.iconFn,iconStyle:c.iconStyle,innerIconSize:m}):"emoji"===c.iconType?(0,r.jsx)(t(479813).A,{char:c.emoji,size:m}):"recordIcon"===c.iconType?(0,r.jsx)(t(28210).B,{icon:c.icon,disabled:!0,isEmptyPage:!1,size:m,defaultIcon:(0,t(591090).$)()}):c.element})}function l(e){let{iconFn:i,iconStyle:t,innerIconSize:o}=e;return i((0,s().IS)((e=>({icon:{width:o,height:o,fill:e.mediumIconColor,...t}})),[t,o]).icon)}const d=o.memo(a)},514438:(e,i,t)=>{t.d(i,{r:()=>s});t(242343);const o={viewBox:"0 0 20 20",svg:(0,t(163643).jsx)("path",{d:"M3.483 4.55c0-.345.28-.625.625-.625h3.5a.625.625 0 1 1 0 1.25H5.617L8.86 8.42A6 6 0 0 1 10 10.007a6 6 0 0 1 1.14-1.588l3.243-3.244h-1.99a.625.625 0 1 1 0-1.25h3.5c.344 0 .624.28.624.625v3.5a.625.625 0 0 1-1.25 0V6.06l-3.243 3.244a4.78 4.78 0 0 0-1.399 3.358v4.108h-1.25v-4.108a4.78 4.78 0 0 0-1.398-3.358L4.733 6.059V8.05a.625.625 0 1 1-1.25 0z"})},s=(0,t(680369).wt)("arrowBranch",o)},569948:(e,i,t)=>{t.r(i),t.d(i,{iconDefinition:()=>o,xMarkSmallIcon:()=>s});t(242343);const o={viewBox:"0 0 16 16",svg:(0,t(163643).jsx)("path",{d:"M12.642 3.358a.625.625 0 0 0-.884 0L8 7.116 4.242 3.358a.625.625 0 1 0-.884.884L7.116 8l-3.758 3.758a.625.625 0 0 0 .884.884L8 8.884l3.758 3.758a.625.625 0 1 0 .884-.884L8.884 8l3.758-3.758a.625.625 0 0 0 0-.884"})},s=(0,t(680369).wt)("xMarkSmall",o)},835074:(e,i,t)=>{t.d(i,{L:()=>n});var o=t(242343),s=()=>t(502852);function n(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;return(0,o.useCallback)((i=>{(0,s().SQ)({event:i,context:t,callback:()=>e(i)})}),[...i,t])}},880026:(e,i,t)=>{t.d(i,{Dw:()=>S,Hc:()=>x,o5:()=>b});t(610931),t(242343);var o=()=>t(502140),s=()=>t(514438),n=()=>t(680369),r=()=>t(486540),a=()=>t(66460),l=()=>t(653998),d=()=>t(975392),c=()=>t(441288),m=()=>t(145046),u=()=>t(919536),p=()=>t(84543),g=()=>t(35462),h=()=>t(990616),f=()=>t(196387),v=()=>t(413871),y=()=>t(268117),C=t(163643);async function b(e){let{newRole:i,...t}=e;const o=t.oldPermissionItem,s=(0,d().o8)(o);return s.role=i,await x({newPermissionItem:s,...t})}async function x(e){const{oldPermissionItem:i,newPermissionItem:t,wasInherited:s,environment:n,store:l,sudoModeStore:d,restrictingVisibility:m,fromPermissionWrapper:g,trustedDomainsLoggingData:h}=e,C=(0,y().FI)();if(!(0,r().nK)(i,t))throw new Error("Permission type mismatch.");const b=!!d&&d.shouldSaveTransactionWithSudoMode(l),x=(0,r().$q)(i.role,t.role);if(s&&x!==t.role||m){return await S({environment:n,useSudoMode:b,store:l,permissionItem:t,fromPermissionWrapper:g,isRedesignEnabled:C,shouldInherit:!0,trustedDomainsLoggingData:h})}return l instanceof v().Bv&&!l.isTopLevel()&&i.role!==t.role&&x!==i.role&&c().MR(n),p().createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:n,canUndo:!0,useSudoMode:b,perform:i=>{const o=f().default.DO_NOT_USE_markLegacy("share_menu.update_page_permission_lag");u().wd({environment:n,store:l,permissionItems:[t],transaction:i,pagePermissionChangeLocation:e.location,metric:o,fromPermissionWrapper:g})}}),"trusted_domain_permission"===t.type&&o().log({level:"warning",from:"shareMenu.handlePermissionItemChange",type:"TrustedDomainPermissionChange",spaceId:(0,a().e)(l.pointer.spaceId),data:{miscDataToConvertToString:{message:"shareMenu.handlePermissionItemChange updating trusted domain permission",blockId:l.id,oldPermissionItem:i,newPermissionItem:t,trustedDomainsLoggingData:h}}}),!0}async function S(e){const{environment:i,useSudoMode:t,store:o,permissionItem:r,fromPermissionWrapper:a,isRedesignEnabled:d,shouldInherit:c,trustedDomainsLoggingData:f}=e,v="none"===(null==r?void 0:r.role)?{type:"remove",permissionItem:r}:{type:"restrict"};return!!("user_permission"===(null==r?void 0:r.type)&&(null==r?void 0:r.user_id)===i.currentUser.id||(d?await m().Gh({message:(0,h().r6)(v,d),description:(0,C.jsx)(g().A,{isSmall:!0,isMultiline:!0,children:(0,C.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperTextV2",defaultMessage:"Changing this will unlink this page from its parent, so it will no longer inherit share settings. Admins can still restore settings on unlinked pages."})}),acceptLabel:(0,h().QU)(v,d),icon:(0,s().r)({height:n().Ev.xl,width:n().Ev.xl})}):await m().Gh({message:(0,h().r6)(v),acceptLabel:(0,h().QU)(v),cancelLabel:(0,C.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,C.jsx)(g().A,{isSmall:!0,isMultiline:!0,children:(0,C.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperText",defaultMessage:"Admins will still be able to restore permissions from restricted pages."})})})).accept)&&(p().createAndCommit({userAction:"PermissionItem.onAccept",environment:i,canUndo:!0,useSudoMode:t,perform:e=>{u().wW({environment:i,store:o,permissionItem:r,shouldInherit:c,transaction:e,fromPermissionWrapper:a,trustedDomainsLoggingData:f})}}),!0)}},895048:(e,i,t)=>{t.d(i,{Ev:()=>T,Bj:()=>D,Ay:()=>z});var o=t(242343),s=()=>t(237385),n=()=>t(803290),r=()=>t(174114),a=()=>t(712437),l=()=>t(891936),d=()=>t(673447),c=()=>t(486540),m=()=>t(446588),u=()=>t(145017),p=()=>t(21164),g=()=>t(218357),h=()=>t(653998),f=()=>t(220413),v=()=>t(76394),y=()=>t(129663),C=()=>t(931085),b=()=>t(35462),x=()=>t(951514),S=()=>t(29869),I=()=>t(360482),M=()=>t(880026),P=()=>t(320462),j=()=>t(413871),A=()=>t(628854),w=()=>t(501578),k=()=>t(171521),B=()=>t(268117),R=()=>t(636208),_=t(163643);const L=function(e){const{store:i,isDisabled:t,isCurrentUserPermission:o}=e;return t?o?(0,_.jsx)(h().sA,{defaultMessage:"Your access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.tooltip",values:{inlineIconAndName:(0,_.jsx)(y().A,{store:i,useInvertedColors:!0})}}):(0,_.jsx)(h().sA,{defaultMessage:"This access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissions.tooltip",values:{inlineIconAndName:(0,_.jsx)(y().A,{store:i,useInvertedColors:!0})}}):o?(0,_.jsx)(h().sA,{defaultMessage:"Your access is based on {inlineIconAndName}. Changing your access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.canEdit.tooltip",values:{inlineIconAndName:(0,_.jsx)(y().A,{store:i,useInvertedColors:!0,maxLength:26})}}):(0,_.jsx)(h().sA,{defaultMessage:"This access is based on {inlineIconAndName}. Changing this access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissions.canEdit.tooltip",values:{inlineIconAndName:(0,_.jsx)(y().A,{store:i,useInvertedColors:!0,maxLength:26})}})},T=32,D=40,W=(0,h().YK)({fromLinkBox:{defaultMessage:"From {linkBoxWithPageTitle}",id:"pagePermissionItem.fromInheritedRecordPermissions.setting"}});function K(e){const{from:i,store:a,onClick:l,permissionItem:d,ignoreLocalHoverState:c,nonInheritedTooltip:m,inheritedTooltip:h,shouldDisable:f,isCollapsible:y,openRoleSelectMenuOnRender:C}=e,b=(0,s().Y0)(),x=(0,s().v3)(),S=(0,n().uB)(void 0,t(962373).A),I=(0,n().K8)((()=>{const e=i.table;return e===u().ev?j().Bv.createChildStore(a,{table:u().ev,id:i.blockId}):e===g().yK?j().h4.createChildStore(a,{table:g().yK,id:i.teamId}):e===p().Vl?j().md.createChildStore(a,{table:p().Vl,id:i.collectionId}):void(0,v().HB)(e)}),[i,a]),M=(0,n().K8)((()=>(0,B().FI)()),[]),[P,A]=(0,o.useState)(!1),w=(0,o.useCallback)((()=>{S.setState({...S.state,open:!0}),A(!0)}),[S]),T=(0,o.useCallback)((()=>{A(!1)}),[]);(0,o.useEffect)((()=>{C&&!S.state.open&&requestAnimationFrame((()=>{w()}))}),[C,w,S]);const D=M&&P,W=(0,n().K8)((()=>f||(0,k().dK)({permissionItem:d,store:a})),[f,d,a]),K=(0,n().K8)((()=>I.id!==a.id),[I,a]),O=(0,t(835074).L)((e=>{l?l(e):W||S.setState({...S.state,open:!0})}),[S,l,W],t(502852).y$.PermissionItemClick),F=(0,n().K8)((()=>{const e=x.currentUser.id;return"user_permission"===d.type&&d.user_id===e}),[x,d]),U=(0,n().K8)((()=>D?null:M?K?h||(0,_.jsx)(L,{store:I,isDisabled:W,isCurrentUserPermission:F}):m:(0,k().YY)(d)||(0,k().rC)(d)?null:K?(0,_.jsx)(L,{store:I,isDisabled:W,isCurrentUserPermission:F}):m),[M,d,K,m,h,I,W,F,D]),z=(0,r().IS)((i=>{const t=M?{...(0,R().wo)({isMobile:b.isMobile}),...e.menuListItemProps?{width:"unset"}:{}}:{};return{disabledButton:{...t,cursor:"not-allowed"},button:t,pressedButton:{background:i.buttonPressedBackgroundLight},tooltip:{maxWidth:240}}}),[b.isMobile,M,e.menuListItemProps]);return(0,_.jsx)(t(103151).A,{delayThreshold:0,renderTooltip:()=>U,textWrap:!0,disableTooltip:!Boolean(U)||D,forceRenderTooltipPopupComponent:M&&Boolean(U),style:z.tooltip,render:i=>{const o=(0,t(906230).A)(i,{onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave});return e.menuListItemProps?(0,_.jsx)(t(535906).A,{...e.menuListItemProps,onClick:O,disabled:W,ignoreLocalHoverState:c,pressed:!1,buttonStyle:W&&!M?z.disabledButton:z.button,textWrapperStyle:{marginLeft:0,marginRight:0},style:{padding:0},title:(0,_.jsx)(E,{...e,isDisabled:W,fromStore:I,buttonPopupStore:S,isInherited:K,onOpenMenu:w,onClose:T}),...o}):(0,_.jsx)(t(126451).A,{disabled:W&&!y,mobileFeedback:b.isMobile,ignoreLocalHoverState:c,style:W&&!M?z.disabledButton:z.button,pressedStyle:M?z.pressedButton:void 0,onClick:O,...o,children:(0,_.jsx)(E,{...e,isDisabled:W,fromStore:I,buttonPopupStore:S,isInherited:K,onOpenMenu:w,onClose:T})})},placement:t(907721).W.Left})}function E(e){const{permissionItem:i,fromStore:t,isCompact:a,iconStyle:l,icon:d,title:c,tag:m,subtitle:u,showInherited:p,isInherited:g,permissionRoleSelect:h,hideRoleSelectButton:f,renderTitleWithoutUILabelWrapper:y,onClose:C,style:x}=e,S=(0,s().v3)(),I=S.device.isMobile,M=(0,n().K8)((()=>function(e){return"user_permission"===e.type}(i)),[i]),P=(0,n().K8)((()=>(0,B().FI)()),[]),{paddingLeft:A,paddingRight:k}=(0,n().K8)((()=>({paddingLeft:S.WindowSizeStore.getSafePaddingLeftCSS(P?I?0:8:14),paddingRight:S.WindowSizeStore.getSafePaddingRightCSS(P?I?0:8:14)})),[S.WindowSizeStore,I,P]),L=(0,r().IS)((e=>({container:{display:"flex",alignItems:"center",minHeight:a?44:P?void 0:52,...P?{height:I?void 0:R().CJ}:void 0,paddingTop:I&&P?12:8,paddingBottom:I&&P?12:8,paddingLeft:A,paddingRight:k,...x},icon:{flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",width:P&&I?40:32,height:P&&I?40:32,marginRight:(0,R().qj)({isMobile:I}),...l},title:{marginRight:"auto",minWidth:0},labelWrapper:{display:"flex",flexDirection:"row"},label:{fontWeight:400},tag:{marginLeft:4},roleSelect:{display:"flex",alignItems:"center",flexShrink:0,marginLeft:8}})),[a,A,k,I,l,P,x]),T=(0,o.useMemo)((()=>f?null:function(e){return"display_only_overview_permission"===e.type||"display_only_hidden_permission"===e.type||"display_only_inherited_permission"===e.type||"display_only_group_member_permission"===e.type}(i)?h:e.store instanceof j().Bv?(0,_.jsx)(O,{...e,onClose:C,permissionItem:i}):e.store instanceof j().md?(0,_.jsx)(F,{...e,store:e.store,onClose:C,permissionItem:i}):void(0,v().HB)(e.store)),[f,i,e,h,C]);return(0,_.jsxs)("div",{className:"notranslate",style:L.container,children:[(0,_.jsx)("div",{style:L.icon,children:d}),(0,_.jsxs)("div",{style:L.title,children:[(0,_.jsxs)("div",{style:L.labelWrapper,children:[y?c:(0,_.jsx)(b().A,{style:M?void 0:L.label,children:(0,_.jsx)(w().j,{children:c})}),m&&(0,_.jsx)("div",{style:L.tag,children:m})]}),u&&(0,_.jsx)(b().A,{style:e.subtitleStyle,isSmall:!0,children:u}),p&&g&&(0,_.jsx)(U,{store:t})]}),T?(0,_.jsx)("div",{style:L.roleSelect,children:T}):null]})}function O(e){const{isInherited:i,permissionItem:t,store:a,from:l,isDisabled:p,sudoModeStore:g,location:h,fromPermissionWrapper:f,onUpgradeButtonClick:v,onChange:y,onClose:C,onOpenMenu:b,upgradeButtonName:S,buttonPopupStore:I,isRemovableOverride:P,onChangeSuccess:A}=e,w=(0,s().v3)(),k=(0,n().K8)((()=>{var e;const i=a.getModel(),o=null===(e=a.getParentStore())||void 0===e?void 0:e.getModel();return(0,c().tp)({record:i,parent:o,from:l,permissionItem:t})?(0,c().SK)({ancestors:d().Yn(a.pointer,a.getRecordModel),from:l}):t.role}),[l,t,a]),L=(0,n().K8)((()=>(0,B().FI)()),[]),T=(0,n().K8)((()=>a instanceof j().Bv?a.getType():void 0),[a]),D=(0,n().K8)((()=>{const e=w.currentUser.id;return m().B2(t)&&t.user_id===e}),[w,t]),W=(0,o.useCallback)((async e=>{let o=!1;const s={...t};s.role=k,o=y?await y(e):await(0,M().o5)({oldPermissionItem:s,newRole:e,wasInherited:i,environment:w,store:a,sudoModeStore:g,location:h,fromPermissionWrapper:f}),o&&(null==A||A(e))}),[t,k,i,w,a,g,h,f,y,A]),K=(0,r().IS)((e=>({button:{color:e.text.secondary,fontSize:(0,R().kx)({environment:w,isRedesignEnabled:L})}})),[w,L]);return(0,_.jsx)(x().Ay,{role:k,table:u().ev,blockType:T,type:t.type,disabled:p,isUserPermission:D,onChange:W,onClick:L?b:void 0,onClose:L?C:void 0,onUpgradeButtonClick:v,upgradeButtonName:S,buttonPopupStore:I,buttonStyle:K.button,showPermissionOverrideWarning:i&&!e.selectFooter,isRemovableOverride:P,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader})}function F(e){const{isInherited:i,permissionItem:t,store:a,from:u,isDisabled:g,sudoModeStore:h,location:f,fromPermissionWrapper:v,onUpgradeButtonClick:y,onChange:C,onClose:b,onOpenMenu:S,upgradeButtonName:I,buttonPopupStore:P,isRemovableOverride:j,onChangeSuccess:A}=e,w=(0,s().v3)(),k=(0,n().K8)((()=>{var e;const i=a.getModel(),o=null===(e=a.getParentStore())||void 0===e?void 0:e.getModel();return(0,c().tp)({record:i,parent:o,from:u,permissionItem:t})?(0,c().SK)({ancestors:d().Yn(a.pointer,a.getRecordModel),from:u}):t.role}),[u,t,a]),L=(0,n().K8)((()=>(0,B().FI)()),[]),T=(0,n().K8)((()=>{const e=w.currentUser.id;return m().B2(t)&&t.user_id===e}),[w,t]),D=(0,o.useCallback)((async e=>{let o=!1;const s={...t};s.role=k,o=C?await C(e):await(0,M().o5)({oldPermissionItem:s,newRole:e,wasInherited:i,environment:w,store:a,sudoModeStore:h,location:f,fromPermissionWrapper:v}),o&&(null==A||A(e))}),[t,k,i,w,a,h,f,v,C,A]),W=(0,n().K8)((()=>{if("collection_property_permission"!==t.type)return;const e=a.getSchema();return(0,l().s)({collectionSchema:e,permissionItem:t})?void 0:[{role:"none"}]}),[t,a]),K=(0,r().IS)((e=>({button:{color:e.text.secondary,fontSize:(0,R().kx)({environment:w,isRedesignEnabled:L})}})),[w,L]);return(0,_.jsx)(x().Ay,{role:k,table:p().Vl,blockType:void 0,type:t.type,disabled:g,isUserPermission:T,onChange:D,onClick:L?S:void 0,onClose:L?b:void 0,onUpgradeButtonClick:y,upgradeButtonName:I,buttonPopupStore:P,buttonStyle:K.button,showPermissionOverrideWarning:i&&!e.selectFooter,isRemovableOverride:j,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader,availableRoleItems:W})}function U(e){const{store:i}=e,t=(0,s().v3)(),l=(0,h().tz)(),d=(0,n().K8)((()=>{if(i.table===u().ev)return(0,S().Ay)({store:i,fullyQualified:!1,pageVisitSource:a().y8.LinkInPage})}),[i]),c=(0,n().K8)((()=>(0,I().$R)(i)),[i]),m=(0,o.useCallback)((()=>{A().F2({environment:t,teamId:i.id,tab:P().p.Members,from:"permission_item"})}),[i.id,t]),p=(0,r().IS)((e=>({label:{lineHeight:1.4},linkBox:{display:"inline-flex",alignItems:"center",borderBottom:`0.5px solid ${f().Ay.mediumTextColor}`}})),[]);return(0,_.jsx)(b().A,{isSmall:!0,style:p.label,children:l.formatMessage(W.fromLinkBox,{linkBoxWithPageTitle:(0,_.jsx)(C().A,{inline:!0,href:d,onClick:c?m:void 0,innerStyle:p.linkBox,children:(0,_.jsx)(y().A,{store:i,useInvertedColors:!1})})})})}const z=o.memo(K)},990616:(e,i,t)=>{t.d(i,{QU:()=>f,f2:()=>h,r6:()=>v});t(403517),t(242343);var o=()=>t(803290),s=()=>t(174114),n=()=>t(446588),r=()=>t(653998),a=()=>t(76394),l=()=>t(31448),d=()=>t(268117),c=()=>t(98508),m=()=>t(485966),u=()=>t(142708),p=()=>t(586121),g=t(163643);function h(e){const{openState:i}=e,{mainEditorCurrentBlockStore:t,currentSpaceStore:n}=(0,o().K8)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:i}=m().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:i}}),[]),r=(0,o().K8)((()=>(0,d().FI)()),[]),a=(0,s().IS)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,...r?{border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingLeft:12,paddingRight:12,paddingBottom:12,marginTop:15,marginBottom:5,marginLeft:-12,marginRight:-12}:{}},editContainer:{marginTop:2,marginBottom:2,color:e.text.primary}})),[r]);if(!t||!n)return null;const l=Date.now();return(0,g.jsx)(u().H,{type:c().A.Y,style:a.scroller,children:i.permissionChanges.map(((e,i)=>{let[o,s]=e;const r={timestamp:l,space_id:n.id,type:"permission-changed",permission_data:{before:o,after:s}};return(0,g.jsx)("div",{style:a.editContainer,children:(0,g.jsx)(p().A,{rootStore:t,edit:r})},`${o.type}-${i}`)}))})}function f(e,i){return["remove","restrict"].includes(e.type)?i?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccess",defaultMessage:"Restrict access"}):i?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"}):"restoreTeamPermissions"===e.type?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreTeamPermissions",defaultMessage:"Reset Permissions"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreAccess",defaultMessage:"Restore access"})}function v(e,i){switch(e.type){case"remove":return i?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restrict.description",defaultMessage:"Are you sure you want to remove this {permissionGroup} and restrict access? This page will no longer inherit share settings from the parent page.",values:{permissionGroup:y(e)}});case"restrict":return i?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.remove.description",defaultMessage:"Are you sure you want to change this role and restrict access? This page will no longer inherit share settings from the parent page."});case"restore":return i?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):e.permissionChanges.length>0?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restore.description",defaultMessage:"Are you sure you want to restore access? This will inherit the following permissions from the parent page:"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restoreNoChanges.description",defaultMessage:"Are you sure you want to restore access?"});case"restoreTeamPermissions":return i?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{fontWeight:l().Wy.semibold,marginBottom:4},children:(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.mainDescription",defaultMessage:"Are you sure you want to reset permissions to match the teamspace defaults?"})}),(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.warningMessage",defaultMessage:"Everyone else who is not part of the teamspace will lose access, including guests."})]});default:throw a().HB(e)}}function y(e){return(0,n().B2)(e.permissionItem)?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.user",defaultMessage:"user"}):(0,n().Ds)(e.permissionItem)?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.group",defaultMessage:"group"}):(0,n().Lg)(e.permissionItem)?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.space",defaultMessage:"workspace"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.generic",defaultMessage:"permission"})}}}]);