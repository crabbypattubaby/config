"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[42050],{322469:(e,t,r)=>{r.r(t),r.d(t,{createHasSchemaChangedForQueryStore:()=>l});r(725707),r(113085);var o=()=>r(496985),n=(r(362833),r(107652),r(244387),()=>r(975392)),a=()=>r(76394);function i(e,t){if(e.type!==t.type)return["type"];const r=[];switch(e.name!==t.name&&r.push("formatAttribute"),e.icon!==t.icon&&r.push("formatAttribute"),e.type){case void 0:case"file":case"button":case"verification":case"geo_point":case"auto_increment_id":case"location":case"title":case"text":case"url":case"email":case"phone_number":case"created_by":case"last_edited_by":case"date":case"created_time":case"last_edited_time":case"last_visited_time":case"checkbox":case"number":return["formatAttribute"];case"rollup":return"rollup"!==t.type?r:e.relation_property===t.relation_property&&n().n4(e.aggregation,t.aggregation)&&e.target_property===t.target_property&&e.target_property_type===t.target_property_type?["formatAttribute"]:(r.push("computedAttribute"),r);case"formula":return"formula"!==t.type?r:n().n4(e.formula,t.formula)&&n().n4(e.formula2,t.formula2)&&n().n4(e.number_format,t.number_format)&&n().n4(e.number_precision,t.number_precision)?["formatAttribute"]:(r.push("computedAttribute"),r);case"select":case"multi_select":case"status":return"status"!==t.type&&"select"!==t.type&&"multi_select"!==t.type?[]:function(e,t){const r=[],o=e.options||[],n=t.options||[],a=o.reduce(((e,t,r)=>(e.set(t.id,{value:t,index:r}),e)),new Map),i=n.reduce(((e,t,r)=>(e.set(t.id,{value:t,index:r}),e)),new Map);for(const u of n)a.has(u.id)||r.push("addedOption");for(const[s,{value:p,index:c}]of a.entries()){const e=i.get(s);if(e)if(e.index!==c)r.push("reorderedOptions");else{const t=u(p,e.value);if(0===t.length)continue;t.every((e=>"value"!==e))?r.push("formatAttribute"):r.push("value")}else r.push("removedOption")}"status"===e.type&&"status"===t.type&&e.defaultOption!==t.defaultOption&&r.push("default");return r}(e,t);case"person":return"person"===t.type&&(e.limit!==t.limit&&r.push("limit"),e.default!==t.default&&r.push("default")),r;case"relation":return"relation"!==t.type?[]:(e.limit!==t.limit&&r.push("limit"),r);default:(0,a().HB)(e)}}function u(e,t){const r=[];return e.value!==t.value&&r.push("value"),e.color!==t.color&&r.push("color"),e.description!==t.description&&r.push("description"),n().n4(e.collectionIds,t.collectionIds)||r.push("collectionIds"),r}r(333225),r(494367),r(516262),r(573119),r(240480),r(950443),r(619601),r(491955),r(771702);var s=()=>r(15552);function p(e){const t=[];return void 0===e?t:(0,s().dU)(e)?(null===(r=e.filters)||void 0===r||r.forEach((e=>{t.push(...p(e))})),t):(0,s().yX)(e)?(t.push(e.property),t):(0,s().LB)(e)?(t.push(e.timestamp),t):void(0,a().HB)(e);var r}function c(e){if(void 0===e)return new Set;const t=function(e){const t=[];if(null==e||!e.reducers)return t;const r=Object.values(e.reducers).filter((e=>"groups"===e.type));if(0===r.length)return t;for(const i of r)if(t.push(i.groupBy.property),void 0!==i.subGroup&&t.push(i.subGroup.groupBy.property),i.aggregation&&("intersection"!==i.aggregation.type&&"intersection_and_independent"!==i.aggregation.type||i.aggregation.intersectionAggregation.property&&t.push(i.aggregation.intersectionAggregation.property),"independent"===i.aggregation.type||"intersection_and_independent"===i.aggregation.type)){var o,n,a;null!==(o=i.aggregation.groupAggregation)&&void 0!==o&&o.property&&t.push(null===(a=i.aggregation.groupAggregation)||void 0===a?void 0:a.property),null!==(n=i.aggregation.subGroupAggregation)&&void 0!==n&&n.property&&t.push(i.aggregation.subGroupAggregation.property)}return t}(e),r=function(e){const t=[];return void 0===e||e.forEach((e=>{t.push(e.property)})),t}(e.sort),o=p(e.filter),n=function(e){const t=[];if(null==e||!e.reducers)return t;const r=Object.values(e.reducers).filter((e=>"aggregation"===e.type));if(0===r.length)return t;for(const o of r)o.aggregation.property&&t.push(o.aggregation.property);return t}(e);return new Set([...t,...r,...o,...n])}function l(e){return new(o().default)((function(){var t,r;const o=e.normalizedSchemaStore.state,n=null===(t=e.lastRemoteRequestStore.state)||void 0===t?void 0:t.schema,a=null===(r=e.remoteRequestStore.state)||void 0===r?void 0:r.loader;return!(!n||!a)&&function(e){let{loader:t,previousSchema:r,currentSchema:o}=e;const n=c(t);return Array.from(n).some((e=>{const t=null==r?void 0:r[e],n=null==o?void 0:o[e];return!(!t||!n)&&i(t,n).some((e=>"formatAttribute"!==e))}))}({loader:a,previousSchema:n,currentSchema:o})}),{debugName:"hasSchemaChangedForQueryStore"})}}}]);