"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[14341],{25058:(e,t,i)=>{i.d(t,{A:()=>a});var o=i(242343),n=()=>i(237385);function a(e){const t=(0,n().v3)(),{onLongPress:i,hapticsEnabled:a=!0,timeout:r=300}=e,s=(0,o.useCallback)((()=>{var e,o,n;a&&(null!==(e=t.mobileNative)&&void 0!==e&&e.buzz?t.mobileNative.buzz():null===(o=(n=window.navigator).vibrate)||void 0===o||o.call(n,20));i()}),[t.mobileNative,a,i]),d=(0,o.useRef)(),l=(0,o.useRef)(0),c=(0,o.useRef)(0),u=(0,o.useCallback)((()=>clearTimeout(d.current)),[]);(0,o.useEffect)((()=>u),[u]);return{onTouchStart:(0,o.useCallback)((()=>{clearTimeout(d.current),d.current=setTimeout(s,r)}),[r,s]),onTouchMove:(0,o.useCallback)((e=>{const t=e.touches[0].clientX,i=e.touches[0].clientY;(Math.abs(t-l.current)>50||Math.abs(i-c.current)>50)&&clearTimeout(d.current)}),[]),onTouchEnd:u,onTouchCancel:u}}},449911:(e,t,i)=>{i.d(t,{S7:()=>J,eQ:()=>P,my:()=>X});var o=i(242343),n=()=>i(237385),a=()=>i(803290),r=()=>i(174114),s=()=>i(214263),d=()=>i(850313),l=()=>i(518797),c=()=>i(409211),u=()=>i(653998),h=()=>i(975392),p=()=>i(76394),v=()=>i(31448),f=()=>i(557067),g=()=>i(84543),m=()=>i(983050),x=()=>i(302376),y=()=>i(502852),b=()=>i(906230),k=()=>i(289113),S=()=>i(773498),C=()=>i(925564),j=()=>i(907721),A=()=>i(413871),T=()=>i(273520),M=()=>i(28210),w=()=>i(709237),B=()=>i(103151),R=()=>i(951156),z=()=>i(482570),L=()=>i(206363),I=()=>i(709356),U=()=>i(874413),N=()=>i(624030),D=i(163643);const W=0,K=8,P=24,H=16+P+12;function E(e){const{notification:t,children:s,header:d,subheader:l,body:c,rootStore:u,count:h,onArchiveClicked:p,onUnarchiveClicked:m,onMarkAsReadClicked:x,onMarkAsUnreadClicked:b,onNotificationBodyClicked:k,url:S,isFirst:j,isLast:M,disableLineClamp:w}=e,B=(0,n().v3)(),R=(0,n().Y0)(),z=parseInt(t.end_time),L=(0,a().K8)((()=>{const e=t.navigable_block_id;if(e)return A().sk.createChildStore(u,{table:i(145017).ev,id:e,spaceId:u.id})}),[u,t.navigable_block_id]),I=(0,a().K8)((()=>L||e.notificationTitleStore),[L,e.notificationTitleStore]),U=(0,a().K8)((()=>i(271748).default.isPeekDismissableState()),[]),[K,P]=(0,o.useState)(!1),[E,O]=(0,o.useState)(!1),F=(0,o.useRef)(null),_=(0,i(25058).A)({onLongPress:()=>{var e;return null===(e=F.current)||void 0===e?void 0:e.setOpen(!0)}}),[Q,V]=(0,o.useState)(!1),Y=K&&!E&&!Q,Z=(0,a().K8)((()=>"mentions"===i(264109).Ay.state.currentTab),[]),J=!t||t.read,X=R.isMobile,q=(0,a().K8)((()=>{const e=B.WindowSizeStore.state;return{left:e.paddingLeftCSS,right:e.paddingRightCSS}}),[B.WindowSizeStore]),ee=(0,r().IS)((e=>({article:{display:"flex",flexDirection:"column"},mainClickTargetButton:{display:"flex",flexDirection:"column",gap:0,paddingTop:14-W,paddingBottom:14-W,paddingLeft:X?q.left:0,paddingRight:X?q.right:0,marginTop:j?0:W,marginBottom:M?0:W,marginLeft:W,marginRight:W,transition:"background 150ms ease"},mainClickTargetButtonHovered:{background:e.state.hover},header:{display:"flex",paddingLeft:16-W,paddingRight:16-W,maxWidth:"100%"},subheaderAndBody:{display:"flex",flexDirection:"column"},subheader:{paddingLeft:H-W,paddingRight:16-W,fontSize:14,fontWeight:v().Wy.regular,color:e.text.primary,...v().RC},body:{paddingLeft:H-W,paddingRight:16-W,fontSize:14,color:e.text.secondary,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:w?void 0:2,overflow:"hidden"},children:{paddingTop:4,paddingLeft:H-W,paddingRight:16-W},divider:{height:1,backgroundColor:e.stroke.secondary},buttonPressed:{backgroundColor:K&&E?e.buttonBackground:e.state.pressed}})),[X,q.left,q.right,j,M,K,E,w]),te=(0,o.useCallback)((e=>{t&&(Q||(!S&&t.read||k(),(0,y().SQ)({event:e,context:y().y$.NotificationClick,callback:()=>{!U||e.metaKey||e.ctrlKey||i(610489).VI({environment:B}),t.read||g().createAndCommit({userAction:"ActivityNotificationSection.handleMarkAsRead",environment:B,canUndo:!0,perform:e=>{f().ZB({notification:t,rootStore:u,transaction:e,read:!0})}})}})))}),[B,Q,t,k,U,u,S]),ie=(0,o.useCallback)((e=>{t&&(0,y().SQ)({event:e,context:y().y$.NotificationClick,callback:()=>{t.read?b():x(),g().createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:B,canUndo:!0,perform:e=>{f().ZB({notification:t,rootStore:u,transaction:e,read:!t.read})}})}})}),[B,t,x,b,u]),oe=(0,o.useCallback)((e=>{t&&(0,y().SQ)({event:e,context:y().y$.NotificationClick,callback:()=>{p(),g().createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:B,canUndo:!0,perform:e=>{f().s4({notification:t,rootStore:u,transaction:e})}})}})}),[B,t,p,u]),ne=(0,o.useCallback)((e=>{t&&(0,y().SQ)({event:e,context:y().y$.NotificationClick,callback:()=>{m(),g().createAndCommit({userAction:"Activity.handleUnarchive",environment:B,canUndo:!0,perform:e=>{f().JV({notificationId:t.id,visited:!1,rootStore:u,transaction:e})}})}})}),[B,t,m,u]),ae=(0,o.useCallback)((()=>P(!0)),[]),re=(0,o.useCallback)((()=>P(!1)),[]),se=(0,o.useId)(),de=(0,i(190094).T4)();return(0,D.jsx)(T().Ay,{ref:F,disabled:!R.isMobile,style:de.popup,popupType:R.isTablet?T().z7.Popup:T().z7.BottomSheet,render:e=>(0,D.jsx)(C().Lk,{blockStore:L,notification:t,handlers:{handleUnarchive:ne,handleArchive:oe,toggleNotificationReadStatus:ie},closePopup:()=>e.close()}),renderOrigin:()=>(0,D.jsx)("div",{...R.isMobile&&_,children:(0,D.jsx)("article",{style:ee.article,onMouseOver:ae,onMouseLeave:re,children:(0,D.jsxs)(N().y.Provider,{value:O,children:[(0,D.jsx)($,{notification:t,rootStore:u,isMobile:X,isHovered:K,isFirst:j,onMouseEnter:()=>V(!0),onMouseLeave:()=>V(!1),onArchiveClicked:p,onUnarchiveClicked:m,onMarkAsReadClicked:x,onMarkAsUnreadClicked:b}),(0,D.jsxs)(i(417653).A,{href:S,hovered:Y,ignoreLocalHoverState:!0,style:ee.mainClickTargetButton,onClick:te,hoveredStyle:ee.mainClickTargetButtonHovered,disabled:!Boolean(S),pressedStyle:ee.buttonPressed,"aria-labelledby":se,children:[(0,D.jsx)("div",{style:ee.header,children:d?(0,D.jsx)(G,{icon:d.icon,header:d.title,timestamp:z,titleAriaId:se,showBlueDot:Z&&!J,count:h}):(0,D.jsx)(G,{notificationTitleStore:I,timestamp:z,titleAriaId:se,showBlueDot:Z&&!J,count:h})}),(0,D.jsxs)("div",{style:ee.subheaderAndBody,children:[l&&(0,D.jsx)("div",{style:ee.subheader,children:l}),c&&(0,D.jsx)("div",{style:ee.body,children:c}),s&&(0,D.jsx)("div",{style:ee.children,children:s})]})]}),!M&&(0,D.jsx)("div",{style:ee.divider})]})})})},t.id)}const O=12-W,F=12-W,_="100ms ease-out";function $(e){const{notification:t,rootStore:i,isMobile:o,isHovered:n,isFirst:a,onArchiveClicked:s,onUnarchiveClicked:d,onMarkAsReadClicked:l,onMarkAsUnreadClicked:c,onMouseEnter:u,onMouseLeave:h}=e,p=(0,r().IS)((()=>({container:{display:"flex",alignItems:"flex-start",position:"relative",zIndex:1},body:{transition:`opacity ${_}`,opacity:o||n?1:0,position:"absolute",right:O,top:F+(o?-3:0)+(a?0:W)}})),[o,n,a]);return t?(0,D.jsx)("div",{style:p.container,onMouseEnter:u,onMouseLeave:h,children:(0,D.jsx)("div",{style:p.body,children:(0,D.jsx)(S().hR,{notification:t,rootStore:i,onArchiveClicked:s,onUnarchiveClicked:d,onMarkAsReadClicked:l,onMarkAsUnreadClicked:c})})}):null}const Q=14,V=12,Y=12;function G(e){const{notificationTitleStore:t,icon:i,header:d,timestamp:l,showBlueDot:c,count:p=0}=e,f=(0,n().Y0)(),g=(0,u().tz)(),y=f.isMobile,[S,T]=(0,o.useState)(!1),[R,z]=(0,o.useState)(!1),W=(0,k().nl)(l,{useUltraCompactFormat:!0}),P=(0,k().x$)(l),H=(0,a().K8)((()=>{if(t instanceof A().Bv)return t}),[t]),{actorStore:E,actorName:F}=(0,a().K8)((()=>{if(t instanceof A().LU||t instanceof A().vK||t instanceof A().pH){return t?{actorStore:t,actorName:t.getDisplayName(g)}:{actorStore:void 0,actorName:void 0}}return{actorStore:void 0,actorName:void 0}}),[t,g]),_=(0,a().K8)((()=>{if(!(t instanceof A().pS||t instanceof A().LU||t instanceof A().vK||t instanceof A().pH))return t}),[t]),$=(0,a().K8)((()=>{var e;if(_)return null===(e=_.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:_.getRecordModel})}),[_]),G=(0,a().K8)((()=>!!H&&H.isEmptyPage()),[H]),J=(0,a().K8)((()=>null==H?void 0:H.isDefined()),[H]),X=(0,o.useCallback)((()=>{T(!0),z(!1)}),[]),q=h().nF((()=>{z(!0)}),200,{leading:!0}),ee=(0,o.useCallback)((()=>{T(!1),z(!1),x().Ol(window,"scroll",q,!0)}),[q]),te=(0,o.useCallback)((e=>(0,D.jsx)(L().yf,{store:H,events:e})),[H]);(0,o.useEffect)((()=>(x().P4(window,"scroll",q,!0),()=>x().Ol(window,"scroll",q,!0))),[q]);const ie=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"row",minWidth:0,width:"100%",marginTop:2},iconHeaderOverride:{display:"flex",flexDirection:"row",gap:Y,alignItems:"center",minWidth:0},headerMobile:{fontSize:Q,minWidth:0},header:{display:"inline-grid",gridAutoFlow:"column",alignItems:"center",justifyContent:"space-between",fontSize:Q,gap:12,minWidth:0},time:{display:"flex",gap:8,fontSize:V,color:e.text.tertiary,whiteSpace:"nowrap",...y&&{display:"inline"},marginTop:Q-V},pageTitleAndTimestamp:{display:"flex",flex:1,flexDirection:"column",gap:Y,minWidth:0},pageTitleMockedButton:{minWidth:0,display:"flex",alignItems:"center",gap:8,borderRadius:3,paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:5,marginTop:-2,marginBottom:-2,marginLeft:-3,marginRight:-5,background:S&&(J||t)?e.state.hover:void 0},recordTitle:{fontSize:14,fontWeight:v().Wy.medium},statusDotContainer:{display:"flex",alignItems:"center"},statusDotSpacer:{width:K,flexShrink:0},count:{lineHeight:"21px",fontSize:12,color:e.text.secondary,paddingTop:.5}})),[y,S,t,J]),oe=!0!==R&&void 0;return(0,D.jsxs)("div",{style:ie.container,children:[(0,D.jsx)("div",{style:ie.pageTitleAndTimestamp,children:(0,D.jsxs)("div",{style:y?ie.headerMobile:ie.header,children:[i&&d&&(0,D.jsxs)("div",{style:ie.iconHeaderOverride,children:[i,(0,D.jsx)("div",{style:{...ie.recordTitle,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d}),p>1?(0,D.jsx)("div",{style:ie.count,children:p}):null]}),(H||t)&&!i&&!d&&(0,D.jsx)(N().g,{disabled:!J&&!t,children:(0,D.jsx)(B().A,{originGap:3,disableTooltip:!J,alignment:j().C.Start,placement:j().W.Bottom,renderTooltip:te,closeDelay:0,noStyle:!0,textWrap:!0,forceVisibleState:oe,render:e=>(0,D.jsxs)("div",{style:ie.pageTitleMockedButton,...(0,b().A)(e,{onMouseEnter:X,onMouseLeave:ee}),children:[E&&F?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Z,{actorStore:E,avatar:void 0,size:16}),(0,D.jsx)("div",{style:ie.recordTitle,children:F})]}):_?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(M().B,{disabled:!0,icon:$,isEmptyPage:G,size:16}),(0,D.jsx)(w().A,{store:_,style:ie.recordTitle,underline:!0})]}):null,p?(0,D.jsx)("div",{style:ie.count,children:p}):null]})})}),(0,D.jsxs)("div",{style:ie.time,className:m().Cxn,children:[(0,D.jsx)(I().A,{text:W,tooltipText:P,icon:s().k}),c?(0,D.jsx)("div",{style:ie.statusDotContainer,children:(0,D.jsx)(U().m,{size:K})}):(0,D.jsx)("div",{style:ie.statusDotSpacer})]})]})}),y&&(0,D.jsx)("div",{style:{width:C().UM-O,flexShrink:0}})]})}function Z(e){const{actorStore:t,avatar:i}=e,o=e.size??28;return t?t.table===l().GP?(0,D.jsx)(R().A,{botStore:t,size:o}):t.table===c().oo?(0,D.jsx)(z().A,{userStore:t,size:o}):t.table===d().yj?(0,D.jsx)(z().A,{userStore:void 0,size:o}):void(0,p().HB)(t):i?(0,D.jsx)(z().A,{avatar:i,size:o}):(0,D.jsx)(z().A,{userStore:void 0,size:o})}function J(e){let{icon:t}=e;const i=(0,r().IS)((e=>({wrapper:{display:"flex",alignItems:"center",justifyContent:"center",height:24,width:24},icon:{height:20,width:20,fill:e.icon.secondary}})),[]);return(0,D.jsx)("div",{style:i.wrapper,children:t(i.icon)})}const X=o.memo(E)},624030:(e,t,i)=>{i.d(t,{g:()=>r,y:()=>a});var o=i(242343),n=i(163643);const a=o.createContext((()=>{}));function r(e){const{disabled:t=!1,children:i}=e,r=(0,o.useContext)(a),s=(0,o.useCallback)((()=>{t||r(!0)}),[r,t]),d=(0,o.useCallback)((()=>{t||r(!1)}),[r,t]);return(0,n.jsx)("div",{style:{display:"contents"},onMouseEnter:s,onMouseLeave:d,children:i})}a.displayName="NestedNotificationButtonContext"},889358:(e,t,i)=>{i.d(t,{Nx:()=>G,jd:()=>K});var o=i(242343),n=()=>i(237385),a=()=>i(803290),r=()=>i(174114),s=()=>i(214263),d=()=>i(850313),l=()=>i(518797),c=()=>i(409211),u=()=>i(653998),h=()=>i(975392),p=()=>i(76394),v=()=>i(31448),f=()=>i(557067),g=()=>i(84543),m=()=>i(983050),x=()=>i(302376),y=()=>i(502852),b=()=>i(906230),k=()=>i(289113),S=()=>i(773498),C=()=>i(925564),j=()=>i(907721),A=()=>i(413871),T=()=>i(273520),M=()=>i(28210),w=()=>i(709237),B=()=>i(103151),R=()=>i(951156),z=()=>i(482570),L=()=>i(206363),I=()=>i(709356),U=()=>i(874413),N=()=>i(624030),D=i(163643);const W=0,K=8;function P(e){const{notification:t,children:s,header:d,subheader:l,body:c,rootStore:u,count:h,onArchiveClicked:p,onUnarchiveClicked:m,onMarkAsReadClicked:x,onMarkAsUnreadClicked:b,onNotificationBodyClicked:k,url:S,isFirst:j,isLast:M,disableLineClamp:w}=e,B=(0,n().v3)(),R=(0,n().Y0)(),z=parseInt(t.end_time),L=(0,a().K8)((()=>{const e=t.navigable_block_id;if(e)return A().sk.createChildStore(u,{table:i(145017).ev,id:e,spaceId:u.id})}),[u,t.navigable_block_id]),I=(0,a().K8)((()=>L||e.notificationTitleStore),[L,e.notificationTitleStore]),U=(0,a().K8)((()=>i(271748).default.isPeekDismissableState()),[]),[K,P]=(0,o.useState)(!1),[H,E]=(0,o.useState)(!1),O=(0,o.useRef)(null),_=(0,i(25058).A)({onLongPress:()=>{var e;return null===(e=O.current)||void 0===e?void 0:e.setOpen(!0)}}),[$,Q]=(0,o.useState)(!1),Y=K&&!H&&!$,G=(0,a().K8)((()=>"mentions"===i(264109).Ay.state.currentTab),[]),Z=!t||t.read,J=R.isMobile,X=(0,a().K8)((()=>{const e=B.WindowSizeStore.state;return{left:e.paddingLeftCSS,right:e.paddingRightCSS}}),[B.WindowSizeStore]),q=(0,r().IS)((e=>({article:{display:"flex",flexDirection:"column"},mainClickTargetButton:{display:"flex",flexDirection:"column",gap:4,paddingTop:14-W,paddingBottom:14-W,paddingLeft:J?X.left:0,paddingRight:J?X.right:0,marginTop:j?0:W,marginBottom:M?0:W,marginLeft:W,marginRight:W,transition:"background 150ms ease"},mainClickTargetButtonHovered:{background:e.state.hover},header:{display:"flex",paddingLeft:16-W,paddingRight:16-W,maxWidth:"100%"},subheaderAndBody:{display:"flex",flexDirection:"column"},subheader:{paddingLeft:40-W,paddingRight:16-W,fontSize:14,fontWeight:v().Wy.regular,color:e.text.primary,...v().RC},body:{paddingLeft:40-W,paddingRight:16-W,fontSize:14,color:e.text.secondary,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:w?void 0:2,overflow:"hidden"},children:{paddingTop:4,paddingLeft:40-W,paddingRight:16-W},divider:{height:1,backgroundColor:e.stroke.secondary},buttonPressed:{backgroundColor:K&&H?e.buttonBackground:e.state.pressed}})),[J,X.left,X.right,j,M,K,H,w]),ee=(0,o.useCallback)((e=>{t&&($||(!S&&t.read||k(),(0,y().SQ)({event:e,context:y().y$.NotificationClick,callback:()=>{!U||e.metaKey||e.ctrlKey||i(610489).VI({environment:B}),t.read||g().createAndCommit({userAction:"ActivityNotificationSection.handleMarkAsRead",environment:B,canUndo:!0,perform:e=>{f().ZB({notification:t,rootStore:u,transaction:e,read:!0})}})}})))}),[B,$,t,k,U,u,S]),te=(0,o.useCallback)((e=>{t&&(0,y().SQ)({event:e,context:y().y$.NotificationClick,callback:()=>{t.read?b():x(),g().createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:B,canUndo:!0,perform:e=>{f().ZB({notification:t,rootStore:u,transaction:e,read:!t.read})}})}})}),[B,t,x,b,u]),ie=(0,o.useCallback)((e=>{t&&(0,y().SQ)({event:e,context:y().y$.NotificationClick,callback:()=>{p(),g().createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:B,canUndo:!0,perform:e=>{f().s4({notification:t,rootStore:u,transaction:e})}})}})}),[B,t,p,u]),oe=(0,o.useCallback)((e=>{t&&(0,y().SQ)({event:e,context:y().y$.NotificationClick,callback:()=>{m(),g().createAndCommit({userAction:"Activity.handleUnarchive",environment:B,canUndo:!0,perform:e=>{f().JV({notificationId:t.id,visited:!1,rootStore:u,transaction:e})}})}})}),[B,t,m,u]),ne=(0,o.useCallback)((()=>P(!0)),[]),ae=(0,o.useCallback)((()=>P(!1)),[]),re=(0,o.useId)(),se=(0,i(190094).T4)();return"actor"===(0,i(101558).r)("notification_ia")?(0,D.jsx)(i(449911).my,{...e}):(0,D.jsx)(T().Ay,{ref:O,disabled:!R.isMobile,style:se.popup,popupType:R.isTablet?T().z7.Popup:T().z7.BottomSheet,render:e=>(0,D.jsx)(C().Lk,{blockStore:L,notification:t,handlers:{handleUnarchive:oe,handleArchive:ie,toggleNotificationReadStatus:te},closePopup:()=>e.close()}),renderOrigin:()=>(0,D.jsx)("div",{...R.isMobile&&_,children:(0,D.jsx)("article",{style:q.article,onMouseOver:ne,onMouseLeave:ae,children:(0,D.jsxs)(N().y.Provider,{value:E,children:[(0,D.jsx)(F,{notification:t,rootStore:u,isMobile:J,isHovered:K,isFirst:j,onMouseEnter:()=>Q(!0),onMouseLeave:()=>Q(!1),onArchiveClicked:p,onUnarchiveClicked:m,onMarkAsReadClicked:x,onMarkAsUnreadClicked:b}),(0,D.jsxs)(i(417653).A,{href:S,hovered:Y,ignoreLocalHoverState:!0,style:q.mainClickTargetButton,onClick:ee,hoveredStyle:q.mainClickTargetButtonHovered,disabled:!Boolean(S),pressedStyle:q.buttonPressed,"aria-labelledby":re,children:[(0,D.jsx)("div",{style:q.header,children:d?(0,D.jsx)(V,{icon:d.icon,header:d.title,timestamp:z,titleAriaId:re,showBlueDot:G&&!Z,count:h}):(0,D.jsx)(V,{notificationTitleStore:I,timestamp:z,titleAriaId:re,showBlueDot:G&&!Z,count:h})}),(0,D.jsxs)("div",{style:q.subheaderAndBody,children:[l&&(0,D.jsx)("div",{style:q.subheader,children:l}),c&&(0,D.jsx)("div",{style:q.body,children:c}),s&&(0,D.jsx)("div",{style:q.children,children:s})]})]}),!M&&(0,D.jsx)("div",{style:q.divider})]})})})},t.id)}const H=12-W,E=12-W,O="100ms ease-out";function F(e){const{notification:t,rootStore:i,isMobile:o,isHovered:n,isFirst:a,onArchiveClicked:s,onUnarchiveClicked:d,onMarkAsReadClicked:l,onMarkAsUnreadClicked:c,onMouseEnter:u,onMouseLeave:h}=e,p=(0,r().IS)((()=>({container:{display:"flex",alignItems:"flex-start",position:"relative",zIndex:1},body:{transition:`opacity ${O}`,opacity:o||n?1:0,position:"absolute",right:H,top:E+(o?-3:0)+(a?0:W)}})),[o,n,a]);return t?(0,D.jsx)("div",{style:p.container,onMouseEnter:u,onMouseLeave:h,children:(0,D.jsx)("div",{style:p.body,children:(0,D.jsx)(S().hR,{notification:t,rootStore:i,onArchiveClicked:s,onUnarchiveClicked:d,onMarkAsReadClicked:l,onMarkAsUnreadClicked:c})})}):null}const _=14,$=12,Q=8;function V(e){const{notificationTitleStore:t,icon:i,header:d,timestamp:l,showBlueDot:c,count:p}=e,f=(0,n().Y0)(),g=(0,u().tz)(),y=f.isMobile,[S,T]=(0,o.useState)(!1),[R,z]=(0,o.useState)(!1),W=(0,k().nl)(l,{useUltraCompactFormat:!0}),P=(0,k().x$)(l),E=(0,a().K8)((()=>{if(t instanceof A().Bv)return t}),[t]),{actorStore:O,actorName:F}=(0,a().K8)((()=>{if(t instanceof A().LU||t instanceof A().vK||t instanceof A().pH){return t?{actorStore:t,actorName:t.getDisplayName(g)}:{actorStore:void 0,actorName:void 0}}return{actorStore:void 0,actorName:void 0}}),[t,g]),V=(0,a().K8)((()=>{if(!(t instanceof A().pS||t instanceof A().LU||t instanceof A().vK||t instanceof A().pH))return t}),[t]),G=(0,a().K8)((()=>{var e;if(V)return null===(e=V.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:V.getRecordModel})}),[V]),Z=(0,a().K8)((()=>!!E&&E.isEmptyPage()),[E]),J=(0,a().K8)((()=>null==E?void 0:E.isDefined()),[E]),X=(0,o.useCallback)((()=>{T(!0),z(!1)}),[]),q=h().nF((()=>{z(!0)}),200,{leading:!0}),ee=(0,o.useCallback)((()=>{T(!1),z(!1),x().Ol(window,"scroll",q,!0)}),[q]),te=(0,o.useCallback)((e=>(0,D.jsx)(L().yf,{store:E,events:e})),[E]);(0,o.useEffect)((()=>(x().P4(window,"scroll",q,!0),()=>x().Ol(window,"scroll",q,!0))),[q]);const ie=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"row",minWidth:0,width:"100%",marginTop:2},iconHeaderOverride:{display:"flex",flexDirection:"row",gap:8,alignItems:"center"},headerMobile:{fontSize:_,minWidth:0},header:{display:"inline-grid",gridAutoFlow:"column",justifyContent:"space-between",fontSize:_,gap:12,minWidth:0},time:{display:"flex",gap:8,fontSize:$,color:e.text.tertiary,whiteSpace:"nowrap",...y&&{display:"inline"},marginTop:_-$},pageTitleAndTimestamp:{display:"flex",flex:1,flexDirection:"column",gap:Q,minWidth:0},pageTitleMockedButton:{minWidth:0,display:"flex",alignItems:"center",gap:8,borderRadius:3,paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:5,marginTop:-2,marginBottom:-2,marginLeft:-3,marginRight:-5,background:S&&(J||t)?e.state.hover:void 0},recordTitle:{fontSize:14,fontWeight:v().Wy.medium},statusDotContainer:{display:"flex",alignItems:"center"},statusDotSpacer:{width:K,flexShrink:0},count:{lineHeight:"21px",fontSize:12,color:e.text.secondary,paddingTop:.5}})),[y,S,t,J]),oe=!0!==R&&void 0;return(0,D.jsxs)("div",{style:ie.container,children:[(0,D.jsx)("div",{style:ie.pageTitleAndTimestamp,children:(0,D.jsxs)("div",{style:y?ie.headerMobile:ie.header,children:[i&&d&&(0,D.jsxs)("div",{style:ie.iconHeaderOverride,children:[i,(0,D.jsx)("div",{style:ie.recordTitle,children:d})]}),(E||t)&&!i&&!d&&(0,D.jsx)(N().g,{disabled:!J&&!t,children:(0,D.jsx)(B().A,{originGap:3,disableTooltip:!J,alignment:j().C.Start,placement:j().W.Bottom,renderTooltip:te,closeDelay:0,noStyle:!0,textWrap:!0,forceVisibleState:oe,render:e=>(0,D.jsxs)("div",{style:ie.pageTitleMockedButton,...(0,b().A)(e,{onMouseEnter:X,onMouseLeave:ee}),children:[O&&F?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Y,{actorStore:O,avatar:void 0,size:16}),(0,D.jsx)("div",{style:ie.recordTitle,children:F})]}):V?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(M().B,{disabled:!0,icon:G,isEmptyPage:Z,size:16}),(0,D.jsx)(w().A,{store:V,style:ie.recordTitle,underline:!0})]}):null,p?(0,D.jsx)("div",{style:ie.count,children:p}):null]})})}),(0,D.jsxs)("div",{style:ie.time,className:m().Cxn,children:[(0,D.jsx)(I().A,{text:W,tooltipText:P,icon:s().k}),c?(0,D.jsx)("div",{style:ie.statusDotContainer,children:(0,D.jsx)(U().m,{size:K})}):(0,D.jsx)("div",{style:ie.statusDotSpacer})]})]})}),y&&(0,D.jsx)("div",{style:{width:C().UM-H,flexShrink:0}})]})}function Y(e){const{actorStore:t,avatar:i}=e,o=e.size??28;return t?t.table===l().GP?(0,D.jsx)(R().A,{botStore:t,size:o}):t.table===c().oo?(0,D.jsx)(z().A,{userStore:t,size:o}):t.table===d().yj?(0,D.jsx)(z().A,{userStore:void 0,size:o}):void(0,p().HB)(t):i?(0,D.jsx)(z().A,{avatar:i,size:o}):(0,D.jsx)(z().A,{userStore:void 0,size:o})}const G=o.memo(P)}}]);