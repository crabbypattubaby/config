"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[66406],{5758:(e,t,s)=>{s.d(t,{c:()=>d});s(725707),s(491955),s(403517);var i=()=>s(237385),n=()=>s(803290),a=()=>s(486540),o=()=>s(76394),r=()=>s(153642),l=()=>s(485966);function d(){const e=(0,i().v3)().currentUser.id,t=(0,n().O$)(l().AppStoreCurrentSpaceViewStore),s=(0,r().V)()??1;return(0,n().K8)((()=>!(!e||null==t||!t.isDefined())&&(0,a().z8)({userId:e,teamsThatUserIsANonGuestMemberOf:t.getNonGuestTeamsStores().map((e=>e.getModel())).filter(o().O9),spaceMembersCount:s})),[e,t,s])}},51082:(e,t,s)=>{s.d(t,{P:()=>n});s(242343);var i=s(163643);const n=(0,s(680369).wt)("peopleFillCheckmark",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M14.5391 10.3174C14.4115 10.3174 14.2975 10.29 14.1973 10.2354C14.097 10.1807 13.999 10.0964 13.9033 9.98242L12.29 8.01367C12.1715 7.86328 12.1123 7.70833 12.1123 7.54883C12.1123 7.38021 12.1693 7.23665 12.2832 7.11816C12.4017 6.99967 12.5452 6.94043 12.7139 6.94043C12.8141 6.94043 12.9053 6.96322 12.9873 7.00879C13.0739 7.0498 13.1582 7.12272 13.2402 7.22754L14.5117 8.84082L17.2188 4.51367C17.3555 4.28581 17.5309 4.17188 17.7451 4.17188C17.9046 4.17188 18.0482 4.22428 18.1758 4.3291C18.3034 4.42936 18.3672 4.56608 18.3672 4.73926C18.3672 4.81673 18.349 4.89648 18.3125 4.97852C18.2806 5.05599 18.2419 5.12891 18.1963 5.19727L15.1406 9.97559C14.9948 10.2035 14.7943 10.3174 14.5391 10.3174ZM2.85645 16.2441C2.47363 16.2441 2.17285 16.1576 1.9541 15.9844C1.73535 15.8112 1.62598 15.5742 1.62598 15.2734C1.62598 14.8314 1.75814 14.3688 2.02246 13.8857C2.29134 13.4027 2.67643 12.9492 3.17773 12.5254C3.68359 12.1016 4.29199 11.7575 5.00293 11.4932C5.71387 11.2288 6.51139 11.0967 7.39551 11.0967C8.28418 11.0967 9.08398 11.2288 9.79492 11.4932C10.5059 11.7575 11.112 12.1016 11.6133 12.5254C12.1191 12.9492 12.5065 13.4027 12.7754 13.8857C13.0443 14.3688 13.1787 14.8314 13.1787 15.2734C13.1787 15.5742 13.0693 15.8112 12.8506 15.9844C12.6318 16.1576 12.3311 16.2441 11.9482 16.2441H2.85645ZM7.40234 9.87988C6.9056 9.87988 6.44759 9.74544 6.02832 9.47656C5.61361 9.20768 5.27865 8.84538 5.02344 8.38965C4.77279 7.93392 4.64746 7.4235 4.64746 6.8584C4.64746 6.30241 4.77279 5.80111 5.02344 5.35449C5.27865 4.90332 5.61589 4.54557 6.03516 4.28125C6.45443 4.01693 6.91016 3.88477 7.40234 3.88477C7.89909 3.88477 8.3571 4.01465 8.77637 4.27441C9.19564 4.53418 9.5306 4.88965 9.78125 5.34082C10.0365 5.78743 10.1641 6.28874 10.1641 6.84473C10.1641 7.41439 10.0365 7.92936 9.78125 8.38965C9.5306 8.84538 9.19564 9.20768 8.77637 9.47656C8.3571 9.74544 7.89909 9.87988 7.40234 9.87988Z"})})},127086:(e,t,s)=>{s.d(t,{KG:()=>o,Xx:()=>a});var i=()=>s(129978);const n={SlackImportContactsButton:new(i().O2)("SlackImportContactsButton",(()=>s.e(55901).then(s.bind(s,33829)))),GoogleImportContactsButton:new(i().O2)("GoogleImportContactsButton",(()=>s.e(37398).then(s.bind(s,326638))))},a=(0,i()._h)(n.SlackImportContactsButton,(e=>e.default)),o=(0,i()._h)(n.GoogleImportContactsButton,(e=>e.GoogleImportContactsButton))},168446:(e,t,s)=>{s.d(t,{U4:()=>y,Wz:()=>j,e6:()=>x,fC:()=>b,zA:()=>v});s(725707),s(491955),s(403517),s(113085);var i=s(242343),n=()=>s(237385),a=()=>s(803290),o=()=>s(162901),r=()=>s(409211),l=()=>s(365928),d=()=>s(975392),c=()=>s(141666),u=()=>s(246777),g=()=>s(818369),p=()=>s(84543),m=()=>s(307542),f=()=>s(764755),h=()=>s(485966),S=()=>s(413871);function x(e){let{spaceStore:t,requestType:s}=e;const i=b({spaceStore:t}),r=(0,n().v3)(),[{value:l=[]}]=(0,o().Yb)((async()=>{if(!i)return;const e=await g().callApi({eventName:"getAccessRequests",environment:r,data:{parentTable:"space",parentId:t.id,size:100,status:"pending"}});if("failed"===e.type)throw e.error;const s=e.data.accessRequestIds;return u().si(r,t,s)}),[t,r,i]),c=(0,a().K8)((()=>l.filter((e=>"pending"===e.accessRequest.status))),[l]),p=(0,f().T)({spaceStore:t,requests:c}),m=(0,a().K8)((()=>(0,d().yU)(c,p??[]).filter((e=>{const[t,i]=e;return"member"===s&&"space_membership_request"===i||("guest"===s&&"guest_invite_request"===i||"member_or_guest"===s&&("guest_invite_request"===i||"space_membership_request"===i))})).map((e=>{let[t]=e;return t}))),[s,p,c]);return(0,d().oE)(m)}function b(e){let{spaceStore:t}=e;return(0,a().K8)((()=>t.canEditMembership()&&(0,m().x3)()),[t])}function v(e){let{spaceStore:t,guests:s,internalDomains:i}=e;return(0,a().K8)((()=>{const e=s.map((e=>S().LU.createChildStore(t,{table:r().oo,id:e.userId}).getModel())).some((e=>(0,l().JD)(e,i)));return t.canEditMembership()&&e&&"enterprise"!==t.getSubscriptionTier()}),[s,i,t])}function y(e){let{requestType:t,spaceStore:s}=e;const i=x({spaceStore:s,requestType:t});return(0,a().K8)((()=>{const{currentSpaceViewStore:e}=h().default.state;if(e)return i.filter((s=>{const i=function(e){var t,s;let{requestType:i,currentSpaceViewStore:n}=e;const a=Date.now()-10*c().Gq,o="member"===i?null===(t=n.getSettings())||void 0===t?void 0:t.last_opened_member_request_tab:null===(s=n.getSettings())||void 0===s?void 0:s.last_opened_guest_request_tab;return o??a}({requestType:t,currentSpaceViewStore:e});return i<s.accessRequest.created_time})).length}),[t,i])}function j(e){let{requestType:t,spaceStore:s}=e;const a=(0,n().v3)(),o=b({spaceStore:s});(0,i.useEffect)((()=>{const{currentSpaceViewStore:e}=h().default.state;e&&o&&"member"!==t&&p().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:a,canUndo:!0,perform:t=>{p().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_guest_request_tab"],command:"set",args:Date.now()},transaction:t})}})}),[t,a,o]),(0,i.useEffect)((()=>()=>{const{currentSpaceViewStore:e}=h().default.state;e&&o&&"guest"!==t&&p().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:a,canUndo:!0,perform:t=>{p().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_member_request_tab"],command:"set",args:Date.now()},transaction:t})}})}),[t,a,o])}},204507:(e,t,s)=>{s.d(t,{L:()=>n});class i extends(()=>s(129044))().default{getInitialState(){return{open:!1,type:void 0}}}const n=new i},206924:(e,t,s)=>{s.d(t,{F:()=>a});s(242343);var i=s(163643);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M9.533 5.813a.625.625 0 0 1 .884 0l2.5 2.5a.625.625 0 1 1-.884.884l-1.408-1.408v3.966a.625.625 0 1 1-1.25 0V7.739L7.917 9.197a.625.625 0 0 1-.884-.884z"}),(0,i.jsx)("path",{d:"M15.5 3.13c1.174 0 2.125.951 2.125 2.125v7.5A2.125 2.125 0 0 1 15.5 14.88h-4.935l-3.871 2.978a.625.625 0 0 1-1.006-.496V14.88H4.5a2.125 2.125 0 0 1-2.125-2.125v-7.5c0-1.174.951-2.125 2.125-2.125zm.875 2.125a.875.875 0 0 0-.875-.875h-11a.875.875 0 0 0-.875.875v7.5c0 .483.392.875.875.875h1.813c.345 0 .625.28.625.625v1.838l3.033-2.334a.63.63 0 0 1 .381-.13H15.5a.875.875 0 0 0 .875-.874z"})]})},a=(0,s(680369).wt)("commentArrowUp",n)},226518:(e,t,s)=>{s.d(t,{J:()=>l});var i=()=>s(237385),n=()=>s(803290),a=()=>s(485966),o=()=>s(133926),r=()=>s(785061);function l(){const e=(0,n().O$)(a().AppStoreCurrentSpaceStore),t=(0,i().v3)(),s=(0,n().K8)((()=>{var e;return null===(e=t.currentUser)||void 0===e?void 0:e.id}),[t]),l=(0,n().K8)((()=>t.device.isMobile),[t]),d=(0,o().P9)({name:"slack_imports_invite",spaceId:null==e?void 0:e.id,userId:s}),c=(0,o().P9)({name:"google_imports_invite",spaceId:null==e?void 0:e.id,userId:s}),u=(0,n().K8)((()=>(null==e?void 0:e.canEditMembership())??!1),[e]);return(0,r().vC)({canEditPermission:u,isMobile:l,hasAccessToFeature:(d||c)??!1})}},234966:(e,t,s)=>{s.r(t),s.d(t,{iconDefinition:()=>n,personCircleIcon:()=>a});s(242343);var i=s(163643);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M7.755 6.169C8.277 5.519 9.05 5.125 10 5.125s1.723.393 2.245 1.044c.51.635.75 1.474.75 2.346s-.24 1.71-.75 2.346c-.522.65-1.294 1.044-2.245 1.044-.95 0-1.723-.394-2.245-1.044-.51-.635-.75-1.474-.75-2.346s.24-1.711.75-2.346m.975.782c-.293.365-.475.909-.475 1.564s.182 1.198.475 1.564c.281.35.694.576 1.27.576s.989-.226 1.27-.576c.294-.366.475-.909.475-1.564s-.181-1.199-.475-1.564c-.281-.35-.693-.576-1.27-.576-.576 0-.989.225-1.27.576"}),(0,i.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 0 0-4.087 11.267c.789-1.397 2.333-2.33 4.087-2.33s3.298.933 4.087 2.33A6.375 6.375 0 0 0 10 3.625M13.049 15.6c-.547-1.049-1.697-1.789-3.05-1.789-1.351 0-2.501.74-3.048 1.789a6.35 6.35 0 0 0 3.049.775 6.34 6.34 0 0 0 3.049-.775"})]})},a=(0,s(680369).wt)("personCircle",n)},245726:(e,t,s)=>{s.d(t,{F:()=>a});s(242343);var i=s(163643);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M7.975 5.175a.55.55 0 1 0 0 1.1h4.05a.55.55 0 1 0 0-1.1zm-.55 2.692a.55.55 0 0 1 .55-.55h4.05a.55.55 0 1 1 0 1.1h-4.05a.55.55 0 0 1-.55-.55"}),(0,i.jsx)("path",{d:"M2.4 4.861c0-1.092.883-1.975 1.975-1.975h8.55c1.092 0 1.975.883 1.975 1.975v7.889h2.075c.345 0 .625.28.625.625v1.8a1.973 1.973 0 0 1-1.975 1.975h-8.55A1.973 1.973 0 0 1 5.1 15.175V7.25H3.025a.625.625 0 0 1-.625-.625zM9.554 15.9h6.07a.723.723 0 0 0 .726-.725V14H9.5v1.175c0 .256-.049.5-.137.725zm-2.025 0c.4-.002.72-.325.72-.725v-1.8c0-.345.28-.625.626-.625h4.775V4.861a.723.723 0 0 0-.725-.725H6.213c.088.224.137.469.137.725v10.314c0 .402.323.725.725.725zM5.1 4.861a.723.723 0 0 0-.724-.725.723.723 0 0 0-.725.725V6H5.1z"})]})},a=(0,s(680369).wt)("scroll",n)},254613:(e,t,s)=>{s.d(t,{x:()=>p});s(242343);var i=()=>s(653998),n=()=>s(884373),a=()=>s(309461),o=()=>s(629457),r=()=>s(622286),l=()=>s(397066),d=()=>s(196439),c=()=>s(180746),u=()=>s(965624),g=s(163643);function p(){const e=(0,i().tz)(),t=(0,r().X)("offline_clear_cache");return(0,g.jsxs)(a().Ay,{children:[(0,g.jsx)(o().A,{large:!0,divider:"full",children:e.formatMessage(l().y.offlineSettingsTitle)}),(0,g.jsx)(n().A,{size:24,isHidden:!0}),t?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u().L,{}),(0,g.jsx)(n().A,{size:80})]}):null,(0,g.jsx)(d().N,{}),(0,g.jsx)(n().A,{size:80}),(0,g.jsx)(c().v4,{})]})}},284551:(e,t,s)=>{s.d(t,{A:()=>l,C:()=>d});s(242343);var i=()=>s(998865),n=()=>s(360877),a=()=>s(127086),o=()=>s(422340),r=s(163643);function l(e){const{onInviteClick:t,onInviteComplete:s,buttonStyle:a,buttonContainerStyle:o}=e;return[{key:"slack_imports",render:()=>(0,r.jsx)(n().R,{inviteOrigin:"space_setting_slack_dropdown",canEditPermission:!0,onInviteClick:t,onInviteComplete:s,buttonLabel:(0,r.jsx)(i().$c,{type:"slack"}),buttonStyle:a,buttonContainerStyle:o}),action:()=>{}},{key:"google_imports",render:()=>(0,r.jsx)(i().aI,{inviteOrigin:"space_setting_google_dropdown",canEditPermission:!0,onInviteClick:t,onInviteComplete:s,buttonLabel:(0,r.jsx)(i().$c,{type:"google"}),buttonStyle:a,buttonContainerStyle:o}),action:()=>{}}]}function d(e){const{onClickAuthenticated:t,hideChevronIcon:s,containerStyle:n,buttonStyle:l,flowId:d}=e;return[{key:"slack_imports",render:()=>(0,r.jsx)(a().Xx,{onClickAuthenticated:()=>t(o().NL.Slack),title:(0,r.jsx)(i().$c,{type:"slack"}),containerStyle:n,buttonStyle:l,from:"share_menu",inviteOrigin:"page_share_modal",flowId:d,loadContacts:!0,hideChevronIcon:s}),action:()=>{}},{key:"google_imports",render:()=>(0,r.jsx)(a().KG,{onClickAuthenticated:()=>t(o().NL.Google),containerStyle:n,buttonStyle:l,from:"share_menu",inviteOrigin:"page_share_modal",flowId:d,loadContacts:!0,hideChevronIcon:s,buttonLabel:(0,r.jsx)(i().$c,{type:"google"})}),action:()=>{}}]}},289610:(e,t,s)=>{s.r(t),s.d(t,{SpaceSettings:()=>vh,UserName:()=>ah});s(610931);var i=s(242343),n=()=>s(862510),a=()=>s(237385),o=()=>s(269280),r=()=>s(803290),l=()=>s(174114),d=()=>s(413161),c=()=>s(748267),u=()=>s(392258),g=()=>s(214144),p=()=>s(647242),m=()=>s(455831),f=()=>s(653998),h=()=>s(975392),S=()=>s(31448),x=()=>s(246777),b=()=>s(69481),v=()=>s(505381),y=()=>s(168907),j=()=>s(145046),A=()=>s(336519),C=()=>s(110975),w=()=>s(783759),M=()=>s(530880),T=()=>s(13769),k=()=>s(84543),I=()=>s(658388),D=(s(333225),s(494367),s(516262),s(573119),s(240480),s(950443),s(619601),s(725707),s(771702),()=>s(16456)),P=()=>s(524118),R=()=>s(519423),_=()=>s(394591),B=()=>s(518797),E=()=>s(409211),U=()=>s(818369),L=()=>s(868325),O=()=>s(477784),W=()=>s(509484),z=()=>s(614046),q=()=>s(129044);class F extends q().default{getInitialState(){return{spaceId:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const N=new F;class G extends q().default{getInitialState(){return{cachedResponses:{}}}getCursor(e,t,s){if(s<=1||this.state.spaceId!==e)return;const i=(0,z()._)(t);if(this.state.filterStr!==i)return;const n=this.state.cachedResponses[s-1];return"success"===n.status?null==n?void 0:n.nextCursor:void 0}startLoading(e,t){this.updateResultHelper(e,t,{status:"loading"})}updateLoadedResult(e,t,s){this.updateResultHelper(e,t,{...s,status:"success",loadedAt:Date.now()})}updateError(e,t){this.updateResultHelper(e,t,{status:"error"})}updateResultHelper(e,t,s){const i=(0,z()._)(t);1!==t.pageNum&&this.state.spaceId===e&&this.state.filterStr===i?this.setState({spaceId:e,filterStr:i,cachedResponses:{...this.state.cachedResponses,[t.pageNum]:{...s}}}):this.setState({spaceId:e,filterStr:i,cachedResponses:{[t.pageNum||1]:{...s}}})}}const K=new G,V=(0,f().YK)({loadCurrentAuditLogError:{id:"auditlog.error.loadCurrentAuditLogError",defaultMessage:"Failed to load audit logs"}});async function H(e){const{environment:t,spaceId:s}=e,i=await U().callApi({eventName:"getHistoricalAuditLogUsers",environment:t,data:{spaceId:s}});return"success"!==i.type?[]:i.data.results}async function $(e){const{environment:t,spaceId:s}=e;if(N.getState().spaceId!==s&&N.reset(),!s)return;const i=await W().T.searchActions.load(),[n,a]=await Promise.all([i.searchSpaceActorIds({environment:t,membersOnly:!1}),H({environment:t,spaceId:s})]),o={spaceId:s,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set};n.userIds.forEach((e=>{o.allUserIds.add(e)})),n.botIds.forEach((e=>{o.allBotIds.add(e)})),a.forEach((e=>{var t;(t=e.actorId)!==B().eR.id&&t!==E().BF.id&&t!==E().mc.id||o.allUserIds.has(e.actorId)?e.actorType!==E().oo||o.allUserIds.has(e.actorId)?e.actorType!==B().GP||o.allBotIds.has(e.actorId)||(o.allBotIds.add(e.actorId),o.removedBotIds.add(e.actorId)):(o.allUserIds.add(e.actorId),o.removedUserIds.add(e.actorId)):o.allUserIds.add(e.actorId)})),N.setState(o)}var Y=()=>s(427091),J=()=>s(634444),Q=()=>s(545046),Z=(s(491955),s(403517),()=>s(950635)),X=()=>s(678523),ee=()=>s(415806),te=()=>s(151258),se=()=>s(698995),ie=()=>s(413871),ne=()=>s(577040),ae=s(163643);const oe=(0,f().j4)((function(e){const{parentStore:t,auditLogHistoricalUserStore:n,selectedActors:o,onChange:r,intl:l}=e,d=(0,a().v3)(),[c,u]=(0,i.useState)(new Set(o.map(ne().Ht))),g=(0,ae.jsx)(f().sA,{id:"auditlogActorFilter.title",defaultMessage:"User"}),p=(0,i.useCallback)((()=>{const e=Array.from(c).map(ne().Hl).filter((e=>void 0!==e));r(e)}),[c,r]),m=(0,i.useCallback)((()=>{const e=o.map(ne().Ht);u(new Set(e))}),[o]),h=(0,i.useCallback)((e=>{"applyButton"!==e?m():p()}),[p,m]);return(0,ae.jsx)(J().A,{mode:J().C.Pill,title:g,icon:s(446656).z,iconStyles:{marginRight:2},items:Array.from(c),hasItemsSelected:(null==o?void 0:o.length)>0,onChange:e=>{u(new Set(e))},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:h,labelText:{title:g,tokenInputPlaceholder:l.formatMessage({defaultMessage:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:l.formatMessage({defaultMessage:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"},performRequest:e=>async function(e){let{args:t,auditLogHistoricalUserStore:s,selectedActors:i,environment:n}=e;const{query:a}=t,{allUserIds:o,allBotIds:r}=s.getState(),l=100,d=await W().T.searchActions.load(),c=await d.searchActorsById({environment:n,query:a,userIds:[...o],botIds:[...r]}),u=[...c.users.map((e=>`notion_user:${e.id}`)),...c.bots.map((e=>`bot:${e.id}`))];if(a.length>0)return u.slice(0,l);const g=i.map(ne().Ht),p=new Set(g),m=u.filter((e=>!p.has(e)));return[...g,...m].slice(0,Math.max(g.length,l))}({args:e,auditLogHistoricalUserStore:n,selectedActors:o,environment:d}),renderResultMenuItem:(e,s)=>{var i;const a=de(e,t);return(0,ae.jsx)(re,{...s,item:e,tempActorSelections:c,showRemovedBadge:n.isUserOrBotRemoved(null===(i=a.asActor)||void 0===i?void 0:i.id),actor:a,intl:l})},renderToken:(e,s)=>(0,ae.jsx)(le,{item:e,handlers:s,tempActorSelections:c,parentStore:t}),renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})})),re=(0,i.forwardRef)(((e,t)=>{const{item:s,intl:i,tempActorSelections:n,showRemovedBadge:a,actor:o}=e,l=(0,r().K8)((()=>(0,Z().lR)(i,o)),[i,o]);return(0,ae.jsx)(se().A,{...e,ref:t,actor:o,useEmailAsTooltip:!0,isChecked:n.has(s),userTitle:(0,ae.jsxs)("div",{style:{display:"flex",gap:4},children:[l,a&&(0,ae.jsx)(X().A,{children:(0,ae.jsx)(f().sA,{id:"auditlogActorFilter.removed_user",defaultMessage:"Removed"})})]})})}));function le(e){let{item:t,handlers:s,tempActorSelections:i,parentStore:n}=e;const a=1===i.size,o=(0,r().K8)((()=>de(t,n)),[n,t]);return o?(0,ae.jsx)(ee().Ay,{format:te().mI.Small,showRemoveButton:!0,isSingle:a,onClickRemove:s.onRemove,actor:o,shouldShrink:!0},t):null}function de(e,t){const s=(0,ne().Hl)(e);return s?"notion_user"===s.actorType?(0,Z().MR)(function(e,t){return ie().LU.createChildStore(t,{table:E().oo,id:e}).getModel()}(s.actorId,t)):(0,Z().oC)(function(e,t){return ie().vK.createChildStore(t,{table:B().GP,id:e}).getModel()}(s.actorId,t)):(0,Z().MR)(void 0)}re.displayName="ResultMenuItem";const ce=(0,f().YK)({auditLogNotSupportedDateRangeError:{id:"auditLog.dateTimeRangeMenu.notSupportedDateRange",defaultMessage:"Audit Log retains events from the past year."}});const ue=(0,f().j4)((function(e){const{spaceStore:t,intl:i}=e,[n,a]=(0,r().$y)(z().A),[o,l,d]=(0,r().$y)(N),c=(0,r().uB)(void 0,Q().D),u=(0,r().uB)(void 0,Q().D),g=(0,D().ah)((0,Y().P)());return(0,ae.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,ae.jsx)(s(849417).A,{mode:J().C.Pill,focused:!1,title:(0,ae.jsx)(f().sA,{id:"auditlogDateFilter.title",defaultMessage:"Date"}),icon:s(214263).k,value:n.timeRange,showButtons:"footer",onChange:e=>{a({...n,timeRange:e,pageNum:1})},minDate:g.minus({years:1}),maxDate:g.endOf("day"),customErrorMessage:e=>{if(e===s(922126).$.NOT_SUPPORTED)return i.formatMessage(ce.auditLogNotSupportedDateRangeError)}}),(0,ae.jsx)(oe,{parentStore:t,auditLogHistoricalUserStore:d,selectedActors:n.actors,onChange:e=>{a({...n,actors:e,pageNum:1})}}),(0,ae.jsx)(s(785435).A,{lastSelectionStore:c,componentStore:u,onChange:e=>{a({...n,actions:e,pageNum:1})}})]})}));var ge=()=>s(629457);function pe(){return(0,ae.jsx)(ge().A,{large:!0,style:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:S().Wy.medium,display:"flex",justifyContent:"space-between"},children:(0,ae.jsx)("div",{style:{gap:8,display:"flex"},children:(0,ae.jsx)(f().sA,{id:"auditlog.title",defaultMessage:"Audit log"})})})}var me=()=>s(668649),fe=()=>s(91472),he=()=>s(537311),Se=()=>s(126451),xe=()=>s(103151),be=()=>s(35462),ve=()=>s(307542),ye=()=>s(907721),je=()=>s(150957);function Ae(e){const{auditLogEntry:t,spaceStore:s,id:n}=e,a=(0,f().tz)(),o=(0,r().K8)((()=>{if(t.actor.actorType===E().oo){const e=ie().LU.createChildStore(s,{id:t.actor.actorId,table:E().oo});if(e.isDefined()&&!e.getIsDeleted())return{actorStore:e};if(t.actor.email)return{avatar:{name:t.actor.name,email:t.actor.email}}}else if(t.actor.actorType===B().GP){const e=ie().vK.createChildStore(s,{id:t.actor.actorId,table:B().GP});return e.isDefined()?{actorStore:e}:{avatar:{name:t.actor.name,email:t.actor.actorId}}}return{actorStore:void 0}}),[s,t]),d=(0,r().K8)((()=>{var e,t;if(o)return(null===(e=o.actorStore)||void 0===e?void 0:e.getDisplayName(a))??(null===(t=o.avatar)||void 0===t?void 0:t.name)}),[o,a]),c=(0,r().K8)((()=>{var e,t;if(o)return(null===(e=o.actorStore)||void 0===e?void 0:e.getDetail())??(null===(t=o.avatar)||void 0===t?void 0:t.email)}),[o]),u=(0,i.useMemo)((()=>{var e;if(t.actor.actorType===E().oo)return(0,je().v)(null===(e=t.actor.meta)||void 0===e?void 0:e.spaceRole)}),[t]),g=(0,l().IS)((()=>({container:{display:"block",width:"100%",paddingBlock:6}})),[]),p=(0,i.createRef)();return(0,ae.jsx)(xe().A,{disableTooltip:Ce(p.current),renderTooltip:()=>(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{children:d}),(0,ae.jsx)("div",{children:c})]}),placement:ye().W.Bottom,render:e=>(0,ae.jsx)("div",{...e,style:g.container,children:(0,ae.jsx)(je().A,{id:n,...o,spaceRole:u})})})}function Ce(e){return!!e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}var we=()=>s(78161);const Me={id:"actor",headerTitle:(0,ae.jsx)(f().sA,{id:"auditlog.logTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`;return(0,ae.jsx)(Ae,{spaceStore:e.spaceStore,auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:30},sortable:!1},Te={id:"event",headerTitle:(0,ae.jsx)(f().sA,{id:"auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,ae.jsx)(s(768794).m,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:40},sortable:!1},ke={id:"dateTimeAndMenu",headerTitle:(0,ae.jsx)(f().sA,{id:"auditlog.logTable.dateColumn.header",defaultMessage:"Date"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`,i=`event-${e.auditLogEntry.actionName}-${e.id}`,n=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(s(152124).V,{auditLogEntry:e.auditLogEntry,id:n}),(0,ae.jsx)(Pe,{auditLogEntry:e.auditLogEntry,ids:{actorColumnId:t,eventColumnId:i,dateTimeColumnId:n}})]})},widthData:{width:25},sortable:!0},Ie=[Me,Te,ke];function De(){return(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40vh",flexDirection:"column"},children:[(0,ae.jsx)("div",{children:(0,ae.jsx)(be().A,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,ae.jsx)(f().sA,{id:"auditlog.logTable.noResults",defaultMessage:"No results"})})}),(0,ae.jsx)(be().A,{isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{id:"auditlog.logTable.noResultsHelpText",defaultMessage:"Try different filters. Logs may take some time to show up."})})]})}function Pe(e){const{auditLogEntry:t,ids:i}=e,n=(0,r().K8)((()=>(0,ve().Qd)()),[]),o=me().Gb,d=(0,f().tz)(),c=(0,a().v3)(),u=(0,l().DP)(),g=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%"},button:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:28,borderRadius:6}})),[]);return(0,ae.jsx)(xe().A,{delayThreshold:80,placement:ye().W.Bottom,render:e=>(0,ae.jsx)("div",{style:g.container,...e,children:(0,ae.jsx)(Se().A,{style:g.button,onClick:async()=>{const e=await fe().R.clipboardActions.load();var s;e.copyString({environment:c,stringValue:(0,me().ZM)({auditLogEntry:t,intl:d,getAuditLogEventText:(s=i.eventColumnId,e=>{var t;return null===(t=document.getElementById(s))||void 0===t?void 0:t.textContent}),isTeamGuestsEnabled:n,csvColumnNames:o}),copiedMessage:e.clipboardMessages.copiedToClipboard})},children:(0,s(827164).d)({width:16,height:16,fill:u.mediumIconColor})})}),renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"AuditLogSettings.copyAuditLogEvent",defaultMessage:"Copy row"})})}const Re=(0,f().j4)((function(e){const{searchResponse:t,spaceStore:s}=e,[n,a]=(0,r().$y)(z().A),o=t.results||[],d=t.hasMoreResults,c=Boolean(o.length),u=e=>{const t={...n,pageNum:e};a(t)},g=(0,l().IS)((e=>(0,he().rC)({columnRenderInfo:Ie,theme:e,containerMarginTop:0})),[]),p=o.map(((e,t)=>({id:t.toString(),auditLogEntry:e,spaceStore:s,isClickable:!1}))),m=(0,i.useCallback)((()=>{const e=n.sortOrder===_().K7.CreatedOldest?_().K7.CreatedNewest:_().K7.CreatedOldest;a({...n,sortOrder:e,pageNum:1})}),[n,a]),h=(0,i.useMemo)((()=>({column:ke,sortAscending:n.sortOrder===_().K7.CreatedOldest})),[n]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(he().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Ie,rows:p,sortState:h,onSortStateChanged:m,renderNoRowsComponent:De,styles:g}),c?(0,ae.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:[(0,ae.jsx)(we().M,{onClick:()=>{u(n.pageNum-1)},disabled:1===n.pageNum,children:(0,ae.jsx)(f().sA,{id:"auditlog.logTable.previousPage",defaultMessage:"Previous"})}),(0,ae.jsx)(we().M,{disabled:!d,onClick:()=>{u(n.pageNum+1)},children:(0,ae.jsx)(f().sA,{id:"auditlog.logTable.nextPage",defaultMessage:"Next"})})]}):null]})}));const _e=(0,f().j4)((function(e){const{spaceStore:t}=e,n=(0,a().v3)(),o=null==t?void 0:t.id,[l]=(0,r().$y)(K),[d]=(0,r().$y)(z().A),c=(0,z()._)(d)!==l.filterStr?void 0:l.cachedResponses[d.pageNum];return(0,i.useEffect)((()=>{o&&async function(e){var t,s;const{environment:i,spaceId:n}=e,a=z().A.getState();K.startLoading(n,a);const{sortOrder:o,pageSize:r,pageNum:l}=a,d={spaceId:n,limit:r,cursor:K.getCursor(n,a,l),filters:{timeRange:{starting:a.timeRange.starting?D().C6.toUnixMs(a.timeRange.starting):void 0,ending:a.timeRange.ending?D().C6.toUnixMs(a.timeRange.ending):void 0},...(null===(t=a.actors)||void 0===t?void 0:t.length)>0?{actors:a.actors}:void 0,...(null===(s=a.actions)||void 0===s?void 0:s.length)>0?{actions:a.actions}:void 0},sort:o||_().K7.CreatedNewest},c=await U().callApi({eventName:"searchAuditLog",environment:i,data:d,headers:(0,R().WS)({spaceId:d.spaceId})});if("success"!==c.type)if(K.updateError(n,a),(0,P().op4)(c.body)){const e=(0,L().Hu)(O().A.getIntl(),c);j().f1(e)}else j().f1(O().A.formatMessage(V.loadCurrentAuditLogError));else K.updateLoadedResult(n,a,c.data)}({environment:n,spaceId:o})}),[n,o,d]),(0,i.useEffect)((()=>{$({environment:n,spaceId:o})}),[n,o]),(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(pe,{}),(0,ae.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",paddingTop:12,paddingBottom:12},children:[(0,ae.jsx)(ue,{spaceStore:t}),(0,ae.jsx)(s(904324).A,{parentStore:t})]}),"loading"===(null==c?void 0:c.status)&&(0,ae.jsx)(s(31996).A,{}),"success"===(null==c?void 0:c.status)&&(0,ae.jsx)(Re,{searchResponse:c,spaceStore:t})]})}));var Be=()=>s(129978);const Ee=new(Be().O2)("collectionDebugSettings",(()=>s.e(26403).then(s.bind(s,807569)))),Ue=(0,Be()._h)(Ee,(e=>e.CollectionDebugSettings)),Le={settingsTab:new(Be().O2)("customEmojiSettings",(()=>s.e(10408).then(s.bind(s,956470))))},Oe=(0,Be()._h)(Le.settingsTab,(e=>e.CustomEmojiSettings)),We=new(Be().O2)("SitesSettingsTab",(async()=>await Promise.all([s.e(43380),s.e(17989),s.e(90625),s.e(71104),s.e(25700),s.e(78171)]).then(s.bind(s,240939)))),ze=(0,Be()._h)(We,(e=>e.SitesSettingsTab)),qe=new(Be().O2)("designPreviews",(()=>s.e(23754).then(s.bind(s,679904)))),Fe=(0,Be()._h)(qe,(e=>e.DesignPreviews));var Ne=()=>s(782422),Ge=()=>s(983050),Ke=()=>s(754421),Ve=()=>s(409488),He=()=>s(392608),$e=()=>s(576957),Ye=()=>s(471979),Je=()=>s(622286),Qe=()=>s(167532),Ze=()=>s(245313),Xe=()=>s(376869),et=()=>s(254613);const tt=new(Be().O2)("offlineModeDebugSettings",(()=>s.e(3551).then(s.bind(s,686869)))),st=(0,Be()._h)(tt,(e=>e.OfflineModeDebugSettings));var it=()=>s(842617),nt=()=>s(854466),at=()=>s(459466),ot=()=>s(997010);function rt(){const e=(0,Je().X)("personal_sharing_simplified_settings"),t=(0,ot().X)();return!!e&&t}var lt=()=>s(485966),dt=()=>s(359540),ct=()=>s(802955),ut=()=>s(329144),gt=()=>s(836331),pt=()=>s(242333);class mt extends q().default{getInitialState(){return{status:"unconfigured",emailDomains:[],domainVerifications:[],spaces:[],createAccount:!1,useMetadataUrl:!0}}}const ft=mt;var ht=()=>s(190230),St=()=>s(467941);class xt extends q().default{getInitialState(){return{emailDomains:[],spaceCreation:"admins_only",settings:{}}}async updateValueForSpace(e){const{environment:t,spaceId:s,store:i}=e,n=await U().callApi({eventName:"getEmailDomainsForSpace",environment:t,data:{spaceId:s}});if("failed"===n.type)return void j().Qg(n);const{data:a}=n,o=Object.keys(a);return 0!==o.length?i.setState({emailDomains:o,spaceCreation:a[o[0]].spaceCreationEnum,settings:a[o[0]].settings}):i.setState(this.getInitialState()),i.state}}const bt=xt;var vt=()=>s(279773),yt=()=>s(330358),jt=()=>s(292674),At=()=>s(685952),Ct=()=>s(104838),wt=()=>s(226e3),Mt=()=>s(680369);const Tt=(0,Mt().xh)("paperPlane",{default:{loader:()=>s.e(5857).then(s.bind(s,519427))},small:{loader:()=>s.e(5857).then(s.bind(s,168669))},fill:{loader:()=>s.e(5857).then(s.bind(s,563153))},fillSmall:{loader:()=>s.e(5857).then(s.bind(s,247626))}},["send","fly","flight","email","inbox","outbox"]);var kt=()=>s(663048),It=()=>s(420789),Dt=()=>s(421338),Pt=()=>s(206799),Rt=()=>s(701270),_t=()=>s(286404),Bt=()=>s(863969),Et=()=>s(840024),Ut=()=>s(37644),Lt=()=>s(943066),Ot=()=>s(670682),Wt=()=>s(153642),zt=()=>s(700432);var qt=()=>s(133926);function Ft(e){var t;let{currentSettingsTab:s}=e;const n=(0,a().v3)(),o=(0,l().IS)((e=>({aiIcon:{width:16,height:16,color:e.icon.purplePrimary},assistantIcon:{width:16,height:16},buttonStyle:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:6,borderRadius:6,border:`1px solid ${e.stroke.primary}`}})),[]),d=(0,Bt().O)(),c=(0,Ot()._3)({spaceId:d}),u=(0,r().O$)(Et().ts),g=function(){const e=(0,zt().q)(),t=(0,Bt().O)(),s=(0,Ot().f_)({spaceId:t}),i=(0,Wt().V)()??1;return"sales_eligible"===e&&(s&&(0,p().Fq)(s)&&!(0,m().sP)((0,p().AI)(s))||i>5)}(),h=(0,qt()._X)({name:"ai_usage",amount:"unknown",spaceId:d,userId:null===(t=n.currentUser)||void 0===t?void 0:t.id}),S=function(e){return void 0!==e&&!(0,p().TB)(e)&&(0,p().Gm)(e)}(c)&&!(0,qt().e2)(h)&&!["plans","billing"].includes(s),x=i.useMemo((()=>g?{onClick:()=>(0,Ut().lK)({openedFrom:"settings_sidebar"}),text:(0,ae.jsx)(f().sA,{id:"settingsUpsellButton.contactSales",defaultMessage:"Chat with Sales"}),icon:(0,ae.jsx)(Pt().Q,{iconGroup:Tt,colorName:"primary",variantName:"default"})}:void 0!==(null==h?void 0:h.upsell)&&S?{onClick:()=>{(0,Lt().K)(n,{from:"ai_upsell_settings",upsell:h.upsell})},text:(0,ae.jsx)(f().sA,{...It().D.getUnlimitedAI}),icon:u?(0,wt().v)(o.assistantIcon):(0,kt().sparklesFillIcon)(o.aiIcon)}:void 0),[g,S,null==h?void 0:h.upsell,u,o,n]);return x?(0,ae.jsx)(Dt().Y1,{direction:"vertical",padding:16,align:"center-left",children:(0,ae.jsxs)(_t().A,{size:"lg",onClick:x.onClick,style:o.buttonStyle,children:[x.icon,(0,ae.jsx)(Rt().D,{styleName:"UIRegular-14px/Medium",children:x.text})]})}):null}var Nt=()=>s(917399),Gt=()=>s(309461),Kt=()=>s(789077),Vt=()=>s(209684);const Ht=(0,f().YK)({apply_credit:{id:"spaceSubscriptionBilling.applyCreditButton.label",defaultMessage:"Apply credit"},update:{id:"spaceSubscriptionBilling.updateButton.label",defaultMessage:"Update"},add:{id:"spaceSubscriptionBilling.addButton.label",defaultMessage:"Add"},apply:{id:"spaceSubscriptionBilling.apply.label",defaultMessage:"Apply"}});const $t=(0,f().j4)((function(e){const t=(0,l().DP)(),s={marginLeft:18,marginRight:-4,fontWeight:S().Wy.medium},{title:i,caption:n,buttonArgs:a}=e,o=(0,ae.jsx)(f().sA,{...Ht[a.buttonPurpose]});return(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:14},children:[(0,ae.jsx)("div",{style:{marginRight:"auto"},children:i}),(0,ae.jsx)("div",{style:{color:t.text.secondary},children:n}),(0,ae.jsx)("div",{style:{minWidth:110,display:"flex",justifyContent:"flex-end"},children:a.showButton&&(0,ae.jsx)(Vt().p,{isBlue:!0,onClick:a.onClick,style:s,children:o})})]})}));const Yt={workspaceBalance:(0,ae.jsx)(f().sA,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.workspaceSubscriptionBalance.title",defaultMessage:"Workspace balance"}),applyCoupon:(0,ae.jsx)(f().sA,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.applyCoupon.title",defaultMessage:"Apply coupon"}),discount:(0,ae.jsx)(f().sA,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.discount.title",defaultMessage:"Discount"})};var Jt=()=>s(242111);const Qt={height:"100%",padding:"36px 60px"},Zt={display:"flex",flexDirection:"column",height:"100%"};const Xt=function(e){let{data:t,spaceStore:i,billingData:n,billingEvents:a}=e;const o=(0,f().tz)();return(0,r().O$)(ct().A).online?(0,ae.jsx)("div",{style:Zt,children:(0,ae.jsxs)(s(142708).H,{style:Qt,type:s(98508).A.Y,children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",children:(0,ae.jsx)(f().sA,{...Kt().DZ.billingTab})}),(0,ae.jsx)(es,{data:t,billingData:n}),(0,ae.jsx)(ts,{}),(0,ae.jsx)(s(913998).g,{spaceStore:i,events:a,upcomingInvoiceData:void 0})]})}):(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsx)(be().A,{isSmall:!0,style:{textAlign:"center"},children:o.formatMessage(Nt().D.offline)})})};function es(e){let{data:t,billingData:s}=e;const i=(0,p().Ry)(s);if(!i)return null;const n=-Math.min(0,t.accountBalance);return(0,ae.jsx)($t,{title:Yt.workspaceBalance,caption:(0,ae.jsx)("div",{children:(0,ae.jsx)(Jt().v,{cost:{amount:n,currencyCode:i},trailingZeroDisplay:"stripIfInteger"})}),buttonArgs:{showButton:!1,buttonPurpose:"apply_credit",onClick:h().lQ}})}function ts(){return(0,ae.jsx)("div",{style:{flex:"none",marginTop:30}})}var ss=()=>s(613313),is=()=>s(111826),ns=()=>s(159448),as=()=>s(997310);var os=()=>s(894916),rs=()=>s(397138),ls=()=>s(946161),ds=()=>s(855470),cs=()=>s(791107),us=()=>s(431551),gs=()=>s(610271),ps=()=>s(200594),ms=()=>s(152547),fs=()=>s(577831),hs=()=>s(894626),Ss=()=>s(168446),xs=()=>s(137476),bs=()=>s(404042),vs=()=>s(14679),ys=()=>s(17791);var js=()=>s(450351);const As=4;function Cs(e){let{securitySettingsStore:t,spaceStore:s}=e;const i=(0,f().tz)(),n=(0,l().IS)((()=>({horizontalScrollWrapper:{minWidth:750}})),[]);return(0,ae.jsxs)(Dt().Y1,{direction:"vertical",padding:"36px 60px",style:n.horizontalScrollWrapper,children:[(0,ae.jsxs)(Dt().Y1,{direction:"vertical",gap:16,children:[(0,ae.jsx)(js().n,{title:i.formatMessage(Ps.title)}),(0,ae.jsxs)(Dt().Y1,{direction:"horizontal",gap:14,children:[s&&(0,ae.jsx)(Ms,{spaceStore:s}),s&&(0,ae.jsx)(Ts,{spaceStore:s})]})]}),(0,ae.jsx)(ws,{securitySettingsStore:t,spaceStore:s})]})}function ws(e){let{securitySettingsStore:t,spaceStore:s}=e;const n=(0,f().tz)(),{setPage:a}=(0,i.useContext)(ls().K),o=(0,l().IS)((e=>({button:{padding:"3px 0 0 0",height:"100%"},icon:{height:14,width:14,fill:e.icon.tertiary},headerContainer:{marginTop:32}})),[]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:o.headerContainer,children:(0,ae.jsx)("span",{style:{fontSize:16,fontWeight:500},children:n.formatMessage(Ps.permissionsTitle)})}),(0,ae.jsxs)(ps().L,{children:[(0,ae.jsx)(Vt().p,{style:o.button,onClick:()=>a("people_invitation_settings"),ignoreLocalHoverState:!0,children:(0,ae.jsx)(fs().y,{title:n.formatMessage(Ps.membersAndGuestsSettingTitle),byline:n.formatMessage(Ps.memberAndGuestsSettingByline),onClick:()=>a("people_invitation_settings"),item:(0,ds().V)(o.icon)})}),(0,ae.jsx)(ks,{securitySettingsStore:t,spaceStore:s})]})]})}function Ms(e){let{spaceStore:t}=e;const s=(0,f().tz)(),{setPage:n}=(0,i.useContext)(ls().K),{requestsSize:o,requestedUserStores:l,totalRequestedUsersSize:d}=function(e){let{spaceStore:t,userStoreLimit:s}=e;const{requests:i,isLoading:n}=(0,ys().I)({spaceId:t.id});return(0,r().K8)((()=>{let e=0;if(!i)return{requestsSize:e,requestedUserStores:[],totalRequestedUsersSize:0,isLoading:n};const a=new Set;for(const t of Object.values(i)){for(const e of t)a.add(e.created_by_id);e+=t.length}return{requestsSize:e,requestedUserStores:Array.from(a).slice(0,s).map((e=>vs().L.createChildStore(t,{table:E().oo,id:e}))),totalRequestedUsersSize:a.size,isLoading:n}}),[t,i,n,s])}({spaceStore:t,userStoreLimit:As}),c=(0,a().v3)(),u=(0,r().K8)((()=>(0,ss().Le)()),[]);return(0,ae.jsx)(ms().A,{headerText:s.formatMessage(Ps.upgradesTitle),mainText:(0,ae.jsx)(f().sA,{id:"requestsHomePage.upgradeRequests.pending",defaultMessage:"{requestsSize} pending",values:{requestsSize:o}}),bottom:(0,ae.jsx)(Ds,{avatarProps:{users:l,totalMemberCount:d},requestsLength:o,pendingText:u?Ps.noPendingRequests:Ps.noPlanOrAddOnRequests}),onClick:()=>{n("upgrades"),(0,xs().u4)({environment:c,event:{eventName:"request_tab_upgrades_clicked",eventProperties:{number_of_requests:o}}})}})}function Ts(e){let{spaceStore:t}=e;const s=(0,f().tz)(),i=(0,Ss().e6)({spaceStore:t,requestType:"member_or_guest"}),n=new Set;for(const o of i)for(const{actor:e}of o.createdByActorsWithReason)n.add(e.id);const a=[...n].slice(0,As).map((e=>ie().LU.createChildStore(t,{table:E().oo,id:e})));return(0,ae.jsx)(ms().A,{headerText:s.formatMessage(Ps.peoplesTitle),mainText:(0,ae.jsx)(f().sA,{id:"requestsHomePage.peopleRequests.pending",defaultMessage:"{requestsSize} pending",values:{requestsSize:i.length}}),bottom:(0,ae.jsx)(Ds,{avatarProps:i.length?{users:a,totalMemberCount:n.size}:void 0,requestsLength:i.length,pendingText:Ps.noGuestOrMemberRequests}),onClick:()=>{A().Ow({currentTab:"members",subtab:"requests"})}})}function ks(e){let{securitySettingsStore:t,spaceStore:s}=e;const i=(0,f().tz)(),n=(0,a().v3)(),o=(0,r().K8)((()=>t.state),[t]),l=(0,Ot().f_)({spaceId:s.id}),d=(0,p().eh)(l,"enterprise");return(0,ae.jsx)(fs().y,{title:(0,ae.jsx)(Is,{showUpsell:!d}),byline:i.formatMessage(Ps.purchaseRequestsMemberSettingsByline),item:(0,ae.jsx)(us().A,{disabled:!d,on:!o.disableMemberUpgradeRequests,onClick:()=>{cs().X(n,{spaceStore:s,securitySettingsStore:t,fields:{disableMemberUpgradeRequests:!o.disableMemberUpgradeRequests}})}})})}function Is(e){let{showUpsell:t}=e;const s=(0,f().tz)(),i=(0,a().v3)();return(0,ae.jsxs)(Dt().Y1,{direction:"horizontal",gap:4,children:[s.formatMessage(Ps.purchaseRequestsMemberSettingsTitle),t&&(0,ae.jsx)(bs().A,{subscriptionTier:"enterprise",analyticsName:"upgrade_requests_page",onClick:async()=>{await Lt().K(i,{from:"upgrade_requests_page",upsell:{type:"product",product:"enterprise",limit:{type:"none"},trialability:"none"}})}})]})}function Ds(e){let{avatarProps:t,requestsLength:s,pendingText:i}=e;const n=(0,f().tz)();return(0,ae.jsxs)(gs().wt,{justifyContent:"end",style:{minHeight:24},children:[t&&(0,ae.jsx)(hs().t,{users:t.users,totalMemberCount:t.totalMemberCount,isLoading:!1}),!s&&(0,ae.jsx)(Rt().D,{styleName:"UISmall-12px/Regular",colorName:"tertiary",children:n.formatMessage(i)})]})}const Ps=(0,f().YK)({title:{id:"RequestsSettingsPage.title",defaultMessage:"Requests"},upgradesTitle:{id:"RequestsSettingsPage.UpgradesTileTitle",defaultMessage:"Upgrades"},peoplesTitle:{id:"RequestsSettingsPage.PeopleTileTitle",defaultMessage:"People"},permissionsTitle:{id:"RequestsSettingsPage.permissionsTitle",defaultMessage:"Permissions"},membersAndGuestsSettingTitle:{id:"RequestsSettingsPage.membersAndGuestsSettingTitle",defaultMessage:"Inviting guests and members"},memberAndGuestsSettingByline:{id:"RequestsSettingsPage.memberAndGuestsSettingByline",defaultMessage:"Configure who can send and approve member additions"},purchaseRequestsMemberSettingsTitle:{id:"RequestsSettingsPage.purchaseRequestsMemberSettingsTitle",defaultMessage:"Allow members to request upgrades"},purchaseRequestsMemberSettingsByline:{id:"RequestsSettingsPage.purchaseRequestsMemberSettingsByline",defaultMessage:"Users in your workspace can send purchase requests to the workspace owner"},noPlanOrAddOnRequests:{id:"RequestsSettingsPage.upgradeRequests.noPlanOrAddOnRequests",defaultMessage:"No plan or add-on requests"},noPendingRequests:{id:"RequestsSettingsPage.upgradeRequests.noPendingRequests",defaultMessage:"No upgrade requests"},noGuestOrMemberRequests:{id:"RequestsSettingsPage.peopleRequests.noGuestOrMemberRequests",defaultMessage:"No guest or member requests"}});var Rs=()=>s(76394),_s=()=>s(631474),Bs=()=>s(571909),Es=()=>s(547851),Us=()=>s(750177),Ls=()=>s(904697),Os=()=>s(187406),Ws=()=>s(297513),zs=()=>s(405317),qs=()=>s(951540),Fs=()=>s(487966);function Ns(e){let{title:t,byline:s,settingItem:i,style:n}=e;const a=(0,l().IS)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",...n||{}},settingLeft:{width:"60%"},settingTitle:{fontWeight:S().Wy.regular},settingByline:{marginBottom:4}})),[n]);return(0,ae.jsxs)("div",{style:a.settingContainer,children:[(0,ae.jsxs)("div",{style:a.settingLeft,children:[(0,ae.jsx)(ge().A,{smallMarginBottom:!0,style:a.settingTitle,children:t}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:a.settingByline,children:s})]}),i]})}var Gs=()=>s(849469),Ks=()=>s(501578),Vs=()=>s(297145),Hs=()=>s(52531),$s=()=>s(417653),Ys=()=>s(59175),Js=()=>s(539048),Qs=()=>s(204024),Zs=()=>s(40030);const Xs=(0,f().YK)({deleteFromTrashLayoutTitle:{defaultMessage:"Auto-delete from Trash",id:"updateRetentionWindowModal.layoutTitle.deleteFromTrash."},deleteFromTrashTitle:{defaultMessage:"Auto-delete from Trash",id:"updateRetentionWindowModal.title.deleteFromTrash"},deleteFromTrashDescription:{defaultMessage:"Customize how long pages stay in Trash before being automatically deleted",id:"updateRetentionWindowModal.description.deleteFromTrash"},deleteFromTrashDefaultOptionTitle:{defaultMessage:"30 days, then delete from Trash",id:"updateRetentionWindowModal.defaultOption.title.deleteFromTrash"},deleteFromTrashDefaultOptionDescription:{defaultMessage:"Pages deleted from Trash are retained for an additional period of time. Retained pages can be restored by workspace owners",id:"updateRetentionWindowModal.defaultOption.description.deleteFromTrash"},deleteFromTrashImmediateEffect:{defaultMessage:"Reducing this retention setting may lead to pages being deleted from Trash immediately. Please type your workspace name to continue",id:"updateRetentionWindowModal.immediateEffect.deleteFromTrash"},purgeLayoutTitle:{defaultMessage:"Retaining deleted pages",id:"updateRetentionWindowModal.layoutTitle.purge"},purgeTitle:{defaultMessage:"Retaining deleted pages",id:"updateRetentionWindowModal.title.purge"},purgeDescription:{defaultMessage:"Pages deleted from Trash are retained for a period of time. Only workspace owners can view and restore retained pages.",id:"updateRetentionWindowModal.description.purge"},purgeDefaultOptionTitle:{defaultMessage:"30 days, then permanently delete",id:"updateRetentionWindowModal.defaultOption.title.purge"},purgeDefaultOptionDescription:{defaultMessage:"Pages are removed from Notion's servers and cannot be restored",id:"updateRetentionWindowModal.defaultOption.description.purge"},purgeImmediateEffect:{defaultMessage:"Reducing the retain period could lead to pages being deleted from Notion server. Please type your workspace name to continue ",id:"updateRetentionWindowModal.immediateEffect.purge"}});var ei=()=>s(90760);const ti=(0,f().YK)({days:{defaultMessage:"days",id:"customRetentionWindow.relativeDates.days"},years:{defaultMessage:"years",id:"customRetentionWindow.relativeDates.years"}}),si=(0,f().YK)({inputPlaceholder:{defaultMessage:"...",id:"customRetentionWindow.timeNum.inputPlaceholder"}}),ii=(0,Rs().uv)(Ws().Vl).map((e=>({key:e,label:(0,ae.jsx)(be().A,{children:O().A.formatMessage(ti[e])})})));function ni(e){const{isDropdownEnabled:t,timeNumString:s,timeUnit:i,setTimeNumString:n,setTimeUnit:a}=e,o=(0,f().tz)(),r=(0,l().IS)((e=>({dropdownRow:{display:"flex"},input:{width:70,marginRight:4,marginLeft:6},dropdown:{marginTop:0,marginBottom:0,marginRight:4,borderRadius:4,border:`1px solid ${e.lightDividerColor}`}})),[]);return(0,ae.jsxs)("span",{style:r.dropdownRow,children:[(0,ae.jsx)(Ys().A,{style:r.input,value:s,onChange:e=>n(e.target.value),placeholder:o.formatMessage(si.inputPlaceholder),disabled:!t}),(0,ae.jsx)(ei().m,{buttonStyle:r.dropdown,disabled:!t,type:"dropdown",currentOption:i,options:ii,onSelectOption:e=>t&&a(e),isMobile:!1})]})}const ai=(0,f().YK)({invalidNumber:{defaultMessage:"Please enter a valid number",id:"updateRetentionWindow.error.invalidNumber"},outOfRangeTrash:{defaultMessage:"Pages can't be in Trash for longer than 10 years",id:"updateRetentionWindow.error.outOfRangeTrash"},outOfRangeRetained:{defaultMessage:"Pages can't be retained for longer than 10 years",id:"updateRetentionWindow.error.outOfRangeRetained"},lowerBoundTrash:{defaultMessage:"Pages can't be in Trash for less than 1 day",id:"updateRetentionWindow.error.lowerBoundTrash"},lowerBoundRetained:{defaultMessage:"Pages can't be retained for less than 1 day",id:"updateRetentionWindow.error.lowerBoundRetained"}});function oi(e){let{isSelected:t,retentionType:s,hasChosenRetentionWindow:n,currentRetentionWindowInSeconds:a,errorMessage:o,onNextRetentionWindowInSecondsChange:r,onClick:d,setErrorMessage:c,style:u}=e;const g=(0,f().tz)(),p=(0,l().IS)((e=>({rowStyles:{display:"flex",fontSize:14,background:t?e.lightBlueBannerBackground:"inherit",...u,alignItems:"flex-start",flexFlow:"column"},centeredRow:{display:"flex",flexFlow:"row",alignItems:"center"},errorMessageStyle:{marginTop:8,width:"100%",display:"flex",paddingLeft:28,color:e.errorText,fontWeight:S().Wy.regular}})),[u,t]),[m,h]=(0,i.useState)((0,Ws().sV)(a)),[x,b]=(0,i.useState)(`${(0,Ws().Uw)(a,m)}`),v=Number(x)*Ws().Vl[m],y=!n&&t;return(0,i.useEffect)((()=>{r(v)}),[r,v]),(0,i.useEffect)((()=>{if(t){if(void 0===x)return void c(g.formatMessage(ai.invalidNumber));const e=parseInt(x);if(isNaN(e)||e.toString()!==x)return void c(g.formatMessage(ai.invalidNumber));const t=Ws().Vl[m]*e;if(t>Ws().J1){const e="delete_from_trash"===s?ai.outOfRangeTrash:ai.outOfRangeRetained;return void c(g.formatMessage(e))}if(t<Ws().PL){const e="delete_from_trash"===s?ai.lowerBoundTrash:ai.lowerBoundRetained;return void c(g.formatMessage(e))}c(void 0)}}),[x,m,t,c,g,s]),(0,ae.jsxs)(Vt().p,{style:p.rowStyles,onClick:d,children:[(0,ae.jsxs)("div",{style:p.centeredRow,children:[(0,ae.jsx)(Qs().A,{isSelected:t}),(0,ae.jsx)(be().A,{style:p.centeredRow,children:"delete_from_trash"===s?(0,ae.jsx)(f().sA,{defaultMessage:"<dropdownpicker></dropdownpicker>, then delete from trash",id:"updateRetentionWindowModal.custom.deleteFromTrash",values:{dropdownpicker:e=>(0,ae.jsx)(ni,{isDropdownEnabled:y,timeNumString:x,timeUnit:m,setTimeNumString:b,setTimeUnit:h})}}):(0,ae.jsx)(f().sA,{defaultMessage:"<dropdownpicker></dropdownpicker>, then permanently delete",id:"updateRetentionWindowModal.custom.permanentlyDelete",values:{dropdownpicker:e=>(0,ae.jsx)(ni,{isDropdownEnabled:y,timeNumString:x,timeUnit:m,setTimeNumString:b,setTimeUnit:h})}})})]}),o?(0,ae.jsx)(be().A,{style:p.errorMessageStyle,children:o}):null]})}const ri=(0,f().YK)({invalidWorkspaceName:{id:"updateRetentionWindow.error.invalidWorkspaceName",defaultMessage:"Must type in workspace name correctly"}});function li(e){let{isOpen:t,closeModal:s,currentRetentionWindowInSeconds:n,spaceStore:o,retentionType:d,onSaveRetentionWindow:c}=e;const u=(0,a().v3)(),g=(0,l().IS)((e=>({contentStyle:{display:"flex",flexFlow:"column",alignItems:"center",paddingTop:24,paddingLeft:15,paddingRight:15},headerStyle:{display:"flex",flexFlow:"column",alignItems:"center",marginBottom:16},headerTitleStyle:{fontWeight:S().Wy.semibold,fontSize:17,marginBottom:8},headerDescriptionStyle:{width:"100%",textAlign:"center",fontSize:14},defaultOptionStyle:{display:"flex",flexFlow:"column",paddingLeft:8},defaultOptionTitleStyle:{fontSize:13,fontWeight:S().Wy.medium},defaultOptionDescriptionStyle:{width:350,fontSize:12,whiteSpace:"normal",lineHeight:"16px",fontWeight:S().Wy.regular},iconStyle:{color:e.lightIconColor,width:36,marginBottom:12},saveButtonStyles:{width:"100%",marginBottom:4,marginTop:16},errorMessageStyle:{marginTop:4,color:e.errorText},cancelButtonStyles:{width:"100%",paddingTop:5,paddingBottom:5,display:"flex",justifyContent:"center",marginBottom:16,borderRadius:4},optionStyle:{width:"100%",height:void 0,marginBottom:4,paddingTop:8,paddingBottom:8,fontWeight:S().Wy.medium,display:"flex",flexFlow:"row"},confirmationContainerStyle:{marginTop:16,width:"100%",paddingTop:14,paddingBottom:14,padingLeft:14,paddingRight:14,backgroundColor:e.accentColors.red[100],display:"flex",flexFlow:"column",alignItems:"center",borderRadius:4},confirmationDescription:{color:e.accentColors.red[800],fontSize:14,paddingBottom:6},confirmationContentStyle:{width:"90%"}})),[]),p=(0,r().K8)((()=>o.getName()),[o]),[m,h]=(0,i.useState)(void 0),[x,b]=(0,i.useState)(void 0===n),[v,j]=(0,i.useState)(n),A=x?void 0:v,[C,w]=(0,i.useState)(!1),[M,T]=(0,i.useState)(""),k=A===n||(0,Rs().O9)(m),I=M!==p,D=(0,i.useCallback)((()=>{m||(y().kF(u,{type:d,value:A}),c(A),T(""),w(!1),s())}),[u,d,c,A,m,s]),P=(0,i.useCallback)((()=>{C?M===p?D():h(O().A.formatMessage(ri.invalidWorkspaceName)):!function(e){let{nextRetentionWindowValue:t,currentRetentionWindowValue:s,retentionType:i}=e;const n=di(s,i),a=di(t,i);if(a<n)return!0;return!1}({nextRetentionWindowValue:A,retentionType:d,currentRetentionWindowValue:n})?D():w(!0)}),[C,M,p,A,d,n,D]),R=(0,i.useCallback)((()=>{C||x||(w(!1),b(!0),h(void 0))}),[C,x,w,b,h]),_=(0,i.useCallback)((()=>{C||x&&(w(!1),b(!1))}),[C,x,w,b]),B=function(e){return(0,i.useMemo)((()=>"delete_from_trash"===e?{layoutTitle:Xs.deleteFromTrashLayoutTitle,title:Xs.deleteFromTrashTitle,description:Xs.deleteFromTrashDescription,defaultOptionTitle:Xs.deleteFromTrashDefaultOptionTitle,defaultOptionDescription:Xs.deleteFromTrashDefaultOptionDescription,immediateEffect:Xs.deleteFromTrashImmediateEffect}:"purge"===e?{layoutTitle:Xs.purgeLayoutTitle,title:Xs.purgeTitle,description:Xs.purgeDescription,defaultOptionTitle:Xs.purgeDefaultOptionTitle,defaultOptionDescription:Xs.purgeDefaultOptionDescription,immediateEffect:Xs.purgeImmediateEffect}:void(0,Rs().HB)(e)),[e])}(d);return(0,ae.jsx)(Js().s,{isOpen:t,onDismiss:s,areaConstraint:{width:{type:"max",length:460}},render:e=>{let{displayMode:t}=e;return(0,ae.jsx)(Zs().B,{displayMode:t,title:(0,ae.jsx)(f().sA,{...B.layoutTitle}),children:(0,ae.jsxs)("div",{style:g.contentStyle,children:[(0,ae.jsxs)("div",{style:g.headerStyle,children:[(0,ae.jsx)("div",{children:(0,Hs().I)(g.iconStyle)}),(0,ae.jsx)(be().A,{style:g.headerTitleStyle,children:(0,ae.jsx)(f().sA,{...B.title})}),(0,ae.jsx)(be().A,{style:g.headerDescriptionStyle,isSecondaryColor:!0,isMultiline:!0,children:(0,ae.jsx)(f().sA,{...B.description})})]}),(0,ae.jsxs)(Vt().p,{style:g.optionStyle,onClick:R,children:[(0,ae.jsx)(Qs().A,{isSelected:x}),(0,ae.jsxs)("div",{style:g.defaultOptionStyle,children:[(0,ae.jsx)(be().A,{style:g.defaultOptionTitleStyle,children:(0,ae.jsx)(f().sA,{...B.defaultOptionTitle})}),(0,ae.jsx)(be().A,{isSecondaryColor:!0,isMultiline:!0,style:g.defaultOptionDescriptionStyle,children:(0,ae.jsx)(f().sA,{...B.defaultOptionDescription})})]})]}),(0,ae.jsx)(oi,{style:g.optionStyle,isSelected:!x,retentionType:d,hasChosenRetentionWindow:C,currentRetentionWindowInSeconds:n,errorMessage:m,onClick:_,onNextRetentionWindowInSecondsChange:j,setErrorMessage:h}),C?(0,ae.jsxs)("div",{style:g.confirmationContainerStyle,children:[(0,ae.jsx)(be().A,{isMultiline:!0,style:{...g.confirmationContentStyle,...g.confirmationDescription},children:(0,ae.jsx)(f().sA,{...B.immediateEffect})}),(0,ae.jsx)(Ys().A,{style:g.confirmationContentStyle,value:M,placeholder:p,onChange:e=>T(e.target.value)})]}):null,(0,ae.jsx)(qs().A,{onClick:P,disabled:C?I:k,style:g.saveButtonStyles,size:"lg",children:(0,ae.jsx)(f().sA,{id:"updateRetentionWindowModal.save",defaultMessage:"Save"})}),(0,ae.jsx)($s().A,{onClick:s,style:g.cancelButtonStyles,children:(0,ae.jsx)(be().A,{isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{id:"updateRetentionWindowModal.cancel",defaultMessage:"Cancel"})})})]})})}})}function di(e,t){return e||("delete_from_trash"===t?Vs().I4:Vs().qI)}function ci(e){const{spaceStore:t}=e,s=(0,a().v3)(),n=(0,f().tz)(),o=(0,l().IS)((e=>({genericSetting:{width:"100%",paddingTop:24},settingItem:{display:"flex",alignItems:"center"},currentSettingLabel:{fontWeight:S().Wy.medium},changeButtonStyle:{fontSize:12,marginLeft:8},lockIconStyle:{color:e.text.tertiary,width:20,marginLeft:4}})),[]),d=(0,qt()._X)({name:"configurable_retention",spaceId:t.id,userId:s.currentUser.id}),[u,g]=i.useState({isOpen:!1,retentionType:"delete_from_trash"}),{saveDeleteFromTrashDelay:p,savePurgeDelay:m}=function(e){let{environment:t,spaceStore:s}=e;return{saveDeleteFromTrashDelay:(0,i.useCallback)((e=>{k().createAndCommit({userAction:"securitySettingsActions.saveDataRetentionSettings",environment:t,canUndo:!0,perform:t=>{k().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings"],command:"update",args:{delete_from_trash_delay_seconds:e??null}},transaction:t})}})}),[s,t]),savePurgeDelay:(0,i.useCallback)((e=>{k().createAndCommit({userAction:"securitySettingsActions.saveDataRetentionSettings",environment:t,canUndo:!0,perform:t=>{k().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings"],command:"update",args:{purge_delay_seconds:e??null}},transaction:t})}})}),[s,t])}}({environment:s,spaceStore:t}),{currentDeleteFromTrashDelayInSeconds:h,currentPurgeDelayInSeconds:x}=(0,r().K8)((()=>({currentDeleteFromTrashDelayInSeconds:(0,zs().e2)(d)?t.getSettings().delete_from_trash_delay_seconds:void 0,currentPurgeDelayInSeconds:(0,zs().e2)(d)?t.getSettings().purge_delay_seconds:void 0})),[t,d]);return(0,ae.jsxs)("div",{children:[u.isOpen&&(0,ae.jsx)(li,{isOpen:u.isOpen,closeModal:()=>g({...u,isOpen:!1}),spaceStore:t,currentRetentionWindowInSeconds:u.currentRetentionWindowInSeconds,retentionType:u.retentionType,onSaveRetentionWindow:"delete_from_trash"===u.retentionType?p:m}),(0,ae.jsx)(ui,{dataRetentionAvailability:d}),(0,ae.jsx)(Ns,{style:o.genericSetting,title:(0,ae.jsx)(f().sA,{id:"securitySettings.dataRetention.deleteFromTrash.title",defaultMessage:"Once pages are moved to Trash, delete them after"}),byline:(0,ae.jsx)(f().sA,{id:"securitySettings.dataRetention.deletedFromTrash.byline",defaultMessage:"Anyone with edit or full access will be able to restore or manually delete pages in Trash"}),settingItem:(0,ae.jsxs)("div",{style:o.settingItem,children:[(0,ae.jsx)(be().A,{style:o.currentSettingLabel,children:(0,ae.jsx)(f().sA,{id:"securitySettings.dataRetention.deleteFromTrash.currentSetting",defaultMessage:"{duration}",values:{duration:(0,Ws().rN)(h,n)}})}),(0,zs().e2)(d)?(0,ae.jsx)(_t().A,{size:"lg",disabled:!1,style:o.changeButtonStyle,onClick:()=>g({isOpen:!0,retentionType:"delete_from_trash",currentRetentionWindowInSeconds:h}),children:(0,ae.jsx)(f().sA,{defaultMessage:"Change",id:"securitySettings.dataRetention.deleteFromTrash.button"})}):(0,ae.jsx)("div",{children:(0,c().g)(o.lockIconStyle)})]})}),(0,ae.jsx)(Ns,{style:o.genericSetting,title:(0,ae.jsx)(f().sA,{id:"securitySettings.dataRetention.purge.title",defaultMessage:"After pages are deleted from Trash, retain them for"}),byline:(0,ae.jsx)(f().sA,{id:"securitySettings.dataRetention.purge.byline",defaultMessage:"During the retention period, only workspace owners can view or restore the page from Content search. After the retention period, the page will be permanently deleted from Notion's servers"}),settingItem:(0,ae.jsxs)("div",{style:o.settingItem,children:[(0,ae.jsx)(be().A,{style:o.currentSettingLabel,children:(0,ae.jsx)(f().sA,{id:"securitySettings.dataRetention.purge.currentSetting",defaultMessage:"{duration}",values:{duration:(0,Ws().rN)(x,n)}})}),(0,zs().e2)(d)?(0,ae.jsx)(_t().A,{size:"lg",disabled:!1,style:o.changeButtonStyle,onClick:()=>g({isOpen:!0,retentionType:"purge",currentRetentionWindowInSeconds:x}),children:(0,ae.jsx)(f().sA,{defaultMessage:"Change",id:"securitySettings.dataRetention.purge.button"})}):(0,ae.jsx)("div",{children:(0,c().g)(o.lockIconStyle)})]})})]})}function ui(e){const{dataRetentionAvailability:t}=e,s=(0,l().IS)((e=>({bannerStyle:{borderRadius:4,padding:15,width:"100%",backgroundColor:e.lightBlueBannerBackground,flexFlow:(0,zs().e2)(t)?"column":"row",display:"flex",overflow:"hidden"},bannerLabelStyle:{marginBottom:8},bannerImage:{width:75,display:"flex",alignItems:"center",paddingRight:15},bannerTitleBold:{fontWeight:S().Wy.bold},helpIcon:{fill:"inherit"}})),[t]),i=(0,a().v3)();return(0,zs().e2)(t)?(0,ae.jsxs)("div",{style:s.bannerStyle,children:[(0,ae.jsx)(be().A,{style:s.bannerLabelStyle,children:(0,ae.jsx)(f().sA,{id:"securitySettings.dataRetention.disclaimer.title",defaultMessage:"How page deletion and retention works in Notion"})}),(0,ae.jsx)(be().A,{style:s.bannerLabelStyle,isMultiline:!0,isSmall:!0,children:(0,ae.jsx)(f().sA,{id:"securitySettings.dataRetention.disclaimer.description",defaultMessage:"A page can be moved to Trash by anyone with edit or full access. The page can then be restored or deleted. Workspace owners can customize whether pages in Trash are automatically deleted after a period of time, and how long deleted pages are retained on Notion's servers."})}),(0,ae.jsx)(Fs().A,{title:(0,ae.jsx)(Ks().j,{children:(0,ae.jsx)(f().sA,{defaultMessage:"Learn more about data retention in Notion",id:"securitySettings.dataRetention.learnMore"})}),iconStyle:s.helpIcon,buttonStyle:{maxWidth:"100%",overflow:"hidden"},href:(0,He().xS)("guides.customDataRetentionRules"),analyticsFrom:"security_settings"})]}):(0,ae.jsxs)("div",{style:s.bannerStyle,children:[(0,ae.jsx)("div",{style:s.bannerImage,children:(0,ae.jsx)(Gs().X,{product:"enterprise"})}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(be().A,{style:{...s.bannerLabelStyle,...s.bannerTitleBold},children:(0,ae.jsx)(f().sA,{id:"securitySettings.dataRetention.upsell.title",defaultMessage:"Upgrade to the Enterprise plan to customize your workspace’s data retention policy"})}),(0,ae.jsx)(be().A,{style:s.bannerLabelStyle,isMultiline:!0,isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{id:"securitySettings.dataRetention.upsell.description",defaultMessage:"Workspaces on the Enterprise plan also get SAML SSO, custom guest limits, audit logging, and other advanced security controls"})}),(0,ae.jsx)(qs().A,{onClick:()=>{null!=t&&t.upsell&&(0,Lt().K)(i,{from:"space_settings_cdrr_settings",upsell:t.upsell})},size:"lg",children:(0,ae.jsx)(f().sA,{defaultMessage:"Upgrade to Enterprise",id:"securitySettings.upgradeButton.text"})})]})]})}var gi=()=>s(82702),pi=()=>s(764227),mi=()=>s(884373),fi=()=>s(966789),hi=()=>s(16791),Si=()=>s(922172),xi=function(e){return e[e.Keep=0]="Keep",e[e.Remove=1]="Remove",e}(xi||{});function bi(e){return(0,ae.jsx)(Si().a,{open:e.isOpen,onDismiss:e.onDismiss,render:()=>(0,ae.jsx)(vi,{...e})})}function vi(e){const{onDismiss:t,onSave:s,guestCount:n}=e,[a,o]=(0,i.useState)(xi.Keep),r=(0,l().IS)((e=>({container:{width:350,padding:30,borderRadius:5,height:400,alignItems:"center"},title:{fontFamily:S().vc(hi().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center"},subtitle:{fontFamily:S().vc(hi().locale).sans,fontSize:14,fontWeight:300,lineHeight:"19px",margin:10,textAlign:"center"},radioContainer:{display:"flex",flexDirection:"column"},button:{justifyContent:"space-between",marginTop:10,height:70,borderRadius:5},buttonText:{display:"flex",flexDirection:"column"},optionSubtitle:{whiteSpace:"break-spaces"},actionButtonsContainer:{display:"flex",flexDirection:"column",marginTop:20},cancelButton:{justifyContent:"center",margin:"8px auto 0"}})),[]),d=(0,i.useCallback)((()=>{const e=a===xi.Keep;s(e)}),[s,a]);return(0,ae.jsxs)("div",{style:r.container,children:[(0,ae.jsx)(be().A,{style:r.title,children:(0,ae.jsx)(f().sA,{id:"disableGuestsConfig.title",defaultMessage:"Disable inviting guests?"})}),(0,ae.jsx)(be().A,{isSmall:!0,style:r.subtitle,isMultiline:!0,children:(0,Rs().O9)(n)?(0,ae.jsx)(f().sA,{id:"disableGuestsConfig.description",defaultMessage:"Your workspace currently has {guestCount, plural, one {1 guest} other {{guestCount} guests}}. You can choose to:",values:{guestCount:n}}):(0,ae.jsx)(f().sA,{id:"disableGuestsConfig.description.noGuestCount",defaultMessage:"You are turning off guests in this workspace. You can choose to:"})}),(0,ae.jsxs)("div",{style:r.radioContainer,children:[(0,ae.jsxs)(_t().A,{size:"lg",onClick:()=>o(xi.Keep),style:r.button,children:[(0,ae.jsx)(Qs().A,{isSelected:a===xi.Keep}),(0,ae.jsxs)("div",{style:r.buttonText,children:[(0,ae.jsx)(be().A,{children:(0,ae.jsx)(f().sA,{id:"disableGuestsConfig.keepExistingGuests.title",defaultMessage:"Keep existing guests"})}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:r.optionSubtitle,children:(0,ae.jsx)(f().sA,{id:"disableGuestsConfig.keepExistingGuests.description",defaultMessage:"Guests will still be able to access the pages they've been invited to"})})]})]}),(0,ae.jsxs)(_t().A,{size:"lg",onClick:()=>o(xi.Remove),style:r.button,children:[(0,ae.jsx)(Qs().A,{isSelected:a===xi.Remove}),(0,ae.jsxs)("div",{style:r.buttonText,children:[(0,ae.jsx)(be().A,{children:(0,ae.jsx)(f().sA,{id:"disableGuestsConfig.removeExistingGuests.title",defaultMessage:"Remove existing guests"})}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:r.optionSubtitle,children:(0,ae.jsx)(f().sA,{id:"disableGuestsConfig.removeExistingGuests.description",defaultMessage:"All guests will be removed from your workspace"})})]})]})]}),(0,ae.jsxs)("div",{style:r.actionButtonsContainer,children:[(0,ae.jsx)(qs().A,{size:"lg",onClick:d,children:(0,ae.jsx)(f().sA,{id:"disableGuestsModal.saveChanges",defaultMessage:"Disable inviting guests"})}),(0,ae.jsx)(Vt().p,{onClick:t,style:r.cancelButton,children:(0,ae.jsx)(f().sA,{id:"disableGuestsModal.cancel",defaultMessage:"Cancel"})})]})]})}var yi=()=>s(611824),ji=()=>s(911512),Ai=()=>s(207762);const Ci={security:(0,ae.jsx)(f().sA,{id:"securityTabs.security.title",defaultMessage:"Security"}),data_retention:(0,ae.jsx)("div",{style:{display:"flex"},children:(0,ae.jsx)(f().sA,{id:"securityTabs.dataRetention.title",defaultMessage:"Data retention"})})},wi=(0,Rs().uv)(Ci),Mi=wi.map((e=>Ci[e])),Ti=.5;const ki=function(e){let{securitySettingsStore:t,spaceStore:s,organizationOverrides:n}=e;const o=(0,a().v3)(),d=(0,l().IS)((()=>({tabMenu:{marginBottom:24}})),[]),c=(0,r().K8)((()=>yt().A.getState().defaultSubtab),[]),[u,g]=(0,i.useState)((()=>c&&wi.includes(c)?wi.indexOf(c):0)),p=(0,i.useCallback)((e=>{y()._J(o,{tab:wi[e]}),g(e)}),[g,o]);return(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsxs)("div",{children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",children:(0,ae.jsx)(f().sA,{id:"securitySettings.securityAndData.title",defaultMessage:"Security & data"})}),(0,ae.jsx)(Ai().Ay,{tabs:Mi,selectedIndex:u,onChange:p,style:d.tabMenu}),0===u?(0,ae.jsx)(Gi,{securitySettingsStore:t,spaceStore:s,organizationOverrides:n}):(0,ae.jsx)(ci,{spaceStore:s})]})})};function Ii(e,t,s,i){cs().X(i,{spaceStore:s,securitySettingsStore:t,fields:e})}function Di(e){return{fontWeight:S().Wy.medium,fontSize:18,borderBottom:`1px solid ${e.regularDividerColor}`,paddingBottom:6,marginBottom:12,display:"flex",alignItems:"center"}}function Pi(e,t){const{subscriptionTier:s="enterprise"}=t||{};Lt().K(e,{from:"space_saml",upsell:{type:"product",product:s,limit:{type:"none"},trialability:"none"}})}function Ri(e,t,s,i){const{name:n,isToggleEnabled:a,showUpgradeIfDisabled:o}=e;if(!a)return o?Pi(i):void 0;Ii({[n]:!t.state[n]},t,s,i)}function _i(e){let{style:t,subscriptionTier:s="enterprise"}=e;const i=(0,a().v3)();return(0,ae.jsx)(bs().A,{subscriptionTier:s,analyticsName:"space_saml",onClick:()=>Pi(i,{subscriptionTier:s}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3,...t}})}function Bi(e){let{requestTogglesAvailableForTier:t,spaceStore:s,securitySettingsStore:i,organizationOverrides:n,isShownInRequestsTab:o=!1}=e;const d=(0,a().v3)(),c=(0,r().K8)((()=>(0,Bs().$)(s,d)),[s,d]),u=(0,r().K8)((()=>t&&!Boolean(i.state.disableMembershipRequests)),[t,i]),g=(0,r().K8)((()=>t&&!Boolean(i.state.disableExternalMembershipRequests)),[t,i]),p=(0,r().K8)((()=>t&&!Boolean(i.state.disableGuestMembershipRequests)),[t,i]),m=(0,l().DP)();return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ji().AJ,{environment:d,toggleOn:u,onClick:()=>Ri({name:"disableMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},i,s,d),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:o?0:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(n.disable_membership_requests)}),o?(0,ae.jsx)(mi().A,{size:0,dividerColor:m.stroke.secondary}):null,(0,ae.jsx)(ji().fm,{environment:d,toggleOn:g,onClick:()=>Ri({name:"disableExternalMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},i,s,d),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:o?0:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(n.disable_external_membership_requests)}),c&&o?(0,ae.jsx)(mi().A,{size:0,dividerColor:m.stroke.secondary}):null,c&&(0,ae.jsx)(ji().Ck,{environment:d,toggleOn:p,onClick:()=>Ri({name:"disableGuestMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},i,s,d),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:o?0:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(n.disable_guest_membership_requests)})]})}function Ei(e){let{toggleAvailableForTier:t,guestCount:s,securitySettingsStore:i,spaceStore:n,publicAccessRequestsExpEnabled:o,isControlledByOrganization:l,showDivider:d}=e;const c=(0,a().v3)(),u=(0,r().O$)(i),g=(0,r().K8)((()=>!t||o&&!i.state.disablePublicAccessRequests),[t,i,o]),p=(0,r().K8)((()=>t?g||l?()=>{}:()=>async function(e,t,s){const i=e.state.disableGuests,n=e.state.enableGuestInviteRequests;if(i)Ii({disableGuests:!i,...n&&{enableGuestInviteRequests:!n}},e,t,s);else{if(gt().default.checkGate({gateName:"show_keep_existing_guests_modal"}))return void e.setState({...e.state,disableGuestsModalOpen:!0});{const{accept:e}=await j().Gh({message:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.disableGuests.confirmationModal.message",defaultMessage:"Are you sure? All guests in this workspace will be removed."}),acceptLabel:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.disableGuests.confirmationModal.confirmButton.label",defaultMessage:"Yes"})});if(!e)return}Ii({disableGuests:!i},e,t,s)}}(i,n,c):()=>Pi(c)),[c,t,i,n,g,l]);return(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,ae.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.guestsSection.allowGuests.label",defaultMessage:"Allow members to invite guests to pages"}),!t&&(0,ae.jsx)(_i,{}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.guestsSection.disableGuests.caption",defaultMessage:"Your workspace currently has <gueststablink> {guestCount, plural, one {1 guest} other {{guestCount} guests}}</gueststablink>",values:{gueststablink:e=>(0,ae.jsx)(yi().A,{onClick:()=>{_s().Gq(c,{source_tab:yt().A.state.currentTab,destination_tab:"members",destination_subtab:gi().d.Guests}),yt().A.setState({...yt().A.state,currentTab:"members",defaultSubtab:gi().d.Guests})},children:e}),guestCount:s}})})]}),(0,ae.jsx)("div",{onClick:p,style:{marginTop:5,opacity:g?Ti:void 0},children:(0,ae.jsx)(us().A,{on:!u.disableGuests,disabled:g,isLocked:l,lockedTooltip:(0,Es().C)()})})]}),d?(0,ae.jsx)(mi().A,{size:24,style:{opacity:0}}):null,(0,ae.jsx)(bi,{isOpen:Boolean(u.disableGuestsModalOpen),onDismiss:()=>{i.setState({...i.state,disableGuestsModalOpen:!1})},onSave:e=>{Ii({disableGuests:!0,keepExistingGuests:e},i,n,c),i.setState({...i.state,disableGuestsModalOpen:!1})},guestCount:s})]})}function Ui(e){let{toggleAvailableForTier:t,securitySettingsStore:s,spaceStore:i,publicAccessRequestsExpEnabled:n,isControlledByOrganization:o,showDivider:l=!0}=e;const d=(0,a().v3)(),c=(0,r().K8)((()=>!t||!s.state.disableGuests||n&&!s.state.disablePublicAccessRequests),[s,t,n]),u=(0,r().K8)((()=>t&&c?()=>{}:()=>{o||Ri({name:"enableGuestInviteRequests",isToggleEnabled:t,showUpgradeIfDisabled:!0},s,i,d)}),[d,t,s,i,c,o]),g=(0,r().K8)((()=>(0,ve().x3)()),[]),p=(0,r().K8)((()=>!t||s.state.disableGuests),[s,t]);return(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,ae.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,ae.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.label",defaultMessage:"Allow members to request adding guests"}),t&&(0,ae.jsx)(Fs().A,{style:{marginLeft:0},href:(0,He().xS)("guides.guestRequests"),analyticsFrom:"space_saml"}),!t&&(0,ae.jsx)(_i,{style:{marginTop:0}})]}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.caption",defaultMessage:"{hasRequestTab, select, true {Requests must be approved by a workspace owner. You can view all requests <requeststablink>here</requeststablink>} other {Requests must be approved by a workspace owner}}",values:{hasRequestTab:g,requeststablink:e=>(0,ae.jsx)(yi().A,{onClick:()=>{_s().Gq(d,{source_tab:yt().A.state.currentTab,destination_tab:"members",destination_subtab:gi().d.Requests}),yt().A.setState({...yt().A.state,currentTab:"members",defaultSubtab:gi().d.Requests})},children:e})}})})]}),(0,ae.jsx)(xe().A,{render:e=>(0,ae.jsx)("div",{onClick:u,style:{marginTop:5,opacity:c?Ti:void 0},...e,children:(0,ae.jsx)(us().A,{on:s.state.enableGuestInviteRequests,disabled:c,isLocked:o,lockedTooltip:(0,Es().C)()})}),renderTooltip:()=>(0,ae.jsx)("div",{style:{},children:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.disabled.label",defaultMessage:"Disable inviting guests to use this feature"})}),disableTooltip:p,placement:ye().W.Top})]}),l?(0,ae.jsx)(mi().A,{size:24,style:{opacity:0}}):null]})}function Li(e){let{disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:s,enableExternalAccessRequestSettingForTier:i,securitySettingsStore:n,spaceStore:a,organizationOverrides:o}=e;return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",children:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.guestsSection.title",defaultMessage:"Inviting members & guests"})}),(0,ae.jsx)(Oi,{securitySettingsStore:n,spaceStore:a,disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:s,enableExternalAccessRequestSettingForTier:i,organizationOverrides:o,isShownInRequestsTab:!1})]})}function Oi(e){let{disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:s,enableExternalAccessRequestSettingForTier:i,securitySettingsStore:n,spaceStore:a,organizationOverrides:o,isShownInRequestsTab:d=!1}=e;const c=(0,r().K8)((()=>(0,ve().x3)()),[]),u=(0,r().K8)((()=>gt().default.checkGate({gateName:"allow_public_page_access_request",disableExposureLogging:!0})),[]),g=(0,Os().r)(),p=(0,l().DP)();return void 0===g?(0,ae.jsx)(fi().A,{}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Ni,{spaceStore:a,securitySettingsStore:n,toggleAvailableForTier:i,publicAccessRequestsExpEnabled:u,showDivider:!d}),d?(0,ae.jsx)(mi().A,{size:0,dividerColor:p.stroke.secondary}):null,(0,ae.jsx)(Ei,{securitySettingsStore:n,spaceStore:a,toggleAvailableForTier:t,guestCount:g,publicAccessRequestsExpEnabled:u,isControlledByOrganization:Boolean(o.disable_guests),showDivider:!d}),d?(0,ae.jsx)(mi().A,{size:0,dividerColor:p.stroke.secondary}):null,(0,ae.jsx)(Ui,{securitySettingsStore:n,spaceStore:a,toggleAvailableForTier:s,publicAccessRequestsExpEnabled:u,isControlledByOrganization:Boolean(o.enable_guest_invite_requests),showDivider:!d}),d?(0,ae.jsx)(mi().A,{size:0,dividerColor:p.stroke.secondary}):null,(0,ae.jsx)(Bi,{spaceStore:a,securitySettingsStore:n,requestTogglesAvailableForTier:c,organizationOverrides:o,isShownInRequestsTab:d})]})}function Wi(e){let{enable:t,featureUpsellButton:s,securitySettingsStore:i,spaceStore:n,isControlledByOrganization:o}=e;const l=(0,a().v3)(),d=(0,r().K8)((()=>i.state.disablePublicAccess),[i]),c=(0,Je().X)("sharing_anyone_with_the_link");return(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:t?()=>{o||async function(e,t,s){const i=e.state.disablePublicAccess,n=gt().default.checkGate({gateName:"sharing_anyone_with_the_link"});if(!i){const{accept:e}=await j().Gh({message:n?(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.messageAWTLUpdate",defaultMessage:"Are you sure you want to disable publishing sites, forms, and public links?"}):(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.message",defaultMessage:"Are you sure you want to disable publishing sites and forms?"}),description:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.description",defaultMessage:"This will remove access for anyone who is not a member or guest of the workspace from all pages in this workspace."}),acceptLabel:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.confirmButton.label",defaultMessage:"Yes"})});if(!e)return}Ii({disablePublicAccess:!i},e,t,s)}(i,n,l)}:()=>Pi(l),children:[(0,ae.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[c?(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.preventPublicSharing.labelAWTLUpdate",defaultMessage:"Disable publishing sites, forms, and public links"}):(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.preventPublicSharing.label",defaultMessage:"Disable publishing sites and forms"}),!t&&s,(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:c?(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.preventPublicSharing.captionUpdatedAWTL",defaultMessage:"Disable the “Publish site“ and “Anyone on the web with link“ options in the Share menu on every page and form in this workspace"}):(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.preventPublicSharing.caption",defaultMessage:"Disable the Share to web option in the Share menu on every page and form in this workspace."})})]}),(0,ae.jsx)("div",{style:{marginTop:5,opacity:t?void 0:Ti},children:(0,ae.jsx)(us().A,{on:d,disabled:!t,isLocked:o,lockedTooltip:(0,Es().C)()})})]}),(0,ae.jsx)(mi().A,{size:24,style:{opacity:0}})]})}function zi(e){let{enable:t,featureUpsellButton:s,securitySettingsStore:i,spaceStore:n}=e;const o=(0,a().v3)(),l=(0,r().K8)((()=>i.state.disableSpacePageEdits),[i]);return(0,r().K8)((()=>(0,Ls().getActiveTeamCount)()>0),[])?null:(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>Ri({name:"disableSpacePageEdits",isToggleEnabled:t,showUpgradeIfDisabled:!0},i,n,o),children:[(0,ae.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.label",defaultMessage:"Prevent members from editing the Workspace section"}),!t&&s,(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.caption",defaultMessage:"Disable the ability for members to create, move, reorder, and delete top-level Workspace pages."})})]}),(0,ae.jsx)("div",{style:{marginTop:5,opacity:t?void 0:Ti},children:(0,ae.jsx)(us().A,{on:l,disabled:!t})})]}),(0,ae.jsx)(mi().A,{size:24,style:{opacity:0}})]})}function qi(e){let{enable:t,spaceStore:s,securitySettingsStore:i,featureUpsellButton:n,isControlledByOrganization:o}=e;const l=(0,a().v3)(),d=(0,r().K8)((()=>i.state.disableMoveToSpace),[i]);return(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>{o||Ri({name:"disableMoveToSpace",isToggleEnabled:t,showUpgradeIfDisabled:!0},i,s,l)},children:[(0,ae.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disableMovingPages.label",defaultMessage:"Disable duplicating pages to other workspaces"}),!t&&n,(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disableMovingPages.caption",defaultMessage:"Prevent anyone from duplicating pages to other workspaces via the Move To or Duplicate To actions."})})]}),(0,ae.jsx)("div",{style:{marginTop:5,opacity:t?void 0:Ti},children:(0,ae.jsx)(us().A,{on:d,disabled:!t,isLocked:o,lockedTooltip:(0,Es().C)()})})]}),(0,ae.jsx)(mi().A,{size:24,style:{opacity:0}})]})}function Fi(e){let{enable:t,securitySettingsStore:s,spaceStore:i,featureUpsellButton:n,isControlledByOrganization:o}=e;const l=(0,a().v3)(),d=(0,r().K8)((()=>s.state.disableExport),[s]);return(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>{o||Ri({name:"disableExport",isToggleEnabled:t,showUpgradeIfDisabled:!0},s,i,l)},children:[(0,ae.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disableExport.label",defaultMessage:"Disable export"}),!t&&n,(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disableExport.caption",defaultMessage:"Prevent anyone from exporting as Markdown, CSV, or PDF."})})]}),(0,ae.jsx)("div",{style:{marginTop:5,opacity:t?void 0:Ti},children:(0,ae.jsx)(us().A,{on:d,disabled:!t||o,isLocked:o,lockedTooltip:(0,Es().C)()})})]}),(0,ae.jsx)(mi().A,{size:24,style:{opacity:0}})]})}function Ni(e){let{securitySettingsStore:t,spaceStore:s,publicAccessRequestsExpEnabled:i,toggleAvailableForTier:n,isControlledByOrganization:o,showDivider:l=!1}=e;const d=(0,a().v3)(),c=(0,r().K8)((()=>t.state.disablePublicAccessRequests),[t]),u=(0,r().K8)((()=>{if(!n)return()=>Pi(d,{subscriptionTier:"plus"});const e=!t.state.disablePublicAccessRequests,i=!e;return()=>{o||Ii({disablePublicAccessRequests:e,...i&&{disableGuests:!1,enableGuestInviteRequests:!1}},t,s,d)}}),[d,s,t,n,o]);return i?(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:u,children:[(0,ae.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disablePublicAccessRequests.label",defaultMessage:"Allow page access requests from non-members"}),!n&&(0,ae.jsx)(_i,{subscriptionTier:"plus"}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disablePublicAccessRequests.caption",defaultMessage:"This allows anyone with the link to a page to request access. Workspace members can always request access."})})]}),(0,ae.jsx)("div",{style:{marginTop:5,opacity:n?void 0:Ti},children:(0,ae.jsx)(us().A,{on:!c,disabled:!n,isLocked:o,lockedTooltip:(0,Es().C)()})})]}),l?(0,ae.jsx)(mi().A,{size:24,style:{opacity:0}}):null]}):null}function Gi(e){let{securitySettingsStore:t,spaceStore:s,organizationOverrides:n}=e;const a=(0,l().DP)(),o=(0,ns().lh)({spaceId:s.id}),d=(0,r().K8)((()=>(0,Us().e)({billingData:o})),[o]),c=(0,r().O$)(t),u=(0,r().K8)((()=>(0,pi().OX)()),[]),g=(0,r().K8)((()=>(0,pi().jR)()),[]),p=(0,ae.jsx)(_i,{});return d?(0,ae.jsxs)(i.Fragment,{children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",children:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.generalSection.title",defaultMessage:"General"})}),(0,ae.jsx)(Wi,{enable:!0,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_public_access)}),(0,ae.jsx)(zi,{enable:!0,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p}),(0,ae.jsx)(qi,{enable:!0,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_move_to_space)}),(0,ae.jsx)(Fi,{enable:!0,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_export)}),(0,ae.jsx)(Li,{securitySettingsStore:t,spaceStore:s,disableGuestsAvailableForTier:!0,enableGuestInviteRequestAvailableForTier:u,enableExternalAccessRequestSettingForTier:g,organizationOverrides:n}),(0,ae.jsx)("div",{style:{height:36}})]}):(0,ae.jsxs)(i.Fragment,{children:[(0,ae.jsx)("div",{style:Di(a),children:(0,ae.jsx)("span",{style:{marginRight:8},children:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.generalSection.title",defaultMessage:"General"})})}),(0,ae.jsx)(Wi,{enable:c.disablePublicAccess,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_public_access)}),(0,ae.jsx)(zi,{enable:c.disableSpacePageEdits,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p}),(0,ae.jsx)(qi,{enable:c.disableMoveToSpace,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_move_to_space)}),(0,ae.jsx)(Fi,{enable:c.disableExport,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_export)}),(0,ae.jsx)(Li,{securitySettingsStore:t,spaceStore:s,disableGuestsAvailableForTier:c.disableGuests,enableGuestInviteRequestAvailableForTier:c.enableGuestInviteRequests,enableExternalAccessRequestSettingForTier:g,organizationOverrides:n}),(0,ae.jsx)("div",{style:{height:32}})]})}var Ki=()=>s(647276),Vi=()=>s(898055);function Hi(e){let{spaceStore:t}=e;const s=(0,f().tz)(),{setPage:n}=(0,i.useContext)(ls().K);return(0,ae.jsxs)(Dt().Y1,{height:"fill",direction:"vertical",gap:16,padding:"36px 60px",children:[(0,ae.jsx)(js().n,{title:s.formatMessage(Yi.title),goBack:()=>n("home")}),(0,ae.jsx)($i,{spaceStore:t})]})}function $i(e){let{spaceStore:t}=e;const s=(0,Vi().l)({spaceId:t.id}),i=(0,r().K8)((()=>(0,Us().e)({billingData:s})),[s]),n=(0,r().uB)(void 0,ht().A);(0,o().l)((()=>{const e=n.getValueForSpace(t);e&&n.setState(e)}));const a=(0,r().O$)(n),{organizationOverrides:l}=(0,Ki().n)({spaceId:t.id}),d=(0,p().AI)(s),c=(0,r().K8)((()=>(0,m().OX)(d)),[d]),u=(0,r().K8)((()=>(0,m().jR)(d)),[d]);return i?(0,ae.jsx)(Oi,{securitySettingsStore:n,spaceStore:t,disableGuestsAvailableForTier:!0,enableExternalAccessRequestSettingForTier:u,enableGuestInviteRequestAvailableForTier:c,organizationOverrides:l,isShownInRequestsTab:!0}):(0,ae.jsx)(Oi,{securitySettingsStore:n,spaceStore:t,disableGuestsAvailableForTier:a.disableGuests,enableExternalAccessRequestSettingForTier:u,enableGuestInviteRequestAvailableForTier:a.enableGuestInviteRequests,organizationOverrides:l,isShownInRequestsTab:!0})}const Yi=(0,f().YK)({title:{id:"RequestsSettingPage.PeopleInvitationSettings.title",defaultMessage:"Inviting guests and members"}});var Ji=()=>s(545947);function Qi(e){let{spaceStore:t,securitySettingsStore:s}=e;const n=(0,r().K8)((()=>"requests"===yt().A.state.currentTab&&yt().A.state.defaultSubtab||"home"),[]),[a,o]=(0,i.useState)(n),l=(0,rs().n)();return(0,ae.jsx)(ls().K.Provider,{value:{currentPage:a,setPage:o,isSalesEligible:l},children:(0,ae.jsx)(Zi,{securitySettingsStore:s,spaceStore:t})})}function Zi(e){let{spaceStore:t,securitySettingsStore:s}=e;const{currentPage:n}=(0,i.useContext)(ls().K);switch(n){case"home":return(0,ae.jsx)(Cs,{securitySettingsStore:s,spaceStore:t});case"people_invitation_settings":return(0,ae.jsx)(Hi,{spaceStore:t});case"upgrades":return(0,ae.jsx)(Ji().Z,{spaceStore:t});default:return null}}var Xi=()=>s(305043),en=()=>s(668670);const tn={VerifiedPagesSettings:new(Be().O2)("VerifiedPagesSettings",(()=>Promise.all([s.e(43380),s.e(76181),s.e(90280),s.e(6463),s.e(9353),s.e(84350),s.e(35599),s.e(16006)]).then(s.bind(s,769419))))},sn=(0,Be()._h)(tn.VerifiedPagesSettings,(e=>e.VerifiedPagesSettings));var nn=()=>s(69260),an=()=>s(454909),on=()=>s(893576);var rn=()=>s(578355),ln=()=>s(893076),dn=()=>s(416865),cn=()=>s(944110),un=()=>s(247900),gn=()=>s(736851);function pn(e){let{spaceStore:t,sharedWithFilterItems:s,setSharedWithFilter:n,runNewSearch:a,includeGroups:o,includeGuests:r}=e;const l=(0,un().H)({spaceStore:t}),d=(0,i.useMemo)((()=>l.loading?[]:r?[...l.members,...l.guests]:l.members),[l,r]),c=(0,i.useMemo)((()=>l.loading?new Set:new Set(l.guests.map((e=>e.id)))),[l]);return(0,ae.jsx)(gn().Jo,{isMultiSelect:!0,includePermissionGroups:o,userStores:d,title:(0,ae.jsx)(f().sA,{id:"adminContentSearchTab.pagesTable.filters.sharedWith.title",defaultMessage:"Shared with"}),selectedItems:s??[],setSelectedItems:function(e){const t=e.map((e=>{let{id:t,type:s}=e;return{type:s,id:t}}));n(t.length>0?t:void 0)},onMenuClose:a,guestUserIdSet:c,includeGuests:r})}var mn=()=>s(540389);function fn(e){let{spaceStore:t,filters:s,runNewSearch:n,setFilters:o,hasUserConfirmedAcknowledgement:d}=e;const c=function(e){const[t,s]=(0,i.useState)([]),n=(0,a().v3)(),o=(0,r().K8)((()=>(null==e?void 0:e.spaceStore)??lt().default.state.currentSpaceStore),[null==e?void 0:e.spaceStore]),l=(0,r().K8)((()=>{var e;return null===(e=lt().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]);return(0,i.useEffect)((()=>{!async function(){const e=await(0,Ls().getAllTeamsInSpaceForEnterpriseAdmin)({spaceStore:o,currentUserId:l,includeArchived:!1,minRoleOnTeamStores:"editor",environment:n});s(e)}()}),[o,l,n]),t}(),u=(0,l().IS)((e=>({container:{margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItemsCenter:"center"}})),[]);return(0,ae.jsxs)("div",{style:u.container,children:[(0,ae.jsx)(on().nv,{mode:on().Ke.Button,query:s.query,setQueryFilter:function(e){o({query:e},{runSearchAfter:!0})},disabled:!d}),d?(0,ae.jsxs)("div",{style:u.filterPillsContainer,children:[(0,ae.jsx)(cn().MC,{spaceStore:t,selectedPageStatus:s.pageStatus,setSelectedPageStatus:function(e){o({pageStatus:e})},onMenuClose:n}),(0,ae.jsx)(dn().Z,{lastEditedTime:s.lastEditedTime,createdTime:s.createdTime,setLastEditedTime:function(e){o({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){o({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}}),(0,ae.jsx)(mn().j,{selectedTeamIds:s.teamIds,setSelectedTeamIds:function(e){o({teamIds:e})},onMenuClose:n,teamStores:c}),(0,ae.jsx)(pn,{spaceStore:t,sharedWithFilterItems:s.sharedWith,setSharedWithFilter:function(e){o({sharedWith:e})},runNewSearch:n,includeGroups:!0,includeGuests:!0}),(0,ae.jsx)(rn().tE,{selectedAudience:s.audience,setSelectedAudience:function(e){o({audience:e})},onMenuClose:n,audienceValues:an().p}),(0,ae.jsx)(ln().Q,{spaceStore:t,createdByFilterIds:s.createdBy,setCreatedByFilter:function(e){o({createdBy:e})},runNewSearch:n,includeGuests:!0})]}):null]})}function hn(e){let{spaceStore:t,filters:s,pageStores:i,hasUserConfirmedAcknowledgement:n}=e;const a=(0,r().K8)((()=>t.getName()),[t]);return(0,ae.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:24},children:[(0,ae.jsx)(be().A,{isMultiline:!0,style:{marginBottom:20},isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{id:"adminContentSearchTab.description.dataRetentionPolicy",defaultMessage:"Workspace owners can search for any page in <b>{workspaceName}</b>. This includes private pages and deleted pages retained per the <link>data retention policy</link>",values:{workspaceName:a,b:e=>(0,ae.jsx)("b",{children:e}),link:e=>(0,ae.jsx)(yi().A,{onClick:()=>yt().A.setState({openedFrom:"content_search",open:!0,currentTab:"security",highlightedSetting:void 0,defaultSubtab:"data_retention"}),children:e})}})}),(0,ae.jsx)(nn().t,{spaceId:t.id,disabled:0===i.length||!n,filters:s})]})}const Sn=function(e){let{spaceStore:t,userStore:i}=e;const n=(0,a().v3)(),o=(0,r().K8)((()=>{const e=lt().default.state.currentSpaceViewStore,t=null==e?void 0:e.getSettings();return(null==t?void 0:t.admin_content_search_acknowledgement)??!1}),[]),{showSuggestions:l,loadNextPage:d,pageStores:c,loading:u,error:g,runNewSearch:p,filters:m,setFilters:h,refreshSearchResult:S}=(0,s(324458).I)({spaceStore:t,userStore:i,hasUserConfirmedAcknowledgement:o});return(0,ae.jsxs)(Gt().Ay,{children:[(0,ae.jsx)(ge().A,{large:!n.device.isMobile||void 0,divider:n.device.isMobile?void 0:"full",children:(0,ae.jsx)(f().sA,{id:"adminContentSearchTab.title",defaultMessage:"Content search"})}),(0,ae.jsx)(hn,{spaceStore:t,pageStores:c,filters:m,hasUserConfirmedAcknowledgement:o}),(0,ae.jsx)(fn,{spaceStore:t,runNewSearch:p,setFilters:h,filters:m,hasUserConfirmedAcknowledgement:o}),(0,ae.jsx)(s(718696).r,{loading:u,error:g,pageStores:c,loadNextPage:d,filters:m,setFilters:h,showSuggestions:l,runNewSearch:p,hasUserConfirmedAcknowledgement:o,refreshSearchResult:S})]})};var xn=()=>s(847723),bn=()=>s(528762),vn=()=>s(129243),yn=()=>s(803497),jn=()=>s(271674),An=()=>s(113920),Cn=()=>s(331736),wn=()=>s(208762),Mn=()=>s(921637),Tn=()=>s(46550);const kn=function(e){let{spaceStore:t,userStore:n,organizationOverrides:o}=e;const l=(0,a().v3)(),d=(0,r().uB)(void 0,Cn().A),{device:c}=l,u=(0,r().K8)((()=>(0,s(548694).s7)(l)),[l]);return(0,i.useEffect)((()=>{u||A().Ow({currentTab:"members"})}),[u]),u?(0,ae.jsxs)(Gt().Ay,{children:[(0,ae.jsx)(ge().A,{large:!c.isMobile||void 0,divider:c.isMobile?void 0:"full",style:{paddingBottom:12},children:(0,ae.jsx)(f().sA,{id:"spaceConnectionsSettings.title",defaultMessage:"Connections"})}),(0,ae.jsx)(Dn,{spaceStore:t,userStore:n,requestStore:d,organizationOverrides:o})]}):null};function In(e){let{error:t,result:s,ready:i,organizationOverrides:n}=e;return(0,r().O$)(lt().AppStoreCurrentSpaceStore)?(0,ae.jsxs)(Tn().A,{loaded:i,spinnerSize:"sm",showSpinnerTimeout:600,children:[t&&(0,ae.jsx)("div",{children:(0,ae.jsx)(f().sA,{id:"spaceIntegrationSettings.error",defaultMessage:"Something went wrong…"})}),s&&(0,ae.jsx)(wn().Ay,{...s,organizationOverrides:n})]}):null}function Dn(e){let{spaceStore:t,userStore:s,requestStore:i,organizationOverrides:n}=e;const o=(0,a().v3)(),l=(0,r().uB)(i,Cn().A),d=(0,Je().X)("ai_connector_discoverability");return(0,ae.jsx)(Mn().A,{requestStore:l,request:{spaceId:t.id,userId:s.id},performRequest:async e=>(d&&await async function(e,t){let{spaceId:s}=e;const i=await U().callApi({eventName:"getConnectedAppsForUniversalQna",environment:t,data:{spaceId:s},headers:(0,R().WS)({spaceId:s})});var n;return"success"===i.type&&An().A.setState({...An().A.state,appsConnectionData:(null===(n=i.data)||void 0===n?void 0:n.appsData)||[]}),[]}(e,o),async function(e,t){let{spaceId:s}=e;return{guestBotIds:(await Promise.all([vn().Ju({environment:t,table:bn().NX,id:s,type:"guest"}),vn().Ju({environment:t,table:bn().NX,id:s,type:"external"}),jn().oX({environment:t}),yn().g({environment:t})]))[0].botIds}}(e,o)),render:(e,t,s)=>(0,ae.jsx)(In,{error:e,result:t,ready:s,organizationOverrides:n})})}var Pn=()=>s(435819),Rn=()=>s(482570),_n=()=>s(349984),Bn=()=>s(479292),En=(s(362833),()=>s(704082)),Un=()=>s(393378);const Ln=10,On=[50,100,200,500,1e3],Wn=50;function zn(e){var t;let{spaceStore:s,samlConfigStore:n,memberCountFilter:o,isPrimarySpace:l}=e;const d=(0,a().v3)(),c=(0,r().K8)((()=>n.state.emailDomains),[n]),[u,g]=(0,i.useState)({spaces:[],nextEarliestCreatedAt:Date.now(),numPagesLoaded:0,hasNextPage:!1,loading:!1,error:void 0}),p=(0,qt().P9)({name:"claimable_spaces",spaceId:s.id,userId:null===(t=d.currentUser)||void 0===t?void 0:t.id}),m=(0,i.useCallback)((async e=>{if(p&&0!==c.length&&l&&u.nextEarliestCreatedAt&&!u.loading&&!(e&&u.numPagesLoaded>0||u.error)){g((e=>({...e,loading:!0})));try{const{spaces:e,earliestCreatedAt:t,hasMoreSpaces:i}=await(0,Un().L5)({fn:async()=>await async function(e,t,s,i,n){const a=await U().callApi({eventName:"getSpacesCreatedByUserWithDomains",environment:e,data:{spaceId:t,emailDomains:s,spacesLimit:Ln,memberCountFilter:n,spaceCreatedTimeUpperBound:i}});if("failed"===a.type)throw a.error;return{spaces:a.data.results.map((e=>({id:e.id,name:e.spaceName,icon:e.spaceIcon,createdAt:e.spaceCreatedTime,memberCount:e.memberCount,subscriptionTier:e.subscriptionTier,creatorEmailDomain:e.spaceCreatedByDomain,creator:e.spaceCreator,admins:e.admins,spaceRequest:e.spaceRequest,isDelinquent:e.isDelinquent,isPendingBilling:e.isPendingBilling,isActorInSpace:e.isActorInSpace}))),earliestCreatedAt:a.data.hasMoreSpaces?a.data.earliestCreatedAt:void 0,hasMoreSpaces:a.data.hasMoreSpaces}}(d,s.id,c,u.nextEarliestCreatedAt?u.nextEarliestCreatedAt-1:Date.now(),o),handleError:(e,t)=>t?{status:"throw",error:e}:{status:"retry"},retryAttemptsMS:On,retryAttemptRandomOffsetMS:Wn,initialInput:void 0});g((s=>{const n=[...s.spaces],a=new Set(s.spaces.map((e=>e.id)));for(const t of e)a.has(t.id)||n.push(t);return{spaces:n,nextEarliestCreatedAt:t,numPagesLoaded:s.numPagesLoaded+1,hasNextPage:i,loading:!1,error:void 0}}))}catch(t){const e=(0,En().A)(t);g((t=>({...t,loading:!1,error:e})))}}}),[d,p,o,l,s,c,u.nextEarliestCreatedAt,u.numPagesLoaded,u.loading,u.error]);const f=(0,i.useCallback)((async()=>{await m(!1)}),[m]),h=(0,i.useCallback)((async()=>{await m(!0)}),[m]),S=(0,i.useCallback)((async()=>{g({spaces:[],nextEarliestCreatedAt:Date.now(),numPagesLoaded:0,hasNextPage:!1,loading:!1,error:void 0}),await m(!0)}),[m]);return{claimableSpaces:u.spaces,loading:u.loading,error:u.error,hasNextPage:u.hasNextPage,loadFirstPage:h,loadNextPage:f,resetFirstPage:S,setSpaceRequest:function(e,t){g((s=>{const i=s.spaces.map((s=>s.id===e?{...s,spaceRequest:t}:s));return{...s,spaces:i}}))},removeClaimableSpace:function(e){g((t=>{const s=t.spaces.filter((t=>t.id!==e));return{...t,spaces:s}}))}}}var qn=()=>s(162901);async function Fn(e){var t;const{environment:s,spaceId:i,store:n}=e;if(!(await(0,qt().Se)(s,{name:"saml",spaceId:i,userId:null===(t=lt().default.state.currentUserStore)||void 0===t?void 0:t.id})))return n.reset(),{};const a=await U().callApi({eventName:"getSamlConfigForSpace",environment:s,data:{spaceId:i}});if("failed"===a.type)j().Qg(a);else if(a.data&&a.data.samlConfig){const e={...a.data.samlConfig,useMetadataUrl:!Boolean(a.data.samlConfig.idpMetadata)};return n.setState(e),a.data}return n.reset(),{}}const Nn={SettingsPage:"settings-page",WorkspacesPage:"workspaces-page",ManagedUsersPage:"managed-users-page"};let Gn=function(e){return e[e.Single=0]="Single",e[e.Multi=1]="Multi",e}({});const Kn=(0,i.createContext)(null);function Vn(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:n,children:o}=e;const l=(0,a().v3)(),[d,c]=(0,i.useState)(Nn.SettingsPage),[u,g]=(0,i.useState)(Gn.Single),p=(0,r().K8)((()=>s.state.emailDomains),[s]),f=(0,r().K8)((()=>Boolean(s.state.id)&&s.state.id===t.id),[s,t]),{loading:h,error:S,loaded:x}=function(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:i}=e;const n=(0,a().v3)(),[{status:o,error:r}]=(0,qn().Yb)((async()=>{const e=await Fn({environment:n,spaceId:t.id,store:s});return(0,P().USz)(e)?e:e.samlConfig?{samlResponse:e,domainResponse:await i.updateValueForSpace({environment:n,spaceId:t.id,store:i})}:{samlResponse:e,domainResponse:void 0}}),[n,s,t,i]);return{loading:"pending"===o,loaded:"resolved"===o,error:r}}({spaceStore:t,samlConfigStore:s,domainSettingsStore:n}),{loading:b,error:v,claimableSpaces:y,setSpaceRequest:j,removeClaimableSpace:A,hasNextPage:C,loadNextPage:w,loadFirstPage:M,resetFirstPage:T}=zn({spaceStore:t,samlConfigStore:s,isPrimarySpace:f,memberCountFilter:"single"}),{loading:k,error:I,claimableSpaces:D,setSpaceRequest:R,removeClaimableSpace:_,hasNextPage:B,loadNextPage:E,loadFirstPage:L,resetFirstPage:O}=zn({spaceStore:t,samlConfigStore:s,isPrimarySpace:f,memberCountFilter:"multi"}),W=y.length+D.length>0,[z,q,F,N,G,K,V,H]=u===Gn.Single?[b,v,y,j,A,C,w,M,T]:[k,I,D,R,_,B,E,L,O],{loading:$,error:Y,domainVerifications:J}=function(e){let{spaceStore:t}=e;const s=(0,a().v3)(),[n,o]=(0,i.useState)([]),[{status:r,error:l}]=(0,qn().Yb)((async()=>{if(!(0,m().HO)(t.getSubscriptionTier()))return void o([]);const e=await U().callApi({eventName:"getDomainVerificationCodesForSpace",environment:s,data:{spaceId:t.id,verifiedOnly:!0}});"success"===e.type?o(e.data.domainVerifications):o([])}),[s,t]);return{loading:"pending"===r,domainVerifications:"resolved"===r?n:[],error:l}}({spaceStore:t,emailDomains:p});(0,i.useEffect)((()=>{M(),L()}),[F,M,L]);const Q={page:d,navigateTo:function(e){c(e),0===y.length&&D.length>0&&g(Gn.Multi),"workspaces-page"===e&&Bn().Vp(l,{verifiedDomains:p,tab:u===Gn.Single?"single":"multi"})},loadingSaml:h,loadingSpaces:z,loadingVerifications:$,errorSaml:S,errorClaimableSpaces:q,errorVerifications:Y,loadedSaml:x,domainVerifications:J,hasBrowsableSpaces:W,claimableSpaces:F,setSpaceRequest:N,removeClaimableSpace:G,resetInitialClaimableSpaces:H,hasMoreClaimableSpaces:K,loadMoreClaimableSpaces:V,tab:u,setSelectedTab:function(e){g(e),"workspaces-page"===d&&Bn().Vp(l,{verifiedDomains:p,tab:e===Gn.Single?"single":"multi"})},verifiedDomains:p};return(0,ae.jsx)(Kn.Provider,{value:Q,children:o})}var Hn=()=>s(284594),$n=()=>s(356813),Yn=(s(500234),()=>s(479925)),Jn=()=>s(867911),Qn=()=>s(827744),Zn=()=>s(945780);const Xn=(0,Mt().wt)("showDeletedPages",{viewBox:"0 0 16 16",svg:(0,ae.jsx)("path",{d:"M1.89551 8.5498C1.89551 11.9404 4.61621 14.668 8 14.668C11.3838 14.668 14.1045 11.9404 14.1045 8.5498C14.1045 5.16602 11.4043 2.45898 8.02051 2.45898C7.66504 2.45898 7.31641 2.49316 7.01562 2.55469L8.66992 0.920898C8.78613 0.797852 8.85449 0.640625 8.85449 0.462891C8.85449 0.09375 8.56738 -0.207031 8.20508 -0.207031C8.01367 -0.207031 7.84961 -0.138672 7.7334 -0.00878906L4.93066 2.8418C4.79395 2.97852 4.71875 3.15625 4.71875 3.33398C4.71875 3.51855 4.78711 3.68262 4.93066 3.82617L7.7334 6.65625C7.84961 6.7793 8.00684 6.84082 8.20508 6.84082C8.56738 6.84082 8.85449 6.55371 8.85449 6.17773C8.85449 6 8.78613 5.85645 8.66309 5.72656L6.80371 3.88086C7.15234 3.80566 7.56934 3.77148 8.02051 3.77148C10.666 3.77148 12.7646 5.88379 12.7646 8.5498C12.7646 11.2021 10.6455 13.3281 8 13.3281C5.35449 13.3281 3.23535 11.2021 3.23535 8.5498C3.23535 8.14648 2.97559 7.85938 2.5791 7.85938C2.17578 7.85938 1.89551 8.14648 1.89551 8.5498Z"})});var ea=()=>s(862067),ta=()=>s(575015);const sa={managedUsers:[],filters:{query:"",multiFactorStatus:void 0,workspaceId:void 0},numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0};function ia(e){let{spaceStore:t,samlConfigStore:s,userStatus:n}=e;const o=(0,a().v3)(),[l,d]=(0,i.useState)(sa),c=(0,i.useRef)(void 0),u=(0,r().K8)((()=>Boolean(s.state.id)&&s.state.id===t.id),[s,t]),g=(0,r().K8)((()=>s.state.emailDomains),[s]),p=(0,i.useCallback)((async e=>{if(0===g.length)return;if(!u)return;let s=l.loading,i=l.error,a=l.hasNextPage,r=l.paginationToken;if(e.restartSearch&&(d((e=>({...sa,filters:e.filters}))),s=sa.loading,i=sa.error,a=sa.hasNextPage,r=sa.paginationToken),a&&!s&&!i){d((e=>({...e,loading:!0}))),c.current=l.filters;try{var p;const e=await U().callApi({eventName:"getManagedUsers",environment:o,data:{spaceId:t.id,emailDomains:g,query:l.filters.query,multiFactorStatus:l.filters.multiFactorStatus,workspaceId:l.filters.workspaceId,paginationToken:r,userStatus:n}});if(_s().F2(o,{filters:{multiFactorStatus:l.filters.multiFactorStatus,workspaceId:l.filters.workspaceId},query_length:(null===(p=l.filters.query)||void 0===p?void 0:p.length)??0,current_page:r,user_status:n}),"failed"===e.type)throw e.error;const s=e.data.nextPaginationToken,i=e.data.results;d((e=>{const t=[...e.managedUsers],n=new Set(e.managedUsers.map((e=>e.userId)));for(const s of i)n.has(s.userId)||t.push(s);return{...e,managedUsers:t,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:s,hasNextPage:Boolean(s)}}))}catch(m){const e=(0,En().A)(m);d((t=>({...t,loading:!1,error:e})))}}}),[o,t,g,u,l.loading,l.error,l.hasNextPage,l.paginationToken,l.filters,n]);(0,i.useEffect)((()=>{h().n4(c.current,l.filters)||p({restartSearch:!0})}),[l.filters,p]);const m=(0,i.useCallback)((()=>p({restartSearch:!1})),[p]),f=(0,i.useCallback)((e=>{d((t=>({...t,filters:{...t.filters,...e}})))}),[]),S=(0,i.useCallback)(((e,t)=>{d((s=>({...s,managedUsers:s.managedUsers.map((s=>s.userId===e?{...s,workspaces:s.workspaces.filter((e=>e.id!==t))}:s))})))}),[]),x=(0,i.useCallback)((e=>{d((t=>({...t,managedUsers:[...t.managedUsers,e]})))}),[]),b=(0,i.useCallback)((e=>{d((t=>({...t,managedUsers:t.managedUsers.filter((t=>t.userId!==e))})))}),[]);return{managedUsers:l.managedUsers,filters:l.filters,loading:l.loading,error:l.error,removeWorkspaceFromUser:S,addUserToManagedUsers:x,removeUserFromManagedUsers:b,setFilters:f,hasNextPage:l.hasNextPage,loadNextPage:m}}let na=function(e){return e[e.NotSuspended=0]="NotSuspended",e[e.Suspended=1]="Suspended",e}({});function aa(e){switch(e){case na.Suspended:return"suspended";case na.NotSuspended:return"notSuspended";default:(0,Rs().HB)(e)}}var oa=()=>s(670481),ra=()=>s(811132),la=()=>s(960087);function da(e){let{workspace:t}=e;const s=(0,f().tz)(),i=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}})),[]);return(0,ae.jsxs)("div",{style:i.container,children:[t.name??(0,la().a)(s),t.isExternal?(0,ae.jsx)(ca,{}):null]})}function ca(){const e=(0,l().IS)((e=>({icon:{marginLeft:4,height:14,width:14,opacity:.5}})),[]);return(0,ae.jsx)(xe().A,{render:t=>(0,ae.jsx)("div",{...t,children:(0,oa().G)(e.icon)}),renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.userAccess.externalSpaceNameTooltipText",defaultMessage:"This is an external workspace that does not belong to this user."})})}function ua(e){let{workspaceSummaries:t}=e;const s=(0,f().tz)(),i=(0,l().IS)((e=>({noWorkspaces:{paddingInline:8,opacity:.5},workspaceName:{maxWidth:"80%"},plusMore:{opacity:.5,marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",marginLeft:4}})),[]);if(t.length<=0)return(0,ae.jsx)(be().A,{style:i.noWorkspaces,children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.userAccess.noWorkspaces",defaultMessage:"No workspaces"})});const n=t.find((e=>e.name)),a=n?n.name:(0,la().a)(s),o=t.length-1;return(0,ae.jsxs)("div",{style:i.titleContainer,children:[(0,ae.jsx)(be().A,{isInline:!0,style:i.workspaceName,children:a}),!n||n.isExternal?(0,ae.jsx)(ca,{}):null,o>0?(0,ae.jsxs)(be().A,{isInline:!0,style:i.plusMore,children:[(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.userAccess.additionalCount",defaultMessage:"+{numRemainingWorkspaces}",values:{numRemainingWorkspaces:o}}),""]}):null]})}var ga=()=>s(711361),pa=()=>s(220413),ma=()=>s(640979),fa=()=>s(962373),ha=()=>s(331516),Sa=()=>s(273520),xa=()=>s(935091),ba=()=>s(858023),va=()=>s(443252),ya=()=>s(88271),ja=()=>s(797631);const Aa=(0,f().YK)({menuAriaLabel:{defaultMessage:"Open action menu for this user.",id:"identityAndProvisioning.managedUsers.table.menu.ariaLabel"}});function Ca(e){let{managedUser:t,managedUserActionSections:s}=e;const i=(0,r().uB)(void 0,fa().A),n=(0,f().tz)(),a=(0,l().IS)((()=>({container:{minWidth:265}})),[]);return(0,ae.jsx)(Sa().Ay,{popupType:va().nl.Popup,style:a.container,buttonPopupStore:i,renderOrigin:e=>(0,ae.jsx)($n().A,{ariaLabel:n.formatMessage(Aa.menuAriaLabel),icon:ga()._,...e}),render:()=>(0,ae.jsx)(wa,{managedUser:t,popupStore:i,managedUserActionSections:s})})}function wa(e){let{managedUser:t,popupStore:s,managedUserActionSections:i}=e;const n=[],a=(0,l().IS)((()=>({destructiveIcon:{fill:pa().Ay.red,color:pa().Ay.red}})),[]);for(const[o,r]of i.entries()){const e=r.map(((e,s)=>({key:s,render:s=>{var i,n;return(0,ae.jsx)(ha().A,{...s,shouldWrapCaption:!0,svg:t=>e.icon(e.isDestructive?{...t,...a.destructiveIcon}:t),title:e.title,style:{paddingTop:8,paddingBottom:8,...e.isDestructive?a.destructiveIcon:{}},disabled:null===(i=e.getDisabledState)||void 0===i?void 0:i.call(e,t),disabledFeedback:null===(n=e.getDisabledState)||void 0===n?void 0:n.call(e,t)})},action:()=>e.onClick(t)}))),s={key:`section-${o}`,render:e=>(0,ae.jsx)(ya().A,{topBorder:o>0,...e}),items:e};n.push(s)}return(0,ae.jsxs)(xa().A,{menuType:ma().gu.Popup,children:[(0,ae.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:n,onAccept:()=>{s.setState({open:!1})}}),(0,ae.jsx)(ya().A,{topBorder:!0,children:(0,ae.jsx)(ja().A,{title:(0,ae.jsx)(f().sA,{defaultMessage:"Learn about user suspension",id:"managedUsersDashboard.userActionsMenu.helpButton"}),href:(0,He().xS)("guides.managedUsers"),analyticsFrom:"managed_users_dashboard_user_actions_menu"})})]})}var Ma=()=>s(63108),Ta=function(e){return e.ManagedUser="managed-user",e.Loading="loading",e}(Ta||{});const ka={marginLeft:4,height:14,width:14,opacity:.5},Ia=[{id:"user",headerTitle:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.user",defaultMessage:"Users"}),renderCell:e=>e.type===Ta.ManagedUser?(0,ae.jsx)(Ma()._,{userId:e.managedUser.userId}):(0,ae.jsx)(Ma().a,{}),widthData:{width:70},sortable:!1},{id:"access",headerTitle:(0,ae.jsx)("span",{style:{paddingInline:8},children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.access",defaultMessage:"Workspaces"})}),renderCell:e=>e.type===Ta.ManagedUser?(0,ae.jsx)(ua,{workspaceSummaries:e.managedUser.workspaces}):(0,ae.jsx)(s(274347).Kb,{}),widthData:{width:60},sortable:!1},{id:"lastActive",headerTitle:(0,ae.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},children:[(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.lastActive",defaultMessage:"Last active"}),(0,ae.jsx)(xe().A,{render:e=>(0,ae.jsx)("div",{...e,children:(0,oa().G)(ka)}),renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.lastActive.tooltip",defaultMessage:"This may be delayed by several hours."})})]}),renderCell:e=>e.type===Ta.ManagedUser?(0,ae.jsx)(s(410087).F,{lastActiveAt:e.managedUser.lastActiveAt,containerStyle:{opacity:.5}}):(0,ae.jsx)(ra().h,{}),widthData:{width:60},sortable:!1},{id:"menu",headerTitle:null,renderCell:e=>e.type===Ta.ManagedUser?(0,ae.jsx)(Ca,{managedUser:e.managedUser,managedUserActionSections:e.managedUserActionSections}):null,widthData:{width:15},sortable:!1,hasClickableContents:!0}],Da=[{id:"1",isClickable:!1,type:Ta.Loading},{id:"2",isClickable:!1,type:Ta.Loading},{id:"3",isClickable:!1,type:Ta.Loading}];function Pa(e){let{managedUsers:t,loadMoreManagedUsers:s,onEditDetails:i,loading:n,managedUserActionSections:a}=e;const o=t.map((e=>({id:e.userId,type:Ta.ManagedUser,managedUser:e,isClickable:!0,managedUserActionSections:a}))),r=(0,l().IS)((e=>(0,he().rC)({columnRenderInfo:Ia,theme:e,containerMarginTop:0})),[]);const d=n?[...o,...Da]:o;return(0,ae.jsx)(he().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Ia,rows:d,onRowClick:function(e){e.type===Ta.ManagedUser&&i(e.managedUser)},renderNoRowsComponent:()=>(0,ae.jsx)(Ra,{loading:n}),styles:r,loadMoreMethod:s?{type:"scroll",onLoadMore:s}:void 0})}function Ra(e){const t=(0,l().IS)((()=>({text:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]);return(0,ae.jsx)(be().A,{isSmall:!0,style:t.text,children:!e.loading&&(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.empty",defaultMessage:"No users found."})})}var _a=()=>s(707004),Ba=()=>s(846581),Ea=()=>s(707781),Ua=()=>s(483838),La=()=>s(289113),Oa=()=>s(615917),Wa=()=>s(463787),za=()=>s(412084);function qa(e){let{title:t,byline:s,isOn:i,onToggle:n,disabled:a,tooltipForDisabled:o}=e;function r(){a||n()}return(0,ae.jsx)(xe().A,{placement:ye().W.Top,alignment:ye().C.End,disableTooltip:!o||!a,renderTooltip:()=>o,render:e=>(0,ae.jsx)("div",{...e,children:(0,ae.jsx)(Ns,{title:t,byline:s,settingItem:(0,ae.jsx)(us().A,{on:i,disabled:a,onClick:r})})})})}var Fa=()=>s(223082),Na=()=>s(505790),Ga=()=>s(28210);function Ka(e){const{userId:t,workspaces:s,spaceStore:n,removeWorkspaceFromUser:a}=e,o=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8,marginTop:12}})),[]);return(0,ae.jsx)("div",{style:o.container,children:s.map(((e,o)=>(0,ae.jsxs)(i.Fragment,{children:[(0,ae.jsx)(Va,{userId:t,spaceId:n.id,workspace:e,removeWorkspaceFromUser:a}),o<s.length-1?(0,ae.jsx)(mi().A,{size:8}):null]},e.id)))})}function Va(e){const{userId:t,spaceId:s,workspace:i,removeWorkspaceFromUser:n}=e,o=(0,f().tz)(),r=(0,a().v3)(),d=Ha(i),c=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:12,overflow:"hidden"},workspaceContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",gap:12,overflow:"hidden"},iconContainer:{alignSelf:"center"},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},name:{fontSize:14,fontWeight:500},nameUntitled:{fontSize:14,fontWeight:500,opacity:.25},byline:{lineHeight:1.3,fontSize:12,opacity:.5}})),[]);async function u(){_s().PG(r,{external_space_id:i.id});const{accept:e}=await j().Gh({message:(0,ae.jsx)(be().A,{style:j().xh.title,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.message",defaultMessage:"Remove user from workspace?"})}),description:(0,ae.jsx)(be().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.description",defaultMessage:"This user will no longer have access to the workspace you are removing them from. This action is not reversible."})}),acceptLabel:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.acceptLabel",defaultMessage:"Remove"}),cancelLabel:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!e)return;const a=await U().callApi({eventName:"removeManagedUserFromSpace",environment:r,data:{userId:t,targetSpaceId:i.id,requestingSpaceId:s}});_s().st(r,{external_space_id:i.id}),"success"===a.type?(n(t,i.id),ta().D6({label:(0,ae.jsx)(f().sA,{defaultMessage:"Successfully removed user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceConfirmation",values:{workspaceName:i.name}})})):ta().D6({label:(0,ae.jsx)(f().sA,{defaultMessage:"Failed to remove user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceFailure",values:{workspaceName:i.name}})})}const g=i.icon?{pointer:{table:bn().NX,id:i.id,spaceId:i.id},icon:i.icon}:void 0;return(0,ae.jsx)("div",{style:c.container,children:(0,ae.jsxs)("div",{style:c.workspaceContainer,children:[(0,ae.jsx)("div",{style:c.iconContainer,children:(0,ae.jsx)(Ga().B,{disabled:!0,icon:g,isEmptyPage:!1,size:28,title:i.name,isLarge:!0,emojiSize:24,isRaw:!1})}),(0,ae.jsxs)("div",{style:c.textContainer,children:[(0,ae.jsx)(be().A,{style:c.name,isMultiline:!0,children:(0,ae.jsx)(da,{workspace:i})}),(0,ae.jsx)(be().A,{style:c.byline,children:(0,ae.jsx)($a,{workspace:i,intl:o})})]}),(0,ae.jsx)("div",{children:(0,ae.jsx)(xe().A,{render:e=>(0,ae.jsx)(Vt().p,{isRed:!0,onClick:u,disabled:d,disabledFeedback:d,...e,children:(0,ae.jsx)(f().sA,{defaultMessage:"Remove",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace"})}),renderTooltip:()=>(0,ae.jsx)(f().sA,{defaultMessage:"You cannot remove this user from the workspace because they are the only user in the workspace. To remove this user, delete the workspace instead.",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace.disableTooltip"}),disableTooltip:!d,placement:ye().W.Bottom})})]})})}function Ha(e){const t=e.membersCount;return"number"==typeof t?1===t:1===t.length&&1===t[0]}function $a(e){const{workspace:t,intl:s}=e;return Ha(t)?(0,ae.jsx)(f().sA,{defaultMessage:"{plan} · 1 member",id:"identityAndProvisioning.managedUsers.table.userAccess.oneMemberWorkspace",values:{plan:(0,m().u2)({product:t.plan,intl:s})}}):Array.isArray(t.membersCount)?1===t.membersCount.length?(0,ae.jsx)(f().sA,{defaultMessage:"{plan} · {lowerEnd}+ members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersLowerEndRange",values:{plan:(0,m().u2)({product:t.plan,intl:s}),lowerEnd:t.membersCount[0]}}):(0,ae.jsx)(f().sA,{defaultMessage:"{plan} · {lowerEnd} - {higherEnd} members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersRange",values:{plan:(0,m().u2)({product:t.plan,intl:s}),lowerEnd:t.membersCount[0],higherEnd:t.membersCount[1]}}):(0,ae.jsx)(f().sA,{defaultMessage:"{plan} · {numMembers} {numMembers, plural, one {member} other {members}}",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembers",values:{plan:(0,m().u2)({product:t.plan,intl:s}),numMembers:t.membersCount}})}const Ya=(0,f().YK)({namePlaceholder:{defaultMessage:"Display name",id:"identityAndProvisioning.managedUsers.table.userAccess.namePlaceholder"},emailPlaceholder:{defaultMessage:"Email",id:"identityAndProvisioning.managedUsers.table.userAccess.emailPlaceholder"}});function Ja(e){let{spaceStore:t,managedUser:s,onClose:i,removeWorkspaceFromUser:n}=e;const a=Boolean(s),{isAccessGranted:o,toggleDataAccessConsent:r,loading:l}=(0,Na().e)({userId:null==s?void 0:s.userId,spaceId:t.id});return(0,ae.jsx)(Si().a,{open:a,onDismiss:i,preventHideChildrenWhileOpening:!0,render:()=>s?(0,ae.jsx)(Qa,{managedUser:s,isAccessGranted:o,toggleDataAccessConsent:r,loadingSupportAccess:l,renderWorkspacesOverview:()=>(0,ae.jsx)(Ka,{spaceStore:t,userId:s.userId,workspaces:s.workspaces,removeWorkspaceFromUser:n})}):null})}function Qa(e){let{managedUser:t,renderWorkspacesOverview:s,isAccessGranted:i,toggleDataAccessConsent:n,loadingSupportAccess:o}=e;const d=(0,f().tz)(),c=(0,a().v3)(),u=(0,r().K8)((()=>new(ie().LU)(c,{id:t.userId,table:E().oo})),[t,c]),{hasStagedChanges:g,resetState:p,saveChanges:m,loading:h,profilePhoto:S,name:x,email:b}=(0,Fa().u)({userStore:u}),v=(0,r().K8)((()=>u.getIsSuspended()?{type:"suspended"}:(0,Wa().qh)({profilePhoto:S.value,name:x.value,email:b.value})),[u,S.value,x.value,b.value]),y=function(e){const{loadingSupportAccess:t}=e;return(0,l().IS)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",background:e.popoverBackground,width:420,maxHeight:520,overflow:"hidden",borderRadius:8},innerContainer:{position:"relative",display:"flex",flexDirection:"column",width:"100%",height:"100%",overflowY:"auto",padding:"36px 24px",gap:16},label:{color:e.text.secondary},horizontalLabel:{color:e.text.secondary,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:4},value:{color:e.text.primary},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:e.modalBackground},avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},iconStyle:{border:`1px solid ${e.tableDividerColor}`,color:e.text.tertiary,fontWeight:500},inputContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%",gap:8},inputRow:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},icon:{color:e.lightIconColor,fill:"currentColor",width:14,height:14},supportAccessRow:{position:"relative",width:"100%",opacity:t?.5:1},infoContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},infoRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},footer:{position:"absolute",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingInline:4,boxShadow:e.shadow2XS,background:e.popoverBackground,left:0,right:0,bottom:0,height:48},button:{height:30,marginInline:4}})),[t])}({loadingSupportAccess:o}),j=(0,Ea().H)(d),A=!(0,r().O$)(ct().e),C=t.mfaMethods.filter((e=>"backup_code"!==e)),w=d.formatList(C.map((e=>(0,Ua().YX)(e))),{type:"conjunction"});return(0,ae.jsxs)("div",{style:y.container,children:[(0,ae.jsxs)("div",{style:y.innerContainer,children:[(0,ae.jsx)("div",{style:y.avatarContainer,children:(0,ae.jsx)(Wa().Ay,{size:56,avatarType:v,isOffline:A,loading:S.loading,onUploadProfilePhoto:S.set,onRemoveProfilePhoto:S.remove})}),(0,ae.jsxs)("div",{style:y.inputContainer,children:[(0,ae.jsxs)("div",{style:y.inputRow,children:[(0,ae.jsx)(za().A,{children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.nameLabel",defaultMessage:"Name"})}),(0,ae.jsx)(Ys().A,{style:y.input,disabled:h,value:x.value,placeholder:d.formatMessage(Ya.namePlaceholder),onChange:e=>{x.set(e.target.value)}})]}),(0,ae.jsxs)("div",{style:y.inputRow,children:[(0,ae.jsx)(za().A,{children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.emailLabel",defaultMessage:"Email"})}),(0,ae.jsx)(Ys().A,{style:y.input,disabled:h,value:b.value,placeholder:d.formatMessage(Ya.emailPlaceholder),onChange:e=>{b.set(e.target.value)}})]})]}),(0,ae.jsxs)("div",{style:y.infoContainer,children:[(0,ae.jsxs)("div",{style:y.infoRow,children:[(0,ae.jsx)(be().A,{style:y.label,isSmall:!0,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.accountCreatedLabel",defaultMessage:"Account created"})}),t.accountCreatedAt?(0,ae.jsx)(be().A,{isSmall:!0,style:y.value,children:(0,Ba().W_)(t.accountCreatedAt,"medium",j)}):(0,ae.jsx)(be().A,{isSecondaryColor:!0,isSmall:!0,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.emptyAccountCreated",defaultMessage:"Incomplete"})})]}),(0,ae.jsx)(mi().A,{size:16}),(0,ae.jsxs)("div",{style:y.infoRow,children:[(0,ae.jsx)(be().A,{style:y.label,isSmall:!0,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.lastActiveLabel",defaultMessage:"Last active"})}),t.lastActiveAt?(0,ae.jsx)(be().A,{isSmall:!0,style:y.value,children:(0,La().DG)(t.lastActiveAt)}):(0,ae.jsx)(be().A,{isSecondaryColor:!0,isSmall:!0,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.emptyLastActive",defaultMessage:"No activity"})})]}),(0,ae.jsx)(mi().A,{size:16}),(0,ae.jsxs)("div",{style:y.infoRow,children:[(0,ae.jsx)(be().A,{style:y.label,isSmall:!0,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.mfaLabel",defaultMessage:"2-step verification method"})}),C.length>0?(0,ae.jsx)(be().A,{isSmall:!0,style:y.value,children:w}):(0,ae.jsx)(be().A,{isSecondaryColor:!0,isSmall:!0,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.emptyMfa",defaultMessage:"Not configured"})})]}),(0,ae.jsx)(mi().A,{size:16}),(0,ae.jsx)("div",{style:y.supportAccessRow,children:(0,ae.jsx)(qa,{title:(0,ae.jsxs)(be().A,{style:y.horizontalLabel,isSmall:!0,children:[(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage",defaultMessage:"Support access"}),(0,ae.jsx)(xe().A,{placement:ye().W.Bottom,render:e=>(0,ae.jsx)("div",{...e,children:(0,Hn().$)(y.icon)}),renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage.tooltip",defaultMessage:"Grant Notion support temporary access to this account so we can troubleshoot problems or recover content on its behalf"})})]}),byline:null,isOn:i,onToggle:n,disabled:o})})]}),(0,ae.jsx)("div",{children:t.workspaces.length>0?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(za().A,{children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.workspacesLabel",defaultMessage:"Workspaces"})}),s()]}):null})]}),(0,ae.jsxs)(Oa().A,{visible:g||h,initial:{translateY:48,opacity:0},animate:{opacity:1,translateY:0},exit:{translateY:48,opacity:0},style:y.footer,children:[(0,ae.jsx)(_t().A,{size:"lg",color:"uiRed",disabled:h,style:y.button,onClick:p,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.cancelButton",defaultMessage:"Cancel"})}),(0,ae.jsx)(qs().A,{disabled:h,style:y.button,onClick:()=>m(),children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.saveButton",defaultMessage:"Save changes"})})]})]})}var Za=()=>s(86473);const Xa=(0,f().YK)({placeholder:{id:"identityProvisioningSettings.managedUsers.searchInput.placeholder",defaultMessage:"Search name, email, or user ID"}});function eo(e){let{spaceStore:t,samlConfigStore:s}=e;const{navigateTo:n}=(0,i.useContext)(Kn),o=(0,a().v3)(),d=(0,f().tz)(),c=(0,l().IS)((e=>({link:{fontSize:14,fontWeight:400,color:e.text.secondary,textDecoration:"none"},title:{marginTop:21,fontWeight:S().Wy.semibold,fontSize:17,display:"flex",justifyContent:"flex-start",alignItems:"center"},byline:{fontSize:14,fontWeight:S().Wy.regular,color:e.text.secondary,paddingBottom:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"},filters:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px"}})),[]),u=(0,r().K8)((()=>s.state.spaces),[s]),{managedUsers:g,filters:p,loadNextPage:m,setFilters:h,removeWorkspaceFromUser:x,loading:b,selectedTab:v,setSelectedTab:y,onOpenDetailsModal:A,onCloseDetailsModal:w,selectedUser:M,managedUserActionSections:T}=function(e){let{spaceStore:t,samlConfigStore:s}=e;const n=(0,a().v3)(),o=(0,f().tz)(),[l,d]=(0,i.useState)(),[c,u]=(0,i.useState)(na.NotSuspended),g=(0,r().K8)((()=>n.currentUser.id),[n]),p=(0,i.useCallback)(((e,t)=>{_s().Si(n,{user_status:aa(c),from:t}),d(e.userId)}),[n,c]),m=ia({userStatus:"notSuspended",spaceStore:t,samlConfigStore:s}),h=ia({userStatus:"suspended",spaceStore:t,samlConfigStore:s});let S;S=c===na.NotSuspended?m:h;const x=(0,i.useCallback)((async e=>{_s().th(n);const{accept:s}=await j().Gh({message:(0,ae.jsx)(be().A,{style:j().xh.title,children:(0,ae.jsx)(f().sA,{defaultMessage:"Suspend this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.title"})}),acceptLabel:(0,ae.jsx)(f().sA,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.acceptLabel"}),description:(0,ae.jsx)(be().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{defaultMessage:"This user will not be able to log into Notion and their Notion integrations will stop working. They can be unsuspended at any time from the Managed Users dashboard.",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.description"})})});if(!s)return;const i=await U().callApi({eventName:"updateUserSuspension",environment:n,data:{userId:e.userId,spaceId:t.id,suspend:!0}});_s().Az(n,{suspended_user_id:e.userId}),"failed"===i.type&&j().f1((0,L().Hu)(O().A.getIntl(),i)),h.addUserToManagedUsers(e),m.removeUserFromManagedUsers(e.userId)}),[n,t.id,h,m]),b=(0,i.useCallback)((async e=>{_s().fv(n);const{accept:s}=await j().Gh({message:(0,ae.jsx)(be().A,{style:j().xh.title,children:(0,ae.jsx)(f().sA,{defaultMessage:"Log out this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.title"})}),acceptLabel:(0,ae.jsx)(f().sA,{defaultMessage:"Log out user",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.acceptLabel"}),description:(0,ae.jsx)(be().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.description",defaultMessage:"You are about to log out this user from their current session. They will need to re-authenticate to log back into Notion."})})});if(!s)return;const i=await U().callApi({eventName:"logoutManagedUsers",environment:n,data:{spaceId:t.id,target:{type:ea().u.User,userId:e.userId}}});if(_s().uL(n),"failed"===i.type)return j().f1((0,L().Hu)(O().A.getIntl(),i)),void ta().D6({label:(0,ae.jsx)(f().sA,{id:"managedUsers.toastMessage.logout.failed",defaultMessage:"Failed to logged out user"})});ta().D6({label:(0,ae.jsx)(f().sA,{id:"managedUsers.toastMessage.logout.success",defaultMessage:"Successfully logged out user"})})}),[n,t.id]),v=(0,i.useCallback)((async e=>{_s().HD(n);const{accept:s}=await j().Gh({message:(0,ae.jsx)(be().A,{style:j().xh.title,children:(0,ae.jsx)(f().sA,{defaultMessage:"Reset password for this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.title"})}),acceptLabel:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.acceptLabel",defaultMessage:"Reset passwords for user"}),description:(0,ae.jsx)(be().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.description",defaultMessage:"You are about to reset the password for this user. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}This user will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:(0,ae.jsx)("br",{})}})})});if(!s)return;const i=await U().callApi({eventName:"resetPasswordsForManagedUsers",environment:n,data:{spaceId:t.id,target:{type:ea().u.User,userId:e.userId}}});if(_s().CF(n),"failed"===i.type)return j().f1((0,L().Hu)(o,i)),void ta().D6({label:(0,ae.jsx)(f().sA,{id:"managedUsers.toastMessage.forcePasswordReset.fail",defaultMessage:"Failed to reset password for user"})});ta().D6({label:(0,ae.jsx)(f().sA,{id:"managedUsers.toastMessage.forcePasswordReset.success",defaultMessage:"Successfully reset password for user"})})}),[n,o,t.id]),y=(0,i.useCallback)((async e=>{const s=await U().callApi({eventName:"updateUserSuspension",environment:n,data:{userId:e.userId,spaceId:t.id,suspend:!1}});_s().P4(n),"failed"===s.type&&j().c1(s.error.message),h.removeUserFromManagedUsers(e.userId),m.addUserToManagedUsers(e)}),[n,t.id,h,m]),A=(0,i.useCallback)((async e=>{_s().KB(n,{user_status:aa(c)});const{accept:s}=await j().Gh({message:(0,ae.jsx)(be().A,{style:j().xh.title,children:(0,ae.jsx)(f().sA,{defaultMessage:"Delete this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.title"})}),acceptLabel:(0,ae.jsx)(f().sA,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.acceptLabel"}),description:(0,ae.jsx)(be().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{defaultMessage:"This action cannot be undone. This will permanently delete the user's entire account. All private workspaces will be deleted, and they will be removed from all shared workspaces.",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.description"})})});if(!s)return;const i=await U().callApi({eventName:"deleteManagedUser",environment:n,data:{userId:e.userId,spaceId:t.id}});_s().$W(n,{user_status:aa(c)}),"success"===i.type?(h.removeUserFromManagedUsers(e.userId),m.removeUserFromManagedUsers(e.userId)):j().f1((0,L().Hu)(O().A.getIntl(),i))}),[n,c,t.id,h,m]),C=(0,i.useMemo)((()=>S.managedUsers.find((e=>{let{userId:t}=e;return t===l}))),[l,S.managedUsers]),w=(0,i.useMemo)((()=>{let e;const t={onClick:e=>p(e,"dropdown_menu"),icon:Qn().r,title:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.userDetails",defaultMessage:"Edit details"})},s={onClick:e=>A(e),icon:Hs().I,title:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser",defaultMessage:"Delete user"}),isDestructive:!0};switch(c){case na.NotSuspended:e=[[t,{onClick:b,icon:Jn().k,title:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.logout",defaultMessage:"Log out"})},{onClick:v,icon:Zn().r,title:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.passwordReset",defaultMessage:"Reset password"})}],[{onClick:x,icon:Yn()._,title:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser",defaultMessage:"Suspend user"}),getDisabledState:e=>e.userId===g},s]];break;case na.Suspended:e=[[t],[{onClick:e=>y(e),icon:Xn,title:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.unSuspendUser",defaultMessage:"Reactivate user"})},s]];break;default:(0,Rs().HB)(c)}return e.filter((e=>e.length>0))}),[p,g,c,A,x,y,b,v]);return{...S,selectedTab:c,setSelectedTab:u,selectedUser:C,managedUserActionSections:w,onOpenDetailsModal:p,onCloseDetailsModal:function(){d(void 0)}}}({spaceStore:t,samlConfigStore:s}),k=(0,i.useCallback)((e=>A(e,"row_click")),[A]);return(0,ae.jsxs)(Gt().Ay,{children:[(0,ae.jsx)(yi().A,{style:c.link,onClick:()=>n(Nn.SettingsPage),children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.breadcrumb",defaultMessage:"← Identity & Provisioning"})}),(0,ae.jsxs)(ge().A,{large:!0,style:c.title,children:[(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.title",defaultMessage:"User management"}),(0,ae.jsx)($n().A,{icon:Hn().$,ariaLabel:d.formatMessage({defaultMessage:"Managed users settings help button",id:"identityProvisioningSettings.managedUsers.helpButton.label"}),onClick:()=>C().f({environment:o,url:(0,He().xS)("guides.managedUsers")})})]}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:c.byline,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.byline",defaultMessage:"Manage and view users that are using your verified domains"})}),(0,ae.jsx)(Ai().Ay,{tabs:[(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.table.notSuspendedTab.title",defaultMessage:"Active"},"notSuspended.title"),(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.table.suspendedTab.title",defaultMessage:"Suspended"},"suspended")],selectedIndex:v,onChange:e=>y(e),style:c.tabBarMenu}),(0,ae.jsx)(on().nv,{mode:on().Ke.Button,query:p.query,setQueryFilter:e=>{h({query:e})},placeholderText:O().A.formatMessage(Xa.placeholder)}),(0,ae.jsxs)("div",{style:c.filters,children:[(0,ae.jsx)(Za().f,{selectedSpaceId:p.workspaceId,setSelectedSpaceId:e=>{h({workspaceId:e})},spaceData:u}),(0,ae.jsx)(_a().M,{selectedMfaMethod:p.multiFactorStatus,setSelectedMfaMethod:e=>{h({multiFactorStatus:e})}})]}),(0,ae.jsx)(Pa,{managedUsers:g,loading:b,loadMoreManagedUsers:m,onEditDetails:k,managedUserActionSections:T},v),(0,ae.jsx)(Ja,{spaceStore:t,managedUser:M,onClose:w,removeWorkspaceFromUser:x})]})}var to=()=>s(918244);function so(e){var t;let{environment:s,samlConfigStore:i,spaceStore:n}=e;const a=(0,qt().P9)({name:"saml",spaceId:n.id,userId:null===(t=s.currentUser)||void 0===t?void 0:t.id});return(0,r().K8)((()=>i.state.emailDomains.length>0||a),[i,a])}var io=()=>s(341720),no=()=>s(772357),ao=()=>s(925005),oo=()=>s(379356);var ro=()=>s(680475);function lo(e){var t;let{spaceStore:s,samlConfigStore:n,domainSettingsStore:o}=e;const l=(0,a().v3)(),d=(0,r().K8)((()=>n.state.emailDomains),[n]),c=(0,r().K8)((()=>"disabled"!==n.state.status&&"unconfigured"!==n.state.status),[n]),u=(0,qt().P9)({name:"domain_settings",spaceId:s.id,userId:null===(t=l.currentUser)||void 0===t?void 0:t.id})??!1,g=so({environment:l,samlConfigStore:n,spaceStore:s})??!1,p=(0,r().K8)((()=>g&&(!n.state.id||n.state.id===s.id)),[g,n,s]),m=(0,r().K8)((()=>o.state.emailDomains.length>0&&u),[o,u]),f=(0,r().K8)((()=>d.length>0),[d]),h=(0,i.useCallback)((async()=>{if(n.state.emailDomains.length>0)return(0,ro().n)({onRequest:()=>U().callApi({eventName:"updateWorkspaceCreationForEmailDomains",environment:l,data:{emailDomains:n.state.emailDomains,workspaceCreationEnum:o.state.spaceCreation,spaceId:s.id}}),onSuccess:()=>{o.setState({...o.state,emailDomains:n.state.emailDomains})}})}),[l,s,o,n]),S=(0,i.useCallback)((async()=>{if(n.state.emailDomains.length>0)return(0,ro().n)({onRequest:()=>U().callApi({eventName:"updateEmailDomainSettings",environment:l,data:{emailDomains:n.state.emailDomains,spaceId:s.id,preventProfileEdits:o.state.settings.prevent_profile_edits,preventMembersJoiningExternalWorkspace:o.state.settings.prevent_members_joining_external_workspace,customSessionDuration:(0,la().k)(o.state.settings.custom_session_duration),preventGrantingSupportAccess:o.state.settings.prevent_granting_support_access,disableNotionMail:o.state.settings.disable_notion_mail}}),onSuccess:()=>{o.setState({...o.state,emailDomains:n.state.emailDomains})}})}),[l,s,o,n]),x=(0,r().K8)((()=>g&&u),[g,u]);return{verifiedDomains:d,isSamlStatusEnabled:c,isSamlAvailable:g,isSamlEditable:p,isDomainSettingsAvailable:m,isClaimSpacesAvailable:x,canSaveWorkspaceCreationSetting:f,saveWorkspaceCreationSetting:h,saveEmailDomainSettings:S}}function co(e){let{title:t,byline:s,targetTier:n}=e;const o=(0,a().v3)(),r=(0,i.useCallback)((()=>Lt().K(o,{from:"space_saml",upsell:{type:"product",product:n,limit:{type:"none"},trialability:"none"}})),[o,n]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)(ge().A,{smallMarginBottom:!0,style:{fontWeight:S().Wy.regular,display:"flex",alignItems:"center"},children:[(0,ae.jsx)("span",{style:{marginRight:8},children:t}),(0,ae.jsx)(bs().A,{subscriptionTier:n,analyticsName:"space_saml",onClick:r})]}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,children:s})]})}const uo={browseWorkspaces:(0,ae.jsx)(f().sA,{defaultMessage:"Browse workspaces",id:"identityAndProvisioning.claimWorkspaces.button"}),noWorkspaces:(0,ae.jsx)(f().sA,{defaultMessage:"No workspaces",id:"identityAndProvisioning.claimWorkspaces.buttonEmpty"}),loadingError:(0,ae.jsx)(f().sA,{defaultMessage:"Error loading workspaces.",id:"identityAndProvisioning.claimWorkspaces.errorByline"})};function go(e){let{promptUpgrade:t}=e;const{navigateTo:s,loadingSpaces:n,hasBrowsableSpaces:a,errorClaimableSpaces:o}=(0,i.useContext)(Kn),r=Boolean(o),d=!a||n,c=!a&&!n,u=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.title",defaultMessage:"Claim workspaces"}),g=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.message",defaultMessage:"Claim workspaces created by users with a verified domain or require owners to use an external domain."}),p=(0,l().IS)((e=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:d?.5:1,minWidth:160},settingErrorByline:{color:e.errorText,marginTop:8,fontSize:13}})),[d]);if(t)return(0,ae.jsx)(co,{title:u,byline:g,targetTier:"enterprise"});let m;return m=n?(0,ae.jsx)(fi().A,{}):a?uo.browseWorkspaces:uo.noWorkspaces,(0,ae.jsx)("div",{style:p.settingContainer,children:(0,ae.jsx)(Ns,{title:u,byline:g,settingItem:(0,ae.jsxs)("div",{style:p.buttonAndErrorContainer,children:[(0,ae.jsx)(xe().A,{placement:ye().W.Top,alignment:ye().C.End,render:e=>(0,ae.jsx)(_t().A,{disabled:d,size:"lg",style:p.button,onClick:()=>s(Nn.WorkspacesPage),...e,children:m}),disableTooltip:!c,renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.tooltip",defaultMessage:"There are no available workspaces to claim"})}),r?(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:p.settingErrorByline,children:uo.loadingError}):null]})})})}var po=()=>s(339189),mo=()=>s(57898),fo=()=>s(116944);function ho(e){let{spaceStore:t,samlConfigStore:s,promptUpgrade:n,disabled:o,saveWorkspaceCreationSetting:d,renderOverrideAddDomainButton:c}=e;const u=(0,a().v3)(),g=(0,r().uB)(void 0,mo().A),p=(0,l().IS)((()=>({flex:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",margin:"18px 0px"},button:{position:"relative",marginLeft:"auto",marginRight:0,opacity:o?.5:1},plusIcon:{width:14,height:14,fill:"inherit",marginRight:"6px"}})),[o]),m=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.emailDomainsSection.title",defaultMessage:"Verified domains"}),h=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.emailDomainsSection.byline",defaultMessage:"Verify ownership of an email domain to access advanced security features including single sign-on."}),x=[...(0,r().K8)((()=>s.state.emailDomains.map(fo().vv)),[s]),...(0,r().K8)((()=>s.state.domainVerifications.filter((e=>!s.state.emailDomains.includes(e.domain))).sort(((e,t)=>e.createdAt-t.createdAt)).map(fo().W0)),[s])],b=(0,i.useCallback)((async()=>{await Fn({environment:u,spaceId:t.id,store:s})}),[u,t,s]),{resetInitialClaimableSpaces:v}=(0,i.useContext)(Kn),y=(0,i.useCallback)((async e=>{switch(e.type){case"verified":return(0,ro().n)({onRequest:()=>U().callApi({eventName:"setSamlConfig",environment:u,data:{spaceId:t.id,removedEmailDomains:[e.domain]}}),onSuccess:async()=>{await b(),v()}});case"unverified":case"invalid":return(0,ro().n)({onRequest:()=>U().callApi({eventName:"deleteDomainVerificationCode",environment:u,data:{id:e.id}}),onSuccess:()=>b()})}}),[u,t,b,v]),j=(0,i.useCallback)((()=>(0,ro().n)({onRequest:()=>U().callApi({eventName:"setSamlConfig",environment:u,data:{spaceId:t.id}}),onSuccess:()=>b()})),[u,b,t]),A=(0,i.useCallback)((async()=>{await b(),await d()}),[d,b]);return n?(0,ae.jsx)(co,{title:m,byline:h,targetTier:"business"}):(0,ae.jsx)(fo().Ay,{disabled:o,domains:x,onRemoveDomain:y,domainVerificationStore:g,verificationType:"saml_config",verificationTargetId:t.id,refreshDomains:A,onClickAddDomain:j,renderOverrideAddDomainButton:e=>c?c():(0,ae.jsxs)("div",{style:p.flex,children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(ge().A,{smallMarginBottom:!0,style:{fontWeight:S().Wy.medium},children:m}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:{marginBottom:4},children:h})]}),(0,ae.jsx)("div",{children:(0,ae.jsx)(Vt().p,{isBlue:!0,style:p.button,icon:e=>(0,po().W)({...e,...p.plusIcon}),disabled:o,onClick:e,children:(0,ae.jsx)(f().sA,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})})})]})})}function So(e){let{domainSettingsStore:t,samlConfigStore:s,disabled:n,promptUpgrade:o,verifiedDomains:d,tooltip:c,saveWorkspaceCreationSetting:u}=e;const g=(0,a().v3)(),p=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"}})),[]),m=(0,r().K8)((()=>{const e=s.state.id;if(!e)return;return new(ie().SL)(g,{table:bn().NX,id:e}).getName()}),[g,s]),h=(0,i.useCallback)((async e=>{t.setState({...t.state,spaceCreation:e}),await u(),Bn().XL(g,{workspace_creation:e})}),[t,u,g]),S=(0,r().K8)((()=>d.length>0?t.state.spaceCreation:"admins_only"),[t,d]),x=(0,ae.jsx)(f().sA,{id:"domainSettings.workspaceCreation.title",defaultMessage:"Workspace creation"}),b=(0,ae.jsx)(f().sA,{id:"domainSettings.workspaceCreation.byline",defaultMessage:"Customize who can create new workspaces."}),v=(0,ae.jsx)(f().sA,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.titleWithSpaceName",defaultMessage:"{primaryWorkspaceName} workspace owners",values:{primaryWorkspaceName:m}}),y=(0,ae.jsx)(f().sA,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.title",defaultMessage:"Only workspace owners"});return o?(0,ae.jsx)("div",{style:p.settingContainer,children:(0,ae.jsx)(co,{title:x,byline:b,targetTier:"enterprise"})}):(0,ae.jsx)(xe().A,{placement:ye().W.Top,alignment:ye().C.End,render:e=>(0,ae.jsx)("div",{...e,style:p.settingContainer,children:(0,ae.jsx)(ei().A,{isMobile:g.device.isMobile,disabled:n,title:x,caption:b,type:"dropdown",currentOption:S,options:[{key:"unrestricted",label:(0,ae.jsx)(f().sA,{id:"domainSettings.workspaceCreation.unrestricted.title",defaultMessage:"Anyone"}),caption:(0,ae.jsx)(f().sA,{id:"domainSettings.workspaceCreation.unrestricted.caption",defaultMessage:"Any user can create new workspaces."})},{key:"admins_only",label:m?v:y,caption:(0,ae.jsx)(f().sA,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.captionWithSpaceName",defaultMessage:"Only workspace owners of this workspace can create new workspaces."})}],onSelectOption:h})}),disableTooltip:!c,renderTooltip:()=>c})}function xo(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:i,isCurrentSpaceEnterprise:n}=e;const{verifiedDomains:a,isSamlAvailable:o,saveWorkspaceCreationSetting:r,isSamlEditable:l,isDomainSettingsAvailable:d,canSaveWorkspaceCreationSetting:c,isClaimSpacesAvailable:u}=lo({spaceStore:t,samlConfigStore:s,domainSettingsStore:i}),g=d&&l;return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ho,{disabled:!l,promptUpgrade:!o,spaceStore:t,samlConfigStore:s,saveWorkspaceCreationSetting:r}),(0,ae.jsx)(So,{disabled:!g||!c,promptUpgrade:!n,verifiedDomains:a,samlConfigStore:s,domainSettingsStore:i,tooltip:0===a.length?(0,ae.jsx)(f().sA,{id:"domainSettings.workspaceCreation.disabledTooltip",defaultMessage:"There must be at least one verified domain to configure the workspace creation setting."}):void 0,saveWorkspaceCreationSetting:r}),(0,ae.jsx)(go,{promptUpgrade:!u})]})}var bo=()=>s(472980);function vo(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:n,disabled:o}=e;const d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"}})),[]),u=(0,i.useMemo)((()=>Object.entries(bo().iI).map((e=>{let[t,s]=e;return{key:t,label:(0,ae.jsx)(be().A,{children:(0,La().OH)(0,s)})}}))),[]),g=(0,r().K8)((()=>(0,la().k)(t.state.settings.custom_session_duration)??bo().DP),[t]),p=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.customSessionDuration.title",defaultMessage:"Session duration"}),m=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.customSessionDuration.message",defaultMessage:"Control how long your managed users can be logged in for before they must re-authenticate."});return n?(0,ae.jsx)("div",{style:c.settingContainer,children:(0,ae.jsx)(co,{title:p,byline:m,targetTier:"enterprise"})}):(0,ae.jsx)("div",{style:c.settingContainer,children:(0,ae.jsx)(ei().A,{isMobile:d.device.isMobile,disabled:o,title:p,caption:m,type:"dropdown",currentOption:g,options:u,onSelectOption:async function(e){const i=t.state.settings.custom_session_duration??bo().iI[bo().DP],n=bo().iI[e];if(void 0===n)return;_s().m4(d,{custom_session_duration_ms:i});const{accept:a}=await j().Gh({message:(0,ae.jsx)(be().A,{style:j().xh.title,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.message",defaultMessage:"Confirm change"})}),description:(0,ae.jsxs)(be().A,{isMultiline:!0,isSecondaryColor:!0,children:[(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.description",defaultMessage:"You are about to change the session duration for all of your managed users from <b>{oldDuration}</b> to <b>{newDuration}.</b>",values:{oldDuration:(0,La().OH)(0,i),newDuration:(0,La().OH)(0,n),b:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,ae.jsx)("b",{children:t})}}}),(0,ae.jsx)("br",{}),(0,ae.jsx)("br",{}),(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.secondDescription",defaultMessage:"This may log some users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})]}),acceptLabel:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.acceptLabel",defaultMessage:"Confirm change"}),cancelLabel:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.cancelLabel",defaultMessage:"Cancel"})});a&&(t.setState({...t.state,settings:{...t.state.settings,custom_session_duration:n}}),_s().JN(d,{new_session_duration_ms:n}),await s())}})})}function yo(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:n,hasVerifiedDomains:o,disabled:d}=e;const c=(0,a().v3)(),u=(0,Je().X)("enable_notion_mail_settings_toggle"),g=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),p=(0,r().K8)((()=>Boolean(!t.state.settings.disable_notion_mail)),[t]),m=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.enableNotionMail.title",defaultMessage:"Notion Mail"}),h=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.enableNotionMail.message",defaultMessage:"Enable Notion Mail for all members under your company domains."}),(0,ae.jsx)("br",{}),(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.enableNotionMail.terms",defaultMessage:"By using Notion Mail, you agree to the Notion Mail and Notion AI Supplementary Terms."})]}),S=(0,i.useCallback)((async()=>{const e=Boolean(!t.state.settings.disable_notion_mail);t.setState({...t.state,settings:{...t.state.settings,disable_notion_mail:e}}),_s().R_(c,{new_value:e}),await s()}),[c,t,s]);return u?n?(0,ae.jsx)("div",{style:g.settingContainer,children:(0,ae.jsx)(co,{title:m,byline:h,targetTier:"enterprise"})}):(0,ae.jsx)("div",{style:g.settingContainer,children:(0,ae.jsx)(qa,{title:(0,ae.jsx)("div",{style:g.settingsTitle,children:m}),byline:h,isOn:p,onToggle:S,disabled:d||!o})}):null}function jo(e){let{spaceId:t,domainSettingsStore:s,promptUpgrade:i,verifiedDomains:n,disabled:o}=e;const r=n.length>0,d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!o&&r?1:.5}})),[o,r]),u=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.title",defaultMessage:"Reset passwords for all users"}),g=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.message",defaultMessage:"Force reset the passwords for all managed users and require them to create a new one the next time they log in."});async function p(){_s().m6(d,{email_domains:n});const{accept:e}=await j().Gh({message:(0,ae.jsx)(be().A,{style:j().xh.title,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.message",defaultMessage:"Reset passwords for your managed users?"})}),description:(0,ae.jsx)(be().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.description",defaultMessage:"You are about to reset the passwords for of your managed users, including you. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}The affected users will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:(0,ae.jsx)("br",{})}})}),acceptLabel:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.acceptLabel",defaultMessage:"Reset passwords for all managed users"}),cancelLabel:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!e)return;const i=s.state.emailDomains;await U().callApi({eventName:"resetPasswordsForManagedUsers",environment:d,data:{spaceId:t,target:{type:ea().u.Domains,emailDomains:i}}}),ta().D6({label:(0,ae.jsx)(f().sA,{id:"managedUsers.toastMessage.forcePasswordReset.all.success",defaultMessage:"Successfully reset passwords for all managed users"})}),_s().Jm(d,{email_domains:i})}return i?(0,ae.jsx)("div",{style:c.settingContainer,children:(0,ae.jsx)(co,{title:u,byline:g,targetTier:"enterprise"})}):(0,ae.jsx)("div",{style:c.settingContainer,children:(0,ae.jsx)(Ns,{title:u,byline:g,settingItem:(0,ae.jsx)("div",{style:c.buttonAndErrorContainer,children:(0,ae.jsx)(xe().A,{placement:ye().W.Top,alignment:ye().C.End,render:e=>(0,ae.jsx)(Vt().p,{isRed:!0,disabled:o||!r,style:c.button,onClick:p,...e,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.logoutButton",defaultMessage:"Reset passwords for all users"})}),disableTooltip:r,renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function Ao(e){let{spaceId:t,domainSettingsStore:s,promptUpgrade:i,verifiedDomains:n,disabled:o}=e;const r=n.length>0,d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!o&&r?1:.5}})),[o,r]),u=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.title",defaultMessage:"Log out all users"}),g=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.message",defaultMessage:"Force log out all managed users and require them to re-authenticate."});async function p(){_s().V6(d,{email_domains:n});const{accept:e}=await j().Gh({message:(0,ae.jsx)(be().A,{style:j().xh.title,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.message",defaultMessage:"Log out all of your managed users?"})}),description:(0,ae.jsx)(be().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.description",defaultMessage:"You are about to log all of your managed users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})}),acceptLabel:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.acceptLabel",defaultMessage:"Log out all managed users"}),cancelLabel:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!e)return;const i=s.state.emailDomains;await U().callApi({eventName:"logoutManagedUsers",environment:d,data:{spaceId:t,target:{type:ea().u.Domains,emailDomains:i}}}),ta().D6({label:(0,ae.jsx)(f().sA,{id:"managedUsers.toastMessage.logout.all.success",defaultMessage:"Logging out managed users. This may take a few minutes to complete."})}),_s().wE(d,{email_domains:i})}return i?(0,ae.jsx)("div",{style:c.settingContainer,children:(0,ae.jsx)(co,{title:u,byline:g,targetTier:"enterprise"})}):(0,ae.jsx)("div",{style:c.settingContainer,children:(0,ae.jsx)(Ns,{title:u,byline:g,settingItem:(0,ae.jsx)("div",{style:c.buttonAndErrorContainer,children:(0,ae.jsx)(xe().A,{placement:ye().W.Top,alignment:ye().C.End,render:e=>(0,ae.jsx)(Vt().p,{isRed:!0,disabled:o||!r,style:c.button,onClick:p,...e,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.logoutButton",defaultMessage:"Log out all users"})}),disableTooltip:r,renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function Co(e){let{promptUpgrade:t,hasVerifiedDomains:s,disabled:n}=e;const{navigateTo:o}=(0,i.useContext)(Kn),r=(0,a().v3)(),d=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.title",defaultMessage:"Managed users dashboard"}),c=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.message",defaultMessage:"Manage and view users that are using your verified domains"}),u=(0,l().IS)((e=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!n&&s?1:.5}})),[s,n]);return t?(0,ae.jsx)("div",{style:u.settingContainer,children:(0,ae.jsx)(co,{title:d,byline:c,targetTier:"enterprise"})}):(0,ae.jsx)("div",{style:u.settingContainer,children:(0,ae.jsx)(Ns,{title:d,byline:c,settingItem:(0,ae.jsx)("div",{style:u.buttonAndErrorContainer,children:(0,ae.jsx)(xe().A,{placement:ye().W.Top,alignment:ye().C.End,render:e=>(0,ae.jsx)(_t().A,{disabled:n||!s,size:"lg",style:u.button,onClick:()=>{_s().ud(r),o(Nn.ManagedUsersPage)},...e,children:(0,ae.jsx)(f().sA,{defaultMessage:"View dashboard",id:"identityAndProvisioning.managedUsers.button"})}),disableTooltip:s,renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function wo(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:i,verifiedDomains:n,disabled:o}=e;const d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),u=n.length>0,g=(0,r().K8)((()=>Boolean(t.state.settings.prevent_granting_support_access)),[t]),p=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.title",defaultMessage:"Prevent managed users from granting support access"}),m=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.message",defaultMessage:"Control if managed users can enable support access on their accounts."});return i?(0,ae.jsx)("div",{style:c.settingContainer,children:(0,ae.jsx)(co,{title:p,byline:m,targetTier:"enterprise"})}):(0,ae.jsx)("div",{style:c.settingContainer,children:(0,ae.jsx)(qa,{title:(0,ae.jsx)("div",{style:c.settingsTitle,children:p}),byline:m,isOn:g,onToggle:async function(){const e=Boolean(!t.state.settings.prevent_granting_support_access);t.setState({...t.state,settings:{...t.state.settings,prevent_granting_support_access:e}}),_s().R_(d,{new_value:e}),await s()},disabled:o||!u})})}function Mo(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:i,disabled:n}=e;const o=(0,a().v3)(),d=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"}})),[]),c=(0,r().K8)((()=>Boolean(t.state.settings.prevent_members_joining_external_workspace)),[t]),u=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.title",defaultMessage:"External workspace access"}),g=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.message",defaultMessage:"Control if managed users are able to join workspaces that aren't owned by your organization."});if(i)return(0,ae.jsx)("div",{style:d.settingContainer,children:(0,ae.jsx)(co,{title:u,byline:g,targetTier:"enterprise"})});const p=c?"on":"off";return(0,ae.jsx)("div",{style:d.settingContainer,children:(0,ae.jsx)(ei().A,{isMobile:o.device.isMobile,disabled:n,title:u,caption:g,type:"dropdown",currentOption:p,options:[{key:"on",label:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.titleGeneric",defaultMessage:"Only workspace owners"}),caption:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.caption",defaultMessage:"Only workspace owners of your connected workspaces can join external workspaces."})},{key:"off",label:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.titleWithSpaceName",defaultMessage:"Anyone"}),caption:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.caption",defaultMessage:"All users can join any workspace."})}],onSelectOption:async function(){const e=Boolean(!t.state.settings.prevent_members_joining_external_workspace);t.setState({...t.state,settings:{...t.state.settings,prevent_members_joining_external_workspace:e}}),_s().Y1(o,{new_value:e}),await s()}})})}function To(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:i,hasVerifiedDomains:n,disabled:o}=e;const d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),u=(0,r().K8)((()=>Boolean(t.state.settings.prevent_profile_edits)),[t]),g=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.title",defaultMessage:"Allow managed users to change profile information"}),p=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.message",defaultMessage:"Control if managed users can change their preferred name, email address, and profile photo."});return i?(0,ae.jsx)("div",{style:c.settingContainer,children:(0,ae.jsx)(co,{title:g,byline:p,targetTier:"enterprise"})}):(0,ae.jsx)("div",{style:c.settingContainer,children:(0,ae.jsx)(qa,{title:(0,ae.jsx)("div",{style:c.settingsTitle,children:g}),byline:p,isOn:!u,onToggle:async function(){const e=Boolean(!t.state.settings.prevent_profile_edits);t.setState({...t.state,settings:{...t.state.settings,prevent_profile_edits:e}}),_s().R_(d,{new_value:e}),await s()},disabled:o||!n})})}function ko(e){var t;let{spaceStore:s,samlConfigStore:i,domainSettingsStore:n}=e;const{verifiedDomains:o,isDomainSettingsAvailable:d,isSamlEditable:c,saveEmailDomainSettings:u}=lo({spaceStore:s,samlConfigStore:i,domainSettingsStore:n}),g=(0,l().IS)((e=>({byline:{fontSize:14,fontWeight:S().Wy.regular,color:e.text.secondary},helpButton:{marginTop:18,marginBottom:16}})),[]),p=(0,a().v3)(),m=d&&c,h=(0,qt().P9)({name:"managed_users",spaceId:s.id,userId:null===(t=p.currentUser)||void 0===t?void 0:t.id}),x=(0,r().K8)((()=>s.id),[s]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{children:(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:g.byline,children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.byline",defaultMessage:"These settings apply to all users with a verified domain, even if they are not a member of this workspace."})})}),(0,ae.jsx)(Fs().A,{title:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.helpButton",defaultMessage:"Learn about managed users"}),href:(0,He().xS)("guides.managedUsers"),style:g.helpButton,analyticsFrom:"managed_users_section"}),(0,ae.jsx)(Co,{promptUpgrade:!h,hasVerifiedDomains:o.length>0,disabled:!m}),(0,ae.jsx)(To,{promptUpgrade:!h,hasVerifiedDomains:o.length>0,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!m}),(0,ae.jsx)(Mo,{promptUpgrade:!h,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!m}),(0,ae.jsx)(wo,{promptUpgrade:!h,verifiedDomains:o,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!m}),(0,ae.jsx)(vo,{promptUpgrade:!h,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!m}),(0,ae.jsx)(Ao,{spaceId:x,promptUpgrade:!h,domainSettingsStore:n,verifiedDomains:o,disabled:!m}),(0,ae.jsx)(jo,{spaceId:x,promptUpgrade:!h,domainSettingsStore:n,verifiedDomains:o,disabled:!m}),(0,ae.jsx)(yo,{promptUpgrade:!h,hasVerifiedDomains:o.length>0,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!m})]})}function Io(e){let{spaceStore:t,samlConfigStore:s}=e;const n=(0,a().v3)();return{updateSamlIdpUrl:(0,i.useCallback)((async e=>{let i=!1;return await(0,ro().n)({onRequest:()=>U().callApi({eventName:"setSamlConfig",environment:n,data:{spaceId:t.id,idpMetadataUrl:e}}),onSuccess:()=>{i=!0,s.setState({...s.state,useMetadataUrl:!0,idpMetadataUrl:e,idpMetadata:void 0})}}),i}),[s,t,n]),updateSamlIdpXml:(0,i.useCallback)((async e=>{let i=!1;return await(0,ro().n)({onRequest:()=>U().callApi({eventName:"setSamlConfig",environment:n,data:{spaceId:t.id,idpMetadata:e}}),onSuccess:()=>{i=!0,s.setState({...s.state,useMetadataUrl:!1,idpMetadataUrl:void 0,idpMetadata:e})}}),i}),[s,t,n]),updateStatus:(0,i.useCallback)((e=>(0,ro().n)({onRequest:()=>U().callApi({eventName:"setSamlConfig",environment:n,data:{spaceId:t.id,status:e}}),onSuccess:()=>{s.setState({...s.state,status:e})}})),[s,t,n]),updateCreateAccount:(0,i.useCallback)((e=>(0,ro().n)({onRequest:()=>U().callApi({eventName:"setSamlConfig",environment:n,data:{spaceId:t.id,createAccount:e}}),onSuccess:()=>{s.setState({...s.state,createAccount:e})}})),[s,t,n])}}function Do(e){let{spaceStore:t,samlConfigStore:s,disabled:i}=e;const{updateCreateAccount:n}=Io({samlConfigStore:s,spaceStore:t}),o=(0,a().v3)(),d=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),c=(0,r().K8)((()=>s.state.createAccount),[s]);return(0,ae.jsx)("div",{style:d.settingContainer,children:(0,ae.jsx)(qa,{title:(0,ae.jsxs)("div",{style:d.settingsTitle,children:[(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.createAccount.title",defaultMessage:"Automatic account creation"}),(0,ae.jsx)($n().A,{icon:Hn().$,onClick:()=>C().f({environment:o,url:(0,He().xS)("guides.samlJIT")})})]}),byline:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.createAccount.byline",defaultMessage:"Automatically create Notion accounts for new users who log in via SAML SSO."}),isOn:c,onToggle:async function(){await n(!s.state.createAccount)},disabled:i})})}function Po(e){let{spaceStore:t,samlConfigStore:s,promptUpgrade:i,disabled:n}=e;const o=(0,a().v3)(),{updateStatus:d}=Io({samlConfigStore:s,spaceStore:t}),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"}})),[]),u=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.accountAuth.title",defaultMessage:"Login method"}),g=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.accountAuth.byline",defaultMessage:"Customize how users access workspaces that have SAML SSO enabled. Workspace owners can always log in with a password or passkey."}),p=(0,r().K8)((()=>"enforced"===s.state.status?"enforced":"enforced_for_domain"===s.state.status?"enforced_for_domain":"not_enforced"),[s]);if(i)return(0,ae.jsx)("div",{style:c.settingContainer,children:(0,ae.jsx)(co,{title:u,byline:g,targetTier:"business"})});const m=[{key:"enforced",label:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.accountAuth.option.enforced",defaultMessage:"Only SAML SSO"})},{key:"not_enforced",label:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.accountAuth.option.notEnforced",defaultMessage:"Any method"})}];return"enforced_for_domain"===p?(0,ae.jsx)("div",{style:c.settingContainer,children:(0,ae.jsx)(ei().A,{isMobile:o.device.isMobile,disabled:!0,title:u,caption:g,type:"custom",customButton:(0,ae.jsx)(Vt().p,{disabled:!0,disabledFeedback:!0,children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.accountAuth.option.enforcedForDomain",defaultMessage:"Enforced for domain"})})})}):(0,ae.jsx)("div",{style:c.settingContainer,children:(0,ae.jsx)(ei().A,{isMobile:o.device.isMobile,title:u,caption:g,type:"dropdown",currentOption:p,options:m,onSelectOption:async function(e){"enforced"===e?await d("enforced"):"enforced_for_domain"===e?await d("enforced_for_domain"):await d("configured")}})})}var Ro=()=>s(633965);function _o(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:n,isSamlStatusEnabled:a,promptUpgrade:o,disabled:d}=e;const[c,u]=(0,i.useState)(!1),[g,p]=(0,i.useState)({isOpened:!1,enableSamlOnSave:!1}),[m,h]=(0,i.useState)(!1),{updateStatus:S,updateSamlIdpUrl:x,updateSamlIdpXml:b}=Io({samlConfigStore:s,spaceStore:t}),{verifiedDomains:v}=lo({spaceStore:t,samlConfigStore:s,domainSettingsStore:n}),y=(0,r().K8)((()=>({id:t.id,status:s.state.status,idpMetadataUrl:s.state.idpMetadataUrl,idpMetadata:s.state.idpMetadata,createAccount:s.state.createAccount,emailDomains:s.state.emailDomains})),[t.id,s]),j="unconfigured"===y.status,A=(0,l().IS)((()=>({configButton:{marginTop:14}})),[]),C=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.samlToggle.title",defaultMessage:"Enable SAML SSO"}),w=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.samlToggle.byline",defaultMessage:"Workspace members can log in with SAML SSO if their email address uses a verified domain."}),M=j?(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.editSamlConfig.enableSaml",defaultMessage:"Enable SAML"}):(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.editSamlConfig.saveChanges",defaultMessage:"Save changes"});async function T(e){try{h(!0),await S(e)}finally{h(!1)}}return o?(0,ae.jsx)(co,{title:C,byline:w,targetTier:"business"}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(qa,{title:C,byline:w,isOn:a,disabled:d||m,tooltipForDisabled:0===v.length?(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.samlToggle.disabledTooltipNoVerifiedDomains",defaultMessage:"Verify a domain to enable SAML."}):void 0,onToggle:async function(){if(d)return;const{useMetadataUrl:e,idpMetadata:t,idpMetadataUrl:i}=s.state,n=e&&i||!e&&t;switch(s.state.status){case"disabled":n?await T("configured"):p({isOpened:!0,enableSamlOnSave:!0});break;case"unconfigured":p({isOpened:!0,enableSamlOnSave:!0});break;case"configured":case"enforced":await T("disabled");break;case"enforced_for_domain":break;default:(0,Rs().HB)(s.state.status)}}}),(0,ae.jsx)(_t().A,{disabled:d,disabledFeedback:d,size:"lg",style:A.configButton,onClick:function(){d||p({isOpened:!0,enableSamlOnSave:!1})},children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.samlToggle.configure",defaultMessage:"Edit SAML SSO configuration"})}),g.isOpened?(0,ae.jsx)(Ro().N,{saveButtonText:M,onSave:async function(e){const{metadataUrl:t,metadataXml:i}=e;u(!0);let n=!1;if(t?n=await x(t):i&&(n=await b(i)),n){switch(s.state.status){case"disabled":g.enableSamlOnSave&&await S("configured");break;case"unconfigured":await S("configured");break;case"enforced":case"enforced_for_domain":case"configured":break;default:(0,Rs().HB)(s.state.status)}p({isOpened:!1,enableSamlOnSave:!1}),u(!1)}else u(!1)},samlConfig:y,loading:c,onDismiss:()=>p({isOpened:!1,enableSamlOnSave:!1}),headerByline:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.editSamlConfig.byline",defaultMessage:"Configure SAML SSO for your Notion workspace with your Identity Provider (IDP). <guidelink>Learn more</guidelink>.",values:{guidelink:e=>(0,ae.jsx)(yi().A,{hoverColor:"blue",href:(0,He().xS)("guides.samlSettings"),external:!0,children:e})}})}):null]})}var Bo=()=>s(782150);const Eo={id:"name",headerTitle:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.name",defaultMessage:"Name"}),renderCell:e=>(0,ae.jsx)(qo,{space:e.space,isCurrentSpace:e.isCurrentSpace}),widthData:{width:50},sortable:!0},Uo={id:"memberCount",headerTitle:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.memberCount",defaultMessage:"Members"}),renderCell:e=>(0,ae.jsx)(be().A,{children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.members",defaultMessage:"{count} members",values:{count:e.space.memberCount}})}),widthData:{width:20},sortable:!0},Lo={id:"createdAt",headerTitle:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.plan",defaultMessage:"Created at"}),renderCell:e=>{const t=e.space.createdTime;return(0,ae.jsx)(be().A,{children:t&&(0,Ba().W_)(t,"medium",hi().locale)})},widthData:{width:20},sortable:!0},Oo=[Eo,Uo,Lo];function Wo(e){let{spaceStore:t,spaces:s}=e;const[n,a]=(0,i.useState)({column:Eo,sortAscending:!1}),o=(0,r().K8)((()=>s.map((e=>({id:e.id,isClickable:!1,isCurrentSpace:t.id===e.id,space:e})))),[s,t]),d=(0,l().IS)((e=>(0,he().rC)({columnRenderInfo:Oo,theme:e,containerMarginTop:12})),[]);return(0,ae.jsx)(he().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Oo,rows:zo(o,n),sortState:n,onSortStateChanged:a,renderNoRowsComponent:()=>(0,ae.jsx)(be().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.empty",defaultMessage:"No linked workspaces."})}),styles:d})}function zo(e,t){let{column:s,sortAscending:i}=t,n=[];switch(s.id){case"name":n=h().Ul(e,(e=>e.space.name));break;case"createdAt":n=h().Ul(e,(e=>e.space.createdTime));break;case"memberCount":n=h().Ul(e,(e=>e.space.memberCount))}return i?n:n.reverse()}function qo(e){const t=(0,l().IS)((()=>({container:{display:"flex",justifyContent:"center",alignItems:"center",gap:4}})),[]);return(0,ae.jsxs)(be().A,{style:t.container,children:[e.space.name,e.isCurrentSpace?(0,ae.jsx)(X().A,{children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.name.currentBadge",defaultMessage:"Current"})}):null]})}function Fo(e){let{spaceStore:t,spaces:s}=e;const n=(0,a().v3)(),o=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"}})),[]),d=(0,i.useCallback)((()=>{Bo().SI({environment:n,from:"saml_settings",prepopulatedContent:`Request to add or remove a workspace for SAML single sign-on on workspace ${t.id}.`})}),[t,n]),c=(0,r().K8)((()=>(0,m().bp)(t.getSubscriptionTier())),[t]);return(0,ae.jsxs)("div",{style:o.settingContainer,children:[(0,ae.jsx)(Ns,{title:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.title",defaultMessage:"Linked workspaces"}),byline:(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.description",defaultMessage:"This SAML SSO configuration applies to the following other workspaces."}),c&&(0,ae.jsxs)(ae.Fragment,{children:[" ",(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.contact",defaultMessage:"<contactlink>Contact support</contactlink> to add or remove a workspace.",values:{contactlink:e=>(0,ae.jsx)(yi().A,{onClick:d,children:e})}})]})]}),settingItem:null}),(0,ae.jsx)(Wo,{spaceStore:t,spaces:s})]})}function No(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:i}=e;const{verifiedDomains:n,isSamlAvailable:a,isSamlEditable:o,isSamlStatusEnabled:l}=lo({spaceStore:t,samlConfigStore:s,domainSettingsStore:i}),d=!o||!a||!l,c=(0,r().K8)((()=>s.state.spaces),[s]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Fs().A,{title:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.samlToggle.learnMore",defaultMessage:"Learn about SAML SSO"}),href:(0,He().xS)("guides.samlSettings"),style:{marginTop:18,marginBottom:16},analyticsFrom:"saml_settings"}),(0,ae.jsx)(_o,{disabled:!o||0===n.length,promptUpgrade:!a,isSamlStatusEnabled:l,spaceStore:t,samlConfigStore:s,domainSettingsStore:i}),(0,ae.jsx)(Po,{disabled:d,promptUpgrade:!a,spaceStore:t,samlConfigStore:s}),(0,ae.jsx)(Do,{disabled:d,spaceStore:t,samlConfigStore:s}),(0,ae.jsx)(Fo,{spaceStore:t,spaces:c})]})}var Go=()=>s(455936),Ko=()=>s(204435);function Vo(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:n,organizationOnboardingInfo:o}=e;const d=(0,a().v3)(),{saveWorkspaceCreationSetting:c}=lo({spaceStore:t,samlConfigStore:s,domainSettingsStore:n}),u=(0,l().IS)((()=>({iconArrow:{height:14,width:14,fill:"currentColor",transform:"rotate(90deg)",marginTop:4},button:{margin:"4px 0px 16px",width:"fit-content",display:"flex",alignItems:"center",justifyContent:"center",gap:4}})),[]),{buttonLabel:g,onClick:p}=(0,ao().gO)({environment:d,organizationOnboardingInfo:o}),m=(0,i.useCallback)((()=>(0,ae.jsxs)(Vt().p,{isBlue:!0,onClick:p,style:u.button,children:[g,(0,Go().p)(u.iconArrow)]})),[g,p,u.button,u.iconArrow]),h=(0,i.useCallback)((()=>(0,ae.jsx)(Ns,{title:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.emailDomainsSection.organization.title",defaultMessage:"Verified domains"}),byline:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.emailDomainsSection.organization.byline",defaultMessage:"Verify ownership of an email domain to access advanced security features including single sign-on."}),settingItem:m()})),[m]),S=(0,r().K8)((()=>s.state.emailDomains.length+s.state.domainVerifications.length>0),[s]);return(0,ae.jsxs)(Ko().VP,{gap:16,children:[S?(0,ae.jsx)(ho,{disabled:!0,promptUpgrade:!1,spaceStore:t,samlConfigStore:s,saveWorkspaceCreationSetting:c,renderOverrideAddDomainButton:h}):h(),(0,ae.jsx)(Ns,{title:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.saml.organization.title",defaultMessage:"Enable SAML SSO"}),byline:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.saml.organization.byline",defaultMessage:"Workspace members can log in with SAML SSO if their email address uses a verified email domain."}),settingItem:m()})]})}s(113085);var Ho=()=>s(157111),$o=()=>s(466003),Yo=()=>s(908568),Jo=()=>s(723361),Qo=()=>s(769884),Zo=()=>s(40815);const Xo={container:{display:"flex",alignItems:"center",fontSize:S().J.UIRegular.desktop,overflow:"hidden"},userAvatar:{paddingRight:6},userName:{flexShrink:1,...S().RC}};function er(e,t){const s=Qo().Bj6.fromValue(B().GP,e);return s.getCreatedByTable()===E().oo&&s.getCreatedById()===t}const tr={buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,marginRight:1}};function sr(e){let{onRevokeToken:t}=e;const n=(0,l().DP)(),[a,o]=(0,i.useState)(!1);return(0,ae.jsx)(xe().A,{textWrap:!1,renderTooltip:()=>(0,ae.jsx)(f().sA,{defaultMessage:"Revoke this token.",id:"revokeTokenButton.tooltip"}),placement:ye().W.Right,render:e=>(0,ae.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,placementToOrigin:Sa().sx.Right,renderOrigin:t=>(0,ae.jsx)(Se().A,{className:Ge().hqd,style:tr.buttonStyle,mobileFeedback:!1,...e,...t,children:(0,Hs().I)({fill:n.mediumIconColor,width:12,height:12})}),onClick:()=>{o(!0)},render:e=>a?(0,ae.jsx)(s(740190).S,{onCancel:e.close,onSubmit:t,headerText:(0,ae.jsx)(f().sA,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.message",defaultMessage:"Revoke this token?"}),bylineText:(0,ae.jsx)(f().sA,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.description",defaultMessage:"Existing SCIM configurations that use this token will no longer work once the token is revoked, and you’ll have to provide them with a new token."}),submitText:(0,ae.jsx)(f().sA,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.acceptButton.label",defaultMessage:"Revoke token"})}):null})})}function ir(){const e=(0,l().DP)();return(0,ae.jsx)(xe().A,{textWrap:!1,renderTooltip:()=>(0,ae.jsx)(f().sA,{defaultMessage:"Outdated token. Revoke this token and generate a new one to view its contents.",id:"manageScimTokenTable.OutdatedWarningIcon.tooltip"}),placement:ye().W.Right,render:t=>(0,ae.jsx)("div",{...t,style:{paddingLeft:"4px"},children:(0,Jo().Q)({fill:(0,pa().k5)("orange",e).fill,width:12,height:12})})})}function nr(e){let{clipboardTextFn:t}=e;const s=(0,a().v3)();const i=(0,l().DP)(),n={height:25,background:i.whiteButtonBackground,color:i.text.primary,fontWeight:S().Wy.regular,padding:"4px 6px",fontSize:11.5};return(0,ae.jsxs)(Vt().p,{isGray:!0,size:"xs",onClick:async function(){const e=await t();if(void 0!==e){const t=await fe().R.clipboardActions.load();t.copyString({environment:s,stringValue:e,copiedMessage:t.clipboardMessages.copiedTokenToClipboard,showCopyModal:!!s.device.isSafari||void 0})}},style:n,children:[(0,Yo().n)({height:16,width:16,paddingRight:4}),(0,ae.jsx)(f().sA,{defaultMessage:"Copy",id:"codeBlock.copyToClipboard.button"})]})}const ar="•••••••••••";function or(){return(0,ae.jsx)(xe().A,{textWrap:!1,renderTooltip:()=>(0,ae.jsx)(f().sA,{defaultMessage:"This token can only be viewed by its creator.",id:"manageScimTokenTable.renderTokenThatCannotBeViewed.tooltip"}),placement:ye().W.Right,render:e=>(0,ae.jsx)("div",{...e,children:ar})})}function rr(e){let{row:t}=e;const s=(0,a().v3)();return t.legacy?(0,ae.jsxs)(ae.Fragment,{children:[ar,(0,ae.jsx)(ir,{})]}):t.ownedByCurrentUser?(0,ae.jsxs)(ae.Fragment,{children:[ar,(0,ae.jsx)(nr,{clipboardTextFn:()=>vn().dA({environment:s,botId:t.id})})]}):(0,ae.jsx)(or,{})}const lr={id:"token",headerTitle:(0,ae.jsx)(f().sA,{id:"manageScimTokenTable.columnTitle.token",defaultMessage:"Token"}),renderCell:e=>(0,ae.jsx)(rr,{row:e}),widthData:{width:40},sortable:!1,hasClickableContents:!0};function dr(){const e=Xo;return(0,ae.jsx)(xe().A,{textWrap:!1,renderTooltip:()=>(0,ae.jsx)(f().sA,{defaultMessage:"This token was created by a user who is no longer an admin in the workspace.",id:"scimTableLegacyUserCell.tooltip"}),placement:ye().W.Right,render:t=>(0,ae.jsx)("div",{...t,children:(0,ae.jsxs)("div",{style:e.container,children:[(0,ae.jsx)(Rn().A,{style:e.userAvatar,avatarShouldShowShadow:!0,size:20}),(0,ae.jsx)("div",{style:e.userName,children:(0,ae.jsx)("i",{children:"Deactivated user"})})]})})})}const cr={id:"addedBy",headerTitle:(0,ae.jsx)(f().sA,{id:"manageScimTokenTable.columnTitle.addedBy",defaultMessage:"Added by"}),renderCell:e=>{if(e.legacy)return(0,ae.jsx)(dr,{});{const t=e.ownedByCurrentUser?(0,ae.jsx)(be().A,{isSecondaryColor:!0,style:{marginLeft:4,textAlign:"center"},children:(0,ae.jsx)(f().sA,{id:"manageSCIMTokenTable.colums.addedBy.selfIndicator",defaultMessage:"(you)"})}):null;return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(s(685008).l,{isClickable:!1,userStores:[e.ownerUserStore]}),t]})}},widthData:{width:40},sortable:!1,hasClickableContents:!1},ur={id:"created",headerTitle:(0,ae.jsx)(f().sA,{id:"manageScimTokenTable.columnTitle.created",defaultMessage:"Created"}),renderCell:e=>(0,ae.jsx)(ra().d,{includeTime:!0,dateTs:e.createdAt}),widthData:{width:40},sortable:!0,hasClickableContents:!1},gr=[lr,cr,ur,{id:"revokeToken",headerTitle:void 0,renderCell:e=>(0,ae.jsx)(sr,{onRevokeToken:e.onRevokeToken}),widthData:{width:10},sortable:!1,hasClickableContents:!0}];function pr(e,t){let{column:s,sortAscending:i}=t;const n=null==s?void 0:s.id;let a=e=>e.id;switch(n){case"name":a=e=>e.name;break;case"created":a=e=>e.createdAt;break;case"token":case"addedBy":case"revokeToken":case void 0:break;default:(0,Rs().HB)(n)}const o=h().Ul(e,a);return i||o.reverse(),o}function mr(e){let{botStores:t,onRevokeToken:s}=e;const n=(0,r().K8)((()=>lt().default.state.currentUserStore),[]),a=(0,r().O$)(lt().AppStoreCurrentSpaceStore),o=(0,f().tz)(),d=(0,r().K8)((()=>{if(!a)return[];const e=null==n?void 0:n.id;return h().oE(t.map((t=>{const i=t.getModel();if(!i||!(0,$o().SZ)(i))return;const n={id:i.id,isClickable:!1,createdAt:i.getCreatedAt(),userLocale:o.locale,name:i.getName(),onRevokeToken:async()=>{await s(i.id)}},r=function(e){const t=Qo().Bj6.fromValue(B().GP,e);return"notion_user"===t.getCreatedByTable()&&t.getCreatedById()===E().BF.id}(i);return r?{...n,legacy:r}:{...n,legacy:r,ownedByCurrentUser:er(i,e),ownerUserStore:"notion_user"===i.getCreatedByTable()?(0,Zo().z)({userId:i.getCreatedById(),currentSpaceStore:a}):void 0}})))}),[t,a,n,o.locale,s]),[c,u]=(0,i.useState)({column:ur,sortAscending:!1}),g=(0,l().IS)((e=>(0,he().rC)({columnRenderInfo:gr,theme:e,containerMarginTop:0})),[]);return(0,ae.jsx)(he().WE,{columnRenderInfo:gr,rows:pr(d,c),sortState:c,onSortStateChanged:u,onRowClick:()=>null,renderNoRowsComponent:()=>(0,ae.jsx)(be().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,ae.jsx)(f().sA,{id:"manageSCIMTokenTable.noTokensFound.message",defaultMessage:"No active SCIM tokens."})}),styles:g})}async function fr(e){let{environment:t,spaceId:s}=e;return(await vn().Ju({environment:t,table:bn().NX,id:s,type:"scim"})).botIds}const hr=function(e){let{botIds:t,setBotIds:s,spaceStore:n}=e;const o=(0,a().v3)(),r=n.id;if((0,i.useEffect)((()=>{void 0===t&&fr({environment:o,spaceId:r}).then(s)}),[t,o,s,r]),t){const e=t.map((e=>ie().sk.createChildStore(n,{table:B().GP,id:e,spaceId:r})));return(0,ae.jsx)(mr,{botStores:e,onRevokeToken:async e=>{await vn().KA({environment:o,botId:e,onSuccess:()=>{fr({environment:o,spaceId:r}).then(s)}})}})}return(0,ae.jsx)(fi().A,{})};function Sr(e){let{userStore:t,spaceStore:s,promptUpgrade:n}=e;const[o,l]=(0,i.useState)(void 0),d=(0,a().v3)(),c=(0,r().K8)((()=>function(e){let{botIds:t,spaceStore:s,environment:i}=e;if(void 0===t)return"Undefined";const n=t.map((e=>ie().sk.createChildStore(s,{table:B().GP,id:e,spaceId:s.id}))).filter((e=>e.isDefined()));if(n.some((e=>e.getCreatedByTable()===E().oo&&e.getCreatedById()===E().BF.id)))return"SpaceHasExistingToken";const a=n.some((e=>e.getCreatedByTable()===E().oo&&e.getCreatedById()===i.currentUser.id));if(a)return"UserHasExistingToken";return"Able"}({botIds:o,spaceStore:s,environment:d})),[o,d,s]),u=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.scim.title",defaultMessage:"SCIM tokens"}),g=(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.scim.byline",defaultMessage:"Generate a token to configure SCIM."});return n?(0,ae.jsx)(co,{title:u,byline:g,targetTier:"enterprise"}):(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ns,{title:u,byline:g,settingItem:(0,ae.jsx)(Ho().K,{onNewScimToken:e=>l((t=>[...t??[],e])),spaceStore:s,userStore:t,tokenCreationAbility:c})}),(0,ae.jsx)(Fs().A,{title:(0,ae.jsx)(f().sA,{id:"securitySAMLSettings.SCIMSection.helpButton.label",defaultMessage:"Learn about SCIM"}),style:{marginTop:18,marginBottom:24},href:(0,He().xS)("guides.scim"),analyticsFrom:"scim_settings"}),(0,ae.jsx)(hr,{spaceStore:s,userStore:t,botIds:o,setBotIds:l})]})}var xr=()=>s(381602);function br(e){let{userStore:t,spaceStore:s}=e;const i=(0,a().v3)(),n=(0,qt().P9)({name:"scim",spaceId:s.id,userId:t.id}),o=(0,r().K8)((()=>Boolean(s.getSettings().are_scim_invite_emails_suppressed)),[s]),d=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:16}})),[]);return(0,ae.jsxs)("div",{style:d.container,children:[(0,ae.jsx)(Sr,{promptUpgrade:!n,userStore:t,spaceStore:s}),n?(0,ae.jsx)(xr().S,{isEnabled:o,onToggle:()=>{(0,xr().i)({environment:i,spaceStore:s,areScimInviteEmailsSuppressed:!o})}}):null]})}function vr(e){let{primarySpaceName:t}=e;const s=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",gap:8,width:"100%",padding:"18px 24px",borderRadius:12,marginBlock:12,background:e.onboardingPreviewBackground},title:{fontSize:14,fontWeight:500,color:e.text.primary,width:"100%"},text:{fontSize:14,fontWeight:400,color:e.text.secondary,width:"100%"}})),[]);return(0,ae.jsxs)("div",{style:s.container,children:[(0,ae.jsx)(be().A,{style:s.title,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.secondaryWorkspace.uneditableTitle",defaultMessage:"The primary workspace is <bold>{primaryWorkspaceName}</bold>.",values:{primaryWorkspaceName:t,bold:e=>(0,ae.jsx)("span",{style:{fontWeight:S().Wy.semibold},children:e})}})}),(0,ae.jsx)(be().A,{style:s.text,isMultiline:!0,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.secondaryWorkspace.uneditableMessage",defaultMessage:"The domain management settings and SAML SSO configuration are being managed by the workspace <bold>{primaryWorkspaceName}</bold>. Please navigate there or contact an admin of that workspace to edit the verified domains or SSO configuration.",values:{primaryWorkspaceName:t,bold:e=>(0,ae.jsx)("span",{style:{fontWeight:S().Wy.semibold},children:e})}})})]})}var yr=()=>s(882099);function jr(e){let{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:o}=e;const{organizationInfo:r,isOrganizationOwner:l}=(0,Ki().n)({spaceId:s.id}),{onboardingInfo:d}=function(e){let{spaceId:t,allowSecondaryWorkspace:s}=e;const n=(0,a().v3)(),{updateCacheWithRecordMap:o}=(0,i.useContext)(oo().N),[{status:r,value:l},d]=(0,qn().Yb)((async()=>{const e=await U().callApi({eventName:"getOrganizationOnboardingInfo",environment:n,data:{spaceId:t,allowSecondaryWorkspace:s}});return"success"===e.type?(o({data:e.data}),e.data.result):"failed"===e.type?{onboardingStatus:"ineligible"}:(0,Rs().HB)(e)}),[n,t,o,s]);return{loading:"pending"===r||"idle"===r,onboardingInfo:l,refresh:d}}({spaceId:s.id,allowSecondaryWorkspace:!0});return(0,ae.jsx)(Ar,{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:o,organizationInfo:r,isOrganizationOwner:l,organizationOnboardingInfo:d})}function Ar(e){let{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:o,organizationInfo:d,isOrganizationOwner:c,organizationOnboardingInfo:u}=e;const g=(0,a().v3)(),p=(0,r().O$)(ct().e),{loadingSaml:m,loadedSaml:h,errorSaml:S}=(0,i.useContext)(Kn),x=void 0!==d,b=function(e){let{environment:t,samlConfigStore:s,spaceStore:i}=e;const n=so({environment:t,samlConfigStore:s,spaceStore:i}),a=(0,r().K8)((()=>!s.state.id||s.state.id===i.id),[s,i]);return n&&a}({environment:g,samlConfigStore:n,spaceStore:s}),v=u&&("not_started"===u.onboardingStatus||"domain_verified"===u.onboardingStatus),y=x&&u&&"ineligible"===(null==u?void 0:u.onboardingStatus),A=u&&"ineligible"!==(null==u?void 0:u.onboardingStatus),C=A||x,w=A,M=x&&!c,T=(0,Je().X)("organization_console_ga_enabled"),k=(0,r().K8)((()=>n.state.id?io().A.getData(g,{spaceId:n.state.id}):void 0),[g,n]),I=(0,l().IS)((e=>({header:{marginTop:36},title:{display:"flex",alignItems:"center",gap:6}})),[]),D=(0,r().K8)((()=>(0,pi().OX)()),[]);return(0,i.useEffect)((()=>{p&&!m&&S&&j().c1(S.message)}),[S,m,p]),p?m?(0,ae.jsx)(Gt().Ay,{centerContent:!0,children:(0,ae.jsx)(fi().A,{})}):S?null:h?(0,ae.jsxs)(Gt().Ay,{children:[v?(0,ae.jsx)(ao().s,{organizationOnboardingInfo:u}):y&&c?(0,ae.jsx)(ao().s,{organizationOnboardingInfo:{onboardingStatus:"completed",organizationId:null==d?void 0:d.id}}):null,d&&!c?(0,ae.jsx)(no().l,{display:"inline",tint:"blue",iconGroup:to().x,label:(0,ae.jsx)(f().sA,{id:"workspaceSettingsModal.organizationsBanner.member.title",defaultMessage:"Settings that can only be managed by organization owners have been moved to the organization console."}),description:(0,ae.jsx)(f().sA,{id:"workspaceSettingsModal.organizationsBanner.member.tooltip",defaultMessage:"Verifying domains and managing accounts can only be done by organization owners. Organization owners can manage all workspaces in {organizationName}.",values:{organizationName:d.name}})}):null,b||T||!k?null:(0,ae.jsx)(vr,{primarySpaceName:k.name}),C?null:(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.domain.title",defaultMessage:"Domain management"})}),(0,ae.jsx)(xo,{spaceStore:s,samlConfigStore:n,domainSettingsStore:o,isCurrentSpaceEnterprise:D})]}),C?null:(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",style:I.header,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.userManagement.title",defaultMessage:"User management"})}),(0,ae.jsx)(ko,{spaceStore:s,samlConfigStore:n,domainSettingsStore:o})]}),M?null:w?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",style:"completed"===(null==u?void 0:u.onboardingStatus)&&T?void 0:I.header,children:(0,ae.jsxs)("div",{style:I.title,children:[(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.saml.title",defaultMessage:"SAML single sign-on (SSO)"}),(0,ae.jsx)(Fs().A,{href:(0,He().xS)("guides.samlSettings"),analyticsFrom:"saml_settings"})]})}),(0,ae.jsx)(Vo,{spaceStore:s,samlConfigStore:n,domainSettingsStore:o,organizationOnboardingInfo:u})]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",style:I.header,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.saml.title",defaultMessage:"SAML single sign-on (SSO)"})}),(0,ae.jsx)(No,{spaceStore:s,samlConfigStore:n,domainSettingsStore:o})]}),(0,ae.jsx)(ge().A,{large:!0,divider:"full",style:I.header,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.scim.title",defaultMessage:"SCIM provisioning"})}),(0,ae.jsx)(br,{userStore:t,spaceStore:s}),(0,ae.jsx)(ge().A,{large:!0,divider:"full",style:I.header,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.setupInfo.title",defaultMessage:"Setup information"})}),(0,ae.jsx)(yr().K,{spaceStore:s})]}):null:(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,ae.jsx)(f().sA,{defaultMessage:"Please go online to manage identity and provisioning settings.",id:"identityProvisioningSettings.offline.message"})})})}var Cr=()=>s(176936),wr=()=>s(996094),Mr=()=>s(882764),Tr=()=>s(430041),kr=()=>s(141666),Ir=()=>s(429318),Dr=()=>s(278633),Pr=()=>s(172553),Rr=()=>s(514138);function _r(){return(0,ae.jsx)(xe().A,{renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceClaim.Explanation",defaultMessage:"Workspace claim request is being processed."}),render:e=>(0,ae.jsx)(be().A,{...e,children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingClaim",defaultMessage:"Pending"})})})}var Br=()=>s(14931);function Er(e){let{admin:t}=e;const s=(0,f().tz)();return(0,ae.jsx)(xe().A,{renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceTransferExplanation",defaultMessage:"Waiting for {name} to transfer the workspace to an external account.",values:{name:(0,Br().c6)(s,t)}}),render:e=>(0,ae.jsx)(be().A,{...e,children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingTransfer",defaultMessage:"Pending"})})})}let Ur=function(e){return e.Single="single",e.Multi="multi",e}({});function Lr(e){const{space:t,mode:s}=e,i=(0,r().uB)(void 0,fa().A),n=(0,l().IS)((()=>({container:{minWidth:325}})),[]);return s===Ur.Single?(0,ae.jsx)(Wr,{action:e.action,space:t}):(0,ae.jsx)(Sa().Ay,{popupType:va().nl.Popup,style:n.container,buttonPopupStore:i,renderOrigin:e=>(0,ae.jsx)($n().A,{icon:ga()._,...e}),render:()=>(0,ae.jsx)(Or,{space:t,actions:e.actions,popupStore:i})})}function Or(e){let{space:t,actions:s,popupStore:i}=e;const n={key:"workspace-actions",render:e=>(0,ae.jsx)(ya().A,{...e}),items:s.map((e=>{const s=!!e.getDisabledState&&e.getDisabledState(t),i=e.getTooltip?e.getTooltip(t):null;return{key:e.id,render:t=>(0,ae.jsx)(xe().A,{render:i=>(0,ae.jsx)(ha().A,{...t,...i,shouldWrapCaption:!0,svg:t=>e.getIcon(t),title:e.name,caption:e.caption,style:{paddingTop:8,paddingBottom:8,opacity:s?.5:1},disabled:s}),renderTooltip:()=>i,disableTooltip:!Boolean(i),placement:ye().W.Left}),action:()=>e.onAction(t)}}))};return(0,ae.jsx)(xa().A,{menuType:ma().gu.Popup,children:(0,ae.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:[n],onAccept:()=>{i.setState({open:!1})}})})}function Wr(e){const{action:t,space:s}=e,n=(0,l().IS)((e=>({button:{paddingLeft:5,paddingRight:5}})),[]),a=i.useCallback((()=>{t.onAction(s)}),[t,s]);return(0,ae.jsx)(Vt().p,{size:"sm",style:n.button,onClick:a,children:t.name})}var zr=()=>s(977541),qr=()=>s(350638);function Fr(e){let{users:t,deletedUserEmailDomain:s}=e;const i=(0,r().uB)(void 0,fa().A),n=(0,l().IS)((()=>({container:{minWidth:275}})),[]);return(0,ae.jsx)(Sa().Ay,{popupType:va().nl.Popup,style:n.container,buttonPopupStore:i,renderOrigin:e=>(0,ae.jsx)(Kr,{users:t,deletedUserEmailDomain:s,...e}),render:()=>(0,ae.jsx)(Nr,{users:t,popupStore:i})})}function Nr(e){let{users:t,popupStore:s}=e;const i=(0,a().v3)(),n={key:"workspace-users-menu",render:e=>(0,ae.jsx)(ya().A,{...e}),items:t.map((e=>({key:e.id,render:t=>(0,ae.jsx)(Gr,{user:e,...t}),action:()=>C().f({environment:i,url:`mailto:${e.email}`})})))};return(0,ae.jsx)(xa().A,{menuType:ma().gu.Popup,children:(0,ae.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:0,sections:[n],onAccept:()=>{s.setState({open:!1})}})})}function Gr(e){let{user:t,...s}=e;const i=(0,f().tz)(),n=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingTop:8,paddingBottom:8,margin:"0 6px"},avatarContainer:{display:"flex",justifyContent:"center",alignItems:"center"},copyContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",opacity:.5},nameContainer:{marginLeft:8,marginRight:8},name:{fontSize:14,lineHeight:1.2,maxWidth:300},email:{fontSize:12,lineHeight:1.2,opacity:.5,maxWidth:300}})),[]);return(0,ae.jsxs)(Vt().p,{style:n.container,...s,children:[(0,ae.jsx)("div",{style:n.avatarContainer,children:(0,ae.jsx)(Rn().A,{userValue:t,size:24})}),(0,ae.jsxs)("div",{style:n.nameContainer,children:[(0,ae.jsx)(be().A,{style:n.name,children:(0,Br().c6)(i,t)}),(0,ae.jsx)(be().A,{style:n.email,children:t.email})]}),(0,ae.jsx)("div",{style:n.copyContainer,children:(0,qr().F)({height:18,width:18})})]})}function Kr(e){let{users:t,deletedUserEmailDomain:s,...i}=e;const n=(0,f().tz)(),a=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginLeft:"-8px",maxWidth:"100%"},empty:{fontSize:14,maxWidth:150,opacity:.5},plusMore:{opacity:.5,display:"inline"}})),[]);return 0===t.length?(0,ae.jsx)(xe().A,{render:e=>(0,ae.jsx)(Vt().p,{style:a.container,disabled:!0,...i,...e,children:(0,ae.jsx)(be().A,{style:a.empty,children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.users.empty",defaultMessage:"Deleted user"})})}),disableTooltip:!s,renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.users.emptyTooltip",defaultMessage:"Deleted user from {domain}",values:{domain:`@${s}`}})}):(0,ae.jsx)(Vt().p,{style:a.container,...i,children:(0,ae.jsx)(be().A,{children:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.users.name",defaultMessage:"{remainingCount, plural, =0 {{firstUser}} one {{firstUser} <gray>+{remainingCount}</gray>} other {{firstUser} <gray>+{remainingCount}</gray>}}",values:{firstUser:(0,Br().c6)(n,t[0]),remainingCount:t.length-1,gray:e=>(0,ae.jsx)(be().A,{style:a.plusMore,children:e})}})})})}const Vr=[{id:"spaces",headerTitle:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.name",defaultMessage:"Workspaces"}),renderCell:e=>(0,ae.jsx)(zr().H,{id:e.space.id,name:e.space.name,icon:e.space.icon,subscriptionTier:e.space.subscriptionTier,memberCount:e.space.memberCount}),widthData:{width:60},sortable:!1},{id:"admins",headerTitle:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.admins",defaultMessage:"Workspace owners"}),renderCell:e=>(0,ae.jsx)(Fr,{users:e.space.admins}),widthData:{width:40},sortable:!1},{id:"createdBy",headerTitle:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.createdBy",defaultMessage:"Created by"}),renderCell:e=>e.space.creator?(0,ae.jsx)(Fr,{users:[e.space.creator]}):(0,ae.jsx)(Fr,{users:[],deletedUserEmailDomain:e.space.creatorEmailDomain}),widthData:{width:40},sortable:!1},{id:"createdAt",headerTitle:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.createdAt",defaultMessage:"Created date"}),renderCell:e=>(0,ae.jsx)(be().A,{style:{opacity:.5},children:(0,La().DG)(e.space.createdAt)}),widthData:{width:30},sortable:!1},{id:"action",headerTitle:null,renderCell:e=>{if((0,Rr().D1)(e.space.spaceRequest))return(0,ae.jsx)(Er,{admin:e.space.admins[0]});if((0,Rr().me)(e.space.spaceRequest))return(0,ae.jsx)(_r,{});if((0,Rr().kF)(e.space.spaceRequest)){const t=e.actions.find((e=>"recover-space"===e.id));return t&&(0,ae.jsx)(Lr,{space:e.space,action:t,mode:Ur.Single})}return e.actions.length>0?(0,ae.jsx)(Lr,{space:e.space,actions:e.actions.filter((e=>"recover-space"!==e.id)),mode:Ur.Multi}):null},widthData:{width:15},sortable:!1}];function Hr(e){let{claimableSpaces:t,spaceActions:s,loadMoreClaimableSpaces:i,loading:n}=e;const a=t.map((e=>({id:e.id,isClickable:!1,space:e,actions:s}))),o=(0,l().IS)((e=>(0,he().rC)({columnRenderInfo:Vr,theme:e,containerMarginTop:0})),[]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(he().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Vr,rows:a,renderNoRowsComponent:()=>(0,ae.jsx)(be().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:!n&&(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.empty",defaultMessage:"No claimable workspaces."})}),styles:o,getStyleForRow:function(e){if((0,Rr().D1)(e.space.spaceRequest)||(0,Rr().me)(e.space.spaceRequest)||(0,Rr().kF)(e.space.spaceRequest))return{opacity:.5}},loadMoreMethod:i?{type:"scroll",onLoadMore:i}:void 0}),n&&(0,ae.jsx)(fi().A,{style:{margin:"24px auto 24px"}})]})}var $r=()=>s(599932),Yr=()=>s(81322),Jr=()=>s(21857),Qr=()=>s(150936),Zr=()=>s(579494);const Xr=(0,f().YK)({emailPlaceholder:{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.placeholder",defaultMessage:"it@example.com"}});function el(e){let{onDismiss:t,spaceQueuedForTransfer:s,currentSpaceId:n}=e;const[o,r]=(0,i.useState)(),[d,c]=(0,i.useState)(!1),{setSpaceRequest:u}=(0,i.useContext)(Kn),g=(0,a().v3)(),p=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.text.secondary},modalIcon:{fill:e.mediumIconColor,height:24,width:24},title:{fontWeight:S().Wy.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:S().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},dividerContainer:{marginTop:20},dividerInner:{borderBottomColor:e.regularDividerColor},contactEmailContainer:{position:"relative",width:"100%",minHeight:56,marginTop:13},contactEmailTitle:{fontWeight:S().Wy.medium,fontSize:14,marginBottom:8,letterSpacing:-.15,display:"inline-flex",alignItems:"center"},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},primaryButton:{width:"100%",marginTop:32},buttonCaption:{color:e.text.secondary,marginTop:8,textAlign:"center",fontSize:12},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:S().Wy.medium,color:e.text.tertiary},buttonCaptionError:{color:e.errorText,marginTop:8,fontSize:13}})),[]),m=Boolean(s);return(0,ae.jsx)(Si().a,{open:m,innerStyle:p.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:p.closeIconContainer,children:(0,ae.jsx)(Vt().p,{size:"sm",onClick:t,ignoreLocalHoverState:!0,children:(0,Yr().V)(p.closeIcon)})}),(0,ae.jsx)("div",{children:(0,Jr().G)(p.modalIcon)}),(0,ae.jsxs)(be().A,{style:p.title,children:[(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.selfServe.title",defaultMessage:"Require account change"}),(0,ae.jsx)(Zr().A,{href:(0,He().xS)("guides.domainManagement"),children:(0,ae.jsx)($n().A,{icon:Hn().$})})]}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:p.description,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.byline",defaultMessage:"You’re about to require the Workspace Owner of 1 workspace to use an external Notion accounts. They will be unable to use the workspace until the change is made."})}),(0,ae.jsxs)("div",{style:p.workspaceContainer,children:[s?(0,ae.jsx)(zr().H,{id:s.id,name:s.name,icon:s.icon,subscriptionTier:s.subscriptionTier,memberCount:s.memberCount}):null,(0,ae.jsx)("div",{style:p.checkContainer,children:(0,Qr().b)(p.check)})]}),(0,ae.jsx)(mi().A,{size:"100%",innerStyle:p.dividerInner,style:p.dividerContainer}),(0,ae.jsxs)("div",{style:p.contactEmailContainer,children:[(0,ae.jsxs)(be().A,{style:p.contactEmailTitle,children:[(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.title",defaultMessage:"Send request from"}),(0,ae.jsx)(xe().A,{renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingExplanation",defaultMessage:"The Workspace Owner can contact this email for inquiries"}),render:e=>(0,ae.jsx)("span",{...e,children:(0,Hn().$)(p.helpIcon)})})]}),(0,ae.jsx)(Ys().A,{value:o,placeholder:O().A.formatMessage(Xr.emailPlaceholder),onChange:e=>{c(!1),r(e.target.value)}}),d&&(0,ae.jsx)(be().A,{isSmall:!0,style:p.buttonCaptionError,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.error",defaultMessage:"Invalid email address"})})]}),(0,ae.jsx)(qs().A,{size:"lg",style:p.primaryButton,onClick:async()=>{const e=(0,$r().qh)(o);var i;if((0,$r().DT)(e)){if(s&&e){const a=await U().callApi({eventName:"initiateWorkspaceTransfer",environment:g,data:{requestingSpaceId:n,targetSpaceId:s.id,contactEmail:e}});if("failed"===a.type)j().f1((0,L().Hu)(O().A.getIntl(),a));else{const n=a.data.workspaceTransfer;u(s.id,n),Bn().FL(g,{contactEmail:e,currentOwners:s.admins.map((e=>e.id)),targetSpaceId:s.id,verifiedDomain:s.creatorEmailDomain,subscriptionTier:s.subscriptionTier}),t(),i=s.name,ta().D6({label:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.toast",defaultMessage:"Account change successfully requested for “{spaceName}“",values:{spaceName:i}})})}}}else c(!0)},children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.confirm",defaultMessage:"Confirm change"})}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:p.buttonCaption,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.buttonCaption",defaultMessage:"This cannot be undone"})}),(0,ae.jsx)(Vt().p,{style:p.secondaryButton,onClick:t,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.cancel",defaultMessage:"Cancel"})})]})})}function tl(e){let{onDismiss:t,spaceQueuedForClaiming:s,requestingSpaceId:n}=e;const o=(0,a().v3)(),{setSpaceRequest:r}=(0,i.useContext)(Kn),d=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.text.secondary},title:{fontWeight:S().Wy.medium,fontSize:16,marginBottom:8,display:"inline-flex",alignItems:"center",justifyContent:"center"},description:{fontWeight:S().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:S().Wy.medium,color:e.text.tertiary},buttonCaption:{color:e.text.secondary,marginTop:8,textAlign:"center",fontSize:12}})),[]),c=Boolean(s),u=async()=>{if(!s)return;const e=await U().callApi({eventName:"requestClaimAndUpgrade",environment:o,data:{requestingSpaceId:n,targetSpaceId:s.id}});var i;"failed"===e.type?j().Qg(e):(Bn().AQ(o,{currentOwners:s.admins.map((e=>e.id)),targetSpaceId:s.id,verifiedDomain:s.creatorEmailDomain,memberCount:s.memberCount}),r(s.id,e.data.spaceRequest),i=s.name,ta().D6({label:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.toast",defaultMessage:"Workspace claim successfully requested for “{spaceName}“",values:{spaceName:i}})})),t()};return(0,ae.jsx)(Si().a,{open:c,innerStyle:d.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:d.closeIconContainer,children:(0,ae.jsx)(Vt().p,{size:"sm",onClick:t,children:(0,Yr().V)(d.closeIcon)})}),(0,ae.jsxs)(be().A,{style:d.title,children:[(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.title",defaultMessage:"Request workspace claim"}),(0,ae.jsx)(Zr().A,{href:(0,He().xS)("guides.domainManagement"),children:(0,ae.jsx)($n().A,{icon:Hn().$})})]}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:d.description,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.byline",defaultMessage:"You’re about to take ownership of {currentWorkspaceName} and upgrade it to an Enterprise plan. You’ll become the Workspace owner and the existing owners will be downgraded to members.",values:{currentWorkspaceName:s?s.name:"the workspace below"}})}),(0,ae.jsxs)("div",{style:d.workspaceContainer,children:[s?(0,ae.jsx)(zr().H,{id:s.id,name:s.name,icon:s.icon,subscriptionTier:s.subscriptionTier,memberCount:s.memberCount}):null,(0,ae.jsx)("div",{style:d.checkContainer,children:(0,Qr().b)(d.check)})]}),(0,ae.jsx)(qs().A,{size:"lg",style:d.primaryButton,onClick:u,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.sendRequest",defaultMessage:"Send request"})}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:d.buttonCaption,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.buttonCaption",defaultMessage:"This request may take a few days to process. For more information, contact your <accountmanageremail>Account Management team</accountmanageremail>.",values:{accountmanageremail:e=>(0,ae.jsx)(yi().A,{href:"mailto:am@makenotion.com",children:e})}})}),(0,ae.jsx)(Vt().p,{style:d.secondaryButton,onClick:t,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.cancel",defaultMessage:"Cancel"})})]})})}function sl(e){let{onDismiss:t,spaceQueuedForClaiming:s}=e;const i=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.text.secondary},modalIcon:{fill:e.mediumIconColor,height:24,width:24},title:{fontWeight:S().Wy.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:S().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:S().Wy.medium,color:e.text.tertiary}})),[]),n=Boolean(s);return(0,ae.jsx)(Si().a,{open:n,innerStyle:i.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:i.closeIconContainer,children:(0,ae.jsx)(Vt().p,{size:"sm",onClick:t,ignoreLocalHoverState:!0,children:(0,Yr().V)(i.closeIcon)})}),(0,ae.jsx)("div",{children:(0,Tr().m)(i.modalIcon)}),(0,ae.jsxs)(be().A,{style:i.title,children:[(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.title",defaultMessage:"Claim workspace"}),(0,ae.jsx)(Zr().A,{href:(0,He().xS)("guides.domainManagement"),children:(0,ae.jsx)($n().A,{icon:Hn().$})})]}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:i.description,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.byline",defaultMessage:"You’re about to take ownership of {currentWorkspaceName} and upgrade it to an Enterprise plan. You’ll become the Workspace owner and the existing owners will be downgraded to members.",values:{currentWorkspaceName:s?s.name:"the workspace below"}})}),(0,ae.jsxs)("div",{style:i.workspaceContainer,children:[s?(0,ae.jsx)(zr().H,{id:s.id,name:s.name,icon:s.icon,subscriptionTier:s.subscriptionTier,memberCount:s.memberCount}):null,(0,ae.jsx)("div",{style:i.checkContainer,children:(0,Qr().b)(i.check)})]}),(0,ae.jsx)(qs().A,{size:"lg",style:i.primaryButton,onClick:async()=>{s&&await Ct().zo(s)},children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.reviewAndPay",defaultMessage:"Review and pay"})}),(0,ae.jsx)(Vt().p,{style:i.secondaryButton,onClick:t,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.cancel",defaultMessage:"Cancel"})})]})})}var il=()=>s(401548),nl=()=>s(559637);const al=(0,f().YK)({emailPlaceholder:{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.placeholder",defaultMessage:"it@example.com"}});function ol(e){let{onDismiss:t,spaceQueuedForDeletion:s,currentSpaceId:n}=e;const[o,r]=(0,i.useState)({email:void 0,didError:!1}),[d,c]=(0,i.useState)(!1),[u,g]=(0,i.useState)(!1),{setSpaceRequest:p}=(0,i.useContext)(Kn),m=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.text.secondary},modalIcon:{fill:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500],height:24,width:24},title:{fontWeight:S().Wy.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:S().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},checkboxContainer:{display:"inline-flex",marginTop:8,alignItems:"center"},checkbox:{color:"dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[200],marginRight:8},primaryButton:{width:"100%",marginTop:32,background:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500],justifyContent:"center",fontWeight:S().Wy.medium,color:pa().Ay.white},primaryButtonHovered:{background:"dark"===e.mode?(0,il().e$)(e.accentColors.red[700],.3):(0,il().e$)(e.accentColors.red[500],.3)},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:S().Wy.medium,color:e.text.tertiary},checkboxCaption:{color:e.text.secondary,textAlign:"center",fontSize:12},dividerContainer:{marginTop:18},divider:{borderBottomColor:e.regularDividerColor}})),[]),h=(0,a().v3)(),x=(0,i.useCallback)((()=>{r({email:void 0,didError:!1}),c(!1),g(!1),t()}),[t]),b=(0,i.useCallback)((e=>{r({didError:!1,email:e.target.value})}),[]),v=(0,i.useCallback)((()=>c((e=>!e))),[]),y=(0,i.useCallback)((async()=>{const e=(0,$r().qh)(o.email);if(!(0,$r().DT)(e))return void r({...o,didError:!0});if(!s)return;g(!0);const t=await U().callApi({eventName:"deleteSpaceForDomain",environment:h,data:{requestingSpaceId:n,targetSpaceId:s.id,contactEmail:e}});if("failed"===t.type)g(!1),j().f1((0,L().Hu)(O().A.getIntl(),t));else{const n=t.data.spaceDeletion;p(s.id,n),Bn().$3(h,{contactEmail:e,currentOwners:s.admins.map((e=>e.id)),targetSpaceId:s.id,verifiedDomain:s.creatorEmailDomain,targetSubscriptionTier:s.subscriptionTier}),x(),i=s.name,ta().D6({label:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.toast",defaultMessage:"Successfully deleted “{spaceName}“",values:{spaceName:i}})})}var i}),[x,o,n,h,p,s]),A=Boolean(s);return(0,ae.jsx)(Si().a,{open:A,innerStyle:m.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:x,render:()=>(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:m.closeIconContainer,children:(0,ae.jsx)(Vt().p,{size:"sm",onClick:x,ignoreLocalHoverState:!0,children:(0,Yr().V)(m.closeIcon)})}),(0,ae.jsx)("div",{children:(0,Hs().I)(m.modalIcon)}),(0,ae.jsxs)(be().A,{style:m.title,children:[(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.title",defaultMessage:"Delete workspace"}),(0,ae.jsx)(Zr().A,{href:(0,He().xS)("guides.domainManagement"),children:(0,ae.jsx)($n().A,{icon:Hn().$})})]}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:m.description,children:s?(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.byline",defaultMessage:"You’re about to permanently delete {currentWorkspaceName} and all of its contents. The workspace owner will be notified.",values:{currentWorkspaceName:s.name}}):void 0}),(0,ae.jsxs)("div",{style:m.workspaceContainer,children:[s?(0,ae.jsx)(zr().H,{id:s.id,name:s.name,icon:s.icon,subscriptionTier:s.subscriptionTier,memberCount:s.memberCount}):void 0,(0,ae.jsx)("div",{style:m.checkContainer,children:(0,Qr().b)(m.check)})]}),(0,ae.jsx)(mi().A,{size:0,style:m.dividerContainer,innerStyle:m.divider}),(0,ae.jsx)(rl,{value:o.email,placeholder:O().A.formatMessage(al.emailPlaceholder),onChange:b,labelMessage:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.title",defaultMessage:"Contact email"}),helpMessage:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.deleteWorkspaces.deletionModal.tooltipExplanation",defaultMessage:"The Workspace Owner of the deleted workspace can contact this email for inquiries"}),errorMessage:o.didError?(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.error",defaultMessage:"Invalid email address"}):void 0}),(0,ae.jsx)(Vt().p,{disabled:!d||!o.email||u,disabledFeedback:!0,size:"lg",style:m.primaryButton,hoveredStyle:m.primaryButtonHovered,onClick:y,children:u?(0,ae.jsx)(fi().A,{}):(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.deleteButton",defaultMessage:"Delete workspace"})}),(0,ae.jsxs)("div",{style:m.checkboxContainer,children:[(0,ae.jsx)(nl().A,{style:m.checkbox,size:14,checked:d,onClick:v}),(0,ae.jsx)(be().A,{isSmall:!0,style:m.checkboxCaption,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.checkboxLabel",defaultMessage:"I'm sure I want to delete this workspace"})})]}),(0,ae.jsx)(Vt().p,{style:m.secondaryButton,onClick:x,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.cancel",defaultMessage:"Cancel"})})]})})}function rl(e){const t=(0,l().IS)((e=>({emailInputTitle:{fontWeight:S().Wy.medium,fontSize:14,marginBottom:8,letterSpacing:-.15,display:"inline-flex",alignItems:"center"},emailContainer:{position:"relative",width:"100%",minHeight:56,marginTop:13},inputCaptionError:{color:e.errorText,marginTop:8,fontSize:13},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16}})),[]);return(0,ae.jsxs)("div",{style:t.emailContainer,children:[(0,ae.jsxs)(be().A,{style:t.emailInputTitle,children:[e.labelMessage,e.helpMessage&&(0,ae.jsx)(xe().A,{renderTooltip:()=>e.helpMessage,render:e=>(0,ae.jsx)("span",{...e,children:(0,Hn().$)(t.helpIcon)})})]}),(0,ae.jsx)(Ys().A,{value:e.value,placeholder:e.placeholder,onChange:e.onChange}),e.errorMessage&&(0,ae.jsx)(be().A,{isSmall:!0,style:t.inputCaptionError,children:e.errorMessage})]})}function ll(e){let{onDismiss:t,onAccept:s,spaceQueued:i,descriptionMessage:n,divider:a,modalIcon:o,title:r,acceptMessage:d,isLoading:c}=e;const u=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.text.secondary},modalIcon:{height:24,width:24,fill:e.mediumIconColor},title:{fontWeight:S().Wy.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:S().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32,justifyContent:"center",fontWeight:S().Wy.medium},secondaryButton:{margin:"8px auto 0",width:"100%",justifyContent:"center",fontWeight:S().Wy.medium,color:e.text.tertiary},dividerContainer:{marginTop:18},divider:{borderBottomColor:e.regularDividerColor}})),[]),g=Boolean(i);return(0,ae.jsx)(Si().a,{open:g,innerStyle:u.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:u.closeIconContainer,children:(0,ae.jsx)(Vt().p,{size:"sm",onClick:t,ignoreLocalHoverState:!0,children:(0,Yr().V)(u.closeIcon)})}),o&&(0,ae.jsx)("div",{children:o(u.modalIcon)}),(0,ae.jsxs)(be().A,{style:u.title,children:[r,(0,ae.jsx)(Zr().A,{href:(0,He().xS)("guides.domainManagement"),children:(0,ae.jsx)($n().A,{icon:Hn().$})})]}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:u.description,children:n}),(0,ae.jsxs)("div",{style:u.workspaceContainer,children:[i?(0,ae.jsx)(zr().H,{id:i.id,name:i.name,icon:i.icon,subscriptionTier:i.subscriptionTier,memberCount:i.memberCount}):void 0,(0,ae.jsx)("div",{style:u.checkContainer,children:(0,Qr().b)(u.check)})]}),a&&(0,ae.jsx)(mi().A,{size:0,style:u.dividerContainer,innerStyle:u.divider}),(0,ae.jsx)(qs().A,{size:"lg",style:u.primaryButton,onClick:s,disabled:c,children:c?(0,ae.jsx)(fi().A,{}):d}),(0,ae.jsx)(Vt().p,{style:u.secondaryButton,onClick:t,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimableSpaceConfirmationModal.cancel",defaultMessage:"Cancel"})})]})})}function dl(e){let{onDismiss:t,spaceQueuedForRecovery:s,currentSpaceId:n}=e;const{setSpaceRequest:o}=(0,i.useContext)(Kn),r=(0,a().v3)(),[l,d]=(0,i.useState)(!1),c=(0,i.useCallback)((()=>{d(!1),t()}),[t]),u=(0,i.useCallback)((async()=>{if(!n||!s)return;d(!0);const e=await U().callApi({eventName:"cancelSpaceDeletionForDomain",environment:r,data:{requestingSpaceId:n,targetSpaceId:s.id}});if("failed"===e.type)return d(!1),void j().f1((0,L().Hu)(O().A.getIntl(),e));var t;o(s.id,void 0),Bn().nY(r,{targetSpaceId:s.id,verifiedDomain:s.creatorEmailDomain}),c(),t=s.name,ta().D6({label:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.table.recoverSpace.toast",defaultMessage:"Successfully recovered “{spaceName}“",values:{spaceName:t}})})}),[o,n,r,s,c]);return(0,ae.jsx)(ll,{onDismiss:c,onAccept:u,spaceQueued:s,modalIcon:Xn,title:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.title",defaultMessage:"Recover workspace"}),descriptionMessage:s?(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.byline",defaultMessage:"Restore workspace content and the workspace owner's access.",values:{currentWorkspaceName:s.name}}):void 0,acceptMessage:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.deleteButton",defaultMessage:"Recover"}),isLoading:l,divider:!1})}let cl=!1;function ul(e){let{spaceStore:t,subscriptionDataStore:s}=e;const{claimableSpaces:n,domainVerifications:o,loadingSpaces:d,errorClaimableSpaces:c,errorVerifications:u,navigateTo:g,removeClaimableSpace:h,loadMoreClaimableSpaces:x,tab:b,setSelectedTab:v,verifiedDomains:y}=(0,i.useContext)(Kn),A=(0,a().v3)(),C=(0,Vi().l)({spaceId:null==t?void 0:t.id}),w=(0,r().K8)((()=>!Pr().A.state.open&&Boolean(Pr().A.state.succeeded)),[]),[M,T]=(0,i.useState)(),[k,I]=(0,i.useState)(),[D,P]=(0,i.useState)(),[R,_]=(0,i.useState)(),B=(0,Dr().Y)(C,s);function E(){T(void 0),I(void 0),P(void 0),_(void 0)}(0,i.useEffect)((()=>{w&&M&&(h(M.id),T(void 0),Pr().A.reset())}),[w,M,h,T]);const U=(0,p().bO)(C),L=(0,l().IS)((e=>({link:{fontSize:14,fontWeight:400,color:e.text.secondary,textDecoration:"none"},title:{marginTop:21,fontWeight:S().Wy.semibold,fontSize:17},byline:{fontSize:14,fontWeight:S().Wy.regular,color:e.text.secondary,marginRight:"auto",paddingRight:20},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"}})),[]);if((0,i.useEffect)((()=>{c?j().c1(c.message):u&&j().c1(u.message)}),[c,u]),c)return null;if(u)return null;const O=n.filter((e=>(0,Cr().Av)(e.spaceRequest,e.memberCount))),W=n.filter((e=>!(0,Cr().Av)(e.spaceRequest,e.memberCount))),z=[{id:"external-transfer",getIcon:e=>(0,Mr().X)({...e,height:14,width:14}),name:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransfer",defaultMessage:"Require account change"}),caption:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransferCaption",defaultMessage:"Owner will be prompted to change workspace ownership to a personal account."}),onAction:e=>I(e)},{id:"space-deletion",getIcon:e=>(0,Hs().I)({...e,height:14,width:14}),name:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace",defaultMessage:"Delete workspace"}),caption:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpaceCaption",defaultMessage:"Owner will lose access to the workspace immediately."}),onAction:e=>P(e),getDisabledState:e=>{const{isEligible:t}=gl(o,e.creatorEmailDomain);return!t||e.isDelinquent||e.isPendingBilling||!(0,m().dL)(e.subscriptionTier)},getTooltip:e=>{const t=gl(o,e.creatorEmailDomain);return t.isEligible?!(0,m().dL)(e.subscriptionTier)||e.isDelinquent||e.isPendingBilling?(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.ineligibleTooltip",defaultMessage:"The workspace is ineligible for deletion."}):void 0:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.disabledTooltip",defaultMessage:"You're in the 14-day notification period after verifying a domain.{br} This feature will be enabled in {numDays, plural, one {{numDays} day} other {{numDays} days}}.",values:{numDays:t.daysUntilEligible,br:(0,ae.jsx)("br",{})}})}},{id:"recover-space",getIcon:()=>{},name:(0,ae.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.actions.recoverSpace",defaultMessage:"Recover"}),caption:void 0,onAction:e=>_(e)}],q=[{id:"claim-and-upgrade",getIcon:e=>(0,Tr().m)({...e,height:14,width:14}),name:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgrade",defaultMessage:"Claim and upgrade"}),caption:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgradeCaption",defaultMessage:"Take ownership of the workspace and upgrade it to an Enterprise plan"}),onAction:e=>T(e),getDisabledState:e=>{const{isEligible:t}=gl(o,e.creatorEmailDomain);return U||!t||e.isDelinquent||e.isPendingBilling},getTooltip:e=>{const t=gl(o,e.creatorEmailDomain);return e.isDelinquent||e.isPendingBilling?(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimSpace.ineligibleTooltip",defaultMessage:"The workspace is ineligible for claiming."}):t.isEligible?void 0:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.disabledTooltip",defaultMessage:"You're in the 14-day notification period after verifying a domain.{br} This feature will be enabled in {numDays, plural, one {{numDays} day} other {{numDays} days}}.",values:{numDays:t.daysUntilEligible,br:(0,ae.jsx)("br",{})}})}}];return(0,ae.jsxs)(Gt().Ay,{children:[(0,ae.jsx)(yi().A,{style:L.link,onClick:()=>g(Nn.SettingsPage),children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.breadcrumb",defaultMessage:"← Identity & Provisioning"})}),(0,ae.jsx)(ge().A,{large:!0,style:L.title,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.title",defaultMessage:"Manage workspaces"})}),(0,ae.jsxs)(Ko().fI,{children:[(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:L.byline,children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.byline",defaultMessage:"Claim verified-domain workspaces to your Enterprise plan or require Owners to use an external domain."})}),(0,ae.jsx)(_t().A,{size:"lg",onClick:()=>{Ir().U6({environment:A,data:{spaceId:t.id,emailDomains:y}})},children:(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.exportClaimableWorkspaces.button",defaultMessage:"Export to CSV"})})]}),(0,ae.jsx)(Ai().Ay,{tabs:[(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.singleSpaces",defaultMessage:"Single-member"},"single"),(0,ae.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.multiSpaces",defaultMessage:"Multi-member"},"multi")],selectedIndex:b,onChange:e=>v(e),style:L.tabBarMenu}),(0,ae.jsx)(el,{onDismiss:E,spaceQueuedForTransfer:k,currentSpaceId:t.id}),b===Gn.Single?(0,ae.jsx)(Hr,{claimableSpaces:O,spaceActions:z,loadMoreClaimableSpaces:x,loading:d},"single"):(0,ae.jsx)(Hr,{claimableSpaces:W,spaceActions:q,loadMoreClaimableSpaces:x,loading:d},"multi"),B?(0,ae.jsx)(tl,{onDismiss:E,spaceQueuedForClaiming:M,requestingSpaceId:t.id}):(0,ae.jsx)(sl,{onDismiss:E,spaceQueuedForClaiming:M}),(0,ae.jsx)(ol,{onDismiss:E,spaceQueuedForDeletion:D,currentSpaceId:t.id}),(0,ae.jsx)(dl,{onDismiss:E,spaceQueuedForRecovery:R,currentSpaceId:t.id})]})}function gl(e,t){if(cl)return{isEligible:!0};const s=e.find((e=>{let{domain:s}=e;return t===s}));if(!s||!s.verified_at)return{isEligible:!0};const i=(Date.now()-s.verified_at)/kr().nD;return i>=14?{isEligible:!0}:{isEligible:!1,daysUntilEligible:Math.ceil(14-i)}}function pl(e){let{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:a}=e;const{page:o}=(0,i.useContext)(Kn);switch(o){case Nn.SettingsPage:return(0,ae.jsx)(jr,{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:a});case Nn.WorkspacesPage:return(0,ae.jsx)(ul,{spaceStore:s,subscriptionDataStore:Xi().subscriptionDataStoreInstance});case Nn.ManagedUsersPage:return(0,ae.jsx)(eo,{spaceStore:s,samlConfigStore:n})}}["local","development","staging"].includes("production")&&(0,wr().exposeDebugValue)("bypassDomainVerificationWaitingPeriod",(function(){cl=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}));const ml=function(e){let{userStore:t,spaceStore:s,samlConfigStore:i,domainSettingsStore:n}=e;return(0,ae.jsx)(Vn,{spaceStore:s,samlConfigStore:i,domainSettingsStore:n,children:(0,ae.jsx)(pl,{userStore:t,spaceStore:s,samlConfigStore:i,domainSettingsStore:n})})};var fl=()=>s(342981),hl=()=>s(559770),Sl=()=>s(899644),xl=()=>s(128295),bl=()=>s(343833),vl=()=>s(918625);function yl(e){let{isMobile:t}=e;const s=(0,a().v3)(),i=O().A.getIntl(),n=(0,r().K8)((()=>lt().default.state.currentUserSettingsStore),[]),{currentTimeZone:o,auto_update_disabled:l}=(0,r().K8)((()=>{const e=null==n?void 0:n.getSettings();return{currentTimeZone:null!=e&&e.time_zone&&(0,xl().PJ)(null==e?void 0:e.time_zone)?e.time_zone:void 0,auto_update_disabled:null==e?void 0:e.disable_auto_set_timezone}}),[n]),d=!l||!o;return n?(0,ae.jsx)(ei().A,{isMobile:t,type:"timezonePicker",currentTimeZone:o,title:(0,ae.jsx)(f().sA,{id:"dateAndTimeSettings.timeZone.title",defaultMessage:"Timezone"}),caption:(0,ae.jsx)(f().sA,{id:"dateAndTimeSettings.timeZone.caption",defaultMessage:"Current timezone setting."}),renderOrigin:e=>(0,ae.jsx)(vl()._,{focused:!1,disabled:d,buttonStyle:{width:void 0,margin:0},title:o?(0,Sl().Dy)(i,o):(0,ae.jsx)(f().sA,{id:"dateAndTimeSettings.timeZone.error",defaultMessage:"Error finding timezone"}),...e}),disabled:d,onSelect:e=>{bl().Lj({environment:s,userSettingsStore:n,timeZone:e})}}):null}function jl(e){let{isMobile:t}=e;const s=(0,a().v3)(),n=(0,r().K8)((()=>lt().default.state.currentUserSettingsStore),[]),o=(0,r().K8)((()=>{var e;return null==n||null===(e=n.getSettings())||void 0===e?void 0:e.disable_auto_set_timezone}),[n])??!1,l=(0,i.useCallback)((e=>{const t=!o;bl().W2({environment:s,userSettingsStore:e,disableAutoSetTimezone:t}),t||bl().xw({environment:s,userSettingsStore:e})}),[s,o]),d=(0,ae.jsx)(f().sA,{id:"dateAndTimeSettings.autoTimeZone.title",defaultMessage:"Set timezone automatically using your location"}),c=(0,ae.jsx)(f().sA,{id:"dateAndTimeSettings.autoTimeZone.caption",defaultMessage:"Reminders, notifications and emails are delivered based on your time zone."});return(n&&(0,ae.jsx)(ei().A,{isMobile:t,title:d,caption:c,type:"toggle",isOn:!o,onToggle:()=>l(n)}))??null}var Al=()=>s(471399),Cl=()=>s(31979),wl=()=>s(502140),Ml=()=>s(198654),Tl=()=>s(450475),kl=()=>s(755769),Il=()=>s(535906);const Dl=function(e){const[t,n]=i.useState([]),[o,d]=i.useState([]),c=(0,a().v3)(),u=(0,r().uB)(void 0,fa().A),g=(0,l().IS)((e=>({plainButton:{paddingLeft:8,paddingRight:8,marginLeft:-8},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);function p(e){return o.some((t=>t.code===e.code))}(0,i.useEffect)((()=>{const e=c.SpellCheckStore;e&&(e.getAvailableLanguages().then(n).catch((e=>{wl().log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getAvailableLanguages",error:(0,Tl().convertErrorToLog)(e)})})),e.getLanguages().then(d).catch((e=>{wl().log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getLanguages",error:(0,Tl().convertErrorToLog)(e)})})))}),[c]),(0,i.useEffect)((()=>{const e=c.SpellCheckStore;if(!e)return;const t=o.map((e=>{let{code:t}=e;return t}));e.setLanguages(t)}),[o,c.SpellCheckStore]);const m=o.length>0?o.slice(0,3).map((e=>{let{name:t}=e;return t})).join(", ")+(o.length>3?"…":""):(0,ae.jsx)(f().sA,{id:"languageRegionSettings.spellchecker.picker.label",defaultMessage:"Select languages"});return(0,ae.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,buttonPopupStore:u,renderOrigin:e=>(0,ae.jsxs)(Vt().p,{style:g.plainButton,...e,children:[m,(0,Ml().b)(g.icon)]}),placementToOrigin:kl().UV.Bottom,alignmentToOrigin:kl().MY.Start,render:e=>{const i=[{key:"spellcheckerlanguages",render:e=>(0,ae.jsx)(ya().A,{...e,topBorder:0!==e.index}),items:t.map((e=>{const t={key:e.code,render:t=>function(e){const t=e.language.name||e.language.code;return(0,ae.jsx)(Il().A,{...e.props,title:(0,ae.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,ae.jsx)("div",{style:{marginRight:0},children:t})}),shouldWrapCaption:!0,right:p(e.language)?(0,s(692844).$)({width:12,height:12}):void 0})}({language:e,props:t}),action:()=>{p(e)?d(o.filter((t=>t.code!==e.code))):d([...o,e])}};return t}))}],n={menuType:ma().gu.Popup,width:240};return(0,ae.jsx)(xa().A,{className:Ge().jtA,...n,children:(0,ae.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:i})})}})};const Pl=function(e){const t=(0,a().v3)();return t.device.isElectron&&t.device.isWindows?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(mi().A,{size:24,isHidden:!0}),(0,ae.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto"},children:(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",width:"100%"},children:[(0,ae.jsxs)("div",{style:{flex:1},children:[(0,ae.jsx)(be().A,{children:(0,ae.jsx)(f().sA,{id:"languageRegionSettings.spellchecker.label",defaultMessage:"Spellchecker languages"})}),(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,ae.jsx)(f().sA,{id:"languageSettings.spellcheckerSwitcher.subtitle",defaultMessage:"Change the languages used by the spellchecker."})})]}),(0,ae.jsx)(Dl,{})]})})]}):null};function Rl(){const e=(0,r().K8)((()=>lt().default.state.currentUserSettingsStore),[]),t=(0,r().K8)((()=>{var t;return(null==e||null===(t=e.getSettings())||void 0===t?void 0:t.preferred_locale)||Ea().q}),[e]),s=(0,a().v3)(),{isMobile:i}=(0,a().Y0)(),n=(0,r().K8)((()=>(0,ss().xu)(s)),[s]);if(!e)return null;const o=[{key:"timezone-auto",renderSettingsItem:()=>(0,ae.jsx)(jl,{isMobile:i})},{key:"timezone-manual",renderSettingsItem:()=>(0,ae.jsx)(yl,{isMobile:i})}].filter(Rs().O9);return n?(0,ae.jsxs)("div",{style:{paddingTop:48},children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",children:(0,ae.jsx)(f().sA,{id:"languageSettings.languageAndTimeSection.title",defaultMessage:"Language & Time"})}),(0,ae.jsx)(Al().A,{locale:t,userSettingsStore:e}),(0,ae.jsx)(Pl,{}),(0,ae.jsx)(mi().A,{size:18,isHidden:!0}),(0,ae.jsx)(hl().A,{}),(0,ae.jsx)(mi().A,{size:18,isHidden:!0}),(0,ae.jsx)(Cl().U,{items:o})]}):(0,ae.jsxs)(Gt().Ay,{children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",children:(0,ae.jsx)(f().sA,{id:"languageSettings.languageSection.title",defaultMessage:"Language & region"})}),(0,ae.jsx)(Al().A,{locale:t,userSettingsStore:e}),(0,ae.jsx)(Pl,{}),(0,ae.jsx)(mi().A,{size:24}),(0,ae.jsx)(hl().A,{})]})}var _l=()=>s(513754),Bl=()=>s(88020),El=()=>s(201190),Ul=()=>s(568065);function Ll(){const{isElectron:e,isElectronMac:t,isMobile:s,desktopAppId:i}=(0,a().Y0)(),n=(0,a().v3)(),o=(0,r().K8)((()=>(0,Bl().Z5)()),[]),l=(0,r().K8)((()=>(0,ss().xu)(n)),[n]),d=(0,r().K8)((()=>{const n=(0,Bl().fb)();return function(e){const{isMobile:t,isElectron:s,isElectronMac:i,desktopAppId:n,slackFeatureGateChecks:{showSlackNotificationSetting:a,showNotionActivityNotificationsToSlackSetting:o}}=e,r=!t&&s,l=r&&i&&Boolean(n);return[{key:"notify_mobile",renderSettingsItem:()=>(0,ae.jsx)(El().L,{target:"notify_mobile"})},r?{key:"notify_desktop",renderSettingsItem:()=>(0,ae.jsx)(El().L,{target:"notify_desktop"})}:void 0,l?{key:"desktop_badge",renderSettingsItem:()=>(0,ae.jsx)(El().L,{target:"desktop_badge"})}:void 0,a&&!o?{key:"notify_slack",renderSettingsItem:()=>(0,ae.jsx)(Ul().R,{target:"notify_slack"})}:void 0].filter(Rs().O9)}({isMobile:s,isElectron:e,isElectronMac:t,desktopAppId:i,slackFeatureGateChecks:{showSlackNotificationSetting:n,showNotionActivityNotificationsToSlackSetting:o}})}),[s,e,t,i,o]),c=(0,r().K8)((()=>{var e;const t=(0,Bl().fb)();return function(e){const{isSlackNotificationSettingEnabled:t,showSlackNotificationSetting:s,showNotionActivityNotificationsToSlackSetting:i}=e;if(!s||!i)return[];return[{key:"notify_slack",renderSettingsItem:()=>(0,ae.jsx)(Ul().R,{target:"notify_slack"})},t?{key:"notify_slack_all_activity",renderSettingsItem:()=>(0,ae.jsx)(Ul().R,{target:"notify_slack_all_activity"})}:void 0,t?{key:"notify_slack_mention",renderSettingsItem:()=>(0,ae.jsx)(Ul().R,{target:"notify_slack_mention"})}:void 0].filter(Rs().O9)}({isSlackNotificationSettingEnabled:Boolean(null===(e=lt().default.state.currentSpaceViewStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.notify_slack),showSlackNotificationSetting:t,showNotionActivityNotificationsToSlackSetting:o})}),[o]),u=(0,r().K8)((()=>{var e;return function(e){const{showNotifyEmailAlwaysSetting:t}=e;return[{key:"notify_email",renderSettingsItem:()=>(0,ae.jsx)(El().L,{target:"notify_email"})},t?{key:"notify_email_always",renderSettingsItem:()=>(0,ae.jsx)(El().L,{target:"notify_email_always"})}:void 0,{key:"notify_email_digest",renderSettingsItem:()=>(0,ae.jsx)(El().L,{target:"notify_email_digest"})},{key:"notify_home_digest_email",renderSettingsItem:()=>(0,ae.jsx)(El().L,{target:"notify_home_digest_email"})},{key:"marketing_emails",renderSettingsItem:()=>(0,ae.jsx)(El().L,{target:"marketing_emails"})}].filter(Rs().O9)}({showNotifyEmailAlwaysSetting:(null===(e=lt().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1})}),[]),g=(0,r().K8)((()=>n.WindowSizeStore.state.paddingBottomCSS),[n.WindowSizeStore]);return(0,ae.jsxs)(Gt().Ay,{children:[(0,ae.jsx)(ge().A,{large:!s,divider:"full",children:l?(0,ae.jsx)(f().sA,{id:"notificationSettings.notificationsSection.title.v2",defaultMessage:"Notifications"}):(0,ae.jsx)(f().sA,{id:"notificationSettings.notificationsSection.title",defaultMessage:"My notifications"})}),(0,ae.jsx)(Cl().U,{items:d}),(0,ae.jsx)(mi().A,{size:48,isHidden:!0}),o?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ge().A,{large:!s,divider:"full",children:(0,ae.jsx)(f().sA,{id:"notificationSettings.slackNotificationsSection.title",defaultMessage:"Slack notifications"})}),(0,ae.jsx)(Cl().U,{items:c}),(0,ae.jsx)(mi().A,{size:48,isHidden:!0})]}):void 0,(0,ae.jsx)(ge().A,{large:!s,divider:"full",children:(0,ae.jsx)(f().sA,{id:"notificationSettings.emailNotificationsSection.title",defaultMessage:"Email notifications"})}),(0,ae.jsx)(Cl().U,{items:u}),(0,ae.jsx)(mi().A,{size:48,isHidden:!0}),(0,ae.jsx)("div",{style:{marginTop:4,marginBottom:s?g:void 0},children:(0,ae.jsx)(Fs().A,{title:(0,ae.jsx)(f().sA,{id:"myNotificationSettings.helpButton.caption",defaultMessage:"Learn about notifications"}),href:(0,He().xS)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]})}var Ol=()=>s(450868);const Wl={whiteSpace:"normal",paddingTop:5,paddingBottom:5,height:"auto"};function zl(e){const t=(0,a().v3)(),{onView:s}=e,n=(0,f().tz)();(0,i.useEffect)((()=>{s(t)}),[t,s]);const o=n.formatMessage({id:"settingsPrompt.learnMore.button",defaultMessage:"Learn more"});return(0,ae.jsxs)("div",{children:[(0,ae.jsx)(mi().A,{size:0}),(0,ae.jsx)(Ol().X,{icon:e.icon,title:e.title,description:e.descriptionMessage,onDismiss:e.onDismiss,primaryAction:{text:e.buttonText,onClick:t=>(e.onDismiss(),e.onClick(t)),ariaLabel:e.buttonAriaLabel},secondaryAction:{icon:e=>(0,Hn().$)(e),text:o,ariaLabel:o,onClick:e.onClickLearnMore},customPrimaryButtonStyles:Wl})]})}const ql=function(e){const t=(0,l().IS)((t=>({style:{display:"flex",height:"100%",flexDirection:e.isReversed?"row-reverse":"row"},sidebarStyle:{height:"100%",background:t.cardSidebarBackground,flexGrow:0,flexShrink:0,width:240,overflowY:"auto"},childrenStyle:{flexGrow:1,position:"relative",zIndex:1,height:"100%",overflow:"hidden"}})),[e.isReversed]);return(0,ae.jsxs)("div",{style:t.style,onMouseDown:e.onMouseDown,onClick:e.onClick,onDoubleClick:e.onDoubleClick,onContextMenu:e.onContextMenu,tabIndex:-1,role:"presentation",children:[(0,ae.jsx)("div",{style:t.sidebarStyle,children:e.sidebar}),(0,ae.jsx)("div",{style:t.childrenStyle,role:e.contentRole,"aria-labelledby":e.contentLabelledBy,id:e.contentId,children:e.children})]})};var Fl=()=>s(233309),Nl=()=>s(976576),Gl=()=>s(951592),Kl=()=>s(727171),Vl=()=>s(362344),Hl=()=>s(53595),$l=()=>s(64562),Yl=()=>s(103949),Jl=()=>s(830820),Ql=()=>s(731942),Zl=()=>s(415385),Xl=()=>s(571713),ed=()=>s(164428);const td=640;function sd(e){let{data:t,loading:s,error:n,daysFilter:o,setDaysFilter:r}=e;const[d,c]=(0,Jl().z)(),u=(0,l().IS)((e=>({title:{fontWeight:S().Wy.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:1},titleText:{flexShrink:1},infoIcon:{marginLeft:4,flexShrink:0},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{pageViews:g,uniquePageViews:p,pagesCreated:m,pageEdits:h}=t,x=(0,a().v3)(),b=(0,i.useCallback)((e=>{Fl().Y5(x,{daysFilter:e}),r(e)}),[x,r]);return(0,ae.jsxs)("div",{style:u.container,ref:d,children:[(0,ae.jsxs)("div",{style:u.titleContainer,children:[(0,ae.jsxs)(be().A,{style:u.title,children:[(0,ae.jsx)("div",{style:u.titleText,children:(0,ae.jsx)(f().sA,{id:"workspaceAnalytics.content.contentEngagement.title",defaultMessage:"Content engagement"})}),(0,ae.jsx)(xe().A,{placement:ye().W.Bottom,render:e=>(0,ae.jsx)(Fs().A,{...e,href:(0,He().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:u.infoIcon}),renderTooltip:()=>"all_time"!==o?(0,ae.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all workspace pages (includes private and shared) over the {dateRange}",values:{dateRange:O().A.formatMessage(Kl().Yr[o])}}):(0,ae.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace (includes private and shared)"})})]}),(0,ae.jsx)(ed().Z,{currentFilter:o,onChangeFilter:b})]}),(0,ae.jsxs)(Ql().xA,{gap:16,children:[(0,ae.jsx)(Ql().LX,{row:1,col:1,children:(0,ae.jsx)(Xl().a,{style:u.cardContainer,textStyles:u.cardTextContainer,loading:s,error:n,icon:$l().d,iconStyles:{height:48,width:48},title:(0,ae.jsx)(f().sA,{id:"workspaceAnalytics.content.contentEngagement.totalViews",defaultMessage:"{pageViews} total views",values:{pageViews:(0,ae.jsx)(Zl()._,{abbreviateNumber:c<td,num:g})}}),byline:(0,ae.jsx)(be().A,{isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{id:"workspaceAnalytics.content.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,ae.jsx)(Zl()._,{abbreviateNumber:c<td,num:p})}})})})}),(0,ae.jsx)(Ql().LX,{row:1,col:2,children:(0,ae.jsx)(Xl().a,{style:u.cardContainer,textStyles:u.cardTextContainer,loading:s,error:n,icon:Yl().k,iconStyles:{height:36,width:36},title:(0,ae.jsx)(f().sA,{id:"workspaceAnalytics.content.contentEngagement.pagesCreated",defaultMessage:"{pagesCreated} pages created",values:{pagesCreated:(0,ae.jsx)(Zl()._,{abbreviateNumber:c<td,num:m})}}),byline:(0,ae.jsx)(be().A,{isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{id:"workspaceAnalytics.content.contentEngagement.pageEdits.byline",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,ae.jsx)(Zl()._,{abbreviateNumber:c<td,num:h})}})})})})]})]})}var id=()=>s(378219),nd=()=>s(715187),ad=()=>s(402633),od=()=>s(419809);const rd=(0,f().YK)({views:{id:"workspaceAnalytics.contentTab.contentTable.viewsColumn.tooltip",defaultMessage:"Number of times users have viewed the page"},uniqueViews:{id:"workspaceAnalytics.contentTab.contentTable.uniqueViewsColumn.tooltip",defaultMessage:"Total number of users that have viewed page in the selected period"}}),ld={id:"page",headerTitle:(0,ae.jsx)(Sd,{message:Kl().bo.page}),renderCell:e=>(0,ae.jsx)(s(462125).oc,{blockStore:e.navigableBlockStore,rightIcon:(0,ae.jsx)(s(580359).r,{blockStore:e.navigableBlockStore})}),widthData:{width:320,maxWidth:320},sortable:!1},dd={id:"location",headerTitle:(0,ae.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.allPages.table.location.name",defaultMessage:"Location"}),renderCell:e=>(0,ae.jsx)(s(22422).E,{blockStore:e.navigableBlockStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},cd={id:"audience",headerTitle:(0,ae.jsx)(Sd,{message:Kl().bo.audience}),renderCell:e=>(0,ae.jsx)(be().A,{children:(0,s(22377).Z)(e.audience)}),widthData:{width:140},sortable:!1},ud={id:"views",headerTitle:(0,ae.jsx)(od().Z,{tooltipMessageDescriptor:rd.views,columnHeader:Kl().bo.allViews}),renderCell:e=>(0,ae.jsx)(be().A,{children:e.views.toLocaleString()}),widthData:{width:100},sortable:!0},gd={id:"uniqueViews",headerTitle:(0,ae.jsx)(od().Z,{tooltipMessageDescriptor:rd.uniqueViews,columnHeader:Kl().bo.uniqueViews}),renderCell:e=>(0,ae.jsx)(be().A,{children:e.uniqueViews.toLocaleString()}),widthData:{width:100},sortable:!0},pd={id:"createdBy",headerTitle:(0,ae.jsx)(Sd,{message:Kl().bo.createdBy}),renderCell:e=>e.createdById?(0,ae.jsx)(ad().T,{blockStore:e.navigableBlockStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},md={id:"createdTime",headerTitle:(0,ae.jsx)(Sd,{message:Kl().bo.createdAt}),renderCell:e=>(0,ae.jsx)(ra().d,{dateTs:e.createdTime}),widthData:{width:100},sortable:!1},fd=[ld,ud,gd,dd,cd,{id:"lastEditedBy",headerTitle:(0,ae.jsx)(Sd,{message:Kl().bo.lastEditedBy}),renderCell:e=>e.lastEditedById?(0,ae.jsx)(ad().T,{blockStore:e.navigableBlockStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},{id:"lastEditedTime",headerTitle:(0,ae.jsx)(Sd,{message:Kl().bo.lastEditedAt}),renderCell:e=>(0,ae.jsx)(ra().d,{dateTs:e.lastEditedTime}),widthData:{width:100},sortable:!1},pd,md];function hd(e){let{navigableBlockStores:t,analyticsByPageId:s,runNewSearch:n,sort:a,setSort:o,loadNextPage:d,loading:c,error:u}=e;const g=(0,r().K8)((()=>t.map((e=>{var t,i,n;return{id:e.id,isClickable:!1,navigableBlockStore:e,teamStore:(0,id().Uo)(e),views:(null===(t=s.get(e.id))||void 0===t?void 0:t.pageViews)||0,uniqueViews:(null===(i=s.get(e.id))||void 0===i?void 0:i.uniquePageViews)||0,createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),audience:(null===(n=s.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[t,s]),p=(0,i.useMemo)((()=>function(e){const t=fd.find((t=>"pageViews"===e.field&&"views"===t.id||"uniquePageViews"===e.field&&"uniqueViews"===t.id)),s=t?{column:t,sortAscending:"asc"===e.direction}:void 0;return s}(a)),[a]),m=(0,l().IS)((e=>(0,he().rC)({columnRenderInfo:fd,theme:e,containerMarginTop:0})),[]),h=(0,l().IS)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return u?(0,ae.jsx)(nd().t,{error:u,runNewSearch:n}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(he().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:fd,rows:g,sortState:p,onSortStateChanged:e=>{o(function(e){const t="views"===e.column.id?"pageViews":"uniquePageViews",s=e.sortAscending?"asc":"desc";return{field:t,direction:s}}(e))},loadMoreMethod:{type:"scroll",onLoadMore:d},renderNoRowsComponent:()=>(0,ae.jsx)(be().A,{isSmall:!0,style:h.emptyQuery,children:!c&&0===t.length&&(0,ae.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.allPages.table.empty",defaultMessage:"No pages found with your query."})}),styles:m}),c?(0,ae.jsx)(fi().A,{style:h.loadingSpinner}):null]})}function Sd(e){let{message:t}=e;const s=(0,f().tz)();return(0,ae.jsx)(ae.Fragment,{children:s.formatMessage(t)})}var xd=()=>s(145017);const bd={query:"",createdBy:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[]},vd={field:"pageViews",direction:"desc"},yd=Nl().Jb,jd={filters:bd,sort:vd,timeRange:yd,navigableBlockIds:[],analyticsByPageId:new Map,numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};function Ad(e){let{spaceStore:t,teamStores:s,timeRange:i,filters:n,runNewSearch:a,setFilters:o,setTimeRange:d}=e;const c=(0,Ls().useTeamsFromCache)(t),u=(0,r().K8)((()=>s??c),[s,c]),g=(0,l().IS)((e=>({container:{width:"100%",margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItems:"center"},timeRangeContainer:{display:"flex",flexDirectionRow:"row",alignItems:"center",justifyContent:"center",gap:4,borderRight:`1px solid ${e.tableDividerColor}`,marginRight:12,paddingRight:6}})),[]);return(0,ae.jsxs)("div",{style:g.container,children:[(0,ae.jsx)(on().nv,{mode:on().Ke.OnChange,query:n.query,setQueryFilter:function(e){o({query:e},{runSearchAfter:!0})},placeholderText:O().A.formatMessage(on().Jj.titleOnlyPlaceholder)}),(0,ae.jsxs)("div",{style:g.filterPillsContainer,children:[(0,ae.jsxs)("div",{style:g.timeRangeContainer,children:[(0,ae.jsx)(be().A,{isSecondaryColor:!0,children:(0,ae.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.timeRange",defaultMessage:"Views from"})}),(0,ae.jsx)(ed().Z,{currentFilter:i,onChangeFilter:d})]}),(0,ae.jsx)(mn().j,{selectedTeamIds:n.teamIds,setSelectedTeamIds:function(e){o({teamIds:e})},onMenuClose:a,teamStores:u}),(0,ae.jsx)(ln().Q,{spaceStore:t,createdByFilterIds:n.createdBy,setCreatedByFilter:function(e){o({createdBy:e})},runNewSearch:a,includeGuests:!1}),(0,ae.jsx)(dn().Z,{lastEditedTime:n.lastEditedTime,createdTime:n.createdTime,setLastEditedTime:function(e){o({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){o({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}})]})]})}function Cd(e){var t;let{spaceStore:s,teamStores:n,contentEngagement:o}=e;const d=(0,Gl().ZC)(s.id),c=(0,i.useRef)(!1),{loadNextPage:u,navigableBlockStores:g,analyticsByPageId:p,runNewSearch:m,setFilters:f,setTimeRange:S,timeRange:x,filters:b,sort:v,setSort:y,loading:j,error:A}=function(e){let{spaceStore:t}=e;const s=(0,a().v3)(),[n,o]=(0,i.useState)(jd),r=(0,i.useRef)(bd),l=(0,i.useRef)(vd),d=(0,i.useRef)(yd),c=(0,i.useCallback)((async e=>{let{fetchFromFirstPage:i,ignoreSearchInputComparison:a}=e;const c=!h().n4(n.filters,r.current)||!h().n4(n.sort,l.current)||!h().n4(n.timeRange,d.current);if(!a&&!c)return;r.current=n.filters,l.current=n.sort,d.current=n.timeRange;let u=n.loading,g=n.error,p=n.hasNextPage,m=n.paginationToken;if(i&&(o((e=>({...jd,filters:e.filters,timeRange:e.timeRange,sort:e.sort}))),u=jd.loading,g=jd.error,p=jd.hasNextPage,m=jd.paginationToken),!p||u)return;if(g)return;o((e=>({...e,loading:!0})));const f=await U().callApi({eventName:"loadContentAnalytics",environment:s,data:{spaceId:t.id,sort:n.sort,titleQuery:n.filters.query,filters:{inTeams:n.filters.teamIds,lastEditedTime:(0,ne().ES)(n.filters.lastEditedTime),createdTime:(0,ne().ES)(n.filters.createdTime),createdBy:n.filters.createdBy},timeRange:n.timeRange,startCursor:m}});if("failed"===f.type)return void o((e=>({...e,loading:!1,error:f.error})));const S=f.data.results;o((e=>{const t=[],s=new Set(e.navigableBlockIds),i=new Map(e.analyticsByPageId);for(const a of S){const e=a.id,n=a.analytics;s.has(e)||(t.push(e),i.set(e,n))}const n=[...e.navigableBlockIds,...t];return{...e,navigableBlockIds:n,analyticsByPageId:i,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:f.data.nextCursor,hasNextPage:Boolean(f.data.nextCursor)}}))}),[s,t,n.filters,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken]),u=(0,i.useMemo)((()=>n.navigableBlockIds.map((e=>new(ie().Bv)(s,{id:e,table:xd().ev})))),[n.navigableBlockIds,s]);(0,i.useEffect)((()=>{n.shouldReRunSearch&&(o((e=>({...e,shouldReRunSearch:!1}))),c({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,c]);const g=(0,i.useCallback)((async()=>{n.shouldReRunSearch||await c({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,c]),p=(0,i.useCallback)((async e=>{await c({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[c]),m=(0,i.useCallback)(((e,t)=>{o((s=>({...s,filters:{...s.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})));for(const i of(0,Rs().uv)(e))h().n4(e[i],bd[i])||Fl().Tm(s,{filter:i,value:"createdBy"===i||"teamIds"===i?e[i]:void 0})}),[s]),f=(0,i.useCallback)((e=>{o((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),Fl().$s(s,{daysFilter:e})}),[s]),S=(0,i.useCallback)((e=>{o((t=>({...t,sort:e,shouldReRunSearch:!0}))),Fl().PH(s,{column:e.field,isAscending:"asc"===e.direction})}),[s]);return{filters:n.filters,sort:n.sort,timeRange:n.timeRange,analyticsByPageId:n.analyticsByPageId,loading:n.loading,error:n.error,navigableBlockStores:u,loadNextPage:g,runNewSearch:p,setFilters:m,setTimeRange:f,setSort:S}}({spaceStore:s}),C=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:16}})),[]),w=(0,r().K8)((()=>{const e=gt().default.checkGate({gateName:"allow_space_member_to_export_analytics"});return Boolean(s.canAdmin())||e&&s.canRead()}),[s]),M=(0,i.useMemo)((()=>void 0!==d&&s.id!==d),[s.id,d]);(0,i.useEffect)((()=>{c.current&&!M||(m(!0),c.current=!0)}),[m,M]);const T=(0,r().K8)((()=>s.getName()),[s]);if("NotFoundError"===(null==o||null===(t=o.error)||void 0===t?void 0:t.name))return(0,ae.jsx)(Hl().H,{type:"empty",spaceName:T});const k={...b,daysFilter:x,lastEditedTime:(0,ne().ES)(b.lastEditedTime),createdTime:(0,ne().ES)(b.createdTime)};return(0,ae.jsxs)("div",{style:C.container,children:[(0,ae.jsx)(sd,{data:o.data,loading:o.loading,error:o.error,daysFilter:o.daysFilter,setDaysFilter:o.setDaysFilter}),(0,ae.jsx)(wd,{canExport:w,filters:k}),(0,ae.jsx)(Ad,{spaceStore:s,teamStores:n,runNewSearch:m,setFilters:f,filters:b,timeRange:x,setTimeRange:S}),(0,ae.jsx)(hd,{navigableBlockStores:g,analyticsByPageId:p,runNewSearch:m,sort:v,setSort:y,loadNextPage:u,loading:j,error:A})]})}function wd(e){const t=(0,l().IS)((()=>({sectionTitle:{fontWeight:S().Wy.semibold,fontSize:16},sectionTitleSection:{display:"flex",flexFlow:"row",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:12},exportButton:{marginLeft:5}})),[]),{canExport:s,filters:i}=e,{daysFilter:n}=i,a=(0,ae.jsxs)("div",{style:t.sectionTitleSection,children:[(0,ae.jsx)(be().A,{style:t.sectionTitle,children:(0,ae.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.allPages.title",defaultMessage:"Pages"})}),(0,ae.jsx)(xe().A,{placement:ye().W.Bottom,render:e=>(0,ae.jsx)(Fs().A,{...e,href:(0,He().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:t.helpInfo}),renderTooltip:()=>"all_time"!==n?(0,ae.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.lastDays",defaultMessage:"Activity from the {dateRange} on pages you have access to",values:{dateRange:O().A.formatMessage(Kl().Yr[n])}}):(0,ae.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.allTime",defaultMessage:"All time activity on pages you have access to in the workspace"})})]});return(0,ae.jsxs)("div",{style:t.wrapper,children:[a,s&&(0,ae.jsx)(Vl().L,{style:t.exportButton,analyticsType:St().e.Content,filters:i})]})}var Md=()=>s(949712),Td=()=>s(83788),kd=()=>s(182212);const Id=640;function Dd(e){let{data:t,loading:s,error:n,daysFilter:o,setDaysFilter:d}=e;const c=(0,a().v3)(),{organizationOwnerRecordCache:u}=(0,i.useContext)(oo().N),g=(0,l().IS)((e=>({title:{fontWeight:S().Wy.medium,fontSize:16,marginBlock:"9px 4px",display:"flex",alignItems:"center",overflow:"hidden"},titleText:{...S().RC,flexShrink:1},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},overviewCard:{width:"fit-content"}})),[]),[p,m]=(0,Jl().z)(),{pageViews:h,uniquePageViews:x,pageEdits:b,topPages:v}=t,y=(0,r().K8)((()=>v.map((e=>{let{pageId:t,pageViews:s}=e;return{store:new(ie().Bv)(c,{id:t,table:xd().ev},{inMemoryRecordCache:u}),caption:(0,ae.jsx)(f().sA,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,ae.jsx)(Zl()._,{abbreviateNumber:!1,num:s})}})}}))),[c,v,u]),j=(0,i.useCallback)((e=>{d(e),Fl().n_(c,{filter:"content_engagement",daysFilter:e})}),[c,d]);return(0,ae.jsxs)("div",{style:g.container,ref:p,children:[(0,ae.jsxs)("div",{style:g.titleContainer,children:[(0,ae.jsxs)(be().A,{style:g.title,children:[(0,ae.jsx)("div",{style:g.titleText,children:(0,ae.jsx)(f().sA,{id:"workspaceAnalytics.overview.contentEngagement.title",defaultMessage:"Content engagement"})}),(0,ae.jsx)(xe().A,{placement:ye().W.Bottom,render:e=>(0,ae.jsx)(Fs().A,{...e,href:(0,He().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:g.helpInfo}),renderTooltip:()=>"all_time"!==o?(0,ae.jsx)(f().sA,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all pages in the workspace over the {dateRange}",values:{dateRange:O().A.formatMessage(Kl().Yr[o])}}):(0,ae.jsx)(f().sA,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace"})})]}),(0,ae.jsx)(ed().Z,{currentFilter:o,onChangeFilter:j})]}),(0,ae.jsxs)(Ql().xA,{gap:16,children:[(0,ae.jsx)(Ql().LX,{row:1,col:1,colEnd:3,children:(0,ae.jsx)(Xl().a,{loading:s,error:n,icon:$l().d,textStyles:g.overviewCard,title:(0,ae.jsx)(f().sA,{id:"workspaceAnalytics.overview.contentEngagement.views",defaultMessage:"{pageViews} total views",values:{pageViews:(0,ae.jsx)(Zl()._,{abbreviateNumber:m<Id,num:h})}})})}),(0,ae.jsx)(Ql().LX,{row:2,col:1,colEnd:3,children:(0,ae.jsx)(Xl().a,{loading:s,error:n,icon:Td().h,textStyles:g.overviewCard,iconStyles:{height:18,width:18},title:(0,ae.jsx)(f().sA,{id:"workspaceAnalytics.overview.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,ae.jsx)(Zl()._,{abbreviateNumber:m<Id,num:x})}})})}),(0,ae.jsx)(Ql().LX,{row:3,col:1,colEnd:3,children:(0,ae.jsx)(Xl().a,{loading:s,error:n,icon:Md().j,textStyles:g.overviewCard,iconStyles:{height:18,width:18},title:(0,ae.jsx)(f().sA,{id:"workspaceAnalytics.overview.contentEngagement.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,ae.jsx)(Zl()._,{abbreviateNumber:m<Id,num:b})}})})}),(0,ae.jsx)(Ql().LX,{row:1,rowEnd:4,col:3,colEnd:5,children:(0,ae.jsx)(kd().N,{loading:s,error:n,title:(0,ae.jsx)(f().sA,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",defaultMessage:"Most popular pages"}),items:y})})]})]})}var Pd=()=>s(338951);function Rd(e){var t,s;let{onUserTabFilterChange:i,spaceStore:n,contentEngagement:a,userEngagement:o}=e;const d=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:24}})),[]),c=(0,r().K8)((()=>n.getName()),[n]);if("NotFoundError"===(null===(t=a.error)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(s=o.error)||void 0===s?void 0:s.name))return(0,ae.jsx)(Hl().H,{type:"empty",spaceName:c});return(0,ae.jsxs)("div",{style:d.container,children:[(0,ae.jsx)(Pd().R,{data:o.data,loading:o.loading,error:o.error,daysFilter:o.daysFilter,setDaysFilter:function(e){i({graphFilter:"all_time"===e?"last_90_days":e}),o.setDaysFilter(e)}}),(0,ae.jsx)(Dd,{data:a.data,loading:a.loading,error:a.error,daysFilter:a.daysFilter,setDaysFilter:a.setDaysFilter})]})}var _d=()=>s(456487),Bd=()=>s(402918);const Ed={[St().e.Overview]:(0,ae.jsx)(f().sA,{id:"workspaceAnalyticsTabs.overview.title",defaultMessage:"Overview"}),[St().e.Users]:(0,ae.jsx)(f().sA,{id:"workspaceAnalyticsTabs.members.title",defaultMessage:"Members"}),[St().e.Content]:(0,ae.jsx)(f().sA,{id:"workspaceAnalyticsTabs.content.title",defaultMessage:"Content"}),[St().e.Search]:(0,ae.jsx)(f().sA,{id:"workspaceAnalyticsTabs.search.title",defaultMessage:"Search"})};function Ud(e){const{currentTab:t,spaceAnalyticsStoreState:s,onUserTabFilterChange:i,spaceStore:n}=e;switch(t){case St().e.Content:return(0,ae.jsx)(Cd,{spaceStore:n,contentEngagement:e.contentEngagementData});case St().e.Users:return(0,ae.jsx)(Bd().A,{spaceStore:n,usersTabData:s.usersTabData,onUserTabFilterChange:i,userEngagement:e.userEngagementData});case St().e.Overview:return(0,ae.jsx)(Rd,{contentEngagement:e.contentEngagementData,userEngagement:e.userEngagementData,spaceStore:n,onUserTabFilterChange:i});case St().e.Search:return(0,ae.jsx)(_d().A,{spaceStore:n});default:(0,Rs().HB)(t)}}const Ld=function(e){let{spaceStore:t}=e;const n=(0,l().IS)((e=>({headingStyle:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:S().Wy.medium,display:"flex",justifyContent:"space-between"},title:{display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},tabsStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14}})),[]),o=(0,a().v3)(),d=(0,r().K8)((()=>{var e;return null===(e=lt().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),c=(0,s(608733).M)({spaceId:t.id}),u=(0,s(203041)._)({spaceStore:t,userId:d}),[g,p]=(0,r().$y)(St().A),m=(0,r().K8)((()=>Boolean(null==t?void 0:t.getSettings().disable_page_analytics)),[t]),h=(0,r().K8)((()=>null==t?void 0:t.getName()),[t]),x=(0,i.useCallback)((async e=>{await Nl().OJ({environment:o,spaceStore:t,currentTab:g.currentTab,currentSpaceId:g.currentSpaceId,usersTabData:g.usersTabData,setState:p,graphFilter:e.graphFilter,tableFilter:e.tableFilter})}),[o,t,g,p]),b=(0,i.useCallback)((e=>{Fl().Wt(o,{tab:e}),p({...g,currentTab:e})}),[p,g,o]),v=(0,r().K8)((()=>{const e=[];return function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(St().e.Overview),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(St().e.Users),e.push(St().e.Content),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(St().e.Search),e}),[t]),y=(0,r().K8)((()=>v.length>1),[v]),j=g.currentTab||v[0];(0,i.useEffect)((()=>{!async function(){const e=t.id;e&&St().A.shouldRefreshState(e)&&(j===St().e.Users?await x({graphFilter:"last_90_days",tableFilter:"last_90_days"}):j===St().e.Content||j===St().e.Overview||j===St().e.Search||(0,Rs().HB)(j))}()}));const A=(0,i.useCallback)((()=>{C().f({environment:o,url:(0,He().xS)("guides.workspaceAnalytics")})}),[o]),w=v.map((e=>Ed[e])),M=m?(0,ae.jsx)(Hl().H,{type:"disabled",spaceName:h}):(0,ae.jsxs)(ae.Fragment,{children:[y&&(0,ae.jsx)(Ai().Ay,{tabs:w,selectedIndex:v.indexOf(j),onChange:e=>{b(v[e])},style:n.tabsStyle}),Ud({currentTab:j,spaceAnalyticsStoreState:g,onUserTabFilterChange:x,spaceStore:t,contentEngagementData:c,userEngagementData:u})]});return(0,ae.jsxs)(Gt().Ay,{children:[(0,ae.jsxs)(ge().A,{large:!0,style:n.headingStyle,children:[(0,ae.jsxs)("div",{style:n.title,children:[(0,ae.jsx)(f().sA,{id:"settings.workspaceAnalytics.title",defaultMessage:"Workspace analytics"}),(0,ae.jsx)(xe().A,{placement:ye().W.Right,render:e=>(0,ae.jsx)(Fs().A,{...e,href:(0,He().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:n.helpInfo}),renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"settings.workspaceAnalytics.dataDisclaimerTooltip",defaultMessage:"Data available from the start date of your Enterprise Plan"})})]}),(0,ae.jsx)(_t().A,{size:"sm",onClick:A,icon:Hn().$,children:(0,ae.jsx)(f().sA,{id:"workspaceAnalytics.title.helpButton",defaultMessage:"Learn more"})})]}),(0,Gt().J_)(),M]})};var Od=()=>s(655656),Wd=()=>s(663539),zd=()=>s(965694),qd=()=>s(965913),Fd=()=>s(695951);function Nd(e,t){xs().vd(e,"change_email",t)}var Gd=()=>s(739425);let Kd=function(e){return e.Password="Password",e.CurrentEmail="TemporaryPasscode",e}({});class Vd extends q().default{getInitialState(){return{open:!1,authorized:!1,authorizationType:void 0}}}const Hd=Vd;var $d=()=>s(635934);const Yd={modal:{width:460,padding:32,borderRadius:4,fontSize:14},loadingSpinner:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},paragraph:{marginTop:12,marginBottom:14},error:{color:pa().Ay.red,fontSize:12,marginTop:4,marginLeft:8},bold:{fontWeight:S().Wy.bold},input:{padding:"4px 8px"},button:{marginTop:14,width:"100%"},educationPlanWarning:{display:"flex",marginTop:14,paddingTop:14},claimedEmailDomainWarning:{marginTop:14,marginBottom:14}},Jd=(0,f().YK)({dialogLabel:{id:"profileSettings.accountSecuritySection.emailSetting.dialogLabel",defaultMessage:"Change email"}});const Qd=function(e){let{userValue:t,hasEducationPlan:s,areProfileEditsDisabled:n}=e;const a=(0,f().tz)(),o=(0,r().uB)(void 0,Hd),l=(0,i.useCallback)((()=>(0,ae.jsx)(Sc,{userValue:t,hasEducationPlan:s,emailChangeStore:o})),[t,s,o]),d=(0,i.useCallback)((()=>nc(o)),[o]),c=(0,r().K8)((()=>o.state.open),[o]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ei().A,{type:"custom",isMobile:!1,title:(0,ae.jsx)(f().sA,{id:"profileSettings.accountSecuritySection.emailSetting.label",defaultMessage:"Email"}),caption:t&&t.email,customButton:(0,ae.jsx)(rc,{userValue:t,areProfileEditsDisabled:n,emailChangeStore:o})}),(0,ae.jsx)(Si().a,{ariaLabel:a.formatMessage(Jd.dialogLabel),open:c,onDismiss:d,render:l})]})};function Zd(e){let{userValue:t}=e;return t?(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.currentEmail",defaultMessage:"Your current email is {currentEmail}.",values:{currentEmail:(0,ae.jsx)("span",{style:Yd.bold,children:t&&t.email})}}):null}function Xd(e){let{state:t}=e;return(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,style:Yd.claimedEmailDomainWarning,children:(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.claimedEmailDomainWarning",defaultMessage:"The email domain {newEmailDomain} has been claimed by an organization. If you continue with changing this email address, any workspaces created by this account can be managed by the organization. See <domainclaimlink>this page</domainclaimlink> for more info.",values:{newEmailDomain:(0,$r().zN)(t.newEmail)??t.newEmail,domainclaimlink:e=>(0,ae.jsx)(yi().A,{href:(0,He().xS)("guides.domainManagement"),external:!0,children:e})}})})}function ec(e){return{modal:{background:e.contentBackground},educationPlanWarning:{color:e.text.tertiary,borderTop:`1px solid ${e.regularDividerColor}`}}}function tc(e){let{hasEducationPlan:t}=e;const s=(0,l().DP)(),i=(0,a().v3)();return t?(0,ae.jsxs)("div",{style:{...Yd.educationPlanWarning,...ec(s).educationPlanWarning},children:[(0,Hn().$)({width:14,marginTop:4,marginRight:6,fill:s.lightIconColor})," ",(0,ae.jsx)("div",{children:(0,ae.jsx)(f().sA,{defaultMessage:"Changing your email may downgrade your workspace on a Free Education Plan to the basic Free Plan. You won't lose any data, but you'll need to upgrade to re-access paid features. Have questions about this? <sendmessagelink>Message support</sendmessagelink>.",id:"emailChangeSettings.downgradeEducationPlan.warning.message",values:{sendmessagelink:e=>(0,ae.jsx)(yi().A,{onClick:()=>function(e){Bo().SI({environment:e,from:"change_email_student"})}(i),children:e})}})})]}):null}function sc(e,t,s){if(e)return e.email;s.setState({open:s.state.open,authorized:!1,authorizationType:void 0,error:t.formatMessage({id:"profileSettings.changeEmailModal.errorNoUserValue",defaultMessage:"User value is undefined."})})}async function ic(e,t,s){if(!s.state.authorized)return;const i=(0,$r().zN)(s.state.newEmail);s.setState({...s.state,loading:!0});const[n,a]=await Promise.all([await U().callApi({eventName:"sendEmailVerification",environment:e,data:{email:s.state.newEmail}}),i?await U().callApi({eventName:"getVerifiedEmailDomain",environment:e,data:{emailDomain:i}}):void 0]);if("success"===n.type){const e=(0,Rs().O9)(a)&&"failed"===a.type?(0,L().Hu)(t,a):void 0;s.setState({...s.state,newEmailPasscodeSent:!0,newEmailPasscode:"",error:e,loading:!1,newEmailContainsVerifiedDomain:(0,Rs().O9)(a)&&"success"===a.type&&void 0!==a.data.id})}else s.setState({...s.state,loading:!1,error:(0,L().Hu)(t,n)})}function nc(e){e.reset()}async function ac(e,t,s,i){if(!i.state.authorized)if(i.state.authorizationType===Kd.Password){if(!sc(t,s,i))return;i.setState({...i.state,loading:!0});const n=await U().callApi({eventName:"authVerifyPassword",environment:e,data:{password:i.state.password}});if("failed"===n.type)return void i.setState({...i.state,loading:!1,error:(0,L().Hu)(s,n)});i.setState({...i.state,authorized:!0,newEmail:"",newEmailPasscode:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0,loading:!1})}else i.state.authorizationType===Kd.CurrentEmail&&i.setState({...i.state,authorized:!0,newEmail:"",newEmailPasscode:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0,loading:!1})}async function oc(e,t,s,i){if(!i.state.authorized)return;const n=i.state.authorizationType===Kd.Password?{type:"Password",password:i.state.password,newEmail:i.state.newEmail,newEmailPasscode:i.state.newEmailPasscode}:{type:"CurrentEmail",currentEmailPasscode:i.state.currentEmailPasscode,newEmail:i.state.newEmail,newEmailPasscode:i.state.newEmailPasscode};i.setState({...i.state,loading:!0});const a=await U().callApi({eventName:"changeEmail",environment:e,data:n});if("success"===a.type){Nd(e,{new_email:i.state.newEmail,error:void 0});const s=lt().default.state.currentSpaceStore;t&&s&&await Ct().o2({spaceStore:s,environment:e}),nc(i)}else{const t=(0,L().Hu)(s,a);Nd(e,{new_email:i.state.newEmail,error:t}),i.setState({...i.state,loading:!1,error:t})}}function rc(e){let{userValue:t,areProfileEditsDisabled:s,emailChangeStore:n}=e;const a=(0,i.useCallback)((()=>function(e){e.setState({open:!0,authorized:!1,authorizationType:void 0})}(n)),[n]),o=(0,ae.jsx)(_t().A,{size:"lg",onClick:s?()=>{}:a,disabled:s,disabledFeedback:s,children:(0,ae.jsx)(f().sA,{id:"profileSettings.accountSecuritySection.emailSetting.changeEmailButton.label",defaultMessage:"Change email"})});return s?(0,ae.jsx)(xe().A,{renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:t?(0,$r().zN)(t.email):""}}),placement:ye().W.Bottom,alignment:ye().C.Center,render:e=>(0,ae.jsx)("div",{...e,children:o})}):o}function lc(e){let{state:t,userValue:s,emailChangeStore:n}=e;const o=(0,a().v3)(),r=(0,f().tz)(),l=(0,i.useCallback)((()=>ac(o,s,r,n)),[o,s,r,n]),d=(0,i.useCallback)((()=>function(e){e.setState({open:!0,authorized:!1,authorizationType:Kd.Password,password:""})}(n)),[n]),c=(0,i.useCallback)((e=>function(e,t){t.setState({open:!0,authorized:!1,authorizationType:Kd.Password,password:e.currentTarget.value,error:void 0})}(e,n)),[n]);return s?(0,ae.jsxs)(i.Fragment,{children:[(0,ae.jsx)("p",{style:{margin:0},children:(0,ae.jsx)(Zd,{userValue:s})}),(0,ae.jsx)("p",{style:Yd.paragraph,children:(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.enterPasswordInstructions",defaultMessage:"Please enter your password."})}),(0,ae.jsx)(Ys().A,{style:{display:"none"},type:"text",value:s.email,autoComplete:"username",disabled:!0}),(0,ae.jsx)(Ys().A,{type:"password",disabled:t.authorized,value:t.password,onChange:c,showClearButton:!0,onClearButtonClick:d,onSubmit:l,placeholder:r.formatMessage({id:"profileSettings.changeEmailModal.passwordInput.label",defaultMessage:"Password"}),style:Yd.input,focusInitial:!0,autoComplete:"current-password"}),!t.authorized&&t.error&&(0,ae.jsx)("div",{style:Yd.error,children:t.error}),!t.authorized&&(0,ae.jsx)(qs().A,{size:"lg",style:Yd.button,onClick:l,disabled:t.loading,children:t.loading?(0,ae.jsx)(fi().A,{}):(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.continueButton.label",defaultMessage:"Continue"})})]}):null}function dc(e){let{userValue:t,emailChangeStore:s}=e;const n=(0,a().v3)(),o=(0,f().tz)(),l=(0,i.useCallback)((()=>async function(e,t,s,i){if(!t)return;i.setState({...i.state,loading:!0});const n=await U().callApi({eventName:"sendEmailVerification",environment:e,data:{email:t.email}});"success"===n.type?i.setState({...i.state,currentEmailPasscodeSent:!0,currentEmailPasscode:"",error:void 0,loading:!1}):i.setState({...i.state,currentEmailPasscodeSent:!0,loading:!1,error:(0,L().Hu)(s,n)})}(n,t,o,s)),[n,t,o,s]),d=(0,r().K8)((()=>s.state.loading),[s]);return(0,ae.jsx)(qs().A,{size:"lg",onClick:l,disabled:d,children:d?(0,ae.jsx)(fi().A,{}):(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.sendCurrentEmailVerificationCode.label",defaultMessage:"Send verification code"})})}function cc(e){let{state:t,userValue:s,emailChangeStore:n}=e;const o=(0,a().v3)(),r=(0,f().tz)(),l=(0,i.useCallback)((()=>ac(o,s,r,n)),[o,s,r,n]),d=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,currentEmailPasscode:e.currentTarget.value,error:void 0})}(e,n)),[n]);return(0,ae.jsxs)(i.Fragment,{children:[(0,ae.jsx)(Ys().A,{value:t.currentEmailPasscode,onChange:d,onSubmit:l,placeholder:r.formatMessage({id:"profileSettings.changeEmailModal.enterCurrentEmailVerificationCodeInput.placeholder",defaultMessage:"Enter verification code"}),focusInitial:!0,style:Yd.input}),!t.authorized&&(0,ae.jsx)(qs().A,{size:"lg",style:Yd.button,onClick:l,disabled:t.loading,children:t.loading?(0,ae.jsx)(fi().A,{}):(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.continueButton.label",defaultMessage:"Continue"})})]})}function uc(e){let{emailChangeStore:t}=e;const s=(0,a().v3)(),n=(0,f().tz)(),o=(0,i.useCallback)((()=>function(e){e.setState({...e.state,newEmail:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0})}(t)),[t]),l=(0,i.useCallback)((()=>ic(s,n,t)),[s,n,t]),d=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,newEmail:e.currentTarget.value,error:void 0})}(e,t)),[t]),c=(0,r().O$)(t);return c.authorized?(0,ae.jsx)(Ys().A,{value:c.newEmail,onChange:d,onSubmit:l,showClearButton:!0,onClearButtonClick:o,placeholder:n.formatMessage({id:"profileSettings.changeEmailModal.newEmailInput.placeholder",defaultMessage:"Enter new email"}),style:Yd.input,focusInitial:!0}):null}function gc(e){let{state:t,emailChangeStore:s}=e;const n=(0,a().v3)(),o=(0,f().tz)(),r=(0,i.useCallback)((()=>ic(n,o,s)),[n,o,s]);return(0,ae.jsxs)(i.Fragment,{children:[t.error&&(0,ae.jsx)("div",{style:Yd.error,children:t.error}),(0,ae.jsx)(qs().A,{size:"lg",style:Yd.button,onClick:r,disabled:t.loading,children:t.loading?(0,ae.jsx)(fi().A,{}):(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.sendVerificationCodeButton.label",defaultMessage:"Send verification code"})})]})}function pc(e){let{state:t,userValue:s,emailChangeStore:n}=e;return(0,ae.jsxs)(i.Fragment,{children:[(0,ae.jsxs)("p",{style:{...Yd.paragraph,marginTop:0},children:[(0,ae.jsx)(Zd,{userValue:s})," ",t.currentEmailPasscodeSent?(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.sentVerificationCodeToCurrentEmail",defaultMessage:"We've sent a temporary verification code to this email."}):(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.sendVerificationCodeToCurrentEmail",defaultMessage:"We'll send a temporary verification code to this email."})]}),t.currentEmailPasscodeSent?(0,ae.jsx)(cc,{userValue:s,emailChangeStore:n,state:t}):(0,ae.jsx)(dc,{userValue:s,emailChangeStore:n})]})}function mc(e,t,s,i,n){if(!n.state.authorized)return()=>{};if(n.state.newEmailContainsVerifiedDomain&&(0,$r().zN)(n.state.newEmail)!==(0,$r().zN)((null==t?void 0:t.email)||"")){const t=n.state.newEmail;return async()=>{const a=await function(e){return j().Gh({mode:"wide",message:(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.confirmationModal.title",defaultMessage:"Change your email?"}),description:(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.confirmationModal.description",defaultMessage:"If you continue changing this email address to this domain, any workspaces created by this account can be managed by the organization.",values:{verifiedDomain:(0,$r().zN)(e)}}),acceptLabel:(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.confirmationModal.acceptButton.label",defaultMessage:"Change email"}),cancelLabel:(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.confirmationModal.cancelButton.label",defaultMessage:"Go back"})}).then((e=>e.accept))}(t);a&&await oc(e,s,i,n)}}return()=>oc(e,s,i,n)}function fc(e){let{state:t,userValue:s,hasEducationPlan:n,store:o}=e;const l=(0,a().v3)(),d=(0,f().tz)(),c=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,newEmailPasscode:e.currentTarget.value,error:void 0})}(e,o)),[o]),u=(0,r().K8)((()=>mc(l,s,n,d,o)),[l,s,n,d,o]);return(0,ae.jsxs)(i.Fragment,{children:[(0,ae.jsx)("p",{style:Yd.paragraph,children:(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.verificationCodeSentMessage",defaultMessage:"We just sent you a temporary verification code to {newEmail}.",values:{newEmail:(0,ae.jsx)("span",{style:Yd.bold,children:t.newEmail})}})}),(0,ae.jsx)(Ys().A,{value:t.newEmailPasscode,onChange:c,onSubmit:u,placeholder:d.formatMessage({id:"profileSettings.changeEmailModal.enterVerificationCodeInput.placeholder",defaultMessage:"Enter verification code"}),focusInitial:!0,style:Yd.input}),t.error&&(0,ae.jsx)("div",{style:Yd.error,children:t.error}),(0,ae.jsx)(qs().A,{size:"lg",style:Yd.button,onClick:u,disabled:t.loading,children:t.loading?(0,ae.jsx)(fi().A,{}):(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.changeEmailButton.label",defaultMessage:"Change email"})})]})}function hc(e){let{state:t,userValue:s,hasEducationPlan:n,emailChangeStore:a}=e;const o=(0,r().O$)(a);if(!o.authorized)return null;const{newEmail:l,newEmailContainsVerifiedDomain:d,newEmailPasscodeSent:c}=o;return(0,ae.jsxs)(i.Fragment,{children:[(0,ae.jsx)("p",{style:Yd.paragraph,children:(0,ae.jsx)(f().sA,{id:"profileSettings.changeEmailModal.newEmailInstructions",defaultMessage:"Please enter a new email and we will send you a verification code."})}),(0,ae.jsx)("div",{children:(0,ae.jsx)(uc,{emailChangeStore:a})}),d&&(0,$r().zN)(l)!==(0,$r().zN)((null==s?void 0:s.email)||"")&&(0,ae.jsx)(Xd,{state:t}),c?(0,ae.jsx)(fc,{userValue:s,hasEducationPlan:n,store:a,state:t}):(0,ae.jsx)(gc,{emailChangeStore:a,state:t}),(0,ae.jsx)(tc,{hasEducationPlan:n})]})}function Sc(e){let{userValue:t,hasEducationPlan:s,emailChangeStore:n}=e;const o=(0,f().tz)(),d=(0,l().DP)(),c=(0,a().v3)(),u=(0,i.useCallback)((()=>async function(e,t,s,i){const n=sc(s,t,i);if(!n)return;const a=await Gd().V({environment:e,userEmail:n});a.error?i.setState({open:i.state.open,authorized:!1,authorizationType:void 0,error:t.formatMessage({id:"profileSettings.changeEmailModal.errorFetchingAccountData",defaultMessage:"Could not fetch account information for {currentEmail}."},{currentEmail:n})}):a.value.isSamlEnforced||!a.value.hasPassword?i.setState({open:!0,authorized:!1,authorizationType:Kd.CurrentEmail,currentEmailPasscodeSent:!1,currentEmailPasscode:""}):i.setState({open:!0,authorized:!1,authorizationType:Kd.Password,password:""})}(c,o,t,n)),[c,o,t,n]),g=(0,r().O$)(n);return(0,ae.jsx)("div",{style:{...Yd.modal,...ec(d).modal},children:(0,ae.jsx)($d().A,{fetch:u,loading:e=>e?(0,ae.jsx)("div",{style:Yd.loadingSpinner,children:(0,ae.jsx)(fi().A,{})}):null,render:()=>(0,ae.jsxs)(i.Fragment,{children:[g.authorizationType===Kd.Password?(0,ae.jsx)(lc,{userValue:t,emailChangeStore:n,state:g}):g.authorizationType===Kd.CurrentEmail?(0,ae.jsx)(pc,{userValue:t,emailChangeStore:n,state:g}):void 0,g.authorized&&(0,ae.jsx)(hc,{userValue:t,hasEducationPlan:s,emailChangeStore:n,state:g})]})})})}var xc=()=>s(175532),bc=()=>s(898941),vc=()=>s(259849);const yc=(0,Mt().wt)("cellPhone",{viewBox:"0 0 12 18",svg:(0,ae.jsx)("path",{d:"M2.938 17.398c-.672 0-1.217-.197-1.633-.593-.412-.39-.617-.912-.617-1.563V2.461c0-.646.205-1.167.617-1.563.416-.395.96-.593 1.633-.593h6.148c.667 0 1.2.198 1.601.593.407.396.61.917.61 1.563v12.781c0 .646-.203 1.167-.61 1.563-.4.396-.934.593-1.601.593H2.937zm.265-1.578h5.594c.307 0 .544-.08.71-.242.173-.161.259-.39.259-.687V2.812c0-.291-.086-.518-.258-.68-.167-.166-.404-.25-.711-.25H3.203c-.312 0-.555.082-.726.243-.167.161-.25.39-.25.688V14.89c0 .296.083.526.25.687.171.162.414.242.726.242zm1.11-.61a.398.398 0 01-.282-.108.368.368 0 01-.117-.282c0-.12.04-.216.117-.289a.398.398 0 01.282-.11h3.375a.38.38 0 01.28.11c.074.073.11.17.11.29a.38.38 0 01-.11.28.38.38 0 01-.28.11H4.313zm.703-11.546a.583.583 0 01-.43-.172.583.583 0 01-.172-.43.57.57 0 01.172-.421.57.57 0 01.43-.18h1.96a.56.56 0 01.422.18c.12.114.18.255.18.421a.583.583 0 01-.172.43.583.583 0 01-.43.172h-1.96z"})});(0,Mt().wt)("exitDoor",{viewBox:"0 0 20 20",svg:(0,ae.jsx)("path",{d:"M4.121 17.468q-1.1 0-1.661-.568-.56-.567-.56-1.674V4.91q0-1.101.56-1.668.56-.574 1.661-.574h7.28q1.101 0 1.662.574.56.567.56 1.668v3.2h-1.34V4.998q0-.479-.246-.731-.246-.26-.745-.26H4.237q-.498 0-.745.26-.246.252-.246.731v10.145q0 .472.246.724.247.253.745.253h7.055q.5 0 .745-.253.246-.252.246-.724V12.02h1.34v3.206q0 1.107-.56 1.674-.561.568-1.662.568zm4.41-6.775a.6.6 0 0 1-.438-.184.6.6 0 0 1-.185-.444q0-.26.185-.445a.59.59 0 0 1 .437-.191h6.884l1.019.054-.506-.423-1.012-.964a.54.54 0 0 1-.191-.431q0-.233.15-.396a.51.51 0 0 1 .396-.165.55.55 0 0 1 .404.185l2.215 2.297a.7.7 0 0 1 .164.24.62.62 0 0 1 0 .478.8.8 0 0 1-.164.239l-2.215 2.297a.56.56 0 0 1-.403.178.51.51 0 0 1-.397-.165.6.6 0 0 1-.15-.403q0-.253.191-.424l1.012-.957.506-.424-1.019.048H8.53Z"})});var jc=()=>s(352841),Ac=()=>s(628824),Cc=()=>s(681069);class wc extends q().default{getInitialState(){return{open:!1,singleDeviceLogout:!1,deviceName:void 0}}}const Mc=new wc;const Tc=new(s(967203).U)((e=>{let{userId:t,paginationInfo:s}=e;return`getUserDevices/${t}/limit=${null==s?void 0:s.limit}`}),(async(e,t)=>{let{paginationInfo:i}=t;const n=await Promise.resolve().then(s.bind(s,818369)),a=await n.callApi({eventName:"getUserDevices",environment:e,data:{paginationInfo:i}});if("success"===a.type)return a.data}));wr().exposeDebugValue("DevicesStore",Tc);const kc=Tc;class Ic extends q().default{getInitialState(){return{deviceListLoadingState:"init",nextCursor:void 0,currentDevice:void 0,allDevices:[],viewDevices:[],sortColumn:void 0,sortAscending:!1}}async fetchDevices(e,t){this.setState({...this.state,deviceListLoadingState:"loading",sortColumn:void 0});const s=await kc.awaitData(e,t);var i,n;s&&s.devices&&s.currentDevice&&(this.setDevices(s.devices),this.setCurrentDevice(s.currentDevice),this.setNextCursor(null===(i=s.devices[s.devices.length-1])||void 0===i?void 0:i.id));s&&s.devices&&!s.currentDevice&&(this.setDevices(s.devices),this.setNextCursor(null===(n=s.devices[s.devices.length-1])||void 0===n?void 0:n.id));void 0!==s?this.setViewDevices():this.setState({...this.state,deviceListLoadingState:"error"})}setCurrentDevice(e){this.setState({...this.state,currentDevice:e})}setViewDevices(){var e;let t=this.state.allDevices.slice(0,3);const s=t.findIndex((e=>{var t;return e.id===(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}));-1===s&&this.state.currentDevice?t=[this.state.currentDevice,...t.slice(0,2)]:s>0&&(t=[t[s],...t.slice(0,s),...t.slice(s+1)]);const i=null===(e=this.state.allDevices[t.length-1])||void 0===e?void 0:e.id;this.setNextCursor(i),this.setState({...this.state,deviceListLoadingState:"loaded",viewDevices:t})}setDevices(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return void this.setState({...this.state,allDevices:e,viewDevices:e.slice(0,3)});let t=e;this.state.currentDevice&&(t=[this.state.currentDevice,...e.filter((e=>{var t;return e.id!==(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}))]),this.setState({...this.state,allDevices:e,viewDevices:t})}setSorting(e,t){switch(this.setState({...this.state,sortColumn:e,sortAscending:t}),e){case"device-name":this.sortDevicesByName();break;case"last-seen-time":this.sortDevicesByLastSeenTime();break;case"last-login-geographic-location":this.sortDevicesByLocation()}}sortDevicesByLastSeenTime(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),s=h().My(t,(e=>e.last_seen_time??e.last_login_at),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...s]:s})}sortDevicesByName(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),s=h().My(t,(e=>e.device_name.toLowerCase()),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...s]:s})}sortDevicesByLocation(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),s=h().My(t,(e=>{var t;return(null===(t=e.last_login_geographic_location)||void 0===t?void 0:t.toLowerCase())||"unknown"}),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...s]:s})}setNextCursor(e){this.setState({...this.state,nextCursor:e})}loadMoreDevices(){var e;if(void 0===this.state.nextCursor)return;const t=this.state.allDevices.slice(0,3),s=this.state.allDevices.slice(t.length);let i=[...t,...s];this.state.currentDevice&&(i=[this.state.currentDevice,...i.filter((e=>{var t;return e.id!==(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}))]);const n=null===(e=this.state.allDevices[i.length-1])||void 0===e?void 0:e.id;this.setNextCursor(n),this.setState({...this.state,viewDevices:i})}}const Dc=new Ic;var Pc=()=>s(517198),Rc=()=>s(96365);function _c(){var e;const t=(0,a().v3)(),s=(0,l().IS)((e=>({tableBox:{tableLayout:"fixed"},cell:{paddingRight:12,height:44},allDevicesContainer:{display:"flex",flexDirection:"column",marginTop:16},noSessionsMessage:{height:120,width:"100%",fontSize:12,color:e.text.tertiary,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${e.lightDividerColor}`},shimmerRow:{height:12,gap:16,display:"flex",borderRadius:6},tooltips:{color:e.icon.tertiary,height:14,width:15,marginLeft:4},lastActiveTimeContainer:{display:"flex",alignItems:"center"}})),[]),[n]=(0,qn().Yb)((async()=>{const e=t.currentUser.id;if(!e)return Promise.reject("User ID is not available");try{return await Dc.fetchDevices(t,{userId:e}),Promise.resolve()}catch(o){return Promise.reject(o)}}),[t]),o="rejected"===n.status,d=(0,r().O$)(Dc),c=(null===(e=d.currentDevice)||void 0===e?void 0:e.id)??"",u=(0,i.useMemo)((()=>o?[]:d.viewDevices.map((e=>function(e){let{userDevicePointer:t,storeState:s,currentUserDevicePk:i}=e;const n=t.id,a=s.viewDevices.find((e=>e.id===n));if(!a)return;const o=i===a.id,{device_name:r,last_seen_time:l,last_login_geographic_location:d,last_login_at:c}=a;return{key:n,columns:[(0,ae.jsx)(Hc,{deviceName:r,isCurrentDevice:o},"device-name"),(0,ae.jsx)(Kc,{lastSeenTime:l??c,isCurrentDevice:o},"last-seen-time"),(0,ae.jsx)(Vc,{location:d},"location"),(0,ae.jsx)(Nc,{deviceId:a.id,isCurrentDevice:o},"action")]}}({userDevicePointer:{id:e.id,table:Cc().S},storeState:d,currentUserDevicePk:c}))).filter((e=>void 0!==e))),[c,o,d]),g=(0,i.useMemo)((()=>Array.from({length:3}).map(((e,t)=>({columns:Array.from({length:4}).map(((e,t)=>(0,ae.jsx)(Pc().A,{style:s.shimmerRow},t))),key:`device-loading-shimmer-${t}`})))),[s.shimmerRow]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Uc,{deviceRows:u,styles:s,storeState:d,shimmerRows:g}),(0,ae.jsx)(qc,{})]})}function Bc(e){let{column:t,onSortableColumnClick:s,header:i}=e;const n=(0,l().IS)((e=>({wrapper:{display:"flex"},sortButton:{display:"flex",alignItems:"center",padding:"3px 5px",overflow:"hidden",maxWidth:"100%",borderRadius:4},sortIcon:{fill:e.text.secondary,width:12,height:12,marginLeft:4}})),[]),{sortColumn:a,sortAscending:o}=(0,r().K8)((()=>{const{sortColumn:e,sortAscending:t}=Dc.state;return{sortColumn:e,sortAscending:t}}),[]),d=["device-name","last-seen-time","last-login-geographic-location"].includes(t),c=()=>{if(a===t)return(0,bc().m)({...n.sortIcon,...o?{transform:"rotate(180deg)"}:{}})};return i&&d?(0,ae.jsx)("div",{style:n.wrapper,children:(0,ae.jsxs)(Se().A,{style:n.sortButton,onClick:()=>s(t),children:[i,c()]})}):i?(0,ae.jsx)("div",{style:n.wrapper,children:i}):(0,ae.jsx)(ae.Fragment,{children:i})}function Ec(e){let{isLoadingState:t,styles:s}=e;const i=t?"3px 5px":0;return[{key:"device-name",header:(0,ae.jsx)("div",{children:(0,ae.jsx)(f().sA,{id:"manageActiveSessions.table.nameColumn.title",defaultMessage:"Device Name"})}),style:{width:"30%",minWidth:200,padding:i}},{key:"last-seen-time",header:(0,ae.jsxs)("div",{style:s.lastActiveTimeContainer,children:[(0,ae.jsx)(f().sA,{id:"manageActiveSessions.table.lastSeenColumn.title",defaultMessage:"Last Active"}),(0,ae.jsx)(xe().A,{renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"manageActiveSessions.table.lastSeenColumn.tooltip",defaultMessage:"This may be delayed by several hours."}),render:e=>(0,ae.jsx)("div",{...e,children:(0,Hn().$)(s.tooltips)}),placement:ye().W.Top,alignment:ye().C.Start})]}),style:{width:"25%",padding:i}},{key:"last-login-geographic-location",header:(0,ae.jsx)(f().sA,{id:"manageActiveSessions.table.locationColumn.title",defaultMessage:"Location"}),style:{width:"30%",padding:i}},{key:"logout",header:(0,ae.jsx)(ae.Fragment,{}),style:{width:"10%",padding:i}}]}function Uc(e){const{deviceRows:t,styles:s,storeState:n,shimmerRows:a}=e,o="loading"===n.deviceListLoadingState&&!t.length,r=!o&&!t.length,l=!o&&!r,d=(0,i.useCallback)((e=>{const{sortColumn:t,sortAscending:s}=Dc.state,i=t!==e||!s;Dc.setSorting(e,i)}),[]);return(0,ae.jsxs)(ae.Fragment,{children:[o?(0,ae.jsx)(Rc().A,{columns:Ec({isLoadingState:!0,styles:s}),rows:a,tableStyle:s.tableBox,cellStyle:s.cell}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Rc().A,{columns:Ec({isLoadingState:!1,styles:s}).map((e=>({key:e.key,header:(0,ae.jsx)(Bc,{column:e.key,header:e.header,onSortableColumnClick:d}),style:e.style}))),rows:t,tableStyle:s.tableBox,cellStyle:s.cell}),r&&(0,ae.jsx)("div",{style:s.noSessionsMessage,children:(0,ae.jsx)(f().sA,{id:"manageActiveSessions.noActiveSessions",defaultMessage:"No active sessions found."})})]}),l&&(0,ae.jsx)(Yc,{...e})]})}function Lc(e,t){Mc.setState({...Mc.state,open:!0,singleDeviceLogout:e??!1,deviceName:t})}function Oc(){Mc.setState({...Mc.state,open:!1,singleDeviceLogout:!1,deviceName:void 0})}function Wc(){Dc.loadMoreDevices()}function zc(){Dc.setViewDevices()}function qc(){const e=(0,r().K8)((()=>Mc.state.open),[]),t=(0,r().K8)((()=>Mc.state.singleDeviceLogout),[]),s=(0,r().K8)((()=>Mc.state.deviceName),[]),n=(0,r().K8)((()=>function(){let e;const{currentUserStore:t}=lt().default.state;return t&&(e=t.getEmail()),e}()),[]),a=(0,l().IS)((e=>({container:{width:350,padding:24,display:"flex",flexDirection:"column",alignItems:"center"},descriptionText:{marginBottom:20,textAlign:"center"},button:{width:"100%"},bold:{fontWeight:S().Wy.semibold}})),[]),o=(0,i.useCallback)((e=>(0,ae.jsx)("span",{style:a.bold,children:e})),[a]);return(0,ae.jsx)(Si().a,{open:e,onDismiss:Oc,render:()=>(0,ae.jsxs)("div",{style:a.container,children:[(0,ae.jsx)("div",{style:a.descriptionText,children:t?(0,ae.jsx)(f().sA,{id:"manageActiveSessions.confirmationModal.singleDevice",defaultMessage:"You have been logged out from {br}<bold>{deviceName}</bold>",values:{deviceName:s,bold:o,br:(0,ae.jsx)("br",{})}}):n?(0,ae.jsx)(f().sA,{id:"manageActiveSessions.confirmationModal.withEmail",defaultMessage:"You have been logged out from other active sessions for <bold>{email}</bold>",values:{email:n,bold:o}}):(0,ae.jsx)(f().sA,{id:"manageActiveSessions.confirmationModal.withoutEmail",defaultMessage:"You have been logged out from other active sessions for your account."})}),(0,ae.jsx)(qs().A,{style:a.button,onClick:Oc,size:"lg",children:(0,ae.jsx)(f().sA,{id:"manageActiveSessions.confirmationModal.close",defaultMessage:"Close"})})]})})}function Fc(){const e=(0,a().v3)(),t=(0,r().O$)(Dc),{device:s}=e,n=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8,alignItems:"center",justifyContent:"center"},descriptionText:{textAlign:"center"},button:{color:"dark"===e.mode?pa().Ay.whiteWithAlpha(.81):e.text.secondary,fontSize:12,fontWeight:500,padding:"6px 8px",height:28},personBadgeExclamationMarkIcon:{fill:e.icon.tertiary,width:24,height:24,marginBottom:8}})),[]),o=(0,i.useCallback)((async()=>{const s=(0,ae.jsxs)("div",{style:n.container,children:[(0,Jr().G)(n.personBadgeExclamationMarkIcon),(0,ae.jsx)(f().sA,{id:"manageActiveSessions.handleLogoutAllDevicesClick.confirmationMessage",defaultMessage:"<bold>Log out of all devices?</bold>",values:{bold:e=>(0,ae.jsx)("span",{style:{fontWeight:S().Wy.semibold},children:e})}})]}),i=(0,ae.jsx)(f().sA,{id:"manageActiveSessions.handleLogoutAllDevicesClick.acceptLabel",defaultMessage:"Log out"}),a=(0,ae.jsx)(f().sA,{id:"manageActiveSessions.handleLogoutAllDevicesClick.cancelLabel",defaultMessage:"Cancel"}),o=(0,ae.jsx)("div",{style:n.descriptionText,children:(0,ae.jsx)(f().sA,{id:"manageActiveSessions.handleLogoutAllDevicesClick.description",defaultMessage:"You will be logged out of all other active sessions on other devices <bold>except</bold> this one.",values:{bold:e=>(0,ae.jsx)("span",{style:{fontWeight:S().Wy.semibold},children:e})}})}),{accept:r}=await j().Gh({message:s,acceptLabel:i,cancelLabel:a,description:o});if(!r)return;y().hy(e),await U().callApi({eventName:"logoutActiveSessions",environment:e,data:{}});const l=t.allDevices.filter((e=>{var s;return e.id===(null===(s=t.currentDevice)||void 0===s?void 0:s.id)}));Dc.setDevices(l,!0),Lc(!1)}),[t,e,n]),d=(0,ae.jsx)(f().sA,{id:"manageActiveSessions.logOutAllDevices.title",defaultMessage:"Log out of all devices"}),c=(0,ae.jsx)(f().sA,{id:"manageActiveSessions.logOutAllDevices.label",defaultMessage:"Log out of all other active sessions on other devices besides this one."});return(0,ae.jsx)(ei().A,{type:"custom",isMobile:s.isMobile,disableSettingsItemClick:!0,title:d,caption:c,customButton:(0,ae.jsx)(_t().A,{size:"lg",onClick:o,style:n.button,children:(0,ae.jsx)(f().sA,{id:"manageActiveSessions.logOutAllDevices.button",defaultMessage:"Log out of all devices"})})})}function Nc(e){const t=(0,r().O$)(Dc),s=(0,r().K8)((()=>Dc),[]),n=(0,a().v3)(),o=(0,l().IS)((e=>({button:{color:"dark"===e.mode?pa().Ay.whiteWithAlpha(.81):e.text.secondary,fontSize:12,fontWeight:500,padding:"6px 8px",height:28,display:"inline-flex",margin:0},container:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,justifyContent:"center"},descriptionText:{textAlign:"center"},confirmationIcon:{fill:e.icon.tertiary,width:24,height:24,marginBottom:8}})),[]),d=(0,i.useCallback)((e=>(0,ae.jsx)(Gc,{...e})),[]),c=(0,i.useCallback)((async e=>{const i=t.allDevices.find((t=>t.id===e)),a=(0,ae.jsx)(d,{deviceName:(null==i?void 0:i.device_name)??"Unknown Device",containerStyles:o.container,iconStyles:o.confirmationIcon}),r=(0,ae.jsx)(f().sA,{id:"manageActiveSessions.handleLogoutDeviceClick.acceptLabel",defaultMessage:"Log out"}),l=(0,ae.jsx)(f().sA,{id:"manageActiveSessions.handleLogoutDeviceClick.cancelLabel",defaultMessage:"Cancel"}),c=(0,ae.jsx)("div",{style:o.descriptionText,children:(0,ae.jsx)(f().sA,{id:"manageActiveSessions.handleLogoutDeviceClick.description",defaultMessage:"You will be logged out of this device."})}),{accept:u}=await j().Gh({message:a,acceptLabel:r,cancelLabel:l,description:c});if(u&&i){y().hy(n),await U().callApi({eventName:"logoutSingleDeviceSession",environment:n,data:{deviceId:e}});const a=t.allDevices.filter((t=>t.id!==e));s.setDevices(a),Lc(!0,i.device_name)}}),[s,t,n,o,d]);return e.isCurrentDevice?null:(0,ae.jsx)(_t().A,{size:"lg",onClick:()=>c(e.deviceId),style:o.button,children:(0,ae.jsx)(f().sA,{id:"manageActiveSessions.logOutSingleDevice.button",defaultMessage:"Log out"})})}function Gc(e){return(0,ae.jsxs)("div",{style:e.containerStyles,children:[(0,Jr().G)(e.iconStyles),(0,ae.jsx)(f().sA,{id:"manageActiveSessions.handleLogoutDeviceClick.confirmationMessage",defaultMessage:"<bold>Log out of {deviceName}?</bold>",values:{bold:e=>(0,ae.jsx)("span",{style:{fontWeight:S().Wy.semibold},children:e}),deviceName:e.deviceName}})]})}function Kc(e){const t=(0,f().tz)(),s=(0,i.useMemo)((()=>e.isCurrentDevice?t.formatMessage({id:"manageActiveSessions.lastSeenTime.currentDevice",defaultMessage:"Now"}):function(e,t){const s=Number(e);return Ba().jE(s,hi().locale,t)}(e.lastSeenTime,t)),[e.lastSeenTime,t,e.isCurrentDevice]);return(0,ae.jsx)(be().A,{className:"notranslate",isSmall:!0,children:s})}function Vc(e){const t=(0,i.useMemo)((()=>{return""===(t=e.location)?"Unknown Location":t;var t}),[e.location]);return(0,ae.jsx)(be().A,{isSmall:!0,children:(0,ae.jsx)(f().sA,{id:"manageActiveSessions.location",defaultMessage:"{location}",values:{location:t}})})}function Hc(e){const{deviceName:t,isCurrentDevice:s}=e,n=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",gap:8,marginLeft:4},stack:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},thisDeviceBadge:{color:e.blueColor,fontSize:11,fontWeight:400,margin:0}})),[]),a=(0,i.useMemo)((()=>function(e){const t=e.toLowerCase(),s={mac:"Mac OS X",macintosh:"Mac OS X",windows:"Windows Device",iphone:"iPhone",ipad:"iPad",ipod:"iPod",android:"Android Device",cros:"Chrome OS",ubuntu:"Ubuntu",linux:"Linux",unknown:"Unknown Device",motorola:"Motorola Device",intel:"Mac OS X"},i=Object.keys(s);for(const n of i)if(t.includes(n))return s[n];return e}(t)),[t]);return(0,ae.jsxs)("div",{style:n.container,children:[$c({deviceName:t}),(0,ae.jsxs)("div",{style:n.stack,children:[(0,ae.jsx)(be().A,{className:"notranslate",style:{fontSize:12,fontWeight:400},children:(0,ae.jsx)(f().sA,{id:"manageActiveSessions.deviceName",defaultMessage:"{deviceName}",values:{deviceName:a}})}),s?(0,ae.jsx)("p",{style:n.thisDeviceBadge,children:(0,ae.jsx)(f().sA,{id:"manageActiveSessions.deviceName.currentDeviceBadge",defaultMessage:"This Device"})}):void 0]})]})}function $c(e){const t=(0,l().IS)((e=>({iconStyle:{width:24,height:24,fill:e.lightIconColor}})),[]),s={intel:()=>(0,jc().k)(t.iconStyle),iphone:()=>yc(t.iconStyle),ipad:()=>yc(t.iconStyle),pixel:()=>yc(t.iconStyle),unknown:()=>(0,Ac().z)(t.iconStyle),windows:()=>(0,jc().k)(t.iconStyle)},i=e.deviceName.toLowerCase();for(const n in s)if(i.includes(n))return(0,ae.jsx)(ae.Fragment,{children:s[n]()});return(0,ae.jsx)(ae.Fragment,{children:s.unknown()})}function Yc(e){const t=(0,l().IS)((e=>({loadMoreButton:{display:"flex",alignItems:"center",height:30,whiteSpace:"break-spaces",borderBottom:`1px solid ${e.lightDividerColor}`,color:e.text.tertiary,fontSize:14,opacity:.7},arrowIcon:{width:14,height:14,marginLeft:4,marginRight:6,fill:e.lightIconColor}})),[]),s=e.deviceRows.length<=3,i=e.deviceRows.length===e.storeState.allDevices.length;return(0,ae.jsxs)(Se().A,{style:t.loadMoreButton,onClick:s?Wc:zc,children:[i?null:s?(0,xc().P)(t.arrowIcon):(0,vc().q)(t.arrowIcon),(0,ae.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginLeft:s?4:8,fontSize:12},children:s?(0,ae.jsx)(f().sA,{id:"manageActiveSessions.loadMoreButton",defaultMessage:"{numberOfDevicesLeft, plural, =0 {All devices loaded} one {Load # more device} other {Load # more devices}}",values:{numberOfDevicesLeft:e.storeState.allDevices.length-e.deviceRows.length}}):(0,ae.jsx)(f().sA,{id:"manageActiveSessions.retractLoadMoreButton",defaultMessage:"Show fewer devices"})})]})}var Jc=()=>s(677887),Qc=()=>s(502698),Zc=()=>s(133780),Xc=()=>s(972437),eu=()=>s(149508),tu=()=>s(101622),su=()=>s(879180);function iu(e){let{status:t,numMfaSettings:s,onReloadSettings:n,regenerateBackupCodes:o}=e;const d=(0,a().v3)(),[{rootStateMachine:c,settingsStateMachine:u,totpStateMachine:g,smsStateMachine:p,backupCodesStateMachine:m}]=(0,i.useState)((()=>{const e=new(Qc().q)(d),t={totpStore:new(su().$),settingsStore:new(eu().r),smsStore:new(tu().N),backupCodesStore:new(Jc().Y),rootStore:new(Xc().y)};return{mfaService:e,rootStateMachine:new(Xc().J)(t.rootStore),settingsStateMachine:new(eu().U)(t.settingsStore,e),totpStateMachine:new(su().U)(t.totpStore,e),smsStateMachine:new(tu().G)(t.smsStore,e),backupCodesStateMachine:new(Jc().b)(t.backupCodesStore,e)}})),h=d.device.isMobile,x=(0,l().IS)((e=>({configureButton:{marginTop:h?12:0,marginBottom:h?4:0},regenerateBackupCodesBadge:{fontWeight:S().Wy.medium,letterSpacing:0,fontSize:11,color:e.blueColor,background:"light"===e.mode?pa().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content"}})),[h]),b=(0,r().K8)((()=>yt().A.state.highlightedSetting===yt().r.TwoStepVerification),[]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ei().A,{type:"custom",customButton:(0,ae.jsx)("div",{style:{marginTop:12},children:(0,ae.jsx)(_t().A,{size:"lg",onClick:()=>{!function(e){let{rootStateMachine:t,settingsStateMachine:s}=e;t.rootShowSettings({refresh:!1,startConfirmIdentity:()=>s.settingsConfirmIdentityForSettings()})}({rootStateMachine:c,settingsStateMachine:u})},style:x.configureButton,disabled:"disabled"===t,children:"on"===t?(0,ae.jsx)(f().sA,{id:"profileSettings.accountSecuritySection.changeTwoStepVerificationSettingButton.label",defaultMessage:"Change verification methods"}):(0,ae.jsx)(f().sA,{id:"profileSettings.accountSecuritySection.addTwoStepVerificationSettingButton.label",defaultMessage:"Add verification method"})})}),isMobile:!1,title:(0,ae.jsx)(f().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.label",defaultMessage:"2-step verification"}),caption:"on"===t?(0,ae.jsx)(f().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.settingConfigured.message",defaultMessage:"You have {numMfaSettings} verification methods turned on.",values:{numMfaSettings:s}}):(0,ae.jsx)(f().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.message",defaultMessage:"Add an additional layer of security to your account during login."}),tooltipLabel:(0,ae.jsx)(f().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSettingButton.tooltip",defaultMessage:"A password is required to enable 2-step verification"}),disableTooltip:"disabled"!==t,badge:o&&(0,ae.jsx)(Fd().A,{style:x.regenerateBackupCodesBadge,content:(0,ae.jsx)(f().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.regenerateBackupCodes.badge",defaultMessage:"Regenerate backup codes"})}),shouldHighlight:b}),(0,ae.jsx)(Zc().A,{onReloadSettings:n,rootStateMachine:c,settingsStateMachine:u,totpStateMachine:g,smsStateMachine:p,backupCodesStateMachine:m})]})}var nu=()=>s(594298),au=()=>s(435224),ou=()=>s(51176);const ru=q().default.createClass(!1,{name:"IsEducationStore"});const lu=function(e){let{spaceProfileSettingsStore:t,isEducationPlan:s}=e;const n=(0,f().tz)(),o=(0,a().v3)(),l=(0,r().uB)(void 0,ru);return(0,i.useEffect)((()=>{!async function(){const{currentUserStore:e,currentUserSettingsStore:s,currentUserRootStore:i,currentSpaceStore:a}=lt().default.state;if(e&&s){const i=t.getValueForUser(e,s,n);i&&t.setState({...t.state,...i})}if(i&&a){const e=await(0,is().eq)({environment:o,userRootStore:i}),t=a.canAdmin()&&(e||[]).some((e=>"student"===e));l.setState(t)}await M().Q(o,t)}()}),[o,n,l,t]),(0,i.useEffect)((()=>()=>{yt().A.state.highlightedSetting&&yt().A.setState({...yt().A.state,highlightedSetting:void 0})}),[]),(0,ae.jsx)(fu,{spaceProfileSettingsStore:t,isEducationPlan:s,isEducationStore:l})};function du(e){const{emailDomainForUser:t,spaceProfileSettingsStore:s,areProfileEditsDisabled:i}=e,n=(0,r().K8)((()=>{var e;return Boolean(null===(e=s.state.emailDomainSettings)||void 0===e?void 0:e.isDomainVerified)}),[s]),o=(0,a().v3)(),l=(0,r().K8)((()=>(0,ss().xu)(o)),[o]);return(0,ae.jsxs)(ge().A,{large:!0,divider:"full",children:[n?(0,ae.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",margin:"0 0 8px"},children:[(0,ae.jsx)(Fd().A,{style:{fontWeight:S().Wy.medium,letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",margin:0},content:(0,ae.jsx)(f().sA,{id:"profileSettings.myProfile.managedByline",defaultMessage:"Your account is managed by {domain}",values:{domain:t}})}),i?(0,ae.jsx)(xe().A,{render:e=>(0,ae.jsx)("div",{...e,children:(0,oa().G)({marginLeft:4,height:14,width:14,opacity:.5})}),renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"profileSettings.myProfile.managedByTooltip",defaultMessage:"Contact your organization's administrator to change your profile information."})}):null]}):null,l?(0,ae.jsx)(f().sA,{id:"profileSettings.myAccount.title",defaultMessage:"Account"}):(0,ae.jsx)(f().sA,{id:"profileSettings.myProfile.title",defaultMessage:"My profile"})]})}function cu(e){let{spaceProfileSettingsStore:t}=e;const s=(0,l().IS)((e=>({allDevicesHelpIcon:{height:14,width:15,color:e.icon.tertiary},headerContainer:{display:"flex",alignItems:"center",gap:4}})),[]),[i,n]=(0,r().K8)((()=>{var e;return[(null===(e=t.state.emailDomainSettings)||void 0===e?void 0:e.settings)??{},t.state.emailDomainSettings]}),[t]),o=(0,a().v3)(),d=(0,r().K8)((()=>(0,ss().xu)(o)),[o]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",children:(0,ae.jsx)(f().sA,{id:"profileSettings.support.title",defaultMessage:"Support"})}),(0,ae.jsx)(ou().A,{emailDomainSettings:i}),(0,ae.jsx)(mi().A,{size:18,isHidden:!0}),(0,ae.jsx)(qd().A,{userEmailDomainSettings:n}),(0,ae.jsx)(mi().A,{size:d?48:14,isHidden:!0}),(0,ae.jsx)(ge().A,{large:!0,divider:"full",children:(0,ae.jsxs)("div",{style:s.headerContainer,children:[(0,ae.jsx)(f().sA,{id:"profileSettings.devices.title",defaultMessage:"Devices"}),(0,ae.jsx)(xe().A,{renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"profileSettings.devices.tooltip",defaultMessage:"All devices logged in to your Notion account."}),render:e=>(0,ae.jsx)("div",{...e,children:(0,Hn().$)(s.allDevicesHelpIcon)}),placement:ye().W.Top,alignment:ye().C.Start})]})}),(0,ae.jsx)(Fc,{}),(0,ae.jsx)(mi().A,{size:20,isHidden:!0}),(0,ae.jsx)(_c,{})]})}function uu(e,t){y().EA(t),Wd().Bz({environment:t,onStart:()=>function(e){e.setState({...e.state,uploadingProfilePhoto:!0})}(e),bucket:"public",onError:()=>function(e){e.setState({...e.state,uploadingProfilePhoto:!1}),j().f1((0,ae.jsx)(f().sA,{id:"profileSettings.profilePhotoSection.uploadProfilePhotoError.message",defaultMessage:"Upload failed."}))}(e),onComplete:s=>function(e,t,s){const i=e[0];t.setState({...t.state,profilePhoto:i,uploadingProfilePhoto:!1}),k().createAndCommit({userAction:"SpaceProfileSettings.handleUploadComplete",environment:s,canUndo:!0,perform:e=>{const{currentUserStore:t}=lt().default.state;t&&b().b({userStore:t,data:{profilePhoto:i},transaction:e})}})}(s,e,t),accept:"image/*"})}function gu(e){const t=(0,a().v3)(),{userName:s,emailDomainForUser:i,areProfileEditsDisabled:n,spaceProfileSettingsStore:o}=e;return n?(0,ae.jsx)(xe().A,{renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:i}}),placement:ye().W.Bottom,alignment:ye().C.Center,render:e=>(0,ae.jsx)("div",{...e,style:{opacity:.4},children:(0,ae.jsx)(Ys().A,{disabled:!0,value:s})})}):(0,ae.jsx)(Ys().A,{value:s,onChange:e=>function(e,t,s){const i=e.target.value;(0,zd().r)(i)&&(y().x8(s,{from:t.state.name,to:i}),t.setState({...t.state,name:i}),k().createAndCommit({userAction:"SpaceProfileSettings.handleNameChange",environment:s,canUndo:!0,perform:e=>{const{currentUserStore:t}=lt().default.state;t&&b().b({userStore:t,data:{name:i},transaction:e})}}))}(e,o,t)})}function pu(e){let{currentUserValue:t,spaceProfileSettingsStore:s,isEducationPlan:n,isEducationStore:o}=e;const l=(0,a().v3)(),d=(0,r().K8)((()=>s.state.accountSettings),[s]),c=(0,r().K8)((()=>{var e;return Boolean(null===(e=s.state.emailDomainSettings)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.prevent_profile_edits)}),[s]),u=(0,i.useCallback)((()=>{M().Q(l,s)}),[l,s]),g=(0,r().O$)(o);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",children:(0,ae.jsx)(f().sA,{id:"profileSettings.accountSecurity.title",defaultMessage:"Account security"})}),(0,ae.jsx)(Qd,{userValue:t,hasEducationPlan:g,areProfileEditsDisabled:c}),(0,ae.jsx)(mi().A,{size:18,isHidden:!0}),(0,ae.jsx)(au().A,{hasPassword:d.hasPassword,hasPasswordActions:d.canConfigurePassword,isEducationPlan:n,samlEnforced:d.isSamlEnforced,email:t.email,isError:Boolean(d.error),onReloadSettings:u,mfaStatus:d.mfaStatus}),(0,ae.jsx)(mi().A,{size:18,isHidden:!0}),(0,ae.jsx)(iu,{status:d.mfaStatus,numMfaSettings:d.numMfaSettings,onReloadSettings:u,regenerateBackupCodes:d.regenerateBackupCodes}),(0,ae.jsx)(mi().A,{size:18,isHidden:!0}),(0,ae.jsx)(nu().A,{samlEnforced:d.isSamlEnforced,hasPasskeys:d.hasPasskeys})]})}function mu(e){const{userName:t,currentUserStore:s,currentUserValue:i,spaceProfileSettingsStore:n,isEducationPlan:o,isEducationStore:l}=e,d=(0,a().v3)(),c=(0,f().tz)(),u=(0,r().K8)((()=>(0,Wa().Ew)(s,c)),[s,c]),g=(0,$r().zN)(i.email),p=(0,r().K8)((()=>{var e;return Boolean(null===(e=n.state.emailDomainSettings)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.prevent_profile_edits)}),[n]),m=(0,r().O$)(ct().e),h=(0,r().K8)((()=>(0,ss().xu)(d)),[d]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(du,{spaceProfileSettingsStore:n,emailDomainForUser:g,areProfileEditsDisabled:p}),(0,ae.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,ae.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,ae.jsx)(Wa().Ay,{size:60,avatarType:u,isOffline:!m,onUploadProfilePhoto:()=>uu(n,d),onRemoveProfilePhoto:()=>function(e,t){e.setState({...e.state,profilePhoto:void 0}),k().createAndCommit({userAction:"SpaceProfileSettings.handleRemoveProfilePhoto",environment:t,canUndo:!0,perform:e=>{const{currentUserStore:t}=lt().default.state;t&&b().b({userStore:t,data:{profilePhoto:null},transaction:e})}})}(n,d),disabled:p,disabledTooltipMessage:(0,ae.jsx)(f().sA,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:g}})}),(0,ae.jsxs)("div",{style:{marginLeft:20,width:250},children:[(0,ae.jsx)(za().A,{children:(0,ae.jsx)(f().sA,{id:"profileSettings.personalInfoSection.nameInput.label",defaultMessage:"Preferred name"})}),(0,ae.jsx)(gu,{spaceProfileSettingsStore:n,userName:t,emailDomainForUser:g,areProfileEditsDisabled:p})]})]}),(0,ae.jsx)(hu,{avatarType:u,spaceProfileSettingsStore:n,areProfileEditsDisabled:p})]}),(0,ae.jsx)(mi().A,{size:48,isHidden:!0}),(0,ae.jsx)(pu,{spaceProfileSettingsStore:n,isEducationPlan:o,isEducationStore:l,currentUserValue:i}),(0,ae.jsx)(mi().A,{size:h?48:12,isHidden:!0}),(0,ae.jsx)(cu,{spaceProfileSettingsStore:n})]})}function fu(e){let{spaceProfileSettingsStore:t,isEducationPlan:s,isEducationStore:i}=e;const n=(0,r().K8)((()=>lt().default.state.currentUserStore),[]),a=(0,r().K8)((()=>n?n.getValue():void 0),[n]),o=(0,r().K8)((()=>t.state.name),[t]);return n&&a?(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsx)(mu,{spaceProfileSettingsStore:t,isEducationPlan:s,isEducationStore:i,currentUserStore:n,currentUserValue:a,userName:o})}):null}function hu(e){const{avatarType:t,spaceProfileSettingsStore:s,areProfileEditsDisabled:i}=e,n=(0,l().DP)(),o=(0,a().v3)(),r=(0,Je().X)("enable_add_notion_face_in_setting");return"photo"===t.type||i||r?"photo"!==t.type&&!i&&r?(0,ae.jsx)("div",{style:{color:n.mediumIconColor,fontSize:14,marginTop:8},children:(0,ae.jsx)(f().sA,{id:"editableUserAvatar.profilePhoto.addPhotoWithNotionFace",defaultMessage:"<addphoto>Add photo</addphoto> or <createface>Create your portrait</createface>",values:{addphoto:e=>(0,ae.jsx)(yi().A,{color:n.blueColor,disableUnderline:!0,disableHover:!0,onClick:()=>{uu(s,o)},children:e}),createface:e=>(0,ae.jsx)(yi().A,{color:n.blueColor,disableUnderline:!0,disableHover:!0,external:!0,href:"https://faces.notion.com",children:e})}})}):!i&&r?(0,ae.jsx)("div",{style:{color:n.mediumIconColor,fontSize:14,marginTop:8},children:(0,ae.jsx)(f().sA,{id:"editableUserAvatar.profilePhoto.addNotionFace",defaultMessage:"<createface>Create your portrait</createface>",values:{createface:e=>(0,ae.jsx)(yi().A,{color:n.blueColor,disableUnderline:!0,disableHover:!0,external:!0,href:"https://faces.notion.com",children:e})}})}):null:(0,ae.jsx)("div",{style:{color:n.mediumIconColor,fontSize:14,marginTop:8},children:(0,ae.jsx)(f().sA,{id:"editableUserAvatar.profilePhoto.addPhoto",defaultMessage:"Add photo"})})}var Su=()=>s(441288);function xu(){const e=(0,Je().X)("sharing_contacts_tab_refresh"),t=(0,r().K8)((()=>{const{currentSpaceStore:e}=lt().default.state;return e}),[]),s=(0,Ot().f_)({spaceId:null==t?void 0:t.id});return(0,r().K8)((()=>{if(!t)return!1;const e=(0,p().AI)(s);return(0,m().dL)(e)||(0,m().Pg)(e)}),[t,s])&&e}var bu=()=>s(226518);function vu(){const e=(0,Je().X)("personal_sharing_contacts_tab"),t=(0,r().O$)(lt().AppStoreCurrentSpaceStore),s=(0,bu().J)(),i=(0,r().K8)((()=>{const e=null==t?void 0:t.getModel();if(!t||!e)return!1;const s=t.getSubscriptionTier();return"personal"===t.getPlanType()||"enterprise"!==s}),[t]);return!!(e&&s&&i)}var yu=()=>s(736953),ju=()=>s(336474),Au=()=>s(514283),Cu=()=>s(874413),wu=()=>s(304372),Mu=()=>s(308996),Tu=()=>s(54882),ku=()=>s(352723),Iu=()=>s(205418),Du=()=>s(541482);function Pu(e){let{spaceStore:t,spacePermissionsSettingsStore:s}=e;const{canUseGroups:i,canEditGroups:n,isSpaceStoreDefined:a}=function(e){let{spaceStore:t}=e;const s=(0,wu().zh)(),{canEditMembership:i,isSpaceStoreDefined:n}=(0,r().K8)((()=>({canEditMembership:t.canEditMembership(),isSpaceStoreDefined:t.isDefined()})),[t]),a=(0,r().K8)((()=>i&&s),[i,s]);return{canUseGroups:s,canEditMembership:i,canEditGroups:a,isSpaceStoreDefined:n}}({spaceStore:t}),o=(0,r().K8)((()=>0!==(0,Ls().getActiveTeamCount)()),[]),l=(0,r().K8)((()=>0!==(0,ku().Qo)()),[]);return a?(0,ae.jsxs)("div",{children:[i?!l&&(0,ae.jsx)(be().A,{isMultiline:!0,style:{marginTop:17,marginBottom:17},children:o?(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}):(0,ae.jsx)(Iu().A,{subscriptionTier:"plus",from:"permission_groups",icon:Tu().$,title:(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),(0,ae.jsx)(Du().r,{spaceStore:t,permissionsSettingsStore:s,canEdit:n,containerMarginTop:i?0:void 0})]}):null}const Ru=(0,Mt().xh)("personCropCircleBadgePlus",{default:{loader:()=>s.e(89509).then(s.bind(s,992637))},small:{loader:()=>s.e(89509).then(s.bind(s,510727))},fill:{loader:()=>s.e(89509).then(s.bind(s,477655))},fillSmall:{loader:()=>s.e(89509).then(s.bind(s,583576))}},["person","add","user","new","plus"]);var _u=()=>s(836880),Bu=()=>s(70989),Eu=()=>s(284551),Uu=()=>s(466321),Lu=()=>s(300481),Ou=()=>s(673411),Wu=()=>s(758989),zu=()=>s(90307),qu=()=>s(931371),Fu=()=>s(199557),Nu=()=>s(985532),Gu=()=>s(452193),Ku=()=>s(452794);class Vu extends q().default{getInitialState(){return{isModalOpen:!1,guests:[],handleClickDecline:()=>{}}}}const Hu=new Vu;function $u(e){let{userId:t,spaceStore:s,shouldDisableInteraction:n}=e;const{environment:o,styles:d,isSubscribed:c,handleConvertToMemberClick:u,handleRemoveClick:g}=function(e){let{userId:t,spaceStore:s,shouldDisableInteraction:n}=e;const o=(0,l().IS)((e=>({container:{width:"100%",display:"flex",justifyContent:"flex-end",opacity:n?.5:1},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},upgradeButton:{padding:"0px 6px 0px 8px",width:257},removeMenuDivider:{paddingTop:4,paddingBottom:4,borderTop:`1px solid ${e.stroke.secondary}`},removeButton:{width:257,padding:"0px 6px 0px 8px",color:Wu().l8[e.mode].red},upgradeIcon:{width:17,height:17}})),[n]),d=(0,r().K8)((()=>{const e=Xi().subscriptionDataStoreInstance.state;return Boolean(e&&is().Fq(e))}),[]),c=(0,a().v3)(),u=(0,i.useCallback)((()=>{const e=ie().LU.createChildStore(s,{table:E().oo,id:t}),i=d?"read_and_write":"editor";zu().P({environment:c,guestUserStore:e,role:i,store:s,isConvertToAdmin:!d,origin:"guest_pages_popup"})}),[d,s,c,t]),g=(0,i.useCallback)((()=>{Hu.setState({...Hu.state,isModalOpen:!0,guests:[t],handleClickDecline:()=>{Su().jR(c,{from:"guest",button_name:"confirm_in_dialog",count:1});const e=ie().LU.createChildStore(s,{table:E().oo,id:t});zu().D({environment:c,guestUserStore:e,store:s})}})}),[s,c,t]);return{environment:c,styles:o,isSubscribed:d,handleConvertToMemberClick:u,handleRemoveClick:g}}({userId:t,spaceStore:s,shouldDisableInteraction:n});return(0,ae.jsx)("div",{style:d.container,children:(0,ae.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,renderOrigin:e=>(0,ae.jsx)(Vt().p,{style:d.button,...e,children:(0,ae.jsx)(ae.Fragment,{children:(0,Ku().L)(d.buttonIcon)})}),onClick:()=>{Su().jR(o,{from:"guest",button_name:"actions"})},disabled:n,render:()=>(0,ae.jsx)("div",{children:(0,ae.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:[{key:"upgrade",render:e=>(0,ae.jsx)(ya().A,{...e}),items:[{key:"upgrade",render:e=>(0,ae.jsx)(Il().A,{...e,buttonStyle:d.upgradeButton,icon:(0,Tr().m)(d.upgradeIcon),title:(0,ae.jsx)(f().sA,{id:"peopleSectionguestsTab.upgradeToAdmin",defaultMessage:"Upgrade to {isSubscribed, select, true {member} other {admin}}",values:{isSubscribed:c}})}),action:()=>{u(),Su().jR(o,{from:"guest",button_name:"upgrade"})}}]},{key:"remove",render:e=>(0,ae.jsx)(ya().A,{...e,style:d.removeMenuDivider}),items:[{key:"remove",render:e=>(0,ae.jsx)(Il().A,{...e,buttonStyle:d.removeButton,icon:(0,Yn()._)(d.upgradeIcon),title:(0,ae.jsx)(f().sA,{id:"peopleSectionguestsTab.remove",defaultMessage:"Remove from workspace"})}),action:()=>{g(),Su().jR(o,{from:"guest",button_name:"remove"})}}]}]})})})})}const Yu=(0,Mt().wt)("peopleFillXmark",{viewBox:"0 0 20 20",svg:(0,ae.jsx)("path",{d:"M12.2061 6.75684C12.0374 6.75684 11.8916 6.69531 11.7686 6.57227C11.6501 6.44922 11.5908 6.30339 11.5908 6.13477C11.5908 5.96615 11.6523 5.82259 11.7754 5.7041L13.5801 3.89258L11.7754 2.08105C11.6523 1.96257 11.5908 1.81901 11.5908 1.65039C11.5908 1.47721 11.6501 1.33366 11.7686 1.21973C11.8916 1.10124 12.0374 1.04199 12.2061 1.04199C12.3838 1.04199 12.5319 1.10352 12.6504 1.22656L14.4551 3.02441L16.2803 1.21973C16.4033 1.09212 16.5469 1.02832 16.7109 1.02832C16.8841 1.02832 17.0299 1.08984 17.1484 1.21289C17.2669 1.33138 17.3262 1.47493 17.3262 1.64355C17.3262 1.80762 17.2646 1.95117 17.1416 2.07422L15.3369 3.89258L17.1348 5.69727C17.2624 5.82031 17.3262 5.96615 17.3262 6.13477C17.3262 6.30339 17.2646 6.44922 17.1416 6.57227C17.0231 6.69531 16.8796 6.75684 16.7109 6.75684C16.5332 6.75684 16.3828 6.69303 16.2598 6.56543L14.4551 4.76758L12.6572 6.56543C12.5387 6.69303 12.3883 6.75684 12.2061 6.75684ZM1.89746 13.2441C1.51465 13.2441 1.21387 13.1576 0.995117 12.9844C0.776367 12.8112 0.666992 12.5742 0.666992 12.2734C0.666992 11.8314 0.799154 11.3688 1.06348 10.8857C1.33236 10.4027 1.71745 9.94922 2.21875 9.52539C2.72461 9.10156 3.33301 8.75749 4.04395 8.49316C4.75488 8.22884 5.55241 8.09668 6.43652 8.09668C7.3252 8.09668 8.125 8.22884 8.83594 8.49316C9.54688 8.75749 10.153 9.10156 10.6543 9.52539C11.1602 9.94922 11.5475 10.4027 11.8164 10.8857C12.0853 11.3688 12.2197 11.8314 12.2197 12.2734C12.2197 12.5742 12.1104 12.8112 11.8916 12.9844C11.6729 13.1576 11.3721 13.2441 10.9893 13.2441H1.89746ZM6.44336 6.87988C5.94661 6.87988 5.48861 6.74544 5.06934 6.47656C4.65462 6.20768 4.31966 5.84538 4.06445 5.38965C3.8138 4.93392 3.68848 4.4235 3.68848 3.8584C3.68848 3.30241 3.8138 2.80111 4.06445 2.35449C4.31966 1.90332 4.6569 1.54557 5.07617 1.28125C5.49544 1.01693 5.95117 0.884766 6.44336 0.884766C6.9401 0.884766 7.39811 1.01465 7.81738 1.27441C8.23665 1.53418 8.57161 1.88965 8.82227 2.34082C9.07747 2.78743 9.20508 3.28874 9.20508 3.84473C9.20508 4.41439 9.07747 4.92936 8.82227 5.38965C8.57161 5.84538 8.23665 6.20768 7.81738 6.47656C7.39811 6.74544 6.9401 6.87988 6.44336 6.87988Z"})});function Ju(e){let{isModalOpen:t,handleDismiss:s,handleConfirm:i,title:n,description:a,ctaText:o}=e;const{styles:r}=function(){const e=(0,l().IS)((e=>({modal:{width:300,overflow:"hidden",borderRadius:5},container:{display:"flex",padding:"20px 20px 12px 20px",flexDirection:"column",width:299,justifyContent:"center",alignItems:"flex-start",gap:20},iconAndTitle:{display:"flex",flexDirection:"column",alignItems:"center",gap:9,width:"100%"},iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:36,height:36},icon:{color:e.icon.secondary,fontSize:24,fontWeight:510},title:{color:e.text.primary,textAlign:"center",fontSize:17,fontWeight:590,width:"100%",wordBreak:"break-word"},description:{color:e.text.secondary,textAlign:"center"},footer:{display:"flex",flexDirection:"column",gap:8,alignItems:"center",width:"100%"},declineButton:{height:32,padding:"0 12px",borderRadius:6,width:"100%",textAlign:"center",alignItems:"center",justifyContent:"center",background:Wu().l8[e.mode].red},declineButtonHovered:{background:e.tint.uiRedPressed},declineText:{fontWeight:590,color:e.text.contrastPrimary},cancelButton:{display:"flex",height:24,padding:"0px 6px",justifyContent:"center",alignItems:"center",gap:4,textAlign:"center"}})),[]);return{styles:e}}();return(0,Ze().A)({shouldPreserveTextSelection:!0,shouldPreserveBlockSelection:!0,shouldRestoreSelection:!0}),(0,ae.jsx)(Si().a,{open:t,innerStyle:r.modal,showCloseIcon:!0,onDismiss:s,render:()=>(0,ae.jsx)(Pn().A,{capture:!0,allowEsc:!0,render:()=>(0,ae.jsxs)("div",{style:r.container,children:[(0,ae.jsxs)("div",{style:r.iconAndTitle,children:[(0,ae.jsx)("div",{style:r.iconContainer,children:(0,ae.jsx)("div",{style:r.icon,children:Yu({width:24,height:24})})}),(0,ae.jsx)("div",{style:r.title,children:n})]}),(0,ae.jsx)("div",{style:r.description,children:a}),(0,ae.jsxs)("div",{style:r.footer,children:[(0,ae.jsx)(Vt().p,{style:r.declineButton,onClick:()=>{i(),s()},hoveredStyle:r.declineButtonHovered,children:(0,ae.jsx)("div",{style:r.declineText,children:o})}),(0,ae.jsx)(Vt().p,{style:r.cancelButton,onClick:s,children:(0,ae.jsx)("div",{children:(0,ae.jsx)(f().sA,{id:"BulkDeclineConfirmationDialog.cancel",defaultMessage:"Cancel"})})})]})]})})})}function Qu(){const{isModalOpen:e,handleClickDecline:t,handleDismiss:s,guests:n,firstGuestName:o}=function(){const{isModalOpen:e,guests:t,handleClickDecline:s}=(0,r().K8)((()=>{const{isModalOpen:e,guests:t,handleClickDecline:s}=Hu.state;return{isModalOpen:e,guests:t,handleClickDecline:s}}),[]),n=(0,f().tz)(),o=(0,r().K8)((()=>{const{currentSpaceStore:e}=lt().default.state;if(0===t.length||!e)return;return ie().LU.createChildStore(e,{table:E().oo,id:t[0]}).getDisplayName(n)}),[t,n]),l=(0,a().v3)(),d=(0,i.useCallback)((()=>{Hu.reset(),Su().jR(l,{from:"guest",button_name:"confirm_in_dialog",count:t.length})}),[l,t]);return{isModalOpen:e,guests:t,firstGuestName:o,handleClickDecline:s,handleDismiss:d}}();return 0===n.length?null:(0,ae.jsx)(Ju,{isModalOpen:e,handleDismiss:s,handleConfirm:t,title:(0,ae.jsx)(f().sA,{id:"GuestBulkRemoveConfirmationDialog.title",defaultMessage:"Remove {numberOfGuests, plural, one {{firstGuestName}} other {{numberOfGuests} guests}} from the workspace?",values:{numberOfGuests:n.length,firstGuestName:o}}),description:(0,ae.jsx)(f().sA,{id:"GuestBulkRemoveConfirmationDialog.description",defaultMessage:"They will lose access to all shared pages. To add them as a guest in the future, a request must be submitted, or an admin must invite them."}),ctaText:(0,ae.jsx)(f().sA,{id:"GuestBulkRemoveConfirmationDialog.remove",defaultMessage:"Remove"})})}var Zu=()=>s(712437),Xu=()=>s(486540),eg=()=>s(865226),tg=()=>s(29869),sg=()=>s(701513);function ig(e){let{guestUserId:t,pageIds:s}=e;const{menuListItems:i,styles:n}=function(e){let{guestUserId:t,pageIds:s}=e;const i=(0,l().IS)((()=>({container:{width:256},chevron:{marginLeft:8,width:16,height:16}})),[]),n=(0,a().v3)(),o=(0,f().tz)(),d=(0,r().K8)((()=>s.map((e=>{var s;const i=new(ie().Bv)(n,{table:xd().ev,id:e}),a=null===(s=i.getPermissionItems().find((e=>"user_permission"===e.type&&e.user_id===t)))||void 0===s?void 0:s.role;return{key:e,render:e=>(0,ae.jsx)(sg().A,{...e,store:i,placeholder:(0,ae.jsx)(f().sA,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"}),caption:a?o.formatMessage((0,Xu().an)(a,"block")):void 0}),action:()=>{const e=(0,tg().Ay)({store:i,fullyQualified:!1,pageVisitSource:Zu().y8.LinkInPage});eg().oo({environment:n,url:e,openInNew:"tab"})}}}))),[s,t,n,o]);return{menuListItems:d,styles:i}}({guestUserId:t,pageIds:s});return(0,ae.jsx)("div",{style:n.container,children:(0,ae.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:[{key:"pages",render:e=>(0,ae.jsx)(ya().A,{...e}),items:i}]})})}function ng(e){let{from:t,guestUserId:s,pageIds:i,shouldDisableInteraction:n}=e;const{styles:o}=function(e){let{shouldDisableInteraction:t}=e;const s=(0,l().IS)((e=>({button:{opacity:t?.5:1,color:e.text.secondary},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[t]);return{styles:s}}({shouldDisableInteraction:n}),r=(0,a().v3)(),d=i.length;return 0===d?(0,ae.jsx)(Vt().p,{disabled:!0,style:o.button,children:(0,ae.jsx)(f().sA,{id:"peopleSectionguestsTab.GuestPagesButton.noPages",defaultMessage:"No pages"})}):(0,ae.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,onClick:()=>{Su().jR(r,{from:t,button_name:"open_pages"})},renderOrigin:e=>(0,ae.jsxs)(Vt().p,{...e,style:o.button,children:[(0,ae.jsx)(f().sA,{id:"GuestPagesButton.button",defaultMessage:"{numOfPages, plural, one {{numOfPages} page} other {{numOfPages} pages}}",values:{numOfPages:d}}),(0,Ml().b)(o.chevron)]}),disabled:n,render:()=>(0,ae.jsx)(ig,{pageIds:i,guestUserId:s})})}function ag(e){let{guest:t,shouldDisableInteraction:s}=e;return(0,ae.jsx)(ng,{pageIds:t.guestPageIds,guestUserId:t.userId,shouldDisableInteraction:s,from:"guest"})}const og=10,rg=10,lg=5;var dg=()=>s(840925),cg=()=>s(995473);function ug(e){let{userId:t,spaceStore:n,restorationStatus:a,isInternalGuest:o,isForSuggestionsTable:d}=e;const c=(0,f().tz)().formatMessage({id:"peopleSettings.userCell.guest",defaultMessage:"Guest"}),{name:u,email:g,userStore:p,styles:m}=function(e){let{userId:t,spaceStore:s,isForSuggestionsTable:i}=e;const n=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",fontSize:S().J.UIRegular.desktop,width:"100%",justifyContent:"space-between"},titleContainer:{maxWidth:i?210:163},userAvatarWrapper:{position:"relative"},userAvatarIcon:{position:"absolute",left:17,top:18},userName:{height:17,alignSelf:"stretch",fontSize:S().J.UIRegular.desktop,fontStyle:"normal",fontWeight:510,lineHeight:"18px",...S().RC},userEmail:{height:17,alignSelf:"stretch",fontSize:S().J.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px",color:e.text.secondary,...S().RC},nameContainer:{display:"flex",alignItems:"center",gap:10,marginTop:4,marginBottom:4}})),[i]),a=(0,f().tz)(),o=ie().LU.createChildStore(s,{table:E().oo,id:t}),{name:d,email:c}=(0,r().K8)((()=>({name:o.getDisplayName(a),email:o.getEmail()})),[o,a]);return{name:d,email:c,styles:n,userStore:o}}({userId:t,spaceStore:n,isForSuggestionsTable:d}),[h,x]=(0,i.useState)(!1);return(0,ae.jsxs)("div",{style:m.container,children:[(0,ae.jsxs)("div",{style:m.nameContainer,children:[(0,ae.jsxs)("div",{style:m.userAvatarWrapper,children:[(0,ae.jsx)(Rn().A,{userStore:p,size:28}),o&&(0,ae.jsx)(xe().A,{style:{width:250},textWrap:!0,placement:ye().W.Right,alignment:ye().C.Start,render:e=>(0,ae.jsx)("div",{...e,style:m.userAvatarIcon,children:(0,ae.jsx)(Pt().Q,{iconGroup:cg().u,colorName:"secondary",variantName:"mini"})}),renderTooltip:()=>(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Rt().D,{styleName:"Body-12px/Medium",colorName:"contrastPrimary",children:(0,ae.jsx)(f().sA,{id:"userCell.internalGuest.tooltip.title",defaultMessage:"Using an email domain associated with your workspace"})}),(0,ae.jsx)(Rt().D,{styleName:"Body-12px/Medium",colorName:"contrastSecondary",children:(0,ae.jsx)(f().sA,{id:"userCell.internalGuest.tooltip.description",defaultMessage:"You'll see this icon for users who have a workspace owner email domain, verified domain, or allowed email domain"})})]})})]}),(0,ae.jsxs)("div",{style:m.titleContainer,children:[(0,ae.jsx)("div",{style:m.userName,title:d?g:u,children:d?g:u}),(0,ae.jsx)("div",{style:m.userEmail,title:d?c:g,children:d?c:g}),a&&(0,ae.jsx)(s(614434).A,{spaceStore:n,restorationStatus:a,didAttemptRecovery:h})]})]}),!h&&"canBeRestored"===(null==a?void 0:a.status)&&(0,ae.jsx)(s(726623).A,{spaceId:n.id,userStore:p,onSubmit:()=>x(!0)})]})}function gg(e){let{spaceStore:t,domainFilterValues:s,internalDomains:i}=e;return(0,r().K8)((()=>{const e=Nu().A.state.shouldUseEdgeCache,t=gt().default.checkGate({gateName:"edge_cache_plus_settings"});return e&&t}),[])?(0,ae.jsx)(pg,{spaceStore:t,domainFilterValues:s,internalDomains:i}):(0,ae.jsx)(xg,{spaceStore:t,domainFilterValues:s,internalDomains:i})}function pg(e){let{spaceStore:t,domainFilterValues:s,internalDomains:n}=e;const o=(0,Ss().fC)({spaceStore:t}),d=(0,wu().r1)({spaceStore:t}),c=(0,l().IS)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},headerContainer:{display:"flex",justifyContent:o&&d?"space-between":"flex-end"},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},actionLeftButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},buttonContainerDecline:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:Wu().l8[e.mode].red},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonDivider:{width:1,background:e.stroke.secondary},actionRightButton:{borderRadius:"0px 4px 4px 0px",paddingLeft:0,paddingRight:0,height:30}})),[o,d]),u=(0,r().K8)((()=>dg().A.state.searchQuery),[]),[g,p]=(0,i.useState)({by:fg.id,asc:!1}),m=(0,i.useMemo)((()=>({field:"user"===g.by?"name_normalized":"type",direction:g.asc?"asc":"desc"})),[g]),h=(0,Fu().n)({query:u??"",sort:m,filter:"guests",limit:30}),S=(0,r().K8)((()=>{var e;return null==h||null===(e=h.rowsStore.state.rows)||void 0===e?void 0:e.filter((e=>{var t;if(void 0===s||0===s.length)return!0;const i=null===(t=e.email)||void 0===t?void 0:t.split("@")[1];return null==s?void 0:s.some((e=>"other"===e?!(null!=n&&n.some((e=>e.url===i))):i===e))}))}),[s,n,h]),x=(0,wu().k4)({spaceStore:t}),b=(0,a().v3)(),[v,y]=(0,i.useState)(new Set),j=(0,i.useMemo)((()=>{const e=void 0!==S&&v.size>0&&v.size===S.length;return x?{header:{isDisabled:void 0===S||0===S.length,isSelected:e,onClick:()=>{void 0!==S&&(e?(y(new Set),Su().Y1(b,{from:"guests",action:"deselect_all",row_count:v.size})):(y(new Set(S.map((e=>e.id)))),Su().Y1(b,{from:"guests",action:"select_all",row_count:S.length})))}},row:{getDisabledState:()=>!1,getSelectedState:e=>v.has(e.id),onClick:e=>{y((t=>{if(t.has(e.id)){Su().Y1(b,{from:"guests",action:"deselect_row",row_count:1});const s=new Set(t);return s.delete(e.id),s}return Su().Y1(b,{from:"guests",action:"select_row",row_count:1}),new Set(t).add(e.id)}))}}}:void 0}),[x,S,v,b]),A=(0,r().K8)((()=>{const e=Xi().subscriptionDataStoreInstance.state;return Boolean(e&&is().Fq(e))}),[]),C=(0,i.useCallback)((()=>{Su().jR(b,{from:"guest",button_name:"bulk_upgrade",count:v.size}),v.forEach((e=>{const s=ie().LU.createChildStore(t,{table:E().oo,id:e}),i=A?"read_and_write":"editor";zu().P({environment:b,guestUserStore:s,role:i,store:t,isConvertToAdmin:!A,origin:"guest_actions"})})),y(new Set)}),[v,b,A,t]),w=(0,i.useCallback)((()=>{Su().jR(b,{from:"guest",button_name:"bulk_remove",count:v.size}),Hu.setState({...Hu.state,isModalOpen:!0,guests:Array.from(v),handleClickDecline:()=>{Su().jR(b,{from:"guest",button_name:"confirm_in_dialog",count:v.size}),v.forEach((e=>{const s=ie().LU.createChildStore(t,{table:E().oo,id:e});zu().D({environment:b,guestUserStore:s,store:t})})),y(new Set)}})}),[v,b,t]),M=!(null!=S&&S.some((e=>v.has(e.id)))),{columns:T,transformRow:k}=function(e){let{users:t,spaceStore:s,internalDomains:n,selectedGuestIds:a,environment:o,canEditMembership:l}=e;const[d,c]=(0,i.useState)({});(0,qn().Yb)((async()=>{if(!t)return;if(!l)return;const e=t.map((e=>e.id)),i=await U().callApi({eventName:"getGuestPagesForUserIds",environment:o,data:{spaceId:s.id,guestUserIds:e},headers:(0,R().WS)({cellId:void 0,spaceId:s.id})});"success"===i.type&&c((t=>{const s={...t,...i.data.guestIdToPages};for(const i of e)void 0===s[i]&&(s[i]=mg);return s}))}),[s,o,t,l]);const u=(0,i.useCallback)((e=>{var t;const i=e.email.split("@")[1],o=n.some((e=>e.url===i));if("page_guest"===((0,qu().dp)(s,e.id).getMembershipType()??e.membership_type))return{id:e.id,role:"none",spaceStore:s,shouldDisableInteraction:a.has(e.id),guestPageIds:null===(t=d[e.id])||void 0===t?void 0:t.pageIds,isInternalGuest:o}}),[s,n,d,a]),g=(0,r().K8)((()=>l?[fg,hg,Sg]:[fg]),[l]);return{columns:g,transformRow:u}}({users:S,spaceStore:t,internalDomains:n,selectedGuestIds:v,environment:b,canEditMembership:x});return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("div",{style:c.headerContainer,children:[o&&d&&(0,ae.jsx)("div",{style:c.titleContainer,children:(0,ae.jsx)("span",{children:(0,ae.jsx)(f().sA,{id:"peopleSectionguestsTab.activeguests.title",defaultMessage:"Active"})})}),v.size>0&&!M&&(0,ae.jsxs)("div",{style:c.actionsContainer,children:[(0,ae.jsx)(Vt().p,{style:c.actionLeftButton,onClick:C,children:(0,ae.jsxs)("div",{style:c.buttonContainerApprove,children:[(0,ae.jsx)("div",{style:c.buttonIcon,children:(0,Tr().m)({width:20,height:16})}),(0,ae.jsx)("div",{style:c.buttonText,children:(0,ae.jsx)(f().sA,{id:"spaceSettings.peopleSection.guestsTable.bulkUpgrade",defaultMessage:"Upgrade {numberOfRequests, plural, one {1 guest} other {{numberOfRequests} guests}} to {isSubscribed, select, true {member} other {admin}}",values:{numberOfRequests:v.size,isSubscribed:A}})})]})}),(0,ae.jsx)("div",{style:c.buttonDivider}),(0,ae.jsx)(Vt().p,{style:c.actionRightButton,onClick:w,children:(0,ae.jsxs)("div",{style:c.buttonContainerDecline,children:[(0,ae.jsx)("div",{style:{...c.buttonIcon,paddingTop:3},children:(0,Yn()._)({width:20,height:16})}),(0,ae.jsx)("div",{style:c.buttonText,children:(0,ae.jsx)(f().sA,{id:"spaceSettings.peopleSection.guestsTable.bulkDecline",defaultMessage:"Remove from workspace"})})]})})]})]}),(0,ae.jsxs)("div",{style:{marginTop:o&&d?4:-1,height:"100%"},children:[(0,ae.jsx)(Gu().M,{columns:T,rows:S,listSource:h,transformRow:k,sort:g,onSortChange:p,rowHeight:42,allowHorizontalScroll:!0,renderEmpty:()=>(0,ae.jsx)(be().A,{isSmall:!0,style:c.emptyMessage,children:(0,ae.jsx)(f().sA,{id:"peopleSectionGuestsTab.emptySearch",defaultMessage:"No search results"})}),multiselect:j}),(0,ae.jsx)(Qu,{})]})]})}const mg={pageIds:[]};const fg={id:"user",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionGuestsTab.user",defaultMessage:"User"})}),renderCell:e=>(0,ae.jsx)(ug,{userId:e.id,spaceStore:e.spaceStore,isInternalGuest:e.isInternalGuest}),widthData:{widthPercent:35,minWidth:250},sortable:!0,border:!0},hg={id:"access",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionGuestsTab.access",defaultMessage:"Access"})}),headerCellStyle:{paddingLeft:8},renderCell:e=>void 0!==e.guestPageIds?(0,ae.jsx)(ag,{guest:{userId:e.id,role:e.role,guestPageIds:e.guestPageIds,isPageGuest:!0,isTeamGuest:!1},shouldDisableInteraction:e.shouldDisableInteraction}):(0,ae.jsx)(Pc().A,{style:{width:60,height:12,borderRadius:4,marginLeft:8}}),widthData:{widthPercent:55,minWidth:180},sortable:!1},Sg={id:"actions",headerTitle:void 0,renderCell:e=>(0,ae.jsx)($u,{userId:e.id,spaceStore:e.spaceStore,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{widthPercent:10,minWidth:50},sortable:!1};function xg(e){let{spaceStore:t,domainFilterValues:s,internalDomains:n}=e;const{environment:o,tableStyles:d,styles:c,sortState:u,setSortState:g,selectedRowIds:p,setSelectedRowIds:m,rows:h,searchQuery:S,onClickApprove:x,onClickDecline:b,isApproveButtonLoading:v,canEditMembership:y,columnRenderInfo:j,isSubscribed:A,shouldHideActions:C,shouldShowRequest:w,canAdmin:M,guestsCount:T,shouldShowLoadMore:k,onLoadMore:I}=function(e){let{spaceStore:t,domainFilterValues:s,internalDomains:n}=e;const o=(0,r().K8)((()=>{const e=Xi().subscriptionDataStoreInstance.state;return e?(0,is().oe)(e):[]}),[]),d=(0,Ss().fC)({spaceStore:t}),c=(0,wu().r1)({spaceStore:t}),u=(0,a().v3)(),g=(0,l().IS)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},emptyDivider:{height:1,backgroundColor:e.stroke.secondary},headerContainer:{display:"flex",justifyContent:d&&c?"space-between":"flex-end"},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},actionLeftButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},buttonContainerDecline:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:Wu().l8[e.mode].red},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonDivider:{width:1,background:e.stroke.secondary},actionRightButton:{borderRadius:"0px 4px 4px 0px",paddingLeft:0,paddingRight:0,height:30}})),[d,c]),p=(0,wu().k4)({spaceStore:t}),m=(0,r().K8)((()=>p?[bg,vg,yg]:[bg]),[p]),h=(0,l().IS)((e=>({...(0,he().rC)({columnRenderInfo:m,theme:e,containerMarginTop:0})})),[m]),S=(0,r().K8)((()=>m[0]),[m]),[x,b]=(0,i.useState)({column:S,sortAscending:!0}),[v,y]=(0,i.useState)([]),j=(0,f().tz)(),A=(0,r().K8)((()=>dg().A.state.searchQuery),[]),C=(0,r().K8)((()=>o.map((e=>{const s=ie().LU.createChildStore(t,{table:E().oo,id:e.userId}),i=s.getEmail(),a=null==i?void 0:i.split("@")[1],o=n.some((e=>e.url===a));return{spaceStore:t,user:e,email:i,userName:s.getDisplayName(j),id:e.userId,shouldDisableInteraction:v.includes(e.userId),isClickable:!1,isInternalGuest:o}})).filter((e=>{var t;if(A){var i;if(!((null===(i=e.email)||void 0===i?void 0:i.includes(A))||e.userName.includes(A)))return!1}if(!s||0===s.length)return!0;const a=null===(t=e.email)||void 0===t?void 0:t.split("@")[1];return null==s?void 0:s.some((e=>"other"===e?!(null!=n&&n.some((e=>e.url===a))):a===e))}))),[t,o,j,A,v,n,s]),w=(0,r().K8)((()=>{const e=Xi().subscriptionDataStoreInstance.state;return Boolean(e&&is().Fq(e))}),[]),M=(0,i.useCallback)((()=>{Su().jR(u,{from:"guest",button_name:"bulk_upgrade",count:v.length}),v.forEach((e=>{const s=ie().LU.createChildStore(t,{table:E().oo,id:e}),i=w?"read_and_write":"editor";zu().P({environment:u,guestUserStore:s,role:i,store:t,isConvertToAdmin:!w,origin:"guest_actions"}),y([])}))}),[v,u,w,t]),T=(0,i.useCallback)((()=>{Su().jR(u,{from:"guest",button_name:"bulk_remove",count:v.length}),Hu.setState({...Hu.state,isModalOpen:!0,guests:v,handleClickDecline:()=>{Su().jR(u,{from:"guest",button_name:"confirm_in_dialog",count:v.length}),v.forEach((e=>{const s=ie().LU.createChildStore(t,{table:E().oo,id:e});zu().D({environment:u,guestUserStore:s,store:t})})),y([])}})}),[v,u,t]),k=!C.some((e=>v.includes(e.id))),[I,D]=(0,i.useState)(rg),P=(0,i.useCallback)((()=>{D(I+rg)}),[I]),R=I<C.length,_=C.slice(0,I);return{environment:u,tableStyles:h,styles:g,sortState:x,setSortState:b,selectedRowIds:v,setSelectedRowIds:y,rows:_,searchQuery:A,onClickApprove:M,onClickDecline:T,isApproveButtonLoading:!1,canEditMembership:p,columnRenderInfo:m,isSubscribed:w,shouldHideActions:k,shouldShowRequest:d,canAdmin:c,guestsCount:C.length,shouldShowLoadMore:R,onLoadMore:P}}({spaceStore:t,domainFilterValues:s,internalDomains:n});return(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{style:c.headerContainer,children:[w&&M?(0,ae.jsxs)("div",{style:c.titleContainer,children:[(0,ae.jsx)("span",{children:(0,ae.jsx)(f().sA,{id:"peopleSectionguestsTab.activeguests.title",defaultMessage:"Active"})}),(0,ae.jsx)("span",{style:c.titleNumber,children:T})]}):void 0,p.length>0&&!C&&(0,ae.jsxs)("div",{style:c.actionsContainer,children:[(0,ae.jsx)(Vt().p,{style:c.actionLeftButton,onClick:x,isLoading:v,children:(0,ae.jsxs)("div",{style:c.buttonContainerApprove,children:[(0,ae.jsx)("div",{style:c.buttonIcon,children:(0,Tr().m)({width:20,height:16})}),(0,ae.jsx)("div",{style:c.buttonText,children:(0,ae.jsx)(f().sA,{id:"spaceSettings.peopleSection.guestsTable.bulkUpgrade",defaultMessage:"Upgrade {numberOfRequests, plural, one {1 guest} other {{numberOfRequests} guests}} to {isSubscribed, select, true {member} other {admin}}",values:{numberOfRequests:p.length,isSubscribed:A}})})]})}),(0,ae.jsx)("div",{style:c.buttonDivider}),(0,ae.jsx)(Vt().p,{style:c.actionRightButton,onClick:b,children:(0,ae.jsxs)("div",{style:c.buttonContainerDecline,children:[(0,ae.jsx)("div",{style:{...c.buttonIcon,paddingTop:3},children:(0,Yn()._)({width:20,height:16})}),(0,ae.jsx)("div",{style:c.buttonText,children:(0,ae.jsx)(f().sA,{id:"spaceSettings.peopleSection.guestsTable.bulkDecline",defaultMessage:"Remove from workspace"})})]})})]})]}),(0,ae.jsxs)("div",{style:{marginTop:w&&M?4:-1},children:[(0,ae.jsx)(he().WE,{allowHorizontalScroll:y,setStickyHeaderRow:!0,columnRenderInfo:j,rows:jg(h,u),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:u,onSortStateChanged:g,loadMoreMethod:k?{type:"button",onLoadMore:I}:void 0,renderNoRowsComponent:()=>(0,ae.jsx)(be().A,{isSmall:!0,style:c.emptyMessage,children:S?(0,ae.jsx)(f().sA,{id:"peopleSectionGuestsTab.emptySearch",defaultMessage:"No search results"}):(0,ae.jsx)(f().sA,{id:"peopleSectionGuestsTab.emptyRow",defaultMessage:"No guests"})}),styles:d,multiselect:y?{header:{isDisabled:0===h.length,isSelected:p.length>0&&p.length===h.length,onClick:()=>{p.length===h.length?(m([]),Su().Y1(o,{from:"guests",action:"deselect_all",row_count:p.length})):(m(h.map((e=>e.id))),Su().Y1(o,{from:"guests",action:"select_all",row_count:h.length}))}},row:{getDisabledState:()=>!1,getSelectedState:e=>p.includes(e.id),onClick:e=>{m((t=>t.includes(e.id)?(Su().Y1(o,{from:"guests",action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(Su().Y1(o,{from:"guests",action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0}),(0,ae.jsx)(Qu,{})]})]})}const bg={id:"user",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionGuestsTab.user",defaultMessage:"User"})}),renderCell:e=>(0,ae.jsx)(ug,{userId:e.user.userId,spaceStore:e.spaceStore,isInternalGuest:e.isInternalGuest}),widthData:{width:210},sortable:!0},vg={id:"access",headerTitle:(0,ae.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionGuestsTab.access",defaultMessage:"Access"})}),renderCell:e=>(0,ae.jsx)(ag,{guest:e.user,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:180},sortable:!1},yg={id:"actions",headerTitle:(0,ae.jsx)(ae.Fragment,{}),renderCell:e=>(0,ae.jsx)($u,{userId:e.user.userId,spaceStore:e.spaceStore,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:300},sortable:!1};function jg(e,t){let{sortAscending:s}=t;const i=h().Ul(e,(e=>e.email));return s||i.reverse(),i}var Ag=()=>s(762295),Cg=()=>s(916480);const wg=(0,Mt().wt)("checkMarkShield",{viewBox:"0 0 10 11",svg:(0,ae.jsx)("path",{d:"M5.08789 10.4893C5.03906 10.4893 4.9821 10.4795 4.91699 10.46C4.85514 10.4437 4.79167 10.4193 4.72656 10.3867C4.02669 10.0189 3.43262 9.68522 2.94434 9.38574C2.45931 9.08952 2.06868 8.79655 1.77246 8.50684C1.47624 8.21712 1.25977 7.90462 1.12305 7.56934C0.989583 7.23405 0.922852 6.84831 0.922852 6.41211V2.8623C0.922852 2.52051 0.986328 2.26335 1.11328 2.09082C1.24023 1.91829 1.45345 1.77018 1.75293 1.64648C1.84733 1.60742 1.98405 1.55534 2.16309 1.49023C2.34212 1.42188 2.54069 1.35026 2.75879 1.27539C2.98014 1.19727 3.19987 1.12077 3.41797 1.0459C3.63932 0.971029 3.83789 0.904297 4.01367 0.845703C4.19271 0.787109 4.32617 0.743164 4.41406 0.713867C4.52148 0.681315 4.63379 0.655273 4.75098 0.635742C4.87142 0.616211 4.98372 0.606445 5.08789 0.606445C5.19206 0.606445 5.30436 0.616211 5.4248 0.635742C5.5485 0.655273 5.66243 0.681315 5.7666 0.713867C5.85449 0.743164 5.98633 0.787109 6.16211 0.845703C6.34115 0.904297 6.53971 0.971029 6.75781 1.0459C6.97591 1.12077 7.19564 1.19727 7.41699 1.27539C7.63835 1.35026 7.83854 1.42025 8.01758 1.48535C8.19661 1.55046 8.33333 1.60417 8.42773 1.64648C8.72721 1.77018 8.9388 1.91829 9.0625 2.09082C9.18945 2.26335 9.25293 2.52051 9.25293 2.8623V6.41211C9.25293 6.84831 9.1862 7.23568 9.05273 7.57422C8.92253 7.91276 8.70931 8.23014 8.41309 8.52637C8.12012 8.81934 7.73112 9.11393 7.24609 9.41016C6.76107 9.70638 6.16374 10.0319 5.4541 10.3867C5.389 10.4193 5.32389 10.4437 5.25879 10.46C5.19694 10.4795 5.13997 10.4893 5.08789 10.4893ZM4.55078 7.73047C4.6582 7.73047 4.75586 7.70605 4.84375 7.65723C4.9349 7.60514 5.01302 7.5319 5.07812 7.4375L7.34863 3.9707C7.3877 3.90885 7.41862 3.84538 7.44141 3.78027C7.46745 3.71517 7.48047 3.65169 7.48047 3.58984C7.48047 3.4401 7.4235 3.31641 7.30957 3.21875C7.19889 3.12109 7.07031 3.07227 6.92383 3.07227C6.73177 3.07227 6.57064 3.17643 6.44043 3.38477L4.54102 6.40723L3.68652 5.3623C3.62142 5.28092 3.55306 5.22233 3.48145 5.18652C3.41309 5.15072 3.33333 5.13281 3.24219 5.13281C3.0957 5.13281 2.96875 5.18652 2.86133 5.29395C2.75391 5.39811 2.7002 5.52507 2.7002 5.6748C2.7002 5.74642 2.71322 5.81478 2.73926 5.87988C2.7653 5.94499 2.80599 6.01172 2.86133 6.08008L4.00391 7.44727C4.08203 7.54167 4.16504 7.61328 4.25293 7.66211C4.34082 7.70768 4.4401 7.73047 4.55078 7.73047Z"})}),Mg=(0,Mt().wt)("globe4",{viewBox:"0 0 12 12",svg:(0,ae.jsx)("path",{d:"M5.99512 10.5156C5.64355 10.5156 5.31315 10.4001 5.00391 10.1689C4.69792 9.94108 4.42773 9.62207 4.19336 9.21191C3.96224 8.7985 3.77995 8.31673 3.64648 7.7666C3.51302 7.21647 3.44629 6.6224 3.44629 5.98438C3.44629 5.3431 3.51302 4.7474 3.64648 4.19727C3.77995 3.64388 3.96224 3.16211 4.19336 2.75195C4.42448 2.33854 4.69466 2.01628 5.00391 1.78516C5.31315 1.55404 5.64355 1.43848 5.99512 1.43848C6.34993 1.43848 6.68197 1.55404 6.99121 1.78516C7.30046 2.01628 7.57064 2.33854 7.80176 2.75195C8.03613 3.16211 8.21842 3.64388 8.34863 4.19727C8.47884 4.7474 8.54395 5.3431 8.54395 5.98438C8.54395 6.6224 8.47721 7.21647 8.34375 7.7666C8.21354 8.31673 8.03125 8.7985 7.79688 9.21191C7.56576 9.62207 7.29557 9.94108 6.98633 10.1689C6.68034 10.4001 6.34993 10.5156 5.99512 10.5156ZM5.99512 2.15137C5.76725 2.15137 5.5459 2.25553 5.33105 2.46387C5.11947 2.6722 4.92904 2.95703 4.75977 3.31836C4.59375 3.67643 4.46191 4.08496 4.36426 4.54395C4.2666 5.00293 4.21777 5.48307 4.21777 5.98438C4.21777 6.48242 4.2666 6.95931 4.36426 7.41504C4.46191 7.87077 4.59375 8.27767 4.75977 8.63574C4.92904 8.99382 5.11947 9.27702 5.33105 9.48535C5.5459 9.69368 5.76725 9.79785 5.99512 9.79785C6.22624 9.79785 6.44759 9.69368 6.65918 9.48535C6.87402 9.27702 7.06445 8.99382 7.23047 8.63574C7.39974 8.27767 7.5332 7.87077 7.63086 7.41504C7.72852 6.95931 7.77734 6.48242 7.77734 5.98438C7.77734 5.48307 7.72852 5.00293 7.63086 4.54395C7.5332 4.08496 7.39974 3.67643 7.23047 3.31836C7.06445 2.95703 6.87402 2.6722 6.65918 2.46387C6.44759 2.25553 6.22624 2.15137 5.99512 2.15137ZM5.61914 1.50684H6.37598V10.4229H5.61914V1.50684ZM5.99512 7.47363C6.51921 7.47363 7.01562 7.51432 7.48438 7.5957C7.95312 7.67708 8.37142 7.79427 8.73926 7.94727C9.1071 8.10026 9.40007 8.2793 9.61816 8.48438L9.04199 8.96289C8.84017 8.8099 8.58464 8.67806 8.27539 8.56738C7.9694 8.45671 7.62272 8.3737 7.23535 8.31836C6.84798 8.25977 6.43457 8.23047 5.99512 8.23047C5.55892 8.23047 5.14714 8.25977 4.75977 8.31836C4.3724 8.3737 4.02409 8.45671 3.71484 8.56738C3.40885 8.67806 3.15332 8.8099 2.94824 8.96289L2.37207 8.48438C2.59342 8.2793 2.88802 8.10026 3.25586 7.94727C3.6237 7.79427 4.04199 7.67708 4.51074 7.5957C4.97949 7.51432 5.47428 7.47363 5.99512 7.47363ZM10.4189 5.59375V6.35059H1.57617V5.59375H10.4189ZM5.99512 4.5C5.47428 4.5 4.97949 4.45931 4.51074 4.37793C4.04199 4.29329 3.6237 4.17611 3.25586 4.02637C2.88802 3.87337 2.59342 3.69434 2.37207 3.48926L2.94824 3.00586C3.15332 3.16211 3.41048 3.29557 3.71973 3.40625C4.02897 3.51367 4.37728 3.59668 4.76465 3.65527C5.15202 3.71387 5.56217 3.74316 5.99512 3.74316C6.43457 3.74316 6.84798 3.71387 7.23535 3.65527C7.62272 3.59668 7.9694 3.51367 8.27539 3.40625C8.58464 3.29557 8.84017 3.16211 9.04199 3.00586L9.61816 3.48926C9.40007 3.69434 9.1071 3.87337 8.73926 4.02637C8.37142 4.17611 7.95312 4.29329 7.48438 4.37793C7.01562 4.45931 6.51921 4.5 5.99512 4.5ZM5.99512 11.1309C5.28874 11.1309 4.62467 10.9958 4.00293 10.7256C3.38118 10.4587 2.83268 10.0876 2.35742 9.6123C1.88216 9.1403 1.50944 8.59342 1.23926 7.97168C0.972331 7.34993 0.838867 6.68424 0.838867 5.97461C0.838867 5.26823 0.972331 4.60417 1.23926 3.98242C1.50944 3.36068 1.88053 2.81217 2.35254 2.33691C2.8278 1.86165 3.3763 1.49056 3.99805 1.22363C4.62305 0.953451 5.28874 0.818359 5.99512 0.818359C6.7015 0.818359 7.36556 0.953451 7.9873 1.22363C8.6123 1.49056 9.16081 1.86165 9.63281 2.33691C10.1081 2.81217 10.4808 3.36068 10.751 3.98242C11.0212 4.60417 11.1562 5.26823 11.1562 5.97461C11.1562 6.68424 11.0212 7.34993 10.751 7.97168C10.4808 8.59342 10.1081 9.1403 9.63281 9.6123C9.16081 10.0876 8.61393 10.4587 7.99219 10.7256C7.37044 10.9958 6.70475 11.1309 5.99512 11.1309ZM5.99512 10.1396C6.56803 10.1396 7.10514 10.0306 7.60645 9.8125C8.10775 9.5944 8.55046 9.29492 8.93457 8.91406C9.31868 8.52995 9.61816 8.08724 9.83301 7.58594C10.0511 7.08138 10.1602 6.54427 10.1602 5.97461C10.1602 5.40495 10.0511 4.86947 9.83301 4.36816C9.61816 3.86361 9.31868 3.4209 8.93457 3.04004C8.55046 2.65592 8.10612 2.35482 7.60156 2.13672C7.10026 1.91862 6.56478 1.80957 5.99512 1.80957C5.42546 1.80957 4.88835 1.91862 4.38379 2.13672C3.88249 2.35482 3.43978 2.65592 3.05566 3.04004C2.6748 3.4209 2.37533 3.86361 2.15723 4.36816C1.94238 4.86947 1.83496 5.40495 1.83496 5.97461C1.83496 6.54427 1.94238 7.08138 2.15723 7.58594C2.37533 8.08724 2.6748 8.52995 3.05566 8.91406C3.43978 9.29492 3.88249 9.5944 4.38379 9.8125C4.88835 10.0306 5.42546 10.1396 5.99512 10.1396Z"})});var Tg=()=>s(786741),kg=()=>s(266178);const Ig=(0,f().YK)({infoTitle:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.title",defaultMessage:"Find teammates more easily by filtering to your workspace's email domains"},infoDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.description",defaultMessage:"Upgrade these guests to members for better collaboration and reduced page-by-page permissions."},emailDomainTooltip:{defaultMessage:"Your workspace’s email domains include allowed email domains, verified domains, and workspace owner email domains.",id:"spacePermissionsSettings.guestsTab.internalGuestBanner.tooltip"},overLimitTitle:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.title",defaultMessage:"Your workspace is over the {limit}-guest limit"},upsellDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.upselldescription",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, <upgradelink>upgrade your plan</upgradelink> or <saleslink>reach out to sales</saleslink>."},contactSalesDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.contactSales.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, <saleslink>reach out to sales</saleslink>."},salesAssistedDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.salesAssisted.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, reach out to your account manager."},nonAdminTooltip:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.nonAdmin.tooltip",defaultMessage:"New users can continue to be added as members. To resume adding guests, contact your workspace owner to upgrade or remove existing guests from your workspace."}}),Dg={warning_upsell:{iconGroup:Ag().A,tint:"yellow",label:Ig.overLimitTitle,description:Ig.upsellDescription,tooltip:Ig.emailDomainTooltip},warning_contact_sales:{iconGroup:Ag().A,tint:"yellow",label:Ig.overLimitTitle,description:Ig.contactSalesDescription,tooltip:Ig.emailDomainTooltip},warning_sales_assisted:{iconGroup:Ag().A,tint:"yellow",label:Ig.overLimitTitle,description:Ig.salesAssistedDescription,tooltip:Ig.emailDomainTooltip},warning_nonadmin:{iconGroup:Ag().A,tint:"yellow",label:Ig.overLimitTitle,tooltip:Ig.nonAdminTooltip},info:{iconGroup:cg().u,tint:"gray",label:Ig.infoTitle,description:Ig.infoDescription,tooltip:Ig.emailDomainTooltip}};function Pg(e){let{spaceStore:t,internalDomains:s,domainFilterValues:i,setDomainFilterValues:n}=e;const a=(0,wu().r1)({spaceStore:t}),o=s.length>0;if(!o)return null;const r=o&&a,l=(0,ae.jsx)(Rg,{spaceStore:t});return r||l?(0,ae.jsxs)(Dt().Y1,{padding:"16px 0px",gap:16,children:[l,r&&(0,ae.jsx)(_g,{internalDomains:s,domainFilterValues:i??[],setDomainFilterValues:n})]}):null}function Rg(e){let{spaceStore:t}=e;const s=function(e){let{spaceStore:t}=e;const s=(0,a().v3)(),i=(0,wu().r1)({spaceStore:t}),n=s.currentUser.id,o=t.id,r=(0,qt()._X)({name:"internal_guests",spaceId:o,userId:n,amount:0}),l=(0,zt().q)();if(!r)return null;return(0,zs().N9)(r,{available:()=>i?{...Dg.info,messageValues:{}}:null,unavailable:e=>{let{limit:t,upsell:s}=e;return i?"sales_assisted"===l?{...Dg.warning_sales_assisted,messageValues:{limit:t.total}}:"none"===s.type||"enterprise"===s.product&&"sales_eligible"===l?{...Dg.warning_contact_sales,messageValues:{limit:t.total,saleslink:e=>(0,ae.jsx)(yi().A,{onClick:()=>(0,Ut().lK)({initialQuestion:"manage_guests",openedFrom:"people_guest_limit_banner"}),children:e})}}:"product"===s.type?{...Dg.warning_upsell,messageValues:{limit:t.total,saleslink:e=>(0,ae.jsx)(yi().A,{onClick:()=>(0,Ut().lK)({initialQuestion:"manage_guests",openedFrom:"people_guest_limit_banner"}),children:e}),upgradelink:e=>(0,ae.jsx)(yi().A,{onClick:()=>{yt().A.setState({...yt().A.state,currentTab:"plans",defaultSubtab:void 0})},children:e})}}:(0,Rs().HB)(s):{...Dg.warning_nonadmin,messageValues:{limit:t.total}}}})}({spaceStore:t});if(!s)return null;const i=(0,ae.jsx)(xe().A,{style:{width:250},textWrap:!0,renderTooltip:()=>(0,ae.jsx)(f().sA,{...s.tooltip}),originGap:6,placement:ye().W.Bottom,alignment:ye().C.Start,render:e=>(0,ae.jsx)("div",{style:{paddingLeft:3,display:"inline-block",verticalAlign:"text-bottom"},...e,children:(0,Hn().$)({width:14})})});return(0,ae.jsx)(Tg().I,{children:(0,ae.jsx)(no().l,{iconGroup:s.iconGroup,display:"inline",tint:s.tint,label:(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(f().sA,{...s.label,values:s.messageValues}),s.description?void 0:i]}),description:s.description&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(f().sA,{...s.description,values:s.messageValues}),i]})})})}function _g(e){let{internalDomains:t,domainFilterValues:s,setDomainFilterValues:i}=e;const n=[...t.map((e=>({key:e.url,value:`${e.url}`,title:Bg({domain:`${e.url}`})}))),{key:"other",value:"other",title:Bg({domain:"other"})}];return(0,ae.jsx)(kg().uI,{pillIcon:Cg().b,pillTitle:s?(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.guestsTab.internalDomainFilter.filtered",defaultMessage:"Email domain: {domainFilter}",values:{domainFilter:s.join(", ")}}):(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.guestsTab.internalDomainFilter.placeholder",defaultMessage:"Email domain"}),selectedItems:s,setSelectedItems:e=>{i(e)},items:n})}function Bg(e){let{domain:t}=e;return(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["other"===t?(0,ae.jsx)(f().sA,{defaultMessage:"Other",id:"spacePermissionsSettings.guestsTab.internalDomainFilter.otherOptionLabel"}):`@${t}`,(0,ae.jsx)("div",{style:{paddingLeft:5},children:"other"===t?Mg({width:14}):wg({width:14})})]})}var Eg=()=>s(51082),Ug=()=>s(365928),Lg=()=>s(780942);function Og(e){let{request:t,shouldDisableInteraction:s,requestType:n,handleApprove:o,handleDecline:r}=e;const d=function(e){let{shouldDisableInteraction:t}=e;return(0,l().IS)((e=>({approveButton:{background:e.outlineBlueButtonHoveredBackground,color:e.blueColor,fontWeight:510,fontSize:14,borderRadius:4,paddingLeft:10,paddingRight:10},declineButton:{marginRight:10,borderRadius:4,paddingLeft:10,paddingRight:10,color:e.text.secondary},container:{opacity:t?.5:1,display:"flex",width:"100%",justifyContent:"flex-end"}})),[t])}({shouldDisableInteraction:s}),[c,u]=(0,i.useState)(!1),g=(0,a().v3)(),p=(0,i.useCallback)((()=>{Su().jR(g,{from:`${n}_request`,button_name:"decline"}),r(t)}),[g,n,t,r]),m=(0,i.useCallback)((async()=>{u(!0),Su().jR(g,{from:`${n}_request`,button_name:"approve"}),await o(t),u(!1)}),[g,t,n,o]);return(0,ae.jsxs)("div",{style:d.container,children:[(0,ae.jsx)("div",{children:(0,ae.jsx)(Vt().p,{style:d.declineButton,onClick:p,disabled:s,children:(0,ae.jsx)(f().sA,{id:"spaceSettings.peopleSection.requestsTable.Decline",defaultMessage:"Decline"})})}),(0,ae.jsx)("div",{children:(0,ae.jsx)(Vt().p,{style:d.approveButton,onClick:m,isLoading:c,disabled:s,children:(0,ae.jsx)(f().sA,{id:"spaceSettings.peopleSection.requestsTable.approve",defaultMessage:"Approve"})})})]})}function Wg(e){const{isModalOpen:t,handleClickDecline:s,handleClickDismiss:n,requestType:o,requests:l}=e,d=function(e,t,s){const n=(0,a().v3)();return(0,i.useCallback)((()=>{s(),Su().jR(n,{from:"member"===e?"member_request":"guest_request",button_name:"dismiss_in_dialog",count:t.length})}),[s,n,t,e])}(o,l,n),c=(0,f().tz)(),u=(0,r().K8)((()=>{var e;return null===(e=l[0])||void 0===e||null===(e=e.createdByActorsWithReason[0])||void 0===e?void 0:e.actor.getDisplayName(c)}),[l,c]),g=(0,r().K8)((()=>{var e;return null===(e=l[0])||void 0===e?void 0:e.forActor.email}),[l]);return 0===l.length?null:(0,ae.jsx)(Ju,{isModalOpen:t,handleDismiss:d,handleConfirm:()=>s(l),title:(0,ae.jsx)(f().sA,{id:"RequestBulkDeclineConfirmationDialog.title",defaultMessage:"Decline {numberOfRequests, plural, one {{requestType} request for {firstRequestEmail}} other {{numberOfRequests} {requestType} requests}}?",values:{numberOfRequests:l.length,requestType:o,firstRequestEmail:g}}),description:(0,ae.jsx)(f().sA,{id:"RequestBulkDeclineConfirmationDialog.description",defaultMessage:"{numberOfRequests, plural, one {To add them as a {requestType} in the future, {inviter} must resubmit a request, or an admin must invite them} other {Requests must be resubmitted, or an admin must add them as {isMemberRequest, select, true {members} other {guests}} in the future}}.",values:{numberOfRequests:l.length,requestType:o,isMemberRequest:"member"===o,inviter:u}}),ctaText:(0,ae.jsx)(f().sA,{id:"RequestBulkDeclineConfirmationDialog.decline",defaultMessage:"Decline"})})}function zg(e){let{createdByActorsWithReason:t,latestRequestTime:s}=e;return(0,ae.jsx)("div",{style:{width:241,maxHeight:600,overflowY:"auto",whiteSpace:"pre-wrap",padding:"12px 12px 12px 12px"},children:t.map((e=>(0,ae.jsx)(qg,{createdByActorWithReason:e,latestRequestTime:s},e.actor.id)))})}function qg(e){let{createdByActorWithReason:t,latestRequestTime:s}=e;const{requestorName:i,reason:n,actor:a,styles:o}=function(e){let{createdByActorWithReason:t}=e;const{actor:s,reason:i}=t,n=(0,f().tz)(),a=(0,r().K8)((()=>s.getDisplayName(n)),[n,s]),o=(0,l().IS)((e=>({avatar:{width:24,height:24},metadata:{display:"flex",alignItems:"center",gap:6,flex:"1 0 0"},userName:{textOverflow:"ellipsis",fontSize:14,fontWeight:510,overflow:"hidden",width:100,whiteSpace:"nowrap"},timestamp:{color:e.text.tertiary,textAlign:"right",fontSize:12,fontWeight:400,lineHeight:"15px"},header:{display:"flex",alignItems:"center",gap:10},reason:{paddingLeft:30,fontSize:14,fontWeight:400,color:e.text.primary,letterSpacing:"-0.154px",display:"inline-block",overflowWrap:"break-word",inlineSize:200},noReason:{color:e.text.quaternary}})),[]);return{requestorName:a,reason:i,actor:s,styles:o}}({createdByActorWithReason:t});return(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{style:o.header,children:[(0,ae.jsx)(Rn().A,{hasTooltip:!0,userValue:a,style:o.avatar,size:24,avatarShouldShowShadow:!1}),(0,ae.jsxs)("div",{style:o.metadata,children:[(0,ae.jsx)("div",{style:o.userName,children:i}),(0,ae.jsx)(be().A,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:o.timestamp,children:(0,La().nl)(s)})]})]}),(0,ae.jsx)("span",{style:o.reason,children:n||(0,ae.jsx)("div",{style:o.noReason,children:(0,ae.jsx)(f().sA,{id:"requestReasonContent.noReason",defaultMessage:"No message"})})})]})}function Fg(e){let{request:t,shouldDisableInteraction:s,requestType:i}=e;const{styles:n,firstRequestorName:o,numberOfRequestors:d}=function(e){let{request:t,shouldDisableInteraction:s}=e;const i=(0,l().IS)((e=>({firstRequestorName:{color:e.text.secondary,opacity:s?.5:1,maxWidth:118,...S().RC},buttonSuffix:{color:e.text.tertiary,paddingLeft:4},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[s]),n=(0,a().v3)(),o=(0,f().tz)(),d=(0,r().K8)((()=>{if(0===t.createdByActorsWithReason.length)return;return new(ie().LU)(n,{table:E().oo,id:t.createdByActorsWithReason[0].actor.id}).getDisplayName(o)}),[n,o,t.createdByActorsWithReason]);return{styles:i,firstRequestorName:d,numberOfRequestors:t.createdByActorsWithReason?t.createdByActorsWithReason.length:0}}({request:t,shouldDisableInteraction:s}),c=(0,a().v3)();return void 0===o||0===d?null:(0,ae.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,onClick:()=>{Su().jR(c,{from:`${i}_request`,button_name:"open_requested_by"})},renderOrigin:e=>(0,ae.jsx)(Vt().p,{...e,disabled:s,children:(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("span",{style:n.firstRequestorName,title:o,children:o}),(0,ae.jsx)("span",{style:n.buttonSuffix,children:d>1?(0,ae.jsxs)("div",{children:["+",d-1]}):null}),(0,Ml().b)(n.chevron)]})}),render:()=>(0,ae.jsx)(zg,{createdByActorsWithReason:t.createdByActorsWithReason,latestRequestTime:t.accessRequest.created_time})})}function Ng(e){let{request:t,spaceStore:s,shouldDisableInteraction:i}=e;const{accessRequest:n,forActor:a}=t,o=function(e){let{accessRequest:t}=e;return(0,r().K8)((()=>t.isGuestInviteRequest()?t.getAttributes().permission_records_and_roles.map((e=>e.id)):[]),[t])}({accessRequest:n});return(0,ae.jsx)(ng,{pageIds:o,guestUserId:a.id,shouldDisableInteraction:i,from:"guest_request"})}var Gg=()=>s(218357);function Kg(e){let{spaceStore:t,request:i}=e;const{teamStores:n}=function(e){let{request:{accessRequest:t},spaceStore:s}=e;const i=(0,Ls().useTeamsFromCache)(s),n=(0,r().K8)((()=>{var e,n;const a=i.filter((e=>e.isDefault())),o=null===(e=t.getAttributes())||void 0===e?void 0:e.origin_table,r=null===(n=t.getAttributes())||void 0===n?void 0:n.origin_id;if(o&&r){const e=ie().h4.createChildStore(s,{table:Gg().yK,id:r});a.includes(e)||a.push(e)}return a}),[t,s,i]);return{teamStores:n}}({request:i,spaceStore:t});return(0,ae.jsx)(s(129329).A,{teamStores:n,from:"member_request"})}function Vg(e){let{request:t,spaceStore:s}=e;const{relativeDate:i,email:n,userStore:a,styles:o}=function(e){let{request:{accessRequest:t,forActor:s},spaceStore:i}=e;const n=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",fontSize:S().J.UIRegular.desktop,gap:10,flex:"1 0 0",maxWidth:50},userAvatar:{},title:{height:17,alignSelf:"stretch",fontSize:S().J.UIRegular.desktop,fontStyle:"normal",fontWeight:510,lineHeight:"18px",maxWidth:160,...S().RC},subtitle:{height:17,alignSelf:"stretch",fontSize:S().J.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px",color:e.text.secondary,maxWidth:160,...S().RC}})),[]),a=ie().LU.createChildStore(i,{table:E().oo,id:s.id}),{email:o}=(0,r().K8)((()=>({email:a.getEmail()})),[a]),d=(0,f().tz)(),c=(0,r().K8)((()=>t.created_time),[t]),u=D().KQ(c,(0,Y().P)()),g=(0,Ba().ZF)({value:u,date_format:"relative",userTimeZone:(0,Y().P)(),intl:d,allowRelativeDates:!0});return{email:o,styles:n,userStore:a,relativeDate:g}}({request:t,spaceStore:s});return(0,ae.jsxs)("div",{style:o.container,children:[(0,ae.jsx)(Rn().A,{style:o.userAvatar,userStore:a,size:28}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{style:o.title,title:n,children:n}),(0,ae.jsx)("div",{style:o.subtitle,title:i,children:i})]})]})}function Hg(e){let{spaceStore:t,requests:s,requestType:n,domainFilterValues:o,internalDomains:d}=e;const c=(0,a().v3)(),[u,g]=(0,i.useState)(lg),[p,m]=(0,i.useState)({column:$g,sortAscending:!0}),S=(0,r().K8)((()=>dg().A.state.searchQuery),[]),[x,b]=(0,i.useState)([]),{rows:v,hasMore:y}=function(e){let{spaceStore:t,requestType:s,requests:i,searchQuery:n,domainFilters:a=[],internalDomains:o=[],limit:l,selectedRowIds:d,sortState:c}=e;const u=(0,r().K8)((()=>i.map((e=>{const i=ie().LU.createChildStore(t,{table:E().oo,id:e.forActor.id});return{id:e.accessRequest.id,spaceStore:t,isClickable:!1,request:e,requestType:s,email:i.getEmail(),shouldDisableInteraction:d.includes(e.accessRequest.id)}}))),[t,s,i,d]),g=(0,h().oE)(a),p=u.filter((e=>{var t;const s=e.email?(0,$r().zN)(e.email):void 0,i=(0,Ug().C7)(e.email,o);return!(n&&(null===(t=e.email)||void 0===t||!t.includes(n)))&&(!(g.length>0)||g.some((e=>"other"===e?!i:s===e)))})),m=function(e,t){let{sortAscending:s}=t;const i=(0,h().Ul)(e,(e=>e.email));s||i.reverse();return i}(p,c),f=m.length>l;return{rows:m.slice(0,l),hasMore:f}}({spaceStore:t,requestType:n,requests:s,domainFilters:(0,h().oE)(o),internalDomains:d,searchQuery:S,limit:u,sortState:p,selectedRowIds:x}),j=(0,i.useMemo)((()=>s.filter((e=>x.includes(e.accessRequest.id)))),[s,x]),[A,C]=(0,i.useState)(!1),[w,M]=(0,i.useState)(void 0),T=!v.some((e=>x.includes(e.id))),k=(0,i.useCallback)((async()=>{C(!0),Su().jR(c,{from:`${n}_request`,button_name:"bulk_approve",count:j.length});const e=await Xg({environment:c,spaceStore:t,requests:j.map((e=>e.accessRequest)),requestType:n,status:"approved"});C(!1),e&&b([])}),[c,t,j,n]),I=(0,i.useCallback)((()=>{Su().jR(c,{from:`${n}_request`,button_name:"bulk_decline",count:j.length}),M(j)}),[c,n,M,j]),D=(0,i.useCallback)((()=>M(void 0)),[M]),P=function(e){let{requestType:t,onClickApprove:s,onClickDecline:i}=e;return"member"===t?[$g,Yg,Qg,Zg({onClickApprove:s,onClickDecline:i})]:[$g,Jg,Qg,Zg({onClickApprove:s,onClickDecline:i})]}({requestType:n,onClickApprove:e=>Xg({environment:c,spaceStore:t,requests:[e.accessRequest],requestType:n,status:"approved"}),onClickDecline:e=>M([e])}),R=(0,l().IS)((e=>({container:{paddingBottom:30},headerContainer:{display:"flex",justifyContent:"space-between"},titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,minHeight:30,paddingTop:10},titleNumber:{color:e.text.tertiary},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},actionLeftButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},buttonContainerDecline:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.secondary},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonDivider:{width:1,background:e.stroke.secondary},actionRightButton:{borderRadius:"0px 4px 4px 0px",paddingLeft:0,paddingRight:0,height:30},noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},noRowText:{color:e.text.secondary,fontSize:14,fontWeight:400,textAlign:"center"}})),[]),_=function(e){return(0,l().IS)((t=>({...(0,he().rC)({columnRenderInfo:e,theme:t,containerMarginTop:0})})),[e])}(P);return 0===s.length?null:(0,ae.jsxs)("div",{style:R.container,children:[(0,ae.jsxs)("div",{style:R.headerContainer,children:[(0,ae.jsxs)("div",{style:R.titleContainer,children:[(0,ae.jsx)("div",{children:(0,ae.jsx)(f().sA,{id:"peopleSectionMembersTab.memberRequests.title",defaultMessage:"Requests"})}),(0,ae.jsx)("span",{style:R.titleNumber,children:s.length})]}),x.length>0&&!T&&(0,ae.jsxs)("div",{style:R.actionsContainer,children:[(0,ae.jsx)(Lg().p,{style:R.actionLeftButton,onClick:k,isLoading:A,children:(0,ae.jsxs)("div",{style:R.buttonContainerApprove,children:[(0,ae.jsx)("div",{style:R.buttonIcon,children:(0,Eg().P)({width:20,height:20})}),(0,ae.jsx)("div",{style:R.buttonText,children:(0,ae.jsx)(f().sA,{id:"spaceSettings.peopleSection.requestsTable.bulkApprove",defaultMessage:"Approve {numberOfRequests, plural, one {1 request} other {{numberOfRequests} requests}}",values:{numberOfRequests:x.length}})})]})}),(0,ae.jsx)("div",{style:R.buttonDivider}),(0,ae.jsx)(Lg().p,{style:R.actionRightButton,onClick:I,isLoading:!1,children:(0,ae.jsxs)("div",{style:R.buttonContainerDecline,children:[(0,ae.jsx)("div",{style:{...R.buttonIcon,paddingTop:3},children:Yu({width:20,height:20})}),(0,ae.jsx)("div",{style:R.buttonText,children:(0,ae.jsx)(f().sA,{id:"spaceSettings.peopleSection.requestsTable.bulkDecline",defaultMessage:"Decline"})})]})})]})]}),(0,ae.jsx)("div",{style:{marginTop:4},children:(0,ae.jsx)(he().WE,{allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:P,rows:v,showRowBorders:!0,hideHeaderRowPadding:!0,sortState:p,onSortStateChanged:m,renderNoRowsComponent:()=>(0,ae.jsx)("div",{style:R.noRowContainer,children:(0,ae.jsx)("div",{style:R.noRowText,children:(0,ae.jsx)(f().sA,{id:"peopleSectionRequestTable.emptySearch",defaultMessage:"No search results"})})}),styles:_,getStyleForRow:e=>{if(e.shouldDisableInteraction)return{backgroundColor:"rgba(35, 131, 226, 0.07)"}},loadMoreMethod:y?{type:"button",onLoadMore:()=>g(u+lg)}:void 0,multiselect:s.length>0?{header:{isDisabled:0===v.length,isSelected:x.length>0&&x.length===v.length,onClick:()=>{x.length===v.length?(b([]),Su().Y1(c,{from:`${n}_request`,action:"deselect_all",row_count:x.length})):(b(v.map((e=>e.id))),Su().Y1(c,{from:`${n}_request`,action:"select_all",row_count:v.length}))}},row:{getDisabledState:e=>!1,getSelectedState:e=>x.includes(e.id),onClick:e=>{b((t=>t.includes(e.id)?(Su().Y1(c,{from:`${n}_request`,action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(Su().Y1(c,{from:`${n}_request`,action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0})}),(0,ae.jsx)(Wg,{isModalOpen:(0,Rs().O9)(w),requestType:n,requests:w??[],handleClickDecline:async e=>{await Xg({environment:c,spaceStore:t,requests:e.map((e=>e.accessRequest)),requestType:n,status:"rejected"})&&b([]),M(void 0)},handleClickDismiss:D})]})}const $g={id:"user",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionRequestsTable.user",defaultMessage:"User"})}),renderCell:e=>(0,ae.jsx)(Vg,{request:e.request,spaceStore:e.spaceStore}),widthData:{width:219},sortable:!0},Yg={id:"teamspaces",headerTitle:(0,ae.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionRequestsTable.teamspaces",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,ae.jsx)(Kg,{spaceStore:e.spaceStore,request:e.request}),widthData:{width:175},sortable:!1},Jg={id:"pages",headerTitle:(0,ae.jsx)("div",{style:{paddingLeft:8,fontSize:14,minWidth:175,textAlign:"left"},children:(0,ae.jsx)(f().sA,{id:"peopleSectionRequestsTable.pages",defaultMessage:"Access"})}),renderCell:e=>(0,ae.jsx)(Ng,{request:e.request,spaceStore:e.spaceStore,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:175},sortable:!1},Qg={id:"requestBy",headerTitle:(0,ae.jsx)("div",{style:{paddingLeft:8,fontSize:14,minWidth:160,textAlign:"left"},children:(0,ae.jsx)(f().sA,{id:"peopleSectionRequestsTable.requestBy",defaultMessage:"Requested by"})}),renderCell:e=>(0,ae.jsx)(Fg,{request:e.request,shouldDisableInteraction:e.shouldDisableInteraction,requestType:e.requestType}),widthData:{width:120},sortable:!1};function Zg(e){let{onClickApprove:t,onClickDecline:s}=e;return{id:"actions",headerTitle:(0,ae.jsx)("div",{style:{minWidth:155}}),renderCell:e=>(0,ae.jsx)(Og,{request:e.request,shouldDisableInteraction:e.shouldDisableInteraction,requestType:e.requestType,handleApprove:t,handleDecline:s}),widthData:{width:100},sortable:!1}}async function Xg(e){let t,{environment:s,spaceStore:i,requests:n,requestType:a,status:o}=e;if(0===n.length)return!0;if("member"===a){const e=n.filter((e=>"guest_invite_request"!==e.getType())),a=n.filter((e=>"guest_invite_request"===e.getType())),r=await x().p4({environment:s,store:i,requests:e,status:o,from:"requests_center"}),l=await x().KB({environment:s,store:i,requests:a,status:o,from:"requests_center"});t={failedUsers:r.failedUsers.concat(l.failedUsers),resolvedUsers:r.resolvedUsers.concat(l.resolvedUsers)}}else"guest"===a?t=await x().aV({environment:s,requests:n,status:o,from:"requests_center"}):(0,Rs().HB)(a);const r=function(e){let{requestType:t,result:{resolvedUsers:s,failedUsers:i},status:n}=e;if("guest"===t&&"approved"===n&&s.length>0)return{label:(0,ae.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkApproveToast.guests",defaultMessage:"Approved {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}",values:{numberOfSuccesses:s.length,userEmail:s[0].getEmail()}})};if("guest"===t&&"approved"===n&&i.length>0)return{label:(0,ae.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkApproveToast.guests.failed",defaultMessage:"Failed approve {numberOfRequests, plural, one {guest request for {userEmail}} other {{numberOfRequests} guest requests}}, please try again.",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};if("guest"===t&&"rejected"===n&&s.length>0)return{label:(0,ae.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkDeclineToast.guests.success",defaultMessage:"Declined {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}",values:{numberOfSuccesses:s.length,userEmail:s[0].getEmail()}})};if("guest"===t&&"rejected"===n&&i.length>0)return{label:(0,ae.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkDeclineToast.guests.failed",defaultMessage:"Failed decline {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}, please try again.",values:{numberOfSuccesses:i.length,userEmail:i[0].getEmail()}})};if("member"===t&&"approved"===n&&s.length>0)return{label:(0,ae.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkApproveToast.members.success",defaultMessage:"Approved {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}",values:{numberOfRequests:s.length,userEmail:s[0].getEmail()}})};if("member"===t&&"approved"===n&&i.length>0)return{label:(0,ae.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkApproveToast.members.failed",defaultMessage:"Failed to approve {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}, please try again.",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};if("member"===t&&"rejected"===n&&s.length>0)return{label:(0,ae.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkDeclineToast.members.success",defaultMessage:"Declined {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}",values:{numberOfRequests:s.length,userEmail:s[0].getEmail()}})};if("member"===t&&"rejected"===n&&i.length>0)return{label:(0,ae.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkDeclineToast.members.failed",defaultMessage:"Failed to decline {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}, please try again.",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};return}({requestType:a,result:t,status:o});return r&&ta().D6(r),0===t.failedUsers.length}const ep=(0,f().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});function tp(){Bu().m({message:ep.updatingPermissions})}function sp(){Bu().V()}function ip(e){let{spaceStore:t}=e;const[s,n]=(0,i.useState)(),o=(0,a().v3)(),l=(0,Os().r)()??0,d=(0,r().K8)((()=>{const e=Lu().A.getData(o,{spaceId:t.id});return e?e.filter((e=>e.hasGuests)).map((e=>e.domain)):[]}),[o,t]),c=(0,Ss().fC)({spaceStore:t}),u=(0,wu().r1)({spaceStore:t}),g=(0,Ss().e6)({spaceStore:t,requestType:"guest"});return(0,Ss().Wz)({requestType:"guest",spaceStore:t}),(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Pg,{spaceStore:t,internalDomains:d,domainFilterValues:s,setDomainFilterValues:n}),c&&u&&(0,ae.jsx)(Hg,{requests:g,spaceStore:t,requestType:"guest",domainFilterValues:s,internalDomains:d}),l>0?(0,ae.jsx)(gg,{spaceStore:t,domainFilterValues:s??[],internalDomains:d}):(0,ae.jsx)("div",{children:(0,ae.jsx)(np,{})})]})}function np(){const e=(0,l().IS)((e=>({container:{marginTop:32,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",minHeight:296,width:"100%",border:`1px dashed ${e.accentColors.gray[300]}`,borderRadius:4,padding:16,gap:12},icon:{width:24,height:24}})),[]),t=(0,r().O$)(lt().AppStoreCurrentSpaceStore),s=(0,bu().J)();return(0,ae.jsxs)("div",{style:e.container,children:[(0,ae.jsx)(Pt().Q,{iconGroup:Ru,variantName:"fill",style:e.icon}),(0,ae.jsx)(Rt().D,{styleName:"UIRegular-14px/Medium",children:(0,ae.jsx)(f().sA,{id:"spaceSettings.people.guestsTab.noGuests",defaultMessage:"No guests yet"})}),s&&(0,ae.jsx)(ap,{spaceStore:t})]})}function ap(e){const{spaceStore:t}=e,s=(0,l().IS)((()=>({origin:{padding:"12px",height:32},importListButton:{height:28,borderRadius:4,border:void 0,width:"100%"},importListButtonContainer:{padding:"0 6px",alignItems:"center"}})),[]),i=(0,a().v3)();if(!t)return null;const n=(0,Eu().A)({onInviteClick:tp,onInviteComplete:sp,buttonStyle:s.importListButton,buttonContainerStyle:s.importListButtonContainer});return(0,ae.jsx)(Sa().Ay,{popupType:Uu().n.Popup,alignmentToOrigin:Sa().yP.Center,placementToOrigin:Sa().sx.Bottom,render:()=>(0,ae.jsx)(Ou().A,{importListItems:n}),renderOrigin:e=>(0,ae.jsx)(_t().A,{style:s.origin,...e,onClick:()=>{e.onClick(),_u().V(i,{source:"guests_tab"})},children:(0,ae.jsx)(f().sA,{id:"spaceSettings.people.guestsTab.importContacts",defaultMessage:"Import contacts"})})})}var op=()=>s(998959),rp=()=>s(446588),lp=()=>s(242297),dp=()=>s(731419);function cp(e){let{user:t,spaceStore:s,shouldDisableAction:n}=e;const{styles:o,handleRemoveMemberFromWorkspace:d,environment:c,isCurrentUser:u}=function(e){let{user:t,spaceStore:s}=e;const n=(0,l().IS)((e=>({container:{width:"100%",display:"flex",justifyContent:"flex-end"},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},upgradeButton:{},removeMenuDivider:{borderTop:e.stroke.secondary},removeButton:{color:Wu().l8[e.mode].red},upgradeIcon:{width:17,height:17}})),[]),o=(0,a().v3)(),d=(0,i.useCallback)((async()=>{const{currentUserSettingsStore:e}=lt().default.state;return e?await(0,dp().Vr)({user:t,spaceStore:s,environment:o,userSettingStore:e}):()=>{}}),[s,o,t]),c=(0,r().K8)((()=>{var e;return(null===(e=lt().default.state.currentUserStore)||void 0===e?void 0:e.id)===t.userId}),[t]);return{styles:n,handleRemoveMemberFromWorkspace:d,environment:o,isCurrentUser:c}}({user:t,spaceStore:s}),g=new(fa().A);return(0,ae.jsx)("div",{style:o.container,children:(0,ae.jsx)(Sa().Ay,{buttonPopupStore:g,popupType:Sa().z7.Popup,renderOrigin:e=>(0,ae.jsx)(Vt().p,{style:o.button,...e,children:(0,ae.jsx)(ae.Fragment,{children:(0,Ku().L)(o.buttonIcon)})}),onClick:()=>{Su().jR(c,{from:"member",button_name:"actions"})},disabled:n,render:()=>(0,ae.jsx)("div",{children:(0,ae.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:[{key:"remove",render:e=>(0,ae.jsx)(ya().A,{...e,style:o.removeMenuDivider}),items:[{key:"remove",render:e=>(0,ae.jsx)(Il().A,{...e,buttonStyle:o.removeButton,icon:(0,Yn()._)(o.upgradeIcon),title:(0,ae.jsx)(f().sA,{id:"peopleSectionmembersTab.removeMember",defaultMessage:"{isCurrentUser, select, true {Leave workspace} other {Remove from workspace}} ",values:{isCurrentUser:u}})}),action:async()=>{g.setState({open:!1}),await d(),Su().jR(c,{from:"member",button_name:"remove"})}}]}]})})})})}var up=()=>s(591130),gp=()=>s(518397),pp=()=>s(401382);function mp(e){let{shouldShowSearchHeader:t,sections:s,filterPlaceholder:n}=e;const o=(0,a().v3)(),[r,l]=(0,i.useState)(""),d=r,c=(0,ae.jsx)(ya().A,{isInput:!0,children:(0,ae.jsx)(pp().Ay,{value:d,onChange:(0,i.useCallback)((e=>{l(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:n&&O().A.formatMessage(n)})}),u={menuType:ma().gu.Popup,maxWidth:350,maxHeight:300,header:t?c:void 0};return(0,ae.jsx)(xa().A,{...u,children:(0,ae.jsx)(gp().A,{filter:d,context:{blocks:[],environment:o,publicEditMode:void 0},initialFocus:0,sections:s})})}const fp=(0,f().YK)({filterGroups:{defaultMessage:"Filter groups...",id:"GroupPopupContent.filterGroups"}});function hp(e){let{groups:t,spaceStore:s,spacePermissionsSettingsStore:i}=e;const n=t.map((e=>({group:e.group,numberOfGroupMembers:e.memberCount}))),a=(0,l().IS)((e=>({buttonTitle:{display:"flex",padding:"4px 6px 4px 8px",alignItems:"flex-start",gap:8,alignSelf:"stretch"},groupName:{color:e.text.primary,fontSize:14},groupMemberCount:{color:e.text.secondary,fontSize:12}})),[]),o=t.length>5;return(0,ae.jsx)(mp,{shouldShowSearchHeader:o,sections:[{key:"groups for member",render:e=>(0,ae.jsx)(ya().A,{...e}),actions:n.map((e=>{const{group:t,numberOfGroupMembers:n}=e;return{key:t.group_id,displayName:t.name,analyticsName:t.name??"unknown group",searchName:t.name,render:e=>(0,ae.jsx)(Il().A,{style:{padding:4},textWrapperStyle:{marginLeft:0,marginRight:0},title:(0,ae.jsxs)("div",{style:a.buttonTitle,children:[(0,ae.jsx)(Ga().B,{disabled:!0,bucket:"public",icon:t.icon?{pointer:s.pointer,icon:t.icon}:void 0,size:20,isEmptyPage:!1,title:t.name}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{style:a.groupName,children:t.name}),(0,ae.jsx)("div",{style:a.groupMemberCount,children:(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:n}})})]})]}),...e}),action:()=>{i.setState({...i.state,currentTab:gi().d.Groups})},closeParentMenu:!1}}))}],filterPlaceholder:fp.filterGroups})}function Sp(e){let{user:t,spaceStore:s,spacePermissionsSettingsStore:n,spacePermissionGroupIds:o}=e;const{styles:d,groups:c,numberOfGroups:u,firstGroupName:g,onClick:p}=function(e){let{spacePermissionGroupIds:t}=e;const s=(0,a().v3)(),n=(0,i.useCallback)((()=>{Su().jR(s,{from:"member",button_name:"open_groups"})}),[s]),o=(0,l().IS)((e=>({button:{marginRight:8},noGroups:{marginRight:8,color:e.text.tertiary},chevron:{width:10,marginLeft:4,fill:e.lightIconColor},noneGroupText:{color:e.text.tertiary},groupNameText:{color:e.text.secondary,maxWidth:100,...S().RC},groupNumberText:{color:e.text.secondary}})),[]),d=(0,f().tz)(),c=(0,r().K8)((()=>h().oE(t.map((e=>yu().A.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e)))))),[t]),u=c.length,g=u>0?(0,up().Pf)({groupName:c[0].group.name,intl:d}):void 0;return{styles:o,groups:c,numberOfGroups:u,firstGroupName:g,onClick:n}}({spacePermissionGroupIds:o});return(0,ae.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,onClick:p,renderOrigin:e=>(0,ae.jsx)(Vt().p,{disabled:0===u,style:0===u?d.noGroups:d.button,...e,children:0===u?(0,ae.jsx)("span",{style:d.noneGroupText,children:(0,ae.jsx)(f().sA,{id:"userGroupsCell.noGroups",defaultMessage:"None"})}):1===u?(0,ae.jsx)("span",{style:d.groupNameText,title:g,children:g}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:d.groupNumberText,children:u}),(0,Ml().b)(d.chevron)]})}),render:()=>(0,ae.jsx)(hp,{groups:c,spaceStore:s,spacePermissionsSettingsStore:n})})}var xp=()=>s(951514);function bp(e){let{user:t,spaceStore:s,maxWidth:n,shouldShowRemoveUserInRoleDropdown:o}=e;const d=(0,l().IS)((e=>({button:{color:e.text.secondary,maxWidth:n}})),[n]),c=(0,a().v3)(),{isPermissionSelectDisabled:u,currentUserId:g}=(0,r().K8)((()=>{let e=!0;return(s.canAdmin()||s.canEditMembership()&&(rp().NB(t.role)||t.userId===c.currentUser.id))&&(e=!1),{isPermissionSelectDisabled:e,currentUserId:c.currentUser.id}}),[s,c,t.role,t.userId]),p=(0,r().K8)((()=>lt().default.state.currentUserSettingsStore),[]),m=(0,f().tz)(),S=(0,r().K8)((()=>{const e=m.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),t="enterprise"===s.getSubscriptionTier();return h().oE(rp().Gb.filter((e=>!!o||"none"!==e)).map((i=>{if(t||"membership_admin"!==i)return{role:i,disabledInfo:!s.canAdmin()&&rp().EH(i)?{isDisabled:!0,disabledMessage:e}:void 0}})))}),[m,s,o]),x=(0,i.useCallback)((async()=>{const{currentUserSettingsStore:e}=lt().default.state;if(e)return await(0,dp().Vr)({user:t,spaceStore:s,environment:c,userSettingStore:e})}),[t,s,c]);return p?(0,ae.jsx)(xp().Ay,{role:t.role,table:bn().NX,type:"user_permission",disabled:u,isUserPermission:t.userId===g,upgradeButtonName:"space_permission_item",availableRoleItems:S,buttonStyle:d.button,onChange:async e=>{await dp().qb({member:t,newRole:e,currentUserSettingsStore:p,spaceStore:s,environment:c})},onClick:()=>{Su().jR(c,{from:"member",button_name:"open_role"})},onRemoveMemberClick:async()=>{await x()},onRemoveSelfClick:async()=>{await x()},from:"spaceSettings"}):null}function vp(e){let{user:t,spaceStore:s,shouldShowRemoveUserInRoleDropdown:i}=e;return(0,ae.jsx)("div",{children:(0,ae.jsx)(bp,{user:t,spaceStore:s,maxWidth:148,shouldShowRemoveUserInRoleDropdown:i})})}var yp=()=>s(947873);function jp(e){let{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:i}=e;return(0,r().K8)((()=>{const e=Nu().A.state.shouldUseEdgeCache,t=gt().default.checkGate({gateName:"edge_cache_plus_settings"});return e&&t}),[])?(0,ae.jsx)(Ap,{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:i}):(0,ae.jsx)(Dp,{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:i})}function Ap(e){let{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:n}=e;const o=(0,l().IS)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`}})),[]),d=(0,r().K8)((()=>dg().A.state.searchQuery),[]),[c,u]=(0,i.useState)({by:Tp.id,asc:!1}),g=(0,i.useMemo)((()=>({field:"user"===c.by?"name_normalized":"type",direction:c.asc?"asc":"desc"})),[c]),p=(0,Fu().n)({query:d??"",sort:g,filter:"members",limit:30}),m=(0,r().K8)((()=>null==p?void 0:p.rowsStore.state.rows),[p]),{columns:S,transformRow:x}=function(e){let{users:t,spaceStore:s,spacePermissionsSettingsStore:n}=e;const o=(0,r().K8)((()=>(0,ss().AK)()),[]),l=(0,r().K8)((()=>"on"===gt().default.getEligibleGroup({experimentId:"members_tab_remove_users_in_role_dropdown",defaultGroup:"control"})),[]),d=(0,wu().k4)({spaceStore:s}),c=(0,r().K8)((()=>s.canAdmin()),[s]),u=(0,i.useMemo)((()=>h().oE([Cp,wp,Mp,Tp,o?Ip:void 0,d&&!l?kp:void 0])),[d,o,l]),g=(0,a().v3)(),[{value:p}]=(0,qn().Yb)((async()=>{if(!c)return;const e=await U().callApi({eventName:"getRecentlyRemovedUsers",environment:g,data:{spaceId:s.id}});if("failed"===e.type)throw j().Qg(e),e;return e.data.recentlyRemovedMembers}),[s.id,g,c]),[m,f]=(0,i.useState)({});(0,qn().Yb)((async()=>{if(!t)return;const e=t.map((e=>e.id)),i=await U().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:g,data:{spaceId:s.id,userIds:e},headers:(0,R().WS)({cellId:void 0,spaceId:s.id})});"success"===i.type&&f((t=>{const s={...t,...i.data.userToGroupMap};for(const i of e)void 0===s[i]&&(s[i]=[]);return s}))}),[g,s.id,t],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3});const S=(0,i.useCallback)((e=>{var t;const i=(0,qu().dp)(s,e.id),a=i.getMembershipType()??e.membership_type;if(void 0===a||!(0,lp().MN)(a))return;const o=(0,lp().C4)(a);return{id:e.id,role:o,firstJoinedSpaceTime:e.first_joined_space_time,spaceStore:s,spaceUserStore:i,restorationStatus:(null==p||null===(t=p.find((t=>t.userId===e.id)))||void 0===t?void 0:t.restorationStatus)??void 0,spacePermissionsSettingsStore:n,spacePermissionGroupIds:m[e.id],shouldShowRemoveUserInRoleDropdown:l,shouldDisableAction:!(c||!d||"editor"!==o&&"membership_admin"!==o)}}),[p,c,d,l,s,n,m]);return{columns:u,transformRow:S}}({users:m,spaceStore:t,spacePermissionsSettingsStore:s});return(0,ae.jsxs)(ae.Fragment,{children:[n&&(0,ae.jsx)("div",{style:o.titleContainer,children:(0,ae.jsx)(f().sA,{id:"peopleSectionMembersTab.activeMembers.title",defaultMessage:"Active"})}),(0,ae.jsx)("div",{style:{marginTop:n?4:-1,height:"100%"},children:(0,ae.jsx)(Gu().M,{columns:S,listSource:p,transformRow:x,sort:c,onSortChange:u,rowHeight:42,allowHorizontalScroll:!0,renderEmpty:()=>(0,ae.jsx)(be().A,{isSmall:!0,style:o.emptyMessage,children:(0,ae.jsx)(f().sA,{id:"peopleSectionMembersTab.emptySearch",defaultMessage:"No search results"})})})})]})}const Cp={id:"user",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionMembersTable.userTable.user",defaultMessage:"User"})}),renderCell:e=>(0,ae.jsx)(ug,{userId:e.id,restorationStatus:e.restorationStatus,spaceStore:e.spaceStore}),widthData:{widthPercent:35,minWidth:250},sortable:!0,border:!0},wp={id:"teamspaces",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionMembersTable.userTable.teamspaces",defaultMessage:"Teamspaces"})}),headerCellStyle:{paddingLeft:8},renderCell:e=>e.spaceUserStore.isDefined()&&void 0!==e.spacePermissionGroupIds?(0,ae.jsx)(yp().A,{user:{userId:e.id,role:e.role,firstJoinedSpaceTime:e.firstJoinedSpaceTime},userPermissionGroupIds:new Set(e.spacePermissionGroupIds)}):(0,ae.jsx)(Pc().A,{style:{width:100,height:12,borderRadius:4,marginLeft:8}}),widthData:{widthPercent:20,minWidth:125},sortable:!1},Mp={id:"groups",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionMembersTable.userTable.groups",defaultMessage:"Groups"})}),headerCellStyle:{paddingLeft:8},renderCell:e=>void 0!==e.spacePermissionGroupIds?(0,ae.jsx)(Sp,{user:{userId:e.id,role:e.role,firstJoinedSpaceTime:e.firstJoinedSpaceTime},spaceStore:e.spaceStore,spacePermissionsSettingsStore:e.spacePermissionsSettingsStore,spacePermissionGroupIds:e.spacePermissionGroupIds}):(0,ae.jsx)(Pc().A,{style:{width:60,height:12,borderRadius:4,marginLeft:8}}),widthData:{widthPercent:20,minWidth:125},sortable:!1},Tp={id:"role",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionMembersTable.userTable.role",defaultMessage:"Role"})}),headerCellStyle:{paddingLeft:8},renderCell:e=>(0,ae.jsx)(vp,{user:{userId:e.id,role:e.role,firstJoinedSpaceTime:e.firstJoinedSpaceTime},spaceStore:e.spaceStore,shouldShowRemoveUserInRoleDropdown:e.shouldShowRemoveUserInRoleDropdown}),widthData:{widthPercent:25,minWidth:155},sortable:!0},kp={id:"actions",headerTitle:void 0,renderCell:e=>(0,ae.jsx)(cp,{user:{userId:e.id,role:e.role,firstJoinedSpaceTime:e.firstJoinedSpaceTime},spaceStore:e.spaceStore,shouldDisableAction:e.shouldDisableAction}),widthData:{width:51},sortable:!1},Ip={id:"joined",headerTitle:(0,ae.jsx)(f().sA,{id:"peopleSectionMembersTable.userTable.joined",defaultMessage:"Date added"}),renderCell:e=>(0,Ba().W_)(Number(e.firstJoinedSpaceTime),"medium",hi().locale),widthData:{width:118},sortable:!0};function Dp(e){let{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:n}=e;const o=(0,r().K8)((()=>"on"===gt().default.getEligibleGroup({experimentId:"members_tab_remove_users_in_role_dropdown",defaultGroup:"control"})),[]),d=(0,r().K8)((()=>{const e=Xi().subscriptionDataStoreInstance.state;return e?(0,is().Ye)(e):[]}),[]),{tableStyles:c,styles:u,sortState:g,setSortState:p,rows:m,membersCount:S,searchQuery:x,columnRenderInfo:b,shouldShowLoadMore:v,onLoadMore:y}=function(e){let{members:t,spaceStore:s,spacePermissionsSettingsStore:n,shouldShowRemoveUserInRoleDropdown:o}=e;const d=(0,a().v3)(),c=(0,r().K8)((()=>(0,ss().AK)()),[]),u=(0,wu().k4)({spaceStore:s}),g=(0,r().K8)((()=>s.canAdmin()),[s]),p=(0,r().K8)((()=>h().oE([Pp,Rp,_p,Bp,c?Up:void 0,u&&!o?Ep:void 0])),[u,c,o]),m=(0,l().IS)((e=>({...(0,he().rC)({columnRenderInfo:p,theme:e,containerMarginTop:0})})),[p]),S=(0,l().IS)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`}})),[]),[x,b]=(0,i.useState)({column:Bp,sortAscending:!1}),v=(0,f().tz)(),y=(0,r().K8)((()=>dg().A.state.searchQuery),[]),j=(0,wu().BV)({spaceStore:s,members:t}),A=(0,r().K8)((()=>s.getSpaceId()),[s]),[{value:C}]=(0,qn().Yb)((async()=>{const e=await U().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:d,data:{spaceId:A,userIds:t.map((e=>e.userId))},headers:(0,R().WS)({cellId:void 0,spaceId:A})});return"success"===e.type?e.data.userToGroupMap:{}}),[d,A,t],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),w=(0,r().K8)((()=>t.map((e=>{const t=ie().LU.createChildStore(s,{table:E().oo,id:e.userId}),i=null==j?void 0:j.find((t=>t.userId===e.userId));return{spaceStore:s,user:e,email:t.getEmail(),userName:t.getDisplayName(v),id:e.userId,isClickable:!1,userRole:e.role,spacePermissionsSettingsStore:n,firstJoinedSpaceTime:e.firstJoinedSpaceTime,shouldDisableAction:!(g||!u||"editor"!==e.role&&"membership_admin"!==e.role),restorationStatus:null==i?void 0:i.restorationStatus,spacePermissionGroupIds:(null==C?void 0:C[e.userId])||[],shouldShowRemoveUserInRoleDropdown:o}})).filter((e=>{var t,s;return void 0===y||(((null===(t=e.email)||void 0===t?void 0:t.includes(y))||(null===(s=e.userName)||void 0===s?void 0:s.includes(y)))??!1)}))),[s,t,v,y,g,u,n,j,C,o]),M=w.length,T=(0,r().K8)((()=>function(e,t){let{sortAscending:s,column:i}=t,n=e;switch(i.id){case"user":n=h().Ul(e,(e=>e.email));break;case"roles":n=h().Ul(e,(e=>rp().TE[e.userRole]))}s||n.reverse();return n}(w,x)),[w,x]),[k,I]=(0,i.useState)(og),D=(0,i.useCallback)((()=>{I(k+og)}),[k]),P=k<T.length,_=T.slice(0,k);return{tableStyles:m,styles:S,sortState:x,setSortState:b,rows:_,searchQuery:y,membersCount:M,columnRenderInfo:p,onLoadMore:D,shouldShowLoadMore:P}}({members:d,spaceStore:t,spacePermissionsSettingsStore:s,shouldShowRemoveUserInRoleDropdown:o});return(0,ae.jsxs)(ae.Fragment,{children:[n&&(0,ae.jsxs)("div",{style:u.titleContainer,children:[(0,ae.jsx)("span",{children:(0,ae.jsx)(f().sA,{id:"peopleSectionMembersTab.activeMembers.title",defaultMessage:"Active"})}),(0,ae.jsx)("span",{style:u.titleNumber,children:S})]}),(0,ae.jsx)("div",{style:{marginTop:n?4:-1},children:(0,ae.jsx)(he().WE,{allowHorizontalScroll:!0,setStickyHeaderRow:!0,columnRenderInfo:b,rows:m,showRowBorders:!0,hideHeaderRowPadding:!0,sortState:g,onSortStateChanged:p,loadMoreMethod:v?{type:"button",onLoadMore:y}:void 0,renderNoRowsComponent:()=>(0,ae.jsx)(be().A,{isSmall:!0,style:u.emptyMessage,children:x?(0,ae.jsx)(f().sA,{id:"peopleSectionMembersTab.emptySearch",defaultMessage:"No search results"}):(0,ae.jsx)(f().sA,{id:"peopleSectionMembersTab.emptyRow",defaultMessage:"No members"})}),styles:c})})]})}const Pp={id:"user",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionMembersTab.user",defaultMessage:"User"})}),renderCell:e=>(0,ae.jsx)(ug,{userId:e.user.userId,restorationStatus:e.restorationStatus,spaceStore:e.spaceStore}),widthData:{width:219},sortable:!0},Rp={id:"teamspaces",headerTitle:(0,ae.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,ae.jsx)(f().sA,{id:"teamspaces",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,ae.jsx)(yp().A,{user:e.user,userPermissionGroupIds:new Set(e.spacePermissionGroupIds)}),widthData:{width:175},sortable:!1},_p={id:"groups",headerTitle:(0,ae.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,ae.jsx)(f().sA,{id:"groups",defaultMessage:"Groups"})}),renderCell:e=>(0,ae.jsx)(Sp,{user:e.user,spaceStore:e.spaceStore,spacePermissionsSettingsStore:e.spacePermissionsSettingsStore,spacePermissionGroupIds:e.spacePermissionGroupIds}),widthData:{width:118.5},sortable:!1},Bp={id:"roles",headerTitle:(0,ae.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionMembersTable.userTable.role",defaultMessage:"Role"})}),renderCell:e=>(0,ae.jsx)(vp,{user:e.user,spaceStore:e.spaceStore,shouldShowRemoveUserInRoleDropdown:e.shouldShowRemoveUserInRoleDropdown}),widthData:{width:118.5},sortable:!0},Ep={id:"actions",headerTitle:void 0,renderCell:e=>(0,ae.jsx)(cp,{user:e.user,spaceStore:e.spaceStore,shouldDisableAction:e.shouldDisableAction}),widthData:{width:51},sortable:!1},Up={id:"joined",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{id:"role",defaultMessage:"Date added"})}),renderCell:e=>e.firstJoinedSpaceTime?(0,Ba().W_)(Number(e.firstJoinedSpaceTime),"medium",hi().locale):"",widthData:{width:118},sortable:!0};var Lp=()=>s(469118),Op=()=>s(407152);function Wp(e){let{isPrimary:t,leftIcon:s,rightIcon:i,onClick:n,content:a,style:o,titleStyle:r}=e;const d=(0,l().IS)((e=>({container:{display:"flex",width:"100%",padding:8,justifyContent:"flex-start",alignItems:"center",borderRadius:8,background:e.onboardingPreviewBackground,...o},iconContainer:{display:"flex",width:20,height:20,paddingTop:1,flexDirection:"column",alignItems:"center",justifyContent:"center",gap:10},title:{display:"flex",fontSize:14,fontWeight:500,color:t?e.text.primary:e.text.secondary,paddingLeft:6,paddingRight:2,height:18,cursor:n?"pointer":"default",width:"100%",...r},ctaIconContainer:{display:"flex",width:16,height:16,paddingTop:1,flexDirection:"column",alignItems:"center",gap:10,paddingLeft:2,paddingRight:0,cursor:n?"pointer":"default"}})),[n,t,o,r]);return(0,ae.jsxs)("div",{style:d.container,children:[s&&(0,ae.jsx)("div",{style:d.iconContainer,onClick:n,children:s}),(0,ae.jsx)("div",{style:d.title,onClick:n,children:a}),i&&(0,ae.jsx)("div",{style:d.ctaIconContainer,onClick:n,children:i})]})}function zp(e){let{currentTab:t}=e;const s=(0,l().IS)((e=>({icon:{fontSize:14,fontWeight:510,fill:e.icon.secondary,cursor:"pointer"},ctaIcon:{fontSize:12,fill:e.icon.secondary,fontWeight:510}})),[]),n=(0,a().v3)(),o=(0,i.useCallback)((()=>{yt().A.setState({...yt().A.state,currentTab:"security",defaultSubtab:void 0}),Su().pf(n,{current_tab:t})}),[n,t]);return(0,i.useEffect)((()=>{Su().W2(n,{current_tab:t})}),[n,t]),(0,ae.jsx)(Wp,{leftIcon:(0,Op().x)(s.icon),content:(0,ae.jsx)(f().sA,{id:"PeopleSectionSecurityBanner.title",defaultMessage:"Some invite settings have moved, make changes in Security tab"}),rightIcon:(0,Lp().C)(s.ctaIcon),onClick:o})}var qp=()=>s(791976);const Fp=3;function Np(e){let{guests:t,spaceStore:s,internalDomains:n}=e;const{environment:o,tableStyles:d,sortState:c,setSortState:u,selectedRowIds:g,setSelectedRowIds:p,rows:m,searchQuery:h,canEditMembership:S,columnRenderInfo:x,guestsCount:b,onClickApprove:v,isSubscribed:y}=function(e){let{guests:t,spaceStore:s,internalDomains:n}=e;const o=(0,a().v3)(),d=(0,wu().k4)({spaceStore:s}),c=(0,r().K8)((()=>d?[Vp,Hp,$p]:[Vp]),[d]),u=(0,l().IS)((e=>({...(0,he().rC)({columnRenderInfo:c,theme:e,containerMarginTop:0})})),[c]),g=(0,r().K8)((()=>c[0]),[c]),[p,m]=(0,i.useState)({column:g,sortAscending:!0}),[h,S]=(0,i.useState)([]),x=(0,f().tz)(),b=(0,r().K8)((()=>dg().A.state.searchQuery),[]),v=(0,r().K8)((()=>{const e=Xi().subscriptionDataStoreInstance.state;return Boolean(e&&is().Fq(e))}),[]),y=(0,r().K8)((()=>t.map((e=>{const t=ie().LU.createChildStore(s,{table:E().oo,id:e.userId}),i=t.getEmail(),a=null==i?void 0:i.split("@")[1],o=n.some((e=>e.url===a));return{spaceStore:s,user:e,email:i,userName:t.getDisplayName(x),guestUserStore:t,id:e.userId,shouldDisableInteraction:h.includes(e.userId),isClickable:!1,isInternalGuest:o,isSubscribed:v}})).filter((e=>{if(b){var t;if(!((null===(t=e.email)||void 0===t?void 0:t.includes(b))||e.userName.includes(b)))return!1}return e.isInternalGuest})).slice(0,Fp)),[t,s,n,x,h,v,b]),j=(0,i.useCallback)((()=>{Su().jR(o,{from:"guest_suggestions",button_name:"bulk_upgrade",count:h.length}),h.forEach((e=>{const t=ie().LU.createChildStore(s,{table:E().oo,id:e}),i=v?"read_and_write":"editor";zu().P({environment:o,guestUserStore:t,role:i,store:s,isConvertToAdmin:!v,origin:"suggested_guest_table"}),S([])}))}),[h,o,v,s]),A=!y.some((e=>h.includes(e.id)));return{environment:o,tableStyles:u,sortState:p,setSortState:m,selectedRowIds:h,setSelectedRowIds:S,rows:y,searchQuery:b,isApproveButtonLoading:!1,canEditMembership:d,columnRenderInfo:c,isSubscribed:v,shouldHideActions:A,guestsCount:y.length,onClickApprove:j}}({guests:t,spaceStore:s,internalDomains:n}),j=(0,f().tz)(),A=function(){const e=(0,l().IS)((e=>({suggestions:{transition:"opacity 1s",marginTop:12},suggestionsHidden:{transition:"opacity 1s",opacity:0},titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},emptyDivider:{height:1,backgroundColor:e.stroke.secondary},headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},suggestionsMenu:{width:265},hideSuggestionIcon:{height:20,width:20},learnMoreIcon:{height:20,width:20},learnMoreMenuItem:{color:e.text.secondary},learnMoreSection:{paddingTop:4,paddingBottom:4,borderTop:`1px solid ${e.stroke.secondary}`},optionsContainer:{display:"flex",alignItems:"center"},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},approveButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30}})),[]);return e}(),[w,M]=(0,i.useState)(!0),T=(0,i.useCallback)((()=>{C().f({environment:o,url:(0,He().xS)("guides.invitePerson")})}),[o]);if(0===n.length)return null;if(0===m.length)return null;if(!w)return null;const k=g.length>0;return(0,ae.jsxs)("div",{style:w?A.suggestions:A.suggestionsHidden,children:[(0,ae.jsxs)("div",{style:A.headerContainer,children:[(0,ae.jsxs)("div",{style:A.titleContainer,children:[(0,ae.jsx)("span",{children:(0,ae.jsx)(f().sA,{id:"peopleSectionguestsTab.suggestions.title",defaultMessage:"Suggestions"})}),(0,ae.jsx)("span",{style:A.titleNumber,children:b})]}),(0,ae.jsx)("div",{style:A.optionsContainer,children:k?(0,ae.jsx)("div",{style:A.actionsContainer,children:(0,ae.jsx)(Vt().p,{style:A.approveButton,onClick:v,children:(0,ae.jsxs)("div",{style:A.buttonContainerApprove,children:[(0,ae.jsx)("div",{style:A.buttonIcon,children:(0,Tr().m)({width:20,height:16})}),(0,ae.jsx)("div",{style:A.buttonText,children:(0,ae.jsx)(f().sA,{id:"spaceSettings.peopleSection.guestsTable.bulkUpgrade",defaultMessage:"Upgrade {numberOfRequests, plural, one {1 guest} other {{numberOfRequests} guests}} to {isSubscribed, select, true {member} other {admin}}",values:{numberOfRequests:g.length,isSubscribed:y}})})]})})}):(0,ae.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,renderOrigin:e=>(0,ae.jsx)($n().A,{icon:Ku().L,ariaLabel:j.formatMessage({id:"peopleSectionSuggestionsTable.ellipsisButton.ariaLabel",defaultMessage:"More"}),style:{height:24,width:24},iconStyle:{width:20,height:20},...e}),onClick:()=>{Su().jR(o,{from:"guest_suggestions",button_name:"upgrade"})},render:()=>(0,ae.jsx)("div",{children:(0,ae.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,style:A.suggestionsMenu,sections:[{key:"hide_suggestions",render:e=>(0,ae.jsx)(ya().A,{...e}),items:[{key:"hide_suggestions",render:e=>(0,ae.jsx)(Il().A,{...e,icon:(0,qp().T)(A.hideSuggestionIcon),title:(0,ae.jsx)(f().sA,{id:"peopleSectionguestsTab.hideSuggestions",defaultMessage:"Hide Suggestions"})}),action:()=>{M(!1),Su().jR(o,{from:"guest_suggestions",button_name:"hide_suggestions"})}}]},{key:"learn_more",render:e=>(0,ae.jsx)(ya().A,{...e,style:A.learnMoreSection}),items:[{key:"learn_more",render:e=>(0,ae.jsx)(Il().A,{...e,icon:(0,Hn().$)(A.learnMoreIcon),title:(0,ae.jsx)(f().sA,{id:"peopleSectionguestsTab.learnMore",defaultMessage:"Learn more"}),style:A.learnMoreMenuItem}),action:()=>{T(),Su().jR(o,{from:"guest_suggestions",button_name:"suggestions_learn_more"})}}]}]})})})})]}),(0,ae.jsx)("div",{style:{marginBottom:36,marginTop:4},children:(0,ae.jsx)(he().WE,{allowHorizontalScroll:S,setStickyHeaderRow:!0,columnRenderInfo:x,rows:Yp(m,c),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:c,onSortStateChanged:u,renderNoRowsComponent:()=>(0,ae.jsx)(be().A,{isSmall:!0,style:A.emptyMessage,children:h?(0,ae.jsx)(f().sA,{id:"peopleSectionGuestsTab.emptySearch",defaultMessage:"No search results"}):(0,ae.jsx)(f().sA,{id:"peopleSectionGuestsTab.emptyRow",defaultMessage:"No guests"})}),styles:d,multiselect:S?{header:{isDisabled:0===m.length,isSelected:g.length>0&&g.length===m.length,onClick:()=>{g.length===m.length?(p([]),Su().Y1(o,{from:"guest_suggestions",action:"deselect_all",row_count:g.length})):(p(m.map((e=>e.id))),Su().Y1(o,{from:"guest_suggestions",action:"select_all",row_count:m.length}))}},row:{getDisabledState:()=>!1,getSelectedState:e=>g.includes(e.id),onClick:e=>{p((t=>t.includes(e.id)?(Su().Y1(o,{from:"guest_suggestions",action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(Su().Y1(o,{from:"guest_suggestions",action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0})})]})}function Gp(){const e=(0,l().DP)();return(0,ae.jsx)("div",{style:{color:e.text.secondary},children:(0,ae.jsx)(f().sA,{id:"peopleSectionguestsTab.suggestions.reason.approvedEmailDomain",defaultMessage:"Approved email domain"})})}function Kp(e){let{spaceStore:t,upgradeMember:s,guestUserStore:n,disabled:o}=e;const r=(0,l().DP)(),d=(0,a().v3)(),[c,u]=(0,i.useState)(!1);return(0,ae.jsx)(Vt().p,{disabled:o,style:{background:r.tint.uiBlue,color:r.text.uiBluePrimary,fontWeight:510,fontSize:14,borderRadius:4,paddingTop:4,paddingBottom:4,paddingLeft:12,paddingRight:12,marginLeft:24,...o&&{color:r.text.uiBlueTertiary}},hoveredStyle:{background:r.tint.uiBlueHover},onClick:async()=>{u(!0),Su().jR(d,{from:"guest_suggestions",button_name:"upgrade"}),await s({environment:d,store:t,guestUserStore:n}),u(!1)},isLoading:c,children:(0,ae.jsx)(f().sA,{id:"spaceSettings.peopleSection.suggestionsTable.upgrade",defaultMessage:"Upgrade"})})}const Vp={id:"user",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionGuestsTab.guest",defaultMessage:"User"})}),renderCell:e=>(0,ae.jsx)(ug,{userId:e.user.userId,spaceStore:e.spaceStore,isInternalGuest:e.isInternalGuest,isForSuggestionsTable:!0}),widthData:{width:210},sortable:!0},Hp={id:"access",headerTitle:(0,ae.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionGuestsTab.access",defaultMessage:"Access"})}),renderCell:e=>(0,ae.jsx)("div",{style:{display:"flex"},children:(0,ae.jsx)(ag,{guest:e.user,shouldDisableInteraction:e.shouldDisableInteraction})}),widthData:{width:120},sortable:!1},$p={id:"reason",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionguestsTab.suggestions.reason",defaultMessage:"Reason"})}),renderCell:e=>(0,ae.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"},children:[(0,ae.jsx)(Gp,{}),(0,ae.jsx)(Kp,{upgradeMember:async t=>{await zu().P({origin:"suggested_guest_table",isConvertToAdmin:!1,role:e.isSubscribed?"read_and_write":"editor",...t})},spaceStore:e.spaceStore,guestUserStore:e.guestUserStore,disabled:e.shouldDisableInteraction})]}),widthData:{width:256},sortable:!1};function Yp(e,t){let{sortAscending:s}=t;const i=h().Ul(e,(e=>e.email));return s||i.reverse(),i}function Jp(e){let{spaceStore:t,spacePermissionsSettingsStore:s}=e;const i=(0,a().v3)(),n=(0,r().K8)((()=>{const e=Xi().subscriptionDataStoreInstance.state;return e?(0,is().oe)(e):[]}),[]),o=(0,r().K8)((()=>{const e=Lu().A.getData(i,{spaceId:t.id});return(null==e?void 0:e.filter((e=>e.hasMembers)).map((e=>e.domain)))??[]}),[i,t]),l=(0,Ss().fC)({spaceStore:t}),d=(0,wu().r1)({spaceStore:t}),c=(0,Ss().e6)({spaceStore:t,requestType:"member"});(0,Ss().Wz)({requestType:"member",spaceStore:t});const u=(0,Ss().zA)({spaceStore:t,guests:n,internalDomains:o}),g=l&&0!==c.length,p=g||u;return(0,ae.jsxs)(ae.Fragment,{children:[u&&!g&&(0,ae.jsx)(Np,{guests:n,spaceStore:t,internalDomains:o}),g&&(0,ae.jsxs)("div",{style:{paddingTop:16,paddingBottom:16},children:[d&&(0,ae.jsx)(zp,{currentTab:"members"}),(0,ae.jsx)(Hg,{requests:c,spaceStore:t,requestType:"member"})]}),(0,ae.jsx)(jp,{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:p}),u&&g&&(0,ae.jsx)(Np,{guests:n,spaceStore:t,internalDomains:o})]})}function Qp(e){let{recentRecoverableUser:t,spaceStore:n}=e;const{environment:o,styles:r,handleReprovisionToUserChange:d,userId:c,selectedTransferToUser:u}=function(e){let{recentRecoverableUser:t,spaceStore:s}=e;const n=(0,l().IS)((e=>({container:{display:"flex",width:"100%",justifyContent:"flex-end"},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},removeMenuDivider:{borderTop:e.stroke.secondary},upgradeIcon:{width:17,height:17}})),[]),o=(0,a().v3)(),[r,d]=(0,i.useState)(),c=(0,i.useCallback)((async(e,i)=>{const{accept:n}=await j().Gh({message:(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Transfer their private pages?"}),description:(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationDescription",defaultMessage:"This action cannot be undone."}),acceptLabel:(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})});if(!n)return;d(i);const a=await U().callApi({eventName:"transferSpaceUserContent",environment:o,data:{spaceId:s.id,fromUserId:e,toUserId:i}});"failed"===a.type?j().Qg(a):(t.privatePagesCount=0,dg().A.setState({...dg().A.state,recentRecoverableUsers:[...dg().A.state.recentRecoverableUsers.filter((t=>t.userId!==e)),t]}))}),[o,s,t]);return{environment:o,styles:n,handleReprovisionToUserChange:c,userId:t.userId,selectedTransferToUser:r}}({recentRecoverableUser:t,spaceStore:n});return c?(0,ae.jsx)("div",{style:r.container,children:(0,ae.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,onClick:()=>{Su().jR(o,{from:"recently_left",button_name:"actions"})},renderOrigin:e=>(0,ae.jsx)(Vt().p,{style:r.button,...e,children:(0,ae.jsx)(ae.Fragment,{children:(0,Ku().L)(r.buttonIcon)})}),render:()=>(0,ae.jsx)("div",{children:(0,ae.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:[{key:"transfer",render:e=>(0,ae.jsx)(ya().A,{...e,style:r.removeMenuDivider}),items:[{key:"transfer",render:e=>(0,ae.jsx)(s(483495).A,{mode:J().C.Button,focused:!1,title:(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:n,userIds:u?[u]:[],onChange:e=>{let[t]=e;d(c,t)}}),action:()=>{Su().jR(o,{from:"recently_left",button_name:"open_transfer_ownership"})}}]}]})})})}):null}function Zp(e){let{spaceStore:t,recentRecoverableUsers:s}=e;const i=(0,l().IS)((e=>({icon:{fontSize:14,fontWeight:510,fill:e.icon.secondary}})),[]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,ae.jsx)(Wp,{leftIcon:(0,oa().G)(i.icon),content:(0,ae.jsx)(f().sA,{id:"peopleSectionReprovisioningTab.settingsDeeplinkBannerTitle",defaultMessage:"People left the workspace in the past 30 days and had private pages appear here"})})}),(0,ae.jsx)(Xp,{recentRecoverableUsers:s,spaceStore:t})]})}function Xp(e){let{spaceStore:t,recentRecoverableUsers:s}=e;const{rows:n,sortState:a,setSortState:o,tableStyles:d}=function(e){let{recentRecoverableUsers:t,spaceStore:s}=e;const n=(0,l().IS)((e=>(0,he().rC)({columnRenderInfo:tm,theme:e,containerMarginTop:0})),[]),[a,o]=(0,i.useState)({column:tm[0],sortAscending:!0}),d=(0,r().K8)((()=>t.map((e=>{const t=ie().LU.createChildStore(s,{table:E().oo,id:e.userId});return{spaceStore:s,reprovisioningUser:e,email:t.getEmail(),id:e.userId,isClickable:!1}}))),[s,t]);return{rows:d,sortState:a,setSortState:o,tableStyles:n}}({recentRecoverableUsers:s,spaceStore:t}),c=(0,l().IS)((e=>({noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`}})),[]);return(0,ae.jsx)("div",{style:{marginTop:4},children:(0,ae.jsx)(he().WE,{setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:tm,rows:sm(n,a),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:a,onSortStateChanged:o,renderNoRowsComponent:()=>(0,ae.jsx)(be().A,{isSmall:!0,style:c.noRowContainer,children:(0,ae.jsx)(f().sA,{id:"peopleSectionReprovisioningTab.noUser",defaultMessage:"No recent left user"})}),styles:d})})}function em(e){let{userLeftTime:t}=e;const s=(0,f().tz)(),i=(0,r().K8)((()=>{const e=D().KQ(t,(0,Y().P)());return(0,Ba().ZF)({value:e,date_format:"relative",userTimeZone:(0,Y().P)(),intl:s,allowRelativeDates:!0})}),[t,s]);return(0,ae.jsx)(be().A,{isSmall:!0,children:i})}const tm=[{id:"user",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{id:"peopleSectionReprovisioningTab.user",defaultMessage:"User"})}),renderCell:e=>(0,ae.jsx)(ug,{userId:e.reprovisioningUser.userId,spaceStore:e.spaceStore}),widthData:{width:220},sortable:!0},{id:"pageCount",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{defaultMessage:"Private pages",id:"peopleSectionReprovisioningTab.privatePages"})}),renderCell:e=>(0,ae.jsx)(be().A,{isSmall:!0,children:e.reprovisioningUser.privatePagesCount}),widthData:{width:100},sortable:!1},{id:"leftTime",headerTitle:(0,ae.jsx)("div",{style:{fontSize:14},children:(0,ae.jsx)(f().sA,{defaultMessage:"Left workspace",id:"peopleSectionReprovisioningTab.leftTime"})}),renderCell:e=>(0,ae.jsx)(em,{userLeftTime:e.reprovisioningUser.userLeftTime}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:"",renderCell:e=>(0,ae.jsx)(Qp,{recentRecoverableUser:e.reprovisioningUser,spaceStore:e.spaceStore}),widthData:{width:100},sortable:!1}];function sm(e,t){let{sortAscending:s}=t;const i=h().Ul(e,(e=>e.email));return s||i.reverse(),i}var im=()=>s(970172),nm=()=>s(188877),am=()=>s(81721);const om=(0,Mt().wt)("arrowDownPage",{viewBox:"0 0 14 18",svg:(0,ae.jsx)("path",{d:"M7.67969 9.39844V11.7891L7.61719 13.0078L8.21875 12.3828L8.8125 11.7656C8.875 11.7031 8.94531 11.6536 9.02344 11.6172C9.10677 11.5755 9.19271 11.5547 9.28125 11.5547C9.45312 11.5547 9.59635 11.612 9.71094 11.7266C9.83073 11.8411 9.89062 11.9844 9.89062 12.1562C9.89062 12.2552 9.8724 12.3411 9.83594 12.4141C9.79948 12.487 9.74479 12.5573 9.67188 12.625L7.51562 14.6016C7.42708 14.6849 7.34115 14.7448 7.25781 14.7812C7.17969 14.8177 7.09375 14.8359 7 14.8359C6.90104 14.8359 6.8125 14.8177 6.73438 14.7812C6.65625 14.7448 6.57031 14.6849 6.47656 14.6016L4.32031 12.625C4.2474 12.5573 4.19271 12.487 4.15625 12.4141C4.11979 12.3411 4.10156 12.2552 4.10156 12.1562C4.10156 11.9844 4.15885 11.8411 4.27344 11.7266C4.39323 11.612 4.54167 11.5547 4.71875 11.5547C4.79688 11.5547 4.8776 11.5755 4.96094 11.6172C5.04427 11.6536 5.11719 11.7031 5.17969 11.7656L5.77344 12.3828L6.375 13.0078L6.32031 11.7891V9.39844C6.32031 9.21615 6.38542 9.0625 6.51562 8.9375C6.65104 8.80729 6.8125 8.74219 7 8.74219C7.18229 8.74219 7.34115 8.80729 7.47656 8.9375C7.61198 9.0625 7.67969 9.21615 7.67969 9.39844ZM2.83594 17.3203C1.9974 17.3203 1.36458 17.1042 0.9375 16.6719C0.510417 16.2396 0.296875 15.6016 0.296875 14.7578V2.96875C0.296875 2.13021 0.510417 1.49479 0.9375 1.0625C1.36458 0.625 1.9974 0.40625 2.83594 0.40625H6.60156C6.92969 0.40625 7.21615 0.429688 7.46094 0.476562C7.70573 0.518229 7.93229 0.598958 8.14062 0.71875C8.34896 0.833333 8.5625 1.0026 8.78125 1.22656L12.875 5.39062C13.1042 5.61979 13.276 5.84115 13.3906 6.05469C13.5104 6.26302 13.5911 6.49479 13.6328 6.75C13.6745 7 13.6953 7.30729 13.6953 7.67188V14.7578C13.6953 15.5964 13.4818 16.2318 13.0547 16.6641C12.6276 17.1016 11.9948 17.3203 11.1562 17.3203H2.83594ZM2.96094 15.7812H11.0312C11.4115 15.7812 11.6953 15.6849 11.8828 15.4922C12.0703 15.2995 12.1641 15.0234 12.1641 14.6641V7.88281H7.95312C7.39583 7.88281 6.97917 7.74479 6.70312 7.46875C6.43229 7.19271 6.29688 6.77604 6.29688 6.21875V1.9375H2.96875C2.58854 1.9375 2.30469 2.03646 2.11719 2.23438C1.92969 2.43229 1.83594 2.71094 1.83594 3.07031V14.6641C1.83594 15.0234 1.92969 15.2995 2.11719 15.4922C2.30469 15.6849 2.58594 15.7812 2.96094 15.7812ZM8.10156 6.53125H11.9531L7.64844 2.14844V6.07031C7.64844 6.23177 7.68229 6.34896 7.75 6.42188C7.82292 6.49479 7.9401 6.53125 8.10156 6.53125Z"})});function rm(e){let{spaceStore:t}=e;const{styles:s,shouldEnableExportGuests:n,handleExportGuestsClick:o}=function(e){let{spaceStore:t}=e;const s=(0,l().IS)((e=>({button:{display:"flex",width:28,height:28,justifyContent:"center",gap:10,alignItems:"center"},buttonIcon:{width:20,height:20,fontSize:16,fontStyle:"normal",flexDirection:"column",flexShrink:0,fontWeight:510,fill:e.icon.secondary}})),[]),n=(0,r().K8)((()=>{const{currentSpaceStore:e}=lt().default.state,t=Xi().subscriptionDataStoreInstance.state;return Boolean(e&&t&&"subscribed_admin"===t.type&&gt().default.checkGate({gateName:"enable_guest_export"}))}),[]),o=(0,a().v3)(),d=(0,f().tz)(),c=(0,r().K8)((()=>gt().default.checkGate({gateName:"edge_cache_plus_settings"})),[]),u=(0,i.useCallback)((()=>{if(c)return void Ir().li({spaceStore:t,intl:d,environment:o});const e=Xi().subscriptionDataStoreInstance.state;if(t&&e&&"subscribed_admin"===e.type){const s=(0,is().oe)(e);Ir().s6(o,{intl:d,spaceStore:t,guests:s})}}),[o,d,c,t]);return{styles:s,shouldEnableExportGuests:n,handleExportGuestsClick:u}}({spaceStore:t});return n?(0,ae.jsx)(xe().A,{render:e=>(0,ae.jsx)(Vt().p,{style:s.button,onClick:o,...e,children:om(s.buttonIcon)}),renderTooltip:()=>(0,ae.jsx)(f().sA,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})}):null}var lm=()=>s(905977),dm=()=>s(998865),cm=()=>s(517337),um=()=>s(335142);function gm(e){let{spaceStore:t,origin:s,requestFrom:n,inviteFrom:o}=e;const{shouldShowRequestMemberButtion:l,canEditMembership:d}=(0,r().K8)((()=>({shouldShowRequestMemberButtion:!t.canEditMembership()&&!t.getDisableMembershipRequests()&&(0,ve().x3)(),canEditMembership:t.canEditMembership()})),[t]),c=(0,r().K8)((()=>{const e=Xi().subscriptionDataStoreInstance.state;return Boolean(e&&is().Fq(e))}),[]),u=(0,bu().J)(),g=(0,i.useCallback)((()=>{const e=(0,f().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});Bu().m({message:e.updatingPermissions})}),[]),p=(0,i.useCallback)((()=>{Bu().V()}),[]),m=(0,a().v3)(),h=(0,i.useCallback)((()=>{(0,cm().q)(m)}),[m]);return l?(0,ae.jsx)(dm().cx,{store:t,analyticsFrom:n,origin:s?(0,ae.jsx)("div",{onClick:h,children:s}):(0,ae.jsx)(qs().A,{size:"lg",onClick:h,children:(0,ae.jsx)(f().sA,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,ae.jsx)(um().n,{step:"collaborate_add_member",isFullWidth:!1,showContentOverlays:!1,children:(0,ae.jsx)(lm().H,{disabled:!d,store:t,onInviteClick:g,onInviteComplete:p,isSubscribed:c,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,enableInviteDropdown:u,origin:s,analyticsFrom:o})})}function pm(e){let{spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n}=e;return(0,i.useEffect)((()=>()=>{dg().A.reset()}),[]),(0,ae.jsxs)("div",{style:{display:"flex",height:34,paddingBottom:0,justifyContent:"flex-end",alignItems:"center",gap:10},children:[(0,ae.jsxs)("div",{style:{display:"flex",height:28,justifyContent:"flex-end",alignItems:"center",gap:4},children:[(0,ae.jsx)(am().A,{handleSearchQueryChange:e=>{dg().A.setState({...dg().A.state,searchQuery:e}),s===gi().d.Groups&&n.setState({...n.state,groupsFilter:e??""})},isSearchBarAlwaysOpen:!1,currentTab:s}),s===gi().d.Guests?(0,ae.jsx)(rm,{spaceStore:t}):null]}),(0,ae.jsx)("div",{style:{paddingBottom:2},children:(0,ae.jsx)(mm,{spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n})})]})}function mm(e){let{spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n}=e;const{canUseGroups:o,canCreateGroups:l,handleCreateGroupClick:d,shouldShowRequestMemberButtion:c,canEditMembership:u}=function(e){let{spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n}=e;const o=(0,wu().zh)(),l=(0,wu().k4)({spaceStore:t}),d=(0,a().v3)(),c=(0,i.useCallback)((()=>{k().createAndCommit({userAction:"PeopleSectionGroupsTab.handleCreateGroupClick",environment:d,canUndo:!0,perform:e=>{const s=w().np({spaceStore:t,transaction:e});if(s){n.setState({...n.state,editingNameGroupId:s.getGroupId(),groupNameInputValue:""});const e=Qo().Bj6.fromValue(im().n,s.getValue()),t=[...yu().A.state.permissionGroupsAndMemberCounts,{group:e,memberCount:0}],i=(0,nm().Ay)(n.state.groupsFilter,t,(e=>e.group.name||""));yu().A.setState({...yu().A.state,permissionGroupsAndMemberCounts:i})}}})}),[d,t,n]),u=(0,r().K8)((()=>!t.canEditMembership()&&!t.getDisableMembershipRequests()&&(0,ve().x3)()),[t]),g=(0,wu().k4)({spaceStore:t});return{canUseGroups:o,canCreateGroups:l,shouldShowRequestMemberButtion:u,canEditMembership:g,handleCreateGroupClick:c}}({spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n});return s===gi().d.Groups&&o?l?(0,ae.jsx)(xe().A,{renderTooltip:()=>!l&&(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."}),render:e=>(0,ae.jsx)(qs().A,{size:"lg",onClick:d,...e,children:(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}):null:c||u?(0,ae.jsx)(gm,{spaceStore:t,requestFrom:"space_settings_add_members",inviteFrom:"space_settings_add_members"}):null}var fm=()=>s(424357);function hm(){const e=(0,r().K8)((()=>{const e=lt().default.state.currentSpaceStore;if(null!=e&&e.isDefined())return e}),[]),t=(0,r().O$)(Xi().subscriptionDataStoreInstance),s=(0,ju().o)({spaceId:null==e?void 0:e.id}),n=(0,r().uB)(void 0,gi().A),a=xu();return(0,i.useEffect)((()=>{a&&n.setState({...n.state,currentTab:gi().d.Guests})}),[n,a]),e&&t?(0,ae.jsxs)(Gt().Ay,{children:[(0,ae.jsx)(op().gz,{spaceStore:e}),(0,ae.jsx)(op().K,{spaceStore:e,inviteLinkCode:s,spacePermissionsSettingsStore:n}),(0,ae.jsx)(xm,{subscriptionData:t,spaceStore:e,spacePermissionsSettingsStore:n})]}):(0,ae.jsx)(Sm,{})}function Sm(){return(0,ae.jsx)(Gt().Ay,{centerContent:!0,children:(0,ae.jsx)(fi().A,{})})}function xm(e){var t;let{subscriptionData:s,spaceStore:n,spacePermissionsSettingsStore:o}=e;(0,i.useEffect)((()=>{if(yt().A.state.open&&"members"===yt().A.state.currentTab&&yt().A.state.defaultSubtab){const e=yt().A.state.defaultSubtab!==gi().d.Requests?yt().A.state.defaultSubtab:gi().d.Members;o.setState({...o.state,currentTab:e})}}),[o]);const{memberCount:d,recentRecoverableUsers:c,currentTab:u,canReprovisionContent:g,tabs:p,currentTabs:m,environment:h,billingData:S}=function(e){let{subscriptionData:t,spaceStore:s,spacePermissionsSettingsStore:i}=e;const n=(0,a().v3)(),o=(0,Wt().V)()??1,d=(0,Os().r)();(0,wu().rl)({spaceStore:s,subscriptionData:t});const c=(0,r().K8)((()=>{const{recentRecoverableUsers:e}=dg().A.state;return e.filter((e=>e.privatePagesCount>0))}),[]),u=(0,r().K8)((()=>i.state.currentTab),[i]),g=(0,wu().t1)({spaceStore:s,subscriptionData:t}),p=(0,Ss().U4)({spaceStore:s,requestType:"guest"}),m=(0,Ss().U4)({spaceStore:s,requestType:"member"}),h=(0,l().IS)((e=>({activeTabStyle:{color:e.text.primary},inactiveTabStyle:{color:e.text.tertiary},redDot:{background:e.redBadgeBackground,marginLeft:6,marginTop:6}})),[]),S=(0,r().K8)((()=>{const e=yu().A.state.permissionGroupsAndMemberCounts.length;return void 0===o?{}:{[gi().d.Members]:(0,ae.jsx)(ym,{text:(0,ae.jsx)("div",{children:(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"})}),number:o,isCurrentTab:u===gi().d.Members,styles:h,unread:(m??0)>0}),[gi().d.Guests]:(0,ae.jsx)(ym,{text:(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),number:d,isCurrentTab:u===gi().d.Guests,styles:h,unread:(p??0)>0}),[gi().d.Groups]:(0,ae.jsx)(ym,{text:(0,ae.jsx)(f().sA,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),number:e,isCurrentTab:u===gi().d.Groups,styles:h}),[gi().d.Reprovisioning]:(0,ae.jsx)(ym,{text:(0,ae.jsx)(f().sA,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"}),number:c.length,isCurrentTab:u===gi().d.Reprovisioning,styles:h}),[gi().d.Requests]:(0,ae.jsx)(f().sA,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"}),[gi().d.Contacts]:(0,ae.jsx)(ym,{text:(0,ae.jsx)(f().sA,{id:"spaceBasicSettings.contactsTab.title",defaultMessage:"Contacts"}),isCurrentTab:u===gi().d.Contacts,styles:h})}}),[o,d,u,h,m,p,c.length]),x=rt(),b=(0,ns().lh)({spaceId:s.id}),v=xu(),y=vu(),j=vm({canReprovisionContent:g,hideGroupsTab:x,showGuestTabFirst:v,showContactsTab:y}),A=j.map((e=>S[e]));return{billingData:b,memberCount:o,recentRecoverableUsers:c,currentTab:u,canReprovisionContent:g,tabs:A,currentTabs:j,environment:n}}({subscriptionData:s,spaceStore:n,spacePermissionsSettingsStore:o}),x=(0,Au().A)(n),b=(0,Ot().Q7)(n.id,S,d),v=x&&u===gi().d.Members&&(null==S?void 0:S.subscription),y=rt(),j=xu(),A=vu();return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Ai().Ay,{tabs:p,selectedIndex:m.indexOf(u),onChange:e=>function(e){let{newSelectedIndex:t,environment:s,spacePermissionsSettingsStore:i,currentTab:n,canReprovisionContent:a,hideGroupsTab:o,showGuestTabFirst:r,showContactsTab:l}=e;const d=vm({canReprovisionContent:a,hideGroupsTab:o,showGuestTabFirst:r,showContactsTab:l})[t];switch(d){case gi().d.Members:Su().K4(s,{tab:"members"});break;case gi().d.Groups:Su().K4(s,{tab:"groups"});break;case gi().d.Guests:Su().K4(s,{tab:"guests"});break;case gi().d.Reprovisioning:Su().K4(s,{tab:"reprovisioning"});break;case gi().d.Requests:Su().K4(s,{tab:"requests"});break;case gi().d.Contacts:Su().K4(s,{tab:"contacts"});break;default:(0,Rs().HB)(d)}n===gi().d.Requests&&d!==gi().d.Requests&&jt().A.reset();i.setState({...i.state,currentTab:d})}({newSelectedIndex:e,environment:h,spacePermissionsSettingsStore:o,currentTab:u,canReprovisionContent:g,hideGroupsTab:y,showGuestTabFirst:j,showContactsTab:A}),style:{paddingLeft:0,paddingRight:0,marginTop:-6},tabTitleStyle:{fontSize:16,fontWeight:400},tabBorderStyle:{left:0,right:0},right:(0,ae.jsx)(pm,{spaceStore:n,currentTab:u,spacePermissionsSettingsStore:o})}),v?(0,ae.jsx)("div",{style:{margin:"20px 0 20px 0"},children:(0,ae.jsx)(fm().x,{quantityOfPaidSeats:b,quantityOfSpaceMembers:d,nextBillingDate:(null===(t=S.subscription)||void 0===t?void 0:t.currentPeriodEnd.toLocaleString({month:"short",day:"numeric",year:"numeric"}))??""})}):null,(0,ae.jsx)(bm,{currentTab:u,spaceStore:n,spacePermissionsSettingsStore:o,recentRecoverableUsers:c})]})}function bm(e){let{currentTab:t,spaceStore:s,spacePermissionsSettingsStore:i,recentRecoverableUsers:n}=e;switch(t){case gi().d.Members:return(0,ae.jsx)(Jp,{spaceStore:s,spacePermissionsSettingsStore:i});case gi().d.Guests:return(0,ae.jsx)(ip,{spaceStore:s});case gi().d.Groups:return(0,ae.jsx)(Pu,{spaceStore:s,spacePermissionsSettingsStore:i});case gi().d.Reprovisioning:return(0,ae.jsx)(Zp,{spaceStore:s,recentRecoverableUsers:n});case gi().d.Contacts:return(0,ae.jsx)(Mu().x,{spaceStore:s});default:return null}}function vm(e){let{canReprovisionContent:t,hideGroupsTab:s,showGuestTabFirst:i,showContactsTab:n}=e;return i?[gi().d.Guests,gi().d.Members,...s?[]:[gi().d.Groups],...t?[gi().d.Reprovisioning]:[],...n?[gi().d.Contacts]:[]]:[gi().d.Members,gi().d.Guests,...s?[]:[gi().d.Groups],...t?[gi().d.Reprovisioning]:[],...n?[gi().d.Contacts]:[]]}function ym(e){let{text:t,number:s,isCurrentTab:i,unread:n,styles:a}=e;return(0,ae.jsxs)("div",{style:{display:"flex",fontSize:S().J.UIRegular.desktop,fontWeight:S().Wy.medium,lineHeight:"18px",...i?a.activeTabStyle:a.inactiveTabStyle},children:[t,s&&s>0?(0,ae.jsx)("div",{style:{fontSize:S().J.UIRegular.desktop,lineHeight:"18px",paddingLeft:4,...a.inactiveTabStyle},children:s}):void 0,n&&(0,ae.jsx)(Cu().m,{style:a.redDot,size:6})]})}var jm=()=>s(902277),Am=()=>s(613250),Cm=()=>s(764517),wm=()=>s(732566),Mm=()=>s(72757),Tm=()=>s(537730),km=()=>s(628854),Im=()=>s(540952),Dm=()=>s(493738),Pm=()=>s(8677),Rm=()=>s(539174),_m=()=>s(662505),Bm=()=>s(158918);function Em(e){let{selectItems:t,currentSelectedItem:s,onChange:i,icon:n}=e;const a=(0,l().IS)((()=>({filterWrap:{marginRight:0}})),[]);return(0,ae.jsx)(Bm().A,{items:t,getKey:e=>e.key,selectedItem:s,onSelect:i,renderItem:e=>(0,ae.jsx)(Il().A,{title:e.value.name,...e,isChecked:s.key===e.value.key}),renderOrigin:e=>(0,ae.jsx)(_m().A,{...e,title:s.originName??s.name,on:!s.showFilterAsOffWhenSelected,icon:n,wrapStyle:a.filterWrap})})}const Um={[Tm().J2]:{key:Tm().J2,name:(0,ae.jsx)(f().sA,{id:"manageTeamsAccessFilter.accessFilter.filterAllTeams",defaultMessage:"Any"}),originName:(0,ae.jsx)(f().sA,{id:"manageTeamsAccessFilter.accessSelectPlaceolder",defaultMessage:"Access"}),showFilterAsOffWhenSelected:!0},[Tm().b4]:{key:Tm().b4,name:(0,ae.jsx)(f().sA,{id:"manageTeamsAccessFilter.accessFilter.filterOpenTeams",defaultMessage:"Open"})},[Tm().lX]:{key:Tm().lX,name:(0,ae.jsx)(f().sA,{id:"manageTeamsAccessFilter.accessFilter.filterClosedTeams",defaultMessage:"Closed"})},[Tm().OD]:{key:Tm().OD,name:(0,ae.jsx)(f().sA,{id:"manageTeamsAccessFilter.accessFilter.filterPrivateTeams",defaultMessage:"Private"})}},Lm=h().oE([Um[Tm().J2],Um[Tm().b4],Um[Tm().lX],Um[Tm().OD]]);function Om(e){let{manageTeamsStore:t}=e;const s=(0,a().v3)(),n=(0,r().K8)((()=>t.state.filterAccess),[t]),o=(0,l().IS)((e=>({keyIcon:{width:Mt().Ev.sm,height:Mt().Ev.sm,marginRight:2,...n!==Tm().J2?{fill:pa().Ay.blue}:{fill:e.mediumIconColor}}})),[n]),d=(0,i.useCallback)((e=>{t.update((t=>({...t,filterAccess:e.key}))),Rm().hj(s,{filter:"access",value:e.key})}),[t,s]),c=Um[n];return(0,ae.jsx)(Em,{selectItems:Lm,currentSelectedItem:c,onChange:d,icon:(0,Pm().a)(o.keyIcon)})}const Wm={viewBox:"0 0 16 16",svg:(0,ae.jsx)("path",{d:"M2.5 3.4a.9.9 0 0 1 .9-.9h9.2a.9.9 0 0 1 .9.9v1.2a.9.9 0 0 1-.9.9H3.4a.9.9 0 0 1-.9-.9zm.8 3.1h9.4v6.1a.9.9 0 0 1-.9.9H4.2a.9.9 0 0 1-.9-.9zM6.4 8a.5.5 0 0 0 0 1h3.2a.5.5 0 1 0 0-1z"})},zm=(0,Mt().wt)("archiveBoxFillSmall",Wm),qm="showArchived",Fm="hideArchived",Nm={[Fm]:{key:Fm,name:(0,ae.jsx)(f().sA,{id:"manageTeamsArchivedFilter.archivedFilter.hideArchivedTeams",defaultMessage:"Active"}),originName:(0,ae.jsx)(f().sA,{id:"manageTeamsArchivedFilter.archivedSelectPlaceolder",defaultMessage:"Active"}),showFilterAsOffWhenSelected:!0},[qm]:{key:qm,name:(0,ae.jsx)(f().sA,{id:"manageTeamsArchivedFilter.archivedFilter.showArchivedTeams",defaultMessage:"Archived"})}};function Gm(e){let{manageTeamsStore:t}=e;const s=(0,a().v3)(),n=(0,r().K8)((()=>t.state.showOnlyArchivedTeams),[t]),o=(0,l().IS)((e=>({archiveIcon:{width:Mt().Ev.sm,height:Mt().Ev.sm,marginRight:4,...n?{fill:pa().Ay.blue}:{fill:e.mediumIconColor}}})),[n]),d=[Nm[Fm],Nm[qm]],c=(0,i.useCallback)((e=>{t.update((t=>({...t,showOnlyArchivedTeams:e.key===qm}))),Rm().hj(s,{filter:"archived",value:e.key})}),[t,s]),u=Nm[n?qm:Fm];return(0,ae.jsx)(Em,{selectItems:d,currentSelectedItem:u,onChange:c,icon:zm(o.archiveIcon)})}s(324989);const Km={viewBox:"0 0 16 16",svg:(0,ae.jsx)("path",{d:"M8 1.85c-.925 0-1.673.382-2.179 1.012-.495.617-.73 1.435-.73 2.29 0 .856.235 1.674.73 2.291.506.63 1.255 1.012 2.18 1.012.924 0 1.672-.382 2.178-1.012.495-.617.73-1.435.73-2.29 0-.856-.235-1.674-.73-2.291C9.673 2.232 8.925 1.85 8 1.85m0 7.403c-2.175 0-4.115 1.06-4.94 2.672-.3.585-.165 1.179.19 1.594.34.396.873.63 1.43.63h6.64c.557 0 1.09-.234 1.43-.63.355-.415.49-1.01.19-1.594-.825-1.612-2.765-2.672-4.94-2.672"})},Vm=(0,Mt().wt)("personFillSmall",Km),Hm="ShowTeamsWithNoOwnersId";function $m(e){let{teamStores:t,manageTeamsStore:s}=e;const n=(0,a().v3)(),o=(0,r().K8)((()=>s.state.filterByOwner),[s]),d=function(e){switch(e.type){case Tm().wf:return;case Tm().wA:return e.id;case Tm().qG:return Hm;default:(0,Rs().HB)(e)}}(o),c=(0,r().O$)(lt().AppStoreCurrentSpaceStore),u=(0,f().tz)(),g=(0,r().K8)((()=>{const e=t.flatMap((e=>e.getOwnerUserIds()));return h().sb(e)}),[t]),p=(0,l().IS)((e=>({icon:{marginRight:2,fill:e.mediumIconColor},blueFill:{fill:pa().Ay.blue}})),[]),m=(0,i.useCallback)((e=>{if(c)return(0,Zo().z)({userId:e,currentSpaceStore:c}).getValue()}),[c]),S=(0,i.useCallback)((e=>{const t=e[e.length-1];let i;i=t===d||void 0===t?{type:Tm().wf}:t===Hm?{type:Tm().qG}:{type:Tm().wA,id:t},s.update((e=>({...e,filterByOwner:i}))),Rm().hj(n,{filter:"owner",value:i.type})}),[d,s,n]),x=(0,Be().fJ)(W().T.searchActions),b=(0,i.useCallback)((async e=>{let{query:t}=e;if(!c||"resolved"!==x.status)return[];const s=x.value,i=(await s.searchUsers({environment:n,query:t,parentStore:c,userIds:g})).map((e=>e.id));return""===t?[Hm,...i]:i}),[c,g,x.status,x.value,n]),v=(0,i.useCallback)(((e,t)=>{if(!c)return null;if(e===Hm)return(0,ae.jsx)(Il().A,{...t,title:(0,ae.jsx)(f().sA,{id:"manageTeamsOwnerFilter.noOwnersFilterOption",defaultMessage:"No owners"}),isChecked:o.type===Tm().qG,className:"notranslate"});const s=m(e);return s?(0,i.createElement)(se().A,{...t,key:e,actor:(0,Z().MR)(s),isChecked:d===e}):null}),[c,m,d,o.type]),y=(0,r().K8)((()=>{if(o.type!==Tm().wA)return;const e=m(o.id);return e?(0,Br().c6)(u,e):void 0}),[o,m,u]);let j;return j=o.type===Tm().qG?(0,ae.jsx)(f().sA,{id:"manageTeamsOwnerFilter.filterTitle.onlyOrphanedTeams",defaultMessage:"Owner: None"}):y?(0,ae.jsx)(f().sA,{id:"manageTeamsOwnerFilter.filterTitle.withSpecifiedOwner",defaultMessage:"Owner: {teamOwnerName}",values:{teamOwnerName:y}}):(0,ae.jsx)(f().sA,{id:"manageTeamsOwnerFilter.filterTitle.unset",defaultMessage:"Owner"}),(0,ae.jsx)(J().A,{mode:J().C.Pill,title:j,disabled:0===t.length,icon:Vm,iconStyles:{...p.icon,...o.type!==Tm().wf&&p.blueFill},items:h().oE([d]),hasItemsSelected:(0,Rs().O9)(d),onChange:S,labelText:{title:j,tokenInputPlaceholder:u.formatMessage({defaultMessage:"Search teamspace owner...",id:"manageTeamsOwnerFilter.searchOwner.placeholder"}),resultSectionTitle:u.formatMessage({defaultMessage:"Select users",id:"manageTeamsOwnerFilter.searchOwner.resultsTitle"}),componentDebugName:"ManageTeamsSearchOwnerFilter"},performRequest:b,renderResultMenuItem:v,renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})}const Ym={viewBox:"0 0 16 16",svg:(0,ae.jsx)("path",{d:"M7.755 2.26a.55.55 0 0 1 .49 0l.962.482a7.3 7.3 0 0 0 3.277.774h.11c.302 0 .547.244.547.547v4.333a4.92 4.92 0 0 1-2.983 4.524l-1.943.833a.55.55 0 0 1-.43 0l-1.943-.833A4.92 4.92 0 0 1 2.86 8.396V4.062c0-.302.245-.546.547-.546h.11c1.138 0 2.26-.265 3.277-.774zm2.567 4.123a.55.55 0 0 0-.944-.566L7.371 9.163 6.268 7.875a.55.55 0 1 0-.836.716l1.6 1.867a.55.55 0 0 0 .89-.075z"})},Jm=(0,Mt().wt)("checkmarkShieldFillSmall",Ym),Qm="showAll",Zm="showTeamsWithSecurityOverrides",Xm={[Qm]:{key:Qm,name:(0,ae.jsx)(f().sA,{id:"ManageTeamsSecurityOverridesFilter.showAllOption",defaultMessage:"Show all"}),originName:(0,ae.jsx)(f().sA,{id:"ManageTeamsSecurityOverridesFilter.showAllPlaceholder",defaultMessage:"Security"}),showFilterAsOffWhenSelected:!0},[Zm]:{key:Zm,name:(0,ae.jsx)(f().sA,{id:"ManageTeamsSecurityOverridesFilter.showTeamsWithSecurityOverrides",defaultMessage:"Has overrides"})}};function ef(e){let{manageTeamsStore:t}=e;const s=(0,a().v3)(),n=(0,r().K8)((()=>t.state.showTeamsWithSecurityOverrides),[t]),o=(0,l().IS)((e=>({securityIcon:{width:Mt().Ev.sm,height:Mt().Ev.sm,marginRight:4,fill:e.mediumIconColor},blueFill:{fill:pa().Ay.blue}})),[]),d=[Xm[Qm],Xm[Zm]],c=(0,i.useCallback)((e=>{t.setState({...t.state,showTeamsWithSecurityOverrides:e.key===Zm}),Rm().hj(s,{filter:"securityOverrides",value:e.key})}),[t,s]),u=Xm[n?Zm:Qm];return(0,ae.jsx)(Em,{selectItems:d,currentSelectedItem:u,onChange:c,icon:Jm({...o.securityIcon,...n&&o.blueFill})})}const tf=16,sf=5;function nf(e){let{manageTeamsStore:t,teamStores:s}=e;const n=(0,l().IS)((()=>({container:{display:"flex",alignItems:"center",marginTop:20,flexWrap:"wrap",gap:`${tf}px ${sf}px`},searchContainer:{maxWidth:250,marginRight:"auto"},dropdownContainer:{display:"flex",alignContent:"stretch",flexWrap:"wrap",gap:`${tf}px ${sf}px`}})),[]),a=(0,r().K8)((()=>t.state.searchQuery),[t]),o=(0,i.useCallback)((e=>{t.update((t=>({...t,searchQuery:e})))}),[t]);return(0,ae.jsxs)("div",{style:n.container,children:[(0,ae.jsx)(af,{style:n.searchContainer,onChange:o,value:a}),(0,ae.jsxs)("div",{style:n.dropdownContainer,children:[(0,ae.jsx)(Gm,{manageTeamsStore:t}),(0,ae.jsx)($m,{teamStores:s,manageTeamsStore:t}),(0,ae.jsx)(Om,{manageTeamsStore:t}),(0,ae.jsx)(ef,{manageTeamsStore:t})]})]})}function af(e){let{style:t,value:s,onChange:n}=e;const a=(0,f().tz)(),o=(0,l().IS)((e=>({input:{boxShadow:e.inputBoxShadow,borderRadius:100,fontSize:12},searchIcon:{width:Mt().Ev.sm,height:Mt().Ev.sm,marginRight:2,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]),r=(0,i.useCallback)((e=>n(e.target.value)),[n]);return(0,ae.jsx)(Ys().A,{placeholder:a.formatMessage({defaultMessage:"Search teamspaces...",id:"manageTeamsFilterRow.searchFilter.placeholder"}),style:{...o.input,...t},value:s,onChange:r,left:(0,Dm().u)(o.searchIcon),format:Ys().C.Small,showClearButton:!0})}s(244387);var of=()=>s(294997),rf=()=>s(502852),lf=()=>s(320462),df=()=>s(906230);function cf(e){let{teamStore:t,accessLevel:i,isTeamOwner:n,isArchivedTeam:o,onChangeAccessLevel:d,width:c}=e;const u=(0,a().v3)(),g=function(e){return(0,r().K8)((()=>e.isDefault()),[e])}(t),p=(0,s(832211).Z)({teamStore:t,onChange:d,isDefault:g}),m=g?"default":i,h=p.find((e=>e.key===m)),x=!n||o||Boolean(null==h?void 0:h.disableAllOptionsTooltip);let b;x&&(null!=h&&h.disableAllOptionsTooltip||!n?b=(0,ae.jsx)(f().sA,{id:"manageTeamsAccessCell.onlyTeamOwnersCanChangeAccessLevel",defaultMessage:"Only teamspace owners can change teamspace access levels"}):o&&(b=(0,ae.jsx)(f().sA,{id:"manageTeamsAccessCell.archivedTeamCannotChangeAccessLevel",defaultMessage:"Cannot change access level for archived team"})));const v=(0,s(161813).c)(),y=(0,l().IS)((e=>{const t=e.text.tertiary;return{selectButton:{paddingLeft:8,marginLeft:-8,maxWidth:c},label:{...x&&{color:t},fontSize:S().J.UIRegular.desktop,fontWeight:S().Wy.regular},chevron:{width:10,marginLeft:4,fill:e.mediumIconColor,...x&&{fill:t}},tooltip:{width:200}}}),[x,c]);if(!h)throw new Error(`Selected access level is not an option found in team access level option: ${m}`);return(0,ae.jsx)(Bm().A,{items:p,getKey:e=>e.key,selectedItem:h,onSelect:e=>"private"!==e.key||v?e.onSelect():Lt().K(u,{from:"team_security_settings",upsell:{type:"product",product:"business",limit:{type:"none"},trialability:"none"}}),renderItem:e=>(0,ae.jsx)(xe().A,{textWrap:!0,style:y.tooltip,placement:ye().W.Bottom,disableTooltip:!e.value.tooltip,renderTooltip:()=>e.value.tooltip,render:t=>(0,ae.jsx)(Il().A,{title:e.value.title,...(0,df().A)(e,t)})}),disabled:x,renderOrigin:e=>(0,ae.jsx)(xe().A,{textWrap:!0,style:y.tooltip,disableTooltip:!b,renderTooltip:()=>b,alignment:ye().C.Center,placement:ye().W.Left,render:t=>(0,ae.jsxs)(Vt().p,{style:y.selectButton,disabled:x,...(0,df().A)(e,t),children:[(0,ae.jsx)(Ks().j,{style:y.label,children:h.level}),(0,Ml().b)(y.chevron)]})})})}function uf(e){let{teamOwnerIds:t,manageTeamsStore:n}=e;const a=(0,r().O$)(lt().AppStoreCurrentSpaceStore),o=(0,f().tz)(),{userIds:d,groupIds:c}=t,u=(0,i.useMemo)((()=>[...d,...c]),[c,d]),{userStore:g,groupStore:p}=(0,r().K8)((()=>{if(!a)return{userStore:void 0,groupStore:void 0};const{filterByOwner:e}=n.state;let t=d[0]||c[0];if(e.type===Tm().wA){const s=e.id;u.includes(s)&&(t=s)}return t?d.includes(t)?{userStore:(0,Zo().z)({userId:t,currentSpaceStore:a}),groupStore:void 0}:{userStore:void 0,groupStore:(0,s(17298).E)({groupId:t,spaceStore:a})}:{userStore:void 0,groupStore:void 0}}),[a,c,n,u,d]),m=(0,r().K8)((()=>null!=g&&g.isDefined()?(0,Br().c6)(o,g.getModel()):null!=p&&p.isDefined()?p.getName():void 0),[g,p,o]),h=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",fontSize:S().J.UIRegular.desktop,overflow:"hidden"},userAvatar:{paddingRight:6},nMoreOwnersText:{paddingLeft:3,color:e.text.secondary},noOwners:{marginRight:8,color:e.text.tertiary},userName:{flexShrink:1}})),[]);return u.length<1?(0,ae.jsx)("div",{style:h.noOwners,children:(0,ae.jsx)(f().sA,{id:"manageTeamsOwnersCell.noOwners",defaultMessage:"No owners"})}):(0,ae.jsxs)("div",{style:h.container,children:[(0,ae.jsx)(Rn().A,{style:h.userAvatar,avatarShouldShowShadow:!0,userStore:g,size:20}),(0,ae.jsx)(Ks().j,{style:h.userName,children:m}),u.length>1&&(0,ae.jsx)("div",{style:h.nMoreOwnersText,children:(0,ae.jsx)(f().sA,{id:"manageTeamsOwnersCell.nMoreOwnersLabel",defaultMessage:"+{numAdditionalOwners}",values:{numAdditionalOwners:u.length-1}})})]})}const gf=[Tm().o6,Tm().xT,Tm().p2,Tm().MQ,Tm().rN],pf={[Tm().p2]:{headerTitle:(0,ae.jsx)(f().sA,{id:"manageTeamsTable.columnTitle.access",defaultMessage:"Access"}),renderCell:e=>{let{data:t,environment:s}=e;return(0,ae.jsx)(cf,{teamStore:t.store,accessLevel:t.accessLevel,isTeamOwner:t.isCurrentUserOwnerOfTeam,isArchivedTeam:t.isArchivedTeam,onChangeAccessLevel:(e,i)=>km().qH({environment:s,store:t.store,accessLevel:e,isDefault:i,teamName:t.name,from:"manage_teams_table"}),width:90})},colWidth:{width:90},hasClickableContents:!0},[Tm().o6]:{headerTitle:(0,ae.jsx)(f().sA,{id:"manageTeamspacesTable.columnTitle.teamspace",defaultMessage:"Teamspace"}),renderCell:e=>{let{data:t}=e;return(0,ae.jsx)(mf,{teamStore:t.store,isArchivedTeam:t.isArchivedTeam,name:t.name})},colWidth:{minWidth:30,widthPercent:35}},[Tm().xT]:{headerTitle:(0,ae.jsx)(f().sA,{id:"manageTeamsTable.columnTitle.owners",defaultMessage:"Owners"}),renderCell:e=>{let{data:t,manageTeamsStore:s}=e;return(0,ae.jsx)(uf,{teamOwnerIds:t.owners,manageTeamsStore:s})},colWidth:{minWidth:60,widthPercent:25}},[Tm().MQ]:{headerTitle:(0,ae.jsx)(f().sA,{id:"manageTeamsTable.columnTitle.updated",defaultMessage:"Updated"}),renderCell:e=>{let{data:t}=e;return t.lastUpdated&&(0,ae.jsx)(ff,{lastUpdatedMillis:t.lastUpdated})},colWidth:{minWidth:50,widthPercent:15}},[Tm().rN]:{headerTitle:void 0,renderCell:e=>{let{data:t}=e;return(0,ae.jsx)(s(837605).OutlinerTeamOverflow,{teamStore:t.store,from:"manage_teams_table"})},colWidth:{width:30},hasClickableContents:!0}};function mf(e){let{teamStore:t,name:i,isArchivedTeam:n}=e;const o=(0,a().v3)(),r=(0,s(105018).G)(t),d=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},teamIcon:{marginRight:12},nameAndMembersContainer:{display:"flex",flexDirection:"column",minWidth:0},nameAndArchivedPillContainer:{display:"flex"},nameText:{lineHeight:"18px",fontWeight:S().Wy.regular},smallText:{fontSize:(0,s(622163).ny)(o,"UISmall"),color:e.text.secondary,fontWeight:S().Wy.regular},archivedTag:{marginLeft:5}})),[o]),c=`${(0,s(468343).h)(t)}`;return(0,ae.jsxs)("div",{style:d.container,children:[(0,ae.jsx)(s(424339).x,{style:d.teamIcon,size:28,store:t,disabled:!0}),(0,ae.jsxs)("div",{style:d.nameAndMembersContainer,children:[(0,ae.jsxs)("div",{style:d.nameAndArchivedPillContainer,children:[(0,ae.jsx)(Ks().j,{style:d.nameText,children:i}),n&&(0,ae.jsx)(X().A,{desktopStyle:d.archivedTag,mobileStyle:d.archivedTag,children:(0,ae.jsx)(f().sA,{id:"manageTeamsTable.archivedTag",defaultMessage:"Archived"})})]}),(0,ae.jsxs)(Ks().j,{style:d.smallText,children:[(0,ae.jsx)(f().sA,{id:"manageTeamsTableColumnData.numMembersLabel",defaultMessage:"{numMembers, plural, one {1 member} other {{numMembers} members}}",values:{numMembers:c}}),r?(0,ae.jsxs)(ae.Fragment,{children:[" • ",(0,ae.jsx)(f().sA,{id:"manageTeamsTableColumnData.joinedLabel",defaultMessage:"Joined"})]}):void 0]})]})]})}function ff(e){let{lastUpdatedMillis:t}=e;return(0,ae.jsx)(Ks().j,{children:(0,Ba().W_)(t,"very_short",hi().locale)})}function hf(e){let{teamStores:t,manageTeamsStore:s}=e;const n=(0,a().v3)(),o=(0,r().K8)((()=>lt().default.state.currentUserStore),[]),{sortAscending:d,sortColumn:c}=(0,r().K8)((()=>{const{sortAscending:e,sortColumn:t}=s.state;return{sortAscending:e,sortColumn:t}}),[s]),u=(0,r().K8)((()=>{const e=null==o?void 0:o.id;return e?h().oE(t.map((t=>{if(!t.canRead()||!t.isReady())return;const{ownerUserIds:s,ownerGroupIds:i}=t.getAllOwnerIds();return{store:t,name:t.getName()??"",owners:{userIds:s,groupIds:i},isCurrentUserOwnerOfTeam:Boolean(t.isOwner(e)),hasSecurityOverrides:t.hasSecurityOverrides(),accessLevel:t.getTeamAccessLevel(),isArchivedTeam:(0,of().Sh)({archived_by:t.getArchivedBy()}),lastUpdated:t.getLastEditedTime()}}))):[]}),[null==o?void 0:o.id,t]),g=(0,r().K8)((()=>{const{showOnlyArchivedTeams:e,filterByOwner:t,showTeamsWithSecurityOverrides:i,filterAccess:n}=s.state;return u.filter((t=>e?t.isArchivedTeam:!t.isArchivedTeam)).filter((e=>!i||e.hasSecurityOverrides)).filter((e=>{if(n===Tm().b4&&"open"!==e.accessLevel)return!1;if(n===Tm().lX&&"closed"!==e.accessLevel)return!1;if(n===Tm().OD&&"private"!==e.accessLevel)return!1;switch(t.type){case Tm().qG:return e.owners.userIds.length+e.owners.groupIds.length===0;case Tm().wA:return[...e.owners.userIds,e.owners.groupIds].includes(t.id);case Tm().wf:return!0;default:(0,Rs().HB)(t)}}))}),[s,u]),p=(0,r().K8)((()=>{const{sortAscending:e,sortColumn:t}=s.state;return(0,Cm().WQ)({data:g,sortAscending:e,sortColumn:t})}),[s,g]),m=(0,r().K8)((()=>(0,nm().Ay)(s.state.searchQuery,p,(e=>e.name))),[s,p]),f=(0,i.useCallback)((e=>km().F2({environment:n,teamId:e,tab:lf().p.Members,from:"manage_teams_table"})),[n]),S=(0,l().IS)((e=>({container:{marginTop:17,tableLayout:"fixed",borderCollapse:"collapse",width:"100%",minWidth:gf.reduce(((e,t)=>e+Cf(pf[t].colWidth)+jf),0)},tableHeaderRow:{borderTop:`1px solid ${e.tableDividerColor}`,borderBottom:`1px solid ${e.tableDividerColor}`},noTeamsLabel:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]),x=(0,i.useCallback)((e=>{const{sortColumn:t,sortAscending:i}=s.state,a=e===t&&!i;s.setState({...s.state,sortAscending:a,sortColumn:e}),Rm().xl(n,{sortBy:e,sortOrder:i?"ascending":"descending"})}),[s,n]),b=(0,i.useCallback)((()=>{s.reset()}),[s]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("table",{style:S.container,children:[(0,ae.jsx)("thead",{children:(0,ae.jsx)("tr",{style:S.tableHeaderRow,children:gf.map((e=>(0,ae.jsx)(xf,{column:e,onSortableColumnClick:x,sortAscending:d,sortColumn:c},`header_${e}`)))})}),(0,ae.jsxs)("tbody",{children:[(0,ae.jsx)("tr",{children:gf.map((e=>(0,ae.jsx)("td",{},`padding_row_${e}`)))}),m.map((e=>(0,ae.jsx)(Sf,{onShowTeamSettings:f,teamData:e,manageTeamsStore:s},`${e.store.id}_row`)))]})]}),(0,ae.jsx)(vf,{style:S.noTeamsLabel,numItemsAfterFilter:m.length,numItemsBeforeFilter:t.length,onResetFilters:b})]})}function Sf(e){let{teamData:t,manageTeamsStore:s,onShowTeamSettings:n}=e;const[a,o]=(0,i.useState)(!1),r=(0,i.useCallback)((()=>o(!0)),[]),d=(0,i.useCallback)((()=>o(!1)),[]),c=(0,i.useCallback)((e=>{yf(e,(()=>n(t.store.id)))}),[n,t.store.id]),u=!t.isArchivedTeam,g=(0,l().IS)((e=>({teamRow:{cursor:u?"pointer":"default",borderBottom:`1px solid ${e.tableDividerColor}`}})),[u]);return(0,ae.jsx)("tr",{onMouseLeave:u?d:void 0,onMouseEnter:u?r:void 0,style:g.teamRow,onClick:u?c:void 0,children:gf.map((e=>(0,ae.jsx)(bf,{isRowHovered:a,teamData:t,columnData:pf[e],manageTeamsStore:s},`${t.store.id}_${e}`)))})}function xf(e){let{column:t,onSortableColumnClick:s,sortColumn:i,sortAscending:n}=e;const a=pf[t],o=(0,l().IS)((e=>({th:wf(a),innerDiv:{display:"flex",alignItems:"center",minWidth:Cf(a.colWidth),height:32},text:{fontSize:S().J.UISmall.desktop,fontWeight:S().Wy.regular,color:e.text.secondary},sortButton:{padding:5,margin:-5,overflow:"hidden",maxWidth:"100%"},sortIcon:{fill:e.text.secondary,width:12,height:12,marginLeft:4}})),[a]),r=(0,ae.jsx)(Ks().j,{style:o.text,children:a.headerTitle}),d=(c=t,Tm().LR.includes(c)?(0,ae.jsxs)(Vt().p,{style:o.sortButton,onClick:()=>s(t),children:[r,(()=>{if(t===i)return(0,bc().m)({...o.sortIcon,...n&&{transform:"rotate(180deg)"}})})()]}):r);var c;return(0,ae.jsx)("th",{style:o.th,children:(0,ae.jsx)("div",{style:o.innerDiv,children:d})})}function bf(e){let{teamData:t,columnData:s,isRowHovered:i,manageTeamsStore:n}=e;const o=(0,a().v3)(),r=(0,l().IS)((e=>({td:{...wf(s),...i&&{background:e.buttonHoveredBackground}},innerDiv:{minWidth:Cf(s.colWidth),fontSize:S().J.UIRegular.desktop,color:e.text.primary,height:56,display:"flex",alignItems:"center"}})),[s,i]),d=yf,c=Boolean(s.hasClickableContents);return(0,ae.jsx)("td",{style:r.td,children:(0,ae.jsx)("div",{style:r.innerDiv,onClick:c?d:void 0,children:s.renderCell({environment:o,data:t,manageTeamsStore:n})})})}function vf(e){let{style:t,numItemsBeforeFilter:s,numItemsAfterFilter:i,onResetFilters:n}=e;if(0!==i)return null;let a;return a=0!==s?(0,ae.jsx)(f().sA,{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.teamsFilteredOut",defaultMessage:"Could not find any teamspaces. <linkbutton>Reset your filters</linkbutton>",values:{linkbutton:e=>(0,ae.jsx)(yi().A,{onClick:n,children:e})}}):(0,ae.jsx)(f().sA,{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.noTeamsExist",defaultMessage:"Could not find any teamspaces."}),(0,ae.jsx)(be().A,{isSmall:!0,style:t,children:a})}function yf(e,t){(0,rf().SQ)({event:e,context:rf().y$.ManageTeamsRowClick,callback:t})}const jf=10,Af={paddingLeft:jf/2,paddingRight:jf/2};function Cf(e){return"minWidth"in e?e.minWidth:e.width}function wf(e){let t={};return t="width"in e.colWidth?{width:e.colWidth.width}:{width:`${e.colWidth.widthPercent}%`,minWidth:e.colWidth.minWidth},{...Af,...t}}function Mf(e){let{}=e;const{isMobile:t=!1}=(0,a().Y0)(),s=(0,a().v3)(),n=(0,r().uB)(Tm()._5),o=(0,l().IS)((()=>({container:{marginTop:8},header:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},subheader:{display:"flex",flexDirection:"column",flexShrink:1,overflow:"hidden"}})),[]),{unarchivedTeamIds:d,archivedTeamIds:c,isLoading:u}=(0,r().K8)((()=>{const e=Im().A.state;return"loaded"!==e.loadingState?{unarchivedTeamIds:[],archivedTeamIds:[],isLoading:!0}:{unarchivedTeamIds:e.unarchivedTeamIds,archivedTeamIds:e.archivedTeamIds,isLoading:!1}}),[]),g=(0,r().K8)((()=>u?[]:(0,Cm().Gd)({environment:s,teamIds:[...d,...c]})),[c,s,u,d]),p=(0,i.useCallback)((()=>km().vn("workspace_settings")),[]);return(0,ae.jsxs)("div",{style:o.container,children:[(0,ae.jsxs)(ge().A,{large:!t,style:o.header,small:!0,children:[(0,ae.jsxs)("div",{style:o.subheader,children:[(0,ae.jsx)(f().sA,{id:"manageTeamsBrowser.title",defaultMessage:"Manage teamspaces"}),(0,ae.jsx)(be().A,{isSmall:!0,style:{marginTop:3},children:(0,ae.jsx)(f().sA,{id:"manageTeamsBrowser.subtitle",defaultMessage:"Manage all teamspaces you have access to here"})})]}),(0,ae.jsx)(qs().A,{onClick:p,size:"lg",className:Ge().e6S,children:(0,ae.jsx)(f().sA,{id:"manageTeamsBrowser.newTeamButton.text",defaultMessage:"New teamspace"})})]}),u?(0,ae.jsx)(fi().A,{}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(nf,{teamStores:g,manageTeamsStore:n}),(0,ae.jsx)(hf,{teamStores:g,manageTeamsStore:n})]})]})}var Tf=()=>s(698094);function kf(){const e=(0,a().v3)(),{currentSpaceStore:t,currentUserStore:n}=(0,r().K8)((()=>{const{currentSpaceStore:e,currentUserStore:t}=lt().default.state;return{currentSpaceStore:e,currentUserStore:t}}),[]);return(0,i.useEffect)((()=>{if("loading"===Im().A.state.loadingState||!t||!n)return;en().P({environment:e,messageStoreEmitValue:-1});const i=Tf().Ay.addListener((0,s(201430).Li)({userId:n.id,spaceId:t.id}),void 0,(t=>{let{value:s}=t;en().P({environment:e,messageStoreEmitValue:s})}),void 0,e);return function(){i&&Tf().Ay.removeListener(i,e)}}),[t,n,e]),null}const If=i.memo(kf);var Df=()=>s(919888);function Pf(){const e=(0,a().Y0)();return(0,ae.jsx)(ge().A,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full",children:(0,ae.jsx)(f().sA,{id:"teamsWorkspaceSettings.title",defaultMessage:"Teamspace settings"})})}function Rf(){const e=(0,a().v3)(),t=(0,r().O$)(lt().AppStoreCurrentSpaceStore),s=(0,r().uB)(void 0,ht().A),n=(0,r().K8)((()=>t&&s.getValueForSpace(t)),[t,s]),o=(0,r().K8)((()=>(0,ve().Qd)()),[]),l=(null==n?void 0:n.disableTeamCreation)??!1,d=(null==n?void 0:n.disableTeamGuests)??!1,c=void 0===n,u=(0,i.useCallback)((()=>{const s=l?"allowTeamCreation":"disableTeamCreation";t&&n&&(0,Cm().zY)({newSettingValue:s,environment:e,spaceStore:t,workspaceSecuritySettings:n})}),[t,l,e,n]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Df().y,{disabled:c,onChange:u,title:(0,ae.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.title",defaultMessage:"Limit teamspace creation to only workspace owners"}),description:(0,ae.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.caption",defaultMessage:"Only allow workspace owners to create teamspaces"}),selected:l}),(0,ae.jsx)(mi().A,{size:34}),o&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Df().y,{disabled:c,onChange:async function(){if(t&&n){if(!Boolean(n.disableTeamGuests)){const{accept:e}=await j().Gh({message:(0,ae.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.message",defaultMessage:"Are you sure you want to disable teamspace guests?"}),description:(0,ae.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.description",defaultMessage:"This action will remove all teamspace guests from the workspace."}),acceptLabel:(0,ae.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.acceptButton",defaultMessage:"Disable and remove teamspace guests"})});if(!e)return}cs().V(e,{securitySettingsState:{...n,disableTeamGuests:!n.disableTeamGuests},spaceStore:t})}},title:(0,ae.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.title",defaultMessage:"Allow teamspace owners to add teamspace guests"}),description:(0,ae.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.caption",defaultMessage:"This will allow teamspace owners with membership admin permissions to add teamspace guests. Disabling will remove all teamspace guests."}),selected:!d}),(0,ae.jsx)(mi().A,{size:34})]})]})}function _f(e){let{}=e;const t=(0,l().IS)((()=>({learnMoreLinkContainer:{paddingTop:6,paddingBottom:20}})),[]),s=(0,a().v3)(),n=(0,r().O$)(lt().AppStoreCurrentSpaceStore),o=(0,i.useCallback)((async e=>{let{addedTeams:t,removedTeams:i}=e;n&&await(0,Cm().R6)({environment:s,addedTeams:t,removedTeams:i,spaceStore:n})}),[n,s]),{unarchivedTeams:d,isLoaded:c}=(0,Ls().useUnarchivedTeams)(),u=0===d.length?null:(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Mm().A,{unarchivedTeams:d,onUpdate:o,description:(0,ae.jsx)(be().A,{isSmall:!0,isMultiline:!0,children:(0,ae.jsx)(f().sA,{id:"teamsWorkspaceSettings.defaultTeams.caption",defaultMessage:"Choose teamspaces that all new and current workspace members will automatically join"})})}),(0,ae.jsx)(mi().A,{size:34})]});return(0,ae.jsxs)(Gt().Ay,{children:[(0,ae.jsx)(Pf,{}),(0,ae.jsx)(wm().A,{helpCenterLocation:"settingsAndPermissions",analyticsFrom:"teams_learn_more_workspace_settings",containerStyle:t.learnMoreLinkContainer}),(0,ae.jsx)(If,{}),c?(0,ae.jsxs)(ae.Fragment,{children:[u,(0,ae.jsx)(Rf,{}),(0,ae.jsx)(Mf,{})]}):null]})}var Bf=()=>s(613160),Ef=()=>s(437071),Uf=()=>s(216273);const Lf=(0,Mt().wt)("clockAlternate",{viewBox:"0 0 20 20",svg:(0,ae.jsx)("path",{d:"M10.417 6.09961C10.5811 6.09961 10.7201 6.15885 10.834 6.27734C10.9525 6.39128 11.0117 6.53027 11.0117 6.69434V11.2949L10.376 9.34668L12.5977 12.3408C12.7116 12.4867 12.7617 12.6416 12.748 12.8057C12.7344 12.9697 12.6592 13.0996 12.5225 13.1953C12.3721 13.3001 12.2148 13.3389 12.0508 13.3115C11.8913 13.2842 11.75 13.1908 11.627 13.0312L9.99316 10.8779C9.93392 10.8005 9.89062 10.7253 9.86328 10.6523C9.83594 10.5749 9.82227 10.4928 9.82227 10.4062V6.69434C9.82227 6.53027 9.87923 6.39128 9.99316 6.27734C10.1117 6.15885 10.2529 6.09961 10.417 6.09961ZM10.6768 17.126C9.93848 17.126 9.22298 17.0098 8.53027 16.7773C7.84212 16.5495 7.20638 16.2259 6.62305 15.8066C6.04427 15.3919 5.54297 14.9111 5.11914 14.3643C4.96875 14.182 4.90495 13.9928 4.92773 13.7969C4.95052 13.6009 5.03939 13.446 5.19434 13.332C5.36296 13.2135 5.53841 13.1748 5.7207 13.2158C5.90299 13.2568 6.06478 13.3571 6.20605 13.5166C6.54785 13.9678 6.94889 14.3597 7.40918 14.6924C7.87402 15.0205 8.37988 15.2734 8.92676 15.4512C9.47819 15.6335 10.0615 15.7269 10.6768 15.7314C11.4606 15.736 12.1943 15.5902 12.8779 15.2939C13.5661 15.0023 14.1676 14.599 14.6826 14.084C15.2021 13.5645 15.6077 12.9629 15.8994 12.2793C16.1956 11.5911 16.3438 10.8529 16.3438 10.0645C16.3438 9.2806 16.1956 8.54688 15.8994 7.86328C15.6077 7.17513 15.2021 6.57357 14.6826 6.05859C14.1676 5.53906 13.5661 5.13346 12.8779 4.8418C12.1943 4.55013 11.4606 4.4043 10.6768 4.4043C9.88835 4.4043 9.15234 4.55013 8.46875 4.8418C7.78971 5.12891 7.19043 5.52995 6.6709 6.04492C6.15137 6.5599 5.74349 7.15918 5.44727 7.84277C5.1556 8.52181 5.00749 9.25326 5.00293 10.0371H3.6084C3.61296 9.07096 3.7998 8.16406 4.16895 7.31641C4.53809 6.46875 5.0485 5.72135 5.7002 5.07422C6.35189 4.42708 7.10156 3.92122 7.94922 3.55664C8.80143 3.1875 9.71061 3.00293 10.6768 3.00293C11.6429 3.00293 12.5521 3.1875 13.4043 3.55664C14.2565 3.92578 15.0062 4.4362 15.6533 5.08789C16.305 5.73503 16.8154 6.4847 17.1846 7.33691C17.5537 8.18913 17.7383 9.09831 17.7383 10.0645C17.7383 11.0306 17.5537 11.9398 17.1846 12.792C16.8154 13.6442 16.305 14.3962 15.6533 15.0479C15.0062 15.6995 14.2565 16.2077 13.4043 16.5723C12.5521 16.9414 11.6429 17.126 10.6768 17.126ZM2.78809 8.66992H6.16504C6.33822 8.66992 6.4681 8.71094 6.55469 8.79297C6.64583 8.87044 6.68913 8.9707 6.68457 9.09375C6.68001 9.21224 6.63216 9.33984 6.54102 9.47656L4.87988 11.7803C4.76595 11.9352 4.63151 12.015 4.47656 12.0195C4.32161 12.0195 4.1849 11.9398 4.06641 11.7803L2.40527 9.47656C2.31413 9.3444 2.26628 9.2168 2.26172 9.09375C2.25716 8.9707 2.29818 8.87044 2.38477 8.79297C2.47591 8.71094 2.61035 8.66992 2.78809 8.66992Z"})});var Of=()=>s(592578);function Wf(){const e=(0,r().K8)((()=>{var e;return null===(e=Uf().A.state.preferences)||void 0===e?void 0:e.onStartup}),[]);if(!e)return null;const t=[{key:"continue",label:(0,ae.jsx)(f().sA,{id:"OnDesktopAppStartupSetting.continue.label",defaultMessage:"Continue where you left off"}),renderIcon:e=>Lf({width:20,height:20,...e})},{key:"default_page",label:(0,ae.jsx)(f().sA,{id:"OnDesktopAppStartupSetting.defaultPage.label",defaultMessage:"Your default page"}),renderIcon:e=>(0,Of().J)({width:20,height:20,...e})}];return(0,ae.jsx)(ei().A,{isMobile:!1,title:(0,ae.jsx)(f().sA,{id:"onStartup.title",defaultMessage:"On startup"}),caption:(0,ae.jsx)(f().sA,{id:"onStartup.description",defaultMessage:"Choose what to show when the Notion app starts."}),type:"dropdown",currentOption:e,options:t,onSelectOption:e=>{Ef().electronAppFeatures.setPreference("onStartup",e)}})}var zf=()=>s(129783);const qf=function(){const e=(0,r().K8)((()=>{var e;return null===(e=Uf().A.state.preferences)||void 0===e?void 0:e.onStartup}),[]),t=(0,a().v3)(),i=(0,zf().OC)({environment:t}),n=(0,r().K8)((()=>!t.device.isMobile&&Boolean("on"===gt().default.getEligibleGroup({experimentId:"settings_refresh_2025",defaultGroup:"control"}))),[t]),o=[...(0,r().K8)((()=>n&&Array.isArray(i)?i:[]),[n,i]),e?{key:"on-startup",renderSettingsItem:()=>(0,ae.jsx)(Wf,{})}:void 0,{key:"default-page",renderSettingsItem:()=>(0,ae.jsx)(s(499117).A,{isMobile:!1})}].filter(Rs().O9);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",children:n?(0,ae.jsx)(f().sA,{id:"desktopAppSettings.settingsSection.title",defaultMessage:"Desktop app"}):(0,ae.jsx)(f().sA,{id:"desktopAppStartupSettings.settingsSection.title",defaultMessage:"Startup"})}),(0,ae.jsx)(Cl().U,{items:o}),(0,ae.jsx)(mi().A,{size:48,isHidden:!0})]})};var Ff=()=>s(493898);function Nf(e){let{isMobile:t}=e;const s=(0,a().v3)(),n=(0,r().K8)((()=>lt().default.state.currentUserSettingsStore),[]),o=(0,Bt().O)(),l=(0,r().K8)((()=>{var e;return o&&(null==n||null===(e=n.getSettings())||void 0===e||null===(e=e.beta_ai_co_editing_settings)||void 0===e||null===(e=e[o])||void 0===e?void 0:e.autocorrect)}),[n,o])??!1,d=(0,i.useCallback)((async()=>{o&&n&&await Ff().setCoEditingSetting({environment:s,userSettingsStore:n,spaceId:o,active:!l})}),[s,l,n,o]),c=(0,ae.jsx)(f().sA,{id:"aiCoEditingSettings.title",defaultMessage:"AI Co-editor"}),u=(0,ae.jsx)(f().sA,{id:"aiCoEditingSettings.caption",defaultMessage:"Notion AI checks for writing suggestions and fixes errors as you type."});return(0,ae.jsx)(ei().A,{isMobile:t,title:c,caption:u,isOn:l,type:"toggle",onToggle:d})}var Gf=()=>s(595783);const Kf=function(e){let{isMobile:t}=e;const s=(0,a().v3)(),n=(0,r().K8)((()=>lt().default.state.currentUserSettingsStore),[]),o=(0,r().K8)((()=>{var e;return null==n||null===(e=n.getSettings())||void 0===e?void 0:e.profile_discoverable}),[n])??!0,l=(0,i.useCallback)((e=>{const t=!o;k().createAndCommit({userAction:"ProfileDIscoverabilitySettings.onToggleOption",environment:s,canUndo:!0,perform:e=>{n&&I().mJ({userSettingsStore:n,data:{profile_discoverable:t},transaction:e})}})}),[s,o,n]),d=(0,ae.jsx)(f().sA,{id:"profileDiscoverabilitySettings.title",defaultMessage:"Profile discoverability"}),c=(0,ae.jsx)(f().sA,{id:"profileDiscoverabilitySettings.caption",defaultMessage:"Users with your email can see your name and profile picture when inviting you to a new workspace. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,ae.jsx)(yi().A,{external:!0,href:(0,He().xS)("guides.profileSettings"),onClick:e=>{e.stopPropagation()},children:e})}});return(0,ae.jsx)(ei().A,{isMobile:t,title:d,caption:c,isOn:o,type:"toggle",onToggle:()=>l(n)})};const Vf=(0,s(513694).k)((function(e){let{passwordRequestStore:t,userEmailDomainSettings:n,billingData:l}=e;const{isPhone:d,isMobile:c,isElectron:u,isMobileNative:g}=(0,a().Y0)(),p=(0,a().v3)(),m=(0,zf().OC)({environment:p}),h=(0,zf().jo)(),S=(0,r().uB)(void 0,vt().A);(0,o().l)((()=>{M().Q(p,S)}));const x=(0,r().K8)((()=>S.state.accountSettings),[S]),b=(0,Xe().y)(),v=(0,r().K8)((()=>(0,ss().xu)(p)),[p]),y=(0,r().K8)((()=>Et().zD.isAiEnabled()&&gt().default.checkGate({gateName:"ai_co_editing"})),[]),j=(0,r().K8)((()=>c&&t?(0,zf().xF)({isPhone:d,isMobileNative:g,showOfflineSettings:b,passwordRequestStore:t,userEmailDomainSettings:n,billingData:l,accountSettings:x}):v?h:m),[m,c,d,g,b,t,n,x,l,h,v]);(0,i.useEffect)((()=>(u&&Ef().setGlobalShortcutsEnabled(!1),()=>{u&&Ef().setGlobalShortcutsEnabled(!0)})),[u]);const A=[{key:"timezone-auto",renderSettingsItem:()=>(0,ae.jsx)(jl,{isMobile:c})},{key:"timezone-manual",renderSettingsItem:()=>(0,ae.jsx)(yl,{isMobile:c})}].filter(Rs().O9),C=[{key:"ai-co-editing",renderSettingsItem:()=>(0,ae.jsx)(Nf,{isMobile:c})}],w=[(0,r().K8)((()=>(0,Gf().y)(p)),[p])?{key:"cookies",renderSettingsItem:()=>(0,ae.jsx)(Gf().A,{isMobile:c})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,ae.jsx)(s(138e3).L,{isMobile:c})},{key:"profile-discoverability",renderSettingsItem:()=>(0,ae.jsx)(Kf,{isMobile:c})}].filter(Rs().O9);return(0,ae.jsxs)(Gt().Ay,{children:[(0,ae.jsx)(ge().A,{large:!c,divider:"full",children:v?(0,ae.jsx)(f().sA,{id:"preferences.settingsSection.title",defaultMessage:"Preferences"}):(0,ae.jsx)(f().sA,{id:"mySettings.settingsSection.title",defaultMessage:"My settings"})}),(0,ae.jsx)(Cl().U,{items:j}),v?(0,ae.jsx)(Rl,{}):null,(0,ae.jsx)(mi().A,{size:48,isHidden:!0}),(0,ae.jsx)(qf,{}),y?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ge().A,{large:!c,divider:"full",children:(0,ae.jsx)(f().sA,{id:"notificationAndPersonalSettings.aiSection.title",defaultMessage:"Notion AI"})}),(0,ae.jsx)(Cl().U,{items:C}),(0,ae.jsx)(mi().A,{size:48,isHidden:!0})]}):null,v?null:(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ge().A,{large:!c,divider:"full",children:(0,ae.jsx)(f().sA,{id:"notificationAndPersonalSettings.dateAndTimeSection.title",defaultMessage:"Date & time"})}),(0,ae.jsx)(Cl().U,{items:A}),(0,ae.jsx)(mi().A,{size:48,isHidden:!0})]}),(0,ae.jsx)(ge().A,{large:!c,divider:"full",children:(0,ae.jsx)(f().sA,{id:"mySettings.privacySection.title",defaultMessage:"Privacy"})}),(0,ae.jsx)(Cl().U,{items:w})]})}));var Hf=()=>s(472951);function $f(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?(0,bc().m)({...s,transform:"rotate(180deg)"}):(0,bc().m)(s)}function Yf(e){let{users:t,store:s,extraColumns:n,initialSort:a,tableStyle:o}=e;const[l,d]=(0,i.useState)(a),c=(0,f().tz)();function u(e,t){return(0,ae.jsxs)(Se().A,{disabled:!t.sortable,ignoreLocalHoverState:!0,onClick:()=>{!function(e){d({column:e,asc:(null==l?void 0:l.column)===e&&!(null!=l&&l.asc)})}(e)},style:{display:"flex",alignItems:"center"},children:[t.title,t.sortable&&l&&l.column===e&&$f({up:l.asc})]},e)}const g=(0,i.useMemo)((()=>({title:(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"60%"},sortable:!0,renderer:e=>(0,ae.jsx)(je().A,{actorStore:e}),getValue:e=>e.getDisplayName(c)})),[c]),p=(0,i.useMemo)((()=>({name:g,...n})),[n,g]),m=h().HP(p).map((e=>({key:e,header:u(e,p[e]),style:p[e].style}))),S=(0,r().K8)((()=>{const e=t.map((e=>ie().LU.createChildStore(s,{table:E().oo,id:e.userId}))).filter((e=>e.isDefined()));return l?e.sort(((e,t)=>{const s=p[l.column].getValue(e),i=p[l.column].getValue(t),n=s<i?-1:s>i?1:0;return l.asc?n:-1*n})):e}),[t,s,p,l]);return(0,ae.jsx)(Rc().A,{columns:m,rows:S.map((e=>{const t=Object.values(p).map(((t,s)=>t.renderer?t.renderer(e):(0,ae.jsx)(i.Fragment,{children:t.getValue(e)},s)));return{key:e.id,columns:t}})),tableStyle:o})}function Jf(e){const{store:t}=e,{isOnline:s,subscriptionDataStoreData:i,userSimilarityData:n,visibleUsersLoaded:a,visibleUsers:o}=(0,r().K8)((()=>{const e=Xi().subscriptionDataStoreInstance.state,s=e?(0,is().Be)(e):[],i=h().Si(s.map((e=>ie().LU.createChildStore(t,{table:E().oo,id:e.userId}).isReady())));return{isOnline:ct().A.state.online,subscriptionDataStoreData:e,userSimilarityData:Hf().k.state||{},visibleUsersLoaded:i,visibleUsers:s}}),[t]);if(!s)return(0,ae.jsx)(be().A,{isSmall:!0,style:{textAlign:"center"},children:(0,ae.jsx)(f().sA,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})});if(!i)return(0,ae.jsx)(fi().A,{style:{margin:"calc(50% - 1em) auto"}});if(!a)return(0,ae.jsx)(fi().A,{style:{margin:"calc(50% - 1em) auto"}});const l={style:{},title:(0,ae.jsx)(ae.Fragment,{children:"Similarity Score"}),sortable:!0,renderer:e=>{var t;return(0,ae.jsx)(ae.Fragment,{children:(null===(t=n[e.id])||void 0===t?void 0:t.toFixed(3))||0})},getValue:e=>n[e.id]||0};return(0,ae.jsxs)("div",{style:{width:"100%"},children:[(0,ae.jsx)(ge().A,{large:!0,divider:"full",style:{marginBottom:16,paddingBottom:4,display:"flex"},children:"User Similarity Scores"}),(0,ae.jsx)(Yf,{users:o,store:t,extraColumns:{similarityColumn:l},initialSort:{column:"similarityColumn",asc:!1},tableStyle:{borderTop:void 0}})]})}const Qf={overflow:"auto",paddingTop:10,paddingBottom:12},Zf={display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between",paddingLeft:4,paddingRight:4},Xf={user_settings:{},profile:{},notifications:{},notifications_and_settings:{},connected_apps:{},language_and_region:{},offline:{},settings:{},teams:{adminOnly:!0,membersOnly:!0},members:{membersOnly:!0},analytics:{membersOnly:!0,enterpriseOnly:!0},plans:{membersOnly:!0},billing:{},subscription:{},requests:{adminOnly:!0},security:{adminOnly:!0},identity_provisioning:{adminOnly:!0},admin_content_search:{adminOnly:!0,enterpriseOnly:!0},integrations:{adminOnly:!0},imports:{},audit_log:{adminOnly:!0,enterpriseOnly:!0},public_pages:{membersOnly:!0},sites:{membersOnly:!0},custom_emoji:{membersOnly:!0},verified_pages:{membersOnly:!0},experiments:{},performance_toolbar:{},user_similarity_scores:{},collection_debug:{},offline_mode_debug:{},ai:{},design_previews:{}},eh=(0,f().YK)({dialogLabel:{id:"spaceSettings.dialogLabel",defaultMessage:"Settings & members"}});function th(e){let{spaceStore:t,userStore:n}=e;const d=(0,a().v3)(),{open:c,currentTab:u,openedFrom:g,upsellType:p}=(0,r().K8)((()=>{const{open:e,currentTab:t,openedFrom:s,upsellType:i}=yt().A.state;return{open:e,currentTab:t,openedFrom:s,upsellType:i}}),[]),m=(0,r().uB)(void 0,s(137552).A),f=(0,r().uB)(void 0,vt().A),h=(0,r().uB)(void 0,ht().A),S=(0,r().uB)(void 0,ft),b=(0,r().uB)(void 0,bt);(0,o().l)((()=>{const e=h.getValueForSpace(t);e&&h.setState(e)})),(0,o().l)((()=>{M().Q(d,f)})),(0,i.useEffect)((()=>{c&&y().bt(d,{tab:u,from:g,upsell_type:p})}),[c]);const v=(0,i.useCallback)((()=>{Ct().x(d),nh(),x().Wy({environment:d,spaceId:t.id,canAdmin:t.canAdmin()})}),[d,t]),j=(0,i.useCallback)((()=>{mh((()=>{yt().A.setState({...yt().A.state,open:!1}),s(593774).A.reset(),b.reset(),nh(),jt().A.reset()}),d,t,m,f,h)}),[d,t,m,f,h,b]),A=(0,l().IS)((()=>({modalInner:{width:1150,maxWidth:"calc(100vw - 100px)",height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:12,maxHeight:715}})),[]);return(0,ae.jsx)(Si().a,{ariaLabel:O().A.formatMessage(eh.dialogLabel),open:c,innerStyle:A.modalInner,onOpen:v,onDismiss:j,render:()=>(0,ae.jsx)(bh,{spaceStore:t,userStore:n,spaceBasicSettingsStore:m,spaceProfileSettingsStore:f,securitySettingsStore:h,samlSettingsStore:S,spaceDomainSettingsStore:b}),className:Ge().w7$})}function sh(e,t){const s=Xf[e];return!(s.adminOnly&&!t.canAdmin())&&(!(s.membersOnly&&!t.canRead())&&!(s.enterpriseOnly&&!(0,m().OX)(t.getSubscriptionTier())))}function ih(e,t){return!!ct().A.state.online||!(!t||"offline"!==e)}function nh(){z().A.reset(),K.reset()}function ah(e){let{userStore:t}=e;const s=(0,f().tz)(),i=(0,r().K8)((()=>t.getFullName(s)),[s,t]);return i?(0,ae.jsx)(be().A,{style:{fontWeight:S().Wy.medium},children:i}):null}function oh(e,t,s){const{disablePublicAccess:i,disableGuests:n,disableMoveToSpace:a,disableExport:o,disableSpacePageEdits:r,disablePublicAccessRequests:l,disableTeamCreation:d,disableMembershipRequests:c,disableExternalMembershipRequests:u,disableGuestMembershipRequests:g,disableTeamGuests:p,enableGuestInviteRequests:m,enableAiTraining:f,zeroRetentionEnabled:h,disableMemberUpgradeRequests:S}=e.state;k().createAndCommit({userAction:"SpaceSettings.attemptCloseCurrentTab",environment:s,canUndo:!0,perform:e=>{w().l3({environment:s,disablePublicAccess:i,disableGuests:n,disableMoveToSpace:a,disableExport:o,disableSpacePageEdits:r,disablePublicAccessRequests:l,transaction:e,spaceStore:t,disableTeamCreation:d,disableMembershipRequests:c,disableExternalMembershipRequests:u,disableGuestMembershipRequests:g,disableTeamGuests:p,enableGuestInviteRequests:m,enableAiTraining:Boolean(f),zeroRetentionEnabled:Boolean(h),disableMemberUpgradeRequests:Boolean(S)})}})}function rh(e){let{spaceStore:t}=e;const s=(0,a().v3)(),i=(0,r().K8)((()=>(0,ve().bW)(s)),[s]),n=(0,r().K8)((()=>jt().A.state.count),[]);return i?(0,ae.jsx)(hm,{}):(0,ae.jsx)(at().A,{store:t,unreadAccessRequests:n})}function lh(e){let{spaceStore:t}=e;const s=(0,a().v3)(),i=(0,r().O$)(Xi().subscriptionDataStoreInstance),n=(0,Ot()._3)({spaceId:t.id}),o=(0,r().K8)((()=>At().A.getData(s,{spaceId:t.id})),[t,s]),l=(0,r().K8)((()=>dt().L.getData(s,{spaceId:t.id})??[]),[t,s]);if(n){if((0,p().Fq)(n)){const e=is().BA(i);return e?(0,ae.jsx)(Nt().A,{spaceStore:t,billingData:n,upcomingInvoiceData:o,customerData:e,billingEvents:l}):null}return"unsubscribed_admin"!==(null==i?void 0:i.type)?null:(0,ae.jsx)(Xt,{spaceStore:t,data:i,billingData:n,billingEvents:l})}return null}function dh(){const e=(0,r().K8)((()=>(0,Ve().LB)()),[]),t=(0,r().K8)((()=>(0,Ve().jw)()),[]);return(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsx)(fl().A,{genericImporterEnabled:e,zipImporterEnabled:t})})}function ch(e){return{fontSize:12,lineHeight:1,marginBottom:1,color:e.text.secondary,fontWeight:S().Wy.semibold,alignItems:"center",display:"flex",height:24,paddingLeft:12,paddingRight:11,textOverflow:"ellipsis",overflow:"hidden"}}function uh(){const e=(0,l().DP)(),t=(0,a().v3)(),s=(0,r().K8)((()=>(0,Ne()._m)(t)),[t]),i=(0,r().K8)((()=>null==s?void 0:s.getEmail()),[s]),n={size:20,hasTooltip:!0,avatarShouldShowShadow:!0,userStore:s};return(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",height:44,paddingLeft:12,paddingRight:12},children:[(0,ae.jsx)("div",{"aria-hidden":!0,style:(0,Kt().P6)(e),children:(0,ae.jsx)(Rn().A,{...n})}),s?(0,ae.jsxs)("div",{children:[(0,ae.jsx)(ah,{userStore:s}),i&&(0,ae.jsx)(be().A,{isSmall:!0,children:i})]}):(0,ae.jsx)(f().sA,{id:"spaceSettings.sidebar.personalSettingsSection.userDetails.title",defaultMessage:"Me"})]})}function gh(e){let{tab:t}=e;const s=(0,l().DP)(),i=(0,a().v3)(),n=(0,r().O$)(lt().AppStoreCurrentSpaceStore);return(0,r().K8)((()=>"members"===t&&i.device.isDesktop&&(null==n?void 0:n.canEditMembership())&&(0,ve().x3)()&&!(0,ve().bW)(i)&&jt().A.state.count>0),[t,i,n])?(0,ae.jsx)(Cu().m,{color:s.redBadgeBackground}):null}function ph(e){let{spaceProfileSettingsStore:t,billingData:s}=e;const i=(0,p().eh)(s,"student");return(0,ae.jsx)(lu,{isEducationPlan:i,spaceProfileSettingsStore:t})}async function mh(e,t,s,i,n,a){const{currentUserStore:o,currentUserSettingsStore:r}=lt().default.state;if(!o||!r)throw new Error("No user or settings store.");const l=(0,ae.jsx)(f().sA,{id:"spaceSettings.closeSettingsDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Save changes?"}),d=(0,ae.jsx)(f().sA,{id:"spaceSettings.closeSettingsDialog.confirmationButton.label",defaultMessage:"Yes"}),c=(0,ae.jsx)(f().sA,{id:"spaceSettings.closeSettingsDialog.cancelationButton.label",defaultMessage:"No"}),{currentTab:u}=yt().A.state;if("profile"===u){if(!h().n4(n.state,n.getValueForUser(o,r,O().A.getIntl()))){const{profilePhoto:s,name:i,startDayOfWeek:a}=n.state;return i?j().ui({message:l,showCancel:!0,keepFocus:!0,items:[{label:(0,ae.jsx)(f().sA,{id:"spaceSettings.closeSettingsDialog.updateSettingsButton.label",defaultMessage:"Update"}),color:"blue",onAccept:()=>{k().createAndCommit({userAction:"SpaceSettings.attemptCloseCurrentTab",environment:t,canUndo:!0,perform:e=>{const{currentUserStore:t}=lt().default.state;if(t&&b().b({userStore:t,data:{name:i,profilePhoto:s},transaction:e}),r){const t=r.getSettings();(null==t?void 0:t.start_day_of_week)!==a&&I().mJ({userSettingsStore:r,data:{start_day_of_week:a},transaction:e})}}}),e()}}],handleCancel:()=>{e()}}):j().f1((0,ae.jsx)(f().sA,{id:"profileSettings.personalInfoSection.nameMissing.message",defaultMessage:"Please fill in name."})),!0}e()}else if("settings"===u&&s.canEdit()){const n=!h().n4(a.state,a.getValueForSpace(s)),o=!h().n4(i.state,i.getValueForSpace(s));if(n||o){const{accept:r}=await j().Gh({message:l,acceptLabel:d,cancelLabel:c});return r?(o&&w().Ef({environment:t,spaceStore:s,spaceBasicSettingsStore:i}),n&&oh(a,s,t),e()):e(),!0}e()}else if("audit_log"===u)nh(),e();else if("analytics"===u)St().A.reset(),e();else if("plans"===u&&s.canAdmin()){const i=a.getValueForSpace(s);!h().n4(a.state,a.getValueForSpace(s))&&i&&(a.setState(i),oh(a,s,t)),e()}else"teams"===u?(en().U(),e()):e();return!1}function fh(e){let{tab:t,spaceStore:s,spaceBasicSettingsStore:i,spaceProfileSettingsStore:o,securitySettingsStore:d,spaceDomainSettingsStore:c}=e;const u=(0,l().DP)(),g=(0,a().v3)(),{itemRef:p,onKeyDown:m,onFocus:f,isTabbable:h}=(0,n().e)(),x=(0,r().K8)((()=>yt().A.state.currentTab===t),[t]),b=(0,r().K8)((()=>sh(t,s)),[s,t]),v=(0,r().K8)((()=>Kt().ug[t](g,u)),[g,t,u]),j=(0,r().K8)((()=>Kt().j$[t](g)),[g,t]),A=(0,r().K8)((()=>Kt().pG[t](g)),[g,t]),C=(0,Xe().y)(),w=(0,r().K8)((()=>!ih(t,C)),[t,C]),M=(0,ns().EF)(Xi().subscriptionDataStoreInstance),T="plans"===t&&!M,k=x&&!T,I=(0,l().IS)((e=>({icon:{...(0,Kt().P6)(e,T),...w?{fill:e.text.quaternary}:{}},title:w?{color:e.text.quaternary}:T?{color:e.text.uiBluePrimary}:{},button:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:12,paddingRight:12,borderRadius:4,marginTop:1,marginBottom:1,minHeight:27,position:"relative",...x?{background:e.buttonHoveredBackground}:{}}})),[w,T,x]);return b?(0,ae.jsxs)(Se().A,{ref:p,onKeyDown:m,onFocus:f,disallowTabbing:!h,role:"tab","aria-selected":x,"aria-controls":x?`settings-tabpanel-${t}`:void 0,id:`settings-tab-${t}`,disabled:w,hovered:x,style:I.button,onClick:e=>{if(x)return null;mh((()=>{yt().A.setState({...yt().A.state,currentTab:t,defaultSubtab:void 0}),c.reset(),y().Y7(g,{tab:t})}),g,s,i,o,d)},testId:`settings-tab-${t}`,children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",...k&&{fontWeight:S().Wy.semibold}},children:[(0,ae.jsx)("div",{style:I.icon,children:v}),(0,ae.jsx)(be().A,{style:I.title,isMultiline:!0,children:j}),A]}),(0,ae.jsx)(gh,{tab:t})]}):null}function hh(e){let{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:n,spaceDomainSettingsStore:o,renderBelowPrompt:d}=e;const g=(0,l().DP)(),p=(0,a().v3)(),m=(0,f().tz)(),h=(0,r().K8)((()=>function(e){var t,s;const{currentSpaceViewStore:i,currentSpaceStore:n,currentUserStore:a}=lt().default.state;if(!n||!sh("analytics",n))return!1;if(null==a||!a.id)return!1;if(null==n||!n.isDefined())return!1;const o=null==i?void 0:i.getSettings();return"dismissed"!==(null==o||null===(t=o.space_analytics_settings_prompt)||void 0===t?void 0:t.status)&&"hidden"!==(null==o||null===(s=o.space_analytics_settings_prompt)||void 0===s?void 0:s.status)&&(T().OV(e),!0)}(p)),[p]),S=(0,r().O$)(lt().AppStoreCurrentSpaceStore),x=(0,r().K8)((()=>null==S?void 0:S.canAdmin()),[S]),b=(0,r().K8)((()=>function(e,t){var s,i;const{currentSpaceViewStore:n,currentSpaceStore:a,currentUserStore:o}=lt().default.state;if(null==o||!o.id)return!1;if(null==a||!a.isDefined())return!1;const r=null==n?void 0:n.getSettings();return!("dismissed"===(null==r||null===(s=r.passkey_settings_prompt)||void 0===s?void 0:s.status)||"hidden"===(null==r||null===(i=r.passkey_settings_prompt)||void 0===i?void 0:i.status)||!t.state.accountSettings.hasPassword||t.state.accountSettings.hasPasskeys||(T().mj(e),0))}(p,i)),[p,i]),v=(0,Je().X)("passkey_nudges");if(h){const e=x?(0,ae.jsx)(f().sA,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.workspaceOwner",defaultMessage:"Explore how members & guests are engaging with this workspace, common searches that are made, and content engagement metrics with workspace analytics."}):(0,ae.jsx)(f().sA,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.member",defaultMessage:"See how your content is performing by reviewing metrics like number of views or unique visitors using workspace analytics."});return(0,ae.jsx)(zl,{onDismiss:()=>T().Jm(p),onClick:()=>{mh((()=>{yt().A.setState({...yt().A.state,currentTab:"analytics",defaultSubtab:void 0}),o.reset(),y().Y7(p,{tab:"analytics"}),T().p$(p)}),p,t,s,i,n)},onView:e=>{"enterprise"===(null==S?void 0:S.getSubscriptionTier())&&T().p$(e)},onClickLearnMore:()=>{const e=(0,He().xS)("guides.workspaceAnalytics");C().f({environment:p,url:e})},descriptionMessage:e,title:(0,ae.jsx)(f().sA,{id:"enterpriseSpaceAnalyticsSettingsPrompt.title",defaultMessage:"New workspace analytics"}),buttonText:(0,ae.jsx)(f().sA,{id:"enterpriseSpaceAnalyticsSettingsPrompt.cta",defaultMessage:"View metrics"}),buttonAriaLabel:m.formatMessage({id:"enterpriseSpaceAnalyticsSettingsPrompt.cta",defaultMessage:"View metrics"}),icon:(0,u().J)((0,Kt().uF)(g))})}return v&&b?(0,ae.jsx)(zl,{onClick:()=>{mh((()=>{yt().A.setState({...yt().A.state,open:!0,currentTab:"profile",defaultSubtab:void 0,highlightedSetting:yt().r.Passkey}),y().Y7(p,{tab:"profile"})}),p,t,s,i,n)},onView:T().VW,onDismiss:()=>T().VI(p),onClickLearnMore:()=>{const e=(0,He().xS)("guides.passkeys");C().f({environment:p,url:e})},descriptionMessage:(0,ae.jsx)(f().sA,{id:"passkeySettingsPrompt.description",defaultMessage:"Set up a passkey for faster, safer log-ins."}),title:(0,ae.jsx)(f().sA,{id:"passkeySettingsPrompt.title",defaultMessage:"Enable passkeys for better protection"}),buttonText:(0,ae.jsx)(f().sA,{id:"passkeySettingsPrompt.button.label",defaultMessage:"Enable passkeys"}),buttonAriaLabel:m.formatMessage({id:"passkeySettingsPrompt.button.ariaLabel",defaultMessage:"Enable passkeys"}),icon:(0,c().g)((0,Kt().uF)(g))}):d}function Sh(e){let{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d}=e;const c=(0,l().DP)(),u=(0,a().v3)(),h=u.device.isMobileNative,S=(0,Ot().f_)({spaceId:t.id}),x=(0,r().K8)((()=>yt().A.state.currentTab),[]),b=(0,p().et)(S),y=function(e,t){const s=(0,r().O$)(Xi().subscriptionDataStoreInstance),i=(0,Ot()._3)({spaceId:t.id});return!(!s||!i||e||!((0,p().Fq)(i)||i.paymentMethod||s.hasPaidNonzero))}(b,t),j=(0,r().K8)((()=>t.canAdmin()),[t]),A=function(){const e=(0,a().v3)(),t=(0,as().r)(),s=(0,Ot().f_)({spaceId:null==t?void 0:t.id});return(0,r().K8)((()=>{if(!t)return!1;const i=t.canAdmin(),n=(0,p().AI)(s);return(0,ss().Gy)(e)&&i&&(0,m().jR)(n)}),[s,e,t])}(),C=Boolean((0,p().KH)(S,"plan")),w=(0,Xe().y)(),[M,T,k,I,D]=(0,r().K8)((()=>{const e=(0,$e().l)();return[e,e,e,e&&gt().default.checkGate({gateName:"download_for_offline"}),e||gt().default.checkGate({gateName:"design_previews_enabled"})]}),[]),P=(0,it().kg)(),R=(0,r().K8)((()=>{const e=ut().A.getData(u,{spaceId:t.id}),s=e&&(null==e?void 0:e.pointers.length)>0;return!u.device.isMobile&&((0,Ke().wA)({spaceStore:t})||s)}),[u,t]);(0,Ze().A)({shouldPreserveTextSelection:!0,shouldPreserveBlockSelection:!0,shouldRestoreSelection:!0});const _=(0,r().K8)((()=>(0,Ye().Ur)({environment:u,spaceStore:t})),[u,t]),B=(0,r().K8)((()=>(0,ss().xu)(u)),[u]),E=(0,Qe().J)(),U=(0,r().K8)((()=>t.isAiEnabledOnSpace()),[t]),L=(0,Je().X)("notion_ai_workspace_settings")&&(E||U),O=rt(),W=(0,Je().X)("public_pages_settings_tab");return(0,ae.jsxs)("div",{style:Zf,children:[(0,ae.jsx)("div",{style:Qf,children:(0,ae.jsx)(n().Y,{direction:"vertical",children:(0,ae.jsxs)("div",{role:"tablist","aria-orientation":"vertical",children:[(0,ae.jsx)("div",{style:ch(c),children:(0,ae.jsx)(f().sA,{id:"spaceSettings.sidebar.personalSettingsSection.title",defaultMessage:"Account"})}),B?null:(0,ae.jsx)(uh,{}),(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"profile"}),(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"user_settings"}),(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"notifications"}),(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"connected_apps"}),B?null:(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"language_and_region"}),w&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"offline"}),(0,ae.jsx)(mi().A,{size:18,isHidden:!0}),(0,ae.jsx)("div",{style:ch(c),children:(0,ae.jsx)(f().sA,{id:"spaceSettings.sidebar.workspaceSettingsSection.title",defaultMessage:"Workspace"})}),C||B||h?null:(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"plans"}),C||!y||B?null:(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"billing"}),(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"settings"}),A&&!B?(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"requests"}):null,!B&&!O&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"teams"}),(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"members"}),B&&!O?(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"teams"}):null,B&&!O?(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"security"}):null,B&&!O?(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"identity_provisioning"}):null,!u.device.isMobile&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"analytics"}),!u.device.isMobile&&B&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"admin_content_search"}),!u.device.isMobile&&B&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"audit_log"}),B?(0,ae.jsx)(mi().A,{size:16,dividerColor:c.stroke.secondary}):null,b&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"subscription"}),L&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"ai"}),_&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"verified_pages"}),(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"sites"}),W&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"public_pages"}),R&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"custom_emoji"}),!B&&!O&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"security"}),(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"identity_provisioning"})]}),!u.device.isMobile&&!B&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"admin_content_search"}),(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"integrations"}),!u.device.isMobile&&(0,ae.jsx)("span",{onClick:()=>{const e=g().JW();pt().A.setState({flowId:e}),v().kY(u,{from:"settings",flowId:e})},children:(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"imports"})}),!u.device.isMobile&&!B&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"audit_log"}),B?(0,ae.jsx)(mi().A,{size:16,dividerColor:c.stroke.secondary}):null,A&&B?(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"requests"}):null,y?(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"billing"}):null,!B&&!C||h?null:(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"plans"}),M&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(mi().A,{size:18,isHidden:!0}),(0,ae.jsx)("div",{style:ch(c),children:(0,ae.jsx)(f().sA,{id:"spaceSettings.sidebar.developmentSettingsSection.title",defaultMessage:"Development"})}),T&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"experiments"}),P&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"performance_toolbar"}),k&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"user_similarity_scores"}),T&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"collection_debug"}),I&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"offline_mode_debug"})]}),D&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(mi().A,{size:18,isHidden:!0}),(0,ae.jsx)("div",{style:ch(c),children:(0,ae.jsx)(f().sA,{id:"spaceSettings.sidebar.qaSettingsSection.title",defaultMessage:"QA"})}),D&&(0,ae.jsx)(fh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"design_previews"})]})]})})}),(0,ae.jsx)(hh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,renderBelowPrompt:j?(0,ae.jsx)(Ft,{currentSettingsTab:x}):null})]})}function xh(){const e=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},icon:{width:22,height:22,fill:e.text.secondary}})),[]);return(0,ae.jsx)(Gt().Ay,{centerContent:!0,children:(0,ae.jsxs)("div",{style:e.container,children:[(0,d().C)(e.icon),(0,ae.jsx)(jm().g,{isSecondaryColor:!0})]})})}function bh(e){let{spaceStore:t,userStore:s,spaceBasicSettingsStore:i,spaceProfileSettingsStore:n,securitySettingsStore:a,samlSettingsStore:o,spaceDomainSettingsStore:l}=e;const{organizationOverrides:d}=(0,Ki().n)({spaceId:t.id}),c=(0,r().K8)((()=>yt().A.state.currentTab),[]),u=(0,Ot()._3)({spaceId:t.id}),g=(0,Xe().y)(),p=(0,r().K8)((()=>function(e,t,s,i,n,a,o,r,l,d){const c={profile:()=>(0,ae.jsx)(ph,{spaceProfileSettingsStore:n,billingData:d}),notifications_and_settings:()=>(0,ae.jsx)(_l().A,{isMobile:!1,isMobileNative:!1,billingData:d}),user_settings:()=>(0,ae.jsx)(Vf,{billingData:d}),notifications:()=>(0,ae.jsx)(Ll,{}),language_and_region:()=>(0,ae.jsx)(Rl,{}),connected_apps:()=>(0,ae.jsx)(Bf().A,{location:"settings-page",spaceStore:t}),offline:()=>(0,ae.jsx)(et().x,{}),settings:()=>(0,ae.jsx)(Od().Ay,{spaceStore:t,billingData:d,spaceBasicSettingsStore:i,securitySettingsStore:a,organizationOverrides:l}),requests:()=>(0,ae.jsx)(Qi,{securitySettingsStore:a,spaceStore:t}),teams:()=>(0,ae.jsx)(_f,{}),members:()=>(0,ae.jsx)(rh,{spaceStore:t}),analytics:()=>(0,ae.jsx)(Ld,{spaceStore:t}),plans:()=>(0,ae.jsx)(os().o3,{}),billing:()=>(0,ae.jsx)(lh,{spaceStore:t}),subscription:()=>(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsx)(Am().L,{})}),security:()=>(0,ae.jsx)(ki,{spaceStore:t,userStore:s,securitySettingsStore:a,organizationOverrides:l}),identity_provisioning:()=>(0,ae.jsx)(ml,{spaceStore:t,userStore:s,samlConfigStore:o,domainSettingsStore:r}),admin_content_search:()=>(0,ae.jsx)(Sn,{spaceStore:t,userStore:s}),integrations:()=>(0,ae.jsx)(kn,{spaceStore:t,userStore:s,organizationOverrides:l}),audit_log:()=>(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsx)(_e,{spaceStore:t})}),imports:()=>(0,ae.jsx)(dh,{}),sites:()=>(0,ae.jsx)(ze,{spaceStore:t}),public_pages:()=>(0,ae.jsx)(nt().fh,{spaceStore:t}),custom_emoji:()=>(0,ae.jsx)(Oe,{spaceStore:t}),verified_pages:()=>(0,ae.jsx)(sn,{spaceStore:t}),experiments:()=>(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsx)(_n().F,{})}),performance_toolbar:()=>(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsx)(it().dt,{})}),user_similarity_scores:()=>(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsx)(Jf,{store:t})}),collection_debug:()=>(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsx)(Ue,{})}),offline_mode_debug:()=>(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsx)(st,{})}),ai:()=>(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsx)(xn().KZ,{spaceStore:t,billingData:d,securitySettingsStore:a})}),design_previews:()=>(0,ae.jsx)(Gt().Ay,{children:(0,ae.jsx)(Fe,{})})};let u=e;return sh(u,t)||(u=A().Yp(t),A().Ow({currentTab:u})),c[u]}(c,t,s,i,n,a,o,l,d,u)),[c,o,a,i,l,n,t,s,d,u]),m=(0,r().K8)((()=>!ih(c,g)),[c,g]);return(0,ae.jsx)(Pn().A,{capture:!0,allowEsc:!0,render:e=>(0,ae.jsx)(ql,{sidebar:(0,ae.jsx)(Sh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:n,securitySettingsStore:a,spaceDomainSettingsStore:l}),contentId:`settings-tabpanel-${c}`,contentLabelledBy:`settings-tab-${c}`,contentRole:"tabpanel",...e,children:m?(0,ae.jsx)(xh,{}):p()})})}const vh=i.memo(th)},376066:(e,t,s)=>{s.r(t),s.d(t,{arrowUpRightSquareIcon:()=>a,iconDefinition:()=>n});s(242343);var i=s(163643);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M7.875 7c0-.345.28-.625.625-.625H13c.345 0 .625.28.625.625v4.5a.625.625 0 1 1-1.25 0V8.509l-5.12 5.12a.625.625 0 1 1-.884-.883l5.12-5.121H8.5A.625.625 0 0 1 7.875 7"}),(0,i.jsx)("path",{d:"M3.125 5.25c0-1.174.951-2.125 2.125-2.125h9.5c1.174 0 2.125.951 2.125 2.125v9.5a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125zm2.125-.875a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875v-9.5a.875.875 0 0 0-.875-.875z"})]})},a=(0,s(680369).wt)("arrowUpRightSquare",n)},430041:(e,t,s)=>{s.d(t,{m:()=>n});s(242343);var i=s(163643);const n=(0,s(680369).wt)("arrowUpCircled",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.993 15.126c.966 0 1.875-.185 2.728-.554a7.218 7.218 0 003.787-3.78 6.788 6.788 0 00.553-2.728c0-.966-.184-1.875-.553-2.727a7.136 7.136 0 00-1.531-2.25 7.219 7.219 0 00-2.256-1.53 6.805 6.805 0 00-2.735-.554c-.966 0-1.875.185-2.727.554a7.241 7.241 0 00-3.774 3.78 6.788 6.788 0 00-.553 2.727c0 .967.184 1.876.553 2.728.37.852.878 1.604 1.525 2.256a7.124 7.124 0 002.256 1.524 6.77 6.77 0 002.727.554zm0-1.395a5.598 5.598 0 01-4.013-1.654 5.735 5.735 0 01-1.21-1.804 5.567 5.567 0 01-.437-2.209c0-.783.146-1.517.438-2.2a5.715 5.715 0 011.21-1.812 5.6 5.6 0 011.797-1.217 5.599 5.599 0 012.208-.438c.789 0 1.525.146 2.208.438a5.66 5.66 0 013.029 3.028 5.55 5.55 0 01.437 2.201c0 .789-.146 1.525-.437 2.209a5.68 5.68 0 01-1.217 1.804 5.68 5.68 0 01-1.805 1.217 5.567 5.567 0 01-2.208.437zM8 11.51a.597.597 0 00.43-.164.584.584 0 00.172-.431V7.688L8.547 6.28l.622.78.759.793a.53.53 0 00.417.177c.16 0 .291-.052.396-.157a.518.518 0 00.164-.39.595.595 0 00-.164-.417L8.485 4.783A.664.664 0 008 4.558c-.173 0-.333.075-.479.225L5.26 7.066a.593.593 0 00-.157.417.538.538 0 00.554.547.557.557 0 00.416-.177l.766-.8.615-.766-.055 1.401v3.227c0 .173.057.317.171.43.114.11.258.165.431.165z"})})},455936:(e,t,s)=>{s.d(t,{p:()=>n});s(242343);var i=s(163643);const n=(0,s(680369).wt)("arrowUpLeft",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M0.845703 8.58691L0.852539 1.72363C0.852539 1.48665 0.923177 1.29525 1.06445 1.14941C1.21029 0.999023 1.40625 0.923828 1.65234 0.923828H8.51562C8.74349 0.923828 8.93034 0.999023 9.07617 1.14941C9.22201 1.2998 9.29492 1.47526 9.29492 1.67578C9.29492 1.8763 9.21973 2.04948 9.06934 2.19531C8.91895 2.33659 8.74121 2.40723 8.53613 2.40723H6.10254L3.16309 2.30469L4.40723 3.39844L10.915 9.91992C11.0745 10.084 11.1543 10.264 11.1543 10.46C11.1543 10.5921 11.1178 10.7174 11.0449 10.8359C10.972 10.9544 10.8763 11.0479 10.7578 11.1162C10.6439 11.1891 10.5186 11.2256 10.3818 11.2256C10.1813 11.2256 10.0013 11.1481 9.8418 10.9932L3.32715 4.47852L2.21973 3.23438L2.33594 6.05078V8.60742C2.33594 8.8125 2.26302 8.99251 2.11719 9.14746C1.97591 9.29785 1.80273 9.37305 1.59766 9.37305C1.39714 9.37305 1.22168 9.29785 1.07129 9.14746C0.920898 8.99707 0.845703 8.81022 0.845703 8.58691Z"})})},469118:(e,t,s)=>{s.d(t,{C:()=>n});s(242343);const i={viewBox:"0 0 16 16",svg:(0,s(163643).jsx)("path",{d:"M9.372 3.238a.625.625 0 1 0-.884.884l3.253 3.253H2.75a.625.625 0 0 0 0 1.25h8.991l-3.253 3.253a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"})},n=(0,s(680369).wt)("arrowStraightRightSmall",i)},493738:(e,t,s)=>{s.d(t,{u:()=>n});s(242343);const i={viewBox:"0 0 16 16",svg:(0,s(163643).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},n=(0,s(680369).wt)("magnifyingGlassSmall",i)},493898:(e,t,s)=>{s.r(t),s.d(t,{clearCoEditingOverride:()=>c,setCoEditingOverride:()=>d,setCoEditingSetting:()=>l});var i=()=>s(611168),n=()=>s(84543),a=()=>s(658388),o=()=>s(137476),r=()=>s(82029);async function l(e){var t,s;const{environment:r,userSettingsStore:l,spaceId:d,active:c}=e,u=(null===(t=l.getSettings())||void 0===t?void 0:t.beta_ai_co_editing_settings)??{};if(((null===(s=u[d])||void 0===s?void 0:s.autocorrect)??!1)===c)return;n().createAndCommit({userAction:"AiCoEditingSettings.onToggleOption",environment:r,canUndo:!0,perform:e=>{a().mJ({userSettingsStore:l,data:{beta_ai_co_editing_settings:{...u,[d]:{autocorrect:c}}},transaction:e})}});const g=await(0,i().uZ)();c&&g.resetSessionId(),(0,o().u4)({environment:r,event:{eventName:"co_editing_toggled",eventProperties:{toggle_status:c?"on":"off",session_id:g.getSessionId()}}}),c||g.resetSessionId()}async function d(e){const{environment:t,pageId:s,active:n}=e;r().t.setOverride(s,{autocorrect:n});const a=await(0,i().uZ)();(0,o().u4)({environment:t,event:{eventName:"co_editing_override_updated",eventProperties:{new_state:n?"on":"off",session_id:a.getSessionId(),page_id:s}}})}async function c(e){const{environment:t,pageId:s}=e;r().t.clearOverride(s);const n=await(0,i().uZ)();(0,o().u4)({environment:t,event:{eventName:"co_editing_override_updated",eventProperties:{new_state:"cleared",session_id:n.getSessionId(),page_id:s}}})}},592578:(e,t,s)=>{s.d(t,{J:()=>n});s(242343);var i=s(163643);const n=(0,s(680369).wt)("sidebarHome",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.54446 3.06854C9.8066 2.84385 10.1934 2.84385 10.4556 3.06854L15.7064 7.56922C16.0832 7.89219 16.3 8.36369 16.3 8.85996V14.6C16.3 15.5389 15.5389 16.3 14.6 16.3H11.75C11.3634 16.3 11.05 15.9866 11.05 15.6V11.7H8.95001V15.6C8.95001 15.9866 8.63661 16.3 8.25001 16.3H5.40001C4.46113 16.3 3.70001 15.5389 3.70001 14.6V8.85996C3.70001 8.36369 3.91687 7.89219 4.29367 7.56922L9.54446 3.06854ZM10 4.52198L5.20477 8.63218C5.13828 8.68918 5.10001 8.77238 5.10001 8.85996V14.6C5.10001 14.7657 5.23433 14.9 5.40001 14.9H7.55001V11.5C7.55001 10.8373 8.08727 10.3 8.75001 10.3H11.25C11.9128 10.3 12.45 10.8373 12.45 11.5V14.9H14.6C14.7657 14.9 14.9 14.7657 14.9 14.6V8.85996C14.9 8.77238 14.8617 8.68918 14.7952 8.63218L10 4.52198Z"})})},647276:(e,t,s)=>{s.d(t,{n:()=>l});var i=()=>s(237385),n=()=>s(162901),a=()=>s(76394),o=()=>s(818369);const r={};function l(e){let{spaceId:t}=e;const s=(0,i().v3)(),[{status:l,error:d,value:c}]=(0,n().Yb)((async()=>{if(!t)return{overrides:{},organizationInfo:void 0,isOrganizationOwner:!1};const e=await o().callApi({eventName:"getOrganizationSettingsOverrides",environment:s,data:{spaceId:t}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,a().HB)(e)}),[s,t]);return{organizationOverrides:(null==c?void 0:c.overrides)??r,organizationInfo:null==c?void 0:c.organizationInfo,isOrganizationOwner:null==c?void 0:c.isOrganizationOwner,loading:"pending"===l||"idle"===l,error:d}}},668670:(e,t,s)=>{s.d(t,{P:()=>u,U:()=>c});s(403517);var i=()=>s(925013),n=()=>s(76394),a=()=>s(904697),o=()=>s(931371),r=()=>s(485966),l=()=>s(68653),d=()=>s(540952);function c(){l().A.reset(),d().A.reset()}async function u(e){let{environment:t,messageStoreEmitValue:s,spaceStore:l}=e;if(!function(e){const t=d().A.state;switch(t.loadingState){case"uninitialized":return!0;case"loading":return!1;case"loaded":return-1===e||e!==t.messageStoreEmitValue;default:(0,n().HB)(t)}}(s))return!1;const{currentSpaceStore:c,currentUserStore:u}=r().default.state,g=c||l;if(!g||!u)return!1;"uninitialized"===d().A.state.loadingState&&d().A.setState({loadingState:"loading"});const p=await async function(e){let{environment:t,currentSpaceStore:s,currentUserStore:n}=e;const r=s.getModel(),l=n.id,d=(0,o().dp)(s,l).getModel();if(void 0===r||void 0===d)return;if((0,i().fK)({space:r,spaceUser:d})){return await(0,a().getAllTeamsInSpaceForEnterpriseAdmin)({environment:t,spaceStore:s,includeArchived:!0,currentUserId:l,minRoleOnTeamStores:"reader"})}const c=await(0,a().getTeamsWithAggregateData)({fromCache:!1,environment:t,spaceStore:s,includeArchived:!0,currentUserId:l});if(!c)return;return c.teams}({environment:t,currentSpaceStore:g,currentUserStore:u});if(!(0,n().O9)(p))return d().A.setState({loadingState:"uninitialized"}),!1;const{archivedTeams:m,unarchivedTeams:f}=(0,a().partitionArchivedAndUnarchivedTeams)(p);return d().A.setState({loadingState:"loaded",archivedTeamIds:m.map((e=>e.id)),unarchivedTeamIds:f.map((e=>e.id)),messageStoreEmitValue:s}),!0}},673411:(e,t,s)=>{s.d(t,{A:()=>g});s(242343);var i=()=>s(803290),n=()=>s(174114),a=()=>s(653998),o=()=>s(129978);const r=new(o().O2)("DisconnectContactModal",(async()=>{const{DisconnectContactModal:e}=await s.e(6178).then(s.bind(s,951242));return{DisconnectContactModal:e}})),l=(0,o()._h)(r,(e=>e.DisconnectContactModal));var d=()=>s(858023),c=()=>s(88271),u=s(163643);const g=function(e){const{importListItems:t}=e,o=(0,i().uB)(void 0,s(210466).A),r=(0,i().K8)((()=>s(204507).L.getState().open),[]),g=(0,n().IS)((e=>({InviteDropdownMenu:{background:e.cardContentBackground,width:265,borderRadius:8},helpIcon:{width:14,height:14,fill:e.icon.secondary},helpSection:{color:e.text.secondary,fontSize:12,padding:"0 8px",width:"100%"}})),[]),p={key:"all_import_sections",render:e=>(0,u.jsx)(c().A,{...e,title:(0,u.jsx)(a().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.inviteDropdownMenu.title",defaultMessage:"Import from"})}),items:t},m={key:"help_section",render:e=>(0,u.jsx)(c().A,{...e,topBorder:!0}),items:[{key:"help_section",render:e=>f,action:()=>{}}]},f=(0,u.jsx)(s(579494).A,{style:{display:"flex",padding:"0 4px"},className:"notion-print-ignore",href:(0,s(392608).xS)("guides.publicAPI"),external:!0,children:(0,u.jsx)(s(209684).p,{icon:s(284594).$,iconStyle:g.helpIcon,style:g.helpSection,children:(0,u.jsx)(a().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.inviteDropdownMenu.learnMore",defaultMessage:"Learn more"})})});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s(935091).A,{menuType:s(640979).gu.Popup,children:(0,u.jsx)(d().Ay,{type:d().Oh.Vertical,store:o,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,sections:[p,m],style:g.InviteDropdownMenu})}),r&&(0,u.jsx)(l,{open:r})]})}},680475:(e,t,s)=>{s.d(t,{n:()=>r});var i=()=>s(76394),n=()=>s(145046),a=()=>s(868325),o=()=>s(477784);async function r(e){let{onRequest:t,onSuccess:s}=e;const r=await t();switch(r.type){case"success":s&&await s(r);break;case"failed":n().f1((0,a().Hu)(o().A.getIntl(),r));break;default:(0,i().HB)(r)}}},713471:(e,t,s)=>{s.d(t,{X:()=>l});var i=()=>s(803290),n=()=>s(76394),a=()=>s(764227),o=()=>s(105018),r=()=>s(935449);function l(e){const t=(0,r().R)(e),s=(0,o().G)(e);return(0,i().K8)((()=>{if(!(0,a().El)())return!1;const i=e.getSetting("invite_access");switch(i){case void 0:return!1;case"team_members":return s;case"team_owners":return t;default:(0,n().HB)(i)}}),[e,t,s])}},785061:(e,t,s)=>{s.d(t,{Hc:()=>d,Io:()=>u,Mg:()=>p,S3:()=>r,X3:()=>l,dE:()=>g,iO:()=>c,vC:()=>m,vG:()=>o});s(362833),s(725707),s(771702);var i=()=>s(174114),n=()=>s(220413),a=()=>s(31448);function o(e){const{focus:t}=e;return(0,i().IS)((e=>({searchBar:{padding:16},inputStyle:{minWidth:60,width:"auto",borderTopLeftRadius:4,borderTopRightRadius:4,fontSize:14,fontWeight:a().Wy.regular},inputOuterStyle:{padding:6,borderRadius:6,height:20,alignItems:"center",minHeight:32,background:e.accentColors.gray[30],...t&&{background:"none"}}})),[t])}function r(){return(0,i().IS)((e=>({selectAllSectionStyle:{display:"flex",flexDirection:"column",gap:2,padding:"8px 0px 16px 0px"},sectionMenuItem:{padding:"12px 0px 0px 2px",display:"flex",flexDirection:"column",gap:2},dividerStyle:{margin:"0px 16px"},dividerInnerStyle:{borderBottom:`1px solid ${e.stroke.secondary}`},selectAllStyle:{display:"flex",fontSize:14,color:e.text.primary},totalCountsStyle:{paddingLeft:3,fontSize:14,color:e.text.tertiary}})),[])}function l(){return(0,i().IS)((e=>({footerStyle:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:60,padding:"12px 16px 16px 16px",borderTop:`1px solid ${e.stroke.secondary}`}})),[])}function d(){return(0,i().IS)((e=>({labelContainer:{display:"flex",alignItems:"center",color:n().Ay.uiLightBlack,size:14,gap:6},importListButton:{height:28,borderRadius:4,border:void 0,width:"100%"},importListButtonContainer:{padding:"0 6px",alignItems:"center"}})),[])}function c(){return(0,i().IS)((e=>({topContainer:{display:"flex",alignItems:"center",width:"100%",height:40,padding:"0 16px",borderBottom:`1px solid ${e.stroke.secondary}`},sendInviteLabel:{color:e.text.primary,fontSize:14,fontWeight:a().Wy.medium,textAlign:"left",verticalAlign:"top"}})),[])}function u(e,t){return(0,i().IS)((s=>({buttonContainer:{padding:"0 8px",...t},button:{height:32,borderRadius:4,border:`1px solid ${s.stroke.primary}`,...e}})),[e,t])}function g(e){const{filteredImportedContacts:t,inviteTargetsStore:s}=e,i=s.state.inviteTargets.length;return 0!==i&&i===t.length}function p(e){const{filteredImportedContacts:t}=e,s={};return t.forEach(((e,t)=>{const i=e.value.email[0].toUpperCase(),n=/^[A-Za-z]$/.test(i)?i:"#";s[n]||(s[n]=[]),s[n].push(e)})),s}function m(e){const{canEditPermission:t,isMobile:s,hasAccessToFeature:i}=e;return!(s||i||!t)}},789077:(e,t,s)=>{s.d(t,{lR:()=>U,P6:()=>D,uF:()=>P,pG:()=>E,ug:()=>R,j$:()=>B,DZ:()=>I});s(242343);var i=()=>s(680369),n=s(163643);const a={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M6.575 10A3.425 3.425 0 0 1 10 6.575v-.64c0-.445.533-.664.847-.35l1.328 1.329a.49.49 0 0 1 0 .7l-1.328 1.329a.495.495 0 0 1-.847-.35v-.918A2.325 2.325 0 1 0 12.325 10a.55.55 0 1 1 1.1 0 3.425 3.425 0 0 1-6.85 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},o=(0,i().wt)("arrowInCircleClockwiseInCircle",a);var r=()=>s(183781);const l={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v6.04l-1.25-.632V7.5H3.625v6.25c0 .483.392.875.875.875h7.213l.454 1.25H4.5a2.125 2.125 0 0 1-2.125-2.125zm2.258.184a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25m2.625-.625a.625.625 0 1 0-1.25 0 .625.625 0 0 0 1.25 0m1.375.625a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25"}),(0,n.jsx)("path",{d:"m17.426 14.65.474-.17a.433.433 0 0 0 .047-.796l-5.644-2.85a.433.433 0 0 0-.604.533l2.268 6.239a.435.435 0 0 0 .815.007l.574-1.509 2.225 2.433a.758.758 0 1 0 1.122-1.022l-2.287-2.501z"})]})},d=(0,i().wt)("browserClick",l);var c=()=>s(870122);const u={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.86 6.61a.969.969 0 1 0 0-1.938.969.969 0 0 0 0 1.937"}),(0,n.jsx)("path",{d:"M9.86 1.625a4.984 4.984 0 0 0-2.563 9.26v5.17c0 .18.078.351.213.47l1.938 1.695a.625.625 0 0 0 .823 0l1.937-1.695a.625.625 0 0 0 .063-.877l-1.104-1.289 1.104-1.288a.63.63 0 0 0 .15-.407v-1.779a4.984 4.984 0 0 0-2.563-9.26M6.124 6.609a3.734 3.734 0 1 1 5.394 3.347.63.63 0 0 0-.347.56v1.917l-1.303 1.52c-.2.234-.2.58 0 .813l1.05 1.226-1.06.927-1.312-1.148v-5.255a.63.63 0 0 0-.347-.56 3.73 3.73 0 0 1-2.075-3.347"})]})},g=(0,i().wt)("key",u);var p=()=>s(115692),m=()=>s(954397),f=()=>s(463566),h=()=>s(653998),S=()=>s(782422),x=()=>s(307542),b=()=>s(477784),v=()=>s(613313),y=()=>s(111826),j=()=>s(305043),A=()=>s(793613),C=()=>s(174114),w=()=>s(166744),M=()=>s(168446);function T(){const e=(0,s(803290).O$)(s(485966).AppStoreCurrentSpaceStore);return e?(0,n.jsx)(k,{spaceStore:e}):null}function k(e){let{spaceStore:t}=e;const s=((0,M().U4)({spaceStore:t,requestType:"guest"})??0)+((0,M().U4)({spaceStore:t,requestType:"member"})??0),i=(0,C().IS)((e=>({container:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",right:6,top:6},badge:{top:-3,right:-5}})),[]);return 0===s?null:(0,n.jsx)("div",{style:i.container,children:(0,n.jsx)(w().A,{count:s,style:i.badge,color:w().g.Red})})}const I=(0,h().YK)({offlineModeDebugTab:{id:"spaceSettingsSidebar.offlineModeDebugTab.title",defaultMessage:"Offline Mode"},offlineTab:{id:"spaceSettingsSidebar.offlineTab.title",defaultMessage:"Offline"},accountTab:{id:"spaceSettingsSidebar.accountTab.title",defaultMessage:"My account"},generalTab:{id:"spaceSettingsSidebar.generalTab.title",defaultMessage:"General"},settingsTab:{id:"spaceSettingsSidebar.settingsTab.title",defaultMessage:"Settings"},teamsTab:{id:"spaceSettingsSidebar.teamsTab.title",defaultMessage:"Teamspaces"},peopleTab:{id:"spaceSettingsSidebar.peopleTab.title",defaultMessage:"People"},membersTab:{id:"spaceSettingsSidebar.membersTab.title",defaultMessage:"Members"},explorePlansTab:{id:"spaceSettingsSidebar.explorePlansTab.title",defaultMessage:"Explore plans"},upgradePlanTab:{id:"spaceSettingsSidebar.upgradePlanTab.title",defaultMessage:"Upgrade plan"},billingTab:{id:"spaceSettingsSidebar.billingTab.title",defaultMessage:"Billing"},subscriptionTab:{id:"spaceSettingsSidebar.subscriptionTab.title",defaultMessage:"Subscription"},connectedAppsTab:{id:"spaceSettingsSidebar.connectedAppsTab.title",defaultMessage:"My connected apps"},connectionsTab:{id:"spaceSettingsSidebar.connectionsTab.title",defaultMessage:"Connections"},userConnectionsTab:{id:"spaceSettingsSidebar.userConnectionsTab.title",defaultMessage:"My connections"},securityTab:{id:"spaceSettingsSidebar.securityTab.title",defaultMessage:"Security"},securityAndDataTab:{id:"spaceSettingsSidebar.securityAndDataTab.title",defaultMessage:"Security & data"},identityTab:{id:"spaceSettingsSidebar.identityTab.title",defaultMessage:"Identity"},identityProvisioningTab:{id:"spaceSettingsSidebar.identity&ProvisioningTab.title",defaultMessage:"Identity & provisioning"},publicPagesTab:{id:"spaceSettingsSidebar.publicPages.title",defaultMessage:"Public pages"},sitesTab:{id:"spaceSettingsSidebar.sites.title",defaultMessage:"Sites"},customEmojiTab:{id:"spaceSettingsSidebar.emoji.title",defaultMessage:"Emoji"},adminContentSearchTab:{id:"spaceSettingsSidebar.adminContentSearch.title",defaultMessage:"Content search"},languageAndRegionTab:{id:"spaceSettingsSidebar.languageAndRegionTab.title",defaultMessage:"Language & region"},integrationsTab:{id:"spaceSettingsSidebar.integrationsTab.title",defaultMessage:"Integrations"},spaceConnectionsTab:{id:"spaceSettingsSidebar.spaceConnectionsTab.title",defaultMessage:"Connections"},auditLogTab:{id:"spaceSettingsSidebar.auditLogTab.title",defaultMessage:"Audit log"},notificationsAndSettings:{id:"spaceSettingsSidebar.notificationsAndSettings.title",defaultMessage:"My notifications & settings"},preferences:{id:"spaceSettingsSidebar.preferences.title",defaultMessage:"Preferences"},mySettings:{id:"spaceSettingsSidebar.mySettings.title",defaultMessage:"My settings"},notifications:{id:"spaceSettingsSidebar.notifications.title",defaultMessage:"Notifications"},myNotifications:{id:"spaceSettingsSidebar.myNotifications.title",defaultMessage:"My notifications"},analyticsTab:{id:"spaceSettingsSidebar.analyticsTab.title",defaultMessage:"Analytics"},importTab:{id:"spaceSettingsSidebar.importsTab.title",defaultMessage:"Import"},verifiedPagesTab:{id:"spaceSettingsSidebar.verifiedPagesTab.title",defaultMessage:"Verified pages"},requestsTab:{id:"spaceSettingsSidebar.requestsTab.title",defaultMessage:"Requests"},experimentsTab:{id:"spaceSettingsSidebar.experimentsTab.title",defaultMessage:"Experiments"},performanceToolbarTab:{id:"spaceSettingsSidebar.performanceToolbarTab.title",defaultMessage:"Performance Toolbar"},userSimilarityScoresTab:{id:"spaceSettingsSidebar.userSimilarityScoresTab.title",defaultMessage:"User Similarity Scores"},collectionsDebugTab:{id:"spaceSettingsSidebar.collectionsDebug.title",defaultMessage:"Collections"},aiTab:{id:"spaceSettingsSidebar.aiTab.title",defaultMessage:"Notion AI"},designPreviewsTab:{id:"spaceSettingsSidebar.designPreviewsTab.title",defaultMessage:"Design Previews"}});function D(e,t){return{width:20,height:20,marginRight:8,color:t?e.text.uiBluePrimary:e.regularIconColor,fill:t?e.text.uiBluePrimary:e.regularIconColor}}function P(e){return{width:14,height:14,color:e.regularIconColor}}const R={profile:(e,t)=>{const i=(0,S()._m)(e);return(0,v().xu)(e)&&i?(0,n.jsx)("div",{style:D(t),children:(0,n.jsx)(s(482570).A,{size:20,hasTooltip:!0,avatarShouldShowShadow:!0,userStore:i})}):(0,s(234966).personCircleIcon)()},notifications_and_settings:()=>(0,m().slidersIcon)(),user_settings:()=>(0,m().slidersIcon)(),notifications:()=>(0,s(170582).r)(),connected_apps:()=>(0,s(376066).arrowUpRightSquareIcon)(),language_and_region:()=>(0,c().globeIcon)(),offline:()=>(0,r().arrowInCircleDownIcon)(),settings:()=>(0,s(389324).gearIcon)(),teams:()=>(0,s(109926).V)(),members:()=>(0,p().peopleIcon)(),plans:e=>{const t=j().subscriptionDataStoreInstance.state;return t&&y().Fq(t)?(0,s(920017).O)():(0,v().xu)(e)?(0,s(338828).arrowInCircleUpFillIcon)():(0,s(635616).arrowInCircleUpIcon)()},billing:()=>(0,s(683480).creditCardIcon)(),subscription:()=>o(),requests:()=>(0,s(206924).F)(),security:()=>g(),identity_provisioning:()=>(0,s(413851).g)(),admin_content_search:()=>(0,s(842940).J)(),integrations:()=>(0,s(598758).p)(),audit_log:()=>(0,s(245726).F)(),analytics:()=>(0,f().f)(),imports:()=>(0,s(792104).f)(),sites:()=>d(),public_pages:()=>(0,c().globeIcon)(),custom_emoji:()=>(0,s(389136).emojiFaceIcon)(),experiments:()=>(0,s(486796).sparklesIcon)(),performance_toolbar:()=>(0,s(781045).lightningIcon)(),user_similarity_scores:()=>(0,p().peopleIcon)(),collection_debug:()=>(0,s(635123).c)(),offline_mode_debug:()=>(0,r().arrowInCircleDownIcon)(),verified_pages:()=>(0,s(392610).J)(),ai:()=>(0,s(226e3).v)(),design_previews:()=>(0,f().f)()};function _(e){const t=(0,S()._m)(e);return(0,v().xu)(e)?t?(0,n.jsx)(s(289610).UserName,{userStore:t}):(0,n.jsx)(h().sA,{id:"spaceSettings.sidebar.personalSettingsSection.userDetails.title",defaultMessage:"Me"}):`${b().A.formatMessage(I.accountTab)}`}const B={profile:e=>_(e),notifications_and_settings:()=>b().A.formatMessage(I.notificationsAndSettings),user_settings:e=>(0,v().xu)(e)?b().A.formatMessage(I.preferences):b().A.formatMessage(I.mySettings),notifications:e=>(0,v().xu)(e)?b().A.formatMessage(I.notifications):b().A.formatMessage(I.myNotifications),connected_apps:e=>(0,v().xu)(e)?b().A.formatMessage(I.connectionsTab):b().A.formatMessage(I.userConnectionsTab),language_and_region:()=>b().A.formatMessage(I.languageAndRegionTab),offline:()=>b().A.formatMessage(I.offlineTab),settings:e=>(0,v().xu)(e)?b().A.formatMessage(I.generalTab):b().A.formatMessage(I.settingsTab),teams:()=>b().A.formatMessage(I.teamsTab),members:e=>(0,x().Qd)()||(0,x().bW)(e)?b().A.formatMessage(I.peopleTab):b().A.formatMessage(I.membersTab),plans:()=>function(){const e=j().subscriptionDataStoreInstance.state;if(y().Fq(e))return b().A.formatMessage(I.explorePlansTab);return b().A.formatMessage(I.upgradePlanTab)}(),billing:()=>b().A.formatMessage(I.billingTab),subscription:()=>b().A.formatMessage(I.subscriptionTab),requests:()=>b().A.formatMessage(I.requestsTab),security:e=>(0,v().xu)(e)?b().A.formatMessage(I.securityTab):b().A.formatMessage(I.securityAndDataTab),identity_provisioning:e=>(0,v().xu)(e)?b().A.formatMessage(I.identityTab):b().A.formatMessage(I.identityProvisioningTab),admin_content_search:()=>b().A.formatMessage(I.adminContentSearchTab),integrations:()=>b().A.formatMessage(I.spaceConnectionsTab),audit_log:()=>b().A.formatMessage(I.auditLogTab),analytics:()=>b().A.formatMessage(I.analyticsTab),imports:()=>b().A.formatMessage(I.importTab),sites:()=>b().A.formatMessage(I.sitesTab),public_pages:()=>b().A.formatMessage(I.publicPagesTab),custom_emoji:()=>b().A.formatMessage(I.customEmojiTab),verified_pages:()=>b().A.formatMessage(I.verifiedPagesTab),experiments:()=>b().A.formatMessage(I.experimentsTab),performance_toolbar:()=>b().A.formatMessage(I.performanceToolbarTab),user_similarity_scores:()=>b().A.formatMessage(I.userSimilarityScoresTab),collection_debug:()=>b().A.formatMessage(I.collectionsDebugTab),offline_mode_debug:()=>b().A.formatMessage(I.offlineModeDebugTab),ai:()=>b().A.formatMessage(I.aiTab),design_previews:()=>b().A.formatMessage(I.designPreviewsTab)},E={profile:()=>null,notifications_and_settings:()=>null,user_settings:()=>null,notifications:()=>null,connected_apps:()=>(0,x().WN)()&&(0,n.jsx)(A().E,{newBadgeKey:"show_integration_webhooks_callout",didUserEngage:!1,keyType:"date"}),language_and_region:()=>null,offline:()=>null,settings:()=>null,teams:()=>null,members:e=>(0,x().bW)(e)&&(0,n.jsx)(T,{}),plans:()=>null,billing:()=>null,subscription:()=>null,requests:()=>null,security:()=>null,identity_provisioning:()=>null,sites:()=>null,public_pages:()=>null,custom_emoji:()=>null,admin_content_search:()=>null,integrations:()=>null,audit_log:()=>null,analytics:()=>null,imports:()=>null,verified_pages:()=>null,experiments:()=>null,performance_toolbar:()=>null,user_similarity_scores:()=>null,collection_debug:()=>null,offline_mode_debug:()=>null,ai:()=>(0,n.jsx)(A().E,{newBadgeKey:"notion_ai_workspace_settings",didUserEngage:!1,keyType:"date"}),design_previews:()=>null};function U(e){switch(e){case"profile":case"notifications_and_settings":case"user_settings":case"notifications":case"connected_apps":case"language_and_region":case"offline":case"settings":case"members":case"plans":case"billing":case"subscription":case"security":case"identity_provisioning":case"admin_content_search":case"integrations":case"imports":case"teams":case"audit_log":case"analytics":case"sites":case"public_pages":case"custom_emoji":case"verified_pages":case"requests":case"experiments":case"performance_toolbar":case"user_similarity_scores":case"collection_debug":case"offline_mode_debug":case"ai":case"design_previews":return e;default:return}}},836880:(e,t,s)=>{s.d(t,{V:()=>a});var i=()=>s(137476),n=()=>s(836331);function a(e,t){(0,i().u4)({environment:e,event:{eventName:"open_import_contacts_dropdown",eventProperties:{source:t.source}}}),n().default.logEvent("open_import_contacts_dropdown",void 0,{metadata:t})}},837605:(e,t,s)=>{s.r(t),s.d(t,{OutlinerTeamOverflow:()=>ie,TeamOverflowMenu:()=>ne});s(725707),s(491955),s(403517);var i=s(242343),n=()=>s(237385),a=()=>s(803290),o=()=>s(174114),r=()=>s(955308),l=()=>s(450339),d=()=>s(507190),c=()=>s(533666),u=()=>s(389324),g=()=>s(691791),p=()=>s(407152),m=()=>s(115692),f=s(163643);const h=(0,s(680369).wt)("personAdmin",{viewBox:"0 0 15 16",svg:(0,f.jsx)("path",{d:"M6.082 7.215a2.71 2.71 0 001.504-.438c.451-.296.811-.69 1.08-1.182a3.352 3.352 0 00.403-1.634 3.21 3.21 0 00-.403-1.6 3.059 3.059 0 00-1.08-1.141A2.776 2.776 0 006.082.796c-.547 0-1.048.143-1.504.43a3.153 3.153 0 00-1.087 1.156 3.195 3.195 0 00-.403 1.593 3.39 3.39 0 00.41 1.627c.269.487.629.88 1.08 1.175a2.71 2.71 0 001.504.438zm0-1.19c-.314 0-.606-.088-.875-.266a1.974 1.974 0 01-.636-.738 2.247 2.247 0 01-.239-1.046c0-.379.08-.718.24-1.019.159-.3.37-.538.635-.71.264-.179.556-.267.875-.267.319 0 .61.086.875.26.264.172.476.41.636.71.16.296.239.634.239 1.012 0 .387-.08.738-.24 1.053-.159.31-.37.556-.635.738a1.508 1.508 0 01-.875.273zm-4.266 7.54h5.948a3.113 3.113 0 01-.082-.752v-.43H1.59c-.082 0-.141-.014-.178-.041-.032-.027-.048-.073-.048-.137 0-.26.105-.56.315-.902.21-.342.512-.673.909-.992.4-.323.893-.59 1.476-.8.588-.213 1.26-.32 2.017-.32a5.648 5.648 0 011.92.328c.17-.42.466-.732.89-.937a6.605 6.605 0 00-1.313-.417 6.856 6.856 0 00-1.497-.157c-.92 0-1.75.139-2.488.417-.739.273-1.372.631-1.9 1.073-.525.442-.928.918-1.21 1.429-.279.51-.418.998-.418 1.463 0 .784.584 1.175 1.75 1.175zm6.843-.731c0 .438.091.804.274 1.1.182.297.469.58.861.848.392.274.907.588 1.545.944a.6.6 0 00.294.082.62.62 0 00.335-.082c.638-.36 1.153-.675 1.545-.944.392-.269.679-.551.861-.847.182-.297.274-.664.274-1.101v-2.468a.979.979 0 00-.137-.54c-.087-.141-.24-.26-.458-.355a17.47 17.47 0 00-.417-.15c-.182-.069-.38-.14-.595-.213-.21-.077-.403-.145-.581-.205a13.002 13.002 0 01-.403-.15 1.263 1.263 0 00-.417-.055c-.146 0-.292.028-.438.082-.077.028-.205.07-.383.13l-.574.198c-.205.073-.399.144-.58.212-.183.064-.32.114-.411.15-.219.096-.374.215-.465.356a1.02 1.02 0 00-.13.54v2.468zm2.598 1.326a.601.601 0 01-.212-.04.416.416 0 01-.178-.124l-1.155-1.244a.671.671 0 01-.096-.178.492.492 0 01-.034-.178c0-.145.048-.264.144-.355a.492.492 0 01.341-.13.485.485 0 01.363.15l.793.869 1.613-2.229a.484.484 0 01.41-.219c.132 0 .246.048.342.144.1.091.15.205.15.342 0 .04-.009.086-.027.136a.463.463 0 01-.075.15l-1.983 2.722c-.086.123-.218.184-.396.184z"})});var S=()=>s(178063),x=()=>s(455831),b=()=>s(294997),v=()=>s(653998),y=()=>s(76394),j=()=>s(32901),A=()=>s(539174),C=()=>s(331516),w=()=>s(518397),M=()=>s(126451),T=()=>s(273520),k=()=>s(935091),I=()=>s(397791),D=()=>s(88271),P=()=>s(103151),R=()=>s(724356),_=()=>s(983050),B=()=>s(640979),E=()=>s(904697),U=()=>s(320462),L=()=>s(907721),O=()=>s(485966),W=()=>s(962373),z=()=>s(734225),q=()=>s(979537),F=()=>s(668670),N=()=>s(127776),G=()=>s(628854);s(333225),s(494367),s(516262),s(573119),s(240480),s(950443),s(619601);function K(e){let{adminStatus:t,accessLevel:s,isArchivedTeam:i}=e;if("adminThatCanPerformPrivilegedActions"===t)return new Set(["join","joinAsOwner"]);if(i)switch(t){case"none":return new Set;case"admin":return new Set("open"===s?["join"]:[]);default:(0,y().HB)(t)}switch(s){case"open":return new Set(["join"]);case"closed":case"private":return new Set;default:(0,y().HB)(s)}}var V=()=>s(713471),H=()=>s(5758),$=()=>s(639838),Y=()=>s(161813),J=()=>s(79196),Q=()=>s(105018),Z=()=>s(21209);const X=["join","view","add","duplicate","leave","archive","restore"],ee=["add"],te=["join","joinAsOwner","upgradeSelfToOwner","leave"],se=(0,v().YK)({add:{defaultMessage:"Add members",id:"sidebar.outlinerTeamToggleButton.addLabel"},leave:{defaultMessage:"Leave teamspace",id:"sidebar.outlinerTeamToggleButton.leaveLabel"},joinAsOwner:{defaultMessage:"Join as owner",id:"sidebar.outlinerTeamToggleButton.joinAsOwnerLabel"},joinAsMember:{defaultMessage:"Join as member",id:"sidebar.outlinerTeamToggleButton.joinAsMemberLabel"},joinTeamspace:{defaultMessage:"Join teamspace",id:"sidebar.outlinerTeamToggleButton.joinLabel"},upgradeSelfToOwner:{defaultMessage:"Become owner",id:"sidebar.outlinerTeamToggleButton.upgradeSelfToOwnerLabel"},archive:{defaultMessage:"Archive teamspace",id:"sidebar.outlinerTeamToggleButton.archiveLabel"},restore:{defaultMessage:"Restore teamspace",id:"outlinerTeamOverflow.teamActions.restoreLabel"},duplicate:{defaultMessage:"Duplicate teamspace",id:"sidebar.outlinerTeamToggleButton.duplicateLabel"},teamspaceSettings:{defaultMessage:"Teamspace settings",id:"sidebar.outlinerTeamToggleButton.ownerViewLabel"},viewMembers:{defaultMessage:"View members",id:"sidebar.outlinerTeamToggleButton.unjoinedMemberViewLabel"}});function ie(e){let{teamStore:t,style:s,from:i,hideJoin:r,onPopupClick:l,onPopupClose:d}=e;const u=(0,n().Y0)(),g=(0,v().tz)(),p=(0,a().uB)(void 0,z().A),m=(0,a().O$)(O().AppStoreCurrentSpaceStore),h=(0,a().uB)(void 0,W().A),S=(0,o().IS)((e=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,...s}})),[s]),x=g.formatMessage({defaultMessage:"Teamspace settings and members...",id:"sidebar.outlinerTeamToggleButton.tooltip"});return m?u.isMobile?null:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(P().A,{textWrap:!1,renderTooltip:()=>x,placement:L().W.Bottom,render:e=>(0,f.jsx)(T().Ay,{popupType:T().z7.Popup,buttonPopupStore:h,alignmentToOrigin:T().yP.Start,originGap:2,renderOrigin:t=>(0,f.jsx)(M().A,{ariaLabel:x,className:_()._Oc,style:S.buttonStyle,mobileFeedback:!1,...e,...t,children:(0,f.jsx)(I().I,{icon:c().Y,size:"sm",color:"secondary"})}),render:e=>(0,f.jsx)(ne,{teamStore:t,permissionsInviteStore:p,onDismiss:e.close,from:i,hideJoin:r,buttonPopupStore:h}),onClick:l,onClose:d})}),(0,f.jsx)(R().u,{permissionsInviteStore:p,store:t})]}):null}function ne(e){const{teamStore:t,permissionsInviteStore:s,onDismiss:c,from:M,hideJoin:T,buttonPopupStore:R}=e,W=(0,o().DP)(),z=(0,n().v3)(),ie=(0,o().IS)((()=>({menuItemButton:{minWidth:200},caption:{minWidth:230}})),[]),ne=(0,a().O$)(O().AppStoreCurrentSpaceStore),ae=(0,Q().G)(t),oe=(0,a().K8)((()=>(0,b().Sh)({archived_by:t.getArchivedBy()})),[t]),re=z.currentUser.id,le=(0,a().K8)((()=>q()._.getSpacePermissionGroupIds({userId:re,spaceId:null==ne?void 0:ne.id})),[re,ne]),de=(0,a().K8)((()=>re?t.getTeamRoleForUser(re,le)??"none":"none"),[re,t,le]),ce=(0,a().K8)((()=>!(!t.isDefined()||!re)&&Boolean(t.isOwner(re))),[re,t]),ue=(0,J().q)(t.id),ge=(0,V().X)(t),{id:pe,name:me,isDefault:fe}=(0,a().K8)((()=>({id:t.id,name:t.getName(),isDefault:t.isDefault()})),[t]),he=(0,H().c)(),Se=(0,a().K8)((()=>(0,E().canCreateTeam)({environment:z,spaceStore:ne})),[ne,z]),xe=(0,$().a)(M),be=function(e){const{isDefault:t,accessLevel:s,settings:i}=(0,a().K8)((()=>({isDefault:e.isDefault(),accessLevel:e.getTeamAccessLevel(),settings:e.getSettings()})),[e]),n="private"===s,o=(0,Y().c)(),r=n&&!o?"business":void 0,l=(null==i?void 0:i.disable_public_access)||(null==i?void 0:i.disable_export)||(null==i?void 0:i.disable_guests),d=(0,Y().Z)(),c=l&&!d?"enterprise":void 0,u=(0,x().hW)([c,r]);if(t)return"isDefault";if(u)return u}(t),ve="isDefault"===(ye=be)?(0,f.jsx)(v().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateDefaultTeamspace",defaultMessage:"Cannot duplicate a default teamspace"}):"business"===ye?(0,f.jsx)(v().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithBusinessFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Business plans or above"}):"enterprise"===ye?(0,f.jsx)(v().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithEnterpriseFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Enterprise plans or above"}):void 0===ye?void 0:(0,y().HB)(ye);var ye;const je=(0,a().K8)((()=>t.getTeamAccessLevel()),[t]),Ae=(0,Z().$)(t),Ce=(0,i.useCallback)((e=>{A().ks(z,{store:t,from:M,option:e})}),[z,t,M]),we=ue&&!he,Me=(0,a().K8)((()=>Boolean(null==ne?void 0:ne.canAdmin())),[ne]),{joinLeaveOptionsToShow:Te,leaveOptionDisabledState:ke}=function(e){let{teamRole:t,adminStatus:s,isDefaultTeam:i,accessLevel:n,isArchivedTeam:a}=e;switch(t){case"owner":case"member":const e=new Set,o=!a;return o&&e.add("leave"),"owner"!==t&&"adminThatCanPerformPrivilegedActions"===s&&e.add("upgradeSelfToOwner"),{joinLeaveOptionsToShow:e,leaveOptionDisabledState:o&&i?{disabled:!0,disabledReasonKey:"defaultTeam"}:void 0};case"team_level_guest":return{joinLeaveOptionsToShow:new Set,leaveOptionDisabledState:void 0};case"none":return{joinLeaveOptionsToShow:K({adminStatus:s,accessLevel:n,isArchivedTeam:a}),leaveOptionDisabledState:void 0};default:(0,y().HB)(t)}}({teamRole:de,adminStatus:xe?"adminThatCanPerformPrivilegedActions":Me?"admin":"none",isArchivedTeam:oe,isDefaultTeam:fe,accessLevel:je}),Ie=Te.has("joinAsOwner"),De=xe&&!(1===Te.size&&Te.has("leave")),Pe=(0,a().K8)((()=>(0,E().getCanRestoreTeam)(t)),[t]),Re={add:{type:"action",show:!oe&&ge,handle:()=>{s.update((e=>({...e,modalOpen:!0})))},title:se.add,icon:(0,f.jsx)(I().I,{icon:p().x})},leave:{type:"action",...De&&{colorOverride:W.redBadgeBackground},show:Te.has("leave"),handle:()=>{G().JC({environment:z,teamStore:t,from:M,userGroupsInTeam:Ae})},title:se.leave,disabled:Boolean(null==ke?void 0:ke.disabled),icon:(0,f.jsx)(I().I,{icon:g()._}),disabledTooltipText:"defaultTeam"===(null==ke?void 0:ke.disabledReasonKey)&&(0,f.jsx)(v().sA,{id:"sidebar.outlinerTeamToggleButton.cannotLeaveDefaulTeamTooltip",defaultMessage:"Cannot leave a default teamspace"})},join:{type:"action",show:!T&&Te.has("join"),handle:async()=>{if(ne)switch(je){case"open":await G().e2({environment:z,teamStore:t,currentSpaceStore:ne,from:M,andNavigateToTeamHome:!1});break;case"closed":case"private":await G().z9({environment:z,teamStore:t,currentSpaceStore:ne,from:M,action:"joinClosedOrPrivateTeamAsMember"});break;default:(0,y().HB)(je)}},title:Ie?se.joinAsMember:se.joinTeamspace,icon:(0,f.jsx)(I().I,{icon:S().plusIcon,color:"secondary"})},joinAsOwner:{type:"action",show:Ie,handle:()=>G().z9({environment:z,teamStore:t,currentSpaceStore:ne,from:M,action:"joinTeamAsOwner"}),title:se.joinAsOwner,icon:(0,f.jsx)(I().I,{icon:h})},upgradeSelfToOwner:{type:"action",show:Te.has("upgradeSelfToOwner"),handle:()=>G().z9({environment:z,teamStore:t,currentSpaceStore:ne,from:M,action:"upgradeToOwner"}),title:se.upgradeSelfToOwner,icon:(0,f.jsx)(I().I,{icon:h})},archive:{type:"action",show:!oe&&ce,colorOverride:W.redBadgeBackground,handle:async()=>{we||(await G().mm({teamStore:t,environment:z,from:M}),F().P({environment:z,messageStoreEmitValue:-1}))},title:se.archive,disabled:we,disabledTooltipText:(0,f.jsx)("div",{style:{whiteSpace:"normal"},children:(0,f.jsx)(v().sA,{id:"sidebar.outlinerTeamToggleButton.cannotArchiveTooltip.moreThanOneMember",defaultMessage:"There must only be one member in the workspace to archive this teamspace"})}),icon:(0,f.jsx)(I().I,{icon:r().B})},restore:{type:"action",show:oe,handle:async()=>{ce&&Pe&&(await G().Q8({environment:z,teamStore:t,teamName:me,from:M}),F().P({environment:z,messageStoreEmitValue:-1}))},title:se.restore,icon:(0,f.jsx)(I().I,{icon:l().w}),disabled:!Pe||!ce,disabledTooltipText:Pe?(0,f.jsx)(v().sA,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.notOwner",defaultMessage:"Only teamspace owners can restore archived teamspaces."}):(0,f.jsx)(v().sA,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.noDefaultTeam",defaultMessage:"You must have an active default teamspace to restore this {accessLevel} teamspace.",values:{accessLevel:je}})},duplicate:{type:"action",show:!oe&&Se,handle:()=>{N().hX({environment:z,teamStore:t,from:M,buttonPopupStore:R})},title:se.duplicate,disabled:void 0!==be,icon:(0,f.jsx)(I().I,{icon:d().V}),disabledTooltipText:ve,caption:(0,f.jsx)(v().sA,{id:"sidebar.outlinerTeamToggleButton.duplicateCaption",defaultMessage:"Duplicates permissions and other settings but not pages and members"})},view:{type:"action",show:!oe,handle:()=>G().F2({environment:z,teamId:pe,tab:U().p.Members,from:M}),title:ae&&!oe?se.teamspaceSettings:se.viewMembers,icon:ae?(0,f.jsx)(I().I,{icon:u().gearIcon}):(0,f.jsx)(I().I,{icon:m().peopleIcon})}},_e=(De?[{sectionName:"join/leave section",orderedOptions:te},{sectionName:"other actions",orderedOptions:X.filter((e=>!te.includes(e)))}]:[{sectionName:"add section",orderedOptions:ee},{sectionName:"other actions section",orderedOptions:X.filter((e=>!ee.includes(e)))}]).map((e=>{const t=e.orderedOptions.filter((e=>Re[e].show));if(0!==t.length)return{sectionName:e.sectionName,filteredOptions:t}})).filter(y().O9).map((e=>{const t=e.filteredOptions.map((e=>{const t=Re[e],{type:s}=t;return"action"===s?(0,j().Ls)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,validators:[],closeParentMenu:!0,action:()=>{c(),Ce(e),t.handle()},render:e=>(0,f.jsx)(P().A,{placement:L().W.Left,textWrap:!1,disableTooltip:!(t.disabled&&t.disabledTooltipText),renderTooltip:()=>t.disabledTooltipText,render:s=>(0,f.jsx)(C().A,{...e,...s,svg:()=>t.icon,title:(0,f.jsx)(v().sA,{...t.title}),buttonStyle:{...ie.menuItemButton,...!t.disabled&&t.colorOverride?{fill:t.colorOverride,color:t.colorOverride}:{fill:W.regularIconColor,color:W.text.primary}},disabled:t.disabled,disabledFeedback:t.disabled,caption:t.caption,captionStyle:ie.caption,shouldWrapCaption:!0})})}):"extensionAction"===s?(0,j().uk)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,width:250,validators:[],subActions:()=>t.subActionSections.map((t=>({...t,actions:t.actions.map((t=>({...t,action:s=>{c(),Ce(e),t.action(s)}})))})))}):void(0,y().HB)(s)}));return(0,j().gy)({key:e.sectionName,render:e=>(0,f.jsx)(D().A,{...e}),actions:t})}));return(0,f.jsx)(k().A,{className:_()._En,menuType:B().gu.Popup,minWidth:"100%",children:(0,f.jsx)(w().A,{context:{blocks:[],environment:z,publicEditMode:void 0},sections:_e,initialFocus:void 0})})}},854466:(e,t,s)=>{s.d(t,{$O:()=>o,cN:()=>r,fh:()=>a});var i=()=>s(129978);const n={PublicPagesSection:new(i().O2)("PublicPagesSection",(()=>Promise.all([s.e(43380),s.e(17989),s.e(90625),s.e(71104),s.e(25700),s.e(91325)]).then(s.bind(s,859407)))),DomainsSection:new(i().O2)("DomainsSection",(()=>Promise.all([s.e(43380),s.e(17989),s.e(90625),s.e(71104),s.e(25891),s.e(91062),s.e(27229),s.e(56859)]).then(s.bind(s,971825)))),GeneralAccessPermissionSection:new(i().O2)("PublishedSiteSettings",(()=>Promise.all([s.e(48979),s.e(77651)]).then(s.bind(s,53857))))},a=(0,i()._h)(n.PublicPagesSection,(e=>e.PublicPagesSection)),o=(0,i()._h)(n.DomainsSection,(e=>e.DomainsSection)),r=(0,i()._h)(n.GeneralAccessPermissionSection,(e=>e.GeneralAccessPermissionSection))},867911:(e,t,s)=>{s.d(t,{k:()=>n});s(242343);var i=s(163643);const n=(0,s(680369).wt)("logout",{viewBox:"0 0 30 30",svg:(0,i.jsx)("path",{d:"M17,24l9-9l-9-9l-1.406,1.406L22.188,14H8v2h14.188l-6.594,6.594L17,24z M6,4h16V2H4v26h18v-2H6V4z"})})},882764:(e,t,s)=>{s.d(t,{X:()=>n});s(242343);var i=s(163643);const n=(0,s(680369).wt)("arrowsDiverging",{viewBox:"0 0 12 12",svg:(0,i.jsx)("path",{d:"M6 11.2891C6.42188 11.2891 6.63281 11.0469 6.63281 10.5625V7.3457C6.63281 7.00586 6.71875 6.64062 6.89062 6.25C7.06641 5.85938 7.29492 5.47266 7.57617 5.08984C7.86133 4.70703 8.16992 4.35547 8.50195 4.03516C8.83789 3.71484 9.16406 3.45312 9.48047 3.25L9.95508 2.94531C10.1621 2.81641 10.2656 2.63281 10.2656 2.39453C10.2656 2.21875 10.2109 2.07227 10.1016 1.95508C9.99219 1.83789 9.8418 1.7793 9.65039 1.7793C9.4668 1.7793 9.29102 1.83398 9.12305 1.94336L8.81836 2.14844C8.51367 2.34766 8.20898 2.58984 7.9043 2.875C7.59961 3.15625 7.31641 3.45508 7.05469 3.77148C6.79297 4.08398 6.56836 4.39258 6.38086 4.69727C6.19727 4.99805 6.07227 5.26953 6.00586 5.51172H5.98828C5.91797 5.26953 5.79102 4.99805 5.60742 4.69727C5.42383 4.39258 5.19922 4.08398 4.93359 3.77148C4.67188 3.45508 4.38867 3.15625 4.08398 2.875C3.7832 2.58984 3.48047 2.34766 3.17578 2.14844L2.87109 1.94336C2.69922 1.83398 2.52344 1.7793 2.34375 1.7793C2.14844 1.7793 1.99609 1.83984 1.88672 1.96094C1.78125 2.08203 1.72852 2.22461 1.72852 2.38867C1.72852 2.62695 1.83203 2.8125 2.03906 2.94531L2.51367 3.25C2.83008 3.45312 3.1543 3.71484 3.48633 4.03516C3.81836 4.35547 4.12695 4.70703 4.41211 5.08984C4.69727 5.47266 4.92773 5.85938 5.10352 6.25C5.2793 6.64062 5.36719 7.00586 5.36719 7.3457V10.5625C5.36719 11.0469 5.57812 11.2891 6 11.2891ZM1.81641 3.9707L3.71484 1.52734C3.85547 1.33984 3.88281 1.17578 3.79688 1.03516C3.71484 0.890625 3.55469 0.814453 3.31641 0.806641L0.808594 0.712891C0.613281 0.705078 0.466797 0.763672 0.369141 0.888672C0.271484 1.00977 0.251953 1.16406 0.310547 1.35156L1.02539 3.75391C1.0918 3.98438 1.20312 4.125 1.35938 4.17578C1.51953 4.22656 1.67188 4.1582 1.81641 3.9707ZM10.0898 3.95898C10.2266 4.1543 10.375 4.23047 10.5352 4.1875C10.6992 4.14062 10.8164 4.00391 10.8867 3.77734L11.6777 1.39258C11.7402 1.20508 11.7246 1.04883 11.6309 0.923828C11.541 0.798828 11.3984 0.736328 11.2031 0.736328L8.68945 0.753906C8.45117 0.753906 8.28711 0.824219 8.19727 0.964844C8.10742 1.10156 8.13086 1.26562 8.26758 1.45703L10.0898 3.95898Z"})})},919888:(e,t,s)=>{s.d(t,{y:()=>o});s(242343);var i=()=>s(431551),n=()=>s(35462),a=s(163643);function o(e){let{title:t,description:s,disabled:o=!1,selected:r,onChange:l=(()=>{})}=e;return(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>!o&&l(!r),children:[(0,a.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[t,s&&(0,a.jsx)(n().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:s})]}),(0,a.jsx)("div",{style:{marginTop:5},children:(0,a.jsx)(i().A,{on:r,disabled:o})})]})}},925005:(e,t,s)=>{s.d(t,{ei:()=>j,s:()=>v,gO:()=>y,jw:()=>M,Ox:()=>w});s(242343);var i=()=>s(237385),n=()=>s(174114),a=()=>s(83544),o=()=>s(455936),r=()=>s(748267),l=()=>s(346695),d=s(163643);const c=(0,s(680369).wt)("typesPersonOutline",{viewBox:"0 0 20 20",svg:(0,d.jsx)("g",{children:(0,d.jsx)("path",{d:"M9.303 16.45q-1.743 0-1.743-1.177 0-.696.417-1.463.423-.765 1.21-1.428.793-.663 1.9-1.073 1.107-.417 2.481-.417 1.375 0 2.482.417 1.114.409 1.9 1.073t1.203 1.428q.424.767.424 1.463 0 1.176-1.75 1.176H9.303Zm-.226-1.183h8.976q.123 0 .17-.041.055-.042.055-.137 0-.396-.307-.902-.307-.513-.916-.992-.602-.485-1.484-.8-.874-.32-2.003-.32-1.134 0-2.01.32-.874.315-1.476.8-.601.48-.916.992-.308.506-.308.902 0 .096.048.137.056.04.171.04Zm4.491-5.175a2.73 2.73 0 0 1-1.503-.438 3.2 3.2 0 0 1-1.08-1.169 3.34 3.34 0 0 1-.404-1.627 3.2 3.2 0 0 1 .403-1.592 3.2 3.2 0 0 1 1.08-1.156q.684-.43 1.504-.43.834 0 1.511.424.684.423 1.08 1.141a3.2 3.2 0 0 1 .404 1.6q0 .895-.404 1.634a3.2 3.2 0 0 1-1.087 1.175 2.7 2.7 0 0 1-1.504.438m0-1.19q.486 0 .882-.273t.636-.738q.24-.472.24-1.046 0-.56-.24-1.012a1.9 1.9 0 0 0-.636-.71 1.58 1.58 0 0 0-.882-.26 1.5 1.5 0 0 0-.868.266 1.9 1.9 0 0 0-.635.718q-.24.45-.24 1.011 0 .575.24 1.04.238.464.635.738.405.266.868.266M1.886 16.45q-.732 0-1.1-.307-.37-.308-.37-.923 0-.848.403-1.627.411-.787 1.128-1.395a5.5 5.5 0 0 1 1.668-.957 5.8 5.8 0 0 1 2.03-.355q.534 0 1.06.095.526.089 1.019.274.498.184.936.451a3.2 3.2 0 0 0-.882.861 3.3 3.3 0 0 0-.65-.28 5 5 0 0 0-.724-.178A4.6 4.6 0 0 0 4.1 12.3a4.5 4.5 0 0 0-1.285.691q-.553.43-.875.985-.314.546-.314 1.134 0 .096.041.137.048.04.15.041h4.806q-.035.342.13.67.164.335.444.492zm3.766-6.282q-.717 0-1.312-.383a2.84 2.84 0 0 1-.944-1.025 3 3 0 0 1-.348-1.436A2.83 2.83 0 0 1 4.34 4.917a2.38 2.38 0 0 1 1.312-.383q.718 0 1.306.376.594.376.943 1.005.356.63.356 1.401 0 .78-.356 1.436a2.8 2.8 0 0 1-.943 1.032 2.34 2.34 0 0 1-1.306.383Zm0-1.169q.39 0 .718-.226.328-.225.526-.601a1.8 1.8 0 0 0 .199-.855 1.7 1.7 0 0 0-.199-.82q-.19-.37-.519-.581a1.3 1.3 0 0 0-.725-.212q-.396 0-.724.219a1.6 1.6 0 0 0-.52.58q-.19.37-.191.821 0 .465.191.848.198.383.527.608.328.219.717.219"})})});var u=()=>s(83072),g=()=>s(686487),p=()=>s(653998),m=()=>s(76394),f=()=>s(865226),h=()=>s(137476),S=()=>s(701270),x=()=>s(951540),b=()=>s(29215);function v(e){let{organizationOnboardingInfo:t}=e;const s=(0,i().v3)(),n=w(),r=(0,p().tz)();if(!t||"ineligible"===t.onboardingStatus)return null;const{buttonLabel:l,onClick:c}=y({environment:s,organizationOnboardingInfo:t});return(0,d.jsxs)("div",{style:n.bannerContainer,children:[(0,d.jsxs)("div",{style:n.title,children:[(0,d.jsx)("img",{src:a().A.images.onboarding.planTypeForWorkSplitIntentDarkmodePng,style:{height:77,width:77},alt:"Organization onboarding icon"}),(0,d.jsx)(S().D,{styleName:"UITitle-22px/Semibold",children:r.formatMessage(M.title)}),(0,d.jsx)(S().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:r.formatMessage(M.byline)})]}),(0,d.jsx)(j,{}),(0,d.jsxs)(x().A,{size:"lg",style:n.button,onClick:c,children:[l,(0,o().p)(n.iconArrow)]})]})}function y(e){let{environment:t,organizationOnboardingInfo:s}=e;switch(s.onboardingStatus){case"not_started":return{buttonLabel:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.startSetUpButton",defaultMessage:"Set up organization"}),onClick:()=>{(0,h().u4)({environment:t,event:{eventName:"org_console_onboarding_navigate",eventProperties:{spaceId:s.spaceId,route:g()._P.name,from:"settings-modal-banner"}}}),f().oo({environment:t,openInNew:"tab",makeTabActive:!0,url:(0,u().re)({organizationId:u().Zf,tabRoute:g()._P,queryParams:{[b().ge]:s.spaceId}})})}};case"domain_verified":return{buttonLabel:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.finishSetUpButton",defaultMessage:"Finish set up"}),onClick:()=>{(0,h().u4)({environment:t,event:{eventName:"org_console_onboarding_navigate",eventProperties:{organizationId:s.organizationId,route:g()._P.name,from:"settings-modal-banner"}}}),f().oo({environment:t,openInNew:"tab",makeTabActive:!0,url:(0,u().re)({organizationId:s.organizationId,tabRoute:g()._P})})}};case"completed":return{buttonLabel:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.orgSettingsButton",defaultMessage:"Go to organization console"}),onClick:()=>{f().oo({environment:t,openInNew:"tab",makeTabActive:!0,url:(0,u().re)({organizationId:s.organizationId,tabRoute:g().Vo})})}};default:(0,m().HB)(s)}}function j(){const e=w();return(0,d.jsxs)("div",{style:e.features,children:[(0,d.jsx)(C,{icon:r().g,description:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.owner.item.organizationOwnerRole",defaultMessage:"<blue>A new organization owner role</blue> manages all workspace settings and owner permissions.",values:{blue:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.jsx)(A,{chunks:t})}}})}),(0,d.jsx)(C,{icon:l().I,description:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.owner.item.organizationWideVisibility",defaultMessage:"<blue>Organization-wide visibility</blue> of people, sharing and security settings, and audit logs all in one place.",values:{blue:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.jsx)(A,{chunks:t})}}})}),(0,d.jsx)(C,{icon:c,description:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.owner.item.simplifiedSettingsManagement",defaultMessage:"<blue>Simplified settings management</blue> across organization, workspace, and teamspace levels.",values:{blue:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.jsx)(A,{chunks:t})}}})})]})}function A(e){return(0,d.jsx)(S().D,{styleName:"UIRegular-14px/Medium",colorName:"uiBluePrimary",as:"span",children:e.chunks})}function C(e){const t=(0,n().IS)((e=>({container:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"row",gap:8},icon:{fill:e.icon.uiBluePrimary,height:16,width:16}})),[]);return(0,d.jsxs)("div",{style:t.container,children:[e.icon(t.icon),(0,d.jsx)(S().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:e.description})]})}function w(){return(0,n().IS)((e=>({bannerContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:20,padding:24,borderRadius:12,marginBlock:12,background:"dark"===e.mode?e.cardBackground:"#F0F6FD"},title:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:6,width:"100%"},features:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:10,width:"100%"},icon:{height:16,width:16,fill:e.icon.secondary},button:{display:"flex",alignItems:"center",justifyContent:"center",gap:4},iconArrow:{height:14,width:14,fill:"currentColor",transform:"rotate(90deg)",marginTop:4}})),[])}const M=(0,p().YK)({title:{id:"organization.onboarding.modal.title",defaultMessage:"Get more from your Enterprise plan"},byline:{id:"organization.onboarding.modal.byline",defaultMessage:"Get a bird’s-eye view of members, guests, and security settings across all your workspaces."}})},955308:(e,t,s)=>{s.d(t,{B:()=>a});s(242343);var i=s(163643);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M8 9.875a.625.625 0 1 0 0 1.25h4a.625.625 0 1 0 0-1.25z"}),(0,i.jsx)("path",{d:"M3.125 4.75c0-.897.728-1.625 1.625-1.625h10.5c.898 0 1.625.728 1.625 1.625v1.57c0 .676-.413 1.256-1 1.5v7.43c0 .898-.727 1.625-1.625 1.625h-8.5a1.625 1.625 0 0 1-1.625-1.625V7.82c-.587-.244-1-.824-1-1.5zm11.5 3.195h-9.25v7.305c0 .207.168.375.375.375h8.5a.375.375 0 0 0 .375-.375zm1-1.625V4.75a.375.375 0 0 0-.375-.375H4.75a.375.375 0 0 0-.375.375v1.57c0 .205.164.372.369.375h10.512a.375.375 0 0 0 .369-.375"})]})},a=(0,s(680369).wt)("archiveBox",n)},995473:(e,t,s)=>{s.d(t,{u:()=>i});const i=(0,s(680369).xh)("checkmarkShieldFill",{default:{loader:()=>s.e(93213).then(s.bind(s,868486))},small:{loader:()=>s.e(50335).then(s.bind(s,125684))},mini:{loader:()=>s.e(43249).then(s.bind(s,777530))},large:{loader:()=>s.e(56823).then(s.bind(s,121004))}})},997010:(e,t,s)=>{s.d(t,{X:()=>a});var i=()=>s(803290),n=()=>s(485966);function a(){return(0,i().K8)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:t}=n().default.state;if(!e||!t)return!1;const s=e.getMemberCountFromPublicSpaceData(),i=t.getWorkspacePages()??[];return 1===s&&0===i.length&&"personal"===e.getPlanType()}),[])}}}]);