"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[26090],{34425:(e,t,o)=>{o.d(t,{D:()=>ae,p:()=>de});o(362833),o(112188),o(725707),o(107652),o(491955),o(500234),o(324989),o(771702),o(403517),o(113085);var i=()=>o(414930),n=o(242343),s=()=>o(470637),r=()=>o(237385),a=()=>o(269280),l=()=>o(803290),c=()=>o(174114),d=()=>o(763555),u=()=>o(115562),p=()=>o(829090),m=()=>o(680369),g=o(163643);const h=(0,m().wt)("emojiActivities",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M14.2227 22.3281C9.87109 22.3281 6.25391 18.7109 6.25391 14.3594C6.25391 10 9.86328 6.39062 14.2148 6.39062C18.5742 6.39062 22.1914 10 22.1914 14.3594C22.1914 18.7109 18.582 22.3281 14.2227 22.3281ZM14.6602 11.5547L16.8477 13.25L18.8164 12.4531L19.5586 10.0078C18.7852 9.07031 17.7852 8.33594 16.6367 7.89844L14.6602 9.5V11.5547ZM9.62891 12.4531L11.5977 13.25L13.793 11.5547V9.51562L11.7852 7.89844C10.6523 8.33594 9.65234 9.07031 8.88672 10L9.62891 12.4531ZM7.31641 14.3828C7.32422 15.7344 7.72266 16.9922 8.41797 18.0625L11.0742 18.0234L12.168 16.625L11.3477 14.0859L9.31641 13.2656L7.31641 14.3828ZM17.3633 18.0547L20.0117 18.0938C20.7148 17.0156 21.1289 15.7266 21.1289 14.3828L19.1289 13.2656L17.0977 14.0859L16.2695 16.6484L17.3633 18.0547ZM14.2227 21.2656C14.8867 21.2656 15.5273 21.1719 16.1367 20.9922L16.6914 18.6016L15.6914 17.3203H12.7227L11.7461 18.5703L12.3086 20.9922C12.918 21.1719 13.5586 21.2656 14.2227 21.2656Z"})}),f=(0,m().wt)("emojiCustom",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M8.295 13.355c-.994 0-1.494-.5-1.494-1.533V8.325c0-1.032.5-1.525 1.494-1.525h3.566c.994 0 1.494.493 1.494 1.525v3.497c0 1.032-.5 1.533-1.494 1.533H8.296zm7.853 0c-1.001 0-1.502-.5-1.502-1.533V8.325c0-1.032.5-1.525 1.502-1.525h3.559c.993 0 1.494.493 1.494 1.525v3.497c0 1.032-.5 1.533-1.494 1.533h-3.56zM8.31 12.252h3.528c.274 0 .415-.141.415-.43V8.325c0-.281-.141-.422-.415-.422H8.31c-.273 0-.406.14-.406.422v3.497c0 .289.133.43.406.43zm7.853 0h3.528c.274 0 .407-.141.407-.43V8.325c0-.281-.133-.422-.407-.422h-3.527c-.282 0-.415.14-.415.422v3.497c0 .289.133.43.414.43zM8.295 21.2c-.994 0-1.494-.493-1.494-1.525V16.17c0-1.025.5-1.526 1.494-1.526h3.566c.994 0 1.494.5 1.494 1.526v3.504c0 1.032-.5 1.525-1.494 1.525H8.296zm7.853 0c-1.001 0-1.502-.493-1.502-1.525V16.17c0-1.025.5-1.526 1.502-1.526h3.559c.993 0 1.494.5 1.494 1.526v3.504c0 1.032-.5 1.525-1.494 1.525h-3.56zM8.31 20.097h3.528c.274 0 .415-.14.415-.422v-3.497c0-.289-.141-.43-.415-.43H8.31c-.273 0-.406.141-.406.43v3.497c0 .281.133.422.406.422zm7.853 0h3.528c.274 0 .407-.14.407-.422v-3.497c0-.289-.133-.43-.407-.43h-3.527c-.282 0-.415.141-.415.43v3.497c0 .281.133.422.414.422z"})}),x=(0,m().wt)("emojiFlags",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M8.49902 22.0312C8.17871 22.0312 7.90527 21.7656 7.90527 21.4453V8.46094C7.90527 7.75 8.25684 7.34375 8.7959 7.10156C9.38965 6.83594 9.85059 6.70312 11.0693 6.70312C13.9678 6.70312 15.7725 8.11719 18.5225 8.11719C19.8662 8.11719 20.585 7.78906 20.9678 7.78906C21.4209 7.78906 21.7803 8.03125 21.7803 8.45312V16.3828C21.7803 17.1016 21.4287 17.5078 20.8896 17.75C20.2959 18.0156 19.8428 18.1484 18.624 18.1484C15.874 18.1484 14.0615 16.7344 11.1709 16.7344C10.0225 16.7344 9.28809 17.0156 9.09277 17.1016V21.4453C9.09277 21.7734 8.82715 22.0312 8.49902 22.0312ZM18.624 16.9688C19.8428 16.9688 20.4912 16.6094 20.6006 16.3516V9.04688C20.0771 9.19531 19.374 9.29688 18.5225 9.29688C15.6553 9.29688 13.8193 7.88281 11.0693 7.88281C9.85059 7.88281 9.20215 8.24219 9.09277 8.5V15.8359C9.53027 15.6562 10.3115 15.5547 11.1709 15.5547C14.1787 15.5547 16.0225 16.9688 18.624 16.9688Z"})}),v=(0,m().wt)("emojiFood",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M7.89355 23.2188C7.13574 23.6953 6.52637 23.4375 6.12793 23.0312C5.66699 22.5703 5.4873 21.9453 5.9248 21.2422L12.4482 10.875C13.9639 8.46875 16.2373 7.82031 18.1279 9.17188C17.9248 7.57812 18.4404 5.30469 19.5654 5.5625C20.2139 5.72656 20.2842 6.58594 20.0498 7.53906C20.9873 6.39062 22.1826 5.61719 22.8779 6.3125C23.5732 7.01562 22.7998 8.21094 21.6514 9.14844C22.6123 8.91406 23.4795 8.98438 23.6357 9.64844C23.9014 10.7656 21.5811 11.2812 19.9873 11.0625C21.2998 12.9688 20.6592 15.2031 18.2842 16.6953L7.89355 23.2188ZM10.5732 18.8125C10.7764 18.6094 11.0889 18.6016 11.2998 18.8125L11.8389 19.3438L12.7061 18.7969L11.9717 18.0859C11.7607 17.875 11.7686 17.5625 11.9639 17.3594C12.1748 17.1562 12.4873 17.1484 12.6904 17.3516L13.5967 18.2422L17.6748 15.6797C19.8076 14.3359 20.0732 12.7266 18.5967 11.2266L17.9326 10.5469C16.6279 9.23438 15.2061 9.28906 13.9639 10.7812L15.4717 12.2656C15.6826 12.4766 15.6826 12.7812 15.4873 12.9844C15.2842 13.1953 14.9717 13.2031 14.7607 12.9922L13.3701 11.625L12.8232 12.4922L13.7061 13.3594C13.917 13.5703 13.917 13.8828 13.7139 14.0859C13.5029 14.2891 13.1982 14.2969 12.9873 14.0859L12.2686 13.3828L6.94043 21.8516C6.77637 22.1016 7.04199 22.3594 7.2998 22.1953L10.9482 19.9062L10.5811 19.5391C10.3701 19.3359 10.3701 19.0156 10.5732 18.8125Z"})}),j=(0,m().wt)("emojiNature",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M5.83008 10.4766C5.83008 10.0547 5.87695 8.71875 6.06445 7.96094C6.2832 7.0625 7.18164 7.10938 7.63477 7.64062C8.49414 8.61719 9.5332 8.98438 10.7363 8.98438C12.166 8.98438 13.4551 8.625 14.7285 8.625C18.4238 8.625 21.1035 11 21.1035 14.2891C21.1035 15.2109 20.9082 16.0625 20.5488 16.8125C21.3535 17.9531 22.3848 19.6016 22.3848 20.5859C22.3848 21.2344 21.9238 21.7734 21.3457 21.7734C21.0723 21.7734 20.8145 21.6406 20.6973 21.2656C20.3301 20.0859 20.1191 19.0469 19.6504 18.1484C18.5098 19.3906 16.7676 20.1328 14.6973 20.1328C9.32227 20.1328 5.83008 16.3047 5.83008 10.4766ZM10.4004 12.2969C10.2832 11.9453 10.666 11.7109 10.916 12.0469C11.8145 13.2188 13.127 13.6094 14.6113 13.8594C16.9551 14.2422 18.5879 14.8438 19.6816 15.8125C19.8379 15.3438 19.9238 14.8359 19.9238 14.2891C19.9238 11.6719 17.7754 9.80469 14.7285 9.80469C14.2051 9.80469 13.6582 9.875 13.0332 9.96094C12.3457 10.0547 11.5801 10.1641 10.7363 10.1641C9.47852 10.1641 8.10352 9.71094 7.22852 8.91406C7.1582 8.85156 7.10352 8.85938 7.08789 8.96094C7.01758 9.38281 7.00977 9.96094 7.00977 10.4766C7.00977 15.6562 9.98633 18.9531 14.6973 18.9531C16.541 18.9531 18.041 18.2734 18.9551 17.1484C17.9316 15.9688 16.7129 15.4766 14.2129 14.8828C12.3691 14.4297 10.8926 13.8203 10.4004 12.2969Z"})}),y=(0,m().wt)("emojiObjects",{viewBox:"0 0 29 28",svg:(0,g.jsx)("path",{d:"M13.6611 3.90625V2.40625C13.6611 2.03906 13.9658 1.72656 14.333 1.72656C14.7002 1.72656 15.0127 2.03906 15.0127 2.40625V3.90625C15.0127 4.26562 14.708 4.57812 14.333 4.57812C13.9658 4.57812 13.6611 4.26562 13.6611 3.90625ZM8.85645 6.45312L7.79395 5.38281C7.53613 5.125 7.53613 4.71094 7.79395 4.4375C8.05957 4.17969 8.49707 4.17969 8.74707 4.4375L9.80176 5.50781C10.0596 5.76562 10.0674 6.1875 9.80176 6.45312C9.54395 6.71875 9.11426 6.71094 8.85645 6.45312ZM18.8564 5.50781L19.9268 4.4375C20.1846 4.17969 20.5986 4.17969 20.8721 4.4375C21.1299 4.71094 21.1299 5.125 20.8721 5.38281L19.8018 6.45312C19.5439 6.71094 19.1299 6.71875 18.8564 6.45312C18.5908 6.1875 18.5986 5.76562 18.8564 5.50781ZM14.333 6.03125C17.0908 6.03125 19.2705 8.03906 19.2705 10.5938C19.2705 13.4219 17.5752 14.125 17.0986 19.0078C17.0752 19.2812 16.9268 19.4531 16.6377 19.4531H12.0283C11.7393 19.4531 11.5908 19.2812 11.5596 19.0078C11.0908 14.125 9.40332 13.4219 9.40332 10.5938C9.40332 8.03906 11.5674 6.03125 14.333 6.03125ZM14.333 7.17969C12.2783 7.17969 10.5518 8.60938 10.5518 10.5938C10.5518 12.6875 11.9346 13.1719 12.6064 18.3047H16.0596C16.7314 13.1719 18.1221 12.6875 18.1221 10.5938C18.1221 8.60938 16.3877 7.17969 14.333 7.17969ZM7.25488 11.6484H5.75488C5.39551 11.6484 5.09082 11.3359 5.09082 10.9766C5.09082 10.6094 5.39551 10.2969 5.75488 10.2969H7.25488C7.62207 10.2969 7.94238 10.6016 7.94238 10.9766C7.94238 11.3438 7.62207 11.6484 7.25488 11.6484ZM22.8955 11.6484H21.3955C21.0361 11.6484 20.7236 11.3438 20.7236 10.9766C20.7236 10.6016 21.0361 10.2969 21.3955 10.2969H22.8955C23.2627 10.2969 23.5752 10.6094 23.5752 10.9766C23.5752 11.3359 23.2627 11.6484 22.8955 11.6484ZM12.0049 21.0469C11.7549 21.0469 11.5596 20.8594 11.5596 20.6016C11.5596 20.3438 11.7549 20.1562 12.0049 20.1562H16.6611C16.9189 20.1562 17.1143 20.3438 17.1143 20.6016C17.1143 20.8594 16.9189 21.0469 16.6611 21.0469H12.0049ZM14.333 23.1875C13.1768 23.1875 12.2002 22.6094 12.1533 21.75H16.5127C16.458 22.6094 15.4814 23.1875 14.333 23.1875Z"})}),C=(0,m().wt)("emojiPeople",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M14.5557 22.3281C10.2041 22.3281 6.58691 18.7109 6.58691 14.3594C6.58691 10 10.1963 6.39062 14.5479 6.39062C18.9072 6.39062 22.5244 10 22.5244 14.3594C22.5244 18.7109 18.915 22.3281 14.5557 22.3281ZM14.5557 21C18.2432 21 21.1963 18.0469 21.1963 14.3594C21.1963 10.6719 18.2354 7.71875 14.5479 7.71875C10.8604 7.71875 7.92285 10.6719 7.92285 14.3594C7.92285 18.0469 10.8682 21 14.5557 21ZM12.2354 13.6641C11.7432 13.6641 11.3135 13.2188 11.3135 12.5938C11.3135 11.9609 11.7432 11.5156 12.2354 11.5156C12.7354 11.5156 13.165 11.9609 13.165 12.5938C13.165 13.2188 12.7275 13.6641 12.2354 13.6641ZM16.8682 13.6641C16.376 13.6641 15.9463 13.2188 15.9463 12.5938C15.9463 11.9609 16.376 11.5156 16.8682 11.5156C17.3682 11.5156 17.7979 11.9609 17.7979 12.5938C17.7979 13.2188 17.3604 13.6641 16.8682 13.6641ZM14.5479 18.2734C12.915 18.2734 11.8213 17.1875 11.8213 16.6719C11.8213 16.4844 12.001 16.3984 12.1729 16.4766C12.7354 16.7812 13.415 17.1406 14.5479 17.1406C15.6807 17.1406 16.3604 16.7891 16.9307 16.4766C17.0947 16.3984 17.2744 16.4844 17.2744 16.6719C17.2744 17.1875 16.1807 18.2734 14.5479 18.2734Z"})}),b=(0,m().wt)("emojiPlus",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M14 22c-4.369 0-8-3.631-8-8 0-4.376 3.624-8 7.992-8C18.37 6 22 9.624 22 14c0 4.369-3.623 8-8 8zm-3.828-7.992c0 .4.283.667.69.667h2.456v2.462c0 .4.274.69.674.69.408 0 .69-.282.69-.69v-2.463h2.463c.4 0 .69-.266.69-.666 0-.408-.29-.69-.69-.69h-2.463v-2.455c0-.408-.282-.698-.69-.698-.4 0-.674.29-.674.698v2.455h-2.455c-.408 0-.69.282-.69.69z"})});const S=(0,m().wt)("emojiSymbols",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M14.8887 22.3281C10.5371 22.3281 6.91992 18.7109 6.91992 14.3594C6.91992 10 10.5293 6.39062 14.8809 6.39062C19.2402 6.39062 22.8574 10 22.8574 14.3594C22.8574 18.7109 19.248 22.3281 14.8887 22.3281ZM14.8887 21C18.5762 21 21.5293 18.0469 21.5293 14.3594C21.5293 10.6719 18.5684 7.71875 14.8809 7.71875C11.1934 7.71875 8.25586 10.6719 8.25586 14.3594C8.25586 18.0469 11.2012 21 14.8887 21ZM14.0293 18.0703C13.7715 18.0703 13.5605 17.9609 13.3652 17.7031L11.459 15.3594C11.3496 15.2109 11.2793 15.0469 11.2793 14.875C11.2793 14.5312 11.5449 14.2578 11.8809 14.2578C12.0996 14.2578 12.2715 14.3203 12.459 14.5703L13.998 16.5625L17.2402 11.3594C17.3887 11.1328 17.584 11.0078 17.7793 11.0078C18.1074 11.0078 18.4199 11.2344 18.4199 11.5859C18.4199 11.7578 18.3184 11.9297 18.2324 12.0859L14.6621 17.7031C14.5059 17.9453 14.2871 18.0703 14.0293 18.0703Z"})}),k=(0,m().wt)("emojiTravel",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M10.4102 6.59999L13.2496 12.8777L8.06153 13.4701L6.47152 10.5536C6.46512 10.5533 6.45784 10.5531 6.44961 10.5531H6.37773V17.3453H6.44961C6.45975 17.3453 6.46847 17.345 6.4759 17.3446L8.06153 14.4362L13.2496 15.0285L10.4102 21.3062H10.7855C10.8271 21.3062 10.8762 21.2947 10.944 21.2204L16.192 15.4882C16.343 15.3193 16.5192 15.1534 16.7671 15.0493C17.0082 14.9481 17.2567 14.9312 17.4965 14.9312H20.6449C21.3092 14.9312 21.8867 14.7803 22.2776 14.5596C22.6756 14.3348 22.7834 14.1043 22.787 13.953C22.7834 13.7972 22.6746 13.5671 22.2784 13.3442C21.888 13.1245 21.3105 12.975 20.6449 12.975H17.4965C17.2572 12.975 17.0066 12.9583 16.7636 12.8544C16.5154 12.7483 16.3396 12.5795 16.1896 12.4076L10.9354 6.67645C10.8794 6.6124 10.8381 6.59999 10.7855 6.59999H10.4102ZM9.13689 5.81573C9.30066 5.53389 9.59424 5.39999 9.8793 5.39999H10.7855C11.1991 5.39999 11.562 5.57301 11.8335 5.88032L17.0848 11.6083L17.0901 11.6144C17.1939 11.7339 17.2288 11.7483 17.2348 11.7508C17.2476 11.7563 17.2983 11.775 17.4965 11.775H20.6449C21.4716 11.775 22.2612 11.9576 22.8669 12.2984C23.4624 12.6335 23.9806 13.1898 23.9871 13.948L23.9872 13.9583C23.9807 14.7134 23.4613 15.2693 22.8677 15.6045C22.2625 15.9462 21.4728 16.1312 20.6449 16.1312H17.4965C17.2988 16.1312 17.2464 16.1496 17.2317 16.1558C17.2242 16.1589 17.1888 16.1735 17.0849 16.29L17.0797 16.2958L11.8302 22.0296C11.5699 22.3147 11.2127 22.5062 10.7855 22.5062H9.8793C9.58383 22.5062 9.29417 22.3619 9.13515 22.0846C8.97977 21.8136 8.99861 21.5052 9.11616 21.2555L11.4778 16.034L8.72831 15.7201L7.50843 17.9576C7.50827 17.9579 7.50811 17.9582 7.50795 17.9585C7.40427 18.1496 7.25122 18.3087 7.04689 18.4132C6.85046 18.5136 6.64222 18.5453 6.44961 18.5453H6.11367C5.88888 18.5453 5.64429 18.4742 5.45252 18.2888C5.25823 18.101 5.17773 17.8533 5.17773 17.6172V10.2891C5.17773 10.0541 5.25718 9.80874 5.44527 9.62065C5.63336 9.43256 5.87871 9.35312 6.11367 9.35312H6.44961C6.64191 9.35312 6.85261 9.38475 7.05157 9.48866C7.25706 9.59597 7.40839 9.75869 7.51001 9.95148L8.72831 12.1862L11.4778 11.8722L9.11482 6.64781C9.00203 6.40262 8.97622 6.09223 9.13689 5.81573Z"})});var A=()=>o(280704),M=()=>o(653998),w=()=>o(975392),I=()=>o(76394),P=()=>o(31448),E=()=>o(356214),L=()=>o(725460),T=()=>o(417653),B=()=>o(858023),R=()=>o(88271),D=()=>o(103151),F=()=>o(754421),U=()=>o(143920),W=()=>o(640979),H=()=>o(622286),z=()=>o(723817),_=()=>o(801802),V=()=>o(485966),O=()=>o(329144),Z=()=>o(375817),N=()=>o(210466),K=()=>o(441165);const q=1,$=6048e5;function G(e,t,o){if(void 0===e||void 0===t)return 0;const i=o-t,n=e*Math.pow(.5,i/$);return Math.round(n)}var Y=()=>o(839466);var J=()=>o(284320),Q=()=>o(749886),X=()=>o(789533),ee=()=>o(356813),te=()=>o(907721);function oe(e){const t=(0,M().tz)(),o=(0,c().IS)((e=>({wrapper:{borderTop:`solid 1px ${e.stroke.secondary}`,display:"flex",justifyContent:"space-between",paddingTop:8,paddingBottom:10,paddingLeft:12,paddingRight:12},categoryIcon:{width:28,height:28,fill:e.icon.secondary,transform:"scale(1.1)"}})),[]);return(0,g.jsx)("div",{style:o.wrapper,children:ae.map(((i,s)=>e.isHidden(i)?null:(0,g.jsx)(D().A,{alignment:te().C.Start,placement:te().W.Bottom,render:s=>(0,n.createElement)(ee().A,{focused:e.isFocused(i),disabled:e.isDisabled(i),...s,key:i.id,ariaLabel:t.formatMessage({id:"emojiPicker.category.label",defaultMessage:"Jump to category: {category}"},{category:i.category??i.id}),icon:()=>{var e;return null===(e=i.icon)||void 0===e?void 0:e.call(i,o.categoryIcon)},style:{width:32,height:32},onClick:t=>{e.onCategoryClick(i,t)}}),renderTooltip:e=>(0,g.jsx)("div",{...e,children:i.title})},i.id)))})}var ie=()=>o(437783);const ne=(0,M().YK)({noResults:{defaultMessage:"No results",id:"emojiPicker.noResults.message"}}),se=(0,g.jsx)(M().sA,{id:"emojiPicker.addCustomEmoji",defaultMessage:"Add emoji"}),re="__ADD_CUSTOM_EMOJI__",ae=[{id:"recent",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.recent",defaultMessage:"Recent"}),icon:o(700659).c},{id:"callout",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.callout",defaultMessage:"Callout"})},{id:"people",category:"People & Body",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.people",defaultMessage:"People"}),icon:C},{id:"nature",category:"Animals & Nature",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.animals",defaultMessage:"Animals and nature"}),icon:j},{id:"food",category:"Food & Drink",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.food",defaultMessage:"Food and drink"}),icon:v},{id:"activities",category:"Activities",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.activity",defaultMessage:"Activity"}),icon:h},{id:"travel",category:"Travel & Places",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.travel",defaultMessage:"Travel and places"}),icon:k},{id:"objects",category:"Objects",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.objects",defaultMessage:"Objects"}),icon:y},{id:"symbols",category:"Symbols",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.symbols",defaultMessage:"Symbols"}),icon:S},{id:"flags",category:"Flags",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.flags",defaultMessage:"Flags"}),icon:x},{id:"custom",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.custom",defaultMessage:"Custom"}),icon:f},{id:"add",title:se,icon:b}],le=Object.fromEntries(ae.map((e=>[e.id,e]))),ce=["💡","👉","☝","👌","🔑","🚧","⚠️","🔥","📌","✂️","❓","🚫","⛔","⏰","☎️","🚨","♻️","✅","🔒","📎","📖","🗣","➡️","📢","🛠","⚙"];function de(e){const{onSubmit:t,isInline:o,onUpload:m,iconLoggingData:h,onNoResults:f,comboboxProps:x,hideCustomEmoji:v}=e,j=(0,r().v3)(),y=(0,c().DP)(),C=(0,M().tz)(),b=(0,r().Y0)(),S=(0,H().X)("emoji_frecency"),k=(0,W().Tf)(),$=(0,l().K8)((()=>Math.floor((0,_().so)(j,e.menuRef,k))),[j,e.menuRef,k]),ee=(0,l().K8)((()=>(0,_().uu)(j)),[j]),te=(0,l().K8)((()=>(0,F().wA)({spaceStore:(0,F().vZ)()})),[]),ae=b.isDesktop&&te&&!v,de=(0,n.useMemo)((()=>s().A.withListenerIgnored((()=>S?Y().o.getEmojiFrecencyMap():{}))),[S]),he=(0,n.useMemo)((()=>S?Object.keys(de).sort(((e,t)=>de[t].f!==de[e].f?de[t].f-de[e].f:de[t].u-de[e].u)).slice(0,z().Te*$):[]),[de,$,S]),fe=(0,l().K8)((()=>{var e;const t=(0,F().vZ)();if(!t)return[];return((null===(e=O().A.getData(j,{spaceId:t.id}))||void 0===e?void 0:e.pointers)??[]).map((e=>p().qg.toString(p().qg.fromPointer(e))))}),[j]),xe=(0,n.useCallback)((e=>{t(e),S?function(e){var t;const o=Y().o.getStore(null===(t=V().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId());if(!o)return;let i=o.state??{};const n=Date.now();for(const r in i)i[r].f=G(i[r].f,i[r].u,n);const s=(0,K().t4)(e);if(s in i?(i[s].f+=q,i[s].u=n):i[s]={f:q,u:n},Object.keys(i).length>Y().Z){const e=Object.entries(i);e.sort(((e,t)=>e[1].f!==t[1].f?t[1].f-e[1].f:t[1].u-e[1].u)),i=Object.fromEntries(e.slice(0,Y().Z))}o.setState(i)}(e):function(e,t){var o;const i=X().A.getStore((null===(o=V().default.state.currentSpaceStore)||void 0===o?void 0:o.getSpaceId())||""),n=i.state,s=w().sb(w().KC([(0,K().t4)(e)],null==n?void 0:n.split(",").filter(Boolean))),r=w().s(s,t);i.setState(r.join(",")),Q().A.setState({...Q().A.state,recentEmojis:r})}(e,z().Te*$),h&&E().aU(j,"pick_emoji",{icon:e,...h})}),[t,S,h,$,j]),ve=(0,J()._)(),je=(0,l().K8)(K().bb,[]),ye=(0,n.useCallback)((e=>{const t=void 0===je?p().Fq(e,ve):[];return{key:e,action:()=>{0===t.length&&xe(e)},render:o=>(0,g.jsx)(ie().A,{...o,emoji:e,showTooltip:!0,variations:t,insertEmoji:xe})}}),[xe,ve,je]),Ce=(0,l().K8)((()=>{const t=function(e){const{environment:t,filter:o,isCallout:i,maxEmojisPerSection:n,showCategoriesThreshold:s,customEmojiStrings:r,shouldShowCustomAddButton:a,isEmojiFrecencyEnabled:l,frequentlyUsedEmojis:c,emojiFrecencyMap:d,hideCustomEmoji:m}=e,g=function(e){return w().oE([e.filterIsEmpty?le.recent:void 0,e.isCallout?le.callout:void 0,le.people,le.nature,le.food,le.activities,le.travel,le.objects,le.symbols,le.flags,e.hideCustomEmoji?void 0:le.custom])}({filterIsEmpty:!(null!=o&&o.trim()),isCallout:i,hideCustomEmoji:m}),h=p().f7(o)??"",f=o.split(" ").filter(Boolean),x=g.map((e=>{const o=function(e,t,o,i){return"recent"===e.id?o?i:Q().A.state.recentEmojis:"callout"===e.id?ce:"custom"===e.id?t:J().A.state.emojiByCategory[e.category]||[]}(e,r,l,c),i=function(e,t,o,i,n,s){const r=w().oE(t.map((t=>{if(s&&p().qg.isCustomEmojiString(t))return;if(""===o)return{rank:100,emoji:t};const r=(0,u().$)(t,J().A.state);let a=[];if(r&&r.keywords)a=r.keywords||[];else if(p().qg.isCustomEmojiString(t)){var l;const o=p().qg.fromCustomEmojiString(t).pointer,i=e.currentUser.id;if(!i)return;const n=null===(l=e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:o,userId:i}))||void 0===l?void 0:l.value;if(!n||!n.alive)return;a=p().AP(n.name)}const c=o.length<3||o.includes(" ")?a:a.map((e=>e.replaceAll(" ",""))),d=o.indexOf(t);if(-1!==d)return{rank:100-d+pe(t,n),emoji:t};const m=":",g=c.findIndex((e=>e===`${m}${o}`));if(-1!==g)return{rank:100-g+pe(t,n),emoji:t};const h=c.findIndex((e=>e===o));if(-1!==h)return{rank:10*(10-h)+pe(t,n),emoji:t};const f=c.findIndex((e=>e.startsWith(o)));if(-1!==f)return{rank:10-f+pe(t,n),emoji:t};if(i.length>1){const e=r&&r.uniqueKeywords||[];if(i.every((t=>e.find((e=>e.startsWith(t))))))return{rank:i.length+pe(t,n),emoji:t}}return c.some((e=>e.includes(o)))?{rank:1+pe(t,n),emoji:t}:void 0})));return r.sort(((e,t)=>t.rank-e.rank))}(t,o,h,f,d,m);return{category:e,emojis:i.map((e=>({rank:e.rank,emoji:me(e.emoji)})))}})),v=[];let j=0;for(const{category:u,emojis:p}of x){if(a&&"custom"===u.id){const e={rank:-1/0,emoji:re};p.unshift(e)}let e=0;for(;e<p.length;){const t=p.slice(e,e+n);v.push({id:u.id,title:0===e?u.title:void 0,emojis:t}),e+=t.length}j+=p.length}if(""===o||j>s){return v.map((e=>({...e,emojis:e.emojis.map((e=>{let{emoji:t}=e;return t}))})))}const y=w().Ul(v.flatMap((e=>e.emojis)),(e=>-e.rank)).map((e=>{let{emoji:t}=e;return t}));if(0===y.length)return[];return[{emojis:y}]}({environment:j,filter:e.filter,isCallout:e.isCallout??!1,maxEmojisPerSection:$,showCategoriesThreshold:Math.floor($*ee/2),customEmojiStrings:fe,shouldShowCustomAddButton:ae,isEmojiFrecencyEnabled:S,frequentlyUsedEmojis:he,emojiFrecencyMap:de,hideCustomEmoji:v});return t}),[j,e.filter,e.isCallout,$,ee,ae,fe,he,S,de,v]),be=(0,n.useRef)(null),Se=(0,n.useMemo)((()=>{const e=[];for(const[t,o]of Ce.entries()){let i;i=b.isMobile?z().UA:z().Sq;const n=void 0!==o.title,s=t===Ce.length-1||void 0!==Ce[t+1].title;n&&(b.isMobile?i+=47.5:i+=33.5),s&&b.isMobile&&(i+=10),e.push(i)}return e}),[Ce,b]),ke=(0,i().Te)({count:Ce.length,getScrollElement:()=>be.current,estimateSize:e=>Se[e]}),Ae=(0,n.useCallback)((e=>{const t=Ce.findIndex((t=>t.id===e));-1!==t&&ke.scrollToIndex(t,{behavior:"auto",align:"start"})}),[ke,Ce]),Me=(0,n.useRef)(null);(0,a().w)((()=>{S||Q().A.cleanupSkinTonedRecents((0,K().bb)()),async function(){await(0,U().y)(),await async function(){if(!ue){await J().A.waitUntilLoaded();for(const t in J().A.state.positionalEmojiData){var e;const o=null===(e=(0,u().$)(t,J().A.state))||void 0===e?void 0:e.keywords;o&&(d().fB[t]={...d().fB[t],uniqueKeywords:w().sb(o.flatMap((e=>e.split(" "))))})}ue=!0}}()}()}));const we=(0,l().uB)(void 0,N().A);(0,a().l)((()=>{we.setState({...we.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}));const Ie=ae?1===Ce.length&&Ce[0].emojis[0]===re:0===Ce.length;(0,n.useEffect)((()=>{Ie?we.unsetFocus():we.setState({...we.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}),[e.filter,we,Ie]),(0,n.useEffect)((()=>{0===Ce.length&&(null==f||f())}),[Ce,f]);const Pe=(0,n.useMemo)((()=>ae?{key:"custom-emoji-add",action:()=>{Me.current&&Z().A.setState({open:!0,isEditing:!1,entrypoint:"picker",originRect:Me.current.getBoundingClientRect(),uploadFileEventHandlers:m})},render:e=>(0,g.jsx)(D().A,{renderTooltip:()=>se,render:t=>(0,g.jsx)(T().A,{...e,...t,ref:Me,ignoreLocalHoverState:!1,style:{width:28,height:28,margin:2,display:"flex",justifyContent:"center",alignItems:"center",border:`1px solid ${y.stroke.primary}`,cursor:"pointer",borderRadius:15},children:(0,A().b)({height:14,width:14,color:y.icon.secondary})})})}:null),[m,ae,y]),Ee=[];let Le,Te=!1;if(Ie)Ee.push({key:"no results",items:[{key:"no results",action:()=>{Me.current&&ae&&Z().A.setState({open:!0,isEditing:!1,entrypoint:"no_results",originRect:Me.current.getBoundingClientRect(),uploadFileEventHandlers:m})},render:(e,t)=>(0,g.jsxs)("div",{style:{...o&&{width:"100%"},display:"flex",flexDirection:o?"row":"column"},children:[(0,g.jsx)(L().A,{...!ae&&e,caption:C.formatMessage(ne.noResults),style:{fontWeight:P().Wy.medium,marginBottom:2,marginLeft:2,height:20,boxSizing:"content-box"}}),ae?(0,g.jsxs)(T().A,{...e,ref:Me,style:{display:"flex",alignItems:"center",gap:6,padding:"4px 8px",margin:o?"2px 8px":"0 12px",height:28,borderRadius:6,border:`1px solid ${y.stroke.primary}`,fontWeight:P().Wy.medium,fontSize:P().J.UIRegular.desktop,whiteSpace:"nowrap"},children:[(0,A().b)({height:14,width:14,color:y.icon.primary}),se]}):null]})}],render:e=>(0,g.jsx)(R().A,{...e})});else if(1===Ce.length&&void 0===Ce[0].id){const e=w().sb(Ce[0].emojis).map((e=>e===re?Pe:ye(e))).filter(I().Pe);Ee.push({key:"search-results",items:e,render:e=>(0,g.jsx)(R().A,{shouldShowBottomDivider:!0,children:(0,g.jsx)("div",{style:(0,_().ze)(j,y,k),children:e.children})},e.key)})}else Te=!0,ke.getVirtualItems().map((e=>{var t;const{key:o,index:i,start:n,end:s,size:r}=e,a=Ce[i],l=void 0!==a.title,c=i===Ce.length-1||void 0!==Ce[i+1].title,[d,u]=[ke.scrollOffset??0,(ke.scrollOffset??0)+((null===(t=ke.scrollRect)||void 0===t?void 0:t.height)??0)];u<n||d>=s||void 0===Le&&(Le=a.id);const p=a.emojis.map((e=>e===re?Pe:ye(e))).filter(I().Pe);return{key:o.toString(),items:p,render:e=>(0,g.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:r,transform:`translateY(${n}px)`},children:(0,g.jsx)("div",{"data-index":i,children:(0,g.jsx)(R().A,{title:a.title,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,mobileTitleStyle:{...l?{paddingTop:16}:{}},desktopTitleStyle:{...l?{paddingTop:6,lineHeight:"100%"}:{}},style:{display:"flex",flexDirection:"column",alignItems:"stretch"},children:(0,g.jsx)("div",{style:{...(0,_().ze)(j,y,k),...l&&b.isMobile?{paddingTop:10}:{},...c&&b.isMobile?{paddingBottom:10}:{},...b.isPhone&&{boxShadow:ge({theme:y,isFirstRowInSection:l,isLastRowInSection:c})}},children:e.children})})},o.toString())},i)}})).forEach((e=>e&&Ee.push(e)));const Be=b.isDesktop&&Ee.length>0?0:void 0,Re=(0,g.jsx)(B().Ay,{style:{alignItems:"stretch",width:"100%",position:"relative",height:"100%"},type:B().Oh.Grid,getItemsPerRowForSection:()=>$,renderRow:(e,t)=>(0,g.jsx)("div",{role:"row",style:{display:"flex"},children:e},t),store:we,initialFocus:Be,sections:Ee,disableKeyboardArrowWrap:!0,unfocusOnScroll:b.isMobile,performHandleEnterOnTab:o,comboboxProps:x,captureKeyboardOnlyWhenFocused:!o});if(!Te)return(0,g.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:(0,g.jsx)("div",{style:{width:"100%",flexGrow:1},children:Re})});const De=(0,g.jsx)(oe,{isHidden:e=>{switch(e.id){case"callout":return!0;case"custom":return v||!te&&0===fe.length;case"add":return!ae;default:return!1}},isFocused:e=>Le===e.id,isDisabled:e=>{if(["custom","add"].includes(e.id))return!1;const t=Ce.find((t=>t.id===e.id));return void 0===t||0===t.emojis.length},onCategoryClick:(e,t)=>{"add"===e.id?Z().A.setState({open:!0,isEditing:!1,entrypoint:"categories_bar",originRect:t.currentTarget.getBoundingClientRect(),uploadFileEventHandlers:m}):Ae(e.id)}});return(0,g.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,g.jsx)("div",{style:{width:"100%",flexGrow:1,maxHeight:b.isDesktop?z().w$:void 0,overflowX:"hidden",overflowY:"auto",paddingBottom:6},ref:be,children:(0,g.jsx)("div",{style:{height:ke.getTotalSize(),width:"100%",position:"relative"},children:Re})}),De]})}let ue=!1;function pe(e,t){const o=t[e];return o?100*o.f:0}function me(e){var t;const o=(0,K().bb)();if(!(void 0!==o&&0!==o))return e;const i=null===(t=(0,u().$)(e,J().A.state))||void 0===t?void 0:t.variations;return 5===(null==i?void 0:i.length)||"🤝"===e?(null==i?void 0:i[o-1])??e:e}function ge(e){const{theme:t,isFirstRowInSection:o,isLastRowInSection:i}=e;return o&&i?`0 1px 0 ${t.regularDividerColor}, 0 -1px 0 ${t.regularDividerColor}`:o?`0 -1px 0 ${t.regularDividerColor}`:i?`0 1px 0 ${t.regularDividerColor}`:"none"}},62842:(e,t,o)=>{o.d(t,{h:()=>n});o(242343);var i=o(163643);const n=(0,o(680369).wt)("refresh",{viewBox:"0 0 14 15",svg:(0,i.jsx)("path",{d:"m1.382 7.22 1.294-1.782q.156-.215.376-.215c.22 0 .272.071.376.215l1.289 1.787q.195.263.112.483-.078.215-.39.215H3.69a3.7 3.7 0 0 0 .445 1.24q.337.576.844 1.016.508.435 1.153.673.645.245 1.372.245.771 0 1.445-.288a3.8 3.8 0 0 0 1.182-.777q.277-.225.537-.195a.61.61 0 0 1 .552.674q-.015.258-.254.464-.66.639-1.553 1.02a4.8 4.8 0 0 1-1.91.386 5.13 5.13 0 0 1-3.428-1.304 5.4 5.4 0 0 1-1.132-1.42 5 5 0 0 1-.561-1.734h-.718q-.322 0-.4-.215-.074-.22.117-.488Zm2.666-3.745q.66-.64 1.553-1.02a4.75 4.75 0 0 1 1.904-.387q.99 0 1.865.347a5.2 5.2 0 0 1 1.563.962q.694.615 1.132 1.426.44.806.567 1.728h.703q.317 0 .395.22.083.215-.112.483l-1.294 1.783q-.156.214-.376.214-.215 0-.37-.214l-1.295-1.788q-.195-.263-.112-.478.083-.22.395-.22h.757a3.7 3.7 0 0 0-.454-1.24 3.85 3.85 0 0 0-1.987-1.69 3.8 3.8 0 0 0-1.377-.248q-.762 0-1.44.288a3.8 3.8 0 0 0-1.182.776q-.279.225-.537.195a.63.63 0 0 1-.42-.23.6.6 0 0 1-.137-.439q.02-.258.259-.468"})})},213454:(e,t,o)=>{o.d(t,{A:()=>N,h:()=>q});o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601);var i=o(242343),n=()=>o(237385),s=()=>o(803290),r=()=>o(174114),a=()=>o(829090),l=()=>o(185912),c=o(163643);const d=(0,o(680369).wt)("photo",{viewBox:"0 0 19 16",svg:(0,c.jsx)("path",{d:"M17.938 12.18c.03.755-.146 1.33-.532 1.726-.385.396-.971.594-1.758.594H2.992c-.65 0-1.143-.185-1.476-.555-.334-.37-.51-.916-.532-1.64l2.946-2.64a1.66 1.66 0 01.484-.33 1.292 1.292 0 011.063.009c.182.073.354.182.515.328l1.446 1.305L10.96 7.82c.182-.156.37-.273.562-.351a1.607 1.607 0 011.22.008c.202.078.39.197.562.359l4.633 4.344zM6.296 8.008a1.85 1.85 0 01-.945-.25 1.93 1.93 0 01-.68-.68 1.846 1.846 0 01-.25-.945c0-.339.083-.651.25-.938a1.93 1.93 0 01.68-.68c.286-.171.601-.257.945-.257s.656.086.937.258c.282.166.506.393.672.68.172.286.258.598.258.937a1.8 1.8 0 01-.258.945c-.166.287-.39.513-.672.68-.28.166-.593.25-.937.25zm-3.492 7.148c-.844 0-1.482-.213-1.914-.64-.433-.428-.649-1.058-.649-1.891V3.109c0-.833.216-1.463.649-1.89C1.323.786 1.96.57 2.805.57H16.18c.849 0 1.49.216 1.922.649.432.427.648 1.057.648 1.89v9.516c0 .833-.216 1.463-.648 1.89-.433.428-1.073.641-1.922.641H2.805zm.093-1.531h13.196c.36 0 .635-.094.828-.281.193-.193.289-.477.289-.852v-9.25c0-.375-.096-.656-.29-.844-.192-.192-.468-.289-.827-.289H2.898c-.364 0-.643.097-.836.29-.187.187-.28.468-.28.843v9.25c0 .375.093.659.28.852.193.187.472.281.836.281z"})});var u=()=>o(62842),p=()=>o(367799),m=()=>o(409211),g=()=>o(653998),h=()=>o(975392),f=()=>o(76394),x=()=>o(31448),v=()=>o(759625),j=()=>o(575015),y=()=>o(84543),C=()=>o(663539),b=()=>o(209684),S=()=>o(559637),k=()=>o(412576),A=()=>o(59175),M=()=>o(655830),w=()=>o(935091),I=()=>o(951540),P=()=>o(103151),E=()=>o(927685),L=()=>o(137476),T=()=>o(754421),B=()=>o(754697),R=()=>o(342285),D=()=>o(318394),F=()=>o(640979),U=()=>o(907721),W=()=>o(329144),H=()=>o(375817),z=()=>o(836331),_=()=>o(493065),V=()=>o(284320);const O=(0,g().YK)({nameInputPlaceholder:{defaultMessage:"have-fun-with-it",id:"customEmojiUploadPopup.nameInput.placeholder"},urlPasteInputPlaceholder:{defaultMessage:"Paste a link to an image...",id:"customEmojiUploadPopup.urlPasteInput.placeholder"},nameInputDuplicateError:{defaultMessage:"Name already taken",id:"customEmojiUploadPopup.nameInput.duplicateError"},nameInputCharacterError:{defaultMessage:"Name can only contain lowercase letters, numbers, hyphens, or underscores",id:"customEmojiUploadPopup.nameInput.characterError"},nameInputLengthError:{defaultMessage:"Name must be less than 50 characters",id:"customEmojiUploadPopup.nameInput.lengthError"},fileUploadImageError:{defaultMessage:"Only images are supported",id:"customEmojiUploadPopup.fileUpload.imageError"},urlPasteHintImageError:{defaultMessage:"Pasted link does not contain an image.{br}Use {keyboardShortcut} to paste a different link",id:"customEmojiUploadPopup.urlPasteHint.imageError"},urlPasteInputImageError:{defaultMessage:"Pasted link does not contain an image",id:"customEmojiUploadPopup.urlPasteInput.imageError"},customEmojiLimitError:{defaultMessage:"Your workspace has reached the custom emoji limit of {customEmojiLimit}",id:"customEmojiUploadPopup.customEmojiLimit.error"},uploadReplaceButton:{defaultMessage:"Replace",id:"customEmojiUploadPopup.uploadButton.replace"}}),Z="\\p{Ll}\\p{Lo}\\d_-";function N(e){const t=(0,n().v3)(),o=(0,g().tz)(),[d,u]=(0,i.useState)(""),[k,R]=(0,i.useState)(null),[N,q]=(0,i.useState)(null),[Y,J]=(0,i.useState)(null),[Q,X]=(0,i.useState)(!1),[ee,te]=(0,i.useState)(""),oe=e.allowUrlPaste&&t.device.isDesktop,ie=e.allowUrlPaste&&t.device.isMobile,{existingEmojiStore:ne,isEditing:se}=(0,s().K8)((()=>({existingEmojiStore:H().A.state.store,isEditing:H().A.state.isEditing})),[]),re=(0,s().K8)((()=>null==ne?void 0:ne.getName()),[ne]),ae=(0,s().K8)((()=>(0,T().vZ)()),[]),le=(0,s().K8)((()=>{var e;return ae?(null===(e=W().A.getData(t,{spaceId:ae.id}))||void 0===e?void 0:e.names)??new Set:new Set}),[t,ae]),ce=(0,s().K8)((()=>V().A.state.emojiByName),[]),de=(0,s().K8)((()=>(0,T().wA)({spaceStore:ae})),[ae]),ue=(0,s().K8)((()=>z().default.getConfigKey("custom_emojis_config","limit")),[]),pe=(0,i.useCallback)((e=>{if(u(e),0===e.length)return void R(null);new RegExp(`^[${Z}]*$`,"u").test(e)?e.length>50?R(o.formatMessage(O.nameInputLengthError)):e===re&&se||!le.has(e)&&!ce.hasOwnProperty(e)?R(null):R(o.formatMessage(O.nameInputDuplicateError)):R(o.formatMessage(O.nameInputCharacterError))}),[re,se,le,ce,o]);function me(e){const t=(0,l().pc)({source:e,secureFileConfigRootpath:E().A.secureFileConfig.rootPath,secureFileConfigHostname:E().A.secureFileConfig.hostname}),o=t?t.link:e,i=new Image;i.src=o,i.onload=()=>{q({type:"url",url:o,isExistingImage:!1}),J(null)},i.onerror=()=>{J(oe?O.urlPasteHintImageError:O.urlPasteInputImageError)}}(0,i.useEffect)((()=>{null!=ne&&ne.isDefined()&&(pe(ne.getName()),q({type:"url",url:ne.getUrl(),isExistingImage:!0}))}),[ne,se,pe]);const ge=void 0!==ae&&(!e.confirmToAdd||Q),he=!se&&le.size>=ue,fe=ge?Boolean(!d)||Boolean(!N)||Boolean(k)||d===re&&(null==N?void 0:N.isExistingImage)&&se||he:Boolean(!N);const xe=function(e){const{customEmojiLimitReached:t}=e,o=(0,n().v3)();return(0,r().IS)((e=>({wrapper:{padding:"0 16px",display:"flex",flexDirection:"column",fontSize:x().J.UIRegular.desktop},title:{marginTop:12,fontSize:x().J.UIRegular.desktop,color:e.text.primary,fontWeight:x().Wy.semibold},description:{marginTop:2,color:e.text.secondary,fontSize:x().J.UISmall.desktop},errorDescription:{marginTop:2,color:e.text.uiRedPrimary,fontSize:x().J.UISmall.desktop},textInputContainer:{marginTop:20},textInputLabel:{marginBottom:6,color:e.text.secondary,fontWeight:x().Wy.medium,fontSize:x().J.UISmall.desktop},nameErrorText:{marginTop:10,color:e.text.uiRedPrimary,fontSize:x().J.UISmall.desktop},imageErrorText:{marginTop:10,color:e.text.uiRedPrimary,fontSize:x().J.UISmall.desktop,textAlign:"center"},checkboxContainer:{marginTop:12,display:"flex",alignItems:"center",gap:8,fontSize:x().J.UIRegular.desktop,...t&&{color:e.text.quaternary}},buttonFooter:{marginTop:16,marginBottom:12,display:"flex",flexDirection:o.device.isMobile?"column-reverse":"row",gap:8,justifyContent:"space-between",alignItems:"center"},secondaryButton:{color:e.text.secondary},primaryButton:{...o.device.isMobile&&{width:"100%"}},pastePrompt:{marginTop:10,color:e.text.tertiary,textAlign:"center",fontSize:x().J.UISmall.desktop},disabledCheckbox:{stroke:e.stroke.secondary},tooltip:{maxWidth:240,textWrap:"wrap"},divider:{width:19,height:1,borderBottom:`1px solid ${e.darkDividerColor}`},dividerContainer:{display:"flex",gap:4,alignItems:"center",justifyContent:"center",marginTop:10,marginBottom:10,color:e.text.tertiary,textAlign:"center",fontSize:x().J.UISmall.desktop}})),[o.device.isMobile,t])}({customEmojiLimitReached:he}),ve=e.showTitle?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{style:xe.title,children:se?(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.title.edit",defaultMessage:"Edit custom emoji"}):(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.title.add",defaultMessage:"Add custom emoji"})}),he?(0,c.jsx)("div",{style:xe.errorDescription,children:(0,c.jsx)(g().sA,{...O.customEmojiLimitError,values:{customEmojiLimit:ue.toLocaleString()}})}):(0,c.jsx)("div",{style:xe.description,children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.description",defaultMessage:"Custom emoji can be used by anyone in your workspace"})})]}):null,je=(0,c.jsx)(K,{image:N,onFileChanged:e=>{if(null===e)return void q(null);(null==e?void 0:e.name)&&(""===d||"file"===(null==N?void 0:N.type)&&G(N.file.name)===d)&&pe(G(e.name)),q({file:e,type:"file"})},isSavingAsCustomEmoji:ge,largeEmoji:e.largeEmoji,hideReplaceButton:e.allowUrlPaste,setError:J,disabled:he&&ge}),ye=(0,s().K8)((()=>(0,D().dK)({name:"paste",environment:t})),[t]),Ce=oe&&null===N&&!Boolean(Y)?(0,c.jsx)("div",{style:xe.pastePrompt,children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.pastePrompt.label",defaultMessage:"or {keyboardShortcut} to paste an image link",values:{keyboardShortcut:ye}})}):null,be=ie&&null===N?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{style:xe.dividerContainer,children:[(0,c.jsx)("div",{style:xe.divider}),(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.divider.label",defaultMessage:"or"}),(0,c.jsx)("div",{style:xe.divider})]}),(0,c.jsx)(A().A,{placeholder:o.formatMessage(O.urlPasteInputPlaceholder),value:ee,onChange:e=>te(e.target.value),type:"text",autoComplete:"off"})]}):null,Se=Boolean(Y)?(0,c.jsx)("div",{style:xe.imageErrorText,children:(0,c.jsx)(g().sA,{...Y,values:{br:(0,c.jsx)("br",{}),keyboardShortcut:ye}})}):null,ke=t.device.isDesktop&&de&&e.confirmToAdd&&null!==N?(0,c.jsx)(P().A,{style:xe.tooltip,placement:U().W.Bottom,alignment:U().C.Start,disableTooltip:!he,renderTooltip:()=>(0,c.jsx)(g().sA,{...O.customEmojiLimitError,values:{customEmojiLimit:ue.toLocaleString()}}),render:e=>(0,c.jsxs)("label",{...e,style:xe.checkboxContainer,htmlFor:"confirmToAddCheckbox",children:[(0,c.jsx)(S().A,{id:"confirmToAddCheckbox",size:14,checked:Q,onClick:()=>X(!Q),disabled:he,stroke:he?xe.disabledCheckbox.stroke:void 0}),(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.confirmToAddCheckbox.label",defaultMessage:"Add to workspace emoji library"})]})}):null,Ae=ge&&(!e.allowUrlPaste||e.allowUrlPaste&&null!==N)?(0,c.jsxs)("label",{style:xe.textInputContainer,htmlFor:"emojiName",children:[(0,c.jsx)("div",{style:xe.textInputLabel,children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.input.label",defaultMessage:"Emoji name"})}),(0,c.jsx)(A().A,{id:"emojiName",placeholder:o.formatMessage(O.nameInputPlaceholder),value:d,onChange:e=>pe(e.target.value),type:"text",autoFocus:!0,focus:!0,onSubmit:e=>{e.preventDefault()},autoComplete:"off",disabled:he}),Boolean(k)&&(0,c.jsx)("div",{style:xe.nameErrorText,children:k})]}):null,Me=(0,c.jsxs)("div",{style:xe.buttonFooter,children:[e.allowUrlPaste&&null!==N?(0,c.jsx)(b().p,{style:xe.secondaryButton,onClick:()=>{q(null),J(null),u(""),R(null),X(!1),te("")},children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.backButton.label",defaultMessage:"Back"})}):t.device.isDesktop?(0,c.jsx)(b().p,{style:xe.secondaryButton,onClick:()=>{var t;H().A.dismiss(),null===(t=e.onCancel)||void 0===t||t.call(e)},children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.cancelButton.label",defaultMessage:"Cancel"})}):null,ie&&null===N?(0,c.jsx)(I().A,{onClick:()=>me(ee),disabled:0===ee.length,style:xe.primaryButton,children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.nextButton.label",defaultMessage:"Next"})}):(0,c.jsx)(I().A,{onClick:function(){var o;fe||(ge?se&&void 0!==ne?async function(e){const{environment:t,name:o,existingEmojiStore:i,image:n}=e,s=i.getModel();if(!s)return;if(n.isExistingImage)y().createAndCommit({userAction:"customEmojiActions.rename",environment:t,canUndo:!0,perform:e=>{y().applyOperation({store:i,operation:s.ops.rename(o),transaction:e})}}),await _().transactionQueue.awaitRecordTransaction(i.pointer),j().D6({label:(0,c.jsx)($,{name:o})});else{const e=async e=>{y().createAndCommit({userAction:"customEmojiActions.replaceImageAndRename",environment:t,canUndo:!0,perform:t=>{y().applyOperation({store:i,operation:s.ops.setUrl(e),transaction:t}),y().applyOperation({store:i,operation:s.ops.rename(o),transaction:t})}}),await _().transactionQueue.awaitRecordTransaction(i.pointer),j().D6({label:(0,c.jsx)($,{name:o})})};"file"===n.type?C().QM({environment:t,file:n.file,bucket:"public",onComplete:e}):"url"===n.type?e(n.url):(0,f().HB)(n)}H().A.dismiss()}({environment:t,name:d,existingEmojiStore:ne,image:N}):((0,L().u4)({environment:t,event:{eventName:"create_custom_emoji",eventProperties:{entrypoint:e.entrypoint,is_first_emoji:0===le.size}}}),function(e){const{environment:t,name:o,currentSpaceStore:i,uploadFileEventHandlers:n,image:s}=e,r=async e=>{const s=(0,B().JH)({environment:t,table:p().e,spaceId:i.getSpaceId()});if(y().createAndCommit({userAction:"customEmojiActions.createCustomEmoji",environment:t,canUndo:!0,perform:n=>{v().eC({environment:t,table:p().e,inMemoryRecordCache:i.inMemoryRecordCache,transaction:n,value:{id:s.id,url:e,name:o,file_ids:[],space_id:s.spaceId,created_by_id:t.currentUser.id,created_by_table:m().oo,created_time:Date.now(),alive:!0}})}}),await _().transactionQueue.awaitRecordTransaction(s),j().D6({label:(0,c.jsx)(g().sA,{id:"uploadCustomEmoji.success",defaultMessage:"{name} has been added to your workspace",values:{name:o}})}),null!=n&&n.onComplete){const e=a().qg.toString(a().qg.fromPointer(s));n.onComplete(e)}};"file"===s.type?C().QM({...n,environment:t,file:s.file,bucket:"public",onComplete:r}):"url"===s.type?r(s.url):(0,f().HB)(s);H().A.dismiss()}({environment:t,name:d,currentSpaceStore:ae,uploadFileEventHandlers:e.uploadFileEventHandlers,image:N})):null===(o=e.onUploadWithoutSaving)||void 0===o||o.call(e,N))},disabled:fe,style:xe.primaryButton,children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.saveButton.label",defaultMessage:"Save"})})]});let we;return we=t.device.isMobile?{menuType:F().gu.ActionSheet}:{menuType:F().gu.Popup,minWidth:280},(0,c.jsx)(w().A,{...we,children:(0,c.jsx)(M().A,{debugName:"CustomEmojiUploadPopup",capture:!0,onUp:h().D_,onDown:h().D_,onLeft:h().D_,onRight:h().D_,onBackspace:h().D_,onSelectAll:h().D_,onUndo:h().D_,onRedo:h().D_,onTab:h().D_,onUntab:h().D_,onPaste:oe&&null===N?function(e){e.preventDefault(),me(e.clipboardData.getData("text/plain"))}:h().D_,children:(0,c.jsxs)("div",{style:xe.wrapper,children:[ve,je,Ce,be,Se,ke,Ae,Me]})})})}function K(e){const t=(0,n().v3)(),o=(0,g().tz)(),[s,a]=(0,i.useState)(null),{onFileChanged:l,image:p,isSavingAsCustomEmoji:m,largeEmoji:h,hideReplaceButton:v,setError:j,disabled:y}=e;(0,i.useEffect)((()=>{if(null!==p)if("file"===p.type)if(p.file instanceof File){const e=new FileReader;e.onload=e=>{e.target&&"string"==typeof e.target.result&&a(e.target.result)},e.readAsDataURL(p.file)}else p.file.dataURL&&a(p.file.dataURL);else"url"===p.type?a(p.url):(0,f().HB)(p);else a(null)}),[p]);const S=(0,r().IS)((e=>({uploadIcon:{width:19,height:19,marginRight:8,color:e.icon.secondary},wrapper:{marginTop:20,display:"flex",flexDirection:"column",alignItems:"stretch"},dropZone:{backgroundColor:e.inputBackground,borderRadius:4},dropZoneInnerEmpty:{height:"100%",display:"flex",flexDirection:"row",padding:14,color:e.text.secondary,justifyContent:"center"},dropZoneInnerWithEmoji:{display:"flex",flexDirection:"column",padding:h?16:12,...!v&&{paddingBottom:4},alignItems:"center",gap:4},buttonCaption:{fontSize:x().J.UISmall.desktop,color:e.text.secondary,fontWeight:x().Wy.medium},buttonIcon:{fill:e.icon.secondary,marginRight:4},previewLabel:{fontSize:x().J.UISmall.desktop,color:e.text.secondary,marginBottom:4},emojiContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:6},emojiImage:{width:h?80:48,height:h?80:48,padding:h?6:8,borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:e.darkDividerColor,objectFit:m?"contain":"cover"},darkBackground:{background:e.primaryBlack},lightBackground:{background:e.white}})),[m,h,v]),A=(0,i.useCallback)((e=>{j(null),l(e??null)}),[l,j]),M=(0,i.useCallback)((async()=>{const e=await C().dA({environment:t,supportsMobileNativeFileUpload:!1,multiple:!1,accept:"image/jpeg, image/png, image/gif, image/webp, image/avif, image/svg+xml"});e.length&&((0,R().B7)({fileMimeType:e[0].type,allowedType:R().Dn})?A(e[0]):j(O.fileUploadImageError))}),[A,j,t]);return(0,c.jsx)("div",{style:S.wrapper,children:(0,c.jsx)(k().V,{type:R().Dn,style:S.dropZone,dropTargetKey:"customEmoji",onDropFile:e=>{"invalidFileDrop"!==e.type?(j(null),e.file&&A(e.file)):j(O.fileUploadImageError)},disabled:y,children:s?(0,c.jsxs)("div",{style:S.dropZoneInnerWithEmoji,children:[(0,c.jsx)("div",{style:S.previewLabel,children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.preview.label",defaultMessage:"Preview"})}),(0,c.jsxs)("div",{style:S.emojiContainer,children:[(0,c.jsx)("img",{style:{...S.emojiImage,...S.lightBackground},src:s,alt:"Light Mode Image"}),(0,c.jsx)("img",{style:{...S.emojiImage,...S.darkBackground},src:s,alt:"Dark Mode Image"})]}),!v&&(0,c.jsx)(b().p,{icon:e=>(0,u().h)({...e,...S.buttonIcon}),onClick:M,"aria-label":o.formatMessage(O.uploadReplaceButton),disabled:y,disabledFeedback:y,children:(0,c.jsx)("div",{style:S.buttonCaption,children:o.formatMessage(O.uploadReplaceButton)})})]}):(0,c.jsxs)(b().p,{style:S.dropZoneInnerEmpty,onClick:M,disabled:y,disabledFeedback:y,children:[d(S.uploadIcon),(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.uploadButton.label",defaultMessage:"Upload an image"})]})})})}const q=function(){const{open:e,originRect:t,entrypoint:i}=(0,s().K8)((()=>H().A.state.open?{open:!0,originRect:H().A.state.originRect,entrypoint:H().A.state.entrypoint}:{open:!1,originRect:void 0,entrypoint:void 0}),[]),n=(0,s().K8)((()=>{if(H().A.state.open)return H().A.state.uploadFileEventHandlers}),[]);return(0,c.jsx)(o(443252).Ay,{popupType:o(466321).n.Popup,open:e,originRect:t,placementToOrigin:U().W.Bottom,alignmentToOrigin:U().C.Start,onDismiss:()=>H().A.dismiss(),onClosed:()=>H().A.reset(),render:()=>(0,c.jsx)(N,{allowUrlPaste:!1,largeEmoji:!1,showTitle:!0,confirmToAdd:!1,entrypoint:i,uploadFileEventHandlers:n}),sameWidthAsOrigin:!1})};function $(e){let{name:t}=e;return(0,c.jsx)(g().sA,{id:"editCustomEmoji.success",defaultMessage:"{name} has been edited",values:{name:t}})}function G(e){let t=e;const o=e.lastIndexOf(".");-1!==o&&(t=e.slice(0,o));const i=new RegExp(`[^${Z}]`,"gu");return t.toLocaleLowerCase().replace(i,"-")}},217324:(e,t,o)=>{o.d(t,{A:()=>s});var i=o(242343),n=()=>o(803290);function s(e){let{render:t,threshold:o,onSwipeLeft:s,onSwipeRight:r,onSwipeDown:a,onSwipeUp:l}=e;const c=(0,i.useRef)(),d=(0,i.useRef)();return(0,n().K8)((()=>t({onTouchStart:e=>{c.current=e.touches[0].clientX,d.current=e.touches[0].clientY},onTouchMove:e=>{if(void 0===c.current)return;const t=o||120,i=c.current-e.touches[0].clientX;if(i>t&&s&&(s(),c.current=void 0),i<-1*t&&r&&(r(),c.current=void 0),void 0===d.current)return;const n=d.current-e.touches[0].clientY;n<-1*t&&a&&(a(),d.current=void 0),n>t&&l&&(l(),d.current=void 0)},onTouchEnd:()=>{c.current=void 0,d.current=void 0},onTouchCancel:()=>{c.current=void 0,d.current=void 0}})),[t,o,s,r,a,l])}},329144:(e,t,o)=>{o.d(t,{A:()=>r});o(362833),o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601),o(403517);const i={value:-1,refetch:!1};class n extends(()=>o(967203))().U{constructor(e,t){super(e,t),this.emitDataMapStore=void 0,this.emitDataMapStore=o(129044).default.createValue({})}getData(e,t){var o;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.keyFn(t);s in this.emitDataMapStore.state||(this.emitDataMapStore.state[s]={...i},this.emitDataMapStore.emit());const r=n||this.emitDataMapStore.state[s].refetch||void 0===(null===(o=this.storeMap[s])||void 0===o?void 0:o.state);return this.emitDataMapStore.state[s].refetch=!1,super.getData(e,t,r)}getDataWithoutRefetch(e,t){const o=this.keyFn(t);return o in this.emitDataMapStore.state||(this.emitDataMapStore.state[o]={...i},this.emitDataMapStore.emit()),super.getData(e,t,!1)}emit(e,t){const o=this.keyFn(e),n=this.emitDataMapStore.state[o].value;t!==n&&n!==i.value&&(this.emitDataMapStore.state[o].refetch=!0),this.emitDataMapStore.state[o].value=t;const s={...this.emitDataMapStore.state[o]};this.emitDataMapStore.setState({...this.emitDataMapStore.state,[o]:s})}getKeys(){return Object.keys(this.emitDataMapStore.state)}}const s=new n((e=>{let{spaceId:t}=e;return t}),(async function(e,t){const i=await o(818369).callApi({eventName:"getCustomEmojisForSpace",environment:e,data:t,headers:(0,o(519423).WS)({spaceId:t.spaceId})});if("failed"===i.type)return;const n={pointers:[],names:new Set,lastFetchedBy:e.currentUser.id},s=o(220574).RecordMapWithRole.create(i.data.recordMap),r=[];for(const{pointer:a}of s.getByTable(o(367799).e)){const e=s.getModel(a);if(!e)continue;const t=e.getName();n.names.add(t),r.push({pointer:a,name:t})}return n.pointers=r.sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>e.pointer)),n}));o(996094).exposeDebugValue("CustomEmojisStore",s);const r=s},345022:(e,t,o)=>{o.d(t,{A:()=>n});o(242343);var i=o(163643);const n=function(e){let{style:t,styleParentContainer:n,isTriColored:s}=e;const r=(0,o(653998).tz)();return(0,i.jsxs)("div",{"aria-valuetext":r.formatMessage({id:"loadingDots.label",defaultMessage:"Loading..."}),role:"progressbar",className:"loading-dots",style:{...n},children:[(0,i.jsx)("div",{className:"loading-dot",style:{...t,...s&&{backgroundColor:"#F6C050"}}}),(0,i.jsx)("div",{className:"loading-dot",style:{...t,...s&&{backgroundColor:"#ED6A5F"}}}),(0,i.jsx)("div",{className:"loading-dot",style:{...t,...s&&{backgroundColor:"#5F9CDB"}}})]})}},383041:(e,t,o)=>{o.d(t,{A:()=>g});o(362833),o(403517);var i=o(242343),n=()=>o(237385),s=()=>o(174114),r=()=>o(758989),a=()=>o(653998),l=()=>o(723817),c=()=>o(858023),d=o(163643);const u=(0,a().YK)({selectColorLabel:{defaultMessage:"Set color as {color}",id:"horizontalColorPicker.selectColor"}});function p(e){const{parent:t,currentColor:i,onColorSelected:l,additionalItems:u}=e,p=(0,n().v3)(),g=(0,a().tz)(),h=(0,s().IS)((()=>({menu:{padding:4,...e.menuStyle}})),[e.menuStyle]),f=r().v3.map((e=>({key:e,action:o=>{t.close(),l({environment:p,color:e})},render:t=>(0,d.jsx)(o(103151).A,{renderTooltip:()=>g.formatMessage(r().jd[e]),placement:o(907721).W.Bottom,render:o=>(0,d.jsx)(m,{ref:t.ref,color:e,tooltipEvents:o,menuListProps:t,currentColor:i})})})));return u&&f.push(...u),(0,d.jsx)(o(441292).A,{debugName:"ColorPicker",capture:!0,allowEsc:!0,children:(0,d.jsx)(c().Ay,{type:c().Oh.Grid,getItemsPerRowForSection:()=>5,initialFocus:i?Math.max(r().v3.indexOf(i),0):10,sections:[{key:"variations",render:e=>(0,d.jsx)("div",{...e}),items:f}],renderRow:(t,o)=>{var i;return(0,d.jsx)("div",{role:"row",style:{display:"flex",padding:4,gap:4,justifyContent:"center",...(null===(i=e.rowStyle)||void 0===i?void 0:i.call(e,o))??{}},children:t},o)},style:h.menu})})}const m=i.forwardRef((function(e,t){const{color:p,tooltipEvents:m,menuListProps:g,currentColor:h}=e,f=(0,a().tz)(),x=(0,n().Y0)(),[v,j]=(0,i.useState)(!1),{isMenuListFocusVisible:y}=(0,i.useContext)(c().VU),C=g.focused&&y,b=(0,s().IS)((e=>({colorPickerItem:{display:"grid",gridTemplateColumns:"1fr",cursor:void 0!==h?"pointer":void 0},icon:{height:x.isMobile?24:16,width:x.isMobile?24:16,stroke:r().l8[e.mode][p],fill:r().l8[e.mode][p]},iconButton:{width:x.isMobile?l().UA:22,height:x.isMobile?l().UA:22,gridRowStart:1,gridColumnStart:1,...C&&{boxShadow:e.outlineBlueInputBoxShadow}},selectedCircleWrapper:{width:x.isMobile?l().UA:22,height:x.isMobile?l().UA:22,gridRowStart:1,gridColumnStart:1,display:"flex",alignItems:"center",justifyContent:"center"},selectedCircle:{width:x.isMobile?30:22,height:x.isMobile?30:22,borderRadius:"100%",border:`1.5px solid ${r().l8[e.mode][p]}`,opacity:v?.5:1}})),[x.isMobile,v,p,C,h]),S=(0,i.useCallback)((e=>{j(!0),g.onMouseEnter&&g.onMouseEnter(e),m.onMouseEnter&&m.onMouseEnter(e)}),[g,m]),k=(0,i.useCallback)((e=>{j(!1),m.onMouseLeave&&m.onMouseLeave(e)}),[m]);return(0,d.jsxs)("div",{style:b.colorPickerItem,...(0,o(906230).A)(m,{onClick:void 0!==h?g.onClick:void 0}),onMouseEnter:S,onMouseLeave:k,children:[(0,d.jsx)(o(356813).A,{ref:t,disabled:void 0===h,ariaLabel:f.formatMessage(u.selectColorLabel,{color:f.formatMessage(r().jd[p])}),style:b.iconButton,icon:o(430340).H,iconStyle:b.icon,hovered:v,role:g.role,id:g.id,disallowTabbing:!0}),(h===p||void 0!==h&&(v||C))&&(0,d.jsx)("div",{style:b.selectedCircleWrapper,children:(0,d.jsx)("div",{style:b.selectedCircle})})]})})),g=i.memo(p)},430340:(e,t,o)=>{o.d(t,{H:()=>n});o(242343);var i=o(163643);const n=(0,o(680369).wt)("colorPickerCircle",{viewBox:"0 0 32 32",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"16",cy:"16",r:"14",strokeWidth:"3",fill:"none"}),(0,i.jsx)("circle",{cx:"16",cy:"16",r:"14",opacity:"0.9"})]})})},437783:(e,t,o)=>{o.d(t,{A:()=>m});o(403517);var i=o(242343),n=()=>o(237385),s=()=>o(803290),r=()=>o(829090),a=()=>o(273520),l=()=>o(858023),c=()=>o(906230),d=()=>o(723817),u=o(163643);const p=(0,i.forwardRef)((function(e,t){const{variations:i,emoji:n,focused:r,onClick:a,onMouseEnter:l,insertEmoji:c,showTooltip:d,id:p,role:m}=e,h=(0,s().uB)(void 0,o(962373).A);return void 0===(0,s().K8)((()=>(0,o(441165).bb)()),[])&&i&&i.length>0?(0,u.jsx)(x,{role:m,id:p,buttonPopupStore:h,emoji:n,focused:r,insertEmoji:c,onClick:a,onMouseEnter:l,showTooltip:d,variations:i,ref:t}):(0,u.jsx)(g,{role:m,id:p,emoji:n,focused:r,onClick:a,onMouseEnter:l,ref:t,showTooltip:d})})),m=p,g=(0,i.forwardRef)((function(e,t){let{events:a,emoji:p,focused:m,onClick:g,onMouseEnter:h,showTooltip:f,id:x,role:v}=e;const j=(0,n().v3)(),y=r().qg.isCustomEmojiString(p),{isMenuListFocusVisible:C}=(0,i.useContext)(l().VU),b=m&&C,S=(0,o(174114).IS)((e=>({emojiButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,...j.device.isMobile?{width:d().UA,height:d().UA,fontSize:d().ru}:{width:d().Sq,height:d().Sq,fontSize:d().Zl},...b&&{boxShadow:e.outlineBlueInputBoxShadow}}})),[j.device.isMobile,b]),k=S.emojiButton.fontSize,A=(0,s().K8)((()=>{if(y){const e=r().qg.fromCustomEmojiString(p);return(0,o(754421).nA)({parentStore:void 0,pointer:e.pointer})}}),[p,y]),M=(0,s().K8)((()=>y?null==A?void 0:A.getName():r().Yf(p,o(284320).A.state)),[A,p,y]);return(0,u.jsx)(o(103151).A,{forceVisibleState:!!b||void 0,placement:b?o(907721).W.Bottom:void 0,allowHover:f,renderTooltip:()=>M,closeDelay:0,disableTooltip:!f,render:e=>(0,u.jsx)(o(126451).A,{role:v,ref:t,id:x,focused:m,onClick:g,...(0,c().A)(a||{},(0,c().A)({onMouseEnter:h},e)),ignoreLocalHoverState:!0,style:S.emojiButton,disallowTabbing:!0,children:y?A?(0,u.jsx)(o(978483).A,{size:k,emojiStore:A}):null:(0,u.jsx)(o(479813).A,{size:k,char:p})},p)})}));function h(e){let{props:t}=e;return(0,u.jsx)("div",{style:{display:"flex",padding:4},children:t.children})}function f(e){const{parent:t,emoji:i,variations:s,insertEmoji:r}=e,a=(0,n().v3)(),c=(s&&s.length>0?[i,...s]:[i]).map(((i,n)=>({key:i,action:e=>{t.close(),(null==s?void 0:s.length)===o(763555).aI&&(0,o(451198).l)({environment:a,skinTone:n}),r(i,n)},render:t=>(0,u.jsx)(p,{...e,...t,emoji:i,variations:void 0,showTooltip:!1})})));return(0,u.jsx)(o(441292).A,{debugName:"EmojiPickerMenuItem",capture:!0,allowEsc:!0,children:(0,u.jsx)(l().Ay,{type:l().Oh.Horizontal,initialFocus:0,sections:[{key:"variations",render:e=>(0,u.jsx)(h,{props:e}),items:c}]})})}const x=(0,i.forwardRef)((function(e,t){const{emoji:n,focused:s,onClick:r,onMouseEnter:l,showTooltip:c,variations:d,insertEmoji:p,buttonPopupStore:m,id:h,role:x}=e,v=(0,i.useCallback)((()=>function(e){e.setState({...e.state,open:!1})}(m)),[m]),j=(0,i.useCallback)((e=>function(e,t){var o;null===(o=e.preventDefault)||void 0===o||o.call(e),t.setState({...t.state,open:!0})}(e,m)),[m]);return(0,u.jsx)(o(655830).A,{debugName:"EmojiPickerMenuItem",capture:s,onEnter:j,onEsc:v,children:(0,u.jsx)(a().Ay,{buttonPopupStore:m,popupType:a().z7.Popup,renderOrigin:e=>(0,u.jsx)(g,{ref:t,emoji:n,focused:s,onClick:r,onMouseEnter:l,showTooltip:c,events:e,id:h,role:x}),render:e=>(0,u.jsx)(f,{parent:e,emoji:n,variations:d,insertEmoji:p})})},n)}))},451198:(e,t,o)=>{o.d(t,{A:()=>C,l:()=>b});o(403517),o(242343);var i=()=>o(237385),n=()=>o(803290),s=()=>o(763555),r=()=>o(653998),a=()=>o(84543),l=()=>o(658388),c=()=>o(273520),d=()=>o(441292),u=()=>o(401382),p=()=>o(858023),m=()=>o(103151),g=()=>o(906230),h=()=>o(907721),f=()=>o(485966),x=()=>o(962373),v=()=>o(749886),j=()=>o(437783),y=o(163643);function C(){const e=(0,n().K8)((()=>{var e;return null===(e=f().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.emoji_picker_skin_tone}),[]),t=(0,i().v3)(),o=(0,n().uB)(void 0,x().A);return(0,y.jsx)(m().A,{renderTooltip:()=>(0,y.jsx)(r().sA,{defaultMessage:"Select skin tone",id:"emojiPickerSkinTonePicker.selectSkinTone"}),placement:h().W.Bottom,render:i=>(0,y.jsx)(c().Ay,{buttonPopupStore:o,popupType:c().z7.Popup,renderOrigin:t=>(0,y.jsx)(u().KF,{icon:()=>(0,y.jsx)("div",{style:{paddingLeft:3,paddingRight:3},children:void 0!==e?s().pi[e]:"✋"}),style:{fontSize:20,border:"none"},...(0,g().A)(t,i)}),render:o=>function(e){const{parent:t,environment:o,currentSkinTone:i}=e,n=s().pi.map(((e,i)=>({key:e,action:()=>{t.close(),b({environment:o,skinTone:i})},render:t=>(0,y.jsx)(j().A,{...t,insertEmoji:()=>{},emoji:e,variations:void 0,showTooltip:!1})})));return(0,y.jsx)(d().A,{debugName:"EmojiPickerSkinTonePicker",capture:!0,allowEsc:!0,children:(0,y.jsx)(p().Ay,{type:p().Oh.Horizontal,initialFocus:i,sections:[{key:"variations",render:e=>(0,y.jsx)("div",{style:{display:"flex",padding:4},...e}),items:n}]})})}({parent:o,environment:t,currentSkinTone:e}),...i})})}function b(e){const{environment:t,skinTone:o}=e,{currentUserSettingsStore:i}=f().default.state;i&&(void 0!==o&&v().A.cleanupSkinTonedRecents(o),a().createAndCommit({userAction:"mediaPicker.setEmojiSkinTone",environment:t,canUndo:!0,perform:e=>{l().mJ({userSettingsStore:i,transaction:e,data:{emoji_picker_skin_tone:o}})}}))}},700659:(e,t,o)=>{o.d(t,{c:()=>n});o(242343);var i=o(163643);const n=(0,o(680369).wt)("emojiRecents",{viewBox:"0 0 28 28",svg:(0,i.jsx)("path",{d:"M14 22.4297C9.58594 22.4297 5.92969 18.7812 5.92969 14.3594C5.92969 9.94531 9.57812 6.28906 13.9922 6.28906C18.4141 6.28906 22.0703 9.94531 22.0703 14.3594C22.0703 18.7812 18.4141 22.4297 14 22.4297ZM14 20.8438C17.5938 20.8438 20.4844 17.9531 20.4844 14.3594C20.4844 10.7656 17.5859 7.88281 13.9922 7.88281C10.3984 7.88281 7.52344 10.7656 7.52344 14.3594C7.52344 17.9531 10.4062 20.8438 14 20.8438ZM10.0469 15.3281C9.69531 15.3281 9.42969 15.0547 9.42969 14.7109C9.42969 14.3594 9.69531 14.0938 10.0469 14.0938H13.375V9.58594C13.375 9.24219 13.6484 8.96875 13.9922 8.96875C14.3438 8.96875 14.6172 9.24219 14.6172 9.58594V14.7109C14.6172 15.0547 14.3438 15.3281 13.9922 15.3281H10.0469Z"})})},722793:(e,t,o)=>{o.d(t,{HR:()=>Mt,aD:()=>vt,Ay:()=>ut});o(725707),o(500234),o(403517);var i=o(242343),n=()=>o(237385),s=()=>o(803290),r=()=>o(174114),a=()=>o(185912),l=()=>o(758989),c=()=>o(680369),d=o(163643);const u=(0,c().wt)("giphyLogo",{viewBox:"0 0 12 12",svg:(0,d.jsx)("path",{d:"M 1.332031 0 L 1.332031 12 L 10.667969 12 L 10.667969 4.332031 L 9.332031 5.667969 L 9.332031 10.667969 L 2.667969 10.667969 L 2.667969 1.335938 L 5 1.335938 L 6.332031 0 Z M 6.667969 0 L 6.667969 4 L 10.667969 4 L 10.667969 2.667969 L 9.332031 2.667969 L 9.332031 1.335938 L 8 1.335938 L 8 0 "})});var p=()=>o(668657);const m=(0,c().wt)("shuffle",{viewBox:"0 0 16 16",svg:(0,d.jsx)("path",{d:"M0.162354 11.7542C0.162354 12.1365 0.458984 12.4067 0.867676 12.4067H2.41675C3.55054 12.4067 4.21631 12.0771 4.99414 11.1609L6.58936 9.26245L8.16479 11.1279C8.9624 12.0771 9.71387 12.4067 10.8477 12.4067H12.166V13.9954C12.166 14.3118 12.3572 14.4963 12.6736 14.4963C12.8186 14.4963 12.9504 14.4436 13.0625 14.3579L15.6465 12.2024C15.897 11.998 15.897 11.6816 15.6465 11.4641L13.0625 9.30859C12.9504 9.21631 12.8186 9.17017 12.6736 9.17017C12.3572 9.17017 12.166 9.34814 12.166 9.67114V11.095H10.8872C10.1094 11.095 9.60181 10.8379 9.0415 10.1655L7.43311 8.2605L9.0481 6.34888C9.62158 5.66992 10.083 5.42603 10.8477 5.42603H12.166V6.87622C12.166 7.19263 12.3572 7.3772 12.6736 7.3772C12.8186 7.3772 12.9504 7.32446 13.0625 7.23877L15.6465 5.08325C15.897 4.87891 15.897 4.5625 15.6465 4.34497L13.0625 2.18945C12.9504 2.09717 12.8186 2.05103 12.6736 2.05103C12.3572 2.05103 12.166 2.229 12.166 2.552V4.10767H10.8542C9.68091 4.10767 8.9624 4.43066 8.12524 5.43262L6.58936 7.25854L4.99414 5.36011C4.21631 4.44385 3.50439 4.11426 2.3772 4.11426H0.867676C0.458984 4.11426 0.162354 4.38452 0.162354 4.76685C0.162354 5.14917 0.458984 5.42603 0.867676 5.42603H2.32446C3.06274 5.42603 3.5769 5.68311 4.1438 6.35547L5.74561 8.2605L4.1438 10.1655C3.5769 10.8379 3.10229 11.095 2.37061 11.095H0.867676C0.458984 11.095 0.162354 11.3718 0.162354 11.7542Z"})});var g=()=>o(403026);const h=(0,c().wt)("unsplashLogo",{viewBox:"0 0 12 12",svg:(0,d.jsx)("path",{d:"M3.75 3.375V0H8.25V3.375H3.75ZM8.25 5.25H12V12H0V5.25H3.75V8.625H8.25V5.25Z"})});var f=()=>o(653998),x=()=>o(401548),v=()=>o(220413),j=()=>o(975392),y=()=>o(356214),C=()=>o(505381),b=()=>o(700380),S=()=>o(927999),k=()=>o(575015),A=()=>o(663539),M=(o(362833),()=>o(409211)),w=()=>o(126996),I=()=>o(485966),P=()=>o(413871),E=()=>o(983050),L=()=>o(868199),T=()=>o(205670),B=()=>o(636045);function R(e){const{placeholder:t,onSubmit:o}=e,n=(0,r().IS)((e=>({wrap:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:6,padding:"6px 10px",marginLeft:8,marginRight:8,overflow:"hidden",fontSize:14,..."dark"===e.mode?{backgroundColor:e.inputBackground}:{}},text:{minHeight:60},placeholder:{minHeight:60}})),[]),s=(0,i.useCallback)((e=>{if(o&&!e.shiftKey)o();else{if("editing"!==T().default.state.mode)return}}),[o]);return(0,d.jsx)("div",{style:n.wrap,className:E().CCX,children:(0,d.jsx)(B().A,{placeholder:t,disabled:!1,store:e.store,style:n.text,placeholderStyle:n.placeholder,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onEnter:s,disableMobileActionBar:!1,disabledMentionTypes:{reminder:!0},disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,inPageFind:L().Os.none})})}var D=()=>o(725460),F=()=>o(88271),U=()=>o(671622);function W(e){const{tab:t}=e,o=(0,n().v3)(),{store:s}=(0,w().AI)({initialValue:void 0,onChange:j().D_}),a=(0,r().IS)((e=>({desktopStyle:{marginTop:8,marginBottom:6},sparkleStyle:{width:16,height:16,marginRight:4},captionStyle:{textAlign:o.device.isMobile?"left":"center"}})),[o.device.isMobile]),l=(0,i.useCallback)((async()=>{const o=s.getValue();if(!o)return;const i=[];for(const e of o){var n;if("‣"===e[0]&&null!==(n=e[1])&&void 0!==n&&n.length){if("d"===e[1][0][0]){const t=e[1][0][1].start_date;i.push(t)}else if("u"===e[1][0][0]){const t=e[1][0][1],{currentSpaceStore:o}=I().default.state;if(!o)return{users:[],bots:[]};const n=P().LU.createChildStore(o,{table:M().oo,id:t});await n.load();const s=n.getEmail();i.push(s||"")}}else i.push(e[0])}const r=i.join(""),a=t.integration;if(r){e.store.setState({...e.store.state,loading:!0});const o=await t.getResults(r,a);e.store.setState({...e.store.state,loading:!1,result:o.results})}}),[s,e.store,t]);return(0,d.jsxs)("div",{children:[(0,d.jsx)(F().A,{desktopStyle:a.desktopStyle,children:(0,d.jsx)(R,{placeholder:e.placeholder,onSubmit:l,store:s})}),(0,d.jsx)(F().A,{children:(0,d.jsx)(U().A,{onClick:l,title:t.buttonText||(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f().sA,{defaultMessage:"Ask",id:"mediaPicker.aiSourcePickerTab.askButtonText"}),(0,d.jsx)("div",{children:(0,g().X)(a.sparkleStyle)})]}),fullWidth:e.isSmallWidth})}),t.caption&&(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:t.caption,style:a.captionStyle})]})}var H=()=>o(921637),z=()=>o(209684),_=()=>o(535906),V=()=>o(412576),O=()=>o(516267),Z=()=>o(401382),N=()=>o(345022),K=()=>o(286404),q=()=>o(951540),$=()=>o(103151),G=()=>o(23082),Y=()=>o(207762),J=()=>o(927685),Q=()=>o(451198);var X=()=>o(342285),ee=()=>o(640979),te=()=>o(482936),oe=()=>o(907721),ie=()=>o(129044);class ne extends ie().default{getInitialState(){return{inputValue:"",focus:!1,result:void 0,loading:!1,hover:""}}}const se=ne;class re extends ie().default{getInitialState(){return{allIcons:{},recentIcons:[],loadIconCount:0}}}const ae=new re;var le=()=>o(862142),ce=()=>o(404042),de=()=>o(111826),ue=()=>o(305043),pe=()=>o(801802),me=()=>o(126451),ge=()=>o(392968),he=()=>o(283992),fe=()=>o(477784);function xe(e){let{pageCover:t,tab:o}=e;const{coverUrl:n,title:s,subtitle:a,position:l}=t,c=(0,r().IS)((e=>({container:{width:"25%",padding:3},tooltip:{maxWidth:180,whiteSpace:"normal"},title:{color:e.text.contrastPrimary},subtitle:{color:e.text.contrastSecondary},buttonHover:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:`center ${100*(l||0)}%`,borderRadius:4}})),[l]),u=(0,i.useCallback)((()=>{o.onChange({url:n,position:l})}),[o,n,l]);return(0,d.jsx)("div",{style:c.container,children:(0,d.jsx)($().A,{originGap:0,placement:oe().W.Bottom,delayThreshold:600,renderTooltip:()=>(0,d.jsxs)("div",{style:c.tooltip,children:[(0,d.jsx)("span",{style:c.title,children:fe().A.formatMessage(s)})," ",(0,d.jsx)("span",{style:c.subtitle,children:a&&fe().A.formatMessage(a)})]}),render:e=>(0,d.jsx)(me().A,{hoveredStyle:c.buttonHover,...e,onClick:u,children:(0,d.jsx)(he().A,{url:n,width:200,isAuthenticated:!1,render:(e,t)=>t&&(0,d.jsx)(ge().Ay,{src:t,style:c.imageBox})})})})})}const ve=function(e){let{tab:t}=e;const[n,s]=(0,i.useState)({}),[a,l]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(async()=>{l(!0),await o(403328).f.load().then((e=>{s(e),l(!1)}))})()}),[]);const c=(0,pe().b0)(),u=(0,r().IS)((e=>({container:{paddingBottom:8},groupTitle:{marginLeft:-5},loader:{height:300}})),[]);return a?(0,d.jsx)("div",{style:u.loader,children:(0,d.jsx)(o(473096).A,{})}):(0,d.jsx)("div",{style:u.container,children:Object.keys(n).map((e=>{const i=n[e];return(0,d.jsx)(F().A,{title:(0,d.jsx)(o(579494).A,{style:u.groupTitle,href:i.url,external:!0,children:(0,d.jsx)(z().p,{isGray:!0,size:"xs",children:fe().A.formatMessage(i.title)})}),noTextOverflow:!0,children:(0,d.jsx)("div",{style:c.galleryWrap,children:i.items.map(((e,o)=>(0,d.jsx)(xe,{pageCover:e,tab:t},o)))})},e)}))})};var je=()=>o(818369),ye=()=>o(966789),Ce=()=>o(35462),be=()=>o(611824),Se=()=>o(359441);const ke=(0,f().YK)({giphyPlaceholder:{id:"mediaPicker.giphyPlaceholder.text",defaultMessage:"Search GIPHY"}});function Ae(e){const{tab:t,results:o,ready:n,isSmallWidth:s,giphyRandomId:a}=e,l=(0,r().IS)((e=>({loading:(0,pe().$n)(),captionMenuItem:{textAlign:s?"left":"center",color:e.text.secondary}})),[s]);return n?!o||o&&!o.length?(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(f().sA,{defaultMessage:"No results found.",id:"mediaPicker.giphy.noResultsText"}),style:l.captionMenuItem}):(0,d.jsxs)(i.Fragment,{children:[o.map(((e,o)=>(0,d.jsx)(Me,{tab:t,image:e,giphyRandomId:a},o))),(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(f().sA,{defaultMessage:"Search to find more results.",id:"mediaPicker.giphy.searchText"}),style:l.captionMenuItem})]}):(0,d.jsx)("div",{style:l.loading,children:(0,d.jsx)(ye().A,{})})}function Me(e){var t;let{tab:o,image:s,giphyRandomId:a}=e;const l=(0,n().v3)(),{device:c}=l,u=(0,r().IS)((e=>({container:{width:c.isMobile?"33%":"25%",padding:3},hoveredButton:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:4},label:{marginTop:2,marginBottom:4}})),[c.isMobile]),p=(0,i.useCallback)((async()=>{var e;if(o.onChange({url:s.imageUrl}),null!==(e=s.analytics)&&void 0!==e&&e.onclick)try{var t;await je().callApi({eventName:"postGiphyAnalytics",environment:l,data:{url:null===(t=s.analytics)||void 0===t?void 0:t.onclick.url,timestamp:Date.now(),random_id:a}})}catch(i){}}),[l,a,s.imageUrl,o,null===(t=s.analytics)||void 0===t?void 0:t.onclick]);return(0,d.jsxs)("div",{style:u.container,children:[(0,d.jsx)(me().A,{hoveredStyle:u.hoveredButton,onClick:p,children:(0,d.jsx)(ge().Ay,{src:s.thumbUrl,style:u.imageBox})}),(0,d.jsx)(Ce().A,{isSmall:!0,isSecondaryColor:!0,style:u.label,children:(0,d.jsx)(f().sA,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.giphy.byAuthor",values:{authorName:s.authorName||"GIPHY",inlinetextlink:e=>(0,d.jsx)(be().A,{external:!0,href:s.imageUrl,children:e})}})})]},s.id)}const we=function(e){let{tab:t,isSmallWidth:o}=e;const[s,r]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),c=(0,n().v3)(),{device:u}=c,p=(0,pe().b0)(),m=(0,i.useCallback)((async()=>{if(!j().Im(s))return s;const e=await je().callApi({eventName:"getGiphyRandomId",environment:c,data:{}});return"success"===e.type?(r(e.data.random_id),e.data.random_id):void 0}),[c,s]);return(0,d.jsxs)("div",{style:{paddingBottom:8},children:[(0,d.jsx)(F().A,{desktopStyle:{marginTop:8,marginBottom:6},children:(0,d.jsx)(Z().Ay,{value:a,placeholder:fe().A.formatMessage(ke.giphyPlaceholder),showClearButton:!0,focus:!u.isMobile||void 0,onChange:e=>l(e.target.value)})}),(0,d.jsx)("div",{style:p.galleryWrap,children:(0,d.jsx)(H().A,{request:a,debounce:Se().tu,performRequest:async e=>{await m();const t=await je().callApi({eventName:"searchGiphyImages",environment:c,data:{query:e,page:0}});if("success"===t.type)return t.data.results;throw t.error},render:(e,i,n)=>(0,d.jsx)(Ae,{tab:t,results:i,ready:n,isSmallWidth:o,giphyRandomId:s})})})]})};o(491955);var Ie=()=>o(269280),Pe=()=>o(829090),Ee=()=>o(162901),Le=()=>o(885237),Te=()=>o(31448),Be=()=>o(858023),Re=()=>o(168980),De=()=>o(814370),Fe=()=>o(210466),Ue=()=>o(723817),We=()=>o(273520),He=()=>o(655830),ze=()=>o(906230),_e=()=>o(962373);const Ve=(0,i.forwardRef)((function(e,t){const{shouldOpenVariations:o,icon:i,focused:n,color:r,onClick:a,onMouseEnter:l,variations:c,hideTooltip:u,insertIcon:p,id:m,role:g}=e,h=(0,s().uB)(void 0,_e().A);return o?(0,d.jsx)(Ke,{ref:t,id:m,icon:i,focused:n,color:r,onClick:a,onMouseEnter:l,variations:c,hideTooltip:u,insertIcon:p,buttonPopupStore:h,role:g}):(0,d.jsx)(Ze,{ref:t,id:m,icon:i,focused:n,color:r,onClick:a,onMouseEnter:l,variations:c,hideTooltip:u,role:g})})),Oe=Ve,Ze=(0,i.forwardRef)((function(e,t){const{events:o,icon:s,focused:a,color:l,onClick:c,onMouseEnter:u,variations:p,hideTooltip:m,id:g,role:h}=e,f=(0,r().DP)(),x=(0,n().v3)(),{isMenuListFocusVisible:v}=(0,i.useContext)(Be().VU),j=a&&v,y=(0,r().IS)((e=>({iconButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,...x.device.isMobile?{width:Ue().UA,height:Ue().UA,fontSize:Ue().ru}:{width:Ue().Sq,height:Ue().Sq,fontSize:Ue().Zl},...j&&{boxShadow:e.outlineBlueInputBoxShadow}},iconImage:{...x.device.isMobile?{width:Ue().ru,height:Ue().ru}:{width:Ue().Zl,height:Ue().Zl}}})),[x.device.isMobile,j]),C=(p.tooltip?p.tooltip:s).replaceAll("-"," ").replaceAll("_"," "),b=`${C} ${l}`,S="dark"===f.mode?p.dark:p.light;return(0,d.jsx)($().A,{forceVisibleState:!!j||void 0,placement:j?oe().W.Bottom:void 0,allowHover:Boolean(s&&!m),disableTooltip:m,renderTooltip:()=>C,closeDelay:0,render:e=>(0,d.jsx)(me().A,{ref:t,ariaLabel:b,id:g,role:h,focused:a,onClick:c,...(0,ze().A)(o||{},(0,ze().A)({onMouseEnter:u},e)),ignoreLocalHoverState:!0,style:y.iconButton,disallowTabbing:!0,children:(0,d.jsx)("img",{alt:b,src:`data:image/svg+xml;utf8,${encodeURIComponent(S[l])}`,style:y.iconImage,onContextMenu:e=>e.preventDefault()})},s)})}));function Ne(e){const{parent:t,icon:i,variations:n,insertIcon:s}=e,a=(0,r().DP)(),c=(0,r().IS)((()=>({variationMenu:{display:"flex",padding:2,gap:1}})),[]),u="dark"===a.mode?n.light:n.dark,p=Object.keys(u).sort(((e,t)=>l().v3.indexOf(e)-l().v3.indexOf(t))).map((o=>{const r=`${i}_${o}`;return{key:r,action:e=>{t.close(),s(`/icons/${r}.svg`)},render:t=>(0,d.jsx)(Ve,{...e,...t,icon:r,color:o,variations:n,shouldOpenVariations:!1,hideTooltip:!0})}}));return(0,d.jsx)(o(441292).A,{debugName:"IconPickerMenuItem",capture:!0,allowEsc:!0,children:(0,d.jsx)(Be().Ay,{type:Be().Oh.Grid,getItemsPerRowForSection:()=>5,initialFocus:0,sections:[{key:"variations",render:e=>(0,d.jsx)("div",{...e}),items:p}],renderRow:(e,t)=>(0,d.jsx)("div",{role:"row",style:c.variationMenu,children:e},t)})})}const Ke=(0,i.forwardRef)((function(e,t){const{icon:o,focused:n,color:s,onClick:r,onMouseEnter:a,variations:l,hideTooltip:c,insertIcon:u,buttonPopupStore:p,id:m,role:g}=e,h=(0,i.useCallback)((()=>function(e){e.setState({...e.state,open:!1})}(p)),[p]),f=(0,i.useCallback)((e=>function(e,t){e.preventDefault(),t.setState({...t.state,open:!0})}(e,p)),[p]),{isMenuListFocusVisible:x}=(0,i.useContext)(Be().VU);return(0,d.jsx)(He().A,{debugName:"IconPickerMenuItem",capture:n&&x,onEnter:f,children:(0,d.jsx)(We().Ay,{buttonPopupStore:p,popupType:We().z7.Popup,renderOrigin:e=>(0,d.jsx)(Ze,{ref:t,id:m,icon:o,focused:n,color:s,onClick:r,onMouseEnter:a,variations:l,hideTooltip:c,events:e,role:g}),render:e=>(0,d.jsx)(He().A,{debugName:"IconPickerMenuItem.VariationMenuComponent",capture:n,onEsc:h,children:(0,d.jsx)(Ne,{parent:e,icon:o,variations:l,insertIcon:u})})})},o)})),qe={display:"flex",flexDirection:"column"},$e="recentIcons",Ge=100,Ye=(0,f().YK)({noResults:{defaultMessage:"No results",id:"iconPicker.noResults.message"}});function Je(e){const{filter:t,enforceIconColor:o,onSubmit:a,menuRef:l,iconLoggingData:c,onNoResults:u,comboboxProps:p}=e,m=(0,n().v3)(),g=(0,r().DP)(),{isDesktop:h,isMobile:x}=(0,n().Y0)(),[v,C]=(0,i.useState)(!0),[b,S]=(0,i.useState)(void 0),{loadIconCount:k,recentIcons:A}=(0,s().O$)(ae),M=(0,s().uB)(void 0,Fe().A),w=(0,s().K8)((()=>{var e;return null===(e=I().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.icon_picker_color}),[]),P=(0,ee().Tf)(),E=(0,s().K8)((()=>Math.floor((0,pe().so)(m,l,P))),[m,l,P]),L=(0,s().K8)((()=>(0,pe().uu)(m)),[m]);(0,Ie().l)((()=>{const e=Le().A.get($e);ae.update((t=>({...t,recentIcons:e||[]})))}));const[T]=(0,Ee().Yb)((async()=>{try{const e=await async function(e,t,o){if(!j().Im(o.allIcons))return o.allIcons;const i=await(0,De().default)({environment:t,url:e,method:"GET",format:"json",mode:"cors"});if("success"===i.type)return ae.setState({...o,allIcons:i.data}),i.data;throw i.error}("/icons/all",m,ae.state);S(e),C(!1)}catch(e){throw e}}),[m]),B=(0,i.useMemo)((()=>Pe().f7(e.filter)??""),[e.filter]),R=(0,i.useCallback)((e=>{const t=function(e){return e.replace("_dark","")}(e);a(t);const o=t.split(/[/_.]/),i=o[2],n=o[3];!function(e,t){const o=Le().A.get($e),i=j().KC([e],o),n=j().s(i,t);Le().A.set($e,n),ae.update((e=>({...e,recentIcons:n})))}(i,Ue().Te*L),c&&y().aU(m,"pick_colored_icon",{icon:i,color:n,...c})}),[m,a,c,L]),U=(0,i.useCallback)(((e,t)=>{const i=o??w,n=`/icons/${`${e}${i?`_${i}`:""}`}.svg`;return{key:n,action:()=>R(n),render:o=>(0,d.jsx)(Oe,{...o,icon:e,color:i??"gray",variations:t,insertIcon:R,shouldOpenVariations:!Boolean(i)})}}),[o,R,w]),W=(0,i.useCallback)((e=>{if(!e)return[];const o=function(e,t){const o=j().oE(Object.keys(e).map((o=>{const i=e[o],n=((null==i?void 0:i.tooltip)??o).replace("-"," "),s=[n,...i.tags],r=s.findIndex((e=>e===t));if(-1!==r)return[0===r?100:50,o];const a=s.findIndex((e=>e.startsWith(t))),l=n.includes(t);return 0!==a&&l?[40,o]:-1!==a?[0===a?80:30,o]:void 0})));return j().Ul(o,(e=>-e[0])).map((e=>e[1]))}(e,t.toLowerCase());return 0===o.length?[]:[{key:"search-results",items:o.map((t=>U(t,e[t]))),render:e=>(0,d.jsx)(F().A,{children:(0,d.jsx)("div",{style:(0,pe().ze)(m,g,P),children:e.children})},e.key)}]}),[t,U,m,g,P]),H=(0,i.useCallback)(((e,t)=>{if(!t)return;let o=[];return o="recent"===e.id?A||[]:Object.keys(t),0!==o.length?{key:e.id,items:o.map((e=>{if(void 0!==t[e])return U(e,t[e])})).filter(Boolean),render:t=>(0,d.jsx)(F().A,{title:e.title,children:(0,d.jsx)("div",{style:(0,pe().ze)(m,g,P),children:t.children})},t.key)}:void 0}),[A,U,m,g,P]),z=(0,i.useCallback)((e=>{const o=j().oE(function(e){return j().oE([!e&&{id:"recent",title:(0,d.jsx)(f().sA,{id:"iconPicker.section.recent",defaultMessage:"Recent"})},!e&&{id:"icons",title:(0,d.jsx)(f().sA,{id:"iconPicker.section.icons",defaultMessage:"Icons"})}])}(t).map((t=>H(t,e))));return t&&B?W(e):o}),[t,B,H,W]),_=(0,i.useCallback)((e=>{const t=z(e);let o=0;for(const i of t)o+=i.items.length;return o}),[z]),V=(0,i.useCallback)((e=>{let t=k;0===k&&(t+=E*L);const o=[],i=z(e);let n=0;for(const s of i){if(!(n+s.items.length<=t)){o.push({...s,items:s.items.slice(0,t-n)});break}o.push(s),n+=s.items.length}return o}),[z,k,E,L]),O=(0,i.useMemo)((()=>({type:Be().Oh.Grid,getItemsPerRowForSection:()=>E,renderRow:(e,t)=>(0,d.jsx)("div",{role:"row",style:{display:"flex"},children:e},t)})),[E]),Z=(0,i.useCallback)((e=>{if(Math.abs(e)<Ge){const{loadIconCount:e,allIcons:t}=ae.state,o=E*L,i=Math.max(o,_(t));ae.setState({...ae.state,loadIconCount:Math.min(i,e+o)})}}),[L,E,_]),N=(0,i.useMemo)((()=>{const e=V(b),t=h&&e.length>0?0:void 0;return"resolved"===T.status&&0===e.length&&(u&&u(),e.push({key:"no results",items:[{key:"no results",action:j().lQ,render:e=>(0,d.jsx)(D().A,{...e,style:{fontWeight:Te().Wy.medium,marginBottom:2,marginLeft:2,height:20,boxSizing:"content-box"},caption:fe().A.formatMessage(Ye.noResults)})}],render:e=>(0,d.jsx)(F().A,{...e})})),(0,d.jsxs)("div",{style:qe,children:[(0,d.jsx)("div",{style:{flexGrow:1},children:(0,d.jsx)(Be().Ay,{...O,store:M,initialFocus:t,sections:e,disableKeyboardArrowWrap:!0,unfocusOnScroll:x,comboboxProps:p})}),(0,d.jsx)(Re().A,{onChange:Z})]})}),[V,b,h,O,M,x,Z,T.status,u,p]);return(0,d.jsxs)("div",{children:[v&&(0,d.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",paddingBottom:"10px"},children:(0,d.jsx)(ye().A,{})}),N]})}var Qe=()=>o(430340),Xe=()=>o(84543),et=()=>o(658388),tt=()=>o(383041),ot=()=>o(725599);const it=(0,f().YK)({selectIconColor:{defaultMessage:"Select icon color",id:"iconPickerColorPicker.selectColor"},selectIconColorWithCurrentColor:{defaultMessage:"Select icon color, {iconColor} selected",id:"iconPickerColorPicker.selectColorWithCurrentColor"},noIconColor:{defaultMessage:"no color",id:"iconPickerColorPicker.noColor"}});function nt(){const e=(0,s().K8)((()=>{var e;return null===(e=I().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.icon_picker_color}),[]),t=(0,f().tz)(),o=(0,n().v3)(),i=(0,r().DP)(),a=(0,n().Y0)(),c=(0,s().uB)(void 0,_e().A);return(0,d.jsx)($().A,{renderTooltip:()=>t.formatMessage(it.selectIconColor),placement:oe().W.Bottom,render:n=>(0,d.jsx)(We().Ay,{preventBlockRenderQueueOnEnter:!0,buttonPopupStore:c,popupType:We().z7.Popup,renderOrigin:o=>(0,d.jsx)(Z().KF,{ariaLabel:t.formatMessage(it.selectIconColorWithCurrentColor,{iconColor:t.formatMessage(e?l().jd[e]:it.noIconColor)}),icon:t=>(0,Qe().H)({...t,stroke:e?l().l8[i.mode][e]:l().l8[i.mode].lightgray,fill:e?l().l8[i.mode][e]:i.lightIconColor}),...(0,ze().A)(o,n)}),render:n=>function(e){const{parent:t,environment:o,currentIconPickerColor:i,theme:n,device:s}=e,r=[];return r.push({key:"askEveryTime",action:()=>{t.close(),st({environment:o,color:void 0})},render:e=>(0,d.jsx)(ot().A,{...e,title:(0,d.jsx)(f().sA,{id:"iconPickerColorPicker.askEveryTime",defaultMessage:"Ask every time"}),onClick:()=>{st(void 0!==i?{environment:o,color:void 0}:{environment:o,color:"gray"})},on:void 0===i,style:{boxShadow:void 0},textWrapperStyle:{marginLeft:s.isMobile?10:6},rightStyle:{marginRight:4}})}),(0,d.jsx)(tt().A,{parent:t,currentColor:i,onColorSelected:st,additionalItems:r,rowStyle:e=>({...e<2&&{opacity:void 0===i?.5:1},...2===e&&{flexDirection:"row-reverse",padding:"4px 0 0",margin:"4px 0 0",borderTop:`1px solid ${n.regularDividerColor}`}}),menuStyle:{padding:"4px 0"}})}({parent:n,environment:o,currentIconPickerColor:e,theme:i,device:a,intl:t})})})}function st(e){const{environment:t,color:o}=e,{currentUserSettingsStore:i}=I().default.state;i&&Xe().createAndCommit({userAction:"mediaPicker.setIconPickerColor",environment:t,canUndo:!0,perform:e=>{const t=void 0!==o?o:null;et().mJ({userSettingsStore:i,transaction:e,data:{icon_picker_color:t}})}})}const rt=(0,f().YK)({unsplashPlaceholder:{id:"mediaPicker.unsplashPlaceholder.text",defaultMessage:"Search for an image…"}});function at(e){const{tab:t,results:o,ready:n,isSmallWidth:s}=e,a=(0,r().IS)((e=>({loading:(0,pe().$n)(),captionMenuItem:{textAlign:s?"left":"center",color:e.text.secondary}})),[s]);return n?!o||o&&!o.length?(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(f().sA,{defaultMessage:"No results found.",id:"mediaPicker.unsplash.noResultsText"}),style:a.captionMenuItem}):(0,d.jsxs)(i.Fragment,{children:[o.map(((e,o)=>(0,d.jsx)(lt,{tab:t,image:e},o))),(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(f().sA,{defaultMessage:"Search to find more results.",id:"mediaPicker.unsplash.searchText"}),style:a.captionMenuItem})]}):(0,d.jsx)("div",{style:a.loading,children:(0,d.jsx)(ye().A,{})})}function lt(e){let{tab:t,image:o}=e;const s=(0,n().v3)(),{device:r}=s,a=(0,i.useCallback)((async()=>{const e=await(0,De().default)({environment:s,url:o.downloadUrl,method:"GET",format:"json"});"success"===e.type&&t.onChange({url:e.data.url})}),[s,o.downloadUrl,t]);return(0,d.jsxs)("div",{style:{width:r.isMobile?"33%":"25%",padding:3},children:[(0,d.jsx)(me().A,{hoveredStyle:{opacity:.85},onClick:a,children:(0,d.jsx)(ge().Ay,{src:o.thumbUrl,style:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:4}})}),(0,d.jsx)(Ce().A,{isSmall:!0,isSecondaryColor:!0,style:{marginTop:2,marginBottom:4},children:(0,d.jsx)(f().sA,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.unsplash.byAuthor",values:{authorName:o.authorName,inlinetextlink:e=>(0,d.jsx)(be().A,{external:!0,href:o.unsplashUrl,children:e})}})})]},o.id)}const ct=function(e){let{tab:t,isSmallWidth:o}=e;const[s,r]=(0,i.useState)(""),a=(0,n().v3)(),{device:l}=a,c=(0,pe().b0)();return(0,d.jsxs)("div",{style:{paddingBottom:8},children:[(0,d.jsx)(F().A,{desktopStyle:{marginTop:8,marginBottom:6},children:(0,d.jsx)(Z().Ay,{value:s,placeholder:fe().A.formatMessage(rt.unsplashPlaceholder),showClearButton:!0,focus:!l.isMobile||void 0,onChange:e=>r(e.target.value)})}),(0,d.jsx)("div",{style:c.galleryWrap,children:(0,d.jsx)(H().A,{request:s,debounce:Se().tu,performRequest:async e=>{const t=await je().callApi({eventName:"searchUnsplashImages",environment:a,data:{query:e,page:0}});if("success"===t.type)return t.data.results;throw t.error},render:(e,i,n)=>(0,d.jsx)(at,{tab:t,results:i,ready:n,isSmallWidth:o})})})]})},dt=(0,f().YK)({embedPlaceholder:{id:"mediaPicker.embedPlaceholder.text",defaultMessage:"Paste in https://…"},filterPlaceholder:{id:"mediaPicker.emojiFilter.text",defaultMessage:"Filter…"},aiSourcePickerPlaceholder:{id:"mediaPicker.githubPlaceholder.text",defaultMessage:"Ask query here"},aiIsFetchingLoader:{id:"mediaPicker.aiIsFetchingLoader.text",defaultMessage:"Ai is fetching"}});const ut=function(e){var t,r;const a=(0,n().v3)(),c=(0,i.useRef)(null),[u,p]=(0,i.useState)(""),[m,g]=(0,i.useState)({inputValue:"",focus:!1}),[h,x]=(0,i.useState)({inputValue:"",focus:!1}),v=(0,s().uB)(void 0,se),[y,C]=(0,o(875878).$)();function b(){const t=e.tabs.find((t=>t.type===e.currentTab));if(!t)return(0,d.jsx)(f().sA,{defaultMessage:"Uh oh! Something went wrong.",id:"mediaPicker.errorMessage"});switch(t.type){case"embed":return(0,d.jsx)(Lt,{isSmallWidth:e.isSmallWidth,embedInputValue:u,setEmbedInputValue:p,tab:t});case"file":return(0,d.jsx)(xt,{isSmallWidth:e.isSmallWidth,onCancel:e.onCancel,tab:t});case"emoji":return(0,d.jsx)(o(34425).p,{onSubmit:t.onChange,filter:m.inputValue||"",isCallout:e.isCallout,iconLoggingData:e.recordIconLoggingData,menuRef:c,onUpload:t.uploadFileEventHandlers,isInline:!1,comboboxProps:C,hideCustomEmoji:e.hideCustomEmoji});case"icon":return(0,d.jsx)(Je,{filter:h.inputValue||"",onSubmit:t.onChange,iconLoggingData:e.recordIconLoggingData,enforceIconColor:t.enforceIconColor,menuRef:c,comboboxProps:C});case"gallery":return(0,d.jsx)(ve,{tab:t});case"unsplash":return(0,d.jsx)(ct,{tab:t,isSmallWidth:e.isSmallWidth});case"giphy":return(0,d.jsx)(we,{tab:t,isSmallWidth:e.isSmallWidth});case"drive":return(0,d.jsx)(wt,{tab:t});case"box":return(0,d.jsx)(bt,{tab:t});case"aiSourcePicker":return(0,d.jsx)(It,{isSmallWidth:e.isSmallWidth,aiSourcePickerStore:v,tab:t});case"custom":return(0,d.jsx)(Et,{isSmallWidth:e.isSmallWidth,onCancel:e.onCancel,embedInputValue:u,setEmbedInputValue:p,tab:t});case"customEmoji":return(0,d.jsx)(o(213454).A,{showTitle:!1,largeEmoji:!0,allowUrlPaste:!0,confirmToAdd:!0,uploadFileEventHandlers:t.uploadFileEventHandlers,onUploadWithoutSaving:t.onUploadWithoutSaving,onCancel:e.onCancel,entrypoint:"upload_tab"});default:(0,o(76394).HB)(t)}}const k=null!=c&&null!==(t=c.current)&&void 0!==t&&t.offsetWidth?((null==c||null===(r=c.current)||void 0===r?void 0:r.offsetWidth)-24)/32:12,{device:A}=a,M=(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(At,{tabs:e.tabs,onDelete:e.onDelete,currentTab:e.currentTab}),(0,d.jsx)(pt,{tabs:e.tabs,currentTab:e.currentTab,onFilterChange:e=>{const t=k*(0,pe().uu)(a);g({...m,inputValue:e.currentTarget.value}),x({...h,inputValue:e.currentTarget.value}),ae.setState({...ae.state,loadIconCount:t})},iconInput:h.inputValue,emojiInput:m.inputValue,onRandomButtonClick:t=>{"emoji"===t.type?function(e,t,o){const{device:i}=o,n=e.find((e=>e.type===t));if(n&&"emoji"===n.type){const e=S().aB();n.onChange(e,{keepVisible:!i.isMobile})}}(e.tabs,e.currentTab,a):function(e,t,o){const{device:i}=e,n=t.find((e=>e.type===o));if(n&&"icon"===n.type){const e=n.enforceIconColor??(null===(s=I().default.state)||void 0===s||null===(s=s.currentUserSettingsStore)||void 0===s||null===(s=s.getSettings())||void 0===s?void 0:s.icon_picker_color),t=`/icons/${j().XM(Object.keys(ae.getState().allIcons))}_${e??j().XM(l().v3)}.svg`;n.onChange(t,{keepVisible:!i.isMobile})}var s}(a,e.tabs,e.currentTab)},comboboxProps:y})]});let w;if(A.isMobile)w={menuType:ee().gu.Modal,title:e.title,header:M,right:(0,d.jsx)(f().sA,{defaultMessage:"Close",id:"mediaPicker.mobileCloseButton.label"}),onClickRight:e.onCancel,left:e.onDelete&&(0,d.jsx)(f().sA,{defaultMessage:"Remove",id:"mediaPicker.mobileRemoveButton.label"}),onClickLeft:e.onDelete};else{w={menuType:ee().gu.Popup,header:M};const t=e.tabs.find((t=>t.type===e.currentTab)),o=t&&"tabHeight"in t?t.tabHeight:void 0;w.width=e.popupWidth||300,w.height=o||e.popupHeight,w.maxHeight=e.maxHeight,w.maxWidth=e.maxWidth}return(0,d.jsx)(o(217324).A,{onSwipeLeft:()=>function(e,t){if(!le().A.state.isActive)return;const o=e.map((e=>e.type)).indexOf(le().A.state.currentTab),i=e[o+1];void 0!==i&&kt(i.type,t)}(e.tabs,a),onSwipeRight:()=>function(e,t){if(!le().A.state.isActive)return;const o=e.map((e=>e.type)).indexOf(le().A.state.currentTab),i=e[o-1];void 0!==i&&kt(i.type,t)}(e.tabs,a),render:e=>(0,d.jsx)(o(935091).A,{...w,...e,className:E().aIQ,innerRef:c,children:b()})})};function pt(e){const t=(0,f().tz)(),{isMobile:o,isAndroid:i}=(0,n().Y0)(),s=(0,ee().Tf)(),r=e.tabs.find((t=>t.type===e.currentTab));if("emoji"===(null==r?void 0:r.type)||"icon"===(null==r?void 0:r.type)){const n="emoji"===r.type?e.emojiInput:e.iconInput,a=()=>e.onRandomButtonClick(r),l=(0,d.jsx)(ht,{tabs:e.tabs,currentTab:e.currentTab,hasRandomButtonOnLeft:!r.hideRandomButton}),c=(0,d.jsx)(Z().Ay,{value:n,placeholder:t.formatMessage(dt.filterPlaceholder),autoFocus:!o||void 0,focusInitial:!o||void 0,showClearButton:!0,inputLeft:(0,d.jsx)(Z().Zf,{icon:p().q}),onChange:e.onFilterChange,right:(0,d.jsxs)("div",{style:{display:"flex"},children:[null!=r&&r.hideRandomButton?void 0:(0,d.jsx)($().A,{renderTooltip:()=>(0,d.jsx)(f().sA,{id:"mediaPicker.emojiTab.random",defaultMessage:"Random"}),placement:oe().W.Bottom,render:e=>(0,d.jsx)(Z().KF,{icon:m,onClick:a,...e})}),l]}),isRightLastElementOfInput:!0,style:{...i&&{borderBottom:"none"}},...e.comboboxProps});return(0,d.jsx)("div",{style:{...!o&&{marginTop:16},marginBottom:10},children:s?(0,d.jsx)(F().A,{children:c}):(0,d.jsx)("div",{children:c})},`input-header-${r.type}`)}return null}function mt(e){return e.fileUpload?X().cM:e.imageUpload?X().Dn:e.videoUpload?X().Rt:void 0}async function gt(e){let{tab:t,environment:o}=e;const i=t.imageUpload?"image/*":t.videoUpload?"video/*":t.accept,n=await A().dA({environment:o,supportsMobileNativeFileUpload:!0,multiple:t.allowMultipleFileSelection??!1,accept:i});null!=n&&n.length&&t.onUpload(n)}function ht(e){let{hasRandomButtonOnLeft:t,tabs:o,currentTab:i}=e;const n=o.find((e=>e.type===i));if(!n)return null;let s;return"emoji"===(null==n?void 0:n.type)?s=(0,d.jsx)(Q().A,{}):"icon"===(null==n?void 0:n.type)&&void 0===n.enforceIconColor&&(s=(0,d.jsx)(nt,{})),t&&s?(0,d.jsx)("div",{style:{marginLeft:6},children:s}):s??null}function ft(e){let{tab:t,isSmallWidth:o}=e;const i=(0,n().v3)();return t.imageUpload||t.videoUpload?(0,d.jsxs)(F().A,{desktopStyle:{marginTop:4,display:"flex",justifyContent:"center",marginRight:12,marginLeft:12},children:[t.imageUpload&&(0,d.jsx)(K().A,{size:"lg",onClick:()=>gt({tab:t,environment:i}),style:{width:"100%"},children:(0,d.jsx)(f().sA,{defaultMessage:"Upload file",id:"mediaPicker.chooseImage.buttonText"})}),t.videoUpload&&(0,d.jsx)(U().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Choose a video",id:"mediaPicker.chooseVideo.buttonText"}),onClick:()=>gt({tab:t,environment:i}),fullWidth:o})]}):null}function xt(e){let{tab:t,isSmallWidth:o,onCancel:i}=e;const a=(0,n().v3)(),l=(0,s().O$)(ue().subscriptionDataStoreInstance),c=(0,r().IS)((e=>({dropzone:{background:(0,v().Qr)([v().Ay.blueWithAlpha(.14),(0,x().X4)(e.contentBackground,.5)])},caption:{textAlign:o?"left":"center",color:e.text.secondary},fileLimitWrapper:{display:"flex",alignItems:"center",justifyContent:o?"flex-start":"center"},fileLimitInner:{marginRight:6,color:e.text.secondary}})),[o]),u=(0,s().K8)((()=>te().default.state.isOnboarding),[]),p=(0,s().K8)((()=>de().Si(a)||"plus"),[a]);return(0,d.jsx)(V().V,{type:mt(t)??X().hy,dropTargetKey:"uploadTab",onDropFile:e=>{if("invalidFileDrop"===e.type)return k().D6({label:(0,d.jsx)(f().sA,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})}),null;t.onUpload([e.file])},dropzoneStyle:c.dropzone,children:(0,d.jsxs)("div",{style:{marginTop:-24,paddingTop:24},children:[t.fileUpload&&(0,d.jsx)(F().A,{desktopStyle:{marginTop:o?8:24},children:(0,d.jsx)(U().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>gt({tab:t,environment:a}),fullWidth:o})}),(0,d.jsx)(ft,{isSmallWidth:o,tab:t}),t.caption&&(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:t.caption,style:c.caption}),t.preventUploadLimitFreeFileSize||l&&de().Fq(l)&&(0,d.jsx)("div",{style:{height:8}}),l&&!t.preventUploadLimitFreeFileSize&&!de().Fq(l)&&(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsxs)("div",{style:c.fileLimitWrapper,children:[(0,d.jsx)("div",{style:c.fileLimitInner,children:(0,d.jsx)(f().sA,{defaultMessage:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",values:{filesize:A().u1}})}),!u&&(0,d.jsx)(ce().A,{subscriptionTier:p,onClick:()=>{i&&i()},analyticsName:"media_picker",desktopStyle:{marginBottom:1}})]})})]})})}let vt=function(e){return e.Drive="drive",e.Docs="gDocs",e}({});function jt(e){let{tab:t,type:o}=e;return o===vt.Docs?(0,d.jsx)(Ct,{tab:t}):(0,d.jsx)(yt,{tab:t})}function yt(e){let{tab:t}=e;const o=(0,r().IS)((e=>({buttonItem:{color:e.blueColor}})),[]);return(0,d.jsxs)(F().A,{children:[(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),onClick:()=>t.onSelect(),focused:!1,style:o.buttonItem}),(0,d.jsx)(D().A,{shouldWrapCaption:!1,caption:(0,d.jsx)(f().sA,{defaultMessage:"Find and embed your Google Drive files.",id:"mediaPicker.menuItem.connectFirstGoogleAccount.caption"})})]})}function Ct(e){let{tab:t}=e;return(0,d.jsx)(F().A,{children:(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),onClick:()=>t.onSelect(),focused:!1})})}function bt(e){let{tab:t}=e;const o=(0,r().IS)((e=>({connectFirstAccountButton:{color:e.blueColor},connectSecondAccountButton:{color:e.text.secondary}})),[]),{accounts:i}=t;return 0===i.length?(0,d.jsxs)(F().A,{children:[(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Connect Box account",id:"mediaPicker.menuItem.connectFirstBoxAccount.label"}),onClick:()=>t.onSelect(),focused:!1,style:o.connectFirstAccountButton}),(0,d.jsx)(D().A,{shouldWrapCaption:!1,caption:(0,d.jsx)(f().sA,{defaultMessage:"Find and embed your Box files.",id:"mediaPicker.menuItem.connectFirstBoxAccount.caption"})})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F().A,{children:i.map((e=>(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:e.account_name}}),onClick:()=>t.onSelect(e),focused:!1},e.account_key)))}),(0,d.jsx)(F().A,{topBorder:!0,children:(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreBoxAccounts.label"}),onClick:()=>t.onSelect(),style:o.connectSecondAccountButton,focused:!1})})]})}function St(e,t){return()=>{e&&t.onChange(e)}}function kt(e,t){le().A.state.isActive&&(le().A.setState({...le().A.state,currentTab:e}),"icon"===e&&le().A.state.recordIconLoggingData&&y().uZ(t,"select_icon_tab",le().A.state.recordIconLoggingData))}function At(e){let{tabs:t,onDelete:o,currentTab:s}=e;const a=(0,r().IS)((e=>({sparklesIcon:{width:16,height:16,marginRight:4,color:e.accentColors.purple[400]}})),[]),l=(0,n().v3)(),{device:c}=l;if(t.length<=1&&!o)return null;{const e={gallery:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.gallery",defaultMessage:"Gallery"}),embed:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.embedLink",defaultMessage:"Embed link"}),file:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.upload",defaultMessage:"Upload"}),emoji:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.emoji",defaultMessage:"Emoji"}),icon:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.icon",defaultMessage:"Icon"}),custom:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.custom",defaultMessage:"Custom"}),customEmoji:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.customEmoji",defaultMessage:"Upload"}),unsplash:(0,d.jsxs)(i.Fragment,{children:[h({width:12,marginRight:4,height:12}),(0,d.jsx)("span",{children:"Unsplash"})]}),giphy:(0,d.jsxs)(i.Fragment,{children:[u({width:12,marginRight:4,height:12}),(0,d.jsx)("span",{children:"GIPHY"})]}),drive:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),box:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),aiSourcePicker:(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.ask",defaultMessage:"Ask"}),(0,g().X)(a.sparklesIcon)]})},n=t.findIndex((e=>e.type===s)),r=t.map((t=>t.title||e[t.type])),p=t.find((e=>e.type===s)),m=p&&"emoji"!==p.type&&c.isAndroid;return(0,d.jsx)(Y().Ay,{tabs:r,selectedIndex:n,onChange:e=>{kt(t[e].type,l)},right:o&&!c.isMobile&&(0,d.jsx)(z().p,{isGray:!0,onClick:o,children:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.remove",defaultMessage:"Remove"})}),style:{...m&&{borderBottom:"none"}}})}}function Mt(e){let{tab:t,accounts:o,type:n=vt.Drive}=e;const s=(0,r().IS)((e=>({buttonItem:{color:e.text.secondary}})),[]);return"accounts"in t?t.accounts&&0===t.accounts.length?(0,d.jsx)(jt,{tab:t,type:n}):(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(F().A,{children:t.accounts.map(((e,o)=>(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:e.account_name}}),onClick:()=>t.onSelect(e),focused:!1},e.account_key)))}),(0,d.jsx)(F().A,{topBorder:!0,children:(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>t.onSelect(),style:s.buttonItem,focused:!1})})]}):o?0===o.length?(0,d.jsx)(jt,{tab:t,type:n}):(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(F().A,{children:o.map(((e,o)=>(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:e.accountName}}),onClick:()=>t.onSelect(e),focused:!1},e.accountId)))}),(0,d.jsx)(F().A,{topBorder:!0,children:(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>t.onSelect(),style:s.buttonItem,focused:!1})})]}):null}function wt(e){let{tab:t}=e;const o=(0,n().v3)();return"accounts"in t?(0,d.jsx)(Mt,{tab:t}):(0,d.jsx)(H().A,{request:o,performRequest:b().QZ,render:(e,o,i)=>{if(!i)return(0,d.jsx)(F().A,{children:(0,d.jsx)(G().A,{})});const n=o&&o.accounts?o.accounts:[];return(0,d.jsx)(Mt,{tab:t,accounts:n})}})}function It(e){var t,o;let{tab:n,isSmallWidth:a,aiSourcePickerStore:l}=e;const c=(0,f().tz)(),u=(0,r().IS)((e=>({captionItem:{textAlign:a?"left":"center",color:e.text.secondary},aiResult:{cursor:"pointer",color:e.text.secondary,textAlign:"left",hyphens:"auto",padding:"10px 8px",display:"flex",flexDirection:"row"},aiTitleWrapper:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"rgb(55, 53, 47)",fontWeight:500,fontSize:"14px",paddingLeft:8},aiLoadingWrapper:{flex:1,color:e.accentColors.purple[400],fontWeight:500,flexDirection:"row",gap:6,display:"flex",alignItems:"center",padding:"12px 12px",marginLeft:10},loadingDots:{backgroundColor:e.accentColors.purple[400]}})),[a]),p=(0,s().uB)(l,se),m=(0,s().O$)(p);return(0,d.jsxs)(i.Fragment,{children:[m.result&&!1===m.loading&&(0===(null===(t=m.result)||void 0===t?void 0:t.length)?(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(f().sA,{defaultMessage:"No results found.",id:"mediaPicker.aiSourcePicker.noResultsText"}),style:u.captionItem}):null===(o=m.result)||void 0===o?void 0:o.map((e=>(0,d.jsxs)("div",{style:{...u.aiResult,backgroundColor:m.hover===e.url?"rgba(55,53,47,0.08)":""},onClick:St(e.url,n),onMouseEnter:()=>{p.setState({...m,hover:e.url})},children:[(0,d.jsx)(O().A,{imageURL:"NONE"===e.avatar?n.defaultAvatar:e.avatar,size:24,imageStyle:{borderRadius:34,boxShadow:"0 2px 4px rgba(15, 15, 15, 0.1)"},type:"image_url"}),(0,d.jsx)("div",{style:u.aiTitleWrapper,children:e.title})]},e.url)))),m.loading&&(0,d.jsxs)("div",{style:u.aiLoadingWrapper,children:[c.formatMessage(dt.aiIsFetchingLoader),(0,d.jsx)(N().A,{style:u.loadingDots})]}),!m.result&&!m.loading&&(0,d.jsx)(W,{tab:n,placeholder:n.inputPlaceholder||c.formatMessage(dt.aiSourcePickerPlaceholder),store:p,isSmallWidth:a})]})}function Pt(e,t,o){return()=>{const i=o;if(i){const o=(0,a().Zv)(i)||(0,a().ku)(i,J().A.secureFileConfig.hostname);e.onChange({originUrl:i,pastedSecureFile:o}),C().oF(t,{pastedText:i,source:"media_picker"})}}}function Et(e){let{tab:t,isSmallWidth:o,onCancel:i,embedInputValue:a,setEmbedInputValue:l}=e;const c=(0,f().tz)(),u=(0,n().v3)(),p=(0,n().Y0)(),m=(0,s().O$)(ue().subscriptionDataStoreInstance),g=(0,s().K8)((()=>de().Si(u)),[u]),h=(0,s().K8)((()=>te().default.state.isOnboarding),[]),j=(0,r().IS)((e=>({dropZone:{background:(0,v().Qr)([v().Ay.blueWithAlpha(.14),(0,x().X4)(e.contentBackground,.5)])},caption:{textAlign:o?"left":"center",color:e.text.secondary},subscriptionLimitWrapper:{display:"flex",alignItems:"center",justifyContent:o?"flex-start":"center"},subscriptionLimitInner:{marginRight:6,color:e.text.secondary}})),[o]),y=(0,d.jsx)(q().A,{onClick:Pt(t,u,a),disabled:0===a.length,hovered:!1,children:t.buttonText||(0,d.jsx)(f().sA,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"})}),C=(0,d.jsx)(F().A,{desktopStyle:{marginTop:16,display:"flex",paddingTop:0,paddingBottom:12},children:(0,d.jsx)(Z().Ay,{type:"url",value:a,placeholder:t.inputPlaceholder||c.formatMessage(dt.embedPlaceholder),autoFocus:!p.isMobile||void 0,showClearButton:!0,focus:!p.isMobile||void 0,onSubmit:Pt(t,u,a),onChange:e=>l(e.target.value),inputRight:p.isPhone?y:void 0,right:p.isPhone?void 0:y,isRightLastElementOfInput:!0})}),b=(0,d.jsx)(V().V,{type:mt(t)??X().hy,dropTargetKey:"uploadTab",onDropFile:e=>{if("invalidFileDrop"===e.type)return k().D6({label:(0,d.jsx)(f().sA,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})}),null;t.onUpload([e.file])},dropzoneStyle:j.dropZone,children:(0,d.jsxs)("div",{style:{marginTop:-24,paddingTop:24},children:[t.fileUpload&&(0,d.jsx)(F().A,{desktopStyle:{marginTop:o?8:24},children:(0,d.jsx)(U().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>gt({tab:t,environment:u}),fullWidth:o})}),(0,d.jsx)(ft,{isSmallWidth:o,tab:t}),t.caption&&(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:t.caption,style:j.caption}),t.preventUploadLimitFreeFileSize||m&&de().Fq(m)&&(0,d.jsx)("div",{style:{height:8}}),m&&!t.preventUploadLimitFreeFileSize&&!de().Fq(m)&&(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsxs)("div",{style:j.subscriptionLimitWrapper,children:[(0,d.jsx)("div",{style:j.subscriptionLimitInner,children:(0,d.jsx)(f().sA,{defaultMessage:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",values:{filesize:A().u1}})}),!h&&(0,d.jsx)(ce().A,{subscriptionTier:g||"plus",onClick:()=>{i&&i()},analyticsName:"media_picker",desktopStyle:{marginBottom:1}})]})})]})});return(0,d.jsxs)(d.Fragment,{children:[C,b]})}function Lt(e){let{tab:t,isSmallWidth:o,embedInputValue:s,setEmbedInputValue:r}=e;const a=(0,n().v3)(),l=(0,f().tz)(),{device:c}=a;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(F().A,{desktopStyle:{marginTop:8},children:(0,d.jsx)(Z().Ay,{type:"url",value:s,placeholder:t.inputPlaceholder||l.formatMessage(dt.embedPlaceholder),autoFocus:!c.isMobile||void 0,showClearButton:!0,focus:!c.isMobile||void 0,onSubmit:Pt(t,a,s),onChange:e=>r(e.target.value)})}),(0,d.jsx)(F().A,{style:t.caption?{}:{marginBottom:6},children:(0,d.jsx)(U().A,{onClick:Pt(t,a,s),title:t.buttonText||(0,d.jsx)(f().sA,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"}),fullWidth:o})}),t.caption&&(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:t.caption,style:{textAlign:c.isMobile?"left":"center",marginBottom:4}})]})}},749886:(e,t,o)=>{o.d(t,{A:()=>n});o(725707),o(491955),o(403517);class i extends(()=>o(129044))().default{getInitialState(){return{recentEmojis:[]}}cleanupSkinTonedRecents(e){var t,i;const n=o(789533).A.getStore((null===(t=o(485966).default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId())||""),s=o(975392).sb(null===(i=n.state)||void 0===i?void 0:i.split(",").filter(Boolean).map((t=>void 0===e?t:o(829090).Fk(t))));return n.setState(s.join(",")),this.setState({...this.state,recentEmojis:s}),s}}const n=new i},789533:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(129044))().default{getInitialState(){return{stores:{}}}getStore(e){return this.state.stores[e]||(this.state.stores[e]=new(o(380123).R)({key:`recentEmojis:${e}`,namespace:o(146325).Bq,important:!0,trackingType:"necessary"})),this.state.stores[e]}}const n=new i},801802:(e,t,o)=>{o.d(t,{$n:()=>c,b0:()=>l,so:()=>u,uu:()=>p,ze:()=>d});var i=()=>o(237385),n=()=>o(803290),s=()=>o(174114),r=()=>o(220413),a=()=>o(723817);function l(){const{device:e,WindowSizeStore:t}=(0,i().v3)(),o=(0,n().K8)((()=>e.isPhone),[e]),{phonePaddingLeft:r,phonePaddingRight:a}=(0,n().K8)((()=>({phonePaddingLeft:t.getSafePaddingLeftCSS(14),phonePaddingRight:t.getSafePaddingRightCSS(14)})),[t]);return(0,s().IS)((e=>({galleryWrap:{display:"flex",flexWrap:"wrap",alignContent:"flex-start",background:e.popoverBackground,paddingTop:o?12:0,paddingBottom:o?12:0,paddingLeft:o?r:12,paddingRight:o?a:12,boxShadow:o?`0 1px 0 ${e.regularDividerColor}`:""}})),[o,r,a])}function c(){return{display:"flex",alignItems:"center",justifyContent:"center",minHeight:320,flex:1}}function d(e,t,o){const{device:i,WindowSizeStore:n}=e;return{display:"flex",flexDirection:"column",flexWrap:"wrap",...o?{}:{alignItems:"flex-start"},...i.isPhone?o?{background:r().Tj.transparent,paddingLeft:n.getSafePaddingLeftCSS(0),paddingRight:n.getSafePaddingRightCSS(0)}:{background:t.popoverBackground,paddingLeft:n.getSafePaddingLeftCSS(a().H),paddingRight:n.getSafePaddingRightCSS(a().MP)}:i.isTablet?{background:r().Tj.transparent,paddingLeft:a().FU,paddingRight:a().FU}:{background:r().Tj.transparent,paddingLeft:a().zG,paddingRight:a().zG}}}function u(e,t,o){var i,n;const{device:s,WindowSizeStore:r}=e;if(s.isPhone){const e=o?0:a().H,t=o?0:a().MP;return(window.innerWidth-r.getSafePaddingLeftPx(e)-r.getSafePaddingRightPx(t))/a().UA}return s.isTablet?a().Vq:null!=t&&null!==(i=t.current)&&void 0!==i&&i.offsetWidth?((null==t||null===(n=t.current)||void 0===n?void 0:n.offsetWidth)-2*a().zG)/a().Sq:a().bc}function p(e){return e.device.isMobile?a().zR:a().zf}},839466:(e,t,o)=>{o.d(t,{Z:()=>i,o:()=>s});const i=100;class n extends(()=>o(129044))().default{getInitialState(){return{stores:{}}}getStore(e){if(e)return this.state.stores[e]||(this.state.stores[e]=new(o(380123).R)({key:`emojiFrecency:${e}`,namespace:o(146325).Bq,important:!0,trackingType:"necessary"})),this.state.stores[e]}getEmojiFrecencyMap(){var e;const t=this.getStore(null===(e=o(485966).default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId());if(!t)return{};return t.state??{}}}const s=new n}}]);