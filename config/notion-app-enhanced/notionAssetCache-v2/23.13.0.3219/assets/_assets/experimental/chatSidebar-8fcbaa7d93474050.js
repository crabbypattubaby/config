"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2703,70593,90871],{30958:(e,t,a)=>{a.d(t,{$B:()=>u,Fl:()=>s,KI:()=>d,PI:()=>n,S:()=>l,Tq:()=>m,_u:()=>o,e5:()=>i,fK:()=>p,fl:()=>r,lF:()=>c});a(725707),a(500234);const r=["slack","google_drive","github","jira","sharepoint","microsoftTeams","gmail","linear"],n=["slack","googleDrive","github","jira","microsoftTeams","sharepoint","gmail","linear","web","githubCode"],o="7c57d10c-00cc-48bc-a552-fb3911dd7745",i="1031cb6c-4935-4cc1-9c08-c9a4ecaae323",s="65683ef9-c923-4a14-8c5b-bfcf591cf5a1",l="c1f230b1-6635-4ab0-a3f5-f7eb105a87c3",c="c91548d4-25d0-44a2-ab2e-19f6f0b11d96",d="1724f2a1-f543-43a7-82af-8a0f85bda112",p="07351274-83bb-4118-9f5b-9d75f0453999",u="6694bee1-9451-4484-a972-f56741db481e",h=[{regex:/https:\/\/(?<workspace>[\w-]+)\.slack\.com\/archives\/(?<channel>[^\/]+)\/p(?<timestamp>\d+)(\?thread_ts=(?<thread_ts>\d+\.\d+)&cid=(?<cid>[^\/]+))?/,type:"slack"},{regex:/https:\/\/docs\.google\.com\/(?<fileType>document|spreadsheets|presentation)\/d\/(?<fileId>[a-zA-Z0-9_-]+)(?:\/\S*)?/,type:"googleDrive"},{regex:/https:\/\/github\.com\/(?<orgName>[^\/]+)\/(?<repoName>[^\/]+)\/(?:blob|tree|blame)\/(?<branchName>[^\/]+)\/(?<codePath>[^#]+)(#(?<lineNumber>L\d+(?:C\d+)?(?:-L\d+)?))?/,type:"githubCode"},{regex:/https:\/\/github\.com\/(?<orgName>[^\/]+)\/(?<repoName>[^\/]+)\/pull\/(?<prNumber>\d+)(\/(files|commits|checks)?)?/,type:"github"},{regex:/https:\/\/app\.graphite\.dev\/github\/pr\/(?<orgName>[^\/]+)\/(?<repoName>[^\/]+)\/(?<prNumber>\d+)(?:\/\S*)?/,type:"github"},{regex:/https:\/\/(?:[^\.]+)\.sourcegraphcloud\.com\/github\.com\/(?<orgName>[^\/]+)\/(?<repoName>[^\/@]+)(?:@(?<branchName>[a-f0-9]+))?\/-\/blob\/(?<codePath>[^?]+)\?(?<lineNumbers>L\d+|l\d+)?/,type:"githubCode"},{regex:/https:\/\/(?<site>[^/]+\.atlassian\.net).*?(?:browse\/|[?&]selectedIssue=)(?<issueKey>[A-Z0-9]+-\d+).*?/,type:"jira"}];function m(e){const t=h.find((t=>t.regex.test(e)));return(null==t?void 0:t.type)??"web"}},44250:(e,t,a)=>{function r(e){return!(!e||"askUserToPick"in e)}function n(e){if(!e||!("askUserToPick"in e))return e}function o(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}a.d(t,{DK:()=>n,K$:()=>r,j6:()=>o})},112224:(e,t,a)=>{a.r(t),a.d(t,{LargeSurfaceRenderError:()=>s});a(242343);var r=()=>a(779648),n=()=>a(584604),o=()=>a(982517),i=a(163643);function s(e){return(0,i.jsx)(n().L,{...e,iconGroup:r().F,children:(0,i.jsx)(o().g,{})})}},133989:(e,t,a)=>{a.r(t),a.d(t,{ChatSidebar:()=>P});var r=a(242343),n=()=>a(237385),o=()=>a(803290),i=()=>a(174114),s=()=>a(951592),l=()=>a(897080),c=()=>a(375589),d=()=>a(943172),p=()=>a(312905),u=()=>a(752401),h=()=>a(421338),m=()=>a(393728),f=()=>a(245388),g=()=>a(173736),b=()=>a(112224),v=()=>a(997310),x=()=>a(842617),k=()=>a(601178),S=()=>a(48913),w=()=>a(485966),y=()=>a(993054),C=()=>a(267711),j=()=>a(308265),I=()=>a(501518),A=()=>a(895085),T=()=>a(321185),B=()=>a(935760),M=a(163643);function P(){const e=(0,T().useChatSidebarState)(),t=(0,x().n_)(),{isFullWidthMode:a}=(0,o().O$)(B().M),r=(0,i().IS)((e=>({container:{order:l().A.appCursorListener.secondarySidebar,cursor:"default",zIndex:1e3,height:t?`calc(100% - ${k().ls}px)`:"100%",position:"fixed",right:0,top:0,display:"flex",flexDirection:"row",justifyContent:"flex-end"}})),[t]);return(0,o().K8)((()=>(0,j().sx)()),[])&&e?(0,M.jsxs)("div",{style:r.container,children:[a?null:(0,M.jsx)(D,{chatSidebarState:e}),(0,M.jsx)(O,{chatSidebarState:e})]}):null}function O(e){const{chatSidebarState:t}=e,a=(0,s().ZC)(t),l=t??a,{isFullWidthMode:c}=(0,o().O$)(B().M),d=(0,o().K8)((()=>B().B.getState()??400),[]),p=(0,i().IS)((e=>({chatPanelContent:{position:"relative",height:"100%",width:"100%",background:e.surface.wash},content:{position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",overflow:"visible"}})),[]),m=(0,n().v3)(),v=(0,o().K8)((()=>{const e=(0,S().km)(m);return m.WindowSizeStore.state.width-e}),[m]),x=(0,r.useCallback)((()=>{(0,I().getIsWorkflowEditorOpen)(m)?(0,y().closeWorkflowEditor)({environment:m}):(0,A().closeChatSidebar)({environment:m})}),[m]);return(0,M.jsx)(u().z,{isOpen:t.isOpen,isResizable:!c,width:{size:c?v:d,speed:"animate"},anchorToSide:"right",minSize:c?v:300,maxSize:c?v:700,onWidthChange:e=>{c||(B().M.setState({...B().M.state}),B().B.setState(e.size))},children:(0,M.jsx)(g().K,{from:"ChatSidebar",fallback:e=>{let{error:t,errorId:a}=e;return(0,M.jsx)(b().LargeSurfaceRenderError,{error:t,errorId:a})},children:(0,M.jsx)(f().eh.Provider,{value:x,children:(0,M.jsx)("div",{className:"chatPanelContent",style:p.chatPanelContent,children:(0,M.jsx)("div",{className:"content",style:p.content,children:(0,M.jsx)(h().Y1,{direction:"vertical",height:"fill",width:"fill",children:(0,M.jsx)(N,{chatSidebarState:l})})})})})})})}function N(e){const{chatSidebarState:t}=e,a=(0,n().v3)(),i=(0,v().r)(),s=(0,o().K8)((()=>B().M.state.isFullWidthMode),[]),l=(0,o().K8)((()=>{if(i&&t)return(0,T().getCurrentThreadStore)({spaceStore:i,chatSidebarState:t})}),[i,t]),d=(0,o().K8)((()=>(0,C().K)({store:w().default.state.mainEditorCurrentBlockStore})),[]),u=(0,r.useCallback)((e=>{const t=w().default.state.mainEditorCurrentBlockStore;t&&(0,A().showChatSidebar)({environment:a,store:t,chatSidebarState:e?{isOpen:!0,threadId:e.id}:{isOpen:!0,isNewThread:!0}})}),[a]);return i?(0,M.jsx)(m().hP,{surface:m().wy.inferenceTranscriptChatView,children:(0,M.jsx)(c().NV,{aiChatFeature:s?"workflows_full_page":"workflows",threadStore:l,clientStore:p().Kd,onThreadChange:u,parentStore:i,config:d})}):null}function D(e){const{chatSidebarState:t}=e,{debugSidebarWidth:a}=(0,o().O$)(B().M),n=(0,o().K8)((()=>(null===p().Kd||void 0===p().Kd?void 0:p().Kd.state.showDebug)??!1),[]);(0,r.useEffect)((()=>{B().M.setState({...B().M.state,isDebugSidebarOpen:n})}),[n]);const s=(0,v().r)(),l=(0,o().K8)((()=>{if(s&&t)return(0,T().getCurrentThreadStore)({spaceStore:s,chatSidebarState:t})}),[s,t]),c=(0,i().IS)((e=>({debugPanelContent:{position:"relative",height:"100%",width:"100%",background:e.contentBackground},content:{position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",overflow:"visible"}})),[]);return(0,M.jsx)(u().z,{isOpen:t.isOpen&&n,isResizable:!0,width:{size:a,speed:"animate"},anchorToSide:"right",minSize:300,maxSize:700,onWidthChange:e=>{B().M.setState({...B().M.state,debugSidebarWidth:e.size})},children:(0,M.jsx)("div",{style:c.debugPanelContent,children:(0,M.jsx)("div",{style:c.content,children:(0,M.jsx)(d().m,{clientStore:p().Kd,threadStore:l})})})})}},172746:(e,t,a)=>{a.d(t,{N:()=>n});a(242343);var r=a(163643);const n=(0,a(680369).wt)("share",{viewBox:"0 0 13 16",svg:(0,r.jsx)("path",{d:"M6.494 10.093a.59.59 0 01-.584-.578V3.123l.05-.946-.4.464-.888.952a.538.538 0 01-.4.171.504.504 0 01-.52-.508c0-.152.063-.266.17-.374L6.057.832a.577.577 0 01.882 0l2.133 2.05a.5.5 0 01.165.374.504.504 0 01-.52.508.524.524 0 01-.394-.171l-.895-.952-.394-.464.051.946v6.392a.59.59 0 01-.59.578zm-3.65 5.059c-1.371 0-2.082-.705-2.082-2.057V6.843c0-1.352.71-2.057 2.082-2.057h1.84V6.03H2.92c-.59 0-.914.305-.914.92v6.037c0 .616.324.92.914.92h7.154c.584 0 .914-.304.914-.92V6.951c0-.616-.33-.92-.914-.92H8.309V4.785h1.84c1.372 0 2.083.705 2.083 2.057v6.252c0 1.352-.711 2.057-2.082 2.057H2.844z"})})},263873:(e,t,a)=>{a.r(t),a.d(t,{iconDefinition:()=>r,plusSmallIcon:()=>n});a(242343);const r={viewBox:"0 0 16 16",svg:(0,a(163643).jsx)("path",{d:"M8 2.74a.66.66 0 0 1 .66.66v3.94h3.94a.66.66 0 0 1 0 1.32H8.66v3.94a.66.66 0 0 1-1.32 0V8.66H3.4a.66.66 0 0 1 0-1.32h3.94V3.4A.66.66 0 0 1 8 2.74"})},n=(0,a(680369).wt)("plusSmall",r)},306131:(e,t,a)=>{a.d(t,{Y:()=>k});a(403517),a(242343);var r=()=>a(237385),n=()=>a(803290),o=()=>a(174114),i=()=>a(31448),s=()=>a(126451),l=()=>a(209684),c=()=>a(535906),d=()=>a(273520),p=()=>a(935091),u=()=>a(858023),h=()=>a(88271),m=()=>a(103151),f=()=>a(640979),g=()=>a(906230),b=()=>a(907721),v=()=>a(344552),x=a(163643);function k(e){const t=e.model,a=(0,r().v3)(),k=(0,o().IS)((e=>({badge:{fontSize:12,fontWeight:500,padding:"1px 6px",backgroundColor:e.cardHoveredBackground,color:e.text.tertiary,borderRadius:4,...i().RC}})),[]),w=(0,n().K8)((()=>v().$.getData(a,{})||[]),[a]),y=e.model?S[e.model]||e.model:"Default model";return(0,x.jsx)(d().Ay,{popupType:d().z7.Popup,placementToOrigin:d().sx.Bottom,alignmentToOrigin:d().yP.Start,renderOrigin:t=>(0,x.jsx)(m().A,{renderTooltip:()=>(0,x.jsx)("div",{children:"Select a model"}),placement:b().W.Bottom,alignment:b().C.Center,render:a=>"button"===e.format?(0,x.jsx)(l().p,{...(0,g().A)(t,a),children:y}):(0,x.jsx)(s().A,{...(0,g().A)(t,a),ignoreLocalHoverState:!0,children:(0,x.jsx)("div",{style:k.badge,children:y})})}),render:a=>(0,x.jsx)(p().A,{menuType:f().gu.Popup,children:(0,x.jsx)(u().Ay,{type:u().Oh.Vertical,initialFocus:0,sections:[{key:"models",render:e=>(0,x.jsx)(h().A,{...e,title:"Models",shouldShowBottomDivider:!0}),items:w.map((r=>({key:r,action:()=>{e.setModel(r),a.close()},render:e=>(0,x.jsx)(c().A,{...e,title:S[r]||r,isChecked:r===t})})))}]})})})}const S={default:"Default model","openai-gpt-4o":"OpenAI GPT-4o","openai-chatgpt-4o-latest":"OpenAI ChatGPT-4o-latest","openai-gpt-4o-mini":"OpenAI GPT-4o-mini","openai-o1":"OpenAI o1","openai-o1-mini":"OpenAI o1-mini","openai-o3-mini":"OpenAI o3-mini","openai-o3":"OpenAI o3","openai-o4-mini":"OpenAI o4-mini","openai-gpt-4.1":"OpenAI GPT-4.1","openai-gpt-4.1-mini":"OpenAI GPT-4.1-mini","openai-gpt-4.1-nano":"OpenAI GPT-4.1-nano","anthropic-haiku":"Anthropic Haiku","anthropic-sonnet-3.5":"Anthropic Sonnet 3.5","anthropic-sonnet-3.7":"Anthropic Sonnet 3.7","anthropic-opus":"Anthropic Opus","vertex-gemini-1.5-pro":"Vertex Gemini 1.5 Pro","vertex-gemini-1.5-flash":"Vertex Gemini 1.5 Flash","vertex-gemini-2.0-flash":"Vertex Gemini 2.0 Flash","vertex-gemini-2.5-pro":"Vertex Gemini 2.5 Pro","vertex-gemini-2.5-flash":"Vertex Gemini 2.5 Flash","groq-gemma2-9b-it":"Groq Gemma2 9b It","groq-gemma-7b-it":"Groq Gemma 7b It","groq-llama-70b":"Groq Llama 70b","groq-llama-8b":"Groq Llama 8b","groq-mixtral":"Groq Mixtral","fireworks-llama3.1-405b":"Llama 3.1 405b","fireworks-llama3.1-70b":"Llama 3.1 70b","fireworks-llama3.3-70b":"Llama 3.3 70b","fireworks-llama3.3-70b-dedicated":"Llama 3.3 70b Dedicated","fireworks-llama3.1-8b":"Llama 3.1 8b","fireworks-llama3-70b":"Llama 3.70b","fireworks-mixtral-22b":"Mixtral 22b","fireworks-mixtral-7b":"Mixtral 7b","fireworks-ft-router-101":"FT Router 101","fireworks-ft-router-102":"FT Router 102","fireworks-deepseek-v3":"DeepSeek V3","fireworks-deepseek-r1":"DeepSeek R1","fireworks-llama-8b-finetune-incl-translated-thumbsupdown-v07--judge-0-9-p50":"Llama 8b Finetune V07 P50","fireworks-llama-8b-finetune-incl-translated-thumbsupdown-v07--judge-0-9-p20":"Llama 8b Finetune V07 P20","fireworks-llama-8b-finetune-v07-p50-dedicated":"Llama 8b Finetune V07 P50 Dedicated","cerebras-llama3.1-8b":"Cerebras Llama 3.1 8b","cerebras-llama3.3-70b":"Cerebras Llama 3.3 70b","cerebras-deepseek-r1-distill-llama-70b":"Cerebras DeepSeek R1 Distill Llama 70b","bedrock-nova-pro":"Bedrock Nova Pro","bedrock-nova-lite":"Bedrock Nova Lite","bedrock-nova-micro":"Bedrock Nova Micro","bedrock-anthropic-sonnet-3.7":"Bedrock Anthropic Sonnet 3.7","bedrock-anthropic-sonnet-3.5":"Bedrock Anthropic Sonnet 3.5","bedrock-anthropic-haiku-3.5":"Bedrock Anthropic Haiku"}},344552:(e,t,a)=>{a.d(t,{$:()=>r});const r=new(a(967203).U)((()=>"aiPickableModels"),(async e=>{const t=await Promise.resolve().then(a.bind(a,818369)),r=await t.callApi({eventName:"getAiPickableModels",environment:e,data:{}});return"success"===r.type?r.data.models:[]}));a(996094).exposeDebugValue("AiPickableModelsStore",r)},354377:(e,t,a)=>{function r(e){return`${e.environmentName}-${e.suffix}`}a.d(t,{W:()=>r})},356499:(e,t,a)=>{a.d(t,{b:()=>l});var r=a(242343),n=()=>a(174114),o=()=>a(633427),i=()=>a(780942),s=a(163643);function l(e){var t;const[a,l]=r.useState(e.defaultOpen??!1),c=(0,n().IS)((t=>({wrap:{cursor:"pointer",...e.style},header:{display:"flex",alignItems:"center",gap:8,...!1===e.isToggleEnabled?{whiteSpace:"nowrap",height:28,paddingLeft:8,paddingRight:8}:{},...e.headerStyle},text:{minWidth:0,flexShrink:1,overflow:"hidden",textOverflow:"ellipsis"},content:{cursor:"auto",marginTop:12},icon:{width:16,height:16,fill:t.regularIconColor},chevronDownIcon:{width:16,height:16,fill:t.mediumIconColor,transition:"transform 0.2s ease-in-out",transformOrigin:"center",transform:a?"rotate(0deg)":"rotate(-90deg)"}})),[e.style,e.headerStyle,a,e.isToggleEnabled]),d=(0,r.useCallback)((()=>l(!a)),[a]),p=(0,s.jsxs)(s.Fragment,{children:[e.left,null===(t=e.icon)||void 0===t?void 0:t.call(e,{...c.icon,...e.iconStyle}),(0,s.jsx)("span",{style:c.text,children:e.label}),(0,s.jsx)("div",{style:{flexGrow:1}}),e.right]});return!1===e.isToggleEnabled?(0,s.jsx)("div",{style:e.style,children:(0,s.jsx)("div",{style:c.header,children:p})}):(0,s.jsxs)("div",{style:c.wrap,children:[(0,s.jsxs)(i().p,{onClick:d,style:c.header,children:[p,(0,o().arrowChevronSingleDownIcon)(c.chevronDownIcon)]}),a&&(0,s.jsx)("div",{style:c.content,children:e.children})]})}},533639:(e,t,a)=>{a.d(t,{p:()=>r});class r extends(()=>a(998969))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}},543001:(e,t,a)=>{a.d(t,{B:()=>o});var r=()=>a(174114),n=()=>a(220413);function o(e){return(0,r().IS)((t=>({wrapper:{background:e?(0,n().qh)(e,t).color:t.surface.wash,borderRadius:5,padding:"8px 12px",userSelect:"none",width:"100%"}})),[e])}},580290:(e,t,a)=>{a.d(t,{Ou:()=>h,WB:()=>u,Wd:()=>m,wm:()=>f});a(610931),a(362833),a(403517);var r=()=>a(971053),n=()=>a(519423),o=()=>a(939499),i=()=>a(543736),s=()=>a(3311),l=()=>a(818369),c=()=>a(145046),d=()=>a(754697),p=()=>a(485966);function u(e){const{environment:t,feedbackType:a,userComment:r,spaceId:o,traceId:i,type:s,threadId:c,stepId:d}=e;l().callApi({eventName:"saveInferenceTranscriptFeedback",environment:t,data:{type:s,traceId:i,spaceId:o,feedbackType:a,userComment:r,threadId:c,stepId:d},headers:(0,n().WS)({spaceId:o})})}async function h(e){const{environment:t,clientStore:a,inference:u,threadId:h}=e,m=a.getOrCreateClientAIChatThreadStore(h),f=m.state.inferenceKeysToAnnotations[u.key],g=a.state.model,b=p().default.state.currentSpaceStore;if(!b)throw new Error("No current space store");if(!g)return void c().rG({message:"No model selected"});const v=await l().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:{transcript:[{id:(0,d().Z1)({environment:t,table:o().mS,spaceId:b.id}),type:"config",value:{type:"debug-inference",inference:{...u.value,input:{...u.value.input,...f?{annotation:f}:void 0}},model:g}}],traceId:(0,s().Ay)(),spaceId:b.id,generateTitle:!1},headers:(0,n().WS)({spaceId:b.id})});if("failed"===v.type)throw v.error;const x=[];if(i().hS.is(v.data))for await(const n of v.data)if("debug-inference"===n.type)x.push(n.value),m.setState({...m.state,inferences:m.state.inferences.map((e=>e.key===u.key?{...e,value:{...e.value,expected:(0,r().Zl)(x)}}:e))});else if("error"===n.type)throw n.message}async function m(e){const{environment:t,request:a,memory:r,onChange:u,clientStore:h}=e,m=h.state.model,f=p().default.state.currentSpaceStore;if(!f)throw new Error("No current space store");if(!m)return void c().rG({message:"No model selected"});if(!r.feedback)return void c().rG({message:"No feedback found"});const g=await l().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:{transcript:[{id:(0,d().Z1)({environment:t,table:o().mS,spaceId:f.id}),type:"config",value:{type:"memory-agent",request:a,feedback:r.feedback,model:m}}],traceId:(0,s().Ay)(),spaceId:f.id,generateTitle:!1},headers:(0,n().WS)({spaceId:f.id})});if("failed"!==g.type){if(i().hS.is(g.data))for await(const n of g.data)"memory-agent"===n.type?u(n.value):"error"===n.type&&c().rG({message:n.message})}else c().Qg(g)}async function f(e){const{environment:t,inference:a,project:r,dataset:n}=e;await l().callApi({eventName:"insertIntoBraintrustDataset",environment:t,data:{project:r,dataset:n,value:a}}),c().rG({message:`Saved to project: ${r}, dataset: ${n}`})}},584604:(e,t,a)=>{a.d(t,{L:()=>s});a(242343);var r=()=>a(421338),n=()=>a(543001),o=()=>a(707260),i=a(163643);function s(e){let{backgroundColor:t,children:a,...s}=e;const l=(0,n().B)(t),c={wrapper:{...l.wrapper,background:t?l.wrapper.background:"initial",height:"100%",padding:"20px 12px"}};return(0,i.jsx)(r().Y1,{style:c.wrapper,align:"center",children:(0,i.jsx)(o().r,{...s,direction:"vertical",overrideSize:()=>48,children:a})})}},633427:(e,t,a)=>{a.r(t),a.d(t,{arrowChevronSingleDownIcon:()=>n,iconDefinition:()=>r});a(242343);const r={viewBox:"0 0 20 20",svg:(0,a(163643).jsx)("path",{d:"M9.558 13.442c.244.244.64.244.884 0l5.4-5.4a.625.625 0 1 0-.884-.884L10 12.116 5.042 7.158a.625.625 0 0 0-.884.884z"})},n=(0,a(680369).wt)("arrowChevronSingleDown",r)},725494:(e,t,a)=>{a.r(t),a.d(t,{checkmarkIcon:()=>n,iconDefinition:()=>r});a(242343);const r={viewBox:"0 0 20 20",svg:(0,a(163643).jsx)("path",{d:"M15.784 4.002a.625.625 0 0 1 .214.857L9.445 15.784a.625.625 0 0 1-1.01.085l-4.37-5.098a.625.625 0 0 1 .948-.814l3.806 4.44 6.109-10.181a.625.625 0 0 1 .857-.214"})},n=(0,a(680369).wt)("checkmark",r)},752401:(e,t,a)=>{a.d(t,{z:()=>o});var r=()=>a(129978);const n={CollapsiblePanel:new(r().O2)("CollapsiblePanel",(()=>a.e(35905).then(a.bind(a,256401))))},o=(0,r()._h)(n.CollapsiblePanel,(e=>e.CollapsiblePanel))},963395:(e,t,a)=>{a.d(t,{X:()=>y,O:()=>w});a(610931);var r=a(242343),n=()=>a(237385),o=()=>a(174114),i=()=>a(653998),s=()=>a(145046),l=()=>a(384221),c=()=>a(209684),d=()=>a(435819),p=()=>a(59175),u=()=>a(211379),h=()=>a(129978),m=()=>a(622286),f=()=>a(951592),g=()=>a(162901);const b={SimpleMonacoWrapper:new(h().O2)("SimpleMonacoWrapper",(async()=>{const[e,t,r]=await Promise.all([a.e(89440).then(a.bind(a,420215)).then((e=>e.default)),a.e(98814).then(a.bind(a,357586)).then((e=>e.loader)),a.e(62989).then(a.bind(a,39770))]);return t.config({monaco:e}),r}))},v=(0,h()._h)(b.SimpleMonacoWrapper,(e=>e.SimpleMonacoWrapper));var x=a(163643);function k(e){const{value:t,onSave:a,disabled:n,language:l="typescript",onFocus:d,onBlur:p,onChange:u,fetchTypescriptImports:h,fillHeight:m}=e,b=(0,r.useRef)(null),[k,S]=r.useState(t),w=(0,f().ZC)(t);r.useEffect((()=>{var e;w===k&&t!==w&&(S(t),null===(e=b.current)||void 0===e||e.setValue(t))}),[k,w,t]);const y=(0,r.useCallback)((()=>{if(k!==t)try{null==a||a(k)}catch(e){console.error(e),e instanceof Error&&s().rG({message:e.message})}}),[a,k,t]),C=(0,r.useCallback)((()=>{var e;S(t),null===(e=b.current)||void 0===e||e.setValue(t)}),[t]),j=(0,r.useCallback)((e=>{S(e??""),null==u||u(e??"")}),[u]),I=(0,r.useCallback)((e=>{b.current=e}),[]),[A,T]=r.useState(void 0);(0,g().Yb)((async()=>{if(h){const e=await h();T(e)}}),[h]);const B=(0,o().IS)((e=>({container:{position:"relative",borderRadius:m?0:8,overflow:"hidden",height:m?"100%":"50vh",display:"flex",flexDirection:"column",minHeight:400},controls:{position:"absolute",top:8,right:12,display:"flex",gap:8,zIndex:1}})),[m]);return(0,x.jsxs)("div",{style:B.container,children:[t!==k&&(0,x.jsxs)("div",{style:B.controls,children:[(0,x.jsx)(c().p,{onClick:C,children:(0,x.jsx)(i().sA,{defaultMessage:"Discard",id:"workflow.monacoCodeBlock.discard"})}),(0,x.jsx)(c().p,{onClick:y,children:(0,x.jsx)(i().sA,{defaultMessage:"Save changes",id:"workflow.monacoCodeBlock.save"})})]}),(0,x.jsx)(v,{language:l,value:k,disabled:n,onChange:j,onMount:I,onFocus:d,onBlur:p,imports:A})]})}function S(e){const{value:t,onSave:a,disabled:n,onFocus:l,onBlur:d}=e,[u,h]=r.useState(!1),[m,f]=r.useState(void 0),g=(0,o().IS)((e=>({container:{position:"relative",background:e.codeBlockBackground,padding:16,borderRadius:12},input:{whiteSpace:"pre-wrap",wordWrap:"break-word",fontFamily:"monospace",color:e.text.primary,margin:0,marginBottom:12,fontSize:12},controls:{position:"absolute",top:8,right:8,display:"flex",gap:8,zIndex:1}})),[]),b=(0,r.useCallback)((e=>{f(e.target.value)}),[]),v=(0,r.useCallback)((()=>{if(void 0!==m)try{null==a||a(m),f(void 0),h(!1)}catch(e){console.error(e),e instanceof Error&&s().rG({message:e.message})}}),[a,m]),k=(0,r.useCallback)((()=>{f(void 0),h(!1)}),[]),S=(0,r.useCallback)((()=>{h(!0),f(t)}),[t]);return n?(0,x.jsx)(w,{...e}):(0,x.jsxs)("div",{style:g.container,children:[(0,x.jsx)("div",{style:g.controls,children:u?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c().p,{onClick:k,children:(0,x.jsx)(i().sA,{defaultMessage:"Discard",id:"workflow.codeBlock.discard"})}),(0,x.jsx)(c().p,{onClick:v,children:(0,x.jsx)(i().sA,{defaultMessage:"Save",id:"workflow.codeBlock.save"})})]}):(0,x.jsx)(c().p,{onClick:S,children:(0,x.jsx)(i().sA,{defaultMessage:"Edit",id:"workflow.codeBlock.edit"})})}),u?(0,x.jsx)(p().A,{value:void 0!==m?m:t,onChange:b,textarea:!0,style:g.input,autosize:!0,autosizeMinHeight:80,onFocus:l,onBlur:d}):(0,x.jsx)(w,{...e})]})}function w(e){const{value:t,language:a="typescript",styles:n}=e,{value:i}=(0,h().fJ)(u().y),s=(0,o().IS)((e=>({codeDisplay:{whiteSpace:"pre-wrap",wordWrap:"break-word",fontFamily:"monospace",margin:0,fontSize:12,"& code":{fontFamily:"inherit",fontSize:"inherit",padding:0,background:"none"}}})),[]),l=r.useMemo((()=>{if(!i)return t;return i.highlight(t,i.languages[a]||i.languages.javascript,a)}),[i,t,a]);return(0,x.jsx)("div",{style:{...s.codeDisplay,...n},dangerouslySetInnerHTML:{__html:l}})}function y(e){const t=(0,n().v3)(),[a,o]=(0,r.useState)(!1),i=(0,r.useCallback)((()=>{o(!0),l().clear({environment:t})}),[t]),s=(0,r.useCallback)((()=>{o(!1)}),[]),c=((0,m().X)("ai_workflows_monaco_code_editor"),!1);return(0,x.jsx)(d().A,{capture:a,debugName:"SimpleCodeBlock",render:()=>c?(0,x.jsx)(k,{...e,onFocus:i,onBlur:s}):(0,x.jsx)(S,{...e,onFocus:i,onBlur:s})})}},994488:(e,t,a)=>{a.d(t,{o:()=>r});a(362833),a(403517);function r(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];if(0===a.length)return e.map((e=>[e]));const o=[];for(const i of e)o.push(...r(a[0],...a.slice(1)).map((e=>[i,...e])));return o}}}]);