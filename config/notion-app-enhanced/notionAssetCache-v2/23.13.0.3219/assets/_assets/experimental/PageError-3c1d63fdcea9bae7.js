"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[66960],{11016:(e,t,i)=>{i.d(t,{A:()=>u});i(403517),i(242343);var r=()=>i(237385),o=()=>i(803290),s=()=>i(174114);const n=[[2,1,3,1],[1,0,2,0],[0,2,0,3],[3,3,0,2],[1,1,2,2]];var a=()=>i(517198),l=()=>i(216273),c=()=>i(440588),d=i(163643);function u(e){let{skipFadeinDelay:t}=e;const{isElectronMac:i}=(0,r().Y0)(),u=(0,o().O$)(l().b),p=i&&!u,m=(0,o().O$)(c().sidebarExpandedStore),h=(0,o().K8)((()=>m?c().sidebarWidthStore.state:0),[m]),f=(0,s().IS)((e=>{const t={width:20,height:20,borderRadius:4},i={height:10,minHeight:10,borderRadius:10};return{sidebar:{backgroundColor:e.surface.wash,boxShadow:e.sidebarBoxShadow,display:m?"flex":"none",minWidth:h,flexDirection:"column",padding:"12px 14px",overflow:"hidden"},heroSection:{paddingTop:p?36:0,marginBottom:22,display:"flex",alignItems:"center"},heroSectionIcon:{padding:"1px",...t,width:22,height:22},heroSectionTitle:{width:177,marginLeft:8,...i},toplevelMenu:{marginBottom:20,width:78,...i},toplevelMenuLast:{marginBottom:36,width:135,...i},sectionHeader:{marginBottom:14,width:56,...i},pageRow:{display:"flex",alignItems:"center",marginBottom:11},pageIcon:{...t},pageTitle:{marginLeft:8,...i}}}),[m,h,p]),x=(0,d.jsxs)("div",{style:f.heroSection,children:[(0,d.jsx)(a().A,{style:f.heroSectionIcon,emphasized:!0}),(0,d.jsx)(a().A,{style:f.heroSectionTitle,emphasized:!0})]}),v=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a().A,{style:f.toplevelMenu,emphasized:!0}),(0,d.jsx)(a().A,{style:f.toplevelMenu,emphasized:!0}),(0,d.jsx)(a().A,{style:f.toplevelMenu,emphasized:!0}),(0,d.jsx)(a().A,{style:f.toplevelMenuLast,emphasized:!0})]}),S=(0,d.jsx)(a().A,{style:f.sectionHeader,emphasized:!0}),y=n.map(((e,i)=>e.map(((e,r)=>(0,d.jsxs)("div",{style:{...!t&&g(i),...f.pageRow},children:[(0,d.jsx)(a().A,{style:f.pageIcon,emphasized:!0}),(0,d.jsx)(a().A,{style:{...f.pageTitle,width:80+20*e},emphasized:!0})]},`${i}-${r}`)))));return(0,d.jsxs)("div",{style:f.sidebar,children:[x,v,S,y]})}function g(e){return 0===e?{}:{animation:`1s ease-in ${e}s 1 normal both running fadein`}}},55813:(e,t,i)=>{i.r(t),i.d(t,{exclamationMarkTriangleFillIcon:()=>o,iconDefinition:()=>r});i(242343);const r={viewBox:"0 0 20 20",svg:(0,i(163643).jsx)("path",{d:"M11.84 3.563c-.817-1.417-2.862-1.417-3.68 0L2.314 13.688c-.818 1.416.205 3.187 1.84 3.187h11.692c1.636 0 2.658-1.77 1.84-3.187zM9.876 6.75c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5"})},o=(0,i(680369).wt)("exclamationMarkTriangleFill",r)},59279:(e,t,i)=>{i.d(t,{Ji:()=>w,bd:()=>I,f0:()=>P,mf:()=>k,s7:()=>_});i(362833),i(242343);var r=()=>i(803290),o=()=>i(174114),s=()=>i(711361),n=()=>i(653998),a=()=>i(975392),l=()=>i(76394),c=()=>i(640979),d=()=>i(907721),u=()=>i(962373),g=()=>i(535906),p=()=>i(273520),m=()=>i(356813),h=()=>i(517198),f=()=>i(935091),x=()=>i(858023),v=()=>i(443252),S=()=>i(88271),y=()=>i(103151),b=()=>i(35462),j=i(163643);const A=20,w=12;function _(e){let{title:t,byline:i,icon:r,iconSize:o,iconMargin:s,useThinTitle:n,useSecondaryColorTitle:a,containerStyles:l,summaryStyles:c,rightContent:d,badge:u}=e;const g=P({icon:r,iconSize:o,iconMargin:s,useThinTitle:n,containerStyles:l,summaryStyles:c});return(0,j.jsxs)("div",{style:g.container,children:[r?(0,j.jsx)("div",{style:g.iconContainer,children:r}):null,(0,j.jsxs)("div",{style:g.summaryContainer,children:[(0,j.jsxs)("div",{style:g.nameContainer,children:[(0,j.jsx)(b().A,{style:g.name,isSecondaryColor:a,showTooltipWhenTruncated:!0,children:t}),u?(0,j.jsx)("div",{style:g.badge,children:u}):null]}),i?(0,j.jsx)(b().A,{style:g.byline,children:i}):null]}),d]})}function P(e){const{icon:t,iconSize:i,iconMargin:r,useThinTitle:s,containerStyles:n,summaryStyles:a}=e,l=r??w,c=t?i??A:0;return(0,o().IS)((e=>({container:{position:"relative",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:"8px 0",width:"100%",...n},summaryContainer:{width:`calc(100% - ${c}px)`,...a},iconContainer:{height:c,width:c,flexGrow:0,flexShrink:0,flexBasis:c,marginRight:l,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:6},badge:{marginRight:8},nameContainer:{display:"flex",alignItems:"center",gap:6},name:{fontSize:14,fontWeight:s?400:500},byline:{fontSize:12,lineHeight:1.3,opacity:.5}})),[c,l,s,n,a])}function k(e){let{titleStyles:t,includeByline:i,bylineStyles:r,includeIcon:s,iconStyles:n,containerStyles:a}=e;const l=(0,o().IS)((()=>({container:{height:53,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:"8px 0",width:"100%",gap:8,...a},icon:{borderRadius:4,height:24,width:24,marginLeft:-2,...n},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",width:"calc(100% - 32px)",gap:4},title:{borderRadius:4,height:14,width:"80%",...t},byline:{borderRadius:4,height:12,width:"60%",...r}})),[a,t,r,n]);return(0,j.jsxs)("div",{style:l.container,children:[s?(0,j.jsx)(h().A,{style:l.icon}):null,(0,j.jsxs)("div",{style:l.textContainer,children:[(0,j.jsx)(h().A,{style:l.title}),i?(0,j.jsx)(h().A,{style:l.byline}):null]})]})}function I(e){const t=(0,n().tz)(),i=(0,r().uB)(void 0,u().A),h=(0,o().IS)((()=>({popupMenu:{width:312}})),[]);let b=[];const A=[];for(const r of e.items)if("divider"===r.type){const t=A.length>0,i={key:`actions-${A.length}`,render:i=>(0,j.jsx)(S().A,{title:e.title,topBorder:t,...i}),items:b};A.push(i),b=[]}else if("action"===r.type){const e={key:r.key,render:e=>(0,j.jsx)(y().A,{textWrap:!0,render:t=>(0,j.jsx)(g().A,{...e,...t,isRedOnHover:r.isDestructive,shouldWrapCaption:!0,icon:r.icon,title:r.title,caption:r.caption,disabled:r.disabled,disabledFeedback:r.disabled}),renderTooltip:()=>r.tooltipTitle,disableTooltip:r.tooltipDisabled??!0,placement:d().W.Right}),action:()=>{r.action(),i.setState({...i.state,open:!1})}};b.push(e)}else(0,l().HB)(r);const w={key:`actions-${A.length}`,render:t=>(0,j.jsx)(S().A,{title:e.title,topBorder:A.length>0,...t}),items:b};return A.push(w),(0,j.jsx)(p().Ay,{stopClickPropagation:!0,popupType:v().nl.Popup,alignmentToOrigin:d().C.Start,placementToOrigin:d().W.Bottom,style:h.popupMenu,render:()=>(0,j.jsx)(f().A,{menuType:c().gu.Popup,width:312,children:(0,j.jsx)(x().Ay,{type:x().Oh.Vertical,initialFocus:void 0,sections:A})}),onClose:a().lQ,buttonPopupStore:i,renderOrigin:e=>(0,j.jsx)(m().A,{ariaLabel:t.formatMessage({id:"iconCellActionMenu.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:s()._,...e})})}},86979:(e,t,i)=>{i.d(t,{Bs:()=>d,L:()=>c,Ob:()=>l});i(333225),i(494367),i(516262),i(573119),i(240480),i(950443),i(619601),i(725707),i(491955),i(771702);var r=i(242343),o=()=>i(269280),s=()=>i(551919),n=()=>i(885237),a=()=>i(211923);const l=new class{constructor(){this.currentPageId=void 0,this._localStorage=void 0}startCachingViewIds(e){this.currentPageId=e;this.entryForPage(e).v=[]}stopCachingViewIds(){const e=this.currentPageId;if(this.currentPageId=void 0,e){0===this.entryForPage(e).v.length&&delete this.localStorage[e]}}registerView(e,t){if(this.currentPageId!==e)return;const i=this.entryForPage(e);i.v=[...new Set([...i.v,t])],i.t=Date.now(),this.writeToLocalStorage()}unregisterView(e,t){const i=this.localStorage[e];i&&(i.v=i.v.filter((e=>e!==t)),0===i.v.length&&delete this.localStorage[e],this.writeToLocalStorage())}lookupViewIds(e){const t=this.localStorage[e];return(null==t?void 0:t.v)??[]}clear(){this.currentPageId=void 0,this._localStorage=void 0}get localStorage(){return this._localStorage??(this._localStorage=n().A.get(a().O)||Object.create(null))}entryForPage(e){let t=this.localStorage[e];return t||(t={v:[],t:0},this.localStorage[e]=t),t}writeToLocalStorage(){this.limitLocalStorageSize(),n().A.set(a().O,this.localStorage)}limitLocalStorageSize(){const e=Object.keys(this.localStorage);if(e.length>=100){const t={timestamp:Number.MAX_SAFE_INTEGER,key:void 0};e.forEach((e=>{e!==this.currentPageId&&this.localStorage[e].t<t.timestamp&&(t.timestamp=this.localStorage[e].t,t.key=e)})),t.key&&delete this.localStorage[t.key]}}};function c(e){let{collectionContextStore:t,isFullScreen:i,wasCreatedThisSessionStore:o,didDelayOffscreenRenderRef:s,environment:n}=e;const a=(0,r.useCallback)((()=>{var e;const i=null===(e=t.collectionViewStore())||void 0===e?void 0:e.id,r=n.RouterStore.state.route;if("page"!==r.name)return;const o=r.blockId;o&&i&&(s.current?(l.unregisterView(o,i),t.shouldDelayRenderStore.removeListener(a)):l.registerView(o,i))}),[t,s,n]);(0,r.useEffect)((()=>{var e;if(i||o.state)return;const r=null===(e=t.collectionViewStore())||void 0===e?void 0:e.id,s=n.RouterStore.state.route;if("page"!==s.name)return;return s.blockId&&r?(t.shouldDelayRenderStore.addListener(a),a(),()=>{t.shouldDelayRenderStore.removeListener(a)}):void 0}),[t,i,o,n,a])}function d(e){let{pageId:t,isFrameContext:i}=e;(0,o().l)((()=>{i&&l.startCachingViewIds(t)})),(0,s().X)((()=>{i&&l.stopCachingViewIds()}))}},150936:(e,t,i)=>{i.d(t,{b:()=>o});i(242343);var r=i(163643);const o=(0,i(680369).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},274347:(e,t,i)=>{i.d(t,{ED:()=>x,Kb:()=>S});i(242343);var r=()=>i(803290),o=()=>i(174114),s=()=>i(198654),n=()=>i(640979),a=()=>i(962373),l=()=>i(273520),c=()=>i(935091),d=()=>i(858023),u=()=>i(443252),g=()=>i(88271),p=()=>i(35462),m=()=>i(209684),h=()=>i(59279),f=i(163643);function x(e){let{title:t,items:i,disabled:s,hideDropdownIcon:p,itemMaxWidth:m,itemMinWidth:h,...x}=e;const S=(0,r().uB)(void 0,a().A),y=(0,o().IS)((()=>({container:{minWidth:180}})),[]),b={key:"workspace-users-menu",render:e=>(0,f.jsx)(g().A,{...e}),items:i};return(0,f.jsx)(l().Ay,{popupType:u().nl.Popup,style:y.container,buttonPopupStore:S,disabled:s,renderOrigin:e=>(0,f.jsx)(v,{title:t,hideDropdownIcon:p,disabled:s,styles:x.styles,...e}),render:()=>(0,f.jsx)(c().A,{menuType:n().gu.Popup,maxWidth:m??250,minWidth:h,children:(0,f.jsx)(d().Ay,{type:d().Oh.Vertical,initialFocus:0,sections:[b],onAccept:()=>{S.setState({open:!1})}})})})}function v(e){let{title:t,hideDropdownIcon:i,disabled:r,...n}=e;const a=(0,o().IS)((e=>({container:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",maxWidth:"100%",...n.styles},chevron:{width:10,height:10,marginLeft:4,color:e.lightIconColor}})),[n.styles]);return(0,f.jsxs)(m().p,{style:a.container,disabled:r,...n,children:[(0,f.jsx)(p().A,{showTooltipWhenTruncated:!0,children:t}),i||r?null:(0,s().b)(a.chevron)]})}function S(){const e=(0,o().IS)((()=>({title:{width:"50%"}})),[]);return(0,f.jsx)(h().mf,{titleStyles:e.title})}},305168:(e,t,i)=>{i.d(t,{A:()=>s});var r=()=>i(437071);class o extends(()=>i(129044))().default{getInitialState(){return{isFullScreen:window.outerWidth===window.screen.width&&window.outerHeight===window.screen.height}}constructor(){super(),this.updateFromElectronState=async()=>{const e=await r().fullscreen.get();void 0!==e&&this.setState({isFullScreen:e})},r().fullscreen.addListener(this.updateFromElectronState),this.updateFromElectronState()}}const s=new o},339838:(e,t,i)=>{i.d(t,{A:()=>o});class r extends(()=>i(129044))().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"editor",isInviteTargetsEmpty:!0,table:i(145017).ev,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const o=r},360128:(e,t,i)=>{i.d(t,{C6:()=>n,HQ:()=>s,Yo:()=>a});var r=()=>i(129978);const o=new(r().O2)("login",(async()=>{const{default:e}=await Promise.all([i.e(44711),i.e(35837),i.e(23063),i.e(25049),i.e(30873),i.e(96966)]).then(i.bind(i,352386)),{default:t}=await Promise.all([i.e(44711),i.e(35837),i.e(23063),i.e(25049),i.e(30873),i.e(96966)]).then(i.bind(i,868033)),{default:r}=await Promise.all([i.e(44711),i.e(35837),i.e(23063),i.e(25049),i.e(30873),i.e(96966)]).then(i.bind(i,922160)),{default:o}=await Promise.all([i.e(44711),i.e(35837),i.e(23063),i.e(25049),i.e(30873),i.e(96966)]).then(i.bind(i,912830)),{default:s}=await Promise.all([i.e(44711),i.e(35837),i.e(23063),i.e(25049),i.e(30873),i.e(96966)]).then(i.bind(i,688109));return{LoginPage:e,LoginDesktop:t,LoginMobileNative:r,FrontLoginPage:o,LoginModalContent:s}})),s=(0,r()._h)(o,(e=>e.LoginPage)),n=(0,r()._h)(o,(e=>e.FrontLoginPage)),a=(0,r()._h)(o,(e=>e.LoginModalContent))},375567:(e,t,i)=>{i.d(t,{w:()=>o});var r=()=>i(137476);function o(e,t){const{spaceId:i,pageId:o,joinSpaceMethod:s}=t;(0,r().u4)({environment:e,event:{eventName:"trusted_domain_banner_cta_clicked",eventProperties:{spaceId:i,pageId:o,joinSpaceMethod:s}}})}},420401:(e,t,i)=>{i.d(t,{A:()=>n});var r=()=>i(485966),o=()=>i(413871);class s extends(()=>i(129044))().default{getInitialState(){return{changePermissionsEnabled:!1,privatePageStore:void 0,loading:!1,error:void 0}}shouldSaveTransactionWithSudoMode(e){const t=e===this.state.privatePageStore,i=this.doesUserAlreadyHaveEditorAccess(e.pointer);return t&&this.state.changePermissionsEnabled&&!i}shouldUserHaveAccessToPrivatePageBlock(){var e,t;const i=null===(e=r().default.state.currentSpaceStore)||void 0===e?void 0:e.canAdmin(),o="enterprise"===(null===(t=r().default.state.currentSpaceStore)||void 0===t?void 0:t.getSubscriptionTier());return this.state.privatePageStore&&i&&o}doesUserAlreadyHaveEditorAccess(e){const t=r().default.state.currentSpaceStore;if(!t)return!1;return(e.table===i(145017).ev?o().Bv.createChildStore(t,e):o().md.createChildStore(t,e)).canAdmin()}}const n=s},422693:(e,t,i)=>{i.d(t,{j:()=>o});var r=()=>i(137476);function o(e,t){r().vd(e,"offline_access_failure",t)}},430619:(e,t,i)=>{i.d(t,{s:()=>o});i(242343);var r=i(163643);const o=(0,i(680369).wt)("eyes",{viewBox:"0 0 72 72",svg:(0,r.jsx)("path",{d:"M17.0312 64.4375C26.25 64.4375 33.5625 52.9688 33.5625 36.4375C33.5625 19.9062 26.25 8.46875 17.0312 8.46875C7.8125 8.46875 0.5 19.9062 0.5 36.4375C0.5 52.9688 7.8125 64.4375 17.0312 64.4375ZM54.9688 64.4375C64.1875 64.4375 71.5 52.9688 71.5 36.4375C71.5 19.9062 64.1875 8.46875 54.9688 8.46875C45.75 8.46875 38.4375 19.9062 38.4375 36.4375C38.4375 52.9688 45.75 64.4375 54.9688 64.4375ZM10.0625 47.1875C15.125 47.1875 18.4688 43.6562 18.4688 38.3438C18.4688 33.0938 15.125 29.5625 10.0625 29.5625C7.6875 29.5625 5.71875 30.3125 4.25 31.6875C5.375 19.9375 10.6875 11.9375 17.0312 11.9062C24.25 11.875 30.125 22.0312 30.125 36.4375C30.125 50.7812 24.25 60.9688 17.0312 61C11.5312 61.0312 6.78125 54.9688 4.90625 45.5938C6.28125 46.625 8.03125 47.1875 10.0625 47.1875ZM47.9688 47.1875C53 47.1875 56.4062 43.6562 56.4062 38.3438C56.4062 33.0938 53 29.5625 47.9688 29.5625C45.5938 29.5625 43.5938 30.3438 42.1562 31.6875C43.2812 19.9375 48.5938 11.9375 54.9688 11.9375C62.1562 11.9062 68 22.0938 68 36.4375C68 50.7812 62.1562 60.9688 54.9688 60.9688C49.4375 61 44.6875 54.9375 42.7812 45.5938C44.1562 46.5938 45.9375 47.1875 47.9688 47.1875ZM45.5312 37.4062C44.4375 37.25 43.75 35.9688 44.0312 34.6562C44.3125 33.3125 45.3125 32.3438 46.375 32.5312C47.4688 32.75 48.0938 34.0312 47.8438 35.3125C47.5938 36.6562 46.5938 37.5938 45.5312 37.4062ZM7.625 37.4062C6.53125 37.25 5.84375 35.9688 6.09375 34.6562C6.375 33.3125 7.40625 32.3438 8.4375 32.5312C9.5625 32.7812 10.1875 34.0312 9.9375 35.3125C9.6875 36.6562 8.65625 37.5938 7.625 37.4062Z"})})},468116:(e,t,i)=>{i.r(t),i.d(t,{PageError:()=>Et,PageError404:()=>$t});i(725707),i(107652),i(500234);var r=i(242343),o=()=>i(16791),s=()=>i(237385),n=()=>i(803290),a=()=>i(174114),l=()=>i(712437),c=()=>i(83544),d=()=>i(427091),u=()=>i(203302),g=i(163643);const p=(0,i(680369).wt)("googlePlay",{viewBox:"0 0 14 14",svg:(0,g.jsx)("path",{d:"M3.41741,13.7929001 L13.0843,8.42241009 C14.2002,7.80245009 14.2002,6.19755009 13.0843,5.57759009 L3.41741,0.207109087 C2.33284,-0.395426913 1,0.388821087 1,1.62952009 L1,12.3705001 C1,13.6112001 2.33284,14.3954001 3.41741,13.7929001 Z"})});var m=()=>i(52531),h=()=>i(758611),f=()=>i(132793),x=()=>i(653998),v=()=>i(220413),S=()=>i(31448),y=()=>i(46118),b=()=>i(437071),j=()=>i(601661),A=()=>i(158441),w=()=>i(191756),_=()=>i(110975),P=()=>i(865226),k=()=>i(972340),I=()=>i(421378),M=()=>i(872856),T=()=>i(477784),C=()=>i(392608),E=()=>i(548694),D=()=>i(700734),B=()=>i(69429),R=()=>i(431782),L=()=>i(736530),W=()=>i(830935),N=()=>i(721041),q=()=>i(681105),z=()=>i(645323),F=()=>i(498706),O=()=>i(636208),U=()=>i(422340),H=()=>i(667801),V=()=>i(11016),K=()=>i(907721),Y=()=>i(98508),$=()=>i(485966),J=()=>i(802955),Z=()=>i(836331),G=()=>i(60020);class X extends(()=>i(129044))().default{getInitialState(){return{isCreatingSpace:!1,didPerformAction:!1,flowId:i(214144).JW()}}}const Q=X;var ee=()=>i(321470),te=()=>i(141122),ie=()=>i(420401),re=()=>i(747918),oe=()=>i(305043),se=()=>i(628685),ne=()=>i(880195),ae=()=>i(209684),le=()=>i(435819),ce=()=>i(931085),de=()=>i(951540),ue=()=>i(28210),ge=()=>i(142708),pe=()=>i(35462),me=()=>i(616281),he=()=>i(685669),fe=()=>i(610271),xe=()=>i(247579),ve=()=>i(872289),Se=()=>i(271120),ye=()=>i(783759),be=()=>i(782150);function je(e){const{publicPageData:t,environment:i,flowId:r,store:o,skipClickLogging:s}=e;o.setState({...o.state,didPerformAction:!0}),s||Se().Xx(i,{button_name:"join-workspace",flow_id:r});const{currentUserRootStore:n,currentUserSettingsStore:a}=$().default.state;if(n&&a&&t.spaceId){const e=t.spaceId;ye().DT({environment:i,userRootStore:n,spaceId:e,navigate:!0,analyticsFrom:"page_error",userSettingsStore:a})}}function Ae(e){be().SI({environment:e,from:"page_error"})}function we(e,t,i){Se().xn(i,{type:e,flow_id:t})}function _e(e){let{pageTitle:t}=e;return t?(0,g.jsx)(x().sA,{id:"fullPageError.changePermissions.titleWithPageName",defaultMessage:"Change permissions for {pageTitle}",values:{pageTitle:t}}):(0,g.jsx)(x().sA,{id:"fullPageError.changePermissions.title",defaultMessage:"Change permissions for this page"})}function Pe(){const e=(0,n().K8)((()=>{var e;return null===(e=$().default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]);return e?(0,g.jsx)(x().sA,{id:"fullPageError.workspaceOwner.changePermissions.descriptionWithSpaceName",defaultMessage:"As a workspace owner for <b>{spaceName}</b>, you can change the permissions of this page.",values:{b:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,g.jsx)("b",{children:t})},spaceName:e}}):(0,g.jsx)(x().sA,{id:"fullPageError.workspaceOwner.changePermissions.description",defaultMessage:"As an owner of this workspace, you can change the permissions of this page.",values:{b:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,g.jsx)("b",{children:t})}}})}var ke=()=>i(77993),Ie=()=>i(782422),Me=()=>i(983050),Te=()=>i(672796),Ce=()=>i(665317),Ee=()=>i(493065),De=()=>i(482570),Be=()=>i(611824),Re=()=>i(713055),Le=()=>i(579494),We=()=>i(744819),Ne=()=>i(129808),qe=()=>i(305168),ze=()=>i(216273);function Fe(e){let{children:t,style:i={},...r}=e;const o=(0,a().IS)((e=>({wrapper:{width:"100vw",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",...i}})),[i]);return(0,g.jsx)("section",{style:o.wrapper,...r,children:t})}function Oe(){const{isMobile:e,isElectronMac:t,isElectron:i}=(0,s().Y0)(),{isShowingTabBar:r,isFullscreen:o}=Ke(),n=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",alignSelf:"flex-start",paddingTop:!i||r||o?20:(0,Ne().ek)(t),maxWidth:1300,paddingLeft:20,paddingRight:20},text:{fontWeight:S().Wy.medium,fontSize:16}})),[i,t,o,r]);return(0,g.jsxs)("header",{style:n.container,children:[(0,We().A)({width:e?28:30,height:e?28:30,marginRight:10,flexShrink:0}),(0,g.jsx)("div",{style:n.text,children:"Notion"})]})}function Ue(){const{isElectron:e,isElectronMac:t}=(0,s().Y0)(),{isShowingTabBar:i,isFullscreen:r}=Ke(),o=(0,a().IS)((e=>({desktopDragArea:{width:"100%",height:(0,Ne().ek)(t),position:"absolute",top:0,left:0}})),[t]);return!e||i||r?null:(0,g.jsx)("div",{className:Me().sbV,style:o.desktopDragArea})}function He(e){let{actionButtons:t,children:i,description:r,icon:o,title:n}=e;const{isMobile:l}=(0,s().Y0)(),c=(0,a().IS)((e=>({actionButtons:{marginTop:"15px"},description:{color:e.text.secondary,fontSize:l?S().J.UIRegular.mobile:S().J.UIRegular.desktop,lineHeight:l?S().K_.UIRegular.mobile:S().K_.UIRegular.desktop,margin:0,maxWidth:"340px",padding:"0 8px",textAlign:"center"},title:{color:e.text.primary,fontSize:"17px",fontWeight:S().Wy.semibold,lineHeight:"22px",margin:0,maxWidth:"340px",padding:"0 8px",textAlign:"center"}})),[l]);return(0,g.jsxs)(fe().wt,{alignItems:"center",flexGrow:1,gap:8,justifyContent:"center",children:[o??null,void 0!==n?(0,g.jsx)("p",{style:c.title,children:n}):null,void 0!==r?(0,g.jsx)("p",{style:c.description,children:r}):null,void 0!==t?(0,g.jsx)(fe().Ye,{gap:6,style:c.actionButtons,children:t}):null,i]})}function Ve(e){let{children:t,style:i}=e;const r=(0,a().IS)((e=>({PageErrorFooter:{paddingBottom:"44px",paddingTop:"44px",marginTop:"auto",textAlign:"center",...i}})),[i]);return(0,g.jsx)("footer",{style:r.PageErrorFooter,children:t})}function Ke(){return{isShowingTabBar:(0,n().O$)(ze().b),isFullscreen:(0,n().K8)((()=>qe().A.state.isFullScreen),[])}}function Ye(e){let{forceTheme:t}=e;const i=(0,s().v3)(),r=(0,a().IS)((e=>({flexContainer:{alignItems:"center",display:"flex",gap:"6px"},secondaryColor:{color:t?t.text.secondary:e.text.secondary},button:{color:t?t.text.secondary:e.text.secondary,padding:0},buttonPressed:{background:t?t.buttonPressedBackground:e.buttonPressedBackground}})),[t]);return(0,g.jsxs)(Ve,{style:r.flexContainer,children:[(0,g.jsx)(pe().A,{isInline:!0,style:r.secondaryColor,children:(0,g.jsxs)(Le().A,{href:"https://www.notion.com/product",external:!0,style:{...r.flexContainer,...r.secondaryColor},children:[(0,Re().S)({width:16,height:16}),(0,g.jsx)(x().sA,{id:"fullPageError.whatIsNotionButton.label",defaultMessage:"What is Notion?"})]})}),(0,g.jsx)(pe().A,{isInline:!0,style:r.secondaryColor,children:"·"}),(0,g.jsx)(pe().A,{isInline:!0,style:r.secondaryColor,children:(0,g.jsx)(ae().p,{isGray:!0,onClick:()=>Ae(i),pressedStyle:r.buttonPressed,style:r.button,children:(0,g.jsx)(x().sA,{id:"fullPageError.messageSupport.message",defaultMessage:"Message support"})})}),(0,g.jsx)(pe().A,{isInline:!0,style:r.secondaryColor,children:"·"}),(0,g.jsx)(pe().A,{isInline:!0,style:r.secondaryColor,children:(0,g.jsx)(Le().A,{href:h().JZ.termsAndPrivacy,external:!0,children:(0,g.jsx)(x().sA,{id:"fullPageError.termsAndPrivacyButton.label",defaultMessage:"Terms"})})})]})}function $e(e){const t=(0,a().DP)(),i=(0,s().v3)(),o=(0,n().K8)((()=>(0,Ie()._m)(i)),[i]),l=(0,n().O$)($().AppStoreMainEditorCurrentBlockStore),c=(0,n().K8)((()=>null==o?void 0:o.getEmail()),[o]);return(0,r.useEffect)((()=>{l&&ke().bC({environment:i,store:l})}),[i,l]),o?(0,g.jsx)(Ve,{children:(0,g.jsxs)(fe().Ye,{alignItems:"center",flexWrap:"wrap",gap:6,justifyContent:"center",children:[(0,g.jsx)(De().A,{userStore:o}),(0,g.jsx)(pe().A,{isInline:!0,isSecondaryColor:!0,children:(0,g.jsx)(x().sA,{id:"fullPageError.loggedInUserCurrentAccount.message",defaultMessage:"Logged in as {currentlyLoggedInUser}",values:{currentlyLoggedInUser:(0,g.jsx)("span",{style:{color:t.text.primary},children:c})}})}),(0,g.jsx)(pe().A,{isInline:!0,isSecondaryColor:!0,children:"·"}),(0,g.jsx)(Je,{...e})]})}):(0,g.jsx)(Ye,{})}function Je(e){const t=(0,s().v3)(),i=(0,n().uB)(e.loginStore,F().A),r=(0,n().uB)(e.loginModalStore,z().A);return Ee().transactionQueue.hasTasks()?(0,g.jsx)(pe().A,{isInline:!0,isSecondaryColor:!0,children:(0,g.jsx)(Be().A,{disableUnderline:!0,onClick:()=>Ae(t),children:(0,g.jsx)(x().sA,{id:"fullPageError.messageSupport.message",defaultMessage:"Message support"})})}):(0,g.jsx)(pe().A,{isInline:!0,isSecondaryColor:!0,style:{fontWeight:S().Wy.medium},children:Ce().T_(t)?(0,g.jsxs)(Be().A,{disableUnderline:!0,onClick:()=>{r.setState({open:!0})},children:[(0,g.jsx)(x().sA,{id:"fullPageError.loggedInUserSwitchAccount.message",defaultMessage:"Switch account"}),(0,g.jsx)(L().z,{loginModalStore:r,loginStore:i,title:(0,g.jsx)(x().sA,{id:"sidebarSwitcherMultiAccount.addAccount.title",defaultMessage:"Add an account"}),description:(0,g.jsx)(x().sA,{id:"sidebarSwitcherMultiAccount.addAccount.description",defaultMessage:"Use an existing account, or sign up with a new email. Your current account will remain logged in."}),className:Me().w7$,trustedDomain:e.trustedDomain})]}):(0,g.jsx)(Be().A,{disableUnderline:!0,href:h().JZ.logout,onClick:()=>Te().logout(t),children:(0,g.jsx)(x().sA,{id:"fullPageError.loggedInUserSwitchAccount.message",defaultMessage:"Switch account"})})})}var Ze=()=>i(185639),Ge=()=>i(672154),Xe=()=>i(138121),Qe=()=>i(461201),et=()=>i(482936),tt=()=>i(286404);function it(e){let{canJoinSpaceWithData:t,color:i,route:r,store:o}=e;const a=(0,s().v3)(),c=(0,n().K8)((()=>{const{currentUserRootStore:e}=$().default.state;return e&&0===e.getSpaceViewPointers().length}),[]),{isCreatingSpace:d,flowId:u}=(0,n().K8)((()=>{const{isCreatingSpace:e,flowId:t}=o.state;return{isCreatingSpace:e,flowId:t}}),[o]),p=(0,n().K8)((()=>{const{currentUserStore:e}=$().default.state;return!(null!=e&&e.getOnboardingCompleted())}),[]);return t?(0,g.jsx)(rt,{color:i,size:"lg",onClick:()=>je({publicPageData:t,environment:a,flowId:u,store:o}),children:(0,g.jsx)(x().sA,{id:"fullPageError.joinSpaceButton.label",defaultMessage:"Join the space"})}):"onboarding"===r.name||p?(0,g.jsx)(rt,{color:i,size:"lg",onClick:()=>function(e,t){Se().Xx(e,{button_name:"back-to-onboarding",flow_id:t}),Ze().Aj();const i=et().default.state;i.isOnboarding?Qe().up(i)?Xe().sy(e,{type:"new-user",disableRedirectUrl:!0,source:"page_error"}):Qe().Cy(i)?Xe().sy(e,{type:"create-or-join",disableRedirectUrl:!0,source:"page_error"}):(et().default.reset(),Ge().A.reset(),P().oo({environment:e,url:h().JZ.root})):(et().default.reset(),Ge().A.reset(),P().oo({environment:e,url:h().JZ.root}))}(a,u),children:(0,g.jsx)(x().sA,{id:"fullPageError.returnToOnboardingButton.label",defaultMessage:"Back to onboarding"})}):c||d?(0,g.jsx)(rt,{color:i,disabled:d,size:"lg",onClick:()=>async function(e,t,i){Se().Xx(e,{button_name:"create-account",flow_id:t});const{currentUserRootStore:r,currentUserStore:o}=$().default.state;r&&o&&(i.setState({...i.state,isCreatingSpace:!0}),await Xe().Ig(e,"handle_create_account"),i.setState({...i.state,isCreatingSpace:!1}))}(a,u,o),children:(0,g.jsx)(x().sA,{id:"fullPageError.createOrJoinWorkspaceButton.label",defaultMessage:"Create or join a workspace"})}):(0,g.jsx)(rt,{color:i,size:"lg",onClick:()=>function(e,t){if(Se().Xx(e,{button_name:"back-to-my-content",flow_id:t}),C().UL(e))return void P().aX(e);const{currentUserRootStore:i,currentUserSettingsStore:r,currentSpaceViewStore:o}=$().default.state;if(!i||!r)return void P().oo({environment:e,url:h().JZ.root,redirect:!0});if(o)return void ye().tR({environment:e,spaceViewStore:o,userRootStore:i,userSettingsStore:r,pageVisitSource:l().y8.PageError,navigationType:"switchingToOrLoadingSpace"});ye().t9({environment:e,userRootStore:i,userSettingsStore:r,pageVisitSource:l().y8.PageError})}(a,u),children:(0,g.jsx)(x().sA,{id:"fullPageError.backToMyContentButton.label",defaultMessage:"Back to my content"})})}function rt(e){let{color:t,...i}=e;const r=(0,a().DP)();return"blue"===t?(0,g.jsx)(de().A,{size:"lg",...i}):(0,g.jsx)(tt().A,{size:"lg",backgroundColor:r.whiteButtonBackground,...i,style:{fontWeight:S().Wy.medium,...i.style}})}function ot(e){let{isElectron:t}=e;const i=(0,x().tz)();return t?(0,g.jsx)(me().A,{title:i.formatMessage({defaultMessage:"No access",id:"errorPage.workspaceNoAccess.title"})}):null}function st(e){let{canRequestAccess:t,pageTitle:i,inSudoModeAndInTrash:r}=e;return t?r?i?(0,g.jsx)(x().sA,{id:"fullPageError.canReqestAccess.inTrash.titleWithPageName",defaultMessage:"No access to {pageTitle} in Trash",values:{pageTitle:i}}):(0,g.jsx)(x().sA,{id:"fullPageError.canRequestAccess.inTrash.title",defaultMessage:"No access to this page in Trash"}):i?(0,g.jsx)(x().sA,{id:"fullPageError.canRequestAccess.titleWithPageName",defaultMessage:"No access to {pageTitle}",values:{pageTitle:i}}):(0,g.jsx)(x().sA,{id:"fullPageError.canRequestAccess.title",defaultMessage:"No access to this page"}):(0,g.jsx)(x().sA,{id:"fullPageError.noAccess.title",defaultMessage:"Page not found"})}function nt(e){let{canRequestAccess:t,inSudoModeAndInTrash:i}=e;return t?i?(0,g.jsx)(x().sA,{id:"fullPageError.pageInTrash.message",defaultMessage:"As a <bold>workspace owner</bold>, you can restore this page to update access to it",values:{bold:e=>(0,g.jsx)("b",{children:e})}}):(0,g.jsx)(x().sA,{id:"fullPageError.canRequestAccess.message",defaultMessage:"You can access this page if someone approves your request."}):(0,g.jsx)(x().sA,{id:"fullPageError.cannotRequestAccess.message",defaultMessage:"You don’t have permission to access this page."})}var at=()=>i(464034);function lt(e){let{sudoModeStore:t}=e;const i=(0,a().IS)((e=>({WorkspaceOwnerPermissions:{background:e.cardBackground,borderRadius:4,padding:18,margin:24,maxWidth:400,textAlign:"center"},WorkspaceOwnerPermissionsButton:{fontWeight:S().Wy.medium,justifyContent:"center",margin:"18px auto 12px"}})),[]),r=(0,n().K8)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),o=(0,n().O$)(t);return r&&o.privatePageStore&&!o.changePermissionsEnabled?(0,g.jsxs)("div",{style:i.WorkspaceOwnerPermissions,children:[(0,g.jsx)(pe().A,{isMultiline:!0,style:{textAlign:"center"},children:(0,g.jsx)(x().sA,{id:"fullPageError.workspaceOwner.canChangePermissionsMessage",defaultMessage:"As a <b>workspace owner</b>, you can change the permissions of this page to add yourself or others. Any changes will appear in the audit log.",values:{b:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,g.jsx)("b",{children:t})}}})}),(0,g.jsxs)(tt().A,{size:"lg",style:i.WorkspaceOwnerPermissionsButton,onClick:()=>t.setState({...t.state,changePermissionsEnabled:!0}),children:[(0,at().x)({width:16,height:16,marginRight:6}),(0,g.jsx)(x().sA,{id:"fullPageError.workspaceOwner.canChangePermissionsMessageButton",defaultMessage:"Change permissions"})]})]}):null}var ct=()=>i(426496);function dt(e){var t;let{route:i,store:o}=e;const n=(0,s().v3)(),a=null===(t=n.currentUser)||void 0===t?void 0:t.isLoggedIn();return(0,r.useEffect)((()=>{we("content_classification_block",o.state.flowId,n)}),[n,o]),(0,g.jsxs)(Fe,{children:[(0,g.jsx)(Ue,{}),(0,g.jsx)(Oe,{}),(0,g.jsx)(He,{icon:(0,g.jsx)(xe().fD,{type:"unsafe"}),title:(0,g.jsx)(x().sA,{id:"fullPageError.unsafePageError.title",defaultMessage:"Page may be unsafe"}),description:(0,g.jsx)(x().sA,{id:"fullPageError.unsafePageError.description",defaultMessage:"This page was flagged as containing spam, phishing, illegal, or inappropriate content. If you trust this source, you can <proceedanywaylink>proceed anyway</proceedanywaylink>",values:{proceedanywaylink:e=>(0,g.jsx)(Be().A,{onClick:()=>function(e){const{mainEditorCurrentBlockStore:t}=$().default.state;t&&(ct().A.bypassPage(t.id),Se().bL(e))}(n),children:e})}}),actionButtons:a?(0,g.jsx)(it,{route:i,store:o,color:"white"}):null}),a?(0,g.jsx)($e,{}):(0,g.jsx)(Ye,{})]})}var ut=()=>i(502140);function gt(e){let{href:t,store:i}=e;const o=(0,s().v3)();return(0,r.useEffect)((()=>we("incorrect_domain_interstitial_block",i.state.flowId,o)),[i,o]),(0,g.jsxs)(Fe,{children:[(0,g.jsx)(Ue,{}),(0,g.jsx)(Oe,{}),(0,g.jsx)(He,{icon:(0,g.jsx)(xe().fD,{type:"incorrectDomain"}),title:(0,g.jsx)(x().sA,{id:"fullPageError.publicDomainInterstitial.title",defaultMessage:"Continue to external site"}),description:(0,g.jsx)(x().sA,{id:"fullPageError.publicDomainInterstitial.description",defaultMessage:"If you are not redirected to the external site automatically, <redirectlink>click here</redirectlink>",values:{redirectlink:e=>(0,g.jsx)(Be().A,{href:t,external:!1,children:e})}}),actionButtons:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(tt().A,{size:"lg",onClick:()=>{(0,ut().log)({level:"info",from:"PageError",type:"incorrectDomainInterstitial",data:{miscDataToConvertToString:{action:"navigateBack",canGoBack:(0,C().UL)(o)}}}),(0,C().UL)(o)?P().aX(o):P().oo({environment:o,url:"/home"})},children:(0,g.jsx)(x().sA,{id:"PageError.IncorrectDomainInterstitialButton.back.label",defaultMessage:"Go back"})}),(0,g.jsx)(de().A,{size:"lg",onClick:()=>{(0,ut().log)({level:"info",from:"PageError",type:"incorrectDomainInterstitial",data:{miscDataToConvertToString:{action:"navigateHome"}}}),P().oo({environment:o,url:"/home"})},children:(0,g.jsx)(x().sA,{id:"PageError.IncorrectDomainInterstitialButton.home.label",defaultMessage:"Take me Home"})})]})}),(0,g.jsx)($e,{})]})}function pt(e){var t;let{route:i,store:o}=e;const n=(0,s().v3)(),a=null===(t=n.currentUser)||void 0===t?void 0:t.isLoggedIn();return(0,r.useEffect)((()=>{we("oauth_no_access",o.state.flowId,n)}),[n,o]),(0,g.jsxs)(Fe,{children:[(0,g.jsx)(Ue,{}),(0,g.jsx)(ot,{isElectron:n.device.isElectron}),(0,g.jsx)(Oe,{}),(0,g.jsx)(He,{icon:(0,g.jsx)(xe().fD,{type:"notFound"}),title:(0,g.jsx)(x().sA,{id:"fullPageError.oauthNoAccess.title",defaultMessage:"You need access to this page"}),description:(0,g.jsx)(x().sA,{id:"fullPageError.oauthNoAccess.description",defaultMessage:"Contact the owner or try switching to a different account with access"}),actionButtons:a?(0,g.jsx)(it,{route:i,store:o,color:"white"}):null}),(0,g.jsx)($e,{})]})}var mt=()=>i(422693);function ht(e){let{store:t}=e;const i=(0,s().v3)();return(0,r.useEffect)((()=>{we("offline",t.state.flowId,i),(0,mt().j)(i,{type:"page_error"})}),[t,i]),(0,g.jsxs)(Fe,{children:[(0,g.jsx)(Oe,{}),(0,g.jsx)(Ue,{}),(0,g.jsx)(He,{icon:(0,g.jsx)(xe().fD,{type:"offline"}),title:(0,g.jsx)(x().sA,{id:"fullPageError.offlineError.title",defaultMessage:"You’re offline"}),description:(0,g.jsx)(x().sA,{id:"fullPage.offlineError.description",defaultMessage:"This page isn’t available offline. Check your network connection and try again."}),actionButtons:(0,g.jsx)(tt().A,{size:"lg",onClick:()=>window.location.reload(),children:(0,g.jsx)(x().sA,{id:"router.renderErrorPage.reloadButton.label",defaultMessage:"Refresh"})})}),(0,g.jsx)($e,{})]})}var ft=()=>i(269280),xt=()=>i(778417),vt=()=>i(198654),St=()=>i(555296),yt=()=>i(83823),bt=()=>i(697428),jt=()=>i(302376),At=()=>i(277328),wt=()=>i(633990),_t=()=>i(339838),Pt=()=>i(388615),kt=()=>i(273520),It=()=>i(204435);function Mt(e){let{errorId:t,message:i,adminMessage:r}=e;const l=(0,a().IS)((()=>({reactErrorStyle:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingBottom:100,...(0,xt().xH)(o().locale)},reactErrorMessageStyle:{fontSize:14,textAlign:"center",marginTop:6,marginBottom:12,color:v().Ay.mediumTextColor},reactErrorMessageIdStyle:{fontSize:10,marginTop:8}})),[]),c=(0,s().v3)(),d=(0,n().K8)((()=>(0,E().s7)(c)),[c]);(0,ft().w)((()=>{b().navigationReady(!1)}));return(0,g.jsx)(Pt().s,{allowSelectionWithin:!0,style:l.reactErrorStyle,children:(0,g.jsxs)(Fe,{children:[(0,g.jsx)(Ue,{}),(0,g.jsx)(He,{icon:(0,St().h)({width:42,height:42}),title:(0,g.jsx)(x().sA,{id:"router.workspaceAccessRenderErrorPage.message",defaultMessage:"This workspace cannot be accessed."}),description:d?r||i||(0,g.jsx)(x().sA,{id:"router.ekmRenderErrorPage.adminDescription",defaultMessage:"Please update security configurations or reach out to support@makenotion.com for support."}):i||(0,g.jsx)(x().sA,{id:"router.ekmRenderErrorPage.description",defaultMessage:"Please contact your workspace owners to enable access. You may switch workspaces."}),actionButtons:(0,g.jsxs)(It().fI,{wrap:"wrap",gap:8,children:[(0,g.jsx)("div",{style:{position:"absolute",top:16,left:16},children:(0,g.jsx)(Tt,{})}),(0,g.jsx)(de().A,{onClick:()=>{window.location.reload()},children:(0,g.jsx)(x().sA,{id:"router.workspaceAccessRenderErrorPage.logoutButton.label",defaultMessage:"Try again"})})]}),children:t&&(0,g.jsx)("div",{style:l.reactErrorMessageIdStyle,children:(0,g.jsx)(yt().b,{errorId:t,enablePopup:(0,bt().o)(t)})})})]})})}function Tt(){const e=(0,s().v3)(),t=(0,n().uB)(void 0,At().A),i=(0,n().uB)(void 0,F().A);(0,ft().w)((()=>{b().navigationReady(!1)}));const o=(0,n().uB)(void 0,_t().A),a=(0,r.useMemo)((()=>({organizationsInfo:[],spaceInfo:[]})),[]),c=(0,r.useCallback)((async t=>{let{event:i,spaceViewStore:r}=t;const o=jt().Vr(i);await ye().tR({environment:e,spaceViewStore:r,userSettingsStore:$().default.state.currentUserSettingsStore,userRootStore:$().default.state.currentUserRootStore,openInNew:o,pageVisitSource:l().y8.SwitchSpace,navigationType:"switchingToOrLoadingSpace"}),re().E.setState({hasWorkspaceAccessError:!1,errorId:void 0}),window.location.reload()}),[e]);return(0,g.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:(0,g.jsx)(kt().Ay,{popupType:kt().z7.Popup,renderOrigin:e=>{let{onClick:t}=e;return(0,g.jsxs)(ae().p,{onClick:t,children:[(0,g.jsx)(x().sA,{defaultMessage:"Select workspace",id:"router.workspaceAccessRenderErrorPage.switchWorkspaceButton.label"}),(0,vt().b)({width:10,marginLeft:4})]})},render:e=>(0,g.jsx)(wt().UL,{parent:e,onSpaceClick:c,loginStore:i,loginPermissionsStore:t,organizationEntryPointProps:a,permissionsInviteStore:o})})})}const Ct={width:14,height:14,marginRight:6,flexShrink:0};function Et(e){let{route:t,publicPageData:i,shouldRedirectFromHome:o}=e;const a=(0,s().v3)(),c=Bt(a),d=(0,n().uB)(void 0,Q),u=(0,n().uB)(void 0,ie().A),p=(0,n().uB)(void 0,G().Ay),m=(0,n().uB)(re().E),h=(0,r.useRef)(!1),x=(0,n().K8)((()=>d.state.flowId),[d]),v=(0,n().K8)((()=>{var e;return null===(e=$().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id}),[]),S=(0,n().K8)((()=>{var e;return(null===(e=$().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.isPlaceholderWorkflowTemplateBlock())??!1}),[]),y=(0,n().K8)((()=>d.state.didPerformAction),[d]),I=!(0,n().O$)(J().e),M=(0,n().K8)((()=>{var e;const{mainEditorCurrentBlockStore:t}=$().default.state;return null==t||null===(e=t.getModel())||void 0===e?void 0:e.isNonverifiedContentClassification()}),[]),{hasWorkspaceAccessError:T,ekmErrorId:D}=(0,n().K8)((()=>({hasWorkspaceAccessError:m.state.hasWorkspaceAccessError,ekmErrorId:m.state.errorId})),[m]);(0,r.useEffect)((()=>{te().default.state.open&&A().J(te().default.state.presenceStore,a,ee().o,te().default.state.targetStore),A().J($().default.state.presenceStore,a,ee().uk,$().default.state.mainEditorCurrentBlockStore),H().cancelSidebarInitialRenderLog()}),[a]),(0,r.useEffect)((()=>{if(!h.current&&(h.current=!0,j().setInitialRenderCompleted(),o&&async function(e){let{environment:t,flowId:i}=e;const r=$().default.state.currentSpaceViewStore;if(!r)return;we("invalid_home_block",i,t);const o=await(0,E().zd)(t,r);o&&w().uK({environment:t,store:o,openInNew:void 0,templateGalleryItem:void 0,projectManagementLaunch:!1,pageVisitSource:l().y8.PersonalHomeErrorRedirect})}({environment:a,flowId:x}),Bt(a)||(0,f().$P)(window.location.href),a.device.isElectron||a.mobileNative)){const e=null==i?void 0:i.requireInterstitial;if(e){const t=e+window.location.hash;_().f({environment:a,url:t}),C().UL(a)?P().aX(a):b().closeTab()}}}),[a,x,null==i?void 0:i.requireInterstitial,o]);const B=(0,n().O$)($().AppStoreCurrentSpaceStore);(0,r.useEffect)((()=>{k().B({environment:a,sudoModeStore:u,pageBlockId:v,currentSpaceStore:B})}),[a,v,u,B]);return(0,g.jsx)(ne().A,{name:"PageError",children:y?null:I?(0,g.jsx)(ht,{store:d}):"teamsInvite"===t.name&&c?(0,g.jsx)(Vt,{publicPageData:i,route:t,store:d,sudoModeStore:u,inviteTargetsStore:p,source:"teamsInvite",canJoinSpace:!0}):T?(0,g.jsx)(Mt,{errorId:D||""}):"initiateExternalAuthenticationFromDesktop"===t.name?(0,g.jsx)(pt,{route:t,store:d}):S?(0,g.jsx)($t,{route:t,store:d}):i?i&&"onboarding"===t.name?(0,g.jsx)(Vt,{publicPageData:i,route:t,store:d,sudoModeStore:u,inviteTargetsStore:p,source:"onboarding",canJoinSpace:!1}):i.spaceName?C().nR(t)||M&&i.requireInterstitial?(0,g.jsx)($t,{route:t,store:d,hideBranding:C().$o(t)}):i.requireInterstitial?(0,g.jsx)(gt,{href:i.requireInterstitial+window.location.hash,store:d}):M?(0,g.jsx)(dt,{route:t,store:d}):c?(0,g.jsx)(Jt,{route:t,publicPageData:i,pageErrorStore:d,sudoModeStore:u,inviteTargetsStore:p}):(0,g.jsx)(zt,{store:d,publicPageData:i}):(0,g.jsx)($t,{route:t,store:d}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Ue,{}),(0,g.jsx)(V().A,{skipFadeinDelay:!0})]})})}function Dt(e){let{inviteeEmail:t}=e;return(0,g.jsx)("div",{style:{color:"#535353",fontSize:"18px",fontWeight:S().Wy.regular,lineHeight:"145.34%",marginBottom:24,maxWidth:358,opacity:.78,textAlign:"center",width:"100%"},children:(0,g.jsx)(x().sA,{id:"signupPage.subtitle.invitationVersion",defaultMessage:"Please check {invitee_email} for your temporary login code.",values:{invitee_email:(0,g.jsx)("b",{children:t})}})})}function Bt(e){return Boolean(e.currentUser.id)}function Rt(e){let{environment:t,currentRoute:i}=e;return(0,r.useEffect)((()=>{P().oo({environment:t,url:`/home?p=${i.peekViewBlockId}&pm=${i.peekMode}`})}),[t,i]),null}function Lt(e){let{isElectron:t,publicPageData:i,showInvitationVersion:r,inviterName:n,greetingStyle:l,iconBoxInitialStyle:c,trustedDomain:d}=e;const u=(0,s().v3)(),p=(0,x().tz)(),m=Boolean(d)&&"none"===i.publicAccessRole,h=(0,a().IS)((()=>({invitation:{fontSize:28,fontWeight:S().Wy.bold,maxWidth:358,letterSpacing:.364,lineHeight:1.2,textAlign:"center",fontFamily:S().vc(o().locale).sans},normal:{fontSize:u.device.isMobile?18:20,fontWeight:S().Wy.medium,marginBottom:10,maxWidth:358,textAlign:"center",...l}})),[u.device.isMobile,l]);return(0,g.jsxs)(g.Fragment,{children:[t&&(0,g.jsx)(me().A,{title:p.formatMessage({defaultMessage:"Log in",id:"errorPage.loggedOutWorkspace.title"})}),r?(0,g.jsx)("div",{style:h.invitation,children:n?(0,g.jsx)(x().sA,{id:"signupPage.title.showInvitationVersion",defaultMessage:"Verify your email to accept {inviter_name}’s invite",values:{inviter_name:n}}):(0,g.jsx)(x().sA,{id:"signupPage.title.showInvitationVersion.noInviterName",defaultMessage:"Verify your email to accept the invite"})}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{marginBottom:12},children:(0,g.jsx)(xe().HS,{publicPageData:i,iconBoxInitialStyle:c,size:"lg"})}),(0,g.jsx)("div",{style:h.normal,children:m?(0,g.jsx)(x().sA,{id:"fullPageError.domainSharingPage.message",defaultMessage:"Sign in to view this shared page"}):(0,g.jsx)(x().sA,{id:"fullPageError.improveLoggedOutLandingExp.message",defaultMessage:"Sign in to see this page in {workspaceName}",values:{workspaceName:(0,g.jsx)("b",{children:i.spaceName})}})})]})]})}function Wt(e){let{sudoModeStore:t,inviteTargetsStore:i}=e;const r=(0,a().DP)(),o=(0,n().K8)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),s=(0,n().O$)(t);return o&&s.privatePageStore&&s.changePermissionsEnabled?(0,g.jsx)("div",{style:{textAlign:"left",borderRadius:4,background:r.modalBackground,position:"relative",boxShadow:r.shadowMD,width:O().$D,margin:"24px auto"},children:(0,g.jsx)(M().k,{store:s.privatePageStore,sudoModeStore:t,inviteTargetsStore:i,location:"no_access_page",onClose:()=>U().Ay.reset()})}):null}function Nt(e){const t=e.state.privatePageStore;if(!e.shouldUserHaveAccessToPrivatePageBlock()||!t)return;const i=t.getModel();if(!i)return;const r=i.getRenderTitleWithPlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,d().P)(),intl:T().A.getIntl(),isWorkflowsAppContainerEnabled:!1}),o=i.getRenderIcon({getRecordModel:t.getRecordModel});return(0,g.jsxs)(g.Fragment,{children:[o&&(0,g.jsx)(ue().B,{isEmptyPage:!0,disabled:!0,icon:o,size:24,style:{display:"inline-block",marginRight:4}}),r&&(0,g.jsx)("span",{children:r})]})}function qt(e){const t=(0,a().IS)((t=>{const i=e.themeOverride??t;return{backgroundImg:{position:"absolute",top:230,WebkitMask:"linear-gradient(to bottom, rgba(0,0,0,1) 50%, rgba(0,0,0,0) 100%)",zIndex:0},wrapper:{boxShadow:i.shadowMD,zIndex:1,border:`1px ${i.stroke.primary}`,background:i.modalBackground,borderRadius:20,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",padding:40},loginDisclaimer:{color:i.text.secondary,maxWidth:400}}}),[e.themeOverride]);return e.isEnabled?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("img",{alt:"",src:c().A.images.onboarding.skeletonPageSvg,style:t.backgroundImg}),(0,g.jsx)("div",{style:t.wrapper,children:e.children}),(0,g.jsx)(R().z,{style:t.loginDisclaimer,themeOverride:e.themeOverride})]}):(0,g.jsx)(g.Fragment,{children:e.children})}function zt(e){var t;let{publicPageData:i,store:o}=e;const l=(0,a().DP)(),c=(0,s().v3)(),{device:d}=c,{inviteeEmail:m,inviterName:S,showInvitationVersion:y}=(0,n().K8)((()=>{const{inviteeEmail:e,inviterName:t}=q().A.state;return{inviteeEmail:e,inviterName:t,showInvitationVersion:N().A.isTemporaryPasscode()&&e===N().A.state.email}}),[]),b=(0,v().O4)({theme:"light"}),j=null!==(t=i.domainLinkSharingEnabledDomains)&&void 0!==t&&t.length&&"none"===i.publicAccessRole?i.domainLinkSharingEnabledDomains[0]:void 0;(0,r.useEffect)((()=>{we("team_login",o.state.flowId,c),(0,f().wA)(window.location.href)}),[o,c]);const A=(0,n().K8)((()=>!(d.isMobile||d.isElectron||y)),[d.isElectron,d.isMobile,y]),w=(0,n().K8)((()=>A?{paddingTop:"5vh"}:{}),[A]),_=(0,n().K8)((()=>N().A.isMfa()),[]),k=(0,g.jsx)(le().A,{capture:!0,allowMobileAutoScroll:!0,render:e=>(0,g.jsx)(he().A,{analyticsName:"team_login",hideNavItems:!0,hideNotificationBanner:!0,children:(0,g.jsxs)(Fe,{style:w,...e,children:[(0,g.jsxs)(qt,{isEnabled:A,themeOverride:b,children:[(0,g.jsx)(Lt,{isElectron:c.device.isElectron,publicPageData:i,showInvitationVersion:y,inviterName:S,greetingStyle:{color:b.text.primary,overflow:"hidden",textOverflow:"ellipsis"},iconBoxInitialStyle:{background:b.regularDividerColor,color:b.text.secondary},trustedDomain:j}),m&&y?(0,g.jsx)(Dt,{inviteeEmail:m}):null,_?(0,g.jsx)(W().A,{loginStore:N().A}):(0,g.jsx)(B().A,{emailLabelType:"email",style:{maxWidth:300},emailPasscodePlaceholderType:y?"paste_code":"enter_code",from:"pageError",loginStore:N().A,showInvitationVersion:y,isSignup:y,themeOverride:b,disableDisclaimer:A})]}),d.isMobile&&!d.isMobileNative&&!y&&(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)("div",{style:{height:1,width:"100vw",background:l.regularDividerColor,marginTop:36,marginBottom:36}}),(0,g.jsxs)(de().A,{style:{width:280},size:"lg",onClick:()=>{P().eG({url:window.location.href,environment:c})},children:[d.isIOS?(0,u().L)(Ct):p(Ct),(0,g.jsx)(x().sA,{id:"fullPageError.openInMobileAppButton.label",defaultMessage:"Open in mobile app"})]}),(0,g.jsx)(ce().A,{href:d.isIOS?h().JZ.appStore:h().JZ.playStore,external:!0,innerStyle:{marginTop:16},children:(0,g.jsx)(pe().A,{isSmall:!0,style:{textDecoration:"underline",fontSize:14,color:b.text.secondary},children:(0,g.jsx)(x().sA,{id:"fullPageError.downloadMobileAppButton.label",defaultMessage:"Get mobile app"})})})]}),(0,g.jsx)(Ye,{forceTheme:b})]})})});return c.device.isMobileNative?(0,g.jsx)(ge().H,{type:Y().A.Y,style:{width:"100%",height:"100%",overflow:"auto",WebkitOverflowScrolling:"touch"},children:k}):k}function Ft(e){let{publicPageData:t,sudoModeStore:i,inSudoModeAndInTrash:o,route:a,store:l}=e;const c=(0,n().K8)((()=>l.state.flowId),[l]),d=(0,s().v3)(),{spaceId:u,pageId:p}={...t},m=(0,r.useCallback)((async()=>{const{currentSpaceStore:e}=$().default.state,t=i.state.privatePageStore;e&&t&&(await I().iN({environment:d,block:t,spaceId:t.pointer.spaceId||e.id,from:"page_error"}),i.reset())}),[i,d]);return t&&t.canRequestAccess&&u&&p?(0,g.jsxs)(fe().Ye,{gap:8,children:[(0,g.jsx)(it,{route:a,store:l,color:"white"}),o?(0,g.jsx)(de().A,{onClick:m,size:"lg",children:(0,g.jsx)(x().sA,{id:"fullPageError.pageInTrash.restoreButton",defaultMessage:"Restore page"})}):(0,g.jsx)(ve().A,{type:"current-actor-to-block",block:{id:p,spaceId:u},flowId:c})]}):(0,g.jsx)(it,{route:a,store:l,color:"white"})}function Ot(e){let{route:t,store:i}=e;const r=(0,n().K8)((()=>i.state.flowId),[i]);if("teamsInvite"!==t.name)return(0,g.jsx)(it,{route:t,store:i,color:"white"});const{teamId:o}=t;return o?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(it,{route:t,store:i,color:"white"}),(0,g.jsx)(ve().A,{buttonType:"primary",type:"current-actor-to-space-via-team",teamId:o,flowId:r})]}):(0,g.jsx)(it,{route:t,store:i,color:"white"})}function Ut(e){let{route:t,store:i,sudoModeStore:r,publicPageData:o,trustedDomain:a}=e;const l=(0,s().v3)(),c=(0,n().uB)(void 0,F().A),d=(0,n().uB)(void 0,z().A);return(0,g.jsxs)(Fe,{children:[(0,g.jsx)(Ue,{}),(0,g.jsx)(ot,{isElectron:l.device.isElectron}),(0,g.jsx)(Oe,{}),(0,g.jsx)(He,{icon:(0,g.jsx)(xe().fD,{type:"noAccess",publicPageData:o}),title:(0,g.jsx)(x().sA,{id:"fullPageError.domainSharingPage.title",defaultMessage:"No access to this shared page"}),description:(0,g.jsx)(x().sA,{id:"fullPageError.domainSharingPage.messageV2",defaultMessage:"You can access this page by signing in to an account with a <b>@{trustedDomain}</b> email address.",values:{trustedDomain:a,b:e=>(0,g.jsx)("b",{children:e})}}),actionButtons:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(it,{route:t,store:i,color:"white"}),(0,g.jsxs)(de().A,{size:"lg",onClick:()=>d.setState({open:!0}),children:[(0,g.jsx)(x().sA,{id:"fullPageError.domainSharingPage.login.",defaultMessage:"Log in"}),(0,g.jsx)(L().z,{loginModalStore:d,loginStore:c,title:(0,g.jsx)(x().sA,{id:"sidebarSwitcherMultiAccount.addAccount.title",defaultMessage:"Add an account"}),description:(0,g.jsx)(x().sA,{id:"sidebarSwitcherMultiAccount.addAccount.descriptionV2",defaultMessage:"Log in/sign up with a @makenotion.com email address. Your current account will remain logged in."}),className:"notion-space-settings",trustedDomain:a})]})]}),children:(0,g.jsx)(lt,{sudoModeStore:r})}),(0,g.jsx)($e,{loginModalStore:d,loginStore:c,trustedDomain:a})]})}function Ht(e){let{publicPageData:t,route:i,store:r,sudoModeStore:o,inviteTargetsStore:a}=e;const l=(0,s().v3)(),c=(0,n().K8)((()=>o.state.loading),[o]),d=(0,n().K8)((()=>o.shouldUserHaveAccessToPrivatePageBlock&&o.shouldUserHaveAccessToPrivatePageBlock()&&o.state.changePermissionsEnabled),[o]),u=(0,n().K8)((()=>o.shouldUserHaveAccessToPrivatePageBlock()),[o]),p=(0,n().K8)((()=>{if(!u||!Z().default.checkGate({gateName:"cdrr_deleted_from_trash_view"}))return!1;const e=o.state.privatePageStore;return!!e&&(e.pathHasDeletedPermission()&&!e.pathHasPurgedDeletedPermission())}),[o,u]),m=(0,n().K8)((()=>Boolean(o.state.privatePageStore&&o.state.privatePageStore.pathIsDead()&&Z().default.checkGate({gateName:"cdrr_deleted_from_trash_view"}))),[o]),h=(0,n().K8)((()=>Nt(o)),[o]);return c?(0,g.jsx)(V().A,{skipFadeinDelay:!0}):p?(0,g.jsx)(Yt,{sudoModeStore:o,route:i,store:r}):(0,g.jsxs)(Fe,{children:[(0,g.jsx)(Ue,{}),(0,g.jsx)(ot,{isElectron:l.device.isElectron}),(0,g.jsx)(Oe,{}),(0,g.jsxs)(He,{icon:(0,g.jsx)(xe().fD,{type:"noAccess",publicPageData:t}),title:d?(0,g.jsx)(_e,{pageTitle:h}):(0,g.jsx)(st,{canRequestAccess:Boolean(null==t?void 0:t.canRequestAccess),pageTitle:h,inSudoModeAndInTrash:m}),description:d?(0,g.jsx)(Pe,{}):(0,g.jsx)(nt,{canRequestAccess:Boolean(null==t?void 0:t.canRequestAccess),inSudoModeAndInTrash:m}),actionButtons:(0,g.jsx)(Ft,{publicPageData:t,sudoModeStore:o,inSudoModeAndInTrash:m,route:i,store:r}),children:[u?(0,g.jsx)(Wt,{sudoModeStore:o,inviteTargetsStore:a}):null,m?null:(0,g.jsx)(lt,{sudoModeStore:o})]}),(0,g.jsx)($e,{})]})}function Vt(e){const t=(0,s().v3)(),{source:i,canJoinSpace:o,publicPageData:n,route:a,store:l,sudoModeStore:c,inviteTargetsStore:d}=e;if((0,r.useEffect)((()=>{"onboarding"===i?we("onboarding_error",l.state.flowId,t):"teamsInvite"===i?we("team_invite_no_access",l.state.flowId,t):n&&we("team_no_access",l.state.flowId,t)}),[n,i,l,t]),n){var u;const e=null!==(u=n.domainLinkSharingEnabledDomains)&&void 0!==u&&u.length?n.domainLinkSharingEnabledDomains[0]:void 0;return e?(0,g.jsx)(Ut,{route:a,store:l,sudoModeStore:c,publicPageData:n,trustedDomain:e}):(0,g.jsx)(Ht,{publicPageData:n,route:a,store:l,sudoModeStore:c,inviteTargetsStore:d})}return(0,g.jsxs)(Fe,{children:[(0,g.jsx)(Ue,{}),(0,g.jsx)(ot,{isElectron:t.device.isElectron}),(0,g.jsx)(Oe,{}),(0,g.jsx)(He,{icon:n?(0,g.jsx)(xe().fD,{type:"noAccess",publicPageData:n}):null,title:o?(0,g.jsx)(x().sA,{id:"fullPageError.notInWorkspace.message",defaultMessage:"You are not in this workspace."}):(0,g.jsx)(x().sA,{id:"fullPageError.accessNotAllowed.message",defaultMessage:"You do not have access to this page."}),description:"teamsInvite"===i?(0,g.jsx)(x().sA,{id:"fullPageError.canRequestWorkspaceAccess.message",defaultMessage:"You can access this workspace if someone approves your request."}):null,actionButtons:(0,g.jsx)(Ot,{route:a,store:l}),children:(0,g.jsx)(lt,{sudoModeStore:c})}),(0,g.jsx)($e,{})]})}function Kt(e){let{publicPageData:t,route:i,store:o,sudoModeStore:n,inviteTargetsStore:a}=e;const l=(0,s().v3)();return(0,r.useEffect)((()=>{we("team_page_no_access",o.state.flowId,l)}),[l,o]),(0,g.jsx)(Ht,{publicPageData:t,route:i,store:o,sudoModeStore:n,inviteTargetsStore:a})}function Yt(e){let{sudoModeStore:t,route:i,store:o}=e;const a=(0,s().v3)(),l=(0,n().K8)((()=>t.state.privatePageStore),[t]),c=(0,n().K8)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),d=(0,n().O$)(oe().subscriptionDataStoreInstance),u=(0,D().T)({subscriptionData:d}),p=(0,r.useCallback)((()=>{l&&I().tz({environment:a,blockStore:l,handleSuccess:()=>{y().L(a,{pageId:l.id,from:"page"}),P().VP({environment:a,blocks:[l]})}})}),[a,l]),h=(0,r.useCallback)((e=>(0,g.jsx)(de().A,{...e,size:"lg",children:(0,g.jsx)(x().sA,{id:"fullPageError.deletedFromTrashPage.restoreButton",defaultMessage:"Restore page"})})),[]),f=(0,n().K8)((()=>Nt(t)),[t]);return l&&c?(0,g.jsxs)(Fe,{children:[(0,g.jsx)(Ue,{}),(0,g.jsx)(ot,{isElectron:a.device.isElectron}),(0,g.jsx)(Oe,{}),(0,g.jsx)(He,{title:(0,g.jsx)(x().sA,{id:"fullPageError.deletedFromTrashPage.titleWithPageName",defaultMessage:"<bold>{pageTitle}</bold> has been deleted from the Trash",values:{pageTitle:f,bold:e=>(0,g.jsx)("b",{children:e})}}),description:(0,g.jsx)(x().sA,{id:"fullPageError.deletedFromTrashPage.message",defaultMessage:"As a workspace owner, you can restore this page. <br>This will be recorded in the audit log.</br>",values:{br:e=>(0,g.jsx)("div",{children:e})}}),actionButtons:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(it,{route:i,store:o,color:"white"}),(0,g.jsx)(se().V,{renderPopupOrigin:h,blockStore:l,environment:a,placementToOrigin:K().W.Bottom,includeNonRestoreActions:!1,getValidDeletedPermissions:u,from:"retainedPage"})]}),children:(0,g.jsx)(ae().p,{icon:m().I,isGray:!0,size:"lg",onClick:p,children:(0,g.jsx)(x().sA,{id:"fullPageError.deletedFromTrashPage.permanentlyDeleteButton",defaultMessage:"Permanently delete"})})}),(0,g.jsx)($e,{})]}):null}function $t(e){let{store:t,route:i,hideBranding:o=!1}=e;const n=(0,s().v3)(),{device:a}=n,{isElectron:l}=a,c=Bt(n),d=(0,x().tz)();return(0,r.useEffect)((()=>we("404",t.state.flowId,n)),[t,n]),(0,g.jsxs)(Fe,{children:[l?(0,g.jsx)(me().A,{title:d.formatMessage({defaultMessage:"Not found",id:"errorPage.contentDoesNotExist.tabTitle"})}):null,(0,g.jsx)(Ue,{}),o?null:(0,g.jsx)(Oe,{}),(0,g.jsx)(He,{title:(0,g.jsx)(x().sA,{id:"fullPageError.notFoundError.title",defaultMessage:"This page couldn’t be found"}),description:(0,g.jsx)(x().sA,{id:"fullPageError.notFoundError.description",defaultMessage:"You may not have access, or it might have been deleted or moved. Check the link and try again."}),actionButtons:c?(0,g.jsx)(it,{route:i,store:t,color:"white"}):null}),o?null:c?(0,g.jsx)($e,{}):(0,g.jsx)(Ye,{})]})}function Jt(e){let{route:t,publicPageData:i,pageErrorStore:r,sudoModeStore:o,inviteTargetsStore:a}=e;const l=(0,s().v3)(),{allStoresLoaded:c,foundSpaceView:d}=(0,n().K8)((()=>{const{currentUserRootStore:e}=$().default.state;if(!e||!e.isReady())return{allStoresLoaded:!1,foundSpaceView:null};const t=(null==e?void 0:e.getSpaceViewStores())||[];if(!t.every((e=>e.isReady())))return{allStoresLoaded:!1,foundSpaceView:null};return{allStoresLoaded:!0,foundSpaceView:t.find((e=>e.getSpaceId()===i.spaceId))}}),[i.spaceId]);return c?d&&"page"===t.name?t.peekViewBlockId?(0,g.jsx)(Rt,{environment:l,currentRoute:t}):(0,g.jsx)(Kt,{publicPageData:i,route:t,store:r,sudoModeStore:o,inviteTargetsStore:a}):i.canJoinSpace?"space"===t.name?(0,g.jsx)(Zt,{publicPageData:i,pageErrorStore:r}):(0,g.jsx)(Vt,{publicPageData:i,route:t,store:r,sudoModeStore:o,inviteTargetsStore:a,source:"workspace",canJoinSpace:!0}):(0,g.jsx)(Vt,{publicPageData:i,route:t,store:r,sudoModeStore:o,inviteTargetsStore:a,source:"workspace",canJoinSpace:!1}):null}function Zt(e){let{publicPageData:t,pageErrorStore:i}=e;const o=(0,s().v3)(),a=(0,n().K8)((()=>i.state.flowId),[i]);return(0,r.useEffect)((()=>{je({publicPageData:t,environment:o,flowId:a,store:i,skipClickLogging:!0})}),[t,o,a,i]),null}},555296:(e,t,i)=>{i.d(t,{h:()=>s});i(242343);var r=i(163643);const o={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"}),(0,r.jsx)("path",{d:"M10 1.95a4 4 0 0 0-4 4v1.433a2.426 2.426 0 0 0-2.025 2.392v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.426 2.426 0 0 0 14 7.383V5.95a4 4 0 0 0-4-4m2.75 5.4h-5.5v-1.4a2.75 2.75 0 0 1 5.5 0zM5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},s=(0,i(680369).wt)("lock",o)},601661:(e,t,i)=>{i.r(t),i.d(t,{measurePageRenderMetrics:()=>w,setInitialRenderCompleted:()=>j,setSubMetric:()=>S,setSubMetricsAtRenderCallback:()=>v,updateMetricData:()=>y,updateMetricDataWithIsPushTag:()=>A,updateOPFSMetricData:()=>b});i(725707),i(403517),i(113085),i(875472),i(76509),i(863754);var r=()=>i(412989),o=()=>i(982177),s=()=>i(86979),n=()=>i(137476),a=()=>i(37312),l=()=>i(211923),c=()=>i(695398),d=()=>i(392608),u=()=>i(157230),g=()=>i(196387),p=()=>i(876359),m=()=>i(836331),h=()=>i(172470),f=()=>i(230557),x=()=>i(551455);function v(e){const{mainStartTime:t,prefetchInitiatedTime:i,statsigBootupBlockingStartTime:r,renderStartTime:s,renderEndTime:n}=e,a=o().getAppStartTime();if(!a)return;const l={app_start_to_main_start:{startTime:a,endTime:t},main_start_to_prefetch_initiated:{startTime:t,endTime:i},prefetch_initiated_to_statsig_bootup_blocking_start:{startTime:i,endTime:r},statsig_bootup_blocking:{startTime:r,endTime:s},render_start_to_render_end:{startTime:s,endTime:n}};for(const[o,c]of Object.entries(l)){const e=null==c?void 0:c.startTime,t=null==c?void 0:c.endTime;e&&t&&(0,p().f)({name:o,startTime:e,endTime:t})}h().A.state.subMetricsStore.update((e=>({...e,...l})))}function S(e){const{name:t,endTime:i}=e,r=e.startTime(h().A.state.subMetricsStore.state);r&&(h().A.state.subMetricsStore.update((e=>({...e,[t]:{startTime:r,endTime:i}}))),(0,p().f)({name:t,startTime:r,endTime:i}))}function y(e){h().A.state.metricDataStore.update((t=>({...t,...e})))}function b(e){h().A.state.OPFSMetricDataStore.update((t=>({...t,...e})))}function j(){h().A.update((e=>({...e,initialRenderCompleted:!0}))),u().N.markInitialPageRendered()}function A(e){const t=e.RouterStore.state;let i;var r;"page"===t.route.name&&(i=t.route.mobileData,y({is_push:null===(r=i)||void 0===r?void 0:r.isPush}))}function w(e){let{environment:t,isEditable:i,isHomePage:s,isWikiHome:l,isPageWithCustomLayout:c,idSchema:p}=e;const{initialRoute:{name:v},route:y}=t.RouterStore.state,{initialRenderCompleted:b,initialRenderAfterLoginCompleted:A}=h().A.state,w=a().isPrewarmedTabInitialRender(t),k=(0,d().w6)(t);b?A||"login"!==v?function(e,t){const i="page"===t.name?t.mobileData:void 0,r=x().A.popTimings();if(r){const{navigationStart:o,requestFirstChunkStart:s,requestFirstChunkEnd:a,requestFirstChunkSource:l,requestFirstChunkLocalSource:c,pageViewBlockRender:d}=r,p=performance.now(),m="page"===t.name?e.prefetchCache.getPrefetchAnalytic(`loadCachedPageChunk(${t.blockId})`):void 0;g().default.measure({metricName:"navigation_page_render",startTime:o,endTime:p},{environment:e,data:{is_push:(null==i?void 0:i.isPush)??!1,wasm_sqlite_initialized:h().A.state.metricDataStore.state.wasm_sqlite_initialized,...m?{page_chunk_prefetch:m,page_chunk_prefetch_type:m.type}:{}}}),u().N.markNavigationRender(e),(0,n().LM)({eventName:"navigation_page_render_sub_metric",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((t=>{if(!t)return;const i=i=>({environment:e,data:{type:i,chunk_source:l,local_source:c},sampleDecision:t});s&&g().default.measure({metricName:"navigation_page_render_sub_metric",startTime:o,endTime:s},i("navigation_start_to_request_first_chunk_start")),s&&a&&g().default.measure({metricName:"navigation_page_render_sub_metric",startTime:s,endTime:a},i("request_first_chunk_start_to_request_first_chunk_end")),a&&d&&g().default.measure({metricName:"navigation_page_render_sub_metric",startTime:a,endTime:d},i("request_first_chunk_end_to_pvb_render")),d&&g().default.measure({metricName:"navigation_page_render_sub_metric",startTime:d,endTime:p},i("pvb_render_to_handle_navigation_render"))}))}f().A.state.isMeasuring&&f().A.update((e=>({...e,isMeasuring:!1})))}(t,y):function(e){g().default.DO_NOT_USE_measureLegacy("initial_page_render_after_login",{environment:e}),h().A.update((e=>({...e,initialRenderAfterLoginCompleted:!0})))}(t):w?function(e){let{environment:t,initialRoute:i,isEditable:r,isHomePage:o,isWikiHome:s,isPageWithCustomLayout:n,isPublicDomain:a,idSchema:l}=e;j();const c=performance.now();S({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:c});const d=h().A.state.prewarmedTabAppStartTimeOverride;d&&g().default.measure({metricName:"initial_page_render",startTime:d,endTime:c},{environment:t,data:_({initialRoute:i,isEditable:r,isHomePage:o,isWikiHome:s,isPageWithCustomLayout:n,isPublicDomain:a,idSchema:l,isPrewarmedTab:!0,prewarmedTabNavigationStart:d}),shouldSendIfStatsigNotInitialized:!0});f().A.state.isMeasuring&&f().A.update((e=>({...e,isMeasuring:!1})))}({environment:t,initialRoute:v,isEditable:i,isHomePage:s,isWikiHome:l,isPageWithCustomLayout:c,isPublicDomain:k,idSchema:p}):function(e){var t;let{environment:i,initialRoute:s,isEditable:a,isHomePage:l,isWikiHome:c,isPageWithCustomLayout:d,isPublicDomain:u,idSchema:p}=e;const{initialLoadCachedPageChunkCalledAt:f}=h().A.state;j();const x=Boolean(null===(t=performance)||void 0===t?void 0:t.mark)?performance.mark("initial_page_render").startTime:performance.now();r().S3.mark("initial_page_render"),S({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:x});const v=o().getAppStartTime(),y=o().getPageOriginTime();v&&y&&y>0&&v>y&&S({name:"page_origin_to_app_start",startTime:()=>y,endTime:v});g().default.measureFromPageOrigin({metricName:"initial_page_render",endTime:x},{environment:i,data:_({initialRoute:s,isEditable:a,isHomePage:l,isWikiHome:c,isPageWithCustomLayout:d,isPublicDomain:u,idSchema:p,prefetchedQueryCollection:P(i),isPrewarmedTab:!1}),shouldSendIfStatsigNotInitialized:!0});h().A.state.subMetricsStore.state;void 0!==f&&g().default.DO_NOT_USE_measureFromPageOriginLegacy({metricName:"load_cached_page_chunk_wait_time",endTime:f},{environment:i,data:{initial_route:s},shouldSendIfStatsigNotInitialized:!0,sendToStatsig:!0});m().default.checkGate({gateName:"beacon_pre_ipr_assets"})&&function(e,t){var i;if(null===(i=performance)||void 0===i||!i.getEntriesByType)return;const r=performance.getEntriesByType("resource"),o={eventName:"pre_ipr_assets",eventProperties:{ipr_end:t,assets:r.map((e=>{let t;try{t=new URL(e.name).pathname}catch{t=e.name}return{url:t,initiator_type:e.initiatorType,time:e.duration,perf_start:e.startTime,perf_end:e.startTime+e.duration,decoded_body_size:e.decodedBodySize,transfer_size:e.transferSize}}))}};(0,n().u4)({environment:e,event:o})}(i,x)}({environment:t,initialRoute:v,isEditable:i,isHomePage:s,isWikiHome:l,isPageWithCustomLayout:c,isPublicDomain:k,idSchema:p})}function _(e){const{initialRoute:t,isEditable:i,isHomePage:r,isWikiHome:s,isPageWithCustomLayout:n,isPublicDomain:l,isPrewarmedTab:d,idSchema:u,prefetchedQueryCollection:g}=e;return{...a().getSubMetricsAndMetricDataForTracking(e.isPrewarmedTab?{isPrewarmedTab:!0,prewarmedTabNavigationStart:e.prewarmedTabNavigationStart}:{isPrewarmedTab:!1}),initial_route:t,is_editable:i,is_home_page:r,is_page_with_custom_layout:n,is_public_domain:l,profiling_tool:(0,c().getProfilingToolForSession)(),is_wiki_home:s,time_origin_to_app_start:o().getAppStartTime(),includes_page_origin_to_app_start:!0,id_schema:u,prefetched_cvb:g,is_prewarmed_tab:d,desktop_load_origin:a().getDesktopLoadOrigin(d),desktop_tab_count:h().A.state.desktopTabCount}}function P(e){const t=e.RouterStore.state.route;if("page"!==t.name||!t.blockId)return!1;return s().Ob.lookupViewIds(t.blockId).some((t=>{var i;const r=(0,l().A)(t),o=null===(i=e.prefetchCache)||void 0===i?void 0:i.getPrefetchAnalytic(r);return"hit-match"===(null==o?void 0:o.type)||"attempted"===(null==o?void 0:o.type)||"hit-mismatch"===(null==o?void 0:o.type)}))}},616281:(e,t,i)=>{i.d(t,{A:()=>s});var r=i(242343),o=()=>i(437071);function s(e){return(0,r.useEffect)((()=>{document.title=e.title,o().setWindowTitle(e.title)}),[e.title]),e.children}},736530:(e,t,i)=>{i.d(t,{z:()=>p});var r=i(242343),o=()=>i(237385),s=()=>i(803290),n=()=>i(174114),a=()=>i(653998),l=()=>i(539048),c=()=>i(142708),d=()=>i(360128),u=()=>i(98508),g=i(163643);function p(e){let{loginModalStore:t,loginStore:i,title:n,description:a,isSignup:c,disableLoginLink:u,redirectURL:p,className:x,onDismiss:v,trustedDomain:S}=e;const y=(0,o().v3)(),b=(0,s().K8)((()=>t.state.open),[t]),j=(0,r.useId)(),A=(0,r.useId)(),w={loginStore:i,title:n,description:a,isSignup:c,redirectURL:p,disableLoginLink:u,titleAriaId:j,descriptionAriaId:A,trustedDomain:S};return(0,g.jsx)(l().s,{ariaLabelledBy:j,ariaDescribedBy:A,isOpen:b,onDismiss:()=>{f({loginModalStore:t,loginStore:i,onDismiss:v})},areaConstraint:{width:{type:"fixed",length:480},height:{type:"unlimited",scroll:"allow"}},deprecatedCompatibilityOverrides:{tabletsUsePhoneDisplayMode:!0},render:()=>(0,g.jsx)(m,{children:(0,g.jsxs)("div",{className:x,children:[!y.device.isMobile&&(0,g.jsx)(h,{loginModalStore:t,loginStore:i,onDismiss:v}),(0,g.jsx)(d().Yo,{...w})]})})})}function m(e){let{children:t}=e;return(0,o().v3)().device.isMobile?(0,g.jsx)(c().H,{type:u().A.Y,children:t}):t}function h(e){let{loginModalStore:t,loginStore:i,onDismiss:r}=e;const o=(0,n().DP)();return(0,g.jsx)("div",{style:{fontSize:14,color:o.text.secondary,position:"absolute",right:0,marginTop:16,marginRight:16,cursor:"pointer",zIndex:1},onClick:()=>{f({loginModalStore:t,loginStore:i,onDismiss:r})},children:(0,g.jsx)(a().sA,{defaultMessage:"Cancel",id:"sidebarSwitcherMultiAccount.addAccountModal.cancelButton.label"})})}function f(e){const{loginModalStore:t,loginStore:i,onDismiss:r}=e;i.reset(),t.setState({open:!1}),r&&r()}},743977:(e,t,i)=>{i.d(t,{A:()=>d});i(242343);var r=()=>i(803290),o=()=>i(174114),s=()=>i(653998),n=()=>i(31448),a=()=>i(785205),l=()=>i(665317),c=i(163643);function d(e){let{isUpworkSignup:t,isPerfmarkTrialSignup:i,isAddAnotherAccount:d}=e;const u=(0,o().DP)(),g=(0,r().K8)((()=>(0,a().A)()),[]),p=(0,l().Nz)(),m=(0,l().EB)(),h=t?(0,c.jsx)(s().sA,{id:"signupPage.upwork.title",defaultMessage:"Try Notion Plus, on us"}):i?(0,c.jsx)(s().sA,{id:"signupPage.perfmarkTrial.title",defaultMessage:"Start your free Notion Plus trial"}):g?(0,c.jsx)(s().sA,{id:"signupPage.formResponse.title",defaultMessage:"Sign up to see a copy of your form response"}):p?(0,c.jsx)(s().sA,{id:"signupPage.mail.title",defaultMessage:"Welcome to Notion Mail"}):m?(0,c.jsx)(s().sA,{id:"signupPage.calendar.title",defaultMessage:"Welcome to Notion Calendar"}):(0,c.jsx)(s().sA,{id:"signupPage.revamped.title",defaultMessage:"Think it. Make it."}),f=t?(0,c.jsx)(s().sA,{id:"signupPage.upwork.signInText",defaultMessage:"Sign up to get started"}):i?(0,c.jsx)(s().sA,{id:"signupPage.smbTrial.signInText",defaultMessage:"No credit card required"}):g?void 0:d?(0,c.jsx)(s().sA,{id:"signupPage.addAnotherAccount.subtitle",defaultMessage:"Log in or create an account"}):(0,c.jsx)(s().sA,{id:"signupPage.revamped.signInText",defaultMessage:"Create your Notion account"});return(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left",fontWeight:n().Wy.semibold,fontSize:22,letterSpacing:"-0.264px",lineHeight:"26px",width:320},children:[(0,c.jsx)("div",{children:h}),(0,c.jsx)("div",{style:{color:u.text.tertiary},children:f})]})}},744819:(e,t,i)=>{i.d(t,{A:()=>o});i(242343);var r=i(163643);const o=(0,i(680369).wt)("notionLogoStroked",{viewBox:"0 0 41 42",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M4.253 2.903h0-.01c-1.02.09-1.806.481-2.322 1.142-.5.642-.671 1.441-.671 2.21v23.228c0 1.267.47 2.316 1.416 3.577h0l.006.008 4.99 6.477h0l.005.005c.465.593.963 1.017 1.617 1.256.63.23 1.33.26 2.138.221h.01l24.652-1.49h.008c1.137-.08 2.038-.396 2.632-1.071.588-.668.746-1.543.746-2.431V9.904c0-.584-.133-1.05-.508-1.486-.27-.311-.669-.602-1.113-.925a54.305 54.305 0 01-.176-.13l-.007-.004-.005-.004-6.772-4.761c-.838-.609-1.516-1.017-2.365-1.21-.824-.187-1.75-.156-3.047-.044L4.253 2.903z",fill:"#fff",stroke:"#fff",strokeWidth:"1.5"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.257 3.158L5.176 4.637c-1.62.14-2.184 1.197-2.184 2.464v21.971c0 .987.352 1.83 1.198 2.959l4.72 6.126c.776.987 1.48 1.198 2.96 1.127l23.32-1.408c1.973-.14 2.537-1.057 2.537-2.606V10.552c0-.801-.316-1.032-1.25-1.714l-.16-.117-6.41-4.507c-1.55-1.126-2.184-1.268-4.65-1.056zM12.4 10.146c-1.904.129-2.337.158-3.418-.72l-2.75-2.183c-.28-.283-.14-.635.565-.705L26.102 5.13c1.62-.141 2.466.423 3.1.916l3.311 2.394c.141.07.493.492.07.492L12.645 10.13l-.245.016zM10.179 35.06V14.074c0-.916.281-1.338 1.126-1.41l22.898-1.337c.777-.07 1.128.423 1.128 1.338v20.844c0 .916-.14 1.691-1.41 1.761l-21.91 1.268c-1.269.07-1.832-.352-1.832-1.48zm21.63-19.86c.141.635 0 1.268-.635 1.34l-1.056.21v15.492c-.916.493-1.761.775-2.466.775-1.128 0-1.41-.352-2.255-1.408l-6.905-10.845v10.493l2.185.493s0 1.267-1.763 1.267l-4.86.282c-.142-.282 0-.986.492-1.127l1.269-.351V17.947l-1.761-.142c-.141-.634.21-1.549 1.197-1.62l5.214-.351 7.187 10.986V17.1l-1.832-.21c-.14-.776.422-1.339 1.127-1.409l4.863-.283z",fill:"#222"})]})})},790837:(e,t,i)=>{i.d(t,{K:()=>d});i(242343);var r=()=>i(713055),o=()=>i(653998),s=()=>i(437071),n=()=>i(356813),a=()=>i(637269),l=i(163643);const c=(0,o().YK)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function d(){const e=(0,o().tz)();return(0,l.jsx)(n().A,{style:{position:"absolute",top:"10px",left:"14px",width:24,height:24,zIndex:1e5,...(0,a().g)({noDrag:!0})},iconStyle:{width:16,height:16},isDarkIconColor:!0,onClick:()=>{s().openAppMenu()},icon:r().S,ariaLabel:e.formatMessage(c.menu)})}},872289:(e,t,i)=>{i.d(t,{A:()=>E});var r=i(242343),o=()=>i(237385),s=()=>i(803290),n=()=>i(129044),a=()=>i(653998),l=()=>i(220413),c=()=>i(76394),d=()=>i(31448),u=()=>i(271120),g=()=>i(441288),p=()=>i(375567),m=()=>i(818369),h=()=>i(868325),f=()=>i(640979),x=()=>i(485966),v=()=>i(764227),S=()=>i(921637),y=()=>i(441292),b=()=>i(59175),j=()=>i(935091),A=()=>i(286404),w=()=>i(951540),_=i(163643);const P={marginBottom:10},k={...P,width:"100%",height:"100%",padding:10,alignItems:"top",borderRadius:0},I=(0,a().YK)({requestAccessMessagePlaceholder:{defaultMessage:"Message (optional)",id:"requestAccessForm.messageInput.placeholder"},rateLimitError:{defaultMessage:"You have recently requested access to this page.",id:"requestAccessForm.errorMessage.rateLimit"},currentUserNotFound:{defaultMessage:"Current user not found.",id:"requestAccessForm.errorMessage.currentUserNotFound"}});function M(){return(0,_.jsx)(a().sA,{defaultMessage:"Cancel",id:"requestAccessForm.cancelButton.label"})}const T=n().default.createClass(0,{name:"RequestAttemptStore"}),C=n().default.createClass(void 0,{name:"MessageStore"});const E=function(e){const t=(0,o().v3)(),n=(0,o().WS)(),l=(0,s().uB)(e.popupStore,i(962373).A),c=(0,s().uB)(void 0,C),g=(0,s().uB)(void 0,T),m=(0,r.useCallback)((()=>R(l)),[l]),h=(0,r.useCallback)((()=>(0,_.jsx)(W,{...e,requestAttemptStore:g,messageStore:c,buttonPopupStore:l})),[e,g,c,l]),f=(0,s().K8)((()=>g.state>0),[g]),x=(0,s().K8)((()=>l.state.open),[l]);if("current-actor-to-block"===e.type)return(0,_.jsx)(N,{type:"page",block:e.block,flowId:e.flowId,buttonType:e.buttonType});if("current-actor-to-collection"===e.type)return(0,_.jsx)(N,{type:"collection",collection:e.collection,flowId:e.flowId,buttonType:e.buttonType});const v="primary"===e.buttonType?w().A:A().A,S=n?(0,_.jsx)(i(443252).Ay,{popupType:i(466321).n.SlideUp,open:x,render:h}):(0,_.jsx)(i(922172).a,{open:x,onDismiss:m,render:h});return"current-actor-to-space-via-onboarding"===e.type?S:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(v,{size:"lg",disabled:f,onClick:()=>{var i,r;return function(e,t){const{environment:i,flowId:r,type:o,source:s,spaceId:n,pageId:a}=e;"trusted_domain_page"===s&&n&&p().w(i,{spaceId:n,pageId:a,joinSpaceMethod:"request_to_join"});"current-actor-to-block"===o?u().Xx(i,{button_name:"request-access",flow_id:r,request_access_type:"page"}):"current-actor-to-space-via-team"===o&&u().Xx(i,{button_name:"request-access",flow_id:r,request_access_type:"team"});t.setState({open:!0})}({environment:t,flowId:e.flowId,type:e.type,source:e.source,pageId:null===(i=e.block)||void 0===i?void 0:i.id,spaceId:null===(r=e.block)||void 0===r?void 0:r.spaceId},l)},style:"outline"===e.buttonType?{fontWeight:d().Wy.semibold}:{},children:f?(0,_.jsx)(a().sA,{id:"fullPageError.requestAccessButton.requested",defaultMessage:"Requested access"}):q(e.type)}),S]})};function D(e){let{result:t}=e;return t&&t.error?(0,_.jsx)("div",{style:{color:l().Ay.redWithAlpha(1),textAlign:"center",width:"100%",marginBottom:16},children:t.error}):null}function B(e){e.update((e=>e+1))}function R(e){return e.setState({open:!1})}function L(e){let{error:t,result:i,ready:n,requestAttemptStore:l,messageStore:c,type:u}=e;const g=(0,a().tz)(),p=(0,o().WS)(),m=(0,r.useCallback)((()=>B(l)),[l]),h=(0,r.useCallback)((e=>function(e,t){t.setState(e.target.value)}(e,c)),[c]),f=(0,s().K8)((()=>Boolean(0===l.state||n&&i&&i.error)),[l,n,i]),x=(0,s().K8)((()=>c.state||""),[c]);return(0,_.jsxs)(_.Fragment,{children:[!p&&(0,_.jsx)("div",{style:{fontSize:16,fontWeight:d().Wy.semibold,marginBottom:16},children:q(u)}),(0,_.jsx)(b().A,{format:p?b().C.Transparent:void 0,textarea:!0,value:x,onChange:h,disabled:!f,placeholder:g.formatMessage(I.requestAccessMessagePlaceholder),style:{...p?{...k,padding:"16px"}:{...P,marginBottom:16,padding:"8px 12px",alignItems:"flex-start"}}}),!p&&(0,_.jsx)(w().A,{size:"lg",disabled:!f,onClick:m,style:P,children:(0,_.jsx)(a().sA,{defaultMessage:"Send request",id:"requestAccessForm.sendRequestButton.label"})}),(0,_.jsx)(D,{result:i})]})}function W(e){const{requestAttemptStore:t,messageStore:i,buttonPopupStore:n}=e,l=(0,o().v3)(),d=(0,o().WS)(),u=(0,a().tz)(),p=(0,r.useCallback)(((r,o,s)=>(0,_.jsx)(L,{requestAttemptStore:t,messageStore:i,error:r,result:o,ready:s,type:e.type})),[t,i,e.type]),v=(0,s().K8)((()=>{var e;return null===(e=x().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),b=(0,r.useCallback)((t=>async function(e){const{messageStore:t,buttonPopupStore:i,type:r,teamId:o,requestAttempt:s,environment:n,currentUserId:a,intl:l,flowId:d}=e;if(0===s)return;const u=t.state,p=await async function(){if("current-actor-to-block"===r)return m().callApi({eventName:"requestAccess",environment:n,data:{type:"current-actor-to-block",block:e.block,message:u}});if("current-actor-to-collection"===r)return m().callApi({eventName:"requestAccess",environment:n,data:{type:"current-actor-to-collection",collection:e.collection,message:u}});if("current-actor-to-space-via-team"===r)return m().callApi({eventName:"requestAccess",environment:n,data:{type:"current-actor-to-space-via-team",teamId:o,message:u}});if("current-actor-to-space-via-block"===r){if(!a)return;return m().callApi({eventName:"requestAccess",environment:n,data:{type:"actor-to-space",spaceId:e.block.spaceId,message:u,forActorId:a,attributes:{add_permissions_on_approval:!1,origin_type:"trusted_domain_page"}}})}if("current-actor-to-space-via-onboarding"===r){if(!a)return;return m().callApi({eventName:"requestAccess",environment:n,data:{type:"actor-to-space",spaceId:e.spaceId,message:u,forActorId:a,attributes:{add_permissions_on_approval:!1,origin_type:"onboarding"}}})}}();return p?"success"!==p.type?"UserRateLimitResponse"===(null===(f=p.body)||void 0===f?void 0:f.name)?{error:l.formatMessage(I.rateLimitError)}:{error:(0,h().Hu)(l,p)}:("current-actor-to-block"===r?g().T_(n,{request_access_type:"page",flow_id:d,requestId:p.data.requestId}):"current-actor-to-space-via-team"===r?g().T_(n,{request_access_type:"team",flow_id:d}):"current-actor-to-space-via-block"===r?g().T_(n,{request_access_type:"space",flow_id:d,source:"trusted_domain_page"}):"current-actor-to-collection"===r?g().T_(n,{request_access_type:"collection",flow_id:d,requestId:p.data.requestId}):"current-actor-to-space-via-onboarding"===r?g().T_(n,{request_access_type:"space",flow_id:d,source:"onboarding"}):(0,c().HB)(r),i.reset(),{value:!0}):{error:l.formatMessage(I.currentUserNotFound)};var f}({...e,requestAttempt:t,environment:l,intl:u,currentUserId:v})),[l,u,e,v]),w=(0,r.useCallback)((()=>B(t)),[t]),P=(0,r.useCallback)((()=>R(n)),[n]),k=(0,s().O$)(t);return d?(0,_.jsx)(j().A,{menuType:f().gu.Modal,whiteBackground:!0,title:q(e.type),left:M(),onClickLeft:P,right:(0,_.jsx)(a().sA,{id:"requestAccessForm.mobileSend.label",defaultMessage:"Send"}),onClickRight:w,children:(0,_.jsx)(y().A,{debugName:"RequestAccessForm",capture:!0,children:(0,_.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"stretch",alignItems:"stretch",width:"100%",height:"100%"},children:(0,_.jsx)(S().A,{request:k,performRequest:b,render:p})})})}):(0,_.jsx)(y().A,{debugName:"RequestAccessForm",capture:!0,children:(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evently",alignItems:"stretch",padding:"20px 28px 24px",width:"340px"},children:[(0,_.jsx)(S().A,{request:k,performRequest:b,render:p}),(0,_.jsx)(A().A,{size:"lg",onClick:P,children:M()})]})})}function N(e){const{type:t,flowId:i,buttonType:n}=e,l=(0,o().v3)(),d="outline"===n?A().A:w().A,[u,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),x={attributes:{add_permissions_on_approval:!1,role:(0,s().K8)((()=>(0,v().dL)()),[])?"reader":"read_and_write"},message:void 0};let S;"page"===t?S={...x,type:"current-actor-to-block",block:{id:e.block.id,spaceId:e.block.spaceId}}:"collection"===t?S={...x,type:"current-actor-to-collection",collection:{id:e.collection.id,spaceId:e.collection.spaceId}}:(0,c().HB)(t);const y=(0,r.useCallback)((async()=>{var e;const r=await m().callApi({eventName:"requestAccess",environment:l,data:S});"success"===r.type&&r.data.request?(p(!0),g().T_(l,{request_access_type:t,previous_access_level:"none",requested_access_level:"read_and_write",flow_id:i,requestId:r.data.requestId})):"failed"===r.type&&"UserRateLimitResponse"===(null===(e=r.body)||void 0===e?void 0:e.name)&&f(!0)}),[l,S,t,i]);return(0,_.jsx)(d,{size:"lg",disabled:u||h,disabledFeedback:u||h,onClick:y,children:u?(0,_.jsx)(a().sA,{id:"fullPageError.requestAccessButton.edit.Requested",defaultMessage:"Requested access"}):h?(0,_.jsx)(a().sA,{id:"fullPageError.requestAccessButton.edit.TryAgain",defaultMessage:"Try again later"}):q("page"===t?"current-actor-to-block":"current-actor-to-collection")})}function q(e){return"current-actor-to-space-via-block"===e||"current-actor-to-space-via-onboarding"===e?(0,_.jsx)(a().sA,{defaultMessage:"Request membership",id:"requestAccessForm.requestAccessToSpaceButton.title"}):(0,_.jsx)(a().sA,{defaultMessage:"Request access",id:"requestAccessForm.requestAccessButton.title"})}},876359:(e,t,i)=>{i.d(t,{f:()=>o});var r=()=>i(812815);function o(e){const{name:t,startTime:i,endTime:o}=e;try{performance.measure(t,{start:i,end:o})}catch(s){r().Fg(s,{extra:{name:t,startTime:i,endTime:o}})}}},887508:(e,t,i)=>{i.d(t,{v:()=>o});i(242343);var r=i(163643);const o=(0,i(680369).wt)("arrowLeftThick",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},917008:(e,t,i)=>{i.d(t,{D:()=>d});i(725707),i(771702);var r=i(242343),o=()=>i(803290),s=()=>i(58815),n=()=>i(220574),a=()=>i(84543),l=()=>i(90875),c=()=>i(485966);function d(e){let{unpersistedInMemoryRecordCache:t}=e;const i=(0,o().K8)((()=>{var e;return null===(e=c().default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]);return{createAndCommit:(0,r.useCallback)((e=>{let{perform:r}=e;const o=new(l().Z)({deadlockTimeoutMs:a().DEADLOCK_WARNING_TIMEOUT_MS}),c=r(o),d=n().RecordMap.create();o.stores.forEach((e=>{const t=e.getRecordModel(e.pointer);t&&d.addModel(t)})),(0,s().applyOperationsToRecordMap)({operations:o.operations,recordMap:d,updateOnly:!1});for(const s of d){const{model:e,pointer:r}=s;t.setModelAndRole({pointer:r,userId:i},e,"editor")}return t.emitAll(),{performResult:c,serverCommitResult:Promise.resolve(void 0)}}),[t,i])}}},951156:(e,t,i)=>{i.d(t,{A:()=>n});i(242343);var r=()=>i(803290),o=()=>i(518797),s=i(163643);const n=function(e){const{botValue:t,botStore:n,showActiveDot:a,style:l,size:c}=e,d=(0,i(653998).tz)(),u=(0,r().K8)((()=>{if(n){const e=n.getIcon();if(e)return{pointer:{table:o().GP,id:n.id,spaceId:n.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:o().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[n,t]),g=(0,r().K8)((()=>(null==n?void 0:n.getDisplayName(d))??(0,i(466003).Hg)(t)),[n,t,d]),{activeDotStyle:p}=(0,i(174114).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.accentColors.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",left:11,top:11}})),[]);return(0,s.jsxs)("div",{style:l,children:[(0,s.jsx)(i(28210).B,{icon:u,title:g,size:c||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),a?(0,s.jsx)("div",{style:p}):void 0]})}}}]);