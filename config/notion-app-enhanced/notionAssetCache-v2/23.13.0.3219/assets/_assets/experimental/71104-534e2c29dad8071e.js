"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[71104],{40357:(e,t,i)=>{i.d(t,{A:()=>f});i(362833),i(242343);var n=()=>i(237385),o=()=>i(762847),r=()=>i(908568),s=()=>i(386311),a=()=>i(34662),l=()=>i(653998),d=()=>i(762763),c=()=>i(91472),u=()=>i(759625),p=()=>i(84543),g=()=>i(640979),m=()=>i(331516),h=()=>i(935091),y=()=>i(858023),x=()=>i(88271),v=i(163643);function f(e){const{store:t,parentBlockStore:i,onAccept:f,token:S,href:j,hoverData:b}=e,k=(0,n().v3)(),A=[];return A.push({key:0,render:e=>(0,v.jsx)(x().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"copy link",render:e=>(0,v.jsx)(m().A,{...e,title:(0,v.jsx)(l().sA,{id:"linkMention.copyLink",defaultMessage:"Copy Link"}),svg:r().n}),action:async()=>{if(!t)return;if(!S)return;const e=await c().R.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard,n=j;e.copyString({environment:k,stringValue:n,copiedMessage:i})}}]}),A.push({key:1,render:e=>(0,v.jsx)(x().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"convert to bookmark",render:e=>(0,v.jsx)(m().A,{...e,title:(0,v.jsx)(l().sA,{id:"linkMention.convertToBookmark",defaultMessage:"Turn into preview"}),svg:s().I}),action:()=>{t&&S&&p().createAndCommit({userAction:"LinkMentionMenu.convertToBookmark",environment:k,canUndo:!0,perform:e=>{if(b){const n=u().Wv({environment:k,type:o().xd.bookmark,inMemoryRecordCache:t.inMemoryRecordCache,properties:{title:b&&b.title?a().x9d(b.title):a().x9d(j),link:a().x9d(j),description:b&&b.description?a().x9d(b.description):void 0},format:{bookmark_cover:b.thumbnail_url,bookmark_icon:b.favicon_url?b.favicon_url:b.icon_url},transaction:e,spaceId:t.pointer.spaceId});d().ed({environment:k,parentBlockStore:i,blockStore:n,token:S,transaction:e})}else{const n=u().Wv({environment:k,type:o().xd.bookmark,inMemoryRecordCache:t.inMemoryRecordCache,properties:{title:a().x9d(j),link:a().x9d(j)},transaction:e,spaceId:t.pointer.spaceId});d().ed({environment:k,parentBlockStore:i,blockStore:n,token:S,transaction:e})}}})}}]}),(0,v.jsx)(h().A,{menuType:g().gu.Popup,children:(0,v.jsx)(y().Ay,{type:y().Oh.Vertical,initialFocus:void 0,onAccept:f,sections:A,style:{paddingTop:3,paddingBottom:3}})})}},206363:(e,t,i)=>{i.d(t,{zP:()=>wt,yf:()=>Dt,nJ:()=>pt,k4:()=>Rt,OP:()=>Ct,d0:()=>_t});i(725707),i(491955),i(500234),i(403517),i(113085);var n=i(242343),o=()=>i(237385),r=()=>i(803290),s=()=>i(174114),a=()=>i(846581),l=()=>i(359206),d=()=>i(706788),c=()=>i(951592),u=()=>i(214263),p=()=>i(711361),g=()=>i(214144),m=()=>i(531866),h=()=>i(145017),y=()=>i(890449),x=()=>i(34662),v=()=>i(247200),f=()=>i(826156),S=()=>i(653998),j=()=>i(975392),b=()=>i(76394),k=()=>i(31448),A=()=>i(463790),I=()=>i(821078),w=()=>i(85706),C=()=>i(611168),B=()=>i(78245),M=()=>i(988189),R=()=>i(301819),T=()=>i(307542),_=()=>i(754421),D=()=>i(302376),z=()=>i(251763),O=()=>i(554507),P=()=>i(672898),E=()=>i(622163),W=()=>i(838517),L=()=>i(17298),U=()=>i(322199),H=()=>i(593745),F=()=>i(907721),V=()=>i(466321),Y=()=>i(286555),K=()=>i(485966),$=()=>i(983965),N=()=>i(379789),G=()=>i(468258),J=()=>i(321470),Z=()=>i(413871),q=()=>i(579439),X=()=>i(126451),Q=()=>i(273520),ee=()=>i(516267),te=()=>i(392968),ie=()=>i(443252),ne=()=>i(28210),oe=()=>i(989372),re=()=>i(709237),se=()=>i(546057),ae=()=>i(665051),le=()=>i(388128),de=()=>i(610271),ce=()=>i(180365),ue=()=>i(162901),pe=()=>i(818369),ge=()=>i(891467),me=()=>i(859669),he=i(163643);function ye(e){const{token:t,store:i}=e.state,{linkMentionAnnotationData:r}=e,s=e.onDismiss,a=(0,o().v3)(),[l,d]=(0,n.useState)(!0),{iframe_url:c,height:u,padding:p,href:g,padding_top:m}=r,h=r.hasOwnProperty("description"),y=j().Im(r),[{value:x}]=(0,ue().Yb)((async()=>{var e,t;if(c)return A().wZ(a,{type:"iframe"}),{result:"iframePresent"};if(h)return d(!1),y?A().wZ(a,{type:"default"}):A().wZ(a,{type:"custom"}),{result:"linkMentionContainsDescription"};d(!0);const i=await pe().callApi({eventName:"getDataForLinkMention",environment:a,data:{url:g,spaceId:(null===(e=K().default.state.currentSpaceStore)||void 0===e?void 0:e.id)??(null===(t=K().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId()),source:"link_mention_hover"}});return"success"===i.type?"error"in i.data?(d(!1),{result:"apiFailed"}):(A().wZ(a,{type:"custom"}),d(!1),{result:"gotApiResponse",resultData:i.data}):"failed"===i.type?(d(!1),{result:"apiFailed"}):(d(!1),(0,b().HB)(i))}),[c,h,a,g,y]);let v;switch(null==x?void 0:x.result){case"linkMentionContainsDescription":v=r;break;case"gotApiResponse":v=x.resultData;break;case"apiFailed":case"iframePresent":case void 0:v=void 0;break;default:(0,b().HB)(x)}return v&&!c||!v&&!c?(0,he.jsx)(me().R,{hoverData:v,href:g,showEditButton:!1,store:i,token:t,onDismiss:s,loading:l}):c?(0,he.jsx)(ge().p,{hoverData:r,iframe_url:c,showEditButton:!1,height:u,padding:p,store:i,token:t,onDismiss:s,href:g,padding_top:m}):(0,he.jsx)(me().R,{hoverData:v,href:g,showEditButton:!1,store:i,token:t,onDismiss:s,loading:l})}var xe=()=>i(752597),ve=()=>i(712437),fe=()=>i(220959),Se=()=>i(908568),je=()=>i(279968),be=()=>i(7356),ke=()=>i(545250),Ae=()=>i(123047),Ie=()=>i(91472),we=()=>i(104769),Ce=()=>i(448316),Be=()=>i(927685),Me=()=>i(441165),Re=()=>i(284320),Te=()=>i(872213),_e=()=>i(356813);function De(e){const{onDismiss:t,state:i}=e,{store:a}=i,l=(0,o().v3)(),d=(0,s().DP)(),[c,u]=(0,n.useState)(!0),p="token"===i.type?x().cQR(i.annotation):i.hyperlink,g=(0,be().lX)({url:p,baseUrl:Be().A.domainBaseUrl,publicDomainName:Be().A.publicDomainName}),m=(0,n.useCallback)((async()=>{switch(t(),i.type){case"token":Ce().ek({token:i.token,store:i.store,readOnly:!1}),await xe().default.afterNextFlush(),we().fi({type:"focusOnly",focus:!0});break;case"block":Te().hv({store:i.store});break;default:(0,b().HB)(i)}}),[t,i]),y=(0,n.useCallback)((async()=>{t(),await xe().default.afterNextFlush();const e=await Ie().R.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard;let n=p;const o=(0,ke().parseRoute)({url:p,baseUrl:Be().A.domainBaseUrl,publicDomainName:Be().A.publicDomainName,isMobile:l.device.isMobile,protocol:Be().A.protocol,currentUrl:window.location.href});if("page"===o.name&&o.blockId){const e=Z().Bv.createChildStore(a,{table:h().ev,id:o.blockId});n=(0,fe().A)({pageId:o.blockId,pageModel:e.getModel(),baseUrl:Be().A.domainBaseUrl,discussionId:o.discussionId,scrollToBlockId:o.scrollToBlockId,peekViewBlockId:o.peekViewBlockId,peekMode:o.peekMode,pageVisitSource:ve().y8.CopyLink})}e.copyString({environment:l,stringValue:n,copiedMessage:i})}),[l,t,a,p]),v=(0,r().K8)((()=>(0,T().s8)()),[]),[{value:f}]=(0,ue().Yb)((async()=>{var e,t;if(g||!v)return;u(!0);const i=await pe().callApi({eventName:"getDataForLinkMention",environment:l,data:{url:p,spaceId:(null===(e=K().default.state.currentSpaceStore)||void 0===e?void 0:e.id)??(null===(t=K().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId()),source:"hyperlink_hover"}});if("success"===i.type)return"error"in i.data?void u(!1):(u(!1),i.data);if("failed"===i.type)throw void u(!1);return u(!1),(0,b().HB)(i)}),[l,p,g,v]),j=l.device.isSafari||l.device.isIOS,I=(0,s().IS)((e=>({wrapper:{fontSize:k().J.UISmall.desktop,color:e.text.secondary,fontWeight:k().Wy.regular,fill:e.mediumIconColor,flexDirection:"column"},destination:{padding:"4px 0 4px 6px",alignItems:"center"},button:{display:"flex",flexDirection:"column",alignItems:"center",padding:"2px 6px",whiteSpace:"nowrap",marginRight:2,borderRadius:4,color:e.text.primary},destinationText:{paddingRight:6,maxWidth:250,...k().RC},icon:{height:"1em",width:"1em",marginRight:j?"0.4em":"0.5em",fill:e.mediumIconColor},content:{width:340,height:"100%",aspectRatio:"auto"},title:{color:e.text.primary,fontWeight:k().Wy.semibold,whiteSpace:"normal",wordBreak:"break-word",fontSize:13,padding:"4px 0",maxWidth:300},author:{color:e.text.secondary,fontSize:k().J.UISmall.desktop},description:{wordBreak:"break-word",maxWidth:300,...k().RC,color:e.text.primary,fontSize:12,lineHeight:1.45,whiteSpace:"normal",flexDirection:"column"},text:{color:e.text.primary,fontSize:12,lineHeight:1.45},buttons:{fontWeight:k().Wy.medium}})),[j]),w=(0,S().tz)(),C=(0,S().YK)({copyLink:{defaultMessage:"Copy link",id:"hoverPreviewOverlay.copyLink"}}),B=(0,r().K8)((()=>{if(!g)return{pageIcon:(0,je().h)(I.icon),title:(0,he.jsx)("div",{style:I.destinationText,children:p})};const e=Z().Bv.createChildStore(a,{table:h().ev,id:g});return{pageIcon:(0,Ae().h6)({pageModel:e.getModel(),pageRole:e.getRole(),baseUrl:Be().A.domainBaseUrl,getRecordModel:a.getRecordModel,emojiType:(0,Me().FN)(l),isSafariOrIOS:j,isClient:!0,showEmojiInline:l.device.isWindows,currentUserId:l.currentUser.id,theme:d,emojiData:Re().A.state}),title:(0,he.jsx)(re().A,{placeholder:`${window.location.protocol}//${window.location.host}${p}`,style:I.destinationText,store:e})}}),[l,a,g,I,d,j,p]),M=(0,r().K8)((()=>{if(!l.device.isMobile)return f?(f.hasOwnProperty("iframe")?A().Av(l,{type:"iframe"}):A().Av(l,{type:"custom"}),f):void 0}),[l,f]);if(v&&!g){if(M&&!M.iframe||!M)return(0,he.jsx)(me().R,{hoverData:M,href:p,handleEditClick:m,showEditButton:e.isHoveredTokenEditable,store:a,loading:c});if(M&&M.iframe)return(0,he.jsx)(ge().p,{hoverData:M,iframe_url:M.iframe,height:M.height,padding:M.padding,padding_top:M.padding_top,handleEditClick:m,store:a,href:p,onDismiss:t,showEditButton:e.isHoveredTokenEditable})}return(0,he.jsx)(de().Ye,{style:I.wrapper,alignItems:"center",children:(0,he.jsxs)(de().Ye,{style:I.destination,alignItems:"center",children:[B.pageIcon,B.title,(0,he.jsx)(_e().A,{onClick:y,icon:Se().n,isDarkIconColor:!0,ariaLabel:w.formatMessage(C.copyLink)}),e.isHoveredTokenEditable&&(0,he.jsx)(X().A,{style:I.button,onClick:m,children:(0,he.jsx)(S().sA,{defaultMessage:"Edit",id:"hoverPreviewOverlay.editButton.label"})})]})})}var ze=()=>i(16791),Oe=()=>i(416956),Pe=()=>i(986340),Ee=()=>i(103151);function We(e){const{store:t,closestNonAliveAncestorStore:i,originRect:n}=e,o=(0,S().tz)(),r=(0,s().IS)((e=>({tooltipStyle:{fontSize:14},mentionPageInTrashTime:{fontWeight:k().Wy.regular,color:e.text.secondary,fontSize:14},avatarStyle:{margin:"0 6px"},placeholderStyle:{marginRight:6}})),[]),{trashAuthorStore:l,trashAuthorDisplayName:d,trashTimestamp:c,isMovedToTrashMetadata:u}=(0,Pe().x)({blockStore:t,closestNonAliveAncestorStore:i,intl:o}),p=(0,a().jE)(c,ze().locale,o),g=l&&(0,he.jsx)(Oe().E,{authorStore:l,avatarSize:18,avatarStyle:r.avatarStyle,placeholderStyle:{}});return(0,he.jsx)(Ee().A,{forceVisibleState:!0,originRect:n,render:()=>{},renderTooltip:()=>(0,he.jsxs)("div",{children:[(0,he.jsxs)(de().Ye,{alignItems:"center",children:[u?(0,he.jsx)(S().sA,{defaultMessage:"Moved to Trash by",id:"hoverPreviewOverlay.pageInTrash.message.movedToTrashBy"}):(0,he.jsx)(S().sA,{defaultMessage:"Last edited by",id:"hoverPreviewOverlay.pageInTrash.message.lastEditedBy"}),g||(0,he.jsx)("div",{style:r.placeholderStyle}),d]}),(0,he.jsx)("div",{style:r.mentionPageInTrashTime,children:p})]}),placement:F().W.Bottom,alignment:F().C.Start,style:r.tooltipStyle})}var Le=()=>i(409211),Ue=()=>i(507190),He=()=>i(278739),Fe=()=>i(348588),Ve=()=>i(707781),Ye=()=>i(885323),Ke=()=>i(931085),$e=()=>i(517198),Ne=()=>i(286404),Ge=()=>i(35462),Je=()=>i(482570),Ze=()=>i(622286),qe=()=>i(548694);var Xe=()=>i(951920),Qe=()=>i(931371),et=()=>i(689248),tt=()=>i(313067),it=()=>i(471809),nt=()=>i(664103),ot=()=>i(312093),rt=()=>i(162976);function st(e){const{icon:t,tooltipText:i,stringValue:r,getCopiedMessage:a}=e,l=(0,o().v3)(),[d,c]=(0,Xe().B)(),u=(0,n.useCallback)((async()=>{const e=await Ie().R.clipboardActions.load();e.copyString({environment:l,stringValue:r,copiedMessage:a(e)})}),[l,a,r]),p=(0,s().IS)((e=>({iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",padding:4},icon:{width:16,height:16,fill:c?e.icon.primary:e.icon.tertiary,transition:"fill 0.15s ease"}})),[c]);return(0,he.jsx)(Ee().A,{renderTooltip:()=>i,render:e=>(0,he.jsx)("div",{...e,ref:d,style:p.iconContainer,onClick:u,role:"button","aria-label":i,tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),u())},children:t(p.icon)})})}function at(e){let{userStore:t}=e;const i=(0,S().tz)(),a=(0,o().v3)(),l=(0,r().O$)(K().AppStoreCurrentSpaceStore),d=(0,r().K8)((()=>{var e;if(l)return null===(e=(0,Qe().dp)(l,t.id))||void 0===e?void 0:e.getMembershipType()}),[l,t]),c=(0,U().S)({spaceStore:l}),u=(0,rt().$)({spaceStore:l}),p=(0,r().K8)((()=>t.id),[t]),{value:g,isLoading:h}=function(e){let{userId:t}=e;const i=(0,o().v3)(),n=(0,r().O$)(K().AppStoreCurrentSpaceStore),[{status:s,error:a,value:l}]=(0,ue().Yb)((async()=>{if(!n)return;if((0,qe().IL)(n))return;const e=await pe().callApi({eventName:"getExtendedUserProfile",environment:i,data:{userId:t,spaceId:n.id}});if("failed"===e.type)throw e.error;if(e){const t=e.data.permissionGroups??[];return{timeZone:e.data.timeZone,permissionGroups:t}}}),[i,t,n]);return void 0===n?{isLoading:!0,error:void 0,value:void 0}:{isLoading:"pending"===s,error:a,value:l}}({userId:p}),{timeZone:y,permissionGroups:x}=(0,r().K8)((()=>g??{timeZone:void 0,permissionGroups:[]}),[g]),v=function(e){return e.sort(((e,t)=>e.memberCount-t.memberCount)).map((e=>e.name))}(x),{name:f,email:j}=(0,r().K8)((()=>({name:t.getFullName(i),email:t.getEmail()})),[t,i]),b=(0,Ze().X)("debug_user_info_quick_copy"),A=(0,r().K8)((()=>t.isDefined()),[t]),I=(0,r().K8)((()=>(0,ot().M)(p,l)),[p,l]),w=(0,nt().X)(),C=(0,n.useCallback)((()=>{j&&(w?(0,tt().YQ)({environment:a,email:j,from:"peopleHoverCard"}):(it().A.setState({signupCtaAttribution:"peopleHoverCard"}),et().UW(a,"notion_calendar_launch_promo")))}),[w,a,j]),B=(0,s().IS)((e=>({card:{minWidth:280,height:130,padding:12},bio:{display:"inline-flex",alignItems:"center",gap:12,flexGrow:1,width:0},bioRight:{overflow:"hidden",width:"100%"},actionButton:{width:"100%",height:28,fontWeight:k().Wy.medium},profileTitle:{fontWeight:k().Wy.semibold},profileSubtitle:{...k().RC},loadingShimmer:{height:16,borderRadius:6,animation:"500ms ease-in fadein"}})),[]);if(!(j&&A&&c&&d&&(0,Ye().kB)(d)))return null;const M=h?(0,he.jsx)($e().A,{style:B.loadingShimmer}):v.length>0?(0,he.jsx)(Ge().A,{isSmall:!0,style:B.profileSubtitle,children:(0,m().A)(v.slice(0,3),(e=>(0,he.jsx)(lt,{index:e},e)))}):d?(0,he.jsx)(Ge().A,{isSmall:!0,style:B.profileSubtitle,children:(0,he.jsx)(dt,{membershipType:d})}):null,R=h?(0,he.jsx)($e().A,{style:B.loadingShimmer}):y?(0,he.jsx)(Ge().A,{isSmall:!0,isSecondaryColor:!0,style:B.profileSubtitle,children:(0,he.jsx)(S().sA,{id:"personHoverCard.userInfo.timeZone",defaultMessage:"{time} local time",values:{time:(new Date).toLocaleTimeString((0,Ve().H)(i),{timeZone:y,hour:"2-digit",minute:"2-digit",hour12:!0})}})}):null;return(0,he.jsx)("div",{style:B.card,children:(0,he.jsxs)(de().wt,{gap:16,children:[(0,he.jsx)(de().Ye,{children:(0,he.jsxs)("div",{style:B.bio,children:[(0,he.jsx)(Je().A,{userStore:t,size:56}),(0,he.jsxs)(de().wt,{gap:3,style:B.bioRight,children:[(0,he.jsxs)(de().Ye,{gap:4,alignItems:"center",children:[I&&u?(0,he.jsx)(Ke().A,{href:I,children:(0,he.jsx)(Ge().A,{style:B.profileTitle,children:f})}):(0,he.jsx)(Ge().A,{style:B.profileTitle,children:f}),b?(0,he.jsxs)(de().Ye,{alignItems:"center",children:[(0,he.jsx)(st,{icon:He().o,tooltipText:"Copy email address",stringValue:j,getCopiedMessage:e=>e.clipboardMessages.copiedEmailToClipboard}),(0,he.jsx)(st,{icon:Ue().V,tooltipText:"Copy user ID",stringValue:t.id,getCopiedMessage:e=>e.clipboardMessages.copiedUserIdToClipboard})]}):null]}),M,R]})]})}),(0,he.jsxs)(de().Ye,{gap:12,children:[(0,he.jsx)(Ne().A,{size:"lg",style:B.actionButton,onClick:()=>{window.open(`mailto:${j}`,"_blank")},icon:He().o,iconStyle:{width:16,height:16},children:(0,he.jsx)(Ge().A,{children:(0,he.jsx)(S().sA,{id:"personHoverCard.actionButtons.email",defaultMessage:"Email"})})}),(0,he.jsx)(Ne().A,{size:"lg",style:B.actionButton,onClick:C,icon:Fe().D,iconStyle:{width:16,height:16},children:(0,he.jsx)(S().sA,{id:"personHoverCard.actionButtons.schedule",defaultMessage:"Schedule"})})]})]})})}function lt(e){let{index:t}=e;return(0,he.jsx)("span",{style:{whiteSpace:"pre"},children:(0,he.jsx)(S().sA,{defaultMessage:", ",id:"personHoverCard.userInfo.groupSeparatorValue"})},t)}function dt(e){switch(e.membershipType){case"none":return(0,he.jsx)(S().sA,{id:"personHoverCard.memberStatus.none",defaultMessage:"Deactivated"});case"page_guest":return(0,he.jsx)(S().sA,{id:"personHoverCard.memberStatus.guest",defaultMessage:"Guest"});case"member":return(0,he.jsx)(S().sA,{id:"personHoverCard.memberStatus.member",defaultMessage:"Member"});case"membership_admin":return(0,he.jsx)(S().sA,{id:"personHoverCard.memberStatus.admin",defaultMessage:"Admin"});case"owner":return(0,he.jsx)(S().sA,{id:"personHoverCard.memberStatus.owner",defaultMessage:"Workspace Owner"});default:(0,b().HB)(e.membershipType)}}function ct(e){const t=(0,r().O$)(K().AppStoreCurrentSpaceStore),i=(0,r().K8)((()=>{if(!t)return;if("user"===e.state.type)return e.state.store;const i=e.state.annotation;return Z().LU.createChildStore(t,{id:i[1],table:Le().oo})}),[e.state,t]),n=(0,r().K8)((()=>!!i&&i.isDefined()),[i]);return i&&n&&t?(0,he.jsx)(at,{userStore:i}):null}const ut=20;function pt(e){const t=(0,o().v3)(),i=(0,r().O$)($().A,"HoverPreviewOverlay"),{state:s,pinPopup:a,unpinPopup:l,hasBeenHovering:d,isPinned:u,dismissPopup:p}=function(){const[e,t]=(0,n.useState)(!1),[i]=(0,r().$y)(G().A),o=(0,c().lW)(i,400,Object.is),[s,a]=(0,n.useState)(void 0),l=s||(e?void 0:o),d=(0,n.useCallback)((()=>a(l)),[l]),u=(0,n.useCallback)((()=>{a(void 0)}),[]),p=(0,n.useCallback)((()=>{u(),t(!0)}),[u]);return(0,n.useEffect)((()=>{t(!1)}),[o]),{state:l,pinPopup:d,unpinPopup:u,hasBeenHovering:i&&i===l,isPinned:Boolean(s),dismissPopup:p}}(),g=(0,r().O$)(K().AppStoreCurrentSpaceStore),m=(0,U().S)({spaceStore:g}),h=function(e){const t=(0,o().v3)();return(0,r().K8)((()=>!!e&&(0,P().k)(t,e.store)),[e,t])}(s),y=(0,n.useMemo)((()=>Boolean(s&&function(e,t){switch(e.type){case"token":return e.annotations.some(x().sh$)||t&&e.annotations.some(x().N53)||e.annotations.some(x().rie)||e.annotations.some(x().ik2)||e.annotations.some(x().n5B);case"block":return Boolean(e.hyperlink);case"user":return!0;default:(0,b().HB)(e)}}(s,h))),[s,h]),v=(0,n.useMemo)((()=>s&&function(e){switch(e.type){case"token":return e.token.node.getBoundingClientRect();case"block":return H().K.getRect(e.store);case"user":return e.domRect;default:(0,b().HB)(e)}}(s)),[s]),f=v&&0===v.width&&0===v.height&&0===v.left&&0===v.top,S=y?!f:Boolean(!i&&d&&!f),[,k]=(0,r().$y)(N().A);(0,n.useEffect)((()=>(k({isPinned:u}),()=>k({isPinned:!1}))),[u,k]);const A=(0,n.useMemo)((()=>"token"===(null==s?void 0:s.type)&&(null==s?void 0:s.annotations.some(x().n5B))),[s]),w=!("token"!==(null==s?void 0:s.type)||null!=s&&s.annotations.some(x().N53)||null!=s&&s.annotations.some(x().jIt)||A),C=(0,n.useMemo)((()=>"token"===(null==s?void 0:s.type)&&(null==s?void 0:s.annotations.some(x().nNl))),[s]),B=(0,n.useMemo)((()=>(m&&("token"===(null==s?void 0:s.type)?null==s?void 0:s.annotations.some(x().rie):"user"===(null==s?void 0:s.type)))??!1),[m,s]),M=(0,n.useCallback)((()=>B?F().C.End:C?F().C.Center:F().C.Start),[B,C]),R=(0,n.useCallback)((()=>B||A?F().W.Top:F().W.Bottom),[B,A]),T=(0,r().O$)(t.RouterStore);return(0,n.useEffect)((()=>{p()}),[T,p]),(0,n.useEffect)((()=>{const e=j().nF((()=>{I().co(),p()}),200,{leading:!0});return D().P4(window,"scroll",e,!0),()=>D().Ol(window,"scroll",e,!0)}),[p]),(0,he.jsx)(ie().Ay,{disableMouseCapture:!0,preventCaptureEsc:!0,preventPointerEvents:S&&!y,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:V().n.Popup,open:S,originRect:v,originGap:6,alignmentToOrigin:M(),placementToOrigin:R(),useLightBoxShadow:w,render:()=>s&&(0,he.jsx)("div",{onMouseEnter:a,onMouseLeave:l,children:(0,he.jsx)(gt,{state:s,isHoveredTokenEditable:h,onDismiss:l,originRect:v})}),...C?{borderRadius:6}:{}})}function gt(e){const t=(0,r().O$)(K().AppStoreCurrentSpaceStore),i=(0,o().Y0)(),n=(0,U().S)({spaceStore:t}),a=(0,s().IS)((e=>({noMembersInGroupStyle:{fontSize:k().J.UISmall.desktop,color:e.text.secondary,padding:"4px 8px"}})),[]),l="token"===e.state.type?e.state.annotations:void 0,d=null==l?void 0:l.find(x().ik2),c=(0,r().K8)((()=>{if((0,T().YE)()&&d)return x().q1R(d)}),[d]),u=null==l?void 0:l.find(x().sh$),p=null==l?void 0:l.find(x().qsB),g=null==l?void 0:l.find(x().RaC),m=null==l?void 0:l.find(x().go0),h=l?x().MzR(l):void 0,v=null==l?void 0:l.find(x().jIt),f=n?null==l?void 0:l.find(x().rie):void 0,j=null==l?void 0:l.find(x().nNl),b=null==l?void 0:l.find(x().n5B),A=(0,r().K8)((()=>{if(!g)return;const e=x().FHi(g);if(!e)return;return t?(0,L().E)({groupId:null==e?void 0:e.groupId,spaceStore:t}).getModel():void 0}),[t,g]);if(null==l?void 0:l.some((e=>{if(x().JCc(e)){const t=x().FLg(e);return t&&"everyone"!==t.mentionType}return!1})))return null;if("user"===e.state.type&&!i.isMobile)return(0,he.jsx)(ct,{...e,state:e.state,onDismiss:e.onDismiss});if("token"!==e.state.type)return null;if(u&&e.state.store.table!==y().SN)return(0,he.jsx)(De,{...e,state:{...e.state,annotation:u}});if(p)return(0,he.jsx)(ht,{...e,state:{...e.state,annotation:p}});if(g){if(x().FHi(g)&&A)return(0,he.jsx)(le().Q,{group:A,limit:10,color:"white_background",trackHover:!0,noMembersMessage:(0,he.jsx)(de().Ye,{style:a.noMembersInGroupStyle,children:(0,he.jsx)("div",{style:k().RC,children:(0,he.jsx)(S().sA,{id:"groupPreview.noUsers",defaultMessage:"No users in this group"})})})})}else if(c&&!i.isMobile)return(0,he.jsx)(ye,{state:e.state,isHoveredTokenEditable:e.isHoveredTokenEditable,linkMentionAnnotationData:c,onDismiss:e.onDismiss});return j?(0,he.jsx)(mt,{...e,state:{...e.state,annotation:j},currentSpaceStore:t}):m?(0,he.jsx)(yt,{...e,state:{...e.state,annotation:m}}):h&&!i.isMobile?(0,he.jsx)(wt,{...e,state:{...e.state,annotation:h},onDismiss:e.onDismiss}):v&&!i.isMobile?(0,he.jsx)(Mt,{...e,state:{...e.state,annotation:v},onDismiss:e.onDismiss}):f&&!i.isMobile?(0,he.jsx)(ct,{...e,state:{...e.state,annotation:f},onDismiss:e.onDismiss}):b?(0,he.jsx)(C().YY,{store:e.state.store,annotation:b,onDismiss:e.onDismiss}):null}function mt(e){var t,i;const{store:n,annotation:o}=e.state,a=x().qS0(o),l=a&&Z().sk.createChildStore(n,a),d=(0,r().K8)((()=>{if(null!=l&&l.isDefined())return null==l?void 0:l.getModel().getRenderTitle()}),[l]),c=(0,r().K8)((()=>(0,_().wA)({spaceStore:e.currentSpaceStore})),[e.currentSpaceStore]),u=(0,s().IS)((e=>({container:{backgroundColor:e.tooltipBackground,padding:"4px 8px",maxWidth:250,width:"max-content"},text:{color:e.text.contrastSecondary}})),[]);return l?(0,he.jsx)("div",{style:u.container,children:(0,he.jsx)(M().A,{type:"custom",customEmojiStore:l,text:(0,he.jsx)("span",{className:"notranslate",children:d}),deletedText:(0,he.jsx)(S().sA,{defaultMessage:"{name} <medium>(deleted)</medium>",id:"HoverPreviewOverlay.customEmojiDeleted",values:{name:(0,he.jsx)("span",{className:"notranslate",children:d}),medium:e=>(0,he.jsx)("span",{style:u.text,children:e})}}),subText:null!==(t=e.currentSpaceStore)&&void 0!==t&&t.id&&a.spaceId!==(null===(i=e.currentSpaceStore)||void 0===i?void 0:i.id)&&c?(0,he.jsx)("span",{style:u.text,children:(0,he.jsx)(S().sA,{id:"HoverPreviewOverlay.customEmojiUpload",defaultMessage:"Right-click to add to your workspace"})}):void 0})}):null}function ht(e){const{annotation:t}=e.state,i=x().K7D(t),n=(0,s().IS)((e=>({container:{fontSize:k().J.UISmall.desktop,color:e.text.secondary,padding:"4px 8px"},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),o=(0,S().tz)(),r="relative"===i.date_format?"ll":"relative",l=(0,a().ZF)({value:i,date_format:r,time_format:"h:mm A",allowRelativeDates:!0,intl:o});return l===(0,a().ZF)({value:i,date_format:i.date_format,time_format:i.time_format,allowRelativeDates:!0,intl:o})?null:(0,he.jsxs)(de().Ye,{style:n.container,alignItems:"center",children:[(0,u().k)(n.icon),(0,he.jsx)("div",{style:k().RC,children:l})]})}function yt(e){const{annotation:t}=e.state,i=x().y0Y(t),n=(0,S().tz)(),o=(0,v().EC)(i.type,n),r=(0,s().IS)((e=>({container:{fontSize:k().J.UISmall.desktop,color:e.text.secondary,padding:"4px 8px"}})),[]);return(0,he.jsx)(de().Ye,{style:r.container,alignItems:"center",children:(0,he.jsx)("div",{style:k().RC,children:o})})}function xt(e){var t;const{renderConfig:i,store:n}=e,o=(0,s().IS)((e=>({title:{color:e.text.primary,fontWeight:k().Wy.semibold,whiteSpace:"initial",fontSize:13,padding:"4px 0",width:"100%"},header:{color:e.text.secondary,fontSize:k().J.UISmall.desktop},dictionaryKey:{color:e.text.tertiary,fontWeight:k().Wy.regular,fontSize:k().J.UISmall.desktop},dictionaryValue:{color:e.text.secondary,fontSize:k().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"}})),[]);return(0,he.jsxs)(he.Fragment,{children:[i.title&&(0,he.jsx)(de().Ye,{children:(0,he.jsx)(O().Ic,{...i.title,store:n,style:o.title})}),i.headerAttributes&&i.headerAttributes.length>0&&(0,he.jsx)(de().Ye,{alignItems:"center",style:{...o.header,marginBottom:8},children:(0,m().A)(i.headerAttributes.map(((e,t)=>(0,he.jsx)(O().Ic,{...e,store:n,style:{...o.header,...k().RC}},`attribute-${t}`)))||[],(e=>(0,he.jsxs)("span",{children:[" ","·"," "]},`dot-${e}`)))}),i.dictionaryAttributes&&i.dictionaryAttributes.length>0&&(0,he.jsx)(de().wt,{children:i.dictionaryAttributes.map(((e,t)=>{var r;let{key:s,value:a}=e;return(0,he.jsxs)(de().Ye,{style:{marginBottom:t!==((null===(r=i.dictionaryAttributes)||void 0===r?void 0:r.length)??0)-1?4:8},children:[(0,he.jsx)("div",{style:{marginRight:8,width:"30%",display:"flex",alignItems:"center"},children:(0,he.jsx)("span",{style:o.dictionaryKey,children:(0,he.jsx)(S().sA,{...s.formatter,values:{value:a.attribute.name}})})}),(0,he.jsxs)("div",{style:{width:"70%",display:"flex",alignItems:"center"},children:[a.icon&&(0,f().nN)(a.icon)&&(0,he.jsx)(ee().A,{type:"image_url",imageURL:a.icon.values[0],size:16,style:{marginRight:6}}),(0,he.jsx)(O().Ic,{...a,store:n,style:o.dictionaryValue,avatarStyle:{marginRight:6}})]})]},t)}))}),i.bodyAttribute&&!(0,f().Q7)(i.bodyAttribute)&&(0,he.jsx)(de().Ye,{style:((null===(t=i.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{},children:(0,he.jsx)(O().xq,{attribute:i.bodyAttribute,store:n})}),i.previewImageAttribute&&(0,he.jsx)("div",{style:{marginTop:i.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"},children:(0,he.jsx)("div",{children:(0,he.jsx)(te().Ay,{src:i.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})})]})}function vt(e,t){if(!e)return null;const i=e.find((e=>e.key.formatter.id===t));return i?i.value:null}function ft(e,t){if(!e)return null;return e.filter((e=>e.attribute&&t.includes(e.attribute.id)))}function St(e,t){if(!e)return null;const i=e.find((e=>e.value.attribute.id===t));return i?i.value:null}function jt(e){var t;const{renderConfig:i,store:n,integration:o,haveInstanceAction:r,containerDivRef:a,token:l,parentBlockStore:d,onDismiss:c}=e,u=(0,s().IS)((e=>({title:{color:e.text.primary,fontWeight:k().Wy.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.text.secondary,fontSize:k().J.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:k().Wy.regular},dictionaryValue:{color:e.text.primary,fontSize:k().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},innerBox:{width:"fit-content",display:"flex",alignItems:"center",gap:4}})),[]),g=null===(t=vt(i.dictionaryAttributes,"unfurling.github.pullRequest"))||void 0===t?void 0:t.attribute.values[0],m=vt(i.dictionaryAttributes,"unfurling.generic.status"),h=vt(i.dictionaryAttributes,"unfurling.generic.author"),y=function(e,t){if(!e)return null;return e.find((e=>e.formatter&&t.includes(e.formatter.id)))||null}(i.headerAttributes,["unfurling.github.githubPullMerged","unfurling.github.githubPullClosed","unfurling.github.githubPullOpened"]);return(0,he.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,he.jsxs)(de().Ye,{alignItems:"center",style:{fontSize:12},children:[(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(ee().A,{type:"image_url",imageURL:o.icon,size:16,style:{marginRight:4}}),(0,he.jsx)("div",{style:{fontWeight:k().Wy.medium},children:"GitHub"})]}),g&&(0,he.jsx)("div",{style:u.header,children:(0,he.jsx)(S().sA,{id:"unfurling.github.pullRequestNo",defaultMessage:"PR {prNumber}",values:{prNumber:g}})}),!r&&(0,he.jsx)("div",{style:{position:"relative"},children:(0,he.jsx)(Q().Ay,{popupType:Q().z7.Popup,placementToOrigin:F().W.Right,alignmentToOrigin:F().C.Start,originGap:4,onClose:()=>{let e=!1;const t=a.current;t&&(e=(0,Y().ux)(t.getBoundingClientRect(),w().$C.x,w().$C.y)),e||null==c||c()},renderOrigin:e=>(0,he.jsx)(X().A,{style:u.buttonOrigin,...e,children:(0,p()._)({width:14})}),render:e=>(0,he.jsx)(ae().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,he.jsx)(S().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:d,store:n,token:l,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]}),i.title&&(0,he.jsx)(de().Ye,{children:(0,he.jsx)(O().Ic,{...i.title,store:n,style:u.title})}),(0,he.jsxs)(de().Ye,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[m&&(0,he.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center"},children:[m.icon&&(0,f().nN)(m.icon)&&(0,he.jsx)(ee().A,{type:"image_url",imageURL:m.icon.values[0],size:14}),(0,he.jsx)(O().Ic,{...m,store:n,style:u.dictionaryValue,avatarStyle:{marginRight:6}})]}),(0,he.jsxs)("div",{style:{lineHeight:"16px",display:"flex",gap:4},children:[y&&(0,he.jsx)("div",{style:u.innerBox,children:(0,he.jsx)(O().Ic,{attribute:y.attribute,store:n,style:u.dictionaryValue})}),h&&(0,he.jsxs)("div",{style:u.innerBox,children:[(0,he.jsx)("div",{style:u.dictionaryValue,children:(0,he.jsx)(S().sA,{id:"unfurling.generic.by",defaultMessage:"by"})}),h.icon&&(0,f().nN)(h.icon)&&(0,he.jsx)(ee().A,{type:"image_url",imageURL:h.icon.values[0],size:16,style:{marginLeft:4}}),(0,he.jsx)(O().Ic,{...h,store:n,style:u.dictionaryValue})]})]})]})]})}function bt(e){const{renderConfig:t,store:i,integration:n,haveInstanceAction:o,containerDivRef:r,token:a,parentBlockStore:l,onDismiss:d}=e,c=(0,s().IS)((e=>({dictionaryValue:{color:e.text.primary,fontSize:k().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},actionButton:{position:"absolute",top:10,right:10,zIndex:2}})),[]),u=vt(t.dictionaryAttributes,"unfurling.generic.lastModifiedBy"),g=vt(t.dictionaryAttributes,"unfurling.generic.lastModifiedAt");return(0,he.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,he.jsx)(de().Ye,{alignItems:"center",style:{fontSize:12},children:(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(ee().A,{type:"image_url",imageURL:n.icon,size:16,style:{marginRight:4}}),(0,he.jsx)("div",{style:{fontWeight:k().Wy.medium},children:"Figma"})]})}),(0,he.jsxs)(de().Ye,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[g&&(0,he.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,he.jsx)("div",{style:c.dictionaryValue,children:(0,he.jsx)(S().sA,{id:"unfurling.generic.editor",defaultMessage:"Edited"})}),(0,he.jsx)(O().Ic,{...g,store:i,style:c.dictionaryValue})]}),u&&(0,he.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,he.jsx)("div",{style:c.dictionaryValue,children:(0,he.jsx)(S().sA,{id:"unfurling.generic.from",defaultMessage:"by"})}),u.icon&&(0,f().nN)(u.icon)&&(0,he.jsx)(ee().A,{type:"image_url",imageURL:u.icon.values[0],size:16,style:{marginLeft:4}}),(0,he.jsx)(O().Ic,{...u,store:i,style:c.dictionaryValue})]})]}),t.previewImageAttribute&&(0,he.jsx)("div",{style:{marginTop:t.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"},children:(0,he.jsx)("div",{children:(0,he.jsx)(te().Ay,{src:t.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})}),!o&&(0,he.jsx)("div",{style:c.actionButton,children:(0,he.jsx)(Q().Ay,{popupType:Q().z7.Popup,placementToOrigin:F().W.Right,alignmentToOrigin:F().C.Start,originGap:4,onClose:()=>{let e=!1;const t=r.current;t&&(e=(0,Y().ux)(t.getBoundingClientRect(),w().$C.x,w().$C.y)),e||null==d||d()},renderOrigin:e=>(0,he.jsx)(X().A,{style:c.buttonOrigin,...e,children:(0,p()._)({width:14})}),render:e=>(0,he.jsx)(ae().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,he.jsx)(S().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:l,store:i,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function kt(e){var t;const{renderConfig:i,store:n,integration:o,haveInstanceAction:r,containerDivRef:a,token:l,parentBlockStore:d,onDismiss:c}=e,u=(0,s().IS)((e=>({dictionaryValue:{color:e.text.primary,fontSize:k().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},channelValue:{color:e.text.secondary,fontSize:k().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},author:{paddingTop:8,alignSelf:"stretch",alignItems:"center"},actionButton:{position:"absolute",top:10,right:10,zIndex:2}})),[]),g=vt(i.dictionaryAttributes,"unfurling.generic.author"),m=function(e,t){if(!e)return null;return e.find((e=>e.key.formatter.id===t))||null}(i.dictionaryAttributes,"unfurling.slack.slackReplyCount"),h=ft(i.headerAttributes,["title","name"]),y=ft(i.headerAttributes,["sent_at"]),x=j().hS(i.icons||[],(e=>`${e.type}:${e.values[0].toString()}`)),v=x.length>5?5:x.length;return(0,he.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,he.jsxs)(de().Ye,{alignItems:"center",style:{fontSize:12},children:[(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(ee().A,{type:"image_url",imageURL:o.icon,size:16,style:{padding:2}}),(0,he.jsx)("div",{style:{fontWeight:k().Wy.medium,marginRight:8},children:"Slack"})]}),h&&h.length>0&&(0,he.jsx)(O().Ic,{attribute:h[0].attribute,store:n,style:u.channelValue,avatarStyle:{marginRight:6}})]}),(0,he.jsxs)(de().Ye,{style:u.author,children:[g&&(0,he.jsx)("div",{style:{width:"fit-content",display:"flex",alignItems:"center"},children:(0,he.jsx)(O().Ic,{...g,store:n,style:u.dictionaryValue})}),y&&(0,he.jsx)("div",{style:{marginLeft:8},children:(0,he.jsx)(O().Ic,{...y[0],store:n,style:u.channelValue})})]}),(0,he.jsxs)(de().wt,{style:{gap:8},children:[i.bodyAttribute&&!(0,f().Q7)(i.bodyAttribute)&&(0,he.jsx)(de().Ye,{style:((null===(t=i.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{},children:(0,he.jsx)(O().xq,{attribute:i.bodyAttribute,store:n})}),(0,he.jsxs)(de().Ye,{style:{alignSelf:"stretch",alignItems:"center"},children:[i.icons&&m&&(0,he.jsx)(It,{renderConfig:i}),m&&(0,he.jsx)(O().Ic,{formatter:m.key.formatter,attribute:m.value.attribute,store:n,style:{...u.channelValue,transform:`translateX(-${3*(v-1)}px)`},avatarStyle:{marginRight:6}})]})]}),!r&&(0,he.jsx)("div",{style:u.actionButton,children:(0,he.jsx)(Q().Ay,{popupType:Q().z7.Popup,placementToOrigin:F().W.Right,alignmentToOrigin:F().C.Start,originGap:4,onClose:()=>{let e=!1;const t=a.current;t&&(e=(0,Y().ux)(t.getBoundingClientRect(),w().$C.x,w().$C.y)),e||null==c||c()},renderOrigin:e=>(0,he.jsx)(X().A,{style:u.buttonOrigin,...e,children:(0,p()._)({width:14})}),render:e=>(0,he.jsx)(ae().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,he.jsx)(S().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:d,store:n,token:l,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function At(e){const{renderConfig:t,store:i,integration:n,haveInstanceAction:o,containerDivRef:r,token:a,parentBlockStore:l,onDismiss:d,fileType:c}=e,u=(0,s().IS)((e=>({dictionaryValue:{color:e.text.primary,fontSize:k().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},actionButton:{position:"absolute",top:10,right:10,zIndex:2},imageBackground:{marginTop:t.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center",padding:"docs"===c?"14px 54px":"14px 34px",borderRadius:6,background:"doc"===c?"#4285F4":"sheet"===c?"#34A853":"#F8CB4A"}})),[c,t.dictionaryAttributes]),g=St(t.dictionaryAttributes,"username"),m=St(t.dictionaryAttributes,"updated_at"),h="doc"===c?"Google Docs":"sheet"===c?"Google Sheets":"Google Slides";return(0,he.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:288},children:[(0,he.jsx)(de().Ye,{alignItems:"center",style:{fontSize:12},children:(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(ee().A,{type:"image_url",imageURL:n.icon,size:16,style:{marginRight:4}}),(0,he.jsx)("div",{style:{fontWeight:k().Wy.medium},children:h})]})}),(0,he.jsxs)(de().Ye,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[m&&(0,he.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,he.jsx)("div",{style:u.dictionaryValue,children:(0,he.jsx)(S().sA,{id:"unfurling.generic.editor",defaultMessage:"Edited"})}),(0,he.jsx)(O().Ic,{...m,store:i,style:u.dictionaryValue})]}),g&&(0,he.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,he.jsx)("div",{style:u.dictionaryValue,children:(0,he.jsx)(S().sA,{id:"unfurling.generic.from",defaultMessage:"by"})}),(0,he.jsx)(O().Ic,{...g,store:i,style:u.dictionaryValue})]})]}),t.previewImageAttribute&&(0,he.jsx)("div",{style:u.imageBackground,children:(0,he.jsx)("div",{children:(0,he.jsx)(te().Ay,{src:t.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})}),!o&&(0,he.jsx)("div",{style:u.actionButton,children:(0,he.jsx)(Q().Ay,{popupType:Q().z7.Popup,placementToOrigin:F().W.Right,alignmentToOrigin:F().C.Start,originGap:4,onClose:()=>{let e=!1;const t=r.current;t&&(e=(0,Y().ux)(t.getBoundingClientRect(),w().$C.x,w().$C.y)),e||null==d||d()},renderOrigin:e=>(0,he.jsx)(X().A,{style:u.buttonOrigin,...e,children:(0,p()._)({width:14})}),render:e=>(0,he.jsx)(ae().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,he.jsx)(S().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:l,store:i,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function It(e){let{renderConfig:t}=e;const i=j().hS(t.icons||[],(e=>`${e.type}:${e.values[0].toString()}`));return i.length>=2?(0,he.jsx)(de().Ye,{style:{height:16,gap:-5.333,justifyContent:"flex-end"},children:i.slice(0,5).map(((e,t)=>(0,he.jsx)(O().Tr,{attribute:e,isSmall:!0,isUltraSmall:!0,style:{zIndex:10-t,transform:`translateX(${-5*t}px)`,position:"relative"}},t)))}):1===i.length?(0,he.jsx)("div",{style:{paddingRight:4},children:(0,he.jsx)(O().Tr,{attribute:i[0],isSmall:!0,isUltraSmall:!0})}):null}function wt(e){const{state:{annotation:t,store:i,token:a},onDismiss:c}=e,u=x().T$c(t),g=(0,o().v3)(),m=(0,s().DP)(),y=(0,n.useRef)(null),[v,f]=(0,n.useState)(!1),j=(0,r().K8)((()=>{const t=Z().Bv.createChildStore(i,{table:h().ev,id:u,spaceId:i.pointer.spaceId}),n=t.canEdit(),o=(0,T().yO)(),r=(0,z().Su)({store:t,isInDarkMode:"dark"===m.mode,canEdit:n,currentUserId:g.currentUser.id,getRenderFn:e=>t=>{var i,n;return(null===(i=e.hover)||void 0===i?void 0:i.call(e,t))||(null===(n=l().u.hover)||void 0===n?void 0:n.call(l().u,t))},showAction:void 0});if(!r)return;const{renderConfig:s,integration:x}=r,v=Boolean(r.action),j=e.isHoveredTokenEditable,b=i.recordStoreUIParentStore&&i.recordStoreUIParentStore instanceof Z().Bv?i.recordStoreUIParentStore:void 0,A=x.id===d().Hd&&"error"===(null==r?void 0:r.action)&&428===(null==r?void 0:r.status_code);if(f(A),o){if(x.id===d().bh||x.id===d().ZY)return(0,he.jsx)(jt,{store:t,integration:x,renderConfig:s,haveInstanceAction:v,containerDivRef:y,token:a,parentBlockStore:b,onDismiss:c});if(x.id===d().e1)return(0,he.jsx)(bt,{store:t,integration:x,renderConfig:s,haveInstanceAction:v,containerDivRef:y,token:a,parentBlockStore:b,onDismiss:c});if(x.id===d().zG)return(0,he.jsx)(kt,{store:t,integration:x,renderConfig:s,haveInstanceAction:v,containerDivRef:y,token:a,parentBlockStore:b,onDismiss:c});if(x.id===d().Hd){const e=t.getFormat().uri;let i="drive";if(e&&(i=e.includes("spreadsheets")?"sheet":e.includes("document")?"doc":e.includes("presentation")?"slide":"drive"),"drive"!==i)return(0,he.jsx)(At,{store:t,integration:x,renderConfig:s,haveInstanceAction:v,containerDivRef:y,token:a,parentBlockStore:b,onDismiss:c,fileType:i})}}return(0,he.jsxs)("div",{style:{display:"flex",flexDirection:"column"},ref:y,children:[!A&&(0,he.jsxs)(de().Ye,{alignItems:"center",style:{fontSize:12},children:[(0,he.jsx)(ee().A,{type:"image_url",imageURL:x.icon,size:16,style:{margin:4}}),(0,he.jsx)("div",{style:{flexGrow:1,fontWeight:k().Wy.medium},children:x.name}),a&&!v&&j&&(0,he.jsx)("div",{children:(0,he.jsx)(Q().Ay,{popupType:Q().z7.Popup,placementToOrigin:F().W.Right,alignmentToOrigin:F().C.Start,originGap:4,onClose:()=>{let e=!1;const t=y.current;t&&(e=(0,Y().ux)(t.getBoundingClientRect(),w().$C.x,w().$C.y)),e||null==c||c()},renderOrigin:e=>(0,he.jsx)(X().A,{style:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:m.lightIconColor},...e,children:(0,p()._)({width:14})}),render:e=>(0,he.jsx)(ae().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,he.jsx)(S().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:b,store:t,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]}),v&&j?(0,he.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"6px 0"},children:(0,he.jsx)(se().A,{canEdit:n,store:t,isHoverPreview:!0,postActionCallback:c})}):(0,he.jsx)(xt,{renderConfig:s,store:t})]})}),[u,i,g,m,a,c,e.isHoveredTokenEditable,y]);return j?(0,he.jsx)("div",{style:{padding:v?"0px 15px":"12px 16px",minWidth:260,maxWidth:450},children:j}):null}function Ct(){return(0,s().IS)((e=>({icon:{height:16,width:16,fill:e.icon.purplePrimary,marginRight:2},title:{fontSize:12,color:e.icon.purplePrimary},summary:{...(0,E().pA)(4),fontSize:12,lineHeight:1.35,color:e.text.secondary,marginBottom:12},contentCover:{color:e.text.primary,fontSize:11,lineHeight:1.5,marginBottom:0,width:"110%",transform:"translateX(-13px) translateY(-2px) scale(0.91)"},contentCoverEmpty:{height:16},imageCoverWrap:{marginBottom:16},contentCoverFade:{height:48,background:`linear-gradient(to bottom, transparent, ${e.surface.elevated} 100%)`},loadingShimmer:{marginBottom:0},rendererBlockStyle:{fontSize:9}})),[])}function Bt(e){const t=(0,o().v3)(),{store:i,startBlockId:s,size:a}=e,l=Ct(),d=(0,r().K8)((()=>R().E(i)),[i]),c=d&&x().FAw(d)>=ut,u=(0,n.useMemo)((()=>g().JW()),[]),p=(0,r().K8)((()=>{var e;if("tall"===a)return 200;const t=i.getModel();return!t||!t.isCollectionView()||t.hasWikiBlockUri()||null!==(e=i.getAssociatedCollectionStore())&&void 0!==e&&e.isPageTreeCollection()?84:125}),[a,i]);return(0,n.useEffect)((()=>{const e=J().uk.getCurrentPageVisitId();return A().Z3(t,{hover_session_id:u,mentioned_page_id:i.pointer.id,hover_content_type:c?"ai_summary":"content_preview",page_visit_id:e}),()=>{A().Q_(t,{hover_session_id:u,hover_content_type:c?"ai_summary":"content_preview",mentioned_page_id:i.pointer.id,page_visit_id:e})}}),[t,u,c,i.pointer.id]),s||!c?(0,he.jsx)(B().z,{variant:"default",store:i,coverFormat:{type:"page_content"},coverContentFadedOverlay:!0,coverContentFadedOverlayStyle:l.contentCoverFade,coverHeight:p,startBlockId:s,contentWrapStyle:l.contentCover,imageCoverWrapStyle:l.imageCoverWrap,emptyGalleryCoverStyle:l.contentCoverEmpty,loadingShimmerStyle:l.loadingShimmer,showLoadingShimmer:!0,showEmptyGalleryCover:!0,onLoadProxiedImage:()=>{},rendererBlockStyle:l.rendererBlockStyle,renderAdditionalBlocks:!0}):(0,he.jsx)("div",{children:(0,he.jsx)("div",{style:l.summary,children:(0,he.jsx)(q().A,{textValue:d,parentStore:i})})})}function Mt(e){const{store:t,contentBlockStart:i}=(0,r().K8)((()=>{const t=K().default.state.currentSpaceStore;if(!t)return{store:void 0,contentBlockStart:void 0};const i=Z().Bv.createChildStore(t,{id:e.state.annotation[1],table:"block"});if(!i.isNavigableBlock()){return{store:i.getNavigableBlockStore(),contentBlockStart:i}}return i.isDefined()?{store:i}:{store:void 0,contentBlockStart:void 0}}),[e.state.annotation]),n=(0,W().ME)(t);return t&&n&&e.originRect?(0,he.jsx)(We,{store:t,closestNonAliveAncestorStore:n,originRect:e.originRect}):(0,he.jsx)(Dt,{store:t,contentBlocks:i&&[i]})}const Rt=260,Tt=24;function _t(){return(0,s().IS)((e=>({wrapper:{width:Rt},coverContainer:{height:36,zIndex:1},content:{padding:"0 16px"},breadcrumb:{color:e.text.tertiary,fontSize:11,marginBottom:-2},pageTitle:{display:"inline",fontWeight:k().Wy.semibold,color:e.text.primary,fontSize:13,lineHeight:1.15},pageTitleIcon:{zIndex:2,position:"relative",marginLeft:16,marginTop:-15,marginBottom:8},pageTitleContainer:{...(0,E().pA)(2),verticalAlign:"top",lineHeight:1.15},description:{fontSize:k().J.UISmall.desktop,color:e.icon.primary,lineHeight:1.2},empty:{height:16},highlightedBlockWrapper:{display:"flex",marginBottom:8}})),[])}function Dt(e){const{store:t,contentBlocks:i,events:n,size:o="regular"}=e,s=_t(),{icon:a,isEmptyPage:l,content:d}=(0,r().K8)((()=>{if(!t)return{icon:void 0,isEmptyPage:!1,content:null};const e=t.isEmptyPage(),n=e?(0,he.jsx)("div",{style:{height:Tt}}):i?i.map(((e,i)=>(0,he.jsx)("div",{style:s.highlightedBlockWrapper,children:(0,he.jsx)(Bt,{store:t,startBlockId:null==e?void 0:e.id,size:o})},`${e.id}_${i}`))):(0,he.jsx)(Bt,{store:t,size:o});return{icon:t.getIcon(),isEmptyPage:e,content:n}}),[t,i,s.highlightedBlockWrapper,o]);return t?(0,he.jsxs)("div",{style:s.wrapper,...n,children:[(0,he.jsx)("div",{style:s.coverContainer,children:(0,he.jsx)(ce().A,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:36,proxyWidth:260})}),(0,he.jsx)(ne().B,{disabled:!0,icon:a,isEmptyPage:l,isLarge:!0,disableShrinking:!0,size:26,emojiSize:26,largeIcon:!0,style:s.pageTitleIcon}),(0,he.jsxs)(de().wt,{gap:4,style:s.content,children:[(0,he.jsxs)(de().wt,{gap:2,children:[(0,he.jsx)(oe().Ay,{store:t,style:s.breadcrumb}),(0,he.jsx)("div",{style:s.pageTitleContainer,children:(0,he.jsx)(re().A,{shouldWrap:!0,maxLines:2,store:t,style:s.pageTitle})})]}),d]})]}):null}},278739:(e,t,i)=>{i.d(t,{o:()=>o});i(242343);const n={viewBox:"0 0 20 20",svg:(0,i(163643).jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zm1.25 7.49L7.366 10 3.625 6.259zm.884.885H15.49l-3.74-3.741-1.309 1.308a.625.625 0 0 1-.884 0L8.25 10.884zM12.634 10l3.741 3.741V6.26zM4.509 5.375 10 10.866l5.491-5.491z"})},o=(0,i(680369).wt)("envelope",n)},301819:(e,t,i)=>{function n(e){const t=e.getSchema();if(t)for(const[n,o]of Object.entries(t)){var i;if(o&&"text"===o.type&&"summarize"===(null===(i=o.ai_inference)||void 0===i?void 0:i.type)){const t=e.getPropertyValue(n);if(t)return t}}}i.d(t,{E:()=>n})},322199:(e,t,i)=>{i.d(t,{S:()=>r});var n=()=>i(803290),o=()=>i(307542);function r(e){let{spaceStore:t}=e;const i=(0,n().K8)((()=>Boolean(null==t?void 0:t.getSetting("disable_people_hover_card"))),[t]);return(0,n().K8)((()=>(0,o().qm)()),[])&&!i}},386311:(e,t,i)=>{i.d(t,{I:()=>o});i(242343);var n=i(163643);const o=(0,i(680369).wt)("loop",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M5.80371 3.12305C5.81006 3.50391 6.05762 3.74512 6.47656 3.74512H11.3643C11.9546 3.74512 12.2783 4.0498 12.2783 4.66553V11.2925L11.377 10.3149L10.8628 9.80078C10.5962 9.54688 10.2344 9.52783 9.96777 9.78809C9.71387 10.0483 9.72021 10.4229 9.98047 10.6831L12.145 12.8413C12.6211 13.311 13.167 13.311 13.6431 12.8413L15.8076 10.6831C16.0679 10.4229 16.0742 10.0483 15.8203 9.78809C15.5537 9.52783 15.1919 9.54688 14.9253 9.80078L14.4111 10.3149L13.5161 11.2861V4.56396C13.5161 3.20557 12.8052 2.50098 11.4341 2.50098H6.47656C6.05762 2.50098 5.79736 2.74219 5.80371 3.12305ZM0.186035 7.05859C0.446289 7.3252 0.808105 7.30615 1.07471 7.0459L1.59521 6.53809L2.48389 5.56689V12.2891C2.48389 13.6475 3.19482 14.3521 4.56592 14.3521H9.52344C9.94238 14.3521 10.2026 14.1108 10.1963 13.73C10.1899 13.3428 9.94238 13.1079 9.52344 13.1079H4.64209C4.05176 13.1079 3.72803 12.7969 3.72803 12.1812V5.5542L4.62305 6.53809L5.14355 7.0459C5.40381 7.30615 5.77197 7.3252 6.03223 7.05859C6.29248 6.79834 6.28613 6.43018 6.01953 6.16992L3.85498 4.01172C3.37891 3.53564 2.83936 3.53564 2.36328 4.01172L0.19873 6.16992C-0.0678711 6.43018 -0.0742188 6.79834 0.186035 7.05859Z"})})},388128:(e,t,i)=>{i.d(t,{Q:()=>h});i(403517),i(242343);var n=()=>i(237385),o=()=>i(803290),r=()=>i(174114),s=()=>i(162901),a=()=>i(653998),l=()=>i(31448),d=()=>i(463790),c=()=>i(818369),u=()=>i(591130),p=()=>i(485966),g=()=>i(732165),m=i(163643);function h(e){const{group:t,limit:i,noMembersMessage:h,color:y,trackHover:x}=e,v=(0,r().IS)((e=>({container:{marginBottom:4,..."white_background"===y?{fontSize:l().J.UISmall.desktop,color:e.text.secondary,padding:"4px 8px"}:{}},userContainer:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},user:{flexGrow:1},moreMessage:{marginLeft:2,marginTop:4,..."white_background"===y?{fontSize:l().J.UISmall.desktop,color:e.text.secondary}:{color:e.text.contrastSecondary}}})),[y]),f=(0,o().O$)(p().AppStoreCurrentSpaceStore),S=(0,n().v3)();(0,o().K8)((()=>{x&&d().ZX(S,{group_id:t.group_id})}),[x,t,S]);const[{value:j}]=(0,s().Yb)((async()=>{if(!f)return;const e=await c().callApi({eventName:"getSpacePermissionGroupMembers",environment:S,data:{groupIds:[t.group_id],spaceId:f.id}});if("success"===e.type){var n;const o=null===(n=e.data.groupUsersMap[t.group_id])||void 0===n?void 0:n.userIds;return(0,u().gA)({userIds:o,limit:i,spaceStore:f})}}),[f,S,t,i]);return 0===(null==j?void 0:j.limitedUserStores.length)?(0,m.jsx)(m.Fragment,{children:h}):(0,m.jsxs)("div",{style:v.container,children:[null==j?void 0:j.limitedUserStores.map((e=>(0,m.jsx)("div",{style:v.userContainer,children:(0,m.jsx)(g().A,{style:v.user,userStore:e,avatarSize:18})},e.id))),j&&j.countRemainingUsers>0&&(0,m.jsx)("div",{style:v.moreMessage,children:(0,m.jsx)(a().sA,{id:"blockPermissionsSettings.groupPermissionUsers.tooltip",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:j.countRemainingUsers}})})]})}},416956:(e,t,i)=>{i.d(t,{E:()=>g});i(242343);var n=()=>i(803290),o=()=>i(174114),r=()=>i(850313),s=()=>i(518797),a=()=>i(409211),l=()=>i(76394),d=()=>i(951156),c=()=>i(482570),u=()=>i(225679),p=i(163643);function g(e){let{authorStore:t,avatarSize:i,avatarStyle:g,hasTooltip:m=!0}=e;const h=(0,n().K8)((()=>(0,u().d5)(t)),[t]),y=(0,o().IS)((e=>({placeholder:{width:i,height:i,background:e.lightDividerColor,borderRadius:i/2,flexShrink:0,...g}})),[i,g]);return h.asActor?h.table===a().oo?(0,p.jsx)(c().A,{hasTooltip:m,userValue:h.asActor,style:g,size:i,avatarShouldShowShadow:!1}):h.table===s().GP?(0,p.jsx)(d().A,{botValue:h,size:i,style:g}):h.table===r().yj?(0,p.jsx)("div",{style:y.placeholder}):void(0,l().HB)(h):(0,p.jsx)("div",{style:y.placeholder})}},664103:(e,t,i)=>{i.d(t,{X:()=>l});var n=()=>i(803290),o=()=>i(548694),r=()=>i(622286),s=()=>i(181301),a=()=>i(485966);function l(){const e=(0,n().K8)((()=>(0,s().mX)()),[]),t=(0,n().K8)((()=>a().default.state.currentSpaceStore&&(0,o().dT)({env:"production",spaceStore:a().default.state.currentSpaceStore})),[]),i=(0,r().X)("notion_calendar_launch_modal");return e||t||!i}},665051:(e,t,i)=>{i.r(t),i.d(t,{ExternalObjectInstanceBlockMenu:()=>A});i(362833),i(725707),i(500234);var n=i(242343),o=()=>i(237385),r=()=>i(803290),s=()=>i(706788),a=()=>i(386311),l=()=>i(384818),d=()=>i(518797),c=()=>i(653998),u=()=>i(76394),p=()=>i(641546),g=()=>i(133763),m=()=>i(84543),h=()=>i(271674),y=()=>i(640979),x=()=>i(802955),v=()=>i(773082),f=()=>i(331516),S=()=>i(935091),j=()=>i(858023),b=()=>i(88271),k=i(163643);function A(e){const{titleForReloadMenuOption:t,store:i,parentBlockStore:A,onAccept:I,onDismiss:w,extraSecondaryItemKey:C,token:B}=e,M=(0,o().v3)(),R=(0,g().J)(),T=(0,n.useCallback)((e=>{const t={blocks:[i],environment:M,publicEditMode:void 0,analyticsFrom:"external_object_instance_block_menu",lazyDependencies:R};return{key:e.key,render:(i,n)=>e.render(i,t,{onAccept:I,onFocus:n.onFocus}),action:i=>{let{event:n}=i;return e.action(t,n)}}}),[i,M,R,I]),_=(0,r().K8)((()=>{const e=i.getFormat().bot_id,t=v().A.getBotsAsRecordMap();if(e&&!0===v().A.state.loaded){const i=t.getValue({table:d().GP,id:e});if(i&&i.integration_id&&i.integration_id===s().ob)return!1}if(e&&!0===v().A.state.loaded){if(!v().A.externalAuthentications.state.find((t=>{let{id:i}=t;return e===i})))return!1}return!0}),[i]),D=[],z=!(0,r().O$)(x().e);_&&D.push({key:0,render:e=>(0,k.jsx)(b().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"reload external instance object",render:e=>(0,k.jsx)(f().A,{...e,title:t,svg:l().$,disabled:z,style:z?{opacity:.4}:void 0,tooltipText:z?(0,k.jsx)(c().sA,{id:"externalObjectInstanceBlockMenu.reload.offlineTooltip",defaultMessage:"Unavailable while offline"}):void 0}),action:()=>{i&&(i.isExternalObjectInstanceBlockStore()||i.isExternalObjectInstancePageBlockStore())&&h().lf({environment:M,from:"page_more_menu",store:i,spaceId:i.getSpaceId()})}}]});const O=(0,r().K8)((()=>{switch(C){case"preview_to_mention":return[T(p().oq)];case"mention_to_preview":if(!i.isExternalObjectInstanceBlockStore())return[];const e={key:"turn preview into block",render:e=>(0,k.jsx)(f().A,{...e,title:(0,k.jsx)(c().sA,{id:"hoverPreviewOverlay.action.turnPreviewIntoPreview",defaultMessage:"Turn into preview"}),svg:a().I}),action:()=>{A&&B&&m().createAndCommit({userAction:"HoverPreviewOverlay.transformExternalObjectInstanceMentionIntoBlock",environment:M,canUndo:!0,perform:e=>{h().FQ({block:i,parentStore:A,transaction:e,token:B}),e.postSubmitCallbacks.push((e=>{e||null==w||w()}))}})}};return[e];default:(0,u().HB)(C)}}),[C,T,i,A,B,M,w]);return D.push({key:1,render:e=>(0,k.jsx)(b().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[...O,T(p().tA)]}),(0,k.jsx)(S().A,{menuType:y().gu.Popup,children:(0,k.jsx)(j().Ay,{type:j().Oh.Vertical,initialFocus:void 0,onAccept:I,sections:D,style:{paddingTop:3,paddingBottom:3}})})}},672898:(e,t,i)=>{i.d(t,{Y:()=>a,k:()=>l});var n=()=>i(795756),o=()=>i(413871),r=()=>i(378219),s=()=>i(352723);function a(e,t){const i=t.getRecordStoreUIRoot(),a=i instanceof o().Bv&&i.isPageBlock()&&i.isNonEditableState(),l=(0,r().Wo)(i)&&n().A.getMode(e,i),d=Boolean((0,s().QT)(l));return!t.canEdit()||d||a}function l(e,t){return!a(e,t)}},859669:(e,t,i)=>{i.d(t,{R:()=>R});var n=i(242343),o=()=>i(752597),r=()=>i(237385),s=()=>i(174114),a=()=>i(908568),l=()=>i(711361),d=()=>i(319989),c=()=>i(827744),u=()=>i(653998),p=()=>i(220413),g=()=>i(31448),m=()=>i(91472),h=()=>i(85706),y=()=>i(622163),x=()=>i(907721),v=()=>i(286555),f=()=>i(413871),S=()=>i(126451),j=()=>i(273520),b=()=>i(516267),k=()=>i(356813),A=()=>i(392968),I=()=>i(517198),w=()=>i(610271),C=()=>i(40357),B=()=>i(410090),M=i(163643);function R(e){const t=(0,r().v3)(),{hoverData:i,href:R,handleEditClick:T,showEditButton:_,loading:D,store:z,token:O,onDismiss:P}=e,E=(0,s().IS)((e=>({newWrapper:{width:280,flexDirection:"column",alignItems:"flex-start"},coverContainer:{width:280,height:120},contentNew:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"12px 16px",gap:12,width:280},titleAndDescription:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:0,gap:2,width:248},linkTitle:{...(0,y().pA)(2),fontStyle:"normal",fontWeight:g().Wy.semibold,fontSize:14,letterSpacing:-.154,lineHeight:"143%",fontFeatureSettings:"'case' on",textOverflow:"ellipsis",color:e.text.primary},newDescription:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:0,...(0,y().pA)(3),textOverflow:"ellipsis",width:248},newText:{fontSize:12,fontWeight:400,whiteSpace:"normal",wordBreak:"break-word",color:e.text.primary},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor,background:i?(0,B().FF)(t):"dark"===e.mode?e.accentColors.gray[100]:e.buttonBackground,border:i?void 0:"1px solid var(--Stroke-Deemphasized, rgba(227, 226, 224, 0.50))"},iconBoxImageStyle:{margin:1}})),[t,i]),W=(0,u().tz)(),L=(0,n.useRef)(null),U=(0,u().YK)({copyLink:{defaultMessage:"Copy link",id:"hoverPreviewOverlay.copyLink"},editLink:{defaultMessage:"Edit link",id:"hoverPreviewOverlay.editLink"}}),H=(0,n.useCallback)((async()=>{await o().default.afterNextFlush();const e=await m().R.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard,n=R;e.copyString({environment:t,stringValue:n,copiedMessage:i})}),[t,R]),F=z&&z.recordStoreUIParentStore&&z.recordStoreUIParentStore instanceof f().Bv?z.recordStoreUIParentStore:z instanceof f().Bv?z:void 0,V=(null==i?void 0:i.thumbnail_url)??((null==i?void 0:i.images)&&i.images.length>0&&i.images[0].url);return(0,M.jsxs)(w().wt,{style:E.newWrapper,children:[_&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(k().A,{onClick:H,icon:a().n,isDarkIconColor:!0,ariaLabel:W.formatMessage(U.copyLink),hasBackground:!0,style:{position:"absolute",top:8,right:8}}),(0,M.jsx)(k().A,{onClick:T,icon:c().r,isDarkIconColor:!0,ariaLabel:W.formatMessage(U.editLink),hasBackground:!0,style:{position:"absolute",top:8,right:35}})]}),O&&F&&!_&&(0,M.jsx)("div",{style:{position:"absolute",top:8,right:8},children:(0,M.jsx)(j().Ay,{popupType:j().z7.Popup,placementToOrigin:x().W.Right,alignmentToOrigin:x().C.Start,originGap:4,onClose:()=>{let e=!1;const t=L.current;t&&(e=(0,v().ux)(t.getBoundingClientRect(),h().$C.x,h().$C.y)),e||null==P||P()},renderOrigin:e=>(0,M.jsx)(S().A,{style:E.buttonStyle,...e,children:(0,l()._)({width:14,fill:i?p().Ay.white:p().Ay.uiGray})}),render:e=>(0,M.jsx)(C().A,{parentBlockStore:F,store:z,token:O,href:R,hoverData:i,onAccept:()=>e.close()})})}),V&&(0,M.jsx)(w().Ye,{style:E.coverContainer,children:(0,M.jsx)(A().Ay,{src:V,style:{width:"100%",height:"100%",left:0,top:"calc(50% - 280px/2)"}})}),(0,M.jsxs)(w().wt,{style:E.contentNew,children:[((null==i?void 0:i.title)||(null==i?void 0:i.description))&&(0,M.jsxs)(w().wt,{style:E.titleAndDescription,children:[(null==i?void 0:i.title)&&(0,M.jsx)(w().Ye,{gap:2,children:(0,M.jsx)("div",{style:E.linkTitle,children:null==i?void 0:i.title})}),(null==i?void 0:i.description)&&(0,M.jsx)(w().Ye,{gap:2,children:(0,M.jsx)("div",{style:E.newDescription,children:(0,M.jsx)("div",{spellCheck:!1,style:E.newText,children:(0,M.jsx)("div",{children:null==i?void 0:i.description})})})})]}),D?(0,M.jsx)(I().A,{style:{width:200,height:16}}):(0,M.jsxs)(w().Ye,{alignItems:"left",style:{display:"flex",flexDirection:"row",alignItems:"center",padding:0,gap:4,width:205,height:16},children:[null!=i&&i.favicon_url?(0,M.jsx)(b().A,{type:"image_url",imageURL:null==i?void 0:i.favicon_url,size:16,style:E.iconBoxImageStyle}):null!=i&&i.icon_url?(0,M.jsx)(b().A,{type:"image_url",imageURL:null==i?void 0:i.icon_url,size:16,style:E.iconBoxImageStyle}):(0,M.jsx)(k().A,{icon:d().w,isDarkIconColor:!0,disabled:!0}),(0,M.jsx)("div",{style:{flexGrow:0,fontWeight:g().Wy.medium,color:"#787774",fontSize:12,...g().RC},children:(null==i?void 0:i.provider_name)||(null==i?void 0:i.link_provider)||R})]})]})]})}},891467:(e,t,i)=>{i.d(t,{p:()=>j});var n=i(242343),o=()=>i(237385),r=()=>i(174114),s=()=>i(711361),a=()=>i(827744),l=()=>i(653998),d=()=>i(220413),c=()=>i(85706),u=()=>i(907721),p=()=>i(286555),g=()=>i(413871),m=()=>i(126451),h=()=>i(273520),y=()=>i(356813),x=()=>i(288577),v=()=>i(40357),f=()=>i(410090),S=i(163643);function j(e){const{height:t,padding:i,padding_top:j,iframe_url:b,hoverData:k,store:A,token:I,href:w,onDismiss:C}=e,B=(0,l().YK)({editLink:{defaultMessage:"Edit link",id:"hoverPreviewOverlay.editLink"}}),M=(0,o().v3)(),R=(0,l().tz)(),T=(0,n.useRef)(null),_=(0,r().IS)((e=>({content:{width:340,height:"100%",aspectRatio:"auto",position:"relative"},container:{width:340,maxHeight:420,flexDirection:"column",alignItems:"flex-start"},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor,background:(0,f().FF)(M)}})),[M]),D=A&&A.recordStoreUIParentStore&&A.recordStoreUIParentStore instanceof g().Bv?A.recordStoreUIParentStore:A instanceof g().Bv?A:void 0;return(0,S.jsxs)("div",{style:_.container,children:[e.showEditButton&&(0,S.jsx)(y().A,{onClick:e.handleEditClick,icon:a().r,isDarkIconColor:!0,ariaLabel:R.formatMessage(B.editLink),hasBackground:!0,style:{position:"absolute",top:8,right:8,zIndex:1}}),I&&D&&k&&(0,S.jsx)("div",{style:{position:"absolute",top:8,right:8,zIndex:2},children:(0,S.jsx)(h().Ay,{popupType:h().z7.Popup,placementToOrigin:u().W.Right,alignmentToOrigin:u().C.Start,originGap:4,onClose:()=>{let e=!1;const t=T.current;t&&(e=(0,p().ux)(t.getBoundingClientRect(),c().$C.x,c().$C.y)),e||null==C||C()},renderOrigin:e=>(0,S.jsx)(m().A,{style:_.buttonStyle,...e,children:(0,s()._)({width:14,fill:d().Ay.white})}),render:e=>(0,S.jsx)(v().A,{parentBlockStore:D,store:A,token:I,href:w,hoverData:k,onAccept:()=>e.close()})})}),(0,S.jsx)(x().A,{source:b,style:_.content,preserveScale:!!(t&&t<1||i),background:!1,height:t&&t>0?t:void 0,aspectRatio:i?i/100:.75,paddingTop:j||void 0})]})}},986340:(e,t,i)=>{i.d(t,{x:()=>s});var n=()=>i(803290),o=()=>i(769884),r=()=>i(145017);function s(e){let{blockStore:t,closestNonAliveAncestorStore:i,intl:s}=e;return(0,n().K8)((()=>{var e;let n,a,l;const d=i&&i.table===r().ev&&i.getMovedToTrashTime();d?(n=!0,l=d,a=i.getMovedToTrashStore()):(l=t.getLastEditedTime(),a=t.getLastEditedByStore(),n=!1);return{trashAuthorStore:a,trashAuthorDisplayName:(null===(e=a)||void 0===e?void 0:e.getDisplayName(s))||s.formatMessage(o().Fvx.messages.anonymousPlaceholder),trashTimestamp:l,isMovedToTrashMetadata:n}}),[t,i,s])}},988189:(e,t,i)=>{i.d(t,{A:()=>r});i(242343);var n=()=>i(35462),o=i(163643);const r=function(e){const{type:t,emoji:r,customEmojiStore:s,text:a,deletedText:l,subText:d}=e,c=(0,i(803290).K8)((()=>"custom"===t&&s.isDefined()&&s.getAlive()),[s,t]),u=(0,i(174114).IS)((e=>({container:{alignItems:"center"},label:{color:e.text.contrastPrimary,fontWeight:i(31448).Wy.medium,textAlign:"center",overflowWrap:"anywhere"},emojiContainer:{background:"white",borderRadius:4,padding:4,display:"flex",lineHeight:1,marginTop:2}})),[]);return(0,o.jsxs)(i(610271).wt,{gap:4,style:u.container,children:["custom"===t&&c?(0,o.jsx)("div",{style:u.emojiContainer,children:(0,o.jsx)(i(978483).A,{emojiStore:s,size:40})}):"unicode"===t?(0,o.jsx)("div",{style:u.emojiContainer,children:(0,o.jsx)(i(479813).A,{size:40,char:r})}):null,(0,o.jsx)(n().A,{isSmall:!0,isMultiline:!0,style:u.label,children:"unicode"===t||c?a:l}),d&&(0,o.jsx)(n().A,{isSmall:!0,isMultiline:!0,style:u.label,children:d})]})}}}]);