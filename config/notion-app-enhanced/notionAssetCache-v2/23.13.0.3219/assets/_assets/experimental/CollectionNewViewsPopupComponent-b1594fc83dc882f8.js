"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[62620,90871],{40642:(e,t,o)=>{o.d(t,{b:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},44250:(e,t,o)=>{function n(e){return!(!e||"askUserToPick"in e)}function r(e){if(!e||!("askUserToPick"in e))return e}function i(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}o.d(t,{DK:()=>r,K$:()=>n,j6:()=>i})},44405:(e,t,o)=>{o.d(t,{A:()=>u});o(242343);var n=()=>o(862510),r=()=>o(174114),i=()=>o(650199),l=()=>o(711361),a=()=>o(31448),c=()=>o(535906),s=()=>o(397791),p=()=>o(581344),d=o(163643);function u(e){const{icon:t,iconStyle:o,title:u,caption:m,right:y,rightStyle:g,isRed:f,isGray:v,isOrange:S,onClick:w,onMouseDown:h,onMouseEnter:x,onMouseLeave:b,disabled:C,showChevron:k,chevronStyle:_,rotateChevron:I,showDragHandle:T,focused:j,textWrapperStyle:A,shouldWrapCaption:V,desktopIconStyle:M,buttonStyle:P,desktopTitleStyle:B,source:W,menuListItemProps:F}=e,D=(0,p().y$)(),H=(0,r().IS)((e=>({style:{color:v?e.text.secondary:S?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.text.primary,fill:v?e.mediumIconColor:S?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:C?.4:void 0,...P},leftIconStyle:{width:D,height:D,...t===l()._&&{height:3},...o},rightStyle:{display:"flex",alignItems:"center",color:C?e.text.primary:e.text.tertiary,fill:C?e.regularIconColor:e.lightIconColor,flexShrink:0,...g},rightChevronStyle:{marginLeft:"tableHeaderMenu"===W?0:6,transition:"transform 200ms ease-in-out",...I&&{transform:"rotate(90deg)"},..._}})),[v,S,C,o,t,_,g,P,D,I,W]),{itemRef:R,isTabbable:N,onKeyDown:E,onFocus:z}=(0,n().e)();return(0,d.jsx)(c().A,{ref:R,icon:null==t?void 0:t(H.leftIconStyle),focused:j||!1,disabled:C,title:u,caption:m,shouldWrapCaption:V,desktopTitleStyle:{flexGrow:1,flexShrink:1,...B},onKeyDown:E,onFocus:z,disallowTabbing:!N,showDragHandle:T,buttonStyle:H.style,rightStyle:H.rightStyle,isRedOnHover:f,ignoreLocalHoverState:!!C||void 0,right:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{...a().RC,display:"flex"},children:y}),!C&&k&&(0,d.jsx)(s().I,{icon:i().x,size:"sm",color:"tableHeaderMenu"===W?"secondary":"tertiary",style:H.rightChevronStyle})]}),onClick:w,onMouseDown:h,onMouseEnter:x,onMouseLeave:b,textWrapperStyle:A,desktopIconStyle:M,...F})}},130935:(e,t,o)=>{o.d(t,{_:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("layout",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.19999C2.28953 2.19999 2.19999 2.28953 2.19999 2.39998V11.5999C2.19999 11.7103 2.28953 11.7999 2.39999 11.7999H4.99997C5.11042 11.7999 5.19997 11.7103 5.19997 11.5999V2.39998C5.19997 2.28953 5.11042 2.19999 4.99997 2.19999H2.39999ZM1 2.39998C1 1.6268 1.62679 1 2.39999 1H4.99997C5.77316 1 6.39995 1.6268 6.39995 2.39998V11.5999C6.39995 12.3731 5.77316 12.9999 4.99997 12.9999H2.39999C1.62679 12.9999 1 12.3731 1 11.5999V2.39998ZM9 8.80036C8.88954 8.80036 8.8 8.88991 8.8 9.00036V11.6003C8.8 11.7108 8.88954 11.8003 9 11.8003H11.6C11.7105 11.8003 11.8 11.7108 11.8 11.6003V9.00036C11.8 8.88991 11.7105 8.80036 11.6 8.80036H9ZM7.60001 9.00036C7.60001 8.22717 8.2268 7.60037 9 7.60037H11.6C12.3731 7.60037 13 8.22717 13 9.00036V11.6003C13 12.3736 12.3731 13.0003 11.6 13.0003H9C8.2268 13.0003 7.60001 12.3736 7.60001 11.6003V9.00036ZM8.79994 2.39998C8.79994 2.28953 8.88949 2.19999 8.99994 2.19999H11.5999C11.7104 2.19999 11.7999 2.28953 11.7999 2.39998V4.99997C11.7999 5.11043 11.7104 5.19996 11.5999 5.19996H8.99994C8.88949 5.19996 8.79994 5.11043 8.79994 4.99997V2.39998ZM8.99994 1C8.22675 1 7.59995 1.6268 7.59995 2.39998V4.99997C7.59995 5.77316 8.22675 6.39995 8.99994 6.39995H11.5999C12.3731 6.39995 12.9999 5.77316 12.9999 4.99997V2.39998C12.9999 1.6268 12.3731 1 11.5999 1H8.99994Z"})})},137696:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>l,x2:()=>r});var n=()=>o(76394);function r(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,n().O9)(t)&&r(t.type)}function l(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,n().HB)(e)}},151602:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(129044))().default{getInitialState(){return{}}}const r=new n;o(996094).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},153258:(e,t,o)=>{o.d(t,{b:()=>l});var n=()=>o(876695),r=()=>o(137476);var i=()=>o(545313);function l(e){const{environment:t,collectionContextStore:o,view_type:l,view_config_uri:a,from:c,...s}=e;!function(e,t){r().vd(e,"create_view",t)}(t,{...(0,n().sl)(o)||{},...s,view_type:l,view_config_uri:a,from:c}),(0,i().f)({collectionContextStore:o,action:"create_view",from:c,property_type:void 0})}},155342:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,questionMarkCircleIcon:()=>i});o(242343);var n=o(163643);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},i=(0,o(680369).wt)("questionMarkCircle",r)},171700:(e,t,o)=>{o.d(t,{L:()=>c});var n=o(242343),r=()=>o(153258),i=()=>o(84543),l=()=>o(129978),a=()=>o(108665);function c(e){let{environment:t,collectionContextStore:o,from:c,onAddNewFormClick:s}=e;const{value:p}=(0,l().fJ)(a().formsEditorDependency),d=(0,n.useCallback)((()=>{var e;const n=(null===(e=o.collectionViewBlockStore())||void 0===e||null===(e=e.inMemoryRecordCache)||void 0===e?void 0:e.isTemporaryData)??!1;i().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:t,canUndo:!0,skipDefaultPostPerformValidationChecks:n,perform:e=>{p&&p.formEditorActions.createAndFocusCollectionFormEditorView({environment:t,collectionContextStore:o,transaction:e})}}),null==s||s(),(0,r().b)({environment:t,collectionContextStore:o,view_type:"form_editor",from:c})}),[t,o,p,s,c]);return p?d:void 0}},194585:(e,t,o)=>{o.d(t,{n:()=>k,z:()=>b});o(610931),o(242343);var n=()=>o(803290),r=()=>o(174114),i=()=>o(505966),l=()=>o(73658),a=()=>o(916963),c=()=>o(758989),s=()=>o(242978),p=()=>o(584044),d=()=>o(130935),u=()=>o(40642),m=()=>o(76394),y=()=>o(511441),g=()=>o(327665),f=()=>o(622286),v=()=>o(328653),S=()=>o(940445),w=o(163643);const h=16;function x(e){let{icon:t,theme:o,size:n,style:i}=e;const a=(0,r().IS)((e=>({icon:{fill:(0,v().d)(t,e).icon.primary,...i}})),[t,i]);return(0,w.jsx)(l().p,{icon:t,theme:o,size:n,style:a.icon})}function b(e){var t;let{template:o,size:n,iconStyle:l}=e;const a=n??h,g=(0,r().IS)((()=>({icon:{width:a,height:a,...l}})),[a,l]),f=(0,r().DP)();if((0,i().cB)(o.templateId))return(0,p().L)(g.icon);const{type:v}=o;switch(v){case"property":return(0,w.jsx)(C,{template:o,iconSize:a,styles:g});case"collection_view":return(0,w.jsx)(y().h,{viewIcon:null===(t=o.value.format)||void 0===t?void 0:t.collection_view_icon,viewType:o.value.type,color:"lightGray",style:g.icon});case"layout":return(0,w.jsx)(w.Fragment,{children:(0,d()._)(g.icon)});case"block":return(0,w.jsx)(w.Fragment,{children:(0,u().b)(g.icon)});case"collection":case"compound":const e="collection"===o.type?o.value.targetCollection.icon:o.icon;if(!(0,c().T8)(e))throw new Error("Only Notion static icons are allowed for template icons");return(0,w.jsx)(x,{icon:e,theme:f,size:a,style:g.icon});case"automation":return(0,w.jsx)(w.Fragment,{children:(0,s().v)(g.icon)});default:(0,m().HB)(v)}}function C(e){let{template:t,iconSize:o,styles:i}=e;const l=(0,r().DP)(),c=(0,f().X)("nds_default_property_noticon"),s=(0,n().K8)((()=>{const{relatedCollectionTemplateId:e}=t;if("relation"===t.value.type&&e){return S().globalWorkflowTemplates.fromIdOfType({templateId:e,type:"collection"}).value.targetCollection.icon}return t.value.icon}),[t]);return(0,w.jsx)(a().zB,{type:t.value.type,icon:s,size:o,style:i.icon,theme:l,isDefaultNoticonEnabled:c})}function k(e){let{template:t,backgroundSize:o}=e;const n=(0,r().IS)((e=>({iconContainer:{background:_({theme:e,template:t})[30]},icon:{fill:_({theme:e,template:t})[400]}})),[t]);return(0,w.jsx)(g().y,{backgroundColor:n.iconContainer.background,backgroundSize:o,icon:(0,w.jsx)(b,{template:t,iconStyle:n.icon})})}function _(e){let{theme:t,template:o}=e;const{type:n}=o;switch(n){case"collection_view":case"automation":return t.accentColors.blue;case"property":return"relation"===o.value.type?t.accentColors.yellow:t.accentColors.red;case"layout":return t.accentColors.orange;case"block":return t.accentColors.purple;case"compound":return t.accentColors.green;case"collection":return t.accentColors.pink;default:(0,m().HB)(n)}}},235786:(e,t,o)=>{o.d(t,{b:()=>f,w:()=>v});var n=()=>o(237385),r=()=>o(803290),i=()=>o(367950),l=()=>o(162901),a=()=>o(528762),c=()=>o(439154),s=()=>o(818369),p=()=>o(129978),d=()=>o(485966),u=()=>o(595922),m=()=>o(172470),y=()=>o(151602);const g=!1;function f(e){var t;const o=null===(t=(0,p().fJ)(c().xl).value)||void 0===t?void 0:t.loadWorkflowTemplateInstances;(0,r().K8)((()=>{if(!o)return;const t=e instanceof u().A?e.collectionStore():e;t&&o(t)}),[o,e])}function v(){const e=(0,n().v3)(),t=(0,r().K8)((()=>{var e;if(function(){const e=m().A.state.initialRenderCompleted;g&&!e&&console.log("Initial page render is not yet completed, delaying refresh of workflow template instances.");return e}())return null===(e=d().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,l().Yb)((async()=>{if(!t)return;(y().A.debug||g)&&console.log("Refreshing workflow template instance map for space",t);const o={table:a().NX,id:t,spaceId:t},n=await s().callApi({eventName:"getWorkflowTemplateInstances",environment:e,data:{spaceId:o.spaceId,scopeTable:o.table,scopeId:o.id,enableInstanceRobustness:!0}});if("success"===n.type){const e=(0,i()._)(o);y().A.setState({...y().A.state,[e]:n.data.instanceMap[e]})}}),[e,t])}},242978:(e,t,o)=>{o.d(t,{v:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("boltFilled",{svg:(0,n.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},271142:(e,t,o)=>{o.d(t,{EC:()=>b,To:()=>x,YC:()=>C,or:()=>h,u:()=>w});o(610931);var n=o(242343),r=()=>o(237385),i=()=>o(803290),l=()=>o(496985),a=()=>o(232312),c=()=>o(653998),s=()=>o(76394),p=()=>o(337658),d=()=>o(73631),u=()=>o(137696),m=()=>o(129978),y=()=>o(113800),g=()=>o(830925),f=o(163643);const v=new WeakMap,S=(0,n.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});S.displayName="AutomationContext";function w(e){const{automationStore:t,children:o,contextType:n}=e,w=(0,r().v3)(),h=(0,c().tz)(),{value:x}=(0,m().fJ)(d().T.formulas),{value:b}=(0,m().fJ)(p().QV.automationTypecheck),C=(0,g().n)(t),k=(0,i().K8)((()=>{if(!x)return{error:new(a().N9)("Missing formulas dependency")};if(!b)return{error:new(a().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:n,contextType:r,formulasModule:i,intl:a,isSubscribed:c}=e,p=v.get(o);if(p)return p;{const e=new(l().default)((()=>{const e=o.getTriggerType();let l=r;return(0,s().O9)(e)&&(0,u().x2)(e)&&(l=(0,u().H8)(e)),(0,y().Z)({environment:t,automationStore:o,automationTypecheckModule:n,contextType:l,formulasModule:i,intl:a,isSubscribed:c})}),{debugName:"automationContextTypecheckResultCachedStore"});return v.set(o,e),e}}({environment:w,automationStore:t,automationTypecheckModule:b,contextType:n,formulasModule:x,intl:h,isSubscribed:C});return e.state}),[w,t,b,n,x,h,C]);return(0,f.jsx)(S.Provider,{value:{automationStore:t,typecheckResult:k,contextType:n,defined:!0},children:o})}function h(e){const{automationStore:t,children:o}=e,n=(0,i().K8)((()=>{var e;return null===(e=t.getTrigger())||void 0===e?void 0:e.type}),[t]);return(0,f.jsx)(w,{automationStore:t,contextType:(0,u().H8)(n??"event"),children:o})}function x(e){var t;return null===(t=v.get(e))||void 0===t?void 0:t.state}function b(){const e=n.useContext(S);if(!1===e.defined)throw new Error("No automation context found!");return e}function C(){return n.useContext(S)}},280704:(e,t,o)=>{o.d(t,{b:()=>r});o(242343);var n=o(163643);const r=(0,o(680369).wt)("plusThick",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},327665:(e,t,o)=>{o.d(t,{y:()=>i});o(242343);var n=()=>o(174114),r=o(163643);function i(e){let{icon:t,backgroundColor:o,backgroundSize:i}=e;const l=(0,n().IS)((e=>({iconContainer:{height:i??28,width:i??28,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",background:o??e.tint.regular}})),[o,i]);return(0,r.jsx)("div",{style:l.iconContainer,children:t})}},328653:(e,t,o)=>{o.d(t,{d:()=>i});var n=()=>o(758989);const r={light:{gray:{stroke:{secondary:"rgba(84, 72, 49, 0.15)"},fill:{primary:"rgba(84, 72, 49, 0.15)",secondary:"rgba(84, 72, 49, 0.08)",tertiary:"rgba(84, 72, 49, 0.04)"},text:{primary:"#1D1B16"}},red:{stroke:{secondary:"rgba(244, 171, 159, 0.40)"},fill:{primary:"rgba(244, 171, 159, 0.40)",secondary:"rgba(244, 171, 159, 0.40)",tertiary:"rgba(243, 136, 118, 0.07)"},text:{primary:"#5D1715"}},brown:{stroke:{secondary:"rgba(210, 162, 141, 0.35)"},fill:{primary:"rgba(210, 162, 141, 0.35)",secondary:"rgba(210, 162, 141, 0.17)",tertiary:"rgba(210, 162, 141, 0.07)"},text:{primary:"#442A1E"}},orange:{stroke:{secondary:"rgba(224, 124, 57, 0.27)"},fill:{primary:"rgba(224, 124, 57, 0.27)",secondary:"rgba(224, 124, 57, 0.15)",tertiary:"rgba(224, 124, 57, 0.07)"},text:{primary:"#49290E"}},yellow:{stroke:{secondary:"rgba(236, 191, 66, 0.39)"},fill:{primary:"rgba(236, 191, 66, 0.39)",secondary:"rgba(215, 177, 24, 0.15)",tertiary:"rgba(215, 177, 24, 0.07)"},text:{primary:"#402C1B"}},green:{stroke:{secondary:"rgba(123, 183, 129, 0.27)"},fill:{primary:"rgba(123, 183, 129, 0.27)",secondary:"rgba(123, 183, 129, 0.15)",tertiary:"rgba(123, 183, 129, 0.07)"},text:{primary:"#1C3829"}},blue:{stroke:{secondary:"rgba(93, 165, 206, 0.27)"},fill:{primary:"rgba(93, 165, 206, 0.27)",secondary:"rgba(95, 167, 208, 0.15)",tertiary:"rgba(91, 166, 209, 0.07)"},text:{primary:"#183347"}},purple:{stroke:{secondary:"rgba(168, 129, 197, 0.27)"},fill:{primary:"rgba(168, 129, 197, 0.27)",secondary:"rgba(204, 170, 229, 0.15)",tertiary:"rgba(206, 175, 229, 0.07)"},text:{primary:"#412454"}},pink:{stroke:{secondary:"rgba(225, 136, 179, 0.27)"},fill:{primary:"rgba(225, 136, 179, 0.27)",secondary:"rgba(235, 159, 196, 0.15)",tertiary:"rgba(231, 147, 188, 0.07)"},text:{primary:"#4C2337"}}},dark:{gray:{stroke:{secondary:"rgba(255, 255, 255, 0.09)"},fill:{primary:"rgba(255, 255, 255, 0.13)",secondary:"rgba(255, 255, 255, 0.09)",tertiary:"rgba(255, 255, 255, 0.03)"},text:{primary:"rgba(255, 255, 255, 0.81)"}},red:{stroke:{secondary:"rgba(222, 85, 85, 0.25)"},fill:{primary:"rgba(222, 85, 84, 0.30)",secondary:"rgba(222, 85, 84, 0.30)",tertiary:"rgba(222, 85, 88, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},brown:{stroke:{secondary:"rgba(184, 101, 69, 0.25)"},fill:{primary:"rgba(184, 101, 68, 0.30)",secondary:"rgba(184, 101, 68, 0.30)",tertiary:"rgba(184, 101, 72, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},orange:{stroke:{secondary:"rgba(233, 126, 37, 0.20)"},fill:{primary:"rgba(233, 126, 36, 0.30)",secondary:"rgba(233, 126, 36, 0.30)",tertiary:"rgba(233, 126, 40, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},yellow:{stroke:{secondary:"rgba(179, 129, 61, 0.20)"},fill:{primary:"rgba(231, 161, 55, 0.30)",secondary:"rgba(231, 161, 55, 0.30)",tertiary:"rgba(162, 105, 50, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},green:{stroke:{secondary:"rgba(45, 153, 100, 0.20)"},fill:{primary:"rgba(45, 153, 100, 0.30)",secondary:"rgba(45, 153, 100, 0.30)",tertiary:"rgba(45, 153, 100, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},blue:{stroke:{secondary:"rgba(51, 126, 169, 0.20)"},fill:{primary:"rgba(51, 126, 169, 0.33)",secondary:"rgba(51, 126, 169, 0.33)",tertiary:"rgba(51, 126, 169, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},purple:{stroke:{secondary:"rgba(155, 97, 211, 0.18)"},fill:{primary:"rgba(155, 97, 211, 0.28)",secondary:"rgba(155, 97, 211, 0.28)",tertiary:"rgba(155, 97, 211, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},pink:{stroke:{secondary:"rgba(220, 76, 145, 0.22)"},fill:{primary:"rgba(220, 76, 145, 0.30)",secondary:"rgba(220, 76, 145, 0.30)",tertiary:"rgba(220, 76, 145, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}}}};function i(e,t){const o=(0,n().VA)(e),i="lightgray"===o?"gray":o;return{...r[t.mode][i],icon:{primary:n().l8[t.mode][i]}}}},362493:(e,t,o)=>{o.d(t,{Z:()=>T,p:()=>j});o(610931),o(403517),o(242343);var n=()=>o(237385),r=()=>o(803290),i=()=>o(174114),l=()=>o(505966),a=()=>o(564134),c=()=>o(76394),s=()=>o(521325),p=()=>o(84543),d=()=>o(471685),u=()=>o(91338),m=()=>o(137476),y=()=>o(477784),g=()=>o(518022),f=()=>o(605845),v=()=>o(716430),S=()=>o(707299),w=()=>o(940445),h=()=>o(727528),x=()=>o(590091),b=()=>o(921734),C=()=>o(772180),k=()=>o(413995),_=()=>o(194585),I=o(163643);function T(e){let{environment:t,template:o,isInSuggestedSection:n,collectionContextStore:r}=e;return{key:o.templateId,action:()=>{if(n)j({environment:t,template:o,collectionContextStore:r,suggestedFeatureAnalytics:void 0});else{const{collectionStore:e,collectionViewStore:n,collectionSettingsStore:i}=(0,x().i)(r);(0,v().UD)({template:o,environment:t,collectionStore:e,collectionViewStore:n,collectionSettingsStore:i,collectionContextStore:r})}},render:e=>(0,I.jsx)(A,{buttonMenuItemProps:e,template:o,isInSuggestedSection:n})}}function j(e){let{environment:t,collectionContextStore:o,template:n,suggestedFeatureAnalytics:r}=e;const i=o.collectionStore();if(!i)throw new Error("collectionStore not found");const a=i.getWorkflowTemplateId();r&&(0,m().u4)({environment:t,event:{eventName:"suggested_feature_template_clicked",eventProperties:{origin:r.origin,selected_index:r.selectedIndex,template_ids_shown:r.shownTemplateIds,template_id_clicked:n.templateId,collection_template_id:a}}});const c=o.settingsStore;if((0,C().isWorkflowTemplateWithConfirmStep)(n))s().a2({collectionSettingsStore:c,item:{type:"confirmAddTemplate",template:n}});else if((0,l().Sz)(n)){const{relatedCollectionTemplateId:e}=n;!function(e){var t;let{environment:o,template:n,collectionStore:r,relatedCollectionTemplateId:i}=e;const l=null===(t=r.getParentBlockStore())||void 0===t?void 0:t.getParentStore();if(!l)throw new Error(`parentStore not found for ${r.id}`);if(!(0,S().u)(l))throw new Error(`Incorrect parent store: ${l.table} ${l.id}`);const a=w().globalWorkflowTemplates.fromIdOfType({templateId:i,type:"collection"});(0,g().openSelectedTemplateOnboardingModalForInAppFlows)({environment:o,template:a,origin:"suggested_feature_template",parentStore:l,navigateToOnFinish:"skip",relationInfos:[{type:"source",collectionStore:r,relationPropertyTemplate:n}],aiPrompt:void 0})}({environment:t,template:n,collectionStore:i,relatedCollectionTemplateId:e})}else p().createAndCommit({userAction:"FeatureTemplateMenuItem.addFeatureTemplateToTarget",environment:t,canUndo:!0,perform:e=>{f().ai({environment:t,transaction:e,collectionStore:i,template:n,logger:new(w().WorkflowTemplateLogger),origin:"suggested_feature"}),r&&(0,m().u4)({environment:t,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:r.origin,template_id_added:n.templateId,collection_template_id:a}}});const l=o.collectionViewStore();l&&v().UD({template:n,environment:t,collectionStore:i,collectionViewStore:l,collectionSettingsStore:c,collectionContextStore:o})}})}function A(e){let{buttonMenuItemProps:t,template:o,isInSuggestedSection:l}=e;const s=(0,i().IS)((e=>({iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"},icon:{fill:e.regularIconColor}})),[]),{collectionStore:p}=(0,x().V)(),m=(0,n().v3)(),g=(0,r().K8)((()=>(0,h().NU)({environment:m,collectionStore:p,templateId:o.templateId})),[m,p,o.templateId]),f=(0,r().K8)((()=>function(e){let{template:t,collectionStore:o}=e;const{type:n}=t;switch(n){case"property":const{value:e}=t;if((0,a().DQ)(e)){const n=function(e){let{templateId:t,propertyTemplateSchema:o,collectionStore:n}=e;const r=(0,h().S1)({collectionStore:n,templateId:t,instancePointerType:"property"});if(!r)return o.options??[];const i=n.getSchema()[r.id];if(!i||!(0,a().DQ)(i))return[];return i.options??[]}({templateId:t.templateId,propertyTemplateSchema:e,collectionStore:o}).map((e=>e.value));return(0,w().getWorkflowTemplateItemsCaption)(n)}return;case"collection_view":return`${y().A.formatMessage(u().X[t.value.type])} view`;case"compound":return;default:(0,c().HB)(n)}}({template:o,collectionStore:p})),[o,p]),v=(0,w().getWorkflowTemplateName)(o);return l?(0,I.jsx)(d().I,{buttonMenuItemProps:t,title:v,icon:(0,I.jsx)(_().n,{template:o}),right:(0,I.jsx)(k().z,{isAdded:g})}):(0,I.jsx)(d().I,{buttonMenuItemProps:t,title:v,caption:f,icon:(0,I.jsx)("div",{style:s.iconContainer,children:(0,I.jsx)(_().z,{template:o,iconStyle:s.icon})}),right:(0,I.jsx)(b()._,{})})}},367950:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>n})},374886:(e,t,o)=>{o.d(t,{O:()=>a});var n=o(242343),r=()=>o(237385),i=()=>o(803290),l=()=>o(137476);function a(e){let{collectionContextStore:t,shownTemplateIds:o,origin:a}=e;const c=(0,r().v3)(),s=(0,i().K8)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getWorkflowTemplateId()}),[t]),p=(0,n.useRef)(!1);(0,n.useEffect)((()=>{!p.current&&o.length>0&&((0,l().u4)({environment:c,event:{eventName:"suggested_feature_templates_shown",eventProperties:{origin:a,collection_template_id:s,template_ids_shown:o}}}),p.current=!0)}))}},405553:(e,t,o)=>{o.d(t,{Q:()=>d});o(242343);var n=()=>o(897758),r=()=>o(653998),i=()=>o(153258),l=()=>o(791009),a=()=>o(535906),c=()=>o(397791),s=()=>o(308265),p=o(163643);function d(e){let{environment:t,collectionContextStore:o,from:d,onAction:u}=e;if((0,s().BG)())return{key:"newDatabase",render:e=>(0,p.jsx)(a().A,{title:(0,p.jsx)(r().sA,{defaultMessage:"New database",id:"collectionTabBar.newDatabase.title"}),icon:(0,p.jsx)(c().I,{icon:n().R}),...e}),action:()=>{(0,l().l)({environment:t,collectionContextStore:o}),null==u||u(),(0,i().b)({environment:t,collectionContextStore:o,view_type:"table",from:d})}}}},413995:(e,t,o)=>{o.d(t,{z:()=>a});o(242343);var n=()=>o(174114),r=()=>o(539645),i=()=>o(280704),l=o(163643);function a(e){let{isAdded:t}=e;const o=(0,n().IS)((e=>({circle:{height:24,width:24,borderRadius:50,display:"flex",alignItems:"center",justifyContent:"center",background:t?"dark"===e.mode?e.accentColors.blue[100]:e.accentColors.blue[50]:e.lightGrayButtonBackground},plusIcon:{height:15,width:15,fill:e.mediumIconColor},checkIcon:{height:12,width:12,fill:e.blueColor}})),[t]);return(0,l.jsx)("div",{style:o.circle,children:t?(0,r().o)(o.checkIcon):(0,i().b)(o.plusIcon)})}},464342:(e,t,o)=>{o.r(t),o.d(t,{CollectionNewViewsPopupComponent:()=>Z});o(362833),o(725707),o(491955),o(324989),o(403517);var n=o(242343),r=()=>o(237385),i=()=>o(803290),l=()=>o(174114),a=()=>o(505966),c=()=>o(178063),s=()=>o(653998),p=()=>o(975392),d=()=>o(76394),u=()=>o(153258),m=()=>o(84543),y=()=>o(527120),g=()=>o(414997),f=()=>o(283759),v=()=>o(171700),S=()=>o(851033),w=()=>o(405553),h=()=>o(535906),x=()=>o(435819),b=()=>o(935091),C=()=>o(858023),k=()=>o(743668),_=()=>o(397791),I=()=>o(88271),T=()=>o(103151),j=()=>o(477784),A=()=>o(640979),V=()=>o(622286),M=()=>o(300659),P=()=>o(907721),B=()=>o(485966),W=()=>o(308265),F=()=>o(362493),D=()=>o(194585),H=()=>o(940445),R=()=>o(961716),N=()=>o(374886),E=()=>o(791009),z=()=>o(259897),O=()=>o(314164),L=()=>o(91338),U=()=>o(511441),K=()=>o(981378),$=o(163643);function Z(e){let{collectionContextStore:t,onClose:o,forceHideAdvancedConfigItems:Z}=e;const X=(0,r().v3)(),G=X.device,q=(0,W().BG)(),Y=(0,i().K8)((()=>(0,O().NB)(t,G)||Z?"none":q?"item":"section"),[t,G,q,Z]),Q=(0,n.useCallback)((e=>({key:e,render:t=>(0,$.jsx)(h().A,{title:j().A.formatMessage(L().X[e]),icon:(0,$.jsx)(U().h,{color:"regular",viewType:e}),...t}),action:()=>{m().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:X,canUndo:!0,perform:o=>{(0,E().Z)({environment:X,collectionContextStore:t,newViewType:e,transaction:o})}}),(0,u().b)({environment:X,collectionContextStore:t,view_type:e,from:"addButton"})}})),[X,t]),J=function(e){let{collectionContextStore:t}=e;const o=(0,r().v3)(),n=(0,V().X)("geo_point_property"),l=(0,i().K8)((()=>(0,M().X)({disableExposureLogging:!0})),[]),c=(0,i().K8)((()=>{var e;return null===(e=t.collectionViewBlockStore())||void 0===e?void 0:e.hasSingleSourceAndNoLinkedCollections()}),[t]),s=(0,R().Y)(t).filter((e=>(0,a().Xq)(e,"collection_view"))),p=(0,i().K8)((()=>{const e=t.collectionStore(),n=t.collectionViewBlockStore();if(!e||!n||!c)return[];const r=e.getFormat().app_config_uri,i=r?(0,f().lS)((0,g().appConfigs)(),r):void 0;return i?(0,f().Ib)({environment:o,appConfig:i,collectionStore:e,collectionViewBlockStore:n}):[]}),[t,o,c]);if(c){if(p.length)return p.map((e=>({type:"suggested_typed_view",viewFeature:e})));if(s.length)return s.map((e=>({type:"suggested_workflow_template_view",viewTemplate:e})))}const d=["table","board","chart","list","timeline","calendar","gallery"];l&&d.push("feed");n&&d.push("map");return d.map((e=>({type:"generic_view",viewType:e})))}({collectionContextStore:t}),ee={key:"emptyView",render:e=>(0,$.jsx)(h().A,{title:(0,$.jsx)(s().sA,{defaultMessage:"Empty view",id:"collectionTabBar.newEmptyView.title"}),icon:(0,$.jsx)(_().I,{icon:c().plusIcon}),...e}),action:()=>{m().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:X,canUndo:!0,perform:e=>{(0,E().Z)({environment:X,collectionContextStore:t,newViewType:"table",transaction:e})}}),(0,u().b)({environment:X,collectionContextStore:t,view_type:"table",from:"addButton"})}},{renderSuggestedTypedView:te}=function(e,t){const o=(0,r().v3)(),l=(0,i().O$)(B().AppStoreCurrentSpaceViewStore),a=(0,i().K8)((()=>e.collectionViewBlockStore()),[e]),c=(0,i().K8)((()=>e.collectionStore()),[e]),s=(0,i().K8)((()=>{var e;if(!c)return;const t=null===(e=c.getFormat())||void 0===e?void 0:e.app_config_uri;return t?(0,f().lS)((0,g().appConfigs)(),t):void 0}),[c]),p=n.useCallback((t=>{if(!a||!s||!l)return;const n=a.getParentStore();if(!n||"block"!==n.table&&"space"!==n.table&&"team"!==n.table)return;if(1!==t.dependencies.length)return;const r=t.dependencies[0];m().createAndCommit({userAction:"CollectionViewSuggestedViews.createView",environment:o,canUndo:!0,perform:i=>{var c;y().applyTypedFeatures({environment:o,spaceViewStore:l,appParentStore:n,appUri:s.uri,features:[{type:"simple",featureUri:t.uri}],appCollectionViewBlockStores:[a],createOrModify:"modify",transaction:i});const p=((null===(c=a.getFormat())||void 0===c?void 0:c.app_uri_map)??{})[r.uri];(0,z().t)({environment:o,collectionContextStore:e,collectionViewId:p,isFullScreen:e.isFullScreenStore.state,isRootChild:e.isRootChildStore.state,isInPeekRenderer:e.isInPeekRendererStore.state}),(0,u().b)({environment:o,collectionContextStore:e,view_type:r.value.type,view_config_uri:t.uri,feature:{id:p,from:"suggested_view",type:t.uri},from:"addButton"})}})}),[a,s,l,o,e]),d=n.useCallback((e=>{const o=(e,t)=>{var o;const n=e.dependencies[0],r=(0,$.jsx)(U().h,{color:"regular",viewIcon:null===(o=n.value.format)||void 0===o?void 0:o.collection_view_icon,viewType:n.value.type});return(0,$.jsx)(h().A,{title:n.value.name?n.value.name:"New View",icon:r,...t})};return{key:e.uri,render:t=>(0,$.jsx)(T().A,{placement:P().W.Left,render:n=>o(e,{...t,...n,onMouseEnter:e=>{var o,r;null===(o=n.onMouseEnter)||void 0===o||o.call(n,e),null===(r=t.onMouseEnter)||void 0===r||r.call(t,e)}}),renderTooltip:()=>e.description}),action:()=>{p(e),t()}}}),[p,t]);return{renderSuggestedTypedView:d}}(t,o),{renderSuggestedWorkflowTemplateView:oe}=function(e,t){const o=(0,r().v3)(),n=(0,l().IS)((e=>({icon:{fill:e.regularIconColor}})),[]);return{renderSuggestedWorkflowTemplateView:(r,i,l)=>({key:`workflow.${r.templateId}`,action:()=>{(0,F().p)({environment:o,collectionContextStore:e,template:r,suggestedFeatureAnalytics:{origin:"suggested_views",shownTemplateIds:l,selectedIndex:i}}),t()},render:e=>(0,$.jsx)(h().A,{...e,icon:(0,$.jsx)(D().z,{template:r,size:16,iconStyle:n.icon}),title:(0,H().getWorkflowTemplateName)(r)})})}}(t,o),ne=J.flatMap((e=>"suggested_workflow_template_view"===e.type?[e.viewTemplate]:[])).map((e=>e.templateId));(0,N().O)({collectionContextStore:t,origin:"suggested_views",shownTemplateIds:ne});const re=(0,K().e)({collectionContextStore:t,environment:X}),ie=(0,v().L)({environment:X,collectionContextStore:t,onAddNewFormClick:o,from:"addFormButton"}),le=ie?{key:"formViewItem",action:ie,render:e=>(0,$.jsx)(S().A,{collectionContextStore:t,isCompact:q,compactColor:"primary",type:"menuItem",...e})}:void 0,ae=le?{key:"form",render:e=>(0,$.jsx)(I().A,{topBorder:!0,...e}),items:[le]}:void 0,ce={key:"genericViews",render:e=>(0,$.jsx)(I().A,{title:q?void 0:(0,$.jsx)(s().sA,{defaultMessage:"New view",id:"database.collectionTabBar.newViews"}),...e}),items:[ee,...J.map(((e,t)=>{switch(e.type){case"suggested_typed_view":return te(e.viewFeature);case"suggested_workflow_template_view":return oe(e.viewTemplate,t,ne);case"generic_view":return Q(e.viewType);default:(0,d().HB)(e)}})),..."item"===Y&&le?[le]:[]]},se=(0,w().Q)({collectionContextStore:t,environment:X,from:"addNewDatabaseButton"}),pe=Z?[]:(0,p().oE)([se,re]),de=pe.length>0?{key:"advancedSection",render:e=>(0,$.jsx)(I().A,{topBorder:!0,...e}),items:pe}:void 0;return(0,$.jsx)(x().A,{capture:!0,allowEsc:!0,render:e=>{let t;return t=G.isPhone?{menuType:A().gu.Modal,right:(0,$.jsx)(k().DoneMenuText,{}),onClickRight:o,...e}:{menuType:A().gu.Popup,minWidth:q?200:290,maxWidth:q?200:320,maxHeight:q?"70vh":"50vh",...e},(0,$.jsx)(b().A,{...t,children:(0,$.jsx)(C().Ay,{type:C().Oh.Vertical,initialFocus:void 0,sections:[ce,..."section"===Y&&ae?[ae]:[],...de?[de]:[]],onAccept:e=>{"showMore"!==e.key&&o()}})})}})}},471685:(e,t,o)=>{o.d(t,{I:()=>p,h:()=>s});o(242343);var n=()=>o(237385),r=()=>o(174114),i=()=>o(31448),l=()=>o(535906),a=()=>o(622163),c=o(163643);function s(e){let{environment:t}=e;return{padding:t.device.isMobile?"12px 2px":"6px",alignItems:"center"}}function p(e){let{buttonMenuItemProps:t,title:o,caption:p,icon:d,onClick:u,right:m,isDisabled:y}=e;const g=(0,n().v3)(),f=(0,r().IS)((e=>({menuItem:{display:"flex",...s({environment:g}),opacity:y?.4:void 0},title:{fontSize:(0,a().ny)(g,"UIRegular"),...i().RC},caption:{fontSize:(0,a().ny)(g,"UISmall"),overflow:"hidden",color:e.text.secondary,whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[g,y]),v={};return u&&(v.onClick=u),(0,c.jsx)(l().A,{...t,style:f.menuItem,disabled:y,title:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{style:f.title,children:o}),p&&(0,c.jsx)("div",{style:f.caption,children:p})]}),icon:d,right:m,...v})}},533639:(e,t,o)=>{o.d(t,{p:()=>n});class n extends(()=>o(998969))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}},590091:(e,t,o)=>{o.d(t,{V:()=>l,i:()=>a});var n=()=>o(803290),r=()=>o(496580),i=()=>o(749975);function l(){const e=(0,i().ET)(),{collectionStore:t,collectionViewStore:o,collectionSettingsStore:r}=(0,n().K8)((()=>a(e)),[e]);return{collectionStore:t,collectionViewStore:o,collectionSettingsStore:r,collectionContextStore:e}}function a(e){return{collectionStore:(0,r().o9)(e.collectionStore(),"collectionStore not found"),collectionViewStore:(0,r().o9)(e.collectionViewStore(),"collectionViewStore not found"),collectionSettingsStore:e.settingsStore}}},591966:(e,t,o)=>{o.d(t,{$:()=>u,N:()=>p});o(362833),o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601),o(725707),o(491955),o(324989),o(403517);var n=()=>o(994966),r=()=>o(505966),i=()=>o(975392),l=()=>o(76394),a=()=>o(360482),c=()=>o(940445),s=()=>o(727528);function p(e,t){const o=(0,s().Xg)(e,t),n=new Set(function(e){const t=e.getParentBlockStore();if(null==t||!t.isDefined())return[];return(null==t?void 0:t.getCollectionViewStores().map((e=>e.getName())).filter(l().O9))??[]}(t));return function(e){const t=new Set(e.map((e=>e.templateId))),o=[];for(const n of e)o.push(...d(n).filter((e=>!t.has(e))).map((e=>c().globalWorkflowTemplates.fromId(e))).filter(r().bz).filter((e=>!(0,r().Sz)(e))));return o}(o).filter((e=>"collection_view"!==e.type||!n.has(e.value.name??"")))}function d(e){return"compound"===e.type||"collection"===e.type?e.value.templateItems.filter((e=>"optionalDefaultOn"===e.optionality||"optionalDefaultOff"===e.optionality)).map((e=>e.pointer)):[]}function u(e){let{persona:t,parentStore:o}=e;const r=t?(0,n().Qf)({persona:t}):[],l=c().globalWorkflowTemplates.allOfType({templateIds:r??[],type:"collection"}),s=i().hS(function(e){let{collectionTemplates:t,parentStore:o}=e;if(!o)return t;if((0,a().Yu)(o))return t;const n=(0,a().$R)(o)?o.getTeamPageStores():o.getContentStores(),r=new Set((0,i().oE)(n.flatMap((e=>{var t;return(null===(t=e.getCollectionStores())||void 0===t?void 0:t.map((e=>e.getWorkflowTemplateId())))??[]})))),l=[],c=[];for(const i of t)r.has(i.templateId)?l.push(i):c.push(i);return[...c,...l]}({collectionTemplates:[...l,...c().globalWorkflowTemplates.allOfType({templateIds:(0,n().dj)(),type:"collection"})],parentStore:o}),(e=>e.templateId));return s}},647658:(e,t,o)=>{o.r(t),o.d(t,{cubeIcon:()=>r,iconDefinition:()=>n});o(242343);const n={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M10.302 1.853a.63.63 0 0 0-.604 0l-6.65 3.669c-.2.11-.323.32-.323.547v7.862c0 .228.124.437.323.547l6.65 3.67a.63.63 0 0 0 .604 0l6.65-3.67c.2-.11.323-.32.323-.547V6.069a.63.63 0 0 0-.323-.547zM3.975 7.127l5.4 2.98v6.434l-5.4-2.98zm6.65 9.414v-6.434l5.4-2.98v6.435zM15.356 6.07 10 9.024 4.644 6.069 10 3.114z"})},r=(0,o(680369).wt)("cube",n)},686752:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,pencilLineIcon:()=>r});o(242343);const n={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},r=(0,o(680369).wt)("pencilLine",n)},716430:(e,t,o)=>{o.d(t,{Sj:()=>c,UD:()=>a});o(610931);var n=()=>o(521325),r=()=>o(259897),i=()=>o(727528);const l={property:function(e){let{template:t,collectionStore:r,collectionViewStore:l,collectionSettingsStore:a}=e;const c=(0,i().S1)({collectionStore:r,templateId:t.templateId,instancePointerType:"property"});if(!c)throw new Error(`No property instance found for property template ${t.templateId}`);const s=l.getType();n().a2({collectionSettingsStore:a,item:{type:"property",property:c.id,formatKey:s?o(810111).u9(s):void 0}})},collection_view:function(e){let{template:t,environment:o,collectionStore:n,collectionContextStore:r}=e;const l=(0,i().S1)({collectionStore:n,templateId:t.templateId,instancePointerType:"collection_view"});if(!l)throw new Error(`No collection view instance found for property template ${t.templateId}`);c({environment:o,collectionContextStore:r,collectionViewId:l.id})},compound:function(e){}};function a(e){l[e.template.type](e)}function c(e){var t;let{environment:o,collectionContextStore:i,collectionViewId:l}=e;(null===(t=i.collectionViewStore())||void 0===t?void 0:t.id)!==l&&(0,r().t)({environment:o,collectionContextStore:i,collectionViewId:l,isFullScreen:i.isFullScreenStore.state,isRootChild:i.isRootChildStore.state,isInPeekRenderer:i.isInPeekRendererStore.state}),n().a2({collectionSettingsStore:i.settingsStore,item:{type:"main"}})}},772180:(e,t,o)=>{o.r(t),o.d(t,{WorkflowSettingsConfirmAddTemplate:()=>T,isWorkflowTemplateWithConfirmStep:()=>V});o(610931);var n=o(242343),r=()=>o(237385),i=()=>o(174114),l=()=>o(505966),a=()=>o(653998),c=()=>o(975392),s=()=>o(521325),p=()=>o(84543),d=()=>o(3364),u=()=>o(948120),m=()=>o(932322),y=()=>o(951540),g=()=>o(88271),f=()=>o(749975),v=()=>o(137476),S=()=>o(605845),w=()=>o(716430),h=()=>o(940445),x=(o(403517),()=>o(752903)),b=()=>o(837809),C=o(163643);function k(e){let{template:t,style:o}=e;const n=(0,i().IS)((e=>({container:{...o,padding:12,border:`1px solid ${e.regularDividerColor}`,borderRadius:6}})),[o]),r=function(e){if((0,l().Xq)(e,"property")&&(0,l().Io)(e)){const{options:t=[]}=e.value;if(0===t.length)return;return(0,C.jsx)(_,{options:t})}}(t);return r?(0,C.jsx)("div",{style:n.container,children:r}):null}function _(e){let{options:t}=e;const o=(0,i().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:8}})),[]);return(0,C.jsx)("div",{style:o.container,children:t.map((e=>(0,C.jsx)("div",{children:(0,C.jsx)(b().O,{format:x().NY.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1})},e.id)))})}var I=()=>o(194585);function T(e){let{template:t,collectionSettingsStore:o}=e;const[l,c]=(0,n.useState)("sample"===t.propertyOptionsType),{device:{isMobile:s}}=(0,r().v3)(),p=(0,i().IS)((e=>{const t={display:"flex",flexDirection:"column",minHeight:0};return{shrinkableHeight:t,noShrink:{flexShrink:0},featurePreviewWrapper:{...t,width:"-webkit-fill-available"},featurePreviewBody:{...t,gap:16,...s?{margin:"16px 0"}:{margin:0}},featurePreview:{...t,overflow:"auto"},addButtonContainer:{...s?{margin:"12px 0"}:{marginBottom:6}}}}),[s]),y=(0,h().getWorkflowTemplateName)(t);return(0,C.jsxs)(d().Ay,{collectionSettingsStore:o,title:(0,C.jsx)(a().sA,{id:"workflowTemplateSettings.confirmAddTemplate.title",defaultMessage:"Turn on {templateName}",values:{templateName:y}}),disableScroller:!0,menuScrollerStyle:p.shrinkableHeight,innerContentWrapperStyle:p.shrinkableHeight,children:[(0,C.jsx)(g().A,{style:p.shrinkableHeight,children:(0,C.jsx)(m().Ay,{style:p.shrinkableHeight,textWrapperStyle:p.featurePreviewWrapper,bodyStyle:p.featurePreviewBody,body:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(j,{template:t,style:p.noShrink}),(0,C.jsx)(k,{template:t,style:p.featurePreview})]})})}),(0,C.jsx)(g().A,{style:p.noShrink,children:t.value.options&&t.value.options.length>0&&(0,C.jsx)(u().A,{title:(0,C.jsx)(a().sA,{id:"workflowTemplateSettings.confirmAddTemplate.propertyOptionsToggle",defaultMessage:"Set my own options"}),switcherProps:{on:l,disallowTabbing:!0},onClick:()=>{c(!l)}})}),(0,C.jsx)(g().A,{style:p.noShrink,children:(0,C.jsx)(m().Ay,{body:(0,C.jsx)(A,{template:t,startEmpty:l}),bodyStyle:p.addButtonContainer})})]})}function j(e){let{template:t,style:o}=e;const n=(0,r().Y0)(),a=(0,i().IS)((()=>({container:{...o,display:"flex",alignItems:"center",gap:12},textWrapper:{lineHeight:n.isMobile?"20px":"18px"},title:{fontSize:n.isMobile?16:13},caption:{fontSize:n.isMobile?14:12,overflow:"hidden",color:"gray",whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[n,o]),c=(0,h().getWorkflowTemplateName)(t),s=(0,l().Uy)(t);return(0,C.jsxs)("div",{style:a.container,children:[(0,C.jsx)(I().n,{template:t,backgroundSize:32}),(0,C.jsxs)("div",{style:a.textWrapper,children:[(0,C.jsx)("div",{style:a.title,children:c}),s&&(0,C.jsx)("div",{style:a.caption,children:s})]})]})}function A(e){let{template:t,startEmpty:o}=e;const n=(0,i().IS)((()=>({button:{width:"100%"}})),[]),l=(0,r().v3)(),d=(0,f().ET)(),u=(0,h().getWorkflowTemplateName)(t),m=c().mg(t);return o&&delete m.value.options,(0,C.jsx)(y().A,{style:n.button,size:"lg",onClick:()=>{p().createAndCommit({userAction:"WorkflowSettingsConfirmAddTemplate.addFeatureTemplateToTarget",environment:l,canUndo:!0,perform:e=>{const o=d.collectionStore();if(!o)throw new Error("collectionStore not found");S().ai({environment:l,transaction:e,collectionStore:o,template:m,logger:new(h().WorkflowTemplateLogger),origin:"suggested_feature"});const n=d.settingsStore;s().yl({collectionSettingsStore:n});const r=o.getWorkflowTemplateId();(0,v().u4)({environment:l,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:"suggested_properties",template_id_added:t.templateId,collection_template_id:r}}});const i=d.collectionViewStore();i&&(0,w().UD)({template:t,environment:l,collectionStore:o,collectionViewStore:i,collectionSettingsStore:n,collectionContextStore:d})}})},children:(0,C.jsx)(a().sA,{id:"workflowTemplateSettings.confirmAddTemplate.button",defaultMessage:"Add {templateName}",values:{templateName:u}})})}function V(e){return"property"===e.type&&("select"===e.value.type||"multi_select"===e.value.type)}},837809:(e,t,o)=>{o.d(t,{O:()=>s,q:()=>p});o(242343);var n=()=>o(174114),r=()=>o(220413),i=()=>o(31448),l=()=>o(826033),a=()=>o(809785),c=o(163643);function s(e){const{value:t,color:o,format:s,showEllipsis:p,onClickRemove:d,showRemoveButton:u,isSingle:m,shouldShrink:y,hideTooltip:g,description:f,tooltipPlacement:v,...S}=e,w=(0,n().DP)(),h=(0,n().IS)((e=>({token:{...p&&i().RC}})),[p]),{textColor:x,backgroundColor:b}=(0,r().LD)(w,o);return t?(0,c.jsx)(a().A,{format:s,value:(0,c.jsx)(l().A,{children:t}),description:f,onClickRemove:d,showRemoveButton:u,isSingle:m,color:x,backgroundColor:b,shouldShrink:y,tooltipPlacement:v,showTooltip:g?"never":"overflow",style:h.token,...S}):null}function p(e){const{value:t,color:o,format:s,showEllipsis:p,onClickRemove:d,showRemoveButton:u,isSingle:m,shouldShrink:y,groupColor:g,tooltipPlacement:f,description:v,hideTooltip:S,...w}=e,h=(0,n().DP)(),x=(0,n().IS)((()=>({token:{...p&&i().RC}})),[p]);if(!t)return null;const{textColor:b,backgroundColor:C}=(0,r().LD)(h,o??g??"gray");let k;return k=o||(g||"gray"),(0,c.jsx)(a().A,{format:s,value:(0,c.jsx)(l().A,{children:t}),description:v,onClickRemove:d,showRemoveButton:u,isSingle:m,color:b,backgroundColor:C,shouldShrink:y,showTooltip:S?"never":"overflow",style:x.token,isRound:!0,showColoredDot:k,tooltipPlacement:f,...w})}},851033:(e,t,o)=>{o.d(t,{A:()=>s});o(242343);var n=()=>o(174114),r=()=>o(39742),i=()=>o(653998),l=()=>o(535906),a=()=>o(397791),c=o(163643);function s(e){const{collectionContextStore:t,onClick:o,isCompact:s,compactColor:p="primary",...d}=e,u=(0,n().IS)((e=>({compactFormButton:{color:"secondary"===p?e.text.secondary:void 0,display:"flex",flexDirection:"row"}})),[p]),m=(0,c.jsx)(l().A,{..."menuItem"===d.type?d:{focused:!1},onClick:o,title:(0,c.jsx)("div",{style:u.compactFormButton,children:(0,c.jsx)(i().sA,{defaultMessage:"New form",id:"database.collectionViewSelect.newFormButtonTitle"})}),style:{padding:"1 0"},icon:(0,c.jsx)(a().I,{icon:r().docPlainTextIcon,color:p})}),y=(0,c.jsx)(l().A,{..."menuItem"===d.type?{...d,onClick:o}:{focused:!1,onClick:o},title:(0,c.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:(0,c.jsx)(i().sA,{defaultMessage:"Form",id:"CollectionViewTabBar.newFormItem.title"})}),icon:(0,c.jsx)(a().I,{icon:r().docPlainTextIcon}),shouldWrapCaption:!0,caption:(0,c.jsx)(i().sA,{defaultMessage:"Create a form to input data directly into this database",id:"CollectionViewTabBar.newFormItem.description"})});return s?m:y}},897758:(e,t,o)=>{o.d(t,{R:()=>i});o(242343);var n=o(163643);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12 8.875c.345 0 .625.28.625.625v1.875H14.5a.625.625 0 1 1 0 1.25h-1.875V14.5a.625.625 0 1 1-1.25 0v-1.875H9.5a.625.625 0 1 1 0-1.25h1.875V9.5c0-.345.28-.625.625-.625"}),(0,n.jsx)("path",{d:"M4.5 2.375A2.125 2.125 0 0 0 2.375 4.5V12c0 1.174.951 2.125 2.125 2.125h1.625v1.625c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-7.5a2.125 2.125 0 0 0-2.125-2.125h-1.625V4.5A2.125 2.125 0 0 0 12 2.375zm8.375 3.75H8.25A2.125 2.125 0 0 0 6.125 8.25v4.625H4.5A.875.875 0 0 1 3.625 12V4.5c0-.483.392-.875.875-.875H12c.483 0 .875.392.875.875zm-5.5 2.125c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875z"})]})},i=(0,o(680369).wt)("squareOnSquarePlus",r)},911575:(e,t,o)=>{o.d(t,{$0:()=>f,Fx:()=>C,Ge:()=>m,I3:()=>d,Kj:()=>x,PP:()=>k,TK:()=>_,Yy:()=>p,aE:()=>I,cQ:()=>b,kH:()=>y,m7:()=>u,nq:()=>w,nv:()=>v,tj:()=>g});o(725707),o(491955),o(113085);var n=()=>o(975392),r=()=>o(76394),i=()=>o(564134),l=()=>o(810111),a=()=>o(479056),c=()=>o(875089);(0,r().u0)((e=>(0,r().O9)(e)&&(0,r().O9)(e.target)&&(0,r().O9)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target,custom_message:e.custom_message}}:{false:e}));const s={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1},p={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function d(e){return Boolean(s[e.type]&&!(0,i().UU)(e)&&(!(0,i().$M)(e)||void 0===(0,i().om)(e)))}function u(e){const{collectionFormat:t,collectionSchema:o,filter:a,sort:s,sourcePropertyIds:p}=e,u=(p??(0,r().uv)(o)).filter(((t,n,r)=>{const l=o[t];return!(!l||!d(l))&&(("relation"!==l.type||!e.restrictCrossSpace||!(0,i().o2)(e.spaceId,l))&&(!a||a([t,l],n,o)))}));if(0===u.length)return[];if(!t||!1===s)return u;const m=(0,c().L)(t,o,void 0,l().jf.Page).collection_page_properties||[];return n().Ul(u,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:o,sort:a}=e,s=(0,r().uv)(o).filter(((e,t,n)=>{const r=o[e];return!(!r||!(0,i().JY)(r))}));if(0===s.length)return[];if(!t||!1===a)return s;const p=(0,c().L)(t,o,void 0,l().jf.Page).collection_page_properties||[];return n().Ul(s,(e=>p.findIndex((t=>t.property===e))))}function y(e){return e.type===a().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===a().M9.TokenExpected?{type:e.type,token:e.token}:e.type===a().uW.MissingSchemaPropertyOnThisRow||e.type===a().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===a().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===a().uW.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===a().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===a().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===a().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===a().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node}:e.type===a().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===a().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===a().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===a().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===a().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===a().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const g={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,geo_point:!1};function f(e){return Boolean(g[e.type])}function v(e){const{collectionFormat:t,collectionSchema:o,filter:a,sort:s}=e,p=(0,r().uv)(o).filter(((e,t,n)=>{var r;const l=o[e];return!(!l||!g[l.type])&&((!(0,i().$M)(l)||null===(r=(0,i().om)(l))||void 0===r||!r.auto_update_on_edit)&&(!a||a([e,l],t,o)))}));if(0===p.length)return[];if(!t||!1===s)return p;const d=(0,c().L)(t,o,void 0,l().jf.Page).collection_page_properties||[];return n().Ul(p,(e=>d.findIndex((t=>t.property===e))))}const S={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function w(e){return S[e.type]}const h={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function x(e){return h[e.type]}function b(e){return 0===e}function C(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function k(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function _(e){const{collectionSchema:t,property:o,type:n}=e,r=null==t?void 0:t[o];return!r||("action"===n?!d(r):!g[r.type])}function I(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:n,source:i,relativeDate:l}=t.event;if(void 0===i)return!1;const a="some"===n.type&&n.some,c="all"===n.type&&n.all;if((a||c||[]).some((e=>k({collectionSchema:o,property:e.property})||_({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const s="some"===n.type&&(!(0,r().O9)(n.some)||0===n.some.length),p="all"===n.type&&(!(0,r().O9)(n.all)||0===n.all.length);if(!e&&("none"===n.type||s||p)&&!l)return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},921734:(e,t,o)=>{o.d(t,{_:()=>l});o(242343);var n=()=>o(174114),r=()=>o(855470),i=o(163643);function l(){const e=(0,n().IS)((e=>({icon:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out"}})),[]);return(0,i.jsx)(i.Fragment,{children:(0,r().V)(e.icon)})}},948120:(e,t,o)=>{o.d(t,{A:()=>r});o(242343);var n=o(163643);const r=function(e){let{switcherProps:t,...r}=e;return(0,n.jsx)(o(44405).A,{right:(0,n.jsx)(o(431551).A,{onClick:r.onClick,disabled:r.disabled,...t}),...r})}},961716:(e,t,o)=>{o.d(t,{Y:()=>a});var n=()=>o(237385),r=()=>o(803290),i=()=>o(591966),l=()=>o(235786);function a(e){const t=(0,n().v3)();return(0,l().b)(e),(0,r().K8)((()=>{const o=e.collectionStore();return o?(0,i().N)(t,o):[]}),[t,e])}},981378:(e,t,o)=>{o.d(t,{N:()=>m,e:()=>u});o(610931),o(242343);var n=()=>o(803290),r=()=>o(740520),i=()=>o(647658),l=()=>o(653998),a=()=>o(535906),c=()=>o(397791),s=()=>o(622286),p=()=>o(993054),d=o(163643);function u(e){let{environment:t,collectionContextStore:o}=e;if(m(t,o))return{key:"openBuilderConfig",action:()=>{const e=o.collectionViewBlockStore();if(!e)throw new Error("Parent store is undefined");(0,p().showWorkflowEditor)({environment:t,parentStore:e})},render:e=>(0,d.jsx)(a().A,{title:(0,d.jsx)(l().sA,{defaultMessage:"Builder mode",id:"collectionViewSuggestedViews.openBuilderConfig.label"}),icon:(0,d.jsx)(c().I,{icon:i().cubeIcon}),right:(0,d.jsx)(c().I,{icon:r().arrowDiagonalUpRightIcon,color:"secondary",size:18}),...e})}}function m(e,t){const o=(0,s().X)("workflows_advanced_mode"),r=(0,n().O$)(t.isFullScreenStore);return o&&r&&!e.device.isMobile}},994488:(e,t,o)=>{o.d(t,{o:()=>n});o(362833),o(403517);function n(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];if(0===o.length)return e.map((e=>[e]));const i=[];for(const l of e)i.push(...n(o[0],...o.slice(1)).map((e=>[l,...e])));return i}}}]);