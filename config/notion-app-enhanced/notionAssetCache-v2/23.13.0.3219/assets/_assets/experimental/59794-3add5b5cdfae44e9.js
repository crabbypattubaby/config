"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[59794],{44405:(e,t,o)=>{o.d(t,{A:()=>p});o(242343);var n=()=>o(862510),r=()=>o(174114),i=()=>o(650199),l=()=>o(711361),s=()=>o(31448),a=()=>o(535906),c=()=>o(397791),d=()=>o(581344),u=o(163643);function p(e){const{icon:t,iconStyle:o,title:p,caption:g,right:h,rightStyle:m,isRed:C,isGray:f,isOrange:x,onClick:y,onMouseDown:v,onMouseEnter:S,onMouseLeave:b,disabled:A,showChevron:j,chevronStyle:F,rotateChevron:k,showDragHandle:w,focused:M,textWrapperStyle:T,shouldWrapCaption:B,desktopIconStyle:R,buttonStyle:I,desktopTitleStyle:P,source:D,menuListItemProps:V}=e,L=(0,d().y$)(),_=(0,r().IS)((e=>({style:{color:f?e.text.secondary:x?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.text.primary,fill:f?e.mediumIconColor:x?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:A?.4:void 0,...I},leftIconStyle:{width:L,height:L,...t===l()._&&{height:3},...o},rightStyle:{display:"flex",alignItems:"center",color:A?e.text.primary:e.text.tertiary,fill:A?e.regularIconColor:e.lightIconColor,flexShrink:0,...m},rightChevronStyle:{marginLeft:"tableHeaderMenu"===D?0:6,transition:"transform 200ms ease-in-out",...k&&{transform:"rotate(90deg)"},...F}})),[f,x,A,o,t,F,m,I,L,k,D]),{itemRef:O,isTabbable:H,onKeyDown:K,onFocus:W}=(0,n().e)();return(0,u.jsx)(a().A,{ref:O,icon:null==t?void 0:t(_.leftIconStyle),focused:M||!1,disabled:A,title:p,caption:g,shouldWrapCaption:B,desktopTitleStyle:{flexGrow:1,flexShrink:1,...P},onKeyDown:K,onFocus:W,disallowTabbing:!H,showDragHandle:w,buttonStyle:_.style,rightStyle:_.rightStyle,isRedOnHover:C,ignoreLocalHoverState:!!A||void 0,right:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{style:{...s().RC,display:"flex"},children:h}),!A&&j&&(0,u.jsx)(c().I,{icon:i().x,size:"sm",color:"tableHeaderMenu"===D?"secondary":"tertiary",style:_.rightChevronStyle})]}),onClick:y,onMouseDown:v,onMouseEnter:S,onMouseLeave:b,textWrapperStyle:T,desktopIconStyle:R,...V})}},158918:(e,t,o)=>{o.d(t,{A:()=>g});o(362833),o(725707),o(771702),o(403517);var n=o(242343),r=()=>o(237385),i=()=>o(975392),l=()=>o(640979),s=()=>o(273520),a=()=>o(935091),c=()=>o(858023),d=()=>o(743668),u=()=>o(88271),p=o(163643);const g=function(e){let{renderOrigin:t,onClick:n,items:i,getKey:l,renderItem:a,selectedItem:c,onSelect:d,dontCloseParentOnSelect:u,mobileActionSheet:g,menuTitle:h,width:C,minWidth:f,disabled:x,originGap:y,buttonPopupStore:v,sameWidthAsOrigin:S}=e;const b=(0,r().v3)(),A=(0,o(803290).uB)(v,o(962373).A),{device:j}=b,F=(0,o(622286).X)("db_ux_mobile");return(0,p.jsx)(s().Ay,{popupType:j.isMobile?F?s().z7.BottomSheet:s().z7.SlideUp:s().z7.Popup,bottomSheetInitialState:"half",renderOrigin:t,buttonPopupStore:A,placementToOrigin:o(755769).UV.Bottom,onClick:n,render:e=>(0,p.jsx)(m,{parent:e,items:i,getKey:l,renderItem:a,selectedItem:c,onSelect:d,dontCloseParentOnSelect:u,mobileActionSheet:g,menuTitle:h,width:C,minWidth:f}),disabled:x,originGap:y,sameWidthAsOrigin:S})};function h(e,t,o,r,i,l,s,a){return{key:0,render:e=>(0,n.createElement)(u().A,{...e,key:t,topBorder:t>0}),items:e.map((e=>({key:r(e),render:t=>i({...t,value:e,key:r(e),selectedItem:l}),action:()=>{!function(e,t,o){t!==e&&o(e)}(e,l,s),a||o.close()}})))}}function m(e){let{parent:t,items:o,getKey:n,renderItem:s,selectedItem:u,onSelect:g,dontCloseParentOnSelect:m,mobileActionSheet:C,menuTitle:f,width:x,minWidth:y}=e;const v=(0,r().v3)(),{device:S}=v,b=[];if(function(e){return e.length>0&&e[0]instanceof Array}(o))o.forEach(((e,o)=>{const r=h(e,o,t,n,s,u,g,m);b.push(r)}));else{const e=h(o,0,t,n,s,u,g,m);b.push(e)}const A=(0,p.jsx)(c().Ay,{type:c().Oh.Vertical,initialFocus:i().SL(i().Bq(o),(e=>i().n4(e,u))),sections:b});let j;return j=S.isMobile?C?{menuType:l().gu.ActionSheet}:{menuType:l().gu.Modal,title:f,right:(0,p.jsx)(d().DoneMenuText,{}),onClickRight:t.close}:{menuType:l().gu.Popup,width:x||160,minWidth:y},(0,p.jsx)(a().A,{...j,children:A})}},158923:(e,t,o)=>{o.d(t,{A:()=>j,T:()=>F});o(362833),o(725707),o(491955),o(113085);var n=o(242343),r=()=>o(237385),i=()=>o(803290),l=()=>o(174114),s=()=>o(15552),a=()=>o(752903),c=()=>o(960194),d=()=>o(653998),u=()=>o(975392),p=()=>o(236339),g=()=>o(128057),h=()=>o(640979),m=()=>o(724217),C=()=>o(535906),f=()=>o(559637),x=()=>o(935091),y=()=>o(858023),v=()=>o(743668),S=()=>o(88271),b=()=>o(837809),A=o(163643);function j(e){const{propertyFilter:t,schema:o,filter:a,parentStore:m,updateValue:f,onClose:b,desktopTopActions:j,mobileMenuTitle:k,mobileMoreActions:w,collectionContextStore:M}=e,T=(0,r().v3)(),B=(0,r().Y0)(),[R,I]=(0,n.useState)([]),[P,D]=(0,n.useState)(!1),V=(0,i().K8)((()=>(0,g().YF)(o,t,m)),[o,t,m]),L=(0,l().IS)((e=>({checkboxIcon:{fill:e.regularIconColor}})),[]),_=(0,i().K8)((()=>(0,s().gc)(a)?(0,s().V6)(a):[]),[a]),O=(0,i().K8)((()=>{if(!V||"status"!==V.type)return[];const e=V.options??[],t=null==M?void 0:M.collectionStoreResultsInViewOrder();return!P&&t?e.filter((e=>t.some((t=>{var o;return null===(o=e.collectionIds)||void 0===o?void 0:o.includes(t.id)})))):e}),[V,P,M]),H=(0,i().K8)((()=>{if(!V||"status"!==V.type)return[];const e=[],t=V.groups??[],o=V.options??[];for(const n of t){const t=(0,g().Ze)({group:n,options:o,filterValues:_});if("partial"!==t.groupCheckState)continue;const r=o.filter((e=>{var t;return null===(t=n.optionIds)||void 0===t?void 0:t.includes(e.id)})).filter((e=>t.optionCheckedInfo.get(e.id)));e.push(...r)}return e}),[V,_]),K=(0,i().K8)((()=>{if(!V||"status"!==V.type)return[];const e=V.options??[];return R?e.filter((e=>!R.some((t=>t.id===e.id)))):[]}),[V,R]);(0,n.useEffect)((()=>{I((()=>u().hS([...O,...R,...H],"id")))}),[O]);const W=(0,i().K8)((()=>V&&"status"===V.type?F({propertySchema:V,statusFilterValues:_,updateValue:f,isMobile:B.isMobile,styles:{checkboxIcon:L.checkboxIcon},visibleOptions:R,shouldShowHiddenSources:P,setShouldShowHiddenSources:D}):[]),[B.isMobile,V,L.checkboxIcon,f,R,P,D,_]);if(!V||"status"!==V.type)return null;const z=(0,A.jsx)(S().A,{desktopStyle:{paddingBottom:0},children:!B.isMobile&&j});let N;N=B.isMobile?{menuType:h().gu.Modal,title:k,left:w,right:(0,A.jsx)(v().DoneMenuText,{}),onClickRight:b,header:z}:{menuType:h().gu.Popup,maxHeight:s().mi,width:260,header:z,disableHeaderBorder:!0,tokenInputHeader:!0};const q=(0,A.jsx)(y().Ay,{type:y().Oh.Vertical,initialFocus:0,sections:[{key:"groups",items:W,render:e=>(0,A.jsx)(S().A,{...e,title:"",style:{paddingTop:0}})}]}),Y=K&&K.length>0&&!P?(0,A.jsx)(S().A,{topBorder:!0,children:(0,A.jsx)(C().A,{icon:(0,c().T)({width:13,height:13}),title:(0,A.jsx)(d().sA,{id:"collectionFilterValueMenu.statusFilterValueMenu.hiddenStatusOptionsDescription",defaultMessage:"{numHiddenOptions, plural, one {{numHiddenOptions} other status option} other {{numHiddenOptions} other status options}}",values:{numHiddenOptions:K.length}}),focused:!1,onClick:()=>{D(!0),M&&(0,p().X)({environment:T,collectionContextStore:M,action:"expand_property_filter",original_view_type:void 0,property_type:"status"})}})}):null,G=(0,A.jsx)(S().A,{topBorder:!0,children:(0,A.jsx)(C().A,{title:(0,A.jsx)(d().sA,{defaultMessage:"Clear selection",id:"database.filterValue.selectType.clearSelection.message"}),focused:!1,onClick:()=>{f([])}})});return(0,A.jsx)(x().A,{...N,children:(0,s().gc)(a)&&(0,A.jsxs)(A.Fragment,{children:[q,Y,G]})})}function F(e){const{propertySchema:t,statusFilterValues:o,updateValue:n,isMobile:r,styles:i,visibleOptions:l,shouldShowHiddenSources:s}=e,c=t.groups??[],d=t.options??[],u=[];for(const p of c){const e=()=>{const e=(0,g().fe)(c,d,o,{type:"is_group",value:p.name});e&&n(e)},t=(0,g().Ze)({group:p,options:d,filterValues:o}),h=d.filter((e=>{var t;return(null===(t=p.optionIds)||void 0===t?void 0:t.includes(e.id))&&(s||(null==l?void 0:l.some((t=>t.id===e.id))))})),x=[];for(const l of h){const e=()=>{const e=(0,g().fe)(c,d,o,{type:"is_option",value:l.value});e&&n(e)};x.push({key:`option-${l.id}`,action:e,render:o=>(0,A.jsx)(C().A,{...o,icon:(0,A.jsx)(f().A,{checked:t.optionCheckedInfo.get(l.id)??!1,size:14,onClick:e,style:i.checkboxIcon}),title:(0,A.jsx)(b().q,{format:r?a().NY.Large:a().NY.Medium,isSingle:!0,value:l.value,color:l.color,showRemoveButton:!1,groupColor:p.color}),style:{paddingLeft:16}})})}u.push({key:`group-${p.id}`,action:e,render:o=>(0,A.jsx)(C().A,{...o,icon:(0,A.jsx)(f().A,{checked:t.groupCheckState,size:14,onClick:e,style:i.checkboxIcon}),title:(0,A.jsx)(m().RS,{style:{fontWeight:500,marginTop:2},group:p,showIcon:!0,showColor:!0}),textWrapperStyle:{marginLeft:3}})},...x)}return u}},254653:(e,t,o)=>{o.d(t,{$J:()=>T,Ay:()=>I,Nf:()=>R});o(725707),o(491955),o(500234);var n=o(242343),r=()=>o(237385),i=()=>o(803290),l=()=>o(15552),s=()=>o(711361),a=()=>o(653998),c=()=>o(975392),d=()=>o(31448),u=()=>o(236339),p=()=>o(786944),g=()=>o(521325),h=()=>o(84543),m=()=>o(209684),C=()=>o(535906),f=()=>o(273520),x=()=>o(935091),y=()=>o(858023),v=()=>o(443252),S=()=>o(88271),b=()=>o(103151),A=()=>o(128057),j=()=>o(640979),F=()=>o(906230),k=()=>o(907721),w=()=>o(44405),M=o(163643);let T=function(e){return e[e.FilterBar=0]="FilterBar",e[e.SettingsFilters=1]="SettingsFilters",e[e.SettingsSort=2]="SettingsSort",e}({});const B=o(129044).default.createClass(!1,{name:"ShowMoreStore"});function R(){return(0,M.jsx)(a().sA,{id:"database.filterValue.mergeIntoAdvancedFilter.tooltip",defaultMessage:"Use an advanced filter to group filter rules and use AND/OR conditions."})}const I=function(e){let{collectionContextStore:t,context:l,showHoverActionsStore:c,moreActionsButtonPopupStore:p}=e;const g=(0,o(174114).DP)(),h=(0,r().v3)(),C=(0,a().tz)(),x=(0,r().Y0)(),y=(0,i().uB)(p,o(962373).A),S=(0,i().uB)(void 0,B),A=(0,i().K8)((()=>{const e=t.localStateDiffStore.state;return l===T.SettingsFilters?(e.filters.moved.length>0?1:0)+e.filters.added.length+e.filters.removed.length+e.filters.updated.length:0}),[t,l]),j=(0,n.useCallback)((()=>function(e,t,o){(0,u().X)({environment:e,collectionContextStore:t,action:"click_save_control_more_options_button"}),o.setState(!0)}(h,t,S)),[h,t,S]),F=(0,i().O$)(t.permissionScopesStore),I=(0,i().K8)((()=>t.isFullScreenStore.state||!c||c.state),[t,c]),Y=(0,i().O$)(S),G=(0,i().K8)((()=>_(t,l)),[t,l]),U=(0,i().K8)((()=>"collectionSettings"===t.contextType),[t]),Z=(0,i().K8)((()=>t.collectionViewBlockStore()),[t]),E=(0,o(555434).Y)(Z);if(l===T.FilterBar)return x.isPhone?F.canConfigureBlock?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(m().p,{isOrange:!0,hovered:!0,style:{flexGrow:1,justifyContent:"center",height:32,marginRight:8,fontWeight:d().Wy.semibold},onClick:()=>O(h,t,l),children:(0,M.jsx)(L,{})}),(0,M.jsx)(f().Ay,{popupType:x.isMobile?v().nl.SlideUp:v().nl.Popup,render:e=>(0,M.jsx)(N,{parent:e,collectionContextStore:t,context:l}),originGap:4,onClick:()=>z(h,t),buttonPopupStore:y,renderOrigin:e=>(0,M.jsx)(o(356813).A,{style:{width:32,height:32},iconStyle:{width:16},hovered:!0,icon:s()._,...e})})]}):(0,M.jsx)(m().p,{style:{flexGrow:1,justifyContent:"center",height:32,marginRight:8,fontWeight:d().Wy.semibold},hovered:!0,isGray:!0,onClick:()=>W(h,t,l),children:(0,M.jsx)(V,{})}):(0,M.jsxs)(o(615917).A,{visible:I,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},style:{display:"flex",alignItems:"center"},children:[!F.canConfigureBlock&&(0,M.jsx)(b().A,{placement:k().W.Bottom,renderTooltip:()=>(0,M.jsx)(a().sA,{defaultMessage:"Changes to filters & sorts in this view are only visible to you.",id:"database.viewSettings.filterAndSortSaveControl.myViewTooltip"}),render:e=>(0,M.jsx)("div",{...e,style:{color:g.text.secondary,fontSize:14,fontWeight:d().Wy.medium,cursor:"default",display:"flex",alignItems:"center",position:"relative"},children:(0,M.jsx)("div",{style:{marginRight:2,marginLeft:12,width:7,height:7,borderRadius:"50%",background:"dark"===g.mode?g.accentColors.orange[500]:g.accentColors.orange[300]}})})}),(0,M.jsx)(m().p,{isGray:!0,onClick:()=>W(h,t,l),style:{lineHeight:1.1,fontSize:x.isMobile?16:14},children:(0,M.jsx)(V,{})}),F.canConfigureBlock&&(0,M.jsx)(f().Ay,{popupType:h.device.isMobile?v().nl.SlideUp:v().nl.Popup,render:e=>(0,M.jsx)(N,{parent:e,collectionContextStore:t,context:l}),originGap:4,onClick:()=>z(h,t),buttonPopupStore:y,renderOrigin:e=>U&&E?(0,M.jsx)(o(261603).it,{workflowStore:E,collectionContextStore:t}):(0,M.jsx)(o(627717).A,{title:(0,M.jsx)(L,{}),color:"orange",onClick:()=>O(h,t,l),onDropdownClick:e.onClick,style:{marginLeft:6,marginRight:x.isMobile?8:void 0,fontSize:x.isMobile?16:14,...x.isMobile?{height:30}:null}})})]});if(l===T.SettingsFilters||l===T.SettingsSort){const e=l===T.SettingsFilters;return(0,M.jsxs)(M.Fragment,{children:[Y&&F.canConfigureBlock&&(x.isMobile?(0,M.jsx)(o(932322).Ay,{style:{fontSize:12,color:g.text.secondary},title:(0,M.jsx)(q,{context:l,changeCount:A})}):(0,M.jsx)("div",{style:{fontSize:12,color:g.text.secondary,paddingLeft:14,paddingRight:14,paddingTop:8,paddingBottom:8,maxWidth:220},children:(0,M.jsx)(q,{context:l,changeCount:A})})),F.canConfigureBlock&&(0,M.jsx)(w().A,{icon:o(568262).R,isOrange:!0,title:(0,M.jsx)(L,{}),onClick:()=>O(h,t,l)}),(0,M.jsx)(w().A,{icon:o(644540).arrowUTurnUpLeftIcon,isGray:!0,title:e?(0,M.jsx)(a().sA,{defaultMessage:"Reset filters",id:"database.viewSettings.filterAndSortSaveControl.resetFilters"}):(0,M.jsx)(a().sA,{defaultMessage:"Reset sorts",id:"database.viewSettings.filterAndSortSaveControl.resetSorts"}),onClick:()=>W(h,t,l)}),F.canConfigureBlock&&!Y&&(0,M.jsx)(w().A,{icon:s()._,isGray:!0,title:(0,M.jsx)(a().sA,{defaultMessage:"More options",id:"database.viewSettings.filterAndSortSaveControl.more"}),onClick:j}),F.canConfigureBlock&&Y&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(w().A,{icon:o(827164).d,isGray:!0,title:(0,M.jsx)(P,{}),onClick:()=>{H(h,t,C)}}),G&&(0,M.jsx)(b().A,{placement:k().W.Left,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,M.jsx)("div",{children:(0,M.jsx)(R,{})}),render:e=>(0,M.jsx)(w().A,{icon:o(418077).S,isGray:!0,title:(0,M.jsx)(D,{}),onClick:()=>{K(h,t,l)},...e})})]})]})}(0,o(76394).HB)(l)};function P(){return(0,M.jsx)(a().sA,{defaultMessage:"Save as new view",id:"database.filterBar.changesControl.saveAsNewView.title"})}function D(){return(0,M.jsx)(a().sA,{defaultMessage:"Merge into advanced filter",id:"database.filterBar.changesControl.mergeIntoAdvancedFilter.title"})}function V(){return(0,M.jsx)(a().sA,{defaultMessage:"Reset",id:"database.filterBar.changesControl.reset.title"})}function L(){return(0,M.jsx)(a().sA,{defaultMessage:"Save for everyone",id:"database.filterBar.changesControl.saveForEveryone.title"})}function _(e,t){const o=e.currentPropertyFiltersStore.state;return(t===T.FilterBar||t===T.SettingsFilters)&&Boolean(o.find((e=>(0,l().yX)(e.filter))))}function O(e,t,o){const n=t.collectionViewStore();n&&((0,u().X)({environment:e,collectionContextStore:t,action:"click_save_control_save_in_current_view"}),h().createAndCommit({userAction:"CollectionSettingsSaveControl.handleSaveInCurrentViewClick",environment:e,canUndo:!0,perform:r=>{p().B$({environment:e,type:o===T.FilterBar?p().Hs.All:o===T.SettingsFilters?p().Hs.Filters:p().Hs.Sorts,collectionContextStore:t,targetCollectionViewStore:n,transaction:r})}}),p().Aq({environment:e,seen:!0}))}function H(e,t,o,n){(0,u().X)({environment:e,collectionContextStore:t,action:"click_save_control_save_as_new_view"}),h().createAndCommit({userAction:"CollectionSettingsSaveControl.handleSaveAsNewViewClick",environment:e,canUndo:!0,perform:n=>{p().RQ({environment:e,collectionContextStore:t,transaction:n,intl:o})}}),null==n||n.close()}function K(e,t,o,n){const r=(0,A().Pi)(t),i=t.currentPropertyFiltersStore.state.filter((e=>(0,A().vu)(e.id)));p().IU({environment:e,collectionContextStore:t,temporaryState:{...t.temporaryStateStore.state,propertyFilters:{value:i},combinatorFilter:{value:r}}});const l=o===T.FilterBar?t.filterBarCombinatorFilterSettingsStore:t.filterOptionsCombinatorFilterSettingsStore;g().R8({collectionSettingsStore:l,item:{type:"filter"}}),(0,u().X)({environment:e,collectionContextStore:t,action:"merge_filter_into_combinator"}),null==n||n.close()}function W(e,t,o,n){(0,u().X)({environment:e,collectionContextStore:t,action:"click_save_control_reset"});const r=t.temporaryStateStore.state,i=o===T.SettingsFilters?{...r,propertyFilters:void 0,combinatorFilter:void 0}:o===T.SettingsSort?{...r,sorts:void 0}:void 0;p().LS({environment:e,collectionContextStore:t,temporaryState:i}),p().Aq({environment:e,seen:!0}),null==n||n.close()}function z(e,t){(0,u().X)({environment:e,collectionContextStore:t,action:"click_save_control_more_options_popup"}),p().Aq({environment:e,seen:!0})}function N(e){let{parent:t,collectionContextStore:o,context:n}=e;const l=(0,a().tz)(),s=(0,r().v3)(),{device:d}=s,u=(0,r().WS)();let p;p=d.isMobile?{menuType:j().gu.ActionSheet}:{menuType:j().gu.Popup,width:250};const g=(0,i().K8)((()=>_(o,n)),[o,n]),h=c().oE([u&&{key:"reset",render:e=>(0,M.jsx)(C().A,{...e,disabled:!1,title:(0,M.jsx)(V,{})}),action:()=>{W(s,o,n,t)}},{key:"newView",render:e=>(0,M.jsx)(C().A,{...e,disabled:!1,title:(0,M.jsx)(P,{})}),action:()=>{H(s,o,l,t)}},g&&{key:"merge",render:e=>(0,M.jsx)(b().A,{placement:k().W.Left,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,M.jsx)("div",{children:(0,M.jsx)(R,{})}),render:t=>(0,M.jsx)(C().A,{...(0,F().A)(e,t),disabled:!1,title:(0,M.jsx)(D,{})})}),action:()=>{K(s,o,n,t)}}]);return(0,M.jsx)(x().A,{...p,children:(0,M.jsx)(y().Ay,{type:y().Oh.Vertical,sections:[{key:0,render:e=>(0,M.jsx)(S().A,{enableActionSheetTitle:!0,...e}),items:h}],initialFocus:0})})}function q(e){let{context:t,changeCount:o}=e;return t===T.SettingsFilters?(0,M.jsx)(a().sA,{defaultMessage:"{count, plural, one {{count} filter changed from what other people see} other {{count} filters changed from what other people see}}",id:"database.viewSettings.filterAndSortSaveControl.filter.caption",values:{count:o}}):(0,M.jsx)(a().sA,{defaultMessage:"Sort has been changed from what other people see",id:"database.viewSettings.filterAndSortSaveControl.sort.caption"})}},297340:(e,t,o)=>{o.d(t,{A:()=>i});var n=o(242343),r=o(163643);const i=function(e){let{firstDayOfWeek:t,value:i,selectValue:l=!0,onChange:s,onFocus:a,onBlur:c,disabledDays:d,className:u}=e;const p=(0,n.useMemo)((()=>new Date(i)),[i]),[g,h]=(0,n.useState)(p),m=(0,n.useRef)(i);(0,n.useLayoutEffect)((()=>{m.current!==i&&(h(new Date(i)),m.current=i)}),[i]);const C=(0,n.useCallback)(((e,t,o)=>{s(e.getTime())}),[s]);return(0,r.jsx)("div",{style:{paddingRight:8,paddingBottom:8,paddingLeft:8,paddingTop:4},children:(0,r.jsx)(o(789894).n,{locale:o(16791).locale,className:u??"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:l?{value:p}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:C,onMonthSelected:h,disabled:d,month:g,onDayBlur:c,onDayFocus:a})})}},418077:(e,t,o)=>{o.d(t,{S:()=>r});o(242343);const n={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M3 4.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zm2.125 5.742h9.75a.625.625 0 1 0 0-1.25h-9.75a.625.625 0 1 0 0 1.25m1.5 3.883c0-.345.28-.625.625-.625h5.5a.625.625 0 1 1 0 1.25h-5.5a.625.625 0 0 1-.625-.625"})},r=(0,o(680369).wt)("filter",n)},427277:(e,t,o)=>{o.d(t,{q:()=>i});var n=()=>o(361308),r=()=>o(836331);function i(e,t){return(0,n().$J)(e,r().default.checkGate({gateName:"localized_parse_number"})?t:void 0)}},432175:(e,t,o)=>{o.d(t,{f:()=>r});var n=()=>o(759625);function r(e){const{collectionViewStore:t,update:o,transaction:r}=e;n().zv({store:t.getQueryStore(),data:o,transaction:r})}},499222:(e,t,o)=>{o.d(t,{E:()=>i});var n=()=>o(329911),r=()=>o(680805);function i(e){const t=(0,r().N)(e.collectionViewId);n().K.set({userId:e.userId,key:t,value:e.isOpen})}},505521:(e,t,o)=>{o.d(t,{td:()=>We,mL:()=>Oe,r9:()=>ze});o(362833),o(725707),o(491955),o(500234),o(403517);var n=o(242343),r=()=>o(237385),i=()=>o(803290),l=()=>o(174114),s=()=>o(950635),a=()=>o(15552),c=()=>o(564134),d=()=>o(716605),u=()=>o(752903),p=()=>o(871002),g=()=>o(16456),h=()=>o(427091),m=()=>o(198654),C=()=>o(711361),f=()=>o(418077),x=()=>o(836693),y=()=>o(242718),v=()=>o(145017),S=()=>o(518797),b=()=>o(289765),A=()=>o(409211),j=()=>o(86280),F=()=>o(653998),k=()=>o(188877),w=()=>o(975392),M=()=>o(76394),T=()=>o(31448),B=()=>o(254653),R=()=>o(782422),I=()=>o(128057),P=()=>o(969481),D=()=>o(206183),V=()=>o(953424),L=()=>o(640979),_=()=>o(906230),O=()=>o(427277),H=()=>o(755786),K=()=>o(705180),W=()=>o(875878),z=()=>o(509484),N=()=>o(907721),q=()=>o(98508),Y=()=>o(695412),G=()=>o(485966),U=()=>o(962373),Z=()=>o(836331),E=()=>o(210466),$=()=>o(413871),X=()=>o(921637),J=(o(113085),()=>o(84525)),Q=()=>o(218357),ee=()=>o(34662),te=()=>o(236339),oe=()=>o(749975),ne=()=>o(378219),re=()=>o(979537),ie=()=>o(816710),le=()=>o(535906),se=()=>o(559637),ae=()=>o(966789),ce=()=>o(935091),de=()=>o(858023),ue=()=>o(975515),pe=()=>o(743668),ge=()=>o(88271),he=()=>o(809785),me=()=>o(797715),Ce=o(163643);function fe(e){const{filter:t,parentStore:o,updateValue:s,onClose:c,desktopTopActions:d,mobileMenuTitle:p,mobileMoreActions:g}=e,h=(0,r().v3)(),m=(0,oe().ET)(),[C,f]=(0,n.useState)([]),[x,y]=(0,n.useState)(!1),v=(0,n.useMemo)((()=>(0,a().gc)(t)?(0,a().GK)(t):[]),[t]),S=(0,r().Y0)(),b=(0,i().K8)((()=>w().oE(v.map((e=>{if(e.value)return $().md.createChildStore(o,{table:"collection",id:e.value})})))),[v,o]),A=(0,i().K8)((()=>b.map((e=>(0,Ce.jsx)(he().A,{format:S.isMobile?u().NY.Large:u().NY.Small,value:(0,Ce.jsx)(ie().A,{collectionStore:e}),onClickRemove:()=>{const t=v.find((t=>t.value===e.id));if(t){const e=w().FF(v,t);s(e)}},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showTooltip:"overflow"},e.id)))),[b,v,S.isMobile,s]),[j,M]=(0,n.useState)(""),T=(0,F().tz)(),B=(0,i().K8)((()=>{var e;return null===(e=G().default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]),R=(0,i().K8)((()=>m.collectionStoresStore.state??[]),[m]),I=(0,i().K8)((()=>x?R:m.collectionStoreResultsInViewOrder()),[x,m,R]),P=(0,i().K8)((()=>(0,k().Ay)(j,R,(e=>ee().q4_(e.getName()??[])))),[j,R]),D=(0,i().K8)((()=>R.filter((e=>!C.some((t=>t.id===e.id))))),[R,C]),V=(0,i().uB)(void 0,E().A);(0,n.useEffect)((()=>{f((()=>""===j?w().hS([...I,...b,...C],"id"):P))}),[j,x,I,P,b]);const _=(0,l().IS)((e=>({checkboxIcon:{fill:e.regularIconColor}})),[]),O=(0,n.useCallback)(((e,t)=>{const o=Boolean(t.find((t=>"exact"===t.type&&t.value===e.id))),n=()=>{const o=w().Iy(t,[{type:"exact",value:e.id}],(e=>e.value));s(o)};return{key:e.id,render:t=>(0,Ce.jsx)(le().A,{...t,icon:(0,Ce.jsx)(se().A,{checked:o,size:14,onClick:n,style:_.checkboxIcon}),title:(0,Ce.jsx)(ie().A,{collectionStore:e}),isTokenTitle:!0}),action:n}}),[_.checkboxIcon,s]),H=(0,n.useCallback)((()=>({key:"hidden-items-button",render:e=>(0,Ce.jsx)(le().A,{...e,icon:(0,J().K)({width:13,height:13}),title:(0,Ce.jsx)(F().sA,{id:"collectionFilterValueMenu.locationFilterValueMenu.hiddenLocationsDescription",defaultMessage:"{numHiddenOptions, plural, one {{numHiddenOptions} other source} other {{numHiddenOptions} other sources}}",values:{numHiddenOptions:D.length}})}),action:()=>{y(!0),(0,te().X)({environment:h,collectionContextStore:m,action:"expand_property_filter",original_view_type:void 0,property_type:"location"})}})),[D.length,m,h]),K=(0,i().K8)((()=>{const e=[],t={},n=[];for(const o of C){const e=ne().Uo(o);e?B&&e.isMemberOrGuest(B,re()._.getSpacePermissionGroupIds({userId:B,spaceId:e.getSpaceId()}))&&(t[e.id]=[...t[e.id]??[],o]):n.push(o)}for(const[r,i]of Object.entries(t)){const t=$().h4.createChildStore(o,{table:Q().yK,id:r});e.push({key:r,items:i.map((e=>O(e,v))),render:e=>(0,Ce.jsx)(ge().A,{topBorder:!0,...e,title:(0,Ce.jsx)(Ce.Fragment,{children:t.getName()??""})})})}return n.length>0&&e.push({key:"private",items:n.map((e=>O(e,v))),render:e=>(0,Ce.jsx)(ge().A,{topBorder:!0,...e,title:(0,Ce.jsx)(F().sA,{id:"collectionFilterValueMenu.privateLocationSection",defaultMessage:"Private"})})}),D.length>0&&!x&&e.push({key:"hidden",items:[H()],render:e=>(0,Ce.jsx)(ge().A,{topBorder:!0,...e})}),e}),[D.length,x,C,B,o,O,v,H]),W=(0,Ce.jsx)(me().Ay,{focus:!S.isMobile||void 0,focusAfterAnimation:!0,format:me().le.FilterValue,tokens:A,placeholder:T.formatMessage({defaultMessage:"Search for one or more sources",id:"database.filterValue.locationType.searchPlaceholder"}),onRemoveLastToken:()=>{const e=v.slice(0,v.length-1);s(e)},onClearButtonClick:()=>{s([]),null==c||c()},value:j,onChange:e=>{M(e.target.value)},dontShowBorderBottom:S.isAndroid,showClearButton:!0,style:{maxHeight:"20vh",overflowY:"auto"}}),z=(0,Ce.jsxs)(ge().A,{desktopStyle:{paddingBottom:0},children:[!S.isMobile&&d,W]});let N;return N=S.isMobile?{menuType:L().gu.Modal,title:p,left:g,right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:c,header:z}:{menuType:L().gu.Popup,maxHeight:a().mi,width:260,header:z,disableHeaderBorder:!0},(0,Ce.jsx)(ce().A,{...N,children:(0,a().gc)(t)&&(0,Ce.jsxs)(Ce.Fragment,{children:[!m&&(0,Ce.jsx)(ge().A,{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 0px"},children:(0,Ce.jsx)(ae().A,{})}),m&&(0,Ce.jsxs)(Ce.Fragment,{children:[0===R.length||""!==j&&0===C.length?(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(ue().A,{title:(0,Ce.jsx)(F().sA,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}):null,R.length>0&&(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:K,store:V,onAccept:()=>{M("")}})]})]})})}var xe=()=>o(158923),ye=()=>o(126451),ve=()=>o(273520),Se=()=>o(356813),be=()=>o(401382),Ae=()=>o(655830),je=()=>o(397791),Fe=()=>o(443252),ke=()=>o(701513),we=()=>o(158918),Me=()=>o(103151),Te=()=>o(415806),Be=()=>o(35462),Re=()=>o(296814),Ie=()=>o(173692),Pe=()=>o(297340),De=()=>o(867988),Ve=()=>o(23082),Le=()=>o(82954),_e=()=>o(837809);let Oe=function(e){return e[e.AdvancedFilter=0]="AdvancedFilter",e[e.PropertyFilter=1]="PropertyFilter",e}({});const He=(0,F().YK)({startingMessage:{defaultMessage:"Select or type a date...",id:"search.dateMenu.dateMessage"},chevronDownAriaLabel:{id:"filterDateMenu.chevronDownAriaLabel.ariaLabel",defaultMessage:"Dropdown to select a date relative to today"},pageContainingThisView:{defaultMessage:"Page containing this view",id:"database.filterValue.pageContainingThisView"}}),Ke=o(129044).default.createClass("",{name:"QueryStore"});function We(e){const{schema:t,propertyFilter:o,parentStore:r,onClose:l,onChange:s,onChangeDebounced:a,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u,context:p,collectionViewId:g,collectionContextStore:h,allowRelativePersonFilter:m,allowRelativeDateFilter:C}=e,f=(0,i().uB)(void 0,U().A),x=(0,i().uB)(void 0,U().A),y=(0,i().uB)(void 0,E().A),v=(0,i().uB)(void 0,Ke),S=(0,i().K8)((()=>{var e;return"form_editor"===(null==h||null===(e=h.collectionViewStore())||void 0===e?void 0:e.getType())}),[h]);(0,K().A)({capture:!S,preventType:q().A.Y});const b=(0,n.useCallback)((e=>{null==l||l()}),[l]);return(0,Ce.jsx)(Ae().A,{debugName:"CollectionFilterValueMenu",capture:!0,onEsc:b,children:(0,Ce.jsx)(St,{propertyFilter:o,schema:t,parentStore:r,onChange:s,onChangeDebounced:a,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:l,collectionViewId:g,collectionContextStore:h,allowRelativePersonFilter:m,allowRelativeDateFilter:C,queryStore:v,menuListStore:y,dateFilterPopupStore:x,dateRangeFilterPopupStore:f})})}function ze(e){const{query:t,propertySchema:o,selectedValues:n,updateValue:r,isMobile:i,styles:l,isFormEditorView:s}=e,a=o.options||[];return(t?(0,k().Ay)(t,a,(e=>e.value)):a).map((e=>{const t=Boolean(n.find((t=>t.value===e.value))),o={key:e.value,render:o=>(0,Ce.jsx)(le().A,{icon:(0,Ce.jsx)(se().A,{onClick:o.onClick,checked:t,size:14,style:l.checkboxIcon,disallowTabbing:!0}),title:s?e.value:(0,Ce.jsx)(_e().O,{format:i?u().NY.Large:u().NY.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1}),isTokenTitle:!0,...o}),action:()=>{const o=t?n.filter((t=>{let{value:o}=t;return o!==e.value})):[...n,{type:"exact",value:e.value}];r(o)}};return o}))}function Ne(e){return Array.isArray(e)?0===e.length?{type:"exact",value:void 0}:1===e.length?e[0]:e:e}function qe(e,t){return Boolean(e.find((e=>w().n4(e,t))))}function Ye(){return(0,Ce.jsx)(F().sA,{defaultMessage:"Me",id:"database.filterValue.personType.firstPersonPropertyValue.title"})}function Ge(e,t,o){const{filter:n}=o;(0,a().s1)(n)?null==t||t({...n,subfilter:{...n.subfilter,value:Ne(e)}}):null==t||t({...n,value:Ne(e)})}function Ue(e,t,o){const{filter:n}=o;(0,a().s1)(n)?null==t||t({...n,subfilter:e}):null==t||t(e)}function Ze(e,t,o,n,r){return()=>{Ge(e?t.filter((e=>!w().n4(e,o))):[...t,o],r,n)}}function Ee(e){let{filter:t,onChange:o,propertyFilter:n,onClose:r}=e;return(0,a().t6)(t.value)?null:(0,Ce.jsx)(ge().A,{topBorder:!0,children:(0,Ce.jsx)(le().A,{focused:!1,title:(0,Ce.jsx)(F().sA,{defaultMessage:"Clear",id:"database.filterValue.clear.message"}),onClick:()=>{Ge({type:"exact",value:void 0},o,n),null==r||r()}})})}function $e(e){let{filter:t}=e;const o=(0,l().DP)();return(0,Ce.jsx)("span",{style:{color:o.text.tertiary},children:(0,P().J)(t.operator).toLocaleLowerCase()})}function Xe(e){let{propertySchema:t,propertyFilter:o,onChange:n}=e;const i=(0,l().DP)(),{isMobile:s}=(0,r().Y0)(),c=o.filter;if(!(0,a().gc)(c)||!(0,a().nM)(c))return(0,Ce.jsx)(Ce.Fragment,{children:t.name});const d={width:190,items:a().$N,selectedItem:(0,a().CY)(c),getKey:e=>e,onSelect:e=>{Ue({...c,use_end:(0,a().Zt)(e)},n,o)},renderItem:e=>(0,Ce.jsx)(Me().A,{renderTooltip:()=>(0,P().WG)(e.value),render:t=>(0,Ce.jsx)(le().A,{title:(0,P().h0)(e.value),...(0,_().A)(e,t)}),placement:N().W.Right,textWrap:!0,style:{width:"260px"}}),renderOrigin:e=>(0,Ce.jsx)(ye().A,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:6,flexShrink:0},children:(0,Ce.jsxs)("div",{style:{display:"flex",alignItems:"center",...!s&&{color:i.text.secondary,fill:i.lightIconColor,fontWeight:500,fontSize:12}},children:[(0,Ce.jsx)("span",{style:{marginRight:4},children:(0,P().h0)((0,a().CY)(c))}),(0,m().b)({width:10,height:10,...s&&{marginTop:2}})]})})};return(0,Ce.jsx)(we().A,{...d,mobileActionSheet:!0})}function Je(e){let{propertyFilter:t,onChange:o}=e;const n=(0,F().tz)(),i=(0,l().DP)(),{isMobile:s}=(0,r().Y0)(),{filter:c}=t;if(!(0,a().s1)(c))return null;const d={width:190,items:a().$X,getKey:e=>e,selectedItem:c.operator,onSelect:e=>{null==o||o({...c,operator:e})},renderItem:e=>(0,Ce.jsx)(le().A,{title:(0,P().wE)(e.value,n),...e}),renderOrigin:e=>(0,Ce.jsx)(ye().A,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:6,flexShrink:0},children:(0,Ce.jsxs)("div",{style:{display:"flex",alignItems:"center",...!s&&{color:i.text.tertiary,fontSize:12}},children:[(0,Ce.jsx)("span",{style:{marginRight:4},children:(0,P().wE)(c.operator,n).toLocaleLowerCase()}),(0,m().b)({width:10,height:10,...s&&{marginTop:2}})]})})};return(0,Ce.jsx)(we().A,{...d,mobileActionSheet:!0})}function Qe(e){let{propertyFilter:t,schema:o,parentStore:n,onChange:s}=e;const{isMobile:c}=(0,r().Y0)(),d=(0,l().DP)(),{property:u}=t,p=o[u],g=(0,a().s1)(t.filter)?t.filter.subfilter:t.filter,h=(0,i().K8)((()=>(0,a().HF)({schema:o,property:u,getRecordModel:n.getRecordModel})),[n,u,o]);if((0,a().s1)(g))return null;let C=(0,a().U6)(h);p&&(0,D().i5)(p)&&(C=C.filter((e=>!(0,a().tk)(e))));const f={width:190,items:C,selectedItem:g.operator,getKey:e=>e,onSelect:e=>{Ue((0,P().iI)(h,g,e,"propertyFilter"),s,t)},renderItem:e=>(0,Ce.jsx)(le().A,{title:(0,P().J)(e.value),...e}),renderOrigin:e=>(0,Ce.jsx)(ye().A,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:6,flexShrink:0},children:(0,Ce.jsxs)("div",{style:{display:"flex",alignItems:"center",...!c&&{color:d.text.secondary,fill:d.lightIconColor,fontWeight:500,fontSize:12}},children:[(0,Ce.jsx)("span",{style:{marginRight:4},children:(0,P().J)(g.operator).toLocaleLowerCase()}),(0,m().b)({width:10,height:10,...c&&{marginTop:2}})]})})};return(0,Ce.jsx)(we().A,{...f,mobileActionSheet:!0})}function et(e){let{parent:t,userCanConfigureFilters:o,onDelete:i,onAddToCombinatorFilter:l}=e;const{isMobile:s}=(0,r().Y0)(),c=s?{menuType:L().gu.ActionSheet}:{menuType:L().gu.Popup,maxHeight:a().mi},d=(0,n.useMemo)((()=>[{key:"actions",render:e=>(0,Ce.jsx)(ge().A,{disableMobilePadding:!0,...e}),items:o?w().oE([{key:"delete",render:e=>(0,Ce.jsx)(le().A,{...e,title:(0,Ce.jsx)(F().sA,{id:"database.filterValue.deleteFilter.title",defaultMessage:"Delete filter"}),icon:(0,Ce.jsx)(je().I,{icon:x().trashIcon}),isRedOnHover:!0}),action:()=>{t.close(),null==i||i()}},{key:"merge",render:e=>(0,Ce.jsx)(Me().A,{placement:N().W.Right,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,Ce.jsx)("div",{children:(0,Ce.jsx)(B().Nf,{})}),render:t=>(0,Ce.jsx)(le().A,{...(0,_().A)(e,t),title:(0,Ce.jsx)(F().sA,{id:"database.filterValue.mergeIntoAdvancedFilter.title",defaultMessage:"Add to advanced filter"}),icon:(0,Ce.jsx)(je().I,{icon:f().S})})}),action:()=>{t.close(),null==l||l()}}]):[]}]),[l,i,t,o]);return(0,Ce.jsx)(ce().A,{...c,children:(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,sections:d,initialFocus:void 0})})}function tt(e){let{propertySchema:t,propertyFilter:o,onChange:n}=e;return(0,a().qK)(t)?(0,Ce.jsx)(Xe,{propertyFilter:o,onChange:n,propertySchema:t}):(0,Ce.jsx)(Ce.Fragment,{children:t.name})}function ot(e){let{userCanConfigureFilters:t,onDelete:o,onAddToCombinatorFilter:n}=e;const i=(0,r().v3)(),{isMobile:l}=(0,r().Y0)(),s=(0,F().tz)();return(0,Ce.jsx)(ve().Ay,{popupType:i.device.isMobile?Fe().nl.SlideUp:Fe().nl.Popup,render:e=>(0,Ce.jsx)(et,{parent:e,userCanConfigureFilters:t,onDelete:o,onAddToCombinatorFilter:n}),renderOrigin:e=>t&&(0,Ce.jsx)(Se().A,{ariaLabel:s.formatMessage({id:"database.filterValue.dotsIcon.ariaLabel",defaultMessage:"More actions"}),icon:C()._,style:{...!l&&{height:20,width:20}},...e}),style:{width:240},originGap:2,placementToOrigin:ve().sx.Right,alignmentToOrigin:ve().yP.Start})}function nt(e){let{propertyFilter:t,onChange:o,schema:n,parentStore:r,userCanConfigureFilters:i,onDelete:s,onAddToCombinatorFilter:c,context:d}=e;const u=(0,l().DP)();if(d!==Oe.PropertyFilter)return null;const{property:p}=t,g=n[p];return g?(0,Ce.jsxs)("div",{style:{display:"flex",color:u.text.tertiary,fontSize:12,alignItems:"flex-start",paddingTop:4,paddingRight:8,paddingBottom:2,paddingLeft:8},children:[(0,Ce.jsx)("span",{style:{flexShrink:1,...T().RC},children:(0,Ce.jsx)(tt,{propertyFilter:t,onChange:o,propertySchema:g})}),(0,a().s1)(t.filter)&&(0,Ce.jsx)(Je,{propertyFilter:t,onChange:o}),(0,Ce.jsx)(Qe,{propertyFilter:t,schema:n,parentStore:r,onChange:o}),(0,Ce.jsx)("div",{style:{flexGrow:1}}),(0,Ce.jsx)(ot,{userCanConfigureFilters:i,onDelete:s,onAddToCombinatorFilter:c})]}):null}function rt(e){let{propertyFilter:t,schema:o,context:n,onChange:r,parentStore:i}=e;const{property:l}=t,s=o[l];return s?n===Oe.PropertyFilter?(0,Ce.jsxs)("div",{style:{display:"flex"},children:[(0,Ce.jsx)("span",{style:{fontWeight:T().Wy.medium,flexShrink:1,marginLeft:8,maxWidth:150,...T().RC},children:(0,Ce.jsx)(tt,{propertyFilter:t,onChange:r,propertySchema:s})}),(0,a().s1)(t.filter)&&(0,Ce.jsx)(Je,{propertyFilter:t,onChange:r}),(0,Ce.jsx)(Qe,{propertyFilter:t,schema:o,parentStore:i,onChange:r})]}):(0,Ce.jsx)(Ce.Fragment,{children:s.name}):null}function it(e){let{context:t,userCanConfigureFilters:o,onDelete:n,onAddToCombinatorFilter:r}=e;return t!==Oe.PropertyFilter?null:(0,Ce.jsx)(ot,{userCanConfigureFilters:o,onDelete:n,onAddToCombinatorFilter:r})}function lt(e){let{filter:t,onChange:o,propertyFilter:n,schema:i,parentStore:l,userCanConfigureFilters:s,onDelete:c,onAddToCombinatorFilter:d,context:u,onClose:p}=e;const g=(0,r().v3)(),h=(0,F().tz)(),{device:m}=g,C=(0,Ce.jsx)(be().Ay,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,a().gc)(t)&&t.value.value?t.value.value:"",onChange:e=>{Ge({type:"exact",value:e.target.value},o,n)},onClearButtonClick:()=>{Ge({type:"exact",value:void 0},o,n)},placeholder:h.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.textType.searchPlaceholder"}),showClearButton:!0,style:{paddingBottom:8}}),f=(0,Ce.jsxs)(ge().A,{disableMobileBorders:!0,disableMobilePadding:!0,children:[!m.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:n,onChange:o,schema:i,parentStore:l,userCanConfigureFilters:s,onDelete:c,onAddToCombinatorFilter:d,context:u}),(0,a().gc)(t)&&C]});let x;return x=m.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:n,schema:i,context:u,onChange:o,parentStore:l}),left:(0,Ce.jsx)(it,{context:u,userCanConfigureFilters:s,onDelete:c,onAddToCombinatorFilter:d}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:p,header:f}:{menuType:L().gu.Popup,maxHeight:a().mi,width:220,header:f},(0,Ce.jsx)(ce().A,{...x})}function st(e){let{filter:t,onChange:o,propertyFilter:n,schema:i,parentStore:l,userCanConfigureFilters:s,onDelete:c,onAddToCombinatorFilter:d,context:u,onClose:p}=e;const g=(0,r().v3)(),h=(0,F().tz)(),{device:m}=g,C=(0,Ce.jsx)(be().Ay,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,a().gc)(t)&&"number"==typeof t.value.value?t.value.value.toString():"",inputLeft:(0,Ce.jsx)($e,{filter:t}),onChange:e=>{Ge({type:"exact",value:(0,O().q)(e.target.value,h)},o,n)},onClearButtonClick:()=>{Ge({type:"exact",value:void 0},o,n)},placeholder:h.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.numberType.searchPlaceholder"}),showClearButton:!0,style:{paddingBottom:8}}),f=(0,Ce.jsxs)(ge().A,{disableMobileBorders:!0,disableMobilePadding:!0,children:[!m.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:n,onChange:o,schema:i,parentStore:l,userCanConfigureFilters:s,onDelete:c,onAddToCombinatorFilter:d,context:u}),(0,a().gc)(t)&&C]});let x;return x=m.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:n,schema:i,context:u,onChange:o,parentStore:l}),left:(0,Ce.jsx)(it,{context:u,userCanConfigureFilters:s,onDelete:c,onAddToCombinatorFilter:d}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:p,header:f}:{menuType:L().gu.Popup,maxHeight:a().mi,width:220,header:f},(0,Ce.jsx)(ce().A,{...x})}function at(e,t,o){t.setState(e),o.setState({focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}function ct(e){let{filter:t,schema:o,propertyFilter:s,parentStore:p,onChange:g,onClose:h,userCanConfigureFilters:m,onDelete:C,onAddToCombinatorFilter:f,context:x,queryStore:y,menuListStore:v,collectionContextStore:S}=e;const b=(0,F().tz)(),A=(0,l().DP)(),{isMobile:j,isAndroid:k}=(0,r().Y0)(),M=(0,i().O$)(y),T=(0,i().K8)((()=>(0,I().YF)(o,s,p)),[o,s,p]),[B,R]=(0,W().$)(),P=(0,i().K8)((()=>{const e=null==S?void 0:S.collectionViewStore();return"form_editor"===(null==e?void 0:e.getType())}),[S]),{items:D,tokenizedInput:V}=(0,n.useMemo)((()=>{if(!T||!(0,c().lx)(T))return{items:[],tokenizedInput:null};const e=T.options||[],o=(0,a().gc)(t)?(0,a().v0)(t)?(0,a().Zl)(t):(0,a().SM)(t):[],n=o.map((t=>{if(void 0===t.value)return null;const n=(0,d().jy)(e,t.value);return n?(0,Ce.jsx)(_e().O,{format:j?u().NY.Large:u().NY.Small,isSingle:!0,value:n.value,color:n.color,showRemoveButton:!0,onClickRemove:()=>{Ge(w().FF(o,t),g,s)}},n.id):null})),r=(0,Ce.jsx)("div",{style:{...!j&&{paddingTop:0,paddingRight:8,paddingBottom:8,paddingLeft:8}},children:(0,Ce.jsx)(me().Ay,{focus:!j||void 0,focusAfterAnimation:!0,format:me().le.FilterValue,tokens:P?[]:n,placeholder:b.formatMessage({defaultMessage:"Select one or more options…",id:"database.filterValue.selectType.searchPlaceholder"}),onRemoveLastToken:()=>{Ge(o.slice(0,o.length-1),g,s)},onClearButtonClick:()=>{Ge([],g,s),null==h||h()},value:M,onChange:e=>{at(e.target.value,y,v)},dontShowBorderBottom:k,showClearButton:!0,tokenWrapStyle:{paddingTop:2,gap:4},...B})});return{items:ze({query:M,propertySchema:T,selectedValues:o,updateValue:e=>{Ge(e,g,s)},isMobile:j,styles:{checkboxIcon:{fill:A.regularIconColor,pointerEvents:"none"}},isFormEditorView:P}),tokenizedInput:r}}),[T,t,j,P,b,M,k,B,A.regularIconColor,g,s,h,y,v]);if(!T||!(0,c().lx)(T))return null;const _=(0,Ce.jsxs)(ge().A,{desktopStyle:{paddingBottom:0,marginTop:P?8:0},children:[!j&&!P&&(0,Ce.jsx)(nt,{propertyFilter:s,onChange:g,schema:o,parentStore:p,userCanConfigureFilters:m,onDelete:C,onAddToCombinatorFilter:f,context:x}),(0,a().gc)(t)&&V]}),O=j?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:s,schema:o,context:x,onChange:g,parentStore:p}),left:(0,Ce.jsx)(it,{context:x,userCanConfigureFilters:m,onDelete:C,onAddToCombinatorFilter:f}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:h,header:_}:{menuType:L().gu.Popup,maxHeight:a().mi,width:260,header:_,disableHeaderBorder:!0,tokenInputHeader:!0};return(0,Ce.jsx)(ce().A,{...O,children:(0,a().gc)(t)&&(0,Ce.jsxs)(Ce.Fragment,{children:[0===D.length&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(ue().A,{title:(0,Ce.jsx)(F().sA,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}),D.length>0&&(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,Ce.jsx)(ge().A,{...e}),items:D}],store:v,onAccept:()=>{at("",y,v)},comboboxProps:R})]})})}function dt(e){let{filter:t,error:o,results:l,schema:c,propertyFilter:d,parentStore:p,onChange:g,allowRelativePersonFilter:h,onClose:m,userCanConfigureFilters:C,onDelete:f,onAddToCombinatorFilter:x,context:y,queryStore:v,menuListStore:b}=e;const j=(0,r().v3)(),k=(0,F().tz)(),{device:M}=j,T=(0,i().O$)(v),B=(0,i().K8)((()=>(0,I().YF)(c,d,p)),[c,d,p]),[R,P]=(0,W().$)(),D=(0,n.useMemo)((()=>(0,a().gc)(t)?(0,a().Wf)(t):[]),[t]),V=(0,i().K8)((()=>w().oE(D.map(((e,t)=>{if("exact"===e.type&&e.value){const t=(0,s().xC)({pointer:e.value,getRecordValue:p.getRecordValue});return(0,Ce.jsx)(Te().Ay,{actor:t,format:M.isMobile?Te().Ay.Format.Large:Te().Ay.Format.Small,showRemoveButton:!0,onClickRemove:()=>{Ge(w().FF(D,e),g,d)},shouldShrink:!0,isSingle:!1},e.value.id)}if("relative"===e.type&&"me"===e.value&&h)return(0,Ce.jsx)(he().A,{format:M.isMobile?u().NY.Large:u().NY.Small,value:(0,Ce.jsx)(Ye,{}),onClickRemove:()=>{Ge(w().FF(D,e),g,d)},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showTooltip:"overflow"},t)})))),[h,D,M.isMobile,g,p.getRecordValue,d]);if(!B)return null;const _=(0,Ce.jsx)("div",{style:{...!M.isMobile&&{paddingTop:4,paddingRight:8,paddingBottom:8,paddingLeft:8}},children:(0,Ce.jsx)(me().Ay,{focus:!M.isMobile||void 0,focusAfterAnimation:!0,format:me().le.FilterValue,tokens:V,placeholder:k.formatMessage({defaultMessage:"Search for one or more people…",id:"database.filterValue.personType.searchPlaceholder"}),onRemoveLastToken:()=>{Ge(D.slice(0,D.length-1),g,d)},onClearButtonClick:()=>{Ge([],g,d),null==m||m()},value:T,onChange:e=>{at(e.target.value,v,b)},dontShowBorderBottom:M.isAndroid,showClearButton:!0,...R})}),O=(0,Ce.jsxs)(ge().A,{desktopStyle:{paddingBottom:0},children:[!M.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:d,onChange:g,schema:c,parentStore:p,userCanConfigureFilters:C,onDelete:f,onAddToCombinatorFilter:x,context:y}),(0,a().gc)(t)&&_]});let H;H=M.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:d,schema:c,context:y,onChange:g,parentStore:p}),left:(0,Ce.jsx)(it,{context:y,userCanConfigureFilters:C,onDelete:f,onAddToCombinatorFilter:x}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:m,header:O}:{menuType:L().gu.Popup,maxHeight:a().mi,width:260,header:O,disableHeaderBorder:!0};const K=w().oE((l&&l.users||[]).map((e=>function(e,t,o,n,r){const{device:i}=n,l=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,Ce.jsx)(le().A,{...t,title:(0,Ce.jsx)(Te().t_,{isSingle:!0,shouldShrink:!0,format:i.isMobile?Te().t_.Format.Large:Te().t_.Format.Medium,userValue:e,showRemoveButton:!1}),isTokenTitle:!0,isChecked:l}),action:()=>{Ge(l?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:A().oo,id:e.id}}],r,o)}}}(e,D,d,j,g)))),z=["created_by","last_edited_by"].includes(B.type)?w().oE((l&&l.bots||[]).map((e=>function(e,t,o,n,r){const{device:i}=n,l=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,Ce.jsx)(le().A,{...t,title:(0,Ce.jsx)(Te().v7,{isSingle:!0,shouldShrink:!0,format:i.isMobile?Te().v7.Format.Large:Te().v7.Format.Medium,botValue:e,showRemoveButton:!1}),isTokenTitle:!0,isChecked:l}),action:()=>{Ge(l?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:S().GP,id:e.id}}],r,o)}}}(e,D,d,j,g)))):[];if(h&&l&&(!T||"me".includes(T))){const e=Boolean(D.find((e=>"relative"===e.type&&"me"===e.value)));K.unshift({key:"me",render:t=>(0,Ce.jsx)(le().A,{...t,title:(0,Ce.jsx)(Ye,{}),isChecked:e,style:M.isMobile?void 0:{fontSize:14}}),action:()=>{Ge(e?D.filter((e=>{let{value:t}=e;return"me"!==t})):[...D,{type:"relative",value:"me"}],g,d)}})}const N=[];return K.length>0&&N.push({key:"user property",render:e=>(0,Ce.jsx)(ge().A,{...e}),items:K}),z.length>0&&N.push({key:"bot property",render:e=>(0,Ce.jsx)(ge().A,{...e,title:"Pick a bot"}),items:z}),(0,Ce.jsx)(ce().A,{...H,children:(0,a().gc)(t)&&(0,Ce.jsxs)(Ce.Fragment,{children:[o&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(ue().A,{title:(0,Ce.jsx)(F().sA,{defaultMessage:"Something went wrong.",id:"database.filterValue.personType.searchPersonPropertyMenuItem.errorMessage"})})}),0===N.length&&l&&!o&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(ue().A,{title:(0,Ce.jsx)(F().sA,{defaultMessage:"No results",id:"database.filterValue.personType.noResults.message"})})}),!l&&!o&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(Ve().A,{})}),N.length>0&&(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:N,store:b,onAccept:()=>{at("",v,b)},comboboxProps:P})]})})}function ut(e){var t;let{filter:o,context:n,propertyFilter:l,schema:s,onChange:c,parentStore:d,userCanConfigureFilters:u,onDelete:p,onAddToCombinatorFilter:g,onClose:h,menuListStore:m,collectionContextStore:C}=e;const f=(0,r().v3)(),{device:x}=f,y=(0,i().K8)((()=>{const e=null==C?void 0:C.collectionViewStore();return"form_editor"===(null==e?void 0:e.getType())}),[C]);let v;v=x.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:l,schema:s,context:n,onChange:c,parentStore:d}),left:(0,Ce.jsx)(it,{context:n,userCanConfigureFilters:u,onDelete:p,onAddToCombinatorFilter:g}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:h}:{menuType:L().gu.Popup,maxHeight:a().mi,width:220,footer:(0,Ce.jsx)(Ee,{onChange:c,propertyFilter:l,onClose:h,filter:o})};const S=null===(t=o.value)||void 0===t?void 0:t.value;return(0,Ce.jsxs)(ce().A,{...v,children:[n===Oe.PropertyFilter&&(0,Ce.jsx)(ge().A,{disableMobilePadding:!0,children:!x.isMobile&&!y&&(0,Ce.jsx)(nt,{propertyFilter:l,onChange:c,schema:s,parentStore:d,userCanConfigureFilters:u,onDelete:p,onAddToCombinatorFilter:g,context:n})}),(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,Ce.jsx)(ge().A,{style:n===Oe.PropertyFilter?{paddingTop:0}:void 0,...e}),items:[{key:"unchecked",render:e=>(0,Ce.jsx)(le().A,{...e,title:(0,Ce.jsx)(F().sA,{defaultMessage:"Unchecked",id:"database.filterValue.checkboxType.unchecked.title"}),isTokenTitle:!0,isChecked:!1===S}),action:()=>{Ge({type:"exact",value:!1},c,l)}},{key:"checked",render:e=>(0,Ce.jsx)(le().A,{...e,title:(0,Ce.jsx)(F().sA,{defaultMessage:"Checked",id:"database.filterValue.checkboxType.checked.title"}),isTokenTitle:!0,isChecked:!0===S}),action:()=>{Ge({type:"exact",value:!0},c,l)}}]}],store:m,onAccept:h,captureKeyboardOnlyWhenFocused:!0}),x.isMobile&&(0,Ce.jsx)(Ee,{onChange:c,propertyFilter:l,onClose:h,filter:o})]})}function pt(e){let{filter:t,error:o,results:s,schema:d,propertyFilter:p,parentStore:g,onChange:h,onClose:m,userCanConfigureFilters:C,onDelete:f,onAddToCombinatorFilter:x,context:S,collectionViewId:A,queryStore:j,menuListStore:k,allowCurrentPageInRelatedCollectionFilter:T}=e;const B=(0,r().v3)(),R=(0,F().tz)(),{device:P}=B,D=(0,i().O$)(j),_=(0,i().K8)((()=>(0,I().YF)(d,p,g)),[d,p,g]),O=(0,i().K8)((()=>function(e,t){if(!e)return;const o=$().pS.createChildStore(t,{table:b().Gy,id:e}).getParentBlockStore();return o?o.getNearestAncestorTemplateStore():void 0}(A,g)),[A,g]),K=(0,i().K8)((()=>null==O?void 0:O.getAssociatedCollectionId()),[O]),z=(0,n.useMemo)((()=>(0,a().gc)(t)?(0,a().Rh)(t):[]),[t]),N=(0,i().K8)((()=>{const e=(0,I().YF)(d,p,g);return e&&(0,c().nC)(e)?{appConfigUri:(0,H().LQ)(e,g),schema:(0,H().D3)(e,B)}:{}}),[d,p,g,B]),q=(0,i().K8)((()=>function(e,t,o,n,r){const{appConfigUri:i,schema:l}=n;if(!l)return[];if(!i||!(0,V().KN)(l,i))return[];const s=(0,y().qk)(l,i),a=y().n$[i];return w().oE(s.map((n=>{if(!e||n.includes(e)){const e={type:"relative",value:{type:"builtin",variable:n}},i=qe(t,e);return{key:n,render:e=>(0,Ce.jsx)(le().A,{...e,title:(0,Ce.jsx)(F().sA,{...a[n].messageDescriptor}),isChecked:i}),action:Ze(i,t,e,o,r)}}})))}(D,z,p,N,h)),[D,z,p,N,h]),Y=(0,i().K8)((()=>T?function(e,t,o,n,r){const i=e.formatMessage(He.pageContainingThisView);if(!t||i.toLowerCase().includes(t)){const e={type:"relative",value:{type:"current_page_in_related_collection"}},t=qe(o,e);return{key:e.value.type,render:e=>(0,Ce.jsx)(le().A,{...e,title:i,isChecked:t}),action:Ze(t,o,e,n,r)}}}(R,D,z,p,h):void 0),[R,D,z,p,h,T]),[G,U]=(0,W().$)(),Z=(0,l().IS)((()=>({tokenWrapStyle:{paddingTop:2,gap:"5px 3px"},tokenStyle:{margin:0},inputStyle:{maxHeight:"20vh",overflowY:"auto"}})),[]);if(!_||!(0,c().nC)(_))return null;const E=(0,c().zO)(_);if(!E)return null;const X=w().oE(z.map(((e,t)=>{if(!e.value)return null;const o={format:P.isMobile?u().NY.Large:u().NY.Small,shouldWrap:!1,showRemoveButton:!0,isSingle:!1,shouldShrink:!0,onClickRemove:()=>{Ge(w().FF(z,e),h,p)},style:Z.tokenStyle},n=e.type;if("exact"===n)return(0,Ce.jsx)(Le().A,{blockId:e.value,parentStore:g,...o},e.value);if("relative"===n){var r;const{appConfigUri:n}=N;return"current_page_in_related_collection"===e.value.type?(0,Ce.jsx)(he().A,{value:R.formatMessage(He.pageContainingThisView),backgroundColor:"transparent",showTooltip:"overflow",...o},t):n&&"builtin"===e.value.type?(0,Ce.jsx)(he().A,{value:(0,Ce.jsx)(F().sA,{...null===(r=y().n$[n])||void 0===r||null===(r=r[e.value.variable])||void 0===r?void 0:r.messageDescriptor}),backgroundColor:"transparent",showTooltip:"overflow",...o},t):null}(0,M().HB)(n)}))),J=(0,Ce.jsx)(me().Ay,{focus:!P.isMobile||void 0,focusAfterAnimation:!0,format:me().le.FilterValue,tokens:X,placeholder:R.formatMessage({defaultMessage:"Search for one or more pages…",id:"database.filterValue.relationType.searchPlaceholder"}),onRemoveLastToken:()=>{Ge(z.slice(0,z.length-1),h,p)},onClearButtonClick:()=>{Ge([],h,p),null==m||m()},value:D,onChange:e=>{at(e.target.value,j,k)},dontShowBorderBottom:P.isAndroid,style:Z.inputStyle,tokenWrapStyle:Z.tokenWrapStyle,showClearButton:!0,...G}),Q=(0,Ce.jsxs)(ge().A,{desktopStyle:{paddingBottom:0},children:[!P.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:p,onChange:h,schema:d,parentStore:g,userCanConfigureFilters:C,onDelete:f,onAddToCombinatorFilter:x,context:S}),(0,a().gc)(t)&&J]});let ee;ee=P.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:p,schema:d,context:S,onChange:h,parentStore:g}),left:(0,Ce.jsx)(it,{context:S,userCanConfigureFilters:C,onDelete:f,onAddToCombinatorFilter:x}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:m,header:Q}:{menuType:L().gu.Popup,maxHeight:a().mi,width:260,header:Q,disableHeaderBorder:!0},s&&!D&&O&&E&&K===E&&(s=w().sb([O.id,...s]));let te=[];if(s){const e=function(e,t,o,n,r){return e.map((e=>{const i={type:"exact",value:e},l=qe(t,i),s=$().Bv.createChildStore(o,{table:v().ev,id:e});return{key:e,action:Ze(l,t,i,n,r),render:e=>(0,Ce.jsx)(ke().A,{store:s,isChecked:l,hidePath:!0,...e})}}))}(s,z,g,p,h);te=((0,a().s1)(p.filter)?[]:q).concat(e),Y&&(te=[Y,...te])}return(0,Ce.jsx)(ce().A,{...ee,children:(0,a().gc)(t)&&(0,Ce.jsxs)(Ce.Fragment,{children:[o&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(ue().A,{title:(0,Ce.jsx)(F().sA,{defaultMessage:"Something went wrong.",id:"database.filterValue.relationType.searchRelationPropertyMenuItem.errorMessage"})})}),0===te.length&&s&&!o&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(ue().A,{title:(0,Ce.jsx)(F().sA,{defaultMessage:"No results",id:"database.filterValue.relationType.noResults.message"})})}),!s&&!o&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(Ve().A,{})}),te.length>0&&(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,Ce.jsx)(ge().A,{...e}),items:te}],store:k,onAccept:()=>{at("",j,k)},comboboxProps:U})]})})}function gt(e){let{filter:t,schema:o,propertyFilter:n,parentStore:r,onChange:l,allowRelativeDateFilter:s,dateRangeFilterPopupStore:c}=e;const d=(0,i().K8)((()=>(0,I().YF)(o,n,r)),[o,n,r]);if(!d)return null;let u;if((0,a().Cw)(t)&&"exact"===t.value.type&&t.value.value){const e=t.value.value;u={starting:e.start_date?{type:"date",start_date:e.start_date}:void 0,ending:e.end_date?{type:"date",start_date:e.end_date}:void 0}}else u=(0,a().Cw)(t)&&"relative"===t.value.type?t.value:{starting:void 0,ending:void 0};const p={disableMenuWrap:!0,title:d.name,value:u,onUpdate:e=>{var o,r;if(e.error)return null;const i={...u,...e.value},s=null===(o=i.starting)||void 0===o?void 0:o.start_date,a=null===(r=i.ending)||void 0===r?void 0:r.start_date;Ue({operator:"date_is_within",use_end:"use_end"in t?null==t?void 0:t.use_end:void 0,value:{type:"exact",value:s||a?{type:"daterange",start_date:s,end_date:a}:void 0}},l,n)},allowRelativeRangeFilter:s,relativeRangePopupStore:c,onUpdateRelativeFilter:e=>{Ue({...t,value:e},l,n)}};return(0,Ce.jsx)(De().A,{...p})}function ht(e){let{filter:t,events:o,onChange:n,propertyFilter:i,allowRelativeDateFilter:s,dateFilterPopupStore:a}=e;const c=(0,l().DP)(),d=(0,r().v3)(),u=(0,F().tz)();return(0,Ce.jsx)(Re().A,{...o,placeholder:u.formatMessage(He.startingMessage),focused:"exact"===t.value.type,value:t.value,onUpdate:e=>{var o;if(e.error)return null;const r=null===(o=e.value)||void 0===o?void 0:o.start_date;Ue({...t,value:{type:"exact",value:r?{type:"date",start_date:r}:void 0}},n,i)},inputRight:s&&(0,Ce.jsx)(Se().A,{icon:m().b,iconStyle:{width:12,height:12},ariaLabel:u.formatMessage(He.chevronDownAriaLabel),style:{...!d.device.isMobile&&{height:20,width:20},color:c.mediumIconColor},onClick:()=>{a.setState({open:!0})}}),hideClearButton:"relative"===t.value.type||void 0,isRightLastElementOfInput:!0})}function mt(e){let{filter:t,context:o,onChange:n,propertyFilter:i,schema:s,parentStore:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,onClose:g,menuListStore:h}=e;const m=(0,l().DP)(),C=(0,r().v3)(),{device:f}=C,x=(0,a().gc)(t)?(0,a().ms)(t):[],y=x.map((e=>{let{value:t}=e;return t})),v=j().FG.map((e=>{const t=y.includes(e);return{key:e,render:o=>(0,Ce.jsx)(le().A,{icon:(0,Ce.jsx)(se().A,{checked:t,size:14,style:{fill:m.regularIconColor,pointerEvents:"none"},disallowTabbing:!0}),title:(0,P().w0)({type:"exact",value:e}),...o}),action:()=>{if(t)Ge(x.filter((t=>{let{value:o}=t;return o!==e})),n,i);else{const t={type:"exact",value:e};Ge([...x,t],n,i)}}}}));let S;return S=f.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:i,schema:s,context:o,onChange:n,parentStore:c}),left:(0,Ce.jsx)(it,{context:o,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:g}:{menuType:L().gu.Popup,maxHeight:a().mi,width:220,footer:(0,Ce.jsx)(Ee,{onChange:n,propertyFilter:i,onClose:g,filter:t})},(0,Ce.jsxs)(ce().A,{...S,children:[o===Oe.PropertyFilter&&(0,Ce.jsx)(ge().A,{disableMobilePadding:!0,children:!f.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:i,onChange:n,schema:s,parentStore:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:o})}),(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,Ce.jsx)(ge().A,{style:{paddingTop:0},...e}),items:v}],store:h})]})}function Ct(e){let{filter:t,parentStore:o,schema:n,propertyFilter:l,onChange:s,allowRelativePersonFilter:a,onClose:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g,queryStore:h,menuListStore:m}=e;const C=(0,r().v3)(),f=(0,F().tz)(),x=(0,i().O$)(h);return(0,Ce.jsx)(X().A,{request:x,performRequest:e=>async function(e,t,o,n){const r=await z().T.searchActions.load(),{users:i,bots:l}=await r.searchSpaceActors({environment:o,query:e,membersOnly:!1,userLocale:n,shouldUseEdgeCacheRollout:Z().default.checkGate({gateName:"edge_cache_person_property"}),limit:20});return await Promise.all([...i.map((async e=>{let{id:o}=e;const n=(0,$().Oo)(t,{table:A().oo,id:o});await n.load()})),...l.map((async e=>{const o=(0,$().Oo)(t,{table:S().GP,id:e.id,spaceId:e.space_id});await o.load()}))]),{users:i,bots:l}}(e,o,C,f.locale),render:(e,r)=>(0,Ce.jsx)(dt,{schema:n,propertyFilter:l,parentStore:o,onChange:s,allowRelativePersonFilter:a,onClose:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g,queryStore:h,menuListStore:m,filter:t,error:e,results:r})})}function ft(e){let{filter:t,schema:o,propertyFilter:n,parentStore:l,onChange:s,onClose:a,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g,collectionViewId:h,queryStore:m,menuListStore:C,allowCurrentPageInRelatedCollectionFilter:f}=e;const x=(0,r().v3)(),y=(0,i().O$)(m),S=(0,i().O$)(G().AppStoreCurrentSpaceStore),b=(0,i().K8)((()=>Y().A.state.publicPageData),[]),A=(0,i().K8)((()=>(0,I().YF)(o,n,l)),[o,n,l]),j=(null==S?void 0:S.id)||(null==b?void 0:b.spaceId);if(!A||!(0,c().nC)(A)||!j)return null;const F=(0,c().zO)(A);return F?(0,Ce.jsx)(X().A,{request:{query:y,spaceId:j,collectionId:F},performRequest:e=>async function(e,t,o){const{query:n,spaceId:r,collectionId:i}=e;if(!r||!i)return[];const l=await z().T.searchActions.load(),{results:s}=await l.searchPagesInCollection({environment:o,query:n,collectionId:i,limit:20,spaceId:r,excludeTemplates:!0,source:"relation_menu",includePublicPagesWithoutExplicitAccess:!0,boostRecentlyViewedPages:!1});return 0===s.length?[]:(await Promise.all(s.map((async e=>{const o=(0,$().Oo)(t,{table:v().ev,id:e});await o.load()}))),s)}(e,l,x),render:(e,r)=>(0,Ce.jsx)(pt,{schema:o,propertyFilter:n,parentStore:l,onChange:s,onClose:a,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g,collectionViewId:h,queryStore:m,menuListStore:C,filter:t,error:e,results:r,allowCurrentPageInRelatedCollectionFilter:f})}):null}function xt(e){let{filter:t,onChange:o,propertyFilter:n,allowRelativeDateFilter:r,dateFilterPopupStore:l}=e;const s=(0,i().O$)(R().XX);if(!(0,a().gc)(t))return null;const c="exact"===t.value.type?t.value.value:(0,g().fN)(t.value);return c&&!(0,p().$P)(c)?null:(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(ge().A,{disableMobileBorders:!0,children:(0,Ce.jsx)(Pe().A,{firstDayOfWeek:s,selectValue:void 0!==c,value:c?g().C6.notionDateToLuxon(c).toMillis():Date.now(),onChange:e=>{Ge({type:"exact",value:(0,g().p6)(e,(0,h().P)())},o,n)}})}),"relative"===t.value.type&&(0,Ce.jsx)(ge().A,{topBorder:!0,children:(0,Ce.jsx)(Be().A,{isSmall:!0,style:{marginLeft:4,marginTop:4},children:(0,Ce.jsx)(F().sA,{id:"collectionFilterMenu.dateFilter.relativeDateFilter.description",defaultMessage:"Filter will update with the current date"})})})]})}function yt(e){let{filter:t,context:o,propertyFilter:n,schema:i,onChange:l,parentStore:s,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u,onClose:p,allowRelativeDateFilter:g,dateFilterPopupStore:h,dateRangeFilterPopupStore:m}=e;const C=(0,r().v3)(),{device:f}=C;let x;return x=f.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:n,schema:i,context:o,onChange:l,parentStore:s}),left:(0,Ce.jsx)(it,{context:o,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:p}:{menuType:L().gu.Popup,maxHeight:a().mi},(0,Ce.jsxs)(ce().A,{...x,children:[(0,Ce.jsxs)(ge().A,{disableMobilePadding:!0,disableMobileBorders:!0,isInput:o!==Oe.PropertyFilter,children:[!f.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:n,onChange:l,schema:i,parentStore:s,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u,context:o}),(0,a().gc)(t)&&!(0,a().Cw)(t)&&(0,Ce.jsx)(Ie().A,{type:"date",filterValue:t.value,onUpdate:e=>{Ue({...t,value:e},l,n)},renderOrigin:e=>(0,Ce.jsx)(ht,{onChange:l,propertyFilter:n,allowRelativeDateFilter:g,dateFilterPopupStore:h,filter:t,events:e}),disabled:"exact"===t.value.type&&g,buttonPopupStore:h})]}),(0,a().gc)(t)&&((0,a().Cw)(t)?(0,Ce.jsx)(gt,{schema:i,propertyFilter:n,parentStore:s,onChange:l,allowRelativeDateFilter:g,dateRangeFilterPopupStore:m,filter:t}):(0,Ce.jsx)(xt,{onChange:l,propertyFilter:n,allowRelativeDateFilter:g,dateFilterPopupStore:h,filter:t}))]})}function vt(e){let{filter:t,schema:o,propertyFilter:n,parentStore:l,onChange:s,onClose:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g}=e;const h=(0,r().v3)(),{device:m}=h,C=(0,i().K8)((()=>(0,I().YF)(o,n,l)),[o,n,l]);if(!C||"file"!==C.type)return null;const f=(0,Ce.jsx)(ge().A,{desktopStyle:{paddingBottom:0},children:!m.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:n,onChange:s,schema:o,parentStore:l,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g})});let x;return x=m.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:n,schema:o,context:g,onChange:s,parentStore:l}),left:(0,Ce.jsx)(it,{context:g,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:c,header:f}:{menuType:L().gu.Popup,maxHeight:a().mi,width:260,header:f,disableHeaderBorder:!0,tokenInputHeader:!0},(0,Ce.jsx)(ce().A,{...x})}function St(e){let{propertyFilter:t,schema:o,parentStore:n,onChange:r,onChangeDebounced:l,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:g,collectionViewId:h,collectionContextStore:m,allowRelativePersonFilter:C,allowRelativeDateFilter:f,queryStore:x,menuListStore:y,dateFilterPopupStore:v,dateRangeFilterPopupStore:S}=e;const{property:b,filter:A}=t,j=(0,i().K8)((()=>(0,a().HF)({schema:o,property:b,getRecordModel:n.getRecordModel})),[n,b,o]),F=o[b],k=(0,i().K8)((()=>!(!m||!F)&&function(e){var t;let{collectionContextStore:o,propertySchema:n}=e;if(void 0===o.viewsModuleContextStore.state)return!1;const r=null===(t=o.viewsModuleContextStore.getCurrentPageCollectionStore())||void 0===t?void 0:t.id;return!!r&&(0,c().nC)(n)&&n.collection_id===r}({collectionContextStore:m,propertySchema:F})),[m,F]),w=(0,a().s1)(A)?A.subfilter:A;return"text"===j?(0,a().YH)(w)?(0,Ce.jsx)(lt,{onChange:l,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:g,filter:w}):null:"relation"===j?(0,a().Pq)(w)?(0,Ce.jsx)(ft,{schema:o,propertyFilter:t,parentStore:n,onChange:r,onClose:g,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,collectionViewId:h,queryStore:x,menuListStore:y,filter:w,allowCurrentPageInRelatedCollectionFilter:k}):null:"checkbox"===j?(0,a().Ui)(w)?(0,Ce.jsx)(ut,{context:p,propertyFilter:t,schema:o,onChange:r,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,onClose:g,menuListStore:y,filter:w,collectionContextStore:m}):null:"select"===j||"multi_select"===j?(0,a().v0)(w)||(0,a().as)(w)?(0,Ce.jsx)(ct,{schema:o,propertyFilter:t,parentStore:n,onChange:r,onClose:g,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,queryStore:x,menuListStore:y,filter:w,collectionContextStore:m}):null:"status"===j?(0,a().H$)(w)?(0,Ce.jsx)(xe().A,{propertyFilter:t,schema:o,filter:w,parentStore:n,updateValue:e=>Ge(e,r,t),onClose:g,desktopTopActions:(0,Ce.jsx)(nt,{propertyFilter:t,onChange:r,schema:o,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p}),mobileMenuTitle:(0,Ce.jsx)(rt,{propertyFilter:t,schema:o,context:p,onChange:r,parentStore:n}),mobileMoreActions:(0,Ce.jsx)(it,{context:p,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u}),collectionContextStore:m}):null:"person"===j?(0,a().I_)(w)?(0,Ce.jsx)(Ct,{parentStore:n,schema:o,propertyFilter:t,onChange:r,allowRelativePersonFilter:C,onClose:g,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,queryStore:x,menuListStore:y,filter:w}):null:"number"===j?(0,a().My)(w)?(0,Ce.jsx)(st,{onChange:l,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:g,filter:w}):null:"date"===j?(0,a().nM)(w)?(0,Ce.jsx)(yt,{context:p,propertyFilter:t,schema:o,onChange:r,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,onClose:g,allowRelativeDateFilter:f,dateFilterPopupStore:v,dateRangeFilterPopupStore:S,filter:w}):null:"file"===j?(0,a().B6)(w)?(0,Ce.jsx)(vt,{onChange:r,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:g,filter:w}):null:"location"===j?(0,a().G)(w)?(0,Ce.jsx)(fe,{filter:w,parentStore:n,updateValue:e=>Ge(e,r,t),onClose:g,desktopTopActions:(0,Ce.jsx)(nt,{propertyFilter:t,onChange:r,schema:o,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p}),mobileMenuTitle:(0,Ce.jsx)(rt,{propertyFilter:t,schema:o,context:p,onChange:r,parentStore:n}),mobileMoreActions:(0,Ce.jsx)(it,{context:p,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u})}):null:"verification"===j?(0,a().uU)(w)?(0,Ce.jsx)(mt,{context:p,onChange:r,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,onClose:g,menuListStore:y,filter:w}):null:"geo_point"===j?null:void(0,M().HB)(j)}},555434:(e,t,o)=>{o.d(t,{Y:()=>r});var n=()=>o(803290);function r(e){return(0,n().K8)((()=>null==e?void 0:e.getWorkflowStore()),[e])}},568262:(e,t,o)=>{o.d(t,{R:()=>i});o(242343);var n=o(163643);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.325 10.466V2.063a.625.625 0 1 1 1.25 0v8.453l1.458-1.458a.625.625 0 1 1 .884.884l-2.5 2.5a.625.625 0 0 1-.884 0l-2.5-2.5a.625.625 0 1 1 .884-.884z"}),(0,n.jsx)("path",{d:"M11.825 6.375H14.5c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-9a.875.875 0 0 1-.875-.875v-7.5c0-.483.392-.875.875-.875h2.575v-1.25H5.5A2.125 2.125 0 0 0 3.375 7.25v7.5c0 1.174.951 2.125 2.125 2.125h9a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 14.5 5.125h-2.675z"})]})},i=(0,o(680369).wt)("squareAndArrowDown",r)},627717:(e,t,o)=>{o.d(t,{A:()=>p});var n=o(242343),r=o(907960),i=()=>o(198654),l=()=>o(220413),s=()=>o(126451),a=()=>o(103151),c=o(163643);function d(e,t,o){return"object"!=typeof o[t]?o[t]:o[t][e]}function u(e,t){const{style:r,color:u,title:p,onClick:g,onDropdownClick:h,mainButtonTooltip:m,dropdownTooltip:C,icon:f,iconStyle:x,mainButtonStyle:y,isLoading:v,className:S,disabled:b,disableDropdown:A,size:j,variant:F="solid"}=e,{isMobile:k}=(0,o(237385).Y0)(),w=(0,o(174114).IS)((e=>{const t=(0,o(81e4).qq)({size:j}),n={background:d(u,F,{outline:void 0,solid:{blue:l().Ay.blue,black:l().Ay.frontBlackButtonBackground,orange:e.accentColors.orange["dark"===e.mode?100:50]}}),color:d(u,F,{outline:{blue:e.text.uiBluePrimary,black:e.text.primary,orange:e.text.orangeSecondary},solid:{blue:l().Ay.white,black:l().Ay.white,orange:e.accentColors.orange["dark"===e.mode?600:400]}})};return{wrap:{position:"relative",display:"inline-flex",flexShrink:0,borderRadius:6,overflow:"hidden",height:t.height},mainButton:{display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderTopLeftRadius:6,borderBottomLeftRadius:6,paddingLeft:t.paddingLeft,paddingRight:t.paddingRight,fontSize:t.fontSize,fontWeight:o(31448).Wy.medium,...n,...y},dropdownButton:{display:"flex",alignItems:"center",justifyContent:"center",width:k?28:24,alignSelf:"stretch",borderTopRightRadius:t.borderRadius,borderBottomRightRadius:t.borderRadius,boxShadow:"outline"===F||"blue"===u||"black"===u?`inset 1px 0 0 ${e.darkDividerColor}`:"orange"===u?`${e.accentColors.orange["dark"===e.mode?200:100]} 1px 0 0 inset`:(0,o(76394).HB)(u),...n},dropdownButtonIcon:{width:10,marginTop:2,fill:d(u,F,{outline:n.color,solid:{blue:l().Ay.white,black:l().Ay.white,orange:e.accentColors.orange["dark"===e.mode?500:400]}})},buttonHoveredStyle:{background:d(u,F,{outline:{blue:e.tint.uiBlueHover,black:e.tint.primaryHover,orange:e.tint.uiRedHover},solid:{blue:e.blueButtonHoveredBackground,black:l().Ay.frontBlackButtonBackgroundHovered,orange:e.accentColors.orange["dark"===e.mode?200:100]}})},buttonPressedStyle:{background:d(u,F,{outline:{blue:e.tint.uiBluePressed,black:e.tint.primaryPressed,orange:e.tint.uiRedPressed},solid:{blue:e.blueButtonPressedBackground,black:l().Ay.frontBlackButtonBackgroundPressed,orange:e.accentColors.orange["dark"===e.mode?300:200]}})},icon:{width:12,marginRight:6,fill:d(u,F,{outline:n.color,solid:{blue:l().Ay.white,black:l().Ay.white,orange:e.accentColors.orange[400]}}),...x},border:{position:"absolute",pointerEvents:"none",border:"outline"===F?`1px solid ${e.outlineButtonBorder}`:void 0,borderRadius:t.borderRadius,top:0,left:0,right:0,bottom:0}}}),[u,j,F,y,k,x]),M=(0,n.useMemo)((()=>m?(0,c.jsx)(a().A,{renderTooltip:()=>m,render:e=>(0,c.jsxs)(s().A,{ref:t,style:w.mainButton,onClick:g,disabled:b,disabledFeedback:!0,hoveredStyle:w.buttonHoveredStyle,pressedStyle:w.buttonPressedStyle,...e,children:[f&&f(w.icon),p]})}):(0,c.jsxs)(s().A,{ref:t,style:w.mainButton,onClick:g,disabled:b,isLoading:v,disabledFeedback:!0,hoveredStyle:w.buttonHoveredStyle,pressedStyle:w.buttonPressedStyle,children:[f&&f(w.icon),p]})),[m,t,w.mainButton,w.buttonHoveredStyle,w.buttonPressedStyle,w.icon,g,b,v,f,p]),T=(0,n.useMemo)((()=>A||b?null:C?(0,c.jsx)(a().A,{renderTooltip:()=>C,render:e=>(0,c.jsx)(s().A,{ref:t,style:w.dropdownButton,onClick:h,disabledFeedback:!0,hoveredStyle:w.buttonHoveredStyle,pressedStyle:w.buttonPressedStyle,...e,children:(0,i().b)(w.dropdownButtonIcon)})}):(0,c.jsx)(s().A,{ref:t,style:w.dropdownButton,onClick:h,disabledFeedback:!0,hoveredStyle:w.buttonHoveredStyle,pressedStyle:w.buttonPressedStyle,disabled:v,children:(0,i().b)(w.dropdownButtonIcon)})),[A,b,C,v,h,t,w.buttonHoveredStyle,w.buttonPressedStyle,w.dropdownButton,w.dropdownButtonIcon]);return(0,c.jsxs)("div",{style:{...w.wrap,...r},className:S,children:[M,T,(0,c.jsx)("div",{style:w.border})]})}const p=n.memo(n.forwardRef(u),r.bN)},724217:(e,t,o)=>{o.d(t,{RS:()=>x,OR:()=>C});o(242343);var n=()=>o(174114),r=()=>o(964456),i=()=>o(748267),l=()=>o(680369),s=o(163643);const a=(0,l().wt)("statusCompleteGroup",{viewBox:"0 0 17 17",svg:(0,s.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.71094 12.0781C8.00781 12.0781 8.27344 11.9219 8.44531 11.6562L11.8828 6.32031C11.9922 6.14844 12.0781 5.95312 12.0781 5.77344C12.0781 5.35156 11.7109 5.07031 11.3125 5.07031C11.0547 5.07031 10.8281 5.21094 10.6562 5.49219L7.6875 10.2578L6.29688 8.51562C6.10938 8.27344 5.91406 8.17969 5.67188 8.17969C5.25781 8.17969 4.92188 8.50781 4.92188 8.92969C4.92188 9.125 5 9.30469 5.14062 9.48438L6.94531 11.6641C7.16406 11.9375 7.40625 12.0781 7.71094 12.0781Z"})}),c=(0,l().wt)("statusInProgressGroup",{viewBox:"0 0 17 17",svg:(0,s.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.07031 11.4531L11.5938 8.80469C11.9297 8.60938 11.9219 8.125 11.5938 7.92969L7.07031 5.27344C6.71875 5.07031 6.26562 5.24219 6.26562 5.63281V11.0938C6.26562 11.4766 6.69531 11.6719 7.07031 11.4531Z"})}),d=(0,l().wt)("statusTodoGroup",{viewBox:"0 0 17 17",svg:(0,s.jsx)("path",{d:"M8.52344 1.85156C8.97656 1.85156 9.34375 1.49219 9.34375 1.05469C9.34375 0.609375 8.97656 0.234375 8.52344 0.234375C8.08594 0.234375 7.72656 0.609375 7.72656 1.05469C7.72656 1.48438 8.09375 1.85156 8.52344 1.85156ZM10.7969 2.21875C11.2422 2.21875 11.6094 1.85156 11.6094 1.41406C11.6094 0.960938 11.2422 0.601562 10.7969 0.601562C10.3516 0.601562 9.99219 0.960938 9.99219 1.41406C9.99219 1.85156 10.3516 2.21875 10.7969 2.21875ZM6.27344 2.21875C6.71094 2.21875 7.07812 1.85156 7.07812 1.41406C7.07812 0.960938 6.71094 0.601562 6.27344 0.601562C5.82812 0.601562 5.46094 0.960938 5.46094 1.41406C5.46094 1.85156 5.82812 2.21875 6.27344 2.21875ZM12.8359 3.25781C13.2812 3.25781 13.6484 2.89844 13.6484 2.45312C13.6484 2.00781 13.2812 1.64062 12.8359 1.64062C12.3984 1.64062 12.0312 2.00781 12.0312 2.45312C12.0312 2.89062 12.3984 3.25781 12.8359 3.25781ZM4.23438 3.25781C4.67188 3.25781 5.03906 2.89062 5.03906 2.45312C5.03906 2.00781 4.67969 1.64062 4.23438 1.64062C3.78906 1.64062 3.42188 2.00781 3.42188 2.45312C3.42188 2.89844 3.78906 3.25781 4.23438 3.25781ZM14.4609 4.88281C14.9062 4.88281 15.2734 4.51562 15.2734 4.07812C15.2734 3.63281 14.9062 3.26562 14.4609 3.26562C14.0234 3.26562 13.6562 3.63281 13.6562 4.07812C13.6562 4.51562 14.0234 4.88281 14.4609 4.88281ZM2.625 4.88281C3.0625 4.88281 3.42969 4.51562 3.42969 4.07812C3.42969 3.63281 3.0625 3.26562 2.625 3.26562C2.17969 3.26562 1.8125 3.63281 1.8125 4.07812C1.8125 4.51562 2.17969 4.88281 2.625 4.88281ZM15.4922 6.90625C15.9375 6.90625 16.3047 6.54688 16.3047 6.10156C16.3047 5.65625 15.9375 5.28906 15.4922 5.28906C15.0547 5.28906 14.6875 5.65625 14.6875 6.10156C14.6875 6.53906 15.0547 6.90625 15.4922 6.90625ZM1.59375 6.90625C2.02344 6.90625 2.39062 6.53906 2.39062 6.10156C2.39062 5.65625 2.03125 5.28906 1.59375 5.28906C1.14062 5.28906 0.78125 5.65625 0.78125 6.10156C0.78125 6.54688 1.14062 6.90625 1.59375 6.90625ZM15.8828 9.17188C16.3281 9.17188 16.6953 8.80469 16.6953 8.35938C16.6953 7.92188 16.3281 7.55469 15.8828 7.55469C15.4453 7.55469 15.0781 7.92188 15.0781 8.35938C15.0781 8.80469 15.4453 9.17188 15.8828 9.17188ZM1.21094 9.17188C1.64844 9.17188 2.01562 8.80469 2.01562 8.35938C2.01562 7.92188 1.64844 7.55469 1.21094 7.55469C0.765625 7.55469 0.398438 7.92188 0.398438 8.35938C0.398438 8.80469 0.765625 9.17188 1.21094 9.17188ZM15.4922 11.4375C15.9375 11.4375 16.3047 11.0703 16.3047 10.625C16.3047 10.1797 15.9375 9.82031 15.4922 9.82031C15.0547 9.82031 14.6875 10.1875 14.6875 10.625C14.6875 11.0703 15.0547 11.4375 15.4922 11.4375ZM1.59375 11.4375C2.03125 11.4375 2.39062 11.0703 2.39062 10.625C2.39062 10.1875 2.02344 9.82031 1.59375 9.82031C1.14062 9.82031 0.78125 10.1797 0.78125 10.625C0.78125 11.0703 1.14062 11.4375 1.59375 11.4375ZM14.4609 13.4609C14.9062 13.4609 15.2734 13.0938 15.2734 12.6484C15.2734 12.2109 14.9062 11.8438 14.4609 11.8438C14.0234 11.8438 13.6562 12.2109 13.6562 12.6484C13.6562 13.0938 14.0234 13.4609 14.4609 13.4609ZM2.625 13.4609C3.0625 13.4609 3.42969 13.0938 3.42969 12.6484C3.42969 12.2109 3.0625 11.8438 2.625 11.8438C2.17969 11.8438 1.8125 12.2109 1.8125 12.6484C1.8125 13.0938 2.17969 13.4609 2.625 13.4609ZM12.8359 15.0859C13.2812 15.0859 13.6484 14.7188 13.6484 14.2734C13.6484 13.8281 13.2812 13.4688 12.8359 13.4688C12.3984 13.4688 12.0312 13.8359 12.0312 14.2734C12.0312 14.7188 12.3984 15.0859 12.8359 15.0859ZM4.23438 15.0859C4.67969 15.0859 5.03906 14.7188 5.03906 14.2734C5.03906 13.8359 4.67188 13.4688 4.23438 13.4688C3.78906 13.4688 3.42188 13.8281 3.42188 14.2734C3.42188 14.7188 3.78906 15.0859 4.23438 15.0859ZM10.7969 16.125C11.2422 16.125 11.6094 15.7656 11.6094 15.3125C11.6094 14.875 11.2422 14.5078 10.7969 14.5078C10.3516 14.5078 9.99219 14.875 9.99219 15.3125C9.99219 15.7656 10.3516 16.125 10.7969 16.125ZM6.27344 16.125C6.71094 16.125 7.07812 15.7656 7.07812 15.3125C7.07812 14.875 6.71094 14.5078 6.27344 14.5078C5.82812 14.5078 5.46094 14.875 5.46094 15.3125C5.46094 15.7656 5.82812 16.125 6.27344 16.125ZM8.52344 16.4922C8.97656 16.4922 9.34375 16.1172 9.34375 15.6719C9.34375 15.2344 8.97656 14.875 8.52344 14.875C8.09375 14.875 7.72656 15.2422 7.72656 15.6719C7.72656 16.1172 8.08594 16.4922 8.52344 16.4922Z"})});var u=()=>o(653998),p=()=>o(930806),g=()=>o(907721),h=()=>o(279150),m=()=>o(103151);const C={[r().QV]:(0,s.jsx)(u().sA,{...r().oz.statusGroupNameTodo}),[r().jc]:(0,s.jsx)(u().sA,{...r().oz.statusGroupNameInProgress}),[r().P0]:(0,s.jsx)(u().sA,{...r().oz.statusGroupNameComplete}),[r().nX]:(0,s.jsx)(u().sA,{...p().DZ.current}),[r().p7]:(0,s.jsx)(u().sA,{...p().DZ.future})},f={[r().QV]:d,[r().jc]:c,[r().P0]:a};function x(e){const{group:t,disableGroup:o,style:r,showIcon:l,showColor:a}=e,c=(0,n().DP)(),u=f[t.name]??d,p=t.color??"gray";return(0,s.jsxs)("div",{style:{...r,display:"inline-flex",alignItems:"center"},children:[l&&u({display:"inline-block",width:16,height:16,fill:a?c.accentColors[p][400]:c.mediumIconColor}),(0,s.jsx)("span",{style:{paddingLeft:l?6:void 0,color:a?c.accentColors[p][500]:void 0},children:C[t.name]??t.name}),o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h().A,{size:4}),(0,s.jsx)(m().A,{placement:g().W.Bottom,render:e=>(0,s.jsx)("div",{...e,children:(0,i().g)({width:12})}),renderTooltip:e=>(0,s.jsx)("div",{...e,children:o.tooltipCaption}),disableTooltip:void 0===o.tooltipCaption})]}):null]})}},786944:(e,t,o)=>{o.d(t,{Hs:()=>R,B$:()=>I,m:()=>H,x1:()=>K,RQ:()=>P,RZ:()=>_,IU:()=>D,Ms:()=>O,Aq:()=>L,LS:()=>V});o(725707),o(491955),o(500234),o(403517),o(242343);var n=()=>o(752597),r=()=>o(15552),i=()=>o(572589),l=()=>o(214144),s=()=>o(769884),a=()=>o(975392),c=()=>o(76394),d=()=>o(575015),u=()=>o(541543),p=()=>o(499222),g=()=>o(329911),h=()=>o(129581);var m=()=>o(259897),C=()=>o(432175),f=()=>o(237385),x=()=>o(653998),y=()=>o(399309),v=()=>o(13143),S=o(163643);function b(){return(0,S.jsx)(x().sA,{defaultMessage:"Changes saved for everyone.",id:"database.filterBar.saved.title"})}function A(e){const{collectionContextStore:t,temporaryState:o}=e,n=(0,f().v3)();return(0,S.jsx)(v().Ag,{onClick:()=>{y().tN({environment:n,preventSelectText:!0}),d().N2(),D({environment:n,collectionContextStore:t,temporaryState:o})},children:(0,S.jsx)(x().sA,{defaultMessage:"Undo",id:"database.filterBar.undo.title"})})}var j=()=>o(128057),F=()=>o(378219),k=()=>o(485966),w=()=>o(255013),M=()=>o(521325),T=()=>o(84543),B=()=>o(658388);let R=function(e){return e[e.All=0]="All",e[e.Filters=1]="Filters",e[e.Sorts=2]="Sorts",e}({});function I(e){const{environment:t,collectionContextStore:o,targetCollectionViewStore:n,preventSnackbarNotification:r,type:i,transaction:l}=e,s=o.temporaryStateStore.state,a=o.currentPropertyFiltersStore.state,c=n.getPropertyFiltersStore(),u=(0,j().Ml)(o,"persisted");if(i===R.All||i===R.Filters){u.combinatorFilter&&(0,C().f)({collectionViewStore:n,update:{filter:u.combinatorFilter.value||null},transaction:l});for(const e of u.filters.removed)T().applyOperation({store:c,operation:{pointer:c.pointer,command:"keyedObjectListRemove",path:c.path,args:{remove:{id:e}}},transaction:l});for(const{id:e,beforeId:t}of u.filters.moveOps){const o=a.find((t=>t.id===e));o&&(t?T().applyOperation({store:c,operation:{pointer:c.pointer,command:"keyedObjectListBefore",path:c.path,args:{before:{id:t},value:o}},transaction:l}):T().applyOperation({store:c,operation:{pointer:c.pointer,command:"keyedObjectListAfter",path:c.path,args:{value:o}},transaction:l}))}for(const e of u.filters.updated){const t=a.find((t=>t.id===e));t&&T().applyOperation({store:c,operation:{pointer:c.pointer,command:"keyedObjectListUpdate",path:c.path,args:{value:t}},transaction:l})}}i!==R.All&&i!==R.Sorts||!u.sorts||(0,C().f)({collectionViewStore:n,update:{sort:u.sorts.value||null},transaction:l}),V({environment:t,collectionContextStore:o,temporaryState:i===R.All?void 0:i===R.Filters?{...s,combinatorFilter:void 0,propertyFilters:void 0}:{...s,sorts:void 0}}),r||d().D6({label:(0,S.jsx)(b,{}),right:(0,S.jsx)(A,{collectionContextStore:o,temporaryState:s})})}function P(e){const{environment:t,intl:o,collectionContextStore:r,transaction:i}=e,l=r.collectionViewStore(),s=r.isFullScreenStore.state,a=r.isRootChildStore.state,c=r.isInPeekRendererStore.state;if(!l)return;const d=r.collectionViewBlockStore(),p=(0,u().t)({environment:t,collectionViewBlockStore:d,collectionViewStore:l,intl:o,transaction:i});p&&(I({environment:t,type:R.All,collectionContextStore:r,targetCollectionViewStore:p,transaction:i}),p&&("chart"===p.getType()&&w().Z({environment:t,collectionContextStore:r,collectionViewId:p.id,from:"filter_save_as_new_view"}),(0,m().t)({environment:t,collectionContextStore:r,collectionViewId:p.id,isFullScreen:s,isRootChild:a,isInPeekRenderer:c}),n().default.afterNextFlush((()=>{M().Ow({collectionContextStore:r,collectionSettingsStore:r.settingsStore,selectViewNameInitial:!0})}))))}function D(e){V(e),function(e){const{environment:t,collectionContextStore:o}=e,n=o.collectionViewStore(),r=o.collectionViewBlockStore();if(!n||!r)return;(o.isUnlistedViewStore.state&&o.isInlineViewStore.state||(0,F().rD)({environment:t,store:r})&&o.permissionScopesStore.state.canConfigureBlock)&&T().createAndCommit({userAction:"collectionFilterActions.applyTemporaryStateIfPrivate",environment:t,canUndo:!0,perform:e=>{I({environment:t,collectionContextStore:o,type:R.All,targetCollectionViewStore:n,preventSnackbarNotification:!0,transaction:e})}})}(e)}function V(e){var t;const{environment:o,collectionContextStore:n,temporaryState:r}=e,i=n.collectionViewStore();if(!i)return;const l=o.currentUser.id;n.temporaryStateStore.setState(r||{}),function(e){let{currentUserId:t,collectionViewId:o,viewsModuleCurrentPageId:n,temporaryState:r}=e;const i=(0,h().l)({collectionViewId:o,viewsModuleCurrentPageId:n});r?g().K.set({userId:t,key:i,value:JSON.stringify(r)}):g().K.remove({userId:t,key:i})}({currentUserId:l,collectionViewId:i.id,viewsModuleCurrentPageId:n.viewsModuleContextStore.isInLayoutBuilder()||null===(t=n.viewsModuleContextStore.currentPageStore())||void 0===t?void 0:t.id,temporaryState:r}),n.groupsStore.resetAllLimits()}function L(e){const{environment:t,seen:o}=e,{currentUserSettingsStore:n}=k().default.state;n&&T().createAndCommit({userAction:"collectionFilterActions.setSeenFiltersIntroTooltip",environment:t,canUndo:!0,perform:e=>{B().mJ({userSettingsStore:n,transaction:e,data:{seen_filters_tooltip:o}})}})}function _(e){var t;let{transaction:o,newGroups:n,collectionContextStore:l,environment:s}=e;const d=l.collectionViewStore(),u=l.currentCombinatorFilterStore.state,p=(0,a().mg)(u),g=null==p||null===(t=p.filters)||void 0===t?void 0:t.find(r().B9),h=(0,j().I6)(l);if(!(d&&p&&p.filters&&g))return;const m=g.filter.value.filter((e=>"exact"===e.type)).map((e=>e.value)).filter(c().O9),C=n.map((e=>e.value)).filter(i().D1).map((e=>e.value)).filter(i().WO).map((e=>e.id)),f=(0,a().FF)(C,...m);0!==f.length&&(g.filter.value=[...g.filter.value,...f.map((e=>({type:"exact",value:e})))],V({environment:s,collectionContextStore:l,temporaryState:{...l.temporaryStateStore.state,combinatorFilter:{value:p}}}),h||I({environment:s,collectionContextStore:l,type:R.Filters,targetCollectionViewStore:d,preventSnackbarNotification:!0,transaction:o}))}function O(e){var t;const o=null===(t=e.collectionViewStore())||void 0===t?void 0:t.id,n=e.getCurrentUserId();o&&n&&((0,p().E)({userId:n,collectionViewId:o,isOpen:!1}),e.filtersBarOpenStore.setState(!1))}function H(e){var t;const{collectionContextStore:o,environment:n,property:r,schema:i}=e,a=o.currentPropertyFiltersStore.state,c=a.find((e=>e.filter.property===r));if(c)return c;const d=(null===(t=o.collectionViewBlockStore())||void 0===t?void 0:t.getRecordModel)??s().b4_.constant(void 0),u=(0,j().SO)({property:r,schema:i,getRecordModel:d});if(!u)return;const p={id:l().JW(),filter:u};return D({environment:n,collectionContextStore:o,temporaryState:{...o.temporaryStateStore.state,propertyFilters:{value:[...a,p]}}}),p}function K(e){const{collectionContextStore:t,environment:o}=e,n=t.currentCombinatorFilterStore.state;if(n)return n;const i=r().Lx;return D({environment:o,collectionContextStore:t,temporaryState:{...t.temporaryStateStore.state,combinatorFilter:{value:i}}}),i}},816710:(e,t,o)=>{o.d(t,{A:()=>r});o(242343);var n=o(163643);const r=function(e){const{collectionStore:t}=e,r=(0,o(803290).K8)((()=>t.getIcon()),[t]);return(0,n.jsxs)("div",{style:{display:"flex",columnGap:4,alignItems:"center"},children:[(0,n.jsx)(o(28210).B,{disabled:!0,icon:r,isEmptyPage:!1,size:20}),(0,n.jsx)(o(709237).A,{store:t,style:{maxWidth:180}})]})}},827164:(e,t,o)=>{o.d(t,{d:()=>r});o(242343);const n={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.342.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},r=(0,o(680369).wt)("docOnDoc",n)},837809:(e,t,o)=>{o.d(t,{O:()=>c,q:()=>d});o(242343);var n=()=>o(174114),r=()=>o(220413),i=()=>o(31448),l=()=>o(826033),s=()=>o(809785),a=o(163643);function c(e){const{value:t,color:o,format:c,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:g,shouldShrink:h,hideTooltip:m,description:C,tooltipPlacement:f,...x}=e,y=(0,n().DP)(),v=(0,n().IS)((e=>({token:{...d&&i().RC}})),[d]),{textColor:S,backgroundColor:b}=(0,r().LD)(y,o);return t?(0,a.jsx)(s().A,{format:c,value:(0,a.jsx)(l().A,{children:t}),description:C,onClickRemove:u,showRemoveButton:p,isSingle:g,color:S,backgroundColor:b,shouldShrink:h,tooltipPlacement:f,showTooltip:m?"never":"overflow",style:v.token,...x}):null}function d(e){const{value:t,color:o,format:c,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:g,shouldShrink:h,groupColor:m,tooltipPlacement:C,description:f,hideTooltip:x,...y}=e,v=(0,n().DP)(),S=(0,n().IS)((()=>({token:{...d&&i().RC}})),[d]);if(!t)return null;const{textColor:b,backgroundColor:A}=(0,r().LD)(v,o??m??"gray");let j;return j=o||(m||"gray"),(0,a.jsx)(s().A,{format:c,value:(0,a.jsx)(l().A,{children:t}),description:f,onClickRemove:u,showRemoveButton:p,isSingle:g,color:b,backgroundColor:A,shouldShrink:h,showTooltip:x?"never":"overflow",style:S.token,isRound:!0,showColoredDot:j,tooltipPlacement:C,...y})}}}]);