"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[59111],{112433:(e,t,o)=>{o.d(t,{_:()=>i});var r=o(242343);function i(){const e=(0,r.useRef)(null),[t,o]=(0,r.useState)(!1),[i,n]=(0,r.useState)(!1),l=(0,r.useCallback)((()=>{const t=e.current;t&&n(t.matches(":active"))}),[]),a=(0,r.useCallback)((t=>{e.current=t,l(),o(!0)}),[l]);return(0,r.useEffect)((()=>{const o=e.current;if(o&&t)return o.addEventListener("mousedown",l),o.addEventListener("mouseup",l),()=>{o.removeEventListener("mousedown",l),o.removeEventListener("mouseup",l)}}),[l,t]),[a,i,e]}},177974:(e,t,o)=>{o.d(t,{FF:()=>u,Pe:()=>s,Ru:()=>c,pZ:()=>d});o(610931);var r=o(242343),i=()=>o(663539),n=()=>o(265987);function l(e,t){return`${e}-${t}`}function a(e,t,o){return`${l(e,t)}-${o}`}function s(e,t,o){const r=l(t,o);return e.startsWith(r)}function d(e,t){return e.startsWith(t)}function c(e){const{blockStore:t,propertyId:o,environment:r,saveUploadedFile:i}=e;return p({blockStore:t,propertyId:o,environment:r,saveUploadedFile:i})}function u(e){const{blockStore:t,propertyId:o,environment:r,onSingleFileStartCallback:i,onSingleFileErrorCallback:n,formMetadata:l}=e,{spaceId:a,formId:s}=l,d=p({blockStore:t,propertyId:o,environment:r,onSingleFileStartCallback:i,onSingleFileErrorCallback:n,formMetadata:{spaceId:a??"",formId:s??""}});return a&&s?d:e=>{throw new Error("spaceId and formId are not defined")}}function p(e){const{blockStore:t,propertyId:o,environment:l,onSingleFileStartCallback:s,onSingleFileErrorCallback:d,saveUploadedFile:c,formMetadata:u}=e;return(0,r.useCallback)((e=>{const r=(e,r,i)=>{const l=a(t.pointer.id,o,r);n().default.setKeyState(l,{progressPercent:0,file:e.file,name:e.name,size:e.size}),s&&i&&s({...i,globalFileUploadStoreKey:l})},p=(e,r)=>{let{progressPercent:i,progressText:l}=e;const s=a(t.pointer.id,o,r),d=n().default.getKeyState(s);if(!d)throw new Error("uploading file cannot be found in global file upload state");n().default.setKeyState(s,{...d,progressPercent:i,progressText:l})},m=(e,r)=>{const i=a(t.pointer.id,o,r),l=n().default.getKeyState(i);if(n().default.setKeyState(i,void 0),!l||null==l||!l.name)throw new Error("completed file upload cannot be found in global file upload state");c&&c({name:null==l?void 0:l.name,url:e},void 0)},f=(e,r)=>{const i=a(t.pointer.id,o,r);n().default.setKeyState(i,void 0),d&&d(i)},h=u?{environment:l,files:e,bucket:"temporary",formMetadata:u,onSingleFileStart:r,onSingleFileProgress:p,onSingleFileComplete:m,onSingleFileError:f}:{environment:l,files:e,bucket:"secure",record:t.pointer,isFileBlock:!1,onSingleFileStart:r,onSingleFileProgress:p,onSingleFileComplete:m,onSingleFileError:f};i().Zn(h)}),[c,t.pointer,l,o,u,s,d])}},213234:(e,t,o)=>{o.d(t,{H:()=>l,o:()=>n});var r=o(242343),i=()=>o(911421);const n=(0,r.createContext)(null);function l(){const e=(0,r.useContext)(n);return e||new(i().A)}n.displayName="FormBlockContext"},215458:(e,t,o)=>{o.d(t,{w:()=>s});o(358848),o(91270),o(875472),o(76509),o(863754);const r="://",i="www.",n=/.+\..+\..+/,l=/\.{2,}/,a=/.+\..+/;function s(e){const t=e.trim();if(0===t.length)return!1;if(-1===t.indexOf(".")&&-1===t.indexOf("localhost"))return!1;if("."===t.at(t.length-1)||-1!==t.indexOf(" "))return!1;let o,s=`${-1===t.indexOf(r)?"http://":""}${t}`;try{o=new URL(s)}catch(c){const e=-1===s.indexOf(i),[t,n]=s.split(r);s=`${t}${r}${e?"www.":""}${n}`;try{o=new URL(s)}catch(c){return!1}}const d=o.hostname;return!l.test(d)&&(!(t.includes(i)&&"localhost"!==d&&!n.test(d))&&!("localhost"!==d&&!a.test(d)))}},227083:(e,t,o)=>{o.d(t,{Jz:()=>s,in:()=>a,yh:()=>l});o(725707),o(491955),o(403517);var r=()=>o(803290),i=()=>o(543396),n=()=>o(76394);const l=(0,o(653998).YK)({unsupportedPublicQuestionType:{defaultMessage:"This question type cannot be used in public forms.",id:"useNewQuestionPropertyMenuItems.invalidPublicQuestionType"},relatedCollectionNotPublic:{defaultMessage:"Only relations to public databases are supported in public forms.",id:"formEditorQuestion.relatedCollectionNotPublic"},editorPlaceholder:{defaultMessage:"Respondent's answer",id:"formEditorQuestion.editorPlaceholder"},viewerEmptyPlaceholder:{defaultMessage:"Your answer",id:"formEditorQuestion.viewerEmptyPlaceholder"}});function a(e){let{layoutStore:t,collectionStore:o}=e;const l=(0,r().K8)((()=>o?t.getNormalizedFormQuestionStoresForFormLayout({collectionSchema:o.getSchema()})??[]:[]),[t,o]),a=(0,r().K8)((()=>l.map((e=>{var t;return null===(t=e.getConfig())||void 0===t?void 0:t.propertyId})).filter(n().O9)),[l]);return(0,r().K8)((()=>{if(!o)return[];const e=o.getSchema();if(!t.getModel())return[];return(0,n().WP)(e).map((e=>{let[t,o]=e;if(o&&(0,i().Sg)(o)&&!a.includes(t))return t})).filter(n().O9)}),[o,t,a])}const s=[{key:"unlimited",title:"Unlimited",type:"button"},{key:"1",title:"1",type:"button"},{key:"2",title:"2",type:"button"},{key:"3",title:"3",type:"button"},{key:"4",title:"4",type:"button"},{key:"5",title:"5",type:"button"},{key:"10",title:"10",type:"button"}]},294245:(e,t,o)=>{o.r(t),o.d(t,{default:()=>fe});var r=o(242343),i=()=>o(921371),n=(o(610931),()=>o(237385)),l=()=>o(803290),a=()=>o(174114),s=()=>o(34662),d=()=>o(653998),c=()=>o(384221),u=()=>o(84543),p=()=>o(956070),m=()=>o(907721),f=()=>o(943066),h=()=>o(133926),y=()=>o(126451),g=()=>o(356813),v=()=>o(59175),b=()=>o(103151),S=()=>o(751436),x=o(163643);const F=r.forwardRef((function(e,t){var i;const{disabled:F,formQuestionStore:C,format:w,store:k,property:M,locked:P}=e,j=(0,d().tz)(),B=(0,n().v3)(),_=(0,n().Y0)(),I=(0,o(622286).X)("forms_conditional_logic"),A=(0,o(546820).v$)(),z=(0,o(863969).O)(),{collectionContextStore:T}=(0,r.useContext)(S().L8),L=(0,o(201562).Q1)(),[R,D]=(0,o(951920).B)(),[E,K]=(0,o(112433)._)(),[H,Q]=(0,r.useState)(!1),[U,q]=(0,r.useState)(""),[V,$]=(0,r.useState)(!1);if(!C)throw new Error("FormTextProperty: formQuestionStore is required");const N=(0,l().K8)((()=>{var e;const t=null==C||null===(e=C.getPropertyTypeSpecificConfig("checkbox"))||void 0===e?void 0:e.label;return(0,s().q4_)(t)}),[C]),O=(0,l().K8)((()=>(0,o(716605).wu)(k.getPropertyValue(M))),[k,M]),W=(0,l().K8)((()=>C.isRequired()),[C]);(0,o(269280).l)((()=>{q(N)}));const X=(0,l().K8)((()=>null==C?void 0:C.getParentStore()),[C]),{currentQuestionModuleAndArea:Y,modulesByArea:Z}=(0,l().K8)((()=>{const e=null==X?void 0:X.getModules();if(!e||!C)return{undefined:void 0,normalizedModulesByArea:e};return{currentQuestionModuleAndArea:(0,o(846287).Ib)({modulesByArea:e,find:e=>"formQuestion"===e.type&&e.formQuestionId===C.id}),modulesByArea:e}}),[C,X]),G=(0,h()._X)({name:"forms_conditional_logic",spaceId:z,userId:null===(i=B.currentUser)||void 0===i?void 0:i.id}),J=null==G?void 0:G.upsell,ee=(0,o(167532).J)(),te=(0,l().K8)((()=>{const e=(0,p().Yx)({type:"checkbox",formQuestionId:null==Y?void 0:Y.module.formQuestionId,isConditionalLogicEnabled:I,formAddConditionalLogicTooltipStore:null==L?void 0:L.formAddConditionalLogicTooltipStore});return e&&T&&o(521325).os({collectionSettingsStore:T.settingsStore}),e}),[null==Y?void 0:Y.module.formQuestionId,T,I,L]),oe=(0,r.useMemo)((()=>{const e=null==Y?void 0:Y.module;return(0,p().DG)({isConditionalLogicEnabled:I,mouseEntered:V,currentQuestionModule:e,modulesByArea:Z,featureAvailable:"available"===(null==G?void 0:G.type),isDragging:!1,inputFocused:!1,showTutorialTooltip:te})}),[V,I,Y,Z,null==G?void 0:G.type,te]),re=(0,r.useCallback)((()=>{$(!0)}),[]),ie=(0,r.useCallback)((()=>{$(!1)}),[]);function ne(){u().createAndCommit({userAction:"FormCheckboxProperty.handleUpdateLabel",environment:B,canUndo:!0,perform:e=>{if(!C)return;const t=C.getPropertyTypeSpecificConfig("checkbox");o(759625).zv({store:C.getConfigStore().getKeyStore("propertyTypeSpecificConfig").getKeyStore("checkbox"),data:{...t,label:(0,s().x9d)(U)},transaction:e})}})}const le=(0,r.useCallback)((()=>{F||u().createAndCommit({userAction:"FormCheckboxProperty.handleToggleCheckbox",environment:B,canUndo:!0,perform:e=>{o(665865).qS({stores:[k],property:M,transaction:e})}})}),[F,B,M,k]),ae=(0,r.useCallback)((()=>{M&&Y&&X&&(o(303330).lF({environment:B,layoutStore:X,currentQuestionModule:Y.module,area:Y.area,property:M,filterValue:{type:"checkbox",value:void 0},setModuleSelection:null==A?void 0:A.setModuleSelection,sessionId:(null==A?void 0:A.sessionId)??""}),o(658388).p$({environment:B}),o(689248).a(B,p().wG))}),[M,B,Y,X,A]),se=(0,a().IS)((e=>{let t="transparent";return K?t=e.buttonPressedBackground:D&&(t=e.buttonHoveredBackground),{container:{borderRadius:6,wordBreak:"break-word",..."form_editor"===w?{width:"100%",paddingBottom:10,cursor:"grab",display:"flex",alignItems:"center"}:{width:_.isMobile?"100%":"calc(100% + 8px)",marginLeft:_.isMobile?void 0:-8,cursor:"pointer",background:_.isMobile?"light"===e.mode?e.accentColors.gray[30]:e.accentColors.gray[100]:t,padding:"6px 8px",height:""===U?34:void 0}},detailedSelector:{border:"none",padding:0},conditionalButtonBorder:{outlineStyle:"solid",outlineWidth:2,outlineColor:e.icon.uiBlueTertiary,borderRadius:4},selectorButton:{..."form_editor"===w&&{width:"100%",display:"flex",borderRadius:6,padding:"5px 10px",marginTop:8}},selectorButtonPressed:{background:"form_editor"===w?e.buttonPressedBackground:void 0},selectorButtonHovered:{background:"form_editor"===w?e.buttonHoveredBackground:void 0}}}),[_.isMobile,w,D,K,U]),de=(0,r.useRef)(null),ce=(0,o(589704).A)(!0);return(0,o(361837).NN)(w)?(0,x.jsx)("div",{onMouseMove:re,onMouseLeave:ie,ref:e=>{R(e),E(e)},style:se.container,onClick:()=>{o(205670).default.isEditingFormQuestion()&&c().clear({environment:B,preventDismissMobileKeyboard:!0})},children:(0,x.jsxs)(y().A,{hoveredStyle:se.selectorButtonHovered,pressedStyle:se.selectorButtonPressed,style:se.selectorButton,disallowTabbing:!0,children:[(0,x.jsx)(o(823519).a,{name:`form-question-${null==C?void 0:C.id}`,required:W,isDisabled:F,selectorSize:"large",style:se.detailedSelector,isSelected:O,label:"form_editor"===w?null:U,value:"checkbox",onChange:le,"aria-describedby":`form-question-title-${null==C?void 0:C.id} form-description-${null==C?void 0:C.id}`}),"form_editor"===w?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o(441292).A,{debugName:"FormCheckboxProperty Input",capture:H,allowMenuList:!0,allowEsc:!0,allowCopyPaste:!0,allowUndo:!0,children:(0,x.jsx)(v().A,{value:U,focus:H,style:{width:"100%",..."form_editor"===w?{}:{pointerEvents:"none"}},format:v().C.Transparent,disabled:P,textarea:!0,autosize:!0,autosizeMinHeight:26,placeholder:"form_editor"===w&&""===U?j.formatMessage({id:"formCheckboxProperty.placeholderText",defaultMessage:"Checkbox label (optional)"}):"",inputStyle:{width:"100%",opacity:_.isMobile?1:void 0},onMouseDown:e=>e.stopPropagation(),onChange:e=>{q(e.target.value)},onClick:()=>{Q(!0)},onBlur:ne,onSubmit:ne})}),oe&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(b().A,{placement:m().W.Top,textWrap:!0,renderTooltip:()=>(0,x.jsx)(o(546172).ML,{featureAvailability:G,isAdmin:ee}),disableTooltip:te,render:e=>(0,x.jsx)("div",{...ce,children:(0,x.jsx)(g().A,{ref:de,style:{width:24,height:24,flexGrow:0,...te&&se.conditionalButtonBorder},onClick:()=>{if("unavailable"===(null==G?void 0:G.type)&&"product"===(null==J?void 0:J.type))f().K(B,{upsell:J,from:"forms_conditional_logic"});else if("available"===(null==G?void 0:G.type))return ae()},icon:o(808971).C,iconStyle:{width:16,height:16},ariaLabel:j.formatMessage({defaultMessage:"Add conditional logic",id:"FormCheckboxProperty.ConditionalLogicIcon.title"}),...e})})}),te&&(0,x.jsx)(o(629443).O,{buttonRef:de})]})]}):null]})}):null}));var C=()=>o(680369);const w=(0,C().wt)("chevronUpDown",{viewBox:"0 0 20 20",svg:(0,x.jsx)("path",{d:"M10 3.20801C10.1185 3.20801 10.2279 3.23307 10.3281 3.2832C10.4329 3.32878 10.5332 3.39714 10.6289 3.48828L14.5186 7.2207C14.5915 7.29362 14.6507 7.37793 14.6963 7.47363C14.7464 7.56934 14.7715 7.67643 14.7715 7.79492C14.7715 7.94987 14.735 8.08887 14.6621 8.21191C14.5892 8.3304 14.4912 8.42383 14.3682 8.49219C14.2497 8.56055 14.1198 8.59473 13.9785 8.59473C13.8828 8.59473 13.7826 8.57878 13.6777 8.54688C13.5775 8.51042 13.484 8.44889 13.3975 8.3623L10 5.04004L6.60254 8.3623C6.51595 8.45345 6.42253 8.51497 6.32227 8.54688C6.22201 8.57878 6.12174 8.59473 6.02148 8.59473C5.87565 8.59473 5.74349 8.56055 5.625 8.49219C5.50651 8.42383 5.41081 8.3304 5.33789 8.21191C5.26497 8.08887 5.22852 7.94987 5.22852 7.79492C5.22852 7.67643 5.2513 7.56934 5.29688 7.47363C5.34701 7.37793 5.41081 7.29362 5.48828 7.2207L9.37109 3.48828C9.4668 3.39714 9.56706 3.32878 9.67188 3.2832C9.77669 3.23307 9.88607 3.20801 10 3.20801ZM10 16.9209C9.88607 16.9209 9.77669 16.8958 9.67188 16.8457C9.56706 16.8001 9.4668 16.7318 9.37109 16.6406L5.48828 12.9082C5.41081 12.8307 5.34701 12.7441 5.29688 12.6484C5.2513 12.5527 5.22852 12.4456 5.22852 12.3271C5.22852 12.1722 5.26497 12.0355 5.33789 11.917C5.41081 11.7985 5.50651 11.7051 5.625 11.6367C5.74349 11.5684 5.87565 11.5342 6.02148 11.5342C6.12174 11.5342 6.22201 11.5501 6.32227 11.582C6.42253 11.6139 6.51595 11.6755 6.60254 11.7666L10 15.0889L13.3975 11.7666C13.484 11.68 13.5775 11.6208 13.6777 11.5889C13.7826 11.5524 13.8828 11.5342 13.9785 11.5342C14.1198 11.5342 14.2497 11.5684 14.3682 11.6367C14.4912 11.7051 14.5892 11.7985 14.6621 11.917C14.735 12.0355 14.7715 12.1722 14.7715 12.3271C14.7715 12.4456 14.7464 12.5527 14.6963 12.6484C14.6507 12.7441 14.5915 12.8307 14.5186 12.9082L10.6289 16.6406C10.5332 16.7318 10.4329 16.8001 10.3281 16.8457C10.2279 16.8958 10.1185 16.9209 10 16.9209Z"})});var k=()=>o(227083),M=()=>o(213234),P=()=>o(632777);const j=(0,r.forwardRef)((function(e,t){const i=(0,o(15123).QK)(e),{property:s,store:c,formQuestionStore:u,disabled:p,format:m}=e;if(!u)throw new Error("FormDateProperty: formQuestionStore is required");const{propertySchema:f,baseStyles:h}=(0,r.useContext)(S().L8),y=(0,n().v3)(),g=(0,M().H)(),v=(0,l().K8)((()=>{var e;return null===(e=g.getFormState())||void 0===e?void 0:e.collectionSchema}),[g]),b=f,F=(0,o(609319).nr)(c,null==b?void 0:b.type,s,y.currentUser.id),C=null==b?void 0:b.date_format,j=null==b?void 0:b.time_format,B=(0,a().IS)((e=>({buttonStyle:{...h.buttonStyle,borderRadius:6,marginTop:8,..."form_editor"===m?{cursor:"grab",color:e.text.quaternary,boxShadow:`0 0 0 1px ${e.stroke.secondary} inset`}:{cursor:"pointer",color:F?e.text.primary:e.text.tertiary}},hoveredStyle:h.buttonHoveredStyle??{},pressedStyle:h.buttonPressedStyle??{},chevronIcon:{width:20,fill:e.icon.tertiary,marginRight:-4,..."form_editor"===m?{fill:e.icon.quaternary}:{}}})),[h.buttonHoveredStyle,h.buttonPressedStyle,h.buttonStyle,m,F]),_=p?(0,x.jsx)(d().sA,{...k().yh.editorPlaceholder}):(0,x.jsx)(d().sA,{...k().yh.viewerEmptyPlaceholder});return(0,x.jsx)(P().P,{ref:t,editButtonClickProps:p?void 0:i,style:B.buttonStyle,hoveredStyle:B.hoveredStyle,pressedStyle:B.pressedStyle,formQuestionStore:u,collectionSchema:v,children:(0,x.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[F?(0,x.jsx)(o(307680).b,{dateValue:F,dateFormat:C,timeFormat:j,store:c,property:s}):_,w(B.chevronIcon)]})})}));o(725707),o(107652),o(491955),o(403517);var B=()=>o(110266);const _=(0,C().wt)("collectionFormAudioFile",{viewBox:"0 0 24 24",svg:(0,x.jsx)("g",{children:(0,x.jsx)("path",{d:"M3.572 14.635a.827.827 0 01-.605-.254.877.877 0 01-.244-.615v-3.623c0-.235.081-.44.244-.616a.812.812 0 01.605-.263c.248 0 .456.088.625.263a.86.86 0 01.254.616v3.623a.86.86 0 01-.254.615.85.85 0 01-.625.254zm3.37 3.935a.838.838 0 01-.616-.254.855.855 0 01-.244-.615V6.207c0-.24.081-.446.244-.615a.823.823 0 01.615-.264c.248 0 .453.088.616.264a.84.84 0 01.254.615v11.494a.838.838 0 01-.254.615.817.817 0 01-.616.254zm3.359 3.79a.806.806 0 01-.606-.255.834.834 0 01-.244-.615V2.418a.87.87 0 01.244-.625.806.806 0 01.606-.254.85.85 0 01.625.254.85.85 0 01.254.625V21.49a.818.818 0 01-.254.616.85.85 0 01-.625.253zm3.369-5.06a.855.855 0 01-.615-.243.855.855 0 01-.245-.616V7.467c0-.241.082-.446.245-.615a.838.838 0 01.615-.254c.24 0 .446.084.615.254.17.169.254.374.254.615v8.974a.842.842 0 01-.254.616.855.855 0 01-.615.244zm3.37 2.91a.85.85 0 01-.87-.868V4.566c0-.24.081-.446.244-.615a.833.833 0 01.625-.264.79.79 0 01.605.264c.17.17.254.375.254.615v14.776c0 .24-.084.446-.253.615a.806.806 0 01-.606.254zm3.358-4.814a.818.818 0 01-.615-.253.843.843 0 01-.244-.606V9.371c0-.234.081-.436.244-.605a.803.803 0 01.615-.264c.241 0 .446.088.616.264.169.169.254.37.254.605v5.166a.827.827 0 01-.254.606.838.838 0 01-.616.253z"})})}),I=(0,C().wt)("collectionFormDefaultFile",{viewBox:"0 0 24 24",svg:(0,x.jsx)("g",{children:(0,x.jsx)("path",{d:"M6.795 22.525c-1.048 0-1.84-.27-2.373-.81-.534-.54-.8-1.338-.8-2.393V4.586c0-1.048.266-1.843.8-2.383.534-.547 1.325-.82 2.373-.82h4.707c.41 0 .768.03 1.074.088.306.052.59.153.85.302.26.144.527.355.8.635l5.118 5.205c.286.287.501.563.644.83.15.26.25.55.303.87.052.312.078.696.078 1.152v8.857c0 1.048-.267 1.843-.8 2.383-.534.547-1.325.82-2.374.82h-10.4zm.156-1.923H17.04c.475 0 .83-.12 1.064-.362.235-.24.352-.586.352-1.035V10.73h-5.264c-.696 0-1.217-.173-1.562-.518-.339-.345-.508-.866-.508-1.563V3.297h-4.16c-.475 0-.83.124-1.065.371-.234.247-.351.596-.351 1.045v14.492c0 .45.117.794.351 1.035.235.241.586.362 1.055.362zm6.426-11.563h4.814l-5.38-5.478v4.902c0 .202.042.348.127.44.09.09.237.136.439.136z"})})}),A=(0,C().wt)("collectionFormImageFile",{viewBox:"0 0 24 24",svg:(0,x.jsx)("g",{children:(0,x.jsx)("path",{d:"M20.965 16.597c.033.803-.155 1.414-.565 1.835-.41.42-1.032.63-1.867.63H5.085c-.691 0-1.214-.196-1.568-.589-.355-.393-.543-.974-.565-1.743l3.13-2.806a1.77 1.77 0 01.514-.348 1.372 1.372 0 011.13.008c.193.078.375.194.547.349l1.536 1.386 3.743-3.354c.194-.166.393-.29.598-.373a1.707 1.707 0 011.295.008c.216.083.415.21.598.382l4.922 4.615zM8.597 12.165c-.366 0-.7-.089-1.005-.266a2.052 2.052 0 01-.722-.722 1.961 1.961 0 01-.266-1.005c0-.36.089-.691.266-.996.183-.304.423-.545.722-.722.305-.183.64-.274 1.005-.274.365 0 .697.091.996.274.299.177.537.418.714.722a1.9 1.9 0 01.274.996c0 .366-.092.7-.274 1.005a1.985 1.985 0 01-.714.722 1.919 1.919 0 01-.996.266zm-3.71 7.595c-.897 0-1.575-.227-2.034-.68-.46-.455-.69-1.124-.69-2.01V6.96c0-.885.23-1.555.69-2.009.459-.46 1.137-.689 2.033-.689h14.211c.902 0 1.583.23 2.042.69.46.453.69 1.123.69 2.008v10.11c0 .886-.23 1.555-.69 2.01-.46.453-1.14.68-2.042.68H4.887zm.099-1.627h14.02c.382 0 .675-.1.88-.299.204-.205.307-.506.307-.905V7.101c0-.398-.103-.697-.307-.896-.205-.205-.498-.308-.88-.308H4.986c-.388 0-.684.103-.888.308-.2.199-.3.498-.3.896v9.828c0 .399.1.7.3.905.204.2.5.299.888.299z"})})}),z=(0,C().wt)("collectionFormPdfFile",{viewBox:"0 0 24 24",svg:(0,x.jsx)("g",{children:(0,x.jsx)("path",{d:"M7.762 10.777a.55.55 0 01-.39-.136.528.528 0 01-.147-.391c0-.091.022-.205.068-.342l1.338-3.73c.15-.443.426-.664.83-.664.423 0 .71.221.86.664l1.337 3.73c.04.143.059.257.059.342a.55.55 0 01-.137.39c-.091.092-.225.137-.4.137-.274 0-.456-.166-.547-.498l-.303-.85H8.602l-.284.85c-.084.332-.27.498-.556.498zM8.826 8.59h1.29L9.5 6.637h-.059L8.826 8.59zm4.57-1.387a.642.642 0 01-.459-.176.63.63 0 01-.175-.449c0-.176.058-.322.175-.44a.642.642 0 01.46-.175h2.744c.182 0 .332.058.449.176a.596.596 0 01.176.44.63.63 0 01-.176.448.608.608 0 01-.45.176h-2.744zm0 3.272a.642.642 0 01-.459-.176.63.63 0 01-.175-.45c0-.175.058-.322.175-.439a.642.642 0 01.46-.176h2.744c.182 0 .332.059.449.176a.596.596 0 01.176.44.63.63 0 01-.176.449.608.608 0 01-.45.176h-2.744zm-6.19 7.793v-4.58c0-.417.11-.73.331-.938.228-.215.544-.322.947-.322h7.041c.847 0 1.27.42 1.27 1.26v4.482h-.684l-1.865-2.149a.725.725 0 00-.303-.214 1.05 1.05 0 00-.351-.059c-.222 0-.436.091-.645.274l-1.933 1.709-.772-.704a.85.85 0 00-.576-.234.771.771 0 00-.547.234l-1.23 1.24h-.684zm3.114-2.247c.274 0 .511-.1.713-.302a.976.976 0 00.303-.713.934.934 0 00-.303-.713 1.029 1.029 0 00-.713-.303.922.922 0 00-.722.283 1.015 1.015 0 00-.293.733c0 .273.097.51.293.713a.987.987 0 00.722.303zm-6.699 3.301V4.586c0-1.048.267-1.843.8-2.383.535-.547 1.326-.82 2.374-.82h10.4c1.049 0 1.84.273 2.373.82.534.54.801 1.335.801 2.383v14.736c0 1.055-.267 1.852-.8 2.393-.534.54-1.325.81-2.374.81h-10.4c-1.048 0-1.84-.27-2.373-.81-.534-.54-.8-1.338-.8-2.393zm1.924-.117c0 .45.117.794.351 1.035.235.241.59.362 1.065.362h10.078c.475 0 .83-.12 1.064-.362.235-.24.352-.586.352-1.035V4.713c0-.456-.117-.804-.351-1.045-.235-.247-.59-.371-1.065-.371H6.961c-.475 0-.83.124-1.065.371-.234.24-.351.59-.351 1.045v14.492z"})})}),T=(0,C().wt)("collectionFormSheetFile",{viewBox:"0 0 24 24",svg:(0,x.jsx)("g",{children:(0,x.jsx)("path",{d:"M2.778 10.488v-1.56h18.51v1.56H2.779zm0 4.615v-1.56h18.51v1.56H2.779zm8.425 3.993V4.935h1.594v14.16h-1.594zm-6.317.664c-.896 0-1.574-.227-2.033-.68-.46-.455-.69-1.124-.69-2.01V6.96c0-.885.23-1.555.69-2.009.459-.46 1.137-.689 2.033-.689h14.211c.902 0 1.583.23 2.042.69.46.453.69 1.123.69 2.008v10.11c0 .886-.23 1.555-.69 2.01-.46.453-1.14.68-2.042.68H4.887zm.1-1.627h14.02c.382 0 .675-.1.88-.299.204-.205.307-.506.307-.905V7.101c0-.398-.103-.697-.307-.896-.205-.205-.498-.308-.88-.308H4.986c-.388 0-.684.103-.888.308-.2.199-.3.498-.3.896v9.828c0 .399.1.7.3.905.204.2.5.299.888.299z"})})}),L=(0,C().wt)("collectionFormSlidesFile",{viewBox:"0 0 24 24",svg:(0,x.jsx)("g",{children:(0,x.jsx)("path",{d:"M5.949 21.403c-.897 0-1.575-.227-2.034-.68-.46-.454-.689-1.127-.689-2.017v-8.534c0-.89.23-1.563.689-2.017.46-.453 1.137-.68 2.034-.68h12.094c.896 0 1.574.23 2.034.689.464.453.697 1.123.697 2.008v8.534c0 .885-.233 1.555-.697 2.008-.46.46-1.138.69-2.034.69H5.949zm.1-1.627h11.894c.382 0 .675-.102.88-.307.21-.199.316-.5.316-.905v-8.25c0-.404-.105-.706-.316-.905-.204-.205-.498-.307-.88-.307H6.048c-.387 0-.683.102-.888.307-.2.199-.299.5-.299.904v8.251c0 .404.1.706.3.905.204.205.5.307.887.307zM5.051 6.122c.061-.393.197-.698.407-.913.216-.216.545-.324.988-.324h11.106c.443 0 .77.108.98.324.215.215.354.52.415.913H5.052zm1.694-2.4c.022-.37.14-.65.357-.838.22-.193.53-.29.93-.29h7.935c.398 0 .705.097.921.29.216.188.34.468.374.839H6.746z"})})}),R=(0,C().wt)("collectionFormVideoFile",{viewBox:"0 0 24 24",svg:(0,x.jsx)("g",{children:(0,x.jsx)("path",{d:"M4.886 19.76c-.896 0-1.574-.227-2.033-.68-.46-.455-.69-1.124-.69-2.01V6.96c0-.885.23-1.555.69-2.009.459-.46 1.137-.689 2.033-.689h14.211c.902 0 1.583.23 2.042.69.46.453.69 1.123.69 2.008v10.11c0 .886-.23 1.555-.69 2.01-.46.453-1.14.68-2.042.68H4.887zm.1-1.627h14.02c.382 0 .675-.1.88-.299.204-.205.307-.506.307-.905V7.101c0-.398-.103-.697-.307-.896-.205-.205-.498-.308-.88-.308H4.986c-.388 0-.684.103-.888.308-.2.199-.3.498-.3.896v9.828c0 .399.1.7.3.905.204.2.5.299.888.299zm5.553-2.872a.759.759 0 01-.448.116.62.62 0 01-.365-.166c-.1-.1-.15-.23-.15-.39V9.2a.5.5 0 01.15-.382.59.59 0 01.373-.157.692.692 0 01.44.1l4.615 2.73a.566.566 0 01.266.324.64.64 0 010 .407.558.558 0 01-.266.323l-4.615 2.715z"})})});var D=()=>o(401548),E=()=>o(220413),K=()=>o(975392),H=()=>o(76394),Q=()=>o(575015),U=()=>o(663539),q=()=>o(502852);const V=(0,d().YK)({deleteFileButtonAriaLabel:{id:"FormFileProperty.deleteFileButtonAriaLabel",defaultMessage:"Delete file"},fileTypeNotSupported:{id:"FormFileProperty.fileTypeNotSupported",defaultMessage:"Sorry, this file type is not supported."}}),$=(0,r.forwardRef)((function(e,t){const{store:i,property:s}=e,c=(0,r.useRef)(null),u=(0,n().v3)(),p=(0,M().H)(),{filePropertyIdToFormFiles:m,formBlockStore:f}=(0,l().K8)((()=>{const e=p.getFormState();return{filePropertyIdToFormFiles:null==e?void 0:e.filePropertyIdToFormFiles,formBlockStore:null==e?void 0:e.formBlockStore}}),[p]),h=(0,l().K8)((()=>{var e;return(null===(e=p.getFormState())||void 0===e?void 0:e.maxFileSizeMb)??B().$5}),[p]),y=(0,a().IS)((e=>({formFileContainer:{marginTop:12,marginBotton:18}})),[]),g=(0,r.useCallback)((e=>{p.updateFilePropertyIdToFormFiles(s,(t=>[e,...t]))}),[p,s]),v=(0,r.useCallback)((e=>{p.updateFilePropertyIdToFormFiles(s,(t=>t.filter((t=>t.globalFileUploadStoreKey!==e))))}),[p,s]),b=(0,o(177974).FF)({blockStore:i,propertyId:s,environment:u,onSingleFileStartCallback:e=>{g(e)},onSingleFileErrorCallback:e=>{v(e),Q().D6({label:(0,x.jsx)(d().sA,{id:"FormFileProperty.fileUpload.uploadFailed",defaultMessage:"File upload failed."})})},formMetadata:{spaceId:null==f?void 0:f.getSpaceId(),formId:null==f?void 0:f.id}}),S=e=>{const t=U().r0(e,h);if(!t.canUpload)switch(t.reason){case"fileSizeTooLarge":Q().D6({label:(0,x.jsx)(d().sA,{id:"FormFileProperty.invalidFileUpload.fileSizeTooLargeErrorMessage",defaultMessage:"Sorry, this file is too large."})});break;case"fileSizeIsZero":Q().D6({label:(0,x.jsx)(d().sA,{id:"FormFileProperty.invalidFileUpload.fileSizeIsZeroErrorMessage",defaultMessage:"Sorry, that file is invalid."})});break;case"fileExtensionNotAllowed":Q().D6({label:(0,x.jsx)(d().sA,{...V.fileTypeNotSupported})});break;default:(0,H().ub)(t.reason)}return t.canUpload};return f?(0,x.jsx)(O,{...e,uploadButtonRef:c,uploadButtonOnClick:async()=>{const e=await U().dA({environment:u,supportsMobileNativeFileUpload:!1,multiple:!0});e.length&&(e=>{const t=((null==m?void 0:m[s])??[]).length;return!(e.numNewFiles+t>B().Bz&&(Q().D6({label:(0,x.jsx)(d().sA,{id:"FormFileProperty.fileUpload.maxFilesPerQuestionLimitReached",defaultMessage:"The maximum number of files for this question has been reached."})}),1))})({numNewFiles:e.length})&&e.every(S)&&b(e),c.current&&c.current.focus()},onDropFile:e=>{if("invalidFileDrop"===e.type)return Q().D6({label:(0,x.jsx)(d().sA,{...V.fileTypeNotSupported})}),null;S(e.file)&&b([e.file])},numAdditionalFilesDroppable:B().Bz-((null==m?void 0:m[s])??[]).length,maxFileSizeMb:h,children:(0,x.jsx)("div",{style:y.formFileContainer,children:(null==m?void 0:m[s])&&(null==m?void 0:m[s].map(((e,t)=>{return(0,x.jsx)(Y,{formFile:e,deleteFile:(o=t,()=>{p.updateFilePropertyIdToFormFiles(s,(e=>{const t=e??[];if(o<0||o>=t.length)return t;const r=[...t];return r.splice(o,1),r}))})},t);var o})))})}):(0,x.jsx)(x.Fragment,{})})),N=(0,r.forwardRef)((function(e,t){const{store:r}=e,i=(0,n().v3)(),a=i.currentUser.id,s=null==r?void 0:r.getSpaceId(),d=(0,h()._X)({name:"form_filesize",spaceId:s,userId:a,amount:"unknown"}),c=void 0===d||"unlimited"===d.limit.amount?B().$5:d.limit.amount,u=(0,l().K8)((()=>!i.device.isMobileNative||(0,o(481148).mM)({environment:i})),[i]),p=(0,l().K8)((()=>(0,o(548694).s7)(i)&&u?null==d?void 0:d.upsell:void 0),[i,u,d]);return(0,x.jsx)(O,{...e,uploadButtonOnClick:()=>{throw new Error("FormFilePropertyEditor does not support uploading files.")},onDropFile:()=>{throw new Error("FormFilePropertyEditor does not support uploading files.")},numAdditionalFilesDroppable:0,maxFileSizeMb:c,upsell:p})})),O=(0,r.forwardRef)((function(e,t){const{property:r,disabled:i,uploadButtonOnClick:l,uploadButtonRef:s,onDropFile:c,numAdditionalFilesDroppable:u,maxFileSizeMb:p,upsell:m,format:f,store:h,formQuestionStore:y}=e,{isMobile:g}=(0,n().Y0)(),v=(0,n().v3)(),b=(0,a().IS)((e=>{const t=i?"transparent":"light"===e.mode?e.accentColors.gray[30]:e.accentColors.translucentGray[100];return{dropzone:{borderRadius:12,background:(0,E().Qr)([E().Ay.blueWithAlpha(.14),(0,D().X4)(e.contentBackground,.5)])},container:{display:"flex",flexDirection:g?"column":"row",marginTop:i?0:8,alignItems:"center",borderRadius:12,padding:g?"8px 8px 0px 8px":"8px",background:t},uploadButton:{borderRadius:6,borderColor:e.outlineButtonBorder,height:36,padding:12,fontSize:16,background:e.whiteButtonBackground,width:g?"100%":"auto",cursor:"form_editor"===f?"grab":"pointer"},uploadButtonHovered:{borderRadius:6,borderColor:"dark"===e.mode?(0,D().X4)(E().CM.light.lightgray,.3):(0,D().X4)(E().CM.light.darkgray,.3),height:36,padding:12,fontSize:16,backgroundColor:e.whiteButtonBackground},uploadButtonPressed:{backgroundColor:e.outlineButtonHoveredBackground},uploadButtonIcon:{width:16,height:16}}}),[g,i,f]);return(0,x.jsxs)(o(412576).V,{type:o(342285).cM,dropTargetKey:`formFileDropTarget-${r}-${i}`,onDropFile:c,dropzoneStyle:b.dropzone,supportMultipleFiles:!0,numFilesLimit:u,store:h,children:[(0,x.jsxs)("div",{style:b.container,children:[(0,x.jsx)(o(286404).A,{size:"lg",style:b.uploadButton,hoveredStyle:b.uploadButtonHovered,pressedStyle:b.uploadButtonPressed,icon:o(219087).Y,iconStyle:b.uploadButtonIcon,disabled:i,disabledFeedback:!0,onClick:l,ref:s,"aria-describedby":`form-question-${null==y?void 0:y.id} form-description-${null==y?void 0:y.id} form-file-restrictions-${null==y?void 0:y.id}`,children:(0,x.jsx)(d().sA,{id:"FormFileProperty.uploadButton",defaultMessage:"Upload"})}),(0,x.jsx)(X,{formQuestionStore:y,maxFileSizeMb:p,isMobile:g,disabled:i}),(0,x.jsx)(W,{upsell:m,environment:v})]}),e.children]})}));function W(e){const{upsell:t,environment:r}=e,i=(0,a().IS)((e=>({upsellButton:{display:"flex",alignItems:"center",fontSize:14,fontWeight:o(31448).Wy.medium,color:e.blueColor,padding:"4px 8px",borderRadius:6,marginBottom:2,marginTop:-1},upsellIcon:{width:14,height:14,marginRight:4},upsellButtonText:{marginTop:-1}})),[]);return t?(0,x.jsx)(b().A,{delayThreshold:120,placement:m().W.Top,renderTooltip:()=>{if("product"===t.type)return(0,x.jsx)("div",{style:{maxWidth:500},children:(0,x.jsx)(d().sA,{id:"FormFileProperty.increaseLimit.tooltip",defaultMessage:"Upgrade to increase the file size limit to {fileSizeLimitMB} MB.",values:{fileSizeLimitMB:t.limit.amount}})})},disableTooltip:"product"!==t.type,originGap:6,render:e=>(0,x.jsxs)(y().A,{...e,style:i.upsellButton,onMouseDown:e=>{(0,q().SQ)({event:e,context:q().y$.EditorMouseDown,callback:K().D_})},onClick:e=>{(0,f().K)(r,{from:"forms_increase_file_limit",upsell:t})},children:[(0,o(430041).m)(i.upsellIcon),(0,x.jsx)("div",{style:i.upsellButtonText,children:(0,x.jsx)(d().sA,{id:"FormFileProperty.increaseLimit",defaultMessage:"Increase limit"})})]})}):null}function X(e){const{formQuestionStore:t,maxFileSizeMb:r,isMobile:i,disabled:n}=e,l=(0,a().IS)((e=>({captionContainer:{width:"auto"},caption:{textAlign:"left",fontSize:14,color:e.text.secondary},captionMobileOverride:{textAlign:"center",fontSize:12},captionDisabledOverride:{opacity:.5}})),[]);return(0,x.jsx)("div",{style:l.captionContainer,id:`form-file-restrictions-${null==t?void 0:t.id}`,children:(0,x.jsx)(o(725460).A,{shouldWrapCaption:!0,caption:(0,x.jsx)(d().sA,{id:"FormFileProperty.fileRestrictions",defaultMessage:"Size limit: {fileSizeLimitMB} MB. File limit: {fileLimit}.",values:{fileSizeLimitMB:r,fileLimit:B().Bz}}),captionStyle:{...l.caption,...i?l.captionMobileOverride:{},...n?l.captionDisabledOverride:{}}})})}function Y(e){const{formFile:t,deleteFile:r}=e,{fileName:i}=t,n=(0,d().tz)(),s=(0,l().K8)((()=>{var e;if(t.globalFileUploadStoreKey)return null===(e=o(265987).default.getKeyState(t.globalFileUploadStoreKey))||void 0===e?void 0:e.progressPercent}),[t.globalFileUploadStoreKey]),c=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",paddingLeft:8,paddingRight:8,paddingTop:4,paddingBottom:4,fontSize:16,borderRadius:10},filePreview:{height:40,width:40,borderRadius:6,fontSize:16,borderStyle:"solid",borderColor:"dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[100],borderWidth:1,marginRight:12,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0},fileIcon:{height:18,width:18,fill:e.mediumIconColor},fileName:{marginRight:14,color:e.darkTextColor,whiteSpace:"nowrap",overflowX:"hidden",textOverflow:"ellipsis",minWidth:0},deleteFileButton:{marginLeft:"auto",height:20,width:20}})),[]),u=(0,o(185912).QC)(t.fileName),p=u?function(e){const t=B().Z5[e.toUpperCase()];switch(t){case"image":return A;case"video":return R;case"audio":return _;case"pdf":return z;case"slides":return L;case"sheet":return T;case"other":case"cad":return I;default:(0,H().HB)(t)}}(u)(c.fileIcon):void 0;return(0,x.jsxs)("div",{style:c.container,children:[void 0!==s?(0,x.jsx)("div",{style:c.filePreview,children:(0,x.jsx)(o(966789).A,{legacySize:18})}):(0,x.jsx)("div",{style:c.filePreview,children:p}),(0,x.jsx)("div",{style:c.fileName,children:i}),(0,x.jsx)(g().A,{icon:o(52531).I,onClick:r,style:c.deleteFileButton,ariaLabel:n.formatMessage(V.deleteFileButtonAriaLabel)})]})}var Z=()=>o(878406);const G=(0,r.forwardRef)((function(e,t){const o=(0,Z().Dd)(e,t),i=(0,M().H)(),n=(0,r.useCallback)(((t,o)=>"form_editor"===e.format?{cursor:"grab",boxShadow:`0 0 0 1px ${t.stroke.secondary} inset`}:{cursor:"pointer",paddingTop:o?0:8,paddingBottom:o?0:8}),[e.format]),a="form_editor"===e.format?J:ee,s=(0,l().K8)((()=>{var e;return null===(e=i.getFormState())||void 0===e?void 0:e.collectionSchema}),[i]);return(0,x.jsx)(Z().de,{...o,EmptyComponent:a,collectionStore:e.collectionStore,quickActionButtons:void 0,formQuestionStore:e.formQuestionStore,generateButtonStyles:n,collectionSchema:s})}));function J(){const e=(0,a().IS)((e=>({selectedMessageText:{width:"100%",display:"inline-flex",justifyContent:"space-between",color:e.text.quaternary},chevronIcon:{width:20,fill:e.icon.quaternary,marginRight:-4}})),[]);return(0,x.jsxs)("div",{style:e.selectedMessageText,children:[(0,x.jsx)(d().sA,{...k().yh.editorPlaceholder}),(0,x.jsx)("div",{children:w(e.chevronIcon)})]})}function ee(){const e=(0,a().IS)((e=>({selectedMessageText:{width:"100%",display:"inline-flex",justifyContent:"space-between",color:e.text.tertiary},chevronIcon:{width:20,fill:e.icon.tertiary,marginRight:-4}})),[]);return(0,x.jsxs)("div",{style:e.selectedMessageText,children:[(0,x.jsx)(d().sA,{...k().yh.viewerEmptyPlaceholder}),(0,x.jsx)("div",{children:w(e.chevronIcon)})]})}var te=()=>o(659030);function oe(e,t){var i;const{format:p,property:m,store:f,formQuestionStore:h,disabled:y}=e,g=(0,d().tz)(),b=(0,a().DP)(),F=(0,n().v3)(),C=(0,M().H)(),{propertySchema:w}=(0,r.useContext)(S().L8),P=(0,r.useRef)(!1),j=(0,l().K8)((()=>(0,s().q4_)(f.getPropertyValue(m))??""),[m,f]),[B,_]=(0,r.useState)(j),[I,A]=(0,r.useState)(!1),{baseStyles:z}=(0,r.useContext)(S().L8),T=(0,l().K8)((()=>{return!!w&&(("title"===w.type||"text"===w.type)&&(null==h||null===(e=h.getPropertyTypeSpecificConfig(w.type))||void 0===e?void 0:e.longAnswer));var e}),[h,w]),L=(0,l().K8)((()=>{const e=C.getFormState();return!!e&&Boolean(e.aliasStore)}),[C]),R=(0,l().K8)((()=>null==h?void 0:h.isRequired()),[h]),D=(0,r.useCallback)((e=>{let t=e.target.value;t.length>te().d0&&(t=t.slice(0,te().d0),e.target.value=t,Q().D6({label:g.formatMessage(te().Gi.characterLimitReached)})),_(t),P.current&&u().createAndCommit({userAction:"FormTextProperty.handleTextQuestionEdit",environment:F,canUndo:!0,perform:e=>{o(448316).R9({environment:F,store:f.getPropertyStore(m),value:(0,s().x9d)(t),transaction:e})}})}),[F,P,m,f,g]),H=(0,r.useCallback)((e=>{P.current=!0,A(!1),D(e),L&&c().clear({environment:F})}),[D,F,L]),U=`\n        .formTextInput::placeholder {\n            color: ${"form_editor"===p?b.text.quaternary:b.text.tertiary};\n            opacity: 1;\n        }\n    `;return(0,x.jsxs)("div",{style:{margin:-8,padding:8},children:[(0,x.jsx)("style",{children:U}),(0,x.jsx)(o(655830).A,{debugName:"FormPropertyWithTextInput",capture:I&&!y,onDelete:K().D_,onSpace:K().D_,onBackspace:K().D_,onLeft:K().D_,onRight:K().D_,onUp:K().D_,onDown:K().D_,onSelectAll:K().D_,onRedo:K().D_,onUndo:K().D_,onCut:K().D_,onCopy:K().D_,onPaste:K().D_,onKeypress:K().D_,onTab:K().D_,onEnter:K().D_,children:(0,x.jsx)(v().A,{"aria-labelledby":`form-question-title-${null==h?void 0:h.id}`,"aria-describedby":`form-description-${null==h?void 0:h.id}`,inputElementAttributes:{required:R},textareaElementAttributes:{required:R},value:B,format:v().C.Default,inputClassName:"formTextInput",textarea:T,autosize:T,autosizeMinHeight:T?86:void 0,onChange:D,onBlur:H,disabled:y,onFocus:()=>{L&&c().setSelection({store:f.getPropertyStore(m)}),A(!0)},placeholder:y?g.formatMessage(k().yh.editorPlaceholder):g.formatMessage(k().yh.viewerEmptyPlaceholder),style:{padding:0,fontSize:16,borderRadius:6,backgroundColor:E().Ay.transparent,..."form_editor"===p?{marginTop:8,boxShadow:`0 0 0 1px ${b.stroke.secondary} inset`,cursor:"grab"}:{marginTop:12,boxShadow:null===(i=z.buttonStyle)||void 0===i?void 0:i.boxShadow,lineHeight:1.75}},inputStyle:{backgroundColor:E().Ay.transparent,..."form_editor"===p?{padding:"9px 10px",pointerEvents:"none"}:{padding:"5px 10px"}}})})]})}const re=(0,r.forwardRef)(oe);var ie=()=>o(388732),ne=()=>o(626911),le=()=>o(568649),ae=()=>o(331511);function se(e){const{relationItemPointers:t,store:o,relationValue:r,property:i,propertySchema:n,tokenFormat:l}=e;return(0,x.jsx)(x.Fragment,{children:t.map((e=>{let{pointer:t,pageStore:a}=e;return(0,x.jsx)(de,{relatedPagePointer:t,relatedPageStore:a,relationValue:r,store:o,tokenFormat:l,propertySchema:n,property:i},t.id)}))})}function de(e){const{relatedPagePointer:t,relatedPageStore:o,store:i,relationValue:l,property:s,propertySchema:c}=e,p=(0,n().v3)(),m=(0,d().tz)(),f=(0,a().IS)((()=>({tokenWrapper:{display:"flex",alignItems:"center",gap:4,padding:4,width:"100%",borderRadius:12}})),[]),h=(0,r.useCallback)(((e,t)=>{const o=e.filter((e=>e.id!==t.id));u().createAndCommit({userAction:"RelationBlockPropertyValue.handleRemoveRelationClick",environment:p,canUndo:!0,perform:e=>{ne().Iq({store:i,propertyId:s,value:o,environment:p,relatedPageId:t.id,propertySchema:c,transaction:e,isUnthrottled:!1})}})}),[p,s,c,i]);return(0,x.jsxs)("div",{style:f.tokenWrapper,children:[(0,x.jsx)(le().a,{recordPointer:t,parentStore:i,style:{background:"none"},noUnderline:!0,linkify:"whenReadOnly"},t.id),(0,x.jsx)(g().A,{ariaLabel:m.formatMessage({id:"FormRelationProperty.removeRelation",defaultMessage:"Remove relation"}),icon:ie().l,style:{width:20,height:20},iconStyle:{width:8,height:8},onClick:()=>h(l,o)})]},t.id)}const ce=(0,r.forwardRef)((function(e,t){const i=(0,ae().Dd)(e,t),{buttonStyle:n,editButtonClickProps:s,property:c,onContextMenu:u,store:p,quickActionButtons:m,formQuestionStore:f}=i,{disabled:h,format:y}=e,g=(0,M().H)(),{propertySchema:v,baseStyles:b}=(0,r.useContext)(S().L8),F=v,C=(0,o(250786).Ug)(null==b?void 0:b.tokenFormat),j=(0,l().K8)((()=>{var e;return null===(e=g.getFormState())||void 0===e?void 0:e.collectionSchema}),[g]),B=(0,ae().jD)({store:p,propertySchema:F,property:c}),_=(0,ae().Tn)({store:p,propertySchema:F,relationValue:B}),I=0===_.length,A=(0,a().IS)((e=>({buttonStyle:{...b.buttonStyle,...n,..."form_editor"===y?{boxShadow:`0 0 0 1px ${e.stroke.secondary} inset`,cursor:"grab"}:{}},buttonPressedStyle:b.buttonPressedStyle??{},buttonHoveredStyle:b.buttonHoveredStyle??{},selectedMessageText:"form_editor"===y?{color:e.text.quaternary}:{color:I?e.text.tertiary:e.text.primary},chevronIcon:{width:20,fill:e.icon.tertiary,marginRight:-4,..."form_editor"===y?{fill:e.icon.quaternary}:{}}})),[b.buttonHoveredStyle,b.buttonPressedStyle,b.buttonStyle,n,y,I]),z=(0,r.useMemo)((()=>F&&B&&0!==_.length?(0,x.jsx)(se,{relationItemPointers:_,store:p,tokenFormat:C,relationValue:B,property:c,propertySchema:F}):null),[c,F,_,B,p,C]),T=(0,l().K8)((()=>"form_editor"===y?(0,x.jsx)(d().sA,{...k().yh.editorPlaceholder}):I?(0,x.jsx)(d().sA,{...k().yh.viewerEmptyPlaceholder}):(0,x.jsx)(d().sA,{id:"FormRelationProperty.nonEmptyMsg",defaultMessage:"{numSelected} selected",values:{numSelected:_.length}})),[y,I,_.length]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(P().P,{ref:t,editButtonClickProps:h?void 0:s,onContextMenu:u,style:A.buttonStyle,hoveredStyle:A.buttonHoveredStyle,pressedStyle:A.buttonPressedStyle,quickActionButtons:m,formQuestionStore:f,collectionSchema:j,children:(0,x.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},children:[(0,x.jsx)("div",{style:A.selectedMessageText,children:T}),(0,x.jsx)("div",{children:w(A.chevronIcon)})]})}),z&&(0,x.jsx)("div",{style:{paddingTop:8},children:z})]})})),ue=(0,r.forwardRef)((function(e,t){throw new Error("Unsupported form property type")})),pe=r.forwardRef((function(e,t){const{property:o,format:r,propertyType:i,innerProps:n}=e;if(!i)return null;const l=me[r][i];return null===l?null:(0,x.jsx)(l,{ref:t,...n,property:o,format:r})})),me={form_editor:{text:re,title:re,select:i().AK,multi_select:i().AK,relation:ce,date:j,person:G,file:N,number:re,checkbox:F,email:re,url:re,phone_number:re,created_by:ue,created_time:ue,formula:ue,last_edited_by:ue,last_edited_time:ue,last_visited_time:ue,location:ue,rollup:ue,status:ue,verification:ue,auto_increment_id:ue,button:ue,geo_point:ue},form_viewer:{text:re,title:re,select:i().AK,multi_select:i().AK,relation:ce,date:j,person:G,file:$,number:re,checkbox:F,email:re,url:re,phone_number:re,created_by:ue,created_time:ue,formula:ue,last_edited_by:ue,last_edited_time:ue,last_visited_time:ue,location:ue,rollup:ue,status:ue,verification:ue,auto_increment_id:ue,button:ue,geo_point:ue}},fe=pe},298028:(e,t,o)=>{function r(e){return/^(\+\d{1,2}[\s.-])?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/.test(e)}function i(e){return/^[0-9 .()\-\+]{7,}$/.test(e)}o.d(t,{W:()=>r,e:()=>i})},430041:(e,t,o)=>{o.d(t,{m:()=>i});o(242343);var r=o(163643);const i=(0,o(680369).wt)("arrowUpCircled",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M7.993 15.126c.966 0 1.875-.185 2.728-.554a7.218 7.218 0 003.787-3.78 6.788 6.788 0 00.553-2.728c0-.966-.184-1.875-.553-2.727a7.136 7.136 0 00-1.531-2.25 7.219 7.219 0 00-2.256-1.53 6.805 6.805 0 00-2.735-.554c-.966 0-1.875.185-2.727.554a7.241 7.241 0 00-3.774 3.78 6.788 6.788 0 00-.553 2.727c0 .967.184 1.876.553 2.728.37.852.878 1.604 1.525 2.256a7.124 7.124 0 002.256 1.524 6.77 6.77 0 002.727.554zm0-1.395a5.598 5.598 0 01-4.013-1.654 5.735 5.735 0 01-1.21-1.804 5.567 5.567 0 01-.437-2.209c0-.783.146-1.517.438-2.2a5.715 5.715 0 011.21-1.812 5.6 5.6 0 011.797-1.217 5.599 5.599 0 012.208-.438c.789 0 1.525.146 2.208.438a5.66 5.66 0 013.029 3.028 5.55 5.55 0 01.437 2.201c0 .789-.146 1.525-.437 2.209a5.68 5.68 0 01-1.217 1.804 5.68 5.68 0 01-1.805 1.217 5.567 5.567 0 01-2.208.437zM8 11.51a.597.597 0 00.43-.164.584.584 0 00.172-.431V7.688L8.547 6.28l.622.78.759.793a.53.53 0 00.417.177c.16 0 .291-.052.396-.157a.518.518 0 00.164-.39.595.595 0 00-.164-.417L8.485 4.783A.664.664 0 008 4.558c-.173 0-.333.075-.479.225L5.26 7.066a.593.593 0 00-.157.417.538.538 0 00.554.547.557.557 0 00.416-.177l.766-.8.615-.766-.055 1.401v3.227c0 .173.057.317.171.43.114.11.258.165.431.165z"})})},725460:(e,t,o)=>{o.d(t,{A:()=>l});var r=o(242343),i=o(163643);function n(e,t){return(0,i.jsx)(o(932322).Ay,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const l=(0,r.forwardRef)(n)},911421:(e,t,o)=>{o.d(t,{A:()=>l});var r=()=>o(716605),i=()=>o(34662);class n extends(()=>o(129044))().default{getInitialState(){return{isLoaded:!1}}getFormState(){if(this.state.isLoaded)return this.state}getQuestionError(e){if(this.state.isLoaded)return this.state.formQuestionErrorMap.get(e)}updateFormState(e){this.state.isLoaded&&this.setState({...this.state,...e})}updateFilePropertyIdToFormFiles(e,t){var o;if(!this.state.isLoaded)return;const r=null===(o=this.getFormState())||void 0===o?void 0:o.filePropertyIdToFormFiles;this.updateFormState({filePropertyIdToFormFiles:{...r,[e]:t((null==r?void 0:r[e])??[])}})}updateFormErrorMap(e,t){if(!this.state.isLoaded)return;const n=this.state.collectionSchema;if(!n)return;const l=new Map;for(const u of e){var a,s,d;const e=u.id,p=null===(a=u.getConfig())||void 0===a?void 0:a.propertyId;if(!p)continue;const m=null===(s=this.state.draftFormBlockStore)||void 0===s?void 0:s.getProperties()[p],f=(0,r()._g)({schema:n,property:p});if(f){if(u.isRequired()&&null!==(d=this.state.questionIdsVisibleAtLastSubmissionAttempt)&&void 0!==d&&d.includes(e)){const t=this.state.filePropertyIdToFormFiles;if("file"===f.type){var c;if(((null===(c=t[p])||void 0===c?void 0:c.length)??0)<1){l.set(e,"required");continue}}else if("checkbox"===f.type){if(!0!==(0,r().wu)(m)){l.set(e,"required");continue}}else if((0,i().w9s)(m)){l.set(e,"required");continue}}if(!(0,i().w9s)(m)){const r=(0,i().q4_)(m);if("number"===f.type&&!(0,o(361308).kf)(r,t)){l.set(e,"invalid_number");continue}if("email"===f.type&&!(0,o(599932).DT)(r)){l.set(e,"invalid_email");continue}if("url"===f.type&&!(0,o(215458).w)(r)){l.set(e,"invalid_url");continue}if("phone_number"===f.type&&!(0,o(298028).e)(r)){l.set(e,"invalid_phone_number");continue}}}}this.updateFormState({formQuestionErrorMap:l})}}const l=n}}]);