"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[4694],{843589:(e,n,t)=>{t.r(n);t(610931),t(362833);var o=()=>t(762847),r=()=>t(113269),a=()=>t(835944),i=()=>t(182613),s=()=>t(759625),c=()=>t(448316),l=()=>t(84543);function u(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l().createAndCommit({userAction:"legacyTransclusionConsoleActions.createLegacyTransclusion",environment:e,canUndo:!0,perform:u=>{var d;const p=i().default.getCurrentRecordCache();if(!p)throw new Error("No in-memory record cache!");if(function(e){const{environment:n,transaction:t}=e,o=a().A.state;if(!o.isActive)return!1;const{selection:i,simpleTableStore:c}=o,l=r().Il({environment:n,index:i.end.row+1,simpleTableStore:c,transaction:t});return s().zv({store:l,data:{parent_id:c.getParentId(),parent_table:c.getParentTable()},transaction:t}),!0}({environment:e,transaction:u}))return;const m=null===(d=t(782422).ZO())||void 0===d?void 0:d.pointer.spaceId,v=s().Wv({environment:e,type:o().xd.text,inMemoryRecordCache:p,transaction:u,spaceId:m}),h=v.getTitleStore();h&&c().yr({environment:e,store:h,tokens:[['here is a legacy transclusion (a.k.a. "phantom synced block")']],index:0,transaction:u});const g=[];for(let t=0;t<n;t++){const n=s().Wv({environment:e,type:o().xd.numberedList,inMemoryRecordCache:p,transaction:u,spaceId:m}),t=n.getBlockTitleStore();c().yr({environment:e,store:t,tokens:[["this block has a legacy transclusion in it"]],index:0,transaction:u});const r=n.getContentStore();l().applyOperation({transaction:u,store:r,operation:{pointer:r.pointer,path:r.path,command:"set",args:[v.id]}}),g.push(n)}t(164186).LE({environment:e,blocksToInsert:[v,...g],target:i().default.state.stores,transaction:u,replaceEmptyTextBlock:!1}),u.postSubmitCallbacks.push((e=>{e&&console.log("Submitting legacy transclusion transaction failed! You may need to run the server with the NOTION_DEBUG_DISABLE_LEGACY_TRANSCLUSION_VALIDATION environment variable set to a non-empty value.")}))}})}(0,t(497420).exposeDebugEnvironmentValue)("createLegacyTransclusion",(e=>u.bind(null,e)))}}]);