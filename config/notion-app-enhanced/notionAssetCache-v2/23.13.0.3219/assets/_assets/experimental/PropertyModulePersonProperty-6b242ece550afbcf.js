"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[82120],{23082:(e,t,o)=>{o.d(t,{A:()=>n});o(242343);var r=o(163643);const n=function(){return(0,r.jsx)(o(932322).Ay,{title:(0,r.jsx)(o(966789).A,{})})}},116485:(e,t,o)=>{o.d(t,{A5:()=>p,MR:()=>f,Mx:()=>i,Pb:()=>h,WL:()=>g,hg:()=>d,kZ:()=>x,pv:()=>u,vV:()=>y});o(403517);var r=o.n(o(309102)),n=o(242343),l=()=>o(880195),s=()=>o(656473),a=o(163643);const i=n.forwardRef((function(e,t){const{children:n,type:i,gap:d,withBottomPadding:u,style:c,onMouseDown:p,onClick:m,onDoubleClick:y,onContextMenu:h}=e,x=(0,o(248584).n$)(i),g=(0,o(803290).K8)((()=>s().A.getPanelState("peek").isOpen&&"static_sidebar"===s().A.getPanelState("peek").displayStyle),[]);return(0,a.jsx)(l().A,{name:"PageLayout",children:(0,a.jsx)("div",{className:r()("layout",{"layout-wide":"wide"===i,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===i,"layout-side-peek":"side-peek"===i,"layout-center-peek":"center-peek"===i&&!g,"layout-center-peek-with-layout-panel":"center-peek"===i&&g,"layout-home":"home"===i,"layout-home-phone":"home-phone"===i,"layout-home-redesign-desktop":"home-redesign-desktop"===i,"layout-form":"form"===i,"layout-form-viewer":"form-viewer"===i,"layout-form-viewer-embed":"form-viewer-embed"===i,"layout-phone":"phone"===i,"layout-tablet":"tablet"===i,"layout-template-preview":"template-preview"===i,"layout-chat":"chat"===i,"layout-layout-editor":"layout-editor"===i,"layout-layout-editor-wide":"layout-editor-wide"===i,"layout-layout-editor-narrow":"layout-editor-narrow"===i,"layout-marketplace":"marketplace"===i,"layout-marketplace-mobile":"marketplace-mobile"===i,"layout-team-home":"team-home"===i,"layout-team-home-mobile":"team-home-mobile"===i,"layout-create-post":"create-post"===i,"layout-fullscreen-ai":"fullscreen-ai"===i,"layout-narrowscreen-ai":"narrowscreen-ai"===i,"layout-presentation-mode":"presentation-mode"===i,"layout-person-profile":"person-profile"===i}),style:{paddingBottom:u?x:void 0,gap:d,...c},ref:t,onMouseDown:p,onClick:m,onDoubleClick:y,onContextMenu:h,children:n})})})),d="layout-content",u="layout-full",c="layout-margin-right",p="hide-scrollbar",m="layout-column",y=n.forwardRef((function(e,t){return(0,a.jsx)(l().A,{name:"PageLayoutContent",children:(0,a.jsx)("div",{className:r()(d,e.className),style:e.style,ref:t,children:e.children})})}));function h(e){return(0,a.jsx)(l().A,{name:"PageLayoutFull",children:(0,a.jsx)("div",{className:u,style:e.style,children:e.children})})}function x(e){return(0,a.jsx)(l().A,{name:"PageLayoutMarginRight",children:(0,a.jsx)("div",{className:c,style:{...e.style,pointerEvents:"none"},children:e.children})})}function g(e){return(0,a.jsx)(l().A,{name:"PageLayoutColumn",children:(0,a.jsx)("div",{className:r()(m,e.className),style:{"--min-column-width":e.minWidth?`${e.minWidth}px`:"100%",...e.style},children:e.children})})}function f(e){return(0,a.jsx)(l().A,{name:"PageLayoutTwoColumn",children:(0,a.jsxs)(g,{minWidth:e.minWidth,className:e.className,style:e.style,children:[e.left,e.right]})})}},178063:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,plusIcon:()=>n});o(242343);const r={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M10 3.59a.66.66 0 0 1 .66.66v5.09h5.09a.66.66 0 0 1 0 1.32h-5.09v5.09a.66.66 0 0 1-1.32 0v-5.09H4.25a.66.66 0 0 1 0-1.32h5.09V4.25a.66.66 0 0 1 .66-.66"})},n=(0,o(680369).wt)("plus",r)},276647:(e,t,o)=>{o.d(t,{o:()=>l});var r=o(242343),n=o(163643);const l=r.forwardRef((function(e,t){let{color:r="primary",...l}=e;const s=(0,o(174114).IS)((e=>{const t="blue"===r?o(220413).Ay.blue:"secondary"===r?e.text.secondary:e.text.primary;return{title:{color:t,fill:t},buttonMenuItem:{...l.style,...l.disabled?{cursor:"not-allowed"}:{}}}}),[l.disabled,r,l.style]);return(0,n.jsx)(o(535906).A,{ref:t,...l,title:(0,n.jsx)("div",{style:s.title,children:l.title}),icon:(0,n.jsx)(o(397791).I,{icon:o(178063).plusIcon,style:{fill:r}}),style:s.buttonMenuItem})}))},279150:(e,t,o)=>{o.d(t,{A:()=>n});o(242343);var r=o(163643);function n(e){const t={display:"inline-block",minWidth:e.size,minHeight:e.size};return"x"===e.axis?t.minHeight=1:"y"===e.axis&&(t.minWidth=1),(0,r.jsx)("div",{style:t})}},395705:(e,t,o)=>{o.d(t,{G:()=>a,e:()=>s});var r=o(242343),n=()=>o(174114),l=o(163643);let s=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});const a=r.forwardRef((function(e,t){const{propertySchema:r,format:a}=e,{name:i,type:d,icon:u}=r,c=(0,o(622286).X)("nds_default_property_noticon"),{isMobile:p}=(0,o(237385).Y0)(),m=(0,n().IS)((e=>({propertyIcon:{fill:e.regularIconColor,marginLeft:6,marginRight:2}})),[]),y=(0,n().DP)(),h=a===s.Name?i:o(206183).dC[d];return(0,l.jsx)(o(535906).A,{title:h,icon:(0,l.jsx)(o(916963).zB,{icon:u,type:d,size:p?18:16,theme:y,style:m.propertyIcon,isDefaultNoticonEnabled:c}),...e})}))},493264:(e,t,o)=>{o.d(t,{A:()=>y});o(725707),o(491955),o(403517),o(113085);var r=o.n(o(567012)),n=o(242343),l=()=>o(564134),s=()=>o(716605),a=()=>o(653998),i=()=>o(975392),d=()=>o(640979),u=()=>o(858023),c=()=>o(88271),p=()=>o(395705),m=o(163643);const y=function(e){let{selectedProperty:t,onAccept:y,schema:h,onClose:x,allowProperty:g,isRelationProperty:f}=e;const b=(0,o(237385).v3)(),v=(0,a().tz)(),[j,A]=(0,n.useState)("");let S=Object.keys(h);const M=S.some(o(594876).u);S=i().Ul(S,(e=>{const t=(0,s()._g)({schema:h,property:e});return t?t.name:""}));const w=M?l().Ho:l().rn;if(S=i().FF(S,w),S.unshift(w),g&&(S=S.filter((e=>{const t=(0,s()._g)({schema:h,property:e});return t&&g(t)}))),j){let e=S.map((e=>{const t=(0,s()._g)({schema:h,property:e});return t&&t.name}));e=r().filter(j,e).map((e=>{let{original:t}=e;return t})),S=S.filter((t=>{const o=(0,s()._g)({schema:h,property:t});return o&&o.name&&e.includes(o.name)}))}const k=j||S.length>o(475923).R8,C=i().oE(S.map((e=>{const o=(0,s()._g)({schema:h,property:e});if(!o)return null;return{key:e,render:r=>(0,m.jsx)(p().G,{...r,propertySchema:o,format:p().e.Name,isChecked:e===t}),action:()=>y(e)}}))),P=[{key:0,render:e=>(0,m.jsx)(c().A,{...e}),items:C}],{device:_}=b,N=k?(0,m.jsx)(c().A,{isInput:!0,children:(0,m.jsx)(o(401382).Ay,{focus:!_.isMobile||void 0,focusAfterAnimation:!0,value:j,onChange:e=>A(e.target.value),placeholder:f?v.formatMessage({defaultMessage:"Search for a relation property…",id:"propertySelectMenu.searchForProperty.relation.placeholder"}):v.formatMessage({defaultMessage:"Search for a property…",id:"propertySelectMenu.searchForProperty.default.placeholder"})})}):null;let R;return R=_.isMobile?{menuType:d().gu.Modal,title:f?v.formatMessage({defaultMessage:"Relation property",id:"propertySelectMenu.mobileMenu.relationProperty.header"}):v.formatMessage({defaultMessage:"Property",id:"propertySelectMenu.mobileMenu.property.header"}),right:(0,m.jsx)(o(743668).CancelMenuText,{}),onClickRight:x,header:N}:{menuType:d().gu.Popup,width:280,maxHeight:480,header:N},(0,m.jsx)(o(935091).A,{...R,children:0===C.length?(0,m.jsx)(c().A,{children:(0,m.jsx)(o(975515).A,{title:(0,m.jsx)(a().sA,{defaultMessage:"No results",id:"propertySelectMenu.search.noResults.title"})})}):(0,m.jsx)(u().Ay,{type:u().Oh.Vertical,sections:P,onAccept:x,initialFocus:j.length>0?0:void 0})})}},493804:(e,t,o)=>{o.r(t),o.d(t,{PersonPropertyModule:()=>D});o(362833),o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601),o(725707),o(491955),o(403517);var r=o(242343),n=()=>o(237385),l=()=>o(803290),s=()=>o(174114),a=()=>o(950635),i=()=>o(162901),d=()=>o(169201),u=()=>o(409211),c=()=>o(34662),p=()=>o(653998),m=()=>o(975392),y=()=>o(76394),h=()=>o(31448),x=()=>o(141666),g=()=>o(361837),f=()=>o(502852),b=()=>o(640979),v=()=>o(622286),j=()=>o(951920),A=()=>o(509484),S=()=>o(907721),M=()=>o(86227),w=()=>o(466139),k=()=>o(622813),C=()=>o(751436),P=()=>o(126451),_=()=>o(535906),N=()=>o(273520),R=()=>o(356813),B=()=>o(401382),T=()=>o(966789),I=()=>o(935091),V=()=>o(858023),z=()=>o(975515),W=()=>o(88271),O=()=>o(35462),U=()=>o(698995),F=o(163643);const L=20,D=r.memo((function(e){let{property:t,store:n,propertyValues:l,propertySchema:a,module:i,format:d}=e;const[u,c]=(0,o(830820).z)(),m=(0,o(639659).a)(),g={style:"large"};(0,o(946854).E2)(i)&&i.style&&(g.style=i.style);const f="large"===g.style?200:164,b=(0,r.useMemo)((()=>Math.floor((c+4)/(f+4))),[f,c]),v="person"===(null==a?void 0:a.type)&&((0,y().O9)(a.limit)&&0===l.length||(0,x().pN)(a.limit)),[j,A]=(0,r.useState)(!1),S=1===b?8:5,M=Math.max(1,S*b-(v?1:0)),w=(0,s().IS)((e=>({showAllFewerButton:{borderRadius:6,padding:"2px 8px",marginTop:4,display:"inline-flex",flexWrap:"nowrap",gap:4,color:e.text.secondary,fontWeight:h().Wy.medium,fontSize:14,alignItems:"center",justifyContent:"start"}})),[]),k=(0,F.jsx)(P().A,{onClick:()=>A(!j),style:w.showAllFewerButton,children:j?(0,F.jsx)(p().sA,{id:"PersonPropertySectionValues.showMoreButton.text",defaultMessage:"Show fewer"}):(0,F.jsx)(p().sA,{id:"PersonPropertySectionValues.showFewerButton.text",defaultMessage:"Show more"})}),C=l.length>0;return(0,F.jsxs)("div",{ref:u,children:[(0,F.jsx)(o(116485).WL,{minWidth:C?f:void 0,style:{gridGap:4,marginTop:C&&!m?4:0},children:(0,F.jsx)(E,{values:l,blockStore:n,propertyId:t,propertySchema:a,itemsShownPerRow:b,showAddButton:v,limit:j?void 0:M,setShowingAllValues:A,renderOptions:g,format:d})}),l.length>M&&k]})}));function E(e){let{values:t,blockStore:s,propertyId:i,propertySchema:d,itemsShownPerRow:u,showAddButton:p,limit:h,setShowingAllValues:g,renderOptions:f,format:b}=e;const v=(0,n().v3)(),j=(0,n().Y0)(),{collectionContextStore:A}=(0,r.useContext)(C().L8),M=(0,r.useCallback)((function(e){o(84543).createAndCommit({userAction:"PersonPropertyModule.updateValue",environment:v,canUndo:!0,perform:t=>{const r=o(716605).RV(e);o(448316).R9({environment:v,store:s.getPropertyStore(i),value:r,transaction:t})}});const t=s.getAssociatedCollectionStore();A&&d&&t&&(0,o(396806).E)({environment:v,collectionContextStore:A,block_id:s.id,property:i,property_type:null==d?void 0:d.type,from:"property_module",collection_id:t.id,isFromBulkActionsToolbar:!1,value_count:e.length})}),[s,A,v,i,d]),w=(0,r.useCallback)((function(e){M(t.filter((t=>(0,a().Pu)(e)?(0,c().MMZ)(t)||e.id!==t.id:e!==t)))}),[M,t]),k=(0,r.useCallback)((function(e){M([...t,e])}),[M,t]),_=(0,r.useCallback)((function(e){M([e])}),[M]),[R,B]=(0,r.useState)(""),T=(0,r.useMemo)((()=>new(o(962373).A)),[]),I=t.length&&t.length<=u-1?(0,m().y1)(u-t.length-1).map((e=>(0,F.jsx)("div",{},e))):[],V=(0,l().K8)((()=>s.isTemplate()),[s]),z=(0,l().K8)((()=>s.canEdit()&&!s.isNonEditableState()),[s]);if((0,x().pN)(d))return null;if("created_by"===(null==d?void 0:d.type)||"last_edited_by"===(null==d?void 0:d.type))return(0,F.jsx)(Y,{personValues:t,disabled:!0,onRemove:m().lQ,renderOptions:f,propertySchema:d});const W=h?t.slice(0,h):t;return z?(0,F.jsxs)(F.Fragment,{children:[(0,y().O9)(d.limit)?(0,F.jsx)(N().Ay,{buttonPopupStore:T,alignmentToOrigin:S().C.Start,onClose:()=>{B("")},popupType:j.isMobile?N().z7.SlideUp:N().z7.Popup,renderOrigin:e=>(0,F.jsx)(P().A,{...e,children:(0,F.jsx)(Y,{personValues:t,onRemove:w,disabled:!z,renderOptions:f,propertySchema:d})}),render:()=>(0,F.jsx)(K,{query:R,setQuery:B,current:t,onAdd:e=>{_(e),T.setState({open:!1})},inTemplate:V,limit:d.limit,format:b})}):(0,F.jsx)(Y,{personValues:W,onRemove:w,disabled:!z,renderOptions:f,propertySchema:d}),p?(0,F.jsx)(H,{renderOptions:f,isEmpty:!t.length,menu:(0,F.jsx)(K,{query:R,setQuery:B,current:t,onAdd:k,inTemplate:V,limit:d.limit,format:b}),onClose:()=>{B(""),g(!1)},onClick:()=>{(0,y().O9)(h)&&g(!0)}}):null,I]}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Y,{personValues:W,disabled:!0,onRemove:m().lQ,renderOptions:f,propertySchema:d}),I]})}const H=r.memo((function(e){let{menu:t,onClick:l,onClose:a,renderOptions:i,isEmpty:d}=e;const u=(0,n().Y0)(),c=(0,s().IS)((e=>({button:{borderRadius:6,padding:"5px 0 5px 4px",display:"flex",flexWrap:"nowrap",gap:4,color:e.text.tertiary,fontSize:14,alignItems:"center"},buttonBorder:{padding:"large"===i.style?11:5,borderRadius:9999,border:`1px solid ${e.stroke.secondary}`},icon:{color:e.icon.tertiary}})),[i.style]),{baseStyles:m}=(0,r.useContext)(C().L8);return(0,F.jsx)(N().Ay,{alignmentToOrigin:S().C.Start,onClick:l,onClose:a,popupType:u.isMobile?N().z7.SlideUp:N().z7.Popup,renderOrigin:e=>(0,F.jsx)(P().A,{...e,style:d?m.emptyButtonStyle:c.button,testId:"person_property_module__add_button",children:d?(0,F.jsx)(k().ao,{}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{style:c.buttonBorder,children:(0,o(339189).W)({width:12,...c.icon})}),(0,F.jsx)(p().sA,{id:"personProperty.addPersonButtonText",defaultMessage:"Add person"})]})}),render:()=>t})}));function K(e){let{query:t,setQuery:o,onAdd:s,current:d,inTemplate:h,limit:x,format:f}=e;const j=(0,n().Y0)(),S=(0,p().tz)(),k=(0,r.useMemo)((()=>new Set(d.map((e=>{if((0,a().Pu)(e))return e.id})).filter(y().O9))),[d]),C=function(e){let{query:t,limit:o}=e;const r=(0,n().v3)(),l=(0,p().tz)(),s=(0,v().X)("edge_cache_person_property"),[d]=(0,i().Yb)((async()=>{const e=await A().T.searchActions.load();return(await e.searchSpaceUsers({environment:r,query:t,membersOnly:!1,placeSelfFirst:""===t||e.isPersonalPronoun(t,l.locale),limit:o,shouldUseEdgeCacheRollout:s})).map((e=>(0,a().D3)({table:u().oo,value:e})))}),[r,t,l.locale,o,s]);return d}({query:t,limit:L+k.size}),P=(0,r.useCallback)((e=>e.filter((e=>!k.has(e.id)))),[k]),N=(0,F.jsx)(W().A,{isInput:!0,style:{padding:8},children:(0,F.jsx)(B().Ay,{customElementAttributes:{"data-testid":"person_property_module__search_input"},textWrapperStyle:{margin:0},inputOuterStyle:{margin:j.isMobile?"0 16px":void 0},focus:!j.isMobile||void 0,focusAfterAnimation:!0,value:t||"",onChange:e=>o(e.target.value),placeholder:S.formatMessage({id:"personPropertySectionValues.search.placeholder",defaultMessage:"Search for a person..."})})}),R=c().Wov.filter((e=>!d.includes(e))),O={key:"shortcuts",items:R.length>0?R.map((e=>({key:`relative_person_shortcut_${e}`,action:()=>{},render:t=>(0,F.jsx)(_().A,{...t,title:(0,F.jsx)(w().W,{templateVariableType:e}),inline:!0,onClick:()=>{s(e)}})}))):[{key:"no_template_variables",action:()=>{},render:e=>(0,F.jsx)(z().A,{...e,style:{margin:"2px 0px 2px 6px",fontSize:12},title:(0,F.jsx)(p().sA,{id:"database.personPropertyMenu.noShorcuts.message",defaultMessage:"No shortcuts"})})}],render:e=>(0,F.jsx)(W().A,{...e,title:"Shortcuts"})},[D,E]=(0,r.useMemo)((()=>{const e=[];let t;if("pending"===C.status||"idle"===C.status)e.push({key:"loading",action:()=>{},render:e=>(0,F.jsx)(z().A,{...e,title:(0,F.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,F.jsx)(T().A,{})})})});else if("resolved"===C.status){const r=P(C.value??[]);t=r.length>0?0:void 0,0===r.length?e.push({key:"no_results",action:()=>{},render:e=>(0,F.jsx)(z().A,{...e,title:(0,F.jsx)(p().sA,{id:"PersonPropertySectionValues.searchMenu.noResults",defaultMessage:"No results."})})}):e.push(...r.map((e=>({key:e.id,action:()=>{s(e.pointer),o("")},render:t=>(0,F.jsx)(U().A,{...t,actor:(0,a().A7)(e)})}))))}else"rejected"===C.status?e.push({key:"no_results",action:()=>{},render:e=>(0,F.jsx)(z().A,{...e,title:(0,F.jsx)(p().sA,{id:"PersonPropertySectionValues.searchMenu.somethingWentWrong",defaultMessage:"Something went wrong."})})}):(0,y().HB)(C);return[e,t]}),[s,P,o,C]),H=(0,l().K8)((()=>{if(!(0,g().NN)(f))return(0,M().t)(x)}),[f,x]);return(0,F.jsx)(I().A,{menuType:j.isMobile?b().gu.ActionSheet:b().gu.Popup,header:N,width:275,maxHeight:400,minWidth:275,children:(0,F.jsx)(V().Ay,{type:V().Oh.Vertical,sections:(0,m().oE)([h?O:void 0,{key:"results",items:D.slice(0,L),render:e=>(0,F.jsx)(W().A,{...e,title:H})}]),initialFocus:E})})}const Y=r.memo((function(e){let{personValues:t,onRemove:o,disabled:n,renderOptions:l,propertySchema:s}=e;const i=(0,r.useCallback)((e=>{"person"===s.type&&s.limit||(0,f().SQ)({event:e,context:f().y$.EditorClick,callback:m().lQ})}),[s]);return 0===t.length&&n?(0,F.jsx)("div",{style:{fontSize:14,paddingLeft:6},children:(0,F.jsx)(k().ao,{})}):(0,F.jsx)(F.Fragment,{children:t.map((e=>(0,a().Pu)(e)?(0,F.jsx)($,{actorPointer:e,handleRemove:o,disabled:n,renderOptions:l,onClick:i},e.id):(0,c().MMZ)(e)?(0,F.jsx)(Q,{value:e,handleRemove:o,disabled:n},`template_variable_${e}`):void(0,y().HB)(e)))})})),Q=r.memo((function(e){let{value:t,handleRemove:r,disabled:n}=e;const l=(0,p().tz)(),[a,i]=(0,j().B)(),u=(0,s().IS)((e=>({actorName:{fontWeight:h().Wy.regular,color:e.blueColor,lineHeight:1.1},uiToken:{display:"flex",gap:10,alignItems:"center",background:i&&!n?e.outlineBlueButtonPressedBackground:e.outlineBlueButtonHoveredBackground,color:e.blueColor,justifyContent:"space-between",position:"relative",padding:"5px 28px 5px 5px",borderRadius:4},avatar:{borderRadius:6,display:"flex",flexWrap:"nowrap",gap:4,fontSize:14,alignItems:"center"},avatarBorder:{padding:8,borderRadius:9999,background:e.accentColors.uiBlue[i&&!n?100:200],color:e.accentColors.uiBlue[600]}})),[n,i]);return(0,F.jsxs)("div",{ref:a,style:u.uiToken,children:[(0,F.jsx)("div",{style:u.avatar,children:(0,F.jsx)("div",{style:u.avatarBorder,children:(0,o(446656).z)({width:14})})}),(0,F.jsx)("div",{style:{display:"flex",gap:4,flexGrow:1},children:(0,F.jsx)(O().A,{className:"notranslate",style:u.actorName,isMultiline:!0,children:(0,F.jsx)(p().sA,{id:"PropertyModulePersonTemplateVariableValue.templateVariables.text.me",defaultMessage:"Person who{br}duplicated page",values:{br:(0,F.jsx)("br",{})}})})}),i&&!n?(0,F.jsx)(R().A,{icon:d().u,ariaLabel:l.formatMessage({id:"PropertyModulePersonTemplateVariableValue.close",defaultMessage:"Close"}),style:{position:"absolute",right:4,top:"50%",transform:"translateY(-50%)",width:20,height:20},iconStyle:{width:11},onClick:()=>r(t)}):null]})})),$=r.memo((function(e){let{actorPointer:t,handleRemove:n,disabled:i,renderOptions:u,onClick:c}=e;const m=(0,p().tz)(),{store:y}=(0,r.useContext)(C().L8),x="large"===u.style?36:24,g="large"===u.style?10:4,f=(0,l().K8)((()=>{const e=null==y?void 0:y.getRecordModel;if(e)return(0,a().xC)({pointer:t,getRecordModel:e})}),[t,null==y?void 0:y.getRecordModel]),b=null==f?void 0:f.asActor,v=(0,l().K8)((()=>null==b?void 0:b.getDisplayName(m)),[b,m]),[A,S]=(0,j().B)(),M=(0,s().IS)((e=>({actorName:{fontWeight:h().Wy.medium},container:{display:"flex",gap:g,alignItems:"center",justifyContent:"space-between",position:"relative",padding:"5px 28px 5px 5px",borderRadius:4,background:S&&!i?e.buttonHoveredBackground:void 0}})),[g,i,S]),w=(0,l().K8)((()=>null!=b&&b.isUser()?(0,F.jsx)(o(482570).A,{userValue:b,size:x}):null!=b&&b.isBot()?(0,F.jsx)(o(951156).A,{botValue:b,size:x}):null),[x,b]);return(0,F.jsxs)("div",{ref:A,onClick:c,style:M.container,children:[w,(0,F.jsx)("div",{style:{display:"flex",gap:4,flexGrow:1,...h().RC},children:(0,F.jsx)(O().A,{className:"notranslate",style:M.actorName,showTooltipWhenTruncated:!0,children:v})}),S&&!i?(0,F.jsx)(R().A,{icon:d().u,ariaLabel:m.formatMessage({id:"PropertyModulePersonValue.removeUser.ariaLabel",defaultMessage:"Remove {name}"},{name:v}),style:{position:"absolute",right:4,top:"50%",transform:"translateY(-50%)",width:20,height:20},iconStyle:{width:11},onClick:()=>n(t)}):null]})}))},698995:(e,t,o)=>{o.d(t,{A:()=>b,S:()=>g});var r=o(242343),n=()=>o(237385),l=()=>o(803290),s=()=>o(950635),a=()=>o(653998),i=()=>o(907721),d=()=>o(932322),u=()=>o(701270),c=()=>o(482570),p=o(163643);const m="UIRegular-14px/Regular",y="UIRegular-14px/Semibold",h="iOS/Callout-16px/Regular",x=r.forwardRef(((e,t)=>{const{actor:r,userTitle:a,defaultUserTitle:u="name_only",useEmailAsTooltip:m,tooltip:y,tooltipPlacement:h,hoveredStyle:x,disabledFeedback:b,customUserTitleStyles:v,iconSizeOverride:j}=e,A=(0,n().v3)(),S=(0,l().K8)((()=>r.asActor&&r.isUser()?r.email:void 0),[r]),M=m&&S?S:y,w=j||(A.device.isMobile?d().nd:d().pg),k="name_and_email"===u||"name_and_email_unless_right"===u&&!Boolean(e.right)?(0,p.jsx)(f,{actor:null==r?void 0:r.asActor,customStyles:v}):(0,p.jsx)(g,{customStyles:v,actor:null==r?void 0:r.asActor}),C=a??k;let P;return(0,s().H3)(r)?P=(0,p.jsx)(o(951156).A,{botValue:null==r?void 0:r.asActor,size:w}):(0,s().ps)(r)?P=(0,p.jsx)(c().A,{userValue:null==r?void 0:r.asActor,size:w}):(0,s().h2)(r)?P=(0,p.jsx)(c().A,{userValue:void 0,size:w}):(0,o(76394).HB)(r),(0,p.jsx)(o(103151).A,{placement:h??i().W.Bottom,alignment:i().C.Start,textWrap:!0,render:r=>(0,p.jsx)(o(535906).A,{...(0,o(906230).A)(r,e),icon:P,title:C,disabledFeedback:b,className:"notranslate",right:e.right,ref:t,hoveredStyle:x}),disableTooltip:!M,renderTooltip:()=>M})}));function g(e){const{actor:t,customStyles:o}=e,r=(0,n().v3)(),s=(0,a().tz)(),i=(0,l().K8)((()=>t&&t.id===r.currentUser.id),[r,t]),d=(0,l().K8)((()=>t&&t.getDisplayName(s)),[t,s]),c=r.device.isMobile?h:m;return i?(0,p.jsx)(a().sA,{id:"UserMenuItem.fullName.authorLabel",defaultMessage:"<author>{fullName}</author> <you>(You)</you>",values:{author:e=>(0,p.jsx)(u().D,{as:"span",styleName:c,customStyles:o,children:e}),fullName:d,you:e=>(0,p.jsx)(u().D,{as:"span",colorName:"secondary",styleName:c,customStyles:o,children:e})}}):d?(0,p.jsx)(u().D,{styleName:c,customStyles:o,children:d}):(0,p.jsx)(u().D,{styleName:c,customStyles:o,children:(0,p.jsx)(a().sA,{id:"UserMenuItem.fullName.unknownAuthorLabel",defaultMessage:"Unknown author"})})}function f(e){const t=(0,n().v3)(),{actor:o,customStyles:r}=e,s=(0,a().tz)(),i=(0,l().K8)((()=>o&&o.getDisplayName(s)),[o,s]),{email:d,showEmail:c}=(0,l().K8)((()=>{const e=o&&o.asActor&&o.isUser()?o.email:void 0;return{email:e,showEmail:i!==e}}),[o,i]),x=t.device.isMobile?"iOS/Callout-16px/Regular":y,g=t.device.isMobile?h:m;return i?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u().D,{as:"span",styleName:x,customStyles:r,children:i}),c&&(0,p.jsx)(u().D,{as:"span",styleName:g,customStyles:r,children:` ${d}`})]}):(0,p.jsx)(u().D,{styleName:y,customStyles:r,children:(0,p.jsx)(a().sA,{id:"UserMenuItem.fullName.unknownAuthorLabel",defaultMessage:"Unknown author"})})}x.displayName="UserMenuItem";const b=x},978669:(e,t,o)=>{o.d(t,{A:()=>s});o(242343);var r=()=>o(653998),n=()=>o(395705),l=o(163643);const s=function(e){const t=(0,o(237385).v3)(),{device:s}=t;if(s.isMobile)return e.propertySchema?(0,l.jsx)(n().G,{propertySchema:e.propertySchema,onClick:e.onClick,focused:!1,format:n().e.Name,showExtensionArrow:!e.disabled}):(0,l.jsx)(o(535906).A,{focused:!1,title:(0,l.jsx)(r().sA,{defaultMessage:"Property",id:"database.mobileFilterAndSortMenu.property.buttonMenuItem.label"})});{const t=e.propertySchema&&(0,l.jsx)(o(224281).mA,{propertySchema:e.propertySchema,showIcon:!0,style:{lineHeight:1.4}}),n=(0,l.jsx)(r().sA,{defaultMessage:"Property",id:"database.filterAndSortMenu.propertyButton.label"});return(0,l.jsx)(o(294821).A,{title:t,placeholder:n,onClick:e.onClick,disabled:e.disabled,disableMargins:e.disableMargins,desktopStyle:e.textWrapperStyle})}}}}]);