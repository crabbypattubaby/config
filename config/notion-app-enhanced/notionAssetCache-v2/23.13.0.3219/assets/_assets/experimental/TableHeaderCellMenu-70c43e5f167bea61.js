"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[47779],{17127:(e,t,o)=>{o.d(t,{C:()=>n});o(242343);const r={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M14.075 3.45a.625.625 0 0 0-.884 0l-3.497 3.5a.625.625 0 0 0 .883.884l2.431-2.431v10.705a.625.625 0 0 0 1.25 0V5.402l2.431 2.43a.625.625 0 1 0 .884-.883zM2.427 12.167a.625.625 0 0 1 .884 0l2.43 2.431V3.893a.625.625 0 0 1 1.25 0v10.705l2.431-2.43a.625.625 0 0 1 .884.883L6.81 16.55a.625.625 0 0 1-.884 0l-3.498-3.498a.625.625 0 0 1 0-.884"})},n=(0,o(680369).wt)("arrowUpDown",r)},24281:(e,t,o)=>{o.d(t,{B:()=>g});o(242343);var r=()=>o(237385),n=()=>o(803290),a=()=>o(174114),i=()=>o(653998),l=()=>o(220413),s=()=>o(76394),c=()=>o(31448),d=()=>o(678523),p=()=>o(103151),u=()=>o(907721),y=()=>o(485966),m=()=>o(943066),f=o(163643);function g(e){let{upsell:t,mobileStyle:o,desktopStyle:g,analyticsName:h,onClick:A,disableTooltip:v}=e;const b=(0,a().DP)(),C=(0,r().v3)(),{device:x}=C,_=(0,n().K8)((()=>{const{currentSpaceStore:e}=y().default.state;return null==e?void 0:e.canAdmin()}),[]),S=(0,n().K8)((()=>function(e,t){if("product"!==e.type)return{};switch(e.product){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?l().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:c().Wy.medium};default:return{}}}(t,b)),[t,b]);if("product"!==t.type)return null;if(x.isMobileNative)return null;const k=(()=>{switch(t.product){case"personal":return(0,f.jsx)(i().sA,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"});case"plus":return(0,f.jsx)(i().sA,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"});case"business":return(0,f.jsx)(i().sA,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"});case"enterprise":return(0,f.jsx)(i().sA,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"});case"ai":return(0,f.jsx)(i().sA,{defaultMessage:"AI ↗",id:"upgradeButton.ai.textWithArrow"});case"sites_custom_hostnames":return(0,f.jsx)(i().sA,{defaultMessage:"Custom Hostnames ↗",id:"upgradeButton.sites_custom_hostnames.textWithArrow"});default:t.product,(0,s().HB)(t.product)}})();return x.isMobile||!_?(0,f.jsx)(d().A,{mobileStyle:o,children:k}):(0,f.jsx)(p().A,{delayThreshold:120,disableTooltip:v,placement:u().W.Bottom,renderTooltip:()=>(0,f.jsx)("div",{style:{maxWidth:500},children:(0,f.jsx)(i().sA,{defaultMessage:"Upgrade to use this feature.",id:"premiumFeatureUpgradeButton.upgrade.tooltip"})}),originGap:6,render:e=>(0,f.jsx)(d().A,{desktopStyle:g,innerStyle:S,onClick:e=>function(e,t,o,r,n){m().K(r,{from:t,upsell:o}),n&&n(e)}(e,h,t,C,A),...e,children:k})})}},85208:(e,t,o)=>{o.d(t,{g:()=>l});o(242343);var r=()=>o(403026),n=()=>o(281030),a=o(163643);const i=16/(0,n().N)("small");function l(e){const{variant:t}=e,o=function(e){return(0,n().N)(e)*i}(t);return(0,a.jsx)(a.Fragment,{children:(0,r().X)({width:o,pointerEvents:"none"})})}},127436:(e,t,o)=>{o.d(t,{i:()=>n});o(242343);const r={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},n=(0,o(680369).wt)("lockFill",r)},130935:(e,t,o)=>{o.d(t,{_:()=>n});o(242343);var r=o(163643);const n=(0,o(680369).wt)("layout",{viewBox:"0 0 14 14",svg:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.19999C2.28953 2.19999 2.19999 2.28953 2.19999 2.39998V11.5999C2.19999 11.7103 2.28953 11.7999 2.39999 11.7999H4.99997C5.11042 11.7999 5.19997 11.7103 5.19997 11.5999V2.39998C5.19997 2.28953 5.11042 2.19999 4.99997 2.19999H2.39999ZM1 2.39998C1 1.6268 1.62679 1 2.39999 1H4.99997C5.77316 1 6.39995 1.6268 6.39995 2.39998V11.5999C6.39995 12.3731 5.77316 12.9999 4.99997 12.9999H2.39999C1.62679 12.9999 1 12.3731 1 11.5999V2.39998ZM9 8.80036C8.88954 8.80036 8.8 8.88991 8.8 9.00036V11.6003C8.8 11.7108 8.88954 11.8003 9 11.8003H11.6C11.7105 11.8003 11.8 11.7108 11.8 11.6003V9.00036C11.8 8.88991 11.7105 8.80036 11.6 8.80036H9ZM7.60001 9.00036C7.60001 8.22717 8.2268 7.60037 9 7.60037H11.6C12.3731 7.60037 13 8.22717 13 9.00036V11.6003C13 12.3736 12.3731 13.0003 11.6 13.0003H9C8.2268 13.0003 7.60001 12.3736 7.60001 11.6003V9.00036ZM8.79994 2.39998C8.79994 2.28953 8.88949 2.19999 8.99994 2.19999H11.5999C11.7104 2.19999 11.7999 2.28953 11.7999 2.39998V4.99997C11.7999 5.11043 11.7104 5.19996 11.5999 5.19996H8.99994C8.88949 5.19996 8.79994 5.11043 8.79994 4.99997V2.39998ZM8.99994 1C8.22675 1 7.59995 1.6268 7.59995 2.39998V4.99997C7.59995 5.77316 8.22675 6.39995 8.99994 6.39995H11.5999C12.3731 6.39995 12.9999 5.77316 12.9999 4.99997V2.39998C12.9999 1.6268 12.3731 1 11.5999 1H8.99994Z"})})},194585:(e,t,o)=>{o.d(t,{n:()=>S,z:()=>x});o(610931),o(242343);var r=()=>o(803290),n=()=>o(174114),a=()=>o(505966),i=()=>o(73658),l=()=>o(916963),s=()=>o(758989),c=()=>o(242978),d=()=>o(584044),p=()=>o(130935),u=()=>o(40642),y=()=>o(76394),m=()=>o(511441),f=()=>o(327665),g=()=>o(622286),h=()=>o(328653),A=()=>o(940445),v=o(163643);const b=16;function C(e){let{icon:t,theme:o,size:r,style:a}=e;const l=(0,n().IS)((e=>({icon:{fill:(0,h().d)(t,e).icon.primary,...a}})),[t,a]);return(0,v.jsx)(i().p,{icon:t,theme:o,size:r,style:l.icon})}function x(e){var t;let{template:o,size:r,iconStyle:i}=e;const l=r??b,f=(0,n().IS)((()=>({icon:{width:l,height:l,...i}})),[l,i]),g=(0,n().DP)();if((0,a().cB)(o.templateId))return(0,d().L)(f.icon);const{type:h}=o;switch(h){case"property":return(0,v.jsx)(_,{template:o,iconSize:l,styles:f});case"collection_view":return(0,v.jsx)(m().h,{viewIcon:null===(t=o.value.format)||void 0===t?void 0:t.collection_view_icon,viewType:o.value.type,color:"lightGray",style:f.icon});case"layout":return(0,v.jsx)(v.Fragment,{children:(0,p()._)(f.icon)});case"block":return(0,v.jsx)(v.Fragment,{children:(0,u().b)(f.icon)});case"collection":case"compound":const e="collection"===o.type?o.value.targetCollection.icon:o.icon;if(!(0,s().T8)(e))throw new Error("Only Notion static icons are allowed for template icons");return(0,v.jsx)(C,{icon:e,theme:g,size:l,style:f.icon});case"automation":return(0,v.jsx)(v.Fragment,{children:(0,c().v)(f.icon)});default:(0,y().HB)(h)}}function _(e){let{template:t,iconSize:o,styles:a}=e;const i=(0,n().DP)(),s=(0,g().X)("nds_default_property_noticon"),c=(0,r().K8)((()=>{const{relatedCollectionTemplateId:e}=t;if("relation"===t.value.type&&e){return A().globalWorkflowTemplates.fromIdOfType({templateId:e,type:"collection"}).value.targetCollection.icon}return t.value.icon}),[t]);return(0,v.jsx)(l().zB,{type:t.value.type,icon:c,size:o,style:a.icon,theme:i,isDefaultNoticonEnabled:s})}function S(e){let{template:t,backgroundSize:o}=e;const r=(0,n().IS)((e=>({iconContainer:{background:k({theme:e,template:t})[30]},icon:{fill:k({theme:e,template:t})[400]}})),[t]);return(0,v.jsx)(f().y,{backgroundColor:r.iconContainer.background,backgroundSize:o,icon:(0,v.jsx)(x,{template:t,iconStyle:r.icon})})}function k(e){let{theme:t,template:o}=e;const{type:r}=o;switch(r){case"collection_view":case"automation":return t.accentColors.blue;case"property":return"relation"===o.value.type?t.accentColors.yellow:t.accentColors.red;case"layout":return t.accentColors.orange;case"block":return t.accentColors.purple;case"compound":return t.accentColors.green;case"collection":return t.accentColors.pink;default:(0,y().HB)(r)}}},213255:(e,t,o)=>{o.d(t,{A:()=>a});o(242343);var r=o(163643);const n={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M8.65 8.25a.625.625 0 1 0 0 1.25h.725v3.25H8.65a.625.625 0 1 0 0 1.25h2.7a.625.625 0 1 0 0-1.25h-.725V8.875A.625.625 0 0 0 10 8.25zM10.7 6.3a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,r.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},a=(0,o(680369).wt)("infoCircle",n)},242978:(e,t,o)=>{o.d(t,{v:()=>n});o(242343);var r=o(163643);const n=(0,o(680369).wt)("boltFilled",{svg:(0,r.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},269556:(e,t,o)=>{o.d(t,{F:()=>n});o(242343);var r=o(163643);const n=(0,o(680369).wt)("eyeHideInversePadded",{viewBox:"0 0 24 24",svg:(0,r.jsx)("path",{d:"M17.3867 18.1074C17.6055 18.3193 17.9404 18.333 18.1592 18.1074C18.3848 17.875 18.3711 17.5469 18.1592 17.335L6.5791 5.76855C6.37402 5.55664 6.01855 5.5498 5.80664 5.76855C5.60156 5.97363 5.60156 6.3291 5.80664 6.53418L17.3867 18.1074ZM12 6.1582C10.8105 6.1582 9.73047 6.36328 8.72559 6.69141L9.81934 7.78516C10.5098 7.58691 11.2275 7.4707 12 7.4707C16.3682 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 12.6113 18.7334 14.0059 16.9766 15.1064L17.9883 16.125C20.1348 14.7168 21.3857 12.8779 21.3857 12.0713C21.3857 10.6699 17.6055 6.1582 12 6.1582ZM12 17.9912C13.2646 17.9912 14.4199 17.7725 15.4658 17.4102L14.3789 16.3232C13.6338 16.542 12.8477 16.6787 12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.6133 5.32129 10.1299 7.19434 8.98145L6.16211 7.94922C3.92676 9.37109 2.60742 11.251 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM15.4111 13.3906C15.5889 12.9873 15.6914 12.5361 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C11.5283 8.39355 11.084 8.48242 10.6738 8.65332L15.4111 13.3906ZM12 15.7559C12.5332 15.7559 13.0322 15.6328 13.4766 15.4209L8.64355 10.5811C8.4248 11.0322 8.30176 11.5312 8.30176 12.0781C8.30859 14.0811 9.94238 15.7559 12 15.7559Z"})})},327665:(e,t,o)=>{o.d(t,{y:()=>a});o(242343);var r=()=>o(174114),n=o(163643);function a(e){let{icon:t,backgroundColor:o,backgroundSize:a}=e;const i=(0,r().IS)((e=>({iconContainer:{height:a??28,width:a??28,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",background:o??e.tint.regular}})),[o,a]);return(0,n.jsx)("div",{style:i.iconContainer,children:t})}},328653:(e,t,o)=>{o.d(t,{d:()=>a});var r=()=>o(758989);const n={light:{gray:{stroke:{secondary:"rgba(84, 72, 49, 0.15)"},fill:{primary:"rgba(84, 72, 49, 0.15)",secondary:"rgba(84, 72, 49, 0.08)",tertiary:"rgba(84, 72, 49, 0.04)"},text:{primary:"#1D1B16"}},red:{stroke:{secondary:"rgba(244, 171, 159, 0.40)"},fill:{primary:"rgba(244, 171, 159, 0.40)",secondary:"rgba(244, 171, 159, 0.40)",tertiary:"rgba(243, 136, 118, 0.07)"},text:{primary:"#5D1715"}},brown:{stroke:{secondary:"rgba(210, 162, 141, 0.35)"},fill:{primary:"rgba(210, 162, 141, 0.35)",secondary:"rgba(210, 162, 141, 0.17)",tertiary:"rgba(210, 162, 141, 0.07)"},text:{primary:"#442A1E"}},orange:{stroke:{secondary:"rgba(224, 124, 57, 0.27)"},fill:{primary:"rgba(224, 124, 57, 0.27)",secondary:"rgba(224, 124, 57, 0.15)",tertiary:"rgba(224, 124, 57, 0.07)"},text:{primary:"#49290E"}},yellow:{stroke:{secondary:"rgba(236, 191, 66, 0.39)"},fill:{primary:"rgba(236, 191, 66, 0.39)",secondary:"rgba(215, 177, 24, 0.15)",tertiary:"rgba(215, 177, 24, 0.07)"},text:{primary:"#402C1B"}},green:{stroke:{secondary:"rgba(123, 183, 129, 0.27)"},fill:{primary:"rgba(123, 183, 129, 0.27)",secondary:"rgba(123, 183, 129, 0.15)",tertiary:"rgba(123, 183, 129, 0.07)"},text:{primary:"#1C3829"}},blue:{stroke:{secondary:"rgba(93, 165, 206, 0.27)"},fill:{primary:"rgba(93, 165, 206, 0.27)",secondary:"rgba(95, 167, 208, 0.15)",tertiary:"rgba(91, 166, 209, 0.07)"},text:{primary:"#183347"}},purple:{stroke:{secondary:"rgba(168, 129, 197, 0.27)"},fill:{primary:"rgba(168, 129, 197, 0.27)",secondary:"rgba(204, 170, 229, 0.15)",tertiary:"rgba(206, 175, 229, 0.07)"},text:{primary:"#412454"}},pink:{stroke:{secondary:"rgba(225, 136, 179, 0.27)"},fill:{primary:"rgba(225, 136, 179, 0.27)",secondary:"rgba(235, 159, 196, 0.15)",tertiary:"rgba(231, 147, 188, 0.07)"},text:{primary:"#4C2337"}}},dark:{gray:{stroke:{secondary:"rgba(255, 255, 255, 0.09)"},fill:{primary:"rgba(255, 255, 255, 0.13)",secondary:"rgba(255, 255, 255, 0.09)",tertiary:"rgba(255, 255, 255, 0.03)"},text:{primary:"rgba(255, 255, 255, 0.81)"}},red:{stroke:{secondary:"rgba(222, 85, 85, 0.25)"},fill:{primary:"rgba(222, 85, 84, 0.30)",secondary:"rgba(222, 85, 84, 0.30)",tertiary:"rgba(222, 85, 88, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},brown:{stroke:{secondary:"rgba(184, 101, 69, 0.25)"},fill:{primary:"rgba(184, 101, 68, 0.30)",secondary:"rgba(184, 101, 68, 0.30)",tertiary:"rgba(184, 101, 72, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},orange:{stroke:{secondary:"rgba(233, 126, 37, 0.20)"},fill:{primary:"rgba(233, 126, 36, 0.30)",secondary:"rgba(233, 126, 36, 0.30)",tertiary:"rgba(233, 126, 40, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},yellow:{stroke:{secondary:"rgba(179, 129, 61, 0.20)"},fill:{primary:"rgba(231, 161, 55, 0.30)",secondary:"rgba(231, 161, 55, 0.30)",tertiary:"rgba(162, 105, 50, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},green:{stroke:{secondary:"rgba(45, 153, 100, 0.20)"},fill:{primary:"rgba(45, 153, 100, 0.30)",secondary:"rgba(45, 153, 100, 0.30)",tertiary:"rgba(45, 153, 100, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},blue:{stroke:{secondary:"rgba(51, 126, 169, 0.20)"},fill:{primary:"rgba(51, 126, 169, 0.33)",secondary:"rgba(51, 126, 169, 0.33)",tertiary:"rgba(51, 126, 169, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},purple:{stroke:{secondary:"rgba(155, 97, 211, 0.18)"},fill:{primary:"rgba(155, 97, 211, 0.28)",secondary:"rgba(155, 97, 211, 0.28)",tertiary:"rgba(155, 97, 211, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},pink:{stroke:{secondary:"rgba(220, 76, 145, 0.22)"},fill:{primary:"rgba(220, 76, 145, 0.30)",secondary:"rgba(220, 76, 145, 0.30)",tertiary:"rgba(220, 76, 145, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}}}};function a(e,t){const o=(0,r().VA)(e),a="lightgray"===o?"gray":o;return{...n[t.mode][a],icon:{primary:r().l8[t.mode][a]}}}},345022:(e,t,o)=>{o.d(t,{A:()=>n});o(242343);var r=o(163643);const n=function(e){let{style:t,styleParentContainer:n,isTriColored:a}=e;const i=(0,o(653998).tz)();return(0,r.jsxs)("div",{"aria-valuetext":i.formatMessage({id:"loadingDots.label",defaultMessage:"Loading..."}),role:"progressbar",className:"loading-dots",style:{...n},children:[(0,r.jsx)("div",{className:"loading-dot",style:{...t,...a&&{backgroundColor:"#F6C050"}}}),(0,r.jsx)("div",{className:"loading-dot",style:{...t,...a&&{backgroundColor:"#ED6A5F"}}}),(0,r.jsx)("div",{className:"loading-dot",style:{...t,...a&&{backgroundColor:"#5F9CDB"}}})]})}},395705:(e,t,o)=>{o.d(t,{G:()=>l,e:()=>i});var r=o(242343),n=()=>o(174114),a=o(163643);let i=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});const l=r.forwardRef((function(e,t){const{propertySchema:r,format:l}=e,{name:s,type:c,icon:d}=r,p=(0,o(622286).X)("nds_default_property_noticon"),{isMobile:u}=(0,o(237385).Y0)(),y=(0,n().IS)((e=>({propertyIcon:{fill:e.regularIconColor,marginLeft:6,marginRight:2}})),[]),m=(0,n().DP)(),f=l===i.Name?s:o(206183).dC[c];return(0,a.jsx)(o(535906).A,{title:f,icon:(0,a.jsx)(o(916963).zB,{icon:d,type:c,size:u?18:16,theme:m,style:y.propertyIcon,isDefaultNoticonEnabled:p}),...e})}))},404042:(e,t,o)=>{o.d(t,{A:()=>p});o(242343);var r=()=>o(803290),n=()=>o(455831),a=()=>o(653998),i=()=>o(220413),l=()=>o(31448),s=()=>o(678523),c=()=>o(943066),d=o(163643);const p=function(e){let{subscriptionTier:t,mobileStyle:p,desktopStyle:u,analyticsName:y,onClick:m,disableTooltip:f,tooltipContent:g}=e;const h=(0,o(174114).DP)(),A=(0,o(237385).v3)(),{device:v}=A,b=(0,r().K8)((()=>{const{currentSpaceStore:e}=o(485966).default.state;return null==e?void 0:e.canAdmin()}),[]),C=(0,r().K8)((()=>function(e,t){switch(e){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?i().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:l().Wy.medium};default:return{}}}(t,h)),[t,h]);if(v.isMobileNative)return null;let x;return"personal"===t?x=(0,d.jsx)(a().sA,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"}):(0,n().$P)(t)?x=(0,d.jsx)(a().sA,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"}):(0,n().tL)(t)?x=(0,d.jsx)(a().sA,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"}):(0,n().OX)(t)?x=(0,d.jsx)(a().sA,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"}):(0,o(76394).HB)(t),v.isMobile||!b?(0,d.jsx)(s().A,{mobileStyle:p,children:x}):(0,d.jsx)(o(103151).A,{delayThreshold:120,disableTooltip:f,placement:o(907721).W.Bottom,renderTooltip:()=>(0,d.jsx)("div",{style:{maxWidth:500},children:g?(0,d.jsx)(a().sA,{defaultMessage:"{tooltipText}",id:"upgradeButton.upgrade.custom.tooltip",values:{tooltipText:g}}):(0,d.jsx)(a().sA,{defaultMessage:"Upgrade to use this feature.",id:"upgradeButton.upgrade.tooltip"})}),originGap:6,render:e=>(0,d.jsx)(s().A,{desktopStyle:u,innerStyle:C,onClick:e=>function(e,t,o,r,n){c().K(r,{from:t,upsell:{type:"product",product:o,limit:{type:"none"},trialability:"none"}}),n&&n(e)}(e,y,t,A,m),...e,children:x})})}},432945:(e,t,o)=>{o.d(t,{B:()=>c,I:()=>s});var r=()=>o(963644),n=()=>o(154956),a=()=>o(445322),i=()=>o(196916),l=()=>o(84543);async function s(e){let{theme:t,collectionContextStore:o,environment:r,property:n,from:i,schema:l,onDeleteCompleted:s,...d}=e;await a().q({environment:r,collectionContextStore:o,property:n,handleDeleteAccept:async()=>{await c({collectionContextStore:o,environment:r,property:n,schema:l,from:i,...d}),null==s||s()},theme:t,from:i})}async function c(e){const{collectionContextStore:t,environment:o,property:a,schema:s,from:c,...d}=e,p=t.collectionStore();if(!p)return;const u=p.getSchema()[a];await l().createAndCommitAsync({environment:o,userAction:"TableHeaderCell.handleDeleteAccept",waitForServerCommit:!1,perform:async e=>{await n().PF({environment:o,collectionStore:p,schema:s,property:a,transaction:e}),d.updateFrozenColumn&&i().sp({environment:o,collectionContextStore:t,currentIndex:d.columnIndex,entrypoint:d.updateFrozenColumnEntrypoint,transaction:e,propertyAction:"delete"})}}),u&&(0,r().i)({environment:o,collectionContextStore:t,property_type:u.type,from:c,property:a})}},445322:(e,t,o)=>{o.d(t,{q:()=>f});o(362833),o(242343);var r=()=>o(653998),n=()=>o(31448),a=()=>o(190717),i=()=>o(709237),l=()=>o(755786),s=()=>o(471979),c=()=>o(823301),d=()=>o(727528),p=()=>o(626911),u=()=>o(145046),y=()=>o(84543),m=o(163643);async function f(e){const{environment:t,collectionContextStore:o,property:f,handleDeleteAccept:g}=e,h=o.collectionStore();if(!h)return;if(h.isTypedProperty(f)){if(await a().nD({environment:t,property:f,collectionContextStore:o,theme:e.theme,from:e.from}))return}const A=(0,d().R5)({environment:t,collectionStore:h,propertyId:f});if(A.length>0){if((0,c().E_)({environment:t,collectionStore:h,propertyId:f,compoundTemplateInstancesToDelete:A,collectionContextStore:o,from:e.from}))return}else if(((0,s().k$)(f)||(0,s().Do)({collectionStore:h,propertyId:f}))&&(0,s().aF)(h)&&(0,s().Io)()){if((0,c().I5)({environment:t,collectionStore:h,propertyId:f,collectionContextStore:o,from:e.from}))return}const v=o.normalizedSchemaStore.state,b=v[f],C=l().pg(o,b);await(null==C?void 0:C.load());const x=C&&l().D5(o,f,C),_=C&&l().uf(C),S=C&&h.id===C.id,k=[{label:(0,m.jsx)(r().sA,{id:"database.viewSettings.propertyTab.deleteProperty.modal.confirmButton",defaultMessage:"Delete"}),color:"red",onAccept:g}];let w;if(x&&h&&_&&!S&&k.push({label:(0,m.jsx)(r().sA,{id:"database.tableHeaderCell.deleteProperty.modal.inverseConfirmButton",defaultMessage:"Delete, but keep related property"}),color:"red",onAccept:()=>{y().createAndCommit({userAction:"collectionPropertyActions.showDeletePropertyDialog",environment:t,canUndo:!0,perform:e=>{if(b&&"relation"===b.type&&b.property&&C){const o=b.property,r=C.getSchema();p().C4({environment:t,collectionStore:C,propertySchema:r[o],property:o,targetPropertyID:void 0,autoRelate:h.isSyncedCollection()&&!C.isSyncedCollection()?{enabled:!1}:b.autoRelate,transaction:e})}p().t$({environment:t,collectionStore:h,property:f,transaction:e})}})}}),"auto_increment_id"===(null==b?void 0:b.type))w=l().me(v)?(0,m.jsx)(r().sA,{id:"database.tableHeaderCell.deleteUniqueIdWithGithubProperty.modal.prompt",defaultMessage:"You will no longer be able to link new GitHub PRs and status automations will stop working."}):(0,m.jsx)(r().sA,{id:"database.tableHeaderCell.deleteUniqueIdProperty.modal.prompt",defaultMessage:"The ID property will be permanently deleted."});else if("status"===(null==b?void 0:b.type)){const e=l().AX(v);if(e){const t=e.connectedRelation.automation;t&&t[f]&&(w=(0,m.jsx)(r().sA,{id:"database.tableHeaderCell.deleteStatusProperty.modal.prompt",defaultMessage:"Deleting this status property will stop the GitHub Pull Requests status automation."}))}}else C&&_&&!S&&x&&(w=(0,m.jsx)(r().sA,{id:"database.tableHeaderCell.deleteRelatedProperty.modal.prompt",defaultMessage:"This property has a related property on {relationTargetName} which will also be deleted.",values:{relationTargetName:(0,m.jsx)(i().A,{style:{display:"inline",fontWeight:n().Wy.medium},store:C})}}));u().ui({message:(0,m.jsx)("span",{children:(0,m.jsx)(r().sA,{id:"database.tableHeaderCell.deleteProperty.modal.prompt",defaultMessage:"Delete this property from {databaseName}? It will be removed from all views.",values:{databaseName:(0,m.jsx)(i().A,{style:{display:"inline",fontWeight:n().Wy.bold},shouldWrap:!0,store:h})}})}),description:w,showCancel:!0,keepFocus:!0,items:k,mode:"wide"})}},493264:(e,t,o)=>{o.d(t,{A:()=>m});o(725707),o(491955),o(403517),o(113085);var r=o.n(o(567012)),n=o(242343),a=()=>o(564134),i=()=>o(716605),l=()=>o(653998),s=()=>o(975392),c=()=>o(640979),d=()=>o(858023),p=()=>o(88271),u=()=>o(395705),y=o(163643);const m=function(e){let{selectedProperty:t,onAccept:m,schema:f,onClose:g,allowProperty:h,isRelationProperty:A}=e;const v=(0,o(237385).v3)(),b=(0,l().tz)(),[C,x]=(0,n.useState)("");let _=Object.keys(f);const S=_.some(o(594876).u);_=s().Ul(_,(e=>{const t=(0,i()._g)({schema:f,property:e});return t?t.name:""}));const k=S?a().Ho:a().rn;if(_=s().FF(_,k),_.unshift(k),h&&(_=_.filter((e=>{const t=(0,i()._g)({schema:f,property:e});return t&&h(t)}))),C){let e=_.map((e=>{const t=(0,i()._g)({schema:f,property:e});return t&&t.name}));e=r().filter(C,e).map((e=>{let{original:t}=e;return t})),_=_.filter((t=>{const o=(0,i()._g)({schema:f,property:t});return o&&o.name&&e.includes(o.name)}))}const w=C||_.length>o(475923).R8,I=s().oE(_.map((e=>{const o=(0,i()._g)({schema:f,property:e});if(!o)return null;return{key:e,render:r=>(0,y.jsx)(u().G,{...r,propertySchema:o,format:u().e.Name,isChecked:e===t}),action:()=>m(e)}}))),M=[{key:0,render:e=>(0,y.jsx)(p().A,{...e}),items:I}],{device:j}=v,P=w?(0,y.jsx)(p().A,{isInput:!0,children:(0,y.jsx)(o(401382).Ay,{focus:!j.isMobile||void 0,focusAfterAnimation:!0,value:C,onChange:e=>x(e.target.value),placeholder:A?b.formatMessage({defaultMessage:"Search for a relation property…",id:"propertySelectMenu.searchForProperty.relation.placeholder"}):b.formatMessage({defaultMessage:"Search for a property…",id:"propertySelectMenu.searchForProperty.default.placeholder"})})}):null;let T;return T=j.isMobile?{menuType:c().gu.Modal,title:A?b.formatMessage({defaultMessage:"Relation property",id:"propertySelectMenu.mobileMenu.relationProperty.header"}):b.formatMessage({defaultMessage:"Property",id:"propertySelectMenu.mobileMenu.property.header"}),right:(0,y.jsx)(o(743668).CancelMenuText,{}),onClickRight:g,header:P}:{menuType:c().gu.Popup,width:280,maxHeight:480,header:P},(0,y.jsx)(o(935091).A,{...T,children:0===I.length?(0,y.jsx)(p().A,{children:(0,y.jsx)(o(975515).A,{title:(0,y.jsx)(l().sA,{defaultMessage:"No results",id:"propertySelectMenu.search.noResults.title"})})}):(0,y.jsx)(d().Ay,{type:d().Oh.Vertical,sections:M,onAccept:g,initialFocus:C.length>0?0:void 0})})}},511952:(e,t,o)=>{o.d(t,{A:()=>s});var r=o(242343),n=()=>o(803290),a=()=>o(917717),i=o(163643);function l(e,t){const{onClose:l,persistOnClose:s,render:p,stopClickPropagation:u,onClick:y,disablePopup:m,disabled:f,forceInitialInbound:g,renderOrigin:h,originGap:A,borderRadius:v,popupWrapStyle:b}=e,C=(0,n().uB)(e.buttonPopupStore,o(962373).A);(0,r.useEffect)((()=>()=>{C.setState({open:!1})}),[C]);const x=(0,r.useCallback)((()=>c(l,s,C)),[l,s,C]),_=(0,r.useCallback)((()=>(0,i.jsx)(d,{onClose:l,persistOnClose:s,render:p,buttonPopupStore:C})),[l,s,p,C]),S=(0,r.useCallback)((e=>function(e,t,o,r,n){t&&(null==e||e.stopPropagation());if(e&&a().Vt(e))return;o&&o(e);r||n.setState({...n.state,open:!0})}(e,u,y,m,C)),[u,y,m,C]),k=(0,n().K8)((()=>h({...e,onClick:f?o(975392).D_:S})),[f,S,e,h]),w=(0,n().K8)((()=>C.state.open),[C]);return(0,i.jsx)(o(443252).Ay,{ref:t,...e,forceInitialInbound:Boolean(g),render:_,open:w,onDismiss:x,origin:k,originGap:A,borderRadius:v,popupWrapStyle:b,trapFocus:!0})}const s=r.forwardRef(l);function c(e,t,o){e&&e(),t||o.reset()}function d(e){let{onClose:t,persistOnClose:o,render:a,buttonPopupStore:l}=e;const s=(0,r.useCallback)((()=>c(t,o,l)),[t,o,l]),d=(0,n().K8)((()=>a({close:s})),[a,s]);return(0,i.jsx)(i.Fragment,{children:d})}},531568:(e,t,o)=>{o.d(t,{H2:()=>h,iB:()=>A,cG:()=>m,UY:()=>v,x3:()=>f});var r=o(242343),n=()=>o(803290),a=()=>o(174114),i=()=>o(403026),l=()=>o(840024),s=()=>o(85208),c=()=>o(476026),d=()=>o(63463);const p=o.p+"c9223887dcb57b7d.gif",u=o.p+"7e9cbd56b1eca7b9.gif";var y=o(163643);function m(e){const{variant:t,style:o={},forceSparkles:r}=e,a=(0,n().O$)(l().ts);let i;return i=!r&&a?(0,y.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,y.jsx)(c().o,{variant:t,shadowVariant:"light"})}):(0,y.jsx)(s().g,{variant:r?"small":t}),(0,y.jsx)("div",{style:o,children:i})}function f(e){const{variant:t}=e,o=(0,n().O$)(l().ts),r=(0,a().IS)((()=>({sparklesWrapper:{borderRadius:"100%",border:"2px solid RGB(182,208,240)",marginRight:8,marginLeft:8,padding:4},badge:{position:"absolute",left:"27px",top:"-5px"},faceWrapper:{marginRight:8}})),[]);return o?(0,y.jsx)("div",{style:r.faceWrapper,children:(0,y.jsx)(g,{variant:t})}):(0,y.jsxs)("div",{style:r.sparklesWrapper,children:[(0,y.jsx)(s().g,{variant:t}),(0,y.jsx)("div",{style:r.badge,children:(0,y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"11",viewBox:"0 0 10 11",fill:"none",children:(0,y.jsx)("circle",{cx:"5",cy:"5.5",r:"4",fill:"#2383E2",stroke:"white",strokeWidth:"2"})})})]})}function g(e){const{variant:t}=e,o="dark"===(0,a().DP)().mode,[n,i]=(0,r.useState)(!0);(0,r.useEffect)((()=>{setTimeout((()=>{i(!1)}),6e3)}),[]);const l=(0,r.useMemo)((()=>{if(n)return o?p:u}),[o,n]);return(0,y.jsx)("div",{style:{marginLeft:8},children:(0,y.jsx)(c().o,{variant:t,shadowVariant:"light",wrapWithPadding:!0,imgSource:l})})}function h(){const e=(0,n().O$)(l().ts),t=(0,a().IS)((e=>({faceImgStyles:{width:20,height:20,background:e.assistantCornerButtonBackground,borderRadius:"50%",border:`1px solid ${e.tableDividerColor}`},sparklesIconStyle:{width:16,height:16,fill:e.icon.secondary}})),[]);return e?(0,y.jsx)("img",{style:t.faceImgStyles,src:d(),role:"presentation",alt:"Notion AI Face"}):(0,i().X)(t.sparklesIconStyle)}function A(){const e=(0,n().O$)(l().ts),t=(0,a().IS)((e=>({faceImgStyles:{width:20,height:20,background:e.assistantCornerButtonBackground,borderRadius:"50%",border:`1px solid ${e.tableDividerColor}`},sparklesIconStyle:{width:16,height:16,fill:e.icon.secondary}})),[]);return e?(0,y.jsx)("img",{style:t.faceImgStyles,src:d(),role:"presentation",alt:"Notion AI Face"}):(0,i().X)(t.sparklesIconStyle)}function v(){const e=(0,n().O$)(l().ts),t=(0,a().IS)((e=>({faceImgStyles:{width:20,height:20,background:e.assistantCornerButtonBackground,borderRadius:"50%",border:`1px solid ${e.tableDividerColor}`,marginLeft:-2,marginRight:2},sparklesIconStyle:{width:16,height:16,marginRight:2},sparklesIconWrapper:{borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center"}})),[]);return e?(0,y.jsx)("img",{style:t.faceImgStyles,src:d(),role:"presentation",alt:"Notion AI Face"}):(0,y.jsx)("div",{style:t.sparklesIconWrapper,children:(0,i().X)(t.sparklesIconStyle)})}},555296:(e,t,o)=>{o.d(t,{h:()=>a});o(242343);var r=o(163643);const n={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"}),(0,r.jsx)("path",{d:"M10 1.95a4 4 0 0 0-4 4v1.433a2.426 2.426 0 0 0-2.025 2.392v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.426 2.426 0 0 0 14 7.383V5.95a4 4 0 0 0-4-4m2.75 5.4h-5.5v-1.4a2.75 2.75 0 0 1 5.5 0zM5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},a=(0,o(680369).wt)("lock",n)},702469:(e,t,o)=>{o.d(t,{A:()=>r});const r=o(129044).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},702978:(e,t,o)=>{o.d(t,{U:()=>n});var r=()=>o(702469);async function n(e){return new Promise((t=>{r().A.setState({open:!0,onClose:()=>{r().A.setState({open:!1}),t(!1)},onConfirm:()=>{r().A.setState({open:!1}),t(!0)},...e})}))}},715768:(e,t,o)=>{o.d(t,{v:()=>n});o(242343);const r={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M10.625 3a.625.625 0 1 0-1.25 0v12.491l-4.333-4.333a.625.625 0 1 0-.884.884l5.4 5.4a.62.62 0 0 0 .884 0l5.4-5.4a.625.625 0 0 0-.884-.884l-4.333 4.333z"})},n=(0,o(680369).wt)("arrowStraightDown",r)},725460:(e,t,o)=>{o.d(t,{A:()=>i});var r=o(242343),n=o(163643);function a(e,t){return(0,n.jsx)(o(932322).Ay,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const i=(0,r.forwardRef)(a)},793613:(e,t,o)=>{o.d(t,{E:()=>m});o(242343);var r=()=>o(803290),n=()=>o(174114),a=()=>o(653998),i=()=>o(622286),l=()=>o(485966),s=()=>o(695951),c=o(163643);const d={define_variables_automation_action:{launchDateMs:17277408e5,expiryDateMs:1738368e6},passkey_setting:{launchDateMs:1729101727e3,expiryDateMs:1738432882e3},http_request_automation_action:{launchDateMs:173324302e4,expiryDateMs:1738368e6},publish_site_settings_embed_page:{launchDateMs:1736208e6,expiryDateMs:1743984e6},generalized_recurrence_automations:{launchDateMs:17365536e5,expiryDateMs:17460576e5},ai_page_translation_topbar_more_action:{launchDateMs:1740451280830,expiryDateMs:17434656e5},verification:{launchDateMs:1740096e6,expiryDateMs:174375e7},notion_ai_workspace_settings:{launchDateMs:17424288e5,expiryDateMs:17550432e5},notion_mail_launch_modal:{launchDateMs:17446752e5,expiryDateMs:17525376e5},notion_mail_launch_modal_2:{launchDateMs:17446752e5,expiryDateMs:17578944e5},ui_doc_example:{launchDateMs:19249056e5,expiryDateMs:19249056e5},show_integration_webhooks_callout:{launchDateMs:17428608e5,expiryDateMs:17506368e5},collection_property_permissions:{launchDateMs:17433792e5,expiryDateMs:17671392e5},salesforce_sync_unfurling_option:{launchDateMs:17443296e5,expiryDateMs:17538336e5}};function p(e){let{style:t}=e;const o=(0,n().IS)((e=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...t}})),[t]);return(0,c.jsx)(s().A,{color:"blue",style:o.badge,content:(0,c.jsx)(a().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}function u(e){let{style:t,newBadgeKey:o}=e;const{launchDateMs:n,expiryDateMs:a}=d[o];return(0,r().K8)((()=>{const{currentUserSettingsStore:e}=l().default.state;if(e&&e.isReady()){var t;const o=null===(t=e.getSettings())||void 0===t?void 0:t.signup_time;if(o&&o>n)return!1}return Date.now()<=a}),[a,n])?(0,c.jsx)(p,{style:t}):null}function y(e){let{style:t,newBadgeKey:o}=e;return(0,i().X)(o)?(0,c.jsx)(p,{style:t}):null}function m(e){return e.didUserEngage?null:"feature_gate"===e.keyType?(0,c.jsx)(y,{...e}):(0,c.jsx)(u,{...e})}},900135:(e,t,o)=>{o.r(t),o.d(t,{autofillPropertyForBlocks:()=>Q,autofillPropertyForCollection:()=>ee,fillAllPagesMessages:()=>V,getDefaultAiInference:()=>le,getPropertyCompletionForBlock:()=>ie,saveOrRemovePropertyAiInference:()=>ae,triggerAiAutofillUpsell:()=>Y});o(362833),o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601),o(725707),o(491955),o(500234),o(771702),o(403517);var r=o(242343),n=()=>o(371807),a=()=>o(564134),i=()=>o(716605),l=()=>o(214144),s=()=>o(582226),c=()=>o(653998),d=()=>o(543736),p=()=>o(204132),u=()=>o(76394);const y=(0,o(851552).Dv)("fillAutofillPropertiesInViewTask");var m=()=>o(469880),f=()=>o(396806),g=()=>o(818369),h=()=>o(91472),A=()=>o(702978),v=()=>o(145046),b=()=>o(839618),C=()=>o(575015),x=()=>o(448316),_=()=>o(84543),S=()=>o(11639),k=()=>o(810813),w=()=>o(105429),I=()=>o(204435),M=()=>o(13143),j=o(163643);const P=function(e){let{environment:t,inferenceIds:n,aiInference:a}=e;const i=(0,o(803290).K8)((()=>{const{state:e}=w().m;return"uninitialized"===e.type?null:{numBlocksToAutofill:e.numBlocksToAutofill,numBlocksAutofilled:e.numBlocksAutofilled,propertySchema:e.propertySchema,collectionId:e.collectionId,sessionId:e.sessionId,haveAllBlocksCompletedAutofill:e.haveAllBlocksCompletedAutofill}}),[]),l=(0,r.useCallback)((()=>{i&&(n.forEach((e=>{m().oe(t,{ai_inference_type:a.type,type:"undo_from_snackbar",inference_id:e,collection_id:i.collectionId,session_id:i.sessionId})})),o(399309).tN({environment:t,preventSelectText:!0}),C().N2(),w().m.setState({type:"filling",...i,didInterruptStreaming:!0}))}),[i,t,a,n]);if(!i)return null;const{numBlocksToAutofill:s,numBlocksAutofilled:d,propertySchema:{name:p}}=i;return d===s?(0,j.jsxs)(I().fI,{gap:4,alignItems:"center",children:[(0,o(150936).b)({width:16}),(0,j.jsx)(c().sA,{defaultMessage:'AI updated "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillInProgress",values:{propertyName:p,numPages:s}}),(0,j.jsx)(M().Ag,{onClick:l,children:(0,j.jsx)(c().sA,{defaultMessage:"Undo",id:"snackbar.aiAutofill.undo"})}),(0,j.jsx)(M().Ag,{onClick:()=>{C().N2()},children:(0,j.jsx)(c().sA,{defaultMessage:"Close",id:"snackbar.aiAutofill.close"})})]}):(0,j.jsxs)(I().fI,{gap:4,alignItems:"center",children:[(0,j.jsx)(o(966789).A,{}),0===d?(0,j.jsx)(c().sA,{defaultMessage:'AI updating "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillStarting",values:{propertyName:p,numPages:s}}):(0,j.jsx)(c().sA,{defaultMessage:'AI updated "{propertyName}" on {numFilledPages} of {numTotalPages} pages',id:"snackbar.aiAutofill.completedAutofill",values:{propertyName:p,numFilledPages:d,numTotalPages:s}}),(0,j.jsx)(M().Ag,{onClick:l,children:(0,j.jsx)(c().sA,{defaultMessage:"Stop & undo",id:"snackbar.aiAutofill.undoAndStop"})})]})};var T=()=>o(117041),D=()=>o(190217),B=()=>o(477784),N=()=>o(92451),F=()=>o(485966),W=()=>o(836331),O=()=>o(413871),R=()=>o(427846),U=()=>o(943066),L=()=>o(613313),H=()=>o(133926),z=()=>o(183219);const V=(0,c().YK)({fillAllPagesTooltip:{defaultMessage:"{hasNames, select, true {Autofill {propertyName} for all pages in {collectionName}} other {Autofill this property for all pages in the database}}",id:"aiAutofill.fillAllPages.buttonTooltip"},fillAllPagesAddOnMessage:{defaultMessage:"Only with Notion AI add-on",id:"aiAutofill.fillAllPages.onlyWithAiAddOnMessageInTooltip"},fillAllPagesAddAiMessage:{defaultMessage:"Only with upgraded Notion AI",id:"aiAutofill.fillAllPages.onlyWithAiBusinessMessageInTooltip"}});function E(e){const{environment:t,propertyId:o,propertySchema:r,storesWithCompletions:n,useTemporaryStore:a,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:l,clipboardActions:s,doneStreaming:c,aiInferenceOverride:d}=e;_().createAndCommit({userAction:"BlockPropertyValue.handleActionButtonClick.aiAutofill",environment:t,canUndo:!Boolean(a),undoCheckpoint:!0,perform:e=>{K({environment:t,propertyId:o,propertySchema:r,storesWithCompletions:n,useTemporaryStore:a,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:l,clipboardActions:s,doneStreaming:c,aiInferenceOverride:d,transaction:e})}})}function K(e){var t;const{environment:o,propertyId:r,propertySchema:n,storesWithCompletions:l,useTemporaryStore:s,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:d,clipboardActions:p,doneStreaming:y,aiInferenceOverride:m,transaction:f}=e;for(const{store:g,temporaryStore:h,completion:A}of l){const e=s?h:g;let l;switch(n.type){case"text":l=p.getInlineTitleValueFromClipboardTextHtml({text:A.trim(),stripText:!1,stripSurroundingWhitespace:!0,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:d});break;case"multi_select":case"select":const e=s?null===(t=g.getAssociatedCollectionStore())||void 0===t?void 0:t.clone(h.inMemoryRecordCache):g.getAssociatedCollectionStore(),o=m??n.select_ai_inference;let v=A.trim().split(",").map((e=>e.trim()));if(y||(v=v.slice(0,-1)),e&&null!=o&&o.add_options){const t=(0,a().nP)({newTokenValues:v.length>0&&"select"===n.type?[[v[0]]]:[v],property:r,propertySchema:n,collectionId:e.id});if(t)for(const o of t)_().applyOperation({store:e,operation:o,transaction:f})}null!=o&&o.add_options||(v=v.filter((e=>{var t;return null===(t=n.options)||void 0===t?void 0:t.find((t=>t.value===e))}))),l=(0,i().rK)(v);break;default:(0,u().HB)(n)}x().R9({environment:o,store:e.getPropertyStore(r),value:l,transaction:f})}}const $=(0,c().YK)({FAILED_TO_AUTOFILL:{defaultMessage:"Something went wrong. Please try again later",id:"propertyCompletionActions.propertyCompletionActions.error.unableToAutofill"},INVALID_PROPERTY_FOR_AUTOFILL:{defaultMessage:"Invalid property configuration for AI autofill",id:"propertyCompletionActions.propertyCompletionActions.error.invalidPropertyForAutofill"},NO_BLOCKS_TO_AUTOFILL:{defaultMessage:"Nothing to update with AI",id:"propertyCompletionActions.propertyCompletionActions.error.noBlocksToAutofill"}}),Z=(0,c().YK)({featureUnavailable:{id:"completionActions.featureNotEnabledError",defaultMessage:"This feature is not currently enabled"}});function q(e){let{autofillPropertyResult:t}=e;const o=B().A.formatMessage($[t]);C().N2(),v().c1(o)}const G={ai_limit_property_autofill:(0,j.jsx)(c().sA,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to add Notion AI.",id:"aiAutofill.outOfAiUpsellDialogMessage"}),ai_autofill_try_on_view:(0,j.jsx)(c().sA,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to add Notion AI.",id:"aiAutofill.outOfAiUpsellDialogMessage"}),ai_autofill_on_page_edit:(0,j.jsx)(c().sA,{defaultMessage:"Auto-update requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.autoUpdateOnPageEditUpsellDialogMessage"}),ai_autofill_fill_all_pages:(0,j.jsx)(c().sA,{defaultMessage:"Updating all pages requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.fillAllPagesUpsellDialogMessage"}),ai_autofill_bulk_fill:(0,j.jsx)(c().sA,{defaultMessage:"Filling more pages at once requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.bulkFillUpsellDialogMessage"})},X={ai_limit_property_autofill:(0,j.jsx)(c().sA,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.outOfAiBusinessUpsellDialogMessage"}),ai_autofill_try_on_view:(0,j.jsx)(c().sA,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.outOfAiUpgradedUpsellDialogMessage"}),ai_autofill_on_page_edit:(0,j.jsx)(c().sA,{defaultMessage:"Auto-update requires upgraded Notion AI. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.autoUpdateOnPageEditAiUpgradedUpsellDialogMessage"}),ai_autofill_fill_all_pages:(0,j.jsx)(c().sA,{defaultMessage:"Updating all pages requires upgraded Notion AI. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.fillAllPagesAiUpgradedUpsellDialogMessage"}),ai_autofill_bulk_fill:(0,j.jsx)(c().sA,{defaultMessage:"Filling more pages at once requires upgraded Notion AI. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.bulkFillAiUpgradedUpsellDialogMessage"})};function Y(e){var t;let{environment:o,from:r,upsell:n}=e;const a=(0,L().Le)()?X:G;null!==(t=F().default.state.currentSpaceStore)&&void 0!==t&&t.canAdmin()||v().c1(a[r]),U().K(o,{from:r,upsell:n})}function J(e){let{errorCode:t,environment:o,autofillAvailability:r}=e;return 405===t?C().D6({label:B().A.formatMessage(Z.featureUnavailable)}):(402===t&&r.upsell&&(C().N2(),Y({environment:o,from:"ai_limit_property_autofill",upsell:r.upsell})),z().showCompletionErrorWithCode(t))}async function Q(e){var t;let{environment:o,stores:r,property:i,propertySchema:s,userEventForAnalytics:c,sessionIdForAnalytics:p,collectionContextStore:y,from:A,isBulkAction:v,aiInferenceOverride:b,transaction:x}=e;const _=p||l().JW(),S=i,k=r.map((e=>({spaceId:e.getSpaceId(),...e.pointer,propertyId:S,inferenceId:l().JW()}))),I=r[0].getAssociatedCollectionId()??(null===(t=r[0].getCollectionStore())||void 0===t?void 0:t.id),M=new(n().A)({name:"propertyCompletionActions.autofillPropertyForBlocks"});if(w().m.setIsWriting({stores:r,propertySchema:s,sessionIdForAnalytics:p}),"uninitialized"!==w().m.state.type&&(0,a().$M)(s)&&I){C().D6({label:(0,j.jsx)(P,{environment:o,inferenceIds:k.map((e=>e.inferenceId)),aiInference:(0,a().om)(s)}),durationMs:R().LX});try{var B,N,W;if(o.defaultRecordCache.inMemoryRecordCache.addCacheOverride(M),!(0,u().EI)(k))return q({autofillPropertyResult:"NO_BLOCKS_TO_AUTOFILL"});const e=b||(0,a().om)(s);if(!e)return q({autofillPropertyResult:"INVALID_PROPERTY_FOR_AUTOFILL"});k.forEach((t=>{m().oe(o,{type:c,inference_id:t.inferenceId,ai_inference_type:e.type,collection_id:I,session_id:_})})),null!==(B=F().default.state.currentSpaceStore)&&void 0!==B&&B.id&&g().callApi({eventName:"publishAiSession",environment:o,data:{inference_type:"autofill",id:_,spaceId:F().default.state.currentSpaceStore.id,metadata:{blockPropertyPointers:k,aiInference:e,collection_id:I}}});const t=await(0,H().Bw)(o,{name:"collection_property_autofill",spaceId:null===(N=F().default.state.currentSpaceStore)||void 0===N?void 0:N.id,userId:null===(W=F().default.state.currentUserStore)||void 0===W?void 0:W.id,amount:"unknown"}),n=await g().callStreamApi({eventName:"getCompletionForProperty",environment:o,data:{blockPropertyPointers:k,aiInference:e,aiSessionId:_,model:"default"}});if("success"!==n.type)return q({autofillPropertyResult:"FAILED_TO_AUTOFILL"});y&&(0,f().E)({block_id:r[0].pointer.id,property:S,property_type:s.type,from:A,environment:o,collectionContextStore:y,isFromBulkActionsToolbar:v});const i=Object.fromEntries(r.map((e=>[e.pointer.id,{store:e,temporaryStore:e.clone(M),completion:""}]))),l=new Set,[p,C,j]=await Promise.all([T().g.load(),D().S.load(),h().R.clipboardActions.load()]);if(d().hS.is(n.data)){for await(const e of n.data){if("error"===e.type)return w().m.setState({...w().m.state,didInterruptStreaming:!0}),J({errorCode:e.errorCode,environment:o,autofillAvailability:t});if(w().m.state.didInterruptStreaming)return;const r=i[e.blockPropertyPointer.id],n=r.completion+e.completion;i[e.blockPropertyPointer.id]={...r,completion:n},l.add(e.blockPropertyPointer.id),x?K({environment:o,propertyId:S,propertySchema:s,storesWithCompletions:Object.values(i),useTemporaryStore:!0,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:C,clipboardActions:j,doneStreaming:!0,aiInferenceOverride:b,transaction:x}):E({environment:o,propertyId:S,propertySchema:s,storesWithCompletions:Object.values(i),useTemporaryStore:!0,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:C,clipboardActions:j,aiInferenceOverride:b}),w().m.setState({...w().m.state,numBlocksAutofilled:l.size})}w().m.setState({...w().m.state,haveAllBlocksCompletedAutofill:!0})}o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(M),x?K({environment:o,propertyId:S,propertySchema:s,storesWithCompletions:Object.values(i),useTemporaryStore:!1,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:C,clipboardActions:j,doneStreaming:!0,aiInferenceOverride:b,transaction:x}):E({environment:o,propertyId:S,propertySchema:s,storesWithCompletions:Object.values(i),useTemporaryStore:!1,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:C,clipboardActions:j,doneStreaming:!0,aiInferenceOverride:b})}finally{o.defaultRecordCache.inMemoryRecordCache.hasCacheOverride(M)&&o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(M)}}}async function ee(e){const t=W().default.checkGate({gateName:"autofill_all_pages_use_new_endpoint"})?re:ne;return await t(e)}const te=(0,c().YK)({invalidCollectionSource:{id:"propertyCompletionActions.error.invalidCollectionSource",defaultMessage:"There was a problem with the database."},noMemcachedRecord:{id:"propertyCompletionActions.error.noMemcachedRecord",defaultMessage:"Something went wrong. Please try again."},lockAlreadyTaken:{id:"propertyCompletionActions.error.lockAlreadyTaken",defaultMessage:"A fill is already in progress"},invalidUser:{id:"propertyCompletionActions.error.invalidUser",defaultMessage:"The provided user information is not valid."},invalidCollectionView:{id:"propertyCompletionActions.error.invalidCollectionView",defaultMessage:"We encountered an issue accessing the collection view."},invalidCollection:{id:"propertyCompletionActions.error.invalidCollection",defaultMessage:"The collection you are trying to access is not valid."},noLoadedUser:{id:"propertyCompletionActions.error.noLoadedUser",defaultMessage:"User information is missing."},noUserTimeZone:{id:"propertyCompletionActions.error.noUserTimeZone",defaultMessage:"User time zone information is not available."},unauthorizedCollectionAccess:{id:"propertyCompletionActions.error.unauthorizedCollectionAccess",defaultMessage:"Insufficient permissions"},unableToQueryCollection:{id:"propertyCompletionActions.error.unableToQueryCollection",defaultMessage:"We couldn’t retrieve the collection details at this time."},invalidPropertyForAutofill:{id:"propertyCompletionActions.error.invalidPropertyForAutofill",defaultMessage:"The property provided for autofill is not valid."},NoResults:{id:"propertyCompletionActions.error.noResults",defaultMessage:"No results were found. Please try again."},somethingWentWrong:{id:"propertyCompletionActions.error.somethingWentWrong",defaultMessage:"Something went wrong. Please try again later."}});function oe(e){switch(e){case"invalidCollectionSource":return(0,j.jsx)(c().sA,{...te.invalidCollectionSource});case"noMemcachedRecord":return(0,j.jsx)(c().sA,{...te.noMemcachedRecord});case"lockAlreadyTaken":return(0,j.jsx)(c().sA,{...te.lockAlreadyTaken});case"invalidUser":return(0,j.jsx)(c().sA,{...te.invalidUser});case"invalidCollectionView":return(0,j.jsx)(c().sA,{...te.invalidCollectionView});case"invalidCollection":return(0,j.jsx)(c().sA,{...te.invalidCollection});case"noLoadedUser":return(0,j.jsx)(c().sA,{...te.noLoadedUser});case"noUserTimeZone":return(0,j.jsx)(c().sA,{...te.noUserTimeZone});case"unauthorizedCollectionAccess":return(0,j.jsx)(c().sA,{...te.unauthorizedCollectionAccess});case"unableToQueryCollection":return(0,j.jsx)(c().sA,{...te.unableToQueryCollection});case"invalidPropertyForAutofill":return(0,j.jsx)(c().sA,{...te.invalidPropertyForAutofill});case"NoResults":return(0,j.jsx)(c().sA,{...te.NoResults});case"somethingWentWrong":return(0,j.jsx)(c().sA,{...te.somethingWentWrong});default:return(0,j.jsx)(c().sA,{defaultMessage:"An unexpected error occurred. Please try again.",id:"propertyCompletionActions.error.unknown"})}}async function re(e){var t,o;const{environment:r,collectionStore:n,propertySchema:i,property:l,collectionViewStore:s}=e;if(!(0,a().$M)(i))return;const c=(0,a().om)(i);if(!n||!i||!c)return;const d=null===(t=F().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(!d)return;if(!(null===(o=F().default.state.currentUserStore)||void 0===o?void 0:o.id))return;const u=B().A.getIntl(),m=(0,N().tS)({environment:r,intl:u,store:n});if(!(await A().U({sourceAction:"fill_all_pages",propertyName:i.name,collectionName:m})))return;(0,S().u)({environment:r,event:{eventName:"generate_from_fill_all_pages_in_view",eventProperties:{collection_id:n.id,ai_inference_type:c.type}}});const f=(0,b().UT)(r,y,{spaceId:d,collectionSource:{id:n.id,type:"collection",spaceId:d},collectionViewPointer:s.pointer,propertyId:l});for await(const a of f){var g;if(p().Q.isFail(a)||"failure"===a.taskStatus)return void C().D6({label:oe("somethingWentWrong")});if("error"===(null===(g=a.value)||void 0===g?void 0:g.status)){const e=a.value.errorType;return void C().D6({label:oe(e)})}}}async function ne(e){var t;let{environment:o,collectionStore:r,propertySchema:n,property:i,sessionIdForAnalytics:c}=e;if(!(0,a().$M)(n))return;const d=(0,a().om)(n);if(!r||!n||!d)return;const p=await(0,H().Bw)(o,{name:"collection_property_autofill",spaceId:r.getSpaceId(),userId:null===(t=F().default.state.currentUserStore)||void 0===t?void 0:t.id,amount:"unknown"});if(!(0,H().e2)(p))return void Y({environment:o,from:"ai_autofill_fill_all_pages",upsell:p.upsell});const u=B().A.getIntl(),y=(0,N().tS)({environment:o,intl:u,store:r});if(!(await A().U({sourceAction:"fill_all_pages",propertyName:n.name,collectionName:y})))return;m().oe(o,{type:"generate_from_fill_all_pages",inference_id:l().JW(),ai_inference_type:d.type,collection_id:r.id,session_id:c??l().JW()});const f=[];f.push(s().op.update({pointer:r.pointer,path:["format","update_ai_inferences_status"],args:{[i]:{type:"requested",created_time:Date.now()}}})),(0,k().p)({environment:o,collectionStore:r,performTransaction:e=>{for(const t of f)_().applyOperation({store:(0,O().Oo)(r,t.pointer),operation:t,transaction:e})}})}function ae(e){const{environment:t,propertySchema:o,collectionStore:r,property:n,draftAiInference:i}=e;let l="";switch(o.type){case"text":l="ai_inference";break;case"select":case"multi_select":l="select_ai_inference";break;default:return}const s=[];if(s.push({pointer:r.pointer,command:"set",path:["schema",n,l],args:i}),i)m().Nj(t,{type:"set_ai_inference",ai_inference_type:i.type,collection_id:r.id});else{const e=(0,a().om)(o);m().Nj(t,{type:"remove_ai_inference",ai_inference_type:null==e?void 0:e.type,collection_id:r.id})}(0,k().p)({environment:t,collectionStore:r,performTransaction:e=>{for(const t of s)_().applyOperation({store:(0,O().Oo)(r,t.pointer),operation:t,transaction:e})}})}async function ie(e){var t;let{environment:o,store:r,property:n,propertySchema:a,userEventForAnalytics:i,sessionIdForAnalytics:s}=e;const c=s||l().JW(),p=n,u={spaceId:r.getSpaceId(),...r.pointer,propertyId:p,inferenceId:l().JW()},y=r.getAssociatedCollectionId()??(null===(t=r.getCollectionStore())||void 0===t?void 0:t.id),f=le(a,!1);if(!f)return"";m().oe(o,{type:i,inference_id:u.inferenceId,ai_inference_type:f.type,collection_id:y,session_id:c});const h=l().JW();g().callApi({eventName:"publishAiSession",environment:o,data:{inference_type:"autofill",id:h,metadata:{blockPropertyPointers:[u],aiInference:f,collection_id:y}}});const A=await g().callStreamApi({eventName:"getCompletionForProperty",environment:o,data:{blockPropertyPointers:[u],aiInference:f,aiSessionId:h,model:"default"}});if("success"!==A.type)return"";let v="";if(d().hS.is(A.data))for await(const l of A.data)"error"!==l.type&&(v+=l.completion);return v}function le(e,t){if(!(0,a().$M)(e))return;const o=(0,a().om)(e);return!o&&(0,a().lx)(e)?{type:e.type,auto_update_on_edit:t,add_options:!1}:o}},935889:(e,t,o)=>{o.d(t,{$:()=>s});var r=o(242343),n=()=>o(803290),a=()=>o(982415),i=()=>o(397791),l=o(163643);const s=r.memo(r.forwardRef((function(e,t){let{collectionContextStore:s,property:c,iconTransformer:d=(e=>e),getTitleOverride:p,...u}=e;const{isMobile:y}=(0,o(237385).Y0)(),m=(0,n().K8)((()=>s.collectionStore()),[s]),f=(0,n().K8)((()=>null==m?void 0:m.getDatabaseType()),[m]),g=(0,n().K8)((()=>Boolean(m&&f&&o(283759).jP((0,o(414997).appConfigs)(),f,c,m))),[m,f,c]),h=(0,r.useCallback)((e=>(0,a().eF)(f,e)),[f]),A=(0,r.useCallback)((e=>(0,l.jsx)(o(535906).A,{...u,...e,disabled:g,disabledFeedback:g,title:(null==p?void 0:p({isRequiredProperty:g}))??(0,l.jsx)(o(653998).sA,{defaultMessage:"Delete property",id:"database.tableHeaderCell.deleteProperty"}),caption:y&&g?(0,a().eF)(f):null,icon:d(g?(0,l.jsx)("div",{...e,children:(0,l.jsx)(i().I,{icon:o(127436).i})}):(0,l.jsx)(i().I,{icon:o(836693).trashIcon})),isRedOnHover:!0})),[f,p,d,y,g,u]);return(0,l.jsx)(o(103151).A,{placement:o(907721).W.Left,disableTooltip:!g,renderTooltip:h,render:A})})))}}]);