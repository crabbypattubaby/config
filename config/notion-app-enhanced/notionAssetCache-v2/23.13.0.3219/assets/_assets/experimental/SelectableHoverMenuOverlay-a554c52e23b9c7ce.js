"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[51646],{499727:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var o=n(242343),i=()=>n(803290),r=()=>n(332284),l=()=>n(205670),s=(n(725707),n(500234),()=>n(695387)),a=()=>n(302376),c=()=>n(96297),d=n(163643);const u=o.forwardRef((function(e,t){var l;const u=(0,n(237385).v3)(),{exactTargetBlockStore:g,container:f}=e,{targetSelectable:v,targetBlockStore:p}=(0,i().K8)((()=>({targetSelectable:n(37394).T.findSelectablesFromStore(g).find((e=>Boolean(e.props.shouldShowHoverMenu||e.props.shouldShowCommentMenu))),targetBlockStore:g})),[g]),[b,h]=(0,o.useState)(null==v||null===(l=v.getNode())||void 0===l?void 0:l.getBoundingClientRect()),m=(0,i().K8)((()=>{if(!g)return!1;if(null!=g&&g.pathIsDead())return!0;const e=n(378219).Nq(g);return e&&(0,n(799220).pQ)(e.id)}),[g]);(0,o.useEffect)((()=>{if(!v)return;const e=v.getNode();if(!e)return;const t=()=>{h(e.getBoundingClientRect())},n=(0,c().NM)(e);n&&(0,a().P4)(n,"scroll",t);const o=(0,c().T8)(e);return o&&o!==n&&(0,a().P4)(o,"scroll",t),t(),()=>{n&&(0,a().Ol)(n,"scroll",t),o&&(0,a().Ol)(o,"scroll",t)}}),[v]);const S=(0,i().K8)((()=>"suggest"===n(615661).Uv.getMode(p)),[p]),x=(0,i().K8)((()=>(0,n(548694).s7)(u)),[u]),y=(0,i().K8)((()=>{var e;return r().default.state.isOpen&&(null===(e=r().default.state.currentStore)||void 0===e?void 0:e.id)===p.id}),[p]),C=(0,i().K8)((()=>{if(!r().default.isRightMarginCommentHovered())return!1;const e=p.getNavigableBlockStore();return!Boolean(null==e?void 0:e.isDraft())}),[p]),j=!C&&(null==v?void 0:v.props.shouldShowHoverMenu)&&y,R=j;(0,o.useEffect)((()=>{!C&&s().A.state.isHovered&&s().A.resetHoverSource("right_margin_button")}),[C]);const A=null==f?void 0:f.getBoundingClientRect(),k=(0,i().K8)((()=>(0,n(915821).ac)({marginItemType:"selectable_hover_menu_overlay_item",store:p,nodeRect:b,containerRect:A,environment:u})),[p,b,A,u]),K=(0,n(174114).IS)((()=>({container:{position:"absolute",top:k,...e.style},commentMenu:{marginLeft:3}})),[e.style,k]);return m?null:(0,n(244563).A)((e=>(0,d.jsxs)("div",{style:K.container,ref:t,...e,children:[C&&(0,d.jsx)("div",{style:K.commentMenu,children:(0,d.jsx)(n(593085).A,{selectable:v,store:p,containerRect:A})}),j&&(0,d.jsx)(n(537846).A,{selectable:v,store:p,disableDrag:S,isWorkspaceAdmin:x,nodeRect:b,containerRect:A}),R&&(0,d.jsx)(n(820740).Ay,{store:p,nodeRect:b,containerRect:A,selectable:v})]})))}));const g={position:"absolute",top:0,left:0,zIndex:99};const f=function(e){const t=(0,o.useRef)(null),s=(0,n(486905).Jj)(),a=(0,i().O$)(r().default),c=(0,i().K8)((()=>!(!a.isOpen||a.container!==e.selectableContainer)&&((!n(410625).A.state.isActive||"editing"!==l().default.state.mode||!(0,n(621641).KP)(l().default.state.multiSelection))&&"closed"===n(471370).default.state.type)),[a,e.selectableContainer]),f=(0,i().K8)((()=>{if(a.isOpen&&a.container===e.selectableContainer)return a.currentStore}),[a,e.selectableContainer]),v=(0,o.useCallback)((()=>c&&f?[(0,d.jsx)(n(615917).A,{tag:u,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},exactTargetBlockStore:f,container:t.current??void 0,config:{timingFunction:"ease-out"}},f.id)]:[]),[f,c]);return s&&c&&a.isOpen?(0,d.jsx)("div",{style:g,ref:t,children:(0,d.jsx)(n(50081).CX,{container:t.current??void 0,state:a})}):(0,d.jsx)("div",{style:g,ref:t,children:(0,d.jsx)(n(26788).A,{className:n(983050).zN1,render:v})})}},951156:(e,t,n)=>{n.d(t,{A:()=>l});n(242343);var o=()=>n(803290),i=()=>n(518797),r=n(163643);const l=function(e){const{botValue:t,botStore:l,showActiveDot:s,style:a,size:c}=e,d=(0,n(653998).tz)(),u=(0,o().K8)((()=>{if(l){const e=l.getIcon();if(e)return{pointer:{table:i().GP,id:l.id,spaceId:l.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:i().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[l,t]),g=(0,o().K8)((()=>(null==l?void 0:l.getDisplayName(d))??(0,n(466003).Hg)(t)),[l,t,d]),{activeDotStyle:f}=(0,n(174114).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.accentColors.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",left:11,top:11}})),[]);return(0,r.jsxs)("div",{style:a,children:[(0,r.jsx)(n(28210).B,{icon:u,title:g,size:c||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),s?(0,r.jsx)("div",{style:f}):void 0]})}}}]);