"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[30015,94153],{40504:(e,t,o)=>{o.d(t,{EL:()=>_,KD:()=>x,Ss:()=>b,l2:()=>M,n0:()=>S,rw:()=>C});o(610931),o(362833),o(725707),o(491955),o(242343);var n=()=>o(220574),a=()=>o(145017),i=()=>o(653998),r=()=>o(23371),s=()=>o(818369),l=()=>o(145046),c=()=>o(509484),d=()=>o(480415),u=()=>o(422340),p=()=>o(802955),m=()=>o(413871),g=()=>o(189823),f=()=>o(213094),y=()=>o(913001),h=o(163643);const v=50;function b(e){y().A.resetSitesForSpace(e.id)}async function C(e,t){const{spaceStore:o,currentUserId:i,limit:l}=t;if(!o.id)return;const[c]=await Promise.all([s().callApi({eventName:"getPublishedPagesForUser",environment:e,data:{spaceId:o.id,limit:l||v,fetchPublishedMetadata:!0}}),(0,r().wR)(1500)]);if("failed"===c.type)throw new Error("Failed to fetch published pages.");if(c.data.recordMap){const e=[],t=n().RecordMapWithRole.create(c.data.recordMap),r=c.data.publishedEdits;for(const{model:n}of t)if(n&&n.table===a().ev){const t=m().Bv.createChildStore(o,{table:a().ev,id:n.id}),i=r[t.id],s=i&&i.authors?i.authors[0]:void 0,l={publishedTime:null==i?void 0:i.timestamp,publishedBy:s};e.push({store:t,publishedMetadata:l})}let s=e;return i&&(s=f().X(e,i)),y().A.initializeSiteResultsForSpace(o.id,s),s}}async function x(e,t){const{spaceStore:o}=t,n=e.currentUser.id,a=await C(e,{spaceStore:o,currentUserId:n});return a?a.filter((e=>{var t;return(null===(t=e.publishedMetadata.publishedBy)||void 0===t?void 0:t.id)===n})):[]}function S(e){d().Tk(e),u().Ay.setState({...u().Ay.state,display:u().pP.Publish,tab:u().QC.Publish})}async function _(e){return new Promise(((t,o)=>{l().ui({message:(0,h.jsx)("div",{style:{textAlign:"center"},children:(0,h.jsx)(i().sA,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,h.jsx)("div",{style:{textAlign:"center"},children:(0,h.jsx)(i().sA,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,h.jsx)(i().sA,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}async function M(e,t){if(!p().A.state.online)return[];const o=await c().T.searchActions.load();return await o.searchPublicPages({environment:t,query:e,source:"public_home_page_menu",limit:g().ZK})}},46701:(e,t,o)=>{o.d(t,{Z6:()=>i,rN:()=>r});var n=()=>o(129978);const a={translation:new(n().O2)("translation",(()=>Promise.all([o.e(96159),o.e(96346),o.e(16471),o.e(36209),o.e(92845),o.e(71718),o.e(48486),o.e(83324),o.e(48632),o.e(21194),o.e(25700),o.e(58112),o.e(3773),o.e(8340)]).then(o.bind(o,982427)))),TranslateBanner:new(n().O2)("TranslateBanner",(async()=>await Promise.all([o.e(96159),o.e(96346),o.e(16471),o.e(36209),o.e(92845),o.e(71718),o.e(48486),o.e(83324),o.e(48632),o.e(21194),o.e(25700),o.e(58112),o.e(3773)]).then(o.bind(o,473640))))},i=(0,n()._h)(a.translation,(e=>e.TopbarAmbientSuggestTranslateButton)),r=(0,n()._h)(a.TranslateBanner,(e=>e.TranslateBanner))},56432:(e,t,o)=>{o.r(t),o.d(t,{addAutomationAction:()=>E,clearInvalidVariables:()=>H,createAutomation:()=>N,deleteAutomation:()=>Q,disableAutomation:()=>Y,duplicateAutomation:()=>U,duplicateAutomationAction:()=>W,enableAutomation:()=>$,insertEmptyTextInDuplicateBlockAction:()=>G,messages:()=>O,removeAutomationAction:()=>K,reorderAutomationActions:()=>z,restartAutomation:()=>q});o(610931),o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601),o(725707),o(491955),o(500234),o(771702),o(403517);var n=o.n(o(485359)),a=()=>o(486826),i=()=>o(752597),r=()=>o(911575),s=()=>o(779698),l=()=>o(889110),c=()=>o(114103),d=()=>o(100851),u=()=>o(262148),p=()=>o(807912),m=()=>o(582226),g=()=>o(293665),f=()=>o(711659),y=()=>o(385649),h=()=>o(66460),v=()=>o(34662),b=()=>o(975392),C=()=>o(728373),x=()=>o(204132),S=()=>o(76394),_=()=>o(551102),M=()=>o(795394),A=()=>o(759625),k=()=>o(384221),w=()=>o(84543),T=()=>o(927685),I=()=>o(425447),j=()=>o(137476),B=()=>o(213517),P=()=>o(754697),R=()=>o(37394),L=()=>o(271142),V=()=>o(459845),D=()=>o(909177),F=()=>o(113800);const O=(0,o(653998).YK)({genericErrorMessage:{id:"automations.buttonTrigger.genericErrorMessage",defaultMessage:"Button failed to execute"},open:{defaultMessage:"Open",id:"automations.buttonTrigger.open"},undo:{defaultMessage:"Undo",id:"automations.buttonTrigger.undo"},defaultConfirmationWorkflowText:{defaultMessage:"Are you sure you want to continue?",id:"automations.buttonTrigger.defaultConfirmationWorkflowText"},defaultContinueWorkflowMessage:{defaultMessage:"Continue",id:"automations.buttonTrigger.defaultContinueWorkflowMessage"},defaultStopWorkflowMessage:{defaultMessage:"Cancel",id:"automations.buttonTrigger.defaultStopWorkflowMessage"},errorQueryCollectionTooManyPages:{defaultMessage:"Button impacts too many pages",id:"automations.buttonTrigger.errorQueryCollectionTooManyPages"},errorRecordInTrash:{id:"automations.buttonTrigger.errorRecordInTrash",defaultMessage:"Button is editing a page in trash"}});function N(e){const{actionIds:t,automationId:o,automationName:a,environment:i,inMemoryRecordCache:r,parentPointer:s,transaction:l,trigger:c}=e,d=o??(0,P().Z1)({environment:i,table:f().yB,spaceId:s.spaceId}),u=A().eC({environment:i,inMemoryRecordCache:r??i.defaultRecordCache.inMemoryRecordCache,table:f().yB,transaction:l,value:{action_ids:t,alive:!0,id:d,parent_id:s.id,parent_table:s.table,properties:{name:a},space_id:s.spaceId,status:"active",trigger:c}});return n()(u.isTriggerType(c.type),"Trigger type mismatch"),u}function E(e){const{actionId:t,environment:o,intl:a,automationStore:r,actionType:l,transaction:c,insertionPoint:d,config:u,createDuplicateBlocksContainer:p=!0,builderType:m="sidebar"}=e,h=r.getSpaceId();if(!h)return;let b;if("duplicate_blocks"===l&&p){b=A().Wv({environment:o,inMemoryRecordCache:r.inMemoryRecordCache,transaction:c,type:"text"});const e=G({environment:o,contentStore:b.getContentStore(),transaction:c});i().default.afterNextFlush((()=>{const t=R().T.find((t=>g().L3.isEqual(t.props.store.pointer,e.pointer)));t&&k().setSelectionAtStart({store:t.props.store.getBlockTitleStore()})}))}const x=u??function(e){const{actionType:t,automationStore:o,intl:n}=e;if("modal_confirmation"===t)return{continue_button:{text:n.formatMessage(O.defaultContinueWorkflowMessage)},cancel_button:{text:n.formatMessage(O.defaultStopWorkflowMessage)},text:{type:"simple",value:(0,v().x9d)(n.formatMessage(O.defaultConfirmationWorkflowText))}};if("define_variables"===t){const e=(0,C().Ay)();return{values:{[e]:{name:(0,D().v)(o.getActionStores(),n.formatMessage(y().xC)),value:{type:"simple",value:[[""]]}}},variableIds:[e]}}}({actionType:l,automationStore:r,intl:a})??{},M=A().eC({environment:o,inMemoryRecordCache:r.inMemoryRecordCache,table:y().SC,transaction:c,value:{id:t,type:l,parent_id:r.id,parent_table:f().yB,alive:!0,space_id:h,config:x,blocks:b?[b.id]:[]}});return b&&_().BC({transaction:c,parentStore:M.getKeyStore("blocks"),appendStore:b}),!d||"afterActionId"in d?_().BC({transaction:c,parentStore:r.getActionIdsStore(),appendStore:M,after:null==d?void 0:d.afterActionId}):"beforeActionId"in d?_().Hs({transaction:c,parentStore:r.getActionIdsStore(),prependStore:M,before:d.beforeActionId}):(0,S().HB)(d),Z({transaction:c,automationStore:r}),(0,V().CM)(((e,t,n)=>{const a=(0,j().ik)(o),i=(0,V().zc)({automationActionStore:M,formulaAnalyticsModule:t,formulasModule:e,simpleFormulasModule:n});(0,S().O9)(i)&&(0,s().dW)(a,{automation_action:i,automation_action_id:M.id,automation_id:M.getParentId(),builder_type:m}),M.isDefined()&&(0,s().c_)(a,{automation_action_id:M.id,automation_action_type:M.getType(),automation_id:r.id,builder_type:m})})),n()(M.isType(l),"Action type mismatch"),M}function q(e){var t,o;const{automationStore:n,transaction:i}=e,r=n.getRecurrence();if(!r)return;const s=a().c9.now().plus({day:1}).startOf("day"),l={...r,start_date:s.toMillis(),end_condition:"date"===(null===(t=r.end_condition)||void 0===t?void 0:t.type)?{type:"date",end_at:(0,c().getNewEndTimestamp)(s,r.start_date,null===(o=r.end_condition)||void 0===o?void 0:o.end_at).toMillis()}:r.end_condition};A().zv({store:n,transaction:i,data:{status:"active"}}),A().zv({store:n.getKeyStore("trigger"),transaction:i,data:{recurrence:(0,c().convertFromUnpersistedRecurrenceConfig)(l)}})}function U(e){const{actorPointer:t,environment:o,includeParenting:n,sourceAutomationStore:a,targetAutomationId:i,transaction:r}=e,s=a.getParentStore();if(!s||!s.isReady())throw new Error("Automation parent store not ready");const l=a.getValue(),c=a.getSpaceId();if(!(0,S().O9)(l)||!(0,S().O9)(c))throw new Error("Undefined automation value or space id");const d={},p={...(0,b().mg)(l),id:i??(0,P().Z1)({environment:o,table:f().yB,spaceId:(0,h().e)(c)})};d[a.id]=p.id,(0,S().O9)(p.action_ids)&&(0,S().EI)(p.action_ids)&&p.action_ids.forEach((e=>d[e]=(0,P().Z1)({environment:o,table:y().SC,spaceId:(0,h().e)(c)})));const m=e=>{let{requested:t}=e;const o=d[t.id];return(0,S().O9)(o)?{...t,id:o}:t};(0,u().i)({actor:t,duplicateRecord:p,options:{},mapper:m,originalRecord:l});const g=A().eC({environment:o,inMemoryRecordCache:a.inMemoryRecordCache,table:f().yB,transaction:r,value:p});n&&M().NI({childStore:g,parentStore:s,transaction:r});const v=a.getActionStores(),C=Promise.all(v.map((e=>{const t=d[e.id],{automationActionStore:n,onComplete:a}=W({environment:o,includeParenting:!1,mapper:m,sourceActionStore:e,targetAutomationActionId:t,transaction:r});return M().NI({childStore:n,parentStore:g,transaction:r}),a}))),x=C.then((e=>e.flat()));return{automationStore:g,onComplete:x}}function W(e){const{environment:t,includeParenting:o,insertionPoint:n,mapper:a,sourceActionStore:i,targetAutomationActionId:r,transaction:l}=e,c=i.getParentStore();if(!c||!c.isReady())throw new Error("Automation store is not ready");const u=i.getValue(),p=i.getSpaceId();if(!(0,S().O9)(u)||!(0,S().O9)(p))throw new Error("Undefined action value or space id");const m={...(0,b().mg)(u),id:r??(0,P().Z1)({environment:t,table:y().SC,spaceId:(0,h().e)(p)})},g=t.currentUser.id,f=i.inMemoryRecordCache.makeGetRecordRoleFn(g);(0,d().I)({duplicateRecord:m,getRecordRole:f,originalRecord:u,mapper:e=>(null==a?void 0:a(e))??e.requested,options:{},originOptions:{baseUrl:T().A.domainBaseUrl,publicDomainName:T().A.publicDomainName},duplicateBlocks:!1});const v=A().eC({environment:t,inMemoryRecordCache:i.inMemoryRecordCache,table:y().SC,transaction:l,value:m});o&&(!n||"afterActionId"in n?M().NI({after:null==n?void 0:n.afterActionId,childStore:v,parentStore:c,transaction:l}):"beforeActionId"in n?M().Ti({before:null==n?void 0:n.beforeActionId,childStore:v,parentStore:c,transaction:l}):(0,S().HB)(n),Z({transaction:l,automationStore:c}));const C=Promise.all(i.getBlockStores().map((e=>{const{blockStores:o,onComplete:n}=I().duplicateBlock({environment:t,preferDuplicateLocation:"local",stores:[e],targetSpaceId:(0,h().e)(e.pointer.spaceId),transaction:l,options:{addCopyName:!1,deepCopyTransclusionContainers:!1,resolveTemplateVariables:!1}}),a=o[0];return M().NI({childStore:a,parentStore:v,transaction:l}),n}))),x=v.getModel();return(0,S().O9)(x)&&(0,V().CM)(((e,o,n)=>{const a=(0,j().ik)(t),i=(0,V().zc)({automationActionStore:v,formulaAnalyticsModule:o,formulasModule:e,simpleFormulasModule:n});(0,S().O9)(i)&&(0,s().dW)(a,{automation_action:i,automation_action_id:x.id,automation_id:x.parent_id,from:"duplicate"}),(0,s().c_)(a,{automation_action_id:x.id,automation_action_type:x.type,automation_id:c.id,from:"duplicate"})})),{automationActionStore:v,onComplete:C}}function z(e){const{automationStore:t,automationTypecheckModule:o,contextType:n,environment:a,formulasModule:i,from:r,intl:s,isSubscribed:l,movedActionId:c,newActionIds:d,transaction:u}=e;A().zv({store:t,transaction:u,data:{action_ids:d}}),Z({automationStore:t,transaction:u});J({automationStore:t,transaction:u,typecheckResult:(0,F().Z)({environment:a,automationStore:t,automationTypecheckModule:o,contextType:n,formulasModule:i,intl:s,isSubscribed:l})}),(0,j().u4)({environment:a,event:{eventName:"automation_action_move",eventProperties:{automation_id:t.id,automation_action_id:c,from:r}}})}function K(e){const{actionStore:t,automationStore:o,automationTypecheckModule:n,contextType:a,environment:i,formulasModule:r,intl:l,isSubscribed:c,transaction:d}=e,u=(0,F().Z)({environment:i,automationStore:o,automationTypecheckModule:n,contextType:a,formulasModule:r,intl:l,isSubscribed:c});!function(e){const{automationActionStore:t,automationStore:o,environment:n,transaction:a,hasError:i=!1}=e;let r=t.getParentStore();if((0,S().O9)(o)){const e=t.getParentPointer();if(!(0,S().O9)(e))throw new Error("Automation action does not have a parent pointer");if(!g().L3.isEqual(e,o.pointer))throw new Error(`Automation action parent pointer does not match argument: ${g().L3.toKey(e)}, ${g().L3.toKey(o.pointer)}`);r=o}else if(!(0,S().O9)(r))throw new Error("Automation store is undefined");M().zz({childStore:t,parentStore:r,transaction:a});const l=t.getModel();(0,S().O9)(l)&&(0,V().CM)(((e,o,a)=>{const c=(0,j().ik)(n),d=(0,V().zc)({automationActionStore:t,formulaAnalyticsModule:o,formulasModule:e,simpleFormulasModule:a});(0,S().O9)(d)&&(0,s().YO)(c,{automation_action:d,automation_action_id:l.id,automation_id:l.parent_id,has_error:i}),(0,s().gW)(c,{automation_action_id:l.id,automation_action_type:l.type,automation_id:r.id,has_error:i})}))}({automationActionStore:t,environment:i,transaction:d,hasError:(x().Q.isSuccess(u)&&u.value.actionValidationFailures[t.id]||[]).length>0}),J({automationStore:o,transaction:d,typecheckResult:u})}function H(e){const{environment:t,automationStore:o,automationTypecheckModule:n,contextType:a,formulasModule:i,intl:r,isSubscribed:s,transaction:l}=e;J({automationStore:o,transaction:l,typecheckResult:(0,F().Z)({environment:t,automationStore:o,automationTypecheckModule:n,contextType:a,formulasModule:i,intl:r,isSubscribed:s})})}function Z(e){const{automationStore:t,transaction:o}=e;t.getSpaceId()&&t.getActionStores().forEach(((e,t)=>{var n;if(!e.isDefined())return;const a=e.getModel();a.isType("open_page")&&"url"===(null===(n=a.getConfig())||void 0===n||null===(n=n.target)||void 0===n?void 0:n.type)&&!(0,r().cQ)(t)&&A().zv({store:e.getConfigStore(),transaction:o,data:{target:null}})}))}function J(e){const{automationStore:t,transaction:o,typecheckResult:n}=e,a=t.getSpaceId(),i=t.getModel();if(a&&i&&!x().Q.isFail(n))for(const r of i.getActionIds()){const e=t.getRecordStore(t,{table:y().SC,id:r,spaceId:a});if(!e.isDefined())continue;const i=e.getModel(),s=new Set(n.value.actionInputValueTypes[r].map((e=>{if(e.kind===p().FormulaContextValueKind.Binding||e.kind===p().FormulaContextValueKind.ContextValue)return e.id;e.kind!==p().FormulaContextValueKind.ThisRow&&(0,S().HB)(e)})).filter(S().O9)),{value:c}=(0,l().G)({automationActionModel:i,baseUrl:T().A.domainBaseUrl,preventClearingConfig:!0,publicDomainName:T().A.publicDomainName,sourceSpaceId:a,visitors:{visitCollectionProperty:void 0,visitCollectionPropertyPointer:void 0,visitFormulaContextValue:e=>s.has(e)?{type:"keep"}:{type:"replace",value:void 0},visitFormulaPageProperty:void 0,visitRecordPointer:void 0}}),d=m().op.update({pointer:e.pointer,path:["config"],args:c.getConfig()??{}});w().applyOperation({store:e,operation:d,transaction:o})}}function G(e){const{environment:t,contentStore:o,transaction:n}=e,a=A().Wv({environment:t,type:"text",inMemoryRecordCache:o.inMemoryRecordCache,transaction:n,spaceId:o.pointer.spaceId});return _().BC({parentStore:o,appendStore:a,transaction:n}).childStore}function $(e){const{automationStore:t,environment:o,transaction:n}=e;A().zv({store:t,data:{status:"active"},transaction:n});const a=t.getModel();(0,S().O9)(a)&&(0,V().CM)(((e,n,i)=>{const r=(0,L().To)(t);let l=[];r&&x().Q.isSuccess(r)&&(l=r.value.valueTypes);const c=(0,j().ik)(o),d=(0,s().sp)({automationModel:a,formulaAnalyticsModule:n,formulasModule:e,formulaTypecheckContextValues:l,getRecordModel:t.getRecordModel,featureGates:(0,B().i)(),simpleFormulasModule:i});(0,s().Ah)(c,d)}))}function Y(e){const{automationStore:t,environment:o,status:n,transaction:a}=e,i=n??"disabled";A().zv({store:t,data:{status:i},transaction:a}),t.isTriggerType("recurrence")&&A().zv({store:t,data:{run_at:void 0},transaction:a});const r=t.getModel();(0,S().O9)(r)&&(0,V().CM)(((e,n,a)=>{const i=(0,L().To)(t);let l=[];i&&x().Q.isSuccess(i)&&(l=i.value.valueTypes);const c=(0,j().ik)(o),d=(0,s().sp)({automationModel:r,formulaAnalyticsModule:n,formulasModule:e,formulaTypecheckContextValues:l,getRecordModel:t.getRecordModel,featureGates:(0,B().i)(),simpleFormulasModule:a});(0,s().vN)(c,d)}))}function Q(e){const{automationStore:t,environment:o,transaction:n}=e;A().zv({store:t,data:{alive:!1},transaction:n});const a=t.getModel();(0,S().O9)(a)&&(0,V().CM)(((e,n,i)=>{const r=(0,L().To)(t);let l=[];r&&x().Q.isSuccess(r)&&(l=r.value.valueTypes);const c=(0,j().ik)(o),d=(0,s().sp)({automationModel:a,formulaAnalyticsModule:n,formulasModule:e,formulaTypecheckContextValues:l,getRecordModel:t.getRecordModel,featureGates:(0,B().i)(),simpleFormulasModule:i});(0,s().Iv)(c,d)}))}},67558:(e,t,o)=>{o.d(t,{VY:()=>s,ZJ:()=>i,u3:()=>r});var n=()=>o(496985);class a extends(()=>o(129044))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const i=new a,r=new(n().default)((()=>!1!==i.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(n().default)((()=>!1!==i.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},137696:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>r,x2:()=>a});var n=()=>o(76394);function a(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,n().O9)(t)&&a(t.type)}function r(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,n().HB)(e)}},200524:(e,t,o)=>{function n(e,t){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}o.d(t,{_:()=>n})},212738:(e,t,o)=>{o.d(t,{RC:()=>l,S6:()=>c,tD:()=>d});var n=()=>o(803290),a=()=>o(297145),i=()=>o(846581),r=()=>o(16456),s=()=>o(836331);function l(){return s().default.getConfigKey("permanently_delete_tree_queue_task_override","cdrr_enabled_timestamp_override")??a().mu}function c(){return(0,n().K8)((()=>l()),[])}function d(e,t,o){const n=(0,r().AA)(e,t);if((0,r().ak)(n)){const e=n.end.diff(n.start),t=e.as("year");if(t>=1)return(0,i().up)({years:Math.round(t)},o);const a=e.as("days");if(a>=1&&a<=45)return(0,i().up)({days:Math.round(a)},o);const r=e.as("months");if(r>=1)return(0,i().up)({months:Math.round(r)},o);if(a>=1)return(0,i().up)({days:Math.round(a)},o);const s=e.as("hours");if(s>=1)return(0,i().up)({hours:Math.round(s)},o);const l=e.as("minutes");return(0,i().up)({minutes:Math.round(l)},o)}return""}},213094:(e,t,o)=>{o.d(t,{X:()=>i,c:()=>r});o(725707),o(500234);var n=()=>o(446588),a=()=>o(352723);function i(e,t){return e.sort(((e,o)=>{const n=e.store.canAdmin();if(n===o.store.canAdmin()){var a,i;const n=null===(a=e.publishedMetadata.publishedBy)||void 0===a?void 0:a.id,r=e.publishedMetadata.publishedTime,s=null===(i=o.publishedMetadata.publishedBy)||void 0===i?void 0:i.id,l=o.publishedMetadata.publishedTime;if(t){if(n===t&&s===t&&r&&l)return l-r;if(n===t)return-1;if(s===t)return 1}return r&&l?l-r:0}return n?-1:1}))}function r(e){const{environment:t,store:o}=e;if(!o.pathIsAccessibleAndAlive())return!1;if(!a().i0(o).find((e=>(0,n().W8)(e.permissionItem))))return!1;return!a().qb(t,o)}},224281:(e,t,o)=>{o.d(t,{Jv:()=>v,Zr:()=>b,Rl:()=>C,mA:()=>h});var n=o(242343),a=()=>o(237385),i=()=>o(803290),r=()=>o(174114),s=()=>o(564134),l=()=>o(916963),c=()=>o(88442),d=()=>o(136239),u=()=>o(622286),p=()=>o(966789),m=o(163643);function g(){const e=(0,r().DP)();return(0,m.jsx)("span",{style:{marginLeft:6,fontSize:11,padding:"1px 4px",borderRadius:4,display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1,color:"light"===e.mode?e.accentColors.blue[500]:e.accentColors.blue[600]},children:(0,m.jsx)(p().A,{legacySize:14})})}var f=()=>o(870896);const y=function(){return(0,m.jsx)(o(695951).A,{color:"purple",style:{marginLeft:6,padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1},content:(0,m.jsx)(o(653998).sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})};const h=n.memo((function(e){const{propertySchema:t,showIcon:n,showDragIcon:i,hideName:s,badge:l,style:c,iconStyle:u,iconSize:p,dragHandleStyle:g,className:f,labelSizeVariant:y}=e,h=(0,a().v3)(),{device:v}=h,b=v.isMobile?16:14,x=(0,r().IS)((e=>({container:{display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0,fontSize:b,...c},iconWrapper:{display:"grid",justifyContent:"center",alignItems:"center",marginRight:s?void 0:"small"===y||i?4:6,...u},dragHandle:{gridColumn:1,gridRow:1,opacity:i?1:0,transition:`opacity ${d().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:i?0:1,transition:`opacity ${d().bM}`},dragIcon:{fill:e.icon.secondary}})),[b,s,u,y,i,c]);return(0,m.jsxs)("div",{className:f,style:x.container,children:[n&&(0,m.jsxs)("div",{style:x.iconWrapper,children:[(0,m.jsx)("div",{style:x.itemIcon,children:(0,m.jsx)(C,{propertySchema:t,iconSize:p,iconStyle:u})}),(0,m.jsx)("div",{style:x.dragHandle,children:(0,m.jsx)(o(369515).A,{style:g,iconSize:12,iconStyle:x.dragIcon})})]}),!s&&(0,m.jsx)("div",{style:{...o(31448).RC},children:t.name}),l]})}));function v(e){const{propertySchema:t}=e,o=(0,a().v3)();return(0,i().K8)((()=>(0,c().O0)(o)&&s().$M(t)&&s().om(t)),[o,t])?(0,m.jsx)(y,{}):null}function b(e){let{propertyId:t,collectionContextStore:o}=e;return(0,i().K8)((()=>{var e;const n=null===(e=o.collectionStore())||void 0===e?void 0:e.id;if(!n)return!1;const a=f().d.state.collectionsProperties[n];return!!a&&"Loading"===a[t]}),[o,t])?(0,m.jsx)(g,{}):null}function C(e){const{propertySchema:t,iconSize:o,iconStyle:n}=e,{isMobile:i}=(0,a().Y0)(),s=(0,r().DP)(),c=(0,u().X)("nds_default_property_noticon"),d=i?18:16;return(0,m.jsx)(l().zB,{type:t.type,icon:t.icon,size:o||d,theme:s,style:n,isDefaultNoticonEnabled:c})}},229419:(e,t,o)=>{o.d(t,{C8:()=>p,Dz:()=>l,GC:()=>g,GL:()=>f,YY:()=>m,dM:()=>d,h9:()=>c,jX:()=>s,oF:()=>u,uj:()=>r});var n=()=>o(129978);const a={JiraSyncInfoPopup:new(n().O2)("JiraSyncInfoPopup",(async()=>await Promise.all([o.e(75134),o.e(68744)]).then(o.bind(o,917262)))),ImproveJiraSyncPopup:new(n().O2)("ImproveJiraSyncPopup",(async()=>await Promise.all([o.e(75134),o.e(2686)]).then(o.bind(o,800444)))),JiraDCAuthModal:new(n().O2)("JiraDCAuthModal",(async()=>await o.e(28763).then(o.bind(o,114124)))),ExternalImportAndSyncIndicator:new(n().O2)("ExternalImportAndSyncIndicator",(async()=>await o.e(98288).then(o.bind(o,988714)))),JiraSyncedAllProjectsTooltip:new(n().O2)("JiraSyncedAllProjectsTooltip",(async()=>await o.e(21446).then(o.bind(o,374415)))),JiraSyncedAllIssuesTooltip:new(n().O2)("JiraSyncedAllIssuesTooltip",(async()=>await o.e(21446).then(o.bind(o,374415)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(n().O2)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await o.e(21446).then(o.bind(o,374415)))),JiraSyncSourceTooltip:new(n().O2)("JiraSyncSourceTooltip",(async()=>await o.e(21446).then(o.bind(o,374415)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(n().O2)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await o.e(21446).then(o.bind(o,374415))))},i={JiraSyncTeamSpaceModal:new(n().O2)("JiraSyncTeamSpaceModal",(async()=>Promise.all([o.e(96159),o.e(56188)]).then(o.bind(o,35705))))},r=(0,n()._h)(i.JiraSyncTeamSpaceModal,(e=>e.default)),s=(0,n()._h)(a.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),l=(0,n()._h)(a.JiraDCAuthModal,(e=>e.default)),c=(0,n()._h)(a.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),d=(0,n()._h)(a.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),u=(0,n()._h)(a.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),p=(0,n()._h)(a.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),m=(0,n()._h)(a.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),g=(0,n()._h)(a.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),f=(0,n()._h)(a.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,o(680369).xh)("jira",{default:{loader:()=>o.e(60677).then(o.bind(o,832398)),size:20},small:{loader:()=>o.e(60677).then(o.bind(o,832398)),size:16},mini:{loader:()=>o.e(60677).then(o.bind(o,832398)),size:14},large:{loader:()=>o.e(60677).then(o.bind(o,832398)),size:24}})},240048:(e,t,o)=>{o.r(t),o.d(t,{PublicShareLinkLoginModal:()=>c,publicShareLinkLoginModalStore:()=>l});o(242343);var n=()=>o(803290),a=()=>o(653998),i=()=>o(736530),r=()=>o(721041),s=o(163643);const l=new(o(645323).A);function c(){return(0,n().K8)((()=>l.state.open),[])?(0,s.jsx)(i().z,{loginModalStore:l,loginStore:r().A,title:(0,s.jsx)(a().sA,{id:"publicShareLinkLoginModal.title",defaultMessage:"Sign up or log in"}),description:(0,s.jsx)(a().sA,{id:"publicShareLinkLoginModal.description",defaultMessage:"Create an account or log in to access more features."})}):null}},271142:(e,t,o)=>{o.d(t,{EC:()=>S,To:()=>x,YC:()=>_,or:()=>C,u:()=>b});o(610931);var n=o(242343),a=()=>o(237385),i=()=>o(803290),r=()=>o(496985),s=()=>o(232312),l=()=>o(653998),c=()=>o(76394),d=()=>o(337658),u=()=>o(73631),p=()=>o(137696),m=()=>o(129978),g=()=>o(113800),f=()=>o(830925),y=o(163643);const h=new WeakMap,v=(0,n.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});v.displayName="AutomationContext";function b(e){const{automationStore:t,children:o,contextType:n}=e,b=(0,a().v3)(),C=(0,l().tz)(),{value:x}=(0,m().fJ)(u().T.formulas),{value:S}=(0,m().fJ)(d().QV.automationTypecheck),_=(0,f().n)(t),M=(0,i().K8)((()=>{if(!x)return{error:new(s().N9)("Missing formulas dependency")};if(!S)return{error:new(s().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:n,contextType:a,formulasModule:i,intl:s,isSubscribed:l}=e,d=h.get(o);if(d)return d;{const e=new(r().default)((()=>{const e=o.getTriggerType();let r=a;return(0,c().O9)(e)&&(0,p().x2)(e)&&(r=(0,p().H8)(e)),(0,g().Z)({environment:t,automationStore:o,automationTypecheckModule:n,contextType:r,formulasModule:i,intl:s,isSubscribed:l})}),{debugName:"automationContextTypecheckResultCachedStore"});return h.set(o,e),e}}({environment:b,automationStore:t,automationTypecheckModule:S,contextType:n,formulasModule:x,intl:C,isSubscribed:_});return e.state}),[b,t,S,n,x,C,_]);return(0,y.jsx)(v.Provider,{value:{automationStore:t,typecheckResult:M,contextType:n,defined:!0},children:o})}function C(e){const{automationStore:t,children:o}=e,n=(0,i().K8)((()=>{var e;return null===(e=t.getTrigger())||void 0===e?void 0:e.type}),[t]);return(0,y.jsx)(b,{automationStore:t,contextType:(0,p().H8)(n??"event"),children:o})}function x(e){var t;return null===(t=h.get(e))||void 0===t?void 0:t.state}function S(){const e=n.useContext(v);if(!1===e.defined)throw new Error("No automation context found!");return e}function _(){return n.useContext(v)}},274957:(e,t,o)=>{o.d(t,{A:()=>x});o(362833);var n=o(242343),a=()=>o(237385),i=()=>o(803290),r=()=>o(174114),s=()=>o(712437),l=()=>o(279968),c=()=>o(921080),d=()=>o(653998),u=()=>o(385531),p=()=>o(772357),m=()=>o(653147),g=()=>o(935989),f=()=>o(760034),y=()=>o(515347),h=()=>o(141122),v=()=>o(40504),b=()=>o(112907),C=o(163643);function x(e){let{blockStore:t,legacyColor:o}=e;const x=(0,i().K8)((()=>t.isFormBlock()),[t]),S=(0,a().v3)(),_=S.device.isMobile,M=(0,i().K8)((()=>{const e=y().UP(t);return b().Ix({spaceStore:t.getSpaceStore(),domainId:e})}),[t]),A=(0,n.useCallback)((()=>{f().uY({environment:S,store:t,pageVisitSource:s().y8.SiteBanner})}),[S,t]),k=(0,n.useCallback)((()=>{var e;h().default.isSidePeekOpen()&&(null===(e=h().default.peekTargetStore.state)||void 0===e?void 0:e.id)!==t.id&&u().YH(),v().n0(S),(0,g().EN)(S,{source:"site_settings_banner"})}),[t.id,S]),w=(0,r().IS)((()=>({icon:{height:16,width:16,marginRight:4}})),[]);if(!M||x)return null;let T;const I=[];return _?(T=(0,C.jsx)(d().sA,{defaultMessage:"This page is live on the web.",id:"pageViewBlock.sitesBannerMobile.message"}),I.push({label:(0,C.jsx)(d().sA,{defaultMessage:"View",id:"pageViewBlock.sitesBanner.view"}),onClick:()=>A()})):(T=(0,C.jsx)(d().sA,{defaultMessage:"This page is live on {domain}",id:"pageViewBlock.sitesBanner.message",values:{domain:M}}),I.push({label:(0,C.jsxs)(C.Fragment,{children:[(0,l().h)(w.icon),(0,C.jsx)(d().sA,{defaultMessage:"View site",id:"pageViewBlock.sitesBanner.viewSite"})]}),onClick:()=>A()},{label:(0,C.jsxs)(C.Fragment,{children:[(0,c().B)(w.icon),(0,C.jsx)(d().sA,{defaultMessage:"Site settings",id:"pageViewBlock.sitesBanner.settings"})]}),onClick:()=>k()})),(0,C.jsx)(p().l,{label:T,display:"full-width",actions:I,tint:(0,m().V)(o)})}},279968:(e,t,o)=>{o.d(t,{h:()=>a});o(242343);var n=o(163643);const a=(0,o(680369).wt)("globe2",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM3.88477 3.76465C4.56836 3.11523 5.39551 2.61621 6.31836 2.34277C5.83301 2.82812 5.42285 3.51172 5.11523 4.3457C4.63672 4.19531 4.22656 3.99707 3.88477 3.76465ZM9.68848 2.34961C10.6045 2.62305 11.4316 3.11523 12.1084 3.76465C11.7734 4.00391 11.3633 4.19531 10.8848 4.35254C10.5771 3.51172 10.167 2.82812 9.68848 2.34961ZM8.47852 2.56836C9.0459 2.8418 9.56543 3.58008 9.93457 4.58496C9.4834 4.66699 8.99805 4.71484 8.47852 4.73535V2.56836ZM6.06543 4.58496C6.44141 3.58008 6.9541 2.8418 7.52148 2.56836V4.73535C7.00195 4.71484 6.5166 4.66699 6.06543 4.58496ZM2.05273 7.58594C2.14844 6.42383 2.58594 5.35059 3.25586 4.46875C3.67285 4.77637 4.21289 5.04297 4.8418 5.24121C4.66406 5.95215 4.54785 6.74512 4.51367 7.58594H2.05273ZM11.4863 7.58594C11.4521 6.74512 11.3359 5.95215 11.1582 5.24121C11.7871 5.04297 12.3271 4.7832 12.7373 4.46875C13.4141 5.35059 13.8516 6.42383 13.9473 7.58594H11.4863ZM5.49121 7.58594C5.52539 6.84082 5.62793 6.12988 5.78516 5.4873C6.33203 5.59668 6.91309 5.66504 7.52148 5.69238V7.58594H5.49121ZM8.47852 7.58594V5.69238C9.08691 5.66504 9.66797 5.59668 10.2148 5.4873C10.3721 6.12988 10.4746 6.84082 10.5088 7.58594H8.47852ZM2.05273 8.54297H4.51367C4.54785 9.39746 4.66406 10.1973 4.8418 10.915C4.21973 11.1133 3.68652 11.373 3.27637 11.6807C2.59277 10.792 2.14844 9.71191 2.05273 8.54297ZM5.49121 8.54297H7.52148V10.4707C6.91992 10.498 6.33203 10.5664 5.79199 10.6689C5.62793 10.0195 5.51855 9.29492 5.49121 8.54297ZM8.47852 10.4707V8.54297H10.5088C10.4814 9.29492 10.3721 10.0195 10.208 10.6689C9.66797 10.5664 9.08691 10.498 8.47852 10.4707ZM11.1582 10.915C11.3428 10.1973 11.4521 9.39746 11.4863 8.54297H13.9473C13.8516 9.71191 13.4072 10.792 12.7236 11.6807C12.3135 11.373 11.7803 11.1133 11.1582 10.915ZM8.47852 11.4277C8.99121 11.4482 9.47656 11.4961 9.9209 11.5781C9.55176 12.5625 9.03906 13.2939 8.47852 13.5605V11.4277ZM6.0791 11.5781C6.52344 11.4961 7.00879 11.4482 7.52148 11.4277V13.5605C6.96094 13.2939 6.44824 12.5625 6.0791 11.5781ZM3.90527 12.3848C4.24023 12.1523 4.65039 11.9609 5.12207 11.8105C5.42969 12.6309 5.83301 13.3008 6.30469 13.7793C5.40234 13.5059 4.58203 13.0205 3.90527 12.3848ZM10.8779 11.8105C11.3496 11.9609 11.7598 12.1523 12.0947 12.3848C11.418 13.0205 10.5977 13.5059 9.69531 13.7793C10.167 13.3008 10.5703 12.6309 10.8779 11.8105Z"})})},297340:(e,t,o)=>{o.d(t,{A:()=>i});var n=o(242343),a=o(163643);const i=function(e){let{firstDayOfWeek:t,value:i,selectValue:r=!0,onChange:s,onFocus:l,onBlur:c,disabledDays:d,className:u}=e;const p=(0,n.useMemo)((()=>new Date(i)),[i]),[m,g]=(0,n.useState)(p),f=(0,n.useRef)(i);(0,n.useLayoutEffect)((()=>{f.current!==i&&(g(new Date(i)),f.current=i)}),[i]);const y=(0,n.useCallback)(((e,t,o)=>{s(e.getTime())}),[s]);return(0,a.jsx)("div",{style:{paddingRight:8,paddingBottom:8,paddingLeft:8,paddingTop:4},children:(0,a.jsx)(o(789894).n,{locale:o(16791).locale,className:u??"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:r?{value:p}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:y,onMonthSelected:g,disabled:d,month:m,onDayBlur:c,onDayFocus:l})})}},309968:(e,t,o)=>{o.d(t,{A:()=>a});class n extends(()=>o(129044))().default{}const a=new n},326259:(e,t,o)=>{o.d(t,{OH:()=>s,T2:()=>l,do:()=>c});var n=()=>o(871002),a=()=>o(846581),i=()=>o(16456),r=()=>o(427091);function s(e){const{dateTime:t,intl:o,shortenDateAndRange:n}=e,r=i().C6.toPersistedDate(t.valueOf());return a().ZF({value:r,allowRelativeDates:!0,intl:o,shortenDateAndRange:n,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:o,userTimeZone:n,displayInUserTimezone:r,alwaysIncludeTimezone:s}=e,l=i().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return a().ZF({value:l,allowRelativeDates:!0,intl:o,userTimeZone:n,displayInUserTimezone:r,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:o}=e,s=i().C6.toPersistedDateRange(t),l=a().ZF({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:o,displayInUserTimezone:!0}),c=t.end.setZone((0,r().P)()),d=a().fU({start_time:c.toFormat(n().GE),humanReadable:!1,intl:o});return o.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}},363584:(e,t,o)=>{o.r(t),o.d(t,{BannersRenderer:()=>Ht});o(403517);var n=o(242343),a=()=>o(237385),i=()=>o(803290),r=()=>o(76394),s=()=>o(897665),l=()=>o(836234),c=()=>o(48913),d=()=>o(274957),u=()=>o(754907),p=()=>o(613313),m=()=>o(508106),g=()=>o(623300),f=()=>o(891498),y=()=>o(72229),h=()=>o(46701),v=()=>o(846581),b=()=>o(842457),C=()=>o(145046),x=()=>o(70989),S=()=>o(865226),_=()=>o(931711),M=()=>o(653147),A=()=>o(485966),k=()=>o(772357),w=o(163643);const T=function(e){var t;const{legacyColor:r}=e,s=(0,a().v3)(),l=(0,i().K8)((()=>A().default.state.currentUserStore),[]),c=(0,i().K8)((()=>null==l?void 0:l.getEmail()),[l]),d="makenotion.com"===(0,o(599932).zN)(c??""),[u,p]=n.useState("");n.useEffect((()=>{!async function(){try{const e=await(0,o(432924).getCookie)(s,"notion_ghost_preferred_role");p((t=>e??""))}catch(e){console.error(e)}}()}));const m="full"===u?"restricted":"full",g=n.useCallback((async()=>{if(!c)return null;const e=await b().P(s,{email:c,intercomLink:"switch role",preferredLoginRole:m});if("failed"===e.type)x().V(),C().Qg(e);else{const{userId:t}=e.data,n=`Success! click "Continue" to enter account for "${c}" in ${_().v[m].text} mode.`,a=e.data.expiryTime?`${n} The user has granted access until ${(0,v().W_)(e.data.expiryTime,"medium_with_time",o(707781).q)}.`:n;x().V(),C().ui({message:a,showCancel:!1,keepFocus:!0,items:[{label:"Continue",color:"blue",onAccept:()=>{o(90566).N({userId:t,environment:s})}}]})}}),[s,c,m]);if(!c)return null;const f=(0,w.jsxs)(w.Fragment,{children:[`You are currently logged in as ${c}`,(0,w.jsx)("i",{children:u&&d?` (${null===(t=_().v[u])||void 0===t?void 0:t.text} access)`:""}),"."]});let y=[{label:"Back to Admin Console",onClick:()=>{S().oo({environment:s,url:"/__admin"})}},{label:"Logout as user",onClick:()=>{b().A(s)}}];return u&&d&&(y=[{label:`Switch to ${_().v[m].text} mode`,onClick:()=>g()},...y]),(0,w.jsx)(k().l,{label:f,display:"full-width",actions:y,tint:(0,M().V)(r)})};o(362833);var I=()=>o(174114),j=()=>o(712437),B=()=>o(220959),P=()=>o(653998),R=()=>o(31448),L=()=>o(927685),V=()=>o(126451);const D=(0,P().YK)({viewTutorial:{id:"pageViewBlock.asanaImporterBanner.tutorialPage",defaultMessage:"View tutorial"}});const F=function(e){let{blockStore:t,legacyColor:r}=e;const{tutorial_page:s,number_of_projects:l}=(0,i().K8)((()=>{var e,o;return{tutorial_page:null===(e=t.getFormat())||void 0===e?void 0:e.asana_importer_tutorial_page,number_of_projects:(null===(o=t.getFormat())||void 0===o?void 0:o.asana_importer_number_of_projects)??0}}),[t]),c=(0,a().v3)(),d=((0,I().IS)((e=>({helpCenterButtonStyles:{display:"flex",alignItems:"baseline",justifyContent:"center",alignContent:"center",fontSize:R().J.UIRegular.desktop,padding:"6px, 0px, 0px, 0px",borderRadius:4,color:e.text.secondary,marginTop:5,width:298,height:28,gap:"4px",lineHeight:"18px"},externalLinkIcon:{width:16,height:16,padding:"0.5px, 0px, 0px, 0px"},helpCenterButtonTextStyles:{width:238,height:18,font:"SF Pro",fontWeight:R().Wy.medium,fontSize:R().J.UIRegular.desktop,color:e.accentColors.uiBlue[600]}})),[]),(0,n.useCallback)((()=>{S().oo({url:(0,B().A)({pageId:s,pageModel:void 0===s?void 0:c.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:o(145017).ev,id:s},userId:c.currentUser.id}),baseUrl:L().A.domainBaseUrl,pageVisitSource:j().y8.Import}),environment:c})}),[c,s])),u=(0,n.useCallback)((()=>{o(84543).createAndCommit({environment:c,userAction:"userSettingsActions.setDismissedAsanaImporterBanner",canUndo:!0,perform:e=>{o(759625).zv({store:t.getFormatStore(),transaction:e,data:{dismissed_asana_import_banner:!0}})}})}),[t,c]),p=[];s&&p.push({label:(0,w.jsx)(P().sA,{...D.viewTutorial}),onClick:()=>d()}),p.push({label:(0,w.jsx)(P().sA,{id:"pageViewBlock.asanaImporterBanner.dismiss",defaultMessage:"Dismiss"}),onClick:u});const m=(0,n.useMemo)((()=>(0,w.jsx)(P().sA,{id:"pageViewBlock.asanaImporterBanner.tutorial",defaultMessage:"Imported {number_of_projects} Asana {project_or_projects} to Notion",values:{number_of_projects:l,project_or_projects:1===l?"project":"projects"}})),[l]);return(0,w.jsx)(k().l,{label:m,display:"full-width",actions:p,tint:(0,M().V)(r)})};var O=()=>o(711361),N=()=>o(783662),E=()=>o(503732),q=()=>o(727567),U=()=>o(336519),W=()=>o(421378),z=()=>o(528762),K=()=>o(220413),H=()=>o(29869),Z=()=>o(413871),J=()=>o(931085),G=()=>o(28210),$=()=>o(709237);function Y(e){const{urlStore:t,titleStore:o}=e,n=(0,a().Y0)(),r=o||t,{icon:s,url:l}=(0,i().K8)((()=>({icon:r.getIcon(),url:(0,H().Ay)({store:t,fullyQualified:!1,pageVisitSource:j().y8.Move})})),[r,t]);return(0,w.jsxs)(J().A,{href:l,style:{display:"inline-flex"},innerStyle:{display:"inline-flex",alignItems:"baseline"},children:[(0,w.jsx)(G().B,{disabled:!0,icon:s,isEmptyPage:!1,size:n.isMobile?18:16,emojiSize:n.isMobile?24:20,style:{marginRight:"0.2em",fill:""},pageIconStyle:{fill:K().Ay.white}}),(0,w.jsx)($().A,{store:r,style:{fontWeight:R().Wy.medium}})]})}function Q(e){let{movedSourceBlockStore:t,moveTarget:o}=e;return n.useMemo((()=>(0,w.jsx)(Y,{urlStore:Z().Bv.createChildStore(t,o.moved_to),titleStore:Z().SL.createChildStore(t,{table:z().NX,id:o.moved_to.spaceId})})),[t,o])}function X(e){let{movedSourceBlockStore:t,moveTarget:o}=e;const n=Q({movedSourceBlockStore:t,moveTarget:o});return(0,w.jsx)(P().sA,{defaultMessage:"Moved to {targetSpaceLink}.",id:"pageViewBlock.movedPageBanner.pageMovedMessage",values:{targetSpaceLink:n}})}function ee(e){let{movedSourceBlockStore:t,moveTarget:o}=e;const n=Q({movedSourceBlockStore:t,moveTarget:o});return(0,w.jsx)(P().sA,{defaultMessage:"{movedAncestorLink} was moved to {targetSpaceLink}.",id:"pageViewBlock.movedPageBanner.ancestorMovedMessage",values:{targetSpaceLink:n,movedAncestorLink:(0,w.jsx)(Y,{urlStore:t})}})}var te=()=>o(640979),oe=()=>o(997310),ne=()=>o(907721),ae=()=>o(962373),ie=()=>o(133926);const re=function(e){const t={display:"inline-flex",alignItems:"center",whiteSpace:"nowrap",borderRadius:6,height:28,padding:"0 8px",lineHeight:1.2,fontSize:14,color:K().Ay.white,border:`1px solid ${K().Ay.white}`};return(0,w.jsxs)(V().A,{onClick:e.onClick,style:{...t,...e.style},children:[e.icon,e.children]})};var se=()=>o(535906),le=()=>o(273520),ce=()=>o(356813),de=()=>o(935091),ue=()=>o(858023),pe=()=>o(443252),me=()=>o(88271),ge=()=>o(16791),fe=()=>o(297145),ye=()=>o(427091),he=()=>o(214263),ve=()=>o(297513),be=()=>o(212738),Ce=()=>o(289113),xe=()=>o(838517),Se=()=>o(986340),_e=()=>o(709356);function Me(e){const{blockStore:t,intl:o}=e,n=(0,oe().r)(),a=(0,xe().ME)(t),{trashAuthorDisplayName:r,trashTimestamp:s,isMovedToTrashMetadata:l}=(0,Se().x)({blockStore:t,closestNonAliveAncestorStore:a,intl:o}),c=(0,i().K8)((()=>(0,fe().XX)(null==n?void 0:n.getModel())),[n]),d=(0,i().K8)((()=>{const e=(0,be().RC)();return(0,fe().vw)({movedToTrashTime:l?s:void 0,deleteFromTrashDelayMs:c,cdrrDeletionEnabledTimestamp:e})}),[l,s,c]);if(d<=Date.now()){const e=(0,ve().rN)(c/1e3,o);return(0,w.jsx)(P().sA,{defaultMessage:"This page will be deleted soon since it was moved to the Trash over {retentionWindowCopy} ago",id:"pageViewBlock.trashBanner.message.pendingDeletion",values:{retentionWindowCopy:e}})}const u=(0,Ce().nl)(s,{roundDownYears:!0,useWeeks:!0,useLowercase:!0}),p=(0,v().W_)(s,"medium_with_time",ge().locale),m=(0,be().tD)({type:"daterange",start_date:(0,v().aD)(Date.now()),end_date:(0,v().aD)(d)},(0,ye().P)(),o);return l?(0,w.jsx)(P().sA,{defaultMessage:"{trashAuthorDisplayName} moved this page to Trash {movedToTrashDateComponent}. It will automatically be deleted in {numDaysLeftInTrashComponent}.",id:"pageViewBlock.trashBanner.message.trashMetadata",values:{trashAuthorDisplayName:r,movedToTrashDateComponent:(0,w.jsx)(_e().A,{text:u,tooltipText:p,icon:he().k}),numDaysLeftInTrashComponent:(0,w.jsx)(_e().A,{text:m,tooltipText:(0,v().aD)(d),icon:he().k})}}):(0,w.jsx)(P().sA,{defaultMessage:"{trashAuthorDisplayName} last edited this page {lastEditedDateComponent}. It will automatically be deleted in {numDaysLeftInTrashComponent}.",id:"pageViewBlock.trashBanner.message.lastEdited",values:{trashAuthorDisplayName:r,lastEditedDateComponent:(0,w.jsx)(_e().A,{text:u,tooltipText:p,icon:he().k}),numDaysLeftInTrashComponent:(0,w.jsx)(_e().A,{text:m,tooltipText:(0,v().aD)(d),icon:he().k})}})}function Ae(e){var t;let{spaceStore:o,blockStore:n,sourceBlock:r}=e;const s=(0,a().v3)(),l=null===(t=s.currentUser)||void 0===t?void 0:t.id,c=(0,a().Y0)(),d=(0,i().K8)((()=>Ie(s,n,o,l)),[s,n,o,l]),u=(0,I().IS)((()=>({banner:{display:"flex",alignItems:"center",justifyContent:"center",...c.isMobile&&{flexWrap:"wrap",paddingTop:8,paddingBottom:8}},button:{...c.isMobile&&{marginTop:8}}})),[c.isMobile]),{message:p,restoreVariant:m}=(0,i().K8)((()=>{const{store:e,moved:t}=r,o=e.id===n.id;return{message:o?(0,w.jsx)(X,{movedSourceBlockStore:e,moveTarget:t}):(0,w.jsx)(ee,{movedSourceBlockStore:e,moveTarget:t}),restoreVariant:o?"lastVersion":"currentPage"}}),[n.id,r]);return(0,w.jsxs)("div",{style:u.banner,children:[(0,w.jsx)("div",{children:p}),d&&(0,w.jsx)("div",{style:u.button,children:(0,w.jsx)(Te,{variant:m,blockStore:n})})]})}function ke(e){var t;const o=(0,P().tz)(),n=(0,a().v3)(),{spaceStore:r}=e,s=(0,i().uB)(void 0,ae().A),l=(0,I().IS)((()=>({popupMenu:{},iconContainer:{marginLeft:12},dotsIcon:{fill:"currentColor"},itemIcon:{height:18,width:18,fill:"currentColor"}})),[]),c=(0,ie().P9)({name:"configurable_deletion_and_retention_settings",spaceId:null==r?void 0:r.id,userId:null===(t=n.currentUser)||void 0===t?void 0:t.id});if(!(0,i().K8)((()=>(null==r?void 0:r.canAdmin())&&c),[r,c]))return null;const d=[{key:"open-settings",render:e=>(0,w.jsx)(se().A,{...e,icon:(0,N().j)(l.itemIcon),title:(0,w.jsx)(P().sA,{id:"pageViewBlock.trashBanner.workspaceOwnerActions.openRetentionSettings.title",defaultMessage:"Deletion and retention settings"}),caption:(0,w.jsx)(P().sA,{id:"pageViewBlock.trashBanner.workspaceOwnerActions.openRetentionSettings.caption",defaultMessage:"Only workspace owners can change this"})}),action:()=>{U().Ow({currentTab:"security",subtab:"data_retention"})}}],u={key:"actions",render:e=>(0,w.jsx)(me().A,{...e}),items:d};return(0,w.jsx)(le().Ay,{popupType:pe().nl.Popup,alignmentToOrigin:ne().C.Center,placementToOrigin:ne().W.Bottom,style:l.popupMenu,render:()=>(0,w.jsx)(de().A,{menuType:te().gu.Popup,children:(0,w.jsx)(ue().Ay,{type:ue().Oh.Vertical,initialFocus:void 0,sections:[u]})}),buttonPopupStore:s,renderOrigin:e=>(0,w.jsx)(ce().A,{style:l.iconContainer,iconStyle:l.dotsIcon,ariaLabel:o.formatMessage({id:"restoreDeleteBannerMenu.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:O()._,...e})})}function we(e){let{blockStore:t}=e;const o=(0,a().v3)(),i=(0,n.useCallback)((()=>{W().Ne({environment:o,blocks:[t],from:"trash_banner"})}),[o,t]),r=je();return(0,w.jsxs)(n.Fragment,{children:[(0,w.jsx)(Te,{variant:"default",blockStore:t}),(0,w.jsx)(re,{style:r.button,onClick:i,icon:(0,E().h)(r.icon),children:(0,w.jsx)(P().sA,{defaultMessage:"Delete from Trash",id:"pageViewBlock.trashBanner.deleteFromTrashButton.label"})})]})}function Te(e){let{variant:t,blockStore:o}=e;const r=(0,a().v3)(),s=(0,i().K8)((()=>({default:(0,w.jsx)(P().sA,{defaultMessage:"Restore page",id:"pageViewBlock.trashBanner.restoreButton.label"}),lastVersion:(0,w.jsx)(P().sA,{defaultMessage:"Restore last version",id:"pageViewBlock.trashBanner.restoreLastVersionButton.label"}),currentPage:(0,w.jsx)(P().sA,{defaultMessage:"Restore current page",id:"pageViewBlock.trashBanner.restoreCurrentPageButton.label"})}[t])),[t]),l=(0,n.useCallback)((()=>{const{currentSpaceStore:e}=A().default.state;e&&W().iN({environment:r,block:o,spaceId:o.pointer.spaceId||e.id,from:"trash_banner"})}),[o,r]),c=je();return(0,w.jsx)(re,{style:c.button,onClick:l,icon:(0,q()._)(c.icon),children:s})}function Ie(e,t,o,n){const a=(0,ie().zD)(e,{name:"configurable_deletion_and_retention_settings",spaceId:null==o?void 0:o.id,userId:n});if(null!=o&&o.canAdmin()&&a)return!0;if(!t.canEdit())return!1;if(!t.isNavigableBlock())return!1;const i=t.getParentStore();return!i||i.canEdit()}function je(){return(0,I().IS)((e=>({button:{marginLeft:12},icon:{width:14,height:14,marginRight:6}})),[])}const Be=function(e){var t;let{blockStore:o}=e;const r=(0,a().v3)(),s=null===(t=r.currentUser)||void 0===t?void 0:t.id,l=(0,a().Y0)(),c=(0,P().tz)(),d=(0,I().IS)((()=>({banner:{display:"flex",alignItems:"center",justifyContent:"center",overflow:"visible",whiteSpace:"normal",padding:"8px 4px",...l.isMobile&&{flexWrap:"wrap",width:"100%",paddingTop:8,paddingBottom:8}}})),[l.isMobile]),u=(0,oe().r)(),p=(0,i().K8)((()=>Ie(r,o,u,s)),[r,o,u,s]),m=(0,i().K8)((()=>l.isPhone&&p),[l.isPhone,p]),g=(0,i().K8)((()=>o.getClosestMovedBlock()),[o]),f=(0,w.jsx)("span",{children:(0,w.jsx)(Me,{blockStore:o,intl:c})}),y=(0,w.jsx)(P().sA,{defaultMessage:"This page was PERMANENTLY deleted.",id:"pageViewBlock.permanentlyDeleted.message"}),h=(0,i().K8)((()=>L().A.isAdminMode&&o.pathHasDeletedPermission()),[o]);return g?(0,w.jsx)(Ae,{spaceStore:u,blockStore:o,sourceBlock:g}):m?(0,w.jsx)("div",{style:d.banner,children:(0,w.jsx)(we,{blockStore:o})}):h?(0,w.jsxs)("div",{children:[y,(0,w.jsx)(Te,{variant:"default",blockStore:o})]}):p?(0,w.jsxs)(n.Fragment,{children:[(0,w.jsx)("div",{style:d.banner,children:f}),(0,w.jsx)(we,{blockStore:o}),(0,w.jsx)(ke,{spaceStore:u})]}):(0,w.jsx)("div",{style:d.banner,children:f})};var Pe=()=>o(680369);const Re=(0,Pe().xh)("wifiExclamationMark",{default:{loader:()=>o.e(53463).then(o.bind(o,868780))},small:{loader:()=>o.e(36425).then(o.bind(o,905522))},mini:{loader:()=>o.e(58391).then(o.bind(o,761388))},large:{loader:()=>o.e(82237).then(o.bind(o,598246))}});const Le=function(e){const{legacyColor:t}=e,n=(0,i().O$)(o(210562).ei),a=(0,i().K8)((()=>Boolean(null==n?void 0:n.isTranscriptionBlock())),[n]);return(0,w.jsx)(k().l,{label:a?(0,w.jsx)(P().sA,{id:"dictationConnectionBanner.transcription.message",defaultMessage:"We can’t reach our transcription server right now. Please check your connection"}):(0,w.jsx)(P().sA,{id:"dictationConnectionBanner.dictation.message",defaultMessage:"We can’t reach our dictation server right now. Please check your connection"}),display:"full-width",actions:[],tint:(0,M().V)(t),iconGroup:Re})};var Ve=()=>o(191756),De=()=>o(520969),Fe=()=>o(931573),Oe=()=>o(830491),Ne=()=>o(339425),Ee=()=>o(733968),qe=()=>o(747138),Ue=()=>o(709863);function We(e){const{legacyColor:t,blockStore:o}=e,r=(0,a().v3)(),s=(0,i().K8)((()=>Ue().u.getState().setComposerStyle),[]),l=(0,n.useCallback)((()=>{const e=De().XH("main");e&&e.load().then((()=>{e.canRead()&&Ve().uK({environment:r,store:e,pageVisitSource:j().y8.PersonalHomeUnknown})}))}),[r]),c=(0,i().K8)((()=>qe().A.state.isOpen),[]),d=(0,n.useCallback)((()=>{Fe().tt({environment:r,draftPostStore:o,onSubmitPost:l,from:"expanded_banner"}),null==s||s("preview")}),[r,o,l,s]),u=(0,n.useCallback)((()=>{o&&(0,Ee().s)(o)?qe().A.setState({isOpen:!0}):d()}),[o,d]),p=[{isCustom:!1,label:(0,w.jsx)(P().sA,{defaultMessage:"Post",id:"pageViewBlock.draftPostInExpandedFeedComposerBanner.postButton.label"}),onClick:u}];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(k().l,{label:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(P().sA,{defaultMessage:"This page is unpublished and will share to",id:"pageViewBlock.draftPostInExpandedFeedComposerBanner.message"})," ",(0,w.jsx)(Ne().eO,{postStore:o})]}),display:"full-width",actions:p,tint:(0,M().V)(t)}),(0,w.jsx)(Oe().A,{postStore:o,isOpen:c,onDismiss:()=>qe().A.setState({isOpen:!1}),onConfirm:()=>{qe().A.setState({isOpen:!1}),d()}})]})}const ze=function(e){const{legacyColor:t}=e,a=(0,n.useCallback)((()=>{o(795756).A.setState({editing:!1,commenting:!0})}),[]);return(0,w.jsx)(k().l,{label:(0,w.jsx)(P().sA,{id:"pageViewBlock.editingPageBanner.status",defaultMessage:"You can now edit this page."}),display:"full-width",actions:[{label:(0,w.jsx)(P().sA,{id:"pageViewBlock.editingPageBanner.stop",defaultMessage:"Done editing"}),onClick:()=>a()}],tint:(0,M().V)(t)})};const Ke=function(e){let{blockStore:t,legacyColor:n}=e;const a=(0,i().K8)((()=>o(664463).A.state.pageMap[t.id]),[t.id]);if(!a)return null;const r=(0,w.jsx)(P().sA,{defaultMessage:"Imported {importedNumberOfNotes} of {totalNumberOfNotes}",values:{importedNumberOfNotes:a.importedNotes,totalNumberOfNotes:a.totalNotes},id:"pageViewBlock.evernoteBanner.contents"});return(0,w.jsx)(k().l,{label:r,display:"full-width",actions:[],tint:(0,M().V)(n)})};var He=()=>o(935385);const Ze=(0,Pe().xh)("exclamationMarkCircleFill",{default:{loader:()=>o.e(1117).then(o.bind(o,227814))},small:{loader:()=>o.e(7103).then(o.bind(o,877076))},mini:{loader:()=>o.e(68977).then(o.bind(o,107482))},micro:{loader:()=>o.e(43774).then(o.bind(o,205709))},large:{loader:()=>o.e(84535).then(o.bind(o,188748))},max:{loader:()=>o.e(84535).then(o.bind(o,188748))}});var Je=()=>o(216268),Ge=()=>o(436491),$e=()=>o(695412),Ye=()=>o(990394),Qe=()=>o(528363);function Xe(e){const{isMobile:t}=e,o=(0,Ge().s)(),n=(0,i().K8)((()=>{var e;return null===(e=$e().A.getState().publicPageData)||void 0===e?void 0:e.publicAccessRole}),[]),a=(0,P().tz)();if(!t)return null;const{label:r,actionLabel:s}=(0,Qe().p)({publicAccessRole:n,intl:a}),l=[{label:s,onClick:()=>o("banner")}];return(0,w.jsx)(k().l,{label:r,iconGroup:Ze,display:"full-width",actions:l,tint:M().q.Yellow,onDismiss:()=>{Je().zA({bannerStore:Ye().A,id:"LoggedOutAppBanner"})}})}var et=()=>o(598744);const tt=function(e){const{legacyColor:t}=e,{mobileNative:n,device:r}=(0,a().v3)(),{osVersion:s}=r,l=(0,I().IS)((()=>({updated:{whiteSpace:"normal",textAlign:"center",flex:"1 auto"}})),[]),c=(0,i().K8)((()=>r.isAndroid&&(0,et().isLessThanVersion)(s,[7,0])?"Android 7.0":r.isIOS&&(0,et().isLessThanVersion)(s,[16,0])?"iOS 16.0":void 0),[r.isAndroid,r.isIOS,s]);if(!n||!n.api.openUpdateSettings||!c)return null;const d=(0,w.jsx)(P().sA,{defaultMessage:" This operating system is no longer supported.{br}Please <upgradelink>upgrade to {supportedPlatformVersion} or later.</upgradelink>.",id:"appUpdateListener.mobilePlatformNotSupported.message",values:{br:(0,w.jsx)("br",{}),upgradelink:e=>(0,w.jsx)(o(611824).A,{onClick:()=>{n.openUpdateSettings()},disableHover:!0,children:e}),supportedPlatformVersion:c}});return(0,w.jsx)(k().l,{label:(0,w.jsx)("div",{style:l.updated,children:d}),display:"full-width",actions:[],tint:(0,M().V)(t)})};const ot=function(e){const{legacyColor:t}=e;return(0,w.jsx)(k().l,{label:(0,w.jsx)(P().sA,{defaultMessage:"This page is in an archived teamspace.",id:"pageViewBlock.archivedTeamBanner.message"}),display:"full-width",actions:[],tint:(0,M().V)(t)})};var nt=()=>o(836924);function at(){const{markBannerAsDismissed:e}=(0,nt().b)(),t=(0,i().K8)((()=>{var e;return null===(e=$e().A.getState().publicPageData)||void 0===e?void 0:e.publicAccessRole}),[]);return(0,w.jsx)(k().l,{label:(0,w.jsx)(P().sA,{defaultMessage:"When you start {permission}, your name, email and photo may become visible to anyone who can view the page.",id:"publicShareLinkEditDisclosureBanner.banner",values:{permission:"comment_only"===t?"commenting":"editing"}}),iconGroup:Ze,display:"full-width",tint:M().q.Blue,onDismiss:()=>{Je().zA({bannerStore:Ye().A,id:"PublicShareLinkEditDisclosureBanner"}),e()}})}var it=()=>o(514138),rt=()=>o(110975),st=()=>o(392608);const lt=function(e){let{blockStore:t,legacyColor:s}=e;const l=(0,a().v3)(),c=(0,w.jsx)(P().sA,{defaultMessage:"This workspace is in a read-only state while the contents are being duplicated.",id:"pageViewBlock.contentDuplicationInProgress.message"}),d=(0,w.jsx)(P().sA,{defaultMessage:"This workspace's contents have been duplicated. Navigate to the new workspace for edits.",id:"pageViewBlock.contentDuplicationCompleted.message"}),{spaceRequestStatus:u,targetSpaceId:p}=(0,i().K8)((()=>{const e=o(378219).Gg(t);return e&&(0,it().vW)(e)?{spaceRequestStatus:e.status,targetSpaceId:e.target_space_id}:{spaceRequestStatus:void 0,targetSpaceId:void 0}}),[t]),m=(0,n.useCallback)((()=>{const e=(0,st().xS)("guides.workspaceConsolidation");rt().f({environment:l,url:e})}),[l]),g=(0,n.useCallback)((e=>{S().oo({environment:l,url:(0,it().UL)({spaceId:e,baseUrl:L().A.domainBaseUrl}),openInNew:"tab"})}),[l]);let f;const y=[{label:(0,w.jsx)(P().sA,{defaultMessage:"Learn more",id:"pageViewBlock.contentDuplication.learnMoreButton.label"}),onClick:()=>m()}];if("started"===u||"failed_with_closed_source"===u)f=c;else if("completed"===u||"pending_deletion"===u)f=d,y.push({label:(0,w.jsx)(P().sA,{defaultMessage:"Visit new workspace",id:"pageViewBlock.contentDuplication.linkToTargetWorkspace.label"}),onClick:()=>g(p)});else{if(!u)return null;(0,r().HB)(u)}return(0,w.jsx)(k().l,{label:f,display:"full-width",actions:y,tint:(0,M().V)(s)})};var ct=()=>o(681981);function dt(){const e=(0,P().tz)(),t=(0,a().v3)(),o=(0,i().K8)((()=>{var e;return null===(e=A().default.state.currentSpaceStore)||void 0===e?void 0:e.getFreezeSettings()}),[]),{freezeStatus:r,minUntilFreeze:s}=(0,ct().A)(o),l=(0,n.useCallback)((()=>{const e=(0,st().xS)("guides.workspaceConsolidation");rt().f({environment:t,url:e})}),[t]);if(!o||"disabled"===r||"scheduled"===r)return null;const c=(0,w.jsx)(P().sA,{defaultMessage:"This workspace will be frozen for migration in {timeRemaining}, during which some features may be temporarily unavailable.",id:"workspaceFreeze.banners.scheduled_migration",values:{timeRemaining:s&&s>60?e.formatRelativeTime(Math.floor(s/60),"hour"):e.formatRelativeTime(s??0,"minute")}}),d=(0,w.jsx)(P().sA,{defaultMessage:"This workspace is currently frozen to perform a migration. Changes cannot be saved at this time.",id:"workspaceFreeze.banners.active_migration"}),u=[{label:(0,w.jsx)(P().sA,{defaultMessage:"Learn more",id:"workspaceFreeze.banners.learn_more"}),onClick:()=>l()}];return(0,w.jsx)(k().l,{label:"warning"===r?c:d,display:"full-width",actions:u,tint:(0,M().V)("warning"===r?M().q.Yellow:M().q.Red)})}var ut=()=>o(598995);function pt(e){const{message:t,mobileMessage:o,learnMoreLink:n,tint:i}=e,r=(0,a().Y0)(),s=(0,a().v3)(),l=(0,I().IS)((e=>({messageContainer:{display:"flex",alignItems:"center",minWidth:0,whiteSpace:"nowrap"},updatedHelpContainer:{display:"flex",flex:1,gap:4,alignItems:"center"}})),[]);return(0,w.jsx)(k().l,{label:(0,w.jsx)("div",{style:l.messageContainer,children:r.isMobile?o:t}),display:"full-width",actions:e.actions,onLearnMoreClick:()=>{ut().FH(s,{from:"collection_template_topbar"}),n&&S().oo({environment:s,url:n,openInNew:"tab"})},tint:i})}const mt=(0,P().YK)({editInsideButton:{defaultMessage:"<mediumtext>You're editing a template in a button</mediumtext>",id:"pageViewBlock.templatePageBanner.editInsideButton"},editInsideButtonMobile:{defaultMessage:"<mediumtext>Template inside button</mediumtext>",id:"pageViewBlock.templatePageBanner.mobile.editInsideButton"}});const gt=function(e){let{context:t,legacyColor:o}=e;return(0,w.jsx)(pt,{context:t,message:(0,w.jsx)(P().sA,{...mt.editInsideButton,values:{mediumtext:e=>(0,w.jsx)("span",{children:e})}}),mobileMessage:(0,w.jsx)(P().sA,{...mt.editInsideButtonMobile,values:{mediumtext:e=>(0,w.jsx)("span",{children:e})}}),tint:(0,M().V)(o)})};var ft=()=>o(556078),yt=()=>o(198654),ht=()=>o(975392),vt=()=>o(266263),bt=()=>o(748039),Ct=()=>o(264022),xt=()=>o(401845),St=()=>o(950808),_t=()=>o(352723),Mt=()=>o(177086),At=()=>o(185807);const kt=(0,P().YK)({viewTemplate:{defaultMessage:"<mediumtext>You're viewing a template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.viewTemplateLabel"},editTemplate:{defaultMessage:"<mediumtext>You're editing a template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.editTemplateLabel"},editTemplateMobile:{defaultMessage:"<mediumtext>Template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.mobile.editTemplateLabel"},repeatEvery:{defaultMessage:"Repeat every…",id:"pageViewBlock.templatePageBanner.repeatEveryLabel"}});function wt(e){let{blockStore:t,context:o,disabled:r,legacyColor:s}=e;const l=(0,i().K8)((()=>t.getAssociatedCollectionStore()),[t]),c=(0,i().K8)((()=>{const e=null==l?void 0:l.getParentBlockStore();if(e)return(0,B().A)({pageId:e.id,pageVisitSource:j().y8.LinkInPage})}),[l]),d=(0,ft().S)(),u=(0,i().K8)((()=>{if(r)return!1;if(Mt().l.state)return!1;const e=d&&d.publicEditModeStore.state;if((0,_t().QT)(e))return kt.viewTemplate;return t.canEdit()?kt.editTemplate:kt.viewTemplate}),[d,r,t]),p=function(e){let{legacyColor:t}=e;return(0,I().IS)((e=>({innerLinkBox:{display:"flex",alignItems:"center"},linkBox:{marginLeft:8,marginRight:8,minWidth:0},linkBoxMobile:{marginLeft:8,marginRight:"auto",minWidth:0},recordTitle:{marginLeft:4,maxWidth:380},recordTitleMobile:{marginLeft:4,marginRight:8},chevron:{width:10,marginLeft:4,fill:At().pq[(0,M().V)(t)](e)}})),[t])}({legacyColor:s}),m=(0,st().xS)("guides.databaseTemplates"),g=(0,i().K8)((()=>null==l?void 0:l.getIcon()),[l]),f=(0,a().v3)(),y=(0,P().tz)(),{isMobile:h}=(0,a().Y0)(),v=(0,i().K8)((()=>{const e=t.getAutomationStore();if(null!=e&&e.getActionStores())return null!=e&&e.isActive()?e.getRecurrence():void 0}),[t]),b=(0,n.useCallback)((async e=>{const{recurrenceActions:o}=await xt().k.load();e?o.addRecurrence({environment:f,blockStore:t,recurrence:e}):o.deleteRecurrence({environment:f,blockStore:t})}),[f,t]),C=(0,vt().$)({recurrence:v,onChange:b,requireExplicitSaveAndAllowDelete:!0}),x=(0,i().K8)((()=>l&&St().rc({collectionStore:l})),[l]);if(!l||!c||!u)return null;const S=[];return x&&!h&&S.push({isCustom:!0,render:()=>(0,n.createElement)(le().Ay,{...C,key:"recurrence-editor",popupType:le().z7.Popup,originGap:4,onClose:async()=>{C.hasUnpersistedChanges()&&!(await Ct().lT({hasPendingChanges:!0}))||(C.onClose(),C.buttonPopupStore.setState({open:!1}))},persistOnClose:!0,renderOrigin:e=>(0,w.jsx)(At().fT,{tint:(0,M().V)(s),action:{label:(0,w.jsxs)(w.Fragment,{children:[v?(0,ht().ZH)((0,bt().LS)({recurrence:v,intl:y,leadingPhrase:"repeat every"})):y.formatMessage(kt.repeatEvery),(0,yt().b)(p.chevron)]}),onClick:e.onClick,iconGroup:void 0}})})}),(0,w.jsx)(pt,{actions:S,learnMoreLink:m,context:o,message:(0,w.jsx)(P().sA,{...u,values:{mediumtext:e=>(0,w.jsx)("span",{children:e}),pageTitleWithIcon:(0,w.jsxs)(J().A,{href:c,style:p.linkBox,innerStyle:p.innerLinkBox,children:[(0,w.jsx)(G().B,{disabled:!0,icon:g,isEmptyPage:!1,size:20}),(0,w.jsx)($().A,{style:p.recordTitle,store:l,underline:!0})]})}}),mobileMessage:(0,w.jsx)(P().sA,{...kt.editTemplateMobile,values:{mediumtext:e=>(0,w.jsx)("span",{children:e}),pageTitleWithIcon:(0,w.jsxs)(J().A,{href:c,style:p.linkBoxMobile,innerStyle:p.innerLinkBox,children:[(0,w.jsx)(G().B,{disabled:!0,icon:g,isEmptyPage:!1,size:20}),(0,w.jsx)($().A,{style:p.recordTitleMobile,store:l,underline:!0})]})}}),tint:(0,M().V)(s)})}o(610931);var Tt=()=>o(916757),It=()=>o(3311),jt=()=>o(375567),Bt=()=>o(349947),Pt=()=>o(783759),Rt=()=>o(868325),Lt=()=>o(814370),Vt=()=>o(477784),Dt=()=>o(286404),Ft=()=>o(35462),Ot=()=>o(872289);function Nt(e){const t=(0,a().v3)(),{blockId:o,trustedDomainState:r}=e,s=o.spaceId,l=(0,i().K8)((()=>{var e;return"resolved"===r.status&&"click_to_join"===(null===(e=r.value)||void 0===e?void 0:e.joinSpaceMethod)}),[r]),c=(0,I().IS)((()=>({iconArrow:{height:18,width:18},title:{fontSize:17,fontWeight:500,lineHeight:"24px",paddingBottom:8}})),[]),d=(0,n.useCallback)((e=>{let t;if(e instanceof Lt().C){var o;const n=null==e||null===(o=e.data)||void 0===o||null===(o=o.responseBody)||void 0===o?void 0:o.clientData;n&&(t=(0,Rt().t4)(Vt().A.getIntl(),n))}else e instanceof Error&&(t=e.message);C().f1((0,w.jsxs)("div",{children:[(0,w.jsx)(Ft().A,{style:c.title,children:(0,w.jsx)(P().sA,{defaultMessage:"Oops, something went wrong.",id:"pageViewBlock.trustedDomainPageBanner.joinSpaceErrorDialog.message"})}),(0,w.jsx)("div",{children:t})]}))}),[c.title]),u=(0,n.useCallback)((async()=>{const{currentUserRootStore:e,currentUserSettingsStore:n}=A().default.state;if(s&&e)try{await Pt().DT({environment:t,userRootStore:e,spaceId:s,navigate:!0,analyticsFrom:"trusted_domain_page",userSettingsStore:n,redirectSource:"click_to_join_workspace_from_dls",isJoinableTrustedDomainViewer:l}),jt().w(t,{spaceId:s,pageId:o.id,joinSpaceMethod:"click_to_join"}),Bt().IL(t)}catch(a){d(a)}}),[t,s,o,l,d]);if("resolved"!==r.status||!r.value)return null;switch(r.value.joinSpaceMethod){case"request_to_join":const e=r.value.requestMembershipCustomizationRedirectUrl;return e?(0,w.jsxs)(Dt().A,{size:"lg",onClick:()=>{window.open(e,"_blank")},children:[(0,w.jsx)(P().sA,{id:"pageViewBlock.trustedDomainPageBanner.requestToJoin",defaultMessage:"Request membership"}),(0,Tt().arrowDiagonalUpRightFillSmallIcon)(c.iconArrow)]}):(0,w.jsx)(Ot().A,{type:"current-actor-to-space-via-block",block:o,flowId:(0,It().Ay)(),source:"trusted_domain_page",buttonType:"outline"});case"click_to_join":return(0,w.jsx)(Dt().A,{size:"lg",onClick:u,children:(0,w.jsx)(P().sA,{id:"pageViewBlock.trustedDomainPageBanner.clickToJoin",defaultMessage:"Join workspace"})});default:return null}}const Et=function(e){var t;const{legacyColor:n}=e,r=(0,i().K8)((()=>{const e=$e().A.state.publicPageData;if(e&&e.spaceId&&e.pageId)return{spaceShardedBlockId:{spaceId:e.spaceId,id:e.pageId},spaceName:e.spaceName}}),[]),s=(0,a().v3)(),l=null==r||null===(t=r.spaceShardedBlockId)||void 0===t?void 0:t.spaceId,[c]=(0,o(162901).Yb)((async()=>{if(!l)return;const e=await o(818369).callApi({eventName:"getTrustedDomainForUser",environment:s,data:{spaceId:l}});return"success"===e.type?{joinSpaceMethod:e.data.joinSpaceMethod,requestMembershipCustomizationRedirectUrl:e.data.requestMembershipCustomizationRedirectUrl}:void 0}),[s,l]),d=(0,w.jsx)("div",{style:{gap:"auto",flexDirection:"row",alignItems:"center"},children:(0,w.jsxs)(o(421338).Y1,{direction:"horizontal",align:"center",width:"hug",gap:8,children:[(0,w.jsx)(o(701270).D,{styleName:"UIRegular-14px/Medium",children:(0,w.jsx)(P().sA,{id:"pageViewBlock.trustedDomainPageBanner.label",defaultMessage:"You're viewing a shared page in the {spaceName} workspace",values:{spaceName:null==r?void 0:r.spaceName}})}),(null==r?void 0:r.spaceShardedBlockId)&&Nt({blockId:r.spaceShardedBlockId,trustedDomainState:c})]})});return(0,w.jsx)(k().l,{display:"full-width-no-content",tint:(0,M().V)(n),content:d})};var qt=()=>o(111826);const Ut=function(e){const{legacyColor:t}=e,n=(0,a().v3)(),r=(0,i().K8)((()=>n.device.isMobile&&!n.device.isTablet),[n.device]),s=(0,i().K8)((()=>{const e="personal"===qt().Si(n),t=o(305043).subscriptionDataStoreInstance.state,a=qt().qc(t);return!((0,o(481148).mM)({environment:n})&&e&&!a)}),[n]),l=(0,w.jsx)(P().sA,{id:"uploadLimitExceededBanner.message",defaultMessage:"{shouldShowShortMessage, select, true {Your file is over the {maxFreeAccountFileSize} MB limit} other {Your file is over the {maxFreeAccountFileSize} MB limit of the Free plan}}",values:{shouldShowShortMessage:r,maxFreeAccountFileSize:o(663539).u1}}),c=(0,w.jsx)(P().sA,{id:"uploadLimitExceededBanner.upgradeButton.label",defaultMessage:"{shouldShowShortMessage, select, true {Upgrade} other {Upgrade for unlimited uploads}}",values:{shouldShowShortMessage:r}}),d=async()=>{await o(943066).K(n,{from:"upload_limit_banner",upsell:{type:"product",product:qt().Si(n)||"plus",limit:{type:"none"},trialability:"none"}})};return(0,w.jsx)(k().l,{label:l,display:"full-width",actions:s?[{label:c,onClick:()=>d()}]:[],tint:(0,M().V)(t)})};var Wt=()=>o(473852);const zt=(0,Pe().wt)("mobileNewFeatures",{viewBox:"0 0 26 26",svg:(0,w.jsx)("path",{d:"M12.3984 5.47754C12.5273 5.47754 12.5918 5.40234 12.624 5.28418C12.9463 3.49023 12.9355 3.44727 14.8047 3.09277C14.9229 3.07129 15.0088 2.99609 15.0088 2.86719C15.0088 2.73828 14.9229 2.66309 14.8047 2.6416C12.9355 2.26562 13 2.22266 12.624 0.450195C12.5918 0.332031 12.5273 0.256836 12.3984 0.256836C12.2695 0.256836 12.1943 0.332031 12.1729 0.450195C11.7969 2.22266 11.8613 2.26562 9.99219 2.6416C9.86328 2.66309 9.78809 2.73828 9.78809 2.86719C9.78809 2.99609 9.86328 3.07129 9.99219 3.09277C11.8613 3.46875 11.8398 3.49023 12.1729 5.28418C12.1943 5.40234 12.2695 5.47754 12.3984 5.47754ZM7.19922 12.8682C7.40332 12.8682 7.54297 12.7393 7.56445 12.5459C7.95117 9.67773 8.04785 9.67773 11.0127 9.1084C11.1953 9.07617 11.335 8.94727 11.335 8.74316C11.335 8.5498 11.1953 8.41016 11.0127 8.37793C8.04785 7.96973 7.94043 7.87305 7.56445 4.95117C7.54297 4.75781 7.40332 4.61816 7.19922 4.61816C7.00586 4.61816 6.86621 4.75781 6.83398 4.96191C6.49023 7.84082 6.3291 7.83008 3.38574 8.37793C3.20312 8.4209 3.06348 8.5498 3.06348 8.74316C3.06348 8.95801 3.20312 9.07617 3.42871 9.1084C6.35059 9.58105 6.49023 9.65625 6.83398 12.5244C6.86621 12.7393 7.00586 12.8682 7.19922 12.8682ZM14.4824 24.7598C14.7617 24.7598 14.9658 24.5557 15.0088 24.2656C15.7715 18.3789 16.6094 17.4873 22.4316 16.8428C22.7324 16.8105 22.9365 16.585 22.9365 16.3057C22.9365 16.0264 22.7324 15.8115 22.4316 15.7686C16.6094 15.124 15.7715 14.2324 15.0088 8.3457C14.9658 8.05566 14.7617 7.8623 14.4824 7.8623C14.2031 7.8623 13.999 8.05566 13.9561 8.3457C13.1826 14.2324 12.3555 15.124 6.5332 15.7686C6.23242 15.8115 6.02832 16.0264 6.02832 16.3057C6.02832 16.585 6.23242 16.8105 6.5332 16.8428C12.3447 17.6055 13.1504 18.3896 13.9561 24.2656C13.999 24.5557 14.2031 24.7598 14.4824 24.7598Z"})});const Kt=function(e){const{onClick:t,legacyColor:o}=e,n=(0,a().v3)(),{isMobile:i}=n.device,r=(0,I().IS)((()=>({icon:{width:22,marginRight:8},mobileIcon:{width:26,marginRight:12},navigateReleaseAction:{minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},mobileButton:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start"},button:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}})),[]),l=s().qZ?(0,w.jsxs)(w.Fragment,{children:[zt(i?r.mobileIcon:r.icon),(0,w.jsx)("div",{style:r.navigateReleaseAction,children:(0,w.jsx)(P().sA,{defaultMessage:"Update and see what's new",id:"updateBanner.updateAvailableBanner.message"})})]}):(0,w.jsx)("div",{children:i?(0,w.jsx)(P().sA,{id:"updateBanner.updateMessage.noRedirectMobile",defaultMessage:"Tap here to update to the latest version"}):(0,w.jsx)(P().sA,{id:"updateBanner.updateMessage.noRedirect",defaultMessage:"Click here to update to the latest version"})});return(0,w.jsx)(k().l,{label:void 0,display:"full-width",actions:[{label:l,onClick:e=>t(e)}],tint:(0,M().V)(o)})};function Ht(e){let{isInPeekRenderer:t,arbitraryRenderBefore:o,banners:n,isMobile:r}=e;const s=(0,a().v3)(),l=(0,i().K8)((()=>(0,c().zo)(s,t)),[s,t]);return(0,w.jsxs)("div",{style:{width:`calc(100% - ${l}px)`,userSelect:"none",WebkitUserSelect:"none"},children:[o,n.map(((e,t,o)=>(0,w.jsx)(Zt,{banner:e,index:t,array:o,isMobile:r},e.id)))]})}function Zt(e){let{banner:t,index:o,array:n,isMobile:c}=e;const v=(0,a().v3)(),{styleKey:b,contentKey:C}=t,x=n.length>1&&o!==n.length-1,S=(0,i().K8)((()=>(0,p().Km)(v)),[v]);switch(C){case"russian_sanctions":return(0,w.jsx)(y().k,{});case"missing_name":return(0,w.jsx)(He().M,{});case"over_free_block_limit":return S?(0,w.jsx)(w.Fragment,{}):(0,w.jsx)(u().default,{});case"editing_page":return(0,w.jsx)(ze,{legacyColor:b});case"subscription_trial_add_payment_method":return(0,w.jsx)(l().b,{legacyColor:b});case"upload_limit_exceeded":return(0,w.jsx)(Ut,{legacyColor:b});case"admin_mode":return(0,w.jsx)(T,{legacyColor:b});case"arbitrary_subscription_banner":return(0,w.jsx)(g().U,{legacyColor:b});case"billing_subscription_status":return(0,w.jsx)(m().g,{legacyColor:b});case"test_clock":return(0,w.jsx)(f().i,{legacyColor:b});case"space_content_duplication":return(0,w.jsx)(lt,{blockStore:t.blockStore,legacyColor:b});case"space_freeze":return(0,w.jsx)(dt,{});case"minor_app_update":return(0,w.jsx)(Kt,{onClick:()=>s().K0(v),legacyColor:b});case"mobile_platform_unsupported":return(0,w.jsx)(tt,{legacyColor:b});case"deleted_or_moved_page":return(0,w.jsx)(Wt().A,{styleKey:b,shouldUseDivider:x,isMobile:c,children:(0,w.jsx)(Be,{blockStore:t.blockStore})});case"page_in_archived_team":return(0,w.jsx)(ot,{legacyColor:b});case"draft_post_in_expanded_feed_composer":return(0,w.jsx)(We,{blockStore:t.blockStore,legacyColor:b});case"importing_evernote":return(0,w.jsx)(Ke,{blockStore:t.blockStore,legacyColor:b});case"template_in_page":return(0,w.jsx)(wt,{blockStore:t.blockStore,context:t.context,disabled:t.disabled,legacyColor:b});case"template_in_button":return(0,w.jsx)(gt,{context:t.context,legacyColor:b});case"asana_importer_banner":return(0,w.jsx)(F,{blockStore:t.blockStore,legacyColor:b});case"site":return(0,w.jsx)(d().A,{blockStore:t.blockStore,legacyColor:b});case"dictation_connection":return(0,w.jsx)(Le,{legacyColor:b});case"trusted_domain_page":return(0,w.jsx)(Et,{legacyColor:b});case"translate":return(0,w.jsx)(h().rN,{blockStore:t.blockStore});case"logged_out_app_banner":return(0,w.jsx)(Xe,{isMobile:c});case"public_share_link_edit_disclosure_banner":return(0,w.jsx)(at,{});default:(0,r().HB)(C)}}},375567:(e,t,o)=>{o.d(t,{w:()=>a});var n=()=>o(137476);function a(e,t){const{spaceId:o,pageId:a,joinSpaceMethod:i}=t;(0,n().u4)({environment:e,event:{eventName:"trusted_domain_banner_cta_clicked",eventProperties:{spaceId:o,pageId:a,joinSpaceMethod:i}}})}},401845:(e,t,o)=>{o.d(t,{k:()=>a,q:()=>i});var n=()=>o(129978);const a=new(n().O2)("recurrence",(async()=>{const[e,t,{TemplateRecurrenceConfigMenu:n}]=await Promise.all([Promise.all([o.e(36209),o.e(92845),o.e(71718),o.e(83324),o.e(4422),o.e(82850),o.e(29021)]).then(o.bind(o,464567)),Promise.all([o.e(36209),o.e(92845),o.e(71718),o.e(83324),o.e(4422),o.e(82850),o.e(29021)]).then(o.bind(o,114103)),Promise.all([o.e(36209),o.e(92845),o.e(71718),o.e(83324),o.e(4422),o.e(82850),o.e(29021)]).then(o.bind(o,88224))]);return{recurrenceActions:e,recurrenceHelpers:t,TemplateRecurrenceConfigMenu:n}})),i=(0,n().jQ)(a,(e=>e.TemplateRecurrenceConfigMenu))},436491:(e,t,o)=>{o.d(t,{s:()=>g});var n=()=>o(237385),a=()=>o(803290),i=()=>o(712437),r=()=>o(758611),s=()=>o(132793),l=()=>o(137476);var c=()=>o(865226),d=()=>o(29869),u=()=>o(622286),p=()=>o(485966),m=()=>o(240048);function g(){const e=(0,n().v3)(),t=(0,u().X)("sharing_login_modal"),o=(0,a().K8)((()=>{const{mainEditorCurrentBlockStore:e}=p().default.state;if(e)return(0,d().J8)({store:e,pageVisitSource:i().y8.PublicShareLink})}),[]);return n=>{!function(e,t){(0,l().u4)({environment:e,event:{eventName:"click_sharing_signup",eventProperties:t}})}(e,{from:n}),o&&(0,s().wA)(o),t?m().publicShareLinkLoginModalStore.setState({open:!0}):c().oo({environment:e,url:r().JZ.login})}}},441911:(e,t,o)=>{o.d(t,{e:()=>s,v:()=>r});var n=()=>o(237385),a=()=>o(803290),i=()=>o(640979);function r(e){return e.device.isPhone||"actionSheet"===e.tabletBehavior&&e.device.isTablet?{menuType:i().gu.ActionSheet}:{menuType:i().gu.Popup,maxHeight:e.maxHeight,maxWidth:e.maxWidth,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,width:e.width,minWidth:e.minWidth}}function s(e){const t=(0,n().Y0)();return(0,a().K8)((()=>r({device:t,maxHeight:null==e?void 0:e.maxHeight,maxWidth:null==e?void 0:e.maxWidth,paddingTop:null==e?void 0:e.paddingTop,paddingBottom:null==e?void 0:e.paddingBottom,width:null==e?void 0:e.width,minWidth:null==e?void 0:e.minWidth,tabletBehavior:null==e?void 0:e.tabletBehavior})),[t,null==e?void 0:e.maxHeight,null==e?void 0:e.maxWidth,null==e?void 0:e.paddingTop,null==e?void 0:e.paddingBottom,null==e?void 0:e.width,null==e?void 0:e.minWidth,null==e?void 0:e.tabletBehavior])}},459845:(e,t,o)=>{o.d(t,{CM:()=>p,UB:()=>u,zc:()=>d});o(725707),o(491955),o(403517);var n=()=>o(779698),a=()=>o(204132),i=()=>o(76394),r=()=>o(73631),s=()=>o(137476),l=()=>o(213517),c=()=>o(271142);function d(e){const{automationActionStore:t,automationStore:o,formulaAnalyticsModule:r,formulasModule:s,simpleFormulasModule:d}=e,u=t.getModel(),p=o??t.getParentStore();if(!u||!p)return;const m=p.getActionStores().map((e=>e.getModel())).filter(i().O9),g=(0,c().To)(p);let f=[];return g&&a().Q.isSuccess(g)&&(f=g.value.valueTypes),(0,n()._f)({automationActionModel:u,automationActionModels:m,formulaAnalyticsModule:r,formulasModule:s,simpleFormulasModule:d,formulaTypecheckContextValues:f,getRecordModel:t.getRecordModel,featureGates:(0,l().i)()})}function u(e,t){const{automationStore:o,automationActionStore:n}=t;o.isTriggerType("event")||p(((t,a,i)=>{const r=d({automationActionStore:n,automationStore:o,formulaAnalyticsModule:a,formulasModule:t,simpleFormulasModule:i});r&&(0,s().pM)(e,"automation_action_update",n.id,1,{automation_action:r,automation_action_id:n.id,automation_id:o.id})}))}function p(e){return Promise.all([r().T.formulas.load(),r().T.formulaAnalytics.load(),r().T.simpleFormulas.load()]).then((t=>{let[o,n,a]=t;e(o,n,a)})).catch((e=>{console.error("Error sending analytics for automations",e)}))}},465594:(e,t,o)=>{o.d(t,{Y:()=>i});var n=()=>o(129978);const a=new(n().O2)("invoice",(async()=>await o.e(60896).then(o.bind(o,508131)))),i=(0,n()._h)(a,(e=>e.Invoice))},473852:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(242343),a=()=>o(220413),i=()=>o(31448),r=()=>o(653147),s=o(163643);const l=function(e){const{children:t,isMobile:l,textSize:c,shouldUseDivider:d,style:u,styleKey:p}=e,{WindowSizeStore:m}=(0,o(237385).v3)(),[g,f,y]=(0,o(803290).K8)((()=>[m.getSafePaddingLeftCSS(10),m.getSafePaddingLeftCSS(14),m.getSafePaddingRightCSS(14)]),[m]),h=(0,n.useMemo)((()=>l?"small"!==c?i().J.UIRegular.mobile:i().J.UISmall.mobile:"small"!==c?i().J.UIRegular.desktop:i().J.UISmall.desktop),[l,c]),v=(0,n.useMemo)((()=>void 0===c?1.2:l?"small"!==c?i().K_.UIRegular.mobile:i().K_.UISmall.mobile:"small"!==c?i().K_.UIRegular.desktop:i().K_.UISmall.desktop),[l,c]),b=(0,o(174114).IS)((e=>({bannerStyle:{display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",...!l&&{padding:"0px 12px"},...l&&{paddingLeft:f,paddingRight:y},fontSize:h,lineHeight:v,cursor:"default",...d?{minHeight:45,borderBottom:`1px solid ${a().Ay.halfWhite}`}:{minHeight:44}},[`colorStyle__${r().q.Red}`]:{color:a().Ay.white,background:a().Ay.red,...l&&{justifyContent:"flex-start"}},[`colorStyle__${r().q.Blue}`]:{color:a().Ay.white,fill:a().Ay.white,background:a().Ay.blue,...l&&{paddingLeft:g,paddingRight:14}},[`colorStyle__${r().q.Beige}`]:{background:e.beigeBannerBackground,paddingLeft:l?12:18,paddingRight:l?14:16},[`colorStyle__${r().q.White}`]:{background:e.contentBackground,color:e.text.tertiary,fill:e.lightIconColor,height:45,padding:0,borderTop:`1px solid ${e.regularDividerColor}`,boxShadow:`0 1px 0 ${e.regularDividerColor}`},[`colorStyle__${r().q.Purple}`]:{background:"#CA59FF",color:a().Ay.white,fill:a().Ay.white},[`colorStyle__${r().q.LightRed}`]:{background:e.accentColors.red[100],color:e.accentColors.red[500]},[`colorStyle__${r().q.Yellow}`]:{background:e.accentColors.yellow[100],color:e.accentColors.yellow[600]},[`colorStyle__${r().q.PageNotification}`]:{border:`0.5px solid ${e.regularDividerColor}`,borderRadius:12,boxShadow:"0px 8px 16px 0px rgba(0, 0, 0, 0.05)",padding:13,alignItems:"start",justifyContent:"flex-start"},[`colorStyle__${r().q.ImportNotification}`]:{color:e.accentColors.uiBlue[600],fill:e.lightIconColor,background:e.accentColors.blue[30],height:48},[`colorStyle__${r().q.LightBlue}`]:{color:a().Ay.blue,fill:a().Ay.blue,background:e.lightBlueBannerBackground},[`colorStyle__${r().q.LightGray}`]:{background:e.lightGrayBannerBackground},colorStyle__default:{color:e.text.contrastPrimary,background:e.tooltipBackground}})),[l,g,f,y,d,h,v]),C=p?`colorStyle__${p}`:"colorStyle__default";return(0,s.jsx)("div",{style:{...b.bannerStyle,...b[C],...u},children:t})}},503732:(e,t,o)=>{o.d(t,{h:()=>a});o(242343);var n=o(163643);const a=(0,o(680369).wt)("trashSmall",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M5.31055 14.3398C4.85742 14.3398 4.49414 14.2129 4.2207 13.959C3.95117 13.7051 3.80664 13.3516 3.78711 12.8984L3.38867 4.45508H2.74414C2.59961 4.45508 2.47656 4.4043 2.375 4.30273C2.27344 4.20117 2.22266 4.07812 2.22266 3.93359C2.22266 3.79297 2.27344 3.67383 2.375 3.57617C2.47656 3.47461 2.59961 3.42383 2.74414 3.42383H13.2617C13.4062 3.42383 13.5273 3.47266 13.625 3.57031C13.7266 3.66797 13.7773 3.78906 13.7773 3.93359C13.7773 4.07812 13.7266 4.20117 13.625 4.30273C13.5273 4.4043 13.4062 4.45508 13.2617 4.45508H12.6172L12.2188 12.8926C12.1992 13.3457 12.0527 13.6992 11.7793 13.9531C11.5059 14.2109 11.1445 14.3398 10.6953 14.3398H5.31055ZM5.42773 13.3027H10.5723C10.7363 13.3027 10.8711 13.248 10.9766 13.1387C11.082 13.0332 11.1387 12.8926 11.1465 12.7168L11.5273 4.45508H4.45508L4.85352 12.7168C4.86133 12.8887 4.91797 13.0293 5.02344 13.1387C5.12891 13.248 5.26367 13.3027 5.42773 13.3027ZM6.27734 12.3535C6.15625 12.3535 6.05859 12.3203 5.98438 12.2539C5.91016 12.1836 5.87109 12.0898 5.86719 11.9727L5.69141 5.83203C5.6875 5.71875 5.72266 5.62695 5.79688 5.55664C5.87109 5.48242 5.96875 5.44531 6.08984 5.44531C6.21094 5.44531 6.30859 5.48047 6.38281 5.55078C6.45703 5.62109 6.49414 5.71289 6.49414 5.82617L6.67578 11.9668C6.67578 12.084 6.63867 12.1777 6.56445 12.248C6.49414 12.3184 6.39844 12.3535 6.27734 12.3535ZM8 12.3535C7.87891 12.3535 7.7793 12.3184 7.70117 12.248C7.62695 12.1777 7.58984 12.0859 7.58984 11.9727V5.83203C7.58984 5.71875 7.62695 5.62695 7.70117 5.55664C7.7793 5.48242 7.87891 5.44531 8 5.44531C8.125 5.44531 8.22461 5.48242 8.29883 5.55664C8.37695 5.62695 8.41602 5.71875 8.41602 5.83203V11.9727C8.41602 12.0859 8.37695 12.1777 8.29883 12.248C8.22461 12.3184 8.125 12.3535 8 12.3535ZM9.72852 12.3535C9.60352 12.3535 9.50391 12.3184 9.42969 12.248C9.35938 12.1777 9.32617 12.084 9.33008 11.9668L9.50586 5.83203C9.50977 5.71484 9.54883 5.62109 9.62305 5.55078C9.69727 5.48047 9.79297 5.44531 9.91016 5.44531C10.0352 5.44531 10.1328 5.48242 10.2031 5.55664C10.2773 5.62695 10.3125 5.71875 10.3086 5.83203L10.1328 11.9727C10.1289 12.0898 10.0898 12.1836 10.0156 12.2539C9.94141 12.3203 9.8457 12.3535 9.72852 12.3535ZM5.33984 3.81055V2.54492C5.33984 2.0957 5.47461 1.74609 5.74414 1.49609C6.01758 1.24219 6.39648 1.11523 6.88086 1.11523H9.10742C9.5918 1.11523 9.9707 1.24219 10.2441 1.49609C10.5176 1.74609 10.6543 2.0957 10.6543 2.54492V3.81055H9.57031V2.59766C9.57031 2.44922 9.52148 2.33008 9.42383 2.24023C9.32617 2.14648 9.19531 2.09961 9.03125 2.09961H6.95703C6.79688 2.09961 6.66797 2.14648 6.57031 2.24023C6.47266 2.33008 6.42383 2.44922 6.42383 2.59766V3.81055H5.33984Z"})})},514438:(e,t,o)=>{o.d(t,{r:()=>a});o(242343);const n={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M3.483 4.55c0-.345.28-.625.625-.625h3.5a.625.625 0 1 1 0 1.25H5.617L8.86 8.42A6 6 0 0 1 10 10.007a6 6 0 0 1 1.14-1.588l3.243-3.244h-1.99a.625.625 0 1 1 0-1.25h3.5c.344 0 .624.28.624.625v3.5a.625.625 0 0 1-1.25 0V6.06l-3.243 3.244a4.78 4.78 0 0 0-1.399 3.358v4.108h-1.25v-4.108a4.78 4.78 0 0 0-1.398-3.358L4.733 6.059V8.05a.625.625 0 1 1-1.25 0z"})},a=(0,o(680369).wt)("arrowBranch",n)},528363:(e,t,o)=>{function n(e){const{publicAccessRole:t,intl:o}=e;switch(t){case"read_and_write":case"membership_admin":case"content_only_editor":return{label:o.formatMessage({defaultMessage:"Anyone with a Notion account can edit this page.",id:"permissionUtils.edit"}),actionLabel:o.formatMessage({defaultMessage:"Sign up or login to edit",id:"permissionUtils.edit.action"})};case"comment_only":return{label:o.formatMessage({defaultMessage:"Anyone with a Notion account can comment on this page.",id:"permissionUtils.comment"}),actionLabel:o.formatMessage({defaultMessage:"Sign up or login to comment",id:"permissionUtils.comment.action"})};default:return{label:o.formatMessage({defaultMessage:"Ready to explore more? Sign up or login to start building in Notion.",id:"permissionUtils.view"}),actionLabel:o.formatMessage({defaultMessage:"Sign up or login",id:"permissionUtils.view.action"})}}}o.d(t,{p:()=>n})},699773:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(242343),a=()=>o(846581),i=()=>o(16456),r=()=>o(427091),s=o(163643);const l=function(e){const t=(0,o(653998).tz)(),l=(0,o(174114).DP)(),u=(0,o(221573).I)(),p=(0,n.useRef)(),m=(0,n.useCallback)((()=>{const t=e.value;if(!t)return;const n=i().q8(t,(0,r().P)());if(!n)return;const a=n.valueOf(),s=a-Date.now();s<0||s>o(141666).nD||p.current&&p.current.timestamp===a||(p.current&&clearTimeout(p.current.timer),p.current={timestamp:a,timer:setTimeout((()=>u("DateBox","DateBox/createReminderTimer")),s)})}),[u,e.value]),g=(0,n.useCallback)((()=>{p.current&&(clearTimeout(p.current.timer),p.current=void 0)}),[]);(0,n.useEffect)((()=>{m()}),[m]),(0,n.useEffect)((()=>()=>{g()}),[g]);const{value:f,withComma:y}=e,h=(0,o(803290).K8)((()=>f?(0,a().ZF)({value:f,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,r().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:o(533975).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,f]);if(!f)return null;const v=i().AA(f,(0,r().P)(),o(16791).locale);let b;if(f.reminder){const e=i().Zs(f,(0,r().P)());b=e?{color:l.errorText}:{color:o(220413).Ay.blue}}const C=(0,s.jsxs)(s.Fragment,{children:[h,f.reminder&&(0,o(508024).P)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),y?", ":null]});return e.disableTooltip?(0,s.jsx)("div",{className:e.className,style:{...e.style,...b},children:C}):(0,s.jsx)(o(103151).A,{renderTooltip:()=>(0,s.jsxs)(s.Fragment,{children:[e.tooltipHeader,(0,s.jsxs)("div",{style:d(l,e.tooltipHeader),children:[c(v.start),v.end?` → ${c(v.end)}`:""]})]}),render:t=>(0,s.jsx)("div",{className:e.className,style:{...e.style,...b},...t,children:C}),placement:e.tooltipPlacement})};function c(e){return(0,a().eV)({value:e,preset:"medium"})}function d(e,t){return t?{color:e.text.contrastSecondary}:{}}},709356:(e,t,o)=>{o.d(t,{A:()=>l});o(242343);var n=()=>o(174114),a=()=>o(31448),i=()=>o(907721),r=()=>o(103151),s=o(163643);function l(e){let{text:t,tooltipText:o,icon:l}=e;const c=(0,n().IS)((e=>({icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor,marginBottom:"0.1em"},tooltip:{background:e.contentBackground,boxShadow:e.shadowSM},container:{display:"flex",alignItems:"center",fontWeight:a().Wy.regular,color:e.text.secondary,fontSize:a().J.UISmall.desktop,textAlign:"center"},text:{display:"inline"}})),[]);return(0,s.jsx)(r().A,{style:c.tooltip,render:e=>(0,s.jsx)("div",{style:c.text,...e,children:t}),renderTooltip:()=>(0,s.jsxs)("div",{style:c.container,children:[l(c.icon),(0,s.jsx)("div",{children:o})]}),alignment:i().C.Start,placement:i().W.Bottom})}},748039:(e,t,o)=>{o.d(t,{Is:()=>u,LS:()=>g,NH:()=>f,QA:()=>m,_b:()=>p});o(362833),o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601);var n=()=>o(486826),a=(o(242343),()=>o(114103)),i=()=>o(16456),r=()=>o(653998),s=()=>o(200524),l=()=>o(76394),c=()=>o(378219),d=o(163643);function u(e){const t=c().g7(e)??[],o=[];for(const n of t){if(!("block"===n.table&&!0===n.isTemplate()&&n.getFormat().automation_id&&n.id!==e.id))continue;const t=n.getAutomationStore();if(t){if(!t.isReady())return{automationStoresReady:!1};void 0!==t.getRecurrence()&&t.isDefined()&&o.push(t.getModel())}}return{automationStoresReady:!0,...(0,a().templateAncestorsViolateRecurrenceNesting)(o)}}function p(e){switch(e){case"day":return(0,d.jsx)(r().sA,{defaultMessage:"Repeat daily",id:"database.templatePickerItem.recurrenceFrequency.daily"});case"week":return(0,d.jsx)(r().sA,{defaultMessage:"Repeat weekly",id:"database.templatePickerItem.recurrenceFrequency.weekly"});case"month":return(0,d.jsx)(r().sA,{defaultMessage:"Repeat monthly",id:"database.templatePickerItem.recurrenceFrequency.monthly"});case"year":return(0,d.jsx)(r().sA,{defaultMessage:"Repeat yearly",id:"database.templatePickerItem.recurrenceFrequency.yearly"});default:(0,l().HB)(e)}}function m(){return{start_date:n().c9.local().plus({days:1}).set({hour:0,minute:0,second:0,millisecond:0}).toMillis(),timezone:(0,i().dB)(),hour:0,minute:0,frequency:"day",interval:1}}function g(e){const{recurrence:t,intl:o,leadingPhrase:n}=e;return(0,a().rruleFromRecurrence)({..."month"===t.frequency?{...t,monthly_restriction:void 0}:t,weekdays:void 0,hour:0,minute:0,end_condition:void 0}).toText((e=>{switch(e){case"every":if(void 0===n)return"";if("every"===n)return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.every",defaultMessage:"every"});if("repeat every"===n)return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.repeatEvery",defaultMessage:"repeat every"});(0,l().HB)(n);break;case"day":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.day",defaultMessage:"day"});case"days":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.days",defaultMessage:"days"});case"week":{const e=(null==t?void 0:t.weekdays)||[];return 5===e.length&&(0,s()._)(new Set(e),new Set(["MO","TU","WE","TH","FR"]))?o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weekday",defaultMessage:"weekday"}):o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.week",defaultMessage:"week"})}case"weeks":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weeks",defaultMessage:"weeks"});case"month":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.month",defaultMessage:"month"});case"months":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.months",defaultMessage:"months"});case"year":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.year",defaultMessage:"year"});case"years":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.years",defaultMessage:"years"});default:return e.toString()}})).trim()}function f(e){const t=e.getRecurrence();return Boolean(e.isTriggerType("recurrence")&&t&&"disabled_recurrence_ended"===e.getStatus())}},749975:(e,t,o)=>{o.d(t,{ET:()=>l,Ks:()=>c,RI:()=>s,p2:()=>r});o(610931);var n=o(242343);const a="collectionContextStore",i=(0,o(372660).C)({displayName:a,legacyContextKey:a,modernContextDefaultValue:void 0}),r=i.context,s=i.Provider;function l(){const e=n.useContext(r);if(void 0===e)throw new Error(`No context provided: ${a}`);return e}function c(){return n.useContext(r)}},758261:(e,t,o)=>{o.d(t,{j:()=>a});class n extends(()=>o(151255))().A{}const a=new n},772785:(e,t,o)=>{o.d(t,{O:()=>u,e:()=>d});o(725707),o(500234);var n=()=>o(752597),a=()=>o(881984),i=()=>o(384221),r=()=>o(663539),s=()=>o(360482),l=()=>o(758261),c=()=>o(191759);function d(e,t){const o=s().dd(t),n=r().xh(o);e.setState({...e.state,files:n})}async function u(e){const{blockStore:t,pageViewBlockStore:o,environment:r}=e;o?o.setState({...o.state,forceDiscussionOpen:!0}):c().A.openNewPageDiscussionInput(t),a().o2(r,{from:"page_comments"}),await n().default.afterNextFlush();const s=l().j.find((e=>e.getBlockStore().id===t.id)),d=null==s?void 0:s.getInputStore();d&&i().setSelectionAtEnd({store:d.state.textStore})}},779698:(e,t,o)=>{o.d(t,{Ah:()=>y,Dk:()=>m,Iv:()=>f,SF:()=>g,YO:()=>b,_f:()=>x,c_:()=>u,dW:()=>v,gW:()=>p,sp:()=>S,vN:()=>h});o(610931),o(362833),o(725707),o(491955),o(771702),o(403517),o(113085);var n=()=>o(975392),a=()=>o(204132),i=()=>o(76394),r=()=>o(599932),s=()=>o(465546),l=()=>o(409211),c=()=>o(34662),d=()=>o(876988);function u(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:t})}function p(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:t})}function m(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:t})}function g(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:t})}function f(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:t})}function y(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:t})}function h(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:t})}function v(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:t})}function b(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:t})}function C(e){const{formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:n,getRecordModel:r,spaceId:l,value:c,featureGates:d}=e;if("formula"===c.type){if(!(0,i().O9)(c.value))return;const e=a().Q.unwrapOr(o.parseFormulaInputToAst(c.value),void 0);if(e){const a=o.addTypesToFormulaAST(e,{handleDataRequest:(0,s().zg)(r),spaceId:l,valueTypes:n,featureGates:d});return{...t.getFormulaAnalytics(e,{getRecordModel:r,typecheckContextValues:n}),formula_return_type:a.node.type,redacted_formula:t.getRedactedFormulaAsStringSync(e,{getRecordModel:r,typecheckContextValues:n})}}}else{if("simple"===c.type){if(!(0,i().O9)(c.value))return;return t.getSimpleFormulaAnalytics(c.value,{getRecordModel:r,typecheckContextValues:n})}(0,i().HB)(c.type)}}function x(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g,simpleFormulasModule:f}=e;return t.isType("complete_sprint")?{automation_action_id:t.pointer.id,type:"complete_sprint"}:t.isType("create_page")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:r,featureGates:s}=e,l=t.getConfig();let c,d=[];const u=null==l?void 0:l.collection,p=null==l?void 0:l.properties;if((0,i().O9)(u)&&(0,i().O9)(p)&&p.length>0){const e=r(u),g=null==e?void 0:e.getNormalizedSchema();(0,i().O9)(g)&&(d=p.map((e=>{var t;return(null===(t=g[e])||void 0===t?void 0:t.type)??"unknown"})));const f=null==l?void 0:l.values;if(n&&(0,i().O9)(f)){c=[];for(const e of p){var m;const i=null===(m=f[e])||void 0===m?void 0:m.value;if(!i)continue;const l=C({formulaAnalyticsModule:o,formulasModule:n,getRecordModel:r,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:i,featureGates:s});l&&c.push(l)}}}return{automation_action_id:t.pointer.id,property_formula_stats:c,property_types:d,type:"create_page"}}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("duplicate_blocks")?{automation_action_id:t.pointer.id,type:"duplicate_blocks"}:t.isType("modal_confirmation")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:r,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,i().O9)(l)&&l.text){const e=C({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:r,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:l.text,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"modal_confirmation"}}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("open_page")?{automation_action_id:t.pointer.id,type:"open_page"}:t.isType("query_collection")?{automation_action_id:t.pointer.id,type:"query_collection"}:t.isType("send_in_app_notification")?function(e){var t;const{automationActionModel:o,formulaAnalyticsModule:n,formulasModule:a,formulaTypecheckContextValues:r,getRecordModel:s,featureGates:l,simpleFormulasModule:d}=e,u={automation_action_id:o.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},p=o.getConfig();if(!(0,i().O9)(p))return u;if((0,i().O9)(p.target))if("formula"===p.target.type&&(0,i().O9)(p.target.value)){if(u.targetData={type:"formula",numUserFormulaTargets:(0,c().Fbh)(p.target.value.value).length,numFormulaContextTargets:d.getReferencedContextValueIds(p.target.value).length},a){const e=C({formulasModule:a,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:r,spaceId:o.spaceId,value:p.target.value,featureGates:l});e&&(u.formula_stats??=[],u.formula_stats.push(e))}}else if("property"===p.target.type&&(0,i().O9)(p.target.propertyId)&&(0,i().O9)(p.target.collectionPointer)){const e=s(p.target.collectionPointer),t=null==e?void 0:e.getSchema();var m;(0,i().O9)(t)&&(u.targetData={type:"property",propertyType:null===(m=t[p.target.propertyId])||void 0===m?void 0:m.type})}if((0,i().O9)(null===(t=p.notification_message)||void 0===t?void 0:t.value)&&(u.messageCharacterCount=(0,c().FAw)(p.notification_message.value),a)){const e=C({formulasModule:a,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:r,spaceId:o.spaceId,value:p.notification_message,featureGates:l});e&&(u.formula_stats??=[],u.formula_stats.push(e))}return u}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g,simpleFormulasModule:f}):t.isType("send_gmail_notification")?function(e){var t,o,a,s,d,u,p;const{automationActionModel:m,formulaAnalyticsModule:g,formulasModule:f,formulaTypecheckContextValues:y,getRecordModel:h,featureGates:v}=e,b=m.getConfig();if(!(0,i().O9)(b))return{automation_action_id:m.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const x=Object.fromEntries(Object.entries(b||{}).map((e=>{let[t,o]=e;var n;return"formula"===(null==o?void 0:o.type)?[t,Boolean(null==o||null===(n=o.value)||void 0===n?void 0:n.value)]:"simple"===(null==o?void 0:o.type)?[t,Boolean(null==o?void 0:o.value)]:[t,Boolean(o)]}))),{to:S,cc:_,bcc:M}=b,A=[...(null==S||null===(t=S.value)||void 0===t?void 0:t.value)||[],...(null==_||null===(o=_.value)||void 0===o?void 0:o.value)||[],...(null==M||null===(a=M.value)||void 0===a?void 0:a.value)||[]],k=[...(0,c().Fbh)(A).map((e=>h({table:l().oo,id:e}))).map((e=>null==e?void 0:e.email)).filter(i().O9),...(0,r().C3)((0,c().k4p)(A))],w=n().Tr(k.map((e=>e.split("@")[1]))),T=[null===(s=b.to)||void 0===s?void 0:s.value,null===(d=b.cc)||void 0===d?void 0:d.value,null===(u=b.bcc)||void 0===u?void 0:u.value,null===(p=b.reply_to)||void 0===p?void 0:p.value,b.from_name,b.email_subject,b.email_body].map((e=>{if(f&&(0,i().O9)(e))return C({formulaAnalyticsModule:g,formulasModule:f,getRecordModel:h,formulaTypecheckContextValues:y,spaceId:m.spaceId,value:e,featureGates:v})})).filter(i().O9);return{automation_action_id:m.pointer.id,fields:x,formula_stats:T,recipient_domains:w,type:"send_gmail_notification"}}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("slack_notification")?{automation_action_id:t.pointer.id,type:"slack_notification"}:t.isType("update_pages")?function(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:n,formulasModule:a,formulaTypecheckContextValues:r,getRecordModel:l,featureGates:c}=e,u=t.getConfig(),p=[],m=[],g=[];if((0,i().O9)(u)&&(0,i().O9)(u.target)&&(0,i().O9)(u.properties)&&u.properties.length>0){let e;if("variable"===u.target.type){const t=(0,s().y5)(u.target.id);if("action"===t.source){const t=(0,d().y)({actionModels:o,id:u.target.id}).collectionPointer;if((0,i().O9)(t)){const o=l(t);e=null==o?void 0:o.getNormalizedSchema()}}else{if("global"!==t.source||"button_page"!==t.global)throw new Error("Failed loading property schema");{const t=(0,s().IV)(r,u.target.id);if("block"===(null==t?void 0:t.type.type)&&(0,i().O9)(t.type.collection)){const o=l(t.type.collection);e=null==o?void 0:o.getNormalizedSchema()}}}}else if("collection"===u.target.type){const t=l(u.target.collection);e=null==t?void 0:t.getNormalizedSchema()}(0,i().O9)(e)&&u.properties.forEach((o=>{const s=e[o];if((0,i().O9)(s)&&(p.push(s.type),a&&(0,i().O9)(u.values))){const e=u.values[o];if((0,i().O9)(e)&&(m.push({type:s.type,operator:e.action}),e.value)){const o=C({formulasModule:a,formulaAnalyticsModule:n,getRecordModel:l,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:e.value,featureGates:c});o&&g.push(o)}}}))}return{automation_action_id:t.pointer.id,property_configs:m,property_formula_stats:g,property_types:p,type:"update_pages"}}({automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("define_variables")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:r,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,i().O9)(l)&&l.values)for(const i of Object.values(l.values))if(i.value){const e=C({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:r,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:i.value,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"define_variables"}}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("http_request")?{automation_action_id:t.pointer.id,type:"http_request"}:t.isType("publish_site")?{automation_action_id:t.pointer.id,type:"publish_site"}:void(0,i().HB)(t)}function S(e){const{automationModel:t,builderType:o="sidebar",formulaAnalyticsModule:n,formulasModule:a,formulaTypecheckContextValues:r,getRecordModel:s,featureGates:l,simpleFormulasModule:c,source:d}=e,u=[],p=t.getActionPointers().map((e=>s(e))).filter(i().O9);for(const b of t.getActionPointers()){const e=s(b);(0,i().O9)(e)&&u.push(x({automationActionModel:e,automationActionModels:p,formulaAnalyticsModule:n,formulasModule:a,formulaTypecheckContextValues:r,getRecordModel:s,featureGates:l,simpleFormulasModule:c}))}const m=[];let g,f,y;if(t.isEventType()){var h;const e=t.getEventConfiguration(),o=s(t.getParentPointer());g=t.getParentId();const n=t.getEventConfiguration();if("collection_view"===(null===(h=n.source)||void 0===h?void 0:h.type)){const e=s(n.source.pointer);y=null==e?void 0:e.parent_id,f=null==n?void 0:n.source.pointer.id}const a=null==o?void 0:o.getNormalizedSchema();if((0,i().O9)(a)){const{pagesAdded:t,pagePropertiesEdited:o}=e;if(t&&m.push({type:"page"}),"any"===o.type)m.push({condition:"any",type:"property"});else if("none"===o.type)m.push({condition:"none",type:"property"});else{let e=[];"some"===o.type?e=o.some??[]:"all"===o.type&&(e=o.all??[]);const t=[],n=[];e.forEach((e=>{var o;const r=null===(o=a[e.property])||void 0===o?void 0:o.type;(0,i().O9)(r)&&(t.push({type:r,operator:e.filter.operator}),n.push(r))})),m.push({condition:o.type,property_configs:t,property_types:n,type:"property"})}}}else if(t.isButtonType())m.push({type:"button"});else if(t.isRecurrenceType()){var v;m.push({type:"recurrence",frequency:null===(v=t.getTrigger().recurrence)||void 0===v?void 0:v.frequency})}else(0,i().HB)(t);return{automation_actions:u,automation_id:t.id,automation_triggers:m,collection_id:g,collection_view_id:f,collection_view_block_id:y,builder_type:o,source:d}}},783662:(e,t,o)=>{o.d(t,{j:()=>a});o(242343);var n=o(163643);const a=(0,o(680369).wt)("newSidebarSettings",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10 13C8.35003 13 7.00003 11.65 7.00003 10C7.00003 8.35 8.35003 7 10 7C11.65 7 13 8.35 13 10C13 11.65 11.65 13 10 13ZM10 8.5C9.17003 8.5 8.50003 9.17 8.50003 10C8.50003 10.83 9.17003 11.5 10 11.5C10.83 11.5 11.5 10.83 11.5 10C11.5 9.17 10.83 8.5 10 8.5ZM10.02 18.45C9.45003 18.45 8.90003 18.4 8.36003 18.29C8.08003 18.23 7.85003 18.01 7.80003 17.72L7.51003 16.06C7.51003 16.06 7.42003 16.02 7.37003 16L6.01003 16.96C5.77003 17.13 5.45003 17.13 5.21003 16.96C4.78003 16.67 4.39003 16.34 4.03003 15.98C3.63003 15.57 3.27003 15.15 2.97003 14.69C2.81003 14.45 2.81003 14.13 2.97003 13.9L3.94003 12.52C3.94003 12.52 3.90003 12.43 3.88003 12.38L2.24003 12.1C1.95003 12.05 1.72003 11.83 1.67003 11.54C1.58003 11.04 1.53003 10.52 1.53003 10.01C1.53003 9.44 1.58003 8.89 1.69003 8.35C1.75003 8.07 1.97003 7.84 2.26003 7.79L3.92003 7.5C3.92003 7.5 3.96003 7.41 3.98003 7.36L3.02003 6C2.85003 5.76 2.85003 5.44 3.02003 5.2C3.31003 4.78 3.64003 4.38 4.00003 4.02C4.40003 3.62 4.83003 3.27 5.28003 2.96C5.52003 2.8 5.84003 2.8 6.07003 2.96L7.45003 3.93C7.45003 3.93 7.54003 3.89 7.59003 3.87L7.87003 2.23C7.92003 1.94 8.14003 1.71 8.43003 1.66C8.93003 1.57 9.45003 1.52 9.96003 1.52C10.53 1.52 11.08 1.57 11.62 1.68C11.91 1.74 12.13 1.96 12.17 2.25L12.46 3.91C12.46 3.91 12.55 3.95 12.6 3.97L13.96 3.01C14.2 2.84 14.52 2.84 14.76 3.01C15.18 3.3 15.58 3.63 15.94 3.99C16.35 4.4 16.7 4.82 17 5.27C17.16 5.51 17.16 5.83 17 6.06L16.03 7.44C16.03 7.44 16.07 7.53 16.09 7.58L17.73 7.86C18.02 7.91 18.24 8.13 18.3 8.42C18.39 8.92 18.44 9.44 18.44 9.95C18.44 10.52 18.39 11.07 18.28 11.61C18.22 11.89 18 12.12 17.71 12.16L16.05 12.45C16.05 12.45 16.01 12.54 15.99 12.59L16.95 13.95C17.12 14.19 17.12 14.51 16.95 14.75C16.66 15.17 16.33 15.57 15.97 15.93C15.57 16.34 15.14 16.69 14.69 16.99C14.45 17.15 14.13 17.15 13.9 16.99L12.52 16.02C12.52 16.02 12.43 16.06 12.38 16.08L12.1 17.72C12.05 18.01 11.83 18.23 11.54 18.29C11.04 18.38 10.52 18.43 10.01 18.43L10.02 18.45ZM9.10003 16.99C9.68003 17.06 10.26 17.06 10.82 16.99L11.09 15.44C11.13 15.18 11.32 14.97 11.57 14.89C11.82 14.81 12.07 14.71 12.3 14.59C12.53 14.47 12.8 14.5 13.02 14.64L14.32 15.56C14.56 15.38 14.78 15.18 14.99 14.97C15.19 14.77 15.37 14.57 15.54 14.36L14.64 13.08C14.49 12.87 14.47 12.58 14.59 12.35C14.7 12.13 14.8 11.89 14.89 11.62C14.97 11.37 15.18 11.19 15.43 11.15L17 10.88C17.04 10.58 17.06 10.28 17.06 9.99C17.06 9.71 17.04 9.44 17.01 9.17L15.46 8.9C15.2 8.86 14.99 8.67 14.91 8.42C14.83 8.17 14.73 7.92 14.61 7.69C14.49 7.46 14.52 7.18 14.66 6.97L15.58 5.67C15.4 5.44 15.2 5.21 14.99 5C14.79 4.8 14.59 4.62 14.37 4.45L13.09 5.35C12.88 5.5 12.6 5.52 12.37 5.4C12.15 5.29 11.91 5.19 11.64 5.1C11.4 5.02 11.22 4.81 11.17 4.56L10.9 2.99C10.33 2.92 9.74003 2.92 9.18003 2.99L8.91003 4.54C8.87003 4.8 8.68003 5.01 8.43003 5.09C8.18003 5.17 7.93003 5.27 7.70003 5.39C7.47003 5.51 7.19003 5.49 6.98003 5.34L5.68003 4.42C5.44003 4.6 5.22003 4.8 5.01003 5.01C4.81003 5.21 4.63003 5.41 4.46003 5.62L5.36003 6.9C5.51003 7.11 5.53003 7.39 5.41003 7.62C5.30003 7.84 5.20003 8.08 5.11003 8.35C5.03003 8.59 4.82003 8.77 4.57003 8.82L3.00003 9.09C2.96003 9.39 2.94003 9.69 2.94003 9.98C2.94003 10.26 2.96003 10.53 2.99003 10.8L4.54003 11.07C4.80003 11.11 5.01003 11.3 5.09003 11.55C5.17003 11.8 5.27003 12.05 5.39003 12.28C5.50003 12.51 5.48003 12.79 5.34003 13L4.42003 14.3C4.60003 14.54 4.80003 14.76 5.01003 14.97C5.21003 15.17 5.41003 15.35 5.62003 15.52L6.90003 14.62C7.11003 14.47 7.39003 14.45 7.63003 14.57C7.85003 14.68 8.09003 14.78 8.36003 14.87C8.61003 14.95 8.79003 15.16 8.83003 15.41L9.10003 16.98V16.99Z"})})},789894:(e,t,o)=>{o.d(t,{n:()=>i});var n=()=>o(129978);const a=new(n().O2)("react-day-picker",(async()=>await Promise.all([o.e(95555),o.e(75831),o.e(68548)]).then(o.bind(o,210513)))),i=(0,n()._h)(a,(e=>e.default))},869570:(e,t,o)=>{o.d(t,{X:()=>a});o(242343);var n=o(163643);const a=(0,o(680369).wt)("externalLink",{viewBox:"0 0 17 16",svg:(0,n.jsx)("path",{d:"M4.94922 13.498C4.31641 13.498 3.83789 13.3359 3.51367 13.0117C3.18945 12.6914 3.02734 12.2188 3.02734 11.5938V4.46289C3.02734 3.83398 3.18945 3.35938 3.51367 3.03906C3.83789 2.71875 4.31641 2.55859 4.94922 2.55859H12.0449C12.6777 2.55859 13.1562 2.71875 13.4805 3.03906C13.8047 3.35938 13.9668 3.83398 13.9668 4.46289V11.5938C13.9668 12.2188 13.8047 12.6914 13.4805 13.0117C13.1562 13.3359 12.6777 13.498 12.0449 13.498H4.94922ZM5.01953 12.3438H11.9746C12.2441 12.3438 12.4512 12.2734 12.5957 12.1328C12.7402 11.9922 12.8125 11.7793 12.8125 11.4941V4.55664C12.8125 4.27539 12.7402 4.06445 12.5957 3.92383C12.4512 3.7832 12.2441 3.71289 11.9746 3.71289H5.01953C4.74609 3.71289 4.53711 3.7832 4.39258 3.92383C4.25195 4.06445 4.18164 4.27539 4.18164 4.55664V11.4941C4.18164 11.7793 4.25195 11.9922 4.39258 12.1328C4.53711 12.2734 4.74609 12.3438 5.01953 12.3438ZM10.334 9.54297C10.1855 9.54297 10.0664 9.49609 9.97656 9.40234C9.89062 9.30859 9.84766 9.17969 9.84766 9.01562V8.08398L9.93555 7.24609L9.15039 8.10156L7.09961 10.1465C6.99023 10.2559 6.85742 10.3105 6.70117 10.3105C6.55273 10.3105 6.42969 10.2637 6.33203 10.1699C6.23828 10.0762 6.19141 9.95117 6.19141 9.79492C6.19141 9.6582 6.24609 9.53516 6.35547 9.42578L8.41211 7.36914L9.2793 6.57227L8.47656 6.66602H7.48633C7.32617 6.66602 7.19727 6.62305 7.09961 6.53711C7.00586 6.45117 6.95898 6.33203 6.95898 6.17969C6.95898 6.03516 7.00586 5.91992 7.09961 5.83398C7.19727 5.74414 7.32422 5.69922 7.48047 5.69922H10.2227C10.4062 5.69922 10.5508 5.74609 10.6562 5.83984C10.7617 5.93359 10.8145 6.08398 10.8145 6.29102V9.00977C10.8145 9.16602 10.7695 9.29492 10.6797 9.39648C10.5938 9.49414 10.4785 9.54297 10.334 9.54297Z"})})},870896:(e,t,o)=>{o.d(t,{d:()=>a});o(725707),o(491955);class n extends(()=>o(129044))().default{getInitialState(){return{flowId:void 0,type:"connected_properties_setup",collectionsProperties:{}}}createNewFlowId(){const e=(0,o(214144).JW)();return this.setState({...this.state,flowId:e}),e}getFlowId(){return this.state.flowId?this.state.flowId:this.createNewFlowId()}addCollectionProperties(e,t){const o=this.state.collectionsProperties[e],n=o?{...o,...t}:t;this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:n}})}removeCollectionProperties(e,t){const o=this.state.collectionsProperties[e];if(!o)return;const n=Object.fromEntries(Object.entries(o).filter((e=>{let[o]=e;return!t.has(o)})));if(0===Object.keys(n).length){const{[e]:t,...o}=this.state.collectionsProperties;this.setState({...this.state,collectionsProperties:o})}else this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:n}})}}const a=new n;(0,o(996094).exposeDebugValue)("ConnectedPropertiesSyncStore",a)},872289:(e,t,o)=>{o.d(t,{A:()=>P});var n=o(242343),a=()=>o(237385),i=()=>o(803290),r=()=>o(129044),s=()=>o(653998),l=()=>o(220413),c=()=>o(76394),d=()=>o(31448),u=()=>o(271120),p=()=>o(441288),m=()=>o(375567),g=()=>o(818369),f=()=>o(868325),y=()=>o(640979),h=()=>o(485966),v=()=>o(764227),b=()=>o(921637),C=()=>o(441292),x=()=>o(59175),S=()=>o(935091),_=()=>o(286404),M=()=>o(951540),A=o(163643);const k={marginBottom:10},w={...k,width:"100%",height:"100%",padding:10,alignItems:"top",borderRadius:0},T=(0,s().YK)({requestAccessMessagePlaceholder:{defaultMessage:"Message (optional)",id:"requestAccessForm.messageInput.placeholder"},rateLimitError:{defaultMessage:"You have recently requested access to this page.",id:"requestAccessForm.errorMessage.rateLimit"},currentUserNotFound:{defaultMessage:"Current user not found.",id:"requestAccessForm.errorMessage.currentUserNotFound"}});function I(){return(0,A.jsx)(s().sA,{defaultMessage:"Cancel",id:"requestAccessForm.cancelButton.label"})}const j=r().default.createClass(0,{name:"RequestAttemptStore"}),B=r().default.createClass(void 0,{name:"MessageStore"});const P=function(e){const t=(0,a().v3)(),r=(0,a().WS)(),l=(0,i().uB)(e.popupStore,o(962373).A),c=(0,i().uB)(void 0,B),p=(0,i().uB)(void 0,j),g=(0,n.useCallback)((()=>V(l)),[l]),f=(0,n.useCallback)((()=>(0,A.jsx)(F,{...e,requestAttemptStore:p,messageStore:c,buttonPopupStore:l})),[e,p,c,l]),y=(0,i().K8)((()=>p.state>0),[p]),h=(0,i().K8)((()=>l.state.open),[l]);if("current-actor-to-block"===e.type)return(0,A.jsx)(O,{type:"page",block:e.block,flowId:e.flowId,buttonType:e.buttonType});if("current-actor-to-collection"===e.type)return(0,A.jsx)(O,{type:"collection",collection:e.collection,flowId:e.flowId,buttonType:e.buttonType});const v="primary"===e.buttonType?M().A:_().A,b=r?(0,A.jsx)(o(443252).Ay,{popupType:o(466321).n.SlideUp,open:h,render:f}):(0,A.jsx)(o(922172).a,{open:h,onDismiss:g,render:f});return"current-actor-to-space-via-onboarding"===e.type?b:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(v,{size:"lg",disabled:y,onClick:()=>{var o,n;return function(e,t){const{environment:o,flowId:n,type:a,source:i,spaceId:r,pageId:s}=e;"trusted_domain_page"===i&&r&&m().w(o,{spaceId:r,pageId:s,joinSpaceMethod:"request_to_join"});"current-actor-to-block"===a?u().Xx(o,{button_name:"request-access",flow_id:n,request_access_type:"page"}):"current-actor-to-space-via-team"===a&&u().Xx(o,{button_name:"request-access",flow_id:n,request_access_type:"team"});t.setState({open:!0})}({environment:t,flowId:e.flowId,type:e.type,source:e.source,pageId:null===(o=e.block)||void 0===o?void 0:o.id,spaceId:null===(n=e.block)||void 0===n?void 0:n.spaceId},l)},style:"outline"===e.buttonType?{fontWeight:d().Wy.semibold}:{},children:y?(0,A.jsx)(s().sA,{id:"fullPageError.requestAccessButton.requested",defaultMessage:"Requested access"}):N(e.type)}),b]})};function R(e){let{result:t}=e;return t&&t.error?(0,A.jsx)("div",{style:{color:l().Ay.redWithAlpha(1),textAlign:"center",width:"100%",marginBottom:16},children:t.error}):null}function L(e){e.update((e=>e+1))}function V(e){return e.setState({open:!1})}function D(e){let{error:t,result:o,ready:r,requestAttemptStore:l,messageStore:c,type:u}=e;const p=(0,s().tz)(),m=(0,a().WS)(),g=(0,n.useCallback)((()=>L(l)),[l]),f=(0,n.useCallback)((e=>function(e,t){t.setState(e.target.value)}(e,c)),[c]),y=(0,i().K8)((()=>Boolean(0===l.state||r&&o&&o.error)),[l,r,o]),h=(0,i().K8)((()=>c.state||""),[c]);return(0,A.jsxs)(A.Fragment,{children:[!m&&(0,A.jsx)("div",{style:{fontSize:16,fontWeight:d().Wy.semibold,marginBottom:16},children:N(u)}),(0,A.jsx)(x().A,{format:m?x().C.Transparent:void 0,textarea:!0,value:h,onChange:f,disabled:!y,placeholder:p.formatMessage(T.requestAccessMessagePlaceholder),style:{...m?{...w,padding:"16px"}:{...k,marginBottom:16,padding:"8px 12px",alignItems:"flex-start"}}}),!m&&(0,A.jsx)(M().A,{size:"lg",disabled:!y,onClick:g,style:k,children:(0,A.jsx)(s().sA,{defaultMessage:"Send request",id:"requestAccessForm.sendRequestButton.label"})}),(0,A.jsx)(R,{result:o})]})}function F(e){const{requestAttemptStore:t,messageStore:o,buttonPopupStore:r}=e,l=(0,a().v3)(),d=(0,a().WS)(),u=(0,s().tz)(),m=(0,n.useCallback)(((n,a,i)=>(0,A.jsx)(D,{requestAttemptStore:t,messageStore:o,error:n,result:a,ready:i,type:e.type})),[t,o,e.type]),v=(0,i().K8)((()=>{var e;return null===(e=h().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),x=(0,n.useCallback)((t=>async function(e){const{messageStore:t,buttonPopupStore:o,type:n,teamId:a,requestAttempt:i,environment:r,currentUserId:s,intl:l,flowId:d}=e;if(0===i)return;const u=t.state,m=await async function(){if("current-actor-to-block"===n)return g().callApi({eventName:"requestAccess",environment:r,data:{type:"current-actor-to-block",block:e.block,message:u}});if("current-actor-to-collection"===n)return g().callApi({eventName:"requestAccess",environment:r,data:{type:"current-actor-to-collection",collection:e.collection,message:u}});if("current-actor-to-space-via-team"===n)return g().callApi({eventName:"requestAccess",environment:r,data:{type:"current-actor-to-space-via-team",teamId:a,message:u}});if("current-actor-to-space-via-block"===n){if(!s)return;return g().callApi({eventName:"requestAccess",environment:r,data:{type:"actor-to-space",spaceId:e.block.spaceId,message:u,forActorId:s,attributes:{add_permissions_on_approval:!1,origin_type:"trusted_domain_page"}}})}if("current-actor-to-space-via-onboarding"===n){if(!s)return;return g().callApi({eventName:"requestAccess",environment:r,data:{type:"actor-to-space",spaceId:e.spaceId,message:u,forActorId:s,attributes:{add_permissions_on_approval:!1,origin_type:"onboarding"}}})}}();return m?"success"!==m.type?"UserRateLimitResponse"===(null===(y=m.body)||void 0===y?void 0:y.name)?{error:l.formatMessage(T.rateLimitError)}:{error:(0,f().Hu)(l,m)}:("current-actor-to-block"===n?p().T_(r,{request_access_type:"page",flow_id:d,requestId:m.data.requestId}):"current-actor-to-space-via-team"===n?p().T_(r,{request_access_type:"team",flow_id:d}):"current-actor-to-space-via-block"===n?p().T_(r,{request_access_type:"space",flow_id:d,source:"trusted_domain_page"}):"current-actor-to-collection"===n?p().T_(r,{request_access_type:"collection",flow_id:d,requestId:m.data.requestId}):"current-actor-to-space-via-onboarding"===n?p().T_(r,{request_access_type:"space",flow_id:d,source:"onboarding"}):(0,c().HB)(n),o.reset(),{value:!0}):{error:l.formatMessage(T.currentUserNotFound)};var y}({...e,requestAttempt:t,environment:l,intl:u,currentUserId:v})),[l,u,e,v]),M=(0,n.useCallback)((()=>L(t)),[t]),k=(0,n.useCallback)((()=>V(r)),[r]),w=(0,i().O$)(t);return d?(0,A.jsx)(S().A,{menuType:y().gu.Modal,whiteBackground:!0,title:N(e.type),left:I(),onClickLeft:k,right:(0,A.jsx)(s().sA,{id:"requestAccessForm.mobileSend.label",defaultMessage:"Send"}),onClickRight:M,children:(0,A.jsx)(C().A,{debugName:"RequestAccessForm",capture:!0,children:(0,A.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"stretch",alignItems:"stretch",width:"100%",height:"100%"},children:(0,A.jsx)(b().A,{request:w,performRequest:x,render:m})})})}):(0,A.jsx)(C().A,{debugName:"RequestAccessForm",capture:!0,children:(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evently",alignItems:"stretch",padding:"20px 28px 24px",width:"340px"},children:[(0,A.jsx)(b().A,{request:w,performRequest:x,render:m}),(0,A.jsx)(_().A,{size:"lg",onClick:k,children:I()})]})})}function O(e){const{type:t,flowId:o,buttonType:r}=e,l=(0,a().v3)(),d="outline"===r?_().A:M().A,[u,m]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1),h={attributes:{add_permissions_on_approval:!1,role:(0,i().K8)((()=>(0,v().dL)()),[])?"reader":"read_and_write"},message:void 0};let b;"page"===t?b={...h,type:"current-actor-to-block",block:{id:e.block.id,spaceId:e.block.spaceId}}:"collection"===t?b={...h,type:"current-actor-to-collection",collection:{id:e.collection.id,spaceId:e.collection.spaceId}}:(0,c().HB)(t);const C=(0,n.useCallback)((async()=>{var e;const n=await g().callApi({eventName:"requestAccess",environment:l,data:b});"success"===n.type&&n.data.request?(m(!0),p().T_(l,{request_access_type:t,previous_access_level:"none",requested_access_level:"read_and_write",flow_id:o,requestId:n.data.requestId})):"failed"===n.type&&"UserRateLimitResponse"===(null===(e=n.body)||void 0===e?void 0:e.name)&&y(!0)}),[l,b,t,o]);return(0,A.jsx)(d,{size:"lg",disabled:u||f,disabledFeedback:u||f,onClick:C,children:u?(0,A.jsx)(s().sA,{id:"fullPageError.requestAccessButton.edit.Requested",defaultMessage:"Requested access"}):f?(0,A.jsx)(s().sA,{id:"fullPageError.requestAccessButton.edit.TryAgain",defaultMessage:"Try again later"}):N("page"===t?"current-actor-to-block":"current-actor-to-collection")})}function N(e){return"current-actor-to-space-via-block"===e||"current-actor-to-space-via-onboarding"===e?(0,A.jsx)(s().sA,{defaultMessage:"Request membership",id:"requestAccessForm.requestAccessToSpaceButton.title"}):(0,A.jsx)(s().sA,{defaultMessage:"Request access",id:"requestAccessForm.requestAccessButton.title"})}},876988:(e,t,o)=>{o.d(t,{y:()=>i});o(725707),o(500234);var n=()=>o(76394),a=()=>o(465546);function i(e){var t;const{actionModels:o,id:i}=e,r=(0,a().y5)(i),s="action"===r.source?o.find((e=>e.id===r.action_id)):void 0,l=(0,n().O9)(s)&&s.isType("create_page")?null===(t=s.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:r,collectionPointer:l,actionModel:s}}},880026:(e,t,o)=>{o.d(t,{Dw:()=>S,Hc:()=>x,o5:()=>C});o(610931),o(242343);var n=()=>o(502140),a=()=>o(514438),i=()=>o(680369),r=()=>o(486540),s=()=>o(66460),l=()=>o(653998),c=()=>o(975392),d=()=>o(441288),u=()=>o(145046),p=()=>o(919536),m=()=>o(84543),g=()=>o(35462),f=()=>o(990616),y=()=>o(196387),h=()=>o(413871),v=()=>o(268117),b=o(163643);async function C(e){let{newRole:t,...o}=e;const n=o.oldPermissionItem,a=(0,c().o8)(n);return a.role=t,await x({newPermissionItem:a,...o})}async function x(e){const{oldPermissionItem:t,newPermissionItem:o,wasInherited:a,environment:i,store:l,sudoModeStore:c,restrictingVisibility:u,fromPermissionWrapper:g,trustedDomainsLoggingData:f}=e,b=(0,v().FI)();if(!(0,r().nK)(t,o))throw new Error("Permission type mismatch.");const C=!!c&&c.shouldSaveTransactionWithSudoMode(l),x=(0,r().$q)(t.role,o.role);if(a&&x!==o.role||u){return await S({environment:i,useSudoMode:C,store:l,permissionItem:o,fromPermissionWrapper:g,isRedesignEnabled:b,shouldInherit:!0,trustedDomainsLoggingData:f})}return l instanceof h().Bv&&!l.isTopLevel()&&t.role!==o.role&&x!==t.role&&d().MR(i),m().createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:i,canUndo:!0,useSudoMode:C,perform:t=>{const n=y().default.DO_NOT_USE_markLegacy("share_menu.update_page_permission_lag");p().wd({environment:i,store:l,permissionItems:[o],transaction:t,pagePermissionChangeLocation:e.location,metric:n,fromPermissionWrapper:g})}}),"trusted_domain_permission"===o.type&&n().log({level:"warning",from:"shareMenu.handlePermissionItemChange",type:"TrustedDomainPermissionChange",spaceId:(0,s().e)(l.pointer.spaceId),data:{miscDataToConvertToString:{message:"shareMenu.handlePermissionItemChange updating trusted domain permission",blockId:l.id,oldPermissionItem:t,newPermissionItem:o,trustedDomainsLoggingData:f}}}),!0}async function S(e){const{environment:t,useSudoMode:o,store:n,permissionItem:r,fromPermissionWrapper:s,isRedesignEnabled:c,shouldInherit:d,trustedDomainsLoggingData:y}=e,h="none"===(null==r?void 0:r.role)?{type:"remove",permissionItem:r}:{type:"restrict"};return!!("user_permission"===(null==r?void 0:r.type)&&(null==r?void 0:r.user_id)===t.currentUser.id||(c?await u().Gh({message:(0,f().r6)(h,c),description:(0,b.jsx)(g().A,{isSmall:!0,isMultiline:!0,children:(0,b.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperTextV2",defaultMessage:"Changing this will unlink this page from its parent, so it will no longer inherit share settings. Admins can still restore settings on unlinked pages."})}),acceptLabel:(0,f().QU)(h,c),icon:(0,a().r)({height:i().Ev.xl,width:i().Ev.xl})}):await u().Gh({message:(0,f().r6)(h),acceptLabel:(0,f().QU)(h),cancelLabel:(0,b.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,b.jsx)(g().A,{isSmall:!0,isMultiline:!0,children:(0,b.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperText",defaultMessage:"Admins will still be able to restore permissions from restricted pages."})})})).accept)&&(m().createAndCommit({userAction:"PermissionItem.onAccept",environment:t,canUndo:!0,useSudoMode:o,perform:e=>{p().wW({environment:t,store:n,permissionItem:r,shouldInherit:d,transaction:e,fromPermissionWrapper:s,trustedDomainsLoggingData:y})}}),!0)}},888575:(e,t,o)=>{o.d(t,{A:()=>a});o(242343);var n=o(163643);const a=function(e){const{botStore:t,avatarSize:a,shouldShowBadge:i,style:r,inline:s}=e,l=(0,o(653998).tz)(),c=(0,o(237385).Y0)(),d=(0,o(803290).K8)((()=>null==t?void 0:t.getDisplayName(l)),[t,l]),{outerStyle:u,avatarWrapStyle:p,badgeStyle:m}=(0,o(174114).IS)((e=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0,...r},avatarWrapStyle:s?{width:"none",minHeight:"none",marginRight:6}:{marginRight:6},badgeStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.legacyDefaultSelectColor,fontSize:c.isMobile?11:9,lineHeight:c.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",marginLeft:8,marginTop:1}})),[r,s,c]);return(0,n.jsxs)("div",{style:u,children:[(0,n.jsx)("div",{style:p,children:(0,n.jsx)(o(951156).A,{botStore:t,size:a})}),(0,n.jsx)("div",{style:{...o(31448).RC},children:d}),i&&(0,n.jsx)("div",{style:m,children:"Bot"})]})}},909177:(e,t,o)=>{o.d(t,{v:()=>n});o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601),o(725707),o(244387);function n(e,t){const o=e.reduce(((e,t)=>{if(t.isType("define_variables")){var o;const n=null===(o=t.getModel())||void 0===o?void 0:o.getVariables();if(n)for(const t of Object.values(n))e.add(t.name)}return e}),new Set),n=t.replace(/\s*\d+$/,"");let a=1,i=`${n} ${a}`;for(;o.has(i);)i=`${n} ${a}`,a++;return i}},911575:(e,t,o)=>{o.d(t,{$0:()=>y,Fx:()=>_,Ge:()=>m,I3:()=>u,Kj:()=>x,PP:()=>M,TK:()=>A,Yy:()=>d,aE:()=>k,cQ:()=>S,kH:()=>g,m7:()=>p,nq:()=>b,nv:()=>h,tj:()=>f});o(725707),o(491955),o(113085);var n=()=>o(975392),a=()=>o(76394),i=()=>o(564134),r=()=>o(810111),s=()=>o(479056),l=()=>o(875089);(0,a().u0)((e=>(0,a().O9)(e)&&(0,a().O9)(e.target)&&(0,a().O9)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target,custom_message:e.custom_message}}:{false:e}));const c={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function u(e){return Boolean(c[e.type]&&!(0,i().UU)(e)&&(!(0,i().$M)(e)||void 0===(0,i().om)(e)))}function p(e){const{collectionFormat:t,collectionSchema:o,filter:s,sort:c,sourcePropertyIds:d}=e,p=(d??(0,a().uv)(o)).filter(((t,n,a)=>{const r=o[t];return!(!r||!u(r))&&(("relation"!==r.type||!e.restrictCrossSpace||!(0,i().o2)(e.spaceId,r))&&(!s||s([t,r],n,o)))}));if(0===p.length)return[];if(!t||!1===c)return p;const m=(0,l().L)(t,o,void 0,r().jf.Page).collection_page_properties||[];return n().Ul(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:o,sort:s}=e,c=(0,a().uv)(o).filter(((e,t,n)=>{const a=o[e];return!(!a||!(0,i().JY)(a))}));if(0===c.length)return[];if(!t||!1===s)return c;const d=(0,l().L)(t,o,void 0,r().jf.Page).collection_page_properties||[];return n().Ul(c,(e=>d.findIndex((t=>t.property===e))))}function g(e){return e.type===s().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===s().M9.TokenExpected?{type:e.type,token:e.token}:e.type===s().uW.MissingSchemaPropertyOnThisRow||e.type===s().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===s().uW.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===s().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===s().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===s().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===s().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node}:e.type===s().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===s().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===s().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===s().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===s().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const f={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,geo_point:!1};function y(e){return Boolean(f[e.type])}function h(e){const{collectionFormat:t,collectionSchema:o,filter:s,sort:c}=e,d=(0,a().uv)(o).filter(((e,t,n)=>{var a;const r=o[e];return!(!r||!f[r.type])&&((!(0,i().$M)(r)||null===(a=(0,i().om)(r))||void 0===a||!a.auto_update_on_edit)&&(!s||s([e,r],t,o)))}));if(0===d.length)return[];if(!t||!1===c)return d;const u=(0,l().L)(t,o,void 0,r().jf.Page).collection_page_properties||[];return n().Ul(d,(e=>u.findIndex((t=>t.property===e))))}const v={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function b(e){return v[e.type]}const C={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function x(e){return C[e.type]}function S(e){return 0===e}function _(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function M(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function A(e){const{collectionSchema:t,property:o,type:n}=e,a=null==t?void 0:t[o];return!a||("action"===n?!u(a):!f[a.type])}function k(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:n,source:i,relativeDate:r}=t.event;if(void 0===i)return!1;const s="some"===n.type&&n.some,l="all"===n.type&&n.all;if((s||l||[]).some((e=>M({collectionSchema:o,property:e.property})||A({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const c="some"===n.type&&(!(0,a().O9)(n.some)||0===n.some.length),d="all"===n.type&&(!(0,a().O9)(n.all)||0===n.all.length);if(!e&&("none"===n.type||c||d)&&!r)return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},913001:(e,t,o)=>{o.d(t,{A:()=>i});o(725707),o(491955);var n=()=>o(975392);class a extends(()=>o(129044))().default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}getSortedSitesForSpace(e,t){const{sortAscending:a,sortColumn:i}=this.state,r=this.state.sites[e];if(r)switch(i){case"page":return n().My(r,(e=>o(34662).q4_(e.store.getTitleValue()).toLowerCase()),a?"asc":"desc");case"published-by":return n().My(r,(e=>{const n=e.publishedMetadata.publishedBy,a=n?o(413871).sk.createChildStore(e.store,n):void 0;return null==a?void 0:a.getDisplayName(t).toLowerCase()}),a?"asc":"desc");case"published-date":return n().My(r,(e=>e.publishedMetadata.publishedTime),a?"asc":"desc");default:return r}}removeSiteFromSpace(e,t){const o=this.state.sites[e];o&&(this.state.sites[e]=o.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const i=new a},916757:(e,t,o)=>{o.r(t),o.d(t,{arrowDiagonalUpRightFillSmallIcon:()=>a,iconDefinition:()=>n});o(242343);const n={viewBox:"0 0 16 16",svg:(0,o(163643).jsx)("path",{d:"M12.462 4.288a.75.75 0 0 0-.75-.75h-6.11a.75.75 0 1 0 0 1.5h4.3l-6.177 6.177c-.275.274-.26.735.032 1.027.293.293.753.308 1.028.033l6.177-6.177v4.299a.75.75 0 0 0 1.5 0z"})},a=(0,o(680369).wt)("arrowDiagonalUpRightFillSmall",n)},986340:(e,t,o)=>{o.d(t,{x:()=>r});var n=()=>o(803290),a=()=>o(769884),i=()=>o(145017);function r(e){let{blockStore:t,closestNonAliveAncestorStore:o,intl:r}=e;return(0,n().K8)((()=>{var e;let n,s,l;const c=o&&o.table===i().ev&&o.getMovedToTrashTime();c?(n=!0,l=c,s=o.getMovedToTrashStore()):(l=t.getLastEditedTime(),s=t.getLastEditedByStore(),n=!1);return{trashAuthorStore:s,trashAuthorDisplayName:(null===(e=s)||void 0===e?void 0:e.getDisplayName(r))||r.formatMessage(a().Fvx.messages.anonymousPlaceholder),trashTimestamp:l,isMovedToTrashMetadata:n}}),[t,o,r])}},990616:(e,t,o)=>{o.d(t,{QU:()=>y,f2:()=>f,r6:()=>h});o(403517),o(242343);var n=()=>o(803290),a=()=>o(174114),i=()=>o(446588),r=()=>o(653998),s=()=>o(76394),l=()=>o(31448),c=()=>o(268117),d=()=>o(98508),u=()=>o(485966),p=()=>o(142708),m=()=>o(586121),g=o(163643);function f(e){const{openState:t}=e,{mainEditorCurrentBlockStore:o,currentSpaceStore:i}=(0,n().K8)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=u().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t}}),[]),r=(0,n().K8)((()=>(0,c().FI)()),[]),s=(0,a().IS)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,...r?{border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingLeft:12,paddingRight:12,paddingBottom:12,marginTop:15,marginBottom:5,marginLeft:-12,marginRight:-12}:{}},editContainer:{marginTop:2,marginBottom:2,color:e.text.primary}})),[r]);if(!o||!i)return null;const l=Date.now();return(0,g.jsx)(p().H,{type:d().A.Y,style:s.scroller,children:t.permissionChanges.map(((e,t)=>{let[n,a]=e;const r={timestamp:l,space_id:i.id,type:"permission-changed",permission_data:{before:n,after:a}};return(0,g.jsx)("div",{style:s.editContainer,children:(0,g.jsx)(m().A,{rootStore:o,edit:r})},`${n.type}-${t}`)}))})}function y(e,t){return["remove","restrict"].includes(e.type)?t?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccess",defaultMessage:"Restrict access"}):t?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"}):"restoreTeamPermissions"===e.type?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreTeamPermissions",defaultMessage:"Reset Permissions"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreAccess",defaultMessage:"Restore access"})}function h(e,t){switch(e.type){case"remove":return t?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restrict.description",defaultMessage:"Are you sure you want to remove this {permissionGroup} and restrict access? This page will no longer inherit share settings from the parent page.",values:{permissionGroup:v(e)}});case"restrict":return t?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.remove.description",defaultMessage:"Are you sure you want to change this role and restrict access? This page will no longer inherit share settings from the parent page."});case"restore":return t?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):e.permissionChanges.length>0?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restore.description",defaultMessage:"Are you sure you want to restore access? This will inherit the following permissions from the parent page:"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restoreNoChanges.description",defaultMessage:"Are you sure you want to restore access?"});case"restoreTeamPermissions":return t?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{fontWeight:l().Wy.semibold,marginBottom:4},children:(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.mainDescription",defaultMessage:"Are you sure you want to reset permissions to match the teamspace defaults?"})}),(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.warningMessage",defaultMessage:"Everyone else who is not part of the teamspace will lose access, including guests."})]});default:throw s().HB(e)}}function v(e){return(0,i().B2)(e.permissionItem)?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.user",defaultMessage:"user"}):(0,i().Ds)(e.permissionItem)?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.group",defaultMessage:"group"}):(0,i().Lg)(e.permissionItem)?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.space",defaultMessage:"workspace"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.generic",defaultMessage:"permission"})}},990910:(e,t,o)=>{o.d(t,{FB:()=>p,Ql:()=>m,SM:()=>g,Wv:()=>i,Yz:()=>s,ds:()=>a,e4:()=>n,eQ:()=>r,im:()=>c,jw:()=>l,k2:()=>u,uG:()=>d});const n=8,a=10,i=8,r=24,s=6,l=1.5,c=(r-l)/2,d=r+s,u=`calc(100% + ${i+(n-s)-d}px)`,p=r+8,m=-16;function g(e){return"margin_comments"===e?12:"comment_unfurl"===e?14:16}}}]);