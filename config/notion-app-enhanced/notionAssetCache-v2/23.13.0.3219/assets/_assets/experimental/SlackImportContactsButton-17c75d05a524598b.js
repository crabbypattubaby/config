"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[55901],{33829:(i,t,n)=>{n.r(t),n.d(t,{default:()=>d});n(725707),n(500234);var e=n(242343),o=()=>n(803290),r=()=>n(706788),s=()=>n(23371),_=()=>n(726984),c=()=>n(818369),l=()=>n(773082),a=n(163643);const d=function(i){const{onClickAuthenticated:t,title:d,hideChevronIcon:v,containerStyle:u,buttonStyle:f,from:g,inviteOrigin:p,flowId:m,loadContacts:h}=i,w=(0,n(237385).v3)(),[k,y]=e.useState(!1),C=(0,o().O$)(n(485966).AppStoreCurrentSpaceStore),I=(0,o().K8)((()=>{const i=null==C?void 0:C.getBotSettingsStore().getValue();return"approved_only"!==(null==i?void 0:i.integration_restrictions)||Boolean((null==i?void 0:i.integration_approval_statuses)&&i.integration_approval_statuses[r().zG])}),[C]),b=(0,o().K8)((()=>l().A.integrations.state.find((i=>i.id===r().zG))),[]),A=(0,o().O$)(l().A.completeSlackAuthentications),S=(0,n(785061).Hc)();return C&&I?(0,a.jsx)("div",{style:u,children:(0,a.jsx)(n(209684).p,{style:f,onClick:async()=>{0===A.length?await async function(i){const{from:e,inviteOrigin:o,flowId:r}=i,l=w.currentUser.id;if(!b||!C||!l)return;try{var a;y(!0),_().fK(w,{origin:o,from:e,invite_flow_id:r});const i=await n(423392).Jq({environment:w,integration:b,spaceId:C.id,from:e});if(n(204132).Q.isFail(i))return void _().mH(w,{origin:o,from:e,invite_flow_id:r,is_success:!1});const l=null===(a=i.value.externalAuthentication)||void 0===a?void 0:a.parent_id;if(!l)return;_().mH(w,{origin:o,from:e,invite_flow_id:r,is_success:!0}),h&&await Promise.race([c().callApi({eventName:"loadContacts",environment:w,data:{botId:l,spaceId:C.id,integrationId:b.id,importContactType:"slack"}}),(0,s().wR)(2e3)]),null==t||t()}finally{y(!1)}}({from:g,inviteOrigin:p,flowId:m,loadContacts:h}):A.length>0&&(null==t||t())},children:(0,a.jsxs)("div",{style:S.labelContainer,children:[d,(0,a.jsx)(n(211237).M,{isConnecting:k,isIntegrationAuthenticated:A.length>0,hideChevronIcon:v})]})})}):null}},211237:(i,t,n)=>{n.d(t,{M:()=>l});n(242343);var e=()=>n(174114),o=()=>n(855470),r=()=>n(587585),s=()=>n(220413),_=()=>n(966789),c=n(163643);function l(i){const{isConnecting:t,isIntegrationAuthenticated:n,hideChevronIcon:l}=i,a=(0,e().IS)((i=>({circleCheck:{height:14,width:14,color:s().Ay.blue,fill:s().Ay.blue},chevron:{height:12,width:12},loadingSpinner:{marginLeft:6}})),[]);return t?(0,c.jsx)(_().A,{legacySize:14,style:a.loadingSpinner}):(0,c.jsxs)(c.Fragment,{children:[n&&(0,r().q)(a.circleCheck),!l&&(0,o().V)(a.chevron)]})}},587585:(i,t,n)=>{n.d(t,{q:()=>o});n(242343);var e=n(163643);const o=(0,n(680369).wt)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,e.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},726984:(i,t,n)=>{n.d(t,{C6:()=>m,Eu:()=>d,FY:()=>_,MP:()=>g,YT:()=>a,d2:()=>p,fK:()=>h,lL:()=>l,mH:()=>w,oI:()=>c,sD:()=>u,tr:()=>v,yS:()=>f});var e=()=>n(137476),o=()=>n(995625),r=()=>n(836331),s=()=>n(764227);function _(i){e().vd(i,"add_slack_integration")}function c(i){e().vd(i,"remove_slack_integration")}function l(i,t){e().vd(i,"slack_notification_create",t)}function a(i,t){e().vd(i,"slack_notification_delete",t)}function d(i,t){e().vd(i,"slack_notification_update",t)}function v(i,t){const n=s().AI(),r=o().FX();e().vd(i,"slack_imports_invite_render_button",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function u(i,t){const n=s().AI(),r=o().FX();e().vd(i,"slack_imports_invite_render_invite_popup",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function f(i,t){const n=s().AI(),r=o().FX();e().vd(i,"slack_imports_invite_click_invite_button",{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function g(i,t){const n=s().AI(),r=o().FX();e().vd(i,"slack_imports_invite_completed",{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage})}function p(i,t){const n=s().AI(),r=o().FX();e().vd(i,"slack_imports_invite_dismiss_popup",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function m(i,t){const n=s().AI(),r=o().FX();e().vd(i,"slack_imports_invite_click_select_all",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query})}function h(i,t){const n=s().AI(),_=o().FX();e().vd(i,"slack_imports_invite_start_slack_integration",{subscription_tier:n,domain_type:_,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from}),r().default.logEvent("slack_imports_invite_start_slack_integration",void 0,{subscription_tier:n,domain_type:_,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function w(i,t){const n=s().AI(),_=o().FX();e().vd(i,"slack_imports_invite_complete_slack_integration",{subscription_tier:n,domain_type:_,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}),r().default.logEvent("slack_imports_invite_complete_slack_integration",void 0,{metadata:{subscription_tier:n,domain_type:_,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}})}},855470:(i,t,n)=>{n.d(t,{V:()=>o});n(242343);var e=n(163643);const o=(0,n(680369).wt)("chevronRight",{viewBox:"0 0 16 16",svg:(0,e.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})}}]);