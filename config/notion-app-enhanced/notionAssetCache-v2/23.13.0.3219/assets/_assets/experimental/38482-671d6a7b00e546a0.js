"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[38482],{16126:(e,t,o)=>{o.d(t,{j:()=>a});o(242343);var r=()=>o(803290),i=()=>o(174114),l=()=>o(31448),n=o(163643);function a(e){const{children:t,style:o}=e,{store:a}=e.icon?e:{},s=(0,r().K8)((()=>{var e;return"hide"!==(null==a||null===(e=a.getAssociatedCollectionStore())||void 0===e||null===(e=e.getLayoutStore())||void 0===e||null===(e=e.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[a]),d=(0,i().IS)((e=>({title:{padding:"3px 0",fontSize:13,lineHeight:"18px",color:e.text.secondary,display:"flex",flexDirection:"row",alignItems:"center",fontWeight:l().Wy.medium,gap:2,...o},icon:{width:18,height:24,fill:e.icon.secondary}})),[o]);return(0,n.jsxs)("div",{style:d.title,children:[e.icon&&s&&e.icon(d.icon),(0,n.jsx)("div",{children:t})]})}},116485:(e,t,o)=>{o.d(t,{A5:()=>u,MR:()=>P,Mx:()=>s,Pb:()=>m,WL:()=>f,hg:()=>d,kZ:()=>h,pv:()=>p,vV:()=>g});o(403517);var r=o.n(o(309102)),i=o(242343),l=()=>o(880195),n=()=>o(656473),a=o(163643);const s=i.forwardRef((function(e,t){const{children:i,type:s,gap:d,withBottomPadding:p,style:c,onMouseDown:u,onClick:y,onDoubleClick:g,onContextMenu:m}=e,h=(0,o(248584).n$)(s),f=(0,o(803290).K8)((()=>n().A.getPanelState("peek").isOpen&&"static_sidebar"===n().A.getPanelState("peek").displayStyle),[]);return(0,a.jsx)(l().A,{name:"PageLayout",children:(0,a.jsx)("div",{className:r()("layout",{"layout-wide":"wide"===s,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===s,"layout-side-peek":"side-peek"===s,"layout-center-peek":"center-peek"===s&&!f,"layout-center-peek-with-layout-panel":"center-peek"===s&&f,"layout-home":"home"===s,"layout-home-phone":"home-phone"===s,"layout-home-redesign-desktop":"home-redesign-desktop"===s,"layout-form":"form"===s,"layout-form-viewer":"form-viewer"===s,"layout-form-viewer-embed":"form-viewer-embed"===s,"layout-phone":"phone"===s,"layout-tablet":"tablet"===s,"layout-template-preview":"template-preview"===s,"layout-chat":"chat"===s,"layout-layout-editor":"layout-editor"===s,"layout-layout-editor-wide":"layout-editor-wide"===s,"layout-layout-editor-narrow":"layout-editor-narrow"===s,"layout-marketplace":"marketplace"===s,"layout-marketplace-mobile":"marketplace-mobile"===s,"layout-team-home":"team-home"===s,"layout-team-home-mobile":"team-home-mobile"===s,"layout-create-post":"create-post"===s,"layout-fullscreen-ai":"fullscreen-ai"===s,"layout-narrowscreen-ai":"narrowscreen-ai"===s,"layout-presentation-mode":"presentation-mode"===s,"layout-person-profile":"person-profile"===s}),style:{paddingBottom:p?h:void 0,gap:d,...c},ref:t,onMouseDown:u,onClick:y,onDoubleClick:g,onContextMenu:m,children:i})})})),d="layout-content",p="layout-full",c="layout-margin-right",u="hide-scrollbar",y="layout-column",g=i.forwardRef((function(e,t){return(0,a.jsx)(l().A,{name:"PageLayoutContent",children:(0,a.jsx)("div",{className:r()(d,e.className),style:e.style,ref:t,children:e.children})})}));function m(e){return(0,a.jsx)(l().A,{name:"PageLayoutFull",children:(0,a.jsx)("div",{className:p,style:e.style,children:e.children})})}function h(e){return(0,a.jsx)(l().A,{name:"PageLayoutMarginRight",children:(0,a.jsx)("div",{className:c,style:{...e.style,pointerEvents:"none"},children:e.children})})}function f(e){return(0,a.jsx)(l().A,{name:"PageLayoutColumn",children:(0,a.jsx)("div",{className:r()(y,e.className),style:{"--min-column-width":e.minWidth?`${e.minWidth}px`:"100%",...e.style},children:e.children})})}function P(e){return(0,a.jsx)(l().A,{name:"PageLayoutTwoColumn",children:(0,a.jsxs)(f,{minWidth:e.minWidth,className:e.className,style:e.style,children:[e.left,e.right]})})}},124176:(e,t,o)=>{o.d(t,{PF:()=>n,Qd:()=>r().Qd,g1:()=>r().g1,iw:()=>r().iw});var r=()=>o(719599),i=()=>o(129978);const l=new(i().O2)("RelationPropertyMenu",(async()=>{const{default:e}=await Promise.all([o.e(96159),o.e(43380),o.e(96346),o.e(36192),o.e(55373),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(36209),o.e(92845),o.e(71718),o.e(48486),o.e(83324),o.e(63077),o.e(41870),o.e(90966),o.e(88552),o.e(90214),o.e(74562),o.e(8184),o.e(28271),o.e(17254),o.e(18895),o.e(78708),o.e(4422),o.e(67435),o.e(48632),o.e(76181),o.e(72832),o.e(90280),o.e(84778),o.e(26090),o.e(12341),o.e(47864),o.e(90978),o.e(21194),o.e(45354),o.e(70584),o.e(48979),o.e(29945)]).then(o.bind(o,181390));return{RelationPropertyMenu:e}})),n=(0,i()._h)(l,(e=>e.RelationPropertyMenu))},338828:(e,t,o)=>{o.r(t),o.d(t,{arrowInCircleUpFillIcon:()=>i,iconDefinition:()=>r});o(242343);const r={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},i=(0,o(680369).wt)("arrowInCircleUpFill",r)},356418:(e,t,o)=>{o.d(t,{Ay:()=>k,Xt:()=>C});o(362833),o(725707),o(491955);var r=o(242343),i=()=>o(237385),l=()=>o(803290),n=()=>o(174114),a=()=>o(938341),s=()=>o(339189),d=()=>o(653998),p=()=>o(154956),c=()=>o(521325),u=()=>o(261603),y=()=>o(749975),g=()=>o(475923),m=()=>o(906230),h=()=>o(962373),f=()=>o(474473),P=()=>o(126451),v=()=>o(209684),S=()=>o(273520),b=()=>o(443252),x=()=>o(896433),w=o(163643);function k(e){const{locked:t,disabled:o,collectionStore:r,mergedProperties:i,schema:n,isCompact:a,pagePropertiesStore:s,wrapperStyle:d}=e,p=(0,l().K8)((()=>s.state.forceShowProperties),[s]),c=B(i,n,a),u=(0,x().aN)(r),y=[];return(p||0===c)&&(!t&&!o&&u)&&y.push((0,w.jsx)(C,{...e},"add-property")),c>0&&(p?y.push((0,w.jsx)(I,{mergedProperties:i,schema:n,isCompact:a,pagePropertiesStore:s},"hide-properties")):y.push((0,w.jsx)(j,{mergedProperties:i,schema:n,isCompact:a,pagePropertiesStore:s},"show-more"))),y.length>0&&d?(0,w.jsx)("div",{style:d,children:y}):(0,w.jsx)(w.Fragment,{children:y})}function C(e){const{collectionStore:t,isInPeekRenderer:o,pagePropertiesStore:n,propertyGroupId:a,onPropertyAdded:P,disabled:x,iconStyle:k}=e,C=(0,y().Ks)(),j=(0,i().v3)(),I=(0,l().uB)(void 0,h().A),M=A(),B=(0,l().K8)((()=>null==C?void 0:C.settingsStore.state.open),[null==C?void 0:C.settingsStore]);(0,r.useEffect)((()=>{B||I.setState({...I.state,open:!1})}),[I,B]);const V=(0,l().uB)(n,f().YB),L=(0,r.useCallback)((()=>{C&&p().H_({environment:j,propertyGroupId:a,collectionContextStore:C,pagePropertiesStore:V,collectionStore:t,isInPeekRenderer:o,onCloseMenu:e=>{null==P||P(e),I.setState({open:!1})},propertyVisibility:"show"})}),[j,a,C,V,t,o,P,I]),R=(0,l().K8)((()=>null==C?void 0:C.permissionScopesStore.state),[C]);return null!=R&&R.isExternallyImportedAndSyncedCollection||!C?null:(0,w.jsx)("div",{style:{display:"flex"},children:(0,w.jsx)(S().Ay,{popupType:j.device.isMobile?b().nl.SlideUp:b().nl.Popup,buttonPopupStore:I,originGap:1,alignmentToOrigin:S().yP.Start,render:()=>(0,w.jsx)(u().m$,{context:g().Bd.TopbarFilterPopup,collectionContextStore:C,collectionSettingsStore:C.settingsStore,hideDesktopHeader:!0}),onClick:L,onClose:()=>{const e=C.settingsStore;c().os({collectionSettingsStore:e})},renderOrigin:t=>(0,w.jsx)(v().p,{style:M.AddOrTogglePropertyButtonStyle,iconStyle:{...M.ActionPropertyButtonIconStyle,...k},icon:s().W,disabled:x,disabledFeedback:!0,...(0,m().A)(e,t),children:(0,w.jsx)(d().sA,{defaultMessage:"Add a property",id:"database.pageProperties.addPropertyButtonTitle"})})})})}function j(e){const{mergedProperties:t,schema:o,isCompact:i,pagePropertiesStore:l}=e,n=A(),s=B(t,o,i),p=(0,r.useCallback)((e=>{e.stopPropagation(),l.setState({...l.state,forceShowProperties:!0})}),[l]);return(0,w.jsx)("div",{style:{display:"flex"},children:(0,w.jsx)("div",{style:n.AddOrToggleContainerStyle,children:(0,w.jsxs)(P().A,{style:{...n.AddOrTogglePropertyButtonStyle,...e.style},onClick:p,children:[(0,a().e)(n.ActionPropertyButtonIconStyle),(0,w.jsx)("div",{style:n.AddPropertyButtonTitleStyle,children:(0,w.jsx)(d().sA,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.showMorePropertyTitle",values:{num:s}})})]},"show-more")})})}function I(e){const{mergedProperties:t,schema:o,isCompact:i,pagePropertiesStore:l}=e,n=B(t,o,i),s=A(),p=(0,r.useCallback)((e=>{e.stopPropagation(),l.setState({...l.state,forceShowProperties:!1})}),[l]);return(0,w.jsx)("div",{style:{display:"flex"},children:(0,w.jsxs)(P().A,{style:{...s.AddOrTogglePropertyButtonStyle,...e.style},onClick:p,children:[(0,a().e)({...s.ActionPropertyButtonIconStyle,transform:"rotate(180deg)"}),(0,w.jsx)("div",{style:s.AddPropertyButtonTitleStyle,children:(0,w.jsx)(d().sA,{defaultMessage:"{num, plural, one {Hide 1 property} other {Hide {num} properties}}",id:"database.pageProperties.hidePropertyTitle",values:{num:n}})})]},"hide-properties")})}const M=16;function A(){const e=(0,i().v3)();return(0,n().IS)((t=>{const{device:o}=e;return{AddOrToggleContainerStyle:{display:"grid"},AddOrTogglePropertyButtonStyle:{display:"flex",alignItems:"center",color:t.text.tertiary,fontSize:14,borderRadius:4,paddingLeft:6,paddingRight:6,height:34,width:o.isMobile?"100%":"auto",gridColumn:1,gridRow:1},ActionPropertyButtonIconStyle:{width:M,height:M,marginRight:6,marginTop:1,fill:t.icon.tertiary},AddPropertyButtonTitleStyle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,lineHeight:`${M}px`}}}),[e])}function B(e,t,o){return(0,r.useMemo)((()=>e.filter((e=>"hide"===e.visibility||"hide_if_empty"===e.visibility&&!e.hasValue)).length),[e])}},719599:(e,t,o)=>{o.d(t,{$w:()=>a,M7:()=>r,Qd:()=>n,g1:()=>i,iw:()=>l});let r=function(e){return e[e.SelectedPage=0]="SelectedPage",e[e.SearchPage=1]="SearchPage",e[e.NewPage=2]="NewPage",e}({});const i=4,l=32,n=400,a=20},763145:(e,t,o)=>{o.d(t,{U:()=>r});const r=4},896433:(e,t,o)=>{o.d(t,{Od:()=>f,U$:()=>P,aN:()=>m,z7:()=>h});o(610931),o(725707),o(491955),o(500234),o(403517);var r=o(242343),i=()=>o(237385),l=()=>o(803290),n=()=>o(653998),a=()=>o(975392),s=()=>o(927999),d=()=>o(84543),p=()=>o(520852),c=()=>o(73631),u=()=>o(129978),y=()=>o(801600),g=()=>o(604284);function m(e){return(0,l().K8)((()=>!!e&&(0,p().v)({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1})),[e])}function h(e){let{store:t,format:o,schema:r,collectionStore:a,propertyIds:s,propertyGroupId:d}=e;const p=(0,i().v3)(),y=(0,n().tz)(),{value:m}=(0,u().fJ)(c().T.formulas);return(0,l().K8)((()=>(0,g().e7)({store:t,format:o,schema:r,collectionStore:a,propertyIds:s,propertyGroupId:d,intl:y,environment:p,formulasModule:m})),[t,o,r,a,s,d,y,p,m])}function f(e){let{collectionStore:t,format:o}=e;const l=(0,i().v3)();return(0,r.useCallback)((e=>{const r=o.collection_page_properties||[],i=[...(0,a().oE)(e.map((e=>r.find((t=>t.property===e))))),...r.filter((t=>!e.includes(t.property)))];d().createAndCommit({userAction:"PageProperties.handleReorder",environment:l,canUndo:!0,perform:e=>{s().zA({stores:[t],update:{collection_page_properties:i},transaction:e})}})}),[t,l,o.collection_page_properties])}function P(e){let{collectionStore:t,propertyGroupId:o}=e;const l=(0,i().v3)();return(0,r.useCallback)((e=>{if(!o)throw new Error("cannot reorder properties for property group -- no property group id provided");d().createAndCommit({userAction:"PagePropertiesGroup.handleReorder",environment:l,canUndo:!0,perform:r=>{(0,y()._h)({collectionStore:t,newPartialPropertyIds:e,groupId:o,transaction:r})}})}),[t,l,o])}},902628:(e,t,o)=>{o.d(t,{L:()=>n,d:()=>l});var r=()=>o(129978);const i={PinnedInfoPanelToggleButton:new(r().O2)("PinnedInfoPanelToggleButton",(async()=>o.e(7989).then(o.bind(o,318942)))),PageHeaderInfoPanelToggleButton:new(r().O2)("PageHeaderInfoPanelToggleButton",(async()=>o.e(20589).then(o.bind(o,895262))))},l=(0,r()._h)(i.PinnedInfoPanelToggleButton,(e=>e.default)),n=(0,r()._h)(i.PageHeaderInfoPanelToggleButton,(e=>e.default))},938341:(e,t,o)=>{o.d(t,{e:()=>i});o(242343);var r=o(163643);const i=(0,o(680369).wt)("chevronDownThin",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M8 11.4795C7.77214 11.4795 7.56478 11.3883 7.37793 11.2061L2.17578 5.88086C2.09831 5.80794 2.03906 5.72591 1.99805 5.63477C1.96159 5.53906 1.94336 5.43652 1.94336 5.32715C1.94336 5.17676 1.97754 5.04004 2.0459 4.91699C2.11882 4.79395 2.21452 4.69824 2.33301 4.62988C2.4515 4.55697 2.58594 4.52051 2.73633 4.52051C2.95508 4.52051 3.14648 4.60254 3.31055 4.7666L8.33496 9.91406H7.67188L12.6895 4.7666C12.8535 4.60254 13.0449 4.52051 13.2637 4.52051C13.4141 4.52051 13.5485 4.55697 13.667 4.62988C13.7855 4.69824 13.8789 4.79395 13.9473 4.91699C14.0202 5.04004 14.0566 5.17676 14.0566 5.32715C14.0566 5.54134 13.9792 5.72591 13.8242 5.88086L8.62207 11.2061C8.53548 11.2972 8.43978 11.3656 8.33496 11.4111C8.23014 11.4567 8.11849 11.4795 8 11.4795Z"})})},991649:(e,t,o)=>{o.d(t,{h:()=>Ce});var r=o(242343),i=()=>o(803290),l=()=>o(653998),n=()=>o(388615),a=()=>o(610271),s=(o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601),o(725707),o(491955),o(403517),()=>o(237385)),d=()=>o(174114),p=()=>o(763145),c=()=>o(530075),u=()=>o(882746),y=()=>o(975392),g=()=>o(76394),m=()=>o(141666),h=()=>o(594878),f=()=>o(116586),P=()=>o(830820),v=()=>o(797470),S=()=>o(896433);o(362833),o(771702);var b=()=>o(97787),x=(o(500234),()=>o(752597)),w=()=>o(665865),k=()=>o(319638),C=()=>o(749975),j=()=>o(667653),I=()=>o(446464),M=()=>o(639659),A=()=>o(743661),B=()=>o(339189),V=()=>o(943540),L=()=>o(367859),R=o(163643);function T(e){const{property:t,store:n,disabled:a,canConfigureCollection:p,onTab:c,onUntab:u,schema:y,blockPropertyValueOverlayStore:g,collectionStore:m,pagePropertiesStore:h,customization:f}=e,P=(0,s().v3)(),{device:v,currentUser:S}=P,b=(0,d().DP)(),x=(0,C().Ks)(),k=y[t],{value:j}=(0,o(129978).fJ)(o(73631).T.formulas),I=(0,d().IS)((()=>({propertyOuter:{display:"flex",alignItems:"left",height:"100%",flex:"auto",flexDirection:"column",minWidth:0,...null!=f&&f.stackPropertyLabelAndValue?{marginLeft:0}:{marginLeft:4}},property:{display:"flex",alignItems:"center",height:"100%",flex:"auto",minWidth:0,...null!=f&&f.stackPropertyLabelAndValue?{marginLeft:0}:{marginLeft:4}},addPageButton:{fontSize:14,minHeight:o(124176).iw,color:b.text.tertiary,background:void 0,boxShadow:void 0,borderBottom:"none"}})),[null==f?void 0:f.stackPropertyLabelAndValue,b.text.tertiary]),M=(0,r.useCallback)((()=>{h.setState({...h.state,hoveredProperty:e.property})}),[e.property,h]),A=(0,r.useCallback)((()=>{h.setState({...h.state,hoveredProperty:void 0})}),[h]),T=(0,r.useCallback)((()=>{w().ho({environment:P,blockPropertyValueOverlayStore:g,store:n,property:t,format:"page",collectionContextStore:x})}),[P,g,n,t,x]),O=(0,i().K8)((()=>v.isMobile&&!a&&"relation"===(null==k?void 0:k.type)&&n.isDefined()&&!o(716605).r8({block:n.getModel(),property:t,schema:y,getRecordModel:n.getRecordModel,userId:S.id,userTimeZone:(0,o(427091).P)(),intl:o(477784).A.getIntl(),experimentService:o(836331).default,collectionFeatureGates:(0,o(213517).i)(),formulasModule:j})),[S.id,v.isMobile,a,t,k,y,n,j]);return(0,R.jsx)("div",{role:"cell",style:I.propertyOuter,children:(0,R.jsxs)(L().A,{store:n,analyticsName:"page_property",children:[(0,R.jsx)("div",{style:I.property,onMouseMove:M,onMouseLeave:A,children:(0,R.jsx)(V().qm,{store:n,property:t,locked:!p,disabled:a,format:"page",onTab:c,onUntab:u,tableWrap:!1,blockPropertyValueOverlayStore:g,onOpenProperty:T,collectionStore:m})},t),O&&(0,R.jsx)(o(535906).A,{focused:!1,icon:(0,B().W)({width:14,fill:b.lightIconColor}),buttonStyle:{marginRight:0,width:"calc(100% - 4px)"},mobileIconStyle:{marginLeft:12},textWrapperStyle:{marginLeft:4},style:I.addPageButton,title:(0,R.jsx)(l().sA,{id:"pagePropertyRowValue.addRelationButtonMessage",defaultMessage:"Add page"}),onClick:T})]})})}const O=r.memo(T),G=r.memo((function(e){const{schema:t,format:l,store:n,collectionStore:p,disabled:c,locked:u,blockPropertyValueOverlayStore:m,isInPeekRenderer:h,property:f,mergedProperties:P,hideDragHandle:v,disablePropertyName:S,opacity:b,pagePropertiesStore:B,customization:V,isCollectionViewLocked:L,canConfigureCollection:T,layoutModule:G}=e,K=(0,r.useId)(),N=(0,s().v3)(),E=(0,C().Ks)(),z=(0,r.useCallback)((()=>{const e=m.state;if(!e.isOpen)return;const o=P,r=o.findIndex((t=>t.property===e.property)),i=o.find(((e,o)=>o>r&&W(t,e.property)))||o.find(((e,o)=>W(t,e.property)));i&&x().default.afterNextFlush((()=>{w().ho({environment:N,blockPropertyValueOverlayStore:m,store:n,property:i.property,format:"page",collectionContextStore:E})})),w().VN({environment:N,blockPropertyValueOverlayStore:m})}),[m,E,N,P,t,n]),_=(0,r.useCallback)((()=>{const e=m.state;if(!e.isOpen)return;const o=P,r=o.findIndex((t=>t.property===e.property)),i=y().Uk(o,((e,o)=>o<r&&W(t,e.property)))||y().Uk(o,((e,o)=>W(t,e.property)));i&&x().default.afterNextFlush((()=>{w().ho({environment:N,blockPropertyValueOverlayStore:m,store:n,property:i.property,format:"page",collectionContextStore:E})})),w().VN({environment:N,blockPropertyValueOverlayStore:m})}),[m,E,N,P,t,n]),D=(0,o(696088).l)(n),F=(0,i().K8)((()=>{var e;return"hide"===(null==D||null===(e=D.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[D]),H=Boolean(null==V?void 0:V.stackPropertyLabelAndValue),U=r.useRef(null),Y=(0,j().s)(U,50),[$,q]=r.useState(0);(0,r.useEffect)((()=>{var e;q((null==Y?void 0:Y.width)||(null===(e=U.current)||void 0===e?void 0:e.offsetWidth)||0)}),[Y]);const{isPropertyInPageDetails:Q}=(0,o(604284)._1)({store:n,propertyId:f}),{isMobile:Z}=N.device,J=(0,I().Ge)({isMobile:Z,stackPropertyLabelAndValue:H,isPropertyInPageDetails:Q}),X=(0,d().IS)((e=>({container:{display:"flex",width:"100%",position:"relative",opacity:b??1,...null!=V&&V.stackPropertyLabelAndValue?{flexDirection:"column",marginBottom:null!=V&&V.disableRowBottomMargin?void 0:16}:{marginBottom:null!=V&&V.disableRowBottomMargin?void 0:4}},flexRow:{...Q?{width:"100%"}:void 0,...(0,g().O9)(J)?{width:J,flexShrink:0}:void 0}})),[null==V?void 0:V.disableRowBottomMargin,null==V?void 0:V.stackPropertyLabelAndValue,Q,b,J]),ee=(0,M().a)(),te="normalizedTitleWithIcon"===G.type&&"hide"===G.propertyLabels,oe=(0,r.useMemo)((()=>({height:{variant:null==V?void 0:V.heightVariant},width:(0,I().aG)({stackPropertyLabelAndValue:H}),size:"medium",fontWeight:"regular"})),[null==V?void 0:V.heightVariant,H]),re=u||L;return(0,R.jsxs)("div",{role:"row","aria-labelledby":K,ref:U,style:X.container,children:[(0,R.jsx)(o(824500).U$,{origin:U}),(0,R.jsxs)(a().Ye,{alignItems:"center",alignSelf:"flex-start",style:X.flexRow,children:[!te&&(0,R.jsx)(A().I,{schema:t,format:l,property:f,collectionStore:p,pagePropertiesStore:B,disabled:Boolean(c||S),locked:re,canConfigureCollection:T,isInPeekRenderer:h,hideIcon:F,hideDragHandle:v,showDragHandleAsIcon:!re&&!c,propertyNameAriaId:K,styleVariants:oe,blockStore:n,layoutModule:G}),!Z&&!ee&&(0,R.jsx)(k().L_,{store:n,propertyId:f,style:Q?void 0:{position:"absolute",alignSelf:"center",...$?{left:$+4}:{right:0},top:6}})]}),(0,R.jsx)(O,{schema:t,property:f,store:n,collectionStore:p,pagePropertiesStore:B,disabled:c||u,canConfigureCollection:T,onTab:z,onUntab:_,blockPropertyValueOverlayStore:m,customization:V}),Z&&(0,R.jsx)(k().L_,{store:n,propertyId:f,style:{marginTop:6}})]},f)}));function W(e,t){return(0,o(361837).B2)(e[t])}function K(e){const{disabled:t,locked:o,collectionStore:n,format:a,mergedProperties:s,propertyGroupId:d,showHiddenProperties:p,hideDragHandle:c,pagePropertiesStore:u,rowCustomization:y,disableLastRowBottomPadding:g,blockPropertyValueOverlayStore:m,isInPeekRenderer:h,schema:f,store:P,layoutModule:v}=e,x=(0,l().tz)(),w=s,k=(0,S().aN)(n),C=(0,S().Od)({collectionStore:n,format:a}),j=(0,S().U$)({collectionStore:n,propertyGroupId:d}),I=d?j:C,M=x.formatMessage({id:"pageProperties.tableLabel",defaultMessage:"Page properties"}),A=function(e){const{properties:t,showHiddenProperties:o}=e;return(0,r.useMemo)((()=>{const e=[];let r=0;return t.forEach((t=>{if("section"!==t.visibility)return o?(e.splice(r,0,t.property),void(r+=1)):void("hide"!==t.visibility&&("hide_if_empty"!==t.visibility||t.hasValue)?(e.splice(r,0,t.property),r+=1):e.push(t.property));e.push(t.property)})),{all:e,visible:e.slice(0,r)}}),[t,o])}({properties:w,showHiddenProperties:p}).visible,B=(0,i().K8)((()=>function(e){const t=e.getParentBlockStore();return Boolean(t&&t.isLocked())}(n)),[n]),V=(0,r.useMemo)((()=>({...y,...g&&{disableRowBottomMargin:!0}})),[g,y]);return t||o||!k||c?(0,R.jsx)("div",{role:"table","aria-label":M,style:b().Bb,children:A.map(((e,r)=>{const i=r===A.length-1?V:y;return(0,R.jsx)("div",{children:(0,R.jsx)(G,{schema:f,format:a,store:P,collectionStore:n,disabled:t,locked:o,blockPropertyValueOverlayStore:m,isInPeekRenderer:h,property:e,mergedProperties:s,pagePropertiesStore:u,customization:i,isCollectionViewLocked:B,canConfigureCollection:k,layoutModule:v})},e)}))}):(0,R.jsx)(b().Ay,{role:"table","aria-label":M,direction:"vertical",keys:A,renderKey:(e,r)=>{const i=r===A.length-1?V:y;return(0,R.jsx)(G,{schema:f,format:a,store:P,collectionStore:n,disabled:t,locked:o,blockPropertyValueOverlayStore:m,isInPeekRenderer:h,mergedProperties:s,hideDragHandle:c,customization:i,property:e,pagePropertiesStore:u,isCollectionViewLocked:B,canConfigureCollection:k,layoutModule:v})},onDrop:I})}var N=()=>o(906230),E=()=>o(951920),z=()=>o(902628),_=()=>o(546820),D=()=>o(656473),F=()=>o(907721),H=()=>o(962373),U=()=>o(615661),Y=()=>o(615917),$=()=>o(126451),q=()=>o(273520),Q=()=>o(443252),Z=()=>o(103151);const J=408;var X=()=>o(356418);const ee=130;function te(e){const{store:t,collectionStore:o,pagePropertiesStore:l,blockPropertyValueOverlayStore:n,compactProperties:p,disabled:c,locked:u,format:y,hiddenProperties:g,rowLength:m,variant:h,pageViewBlockContext:f,layoutModule:P}=e,b=(0,i().K8)((()=>o.getSchema()),[o]),[x,w]=(0,r.useState)(!1),I=(0,S().aN)(o),B=(0,i().K8)((()=>U().Uv.getMode(t)),[t]),T=(0,s().Y0)(),{isFirefox:O}=T,G=(0,i().uB)(void 0,H().A),W=(0,C().ET)(),K=(0,i().K8)((()=>o.getLayoutStore()),[o]),[N,F]=(0,r.useState)(!1),[$,q,Q]=(0,E().B)(),Z=(0,j().s)(Q,100),X=((null==Z?void 0:Z.width)||0)>=J&&!T.isMobile,ee=(0,i().K8)((()=>D().A.getPanelState("mainPage").isOpen),[]),te=Boolean((0,r.useContext)(_().sf)),ie=(0,r.useMemo)((()=>!(!P||!("propertyLabels"in P)||"hide"!==P.propertyLabels)),[P]),le=(0,i().K8)((()=>{if(te)return!1;const e=null==K?void 0:K.getModules();return!(!e||"pinned"!==h||0===e.page_details.length)}),[te,K,h]),ne=(0,i().K8)((()=>X&&ee&&!q?"hidden":"visible"),[q,X,ee]),ae=X,se=(0,d().IS)((()=>{const e={display:"grid",gridTemplateColumns:`repeat(${p.length>m?m:"auto-fit"}, minmax(80px, max-content))`,columnGap:4,rowGap:4};return{container:{...le&&ae?{display:"flex",flexDirection:"row",gap:8}:void 0,...le&&!ae?{display:"flex",flexDirection:"column",gap:6}:void 0},row:{...ie?{display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:15}:"pinned"===h?{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, max-content))",columnGap:4,rowGap:8,marginTop:10}:e,...le?{maxWidth:"100%",...O&&{flexGrow:1}}:void 0},propertyRowWrapper:{..."pinned"===h?{display:"flex",flexDirection:"column"}:void 0},LastPagePropertyWrapper:{position:"relative"},LastPagePropertyInnerHoverPlusButton:{position:"absolute",left:"calc(100% + 10px)",top:"50%",transform:"translateY(-50%)"},infoPanelToggleButtonContainer:{display:"flex",alignItems:"end",flexShrink:0,visibility:ne}}}),[p.length,m,le,ae,ie,h,O,ne]),de=(0,r.useCallback)((()=>{w(!0)}),[]),pe=(0,r.useCallback)((()=>{w(!1)}),[]),ce=(0,M().a)(),ue=(0,i().K8)((()=>{var e;return"hide"===(null==K||null===(e=K.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[K]),ye=(0,r.useMemo)((()=>(0,R.jsx)(re,{layoutModule:P,onClose:pe,hiddenProperties:g,canConfigureCollection:I&&"suggest"!==B,store:t,collectionStore:o,collectionContextStore:W,blockPropertyValueOverlayStore:n,disabled:c,locked:u,isInPeekRenderer:f===v().Rr.PeekView,format:y,buttonPopupStore:G,pagePropertiesStore:l,hideDragHandle:"pinned"===h})),[n,G,I,W,o,c,B,y,pe,g,u,l,f,t,h,P]);return r.useEffect((()=>{F(!0)}),[]),(0,R.jsxs)("div",{style:se.container,ref:$,children:[(0,R.jsx)("div",{style:se.row,onMouseEnter:de,onMouseLeave:pe,children:0===p.length?ye:p.map(((r,i)=>{const s=i===p.length-1;return(0,R.jsxs)("div",{style:{...se.propertyRowWrapper,...s?se.LastPagePropertyWrapper:void 0},children:[!ie&&(0,R.jsxs)(a().Ye,{children:[(0,R.jsx)(A().I,{schema:b,format:y,hideDragHandle:!0,property:r.property,blockStore:t,collectionStore:o,pagePropertiesStore:l,disabled:c,locked:u,canConfigureCollection:I&&"suggest"!==B,isInPeekRenderer:f===v().Rr.PeekView,styleVariants:oe,hideDuplicatePropertyOption:Boolean(K),layoutModule:e.layoutModule,hideIcon:ue}),!ce&&(0,R.jsx)(k().L_,{store:t,propertyId:r.property})]}),(0,R.jsx)(L().A,{store:t,analyticsName:"page_property",children:(0,R.jsx)(V().qm,{store:t,collectionStore:o,blockPropertyValueOverlayStore:n,property:r.property,format:ie?"mini":"compact_page",disabled:c,locked:u,tableWrap:!1})}),s&&"pinned"!==h&&(0,R.jsx)(Y().A,{visible:x||T.isMobile,initial:{opacity:0},animate:{opacity:1,marginLeft:"auto"},exit:{opacity:0},style:se.LastPagePropertyInnerHoverPlusButton,children:ye})]},r.property)}))}),le&&(0,R.jsx)("div",{style:se.infoPanelToggleButtonContainer,children:(0,R.jsx)(z().d,{collectionStore:o,variant:ae?"compact":"full",pageViewBlockContext:f})})]})}const oe={size:"small",fontWeight:"medium",width:{variant:"hug-content"},height:{variant:"small"}},re=r.memo((function(e){const{hiddenProperties:t,canConfigureCollection:n,collectionStore:a,isInPeekRenderer:p,buttonPopupStore:c,collectionContextStore:u,hideDragHandle:y,overflowButtonWrapperStyle:g,overflowButtonStyle:m,pagePropertiesStore:h,layoutModule:f}=e,P=(0,s().Y0)(),v=(0,s().v3)(),S=(0,i().K8)((()=>a.getSchema()),[a]),b=(0,d().IS)((e=>({overflowIcon:{width:16,height:16,fill:e.mediumIconColor},pagePropertiesOverflow:{width:"100%",fontSize:14,padding:y?"10px":"10px 10px 10px 28px",maxHeight:500,overflowY:"scroll"},overflowButtonWrapper:{display:"flex",alignItems:"center",paddingBottom:8,...g},overflowButton:{display:"flex",width:32,height:32,borderRadius:4,justifyContent:"center",alignItems:"center",...m}})),[y,g,m]),x=(0,r.useCallback)((()=>{o(154956).H_({environment:v,collectionContextStore:u,collectionStore:a,isInPeekRenderer:p,onCloseMenu:()=>{c.setState({open:!1})},pagePropertiesStore:h})}),[v,u,h,a,p,c]);return t.length?(0,R.jsx)(q().Ay,{onClose:e.onClose,popupWrapStyle:{width:500},buttonPopupStore:c,popupType:P.isMobile?Q().nl.SlideUp:Q().nl.Popup,render:()=>(0,R.jsx)(o(441292).A,{debugName:"PagePropertiesCompact",capture:!0,children:(0,R.jsxs)("div",{style:b.pagePropertiesOverflow,children:[(0,R.jsx)(K,{showHiddenProperties:!0,schema:S,mergedProperties:t,format:e.format,store:e.store,collectionStore:e.collectionStore,disabled:e.disabled,locked:e.locked,blockPropertyValueOverlayStore:e.blockPropertyValueOverlayStore,isInPeekRenderer:e.isInPeekRenderer,hideDragHandle:y,pagePropertiesStore:h,layoutModule:f}),n&&(0,R.jsx)(X().Xt,{collectionStore:a,pagePropertiesStore:h,isInPeekRenderer:p})]})}),renderOrigin:e=>(0,R.jsx)("div",{style:b.overflowButtonWrapper,children:(0,R.jsx)(Z().A,{renderTooltip:()=>(0,R.jsx)(l().sA,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.compact.showMoreTooltip",values:{num:t.length}}),placement:F().W.Bottom,render:t=>(0,R.jsx)($().A,{style:b.overflowButton,mobileFeedback:P.isMobile,...(0,N().A)(e,t),children:(0,o(711361)._)(b.overflowIcon)})})})}):n?(0,R.jsx)("div",{style:b.overflowButtonWrapper,children:(0,R.jsx)(Z().A,{renderTooltip:()=>(0,R.jsx)(l().sA,{defaultMessage:"Add a property",id:"database.pageProperties.compact.addPropertyButtonTitle"}),placement:F().W.Bottom,render:t=>(0,R.jsx)(q().Ay,{popupType:v.device.isMobile?Q().nl.SlideUp:Q().nl.Popup,onClose:e.onClose,buttonPopupStore:c,originGap:1,alignmentToOrigin:q().yP.Start,render:()=>(0,R.jsx)(o(261603).m$,{context:o(475923).Bd.TopbarFilterPopup,collectionContextStore:u,collectionSettingsStore:u.settingsStore,hideDesktopHeader:!0}),onClick:x,onDismiss:()=>{const e=u.settingsStore;o(521325).os({collectionSettingsStore:e})},renderOrigin:e=>(0,R.jsx)($().A,{style:b.overflowButton,mobileFeedback:P.isMobile,...(0,N().A)(e,t),children:(0,B().W)(b.overflowIcon)})})})}):null})),ie=5;function le(e){const{collectionStore:t,schema:o,store:l,format:n,propertyIds:a,propertyGroupId:b,variant:x,customization:w,pagePropertiesStore:k,pageViewBlockContext:C,blockPropertyValueOverlayStore:j,layoutModule:I,disabled:M,locked:A}=e,[B,V]=(0,P().z)(),L=(0,i().uB)(void 0,f().A),T=(0,s().Y0)(),O=(0,d().IS)((e=>({pageProperties:{width:"100%",fontSize:14},actionButtonsWithTopMargin:{marginTop:8}})),[]),G=(0,r.useCallback)((()=>{L.setState({...L.state,mouseEntered:!0})}),[L]),W=(0,r.useCallback)((()=>{L.setState({...L.state,mouseEntered:!1})}),[L]),N=(0,i().K8)((()=>"pinned"===x||Boolean(l.isAssociatedCollectionAPageTree())),[l,x]),E=(0,i().K8)((()=>{var e;return null===(e=t.getLayoutStore())||void 0===e?void 0:e.getModules()}),[t]);let z=(0,S().z7)({store:l,format:n,schema:o,collectionStore:t,propertyIds:a,propertyGroupId:b});w&&(z=function(e,t,o,r,i){const{hideEmptyProperties:l,neverShowEmptyPropertiesIfMoreThanNProperties:n,neverShowNotionSystemProperties:a,sortNonEmptyPropertiesFirst:s,neverShowPropertiesElsewhereInLayout:d}=t;l&&(e=e.map((e=>({...e,visibility:e.hasValue?e.visibility:"hide"}))));if(d&&o){const t=(0,c().q)({modulesByArea:o,collectionSchema:r,collectionFormat:i}),l=new Set(t);e=e.filter((e=>!l.has(e.property)))}a&&(e=e.filter((e=>!((0,u().TV)(e.property)||"show"!==e.visibility&&e.property.startsWith("notion://")))));void 0!==n&&e.length>n&&(e=e.filter((e=>e.hasValue)));s&&(e=y().Ul(e,(e=>!e.hasValue)));return e}(z,w,E,o,n));const _=(0,i().K8)((()=>k.state.forceShowProperties),[k]),[D,F]=(0,r.useMemo)((()=>{if((0,m().pN)(x))return y().jB(z,(e=>{var t;return!!(null===(t=o[e.property])||void 0===t?void 0:t.type)&&function(e){if("section"===e.visibility)return!1;if("hide"===e.visibility)return!1;if("hide_if_empty"===e.visibility&&!e.hasValue)return!1;return!0}(e)}));if("pinned"===x){const e=Object.fromEntries(z.map((e=>[e.property,e])));if(!a)return[[],[]];const t=a.map((t=>{var r;const i=o[t];if(i)return{property:t,visibility:"show",hasValue:(null===(r=e[t])||void 0===r?void 0:r.hasValue)??!1,name:i.name}})).filter(g().O9);return[t.slice(0,p().U),t.slice(p().U)]}(0,g().HB)(x)}),[z,a,o,x]),H=(0,r.useMemo)((()=>N?D.concat(F):z),[N,D,F,z]),{paddingLeft:U,paddingRight:Y}=e,$=I&&"normalizedTitleWithIcon"===I.type&&"hide"===I.propertyLabels,q=Math.min(ie,D.length)*ee,Q=!$&&("pinned"===x?T.isMobile||V>0&&V<J:V>0&&V<q);let Z;if(null!=w&&w.emptyState&&0===D.length&&0===F.length)return w.emptyState;if(null!=w&&w.dontRenderIfNoPropertiesDefaultShown&&0===D.length)return null;if(N&&!Q)Z=(0,R.jsx)(te,{store:l,collectionStore:t,pagePropertiesStore:k,blockPropertyValueOverlayStore:j,compactProperties:D,hiddenProperties:F,disabled:e.disabled,locked:e.locked,format:n,rowLength:ie,variant:x,layoutModule:I,pageViewBlockContext:C});else{const r={stackPropertyLabelAndValue:null==w?void 0:w.stackPropertyLabelAndValue,heightVariant:null!=w&&w.stackPropertyLabelAndValue||N&&!Q?"small":"medium"},i=C===v().Rr.PeekView;Z=(0,R.jsxs)("div",{style:{...null!=w&&w.disableContainerPadding?{}:{paddingBottom:8},...Q?{paddingTop:8}:{}},children:[(0,R.jsx)(K,{schema:o,format:n,store:l,disabled:M,locked:A,collectionStore:t,propertyGroupId:b,pagePropertiesStore:k,hideDragHandle:"pinned"===x,showHiddenProperties:_,mergedProperties:H,rowCustomization:r,disableLastRowBottomPadding:null==w?void 0:w.disableLastRowBottomPadding,isInPeekRenderer:i,layoutModule:I,blockPropertyValueOverlayStore:j}),"pinned"!==x&&(0,R.jsx)(X().Ay,{collectionStore:t,propertyGroupId:b,schema:o,customization:r,disabled:e.disabled,locked:e.locked,pagePropertiesStore:k,isInPeekRenderer:i,mergedProperties:H,wrapperStyle:null!=w&&w.stackPropertyLabelAndValue?O.actionButtonsWithTopMargin:void 0})]})}return(0,R.jsx)("div",{style:O.pageProperties,onMouseEnter:G,onMouseLeave:W,ref:B,children:(0,R.jsxs)("div",{style:{width:"100%",maxWidth:"100%",padding:N||null!=w&&w.disableContainerPadding?void 0:"16px 0 8px 0",margin:"0 auto",...U?{paddingLeft:U}:{},...Y?{paddingRight:Y}:{}},children:[Z,(0,R.jsx)(h().G0,{blockId:l.id,collectionStore:t})]})})}var ne=()=>o(400885),ae=()=>o(838517),se=()=>o(485966),de=()=>o(779921),pe=()=>o(474473),ce=()=>o(790245),ue=()=>o(141122),ye=()=>o(998182),ge=()=>o(16126),me=()=>o(987916),he=()=>o(31448),fe=()=>o(323936),Pe=()=>o(116485);function ve(e){const{store:t,context:o,disabled:l,wrapper:a,forceGroupsOpenOrClosed:s,customization:p,moduleId:c,layoutModule:u}=e,y=(0,i().K8)((()=>t.getAssociatedCollectionStore()),[t]),g=(0,i().K8)((()=>(null==y?void 0:y.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}))||[]),[y]),m=(0,i().K8)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();if(!e)return{type:"hidden"};const o=(0,ne().gV)(t);return o?{type:"visible",store:t,format:o,collectionStore:e}:{type:"hidden"}}),[t]),h=(0,d().IS)((e=>({container:{cursor:"default"}})),[]);if("hidden"===m.type)return null;return(a||(e=>(0,R.jsx)(Pe().vV,{className:"layout-content",children:e})))((0,R.jsx)(Pe().vV,{children:(0,R.jsx)(n().s,{allowSelectionWithin:!0,children:(0,R.jsxs)("div",{style:h.container,children:[g.map(((e,t)=>(0,r.createElement)(Se,{...m,key:e.id,context:o,disabled:l,propertyGroup:e,forceGroupOpenOrClosed:s,customization:p,isLast:t===g.length-1,moduleId:c,layoutModule:u}))),0===g.length&&(0,R.jsx)(Se,{...m,context:o,disabled:l,propertyGroup:"virtualPropertiesGroup",forceGroupOpenOrClosed:s,customization:p,isLast:!0,moduleId:c,layoutModule:u})]})})}))}function Se(e){const{store:t,context:o,disabled:n,propertyGroup:a,format:s,collectionStore:p,forceGroupOpenOrClosed:c,customization:u,isLast:y,moduleId:g,layoutModule:m}=e,h=(0,i().K8)((()=>"virtualPropertiesGroup"===a?{idForRememberingCollapsedState:`${g}_defaultGroup`,groupIdForSavingPropertyToGroup:void 0,title:(0,R.jsx)(l().sA,{id:"collapsiblePropertyGroups.defaultGroupTitle",defaultMessage:"Properties"})}:{idForRememberingCollapsedState:a.id,groupIdForSavingPropertyToGroup:a.id,title:a.title}),[g,a]),f=(0,i().K8)((()=>void 0!==c?"open"===c:fe().A.isPropertyGroupExpanded({groupId:h.idForRememberingCollapsedState})),[c,h.idForRememberingCollapsedState]),P=o===v().Rr.PeekView,S=(0,i().K8)((()=>t.isNonEditableState()),[t]),b=(0,i().K8)((()=>p.getSchema()),[p]),x=(0,i().K8)((()=>{var e,o;return t.id===(null===(e=se().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id)?pe().Ep.getNewEditorPagePropertiesStore(h.idForRememberingCollapsedState):t.id===(null===(o=ue().default.peekTargetStore.state)||void 0===o?void 0:o.id)?pe().A6.getNewEditorPagePropertiesStore(h.idForRememberingCollapsedState):new(pe().YB)}),[h.idForRememberingCollapsedState,t.id]),w=(0,r.useCallback)((()=>{fe().A.togglePropertyGroupExpanded({groupId:h.idForRememberingCollapsedState})}),[h.idForRememberingCollapsedState]),k=(0,d().IS)((e=>({groupContent:{paddingLeft:0,paddingBottom:y?void 0:null!=u&&u.stackPropertyLabelAndValue?28:20}})),[null==u?void 0:u.stackPropertyLabelAndValue,y]);return(0,R.jsxs)("div",{children:[(0,R.jsx)(be,{onClick:w,isExpanded:f,customization:u,children:h.title}),f&&(0,R.jsx)("div",{style:k.groupContent,children:(0,R.jsx)(le,{propertyGroupId:h.groupIdForSavingPropertyToGroup,pagePropertiesStore:x,schema:b,format:s,store:t,collectionStore:p,disabled:n,locked:S,blockPropertyValueOverlayStore:P?ce().A:de().A,pageViewBlockContext:o,customization:{...u,neverShowPropertiesElsewhereInLayout:!0},layoutModule:m})})]})}function be(e){const{children:t,isExpanded:o,customization:r,onClick:i}=e,n=(0,l().tz)(),a=(0,s().Y0)(),p=Boolean(null==r?void 0:r.stackPropertyLabelAndValue);let c;c=o&&p?a.isTablet?0:a.isMobile?2:8:0;const u=(0,d().IS)((e=>({container:{height:34,display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:6,paddingRight:6,gap:6,marginBottom:c,borderRadius:6},label:{fontSize:13,color:e.text.secondary,fontWeight:he().Wy.medium,...he().RC,height:20},icon:{transition:"transform .2s ease",width:12,height:12,transform:o?"rotate(0deg)":"rotate(-90deg)",fill:e.icon.tertiary},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"}})),[c,o]),y=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{style:u.label,children:t}),(0,R.jsx)("div",{style:u.iconContainer,children:(0,me().p)(u.icon)})]});return o?(0,R.jsx)($().A,{onClick:i,style:u.container,children:y}):(0,R.jsx)($().A,{style:u.container,onClick:i,ariaLabel:n.formatMessage(xe.showProperties),children:y})}const xe=(0,l().YK)({showProperties:{id:"CollapsiblePropertyGroups.showProperties",defaultMessage:"Show properties in section"}});function we(e){const{store:t,format:o,collectionStore:r,disabled:l,blockPropertyValueOverlayStore:n,variant:a,propertyIds:s,customization:d,pagePropertiesStore:p,pageViewBlockContext:c,layoutModule:u}=e,y=(0,i().K8)((()=>r.getSchema()),[r]),g=(0,i().K8)((()=>t.isNonEditableState()),[t]);return(0,R.jsx)(le,{store:t,collectionStore:r,schema:y,format:o,disabled:l,locked:g,blockPropertyValueOverlayStore:n,pageViewBlockContext:c,propertyIds:s,variant:a,customization:d,pagePropertiesStore:p,layoutModule:u})}const ke={id:"properties",type:"properties"};function Ce(e){const{store:t,context:o,disabled:r,variant:s,layoutModule:d=ke,propertyIds:p,customization:c,wrapper:u,showDefaultTitle:y}=e,g=(0,ae().bx)(t,r),m=(0,i().K8)((()=>U().Uv.getMode(t)),[t]),{isMainEditor:h,isPeekEditor:f}=(0,i().K8)((()=>{var e,o;const r=Boolean(ue().default.isSidePeekOpen()&&t.id===(null===(e=ue().default.peekTargetStore.state)||void 0===e?void 0:e.id));return{isMainEditor:Boolean(!r&&t.id===(null===(o=se().default.state.mainEditorCurrentBlockStore)||void 0===o?void 0:o.id)),isPeekEditor:r}}),[t]),P=(0,i().K8)((()=>t.getAssociatedCollectionStore()),[t]),S=(0,i().K8)((()=>{if(!P)return{type:"hidden"};if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=(0,ne().gV)(t);return e?{type:"visible",store:t,format:e,collectionStore:P}:{type:"hidden"}}),[P,t]),b=(0,ye().p)({collectionStore:P,layoutModule:d}),x=(0,i().K8)((()=>b&&d&&!(null!=c&&c.doNotShowPropertyGroups)),[null==c?void 0:c.doNotShowPropertyGroups,b,d]),w=(0,i().K8)((()=>h?pe().Ep.getNewEditorPagePropertiesStore():f?pe().A6.getNewEditorPagePropertiesStore():new(pe().YB)),[h,f]);if("hidden"===S.type)return null;const k=o===v().Rr.PeekView,C=x&&d?(0,R.jsx)(ve,{...e,layoutModule:d,wrapper:void 0,moduleId:d.id}):(0,R.jsxs)(a().wt,{gap:8,children:[y&&(0,R.jsx)(ge().j,{style:{marginLeft:6},children:(0,R.jsx)(l().sA,{id:"pageLayout.propertiesModule.title",defaultMessage:"Properties"})}),(0,R.jsx)(n().s,{allowSelectionWithin:!0,children:(0,R.jsx)(we,{...S,disabled:!g||"suggest"===m,pageViewBlockContext:o,blockPropertyValueOverlayStore:k?ce().A:de().A,propertyIds:p,variant:s,layoutModule:d,customization:c,pagePropertiesStore:w})})]});return u((0,R.jsx)(R.Fragment,{children:C}))}},998182:(e,t,o)=>{o.d(t,{p:()=>l});var r=o(242343),i=()=>o(803290);function l(e){let{collectionStore:t,layoutModule:o}=e;const l=(0,i().K8)((()=>Boolean(null==t?void 0:t.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}))),[t]);return(0,r.useMemo)((()=>!(!o||!t)&&("properties"===o.type&&"pinned"!==o.variant&&l)),[t,l,o])}}}]);