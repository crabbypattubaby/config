"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[68224],{63511:(e,t,s)=>{s.d(t,{Ay:()=>D,tS:()=>_,xG:()=>U});s(725707),s(113085);var o=s(242343),r=()=>s(237385),n=()=>s(803290),i=()=>s(174114),a=()=>s(29116),l=()=>s(452894),d=()=>s(653998),c=()=>s(220413),u=()=>s(319638),m=()=>s(695387),g=()=>s(747459),p=()=>s(137476),f=()=>s(983050),b=()=>s(129978),h=()=>s(622286),x=()=>s(280696),v=()=>s(656473),y=()=>s(667801),S=()=>s(48913),I=()=>s(370557),A=()=>s(907721),j=()=>s(141122),C=()=>s(356813),B=()=>s(103151),k=()=>s(657304),w=s(163643);const P=(0,d().YK)({updates:{id:"topbar.commentsButton.title",defaultMessage:"Comments"}});function T(e){const{blockStore:t}=e,s=(0,x().P)({navigableBlockStore:t});return(0,w.jsx)(K,{blockStore:t,hasUnreadComments:Boolean(s.length)})}function F(e){const{blockStore:t}=e,{value:s}=(0,b().fJ)(u().commentsDependency),o=(0,n().K8)((()=>{if(!s)return!1;const{discussionViewActions:e,discussionHelpers:{getDiscussionsForSidebar:o,getAndSortCommentStoresByTime:r}}=s;return o({blockStore:t,ignoreAfterTime:Date.now()}).some((t=>!t.getResolved()&&r(t).some((s=>e.isCommentUnread({discussionStore:t,commentStore:s})))))}),[s,t]);return(0,w.jsx)(K,{blockStore:t,hasUnreadComments:o})}function K(e){const{blockStore:t,hasUnreadComments:s}=e,i=(0,d().tz)(),a=(0,r().v3)(),{value:c}=(0,b().fJ)(u().commentsDependency),x=(0,h().X)("comment_sidebar_for_you"),T=(0,n().K8)((()=>x?S().Nk(a):S().me(a)),[a,x]),F=(0,n().K8)((()=>{const e=j().default.state.open;return v().A.getPanelState(e?"peek":"mainPage").isOpen}),[]),K=T?(0,w.jsx)("div",{style:{textAlign:"center"},children:(0,w.jsx)(d().sA,{defaultMessage:"Close all comments",id:"topbar.commentsButton.closeSidebartTooltip"})}):(0,w.jsx)("div",{style:{textAlign:"center"},children:(0,w.jsx)(d().sA,{defaultMessage:"View all comments",id:"topbar.commentsButton.openSidebartTooltip"})}),D=(0,n().K8)((()=>(m().A.state.isActivelyComposing||g().A.hasContent())&&g().A.isDraftCommentOnValidSelection()&&g().A.ifPropertyCommentShouldDisplay()),[]),U=(0,k().gQ)(),E=(0,o.useCallback)((()=>{var e;const o=null==c||null===(e=c.discussionHelpers)||void 0===e?void 0:e.getDiscussions,r=!!o&&o(t).length>0,n=g().A.state.open;(0,p().u4)({environment:a,event:{eventName:"topbar_comments_menu_click",eventProperties:{has_discussions:r,has_unread_indicator:s||n}}}),y().handleSidebarButtonClick(a,t,I().tF.Comments,"topbar")}),[a,t,s,c]);return(0,w.jsx)(B().A,{placement:A().W.Bottom,renderTooltip:()=>K,render:e=>(0,w.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[(0,w.jsx)(C().A,{...e,icon:l().h,iconStyle:U.icon,onClick:E,style:U.iconButton,ariaLabel:i.formatMessage(P.updates),hovered:T&&!F&&!j().default.state.open,className:f().rm}),(s||D)&&(0,w.jsx)(_,{})]})})}function _(){const e=(0,r().v3)(),{isMobile:t}=e.device,{dot:s}=(0,i().IS)((e=>({dot:{position:"absolute",top:t?6:1.8,right:t?10:5.5,height:11,width:11,border:`2px solid ${e.whiteButtonBackground}`,borderRadius:12,background:c().Ay.red,pointerEvents:"none"}})),[t]);return(0,w.jsx)("div",{style:s})}const D=function(e){const{blockStore:t}=e;return(0,h().X)("comment_sidebar_for_you")?(0,w.jsx)(T,{blockStore:t}):(0,w.jsx)(F,{blockStore:t})};function U(e){const{device:t,isPersonalHomePage:s,isFormBlock:o,store:r}=e,n=r.isDraft();return!t.isMobile&&!s&&!o&&(!r.isCollectionView()||r.isCollectionViewPageWithContent())&&!n&&(0,a().SF)(r.getSystemBlockTypeStore().getValue())}},73758:(e,t,s)=>{s.d(t,{A:()=>h});s(242343);var o=()=>s(803290),r=()=>s(174114),n=()=>s(950635),i=()=>s(850313),a=()=>s(518797),l=()=>s(409211),d=()=>s(653998),c=()=>s(76394),u=()=>s(31448),m=()=>s(793359),g=()=>s(477784),p=()=>s(289113),f=()=>s(931371),b=s(163643);function h(e){const{store:t}=e,s=(0,r().DP)(),h=(0,o().K8)((()=>t.getCreatedTime()),[t]),x=(0,o().K8)((()=>t.getLastEditedTime()),[t]),v=(0,o().K8)((()=>{const e=t.getCreatedByPointer();if(e)return(0,n().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),y=(0,o().K8)((()=>{const e=t.getLastEditedByPointer();if(e)return(0,n().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),S=(0,o().K8)((()=>{const e=t.getSpaceStore();if(!e)return!1;const s=null==v?void 0:v.asActor;if(!s)return!1;const o=s.table;switch(o){case l().oo:return(0,f().dp)(e,s.id).isMember();case a().GP:return(0,f().Ts)(e,s.id).isMember();case i().yj:return!1;default:(0,c().HB)(o)}}),[t,v]),I=h?(0,p().nl)(h,{useCompactFormat:!0,useLowercase:!0}):"",A=x?(0,p().nl)(x,{useLowercase:!0,useCompactFormat:!0}):"";if(!(x?(0,p().nl)(x,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0}):""))return null;const j={display:"flex",gap:4,color:s.text.contrastSecondary,height:16,fontSize:12},C={size:14,style:{marginRight:2}},B=g().A.getIntl();return(0,b.jsxs)(b.Fragment,{children:[(e=>{let t;if(null!=y&&y.asActor)t=(0,b.jsx)(d().sA,{defaultMessage:"Edited by {editor} {timestamp}",id:"pagePropertiesHeader.editedBy.label",values:{editor:(0,b.jsx)("span",{style:{fontWeight:u().Wy.medium,color:s.text.contrastPrimary},children:(0,b.jsxs)("span",{style:{display:"flex"},children:[!e&&(0,m().w)({actor:y,...C}),(0,n().lR)(B,y)]})}),timestamp:A}});else{if(!A)return;o=A,t=(0,b.jsx)(d().sA,{defaultMessage:"Edited {timestamp}",id:"pagePropertiesHeader.edited.label",values:{timestamp:o}})}var o;return(0,b.jsx)("div",{style:{...j,marginTop:3,marginBottom:3},children:t})})(e.compactFormat),(e=>{let t;if(null!=v&&v.asActor&&S)t=(0,b.jsx)(d().sA,{id:"pagePropertiesHeader.createdBy.label",defaultMessage:"Created by {creator} {timestamp}",values:{creator:(0,b.jsx)("span",{style:{fontWeight:u().Wy.medium,color:s.text.contrastPrimary},children:(0,b.jsxs)("span",{style:{display:"flex"},children:[!e&&(0,m().w)({actor:v,...C}),(0,n().lR)(B,v)]})}),timestamp:I}});else{if(!I)return;t=(0,b.jsx)(d().sA,{id:"pagePropertiesHeader.created.label",defaultMessage:"Created {timestamp}",values:{timestamp:I}})}return(0,b.jsx)("div",{style:{...j,marginBottom:4},children:t})})(e.compactFormat)]})}},247115:(e,t,s)=>{s.d(t,{y:()=>g});var o=s(242343),r=()=>s(803290),n=()=>s(174114),i=()=>s(653998),a=()=>s(637269),l=()=>s(289113),d=()=>s(907721),c=()=>s(73758),u=()=>s(103151),m=s(163643);function g(e){const{store:t,isExpanded:s,isWindowSmall:g,isElectron:p,isShowingTabBar:f,style:b}=e,h=(0,n().DP)(),x=(0,r().K8)((()=>t.getLastEditedTime()),[t]),[v,y]=(0,o.useState)("flex"),[S,I]=(0,o.useState)(0);(0,o.useEffect)((()=>{let e;return s||g?s?(I(0),y("none")):(I(0),e=setTimeout((()=>y("none")),150)):(y("flex"),e=setTimeout((()=>I(1)),150)),()=>clearTimeout(e)}),[s,g]);const A=x?(0,l().nl)(x,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0}):"";return A?(0,m.jsx)("span",{style:{opacity:S,transition:"opacity 150ms linear",display:v,alignItems:"center",fontSize:14,color:h.text.tertiary,height:28,whiteSpace:"nowrap",lineHeight:1.2,...b},children:(0,m.jsx)("div",{style:{display:"flex",flexFlow:"wrap"},children:(0,m.jsx)(u().A,{placement:d().W.Bottom,alignment:d().C.Start,renderTooltip:()=>(0,m.jsx)(c().A,{store:t,compactFormat:!0}),render:e=>{return(0,m.jsx)("div",{...e,style:{...(0,a().g)({noDrag:p&&!f})},children:(t=A,(0,m.jsx)(i().sA,{defaultMessage:"Edited {timestamp}",id:"pagePropertiesHeader.edited.label",values:{timestamp:t}}))});var t}})})}):null}},280696:(e,t,s)=>{s.d(t,{P:()=>c,k:()=>d});s(725707),s(491955);var o=()=>s(803290),r=()=>s(319638),n=()=>s(129978),i=()=>s(836331),a=()=>s(979537),l=()=>s(564837);function d(e){const{navigableBlockStore:t}=e,{value:s}=(0,n().fJ)(r().commentsDependency),i=(0,o().K8)((()=>t&&s?s.discussionHelpers.getDiscussionsForSidebar({blockStore:t,currentUserId:t.userId,ignoreAfterTime:0}):[]),[s,t]);return(0,o().K8)((()=>t&&t.userId?(0,l().R)({userId:t.userId,blockStore:t,discussionStores:i,groupIdsUserIsIn:a()._.getSpacePermissionGroupIds({userId:t.userId,spaceId:t.getSpaceId()})}):[]),[t,i])}function c(e){const{navigableBlockStore:t,forceIncludeDiscussionIds:s}=e,r=d({navigableBlockStore:t});return(0,o().K8)((()=>{const e=i().default.getConfigKey("assume_comment_read","last_seen_at");return r.filter((t=>(null==s?void 0:s.has(t.id))||t.isUnread(e)))}),[r,s])}},564837:(e,t,s)=>{s.d(t,{R:()=>i});s(725707),s(491955),s(403517),s(113085);var o=()=>s(34662);function r(e){const{userId:t,isFollowingPage:s,discussions:r,discussionToComments:n,groupIdsUserIsIn:i,includeDiscussionsWhereUserOnlyAuthor:a}=e,l=s?r:r.filter((e=>function(e){const{userId:t,comments:s,groupIdsUserIsIn:r}=e;return Boolean(s.some((e=>e.getCreatedById()===t||function(e){const{userId:t,comment:s,groupIdsUserIsIn:r}=e,n=o().Fbh(s.getText());if(n.includes(t))return!0;const i=o().FAS(s.getText());if(i.some((e=>r.has(e.groupId))))return!0;return!1}({userId:t,comment:e,groupIdsUserIsIn:r}))))}({userId:t,comments:n(e),groupIdsUserIsIn:i})));return a?l:l.filter((e=>function(e){const{userId:t,comments:s}=e;return Boolean(s.some((e=>e.getCreatedById()&&e.getCreatedById()!==t)))}({userId:t,comments:n(e)})))}var n=()=>s(76394);function i(e){var t;const{userId:s,blockStore:o,discussionStores:i,groupIdsUserIsIn:a}=e;return r({userId:s,isFollowingPage:Boolean(null===(t=o.getFollowStore())||void 0===t||null===(t=t.getModel())||void 0===t?void 0:t.isFollowingAllComments()),discussions:i,discussionToComments:e=>e.getCommentStores().map((e=>e.getModel())).filter(n().O9),groupIdsUserIsIn:a,includeDiscussionsWhereUserOnlyAuthor:!0})}},793359:(e,t,s)=>{s.d(t,{w:()=>l});s(242343);var o=()=>s(950635),r=()=>s(76394),n=()=>s(951156),i=()=>s(482570),a=s(163643);function l(e){const{actor:t}=e,s={size:e.size??14,style:{marginRight:2,...e.style}};return(0,o().H3)(t)?(0,a.jsx)(n().A,{botValue:t.asActor,...s}):(0,o().ps)(t)?(0,a.jsx)(i().A,{userValue:t.asActor,...s}):(0,o().h2)(t)?(0,a.jsx)(i().A,{userValue:void 0,...s}):void(0,r().HB)(t)}},901922:(e,t,s)=>{s.d(t,{E:()=>n});var o=()=>s(129978);const r=new(o().O2)("topbarShareButton",(async()=>await Promise.all([s.e(96159),s.e(75134),s.e(43380),s.e(9304),s.e(96346),s.e(36192),s.e(55373),s.e(62475),s.e(3151),s.e(44711),s.e(98629),s.e(53321),s.e(58550),s.e(16471),s.e(90825),s.e(37353),s.e(29151),s.e(16908),s.e(22900),s.e(49889),s.e(97727),s.e(85128),s.e(83700),s.e(95555),s.e(58823),s.e(36209),s.e(92845),s.e(71718),s.e(48486),s.e(83324),s.e(63077),s.e(41870),s.e(90966),s.e(88552),s.e(90214),s.e(74562),s.e(8184),s.e(28271),s.e(17254),s.e(18895),s.e(78708),s.e(28721),s.e(4422),s.e(28866),s.e(67435),s.e(17989),s.e(48632),s.e(90625),s.e(76181),s.e(59794),s.e(72832),s.e(90280),s.e(26483),s.e(33813),s.e(81768),s.e(71104),s.e(2804),s.e(82850),s.e(84778),s.e(69914),s.e(11341),s.e(92011),s.e(19361),s.e(63327),s.e(26090),s.e(38482),s.e(12341),s.e(50984),s.e(47864),s.e(40828),s.e(76007),s.e(5023),s.e(90978),s.e(65554),s.e(53571),s.e(66885),s.e(21194),s.e(67780),s.e(96933),s.e(87598),s.e(23063),s.e(84341),s.e(3965),s.e(93052),s.e(67200),s.e(6463),s.e(98071),s.e(45620),s.e(96453),s.e(8081),s.e(25368),s.e(38546),s.e(80759),s.e(67183),s.e(45354),s.e(82720),s.e(83181),s.e(68455),s.e(28773),s.e(76074),s.e(78917),s.e(72883),s.e(1440),s.e(45986),s.e(67378),s.e(9353),s.e(91137),s.e(21864),s.e(52181),s.e(92924),s.e(66406),s.e(19167),s.e(55717),s.e(10152),s.e(40186),s.e(73738),s.e(70584),s.e(97074),s.e(48979),s.e(91957),s.e(76026),s.e(67262),s.e(29616),s.e(75681)]).then(s.bind(s,283886)))),n=(0,o()._h)(r,(e=>e.TopbarShareButton))},960779:(e,t,s)=>{s.r(t),s.d(t,{PublicSharingTopbar:()=>j});s(242343);var o=()=>s(237385),r=()=>s(803290),n=()=>s(377561),i=()=>s(247115),a=()=>s(610991),l=()=>s(365060),d=()=>s(626075),c=()=>s(63511),u=()=>s(980149),m=()=>s(958530),g=()=>s(679428),p=()=>s(657304),f=()=>s(901922),b=()=>s(254225),h=()=>s(720340),x=()=>s(48913),v=()=>s(615661),y=()=>s(216273),S=()=>s(304816),I=()=>s(979906),A=s(163643);function j(e){const{store:t,showSidebarButton:s,isInvalidPage:j,isElectron:C}=e,B=(0,o().v3)(),{isMobile:k}=B.device,w=(0,r().K8)((()=>(0,x().Nk)(B)),[B]),P=(0,r().K8)((()=>{var e;return null===(e=B.currentUser)||void 0===e?void 0:e.isLoggedIn()}),[B]),T=(0,r().K8)((()=>(0,n().xK)(B,!1)<1150),[B]),F=(0,r().K8)((()=>t.isFormBlock()),[t]),{isShowingTabBar:K}=(0,r().O$)(y().A),_=(0,r().K8)((()=>{var e;return"suggest"===(null===(e=v().Uv.getStateForBlock(t.id))||void 0===e?void 0:e.mode)}),[t.id]),D=(0,p().Kh)({shouldRenderTemplateGalleryTopbar:!1}),U=(0,u().m)({location:"PublicSharing"});return(0,A.jsx)(l().A,{store:t,disableRectangularSelection:!0,disableEditNearestBlock:!0,render:()=>(0,A.jsxs)("div",{style:D,onDoubleClick:m().mz,children:[s&&(0,A.jsx)(b().z,{}),(0,A.jsx)(d()._,{topbarFeatureController:U}),!F&&g().s({store:t,isInvalidPage:j}),(0,A.jsx)("div",{style:{flexGrow:1,flexShrink:1}}),!F&&P&&(0,A.jsx)(i().y,{store:t,isExpanded:w,isWindowSmall:T,isElectron:C,style:{marginRight:12},isShowingTabBar:K??!1}),!k&&(0,A.jsxs)(A.Fragment,{children:[_&&(0,A.jsx)(h().M,{store:t,isVisible:!0}),(0,A.jsx)(c().Ay,{blockStore:t}),(0,A.jsx)(f().E,{store:t,buttonPopupStore:I().A}),(0,A.jsx)(a().A,{store:t,buttonPopupStore:S().A,useEllipsisIcon:!0,isPublicShareLink:!0})]})]})})}}}]);