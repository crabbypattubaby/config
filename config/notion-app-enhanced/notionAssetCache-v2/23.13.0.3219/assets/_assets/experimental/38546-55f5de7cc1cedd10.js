"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[38546],{46118:(e,t,n)=>{n.d(t,{L:()=>r});var s=()=>n(137476);function r(e,t){(0,s().u4)({environment:e,event:{eventName:"cdrr_page_delete_permanently",eventProperties:{page_id:t.pageId,from:t.from}}})}},71781:(e,t,n)=>{n.d(t,{o:()=>a});var s=()=>n(803290),r=()=>n(174114),i=()=>n(268117),o=()=>n(636208);function a(){const e=(0,s().K8)((()=>(0,i().FI)()),[]);return(0,r().IS)((t=>({changePermissionsIcon:{height:18,width:18,fill:"currentColor"},icon:{marginRight:3,height:15,width:15,fill:"currentColor"},destructiveMenuItemHover:{background:t.tint.uiRedHover},destructiveMenuItemPressed:{background:t.tint.uiRedPressed},openLinkIcon:{marginRight:3,height:15,width:15,fill:"currentColor",transform:"rotate(-45deg)"},popupMenu:{width:248},popupShareModal:{width:o().$D,...e&&{borderRadius:o().Sg}}})),[e])}},156259:(e,t,n)=>{n.d(t,{s:()=>r});n(242343);var s=n(163643);const r=(0,n(680369).wt)("privateTeam",{viewBox:"0 0 28 28",svg:(0,s.jsx)("path",{d:"M20.6455 21.2744C20.9092 21.5469 21.3311 21.5645 21.6035 21.2744C21.8936 20.9844 21.8672 20.5889 21.6035 20.3164L6.9082 5.62988C6.64453 5.36621 6.21387 5.36621 5.94141 5.62988C5.68652 5.88477 5.68652 6.33301 5.94141 6.58789L20.6455 21.2744ZM13.8076 6.13086C12.2783 6.13086 10.8896 6.39453 9.59766 6.8252L10.7578 7.97656C11.7246 7.68652 12.7178 7.51953 13.8076 7.51953C19.5908 7.51953 24.2754 12.6172 24.2754 13.6631C24.2754 14.375 22.7373 16.291 20.3027 17.7852L21.3838 18.8662C24.1611 17.0645 25.8135 14.7002 25.8135 13.6631C25.8135 11.8613 20.9092 6.13086 13.8076 6.13086ZM13.8076 21.1953C15.4424 21.1953 16.9365 20.9053 18.2988 20.4395L17.1475 19.2881C16.1016 19.6133 14.9941 19.8066 13.8076 19.8066C8.01562 19.8066 3.33105 14.9023 3.33105 13.6631C3.33105 13.0479 4.95703 11 7.5498 9.44434L6.45996 8.35449C3.5332 10.165 1.79297 12.5996 1.79297 13.6631C1.79297 15.4561 6.79395 21.1953 13.8076 21.1953ZM18.3164 15.5879C18.5889 14.999 18.7383 14.3398 18.7383 13.6631C18.7383 10.9121 16.541 8.74121 13.8076 8.74121C13.1133 8.74121 12.4629 8.89062 11.874 9.14551L18.3164 15.5879ZM13.8076 18.585C14.5811 18.585 15.3105 18.3916 15.9609 18.0752L9.36914 11.4834C9.04395 12.1338 8.85938 12.8721 8.85938 13.6631C8.86816 16.3438 11.0566 18.585 13.8076 18.585Z"})})},252811:(e,t,n)=>{n.d(t,{CT:()=>w,QV:()=>I,j9:()=>A});n(362833),n(403517),n(242343);var s=()=>n(803290),r=()=>n(174114),i=()=>n(712437),o=()=>n(502140),a=()=>n(706412),l=()=>n(319989),d=()=>n(464034),c=()=>n(52531),m=()=>n(727567),u=()=>n(653998),p=()=>n(76394),h=()=>n(46118),g=()=>n(91472),b=()=>n(110975),f=()=>n(421378),S=()=>n(29869),v=()=>n(378219),C=()=>n(907721),y=()=>n(485966),M=()=>n(535906),x=()=>n(88271),T=()=>n(103151),k=()=>n(71781),P=n(163643);function I(e){const{getValidDeletedPermissions:t,blockStore:n}=e;return(0,s().K8)((()=>{var e;const s=v().$l(v().g7(n));if(Boolean((null==s?void 0:s.id)!==n.id))return{ancestorBlockStore:s,canRestoreAncestor:!0,canRestoreOriginalAccess:!1};const r=t?t(n):[],i=Boolean(n.getParentSpaceStore()&&0===r.length);return{ancestorBlockStore:s,canRestoreAncestor:!1,canRestoreOriginalAccess:!Boolean(null===(e=n.getParentBlockStore())||void 0===e?void 0:e.pathHasDeletedPermission())&&!i}}),[n,t])}function A(e){const t=(0,k().o)(),{environment:n,pageStatus:s,popupStore:r,blockStore:o}=e;async function l(){const e=(0,S().Ay)({store:o,pageVisitSource:i().y8.CopyLink}),t=await g().R.clipboardActions.load();await t.copyString({environment:n,stringValue:e,copiedMessage:t.clipboardMessages.copiedLinkToClipboard}),r.setState({open:!1})}const c=[];switch(s){case"alive":case"in_trash":{const{handleOpenPermissionsMenu:n}=e;c.push(function(e){let{iconStyle:t,action:n}=e;return{key:"change-permissions",render:e=>(0,P.jsx)(M().A,{...e,icon:(0,d().x)(t),title:(0,P.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.changePermissions",defaultMessage:"Change permissions"})}),action:n}}({iconStyle:t.changePermissionsIcon,action:n}),_({iconStyle:t.icon,action:l}));break}case"deleted_from_trash":{const{ancestorBlockStore:s,canRestoreAncestor:o,canRestoreOriginalAccess:m,handleOpenDeletedPermissionsMenu:p,includeNonRestoreActions:h}=e;if(s&&o){const e=()=>{const e=(0,S().Ay)({store:s,pageVisitSource:i().y8.DeletedFromTrashPageActions});b().f({environment:n,url:e}),r.setState({open:!1})};c.push(function(e){let{iconStyle:t,action:n}=e;return{key:"go-to-parent-page",render:e=>(0,P.jsx)(M().A,{...e,icon:(0,a().Z)(t),title:(0,P.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.navigateToParent",defaultMessage:"Open parent in new tab"})}),action:n}}({iconStyle:t.openLinkIcon,action:e}))}m&&c.push(function(e){let{iconStyle:t,action:n}=e;return{key:"view-original-permissions",render:e=>(0,P.jsx)(M().A,{...e,icon:(0,d().x)(t),title:(0,P.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.viewOriginalPermissions",defaultMessage:"View original permissions"})}),action:n}}({iconStyle:t.changePermissionsIcon,action:p})),h&&c.push(_({iconStyle:t.icon,action:l}));break}default:(0,p().HB)(s)}if(0!==c.length)return{key:"actions",render:e=>(0,P.jsx)(x().A,{...e}),items:c}}function w(e){const{from:t,pageStatus:n,environment:r,blockStore:i,popupStore:a,onRestoreOrDeletePage:l}=e,d=(0,k().o)(),g=[],b=(0,s().K8)((()=>{var e;return(null===(e=y().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id)===i.id}),[i]);switch(n){case"alive":return;case"in_trash":{async function S(){await f().iN({environment:r,block:i,spaceId:i.getSpaceId(),from:"adminContentSearch.restorePage",restoreWithoutNavigation:!0}),null==l||l(i.id),a.setState({open:!1})}function v(){const e=l?e=>{e.length>1&&o().log({level:"warning",from:"usePageCellActions",type:"multipleBlocksDeletedFromTrash",data:{blockIds:e.map((e=>e.id))}}),e.length>0&&l(e[0].id)}:void 0;f().Ne({environment:r,blocks:[i],from:"adminContentSearch",handleSuccess:e}),a.setState({open:!1})}g.push(R({iconStyle:d.icon,action:S,disable:!1}),function(e){let{iconStyle:t,action:n}=e;return{key:"delete-from-trash",render:e=>(0,P.jsx)(j,{...e,icon:(0,c().I)(t),title:(0,P.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.deleteFromTrash",defaultMessage:"Delete from Trash"})}),action:n}}({iconStyle:d.icon,action:v}));break}case"deleted_from_trash":{const{canRestoreAncestor:C,canRestoreOriginalAccess:T,includeNonRestoreActions:I}=e,A=C||!T,w=C?(0,P.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.restore.tooltip.restoreParent",defaultMessage:"Restore the parent page to restore the original permissions."}):T?void 0:(0,P.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.restore.tooltip.pageCannotBeRestored",defaultMessage:"This page cannot have its original permissions restored."});g.push(R({iconStyle:d.icon,action:async()=>{await f().tP({environment:r,blockStore:i,spaceId:i.getSpaceId(),from:`${t}.restoreRetainedPage`}),null==l||l(i.id),a.setState({open:!1})},disable:A,tooltip:w}),function(e){let{iconStyle:t,action:n}=e;return{key:"restore-to-private",render:e=>(0,P.jsx)(M().A,{...e,icon:(0,m()._)(t),shouldWrapCaption:!0,title:(0,P.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.restoreToPrivate",defaultMessage:"Restore to Private pages"})}),action:n}}({iconStyle:d.icon,action:async()=>{await f().Ys({environment:r,blockStore:i,spaceId:i.getSpaceId(),navigateToPage:b,from:`${t}.restoreRetainedPage`}),null==l||l(i.id),a.setState({open:!1})}})),I&&g.push(function(e){let{iconStyle:t,action:n}=e;return{key:"purge",render:e=>(0,P.jsx)(j,{...e,icon:(0,c().I)(t),title:(0,P.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.purge",defaultMessage:"Permanently delete"})}),action:n}}({iconStyle:d.icon,action:()=>{f().tz({environment:r,blockStore:i,handleSuccess:e=>{null==l||l(e),h().L(r,{pageId:i.id,from:"content_search"})}}),a.setState({open:!1})}}));break}default:(0,p().HB)(n)}return{key:"inactive-page-actions",render:e=>(0,P.jsx)(x().A,{...e,topBorder:!0}),items:g}}function j(e){const t=(0,r().IS)((e=>({destructiveMenuItemHover:{background:e.tint.uiRedHover},destructiveMenuItemPressed:{background:e.tint.uiRedPressed}})),[]);return(0,P.jsx)(M().A,{...e,isRedOnHover:!0,hoveredStyle:t.destructiveMenuItemHover,pressedStyle:t.destructiveMenuItemPressed})}function R(e){let{iconStyle:t,action:n,disable:s,tooltip:r}=e;const i=e=>(0,P.jsx)(M().A,{...e,disabled:s,disallowTabbing:s,disabledFeedback:!0,icon:(0,m()._)(t),shouldWrapCaption:!0,title:(0,P.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.restore",defaultMessage:"Restore to original location"})});return{key:"restore",render:e=>r?(0,P.jsx)(T().A,{textWrap:!0,renderTooltip:()=>r??null,placement:C().W.Right,render:t=>(0,P.jsx)("div",{...t,children:i(e)})}):i(e),action:n}}function _(e){let{iconStyle:t,action:n}=e;return{key:"copy-link",render:e=>(0,P.jsx)(M().A,{...e,icon:(0,l().w)(t),title:(0,P.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:n}}},436559:(e,t,n)=>{n.d(t,{o:()=>D,x:()=>L});n(362833),n(403517);var s=n(242343),r=()=>n(670481),i=()=>n(653998),o=()=>n(103151),a=()=>n(237385),l=()=>n(803290),d=()=>n(174114),c=()=>n(518797),m=()=>n(413871),u=()=>n(517198),p=()=>n(932322),h=()=>n(951156),g=n(163643);function b(e){let{botId:t}=e;const n=(0,i().tz)(),s=(0,a().v3)(),r=(0,l().K8)((()=>m().sk.createUniqueRootStore(s,{table:c().GP,id:t})),[t,s]),o=(0,l().K8)((()=>r.getDisplayName(n)),[r,n]),u=(0,l().K8)((()=>r.getParentStore()),[r]),b=(0,l().K8)((()=>{if(u){if(u instanceof m().LU)return u.getDisplayName(n);if(u instanceof m().SL)return u.getName()}}),[u,n]),S=(0,d().IS)((()=>({desktopIconStyle:{alignSelf:"center",width:24,fontSize:18}})),[]);return o?(0,g.jsx)(p().Ay,{desktopIconStyle:S.desktopIconStyle,icon:(0,g.jsx)(h().A,{botStore:r,size:24}),title:o,caption:(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.botMenuItem.createdBy",defaultMessage:"Created by {creatorName}",values:{creatorName:b}})}):(0,g.jsx)(f,{})}function f(){const e=(0,d().IS)((e=>({container:{userSelect:"none",minHeight:45,fontSize:14,padding:"4px 8px",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},textContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gap:6},icon:{flexGrow:0,flexShrink:0,width:24,height:24,borderRadius:"0.25em",marginRight:4,marginTop:1},title:{flexGrow:0,flexShrink:0,width:80,height:14,borderRadius:"0.25em",marginLeft:4},byline:{flexGrow:0,flexShrink:0,width:150,height:10,borderRadius:"0.25em",marginLeft:4}})),[]);return(0,g.jsxs)("div",{style:e.container,children:[(0,g.jsx)(u().A,{style:e.icon}),(0,g.jsxs)("div",{style:e.textContainer,children:[(0,g.jsx)(u().A,{emphasized:!1,style:e.title}),(0,g.jsx)(u().A,{emphasized:!1,style:e.byline})]})]})}var S=()=>n(167089),v=()=>n(485966),C=()=>n(28210);const y=(0,i().YK)({editor:{id:"adminContentSearchTab.sharedWith.permissions.editor",defaultMessage:"Full access"},readAndWrite:{id:"adminContentSearchTab.sharedWith.permissions.readAndWrite",defaultMessage:"Can edit"},commentOnly:{id:"adminContentSearchTab.sharedWith.permissions.commentOnly",defaultMessage:"Can comment"},reader:{id:"adminContentSearchTab.sharedWith.permissions.reader",defaultMessage:"Can view"},none:{id:"adminContentSearchTab.sharedWith.permissions.none",defaultMessage:"None"}});function M(e,t){switch(t){case"editor":return e.formatMessage(y.editor);case"read_and_write":return e.formatMessage(y.readAndWrite);case"comment_only":return e.formatMessage(y.commentOnly);case"reader":return e.formatMessage(y.reader);case"none":return e.formatMessage(y.none)}}function x(e){let{name:t,icon:n,role:s}=e;const r=(0,i().tz)(),o=(0,l().O$)(v().AppStoreCurrentSpaceStore),a=M(r,s),c=(0,d().IS)((e=>({defaultGroupIcon:{height:20,width:20,color:e.text.tertiary,fill:"currentColor"}})),[]);return(0,g.jsx)(p().Ay,{desktopIconStyle:{alignSelf:"center",width:24,fontSize:18},icon:(0,g.jsx)(C().B,{disabled:!0,icon:n&&o?{pointer:o.pointer,icon:n}:void 0,size:20,isEmptyPage:!1,title:t,defaultIcon:(0,S().M)(c.defaultGroupIcon)}),title:t||(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.untitledPage",defaultMessage:"Untitled{maybeRoleString}",values:{maybeRoleString:a?` · ${a}`:""}}),caption:(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.group",defaultMessage:"Group{maybeRoleString}",values:{maybeRoleString:a?` · ${a}`:""}})})}var T=()=>n(446588),k=()=>n(424339);function P(e){let{permissionItem:t}=e;const n=(0,i().tz)(),s=(0,l().O$)(v().AppStoreCurrentSpaceStore),r=(0,l().K8)((()=>{var e;return null===(e=v().default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]),o=null==t?void 0:t.role,a=(0,T().PW)(o)?M(n,o):void 0;return(0,g.jsx)(p().Ay,{desktopIconStyle:{alignSelf:"center",width:24},icon:s?(0,g.jsx)(k().x,{disabled:!0,store:s,size:24}):void 0,title:r,caption:(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.spaceMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:a?` · ${a}`:""}})})}var I=()=>n(156259),A=()=>n(218357);function w(e){let{teamId:t,role:n,onlyOwners:s}=e;const r=(0,a().v3)(),o=(0,i().tz)(),d=(0,l().K8)((()=>new(m().h4)(r,{table:A().yK,id:t})),[r,t]),c=M(o,n),u=(0,l().K8)((()=>d.getName()),[d]),h=u||(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.unknownTeamName",defaultMessage:"Private teamspace"});return(0,g.jsx)(p().Ay,{desktopIconStyle:{alignSelf:"center",width:24},icon:u?(0,g.jsx)(k().x,{disabled:!0,store:d,size:24}):(0,I().s)(),title:h,caption:s?(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamOwners",defaultMessage:"Owners{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}}):(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}})})}var j=()=>n(409211),R=()=>n(14931),_=()=>n(482570);function W(e){let{userId:t,role:n,isGuest:s}=e;const r=(0,i().tz)(),o=(0,a().v3)(),{userStore:d,userName:c}=(0,l().K8)((()=>{const e=new(m().LU)(o,{table:j().oo,id:t}),n=(0,R().c6)(r,e.getModel());return{userStore:e,userName:n}}),[o,t,r]),u=M(r,n);return(0,g.jsx)(p().Ay,{desktopIconStyle:{alignSelf:"center",width:24},icon:(0,g.jsx)(_().A,{userStore:d,size:24}),title:c,caption:s?(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.guest",defaultMessage:"Guest{maybeRoleString}",values:{maybeRoleString:u?` · ${u}`:""}}):(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.member",defaultMessage:"Member{maybeRoleString}",values:{maybeRoleString:u?` · ${u}`:""}})})}const O=(0,i().YK)({sharedWithWorkspaceMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWorkspaceMembers",defaultMessage:"Workspace members"},sharedWithTeamOwners:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamOwners",defaultMessage:"Teamspace owners"},sharedWithTeamMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamMembers",defaultMessage:"Teamspace members"},sharedWithMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithMembers",defaultMessage:"{numMembers, plural, one {# member} other {# members}}"},sharedWithGroups:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGroups",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"},sharedWithGuests:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGuests",defaultMessage:"{numGuests, plural, one {# guest} other {# guests}}"},sharedWithBots:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithBots",defaultMessage:"{numBots, plural, one {# connection} other {# connections}}"},separator:{defaultMessage:", ",id:"adminContentSearchTab.pagesTable.sharedWithCell.separator"}});function B(e){let{blockStore:t}=e;const s=(0,n(872177).d)(t),a=function(e,t){const{mostPermissivePublicItem:n,spacePermission:s,groupPermissions:a,guestUserPermissions:l,memberUserPermissions:d,teamSharePermissions:c,teamOwnerSharePermissions:m,botPermissions:u}=e,p=s&&"none"!==s.permissionItem.role;if(n&&"none"!==n.permissionItem.role)return(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWeb",defaultMessage:"Shared to web"});if(!p&&0===a.length&&0===l.length&&0===d.length&&0===c.length&&0===m.length&&0===u.length)return(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage",defaultMessage:"Nobody"}),(0,g.jsx)(o().A,{render:e=>(0,g.jsx)("div",{...e,children:(0,r().G)({marginLeft:4,height:14,width:14,opacity:.5})}),renderTooltip:()=>(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage.tooltip",defaultMessage:"No person, group, or teamspace has any access to this page."})})]});const h=[];p?h.push(t.formatMessage(O.sharedWithWorkspaceMembers)):(m.length>0&&0===c.length?h.push(t.formatMessage(O.sharedWithTeamOwners)):c.length>0&&h.push(t.formatMessage(O.sharedWithTeamMembers)),d.length>0&&h.push(t.formatMessage(O.sharedWithMembers,{numMembers:d.length})),a.length>0&&h.push(t.formatMessage(O.sharedWithGroups,{numGroups:a.length})));l.length>0&&h.push(t.formatMessage(O.sharedWithGuests,{numGuests:l.length}));u.length>0&&h.push(t.formatMessage(O.sharedWithBots,{numBots:u.length}));return h.join(t.formatMessage(O.separator))}(s,(0,i().tz)()),l=L({permissionItems:s});return(0,g.jsx)(n(274347).ED,{title:a,items:l,disabled:0===l.length})}function L(e){let{permissionItems:t}=e;return[...t.spacePermission?[{key:"space-permission",render:e=>{var n;return(0,g.jsx)(P,{...e,permissionItem:null===(n=t.spacePermission)||void 0===n?void 0:n.permissionItem})},action:()=>{}}]:[],...t.teamOwnerSharePermissions.map((e=>({key:`${e.team_id}-owners`,render:t=>(0,g.jsx)(w,{...t,onlyOwners:!0,teamId:e.team_id,role:e.role}),action:()=>{}}))),...t.teamSharePermissions.map((e=>({key:`${e.team_id}-members`,render:t=>(0,g.jsx)(w,{...t,teamId:e.team_id,role:e.role}),action:()=>{}}))),...t.groupPermissions.map((e=>({key:e.id,render:()=>(0,g.jsx)(x,{name:e.name,icon:e.icon,role:e.role}),action:()=>{}}))),...t.memberUserPermissions.map((e=>({key:e.user_id,render:t=>(0,g.jsx)(W,{...t,userId:e.user_id,role:e.role}),action:()=>{}}))),...t.guestUserPermissions.map((e=>({key:e.user_id,render:t=>(0,g.jsx)(W,{...t,isGuest:!0,userId:e.user_id,role:e.role}),action:()=>{}}))),...t.botPermissions.map((e=>({key:e.bot_id,render:t=>(0,g.jsx)(b,{...t,botId:e.bot_id}),action:()=>{}})))]}const D=s.memo(B)},464034:(e,t,n)=>{n.d(t,{x:()=>r});n(242343);var s=n(163643);const r=(0,n(680369).wt)("settingsSecurity",{viewBox:"0 0 11 20",svg:(0,s.jsx)("path",{d:"M4.92129 19.3231C5.26719 19.627 5.74092 19.6649 6.07178 19.3383L8.38779 16.9913C8.71865 16.6571 8.70361 16.1558 8.38027 15.8292L7.2749 14.7127L8.92168 13.0569C9.2375 12.7379 9.22998 12.229 8.90664 11.8948L7.41026 10.3757C9.44805 9.35026 10.5985 7.64127 10.5985 5.62847C10.5985 2.78016 8.32012 0.486328 5.49277 0.486328C2.66543 0.486328 0.394531 2.77257 0.394531 5.62847C0.394531 7.67166 1.54502 9.50217 3.37979 10.3301V17.4622C3.37979 17.7357 3.4625 18.0471 3.69561 18.2446L4.92129 19.3231ZM5.49277 17.9863L4.68066 17.166V9.34266C2.95869 8.9629 1.73301 7.4438 1.73301 5.62847C1.73301 3.53972 3.40986 1.84592 5.49277 1.84592C7.57569 1.84592 9.24502 3.53212 9.24502 5.62847C9.24502 7.42101 8.01181 8.96289 6.13194 9.38824V11.0289L7.57569 12.4872L6.03418 14.0214V15.3887L7.04931 16.3989L5.49277 17.9863ZM5.49277 5.67405C6.23721 5.67405 6.83877 5.06641 6.83877 4.32205C6.83877 3.5777 6.23721 2.97005 5.49277 2.97005C4.74834 2.97005 4.1543 3.5701 4.1543 4.32205C4.1543 5.06641 4.75586 5.67405 5.49277 5.67405Z"})})},628685:(e,t,n)=>{n.d(t,{V:()=>I});n(725707),n(491955);var s=n(242343),r=()=>n(803290),i=()=>n(76394),o=()=>n(640979),a=()=>n(907721),l=()=>n(466321),d=()=>n(962373),c=()=>n(273520),m=()=>n(935091),u=()=>n(858023),p=()=>n(371807),h=()=>n(237385),g=()=>n(145017),b=()=>n(975392),f=()=>n(84543),S=()=>n(917008),v=()=>n(413871),C=()=>n(88271),y=()=>n(436559),M=()=>n(872177),x=n(163643);function T(e){let{blockStore:t,filterDeletedPermissions:n}=e;const{mockBlockStore:i}=function(e){let{blockStore:t,filterDeletedPermissions:n}=e;const i=(0,h().v3)(),o=(0,r().K8)((()=>(0,b().mg)(t.inMemoryRecordCache.data)),[t]),a=(0,s.useMemo)((()=>new(p().A)({name:"adminContentSearch.deletedFromTrashPermissionsView",data:o,isTemporaryData:!0})),[o]),l=(0,S().D)({unpersistedInMemoryRecordCache:a}),{mockBlockStore:d}=(0,r().K8)((()=>{const e=n?n(t):[],s=new(v().Bv)(i,{table:g().ev,id:t.id},{inMemoryRecordCache:a});return l.createAndCommit({userAction:"adminContentSearch.restoreDeletedFromTrashPermissionsOptimistically",perform:t=>{f().applyOperation({store:s,operation:{pointer:s,command:"set",path:["permissions"],args:e},transaction:t})}}),{inMemoryRecordCache:a,mockBlockStore:s}}),[i,t,a,l,n]);return{mockBlockStore:d}}({blockStore:t,filterDeletedPermissions:n}),a=(0,M().d)(i),l=(0,y().x)({permissionItems:a});return(0,x.jsx)(m().A,{menuType:o().gu.Popup,width:248,children:(0,x.jsx)(u().Ay,{type:u().Oh.Vertical,initialFocus:void 0,sections:[{key:"deletedFromTrashPermissions",render:e=>(0,x.jsx)(C().A,{...e}),items:l}]})})}var k=()=>n(252811),P=()=>n(71781);function I(e){let{blockStore:t,getValidDeletedPermissions:n,placementToOrigin:p,renderPopupOrigin:h,environment:g,includeNonRestoreActions:b,onRestoreOrDeletePage:f,from:S}=e;const v=(0,r().uB)(void 0,d().A),C=(0,P().o)(),[y,M]=(0,s.useState)(!1),I=(0,k().QV)({blockStore:t,getValidDeletedPermissions:n}),A=[(0,k().j9)({environment:g,pageStatus:"deleted_from_trash",popupStore:v,blockStore:t,from:S,handleOpenDeletedPermissionsMenu:()=>M(!0),includeNonRestoreActions:b,onRestoreOrDeletePage:f,...I}),(0,k().CT)({environment:g,from:S,pageStatus:"deleted_from_trash",popupStore:v,blockStore:t,includeNonRestoreActions:b,onRestoreOrDeletePage:f,...I})].filter(i().O9);return(0,x.jsx)(c().Ay,{popupType:l().n.Popup,alignmentToOrigin:a().C.Start,placementToOrigin:p,style:C.popupMenu,render:()=>y?(0,x.jsx)(T,{blockStore:t,filterDeletedPermissions:n}):(0,x.jsx)(m().A,{menuType:o().gu.Popup,width:248,children:(0,x.jsx)(u().Ay,{type:u().Oh.Vertical,initialFocus:void 0,sections:A})}),onClose:()=>{M(!1)},buttonPopupStore:v,renderOrigin:h})}},636208:(e,t,n)=>{n.d(t,{$D:()=>d,CJ:()=>u,Sg:()=>l,iM:()=>S,kJ:()=>p,kx:()=>g,qj:()=>f,rL:()=>i,sH:()=>h,u6:()=>o,wo:()=>b,zr:()=>c});var s=()=>n(758989),r=()=>n(622163);const i=16,o=20,a=10,l=12,d=456,c=24,m=24,u=48;function p(e){let{theme:t,inheritanceBannerEnabled:n,isMobile:s}=e;return{background:t.tint.regular,borderRadius:8,paddingTop:8,paddingBottom:8,paddingLeft:8,paddingRight:8,marginLeft:s?0:i,marginRight:s?0:i,marginTop:4,marginBottom:8}}function h(e){let{isRedesignEnabled:t,isMobile:n}=e;return t?{...b({isMobile:n}),width:"unset",height:u,paddingTop:6,paddingBottom:6}:{}}function g(e){let{environment:t,isRedesignEnabled:n}=e;return n?(0,r().ny)(t,t.device.isMobile?"UISmall":"UIRegular"):(0,r().ny)(t,"UISmall")}function b(e){let{isMobile:t}=e;return{borderRadius:a,transition:"background 150ms ease-out"}}function f(e){let{isMobile:t}=e;return t?12:10}function S(e){let{theme:t,colorOverride:n,size:r=m,useLargeBorderRadius:i,useLightBackgroundColor:o,icon:a}=e;return{background:n||(a&&(0,s().T8)(a)?(0,s().ez)({icon:a,mode:t.mode,useLightGrayColor:o}):o?t.lightDividerColor:t.regularDividerColor),width:r,height:r,borderRadius:i?6:"0.25em"}}},700734:(e,t,n)=>{n.d(t,{T:()=>m});n(333225),n(494367),n(516262),n(573119),n(240480),n(950443),n(619601),n(725707),n(500234),n(771702);var s=n(242343),r=()=>n(803290),i=(n(491955),()=>n(76394)),o=()=>n(673447);var a=()=>n(446588),l=()=>n(378219),d=()=>n(736953),c=()=>n(111826);function m(e){let{subscriptionData:t}=e;const{userIsMember:n,permissionGroupExists:m}=(0,r().K8)((()=>{if(!t)return{userIsMember:()=>!1,permissionGroupExists:()=>!1};const e=new Set;c().Ye(t).forEach((t=>{e.add(t.userId)}));const n=new Set;d().A.state.permissionGroupsAndMemberCounts.forEach((e=>{n.add(e.group.group_id)}));return{userIsMember:t=>e.has(t),permissionGroupExists:e=>n.has(e)}}),[t]);return(0,s.useCallback)((e=>{var t;const s=null===(t=e.getPermissionItems().find(a().Ny))||void 0===t?void 0:t.previous_permissions;return s?function(e){var t;let{deletedPermissions:n,ancestorPath:s,userIsMember:r,permissionGroupExists:a}=e;const l=null===(t=(0,o().vv)(s))||void 0===t?void 0:t.id;return n.filter((e=>{const t=e.type;switch(t){case"trusted_domain_permission":case"public_permission":case"deleted_permission":case"bot_permission":return!1;case"exclusive_user_permission":case"user_permission":return r(e.user_id);case"explicit_team_guest_permission":case"explicit_team_owner_permission":case"explicit_team_permission":return e.team_id===l;case"group_permission":return a(e.group_id);case"team_owner_permission":case"team_permission":case"restricted_permission":case"collection_property_permission":case"space_permission":case"space_owner_permission":return!0;default:(0,i().HB)(t)}}))}({deletedPermissions:s,ancestorPath:(0,l().E)(e),userIsMember:n,permissionGroupExists:m}):[]}),[n,m])}},872177:(e,t,n)=>{n.d(t,{d:()=>u});n(362833),n(725707),n(491955),n(500234),n(403517),n(244387);var s=()=>n(803290),r=()=>n(446588),i=()=>n(970172),o=()=>n(294997),a=()=>n(378219),l=()=>n(352723),d=()=>n(736953),c=()=>n(111826),m=()=>n(305043);function u(e){return(0,s().K8)((()=>{const t=m().subscriptionDataStoreInstance.state,n=t?(0,c().Be)(t):[],s=(0,l().i0)(e),u=d().A.state.permissionGroupsAndMemberCounts.map((e=>e.group)),p=(0,a().Uo)(e),h=s.find((e=>{let{permissionItem:t}=e;return r().FP(t)})),g=s.find((e=>{let{permissionItem:t}=e;return r().Lg(t)})),b=p?s.find((e=>{let{permissionItem:t}=e;return(0,o().O1)(t,p.id)})):void 0,f=s.map((e=>{let{permissionItem:t}=e;return t})).filter(r().gl),S=s.map((e=>{let{permissionItem:t}=e;return t})).filter(r().nl),v=s.map((e=>{let{permissionItem:t}=e;return t})).filter(r().Ds).reduce(((e,t)=>{const n=t.group_id,s=t.role,r=u.find((e=>e.group_id===n));if(r){const t={group_id:r.group_id,id:(0,i().T1)({spacePermissionGroupId:r.group_id,spaceId:r.space_id}),name:r.name,space_id:r.space_id,icon:r.icon,version:r.getVersion(),role:s};e.push(t)}return e}),[]),[C,y]=s.map((e=>{let{permissionItem:t}=e;return t})).filter(r().B2).reduce(((e,t)=>{const s=n.find((e=>e.userId===t.user_id));return Boolean(s&&!r().Km(s.role)&&!r().p2(s.role))?[e[0].concat(t),e[1]]:[e[0],e[1].concat(t)]}),[[],[]]);return{groupPermissions:v,mostPermissivePublicItem:h,spacePermission:g,teamPermission:b,teamSharePermissions:f,teamOwnerSharePermissions:S,guestUserPermissions:C,memberUserPermissions:y,botPermissions:s.map((e=>{let{permissionItem:t}=e;return t})).filter((e=>(0,r().P3)(e)))}}),[e])}},872856:(e,t,n)=>{n.d(t,{k:()=>i});var s=()=>n(129978);const r=new(s().O2)("shareMenuContainer",(async()=>await Promise.all([n.e(96159),n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(36192),n.e(55373),n.e(62475),n.e(3151),n.e(44711),n.e(98629),n.e(53321),n.e(58550),n.e(16471),n.e(90825),n.e(37353),n.e(29151),n.e(16908),n.e(22900),n.e(49889),n.e(97727),n.e(85128),n.e(83700),n.e(95555),n.e(58823),n.e(36209),n.e(92845),n.e(71718),n.e(48486),n.e(83324),n.e(63077),n.e(41870),n.e(90966),n.e(88552),n.e(90214),n.e(74562),n.e(8184),n.e(28271),n.e(17254),n.e(18895),n.e(78708),n.e(28721),n.e(4422),n.e(28866),n.e(67435),n.e(17989),n.e(48632),n.e(90625),n.e(76181),n.e(59794),n.e(72832),n.e(90280),n.e(26483),n.e(33813),n.e(81768),n.e(71104),n.e(2804),n.e(82850),n.e(84778),n.e(69914),n.e(11341),n.e(92011),n.e(19361),n.e(63327),n.e(26090),n.e(38482),n.e(12341),n.e(50984),n.e(47864),n.e(40828),n.e(76007),n.e(5023),n.e(90978),n.e(65554),n.e(53571),n.e(66885),n.e(21194),n.e(67780),n.e(96933),n.e(87598),n.e(23063),n.e(84341),n.e(3965),n.e(93052),n.e(67200),n.e(6463),n.e(98071),n.e(45620),n.e(96453),n.e(8081),n.e(25368),n.e(38546),n.e(80759),n.e(67183),n.e(45354),n.e(82720),n.e(83181),n.e(68455),n.e(28773),n.e(76074),n.e(78917),n.e(72883),n.e(1440),n.e(45986),n.e(67378),n.e(9353),n.e(91137),n.e(21864),n.e(52181),n.e(92924),n.e(66406),n.e(19167),n.e(55717),n.e(10152),n.e(40186),n.e(73738),n.e(70584),n.e(97074),n.e(48979),n.e(91957),n.e(76026),n.e(67262),n.e(29616),n.e(75681)]).then(n.bind(n,18179)))),i=(0,s()._h)(r,(e=>e.ShareMenuContainer))},972340:(e,t,n)=>{n.d(t,{$:()=>m,B:()=>c});var s=()=>n(371807),r=()=>n(296599),i=()=>n(145017),o=()=>n(836331),a=()=>n(413871),l=()=>n(133926),d=()=>n(818369);async function c(e){const{environment:t,sudoModeStore:n,pageBlockId:s,currentSpaceStore:i}=e,a=n.state.privatePageStore&&n.state.privatePageStore.id===s;if(t.device.isMobile||a||n.state.loading||n.state.error)return;await o().default.waitUntilStatsigReady();const c=(null==i?void 0:i.isReady())&&(null==i?void 0:i.canAdmin()),u=await function(e,t){return(0,l().Se)(e,{name:"sudo_mode",spaceId:t,userId:e.currentUser.id})}(t,null==i?void 0:i.id);if(!(s&&c&&i&&u))return;n.setState({...n.state,privatePageStore:void 0,loading:!0});const p=i.id,h=await d().callApi({eventName:"getPrivatePageInfo",environment:t,data:{id:s}});if("failed"===h.type)return void n.setState({...n.state,loading:!1,error:h.error});const g=h.data,b=m({environment:t,blockId:s,privateRecordCacheName:r().Rb,ancestorData:g,spaceId:p});n.setState({...n.state,privatePageStore:b,loading:!1,error:void 0})}function m(e){const{environment:t,privateRecordCacheName:n,ancestorData:r,spaceId:o,blockId:l}=e,d=new(s().A)({name:n});for(const s of r)switch(s.table){case"block":case"collection":case"team":d.setRecord({pointer:{spaceId:o,table:s.table,id:s.value.id},userId:t.currentUser.id},{role:"editor",value:s.value})}const c=new(a().Bv)(t,{table:i().ev,id:l},{inMemoryRecordCache:d});return c.inMemoryRecordCache.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),c}}}]);