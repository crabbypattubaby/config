"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[31517,34208,90871],{22599:(e,t,o)=>{o.d(t,{Y:()=>n});o(242343);const i={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125V8.121c0-.563-.224-1.104-.622-1.502L11.63 2.997a2.13 2.13 0 0 0-1.502-.622zM5.375 4.5c0-.483.392-.875.875-.875h3.7V6.25A2.05 2.05 0 0 0 12 8.3h2.625v7.2a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875zm8.691 2.7H12a.95.95 0 0 1-.95-.95V4.184z"})},n=(0,o(680369).wt)("pageEmpty",i)},40642:(e,t,o)=>{o.d(t,{b:()=>n});o(242343);var i=o(163643);const n=(0,o(680369).wt)("templates",{viewBox:"0 0 20 20",svg:(0,i.jsxs)("g",{children:[(0,i.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,i.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,i.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},44250:(e,t,o)=>{function i(e){return!(!e||"askUserToPick"in e)}function n(e){if(!e||!("askUserToPick"in e))return e}function a(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}o.d(t,{DK:()=>n,K$:()=>i,j6:()=>a})},48768:(e,t,o)=>{o.d(t,{V:()=>r});var i=()=>o(803290),n=()=>o(485966),a=()=>o(622286);function r(){const e=(0,a().X)("lazier_dependencies"),t=(0,i().K8)((()=>n().default.state.renderPhase),[]);return e&&"rendered"!==t}},67558:(e,t,o)=>{o.d(t,{VY:()=>l,ZJ:()=>a,u3:()=>r});var i=()=>o(496985);class n extends(()=>o(129044))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const a=new n,r=new(i().default)((()=>!1!==a.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),l=new(i().default)((()=>!1!==a.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},71927:(e,t,o)=>{o.d(t,{DC:()=>l,NI:()=>r});o(725707),o(491955),o(403517);var i=()=>o(316515),n=()=>o(678716),a=()=>o(661764);function r(e){let{persona:t,defaultToLife:o}=e;if(!t)return;if(t in n().bJ)return t;const i={customer_support:"support",designer:"design",educator:"student",entrepreneur:"hr",freelancer:"design",hr_recruiting:"hr",it:"eng",marketing_sales:"marketing",media:"marketing",operations:"hr",operations_hr:"hr",personal:"life",product_manager:"product",programmer:"eng",other:o?"life":void 0,unfilled:o?"life":void 0,undefined:o?"life":void 0,creative:"design",founderCeo:"hr",internalCommunication:"hr",productDesign:"design",projectProgramMgmt:"product",finance:void 0,itAdmin:"eng",knowledgeManagement:"hr"};return(null==i?void 0:i[t])??void 0}function l(e,t){const o=r({persona:t,defaultToLife:!0});return(o?null==s?void 0:s[o]:[]).filter((t=>(0,a().vc)(t,e)))}const s={...n().PY,design:[i().kx.designSprint,i().kx.designPortfolio],product:[i().kx.productSpec,i().kx.productWiki,i().kx.visionAndStrategy],marketing:[i().kx.blogEditorialCalendar,i().kx.socialMediaCalendar,i().kx.presentation],hr:[i().kx.companyHome,i().kx.employeeBenefits,i().kx.peopleDirectory],sales:[i().kx.salesWiki,i().kx.presentation,i().kx.oneOnOneNotes],support:[],life:[]}},79040:(e,t,o)=>{o.d(t,{_:()=>r});var i=()=>o(477784);const n=(0,o(653998).YK)({table:{defaultMessage:"Table",id:"templatePickerHelpers.databaseTemplateNames.table"},board:{defaultMessage:"Board",id:"templatePickerHelpers.databaseTemplateNames.board"},list:{defaultMessage:"List",id:"templatePickerHelpers.databaseTemplateNames.list"},calendar:{defaultMessage:"Calendar",id:"templatePickerHelpers.databaseTemplateNames.calendar"},gallery:{defaultMessage:"Gallery",id:"templatePickerHelpers.databaseTemplateNames.gallery"},timeline:{defaultMessage:"Timeline",id:"templatePickerHelpers.databaseTemplateNames.timeline"}});function a(e){const{environment:t,store:i,viewType:n}=e;o(84543).createAndCommit({userAction:"templatePickerHelpers.handleClickForViewType",environment:t,canUndo:!0,perform:e=>{(0,o(267439).c)({environment:t,store:i,viewType:n,transaction:e}),o(191756).uK({environment:t,store:i,pageVisitSource:o(712437).y8.LinkInPage});const a=i.getCollectionViewStores()[0];a&&(0,o(934807).F)(a.id,{viewType:n})}})}const r=[{name:i().A.formatMessage(n.table),type:"table",iconFn:o(120844).T,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>a({environment:e,store:t,viewType:"table"})},{name:i().A.formatMessage(n.board),type:"board",iconFn:o(923e3).q,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>a({environment:e,store:t,viewType:"board"})},{name:i().A.formatMessage(n.list),type:"list",iconFn:o(899498).n,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>a({environment:e,store:t,viewType:"list"})},{name:i().A.formatMessage(n.timeline),type:"timeline",iconFn:o(679637).u,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>a({environment:e,store:t,viewType:"timeline"})},{name:i().A.formatMessage(n.calendar),type:"calendar",iconFn:o(348588).D,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>a({environment:e,store:t,viewType:"calendar"})},{name:i().A.formatMessage(n.gallery),type:"gallery",iconFn:o(598758).p,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>a({environment:e,store:t,viewType:"gallery"})}]},105373:(e,t,o)=>{o.d(t,{P:()=>a});var i=()=>o(758611),n=()=>o(865226);function a(e){const{environment:t}=e;n().oo({environment:t,url:i().JZ.marketplace,redirect:!1})}},144615:(e,t,o)=>{o.d(t,{TK:()=>l,YC:()=>r,ui:()=>a});var i=()=>o(129978);const n={pageVerification:new(i().O2)("pageVerification",(()=>Promise.all([o.e(43380),o.e(94891)]).then(o.bind(o,843097)))),pageVerificationBadge:new(i().O2)("pageVerificationBadge",(()=>Promise.all([o.e(96159),o.e(75134),o.e(43380),o.e(96346),o.e(36209),o.e(92845),o.e(71718),o.e(48486),o.e(83324),o.e(74562),o.e(18895),o.e(28866),o.e(59794),o.e(6463),o.e(96453),o.e(9353),o.e(84350),o.e(41412)]).then(o.bind(o,234102)))),pageVerificationMenuRenderer:new(i().O2)("pageVerificationMenuRenderer",(()=>Promise.all([o.e(96159),o.e(75134),o.e(43380),o.e(96346),o.e(36209),o.e(92845),o.e(71718),o.e(48486),o.e(83324),o.e(74562),o.e(18895),o.e(28866),o.e(59794),o.e(6463),o.e(96453),o.e(9353),o.e(84350),o.e(26207)]).then(o.bind(o,519873))))},a=(0,i()._h)(n.pageVerification,(e=>e.PageAddVerificationButton)),r=(0,i()._h)(n.pageVerificationBadge,(e=>e.PageVerificationBadge)),l=(0,i()._h)(n.pageVerificationMenuRenderer,(e=>e.PageVerificationMenuRenderer))},149528:(e,t,o)=>{o.r(t),o.d(t,{getMobilePreviewTemplates:()=>u,getSuggestedTemplatesForSearch:()=>p});o(403517);var i=()=>o(678716),n=()=>o(779470),a=()=>o(865226),r=()=>o(477784),l=()=>o(71927),s=()=>o(358920),c=()=>o(836331),d=()=>o(453469);function p(e){const{persona:t,environment:o}=e,i=r().A.getIntl();return(0,l().DC)(c().default,t).map((e=>{const t=(0,n().B)(e,i);return{name:t.name,icon:e.emoji||e.icon||void 0,onClick:()=>{(e=>{const t=(0,s().Up)({templateGalleryItem:e.rootId});a().oo({environment:o,url:t})})(t)}}}))}function u(e){const t=(0,d().un)(e);return(0,d().Iw)(e).map((e=>{const o=t[e];return{category:e,sectionHeaderMessage:i().bJ[e],templates:o}}))}},155342:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,questionMarkCircleIcon:()=>a});o(242343);var i=o(163643);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,i.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},a=(0,o(680369).wt)("questionMarkCircle",n)},155884:(e,t,o)=>{o.r(t),o.d(t,{applyUntypedFeature:()=>l});var i=()=>o(76394),n=()=>o(927999),a=()=>o(853527),r=()=>o(652690);function l(e){var t;const{environment:o,collectionStore:l,collectionViewBlockStore:s,feature:c,transaction:d}=e,p=c.dependencies,u=(null===(t=s.getFormat())||void 0===t?void 0:t.app_uri_map)??{};for(const m of p)if("property"===m.type)(0,r().Io)({environment:o,collectionStore:l,dependency:m,blockUriMap:u,allFeatures:a().d7,transaction:d});else if("collection_view"===m.type){const e=(0,r().ww)({environment:o,collectionStore:l,collectionViewBlockStore:s,dependency:m,blockUriMap:u,transaction:d});n().zA({stores:[s],update:{app_uri_map:e},transaction:d})}else(0,i().HB)(m)}},177856:(e,t,o)=>{o.r(t),o.d(t,{default:()=>H,getIconStyle:()=>F});o(362833),o(725707),o(491955),o(403517);var i=o(242343),n=()=>o(237385),a=()=>o(803290),r=()=>o(174114),l=()=>o(778417),s=()=>o(711361),c=()=>o(52223),d=()=>o(353509),p=()=>o(403026),u=()=>o(34662),m=()=>o(653998),g=()=>o(975392),f=()=>o(352211),y=()=>o(373122),v=()=>o(649334),h=()=>o(621214),S=()=>o(418861),k=()=>o(84543),b=()=>o(317697),w=()=>o(79040),x=()=>o(452981),C=()=>o(8519),P=()=>o(150968),I=()=>o(210562),M=()=>o(654548),A=()=>o(88442),_=()=>o(548694),T=()=>o(129978),B=()=>o(485966),j=()=>o(205670),V=()=>o(937968),E=()=>o(966789),D=()=>o(858023),W=()=>o(909440),R=()=>o(568344),L=o(163643);const N=(0,m().YK)({genericHelpMeWriteNewPage:{defaultMessage:"Write “{filter}” with AI…",id:"id.completions.genericHelpMeWriteNewPage"},genericHelpMeWriteNewPageEmpty:{defaultMessage:"Start writing with AI…",id:"id.completions.genericHelpMeWriteNewPageEmpty"},dictate:{defaultMessage:"Dictate",id:"id.dictate.dictateIntoNewPage"}});function K(e){let{menuListStore:t,sectionTitleStyle:o,handleTemplatePickerEmptyEnter:i,sectionsBeforeMobilePreviewSections:r,renderMobileTemplatePreviewItem:l}=e;const s=(0,a().K8)((()=>{var e;return null===(e=B().default.state.currentSpaceStore)||void 0===e?void 0:e.getSubscriptionTier()}),[]),c=(0,a().K8)((()=>(0,_().p3)().function),[]),d=(0,n().v3)(),p=(0,T().fJ)(x().Aw),u=(0,a().K8)((()=>{if(!p.value)return[];return p.value.templatePickerItems.getMobilePreviewTemplates({userPersona:c,subscriptionTier:s,environment:d}).map((e=>{let{category:t,sectionHeaderMessage:i,templates:n}=e;return{key:t,render:e=>(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{style:o,children:(0,L.jsx)(m().sA,{...i})}),e.children]},e.key),items:n.map(l)}}))}),[p.value,c,s,d,l,o]),g="pending"===p.status?(0,L.jsx)("div",{style:{marginTop:o.marginTop,marginBottom:o.marginBottom,paddingLeft:10},children:(0,L.jsx)(E().A,{})}):void 0;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(D().Ay,{type:D().Oh.Vertical,store:t,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onEmptyEnter:i,sections:[...r,...u]}),g]})}const H=function(e){let{store:t,menuListStore:i}=e;const r=(0,n().v3)(),l=(0,n().Y0)();(0,o(269280).l)((()=>{i.reset()}));const s=(0,a().K8)((()=>o(795756).A.getMode(r,t)),[r,t]),c=(0,a().O$)(o(802955).e),d=(0,a().K8)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(t)),[t]),p=(0,a().K8)((()=>t.getAssociatedCollectionStore()),[t]),m=(0,a().K8)((()=>p?p.getParentBlockStore():void 0),[p]),g=(0,a().K8)((()=>p?p.getTemplatePageStores():void 0),[p]),f=(0,a().K8)((()=>function(e){return e.isTemplate()}(t)),[t]),v=(0,a().K8)((()=>{const e=t.getAssociatedCollectionStore(),i=e&&e.getParentBlockStore();return(0,o(520852).v)({collectionStore:e,collectionViewBlockStore:i,checkNavigableAncestorLocked:!0})}),[t]),S=(0,a().K8)((()=>Boolean(null==m?void 0:m.isNonEditableState())),[m]);return c?(0,L.jsxs)("div",{children:[!d&&!l.isMobile&&(0,L.jsx)(Y,{store:t,menuListStore:i,publicEditMode:s}),!d&&l.isTablet&&(0,L.jsx)(Z,{store:t,menuListStore:i,publicEditMode:s}),d&&!f&&p&&m&&g&&g.length>0&&(0,L.jsx)(o(954373).D,{isOverlay:!1,collectionStore:p,canConfigureCollection:v,onTemplateClick:e=>function(e,t,o){k().createAndCommit({userAction:"TemplatePicker.handleCollectionTemplateClick",environment:o,canUndo:!0,perform:i=>{const n=t.getTitleValue();y().n5({title:""!==u().q4_(n)?{text:n}:"template",environment:o,store:t,templateStore:e.templateStore,isKeyboard:e.isKeyboard,isCreateIn:!1,transaction:i,from:"template_picker"})}})}(e,t,r),onEmptyEnter:()=>U(r),onEmptyPageClick:()=>function(e,t){k().createAndCommit({userAction:"TemplatePicker.handleTemplateEmptyPageClick",environment:t,canUndo:!0,perform:o=>{h().n({environment:t,store:e,transaction:o})}})}(t,r),locked:S})]}):null};function O(e,t){const{device:o}=e;return{...l().nE,marginTop:16,marginBottom:4,letterSpacing:0,fontSize:o.isMobile?12:13,color:t.text.tertiary,display:"flex",alignItems:"center",fontWeight:500}}function F(e,t){return e.isLargeDatabaseIcon?{width:16,fill:t.lightIconColor,marginLeft:2,marginRight:12}:{width:20,fill:t.lightIconColor,marginRight:10}}function U(e){const t=j().default.state;(0,V().EF)(e)&&"editing"===t.mode&&(k().createAndCommit({userAction:"TemplatePicker.handleTemplatePickerEmptyEnter",environment:e,canUndo:!0,perform:o=>{S().Ve({environment:e,editorMode:"default",transaction:o,multiSelection:t.multiSelection})}}),f().ki(e,{is_keyboard:!0,from:"template_picker",template_type:"empty_page"}))}function z(e,t,o,i){return!!e.device.isMobile&&((0,A().ZE)(i)&&t.focused&&(0,c().K)({width:14,marginRight:6,fill:o.lightIconColor}))}function J(e,t,o,n,a){return{key:e.name,render:n=>{var r;let{ref:l,...s}=n;return(0,i.createElement)(R().J,{...s,key:e.name,format:"page-menu-item",title:e.name,type:e.type,icon:null===(r=e.iconFn)||void 0===r?void 0:r.call(e,F(e,o)),locked:!1,right:z(t,s,o,a)})},action:o=>{(0,V().EF)(t)&&(f().ki(t,{is_keyboard:"keydown"===o.event.type,from:"template_picker",template_type:e.type}),e.onClick(t,n))}}}function Z(e){let{store:t,menuListStore:o,publicEditMode:a}=e;const l=(0,r().DP)(),s=(0,n().v3)(),c=(0,i.useCallback)((e=>J(e,s,l,t,a)),[s,l,t,a]),d=[{key:"Basic",render:e=>(0,L.jsx)("div",{children:e.children},e.key),items:W().dB.map(c)},{key:"Database",render:e=>(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{style:O(s,l),children:(0,L.jsx)(m().sA,{defaultMessage:"Database",id:"templatePicker.mobileTemplatePicker.databaseTemplateSection.label"})}),e.children]},e.key),items:w()._.filter((e=>e.shouldShow(s))).map(c)}];return(0,L.jsx)(K,{menuListStore:o,sectionTitleStyle:O(s,l),handleTemplatePickerEmptyEnter:()=>U(s),sectionsBeforeMobilePreviewSections:d,renderMobileTemplatePreviewItem:e=>function(e,t){return{key:e.name,render:t=>{let{ref:o,...n}=t;return(0,i.createElement)(R().J,{...n,key:e.name,title:e.name,type:"page_template",format:"page-menu-item",locked:!1})},action:()=>{v().openWithItem({environment:t,item:e,createNewPage:!1,isPrivate:!1,disablePointerEvents:!1})}}}(e,s)})}function $(e,t,o,n,a,r,l){const c=(0,W().F1)(w()._,["table"]),d=g().FF(w()._,...c),p=!r&&d.length>0?function(e,t,o,n,a){return{key:e,render:o=>{let{ref:r,...l}=o;return(0,i.createElement)(R().J,{...l,key:e,format:"page-menu-item",title:(0,L.jsx)(m().sA,{defaultMessage:"More",id:"templatePicker.more.label"}),type:"more",icon:(0,s()._)({width:20,fill:n.lightIconColor,marginRight:10}),locked:!1,right:z(t,l,n,a)})},action:()=>o(!0)}}("moreNew",t,l,o,a):null,u=[W().zD,e?W().Wt:W().vP,...c,...p?[]:d].filter((e=>e.shouldShow(t))).map((e=>J(e,t,o,n,a)));return p?u.concat(p):u}function Y(e){let{store:t,menuListStore:o,publicEditMode:l}=e;const s=(0,m().tz)(),c=(0,r().DP)(),u=(0,n().v3)(),g=(0,a().K8)((()=>I().gZ.state&&I().Di.state===t.id),[t]),[f,y]=(0,i.useState)(!1),v=(0,a().K8)((()=>(0,A().ZE)(l)),[l]),S=(0,a().K8)((()=>(0,P().h)()),[]),w=(0,a().K8)((()=>0===t.getContentLength()),[t])?[J(W().wL,u,c,t,l)]:[],x=$(v,u,c,t,l,f,y),_=(0,a().K8)((()=>t.getTitleValue()),[t]),T=[];if(v){const e=function(e,t,o,n,a,r){return{key:"ask ai",render:a=>{let{ref:l,...s}=a;const c=e.replace(/(\r\n|\n|\r)/gm," "),d=c.length>30?`${c.slice(0,30)}…`:c;return(0,i.createElement)(R().J,{...s,key:"genericHelpMeWriteNewPageWithAI",format:"page-menu-item",title:c?n.formatMessage(N.genericHelpMeWriteNewPage,{filter:d}):n.formatMessage(N.genericHelpMeWriteNewPageEmpty),type:"ai",icon:(0,L.jsx)("div",{style:{height:24,width:24,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",marginRight:4},children:(0,p().X)({width:16,height:16,fill:"dark"===o.mode?o.accentColors.purple[700]:o.accentColors.purple[400]})}),locked:!1,right:z(t,s,o,r)})},action:()=>{k().createAndCommit({userAction:"TemplatePicker.genericHelpMeWriteNewPageWithAI",environment:t,canUndo:!0,perform:o=>{h().n({environment:t,store:a,transaction:o,preventTextSelection:!1,onTextSelection(){(0,b().openHelpMeWriteGenericPopup)({environment:t,title:e})}})}})}}}((0,M().r4)(_,t).trim(),u,c,s,t,l);T.push(e)}if(S){const e=function(e,t,o,n,a){return{key:"dictate",render:n=>{let{ref:r,...l}=n;return(0,i.createElement)(R().J,{...l,key:"dictateNewPage",format:"page-menu-item",title:o.formatMessage(N.dictate),type:"dictation",icon:(0,L.jsx)("div",{style:{height:24,width:24,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",marginRight:4},children:(0,d().E)({width:16,height:16,fill:"dark"===t.mode?t.accentColors.red[700]:t.accentColors.red[400]})}),locked:!1,right:z(e,l,t,a)})},action:async()=>{const{dictationActions:t}=await C().$O.load();t.startDictation({environment:e,blockStore:n,from:"template_picker",includeSystemAudio:!1})}}}(u,c,s,t,l);T.push(e)}return g?null:(0,L.jsx)(D().Ay,{type:D().Oh.Horizontal,store:o,disableInitialScroll:!0,disableCommandEnter:!0,isEnterOnHoverEmpty:!0,initialFocus:void 0,disableKeyboard:!0,onEmptyEnter:()=>U(u),sections:[{key:"Basic",render:e=>(0,L.jsx)("div",{children:e.children},e.key),items:[...w,...T]},{key:"Add new",render:e=>(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{style:O(u,c),children:(0,L.jsx)(m().sA,{defaultMessage:"Add new",id:"templatePicker.add new.label"})}),e.children]},e.key),items:x}]})}},178063:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,plusIcon:()=>n});o(242343);const i={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M10 3.59a.66.66 0 0 1 .66.66v5.09h5.09a.66.66 0 0 1 0 1.32h-5.09v5.09a.66.66 0 0 1-1.32 0v-5.09H4.25a.66.66 0 0 1 0-1.32h5.09V4.25a.66.66 0 0 1 .66-.66"})},n=(0,o(680369).wt)("plus",i)},200524:(e,t,o)=>{function i(e,t){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}o.d(t,{_:()=>i})},202193:(e,t,o)=>{o.d(t,{Qo:()=>l,hu:()=>s,k9:()=>a,nE:()=>r});var i=()=>o(555919),n=()=>o(654548);const a=(0,o(653998).YK)({titlePlaceholder:{defaultMessage:"Untitled",id:"database.source.titlePlaceholder"},newTitlePlaceholder:{defaultMessage:"New database",id:"database.source.newTitlePlaceholder"},actionsButtonAriaLabel:{defaultMessage:"Collection actions",id:"database.source.actionsButtonAriaLabel"}});function r(e){let{intl:t,isDBUXChromeEnabled:o,isWorkflowsAppContainerEnabled:i,collectionStore:n}=e;var r;return i?t.formatMessage(o?a.newTitlePlaceholder:a.titlePlaceholder):(null==n||null===(r=n.getModel())||void 0===r?void 0:r.getEmptyTitlePlaceholder({intl:t,isWorkflowsAppContainerEnabled:i}))||t.formatMessage(a.titlePlaceholder)}function l(e){let{collectionStore:t,intl:o,isDBUXChromeEnabled:i,isWorkflowsAppContainerEnabled:n}=e;return t.getName()??[[r({intl:o,isDBUXChromeEnabled:i,isWorkflowsAppContainerEnabled:n,collectionStore:t})]]}function s(e){let{collectionStore:t,intl:o,isDBUXChromeEnabled:a,isWorkflowsAppContainerEnabled:l}=e;return null!=t&&t.isDefined()?(0,n().r4)(t.getName(),t)||r({intl:o,isDBUXChromeEnabled:a,isWorkflowsAppContainerEnabled:l,collectionStore:t}):(0,i().L)(o)}},224281:(e,t,o)=>{o.d(t,{Jv:()=>h,Zr:()=>S,Rl:()=>k,mA:()=>v});var i=o(242343),n=()=>o(237385),a=()=>o(803290),r=()=>o(174114),l=()=>o(564134),s=()=>o(916963),c=()=>o(88442),d=()=>o(136239),p=()=>o(622286),u=()=>o(966789),m=o(163643);function g(){const e=(0,r().DP)();return(0,m.jsx)("span",{style:{marginLeft:6,fontSize:11,padding:"1px 4px",borderRadius:4,display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1,color:"light"===e.mode?e.accentColors.blue[500]:e.accentColors.blue[600]},children:(0,m.jsx)(u().A,{legacySize:14})})}var f=()=>o(870896);const y=function(){return(0,m.jsx)(o(695951).A,{color:"purple",style:{marginLeft:6,padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1},content:(0,m.jsx)(o(653998).sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})};const v=i.memo((function(e){const{propertySchema:t,showIcon:i,showDragIcon:a,hideName:l,badge:s,style:c,iconStyle:p,iconSize:u,dragHandleStyle:g,className:f,labelSizeVariant:y}=e,v=(0,n().v3)(),{device:h}=v,S=h.isMobile?16:14,b=(0,r().IS)((e=>({container:{display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0,fontSize:S,...c},iconWrapper:{display:"grid",justifyContent:"center",alignItems:"center",marginRight:l?void 0:"small"===y||a?4:6,...p},dragHandle:{gridColumn:1,gridRow:1,opacity:a?1:0,transition:`opacity ${d().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:a?0:1,transition:`opacity ${d().bM}`},dragIcon:{fill:e.icon.secondary}})),[S,l,p,y,a,c]);return(0,m.jsxs)("div",{className:f,style:b.container,children:[i&&(0,m.jsxs)("div",{style:b.iconWrapper,children:[(0,m.jsx)("div",{style:b.itemIcon,children:(0,m.jsx)(k,{propertySchema:t,iconSize:u,iconStyle:p})}),(0,m.jsx)("div",{style:b.dragHandle,children:(0,m.jsx)(o(369515).A,{style:g,iconSize:12,iconStyle:b.dragIcon})})]}),!l&&(0,m.jsx)("div",{style:{...o(31448).RC},children:t.name}),s]})}));function h(e){const{propertySchema:t}=e,o=(0,n().v3)();return(0,a().K8)((()=>(0,c().O0)(o)&&l().$M(t)&&l().om(t)),[o,t])?(0,m.jsx)(y,{}):null}function S(e){let{propertyId:t,collectionContextStore:o}=e;return(0,a().K8)((()=>{var e;const i=null===(e=o.collectionStore())||void 0===e?void 0:e.id;if(!i)return!1;const n=f().d.state.collectionsProperties[i];return!!n&&"Loading"===n[t]}),[o,t])?(0,m.jsx)(g,{}):null}function k(e){const{propertySchema:t,iconSize:o,iconStyle:i}=e,{isMobile:a}=(0,n().Y0)(),l=(0,r().DP)(),c=(0,p().X)("nds_default_property_noticon"),d=a?18:16;return(0,m.jsx)(s().zB,{type:t.type,icon:t.icon,size:o||d,theme:l,style:i,isDefaultNoticonEnabled:c})}},229419:(e,t,o)=>{o.d(t,{C8:()=>u,Dz:()=>s,GC:()=>g,GL:()=>f,YY:()=>m,dM:()=>d,h9:()=>c,jX:()=>l,oF:()=>p,uj:()=>r});var i=()=>o(129978);const n={JiraSyncInfoPopup:new(i().O2)("JiraSyncInfoPopup",(async()=>await Promise.all([o.e(75134),o.e(68744)]).then(o.bind(o,917262)))),ImproveJiraSyncPopup:new(i().O2)("ImproveJiraSyncPopup",(async()=>await Promise.all([o.e(75134),o.e(2686)]).then(o.bind(o,800444)))),JiraDCAuthModal:new(i().O2)("JiraDCAuthModal",(async()=>await o.e(28763).then(o.bind(o,114124)))),ExternalImportAndSyncIndicator:new(i().O2)("ExternalImportAndSyncIndicator",(async()=>await o.e(98288).then(o.bind(o,988714)))),JiraSyncedAllProjectsTooltip:new(i().O2)("JiraSyncedAllProjectsTooltip",(async()=>await o.e(21446).then(o.bind(o,374415)))),JiraSyncedAllIssuesTooltip:new(i().O2)("JiraSyncedAllIssuesTooltip",(async()=>await o.e(21446).then(o.bind(o,374415)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(i().O2)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await o.e(21446).then(o.bind(o,374415)))),JiraSyncSourceTooltip:new(i().O2)("JiraSyncSourceTooltip",(async()=>await o.e(21446).then(o.bind(o,374415)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(i().O2)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await o.e(21446).then(o.bind(o,374415))))},a={JiraSyncTeamSpaceModal:new(i().O2)("JiraSyncTeamSpaceModal",(async()=>Promise.all([o.e(96159),o.e(56188)]).then(o.bind(o,35705))))},r=(0,i()._h)(a.JiraSyncTeamSpaceModal,(e=>e.default)),l=(0,i()._h)(n.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),s=(0,i()._h)(n.JiraDCAuthModal,(e=>e.default)),c=(0,i()._h)(n.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),d=(0,i()._h)(n.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),p=(0,i()._h)(n.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),u=(0,i()._h)(n.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),m=(0,i()._h)(n.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),g=(0,i()._h)(n.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),f=(0,i()._h)(n.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,o(680369).xh)("jira",{default:{loader:()=>o.e(60677).then(o.bind(o,832398)),size:20},small:{loader:()=>o.e(60677).then(o.bind(o,832398)),size:16},mini:{loader:()=>o.e(60677).then(o.bind(o,832398)),size:14},large:{loader:()=>o.e(60677).then(o.bind(o,832398)),size:24}})},242333:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(129044))().default{getInitialState(){return{flowId:void 0}}getOrCreateFlowId(){const e=this.state.flowId||o(214144).JW();return this.state.flowId&&this.setState({flowId:e}),e}}const n=new i},254225:(e,t,o)=>{o.d(t,{z:()=>a});var i=()=>o(129978);const n=new(i().O2)("topbarSidebarButton",(async()=>await o.e(62033).then(o.bind(o,660887)))),a=(0,i()._h)(n,(e=>e.TopbarSidebarButton))},255403:(e,t,o)=>{o.r(t),o.d(t,{AppInitializationOverlay:()=>L});o(725707),o(491955),o(500234),o(771702),o(403517);var i=o(242343),n=()=>o(16791),a=()=>o(237385),r=()=>o(803290),l=()=>o(174114),s=()=>o(566342),c=()=>o(193135),d=()=>o(692844),p=()=>o(145017),u=()=>o(528762),m=()=>o(218357),g=()=>o(653998),f=()=>o(31448),y=()=>o(137476),v=()=>o(836331);var h=()=>o(649334),S=()=>o(84543),k=()=>o(527120),b=()=>o(402643),w=()=>o(414997),x=()=>o(936256),C=()=>o(283759),P=()=>o(254225),I=()=>o(782422),M=()=>o(48913),A=()=>o(485966),_=()=>o(797470),T=()=>o(413871),B=()=>o(126451),j=()=>o(826033),V=()=>o(762436),E=()=>o(966789),D=()=>o(951540),W=()=>o(518471),R=o(163643);function L(e){var t;const{collectionViewBlockStore:o}=e,L=(0,a().v3)(),{isMobile:N}=(0,a().Y0)(),K=(0,r().K8)((()=>({top:L.WindowSizeStore.getSafePaddingTopPx(0),bottom:L.WindowSizeStore.getSafePaddingBottomPx(64)})),[L.WindowSizeStore]),H=(0,l().IS)((e=>({overlay:{position:"absolute",top:0,left:0,overflow:"visible",height:"100vh",width:"100%",zIndex:999,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:e.surface.wash,borderLeft:`1px solid ${e.lightDividerColor}`},welcome:{maxWidth:375,minWidth:320,maxHeight:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",marginLeft:N?void 0:"10%",marginRight:N?void 0:"10%",padding:N?`${K.top}px 16px ${K.bottom}px 16px`:"64px 16px"},welcomeLogo:{height:48,width:48},welcomeTitle:{marginTop:24,color:e.text.primary,fontFamily:f().xf({locale:n().locale}),fontWeight:f().Wy.bold,fontSize:28,flex:0,display:"flex",flexDirection:"row",alignItems:"center"},welcomeSubtitle:{marginTop:6,fontSize:18,color:e.text.secondary,fontWeight:400,flex:0},presets:{marginTop:32,marginBottom:32,gap:12,display:"flex",flexDirection:"column"},presetSelected:{background:"dark"===e.mode?e.popoverBackground:e.buttonBackground,boxShadow:e.outlineBlueInputBoxShadow},presetSelectedCheckmark:{width:24,height:24,color:e.blueButtonBackground,opacity:0,transform:"scale(0.8)",transition:"all 0.2s ease"},presetSelectedCheckmarkShown:{opacity:1,transform:"scale(1)"},preset:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",padding:"16px 14px 16px 16px",background:"dark"===e.mode?e.accentColors.gray[200]:e.buttonBackground,borderRadius:7,boxShadow:e.elevatedButtonBoxShadow,cursor:"pointer",transition:"box-shadow 0.1s ease, background 0.1s ease"},scroller:{overflow:"auto",padding:4},presetHovered:{background:"dark"===e.mode?e.accentColors.gray[200]:e.accentColors.gray[30]},presetTextContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",flex:1},presetIcon:{flexShrink:0,marginTop:2,marginBottom:2,width:20,height:20,marginRight:12},presetTitle:{color:e.text.primary,fontWeight:f().Wy.medium,fontSize:14,marginBottom:1},presetSubtitle:{color:e.text.secondary,fontWeight:f().Wy.regular,fontSize:14},previewContainer:{flex:1,overflow:"auto",height:"70%",borderRadius:"8px 0 0 8px",border:e.lightDividerColor,boxShadow:e.shadowMD,background:e.popoverBackground},previewImage:{width:"100%",height:"100%"},hamburgerButton:{position:"absolute",zIndex:1e3,margin:5}})),[N,K]),[O,F]=i.useState(!1),U=(0,r().O$)(A().AppStoreCurrentSpaceViewStore),z=(0,r().K8)((()=>{const e=o.getFormatStore().getKeyStore("app_config_uri").getValue();if(!e)return;return(0,C().yl)((0,w().appConfigs)(),e)}),[o]),[J,Z]=i.useState(void 0);i.useEffect((()=>{Z(o.getFormatStore().getKeyStore("app_template_preset").getValue())}),[o,Z]);const $=(0,r().K8)((()=>{var e;return(null==z||null===(e=z.presets)||void 0===e?void 0:e.filter((e=>"core"===e.type)))??[]}),[null==z?void 0:z.presets]),[Y,G]=i.useState(J);i.useEffect((()=>{G(J)}),[J,G]),i.useEffect((()=>{z&&function(e,t){y().vd(e,"app_preset_selection_shown",t),v().default.logEvent("app_preset_selection_shown",t.app_uri,t)}(L,{app_uri:z.uri})}),[z,L]);const X=i.useMemo((()=>null==z?void 0:z.presets.find((e=>e.uri===J))),[z,J]),q=i.useMemo((()=>{if(z&&X&&z.uri===s().xc)return(0,x().xh)(X)}),[z,X]),Q=i.useMemo((()=>{if(!z)return;const t={};return z.presets.forEach((o=>{var i;const n=z.uri===s().xc?(0,x().xh)(o):null===(i=o.previews)||void 0===i?void 0:i.find((e=>"previewRootId"in e));n&&(t[o.uri]=T().Bv.createChildStore(e.collectionViewBlockStore,{id:n.previewRootId,table:p().ev,spaceId:n.spaceId}))})),t}),[z,e.collectionViewBlockStore]),ee=(0,r().K8)((()=>{const e=(0,I().F8)(L);return{left:e,right:e,bottom:(0,W().Wj)(L),coverHeight:(0,W().Qs)(L)}}),[L]),te=(0,r().K8)((()=>{var e;const t=null==X||null===(e=X.previews)||void 0===e?void 0:e.find((e=>"url"in e&&!(0,c().L_)(e)));if(t&&"url"in t)return t.url}),[null==X?void 0:X.previews]),oe=(0,a().WS)(),ie=(0,r().K8)((()=>!!L.device.isMobileBrowser||!L.device.isMobileNative&&!(0,M().KB)(L)),[L]);return i.useEffect((()=>{"rendered"!==A().default.state.renderPhase&&A().default.setState({...A().default.state,renderPhase:"rendered"})}),[]),z?(0,R.jsxs)(V().U,{calloutId:"better_template_initialization",children:[ie&&(0,R.jsx)("div",{style:H.hamburgerButton,children:(0,R.jsx)(P().z,{})}),(0,R.jsxs)("div",{style:H.overlay,children:[(0,R.jsxs)("div",{style:H.welcome,children:[(0,R.jsxs)("div",{style:H.scroller,children:[(0,R.jsx)("div",{style:H.welcomeLogo,children:(0,R.jsx)("img",{src:z.logo,style:{height:"100%",width:"100%"}})}),(0,R.jsx)("div",{style:H.welcomeTitle,children:z.welcomeTitle??(0,R.jsx)(g().sA,{id:"apps.AppInitializationOverlay.welcomeTitle.default",defaultMessage:"Welcome to {appName}",values:{appName:z.name}})}),(0,R.jsx)("div",{style:H.welcomeSubtitle,children:z.welcomeSubtitle??""}),(0,R.jsx)("div",{style:H.presets,children:$.map(((e,t)=>{var o;const i=null!==(o=e.icon)&&void 0!==o&&o.startsWith("/")?(0,R.jsx)("img",{src:e.icon,style:{height:"100%",width:"100%"}}):(0,R.jsx)(j().A,{children:e.icon??""});return(0,R.jsxs)(B().A,{style:{height:"auto",...H.preset,...J===e.uri?H.presetSelected:{}},disabled:O,hoveredStyle:H.presetHovered,onClick:()=>{Z(e.uri),function(e,t){y().vd(e,"app_preset_selection",t),v().default.logEvent("app_preset_selection",t.preset_uri,t)}(L,{preset_uri:e.uri})},onMouseEnter:L.device.isMobile?void 0:()=>G(e.uri),onMouseLeave:L.device.isMobile?void 0:()=>G(J),children:[(0,R.jsx)("div",{style:H.presetIcon,children:i}),(0,R.jsxs)("div",{style:H.presetTextContainer,children:[(0,R.jsx)("div",{style:H.presetTitle,children:e.name}),(0,R.jsx)("div",{style:H.presetSubtitle,children:e.description})]}),(0,R.jsx)("div",{children:(0,d().$)({...H.presetSelectedCheckmark,...J===e.uri?H.presetSelectedCheckmarkShown:void 0})})]},t)}))})]}),(0,R.jsx)("div",{style:{padding:`0 4px ${L.device.isIOS?"32px":0} 4px`,alignSelf:"stretch"},children:(0,R.jsxs)(D().A,{style:{alignSelf:"stretch",height:36,width:"100%"},disabled:O,onClick:async()=>{if(J){if(F(!0),q){const{currentSpaceStore:t,currentSpaceViewStore:o}=A().default.state;t&&o&&await h().loadAndDuplicatePageTemplate({environment:L,item:q,isPrivate:!1,spaceStore:t,spaceViewStore:o,useMinimalTemplates:!1,initializeStore:e.collectionViewBlockStore})}else{const t=e.collectionViewBlockStore.getParentStore();!t||t.table!==u().NX&&t.table!==m().yK&&t.table!==p().ev||S().createAndCommit({userAction:"initializeApp",environment:L,canUndo:!0,perform:o=>{if(U){const i=k().initializeApp({environment:L,spaceViewStore:U,appUri:z.uri,presetUri:J,appParentStore:t,temporaryContainerBlockStore:e.collectionViewBlockStore,transaction:o,from:"app_onboarding"});k().markTasksDatabaseTemplateIfNeeded(i),b().createSprintPage({environment:L,spaceViewStore:U,appParentStore:t,transaction:o,blockStores:i,creationEntryPoint:{type:"preset",presetUri:J}})}}})}!function(e,t){y().vd(e,"app_preset_accepted",t),v().default.logEvent("app_preset_accepted",t.preset_uri,t)}(L,{preset_uri:J})}},children:[(0,R.jsx)(g().sA,{id:"apps.AppInitializationOverlay.startButton",defaultMessage:"Get started"}),O&&(0,R.jsx)(E().A,{style:{marginLeft:5},onDarkBackground:!0})]})})]}),!oe&&(0,R.jsx)("div",{style:H.previewContainer,children:Q&&Y&&Q[Y]?(0,R.jsxs)("div",{style:{width:"108%",minWidth:900,height:"auto",minHeight:"100%",position:"relative",paddingTop:q?0:"10%"},children:[(0,R.jsx)("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:1,zIndex:999}}),(0,R.jsx)(W().Ay,{store:Q[Y],context:_().Rr.InAppTemplatePreview,titleStyle:{fontSize:28},paddingBottom:ee.bottom,disabled:!0},null===(t=Q[Y])||void 0===t?void 0:t.id)]}):(0,R.jsx)("img",{src:te,style:H.previewImage})})]})]}):null}},265516:(e,t,o)=>{o.d(t,{Q:()=>i,a:()=>n});let i=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class n extends(()=>o(129044))().default{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},267439:(e,t,o)=>{o.d(t,{c:()=>h,t:()=>S});o(610931);var i=()=>o(752597),n=()=>o(220574),a=()=>o(34662),r=()=>o(197881),l=()=>o(415029),s=()=>o(448316),c=()=>o(84543),d=()=>o(868068),p=()=>o(900921),u=()=>o(477784),m=()=>o(593745),g=()=>o(485966),f=()=>o(836331),y=()=>o(134915);const v=(0,o(653998).YK)({formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}});function h(e){var t,o,a;const{environment:c,store:u,viewType:v,transaction:h}=e,S=null===(t=u.getBlockTitleStore())||void 0===t?void 0:t.getValue();f().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&y().A.state.open&&y().A.setState({open:!1});const k=u.getSpaceId()??(null===(o=g().default.state.currentSpaceStore)||void 0===o?void 0:o.id)??(null===(a=g().default.state.mainEditorCurrentBlockStore)||void 0===a?void 0:a.getSpaceId()),b=k?c.idCreator.getSpaceIdCreatorSync(k):void 0;l().j({environment:c,sourceBlockId:"root",targetBlockPointer:u.pointer,sourceBlockSubtree:(0,n().partialRecordMapToRecordMap)((0,p().qP)({isInline:!1,viewType:v})),targetRecordCache:u.inMemoryRecordCache,transaction:h,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:b}),d().pd({environment:c,block:u,blockType:"collection_view_page",transaction:h}),S&&s().R9({environment:c,store:u.getBlockTitleStore(),value:S,transaction:h}),i().default.afterNextFlush((()=>{const e=m().K.findCollectionViewBlockFromStore(u);var t;e&&"handleCreated"in e&&(null===(t=e.handleCreated)||void 0===t||t.call(e))})),r().v(c,{from:"template_picker",type:"collection_view_page",creating_block_id:u.id,is_full_screen:!0,view_type:v})}async function S(e){var t,i,s;const{environment:m,store:f}=e,y=null===(t=f.getBlockTitleStore())||void 0===t?void 0:t.getValue(),{formsEditorDependency:h}=await Promise.resolve().then(o.bind(o,108665)),{formEditorActions:S}=await h.load(),k=f.getSpaceId()??(null===(i=g().default.state.currentSpaceStore)||void 0===i?void 0:i.id)??(null===(s=g().default.state.mainEditorCurrentBlockStore)||void 0===s?void 0:s.getSpaceId()),b=k?m.idCreator.getSpaceIdCreatorSync(k):void 0;c().createAndCommit({userAction:"HorizontalTemplatePicker.createForm",environment:m,canUndo:!0,perform:e=>{var t;l().j({environment:m,sourceBlockId:"root",targetBlockPointer:f.pointer,sourceBlockSubtree:(0,n().partialRecordMapToRecordMap)((0,p().mT)({isInline:!1,name:(0,a().w9s)(y)?(0,a().x9d)(u().A.formatMessage(v.formDatabaseTitle)):y})),targetRecordCache:f.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:b}),d().pd({environment:m,block:f,blockType:"collection_view_page",transaction:e});const o=f.getCollectionStore(),i=null==o||null===(t=o.getModel())||void 0===t?void 0:t.getNormalizedSchema(),s=f;if(!i)throw new Error("Schema not found");const c=S.createCollectionFormEditorView({environment:m,transaction:e,collectionViewBlockStore:s,schema:i,initializeWithAllDefaultQuestions:!0});S.createResponsesCollectionView({environment:m,transaction:e,collectionViewBlockStore:s,schema:i}),r().v(m,{from:"template_picker",type:"form",creating_block_id:f.pointer.id,form_id:null==c?void 0:c.formId,view_id:s.id})}})}},276647:(e,t,o)=>{o.d(t,{o:()=>a});var i=o(242343),n=o(163643);const a=i.forwardRef((function(e,t){let{color:i="primary",...a}=e;const r=(0,o(174114).IS)((e=>{const t="blue"===i?o(220413).Ay.blue:"secondary"===i?e.text.secondary:e.text.primary;return{title:{color:t,fill:t},buttonMenuItem:{...a.style,...a.disabled?{cursor:"not-allowed"}:{}}}}),[a.disabled,i,a.style]);return(0,n.jsx)(o(535906).A,{ref:t,...a,title:(0,n.jsx)("div",{style:r.title,children:a.title}),icon:(0,n.jsx)(o(397791).I,{icon:o(178063).plusIcon,style:{fill:i}}),style:r.buttonMenuItem})}))},317697:(e,t,o)=>{o.r(t),o.d(t,{closeInitialPromptAndEndSession:()=>P,closeInitialPromptButContinueSession:()=>I,openHelpMeWriteGenericPopup:()=>_,retryInitialPrompt:()=>C,showInitialPromptForAIBlock:()=>M,toggleInitialPrompt:()=>A});var i=()=>o(752597),n=()=>o(906066),a=()=>o(214144),r=()=>o(76394),l=()=>o(469880),s=()=>o(818369),c=()=>o(384221),d=()=>o(617643),p=()=>o(88442),u=()=>o(621641),m=()=>o(112892),g=()=>o(485966),f=()=>o(840024),y=()=>o(368330),v=()=>o(471370),h=()=>o(836331),S=()=>o(182613),k=()=>o(205670),b=()=>o(715716),w=()=>o(759139);function x(e,t){if((0,w().Ku)(e),!("completionPopup"!==t.type&&"assistantCompletionPopup"!==t.type||"results"!==t.stage&&"initialPrompt"!==t.stage||"textSelection"!==t.context.type&&"cursor"!==t.context.type)){const e=t.context.textSelection;i().default.afterNextFlush((()=>c().setMultiSelection({multiSelection:e})))}}function C(e){v().default.invalidateLastUpdater();const{environment:t}=e,{state:o}=v().default;if("completionPopup"!==o.type||"results"!==o.stage)return;t.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(o.inMemoryRecordCache);const i={type:"completionPopup",stage:"initialPrompt",prefilledValue:"",context:o.context,aiSessionId:o.aiSessionId,from:o.from,futureRevisions:[...o.revisions,...o.futureRevisions]};v().default.setState(i)}function P(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&x(e,v().default.state),v().default.setState({type:"closed"})}function I(e){const{state:t}=v().default;x(e,t),"completionPopup"===t.type&&"initialPrompt"===t.stage&&v().default.setState({type:"closedWithContext",context:t.context,aiSessionId:t.aiSessionId,futureRevisions:t.futureRevisions}),setTimeout((()=>{"closedWithContext"===v().default.state.type&&v().default.reset()}),1)}function M(e){v().default.setState({...e,type:"completionPopup",stage:"initialPromptForAIBlock",from:"ai_block",prefilledValue:"",aiSessionId:a().JW()}),T({environment:e.environment,promptForAnalytics:e.clientPrompt})}async function A(e){const{environment:t,from:i}=e;let{context:a,prefilledValue:r,sessionId:l}=e;const{assistantDependency:c}=await Promise.resolve().then(o.bind(o,193302)),p=await c.load();if(!(await p.assistantMenuActions.closeAssistantRightHandSideMenu({environment:t})))return;let m={type:"closed"};if("closed"===v().default.state.type||"closedWithContext"===v().default.state.type){if(!a&&S().default.state.stores.length>0){const e=k().default.state;a="empty"===e.mode?(0,d().RH)():(0,u().kM)(e.multiSelection)?(0,d().gu)():(0,d().rs)()}a&&(r||(r=""),l||(l=(0,n().gC)()),m=f().zD.isAssistantInWriterEnabled()?{type:"assistantCompletionPopup",stage:"initialPrompt",context:a,from:i,prefilledValue:r,sessionId:l,loading:!1,hasErrored:!1}:{type:"completionPopup",stage:"initialPrompt",context:a,from:i,prefilledValue:r,aiSessionId:l,futureRevisions:[]},g().default.state.currentSpaceStore&&s().callApi({eventName:"publishAiSession",environment:t,data:{inference_type:"writer",spaceId:g().default.state.currentSpaceStore.id,id:"assistantCompletionPopup"===m.type?l:m.aiSessionId,metadata:{from:i}}}),"spacebar"===i&&(0,b().onSpaceForAiTriggered)(t))}v().default.setState(m),T(e)}function _(e){const{title:t,environment:o,prefilledValue:i,from:n}=e,l=(0,d().gu)();if(!l)return;let s;if((0,r().O9)(t)){const e=t?(0,p().gB)({customPrompt:i??t,isPageEmpty:!0}):p().am;s={promptForAnalytics:e,prefilledValue:(0,d().oW)(e)}}else s={prefilledValue:i,promptForAnalytics:void 0};A({environment:o,from:n??"page_menu",sessionId:a().JW(),context:l,...s})}function T(e){const{environment:t,promptForAnalytics:o}=e,{state:i}=v().default;if(("completionPopup"===i.type||"assistantCompletionPopup"===i.type)&&"results"!==i.stage){"initialPromptForAIBlock"===i.stage||h().default.checkGate({gateName:"mobile_assistant_prevent_clear_selection"})||c().clear({environment:t});const e="assistantCompletionPopup"===i.type?i.sessionId:i.aiSessionId,n=y().default.getSessionContext(e);l().g0(t,{session_id:"assistantCompletionPopup"===i.type?i.sessionId:i.aiSessionId,prompt_key:(null==o?void 0:o.key)??("completionPopup"!==i.type||i.prefilledValue?"unknown":"alternative_ui_empty_input"),from:i.from,sessionContext:n}),m().VN({dismissed:!1,environment:t})}}},333212:(e,t,o)=>{o.d(t,{Lq:()=>i,WK:()=>a,nh:()=>n});const i=40,n=48,a=60},353509:(e,t,o)=>{o.d(t,{E:()=>n});o(242343);var i=o(163643);const n=(0,o(680369).wt)("microphone",{viewBox:"0 0 17 25",svg:(0,i.jsx)("path",{d:"M0.20752 12.0743C0.20752 13.5496 0.511882 14.853 1.12061 15.9845C1.72933 17.116 2.57438 18.0219 3.65576 18.7023C4.73714 19.3826 5.98324 19.7908 7.39404 19.9269V22.129H3.45166C3.17236 22.129 2.93245 22.2257 2.73193 22.4191C2.53141 22.6196 2.43115 22.8595 2.43115 23.1388C2.43115 23.4109 2.53141 23.6437 2.73193 23.837C2.93245 24.0376 3.17236 24.1378 3.45166 24.1378H13.313C13.5923 24.1378 13.8322 24.0376 14.0327 23.837C14.2332 23.6437 14.3335 23.4109 14.3335 23.1388C14.3335 22.8595 14.2332 22.6196 14.0327 22.4191C13.8322 22.2257 13.5923 22.129 13.313 22.129H9.37061V19.9269C10.7814 19.7908 12.0239 19.3826 13.0981 18.7023C14.1795 18.0219 15.0246 17.116 15.6333 15.9845C16.242 14.853 16.5464 13.5496 16.5464 12.0743V9.94739C16.5464 9.66809 16.4461 9.43176 16.2456 9.2384C16.0522 9.04504 15.8159 8.94836 15.5366 8.94836C15.2573 8.94836 15.0174 9.04504 14.8169 9.2384C14.6164 9.43176 14.5161 9.66809 14.5161 9.94739V11.9991C14.5161 13.2166 14.2583 14.2837 13.7427 15.2003C13.2271 16.1098 12.5109 16.8152 11.5942 17.3165C10.6776 17.8178 9.60693 18.0685 8.38232 18.0685C7.16488 18.0685 6.09424 17.8178 5.17041 17.3165C4.24658 16.8152 3.52686 16.1098 3.01123 15.2003C2.50277 14.2837 2.24854 13.2166 2.24854 11.9991V9.94739C2.24854 9.66809 2.14827 9.43176 1.94775 9.2384C1.74723 9.04504 1.50374 8.94836 1.21729 8.94836C0.94515 8.94836 0.708822 9.04504 0.508301 9.2384C0.30778 9.43176 0.20752 9.66809 0.20752 9.94739V12.0743ZM8.38232 15.8448C9.10563 15.8448 9.75016 15.6766 10.3159 15.34C10.8888 14.9962 11.3364 14.5236 11.6587 13.922C11.9881 13.3204 12.1528 12.6222 12.1528 11.8273V4.59778C12.1528 3.80286 11.9881 3.10461 11.6587 2.50305C11.3364 1.90149 10.8888 1.43241 10.3159 1.09583C9.75016 0.752075 9.10563 0.5802 8.38232 0.5802C7.65902 0.5802 7.0109 0.752075 6.43799 1.09583C5.87223 1.43241 5.42464 1.90149 5.09521 2.50305C4.76579 3.10461 4.60107 3.80286 4.60107 4.59778V11.8273C4.60107 12.6222 4.76579 13.3204 5.09521 13.922C5.42464 14.5236 5.87223 14.9962 6.43799 15.34C7.0109 15.6766 7.65902 15.8448 8.38232 15.8448Z"})})},358920:(e,t,o)=>{o.d(t,{$Y:()=>m,AF:()=>c,Px:()=>u,Up:()=>d,dY:()=>p});o(725707),o(491955);var i=()=>o(16791),n=()=>o(758611),a=()=>o(809811),r=()=>o(927685),l=()=>o(561349),s=()=>o(413871);async function c(e,t){const o=await l().k.load();return e.filter((e=>{const i=e.getCopiedFromPointer();return Boolean(i&&o.isTemplate(i)&&Boolean(t&&t(i.id)))}))}function d(e){const t=window.location.href;return a().O$(t,{tg:e.templateGalleryItem})}function p(e){let t;return e instanceof s().$x?t=e.getBlockId():"type"in e?(e.type,t=e.template.rootId):t=e.rootId,t}function u(e){const t=i().locale&&"en-us"!==i().locale.toLocaleLowerCase()?`/${i().locale.toLowerCase()}`:"",o=void 0!==e?`${t}${n().JZ.templates}/${encodeURIComponent(e)}`:`${t}${n().JZ.templates}`;return`${r().A.domainBaseUrl}${o}`}function m(e){if(!e)return"";try{const o=JSON.parse(e);if("text"===o.content[0].content[0].nodeType){var t;const e=(null==o||null===(t=o.content)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.content)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value)||"";return e.replace(/^(#{2,6})\s+/gm,"# ")}}catch(o){return""}}},361499:(e,t,o)=>{o.d(t,{M:()=>n});o(242343);var i=o(163643);const n=(0,o(680369).wt)("templatesColor",{viewBox:"0 0 20 20",svg:(0,i.jsxs)("g",{children:[(0,i.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z",fill:"#3C9ED7"}),(0,i.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z",fill:"#E7595E"}),(0,i.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z",fill:"#F5BC4E"})]})})},382640:(e,t,o)=>{o.d(t,{$E:()=>M,$L:()=>l,BZ:()=>d,EC:()=>g,EI:()=>k,E_:()=>I,Ed:()=>u,Fq:()=>v,Lu:()=>w,Mk:()=>m,O0:()=>P,UO:()=>A,V$:()=>C,VQ:()=>f,Xx:()=>b,Xy:()=>c,YS:()=>y,_g:()=>S,dd:()=>p,pW:()=>s,q3:()=>r,wH:()=>a});var i=()=>o(975392),n=()=>o(76394);const a=160,r=40,l=24,s=20,c=600,d=270,p=405,u=480,m=500,g=void 0,f=16,y=10,v=8,h=(o(333212).nh,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),S=4;function k(e){return{icon:e.mediumIconColor,text:e.text.secondary}}function b(e){return{width:48,height:48,fill:e.lightIconColor}}function w(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.surface.page}const x=1;function C(e){let{isPhone:t,theme:o}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:o.home.tile.background,boxShadow:I({isPhone:t,theme:o}),...h}}function P(e){let{mode:t}=e;switch(t){case"dark":return 0;case"light":return x;default:return(0,n().ub)(t),0}}function I(e){let{isPhone:t,theme:o,borderOnly:n}=e;if("dark"===o.mode)return"unset";o.mode;const a=P({mode:o.mode});return(0,i().oE)([n||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${a}px rgba(0, 0, 0, 0.05)`]).join(", ")}function M(e){return{display:"flex",flexDirection:"column",width:"100%",gap:24}}function A(e){const{isPhone:t,theme:o,borderOnly:i}=e;return{unhoveredBoxShadow:I({isPhone:t,theme:o,borderOnly:i}),hoveredBoxShadow:"light"===o.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):o.homeShadow.card.hovered}}},403328:(e,t,o)=>{o.d(t,{f:()=>i});const i=new(o(129978).O2)("pageCovers",(async()=>{const{pageCovers:e}=await o.e(40198).then(o.bind(o,698434));return e}))},434626:(e,t,o)=>{o.r(t),o.d(t,{eyeIcon:()=>a,iconDefinition:()=>n});o(242343);var i=o(163643);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_9098_13290)",children:[(0,i.jsx)("path",{d:"M10 13.504a3.5 3.5 0 1 0-.001-7.002A3.5 3.5 0 0 0 10 13.504m1.167-3.502a1.168 1.168 0 1 1-2.335.002 1.168 1.168 0 0 1 2.335-.002"}),(0,i.jsx)("path",{d:"M10 3.895c-4.093 0-7.662 2.189-9.351 5.408-.231.44-.231.964 0 1.404 1.689 3.22 5.258 5.408 9.351 5.408s7.662-2.189 9.351-5.408c.231-.44.231-.964 0-1.404-1.689-3.22-5.258-5.408-9.351-5.408m-8.245 5.99C3.218 7.096 6.347 5.144 10 5.144s6.782 1.952 8.245 4.74a.26.26 0 0 1 0 .24c-1.463 2.788-4.592 4.74-8.245 4.74s-6.782-1.952-8.245-4.74a.26.26 0 0 1 0-.24"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_9098_13290",children:(0,i.jsx)("path",{d:"M0 0h20v20H0z"})})})]})},a=(0,o(680369).wt)("eye",n)},453469:(e,t,o)=>{o.d(t,{Hk:()=>m,Iw:()=>f,kc:()=>v,un:()=>y});o(725707),o(491955),o(403517);var i=()=>o(455831),n=()=>o(678716),a=()=>o(661764),r=()=>o(779470),l=()=>o(76394),s=()=>o(927685),c=()=>o(307542),d=()=>o(477784),p=()=>o(71927),u=()=>o(836331);const m=(0,o(653998).YK)({addToTeamspace:{id:"templateGalleryHelpers.addToTeamspace",defaultMessage:"Add to a teamspace"},addToPrivate:{id:"teamPickerButton.addToPrivate",defaultMessage:"Add to Private"}}),g=(0,l().uv)(n().PY);function f(e){let{userPersona:t,subscriptionTier:o}=e;return[...g].sort(((e,n)=>function(e,t,o,n){const a=(0,i().Pg)(n),r=(0,p().NI)({persona:o,defaultToLife:a});if("suggested"===e||"suggested"===t)return"suggested"===e?-1:1;if(r===e||r===t)return r===e?-1:1;if(("life"===e||"life"===t)&&a)return"life"===e?-1:1;if(("student"===e||"student"===t)&&function(e){let{persona:t,isPersonalishPlan:o}=e;const i=o?["other","unfilled","personal","undefined"]:["personal"];return i.includes(t??"undefined")}({persona:o,isPersonalishPlan:a}))return"student"===e?-1:1;return 0}(e,n,t,o)))}function y(e){let{subscriptionTier:t,environment:o}=e;const s=d().A.getIntl(),p=(0,c().WC)({environment:o}),m=p?function(e){return(0,i().Pg)(e)?n().sw:n().ht}(t):n().PY.suggested;return(0,l().s8)(n().PY,((e,t)=>"suggested"===t?m.map((e=>(0,r().B)(e,s))):e.filter((e=>(0,a().vc)(e,u().default))).map((e=>p?(0,a().G2)(e):e)).filter((e=>!m.includes(e))).map((e=>(0,r().B)(e,s)))))}function v(e){return`${s().A.domainBaseUrl}/@${e}`}},533639:(e,t,o)=>{o.d(t,{p:()=>i});class i extends(()=>o(998969))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}},547124:(e,t,o)=>{o.d(t,{$b:()=>d,Nz:()=>s,Q1:()=>r,Vh:()=>p,ZO:()=>c,bl:()=>l,eN:()=>a,oQ:()=>n});var i=()=>o(129978);const n={WorkflowPageBlock:new(i().O2)("WorkflowPageBlock",(async()=>await o.e(87700).then(o.bind(o,600742)))),WorkflowEditorTopbar:new(i().O2)("WorkflowEditorTopbar",(async()=>await o.e(92143).then(o.bind(o,944669)))),WorkflowInPlaceEditor:new(i().O2)("WorkflowInPlaceEditor",(async()=>await Promise.all([o.e(96159),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(36192),o.e(55373),o.e(62475),o.e(3151),o.e(44711),o.e(98629),o.e(53321),o.e(58550),o.e(16471),o.e(90825),o.e(37353),o.e(29151),o.e(16908),o.e(36209),o.e(92845),o.e(71718),o.e(48486),o.e(83324),o.e(63077),o.e(41870),o.e(90966),o.e(88552),o.e(90214),o.e(74562),o.e(8184),o.e(28271),o.e(17254),o.e(18895),o.e(78708),o.e(28721),o.e(4422),o.e(28866),o.e(67435),o.e(17989),o.e(48632),o.e(90625),o.e(76181),o.e(59794),o.e(72832),o.e(90280),o.e(26483),o.e(33813),o.e(81768),o.e(71104),o.e(2804),o.e(82850),o.e(84778),o.e(69914),o.e(11341),o.e(92011),o.e(19361),o.e(63327),o.e(26090),o.e(38482),o.e(12341),o.e(50984),o.e(47864),o.e(40828),o.e(76007),o.e(5023),o.e(90978),o.e(65554),o.e(53571),o.e(66885),o.e(67780),o.e(96933),o.e(83181),o.e(36141),o.e(9150),o.e(50437)]).then(o.bind(o,27311)))),ChatCollectionView:new(i().O2)("ChatCollectionView",(async()=>await o.e(45666).then(o.bind(o,685332)))),CustomCollectionView:new(i().O2)("CustomCollectionView",(async()=>await Promise.all([o.e(96159),o.e(96346),o.e(36192),o.e(55373),o.e(36209),o.e(92845),o.e(71718),o.e(48486),o.e(83324),o.e(63077),o.e(41870),o.e(90966),o.e(88552),o.e(90214),o.e(8184),o.e(89693),o.e(64165)]).then(o.bind(o,594329)))),WorkflowEditorCollectionViewPage:new(i().O2)("WorkflowEditorCollectionViewPage",(async()=>await Promise.all([o.e(96159),o.e(75134),o.e(92011),o.e(38482),o.e(67780),o.e(16697)]).then(o.bind(o,727463)))),WorkflowContainerEmptyState:new(i().O2)("WorkflowContainerEmptyState",(async()=>await o.e(97891).then(o.bind(o,569963)))),workflowActions:new(i().O2)("workflowActions",(async()=>await Promise.all([o.e(96159),o.e(96346),o.e(36192),o.e(55373),o.e(36209),o.e(92845),o.e(71718),o.e(48486),o.e(83324),o.e(63077),o.e(41870),o.e(90966),o.e(88552),o.e(90214),o.e(8184),o.e(89693),o.e(11097)]).then(o.bind(o,503780)))),workflowNavigationActions:new(i().O2)("workflowNavigationActions",(async()=>await o.e(93139).then(o.bind(o,993054)))),workflowNavigationHelpers:new(i().O2)("workflowNavigationHelpers",(async()=>await o.e(92821).then(o.bind(o,501518)))),workflowAdvanced:new(i().O2)("workflowAdvanced",(async()=>await Promise.all([o.e(96159),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(36192),o.e(55373),o.e(62475),o.e(3151),o.e(44711),o.e(98629),o.e(53321),o.e(58550),o.e(16471),o.e(90825),o.e(37353),o.e(29151),o.e(16908),o.e(36209),o.e(92845),o.e(71718),o.e(48486),o.e(83324),o.e(63077),o.e(41870),o.e(90966),o.e(88552),o.e(90214),o.e(74562),o.e(8184),o.e(28271),o.e(17254),o.e(18895),o.e(78708),o.e(28721),o.e(4422),o.e(28866),o.e(67435),o.e(17989),o.e(48632),o.e(90625),o.e(76181),o.e(59794),o.e(72832),o.e(90280),o.e(26483),o.e(33813),o.e(81768),o.e(71104),o.e(2804),o.e(82850),o.e(84778),o.e(69914),o.e(11341),o.e(92011),o.e(19361),o.e(63327),o.e(26090),o.e(38482),o.e(12341),o.e(50984),o.e(47864),o.e(40828),o.e(76007),o.e(5023),o.e(90978),o.e(65554),o.e(53571),o.e(66885),o.e(67780),o.e(96933),o.e(83181),o.e(36141),o.e(9150)]).then(o.bind(o,59529))))},a=(0,i()._h)(n.WorkflowPageBlock,(e=>e.default)),r=(0,i()._h)(n.ChatCollectionView,(e=>e.ChatCollectionView)),l=(0,i()._h)(n.CustomCollectionView,(e=>e.CustomCollectionView)),s=(0,i()._h)(n.WorkflowEditorTopbar,(e=>e.WorkflowEditorTopbar)),c=(0,i()._h)(n.WorkflowInPlaceEditor,(e=>e.WorkflowInPlaceEditor)),d=(0,i()._h)(n.WorkflowEditorCollectionViewPage,(e=>e.WorkflowEditorCollectionViewPage)),p=(0,i()._h)(n.WorkflowContainerEmptyState,(e=>e.WorkflowContainerEmptyState))},559181:(e,t,o)=>{o.d(t,{A:()=>a});o(242343);var i=()=>o(653998),n=o(163643);const a=function(e){let{collectionViewName:t,collectionViewType:a}=e;return t?(0,n.jsx)(o(826033).A,{children:t}):"page"===a?(0,n.jsx)(i().sA,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,n.jsx)(i().sA,{...o(91338).X[a]})}},566342:(e,t,o)=>{o.d(t,{a6:()=>i,dL:()=>r,w$:()=>a,xc:()=>n});const i="notion://projects_app",n="notion://wiki_app",a="notion://docs_app",r="notion://meetings_app"},617643:(e,t,o)=>{o.d(t,{RH:()=>g,gu:()=>f,oW:()=>m,rs:()=>y});var i=()=>o(975392),n=()=>o(76394),a=()=>o(759139),r=()=>o(841817),l=()=>o(339190),s=()=>o(413871),c=()=>o(182613),d=()=>o(205670),p=()=>o(477784),u=()=>o(280630);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p().A.getIntl();if("helpMeEdit"===e.key||"helpMeDraft"===e.key||"helpMeWrite"===e.key){var o;const i=null===(o=e.steps)||void 0===o?void 0:o[0],n="text"===(null==i?void 0:i.type)&&i.prefilledValue;return n?t.formatMessage({id:"completionPopup.prefilledValue",defaultMessage:"Write about {prefilledValue} "},{prefilledValue:n}):""}if(!(0,r().US)(e.key))return"";switch(e.key){case"brainstormIdeas":return t.formatMessage({id:"completionPopup.brainStorm.prefilledValue",defaultMessage:"Brainstorm ideas on "});case"blogPost":return t.formatMessage({id:"completionPopup.blogPost.prefilledValue",defaultMessage:"Write a blog post about "});case"outline":return t.formatMessage({id:"completionPopup.outline.prefilledValue",defaultMessage:"Write an outline about "});case"socialMediaPost":return t.formatMessage({id:"completionPopup.socialMediaPost.prefilledValue",defaultMessage:"Write a social media post about "});case"pressRelease":return t.formatMessage({id:"completionPopup.pressRelease.prefilledValue",defaultMessage:"Write a press release about "});case"creativeStory":return t.formatMessage({id:"completionPopup.creativeStory.prefilledValue",defaultMessage:"Write a creative story about "});case"essay":return t.formatMessage({id:"completionPopup.essay.prefilledValue",defaultMessage:"Write an essay about "});case"poem":return t.formatMessage({id:"completionPopup.poem.prefilledValue",defaultMessage:"Write a poem about "});case"todoList":return t.formatMessage({id:"completionPopup.todoList.prefilledValue",defaultMessage:"Write a todo list about "});case"meetingAgenda":return t.formatMessage({id:"completionPopup.meetingAgenda.prefilledValue",defaultMessage:"Write a meeting agenda about "});case"prosConsList":return t.formatMessage({id:"completionPopup.prosConsList.prefilledValue",defaultMessage:"Write a pros and cons list about "});case"jobDescription":return t.formatMessage({id:"completionPopup.jobDescription.prefilledValue",defaultMessage:"Write a job description about "});case"salesEmail":return t.formatMessage({id:"completionPopup.salesEmail.prefilledValue",defaultMessage:"Write a sales email about "});case"recruitingEmail":return t.formatMessage({id:"completionPopup.recruitingEmail.prefilledValue",defaultMessage:"Write a recruiting email about "});default:(0,n().HB)(e.key)}}function g(){const{stores:e}=c().default.state,t=e[0],o=i().HV(e),n=t?t.getRecordStoreUIRoot():void 0;if(n&&n instanceof s().Bv&&o){return{type:"blockSelection",stores:e,currentPage:n,origin:o,scrollerStore:(0,a().K3)(n)}}}function f(){const e=d().default.state;if("editing"!==e.mode)return;const t=e.multiSelection,o=t.start.store,i=o.getRecordStoreUIRoot(),n=l().n.findNodeFromStore(o),r=(0,u().T)(o),c=null==r?void 0:r.getRecordStoreUIParent(),p=(0,a().K3)(i),m=r&&r instanceof s().Bv&&r!==i?r:void 0,g=m??n;if(!(i&&i instanceof s().Bv&&g))return;return{type:"cursor",textSelection:t,currentPage:i,currentBlock:m,origin:g,currentParent:c,scrollerStore:p,isPageTitle:i.id===o.id}}function y(){const{stores:e}=c().default.state,t=d().default.state,o="empty"!==t.mode?t.multiSelection:void 0,i="empty"!==t.mode?t.multiSelection.start.store:void 0;let n=i?i.getRecordStoreUIRoot():void 0;if(!(n instanceof s().Bv)){let e,t=null==i?void 0:i.getRecordStoreUIParent();for(;null!=t;)t instanceof s().Bv&&(e=t),t=t.getRecordStoreUIParent();e&&(n=e)}if(o&&n&&n instanceof s().Bv){const t=(0,u().T)(o.end.store),i=null==t?void 0:t.getRecordStoreUIParent(),r=(0,a().K3)(n);if(t&&i){return{type:"textSelection",stores:e,textSelection:o,currentPage:n,origin:t,endBlock:t,endBlockParent:i,scrollerStore:r}}}}},649334:(e,t,o)=>{o.r(t),o.d(t,{accept:()=>O,close:()=>H,createTemplateInstance:()=>U,loadAndDuplicatePageTemplate:()=>F,openWithItem:()=>N,previewItem:()=>K,setTemplateVisited:()=>z});o(610931);var i=()=>o(712437),n=()=>o(502140),a=()=>o(329911),r=()=>o(519423),l=()=>o(220574),s=()=>o(145017),c=()=>o(26907),d=()=>o(541341),p=()=>o(204132),u=()=>o(818369),m=()=>o(191756),g=()=>o(425447),f=()=>o(134549),y=()=>o(281885),v=()=>o(137476),h=()=>o(477784),S=()=>o(378219),k=()=>o(197849),b=()=>o(358920),w=()=>o(633990),x=()=>o(667801),C=()=>o(485966),P=()=>o(836331),I=()=>o(134915),M=()=>o(869537),A=()=>o(413871),_=()=>o(352211),T=()=>o(149078),B=()=>o(759625),j=()=>o(349947),V=()=>o(360378),E=()=>o(163875),D=()=>o(84543),W=()=>o(421378);const R="LastViewedTemplateId",L=(0,o(653998).YK)({clientCopyError:{defaultMessage:"Client copy could not be created.",id:"spaceActions.createGettingStartedPage.copyNotCreated.error"}});function N(e){const{environment:t,item:o,createNewPage:i,isPrivate:n,disablePointerEvents:r,isCheckout:l=!1}=e;V().IU({environment:t}),M().A.setState({open:!0,item:o,createNewPage:i,isPrivate:n,isLoading:!1,disablePointerEvents:r,isCheckout:l}),a().K.set({userId:t.currentUser.id,key:R,value:o.rootId}),_().oO(t,{template_id:(0,b().dY)(o),from:i?"sidebar":"newPage"})}function K(e){let{templateItem:t,currentUserId:o}=e;const i=M().A.state.item;M().A.setState({...M().A.state,item:t}),i!==t&&a().K.set({userId:o,key:R,value:t.rootId})}function H(e){M().A.setState({item:M().A.state.item,open:!1}),V().IU({environment:e})}async function O(e){const{acceptFrom:t,item:o,environment:n,spaceStore:a,initializeStore:r,...l}=e;M().A.state.open&&M().A.setState({...M().A.state,isLoading:!0}),P().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&I().A.state.open&&I().A.setState({open:!1});const s=r?{...{...l,item:o,environment:n,spaceStore:a},initializeStore:r,type:"inExistingStore",useMinimalTemplates:!1}:{...{...l,item:o,environment:n,spaceStore:a},type:"inSpace",useMinimalTemplates:!1,isOnboarding:!1};let c=!1;const d=Date.now();let p;try{var u;p=await U(s),c=!0;const e=null===(u=C().default.state.mainEditorCurrentBlockStore)||void 0===u?void 0:u.id;!p||e&&e===p.id||m().uK({environment:n,store:p,pageVisitSource:i().y8.Create,showMoveTo:!0}),H(n),n.device.isMobile&&(x().close(),I().A.setState({open:!1}))}finally{var g;const i=Date.now()-d,r=e.initializeStore?S().Uo(e.initializeStore):void 0,l=e.initializeStore?!r:e.isPrivate;_().BX(n,{destination:l?"private":"team",template_block_id:o.rootId,template_duplication_duration_ms:i,team_id:null==r?void 0:r.id,created_page_id:null===(g=p)||void 0===g?void 0:g.id}),_().hB(n,{from:"mobileApp",success:c,context:t,template_block_id:o.rootId,target_space_id:a.id,template_duplication_duration_ms:i,public_template_name:o.name,template_id:o.id})}}async function F(e){const{environment:t,initializeStore:o,item:i,isPrivate:n,useMinimalTemplates:a,spaceStore:s,spaceViewStore:c}=e,d=a?i.rootId:i.previewRootId,p=await u().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:d,spaceId:i.spaceId},shallow:!1},headers:(0,r().WS)({spaceId:i.spaceId})});let m;"success"===p.type&&(m=l().RecordMapWithRole.create(p.data.subtreeRecordMap));const y="pageTemplateModalActions.loadAndDuplicatePageTemplate",{performResult:S}=D().createAndCommit({userAction:y,environment:t,canUndo:!0,perform:e=>{const i=o||E().IT({environment:t,spaceStore:s,spaceViewStore:c,isPrivate:n,loading:!0,transaction:e});j()._O({environment:t,inMemoryRecordCache:i.inMemoryRecordCache,recordMap:m,debugSource:y});const a=(0,f().loadLocalSubtree)(t,{blockId:d,inMemoryRecordCache:i.inMemoryRecordCache,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!1,allowCopyExternalObjectInstances:!0}).recordMap;if(!a)throw new Error(h().A.getIntl().formatMessage(L.clientCopyError));return g().localDuplicate({environment:t,sourceBlockId:d,targetBlockPointer:i.pointer,sourceBlockSubtree:a,targetInMemoryRecordCache:i.inMemoryRecordCache,transaction:e,options:{deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0}}),i}}),k=S.getCollectionPointer();return(0,v().u4)({environment:t,event:{eventName:"create_app_templates",eventProperties:{target_page_ids:[S.id],template_label:i.name,collection_ids:k?[k.id]:[]}}}),S}async function U(e){var t;const{environment:o,item:i,useRecordCache:a,useMinimalTemplates:r,spaceStore:l,isOnboarding:m,from:g,type:f,initializeStore:v,teamStore:h,onSuccess:S,onError:b,isEmailShared:x}=e,I=a&&!r?i.previewRootId:i.rootId,M={id:I,table:s().ev,spaceId:i.spaceId},_=m?"onboarding":null!==(t=i.marketplaceTemplateMetadata)&&void 0!==t&&t.isMobileMarketplaceTemplate?"mobile_app":"homepage_team"===g?"team_home":void 0,B=await(0,y().oC)(o,I),j=_?{context:"",source:_,isListedTemplate:Boolean(B),isFirstPartyPaidTemplate:void 0!==B&&(0,d().Z1)(B),isEmailShared:x}:void 0;let V=!1,R=l;const L=new(A().Bv)(o,{table:s().ev,id:M.id,spaceId:M.spaceId});if("inExistingStore"===f&&v){if(R=v,v.isEmptyPage()){const e=v.getParentStore();e&&e.canEdit()&&("block"===e.table||"space"===e.table||"team"===e.table)&&(V=!0,R=e)}}else"inTeam"===f&&h&&(R=h);const N=P().default.checkGate({gateName:"use_initialize_page_template_api_onboarding"}),K=P().default.checkGate({gateName:"use_local_duplication_for_onboarding"}),H=P().default.checkGate({gateName:"use_duplicate_block_sync"});if("onboarding"===_&&N){const e=await async function(e){const{environment:t,item:o,spaceStore:i,teamStore:n,type:a,from:r,sourceBlock:l,onSuccess:s,onError:c}=e,d=C().default.state.currentUserRootStore,p=await(0,w().Pl)();if(!d)return;const m=(0,k().H)({spaceStore:i,userId:d.id,environment:t});if(!m)return;const{serverCommitResult:g,performResult:{pageStore:f}}=D().createAndCommit({userAction:"pageTemplateModalActions.createTemplateInstance",environment:t,canUndo:!0,perform:e=>{let l;return l="inTeam"===a&&n&&r?p({environment:t,spaceStore:i,spaceViewStore:m,teamStore:n,from:r,loading:!0,appendOrPrepend:"append",transaction:e}):E().IT({environment:t,spaceStore:i,spaceViewStore:m,isPrivate:!0,loading:!0,transaction:e}),z({item:o,spaceViewStore:m,transaction:e}),{pageStore:l}}});await g;const y=await u().callApi({eventName:"initializePageTemplate",environment:t,data:{sourceBlock:l,targetBlock:{id:f.id,table:"block",spaceId:i.id},isOnboarding:!0}});"failed"===y.type?null==c||c(f):null==s||s(f);return f}({environment:o,item:i,spaceStore:l,teamStore:h,type:"inTeam"===f?"inTeam":"inSpace",from:g,sourceBlock:M,onSuccess:S,onError:b});return e}j||n().log({level:"warning",from:"pageTemplateModalActions.createTemplateInstance",type:"templateInstallationMetadataNotSet",data:{miscDataToConvertToString:{template_id:i.id,template_block_id:i.rootId,target_space_id:l.id,public_template_name:i.name,isOnboarding:m,from:g,type:f}}});const O=P().default.checkGate({gateName:"enable_local_duplication_for_non_marketplace_templates"}),F=!(0,c().Fe)(null==j?void 0:j.source)&&O||K&&"onboarding"===_,U="onboarding"===_&&H,J=await T().Jx({environment:o,store:L,newParentStore:R,addCopyName:!1,duplicateOnlyCollectionSchema:!1,unlockPage:!0,templateInstallationMetadata:j,shouldAttemptServerBackedLocalDuplication:F,shouldUseSynchronousDuplicationAPI:U,from:g??(m?"onboarding":void 0)});if(J){if(p().Q.isSuccess(J)&&J.value.length>0){const e=J.value[0];if(V&&v){const t=v;try{await t.waitUntil((()=>t.isDefined()));const{serverCommitResult:i}=D().createAndCommit({userAction:"pageTemplateModalActions.initializePageTemplateInPlace",environment:o,canUndo:!0,perform:e=>{W().oD({environment:o,blocks:[t],transaction:e,permanentlyDelete:!0})}});return await i,e}catch(Z){n().log({level:"error",from:"pageTemplateModalActions.initializePageTemplateInPlace",type:"transactionError",data:{miscDataToConvertToString:{error:Z}}})}}return null==S||S(e),e}return null==b||b(),void n().log({level:"error",from:"pageTemplateModalActions.initializePageTemplate",type:"duplicateTemplateError",data:{miscDataToConvertToString:{error:J.error,template_id:i.id,template_block_id:i.rootId,target_space_id:l.id,public_template_name:i.name}}})}}function z(e){const{item:t,transaction:o,spaceViewStore:i}=e;if(i){const e=i.getVisitedTemplateIds();if(e.indexOf(t.rootId)<0){const n=e.concat([t.rootId]);B().zv({store:i,data:{visited_templates:n},transaction:o})}}}},678716:(e,t,o)=>{o.d(t,{PY:()=>l,bJ:()=>r,ht:()=>c,sw:()=>s});var i=()=>o(65866),n=()=>o(316515),a=()=>o(832995);const r={suggested:a().DZ.suggestedCategory,design:a().DZ.designer,eng:a().DZ.engineering,product:a().DZ.productManagement,marketing:a().DZ.marketing,sales:a().DZ.sales,support:a().DZ.support,hr:a().DZ.hr,life:a().DZ.life,student:a().DZ.student},l=(i().Vq,i().WX,i().I0,i().Y8,i().ud,i().I0,i().WX,i().I0,i().WX,i().WX,i().WX,i().WX,{suggested:[n().kx.defaultWiki],product:[n().kx.oneOnOneNotes,n().kx.productWiki,n().kx.productSpec,n().kx.visionAndStrategy,n().kx.presentation,n().kx.investorUpdate,n().kx.userResearch,n().kx.experimentResults,n().kx.brainstorm,n().kx.productLaunchBrief],design:[n().kx.designSprint,n().kx.designSystem,n().kx.designPortfolio,n().kx.userResearch,n().kx.brainstorm],eng:[n().kx.engineeringWiki,n().kx.engineeringTechSpec,n().kx.experimentResults,n().kx.brainstorm],marketing:[n().kx.presentation,n().kx.brandAssets,n().kx.brainstorm,n().kx.contentCalendar,n().kx.blogEditorialCalendar,n().kx.socialMediaCalendar,n().kx.campaignBrief,n().kx.moodBoard,n().kx.mediaList],hr:[n().kx.companyHome,n().kx.newHireOnboarding,n().kx.employeeBenefits,n().kx.interviewGuide,n().kx.recruitingTracker,n().kx.jobBoard,n().kx.applicantTracker,n().kx.peopleDirectory],sales:[n().kx.salesWiki,n().kx.salesCRM,n().kx.salesAssets,n().kx.competitiveAnalysis],support:[n().kx.productFAQs,n().kx.helpCenter],life:[n().kx.readingListV2,n().kx.habitTrackerV2,n().kx.simpleBudgetV2,n().kx.weeklyTodoV2,n().kx.travelPlannerV2,n().kx.journalV2,n().kx.resumeV2,n().kx.personalHomeV3,n().kx.quickNoteV2,n().kx.jobApplicationsV2,n().kx.lifeWikiV2,n().kx.moodBoardV2,n().kx.blogPostV2,n().kx.personalCRMV2],student:[n().kx.studentPlanner,n().kx.classNotesV2,n().kx.courseScheduleV2,n().kx.gradeCalculatorV2,n().kx.cornellNotesSystemV2,n().kx.syllabusV2,n().kx.lessonPlansV2,n().kx.classDirectoryV2,n().kx.classroomHomeV2,n().kx.clubHomepageV2]}),s=[n().kx.todoListMobile,n().kx.quickNoteMobile,n().kx.habitTrackerMobile,n().kx.journalMobile,n().kx.weeklyPlanMobile,n().kx.classNotesMobile],c=[n().kx.todoListMobile,n().kx.quickNoteMobile,n().kx.oneOnOneNotesMobile,n().kx.weeklyPlanMobile]},692844:(e,t,o)=>{o.d(t,{$:()=>n});o(242343);var i=o(163643);const n=(0,o(680369).wt)("checkmark",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M10.0693 18.166C14.7759 18.166 18.6606 14.2812 18.6606 9.58301C18.6606 4.88477 14.7676 1 10.061 1C5.36279 1 1.48633 4.88477 1.48633 9.58301C1.48633 14.2812 5.37109 18.166 10.0693 18.166ZM9.13965 13.6836C8.82422 13.6836 8.56689 13.5508 8.33447 13.2437L6.30078 10.7783C6.15137 10.5874 6.07666 10.3965 6.07666 10.189C6.07666 9.75732 6.41699 9.40869 6.84863 9.40869C7.10596 9.40869 7.30518 9.5 7.521 9.77393L9.11475 11.791L12.5347 6.3125C12.7173 6.02197 12.9497 5.88086 13.2153 5.88086C13.6387 5.88086 14.0205 6.17139 14.0205 6.61133C14.0205 6.80225 13.9209 7.00977 13.8047 7.19238L9.91162 13.2437C9.729 13.5342 9.45508 13.6836 9.13965 13.6836Z"})})},715716:(e,t,o)=>{o.r(t),o.d(t,{AiOnboardingQueuedSelectedStore:()=>m,advanceAITutorialTooltipsStage:()=>y,getAiOnboardingPhase:()=>g,onSpaceForAiTriggered:()=>f,useUpdateAskAIAnythingOnboardingState:()=>h,useUpdateRefineAIResponseOnboardingState:()=>v});o(610931);var i=o(242343),n=()=>o(237385),a=()=>o(803290),r=()=>o(951592),l=()=>o(442494),s=()=>o(84543),c=()=>o(658388),d=()=>o(485966),p=()=>o(799220),u=()=>o(108797);const m=o(129044).default.createValue(void 0,{name:"AiOnboardingQueuedSelectedStore"});function g(){const{currentUserSettingsStore:e}=d().default.state;if(!e||!e.isReady())return;const t=e.getSettings();return t?t.ai_assistant_tooltips_onboarding_phase??"space_for_ai":void 0}function f(e){"space_for_ai"===g()&&y(e)}function y(e){const t=g();if(void 0===t)throw new Error("Assertion failure, AI onboarding state is undefined!");const o=l().aD.indexOf(t);if(-1===o)throw new Error(`Assertion failure, ${t} is not a valid AI onboarding state!`);if(o<l().aD.length-1){const{currentUserSettingsStore:t}=d().default.state;if(!t)return;const i=l().aD[o+1];s().createAndCommit({userAction:"AiOnboardingActions.advanceAIOnboardingStage",environment:e,canUndo:!0,perform:e=>{c().mJ({userSettingsStore:t,transaction:e,data:{ai_assistant_tooltips_onboarding_phase:i}})},userId:t.id}),"complete"===i&&(0,u().setAssistantOnboardingPhase)(e,{phase:"complete",transactionUserAction:"AiOnboardingActions.advanceAIAssistantOnboardingPhase.fromAiTooltips",userSettingsStore:t})}}function v(e){const t=(0,n().v3)(),o=(0,a().K8)((()=>{const e=(0,p().K1)();return!!e&&e.isStreaming()}),[]),l="completionPopup"===e.type&&"results"===e.stage&&!e.loading,s="assistantCompletionPopup"===e.type&&"results"===e.stage&&!o,c=l||s,d=(0,r().ZC)(c);(0,i.useEffect)((()=>{d&&!c&&"refine_ai_response"===g()&&y(t)}),[c,d,t])}function h(e){const t=(0,n().v3)(),o="results"===e.stage&&e.loading,a=(0,r().ZC)(o);(0,i.useEffect)((()=>{o&&!a&&"ask_ai_anything"===g()&&y(t)}),[o,a,t])}},748039:(e,t,o)=>{o.d(t,{Is:()=>p,LS:()=>g,NH:()=>f,QA:()=>m,_b:()=>u});o(362833),o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601);var i=()=>o(486826),n=(o(242343),()=>o(114103)),a=()=>o(16456),r=()=>o(653998),l=()=>o(200524),s=()=>o(76394),c=()=>o(378219),d=o(163643);function p(e){const t=c().g7(e)??[],o=[];for(const i of t){if(!("block"===i.table&&!0===i.isTemplate()&&i.getFormat().automation_id&&i.id!==e.id))continue;const t=i.getAutomationStore();if(t){if(!t.isReady())return{automationStoresReady:!1};void 0!==t.getRecurrence()&&t.isDefined()&&o.push(t.getModel())}}return{automationStoresReady:!0,...(0,n().templateAncestorsViolateRecurrenceNesting)(o)}}function u(e){switch(e){case"day":return(0,d.jsx)(r().sA,{defaultMessage:"Repeat daily",id:"database.templatePickerItem.recurrenceFrequency.daily"});case"week":return(0,d.jsx)(r().sA,{defaultMessage:"Repeat weekly",id:"database.templatePickerItem.recurrenceFrequency.weekly"});case"month":return(0,d.jsx)(r().sA,{defaultMessage:"Repeat monthly",id:"database.templatePickerItem.recurrenceFrequency.monthly"});case"year":return(0,d.jsx)(r().sA,{defaultMessage:"Repeat yearly",id:"database.templatePickerItem.recurrenceFrequency.yearly"});default:(0,s().HB)(e)}}function m(){return{start_date:i().c9.local().plus({days:1}).set({hour:0,minute:0,second:0,millisecond:0}).toMillis(),timezone:(0,a().dB)(),hour:0,minute:0,frequency:"day",interval:1}}function g(e){const{recurrence:t,intl:o,leadingPhrase:i}=e;return(0,n().rruleFromRecurrence)({..."month"===t.frequency?{...t,monthly_restriction:void 0}:t,weekdays:void 0,hour:0,minute:0,end_condition:void 0}).toText((e=>{switch(e){case"every":if(void 0===i)return"";if("every"===i)return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.every",defaultMessage:"every"});if("repeat every"===i)return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.repeatEvery",defaultMessage:"repeat every"});(0,s().HB)(i);break;case"day":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.day",defaultMessage:"day"});case"days":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.days",defaultMessage:"days"});case"week":{const e=(null==t?void 0:t.weekdays)||[];return 5===e.length&&(0,l()._)(new Set(e),new Set(["MO","TU","WE","TH","FR"]))?o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weekday",defaultMessage:"weekday"}):o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.week",defaultMessage:"week"})}case"weeks":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weeks",defaultMessage:"weeks"});case"month":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.month",defaultMessage:"month"});case"months":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.months",defaultMessage:"months"});case"year":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.year",defaultMessage:"year"});case"years":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.years",defaultMessage:"years"});default:return e.toString()}})).trim()}function f(e){const t=e.getRecurrence();return Boolean(e.isTriggerType("recurrence")&&t&&"disabled_recurrence_ended"===e.getStatus())}},749975:(e,t,o)=>{o.d(t,{ET:()=>s,Ks:()=>c,RI:()=>l,p2:()=>r});o(610931);var i=o(242343);const n="collectionContextStore",a=(0,o(372660).C)({displayName:n,legacyContextKey:n,modernContextDefaultValue:void 0}),r=a.context,l=a.Provider;function s(){const e=i.useContext(r);if(void 0===e)throw new Error(`No context provided: ${n}`);return e}function c(){return i.useContext(r)}},758261:(e,t,o)=>{o.d(t,{j:()=>n});class i extends(()=>o(151255))().A{}const n=new i},772785:(e,t,o)=>{o.d(t,{O:()=>p,e:()=>d});o(725707),o(500234);var i=()=>o(752597),n=()=>o(881984),a=()=>o(384221),r=()=>o(663539),l=()=>o(360482),s=()=>o(758261),c=()=>o(191759);function d(e,t){const o=l().dd(t),i=r().xh(o);e.setState({...e.state,files:i})}async function p(e){const{blockStore:t,pageViewBlockStore:o,environment:r}=e;o?o.setState({...o.state,forceDiscussionOpen:!0}):c().A.openNewPageDiscussionInput(t),n().o2(r,{from:"page_comments"}),await i().default.afterNextFlush();const l=s().j.find((e=>e.getBlockStore().id===t.id)),d=null==l?void 0:l.getInputStore();d&&a().setSelectionAtEnd({store:d.state.textStore})}},792104:(e,t,o)=>{o.d(t,{f:()=>n});o(242343);const i={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M10 2.4c.345 0 .625.28.625.625v9.966l3.333-3.333a.625.625 0 1 1 .884.884l-4.4 4.4a.625.625 0 0 1-.884 0l-4.4-4.4a.625.625 0 0 1 .884-.884l3.333 3.333V3.025c0-.345.28-.625.625-.625M4.15 16.35a.625.625 0 1 0 0 1.25h11.7a.625.625 0 0 0 0-1.25z"})},n=(0,o(680369).wt)("arrowLineDown",i)},823792:(e,t,o)=>{o.d(t,{p:()=>n});o(242343);var i=o(163643);const n=(0,o(680369).wt)("collectionDescriptionSmall",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 4.667C6.69049 4.667 6.39366 4.54405 6.17481 4.32519C5.95595 4.10634 5.833 3.80951 5.833 3.5C5.833 3.19049 5.95595 2.89366 6.17481 2.67481C6.39366 2.45595 6.69049 2.333 7 2.333C7.30951 2.333 7.60634 2.45595 7.82519 2.67481C8.04405 2.89366 8.167 3.19049 8.167 3.5C8.167 3.80951 8.04405 4.10634 7.82519 4.32519C7.60634 4.54405 7.30951 4.667 7 4.667V4.667ZM8 11C8 11.2652 7.89464 11.5196 7.70711 11.7071C7.51957 11.8946 7.26522 12 7 12C6.73478 12 6.48043 11.8946 6.29289 11.7071C6.10536 11.5196 6 11.2652 6 11V7C6 6.73478 6.10536 6.48043 6.29289 6.29289C6.48043 6.10536 6.73478 6 7 6C7.26522 6 7.51957 6.10536 7.70711 6.29289C7.89464 6.48043 8 6.73478 8 7V11ZM7 0C5.14348 0 3.36301 0.737498 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C3.36301 13.2625 5.14348 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0V0Z"})})},841817:(e,t,o)=>{o.d(t,{L1:()=>r,MY:()=>c,US:()=>p,Uj:()=>s,if:()=>a,z2:()=>l});o(725707),o(491955);var i=()=>o(658388);const n=100;function a(e,t){return e.prompt===t.prompt&&e.type===t.type}function r(e,t,o){const r=l(t).filter((t=>!a(t,e)));i().mJ({userSettingsStore:t,transaction:o,data:{recent_ai_actions:[e,...r].slice(0,n)}})}function l(e){var t;return(null===(t=e.getModel())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.recent_ai_actions)??[]}function s(e,t,o){const n=l(t),r=n.filter((t=>!a(t,e)));n.length!==r.length&&i().mJ({userSettingsStore:t,transaction:o,data:{recent_ai_actions:r}})}function c(e){const{clientPrompt:t,additionalContext:o,promptTitle:i}=e,n=null==o?void 0:o.prompt;if(("helpMeWrite"===t.key||"helpMeEdit"===t.key||"helpMeDraft"===t.key)&&n)return{type:"helpMeDraft"===t.key?"helpMeWrite":t.key,prompt:n,promptTitle:i};const a=function(e,t){if(!p(e.key))return;return null==t?void 0:t.topic}(t,o);return a?{type:"helpMeWrite",prompt:a,promptTitle:i}:void 0}const d={brainstormIdeas:!0,blogPost:!0,outline:!0,socialMediaPost:!0,pressRelease:!0,creativeStory:!0,essay:!0,poem:!0,todoList:!0,meetingAgenda:!0,prosConsList:!0,jobDescription:!0,salesEmail:!0,recruitingEmail:!0};function p(e){return d[e]}},853527:(e,t,o)=>{o.d(t,{Rh:()=>f,d7:()=>d,nr:()=>u,rr:()=>m,uo:()=>g,v:()=>p});var i=()=>o(574361),n=()=>o(45895),a=()=>o(83544),r=()=>o(16456),l=()=>o(427091),s=()=>o(477784);const c=(0,o(653998).YK)({aiSummaryName:{id:"feature.ai_summary.name",defaultMessage:"AI summary"},aiSummaryDescription:{id:"feature.ai_summary.description",defaultMessage:"Summarize pages with AI"},aiAutofillName:{id:"feature.ai_autofill.name",defaultMessage:"Custom AI autofill"},aiAutofillDescription:{id:"feature.ai_autofill.description",defaultMessage:"Autofill properties with AI"},aiTranslationName:{id:"feature.ai_translation.name",defaultMessage:"AI translation"},aiTranslationDescription:{id:"feature.ai_translation.description",defaultMessage:"Translate pages with AI"},aiKeywordsName:{id:"feature.ai_keywords.name",defaultMessage:"AI keywords"},aiKeywordsDescription:{id:"feature.ai_keywords.description",defaultMessage:"Extract keywords with AI"}}),d=[{uri:n().Bn.priorityHmlFeature,name:"Priority",dependencies:[{uri:n().Kg.priorityHmlProperty,type:"property",collectionUri:i().iH,name:"Priority",description:"High, medium, or low",icon:a().A.images.appPackages.featurePrioritySvg,propertySchema:{type:"select",name:"Priority",options:[{id:"priority_low",value:"Low",color:"green"},{id:"priority_medium",value:"Medium",color:"yellow"},{id:"priority_high",value:"High",color:"red"}]}}],collectionUri:i().iH},{uri:n().Bn.progressBarFeature,collectionUri:i().iH,name:"Progress Bar",description:"Visual representation of progress",icon:a().A.images.appPackages.featureStatusSvg,dependencies:[{uri:n().Kg.progressBarCurrentProperty,type:"property",collectionUri:i().iH,name:"Progress Bar Current",propertySchema:{type:"number",name:"Current"}},{uri:n().Kg.progressBarTargetProperty,type:"property",collectionUri:i().iH,name:"Progress Bar Target",propertySchema:{type:"number",name:"Target"}},{uri:n().Kg.progressBarFormulaProperty,type:"property",collectionUri:i().iH,name:"Progress Bar Progress Formula",propertySchema:{type:"formula",name:"Progress bar",formula2:{code:[["‣",[["fpp",{property:n().Kg.progressBarCurrentProperty,collection:{id:i().iH,table:"collection"}}]]],["/"],["‣",[["fpp",{property:n().Kg.progressBarTargetProperty,collection:{id:i().iH,table:"collection"}}]]]],result_type:{type:"number"}},show_as:{type:"bar",color:"green",maxValue:1,showValue:!1},version:"v2"}}]},{uri:n().Bn.ganttChartFeature,collectionUri:i().iH,name:"Gantt Chat",description:"Chart to show progress of a project's tasks over time.",icon:a().A.images.appPackages.featureGanttSvg,dependencies:[{uri:n().Kg.ganttInitiativeProperty,type:"property",collectionUri:i().iH,name:"Initiative",description:"Initiatives associated with a specific project",icon:a().A.images.appPackages.featurePrioritySvg,propertySchema:{type:"select",name:"Initiative",options:[{id:"initiative_a",value:"Initiative A",color:"purple"},{id:"initiative_b",value:"Initiative B",color:"green"},{id:"initiative_c",value:"Initiative C",color:"blue"}]}},{uri:n().Kg.ganttDueDateProperty,type:"property",collectionUri:i().iH,name:"Due Date",description:"When a project is due.",icon:a().A.images.appPackages.featurePrioritySvg,propertySchema:{type:"date",name:"Due Date"}},{uri:n().Kg.ganttTimelineView,type:"collection_view",collectionUri:i().iH,description:"GANTT chart timeline view of projects",value:{type:"timeline",name:"Timeline",format:{collection_view_icon:"/icons/timeline_gray.svg",timeline_show_table:!0,timeline_table_properties:[{width:171,visible:!0,property:"title"},{width:200,visible:!0,property:n().Kg.ganttInitiativeProperty}],timeline_preference:{zoomLevel:"month",centerTimestamp:(0,r().ln)((0,r().Ec)((0,l().P)()),(0,l().P)())},collection_group_by:{sort:{type:"manual"},type:"multi_select",property:n().Kg.ganttInitiativeProperty,hideEmptyGroups:!0}},query2:{timeline_by:n().Kg.ganttDueDateProperty}},collectionViewBlockUri:i().eh}]}],p=[u(),m(),g(),f()];function u(){return{uri:n().Bn.aiSummaryFeature,collectionUri:i().iH,name:s().A.formatMessage(c.aiSummaryName),description:s().A.formatMessage(c.aiSummaryDescription),icon:a().A.images.appPackages.featureAiSummarizeSvg,tooltipImage:{img:a().A.images.tooltips.properties.aiAutofillSummaryPng,scale:.5},isAi:!0,dependencies:[{uri:n().Kg.aiSummaryProperty,type:"property",collectionUri:i().iH,name:s().A.formatMessage(c.aiSummaryName),propertySchema:{type:"text",name:s().A.formatMessage(c.aiSummaryName),ai_inference:{type:"summarize",auto_update_on_edit:!0}}}]}}function m(){return{uri:n().Bn.aiCustomAutofillFeature,collectionUri:i().iH,name:s().A.formatMessage(c.aiAutofillName),description:s().A.formatMessage(c.aiAutofillDescription),icon:"",tooltipImage:{img:a().A.images.tooltips.properties.aiCustomAutofillPng,scale:.5},isAi:!0,dependencies:[{uri:n().Kg.aiCustomAutofillProperty,type:"property",collectionUri:i().iH,name:s().A.formatMessage(c.aiAutofillName),propertySchema:{name:s().A.formatMessage(c.aiAutofillName),type:"text",ai_inference:{type:"custom",prompt:"",auto_update_on_edit:!0}}}]}}function g(){return{uri:n().Bn.aiTranslationFeature,collectionUri:i().iH,name:s().A.formatMessage(c.aiTranslationName),description:s().A.formatMessage(c.aiTranslationDescription),icon:"",tooltipImage:{img:a().A.images.tooltips.properties.aiTranslationPng,scale:.5},isAi:!0,dependencies:[{uri:n().Kg.aiTranslationProperty,type:"property",collectionUri:i().iH,name:s().A.formatMessage(c.aiTranslationName),propertySchema:{name:s().A.formatMessage(c.aiTranslationName),type:"text",ai_inference:{type:"custom",prompt:"",auto_update_on_edit:!0}}}]}}function f(){return{uri:n().Bn.aiKeywordsFeature,collectionUri:i().iH,name:s().A.formatMessage(c.aiKeywordsName),description:s().A.formatMessage(c.aiKeywordsDescription),icon:"",tooltipImage:{img:a().A.images.tooltips.properties.aiKeywordsPng,scale:.5},isAi:!0,dependencies:[{uri:n().Kg.aiKeywordsProperty,type:"property",collectionUri:i().iH,name:s().A.formatMessage(c.aiKeywordsName),propertySchema:{type:"multi_select",name:s().A.formatMessage(c.aiKeywordsName),select_ai_inference:{type:"multi_select",add_options:!0,auto_update_on_edit:!1}}}]}}},870896:(e,t,o)=>{o.d(t,{d:()=>n});o(725707),o(491955);class i extends(()=>o(129044))().default{getInitialState(){return{flowId:void 0,type:"connected_properties_setup",collectionsProperties:{}}}createNewFlowId(){const e=(0,o(214144).JW)();return this.setState({...this.state,flowId:e}),e}getFlowId(){return this.state.flowId?this.state.flowId:this.createNewFlowId()}addCollectionProperties(e,t){const o=this.state.collectionsProperties[e],i=o?{...o,...t}:t;this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:i}})}removeCollectionProperties(e,t){const o=this.state.collectionsProperties[e];if(!o)return;const i=Object.fromEntries(Object.entries(o).filter((e=>{let[o]=e;return!t.has(o)})));if(0===Object.keys(i).length){const{[e]:t,...o}=this.state.collectionsProperties;this.setState({...this.state,collectionsProperties:o})}else this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:i}})}}const n=new i;(0,o(996094).exposeDebugValue)("ConnectedPropertiesSyncStore",n)},909440:(e,t,o)=>{o.d(t,{F1:()=>y,KQ:()=>c,Wt:()=>u,dB:()=>f,vP:()=>p,wL:()=>d,zD:()=>m});o(362833),o(725707),o(403517),o(244387);var i=()=>o(653998),n=()=>o(621214),a=()=>o(84543),r=()=>o(477784),l=()=>o(105373),s=()=>o(330358);const c=(0,i().YK)({emptyWithIcon:{defaultMessage:"Empty page with icon",id:"templatePickerHelpers.basicTemplateItems.emptyWithIcon"},empty:{defaultMessage:"Empty page",id:"templatePickerHelpers.basicTemplateItems.empty"},templates:{defaultMessage:"Templates",id:"templatePickerHelpers.basicTemplateItems.templates"},import:{defaultMessage:"Import",id:"templatePickerHelpers.basicTemplateItems.import"}}),d={name:r().A.formatMessage(c.empty),iconFn:o(22599).Y,type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{a().createAndCommit({userAction:"templatePickerHelpers.emptyTemplateItems",environment:e,canUndo:!0,perform:o=>{n().n({environment:e,store:t,transaction:o})}})}},p={name:r().A.formatMessage(c.templates),type:"templates",iconFn:e=>(0,o(361499).M)(e),shouldShow:()=>!0,onClick:e=>{(0,l().P)({environment:e})}},u={name:r().A.formatMessage(c.templates),type:"templates",iconFn:e=>(0,o(40642).b)(e),shouldShow:()=>!0,onClick:e=>{(0,l().P)({environment:e})}},m={name:r().A.formatMessage(c.import),type:"import",iconFn:o(792104).f,shouldShow:()=>!0,onClick:(e,t)=>{const i=o(214144).JW();o(242333).A.setState({flowId:i}),o(505381).kY(e,{from:"new_page",flowId:i}),s().A.setState({...s().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0})}},g=(0,i().YK)({pageWithIcon:{defaultMessage:"Page with icon",id:"templatePickerHelpers.mobileBasicTemplateItems.pageWithIcon"},emptyPage:{defaultMessage:"Empty page",id:"templatePickerHelpers.mobileBasicTemplateItems.emptyPage"}}),f=[{name:r().A.formatMessage(g.pageWithIcon),type:"page_with_icon",shouldShow:()=>!0,onClick:(e,t)=>{a().createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,canUndo:!0,perform:o=>{n().T({environment:e,store:t,transaction:o})}})}},{name:r().A.formatMessage(g.emptyPage),type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{a().createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,canUndo:!0,perform:o=>{n().n({environment:e,store:t,transaction:o})}})}}];function y(e,t){const o=new Map(e.map((e=>[e.type,e])));return t.reduce(((e,t)=>(o.has(t)&&e.push(o.get(t)),e)),[])}},951156:(e,t,o)=>{o.d(t,{A:()=>r});o(242343);var i=()=>o(803290),n=()=>o(518797),a=o(163643);const r=function(e){const{botValue:t,botStore:r,showActiveDot:l,style:s,size:c}=e,d=(0,o(653998).tz)(),p=(0,i().K8)((()=>{if(r){const e=r.getIcon();if(e)return{pointer:{table:n().GP,id:r.id,spaceId:r.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:n().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[r,t]),u=(0,i().K8)((()=>(null==r?void 0:r.getDisplayName(d))??(0,o(466003).Hg)(t)),[r,t,d]),{activeDotStyle:m}=(0,o(174114).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.accentColors.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",left:11,top:11}})),[]);return(0,a.jsxs)("div",{style:s,children:[(0,a.jsx)(o(28210).B,{icon:p,title:u,size:c||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),l?(0,a.jsx)("div",{style:m}):void 0]})}},954373:(e,t,o)=>{o.d(t,{D:()=>x});o(725707),o(107652),o(491955),o(403517);var i=o(242343),n=()=>o(237385),a=()=>o(803290),r=()=>o(174114),l=()=>o(712437),s=()=>o(653998),c=()=>o(352211),d=()=>o(373122),p=()=>o(84543),u=()=>o(31448),m=o(163643);const g=i.memo((function(e){const{prefix:t,collectionName:o}=e,i=(0,r().IS)((e=>({container:{display:"flex",alignItems:"center",fontWeight:u().Wy.medium,color:e.text.secondary,paddingLeft:8,paddingRight:8},databaseTitle:{...u().RC}})),[]);return(0,m.jsxs)("div",{style:i.container,children:[t,(0,m.jsxs)("span",{style:i.databaseTitle,children:[" ",o]})]})}));var f=()=>o(29869),y=()=>o(640979);const v=i.memo((function(e){const t=(0,n().v3)(),a=(0,s().tz)(),l=(0,r().IS)((e=>({link:{borderRadius:6,height:24,width:24,display:"flex"},button:{height:24,width:24,fill:e.icon.tertiary},icon:{width:20,height:20}})),[]),c=(0,i.useCallback)((()=>{o(598995).FH(t,{from:e.helpButtonContext})}),[t,e.helpButtonContext]);return(0,m.jsx)(o(579494).A,{href:e.href,external:!0,style:l.link,onClick:c,children:(0,m.jsx)(o(356813).A,{icon:o(155342).questionMarkCircleIcon,style:l.button,iconStyle:l.icon,ariaLabel:a.formatMessage({id:"helpButton.ariaLabel",defaultMessage:"Help"})})})}));var h=()=>o(955751),S=()=>o(401382),k=()=>o(858023),b=()=>o(88271);const w=(0,s().YK)({filterPlaceholder:{id:"collectionPicker.searchBarFilter.text",defaultMessage:"Filter…"}}),x=i.memo((function(e){const{collectionStore:t,isOverlay:l,onEmptyEnter:c,onEmptyPageClick:d,onCancelClick:p,canConfigureCollection:u,locked:g,onTemplateClick:f}=e,v=(0,n().Y0)(),[h,S]=(0,i.useState)(""),k=(0,a().uB)(void 0,o(210466).A),w=(0,a().K8)((()=>t.getTemplatePageStores().filter((e=>e.getAlive()))),[t]),x=(0,a().K8)((()=>w.every((e=>e.isReady()))),[w]),M=(0,a().K8)((()=>l&&null!=h&&h.length?(0,o(188877).Ay)(h,w,(e=>String(e.getProperties().title)??"")):w),[w,h,l]),A=(0,r().IS)((e=>({container:{fontSize:14,padding:v.isMobile?"12px 16px":"0 12px 4px 12px",color:e.text.tertiary,wordBreak:"keep-all",...v.isMobile&&{background:e.contentBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}})),[v.isMobile]);if(!x)return null;if(l){const e=w.length>6,i=v.isMobile?{menuType:y().gu.Modal,title:(0,m.jsx)(s().sA,{defaultMessage:"Database templates",id:"database.mobileTemplatesMenu.title"}),left:(0,m.jsx)(o(743668).CancelMenuText,{}),onClickLeft:p}:{menuType:y().gu.Popup,width:360};return(0,m.jsxs)(o(935091).A,{...i,header:(0,m.jsx)(C,{collectionStore:t}),children:[0===w.length&&(0,m.jsx)(b().A,{children:(0,m.jsx)("div",{style:A.container,children:(0,m.jsx)(s().sA,{defaultMessage:"Replicate page formats inside this database with templates.",id:"database.emptyTemplatesList.info"})})}),e?(0,m.jsx)(P,{templateInputValue:h,setTemplateInputValue:S}):null,(0,m.jsx)(I,{collectionStore:t,onEmptyEnter:c,onEmptyPageClick:d,onCancelClick:p,canConfigureCollection:u,isOverlay:l,locked:g,onTemplateClick:f,menuListStore:k,templateInputValue:h,filteredTemplatePageStores:M,draggable:!(e&&h)})]})}return(0,m.jsx)(I,{collectionStore:t,onEmptyEnter:c,onEmptyPageClick:d,onCancelClick:p,canConfigureCollection:u,isOverlay:l,locked:g,onTemplateClick:f,menuListStore:k,templateInputValue:h,filteredTemplatePageStores:M,draggable:!0})})),C=i.memo((function(e){const{collectionStore:t}=e,{isMobile:i}=(0,n().Y0)(),l=(0,s().tz)(),c=(0,o(622286).X)("db_ux_chrome"),d=(0,o(308265).BG)(),p=(0,a().K8)((()=>(0,o(202193).Qo)({intl:l,collectionStore:t,isDBUXChromeEnabled:c,isWorkflowsAppContainerEnabled:d})),[t,l,c,d]),u=(0,r().IS)((()=>({container:{marginTop:6}})),[]);return i?null:(0,m.jsx)(o(932322).Ay,{style:u.container,title:(0,m.jsx)(g,{prefix:(0,m.jsx)(s().sA,{id:"database.templatesList.templatesFor",defaultMessage:"Templates for"}),collectionName:p}),right:(0,m.jsx)(v,{helpButtonContext:"collection_templates_menu",href:(0,o(392608).xS)("guides.databaseTemplates")})})})),P=i.memo((function(e){const{templateInputValue:t,setTemplateInputValue:a}=e,{isMobile:l,isAndroid:c}=(0,n().Y0)(),d=(0,s().tz)(),p=(0,i.useCallback)((e=>a(e.currentTarget.value)),[a]),u=(0,r().IS)((()=>({container:{margin:l?0:"10px 0"},input:{...c&&{borderBottom:"none"}}})),[c,l]);return(0,m.jsx)("div",{style:u.container,children:(0,m.jsx)(S().Ay,{value:t,focusInitial:!l||void 0,placeholder:d.formatMessage(w.filterPlaceholder),showClearButton:!0,inputLeft:(0,m.jsx)(S().Zf,{icon:o(842940).J}),onChange:p,style:u.input})})})),I=i.memo((function(e){const{filteredTemplatePageStores:t,draggable:r,collectionStore:s,onEmptyEnter:u,onEmptyPageClick:g,onCancelClick:y,canConfigureCollection:v,isOverlay:S,locked:w,onTemplateClick:x,menuListStore:C,templateInputValue:P}=e,I=(0,n().v3)(),{isMobile:A}=(0,n().Y0)(),_=(0,i.useContext)(o(749975).p2),T=(0,i.useContext)(o(282131).n),B=(0,a().K8)((()=>(0,o(937968).EF)(I)),[I]),j=(0,i.useCallback)((e=>{C.unsetFocus(),p().createAndCommit({userAction:"CollectionTemplatePicker.handleCollectionTemplatesReorder",environment:I,canUndo:!0,perform:t=>d().lU({collectionStore:s,newTemplateIds:e,transaction:t})})}),[I,s,C]),V=(0,i.useCallback)((()=>{var e;B&&(u(),c().ki(I,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:!0,collection_id:s.id,collection_view_id:null==_||null===(e=_.collectionViewStore())||void 0===e?void 0:e.id}))}),[I,s,u,_,B]),E=(0,i.useCallback)((e=>{B&&(g(e.event),c().ki(I,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:"keydown"===e.event.type,..._&&(0,o(876695).sl)(_)}))}),[B,_,I,g]),D=(0,i.useCallback)((()=>{var e;if(!B)return;const{performResult:t}=p().createAndCommit({userAction:"CollectionTemplatePicker.newPage",environment:I,canUndo:!0,perform:e=>d().bI({environment:I,collectionStore:s,transaction:e,title:P})});if(t){const{mainEditorCurrentBlockStore:e}=o(485966).default.state,i=e?(0,f().Ay)({store:e,peekViewBlockId:t.id,fullyQualified:!1,pageVisitSource:l().y8.Create}):(0,f().Ay)({store:t,fullyQualified:!1,pageVisitSource:l().y8.Create});T?T(i):o(865226).oo({environment:I,url:i})}c().er(I,{collection_id:s.id,collection_view_id:null==_||null===(e=_.collectionViewStore())||void 0===e?void 0:e.id}),null==y||y()}),[B,I,s,_,P,y,T]),W=(0,i.useMemo)((()=>({key:"create-template",render:e=>(0,m.jsx)(M,{isOverlay:S,locked:w,menuListItemProps:e}),action:D})),[D,S,w]),R=(0,a().K8)((()=>null==_?void 0:_.defaultPageTemplateStore.state),[_]),L=(0,a().K8)((()=>({key:"empty",render:e=>0===t.length||""!==P?null:(0,m.jsx)(h().K,{collectionStore:s,canConfigureCollection:v,isOverlay:S,templateStore:void 0,isMobile:A,locked:w||!v,draggable:!0,isDefault:void 0===(null==R?void 0:R.id),onCancelClick:y,...e}),action:E})),[v,s,null==R?void 0:R.id,A,E,S,w,y,P,t.length]),N=(0,i.useCallback)((e=>{const t=e.getAutomationStore(),n=null!=t&&t.isActive()?t.getRecurrence():void 0,a=t&&!t.canEdit(),l="disabled_duplication"===(null==t?void 0:t.getStatus())||"disabled_inactive_space"===(null==t?void 0:t.getStatus()),c={key:e.id,render:t=>(0,i.createElement)(h().K,{...t,key:e.id,isOverlay:S,collectionStore:s,canConfigureCollection:v,templateStore:e,isMobile:A,locked:w,onCancelClick:y,draggable:r,isDefault:(null==R?void 0:R.id)===e.id,recurrence:n,recurrenceDisabled:l,recurrenceButtonDisabled:a}),action:t=>{B&&x({templateStore:e,isKeyboard:"keydown"===t.event.type,useCrdt:(0,o(236907).D8)(s.getSpaceStore())})}};return c}),[v,B,s,null==R?void 0:R.id,r,A,S,w,y,x]),K=(0,a().K8)((()=>{const e=t.map((e=>e.id)),i=[0!==t.length?{key:"templates",render:t=>{if(0===t.children.length)return null;const i=t.children.slice(0,t.children.length-1),n=t.children[t.children.length-1];return(0,m.jsx)(b().A,{...t,disableDesktopPadding:!S,disableMobileBorders:!0,children:(0,m.jsxs)(m.Fragment,{children:[A||w||!v?i.map(((e,t)=>i[t])):(0,m.jsx)(o(97787).Ay,{direction:"vertical",keys:e,disabled:!r,renderKey:t=>i[e.indexOf(t)],onDrop:j}),n]})})},items:[...t.map(N),L]}:null,v?{key:"create-template",render:e=>(0,m.jsx)(b().A,{topBorder:S,disableDesktopPadding:!S,disableMobileBorders:!0,...e}),items:[W]}:null];return i.filter((e=>null!==e))}),[t,N,L,v,W,S,A,w,r,j]);return(0,m.jsx)(k().Ay,{type:k().Oh.Vertical,store:C,sections:K,onEmptyEnter:V,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,resetFocusOnMouseOut:!0})})),M=i.forwardRef((function(e,t){const{menuListItemProps:i,isOverlay:n,locked:a}=e,r=(0,m.jsx)(s().sA,{defaultMessage:"New template",id:"database.templateView.newTemplateButton"});return n?(0,m.jsx)(o(276647).o,{title:r,color:"secondary",...i}):(0,m.jsx)(o(568344).J,{title:r,icon:(0,o(178063).plusIcon)(),type:"new_template",format:n?"collection-overlay":"page-menu-item",locked:a,...i})}))},990910:(e,t,o)=>{o.d(t,{FB:()=>u,Ql:()=>m,SM:()=>g,Wv:()=>a,Yz:()=>l,ds:()=>n,e4:()=>i,eQ:()=>r,im:()=>c,jw:()=>s,k2:()=>p,uG:()=>d});const i=8,n=10,a=8,r=24,l=6,s=1.5,c=(r-s)/2,d=r+l,p=`calc(100% + ${a+(i-l)-d}px)`,u=r+8,m=-16;function g(e){return"margin_comments"===e?12:"comment_unfurl"===e?14:16}},993254:(e,t,o)=>{o.d(t,{T:()=>n});o(362833),o(725707),o(244387);var i=()=>o(437800);function n(e){const{environment:t,collectionStore:o,duplicate:n,droppedStores:a,transaction:r,duplicateActions:l}=e,{movedStores:s,reparentedStores:c}=a.reduce(((e,t)=>(n||t.getAssociatedCollectionId()!==(null==o?void 0:o.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...s,...i().MS({environment:t,droppedStores:c,duplicate:n,transaction:r,resolveTemplateVariables:!1,duplicateActions:l})]}},994488:(e,t,o)=>{o.d(t,{o:()=>i});o(362833),o(403517);function i(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(0===o.length)return e.map((e=>[e]));const a=[];for(const r of e)a.push(...i(o[0],...o.slice(1)).map((e=>[r,...e])));return a}}}]);