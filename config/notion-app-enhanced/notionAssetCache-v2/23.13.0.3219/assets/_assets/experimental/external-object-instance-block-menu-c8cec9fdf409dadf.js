"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[73006,90871],{44250:(e,t,n)=>{function o(e){return!(!e||"askUserToPick"in e)}function a(e){if(!e||!("askUserToPick"in e))return e}function r(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}n.d(t,{DK:()=>a,K$:()=>o,j6:()=>r})},129243:(e,t,n)=>{n.d(t,{GO:()=>T,Ju:()=>j,KA:()=>B,L0:()=>D,L2:()=>R,dA:()=>V,gI:()=>M,iN:()=>L,oG:()=>O,sK:()=>z});n(725707),n(491955),n(771702);var o=()=>n(519423),a=()=>n(486540),r=()=>n(446588),i=()=>n(220574),s=()=>n(145017),c=()=>n(518797),d=()=>n(66460),l=()=>n(528762),p=()=>n(409211),m=()=>n(23371),u=()=>n(76394),v=()=>n(145046),b=()=>n(303298),g=()=>n(754697),f=()=>n(477784),h=()=>n(352723),y=()=>n(413871),A=()=>n(818369),S=()=>n(70989),I=()=>n(919536),k=()=>n(759625),w=()=>n(575015),C=()=>n(84543),_=()=>n(271674);const P=(0,n(653998).YK)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function x(e,t){const{environment:n,spaceStore:o,spaceRole:a}=t,r=function(e){const{name:t,spaceStore:n,userId:o,icon:a,type:r,environment:i}=e,s=Date.now(),d={name:t,created_at:s,created_by_table:p().oo,created_by_id:o,alive:!0,icon:a,space_id:n.id,last_edited_at:s,last_edited_by_id:o,last_edited_by_table:p().oo};switch(r){case"guest":return{...d,type:"guest",capabilities:e.capabilities,parent_table:l().NX,parent_id:n.id,integration_id:void 0};case"scim":return{...d,id:(0,g().Z1)({environment:i,table:c().GP,spaceId:n.id}),type:"scim",parent_table:p().oo,parent_id:o};default:(0,u().HB)(r)}}(t),i=k().eC({environment:n,table:c().GP,value:r,inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e});return I().dy({environment:n,spaceStore:o,permissionItems:[{type:"bot_permission",role:a,bot_id:i.id}],transaction:e}),{botStore:i}}function M(e){const{environment:t}=e,{serverCommitResult:n,performResult:{botStore:o}}=C().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>x(t,e)});return{botStore:o,transactionPromise:n}}async function B(e){const{environment:t,botId:n,onSuccess:o}=e,a=await A().callApi({eventName:"deleteBot",environment:t,data:{botId:n}});"failed"===a.type?v().Qg(a):"success"===a.type&&o&&(await _().oX({environment:t}),o())}async function j(e){const{environment:t,table:n,id:a,type:r}=e,i=await A().callApi({eventName:"getBots",environment:t,data:{table:n,id:a,type:r},headers:(0,o().WS)({spaceId:n===l().NX?a:void 0})});return"failed"===i.type?(v().Qg(i),{botIds:[],recordMap:{}}):{botIds:i.data.botIds,recordMap:i.data.recordMap}}async function T(e){const{environment:t,currentSpaceStore:n,botIds:o}=e;if(!n)return;const a=await A().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:n.id,botIds:o}});if("failed"!==a.type)return a.data;v().Qg(a)}async function V(e){const{environment:t,botId:n}=e,o=await A().callApi({eventName:"getBotToken",environment:t,data:{botId:n}});if("failed"!==o.type)return o.data.token;v().Qg(o)}function z(e){const{botValue:t,store:n,environment:o}=e,{id:r,parent_id:i,parent_table:s,capabilities:c}=t,d={type:"bot_permission",bot_id:r,parent_id:i,parent_table:s,role:(0,a().MD)(c)};C().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:o,canUndo:!0,perform:e=>{I().zP({environment:o,store:n,permissionItems:[d],transaction:e})}})}function O(e){const{botId:t,store:n,environment:o}=e,a=n.getPermissionItems().filter((0,u().u0)((e=>(0,r().P3)(e)?{true:e}:{false:e})));for(const r of a)if(r.bot_id===t){const e={...r,role:"none"};C().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:o,canUndo:!0,perform:t=>{I().zP({environment:o,store:n,permissionItems:[e],transaction:t})}})}}function D(e){const{currentSpaceStore:t,environment:n,pages:o,botStore:a,addPermission:r}=e;if(!t)return;const i=(0,h().Ws)({botStore:a,addPermission:r});o.forEach((e=>{const o=y().sk.createChildStore(t,{table:s().ev,id:e,spaceId:t.getSpaceId()});C().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:n,canUndo:!0,perform:e=>{I().zP({environment:n,store:o,permissionItems:[i],transaction:e})}})}))}async function L(e){const{environment:t,spaceStore:n,botStore:o,pageIdAndOperations:a,concurrency:r=20}=e;0!==a.length&&await(0,m().lX)(a,r,(async e=>{const a=y().sk.createChildStore(n,{table:s().ev,id:e.pageId,spaceId:n.getSpaceId()}),r=(0,h().Ws)({botStore:o,addPermission:"add"===e.operationType}),{serverCommitResult:i}=C().createAndCommit({userAction:`botActions.updateBotPermissionsForPages.${e.operationType}`,environment:t,canUndo:!0,perform:e=>{I().zP({environment:t,store:a,permissionItems:[r],transaction:e})}});await i}))}async function R(e){const{environment:t,spaceStore:n,spaceViewStore:a,templatePageId:r,botValue:s,pages:l}=e;if(!n)return;const p=y().sk.createChildStore(n,{table:c().GP,id:s.id});if(r)return await async function(e){const{environment:t,spaceStore:n,spaceViewStore:a,templatePageId:r,botStore:s}=e;if(!n||!a)return;try{S().m({message:P.duplicatingTemplate});const e=await A().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:r,spaceId:(0,d().e)(void 0)},shallow:!1},headers:(0,o().WS)({recordId:r})});if("failed"===e.type)return;const c=i().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:l}=await(0,b().nd)(),{performResult:p}=C().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const o=l({environment:t,recordMap:c,copyPageId:r,isPrivate:!0,spaceStore:n,spaceViewStore:a,transaction:e,allowCopyExternalObjectInstances:!1}),i=a.getPrivatePageIds();i.length>0&&k().zv({store:a,data:{private_pages:[o.id,...i]},transaction:e});const d=(0,h().Ws)({botStore:s,addPermission:!0});return I().zP({environment:t,store:o,permissionItems:[d],transaction:e}),o}});return p}catch(c){w().D6({label:f().A.formatMessage(P.duplicatingTemplateError)})}finally{S().V()}}({environment:t,templatePageId:r,botStore:p,spaceStore:n,spaceViewStore:a});D({environment:t,currentSpaceStore:n,botStore:p,pages:l,addPermission:!0})}},150936:(e,t,n)=>{n.d(t,{b:()=>a});n(242343);var o=n(163643);const a=(0,n(680369).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},386311:(e,t,n)=>{n.d(t,{I:()=>a});n(242343);var o=n(163643);const a=(0,n(680369).wt)("loop",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M5.80371 3.12305C5.81006 3.50391 6.05762 3.74512 6.47656 3.74512H11.3643C11.9546 3.74512 12.2783 4.0498 12.2783 4.66553V11.2925L11.377 10.3149L10.8628 9.80078C10.5962 9.54688 10.2344 9.52783 9.96777 9.78809C9.71387 10.0483 9.72021 10.4229 9.98047 10.6831L12.145 12.8413C12.6211 13.311 13.167 13.311 13.6431 12.8413L15.8076 10.6831C16.0679 10.4229 16.0742 10.0483 15.8203 9.78809C15.5537 9.52783 15.1919 9.54688 14.9253 9.80078L14.4111 10.3149L13.5161 11.2861V4.56396C13.5161 3.20557 12.8052 2.50098 11.4341 2.50098H6.47656C6.05762 2.50098 5.79736 2.74219 5.80371 3.12305ZM0.186035 7.05859C0.446289 7.3252 0.808105 7.30615 1.07471 7.0459L1.59521 6.53809L2.48389 5.56689V12.2891C2.48389 13.6475 3.19482 14.3521 4.56592 14.3521H9.52344C9.94238 14.3521 10.2026 14.1108 10.1963 13.73C10.1899 13.3428 9.94238 13.1079 9.52344 13.1079H4.64209C4.05176 13.1079 3.72803 12.7969 3.72803 12.1812V5.5542L4.62305 6.53809L5.14355 7.0459C5.40381 7.30615 5.77197 7.3252 6.03223 7.05859C6.29248 6.79834 6.28613 6.43018 6.01953 6.16992L3.85498 4.01172C3.37891 3.53564 2.83936 3.53564 2.36328 4.01172L0.19873 6.16992C-0.0678711 6.43018 -0.0742188 6.79834 0.186035 7.05859Z"})})},389324:(e,t,n)=>{n.r(t),n.d(t,{gearIcon:()=>r,iconDefinition:()=>a});n(242343);var o=n(163643);const a={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.29 10c0 1.5 1.22 2.71 2.71 2.71 1.5 0 2.71-1.21 2.71-2.71S11.5 7.29 10 7.29 7.29 8.5 7.29 10m1.25 0c0-.81.66-1.46 1.46-1.46.81 0 1.46.65 1.46 1.46s-.65 1.46-1.46 1.46-1.46-.65-1.46-1.46"}),(0,o.jsx)("path",{d:"M8.49 17.64q.75.15 1.53.15v-.01c.47 0 .94-.04 1.41-.13.26-.05.46-.25.5-.51l.26-1.53.15-.06 1.28.91c.21.14.49.14.71 0 .41-.28.8-.61 1.18-.98.33-.33.63-.7.9-1.09.15-.21.15-.5 0-.71l-.9-1.27.06-.15 1.55-.27c.26-.05.46-.25.51-.5a7.8 7.8 0 0 0 .02-2.94.62.62 0 0 0-.51-.5l-1.53-.26-.06-.15.91-1.28c.14-.21.14-.49 0-.71a7.9 7.9 0 0 0-2.07-2.08.62.62 0 0 0-.71 0l-1.27.9-.15-.06-.27-1.55a.64.64 0 0 0-.5-.51c-.5-.1-1-.15-1.53-.15-.47 0-.95.04-1.41.13-.26.05-.46.25-.5.51l-.26 1.53-.15.06-1.28-.91a.65.65 0 0 0-.71 0 7.9 7.9 0 0 0-2.08 2.07c-.15.21-.15.5 0 .71l.9 1.27-.06.15-1.55.27c-.26.05-.46.25-.51.5-.1.5-.15 1-.15 1.53 0 .47.04.95.13 1.41.05.26.25.46.51.5l1.53.26.06.15-.91 1.28c-.14.21-.15.49 0 .71.29.42.61.81.98 1.18.34.34.7.65 1.09.91.21.15.5.15.71 0l1.27-.9.15.06.27 1.55c.05.26.25.46.5.51m2.29-1.15c-.53.07-1.09.07-1.63 0l-.25-1.47a.62.62 0 0 0-.42-.49 6 6 0 0 1-.68-.28.63.63 0 0 0-.65.04l-1.2.85a6.8 6.8 0 0 1-1.14-1.16l.86-1.21c.13-.19.15-.43.05-.64-.11-.22-.21-.45-.28-.68a.62.62 0 0 0-.49-.43l-1.45-.25a6.7 6.7 0 0 1 0-1.63l1.47-.25c.23-.04.42-.2.49-.42.07-.23.17-.46.28-.68.11-.21.09-.46-.04-.65l-.85-1.2A6.8 6.8 0 0 1 6.01 4.8l1.21.86c.19.13.43.15.64.05.22-.11.45-.21.68-.28s.39-.26.43-.49l.25-1.45c.53-.07 1.09-.07 1.63 0l.25 1.47c.04.23.2.42.42.49.23.07.46.17.68.28.21.11.46.09.65-.04l1.2-.85A6.8 6.8 0 0 1 15.19 6l-.86 1.21c-.13.19-.15.43-.05.64.11.22.21.45.28.68s.26.39.49.43l1.45.25a6.7 6.7 0 0 1 0 1.63l-1.47.25c-.23.04-.42.2-.49.42-.07.23-.17.46-.28.68-.11.21-.09.46.04.65l.85 1.2a6.8 6.8 0 0 1-1.16 1.14l-1.21-.86a.64.64 0 0 0-.64-.05c-.22.11-.45.21-.68.28s-.39.26-.43.49z"})]})},r=(0,n(680369).wt)("gear",a)},432175:(e,t,n)=>{n.d(t,{f:()=>a});var o=()=>n(759625);function a(e){const{collectionViewStore:t,update:n,transaction:a}=e;o().zv({store:t.getQueryStore(),data:n,transaction:a})}},439500:(e,t,n)=>{n.d(t,{p:()=>r});n(242343);var o=n(163643);const a={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 1 0 1.1 0z"}),(0,o.jsx)("path",{d:"M15.4 1.95a3.48 3.48 0 0 0-3.48 3.48v1.92H6.4a2.425 2.425 0 0 0-2.425 2.425v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.425 2.425 0 0 0 13.6 7.35h-.43V5.43a2.23 2.23 0 1 1 4.46 0v2.095a.625.625 0 1 0 1.25 0V5.43a3.48 3.48 0 0 0-3.48-3.48M5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},r=(0,n(680369).wt)("lockOpen",a)},533639:(e,t,n)=>{n.d(t,{p:()=>o});class o extends(()=>n(998969))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}},534895:(e,t,n)=>{n.d(t,{V:()=>o});const o=(0,n(851552).Dv)("importFile")},665051:(e,t,n)=>{n.r(t),n.d(t,{ExternalObjectInstanceBlockMenu:()=>w});n(362833),n(725707),n(500234);var o=n(242343),a=()=>n(237385),r=()=>n(803290),i=()=>n(706788),s=()=>n(386311),c=()=>n(384818),d=()=>n(518797),l=()=>n(653998),p=()=>n(76394),m=()=>n(641546),u=()=>n(133763),v=()=>n(84543),b=()=>n(271674),g=()=>n(640979),f=()=>n(802955),h=()=>n(773082),y=()=>n(331516),A=()=>n(935091),S=()=>n(858023),I=()=>n(88271),k=n(163643);function w(e){const{titleForReloadMenuOption:t,store:n,parentBlockStore:w,onAccept:C,onDismiss:_,extraSecondaryItemKey:P,token:x}=e,M=(0,a().v3)(),B=(0,u().J)(),j=(0,o.useCallback)((e=>{const t={blocks:[n],environment:M,publicEditMode:void 0,analyticsFrom:"external_object_instance_block_menu",lazyDependencies:B};return{key:e.key,render:(n,o)=>e.render(n,t,{onAccept:C,onFocus:o.onFocus}),action:n=>{let{event:o}=n;return e.action(t,o)}}}),[n,M,B,C]),T=(0,r().K8)((()=>{const e=n.getFormat().bot_id,t=h().A.getBotsAsRecordMap();if(e&&!0===h().A.state.loaded){const n=t.getValue({table:d().GP,id:e});if(n&&n.integration_id&&n.integration_id===i().ob)return!1}if(e&&!0===h().A.state.loaded){if(!h().A.externalAuthentications.state.find((t=>{let{id:n}=t;return e===n})))return!1}return!0}),[n]),V=[],z=!(0,r().O$)(f().e);T&&V.push({key:0,render:e=>(0,k.jsx)(I().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"reload external instance object",render:e=>(0,k.jsx)(y().A,{...e,title:t,svg:c().$,disabled:z,style:z?{opacity:.4}:void 0,tooltipText:z?(0,k.jsx)(l().sA,{id:"externalObjectInstanceBlockMenu.reload.offlineTooltip",defaultMessage:"Unavailable while offline"}):void 0}),action:()=>{n&&(n.isExternalObjectInstanceBlockStore()||n.isExternalObjectInstancePageBlockStore())&&b().lf({environment:M,from:"page_more_menu",store:n,spaceId:n.getSpaceId()})}}]});const O=(0,r().K8)((()=>{switch(P){case"preview_to_mention":return[j(m().oq)];case"mention_to_preview":if(!n.isExternalObjectInstanceBlockStore())return[];const e={key:"turn preview into block",render:e=>(0,k.jsx)(y().A,{...e,title:(0,k.jsx)(l().sA,{id:"hoverPreviewOverlay.action.turnPreviewIntoPreview",defaultMessage:"Turn into preview"}),svg:s().I}),action:()=>{w&&x&&v().createAndCommit({userAction:"HoverPreviewOverlay.transformExternalObjectInstanceMentionIntoBlock",environment:M,canUndo:!0,perform:e=>{b().FQ({block:n,parentStore:w,transaction:e,token:x}),e.postSubmitCallbacks.push((e=>{e||null==_||_()}))}})}};return[e];default:(0,p().HB)(P)}}),[P,j,n,w,x,M,_]);return V.push({key:1,render:e=>(0,k.jsx)(I().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[...O,j(m().tA)]}),(0,k.jsx)(A().A,{menuType:g().gu.Popup,children:(0,k.jsx)(S().Ay,{type:S().Oh.Vertical,initialFocus:void 0,onAccept:C,sections:V,style:{paddingTop:3,paddingBottom:3}})})}},827164:(e,t,n)=>{n.d(t,{d:()=>a});n(242343);const o={viewBox:"0 0 20 20",svg:(0,n(163643).jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.342.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},a=(0,n(680369).wt)("docOnDoc",o)},951156:(e,t,n)=>{n.d(t,{A:()=>i});n(242343);var o=()=>n(803290),a=()=>n(518797),r=n(163643);const i=function(e){const{botValue:t,botStore:i,showActiveDot:s,style:c,size:d}=e,l=(0,n(653998).tz)(),p=(0,o().K8)((()=>{if(i){const e=i.getIcon();if(e)return{pointer:{table:a().GP,id:i.id,spaceId:i.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:a().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[i,t]),m=(0,o().K8)((()=>(null==i?void 0:i.getDisplayName(l))??(0,n(466003).Hg)(t)),[i,t,l]),{activeDotStyle:u}=(0,n(174114).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.accentColors.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",left:11,top:11}})),[]);return(0,r.jsxs)("div",{style:c,children:[(0,r.jsx)(n(28210).B,{icon:p,title:m,size:d||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),s?(0,r.jsx)("div",{style:u}):void 0]})}},994488:(e,t,n)=>{n.d(t,{o:()=>o});n(362833),n(403517);function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(0===n.length)return e.map((e=>[e]));const r=[];for(const i of e)r.push(...o(n[0],...n.slice(1)).map((e=>[i,...e])));return r}}}]);