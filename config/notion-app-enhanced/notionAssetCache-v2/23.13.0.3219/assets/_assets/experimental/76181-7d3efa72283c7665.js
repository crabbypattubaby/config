"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[76181],{114430:(e,t,o)=>{o.d(t,{Ay:()=>K,Kd:()=>N});o(358848),o(91270),o(403517);var i=o(242343),n=()=>o(237385),s=()=>o(803290),a=()=>o(174114),r=()=>o(533666),d=()=>o(263873),l=()=>o(289765),c=()=>o(653998),u=()=>o(883674),m=()=>o(106144),p=()=>o(360378),g=()=>o(126451),f=()=>o(535906),S=()=>o(273520),b=()=>o(935091),h=()=>o(858023),v=()=>o(743668),y=()=>o(397791),_=()=>o(28210),x=()=>o(709237),I=()=>o(88271),A=()=>o(103151),C=()=>o(477784),T=()=>o(640979),w=()=>o(906230),k=()=>o(378219),j=()=>o(622163),B=()=>o(907721),M=()=>o(413871),H=()=>o(872835),P=o(163643);function L(e){const{store:t,from:i,type:r,canEditItem:d,itemDepth:l,isHovered:c,isFocused:u,onToggle:m}=e,{isMobile:p}=(0,n().Y0)(),g=p||c||u,f=(0,s().K8)((()=>{var e;const o=Boolean(t.getAppContainerBlockStore()),i=t.isPlaceholderWorkflowTemplateBlock(),n=null===(e=t.getCollectionStore())||void 0===e?void 0:e.isSyncedCollection();return Boolean(t.getType()&&d&&!o&&!i&&!n)}),[t,d]),S=function(e){const{showRightIcons:t}=e;return(0,a().IS)((()=>({iconContainer:{display:"flex",paddingLeft:3,...t?{}:{...j().Qg,display:"block"}}})),[t])}({showRightIcons:g});return r===o(688986).yy?null:(0,P.jsxs)("div",{style:S.iconContainer,children:[(0,P.jsx)(D,{store:t,from:i,type:e.type,itemIndex:e.itemIndex,itemDepth:l}),f&&(0,P.jsx)(F,{store:t,onToggle:m,isTopLevelItem:0===l,from:i,type:r})]})}const K=i.memo(L);function F(e){const{store:t,onToggle:o,isTopLevelItem:i,from:a,type:r}=e,d=(0,n().v3)(),{isMobile:c}=d.device,u=(0,s().K8)((()=>t.isCollectionView()),[t]),p=(0,s().K8)((()=>t.getLinkedViewCollectionBlockStores()),[t]),g=(0,s().K8)((()=>{var e;const o=null===(e=t.getCollectionViewStores().at(0))||void 0===e?void 0:e.id;if(!o)return;const i=M().pS.createChildStore(t,{table:l().Gy,id:o});return null==i?void 0:i.getFormatStore().getValue()}),[t]),f=C().A.formatMessage(H().v.addAPageInside);return u&&!g&&0===p.length?(0,P.jsx)(R,{disabled:!0}):p.length<=1?(0,P.jsx)(A().A,{renderTooltip:()=>f,placement:B().W.Bottom,render:e=>{const n={...e,onClick:e=>{m().y6({blockStore:p[0]??t,shouldNavigateToSource:!1,environment:d,event:e,analytics:{from:a,type:r},toggleOptions:{onToggle:o,isTopLevelItem:i}})}};return(0,P.jsx)(R,{events:n})}}):(0,P.jsx)(A().A,{renderTooltip:()=>f,placement:B().W.Bottom,render:e=>(0,P.jsx)(S().Ay,{popupType:c?S().z7.SlideUp:S().z7.Popup,renderOrigin:t=>(0,P.jsx)(R,{events:(0,w().A)(e,t)}),render:e=>(0,P.jsx)(E,{store:t,onToggle:o,parent:e,isTopLevelItem:i,from:a,type:r})})})}function R(e){const{isMobile:t}=(0,n().Y0)(),o=N();return(0,P.jsx)(g().A,{ariaLabel:C().A.formatMessage(H().v.addAPageInside),mobileFeedback:t,style:o.button,disabled:e.disabled,disabledFeedback:e.disabled,...e.events,children:(0,P.jsx)(y().I,{icon:d().plusSmallIcon,size:"sm",color:t?"tertiary":"secondary"})})}function E(e){const{store:t,onToggle:o,parent:i,isTopLevelItem:r,from:d,type:l}=e,u=(0,n().v3)(),{isMobile:p}=u.device,g=(0,s().K8)((()=>t.getLinkedViewCollectionBlockStores()),[t]),S=(0,a().IS)((()=>({menuItem:{display:"flex",alignItems:"center",whiteSpace:"pre"}})),[]),y={menuType:p?T().gu.Modal:T().gu.Popup,right:p?(0,P.jsx)(v().DoneMenuText,{}):void 0},A={key:"collections",render:e=>(0,P.jsx)(I().A,{...e,title:(0,P.jsx)(c().sA,{defaultMessage:"Add to",id:"sidebarItem.addAPageInside.popup.addTo"})}),items:g.map((e=>({key:e.id,render:t=>(0,P.jsx)(f().A,{...t,title:(0,P.jsx)("div",{style:S.menuItem,children:(0,P.jsx)(x().A,{store:e})}),icon:(0,P.jsx)(_().B,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:14})}),action:t=>{m().y6({blockStore:e,environment:u,event:t.event,shouldNavigateToSource:!0,analytics:{from:d,type:l},toggleOptions:{onToggle:o,isTopLevelItem:r}})}})))};return(0,P.jsx)(b().A,{...y,children:(0,P.jsx)(h().Ay,{type:h().Oh.Vertical,onAccept:i.close,initialFocus:void 0,sections:[A]})})}function D(e){const{store:t,from:o,type:i,itemDepth:s,itemIndex:a}=e,d=(0,c().tz)(),l=(0,n().v3)(),{isMobile:m}=l.device,f=N(),S=e=>{const n=k().Uo(t);p().Lt({environment:l,store:t}),u().it({environment:l,stores:[t],left:e.clientX,top:e.clientY,showInput:!1,actionSectionGroupKey:"sidebar_outliner",analyticsFrom:"sidebar_more_menu",optionalAnalyticsProperties:{teamStore:n,type:0===s?"top_level":"nested",outliner_type:i,outliner_position:a,outliner_depth:s,outliner_location:"main_sidebar"===o?"sidebar":"pane"}})},b="bookmarks"===i?d.formatMessage({defaultMessage:"Remove, rename, and more…",id:"sidebarItem.favoritedPageMenuButton.tooltip"}):d.formatMessage({defaultMessage:"Delete, duplicate, and more…",id:"sidebarItem.pageMenuButton.tooltip"});return(0,P.jsx)(A().A,{renderTooltip:()=>b,placement:B().W.Bottom,render:e=>(0,P.jsx)(g().A,{ariaLabel:b,mobileFeedback:m,style:f.button,onClick:S,...e,children:(0,P.jsx)(y().I,{icon:r().Y,size:"sm",color:m?"tertiary":"secondary"})})})}function N(){const e=(0,n().v3)().device.isMobile;return(0,a().IS)((t=>({button:e?{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:4,marginLeft:0}:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,marginLeft:4}})),[e])}},382329:(e,t,o)=>{o.d(t,{Oh:()=>v,Qs:()=>h,Wy:()=>g,aX:()=>S,it:()=>b,tL:()=>f});o(725707),o(491955),o(324989);var i=()=>o(486826),n=()=>o(885237),s=()=>o(76394),a=()=>o(759625),r=()=>o(84543),d=()=>o(658388),l=()=>o(155297),c=()=>o(485966),u=()=>o(503984),m=()=>o(520969),p=()=>o(348328);function g(e){const{currentUserSettingsStore:t}=c().default.state;t&&r().createAndCommit({userAction:"SidebarPersonalHomeButton.markAsSeen",environment:e,canUndo:!0,perform:e=>{d().mJ({userSettingsStore:t,transaction:e,data:{seen_personal_home:!0}})}})}function f(e){const{currentUserSettingsStore:t}=c().default.state;t&&(u().default.setState({type:"inactive"}),r().createAndCommit({userAction:"SidebarPersonalHomeButton.markHomeTooltipAsSeen",environment:e,canUndo:!0,perform:e=>{d().mJ({userSettingsStore:t,transaction:e,data:{personal_home_delayed_tooltip_dismissed_at:i().c9.now().toMillis()}})}}))}function S(e){const{environment:t,newSeenWelcomeHomeValue:o}=e,i=c().default.state.currentSpaceViewStore;i&&r().createAndCommit({userAction:"SidebarPersonalHomeSettings.markWelcomeAnimationAsSeen",environment:t,canUndo:!0,perform:e=>{const t=i.getSettingsStore().getKeyStore("personal_home").getKeyStore("seen_welcome_animation");a().KY({store:t,transaction:e,value:o})}})}function b(e){const{environment:t,tipType:o,completed:i}=e,{currentUserSettingsStore:n}=c().default.state;if(!n)return;const s=n.getPersonalHomeTipsSettings(),a={...s,progress_data:{...s.progress_data,[o]:{completed:i}}};r().createAndCommit({userAction:"LearnHomePanel.updateProgress",environment:t,canUndo:!0,perform:e=>{d().mJ({userSettingsStore:n,transaction:e,data:{personal_home_tips_settings:a}})}})}function h(e){const{environment:t,hide:o}=e,{currentUserSettingsStore:i}=c().default.state;if(!i)return;const n={...i.getPersonalHomeTipsSettings(),hide_completed:o};r().createAndCommit({userAction:"LearnHomePanel.hideCompleted",environment:t,canUndo:!0,perform:e=>{d().mJ({userSettingsStore:i,transaction:e,data:{personal_home_tips_settings:n}})}})}function v(e){const{blockId:t,enabledFeatures:o,userId:i}=e,a=(0,s().WP)(o).flatMap((e=>{let[t,o]=e;if(!o)return[];switch(t){case"tasks":return[(0,m().NY)("myTasksAssignedToMeCollectionView")];case"customDb":const e=(0,m().NY)("customDb");return[e&&(0,l().cf)({userId:i,viewBlockId:e})].filter(s().O9);case"similarUsersAndTrending":return[(0,m().NY)("similarUsersCollectionView"),(0,m().NY)("trendingCollectionView")];case"unifiedFeed":return[(0,m().NY)("postsCollectionView")];case"recents":case"updates":case"templates":case"tips":case"calendar":case"aiChatModule":return[];default:(0,s().HB)(t)}})),{isHomeKey:r,homeCollectionViewIdsKey:d,aiChatEnabledKey:c,unifiedFeedEnabledKey:u}=(0,p().h)(t);n().A.set(r,!0),n().A.set(d,a),n().A.set(u,o.unifiedFeed),n().A.set(c,o.aiChatModule)}},716571:(e,t,o)=>{o.d(t,{ke:()=>N,Ay:()=>U,aQ:()=>z});var i=o(242343),n=()=>o(237385),s=()=>o(803290),a=()=>o(174114),r=()=>o(620408),d=()=>o(653998),l=()=>o(151835),c=()=>o(931085),u=()=>o(397791),m=()=>o(103151),p=()=>o(24071),g=()=>o(382329),f=()=>o(520969),S=(o(725707),o(491955),o(500234),o(771702),o(403517),()=>o(162901)),b=()=>o(201430),h=()=>o(21164),v=()=>o(23371),y=()=>o(818369),_=()=>o(698094),x=()=>o(485966),I=()=>o(413871),A=()=>o(408758),C=()=>o(300659);const T=new(o(283812).Y)((e=>new w(e)));class w extends(()=>o(129044))().default{constructor(e){super(),this.collectionStore=void 0,this.debouncedRefresh=void 0,this.collectionStore=e,this.debouncedRefresh=(0,o(975392).sg)(this.unthrottledRefresh.bind(this),2e3)}getInitialState(){return{createdTime:-1/0,createdById:void 0}}getLatestPostCreatedTime(){return this.state.createdTime}getLatestPostCreatedById(){return this.state.createdById}async refresh(e){return this.debouncedRefresh(e)}async unthrottledRefresh(e){const{environment:t}=e;if(!t.currentUser.id)return;if(await this.collectionStore.load(),!this.collectionStore.isDefined())return;const o=await y().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:this.collectionStore.getSpaceId(),collectionIds:[this.collectionStore.id]}});if("success"===o.type&&o.data){const e=o.data[0];this.setState(e)}}}function k(e){const t=(0,n().v3)(),o=(0,s().K8)((()=>{var t;return null==e||null===(t=e[0])||void 0===t?void 0:t.getSpaceId()}),[e]),a=(0,i.useMemo)((()=>e.filter((e=>!T.has(e)))),[e]);(0,S().Yb)((async()=>{await async function(e){const{environment:t,collectionStores:o}=e,i=await v().dS(o,10,(async e=>(await e.load(),e.isDefined())));if(0===i.length)return;const n=i[0].getSpaceId(),s=await y().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:n,collectionIds:i.map((e=>e.id))}});if("success"===s.type&&s.data)for(let a=0;a<i.length;a++){const e=i[a],t=s.data[a];t.collectionId===e.id&&T.get(e).setState(t)}}({environment:t,collectionStores:a})}),[a,t]);const r=(0,i.useMemo)((()=>e.map((e=>T.get(e)))),[e]);return(0,i.useEffect)((()=>{if(!o)return;const e=r.map((e=>_().Ay.addListener((0,b().eG)(e.collectionStore.id),void 0,(0,_().AY)((async()=>await e.refresh({environment:t}))),void 0,t)));return()=>{e.forEach((e=>{e&&_().Ay.removeListener(e,t)}))}}),[r,o,t]),r}var j=()=>o(907721),B=()=>o(299581),M=()=>o(503984),H=()=>o(48913),P=()=>o(878174),L=()=>o(129978);const K={LazyAiLandingPageExperimentSwitcher:new(L().O2)("LazyAiLandingPageExperimentSwitcher",(()=>o.e(66169).then(o.bind(o,987))))},F=(0,L()._h)(K.LazyAiLandingPageExperimentSwitcher,(e=>e.AiLandingPageExperimentSwitcher));var R=o(163643);const E=(0,d().YK)({experimentSwitcherTooltip:{id:"aiLandingPageExperimentSwitcherTooltip",defaultMessage:"[dev only] experience switcher"},chatHistoryTooltip:{id:"aiSidebarItem.askNotionAi.history.tooltip",defaultMessage:"Chat history"}});function D(e){const{styles:t}=e,S=(0,n().v3)(),b=(0,d().tz)(),v=(0,s().K8)((()=>{const{currentSpaceViewStore:e}=x().default.state;if(e)return f().x$(e)}),[]),y=(0,s().K8)((()=>{const e=x().default.state.mainEditorCurrentBlockStore;return!!e&&f().Nh(e.id)}),[]),_=(0,s().K8)((()=>"home_available"===M().default.getState().type),[]),T=(0,s().K8)((()=>{var e;return null==v||null===(e=v.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:null==v?void 0:v.getRecordModel,pageVisitSource:o(712437).y8.SidebarHome})}),[v]),w=function(){const e=(0,n().v3)(),t=(0,s().K8)((()=>(0,C().D)({isMobileNative:e.device.isMobileNative,disableExposureLogging:!0})),[e]),o=(0,s().K8)((()=>{var e;return null===(e=x().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),i=k((0,s().K8)((()=>{if(!t)return[];const e=x().default.state.currentSpaceStore;return o&&e?A().A.getJoinedTeamStores({userId:o,spaceStore:e}).map((t=>I().md.createChildStore(t,{table:h().Vl,id:t.id,spaceId:e.id}))):[]}),[t,o]));return(0,s().K8)((()=>{var e;if(!x().default.state.currentSpaceStore)return!1;const t=(null===(e=x().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getKeyStore("settings").getKeyStore("last_opened_aggregated_feed").getValue())??0;return i.find((e=>!(!e.getLatestPostCreatedById()||e.getLatestPostCreatedTime()<=t||e.getLatestPostCreatedById()===o)))}),[i,o])}(),B=(0,o(456143).w)(),L=!(0,s().O$)(o(802955).e),K=(0,s().uB)(void 0,o(738894).A),D=(0,s().uB)(void 0,P().BQ),N=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,o(152058).p)(t)&&D.setState({...D.state,isSidebarItemFocused:!0})}),[D]),U=(0,i.useCallback)((()=>{D.setState({...D.state,isSidebarItemFocused:!1})}),[D]),W=(0,i.useCallback)((()=>{o(330608).A.state.isDragging||D.setState({...D.state,isSidebarItemHovered:!0})}),[D]),Y=(0,i.useCallback)((()=>{D.setState({...D.state,isSidebarItemHovered:!1})}),[D]),G=(0,i.useCallback)((()=>{(0,g().Wy)(S),(0,o(29393).ZL)({environment:S,from:"sidebar"}),_&&(0,g().tL)(S),o(271748).default.isVisible()&&(0,o(610489).VI)({environment:S})}),[S,_]),O=(0,H().ab)(),q=(0,a().IS)((e=>({tooltip:{width:200},leftContainer:{position:"relative"},shortcutLabel:{color:e.text.contrastSecondary},linkBoxStyle:{...O.baseSidebarItem,...y&&O.currentSelectedSidebarItem}})),[y,O]),$=(0,s().O$)(D),J=(0,i.useCallback)((()=>{const{isChatHistoryFocused:e,isChatHistoryHovered:t,isExperimentSwitcherFocused:o,isExperimentSwitcherHovered:i}=$;return t?(0,R.jsx)(d().sA,{...E.chatHistoryTooltip}):i?(0,R.jsx)(d().sA,{...E.experimentSwitcherTooltip}):e?(0,R.jsx)(d().sA,{...E.chatHistoryTooltip}):o?(0,R.jsx)(d().sA,{...E.experimentSwitcherTooltip}):(0,R.jsxs)("div",{style:q.tooltip,children:[(0,R.jsx)("div",{children:(0,R.jsx)(d().sA,{...z.tooltip})}),(0,R.jsx)(l().A,{style:q.shortcutLabel,name:"openHome"})]})}),[$,q.shortcutLabel,q.tooltip]);return(0,R.jsx)(m().A,{store:K,renderTooltip:J,disableTooltip:_,originGap:6,textWrap:!0,placement:j().W.Right,render:e=>(0,R.jsx)(c().A,{...e,style:q.linkBoxStyle,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,href:T,onClick:G,onFocus:t=>{var o;null===(o=e.onFocus)||void 0===o||o.call(e,t),N(t)},onBlur:t=>{var o;null===(o=e.onBlur)||void 0===o||o.call(e,t),U()},"aria-current":y?"page":void 0,children:(0,R.jsx)(p().A,{left:(0,R.jsxs)("div",{style:q.leftContainer,children:[(0,R.jsx)(u().I,{icon:r().P,color:"secondary",size:"lg"}),w&&(0,R.jsx)(V,{})]}),disableMobileBorder:!0,right:(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginRight:-4,gap:3},children:[(0,R.jsx)(F,{aiSidebarItemHoverStore:D,aiSidebarTooltipStore:K}),!L&&B.showChatHistoryInHomeSidebarItem?(0,R.jsx)(P().WG,{aiSidebarItemHoverStore:D,aiSidebarTooltipStore:K}):void 0]}),onMouseMove:W,onMouseLeave:Y,children:b.formatMessage(z.label)})})})}function N(e){const{styles:t}=e,o=(0,s().K8)((()=>"home_available"===M().default.getState().type),[]),i=(0,H().ab)(),n=(0,a().IS)((e=>({tooltip:{width:200},shortcutLabel:{color:e.text.contrastSecondary}})),[]);return(0,R.jsx)(m().A,{renderTooltip:()=>(0,R.jsxs)("div",{style:n.tooltip,children:[(0,R.jsx)("div",{children:(0,R.jsx)(d().sA,{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"View recent pages and more"})}),(0,R.jsx)(l().A,{style:n.shortcutLabel,name:"openHome"})]}),disableTooltip:o,originGap:6,textWrap:!0,placement:j().W.Right,render:e=>(0,R.jsx)(c().A,{...e,style:i.baseSidebarItem,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,onClick:()=>{B().A.open()},children:(0,R.jsx)(p().A,{left:(0,R.jsx)(u().I,{icon:r().P,color:"secondary",size:"lg"}),disableMobileBorder:!0,children:(0,R.jsx)(d().sA,{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"})})})})}function V(e){const{top:t=0,right:o=-3}=e,i=(0,a().IS)((e=>({unreadBadge:{backgroundColor:e.redBadgeBackground,position:"absolute",top:t,right:o,width:8,height:8,borderRadius:4,border:`1px solid ${e.surface.wash}`}})),[t,o]);return(0,R.jsx)("div",{style:i.unreadBadge})}const z=(0,d().YK)({tooltip:{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"View recent pages and more"},label:{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"}}),U=i.memo(D)},808634:(e,t,o)=>{o.d(t,{VN:()=>d,or:()=>a,pV:()=>r});var i=()=>o(878737),n=()=>o(840024),s=()=>o(836331);function a(e){const{configurationState:t}=e;return t.deepFindRequested&&n().zD.isDeepFindEnabled()}function r(e){const{configurationState:t,assistantSurface:o}=e;return a({configurationState:t})&&o.isType("fullPage")}function d(){const e=n().zD.state;return(0,i().AX)(e,(e=>s().default.getConfigKey("deep_find_config",e)),(e=>s().default.checkGate({gateName:e})))}new(o(496985).default)((()=>{var e;const t=n().zD.isDeepFindEnabled(),i=Boolean(null===(e=o(368330).default.getActiveAssistantConfigurationState())||void 0===e?void 0:e.deepFindRequested);return t&&i}),{debugName:"isDeepFindActiveStore"})},872835:(e,t,o)=>{o.d(t,{K:()=>s,v:()=>n});var i=()=>o(653998);const n=(0,i().YK)({addAPageInside:{defaultMessage:"Add a page inside",id:"sidebarItem.addAPageInside.tooltip"}}),s=(0,i().YK)({addPageTooltip:{defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"}})},878174:(e,t,o)=>{o.d(t,{Ay:()=>F,BQ:()=>L,WG:()=>K,cD:()=>P});var i=o(242343),n=()=>o(237385),s=()=>o(551919),a=()=>o(803290),r=()=>o(174114),d=()=>o(934889),l=()=>o(486796),c=()=>o(653998),u=()=>o(63463),m=()=>o(356813),p=()=>o(931085),g=()=>o(397791),f=()=>o(103151),S=()=>o(24071),b=()=>o(136239),h=()=>o(951920),v=()=>o(610489),y=()=>o(271748),_=()=>o(907721),x=()=>o(840024),I=()=>o(478730),A=()=>o(368330),C=()=>o(299581),T=()=>o(738894),w=()=>o(373023),k=()=>o(48913),j=()=>o(114430),B=o(163643);const M=(0,c().YK)({sidebarItemTooltip:{id:"aiSidebarItem.hoverTooltipBody",defaultMessage:"Get answers powered by knowledge from AI and your workspace"},offlineTooltip:{id:"aiSidebarItem.offlineTooltip",defaultMessage:"Unavailable while offline"}});function H(e){const{styles:t}=e,s=(0,n().v3)(),d=(0,c().tz)(),u=(0,a().K8)((()=>o(485966).default.state.currentUserSettingsStore),[]),m=(0,a().K8)((()=>{if(!u||!x().zD.showAssistantNotionAiCopy())return!0;return!(void 0===u.getSettingsStore().getKeyStore("ai_sidebar_item_new_badge_dismissed_at").getValue())}),[u]),h=(0,a().K8)((()=>{const e=A().default.getActiveSession(),t=null==e?void 0:e.assistantConfigurationState;if(!t)return!1;return(0,o(808634).or)({configurationState:t})}),[]),C=(0,a().K8)((()=>x().zD.isNewFullPageWelcomeStateEnabled()),[]),j=(0,a().K8)((()=>"chat"===s.RouterStore.state.route.name),[s]),H=!(0,a().O$)(o(802955).e),P=(0,w().x9)(),{clickAction:F,primaryMessage:R,tooltipBodyMessage:E}=(0,w().$y)(),D=(0,a().uB)(void 0,L),N=(0,i.useCallback)((()=>{const e=A().default.getActiveSessionId()||A().default.getNextSessionId(),t=A().default.getActiveAssistantConfigurationState(),i=A().default.getActiveSession();(0,o(894309).trackAssistantOpened)(s,{hasQuery:!1,from:"sidebar",searchSessionId:void 0,isReminder:!1,reminderType:void 0,sessionId:e,startTimestamp:(null==t?void 0:t.sessionStartTimestamp)||Date.now(),transcript:(null==i?void 0:i.evaluator.getTranscript())||[]})}),[s]),V=(0,i.useCallback)((e=>{if(P)return F&&F(e),void e.preventDefault();if(h&&A().default.endCurrentSession(),C&&A().default.endCurrentSession(),j)return void e.preventDefault();y().default.isVisible()&&"assistant"!==y().default.state.contentType&&(0,v().VI)({environment:s});"panel"===o(514860).Ay.state.modeByContentType.assistant&&(0,v().J$)({environment:s,contentType:"assistant",skipAnimation:!0}),I().P.setState({...I().P.state,currentView:"chat",from:"sidebar"}),N(),u&&!m&&o(84543).createAndCommit({userAction:"dismissAiSidebarItemNewBadge",environment:s,canUndo:!0,userId:u.id,perform:e=>{o(658388).mJ({userSettingsStore:u,data:{ai_sidebar_item_new_badge_dismissed_at:Date.now()},transaction:e})}})}),[P,h,C,j,N,u,m,F,s]),z=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,o(152058).p)(t)&&D.setState({...D.state,isSidebarItemFocused:!0})}),[D]),U=(0,i.useCallback)((()=>{D.setState({...D.state,isSidebarItemFocused:!1})}),[D]),W=(0,i.useCallback)((()=>{o(330608).A.state.isDragging||D.setState({...D.state,isSidebarItemHovered:!0})}),[D]),Y=(0,i.useCallback)((()=>{D.setState({...D.state,isSidebarItemHovered:!1})}),[D]),G=(0,k().ab)(),O=(0,r().IS)((e=>({selected:{...G.currentSelectedSidebarItem},tooltipBody:{color:e.text.secondary},uncollectibleExperience:{cursor:"default"}})),[G.currentSelectedSidebarItem]),q=(0,a().K8)((()=>(0,b().ic)()),[]),$=(0,a().uB)(void 0,T().A),J=(0,a().uB)(void 0,T().A),Q=(0,a().K8)((()=>J.state.focused||J.state.hovered),[J]),X=(0,i.useCallback)((()=>H?d.formatMessage(M.offlineTooltip):Q?"":P?(0,B.jsxs)(B.Fragment,{children:[R,(0,B.jsx)("div",{style:O.tooltipBody,children:E})]}):d.formatMessage(M.sidebarItemTooltip)),[H,Q,d,P,R,E,O.tooltipBody]),Z=(0,a().O$)(x().ts),ee=j&&!h;return(0,B.jsx)(f().A,{store:$,renderTooltip:X,originGap:6,textWrap:!0,placement:_().W.Right,render:e=>(0,B.jsx)(p().A,{...e,style:{...G.baseSidebarItem,...ee&&O.selected},hoveredStyle:null==t?void 0:t.buttonHoveredStyle,href:H?void 0:o(758611).JZ.chat,onClick:V,disabled:H,disabledFeedback:H,"aria-current":ee?"page":void 0,children:(0,B.jsx)(S().A,{left:Z?(0,B.jsx)(g().I,{icon:o(226e3).v,color:"secondary",size:"lg"}):(0,B.jsx)(g().I,{icon:l().sparklesIcon,color:"secondary",size:"lg"}),style:{...q,...P&&O.uncollectibleExperience},rightStyle:{height:void 0,alignSelf:"stretch",marginRight:-4},right:H?void 0:(0,B.jsx)(K,{aiSidebarItemHoverStore:D,aiSidebarTooltipStore:$}),onMouseMove:W,onMouseLeave:Y,onFocus:z,onBlur:U,children:(0,B.jsx)("div",{style:{display:"flex",gap:6},children:(0,B.jsx)(c().sA,{defaultMessage:"Notion AI",id:"sidebar.notionAi.label"})})})})})}function P(e){const{styles:t}=e,o=(0,c().tz)(),n=(0,k().ab)(),s=(0,r().IS)((e=>({aiFaceImg:{width:22,height:22,background:e.assistantCornerButtonBackground,borderRadius:"50%",boxShadow:e.shadowSM}})),[]),d=(0,a().K8)((()=>(0,b().ic)()),[]),m=(0,a().uB)(void 0,T().A),h=(0,a().K8)((()=>m.state.focused||m.state.hovered),[m]),v=(0,i.useCallback)((()=>h?"":o.formatMessage(M.sidebarItemTooltip)),[h,o]),y=(0,a().O$)(x().ts);return(0,B.jsx)(f().A,{renderTooltip:v,originGap:6,textWrap:!0,placement:_().W.Right,render:e=>(0,B.jsx)(p().A,{...e,style:n.baseSidebarItem,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,onClick:()=>{C().A.open()},children:(0,B.jsx)(S().A,{left:y?(0,B.jsx)("img",{style:s.aiFaceImg,src:u()}):(0,B.jsx)(g().I,{icon:l().sparklesIcon,color:"secondary",size:"lg"}),style:d,children:(0,B.jsx)(c().sA,{defaultMessage:"Notion AI",id:"sidebar.notionAi.label"})})})})}class L extends(()=>o(129044))().default{getInitialState(){return{isSidebarItemHovered:!1,isSidebarItemFocused:!1,isChatHistoryHovered:!1,isChatHistoryFocused:!1,isExperimentSwitcherHovered:!1,isExperimentSwitcherFocused:!1}}}function K(e){const{aiSidebarItemHoverStore:t,aiSidebarTooltipStore:o}=e,l=(0,n().v3)(),u=(0,c().tz)(),p=(0,a().O$)(t),f=p.isSidebarItemHovered||p.isSidebarItemFocused,S=(0,j().Kd)(),b=(0,r().IS)((e=>({button:{...S.button,height:24,width:24,margin:0},iconContainer:{opacity:f?1:0,padding:0,transition:"opacity 0.1s ease-in-out"}})),[S.button,f]);(0,s().X)((()=>{t.setState({...t.state,isChatHistoryHovered:!1,isChatHistoryFocused:!1})}));const y=(0,i.useCallback)((()=>{o.reset(),(0,v().ZT)({environment:l,contentType:"assistant"})}),[l,o]),[_,x]=(0,h().B)();(0,i.useEffect)((()=>{t.setState({...t.state,isChatHistoryHovered:x})}),[x,t]);const I=(0,i.useCallback)((()=>{t.setState({...t.state,isChatHistoryFocused:!0})}),[t]),A=(0,i.useCallback)((()=>{t.setState({...t.state,isChatHistoryFocused:!1})}),[t]);if((0,w().x9)())return null;const C=u.formatMessage({id:"aiSidebarItem.askNotionAi.history.tooltip",defaultMessage:"Chat history"});return(0,B.jsx)("div",{ref:_,style:b.iconContainer,children:(0,B.jsx)(m().A,{onFocus:I,onBlur:A,icon:()=>(0,B.jsx)(g().I,{size:"default",color:"inherit",icon:d().clockIcon}),style:b.button,ariaLabel:C,onClick:y})})}const F=i.memo(H)},878737:(e,t,o)=>{o.d(t,{AX:()=>a,Ur:()=>i,uw:()=>n,yP:()=>s});const i=["unified_find_variant"],n=["deep_find_enable_query_gen","deep_find_enable_universal_blending","deep_find_enable_3p_sources","deep_find_enable_query_gen_finetuned_json_schema","deep_find_enable_query_gen_json_schema","deep_find_enable_request_tracing","deep_find_render_and_hydrate_notion_pages","deep_find_use_query_gen_for_notion_search","deep_find_should_show_streaming_ux","deep_find_append_keywords_to_notion_search","deep_find_all_connectors"],s=["notionSourceNumResults","maxPagesToDecorate","maxResultsPerSourceToBlendedRanking","maxFinalResults","maxResultsPerSourceToBoost"];function a(e,t,o){return{universalBlendingEnabled:e.isDeepFindUniversalBlendingEnabled(),queryGenEnabled:e.isDeepFindQueryGenEnabled(),notionSourceNumResults:t("notionSourceNumResults"),enableRequestTracing:o("deep_find_enable_request_tracing"),maxPagesToDecorate:t("maxPagesToDecorate"),maxResultsPerSourceToBlendedRanking:t("maxResultsPerSourceToBlendedRanking"),maxFinalResults:t("maxFinalResults"),useQueryGenForNotionSearch:o("deep_find_use_query_gen_for_notion_search"),shouldShowStreamingUx:o("deep_find_should_show_streaming_ux"),appendKeywordsToNotionSearch:o("deep_find_append_keywords_to_notion_search"),allConnectorsEnabled:o("deep_find_all_connectors"),maxResultsPerSourceToBoost:t("maxResultsPerSourceToBoost")}}},908589:(e,t,o)=>{o.d(t,{o:()=>s});var i=()=>o(548694),n=()=>o(836331);function s(e){return!!e&&Boolean((0,i().IL)(e)&&"external_pages_sidebar"===n().default.getEligibleGroup({experimentId:"sharing_collaboration_sidebar_guest_aggregation"}))}}}]);