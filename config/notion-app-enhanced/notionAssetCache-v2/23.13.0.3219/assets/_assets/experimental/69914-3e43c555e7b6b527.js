"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[69914],{127436:(e,t,o)=>{o.d(t,{i:()=>n});o(242343);const i={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},n=(0,o(680369).wt)("lockFill",i)},146100:(e,t,o)=>{o.d(t,{g:()=>n});o(242343);const i={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"m17.619 9.381-5.4-5.4A.875.875 0 1 0 10.98 5.22l3.907 3.906H2.934c-.447 0-.809.392-.809.875s.362.875.809.875h11.954l-3.907 3.906a.875.875 0 1 0 1.238 1.238l5.4-5.4a.875.875 0 0 0 0-1.238"})},n=(0,o(680369).wt)("arrowStraightRightFill",i)},295517:(e,t,o)=>{o.d(t,{e:()=>n});o(242343);var i=o(163643);const n=(0,o(680369).wt)("tag",{viewBox:"0 0 17 17",svg:(0,i.jsx)("path",{d:"M9.49219 15.4951C8.47363 16.5205 7.40039 16.5273 6.36133 15.4883L2 11.1406C0.960938 10.1084 0.981445 9.02148 1.99316 8.00977L8.70605 1.31055C9.23926 0.777344 9.54688 0.71582 10.3193 0.71582H12.917C13.6689 0.71582 13.9219 0.900391 14.4756 1.44727L16.041 3.0127C16.5947 3.56641 16.7725 3.81934 16.7725 4.57129V7.16895C16.7725 7.94141 16.7178 8.25586 16.1846 8.78906L9.49219 15.4951ZM8.62402 14.4697L15.248 7.83887C15.3779 7.70215 15.4531 7.57227 15.4531 7.34668V4.57812C15.4531 4.37305 15.3779 4.23633 15.2412 4.09961L13.3887 2.24707C13.2588 2.11035 13.1152 2.03516 12.9102 2.03516H10.1484C9.92285 2.03516 9.79297 2.11035 9.65625 2.25391L3.02539 8.87109C2.57422 9.32227 2.56055 9.80078 3.03223 10.2725L7.22266 14.4629C7.69434 14.9277 8.16602 14.9209 8.62402 14.4697ZM12.0693 6.40332C11.5088 6.40332 11.0918 5.96582 11.0918 5.41895C11.0918 4.87207 11.5088 4.44141 12.0693 4.44141C12.6299 4.44141 13.0469 4.87207 13.0469 5.41895C13.0469 5.96582 12.6299 6.40332 12.0693 6.40332Z"})})},550828:(e,t,o)=>{o.d(t,{P:()=>n});o(242343);const i={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M9.538 10.331c0 2.171-1.657 3.931-3.7 3.931s-3.7-1.76-3.7-3.93a4 4 0 0 1 .05-.657h-.513a.5.5 0 0 1 0-1h.806C3.069 7.33 4.351 6.4 5.838 6.4c1.362 0 2.553.782 3.195 1.948a2.5 2.5 0 0 1 1.935 0C11.61 7.182 12.8 6.4 14.163 6.4c1.486 0 2.768.931 3.356 2.275h.806a.5.5 0 1 1 0 1h-.514q.052.32.052.656c0 2.171-1.657 3.931-3.7 3.931s-3.7-1.76-3.7-3.93q.001-.55.134-1.055a1.5 1.5 0 0 0-1.194 0q.133.505.135 1.054m-1.25 0c0-1.553-1.168-2.681-2.45-2.681s-2.45 1.128-2.45 2.681 1.167 2.681 2.45 2.681c1.282 0 2.45-1.128 2.45-2.68m8.325 0c0-1.553-1.168-2.681-2.45-2.681s-2.45 1.128-2.45 2.681 1.167 2.681 2.45 2.681c1.282 0 2.45-1.128 2.45-2.68"})},n=(0,o(680369).wt)("eyeglasses",i)},573520:(e,t,o)=>{o.d(t,{h:()=>n});o(242343);var i=o(163643);const n=(0,o(680369).wt)("eye",{viewBox:"0 0 32 32",svg:(0,i.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})},584764:(e,t,o)=>{o.d(t,{M:()=>u});o(242343);var i=()=>o(237385),n=()=>o(803290),r=()=>o(840024),a=()=>o(85208),s=()=>o(476026),l=()=>o(129978);const c=new(l().O2)("assistantAnimatedFace",(()=>Promise.all([o.e(32257),o.e(15961)]).then(o.bind(o,767717))));var d=o(163643);function p(e){const{sizeVariant:t,highLevelState:o,includeBoxShadow:i,onMouseEnter:n}=e,{value:r}=(0,l().fJ)(c);if(!r)return(0,d.jsx)(s().o,{variant:t,wrapWithPadding:!1});const a=r.AssistantAnimatedFace,p=r.AssistantAnimatedFaceInner;return o?(0,d.jsx)(p,{sizeVariant:t,highLevelState:o,includeBoxShadow:i??!1,onMouseEnter:n}):(0,d.jsx)(a,{sizeVariant:t,includeBoxShadow:i??!1,onMouseEnter:n})}function u(e){const{variant:t,highLevelState:o,includeBoxShadow:l}=e,c=(0,i().Y0)(),u=(0,n().K8)((()=>r().zD.shouldShowAnimatedAssistantFace(c)),[c]),f=(0,n().O$)(r().ts);return o||u?(0,d.jsx)(p,{sizeVariant:t,highLevelState:o,includeBoxShadow:l}):f?(0,d.jsx)(s().o,{variant:t}):(0,d.jsx)(a().g,{variant:t})}},596232:(e,t,o)=>{o.d(t,{$:()=>n});o(242343);var i=o(163643);const n=(0,o(680369).wt)("database",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M16.25 5v1.25c0 1.381-2.797 2.5-6.25 2.5s-6.25-1.119-6.25-2.5V5c0-1.381 2.797-2.5 6.25-2.5s6.25 1.119 6.25 2.5zM10 14.375c-2.784 0-4.744-.569-5.963-1.378-.187.237-.287.49-.287.753V15c0 1.381 2.797 2.5 6.25 2.5s6.25-1.119 6.25-2.5v-1.25c0-.262-.103-.516-.287-.753-1.22.806-3.179 1.378-5.963 1.378zM10 10c-2.784 0-4.744-.569-5.963-1.378-.187.237-.287.49-.287.753v1.25c0 1.381 2.797 2.5 6.25 2.5s6.25-1.119 6.25-2.5v-1.25c0-.262-.103-.516-.287-.753C14.742 9.428 12.784 10 10 10z"})})},647658:(e,t,o)=>{o.r(t),o.d(t,{cubeIcon:()=>n,iconDefinition:()=>i});o(242343);const i={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M10.302 1.853a.63.63 0 0 0-.604 0l-6.65 3.669c-.2.11-.323.32-.323.547v7.862c0 .228.124.437.323.547l6.65 3.67a.63.63 0 0 0 .604 0l6.65-3.67c.2-.11.323-.32.323-.547V6.069a.63.63 0 0 0-.323-.547zM3.975 7.127l5.4 2.98v6.434l-5.4-2.98zm6.65 9.414v-6.434l5.4-2.98v6.435zM15.356 6.07 10 9.024 4.644 6.069 10 3.114z"})},n=(0,o(680369).wt)("cube",i)},651618:(e,t,o)=>{e.exports=o.p+"5c61be7d1ab58977.gif"},702978:(e,t,o)=>{o.d(t,{U:()=>n});var i=()=>o(702469);async function n(e){return new Promise((t=>{i().A.setState({open:!0,onClose:()=>{i().A.setState({open:!1}),t(!1)},onConfirm:()=>{i().A.setState({open:!1}),t(!0)},...e})}))}},720621:(e,t,o)=>{o.d(t,{O:()=>n});o(242343);const i={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M13.692 10.442a.625.625 0 0 0 0-.884l-5.4-5.4a.625.625 0 1 0-.884.884L12.366 10l-4.958 4.958a.625.625 0 0 0 .884.884z"})},n=(0,o(680369).wt)("arrowChevronSingleRight",i)},726646:(e,t,o)=>{o.r(t),o.d(t,{checkmarkFillIcon:()=>n,iconDefinition:()=>i});o(242343);const i={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"M15.913 3.787a.875.875 0 0 1 .3 1.2L9.658 15.914a.875.875 0 0 1-1.415.119l-4.37-5.098a.875.875 0 0 1 1.329-1.14l3.58 4.177 5.93-9.884a.875.875 0 0 1 1.2-.3"})},n=(0,o(680369).wt)("checkmarkFill",i)},728035:(e,t,o)=>{o.d(t,{I:()=>r});o(242343);var i=o(163643);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M5.486 14.341a.669.669 0 1 0-.946.946.669.669 0 0 0 .946-.946"}),(0,i.jsx)("path",{d:"M11.964 2.093a1.625 1.625 0 0 0-2.471.205L6.976 5.821l-.04-.04a.625.625 0 0 0-.884 0l-1.07 1.07a2.625 2.625 0 0 0 0 3.713l.563.563-1.35.964c-.355.253-.782.557-1.13.92-.363.38-.683.867-.754 1.495-.09.793.17 1.621.78 2.231s1.437.87 2.23.78c.628-.072 1.115-.392 1.495-.755.364-.348.668-.775.92-1.13l.015-.021.95-1.329.562.563a2.625 2.625 0 0 0 3.712 0l1.07-1.07a.625.625 0 0 0 0-.884l-.054-.054 3.524-2.517a1.625 1.625 0 0 0 .204-2.471zm-1.454.932a.375.375 0 0 1 .57-.048l3.001 3.001a4.3 4.3 0 0 1-1.216 2.443l-.069.068c-.112.113.004.3.155.25l.69-.23a3.2 3.2 0 0 0 1.525-1.079l.16-.206 1.51 1.509a.375.375 0 0 1-.048.57l-3.558 2.541-5.262-5.261zM6.494 7.107l6.226 6.226-.629.628a1.375 1.375 0 0 1-1.944 0l-1.085-1.084a.625.625 0 0 0-.95.078l-1.379 1.93c-.27.38-.51.715-.781.974-.263.25-.509.385-.772.415a1.47 1.47 0 0 1-1.206-.42c-.33-.33-.47-.776-.42-1.207.029-.263.164-.51.415-.771.258-.27.594-.512.972-.782l1.931-1.379a.625.625 0 0 0 .079-.95L5.866 9.68a1.375 1.375 0 0 1 0-1.944z"})]})},r=(0,o(680369).wt)("paintBrush",n)},729201:(e,t,o)=>{o.d(t,{_:()=>m});o(242343);var i=()=>o(237385),n=()=>o(803290),r=()=>o(174114),a=()=>o(68677),s=()=>o(443252),l=()=>o(142708),c=()=>o(279150),d=()=>o(190094),p=()=>o(98508),u=()=>o(466321),f=o(163643);function m(e){const{renderInner:t,innerStyle:o,onDismiss:m,onClosed:g,fullscreen:y}=e,A=(0,i().v3)(),v=(0,i().Y0)(),h=(0,n().K8)((()=>A.WindowSizeStore.isLandscape()),[A.WindowSizeStore]),C=(0,r().IS)((e=>{let t;return(y||h)&&(t="100%"),{popupStyle:{background:e.surface.wash,borderTopRightRadius:"24px",borderTopLeftRadius:"24px",overflow:"hidden",width:"100%",height:t,display:"flex",alignItems:"center",justifyContent:"center"},scrollerStyle:{background:e.surface.wash,width:h?"80%":"100%",height:t,display:"flex",flexDirection:h?"row":"column",alignItems:"center",...o}}}),[h,o,y]),I=(0,n().K8)((()=>A.WindowSizeStore.getSafePaddingTopCSS(a().s1)),[A.WindowSizeStore]),_=(0,d().o_)();return(0,f.jsx)(s().Ay,{open:!0,hidesMobileNativeBottomBar:!0,preventBlockRenderQueueOnEnter:!0,popupType:u().n.SlideUp,onDismiss:m,onClosed:g,style:C.popupStyle,render:()=>(0,f.jsxs)(l().H,{type:h?p().A.Y:p().A.None,style:C.scrollerStyle,children:[(0,f.jsx)(c().A,{size:h?I:0}),t(),(0,f.jsx)(c().A,{size:_+(v.isMobileBrowser?32:0)})]})})}},869570:(e,t,o)=>{o.d(t,{X:()=>n});o(242343);var i=o(163643);const n=(0,o(680369).wt)("externalLink",{viewBox:"0 0 17 16",svg:(0,i.jsx)("path",{d:"M4.94922 13.498C4.31641 13.498 3.83789 13.3359 3.51367 13.0117C3.18945 12.6914 3.02734 12.2188 3.02734 11.5938V4.46289C3.02734 3.83398 3.18945 3.35938 3.51367 3.03906C3.83789 2.71875 4.31641 2.55859 4.94922 2.55859H12.0449C12.6777 2.55859 13.1562 2.71875 13.4805 3.03906C13.8047 3.35938 13.9668 3.83398 13.9668 4.46289V11.5938C13.9668 12.2188 13.8047 12.6914 13.4805 13.0117C13.1562 13.3359 12.6777 13.498 12.0449 13.498H4.94922ZM5.01953 12.3438H11.9746C12.2441 12.3438 12.4512 12.2734 12.5957 12.1328C12.7402 11.9922 12.8125 11.7793 12.8125 11.4941V4.55664C12.8125 4.27539 12.7402 4.06445 12.5957 3.92383C12.4512 3.7832 12.2441 3.71289 11.9746 3.71289H5.01953C4.74609 3.71289 4.53711 3.7832 4.39258 3.92383C4.25195 4.06445 4.18164 4.27539 4.18164 4.55664V11.4941C4.18164 11.7793 4.25195 11.9922 4.39258 12.1328C4.53711 12.2734 4.74609 12.3438 5.01953 12.3438ZM10.334 9.54297C10.1855 9.54297 10.0664 9.49609 9.97656 9.40234C9.89062 9.30859 9.84766 9.17969 9.84766 9.01562V8.08398L9.93555 7.24609L9.15039 8.10156L7.09961 10.1465C6.99023 10.2559 6.85742 10.3105 6.70117 10.3105C6.55273 10.3105 6.42969 10.2637 6.33203 10.1699C6.23828 10.0762 6.19141 9.95117 6.19141 9.79492C6.19141 9.6582 6.24609 9.53516 6.35547 9.42578L8.41211 7.36914L9.2793 6.57227L8.47656 6.66602H7.48633C7.32617 6.66602 7.19727 6.62305 7.09961 6.53711C7.00586 6.45117 6.95898 6.33203 6.95898 6.17969C6.95898 6.03516 7.00586 5.91992 7.09961 5.83398C7.19727 5.74414 7.32422 5.69922 7.48047 5.69922H10.2227C10.4062 5.69922 10.5508 5.74609 10.6562 5.83984C10.7617 5.93359 10.8145 6.08398 10.8145 6.29102V9.00977C10.8145 9.16602 10.7695 9.29492 10.6797 9.39648C10.5938 9.49414 10.4785 9.54297 10.334 9.54297Z"})})},876669:(e,t,o)=>{o.d(t,{j:()=>h,w:()=>v});var i=o(242343),n=()=>o(174114),r=()=>o(951920),a=()=>o(281030),s=()=>o(338563);const l=o.p+"f3a1c2555bc7b26c.gif",c=o.p+"8ab52115da3e3fbd.gif";const d=o.p+"160f5613d44c23ea.gif",p=o.p+"b68268645067ada1.gif",u=o.p+"fce2247087f1d227.gif",f=o.p+"896e2255367f2b04.gif";var m=o(163643);const g={dark:[o(965948),d,u],light:[o(651618),p,f]},y=new(o(725155).O)(1);function A(e){let{isDarkMode:t,onAssetChange:o}=e;const i=g[t?"dark":"light"],n=Math.floor(Math.random()*i.length);y.enqueue((async()=>{o({type:"animated",asset:i[n]}),await new Promise((e=>setTimeout(e,7e3))),o({type:"static",asset:s()})})).catch((e=>{console.error(`Error showing animated asset: ${e}`)}))}function v(e){const{sizeVariant:t,onMouseEnter:o}=e,d=(0,n().IS)((e=>{const o=(0,a().N)(t);return{faceImgWrap:{width:o,height:o,borderRadius:"100%",background:e.assistantCornerButtonBackground,overflow:"hidden"},faceImg:{height:o,width:o}}}),[t]),[p,u]=(0,r().B)(),f=function(e){const[t,o]=(0,i.useState)({type:"static",asset:s()}),r="dark"===(0,n().DP)().mode;(0,i.useEffect)((()=>{const e=setInterval((()=>{A({isDarkMode:r,onAssetChange:o})}),3e4);return()=>{clearInterval(e),y.cancel()}}),[r]);const a=(0,i.useMemo)((()=>r?l:c),[r]);return(0,i.useMemo)((()=>"animated"===t.type?t.asset:e&&Math.random()<=.1?a:(e&&A({isDarkMode:r,onAssetChange:o}),t.asset)),[a,t,r,e])}(u);return(0,m.jsx)("div",{ref:p,style:d.faceImgWrap,onMouseEnter:o,children:(0,m.jsx)("img",{style:d.faceImg,src:f,alt:"Notion AI face"})})}function h(e){const{sizeVariant:t}=e,o=(0,n().IS)((e=>{const o=(0,a().N)(t);return{faceImgWrap:{width:o,height:o,borderRadius:"100%",background:e.assistantCornerButtonBackground,overflow:"hidden"},faceImg:{height:o,width:o}}}),[t]),i="dark"===(0,n().DP)().mode,r=g[i?"dark":"light"][0];return(0,m.jsx)("div",{style:o.faceImgWrap,children:(0,m.jsx)("img",{style:o.faceImg,src:r,alt:"Notion AI face"})})}},889682:(e,t,o)=>{o.d(t,{H:()=>r});o(242343);var i=o(163643);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M13.105 4.184a1.475 1.475 0 1 1-2.934-.309 1.475 1.475 0 0 1 2.934.309m-5.297 7.25-.753 2.994-2.334 2.101a.55.55 0 0 0 .737.817l2.582-2.325.72-2.864-.662-.476a2.3 2.3 0 0 1-.29-.247"}),(0,i.jsx)("path",{d:"M11.681 8.169q.127.206.208.442l.567 1.67a.55.55 0 0 0 .66.354l2.032-.527a.55.55 0 1 0-.276-1.065l-1.539.4-.403-1.186a3.296 3.296 0 0 0-3.278-2.232l-3.02.145a.55.55 0 0 0-.513.438l-.501 2.42a.55.55 0 0 0 1.077.223l.415-2.002 1.654-.08-.03.294-.603 2.18a1.45 1.45 0 0 0 .516 1.537l3.05 2.335-2.08 1.51a.55.55 0 1 0 .647.89l2.579-1.873a.64.64 0 0 0 .013-1.026l-2.168-1.659z"})]})},r=(0,o(680369).wt)("figureRun",n)},900135:(e,t,o)=>{o.r(t),o.d(t,{autofillPropertyForBlocks:()=>G,autofillPropertyForCollection:()=>ee,fillAllPagesMessages:()=>E,getDefaultAiInference:()=>se,getPropertyCompletionForBlock:()=>ae,saveOrRemovePropertyAiInference:()=>re,triggerAiAutofillUpsell:()=>Q});o(362833),o(333225),o(494367),o(516262),o(573119),o(240480),o(950443),o(619601),o(725707),o(491955),o(500234),o(771702),o(403517);var i=o(242343),n=()=>o(371807),r=()=>o(564134),a=()=>o(716605),s=()=>o(214144),l=()=>o(582226),c=()=>o(653998),d=()=>o(543736),p=()=>o(204132),u=()=>o(76394);const f=(0,o(851552).Dv)("fillAutofillPropertiesInViewTask");var m=()=>o(469880),g=()=>o(396806),y=()=>o(818369),A=()=>o(91472),v=()=>o(702978),h=()=>o(145046),C=()=>o(839618),I=()=>o(575015),_=()=>o(448316),w=()=>o(84543),S=()=>o(11639),M=()=>o(810813),k=()=>o(105429),x=()=>o(204435),b=()=>o(13143),P=o(163643);const j=function(e){let{environment:t,inferenceIds:n,aiInference:r}=e;const a=(0,o(803290).K8)((()=>{const{state:e}=k().m;return"uninitialized"===e.type?null:{numBlocksToAutofill:e.numBlocksToAutofill,numBlocksAutofilled:e.numBlocksAutofilled,propertySchema:e.propertySchema,collectionId:e.collectionId,sessionId:e.sessionId,haveAllBlocksCompletedAutofill:e.haveAllBlocksCompletedAutofill}}),[]),s=(0,i.useCallback)((()=>{a&&(n.forEach((e=>{m().oe(t,{ai_inference_type:r.type,type:"undo_from_snackbar",inference_id:e,collection_id:a.collectionId,session_id:a.sessionId})})),o(399309).tN({environment:t,preventSelectText:!0}),I().N2(),k().m.setState({type:"filling",...a,didInterruptStreaming:!0}))}),[a,t,r,n]);if(!a)return null;const{numBlocksToAutofill:l,numBlocksAutofilled:d,propertySchema:{name:p}}=a;return d===l?(0,P.jsxs)(x().fI,{gap:4,alignItems:"center",children:[(0,o(150936).b)({width:16}),(0,P.jsx)(c().sA,{defaultMessage:'AI updated "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillInProgress",values:{propertyName:p,numPages:l}}),(0,P.jsx)(b().Ag,{onClick:s,children:(0,P.jsx)(c().sA,{defaultMessage:"Undo",id:"snackbar.aiAutofill.undo"})}),(0,P.jsx)(b().Ag,{onClick:()=>{I().N2()},children:(0,P.jsx)(c().sA,{defaultMessage:"Close",id:"snackbar.aiAutofill.close"})})]}):(0,P.jsxs)(x().fI,{gap:4,alignItems:"center",children:[(0,P.jsx)(o(966789).A,{}),0===d?(0,P.jsx)(c().sA,{defaultMessage:'AI updating "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillStarting",values:{propertyName:p,numPages:l}}):(0,P.jsx)(c().sA,{defaultMessage:'AI updated "{propertyName}" on {numFilledPages} of {numTotalPages} pages',id:"snackbar.aiAutofill.completedAutofill",values:{propertyName:p,numFilledPages:d,numTotalPages:l}}),(0,P.jsx)(b().Ag,{onClick:s,children:(0,P.jsx)(c().sA,{defaultMessage:"Stop & undo",id:"snackbar.aiAutofill.undoAndStop"})})]})};var T=()=>o(117041),L=()=>o(190217),N=()=>o(477784),O=()=>o(92451),F=()=>o(485966),B=()=>o(836331),U=()=>o(413871),W=()=>o(427846),z=()=>o(943066),R=()=>o(613313),D=()=>o(133926),V=()=>o(183219);const E=(0,c().YK)({fillAllPagesTooltip:{defaultMessage:"{hasNames, select, true {Autofill {propertyName} for all pages in {collectionName}} other {Autofill this property for all pages in the database}}",id:"aiAutofill.fillAllPages.buttonTooltip"},fillAllPagesAddOnMessage:{defaultMessage:"Only with Notion AI add-on",id:"aiAutofill.fillAllPages.onlyWithAiAddOnMessageInTooltip"},fillAllPagesAddAiMessage:{defaultMessage:"Only with upgraded Notion AI",id:"aiAutofill.fillAllPages.onlyWithAiBusinessMessageInTooltip"}});function H(e){const{environment:t,propertyId:o,propertySchema:i,storesWithCompletions:n,useTemporaryStore:r,markdownLinkifyIt:a,tinyMceMicrosoftWordPasteFilter:s,clipboardActions:l,doneStreaming:c,aiInferenceOverride:d}=e;w().createAndCommit({userAction:"BlockPropertyValue.handleActionButtonClick.aiAutofill",environment:t,canUndo:!Boolean(r),undoCheckpoint:!0,perform:e=>{q({environment:t,propertyId:o,propertySchema:i,storesWithCompletions:n,useTemporaryStore:r,markdownLinkifyIt:a,tinyMceMicrosoftWordPasteFilter:s,clipboardActions:l,doneStreaming:c,aiInferenceOverride:d,transaction:e})}})}function q(e){var t;const{environment:o,propertyId:i,propertySchema:n,storesWithCompletions:s,useTemporaryStore:l,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:d,clipboardActions:p,doneStreaming:f,aiInferenceOverride:m,transaction:g}=e;for(const{store:y,temporaryStore:A,completion:v}of s){const e=l?A:y;let s;switch(n.type){case"text":s=p.getInlineTitleValueFromClipboardTextHtml({text:v.trim(),stripText:!1,stripSurroundingWhitespace:!0,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:d});break;case"multi_select":case"select":const e=l?null===(t=y.getAssociatedCollectionStore())||void 0===t?void 0:t.clone(A.inMemoryRecordCache):y.getAssociatedCollectionStore(),o=m??n.select_ai_inference;let h=v.trim().split(",").map((e=>e.trim()));if(f||(h=h.slice(0,-1)),e&&null!=o&&o.add_options){const t=(0,r().nP)({newTokenValues:h.length>0&&"select"===n.type?[[h[0]]]:[h],property:i,propertySchema:n,collectionId:e.id});if(t)for(const o of t)w().applyOperation({store:e,operation:o,transaction:g})}null!=o&&o.add_options||(h=h.filter((e=>{var t;return null===(t=n.options)||void 0===t?void 0:t.find((t=>t.value===e))}))),s=(0,a().rK)(h);break;default:(0,u().HB)(n)}_().R9({environment:o,store:e.getPropertyStore(i),value:s,transaction:g})}}const K=(0,c().YK)({FAILED_TO_AUTOFILL:{defaultMessage:"Something went wrong. Please try again later",id:"propertyCompletionActions.propertyCompletionActions.error.unableToAutofill"},INVALID_PROPERTY_FOR_AUTOFILL:{defaultMessage:"Invalid property configuration for AI autofill",id:"propertyCompletionActions.propertyCompletionActions.error.invalidPropertyForAutofill"},NO_BLOCKS_TO_AUTOFILL:{defaultMessage:"Nothing to update with AI",id:"propertyCompletionActions.propertyCompletionActions.error.noBlocksToAutofill"}}),Z=(0,c().YK)({featureUnavailable:{id:"completionActions.featureNotEnabledError",defaultMessage:"This feature is not currently enabled"}});function Y(e){let{autofillPropertyResult:t}=e;const o=N().A.formatMessage(K[t]);I().N2(),h().c1(o)}const J={ai_limit_property_autofill:(0,P.jsx)(c().sA,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to add Notion AI.",id:"aiAutofill.outOfAiUpsellDialogMessage"}),ai_autofill_try_on_view:(0,P.jsx)(c().sA,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to add Notion AI.",id:"aiAutofill.outOfAiUpsellDialogMessage"}),ai_autofill_on_page_edit:(0,P.jsx)(c().sA,{defaultMessage:"Auto-update requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.autoUpdateOnPageEditUpsellDialogMessage"}),ai_autofill_fill_all_pages:(0,P.jsx)(c().sA,{defaultMessage:"Updating all pages requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.fillAllPagesUpsellDialogMessage"}),ai_autofill_bulk_fill:(0,P.jsx)(c().sA,{defaultMessage:"Filling more pages at once requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.bulkFillUpsellDialogMessage"})},$={ai_limit_property_autofill:(0,P.jsx)(c().sA,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.outOfAiBusinessUpsellDialogMessage"}),ai_autofill_try_on_view:(0,P.jsx)(c().sA,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.outOfAiUpgradedUpsellDialogMessage"}),ai_autofill_on_page_edit:(0,P.jsx)(c().sA,{defaultMessage:"Auto-update requires upgraded Notion AI. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.autoUpdateOnPageEditAiUpgradedUpsellDialogMessage"}),ai_autofill_fill_all_pages:(0,P.jsx)(c().sA,{defaultMessage:"Updating all pages requires upgraded Notion AI. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.fillAllPagesAiUpgradedUpsellDialogMessage"}),ai_autofill_bulk_fill:(0,P.jsx)(c().sA,{defaultMessage:"Filling more pages at once requires upgraded Notion AI. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.bulkFillAiUpgradedUpsellDialogMessage"})};function Q(e){var t;let{environment:o,from:i,upsell:n}=e;const r=(0,R().Le)()?$:J;null!==(t=F().default.state.currentSpaceStore)&&void 0!==t&&t.canAdmin()||h().c1(r[i]),z().K(o,{from:i,upsell:n})}function X(e){let{errorCode:t,environment:o,autofillAvailability:i}=e;return 405===t?I().D6({label:N().A.formatMessage(Z.featureUnavailable)}):(402===t&&i.upsell&&(I().N2(),Q({environment:o,from:"ai_limit_property_autofill",upsell:i.upsell})),V().showCompletionErrorWithCode(t))}async function G(e){var t;let{environment:o,stores:i,property:a,propertySchema:l,userEventForAnalytics:c,sessionIdForAnalytics:p,collectionContextStore:f,from:v,isBulkAction:h,aiInferenceOverride:C,transaction:_}=e;const w=p||s().JW(),S=a,M=i.map((e=>({spaceId:e.getSpaceId(),...e.pointer,propertyId:S,inferenceId:s().JW()}))),x=i[0].getAssociatedCollectionId()??(null===(t=i[0].getCollectionStore())||void 0===t?void 0:t.id),b=new(n().A)({name:"propertyCompletionActions.autofillPropertyForBlocks"});if(k().m.setIsWriting({stores:i,propertySchema:l,sessionIdForAnalytics:p}),"uninitialized"!==k().m.state.type&&(0,r().$M)(l)&&x){I().D6({label:(0,P.jsx)(j,{environment:o,inferenceIds:M.map((e=>e.inferenceId)),aiInference:(0,r().om)(l)}),durationMs:W().LX});try{var N,O,B;if(o.defaultRecordCache.inMemoryRecordCache.addCacheOverride(b),!(0,u().EI)(M))return Y({autofillPropertyResult:"NO_BLOCKS_TO_AUTOFILL"});const e=C||(0,r().om)(l);if(!e)return Y({autofillPropertyResult:"INVALID_PROPERTY_FOR_AUTOFILL"});M.forEach((t=>{m().oe(o,{type:c,inference_id:t.inferenceId,ai_inference_type:e.type,collection_id:x,session_id:w})})),null!==(N=F().default.state.currentSpaceStore)&&void 0!==N&&N.id&&y().callApi({eventName:"publishAiSession",environment:o,data:{inference_type:"autofill",id:w,spaceId:F().default.state.currentSpaceStore.id,metadata:{blockPropertyPointers:M,aiInference:e,collection_id:x}}});const t=await(0,D().Bw)(o,{name:"collection_property_autofill",spaceId:null===(O=F().default.state.currentSpaceStore)||void 0===O?void 0:O.id,userId:null===(B=F().default.state.currentUserStore)||void 0===B?void 0:B.id,amount:"unknown"}),n=await y().callStreamApi({eventName:"getCompletionForProperty",environment:o,data:{blockPropertyPointers:M,aiInference:e,aiSessionId:w,model:"default"}});if("success"!==n.type)return Y({autofillPropertyResult:"FAILED_TO_AUTOFILL"});f&&(0,g().E)({block_id:i[0].pointer.id,property:S,property_type:l.type,from:v,environment:o,collectionContextStore:f,isFromBulkActionsToolbar:h});const a=Object.fromEntries(i.map((e=>[e.pointer.id,{store:e,temporaryStore:e.clone(b),completion:""}]))),s=new Set,[p,I,P]=await Promise.all([T().g.load(),L().S.load(),A().R.clipboardActions.load()]);if(d().hS.is(n.data)){for await(const e of n.data){if("error"===e.type)return k().m.setState({...k().m.state,didInterruptStreaming:!0}),X({errorCode:e.errorCode,environment:o,autofillAvailability:t});if(k().m.state.didInterruptStreaming)return;const i=a[e.blockPropertyPointer.id],n=i.completion+e.completion;a[e.blockPropertyPointer.id]={...i,completion:n},s.add(e.blockPropertyPointer.id),_?q({environment:o,propertyId:S,propertySchema:l,storesWithCompletions:Object.values(a),useTemporaryStore:!0,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:I,clipboardActions:P,doneStreaming:!0,aiInferenceOverride:C,transaction:_}):H({environment:o,propertyId:S,propertySchema:l,storesWithCompletions:Object.values(a),useTemporaryStore:!0,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:I,clipboardActions:P,aiInferenceOverride:C}),k().m.setState({...k().m.state,numBlocksAutofilled:s.size})}k().m.setState({...k().m.state,haveAllBlocksCompletedAutofill:!0})}o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(b),_?q({environment:o,propertyId:S,propertySchema:l,storesWithCompletions:Object.values(a),useTemporaryStore:!1,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:I,clipboardActions:P,doneStreaming:!0,aiInferenceOverride:C,transaction:_}):H({environment:o,propertyId:S,propertySchema:l,storesWithCompletions:Object.values(a),useTemporaryStore:!1,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:I,clipboardActions:P,doneStreaming:!0,aiInferenceOverride:C})}finally{o.defaultRecordCache.inMemoryRecordCache.hasCacheOverride(b)&&o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(b)}}}async function ee(e){const t=B().default.checkGate({gateName:"autofill_all_pages_use_new_endpoint"})?ie:ne;return await t(e)}const te=(0,c().YK)({invalidCollectionSource:{id:"propertyCompletionActions.error.invalidCollectionSource",defaultMessage:"There was a problem with the database."},noMemcachedRecord:{id:"propertyCompletionActions.error.noMemcachedRecord",defaultMessage:"Something went wrong. Please try again."},lockAlreadyTaken:{id:"propertyCompletionActions.error.lockAlreadyTaken",defaultMessage:"A fill is already in progress"},invalidUser:{id:"propertyCompletionActions.error.invalidUser",defaultMessage:"The provided user information is not valid."},invalidCollectionView:{id:"propertyCompletionActions.error.invalidCollectionView",defaultMessage:"We encountered an issue accessing the collection view."},invalidCollection:{id:"propertyCompletionActions.error.invalidCollection",defaultMessage:"The collection you are trying to access is not valid."},noLoadedUser:{id:"propertyCompletionActions.error.noLoadedUser",defaultMessage:"User information is missing."},noUserTimeZone:{id:"propertyCompletionActions.error.noUserTimeZone",defaultMessage:"User time zone information is not available."},unauthorizedCollectionAccess:{id:"propertyCompletionActions.error.unauthorizedCollectionAccess",defaultMessage:"Insufficient permissions"},unableToQueryCollection:{id:"propertyCompletionActions.error.unableToQueryCollection",defaultMessage:"We couldn’t retrieve the collection details at this time."},invalidPropertyForAutofill:{id:"propertyCompletionActions.error.invalidPropertyForAutofill",defaultMessage:"The property provided for autofill is not valid."},NoResults:{id:"propertyCompletionActions.error.noResults",defaultMessage:"No results were found. Please try again."},somethingWentWrong:{id:"propertyCompletionActions.error.somethingWentWrong",defaultMessage:"Something went wrong. Please try again later."}});function oe(e){switch(e){case"invalidCollectionSource":return(0,P.jsx)(c().sA,{...te.invalidCollectionSource});case"noMemcachedRecord":return(0,P.jsx)(c().sA,{...te.noMemcachedRecord});case"lockAlreadyTaken":return(0,P.jsx)(c().sA,{...te.lockAlreadyTaken});case"invalidUser":return(0,P.jsx)(c().sA,{...te.invalidUser});case"invalidCollectionView":return(0,P.jsx)(c().sA,{...te.invalidCollectionView});case"invalidCollection":return(0,P.jsx)(c().sA,{...te.invalidCollection});case"noLoadedUser":return(0,P.jsx)(c().sA,{...te.noLoadedUser});case"noUserTimeZone":return(0,P.jsx)(c().sA,{...te.noUserTimeZone});case"unauthorizedCollectionAccess":return(0,P.jsx)(c().sA,{...te.unauthorizedCollectionAccess});case"unableToQueryCollection":return(0,P.jsx)(c().sA,{...te.unableToQueryCollection});case"invalidPropertyForAutofill":return(0,P.jsx)(c().sA,{...te.invalidPropertyForAutofill});case"NoResults":return(0,P.jsx)(c().sA,{...te.NoResults});case"somethingWentWrong":return(0,P.jsx)(c().sA,{...te.somethingWentWrong});default:return(0,P.jsx)(c().sA,{defaultMessage:"An unexpected error occurred. Please try again.",id:"propertyCompletionActions.error.unknown"})}}async function ie(e){var t,o;const{environment:i,collectionStore:n,propertySchema:a,property:s,collectionViewStore:l}=e;if(!(0,r().$M)(a))return;const c=(0,r().om)(a);if(!n||!a||!c)return;const d=null===(t=F().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(!d)return;if(!(null===(o=F().default.state.currentUserStore)||void 0===o?void 0:o.id))return;const u=N().A.getIntl(),m=(0,O().tS)({environment:i,intl:u,store:n});if(!(await v().U({sourceAction:"fill_all_pages",propertyName:a.name,collectionName:m})))return;(0,S().u)({environment:i,event:{eventName:"generate_from_fill_all_pages_in_view",eventProperties:{collection_id:n.id,ai_inference_type:c.type}}});const g=(0,C().UT)(i,f,{spaceId:d,collectionSource:{id:n.id,type:"collection",spaceId:d},collectionViewPointer:l.pointer,propertyId:s});for await(const r of g){var y;if(p().Q.isFail(r)||"failure"===r.taskStatus)return void I().D6({label:oe("somethingWentWrong")});if("error"===(null===(y=r.value)||void 0===y?void 0:y.status)){const e=r.value.errorType;return void I().D6({label:oe(e)})}}}async function ne(e){var t;let{environment:o,collectionStore:i,propertySchema:n,property:a,sessionIdForAnalytics:c}=e;if(!(0,r().$M)(n))return;const d=(0,r().om)(n);if(!i||!n||!d)return;const p=await(0,D().Bw)(o,{name:"collection_property_autofill",spaceId:i.getSpaceId(),userId:null===(t=F().default.state.currentUserStore)||void 0===t?void 0:t.id,amount:"unknown"});if(!(0,D().e2)(p))return void Q({environment:o,from:"ai_autofill_fill_all_pages",upsell:p.upsell});const u=N().A.getIntl(),f=(0,O().tS)({environment:o,intl:u,store:i});if(!(await v().U({sourceAction:"fill_all_pages",propertyName:n.name,collectionName:f})))return;m().oe(o,{type:"generate_from_fill_all_pages",inference_id:s().JW(),ai_inference_type:d.type,collection_id:i.id,session_id:c??s().JW()});const g=[];g.push(l().op.update({pointer:i.pointer,path:["format","update_ai_inferences_status"],args:{[a]:{type:"requested",created_time:Date.now()}}})),(0,M().p)({environment:o,collectionStore:i,performTransaction:e=>{for(const t of g)w().applyOperation({store:(0,U().Oo)(i,t.pointer),operation:t,transaction:e})}})}function re(e){const{environment:t,propertySchema:o,collectionStore:i,property:n,draftAiInference:a}=e;let s="";switch(o.type){case"text":s="ai_inference";break;case"select":case"multi_select":s="select_ai_inference";break;default:return}const l=[];if(l.push({pointer:i.pointer,command:"set",path:["schema",n,s],args:a}),a)m().Nj(t,{type:"set_ai_inference",ai_inference_type:a.type,collection_id:i.id});else{const e=(0,r().om)(o);m().Nj(t,{type:"remove_ai_inference",ai_inference_type:null==e?void 0:e.type,collection_id:i.id})}(0,M().p)({environment:t,collectionStore:i,performTransaction:e=>{for(const t of l)w().applyOperation({store:(0,U().Oo)(i,t.pointer),operation:t,transaction:e})}})}async function ae(e){var t;let{environment:o,store:i,property:n,propertySchema:r,userEventForAnalytics:a,sessionIdForAnalytics:l}=e;const c=l||s().JW(),p=n,u={spaceId:i.getSpaceId(),...i.pointer,propertyId:p,inferenceId:s().JW()},f=i.getAssociatedCollectionId()??(null===(t=i.getCollectionStore())||void 0===t?void 0:t.id),g=se(r,!1);if(!g)return"";m().oe(o,{type:a,inference_id:u.inferenceId,ai_inference_type:g.type,collection_id:f,session_id:c});const A=s().JW();y().callApi({eventName:"publishAiSession",environment:o,data:{inference_type:"autofill",id:A,metadata:{blockPropertyPointers:[u],aiInference:g,collection_id:f}}});const v=await y().callStreamApi({eventName:"getCompletionForProperty",environment:o,data:{blockPropertyPointers:[u],aiInference:g,aiSessionId:A,model:"default"}});if("success"!==v.type)return"";let h="";if(d().hS.is(v.data))for await(const s of v.data)"error"!==s.type&&(h+=s.completion);return h}function se(e,t){if(!(0,r().$M)(e))return;const o=(0,r().om)(e);return!o&&(0,r().lx)(e)?{type:e.type,auto_update_on_edit:t,add_options:!1}:o}},931399:(e,t,o)=>{o.d(t,{a:()=>n});o(242343);const i={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{fillRule:"evenodd",d:"m8.793 12.35 1.124 3.042a.625.625 0 1 0 1.173-.434L7.352 4.846a.988.988 0 0 0-1.854 0L1.761 14.958a.625.625 0 1 0 1.172.434l1.124-3.042zm-.462-1.25L6.425 5.943 4.52 11.1zm9.322-2.381c.345 0 .625.28.625.625v5.83a.625.625 0 1 1-1.25 0v-.204a3.26 3.26 0 0 1-2.21.83c-.903 0-1.742-.342-2.353-.98s-.961-1.537-.961-2.592.35-1.943.968-2.567c.616-.623 1.454-.942 2.346-.942.824 0 1.606.272 2.21.802v-.177c0-.345.28-.625.625-.625m-4.9 3.51c0-.774.252-1.33.608-1.69.358-.362.864-.57 1.457-.57s1.107.209 1.472.573c.361.361.616.917.616 1.686 0 1.503-.966 2.322-2.088 2.322-.582 0-1.088-.217-1.45-.595-.362-.377-.614-.952-.614-1.727",clipRule:"evenodd"})},n=(0,o(680369).wt)("textFormat",i)},965948:(e,t,o)=>{e.exports=o.p+"d96dbdbbe0581121.gif"}}]);