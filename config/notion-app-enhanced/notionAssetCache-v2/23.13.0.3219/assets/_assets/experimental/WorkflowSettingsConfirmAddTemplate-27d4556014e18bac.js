"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[11097,24708,90871],{3364:(e,t,o)=>{o.d(t,{Ay:()=>T,iZ:()=>C,vE:()=>k});var r=o(242343),n=()=>o(862510),i=()=>o(174114),a=()=>o(887508),l=()=>o(81322),c=()=>o(653998),s=()=>o(31448),u=()=>o(521325),d=()=>o(126451),p=()=>o(356813),y=()=>o(935091),m=()=>o(743668),f=()=>o(701270),g=()=>o(502852),v=()=>o(640979),h=()=>o(495312),b=()=>o(639659),x=o(163643);const _=(0,c().YK)({back:{defaultMessage:"Back",id:"collectionsSettingsMenu.back"}}),k=290,C=400;function S(e){let{children:t,title:o,desktopTitleType:r,settingsStackLength:n,handleClose:u,handleBackArrowClick:y,hideDesktopHeader:m,hasBackStack:g}=e;const v=(0,b().a)(),h=(0,c().tz)(),k=(0,i().IS)((e=>({hiddenDesktopHeaderDiv:{height:0},nonHiddenDesktopHeaderDiv:{display:"flex",alignItems:v?"top":"center",padding:v?"0px 14px 6px 14px":"14px 16px 6px 16px",height:v?void 0:42},arrowButton:{marginRight:8,marginLeft:-2,height:22},arrowIcon:{width:16,height:16},title:{flexGrow:1,fontWeight:v?s().Wy.medium:s().Wy.semibold,fontSize:v?16:14,lineHeight:v?"24px":void 0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},closeButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:18,height:18,flexShrink:0},closeButtonHover:{background:e.buttonPressedBackground},closeIcon:{width:14,fill:e.text.secondary}})),[v]),C=!v;return(0,x.jsxs)(x.Fragment,{children:[m?(0,x.jsx)("div",{style:k.hiddenDesktopHeaderDiv}):(0,x.jsxs)("div",{style:k.nonHiddenDesktopHeaderDiv,children:[(n>1||g)&&(0,x.jsx)(p().A,{icon:a().v,style:k.arrowButton,iconStyle:k.arrowIcon,onClick:y,ariaLabel:h.formatMessage(_.back)}),"sectionHeader"===r?(0,x.jsx)(f().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",customStyles:{flexGrow:1},children:o}):(0,x.jsx)("span",{style:k.title,children:o}),C&&(0,x.jsx)(d().A,{onClick:u,style:k.closeButton,hoveredStyle:k.closeButtonHover,children:(0,l().V)(k.closeIcon)})]}),t]})}function M(e,t){let{children:i,footer:a,header:l,unconstrainedWidth:c,desktopWidth:s,title:d,desktopTitleType:p,collectionSettingsStore:f,fullHeight:_,hideDesktopHeader:C,menuScrollerStyle:M,innerContentWrapperStyle:T,disableScroller:w,handleBackArrowClick:I,hasBackStack:A,handleClose:j}=e;const O=(0,o(237385).Y0)(),R=(0,o(749975).Ks)(),V=(0,v().Tf)(),H=(0,b().a)(),{currentTab:D,settingsStackLength:P,hideHeader:E}=(0,o(803290).K8)((()=>{const e=f.state;return{currentTab:(0,o(155352).S)(f),settingsStackLength:e.stack.length,hideHeader:e.hideSettingsHeader}}),[f]),B=(0,r.useCallback)((()=>{var e;I?I():u().yl({collectionSettingsStore:f,keepPreviousRef:"form_editor"===(null==R||null===(e=R.collectionViewStore())||void 0===e?void 0:e.getType())})}),[I,f,R]),N=(0,r.useCallback)((e=>{j?j(e):(0,g().SQ)({event:e,context:g().y$.CollectionSettingsClick,callback:()=>{u().os({collectionSettingsStore:f})}})}),[j,f]),W=(0,r.useCallback)((e=>{(0,h().rW)(e.target)||(0,h().iX)(e.target)||(0,h().u2)(e.target)||o(521972).g.state.isOpen||N(e)}),[N]);if(!D)return null;let F;if(O.isMobile)F={disableScroller:w,menuType:v().gu.Modal,title:d,left:P>1?(0,x.jsx)(m().MobileModalBackButton,{}):void 0,onClickLeft:P>1?B:void 0,scrollerStyle:M,innerRef:t,right:V?void 0:(0,x.jsx)(m().DoneMenuText,{}),onClickRight:V?void 0:N};else{const e=c||s?void 0:H?280:k;F={disableScroller:w,menuType:v().gu.Popup,minWidth:H?280:k,width:s,maxHeight:_?"100%":"80vh",...e&&{maxWidth:e},onClickOutside:W,scrollerStyle:{flexGrow:0,...M},header:!E&&(0,x.jsx)(S,{settingsStackLength:P,handleClose:N,handleBackArrowClick:B,hasBackStack:A,hideDesktopHeader:C,title:d,desktopTitleType:p,children:l}),paddingTop:E?6:0,footer:a,innerRef:t}}const L=(0,x.jsxs)(x.Fragment,{children:[O.isMobile&&l,i,O.isMobile&&a]});return _?(0,x.jsx)(n().Y,{direction:"vertical",children:(0,x.jsx)(y().A,{...F,children:L})}):(0,x.jsx)(o(435819).A,{capture:!0,allowMobileAutoScroll:!0,allowEsc:!0,render:e=>(0,x.jsx)(n().Y,{direction:"vertical",children:(0,x.jsx)(y().A,{...F,...e,children:(0,x.jsx)("div",{style:T,children:L})})})})}const T=(0,r.forwardRef)(M)},40642:(e,t,o)=>{o.d(t,{b:()=>n});o(242343);var r=o(163643);const n=(0,o(680369).wt)("templates",{viewBox:"0 0 20 20",svg:(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,r.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,r.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},44250:(e,t,o)=>{function r(e){return!(!e||"askUserToPick"in e)}function n(e){if(!e||!("askUserToPick"in e))return e}function i(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}o.d(t,{DK:()=>n,K$:()=>r,j6:()=>i})},44405:(e,t,o)=>{o.d(t,{A:()=>p});o(242343);var r=()=>o(862510),n=()=>o(174114),i=()=>o(650199),a=()=>o(711361),l=()=>o(31448),c=()=>o(535906),s=()=>o(397791),u=()=>o(581344),d=o(163643);function p(e){const{icon:t,iconStyle:o,title:p,caption:y,right:m,rightStyle:f,isRed:g,isGray:v,isOrange:h,onClick:b,onMouseDown:x,onMouseEnter:_,onMouseLeave:k,disabled:C,showChevron:S,chevronStyle:M,rotateChevron:T,showDragHandle:w,focused:I,textWrapperStyle:A,shouldWrapCaption:j,desktopIconStyle:O,buttonStyle:R,desktopTitleStyle:V,source:H,menuListItemProps:D}=e,P=(0,u().y$)(),E=(0,n().IS)((e=>({style:{color:v?e.text.secondary:h?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.text.primary,fill:v?e.mediumIconColor:h?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:C?.4:void 0,...R},leftIconStyle:{width:P,height:P,...t===a()._&&{height:3},...o},rightStyle:{display:"flex",alignItems:"center",color:C?e.text.primary:e.text.tertiary,fill:C?e.regularIconColor:e.lightIconColor,flexShrink:0,...f},rightChevronStyle:{marginLeft:"tableHeaderMenu"===H?0:6,transition:"transform 200ms ease-in-out",...T&&{transform:"rotate(90deg)"},...M}})),[v,h,C,o,t,M,f,R,P,T,H]),{itemRef:B,isTabbable:N,onKeyDown:W,onFocus:F}=(0,r().e)();return(0,d.jsx)(c().A,{ref:B,icon:null==t?void 0:t(E.leftIconStyle),focused:I||!1,disabled:C,title:p,caption:y,shouldWrapCaption:j,desktopTitleStyle:{flexGrow:1,flexShrink:1,...V},onKeyDown:W,onFocus:F,disallowTabbing:!N,showDragHandle:w,buttonStyle:E.style,rightStyle:E.rightStyle,isRedOnHover:g,ignoreLocalHoverState:!!C||void 0,right:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{...l().RC,display:"flex"},children:m}),!C&&S&&(0,d.jsx)(s().I,{icon:i().x,size:"sm",color:"tableHeaderMenu"===H?"secondary":"tertiary",style:E.rightChevronStyle})]}),onClick:b,onMouseDown:x,onMouseEnter:_,onMouseLeave:k,textWrapperStyle:A,desktopIconStyle:O,...D})}},130935:(e,t,o)=>{o.d(t,{_:()=>n});o(242343);var r=o(163643);const n=(0,o(680369).wt)("layout",{viewBox:"0 0 14 14",svg:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.19999C2.28953 2.19999 2.19999 2.28953 2.19999 2.39998V11.5999C2.19999 11.7103 2.28953 11.7999 2.39999 11.7999H4.99997C5.11042 11.7999 5.19997 11.7103 5.19997 11.5999V2.39998C5.19997 2.28953 5.11042 2.19999 4.99997 2.19999H2.39999ZM1 2.39998C1 1.6268 1.62679 1 2.39999 1H4.99997C5.77316 1 6.39995 1.6268 6.39995 2.39998V11.5999C6.39995 12.3731 5.77316 12.9999 4.99997 12.9999H2.39999C1.62679 12.9999 1 12.3731 1 11.5999V2.39998ZM9 8.80036C8.88954 8.80036 8.8 8.88991 8.8 9.00036V11.6003C8.8 11.7108 8.88954 11.8003 9 11.8003H11.6C11.7105 11.8003 11.8 11.7108 11.8 11.6003V9.00036C11.8 8.88991 11.7105 8.80036 11.6 8.80036H9ZM7.60001 9.00036C7.60001 8.22717 8.2268 7.60037 9 7.60037H11.6C12.3731 7.60037 13 8.22717 13 9.00036V11.6003C13 12.3736 12.3731 13.0003 11.6 13.0003H9C8.2268 13.0003 7.60001 12.3736 7.60001 11.6003V9.00036ZM8.79994 2.39998C8.79994 2.28953 8.88949 2.19999 8.99994 2.19999H11.5999C11.7104 2.19999 11.7999 2.28953 11.7999 2.39998V4.99997C11.7999 5.11043 11.7104 5.19996 11.5999 5.19996H8.99994C8.88949 5.19996 8.79994 5.11043 8.79994 4.99997V2.39998ZM8.99994 1C8.22675 1 7.59995 1.6268 7.59995 2.39998V4.99997C7.59995 5.77316 8.22675 6.39995 8.99994 6.39995H11.5999C12.3731 6.39995 12.9999 5.77316 12.9999 4.99997V2.39998C12.9999 1.6268 12.3731 1 11.5999 1H8.99994Z"})})},137696:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>a,x2:()=>n});var r=()=>o(76394);function n(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,r().O9)(t)&&n(t.type)}function a(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,r().HB)(e)}},151602:(e,t,o)=>{o.d(t,{A:()=>i});class r extends(()=>o(129044))().default{getInitialState(){return{}}}const n=new r;o(996094).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",n);const i=n},155342:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,questionMarkCircleIcon:()=>i});o(242343);var r=o(163643);const n={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,r.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},i=(0,o(680369).wt)("questionMarkCircle",n)},194585:(e,t,o)=>{o.d(t,{n:()=>S,z:()=>k});o(610931),o(242343);var r=()=>o(803290),n=()=>o(174114),i=()=>o(505966),a=()=>o(73658),l=()=>o(916963),c=()=>o(758989),s=()=>o(242978),u=()=>o(584044),d=()=>o(130935),p=()=>o(40642),y=()=>o(76394),m=()=>o(511441),f=()=>o(327665),g=()=>o(622286),v=()=>o(328653),h=()=>o(940445),b=o(163643);const x=16;function _(e){let{icon:t,theme:o,size:r,style:i}=e;const l=(0,n().IS)((e=>({icon:{fill:(0,v().d)(t,e).icon.primary,...i}})),[t,i]);return(0,b.jsx)(a().p,{icon:t,theme:o,size:r,style:l.icon})}function k(e){var t;let{template:o,size:r,iconStyle:a}=e;const l=r??x,f=(0,n().IS)((()=>({icon:{width:l,height:l,...a}})),[l,a]),g=(0,n().DP)();if((0,i().cB)(o.templateId))return(0,u().L)(f.icon);const{type:v}=o;switch(v){case"property":return(0,b.jsx)(C,{template:o,iconSize:l,styles:f});case"collection_view":return(0,b.jsx)(m().h,{viewIcon:null===(t=o.value.format)||void 0===t?void 0:t.collection_view_icon,viewType:o.value.type,color:"lightGray",style:f.icon});case"layout":return(0,b.jsx)(b.Fragment,{children:(0,d()._)(f.icon)});case"block":return(0,b.jsx)(b.Fragment,{children:(0,p().b)(f.icon)});case"collection":case"compound":const e="collection"===o.type?o.value.targetCollection.icon:o.icon;if(!(0,c().T8)(e))throw new Error("Only Notion static icons are allowed for template icons");return(0,b.jsx)(_,{icon:e,theme:g,size:l,style:f.icon});case"automation":return(0,b.jsx)(b.Fragment,{children:(0,s().v)(f.icon)});default:(0,y().HB)(v)}}function C(e){let{template:t,iconSize:o,styles:i}=e;const a=(0,n().DP)(),c=(0,g().X)("nds_default_property_noticon"),s=(0,r().K8)((()=>{const{relatedCollectionTemplateId:e}=t;if("relation"===t.value.type&&e){return h().globalWorkflowTemplates.fromIdOfType({templateId:e,type:"collection"}).value.targetCollection.icon}return t.value.icon}),[t]);return(0,b.jsx)(l().zB,{type:t.value.type,icon:s,size:o,style:i.icon,theme:a,isDefaultNoticonEnabled:c})}function S(e){let{template:t,backgroundSize:o}=e;const r=(0,n().IS)((e=>({iconContainer:{background:M({theme:e,template:t})[30]},icon:{fill:M({theme:e,template:t})[400]}})),[t]);return(0,b.jsx)(f().y,{backgroundColor:r.iconContainer.background,backgroundSize:o,icon:(0,b.jsx)(k,{template:t,iconStyle:r.icon})})}function M(e){let{theme:t,template:o}=e;const{type:r}=o;switch(r){case"collection_view":case"automation":return t.accentColors.blue;case"property":return"relation"===o.value.type?t.accentColors.yellow:t.accentColors.red;case"layout":return t.accentColors.orange;case"block":return t.accentColors.purple;case"compound":return t.accentColors.green;case"collection":return t.accentColors.pink;default:(0,y().HB)(r)}}},242978:(e,t,o)=>{o.d(t,{v:()=>n});o(242343);var r=o(163643);const n=(0,o(680369).wt)("boltFilled",{svg:(0,r.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},271142:(e,t,o)=>{o.d(t,{EC:()=>k,To:()=>_,YC:()=>C,or:()=>x,u:()=>b});o(610931);var r=o(242343),n=()=>o(237385),i=()=>o(803290),a=()=>o(496985),l=()=>o(232312),c=()=>o(653998),s=()=>o(76394),u=()=>o(337658),d=()=>o(73631),p=()=>o(137696),y=()=>o(129978),m=()=>o(113800),f=()=>o(830925),g=o(163643);const v=new WeakMap,h=(0,r.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});h.displayName="AutomationContext";function b(e){const{automationStore:t,children:o,contextType:r}=e,b=(0,n().v3)(),x=(0,c().tz)(),{value:_}=(0,y().fJ)(d().T.formulas),{value:k}=(0,y().fJ)(u().QV.automationTypecheck),C=(0,f().n)(t),S=(0,i().K8)((()=>{if(!_)return{error:new(l().N9)("Missing formulas dependency")};if(!k)return{error:new(l().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:r,contextType:n,formulasModule:i,intl:l,isSubscribed:c}=e,u=v.get(o);if(u)return u;{const e=new(a().default)((()=>{const e=o.getTriggerType();let a=n;return(0,s().O9)(e)&&(0,p().x2)(e)&&(a=(0,p().H8)(e)),(0,m().Z)({environment:t,automationStore:o,automationTypecheckModule:r,contextType:a,formulasModule:i,intl:l,isSubscribed:c})}),{debugName:"automationContextTypecheckResultCachedStore"});return v.set(o,e),e}}({environment:b,automationStore:t,automationTypecheckModule:k,contextType:r,formulasModule:_,intl:x,isSubscribed:C});return e.state}),[b,t,k,r,_,x,C]);return(0,g.jsx)(h.Provider,{value:{automationStore:t,typecheckResult:S,contextType:r,defined:!0},children:o})}function x(e){const{automationStore:t,children:o}=e,r=(0,i().K8)((()=>{var e;return null===(e=t.getTrigger())||void 0===e?void 0:e.type}),[t]);return(0,g.jsx)(b,{automationStore:t,contextType:(0,p().H8)(r??"event"),children:o})}function _(e){var t;return null===(t=v.get(e))||void 0===t?void 0:t.state}function k(){const e=r.useContext(h);if(!1===e.defined)throw new Error("No automation context found!");return e}function C(){return r.useContext(h)}},327665:(e,t,o)=>{o.d(t,{y:()=>i});o(242343);var r=()=>o(174114),n=o(163643);function i(e){let{icon:t,backgroundColor:o,backgroundSize:i}=e;const a=(0,r().IS)((e=>({iconContainer:{height:i??28,width:i??28,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",background:o??e.tint.regular}})),[o,i]);return(0,n.jsx)("div",{style:a.iconContainer,children:t})}},328653:(e,t,o)=>{o.d(t,{d:()=>i});var r=()=>o(758989);const n={light:{gray:{stroke:{secondary:"rgba(84, 72, 49, 0.15)"},fill:{primary:"rgba(84, 72, 49, 0.15)",secondary:"rgba(84, 72, 49, 0.08)",tertiary:"rgba(84, 72, 49, 0.04)"},text:{primary:"#1D1B16"}},red:{stroke:{secondary:"rgba(244, 171, 159, 0.40)"},fill:{primary:"rgba(244, 171, 159, 0.40)",secondary:"rgba(244, 171, 159, 0.40)",tertiary:"rgba(243, 136, 118, 0.07)"},text:{primary:"#5D1715"}},brown:{stroke:{secondary:"rgba(210, 162, 141, 0.35)"},fill:{primary:"rgba(210, 162, 141, 0.35)",secondary:"rgba(210, 162, 141, 0.17)",tertiary:"rgba(210, 162, 141, 0.07)"},text:{primary:"#442A1E"}},orange:{stroke:{secondary:"rgba(224, 124, 57, 0.27)"},fill:{primary:"rgba(224, 124, 57, 0.27)",secondary:"rgba(224, 124, 57, 0.15)",tertiary:"rgba(224, 124, 57, 0.07)"},text:{primary:"#49290E"}},yellow:{stroke:{secondary:"rgba(236, 191, 66, 0.39)"},fill:{primary:"rgba(236, 191, 66, 0.39)",secondary:"rgba(215, 177, 24, 0.15)",tertiary:"rgba(215, 177, 24, 0.07)"},text:{primary:"#402C1B"}},green:{stroke:{secondary:"rgba(123, 183, 129, 0.27)"},fill:{primary:"rgba(123, 183, 129, 0.27)",secondary:"rgba(123, 183, 129, 0.15)",tertiary:"rgba(123, 183, 129, 0.07)"},text:{primary:"#1C3829"}},blue:{stroke:{secondary:"rgba(93, 165, 206, 0.27)"},fill:{primary:"rgba(93, 165, 206, 0.27)",secondary:"rgba(95, 167, 208, 0.15)",tertiary:"rgba(91, 166, 209, 0.07)"},text:{primary:"#183347"}},purple:{stroke:{secondary:"rgba(168, 129, 197, 0.27)"},fill:{primary:"rgba(168, 129, 197, 0.27)",secondary:"rgba(204, 170, 229, 0.15)",tertiary:"rgba(206, 175, 229, 0.07)"},text:{primary:"#412454"}},pink:{stroke:{secondary:"rgba(225, 136, 179, 0.27)"},fill:{primary:"rgba(225, 136, 179, 0.27)",secondary:"rgba(235, 159, 196, 0.15)",tertiary:"rgba(231, 147, 188, 0.07)"},text:{primary:"#4C2337"}}},dark:{gray:{stroke:{secondary:"rgba(255, 255, 255, 0.09)"},fill:{primary:"rgba(255, 255, 255, 0.13)",secondary:"rgba(255, 255, 255, 0.09)",tertiary:"rgba(255, 255, 255, 0.03)"},text:{primary:"rgba(255, 255, 255, 0.81)"}},red:{stroke:{secondary:"rgba(222, 85, 85, 0.25)"},fill:{primary:"rgba(222, 85, 84, 0.30)",secondary:"rgba(222, 85, 84, 0.30)",tertiary:"rgba(222, 85, 88, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},brown:{stroke:{secondary:"rgba(184, 101, 69, 0.25)"},fill:{primary:"rgba(184, 101, 68, 0.30)",secondary:"rgba(184, 101, 68, 0.30)",tertiary:"rgba(184, 101, 72, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},orange:{stroke:{secondary:"rgba(233, 126, 37, 0.20)"},fill:{primary:"rgba(233, 126, 36, 0.30)",secondary:"rgba(233, 126, 36, 0.30)",tertiary:"rgba(233, 126, 40, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},yellow:{stroke:{secondary:"rgba(179, 129, 61, 0.20)"},fill:{primary:"rgba(231, 161, 55, 0.30)",secondary:"rgba(231, 161, 55, 0.30)",tertiary:"rgba(162, 105, 50, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},green:{stroke:{secondary:"rgba(45, 153, 100, 0.20)"},fill:{primary:"rgba(45, 153, 100, 0.30)",secondary:"rgba(45, 153, 100, 0.30)",tertiary:"rgba(45, 153, 100, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},blue:{stroke:{secondary:"rgba(51, 126, 169, 0.20)"},fill:{primary:"rgba(51, 126, 169, 0.33)",secondary:"rgba(51, 126, 169, 0.33)",tertiary:"rgba(51, 126, 169, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},purple:{stroke:{secondary:"rgba(155, 97, 211, 0.18)"},fill:{primary:"rgba(155, 97, 211, 0.28)",secondary:"rgba(155, 97, 211, 0.28)",tertiary:"rgba(155, 97, 211, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},pink:{stroke:{secondary:"rgba(220, 76, 145, 0.22)"},fill:{primary:"rgba(220, 76, 145, 0.30)",secondary:"rgba(220, 76, 145, 0.30)",tertiary:"rgba(220, 76, 145, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}}}};function i(e,t){const o=(0,r().VA)(e),i="lightgray"===o?"gray":o;return{...n[t.mode][i],icon:{primary:r().l8[t.mode][i]}}}},367950:(e,t,o)=>{function r(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>r})},533639:(e,t,o)=>{o.d(t,{p:()=>r});class r extends(()=>o(998969))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}},639659:(e,t,o)=>{o.d(t,{a:()=>i});var r=()=>o(803290);const n=new(o(496985).default)((()=>o(521972).g.state.isOpen),{debugName:"IsInPageViewModeStore"});function i(){return(0,r().O$)(n)}},658294:(e,t,o)=>{o.d(t,{G:()=>i});var r=()=>o(137476),n=()=>o(836331);function i(e,t){r().vd(e,"delete_property",t),n().default.logEvent("delete_property")}},686752:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,pencilLineIcon:()=>n});o(242343);const r={viewBox:"0 0 20 20",svg:(0,o(163643).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},n=(0,o(680369).wt)("pencilLine",r)},716430:(e,t,o)=>{o.d(t,{Sj:()=>c,UD:()=>l});o(610931);var r=()=>o(521325),n=()=>o(259897),i=()=>o(727528);const a={property:function(e){let{template:t,collectionStore:n,collectionViewStore:a,collectionSettingsStore:l}=e;const c=(0,i().S1)({collectionStore:n,templateId:t.templateId,instancePointerType:"property"});if(!c)throw new Error(`No property instance found for property template ${t.templateId}`);const s=a.getType();r().a2({collectionSettingsStore:l,item:{type:"property",property:c.id,formatKey:s?o(810111).u9(s):void 0}})},collection_view:function(e){let{template:t,environment:o,collectionStore:r,collectionContextStore:n}=e;const a=(0,i().S1)({collectionStore:r,templateId:t.templateId,instancePointerType:"collection_view"});if(!a)throw new Error(`No collection view instance found for property template ${t.templateId}`);c({environment:o,collectionContextStore:n,collectionViewId:a.id})},compound:function(e){}};function l(e){a[e.template.type](e)}function c(e){var t;let{environment:o,collectionContextStore:i,collectionViewId:a}=e;(null===(t=i.collectionViewStore())||void 0===t?void 0:t.id)!==a&&(0,n().t)({environment:o,collectionContextStore:i,collectionViewId:a,isFullScreen:i.isFullScreenStore.state,isRootChild:i.isRootChildStore.state,isInPeekRenderer:i.isInPeekRendererStore.state}),r().a2({collectionSettingsStore:i.settingsStore,item:{type:"main"}})}},749975:(e,t,o)=>{o.d(t,{ET:()=>c,Ks:()=>s,RI:()=>l,p2:()=>a});o(610931);var r=o(242343);const n="collectionContextStore",i=(0,o(372660).C)({displayName:n,legacyContextKey:n,modernContextDefaultValue:void 0}),a=i.context,l=i.Provider;function c(){const e=r.useContext(a);if(void 0===e)throw new Error(`No context provided: ${n}`);return e}function s(){return r.useContext(a)}},772180:(e,t,o)=>{o.r(t),o.d(t,{WorkflowSettingsConfirmAddTemplate:()=>w,isWorkflowTemplateWithConfirmStep:()=>j});o(610931);var r=o(242343),n=()=>o(237385),i=()=>o(174114),a=()=>o(505966),l=()=>o(653998),c=()=>o(975392),s=()=>o(521325),u=()=>o(84543),d=()=>o(3364),p=()=>o(948120),y=()=>o(932322),m=()=>o(951540),f=()=>o(88271),g=()=>o(749975),v=()=>o(137476),h=()=>o(605845),b=()=>o(716430),x=()=>o(940445),_=(o(403517),()=>o(752903)),k=()=>o(837809),C=o(163643);function S(e){let{template:t,style:o}=e;const r=(0,i().IS)((e=>({container:{...o,padding:12,border:`1px solid ${e.regularDividerColor}`,borderRadius:6}})),[o]),n=function(e){if((0,a().Xq)(e,"property")&&(0,a().Io)(e)){const{options:t=[]}=e.value;if(0===t.length)return;return(0,C.jsx)(M,{options:t})}}(t);return n?(0,C.jsx)("div",{style:r.container,children:n}):null}function M(e){let{options:t}=e;const o=(0,i().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:8}})),[]);return(0,C.jsx)("div",{style:o.container,children:t.map((e=>(0,C.jsx)("div",{children:(0,C.jsx)(k().O,{format:_().NY.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1})},e.id)))})}var T=()=>o(194585);function w(e){let{template:t,collectionSettingsStore:o}=e;const[a,c]=(0,r.useState)("sample"===t.propertyOptionsType),{device:{isMobile:s}}=(0,n().v3)(),u=(0,i().IS)((e=>{const t={display:"flex",flexDirection:"column",minHeight:0};return{shrinkableHeight:t,noShrink:{flexShrink:0},featurePreviewWrapper:{...t,width:"-webkit-fill-available"},featurePreviewBody:{...t,gap:16,...s?{margin:"16px 0"}:{margin:0}},featurePreview:{...t,overflow:"auto"},addButtonContainer:{...s?{margin:"12px 0"}:{marginBottom:6}}}}),[s]),m=(0,x().getWorkflowTemplateName)(t);return(0,C.jsxs)(d().Ay,{collectionSettingsStore:o,title:(0,C.jsx)(l().sA,{id:"workflowTemplateSettings.confirmAddTemplate.title",defaultMessage:"Turn on {templateName}",values:{templateName:m}}),disableScroller:!0,menuScrollerStyle:u.shrinkableHeight,innerContentWrapperStyle:u.shrinkableHeight,children:[(0,C.jsx)(f().A,{style:u.shrinkableHeight,children:(0,C.jsx)(y().Ay,{style:u.shrinkableHeight,textWrapperStyle:u.featurePreviewWrapper,bodyStyle:u.featurePreviewBody,body:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(I,{template:t,style:u.noShrink}),(0,C.jsx)(S,{template:t,style:u.featurePreview})]})})}),(0,C.jsx)(f().A,{style:u.noShrink,children:t.value.options&&t.value.options.length>0&&(0,C.jsx)(p().A,{title:(0,C.jsx)(l().sA,{id:"workflowTemplateSettings.confirmAddTemplate.propertyOptionsToggle",defaultMessage:"Set my own options"}),switcherProps:{on:a,disallowTabbing:!0},onClick:()=>{c(!a)}})}),(0,C.jsx)(f().A,{style:u.noShrink,children:(0,C.jsx)(y().Ay,{body:(0,C.jsx)(A,{template:t,startEmpty:a}),bodyStyle:u.addButtonContainer})})]})}function I(e){let{template:t,style:o}=e;const r=(0,n().Y0)(),l=(0,i().IS)((()=>({container:{...o,display:"flex",alignItems:"center",gap:12},textWrapper:{lineHeight:r.isMobile?"20px":"18px"},title:{fontSize:r.isMobile?16:13},caption:{fontSize:r.isMobile?14:12,overflow:"hidden",color:"gray",whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[r,o]),c=(0,x().getWorkflowTemplateName)(t),s=(0,a().Uy)(t);return(0,C.jsxs)("div",{style:l.container,children:[(0,C.jsx)(T().n,{template:t,backgroundSize:32}),(0,C.jsxs)("div",{style:l.textWrapper,children:[(0,C.jsx)("div",{style:l.title,children:c}),s&&(0,C.jsx)("div",{style:l.caption,children:s})]})]})}function A(e){let{template:t,startEmpty:o}=e;const r=(0,i().IS)((()=>({button:{width:"100%"}})),[]),a=(0,n().v3)(),d=(0,g().ET)(),p=(0,x().getWorkflowTemplateName)(t),y=c().mg(t);return o&&delete y.value.options,(0,C.jsx)(m().A,{style:r.button,size:"lg",onClick:()=>{u().createAndCommit({userAction:"WorkflowSettingsConfirmAddTemplate.addFeatureTemplateToTarget",environment:a,canUndo:!0,perform:e=>{const o=d.collectionStore();if(!o)throw new Error("collectionStore not found");h().ai({environment:a,transaction:e,collectionStore:o,template:y,logger:new(x().WorkflowTemplateLogger),origin:"suggested_feature"});const r=d.settingsStore;s().yl({collectionSettingsStore:r});const n=o.getWorkflowTemplateId();(0,v().u4)({environment:a,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:"suggested_properties",template_id_added:t.templateId,collection_template_id:n}}});const i=d.collectionViewStore();i&&(0,b().UD)({template:t,environment:a,collectionStore:o,collectionViewStore:i,collectionSettingsStore:r,collectionContextStore:d})}})},children:(0,C.jsx)(l().sA,{id:"workflowTemplateSettings.confirmAddTemplate.button",defaultMessage:"Add {templateName}",values:{templateName:p}})})}function j(e){return"property"===e.type&&("select"===e.value.type||"multi_select"===e.value.type)}},779698:(e,t,o)=>{o.d(t,{Ah:()=>g,Dk:()=>y,Iv:()=>f,SF:()=>m,YO:()=>b,_f:()=>_,c_:()=>d,dW:()=>h,gW:()=>p,sp:()=>k,vN:()=>v});o(610931),o(362833),o(725707),o(491955),o(771702),o(403517),o(113085);var r=()=>o(975392),n=()=>o(204132),i=()=>o(76394),a=()=>o(599932),l=()=>o(465546),c=()=>o(409211),s=()=>o(34662),u=()=>o(876988);function d(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:t})}function p(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:t})}function y(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:t})}function m(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:t})}function f(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:t})}function g(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:t})}function v(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:t})}function h(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:t})}function b(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:t})}function x(e){const{formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:r,getRecordModel:a,spaceId:c,value:s,featureGates:u}=e;if("formula"===s.type){if(!(0,i().O9)(s.value))return;const e=n().Q.unwrapOr(o.parseFormulaInputToAst(s.value),void 0);if(e){const n=o.addTypesToFormulaAST(e,{handleDataRequest:(0,l().zg)(a),spaceId:c,valueTypes:r,featureGates:u});return{...t.getFormulaAnalytics(e,{getRecordModel:a,typecheckContextValues:r}),formula_return_type:n.node.type,redacted_formula:t.getRedactedFormulaAsStringSync(e,{getRecordModel:a,typecheckContextValues:r})}}}else{if("simple"===s.type){if(!(0,i().O9)(s.value))return;return t.getSimpleFormulaAnalytics(s.value,{getRecordModel:a,typecheckContextValues:r})}(0,i().HB)(s.type)}}function _(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:y,featureGates:m,simpleFormulasModule:f}=e;return t.isType("complete_sprint")?{automation_action_id:t.pointer.id,type:"complete_sprint"}:t.isType("create_page")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:r,formulaTypecheckContextValues:n,getRecordModel:a,featureGates:l}=e,c=t.getConfig();let s,u=[];const d=null==c?void 0:c.collection,p=null==c?void 0:c.properties;if((0,i().O9)(d)&&(0,i().O9)(p)&&p.length>0){const e=a(d),m=null==e?void 0:e.getNormalizedSchema();(0,i().O9)(m)&&(u=p.map((e=>{var t;return(null===(t=m[e])||void 0===t?void 0:t.type)??"unknown"})));const f=null==c?void 0:c.values;if(r&&(0,i().O9)(f)){s=[];for(const e of p){var y;const i=null===(y=f[e])||void 0===y?void 0:y.value;if(!i)continue;const c=x({formulaAnalyticsModule:o,formulasModule:r,getRecordModel:a,formulaTypecheckContextValues:n,spaceId:t.spaceId,value:i,featureGates:l});c&&s.push(c)}}}return{automation_action_id:t.pointer.id,property_formula_stats:s,property_types:u,type:"create_page"}}({automationActionModel:t,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:y,featureGates:m}):t.isType("duplicate_blocks")?{automation_action_id:t.pointer.id,type:"duplicate_blocks"}:t.isType("modal_confirmation")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:r,formulaTypecheckContextValues:n,getRecordModel:a,featureGates:l}=e,c=t.getConfig(),s=[];if(r&&(0,i().O9)(c)&&c.text){const e=x({formulasModule:r,formulaAnalyticsModule:o,getRecordModel:a,formulaTypecheckContextValues:n,spaceId:t.spaceId,value:c.text,featureGates:l});e&&s.push(e)}return{automation_action_id:t.pointer.id,formula_stats:s,type:"modal_confirmation"}}({automationActionModel:t,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:y,featureGates:m}):t.isType("open_page")?{automation_action_id:t.pointer.id,type:"open_page"}:t.isType("query_collection")?{automation_action_id:t.pointer.id,type:"query_collection"}:t.isType("send_in_app_notification")?function(e){var t;const{automationActionModel:o,formulaAnalyticsModule:r,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:l,featureGates:c,simpleFormulasModule:u}=e,d={automation_action_id:o.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},p=o.getConfig();if(!(0,i().O9)(p))return d;if((0,i().O9)(p.target))if("formula"===p.target.type&&(0,i().O9)(p.target.value)){if(d.targetData={type:"formula",numUserFormulaTargets:(0,s().Fbh)(p.target.value.value).length,numFormulaContextTargets:u.getReferencedContextValueIds(p.target.value).length},n){const e=x({formulasModule:n,formulaAnalyticsModule:r,getRecordModel:l,formulaTypecheckContextValues:a,spaceId:o.spaceId,value:p.target.value,featureGates:c});e&&(d.formula_stats??=[],d.formula_stats.push(e))}}else if("property"===p.target.type&&(0,i().O9)(p.target.propertyId)&&(0,i().O9)(p.target.collectionPointer)){const e=l(p.target.collectionPointer),t=null==e?void 0:e.getSchema();var y;(0,i().O9)(t)&&(d.targetData={type:"property",propertyType:null===(y=t[p.target.propertyId])||void 0===y?void 0:y.type})}if((0,i().O9)(null===(t=p.notification_message)||void 0===t?void 0:t.value)&&(d.messageCharacterCount=(0,s().FAw)(p.notification_message.value),n)){const e=x({formulasModule:n,formulaAnalyticsModule:r,getRecordModel:l,formulaTypecheckContextValues:a,spaceId:o.spaceId,value:p.notification_message,featureGates:c});e&&(d.formula_stats??=[],d.formula_stats.push(e))}return d}({automationActionModel:t,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:y,featureGates:m,simpleFormulasModule:f}):t.isType("send_gmail_notification")?function(e){var t,o,n,l,u,d,p;const{automationActionModel:y,formulaAnalyticsModule:m,formulasModule:f,formulaTypecheckContextValues:g,getRecordModel:v,featureGates:h}=e,b=y.getConfig();if(!(0,i().O9)(b))return{automation_action_id:y.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const _=Object.fromEntries(Object.entries(b||{}).map((e=>{let[t,o]=e;var r;return"formula"===(null==o?void 0:o.type)?[t,Boolean(null==o||null===(r=o.value)||void 0===r?void 0:r.value)]:"simple"===(null==o?void 0:o.type)?[t,Boolean(null==o?void 0:o.value)]:[t,Boolean(o)]}))),{to:k,cc:C,bcc:S}=b,M=[...(null==k||null===(t=k.value)||void 0===t?void 0:t.value)||[],...(null==C||null===(o=C.value)||void 0===o?void 0:o.value)||[],...(null==S||null===(n=S.value)||void 0===n?void 0:n.value)||[]],T=[...(0,s().Fbh)(M).map((e=>v({table:c().oo,id:e}))).map((e=>null==e?void 0:e.email)).filter(i().O9),...(0,a().C3)((0,s().k4p)(M))],w=r().Tr(T.map((e=>e.split("@")[1]))),I=[null===(l=b.to)||void 0===l?void 0:l.value,null===(u=b.cc)||void 0===u?void 0:u.value,null===(d=b.bcc)||void 0===d?void 0:d.value,null===(p=b.reply_to)||void 0===p?void 0:p.value,b.from_name,b.email_subject,b.email_body].map((e=>{if(f&&(0,i().O9)(e))return x({formulaAnalyticsModule:m,formulasModule:f,getRecordModel:v,formulaTypecheckContextValues:g,spaceId:y.spaceId,value:e,featureGates:h})})).filter(i().O9);return{automation_action_id:y.pointer.id,fields:_,formula_stats:I,recipient_domains:w,type:"send_gmail_notification"}}({automationActionModel:t,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:y,featureGates:m}):t.isType("slack_notification")?{automation_action_id:t.pointer.id,type:"slack_notification"}:t.isType("update_pages")?function(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:r,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:c,featureGates:s}=e,d=t.getConfig(),p=[],y=[],m=[];if((0,i().O9)(d)&&(0,i().O9)(d.target)&&(0,i().O9)(d.properties)&&d.properties.length>0){let e;if("variable"===d.target.type){const t=(0,l().y5)(d.target.id);if("action"===t.source){const t=(0,u().y)({actionModels:o,id:d.target.id}).collectionPointer;if((0,i().O9)(t)){const o=c(t);e=null==o?void 0:o.getNormalizedSchema()}}else{if("global"!==t.source||"button_page"!==t.global)throw new Error("Failed loading property schema");{const t=(0,l().IV)(a,d.target.id);if("block"===(null==t?void 0:t.type.type)&&(0,i().O9)(t.type.collection)){const o=c(t.type.collection);e=null==o?void 0:o.getNormalizedSchema()}}}}else if("collection"===d.target.type){const t=c(d.target.collection);e=null==t?void 0:t.getNormalizedSchema()}(0,i().O9)(e)&&d.properties.forEach((o=>{const l=e[o];if((0,i().O9)(l)&&(p.push(l.type),n&&(0,i().O9)(d.values))){const e=d.values[o];if((0,i().O9)(e)&&(y.push({type:l.type,operator:e.action}),e.value)){const o=x({formulasModule:n,formulaAnalyticsModule:r,getRecordModel:c,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:e.value,featureGates:s});o&&m.push(o)}}}))}return{automation_action_id:t.pointer.id,property_configs:y,property_formula_stats:m,property_types:p,type:"update_pages"}}({automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:y,featureGates:m}):t.isType("define_variables")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:r,formulaTypecheckContextValues:n,getRecordModel:a,featureGates:l}=e,c=t.getConfig(),s=[];if(r&&(0,i().O9)(c)&&c.values)for(const i of Object.values(c.values))if(i.value){const e=x({formulasModule:r,formulaAnalyticsModule:o,getRecordModel:a,formulaTypecheckContextValues:n,spaceId:t.spaceId,value:i.value,featureGates:l});e&&s.push(e)}return{automation_action_id:t.pointer.id,formula_stats:s,type:"define_variables"}}({automationActionModel:t,formulaAnalyticsModule:n,formulasModule:d,formulaTypecheckContextValues:p,getRecordModel:y,featureGates:m}):t.isType("http_request")?{automation_action_id:t.pointer.id,type:"http_request"}:t.isType("publish_site")?{automation_action_id:t.pointer.id,type:"publish_site"}:void(0,i().HB)(t)}function k(e){const{automationModel:t,builderType:o="sidebar",formulaAnalyticsModule:r,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:l,featureGates:c,simpleFormulasModule:s,source:u}=e,d=[],p=t.getActionPointers().map((e=>l(e))).filter(i().O9);for(const b of t.getActionPointers()){const e=l(b);(0,i().O9)(e)&&d.push(_({automationActionModel:e,automationActionModels:p,formulaAnalyticsModule:r,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:l,featureGates:c,simpleFormulasModule:s}))}const y=[];let m,f,g;if(t.isEventType()){var v;const e=t.getEventConfiguration(),o=l(t.getParentPointer());m=t.getParentId();const r=t.getEventConfiguration();if("collection_view"===(null===(v=r.source)||void 0===v?void 0:v.type)){const e=l(r.source.pointer);g=null==e?void 0:e.parent_id,f=null==r?void 0:r.source.pointer.id}const n=null==o?void 0:o.getNormalizedSchema();if((0,i().O9)(n)){const{pagesAdded:t,pagePropertiesEdited:o}=e;if(t&&y.push({type:"page"}),"any"===o.type)y.push({condition:"any",type:"property"});else if("none"===o.type)y.push({condition:"none",type:"property"});else{let e=[];"some"===o.type?e=o.some??[]:"all"===o.type&&(e=o.all??[]);const t=[],r=[];e.forEach((e=>{var o;const a=null===(o=n[e.property])||void 0===o?void 0:o.type;(0,i().O9)(a)&&(t.push({type:a,operator:e.filter.operator}),r.push(a))})),y.push({condition:o.type,property_configs:t,property_types:r,type:"property"})}}}else if(t.isButtonType())y.push({type:"button"});else if(t.isRecurrenceType()){var h;y.push({type:"recurrence",frequency:null===(h=t.getTrigger().recurrence)||void 0===h?void 0:h.frequency})}else(0,i().HB)(t);return{automation_actions:d,automation_id:t.id,automation_triggers:y,collection_id:m,collection_view_id:f,collection_view_block_id:g,builder_type:o,source:u}}},837809:(e,t,o)=>{o.d(t,{O:()=>s,q:()=>u});o(242343);var r=()=>o(174114),n=()=>o(220413),i=()=>o(31448),a=()=>o(826033),l=()=>o(809785),c=o(163643);function s(e){const{value:t,color:o,format:s,showEllipsis:u,onClickRemove:d,showRemoveButton:p,isSingle:y,shouldShrink:m,hideTooltip:f,description:g,tooltipPlacement:v,...h}=e,b=(0,r().DP)(),x=(0,r().IS)((e=>({token:{...u&&i().RC}})),[u]),{textColor:_,backgroundColor:k}=(0,n().LD)(b,o);return t?(0,c.jsx)(l().A,{format:s,value:(0,c.jsx)(a().A,{children:t}),description:g,onClickRemove:d,showRemoveButton:p,isSingle:y,color:_,backgroundColor:k,shouldShrink:m,tooltipPlacement:v,showTooltip:f?"never":"overflow",style:x.token,...h}):null}function u(e){const{value:t,color:o,format:s,showEllipsis:u,onClickRemove:d,showRemoveButton:p,isSingle:y,shouldShrink:m,groupColor:f,tooltipPlacement:g,description:v,hideTooltip:h,...b}=e,x=(0,r().DP)(),_=(0,r().IS)((()=>({token:{...u&&i().RC}})),[u]);if(!t)return null;const{textColor:k,backgroundColor:C}=(0,n().LD)(x,o??f??"gray");let S;return S=o||(f||"gray"),(0,c.jsx)(l().A,{format:s,value:(0,c.jsx)(a().A,{children:t}),description:v,onClickRemove:d,showRemoveButton:p,isSingle:y,color:k,backgroundColor:C,shouldShrink:m,showTooltip:h?"never":"overflow",style:_.token,isRound:!0,showColoredDot:S,tooltipPlacement:g,...b})}},876988:(e,t,o)=>{o.d(t,{y:()=>i});o(725707),o(500234);var r=()=>o(76394),n=()=>o(465546);function i(e){var t;const{actionModels:o,id:i}=e,a=(0,n().y5)(i),l="action"===a.source?o.find((e=>e.id===a.action_id)):void 0,c=(0,r().O9)(l)&&l.isType("create_page")?null===(t=l.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:a,collectionPointer:c,actionModel:l}}},887508:(e,t,o)=>{o.d(t,{v:()=>n});o(242343);var r=o(163643);const n=(0,o(680369).wt)("arrowLeftThick",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},911575:(e,t,o)=>{o.d(t,{$0:()=>g,Fx:()=>C,Ge:()=>y,I3:()=>d,Kj:()=>_,PP:()=>S,TK:()=>M,Yy:()=>u,aE:()=>T,cQ:()=>k,kH:()=>m,m7:()=>p,nq:()=>b,nv:()=>v,tj:()=>f});o(725707),o(491955),o(113085);var r=()=>o(975392),n=()=>o(76394),i=()=>o(564134),a=()=>o(810111),l=()=>o(479056),c=()=>o(875089);(0,n().u0)((e=>(0,n().O9)(e)&&(0,n().O9)(e.target)&&(0,n().O9)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target,custom_message:e.custom_message}}:{false:e}));const s={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1},u={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function d(e){return Boolean(s[e.type]&&!(0,i().UU)(e)&&(!(0,i().$M)(e)||void 0===(0,i().om)(e)))}function p(e){const{collectionFormat:t,collectionSchema:o,filter:l,sort:s,sourcePropertyIds:u}=e,p=(u??(0,n().uv)(o)).filter(((t,r,n)=>{const a=o[t];return!(!a||!d(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,i().o2)(e.spaceId,a))&&(!l||l([t,a],r,o)))}));if(0===p.length)return[];if(!t||!1===s)return p;const y=(0,c().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(p,(e=>y.findIndex((t=>t.property===e))))}function y(e){const{collectionFormat:t,collectionSchema:o,sort:l}=e,s=(0,n().uv)(o).filter(((e,t,r)=>{const n=o[e];return!(!n||!(0,i().JY)(n))}));if(0===s.length)return[];if(!t||!1===l)return s;const u=(0,c().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(s,(e=>u.findIndex((t=>t.property===e))))}function m(e){return e.type===l().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===l().M9.TokenExpected?{type:e.type,token:e.token}:e.type===l().uW.MissingSchemaPropertyOnThisRow||e.type===l().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===l().uW.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===l().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===l().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===l().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===l().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node}:e.type===l().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===l().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===l().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===l().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===l().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const f={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,geo_point:!1};function g(e){return Boolean(f[e.type])}function v(e){const{collectionFormat:t,collectionSchema:o,filter:l,sort:s}=e,u=(0,n().uv)(o).filter(((e,t,r)=>{var n;const a=o[e];return!(!a||!f[a.type])&&((!(0,i().$M)(a)||null===(n=(0,i().om)(a))||void 0===n||!n.auto_update_on_edit)&&(!l||l([e,a],t,o)))}));if(0===u.length)return[];if(!t||!1===s)return u;const d=(0,c().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(u,(e=>d.findIndex((t=>t.property===e))))}const h={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function b(e){return h[e.type]}const x={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function _(e){return x[e.type]}function k(e){return 0===e}function C(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function S(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function M(e){const{collectionSchema:t,property:o,type:r}=e,n=null==t?void 0:t[o];return!n||("action"===r?!d(n):!f[n.type])}function T(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:r,source:i,relativeDate:a}=t.event;if(void 0===i)return!1;const l="some"===r.type&&r.some,c="all"===r.type&&r.all;if((l||c||[]).some((e=>S({collectionSchema:o,property:e.property})||M({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const s="some"===r.type&&(!(0,n().O9)(r.some)||0===r.some.length),u="all"===r.type&&(!(0,n().O9)(r.all)||0===r.all.length);if(!e&&("none"===r.type||s||u)&&!a)return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},948120:(e,t,o)=>{o.d(t,{A:()=>n});o(242343);var r=o(163643);const n=function(e){let{switcherProps:t,...n}=e;return(0,r.jsx)(o(44405).A,{right:(0,r.jsx)(o(431551).A,{onClick:n.onClick,disabled:n.disabled,...t}),...n})}},963644:(e,t,o)=>{o.d(t,{i:()=>i});var r=()=>o(876695),n=()=>o(658294);function i(e){const{environment:t,collectionContextStore:o,property_type:i,from:a,property:l,...c}=e,s=(0,r().sl)(o)||{};(0,n().G)(t,{property:l,property_type:i,from:a,...c,...s})}},994488:(e,t,o)=>{o.d(t,{o:()=>r});o(362833),o(403517);function r(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(0===o.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...r(o[0],...o.slice(1)).map((e=>[a,...e])));return i}}}]);