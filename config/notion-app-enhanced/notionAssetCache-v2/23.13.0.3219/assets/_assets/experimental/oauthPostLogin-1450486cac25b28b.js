"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[56353],{382554:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var n=i(242343),o=()=>i(237385),l=()=>i(682369),r=()=>i(758611),s=()=>i(809811),a=()=>i(502140),c=()=>i(818369);var d=()=>i(473096),u=()=>i(803290),g=()=>i(174114),h=()=>i(222324),m=()=>i(446588),p=()=>i(998133),f=()=>i(653998),x=()=>i(220413),y=()=>i(31448),b=()=>i(927685),v=()=>i(286404),j=()=>i(951540),S=()=>i(28210),A=()=>i(611824),w=()=>i(623970),C=i(163643);function k(e){const{confirmationData:t}=e,{clientName:i,clientCapability:l}=t,r=(0,n.useMemo)((()=>!i||!(null!=l&&l.read_user_email_name_photo)),[i,l]),s=function(e){const{WindowSizeStore:t}=e.environment,i=(0,u().K8)((()=>t.state.width>500),[t]),n=(0,u().K8)((()=>t.state.height<900),[t]);return(0,g().IS)((e=>({layoutContainer:{height:"100%",overflow:"auto",backgroundColor:i?x().Ay.frontCreamBackground:x().Ay.white},pageContainer:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},contentBox:{width:"500px",minHeight:"480px",borderRadius:5,backgroundColor:x().Ay.white,boxShadow:i?e.shadowSM:"none",display:"flex",flexDirection:"column",fontSize:y().J.UIRegular.desktop,marginTop:n?16:i?"calc((100vh - 900px) / 2)":0,marginBottom:40,transition:"all 0.2s ease"},contentBody:{paddingLeft:40,paddingRight:40,paddingTop:25,paddingBottom:25,flex:1,display:"flex",flexDirection:"column"}})),[i,n])}({environment:(0,o().v3)()});return(0,C.jsx)("div",{style:s.layoutContainer,children:(0,C.jsx)("div",{style:s.pageContainer,children:(0,C.jsxs)("div",{style:s.contentBox,children:[(0,C.jsx)(w().A,{disableAccountSwitcher:!0,onSpaceSwitch:async e=>{},useEmailAccount:!0}),(0,C.jsx)("div",{style:s.contentBody,children:r?(0,C.jsx)(_,{...e}):(0,C.jsx)(M,{...e})})]})})})}function _(e){const{setCanRedirect:t,setRedirectUrl:i}=e,[l,r]=(0,n.useState)(!1),s=function(){const{isMobile:e}=(0,o().Y0)(),t=e?25:48,i=e?18:20;return(0,g().IS)((()=>({container:{textAlign:"center",flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},icon:{fill:x().Ay.red,width:t,height:t,marginBottom:20,display:"inline-block"},title:{fontSize:i,margin:"0 50px 32px",textAlign:"center",fontWeight:y().Wy.medium,marginBottom:12},body:{marginTop:0,marginBottom:24,width:"80%"}})),[t,i])}(),a=(0,C.jsx)(f().sA,{id:"globalOauthConfirmationPage.error.title",defaultMessage:"Something went wrong."}),c=(0,n.useCallback)((()=>{r(!0),i(b().A.domainBaseUrl),t(!0)}),[r,i,t]);return(0,C.jsxs)("section",{style:s.container,children:[(0,h().f)(s.icon),(0,C.jsx)("header",{style:s.title,children:a}),(0,C.jsx)("p",{style:s.body,children:(0,C.jsx)(f().sA,{id:"globalOauthConfirmationPage.error.detail",defaultMessage:"Please try again or contact Notion support."})}),(0,C.jsx)("div",{style:s.body,children:(0,C.jsx)(j().A,{size:"lg",onClick:c,disabled:l,children:(0,C.jsx)(f().sA,{id:"globalOauthConfirmationPage.error.returnHome",defaultMessage:"Return to home"})})})]})}function M(e){const{clientId:t,confirmationData:i,setCanRedirect:l,setRedirectUrl:r}=e,{clientName:s,clientMetadata:a,clientCapability:c}=i,[d,u]=(0,n.useState)(!1),h=(0,n.useMemo)((()=>!!c&&(0,m().jj)(c)),[c]),x=(0,n.useCallback)((()=>{u(!0),r(b().A.domainBaseUrl),l(!0)}),[u,r,l]),w=(0,n.useCallback)((()=>{u(!0),l(!0)}),[l,u]),k=function(){const{isMobile:e}=(0,o().Y0)();return(0,g().IS)((t=>({title:{fontSize:e?18:20,margin:"0 50px 22px",textAlign:"center",fontWeight:y().Wy.medium},inlineTextLink:{color:"black",textDecoration:"none"},buttonGroup:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:34},footer:{fontSize:y().J.UISmall.desktop,color:t.text.secondary,paddingTop:20,paddingBottom:16},innerFooterContainer:{color:t.text.primary,fontWeight:y().Wy.semibold,marginBottom:4}})),[e])}(),_=null!=a&&a.logo_url?{pointer:{table:p().W,id:t},icon:a.logo_url}:void 0;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{style:{padding:15},children:(0,C.jsx)(S().B,{icon:_,disabled:!0,title:s,size:54,isEmptyPage:!1,style:{margin:"auto"}})}),(0,C.jsx)("div",{style:k.title,children:(0,C.jsx)(f().sA,{id:"globalOauthConfirmationPage.permissions.title",defaultMessage:"<inlinetextlink>{clientName}</inlinetextlink> is requesting access to your name, email, and profile photo.",values:{clientName:s,inlinetextlink:e=>null!=a&&a.website_url?(0,C.jsx)(A().A,{style:k.inlineTextLink,href:null==a?void 0:a.website_url,children:e}):e}})}),h&&(0,C.jsx)("div",{style:{textAlign:"center"},children:(0,C.jsx)(f().sA,{id:"globalOauthConfirmationPage.permissions.noWorkspaceAccess",defaultMessage:"{clientName} will not have access to any of your Notion workspaces.",values:{clientName:s}})}),(0,C.jsxs)("div",{style:k.buttonGroup,children:[(0,C.jsx)(v().A,{size:"lg",onClick:x,style:{height:32},disabled:d,children:(0,C.jsx)(f().sA,{id:"globalOauthConfirmationPage.permissions.cancel",defaultMessage:"Cancel"})}),(0,C.jsx)(j().A,{size:"lg",onClick:w,disabled:d,children:(0,C.jsx)(f().sA,{id:"globalOauthConfirmationPage.permissions.allow",defaultMessage:"Allow"})})]}),(0,C.jsx)("footer",{style:k.footer,children:(0,C.jsx)("div",{children:(0,C.jsx)(f().sA,{id:"globalOauthConfirmationPage.permissions.warning.body",defaultMessage:"By allowing access, you consent to sharing info with {clientName}. Learn how <inlinetextlink>{clientName}</inlinetextlink> handles your data by reviewing their <privacypolicylink>Privacy Policy</privacypolicylink> and <termsofservicelink>Terms of Service</termsofservicelink>.",values:{clientName:s,inlinetextlink:e=>null!=a&&a.website_url?(0,C.jsx)(A().A,{href:null==a?void 0:a.website_url,children:e}):e,privacypolicylink:e=>null!=a&&a.privacy_policy_url?(0,C.jsx)(A().A,{href:null==a?void 0:a.privacy_policy_url,children:e}):e,termsofservicelink:e=>null!=a&&a.terms_of_use_url?(0,C.jsx)(A().A,{href:null==a?void 0:a.terms_of_use_url,children:e}):e}})})})]})}function I(e){const t=(0,o().v3)(),{clientId:i,redirectUri:u,csrfState:g,responseType:h,scope:m}=e,[p,f]=(0,n.useState)(!1),[x,y]=(0,n.useState)(void 0),[b,v]=(0,n.useState)(void 0);return(0,n.useEffect)((()=>{const e=s().Gm({url:`${r().JZ.globalOauthAuthorization}`,query:{client_id:i,state:g,redirect_uri:u,scope:m,response_type:h,skip_confirmation:"true"}});v(e)}),[i,u,g,h,m,v,f]),(0,l().A)((()=>{(async()=>{const e=await async function(e){const{environment:t,clientId:i,requestedScopes:n}=e,o=await c().callApi({eventName:"getOauthMetadata",environment:t,data:{clientId:i,requestedScopes:n}});return"failed"!==o.type&&o.data?{clientName:o.data.clientName,clientMetadata:o.data.clientMetadata,clientCapability:o.data.clientCapability,previouslyConfirmedOauth:o.data.issuedValidToken}:(a().log({level:"warning",type:"requestFaileOrMissingData",from:"globalOauthActions",data:{miscDataToConvertToString:{clientId:i,currentUserId:t.currentUser.id}}}),{previouslyConfirmedOauth:!1})}({environment:t,clientId:i,requestedScopes:[m]}),{previouslyConfirmedOauth:n}=e;n&&f(!0),y(e)})()}),!p),(0,n.useEffect)((()=>{p&&b&&(window.location.href=b)}),[p,b]),!x||x.previouslyConfirmedOauth?(0,C.jsx)(d().A,{}):(0,C.jsx)(k,{clientId:i,confirmationData:x,setCanRedirect:f,setRedirectUrl:v})}},501578:(e,t,i)=>{i.d(t,{j:()=>d});var n=i(242343),o=()=>i(237385),l=()=>i(174114),r=()=>i(31448),s=()=>i(103151);var a=()=>i(907721),c=i(163643);function d(e){let{children:t,style:i,tooltipStyle:d,placement:u=a().W.Bottom}=e;const{isSafari:g}=(0,o().Y0)(),h=(0,n.useRef)(null),m=function(e){const[t,i]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const{current:t}=e;if(!t)return void i(!1);const n="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;i(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==n||n.observe(t),()=>null==n?void 0:n.unobserve(t)}),[]),t}(h),p=(0,l().IS)((()=>({overflowText:{...r().RC,...i}})),[i]);return(0,c.jsx)(s().A,{delayThreshold:500,placement:u,textWrap:!0,style:d,forceVisibleState:!(g||!m)&&void 0,renderTooltip:()=>m?t:void 0,render:e=>(0,c.jsx)("div",{ref:h,style:p.overflowText,...e,children:t})})}},623970:(e,t,i)=>{i.d(t,{A:()=>p});i(242343);var n=()=>i(237385),o=()=>i(803290),l=()=>i(174114),r=()=>i(744819),s=()=>i(653998),a=()=>i(220413),c=()=>i(31448),d=()=>i(303643),u=()=>i(485966),g=()=>i(874356),h=i(163643);const m={borderRadius:4,marginBottom:0};function p(e){const{onSpaceSwitch:t,disableAccountSwitcher:i,singleSpaceToSelect:p,useEmailAccount:f}=e,x=(0,s().tz)(),y=function(){const{isMobile:e}=(0,n().Y0)();return(0,l().IS)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"space-between",height:60,paddingLeft:20,paddingRight:8,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:a().Ay.contentBorder},notionLogo:{width:e?28:30,height:e?28:30,marginRight:10,flexShrink:0},notionTitle:{fontWeight:c().Wy.medium,fontSize:16},switcherButton:{borderRadius:4,marginBottom:0}})),[e])}(),{currentUserEmail:b,currentUserId:v}=(0,o().K8)((()=>{const{currentUserStore:e}=u().default.state;return{currentUserEmail:null==e?void 0:e.getEmail(),currentUserId:null==e?void 0:e.id}}),[]);return(0,h.jsxs)("div",{style:y.container,children:[(0,r().A)(y.notionLogo),(0,h.jsx)("div",{style:y.notionTitle,children:"Notion"}),(0,h.jsx)("div",{style:{flexGrow:1,flexShrink:1}}),(0,h.jsx)("div",{style:{flexShrink:0},children:f?b&&v?(0,h.jsx)(g().A,{prefix:x.formatMessage({id:"oauthAuthorizationTopBar.loggedInAs",defaultMessage:"Logged in as"}),emailAddress:b,userId:v,disabled:!0,accountActions:[]}):(0,h.jsx)(h.Fragment,{}):(0,h.jsx)(d().Ay,{format:d().z_.Regular,onSpaceClick:e=>{let{spaceViewStore:i}=e;return t(i)},shouldShowUnexpandButton:!1,shouldShowCreatePageButton:!1,disableLoginLink:!0,buttonStyle:m,disabled:i,singleSpaceToSelect:p})})]})}},874356:(e,t,i)=>{i.d(t,{A:()=>s});i(242343);var n=()=>i(31448),o=()=>i(640979),l=()=>i(273520),r=i(163643);const s=function(e){let{emailAddress:t,disabled:s,accountActions:a,prefix:c}=e;const d=(0,i(237385).v3)(),{device:u}=d,g=(0,i(803290).uB)(void 0,i(962373).A);let h;h=u.isMobile?{menuType:o().gu.ActionSheet}:{menuType:o().gu.Popup};const m=(0,i(174114).IS)((e=>({container:{height:u.isMobile?24:20,marginTop:c?1:u.isMobile?20:8,marginLeft:12,marginRight:12,display:"flex",alignItems:"center",justifyContent:"space-between",color:e.text.secondary,transition:"opacity 150ms ease"},text:{fontSize:(0,i(622163).ny)(d,"UISmall"),lineHeight:n().K_.UISmall.desktop,fontWeight:n().Wy.medium,marginRight:6},button:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:u.isMobile?24:20,height:u.isMobile?24:20,borderRadius:4},buttonIcon:{width:u.isMobile?18:12,height:u.isMobile?18:12},prefix:{textAlign:"right",height:u.isMobile?16:18,marginTop:u.isMobile?8:4,marginLeft:12,marginRight:18,color:e.text.secondary,transition:"opacity 150ms ease"}})),[u.isMobile,d,c]);return(0,r.jsxs)(r.Fragment,{children:[c&&(0,r.jsx)("div",{style:m.prefix,children:c}),(0,r.jsxs)("div",{style:m.container,children:[(0,r.jsx)(i(501578).j,{style:m.text,children:t}),(0,r.jsx)(l().Ay,{popupType:u.isMobile?l().z7.SlideUp:l().z7.Popup,buttonPopupStore:g,renderOrigin:e=>{if(!s)return(0,r.jsx)(i(126451).A,{...e,style:m.button,children:(0,i(711361)._)(m.buttonIcon)})},render:()=>(0,r.jsx)(i(935091).A,{...h,children:(0,r.jsx)(i(518397).A,{sections:[{key:"option section",render:e=>(0,r.jsx)(i(88271).A,{...e}),actions:a}],context:{environment:d,blocks:[],publicEditMode:void 0}})})})]})]})}},908589:(e,t,i)=>{i.d(t,{o:()=>l});var n=()=>i(548694),o=()=>i(836331);function l(e){return!!e&&Boolean((0,n().IL)(e)&&"external_pages_sidebar"===o().default.getEligibleGroup({experimentId:"sharing_collaboration_sidebar_guest_aggregation"}))}}}]);