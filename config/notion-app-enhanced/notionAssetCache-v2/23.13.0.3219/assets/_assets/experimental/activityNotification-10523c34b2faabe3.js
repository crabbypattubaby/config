"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[56409],{246777:(e,t,i)=>{i.d(t,{KB:()=>x,Wy:()=>A,aV:()=>S,p4:()=>b,si:()=>j});i(358848),i(91270),i(725707),i(491955),i(403517);var o=()=>i(243571),r=()=>i(528762),n=()=>i(409211),a=()=>i(975392),s=()=>i(23371),d=()=>i(528643),l=()=>i(631474),c=()=>i(818369),u=()=>i(919536),g=()=>i(759625),m=()=>i(84543),v=()=>i(995625),p=()=>i(300481),h=()=>i(413871),f=()=>i(292674),y=()=>i(104838);async function b(e){const{environment:t,store:i,status:o,requests:r}=e,s=t.currentUser.id;l().qQ(t,{status:o,user_count:r.length,from:e.from,request_type:"member"});const d=await Promise.all(r.map((e=>_(t,{id:e.getForActorId(),table:n().oo})))).then((e=>(0,a().oE)(e)));if("approved"===o){const e=d.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),spaceRole:"read_and_write"})));if(!(await u().eP({environment:t,store:i,inviteTargets:e,inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:d,resolvedUsers:[]}}return m().createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,canUndo:!0,perform:a=>{r.map((r=>{const d=new(h().v3)(t,r.pointer);g().zv({store:d,transaction:a,data:{granted_time:Date.now(),granted_by_table:n().oo,granted_by_id:s,resolved_time:Date.now(),resolved_by_table:n().oo,resolved_by_id:s,status:o}}),l().vn(t,{status:o,request_id:r.id,from:e.from,for_actor_id:r.for_actor_id,space_role:i.getRole()})}))}}),{failedUsers:[],resolvedUsers:d}}async function x(e){const{environment:t,store:i,status:o,requests:r}=e,s=t.currentUser.id;l().qQ(t,{status:o,user_count:r.length,from:e.from,request_type:"member"});const c=await Promise.all(r.map((e=>_(t,{id:e.getForActorId(),table:n().oo})))).then((e=>(0,a().oE)(e)));if("approved"===o){const e=c.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),spaceRole:"read_and_write"})));if(!(await u().eP({environment:t,store:i,inviteTargets:e,inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:c,resolvedUsers:[]};const o=i.id,r=await p().A.awaitData(t,{spaceId:o}),n=r?r.map((e=>e.domain.url)):[];d().hp(t,{invite_flow_id:void 0,invite_origin:"membership_request",user_ids:c.map((e=>e.id)),internal_domains:n})}return m().createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,canUndo:!0,perform:e=>{r.map((i=>{const r=new(h().v3)(t,i.pointer);g().zv({store:r,transaction:e,data:{granted_time:Date.now(),granted_by_table:n().oo,granted_by_id:s,resolved_time:Date.now(),resolved_by_table:n().oo,resolved_by_id:s,status:o,type:"space_membership_request"}})}))}}),{failedUsers:[],resolvedUsers:c}}async function S(e){const{environment:t,status:i,requests:o,from:r}=e;l().qQ(t,{status:i,user_count:o.length,from:r,request_type:"guest"});const u=await Promise.all(o.map((async e=>{var o,a,s;const u=await _(t,{id:e.getForActorId(),table:n().oo});if(!u)return{type:"failed",user:void 0};if(!e.isGuestInviteRequest())return{type:"failed",user:u};const g=await c().callApi({eventName:"resolveAccessRequest",environment:t,data:{accessRequestId:e.id,status:i,spaceId:e.getParentId()}}),m=null===(o=e.getAttributes().permission_records_and_roles.at(0))||void 0===o?void 0:o.role,p=null===(a=e.getAttributes().permission_records_and_roles.at(0))||void 0===a?void 0:a.id,h=(null===(s=e.getAttributes().invite_message)||void 0===s?void 0:s.length)??0;return"success"===g.type&&"approved"===i&&d().Jg(t,{role:m,is_space:!1,invite_targets:[{type:"existingUser",value:{id:u.id,version:0,email:u.getEmail()},spaceRole:"none"}],is_onboarding:!1,invite_origin:"guest_invite_request",permission_items:[{type:"user_permission",role:m,user_id:u.id}],invite_message_length:h,domainType:(0,v().FX)()}),"success"===g.type&&l().AE(t,{status:i,request_id:e.id,for_actor_id:e.getForActorId(),created_by_id:e.getCreatedById(),requested_page_id:p,requested_role:m,from:r}),{type:g.type,user:u}})));await(0,s().lX)(o,10,(e=>y().nO({environment:t,spaceStore:{id:e.getParentId()}})));const g=u.filter((e=>"failed"===e.type)).map((e=>e.user)),m=u.filter((e=>"success"===e.type)).map((e=>e.user));return{failedUsers:(0,a().oE)(g),resolvedUsers:(0,a().oE)(m)}}async function A(e){if(f().A.reset(),!e.canAdmin)return;const{environment:t,spaceId:i}=e,o=await c().callApi({eventName:"getUnreadAccessRequestCount",environment:t,data:{parentTable:r().NX,parentId:i,size:1}});"success"===o.type&&f().A.setState({spaceId:i,count:o.data.count})}async function j(e,t,i){const r=function(e){return Object.values((0,a().$z)(e,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${e.getCreatedById()}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}:${e.getCreatedById()}}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e)))).map((e=>{const t=(0,a().Ul)(e,(e=>e.getCreatedTime()));return t[t.length-1]}))}(await Promise.all(i.map((async t=>{const i=o().O,r=new(h().v3)(e,{table:i,id:t});return await r.load(),r.getModel()}))).then((e=>(0,a().oE)(e)))),s=await function(e,t){const i=Object.values((0,a().$z)(t,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${null==t?void 0:t.role}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e))));return Promise.all(i.map((async t=>{const i=(0,a().Ul)(t,(e=>e.getCreatedTime())),o=i[0];return{createdByActorsWithReason:await Promise.all(i.map((async t=>{const i=await _(e,{id:t.created_by_id,table:n().oo});if(i)return{actor:i,reason:t.message}}))).then((e=>(0,a().oE)(e))),accessRequest:o}})))}(e,r);return Promise.all(s.map((async t=>{const i=await _(e,{id:t.accessRequest.getForActorId(),table:n().oo});if(i)return{forActor:i,...t}}))).then((e=>(0,a().oE)(e)))}async function _(e,t){const i=new(h().LU)(e,t);return await i.load(),i.getModel()}},292674:(e,t,i)=>{i.d(t,{A:()=>r});class o extends(()=>i(129044))().default{getInitialState(){return{count:0}}}const r=new o},396218:(e,t,i)=>{i.d(t,{J2:()=>_,NF:()=>M,gA:()=>j,hr:()=>I,jl:()=>k,p6:()=>C,rQ:()=>R});i(725707),i(500234),i(403517),i(242343);var o=()=>i(803290),r=()=>i(174114),n=()=>i(633427),a=()=>i(653998),s=()=>i(640979),d=()=>i(622163),l=()=>i(755769),c=()=>i(209684),u=()=>i(286270),g=()=>i(535906),m=()=>i(273520),v=()=>i(559637),p=()=>i(966789),h=()=>i(935091),f=()=>i(858023),y=()=>i(701270),b=()=>i(951540),x=()=>i(88271),S=()=>i(761800),A=i(163643);const j=20,_=440,M=_+40;function R(e){const{icon:t,title:i,byline:o,bylineWidthOverride:n}=e,a=(0,r().IS)((()=>({container:{margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8},title:{textAlign:"center"},byline:{textAlign:"center"}})),[]);return(0,A.jsxs)("div",{style:a.container,children:[t,(0,A.jsx)(y().D,{styleName:"Heading-17px/Semibold",customStyles:a.title,children:i}),(0,A.jsx)(y().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",customStyles:n?{...a.byline,width:n}:a.byline,children:o})]})}function k(e){const{primaryText:t,primaryAction:i,primaryDisabled:o,secondaryText:n,secondaryAction:a,isLightRed:s,isDarkRed:d,isLoading:l}=e,g=!(s||d),m=(0,r().IS)((e=>({container:{margin:"0 auto",display:"flex",flexDirection:g?"row-reverse":"column",alignItems:"center",justifyContent:g?"flex-start":"flex-end",gap:8,padding:"0 20px",marginLeft:-20,width:"calc(100% + 40px)"},fullWidth:g?{}:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},cancelButton:{...S().W,height:32,color:e.text.secondary}})),[g]);return(0,A.jsxs)("div",{style:m.container,children:[s?(0,A.jsx)(u().E,{size:"lg",onClick:i,color:s?"uiRed":void 0,disabled:o,style:m.fullWidth,children:l?(0,A.jsx)(p().A,{}):t}):(0,A.jsx)(b().A,{size:"lg",onClick:i,disabled:o,style:m.fullWidth,isRed:d,children:l?(0,A.jsx)(p().A,{}):t}),(0,A.jsx)(c().p,{size:"lg",onClick:a,style:{...m.fullWidth,...m.cancelButton},children:n})]})}function I(e){const{selectedId:t,options:i,onChange:o}=e,d=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8},chevron:{width:12,marginLeft:3,marginRight:3,fill:e.lightIconColor},selectedButton:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${e.outlineButtonBorder}`},icon:{alignSelf:"start",marginTop:0,fill:e.icon.secondary,height:18,width:18}})),[]);return(0,A.jsxs)("div",{style:d.container,children:[(0,A.jsx)(y().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(a().sA,{id:"orgConsole.modal.dropdown.title",defaultMessage:"Select role"})}),(0,A.jsx)(m().Ay,{popupType:m().z7.Popup,renderOrigin:e=>{const o=i.find((e=>e.id===t));return o?(0,A.jsx)(g().A,{...e,title:o.title,caption:o.caption,icon:o.icon({fill:d.icon.fill}),desktopIconStyle:d.icon,disabled:!1,right:(0,n().arrowChevronSingleDownIcon)(d.chevron),shouldWrapCaption:!0,buttonStyle:d.selectedButton,focused:!1}):null},originGap:8,placementToOrigin:l().UV.Bottom,alignmentToOrigin:l().MY.Center,sameWidthAsOrigin:!0,render:e=>{const r=[{key:"options",render:e=>(0,A.jsx)(x().A,{...e,topBorder:0!==e.index}),items:i.map((i=>{const r=i.id===t;return{key:i.id,render:e=>(0,A.jsx)(g().A,{...e,title:i.title,caption:i.caption,icon:i.icon({fill:d.icon.fill}),desktopIconStyle:d.icon,isChecked:r,shouldWrapCaption:!0}),action:()=>{o(i.id),e.close()}}}))}];return(0,A.jsx)(h().A,{menuType:s().gu.Popup,children:(0,A.jsx)(f().Ay,{type:f().Oh.Vertical,initialFocus:void 0,sections:r})})}})]})}function C(e){const{items:t,selectedIds:i,disabledIds:n,onSelectHeader:a,onSelect:s,titleText:l,headerText:c,headerAction:u}=e,g=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8,marginBottom:4},selectorContainer:{border:`1px solid ${e.stroke.secondary}`,boxShadow:"0px 2px 4px 0px #0000000a",borderRadius:8},checkbox:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},headerText:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},right:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end",flexDirection:"row"},workspace:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:8},byline:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},bylineWithoutCheckboxes:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:28,width:28},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:2},selectorHeader:{padding:"4px 12px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"grid",gridTemplateColumns:"24px 1fr 1fr"},selectorHeaderWithAction:{padding:"4px 4px 4px 12px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"grid",gridTemplateColumns:"24px 1fr 1fr"},selectorBody:{paddingInline:12,display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"center",width:"100%",maxHeight:204,overflowX:"hidden",overflowY:"auto"},selectorBodyRow:{display:"grid",gridTemplateColumns:"24px minmax(auto, 50%) 1fr",width:"100%",paddingBlock:8,gap:8,borderTop:`1px solid ${e.stroke.secondary}`}})),[]),m=void 0!==i&&void 0!==n&&s&&a,p=void 0!==n?t.length-n.length:0,h=(0,o().K8)((()=>{if(void 0===i)return!1;let e=0;for(const o of t)i.includes(o.id)&&(e+=1);return 0!==e&&(e===p?0!==p:"partial")}),[t,i,p]);return(0,A.jsxs)("div",{style:g.container,children:[(0,A.jsx)(y().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:l}),(0,A.jsxs)("div",{style:g.selectorContainer,children:[(0,A.jsxs)("div",{style:{...u?g.selectorHeaderWithAction:g.selectorHeader,gridTemplateColumns:m?"24px 1fr 1fr":"1fr 1fr"},children:[m?(0,A.jsx)("div",{style:g.checkbox,children:(0,A.jsx)(v().A,{checked:h,size:14,checkSize:10,onClick:a})}):null,(0,A.jsx)(y().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",customStyles:g.headerText,children:c}),(0,A.jsx)("div",{style:g.right,children:u})]}),(0,A.jsx)("div",{style:g.selectorBody,children:t.map(((e,t)=>{let{id:o,icon:r,name:a,caption:l,byline:c}=e;return(0,A.jsxs)("div",{style:{...g.selectorBodyRow,borderTopWidth:0===t?0:1,gridTemplateColumns:m?"24px minmax(auto, 50%) 1fr":"minmax(auto, 50%) 1fr"},children:[m?(0,A.jsx)("div",{style:g.checkbox,children:(0,A.jsx)(v().A,{checked:i.includes(o)||n.includes(o),size:14,checkSize:10,onClick:()=>s(o),disabled:n.includes(o),style:{opacity:n.includes(o)?.3:1}})}):null,(0,A.jsxs)("div",{style:g.workspace,children:[(0,A.jsx)("div",{style:g.iconContainer,children:r}),(0,A.jsxs)("div",{style:g.textContainer,children:[(0,A.jsx)(y().D,{styleName:"UIRegular-14px/Medium",customStyles:{...(0,d().pA)(1),textOverflow:"ellipsis"},children:a}),l?(0,A.jsx)(y().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:{...(0,d().pA)(1),textOverflow:"ellipsis"},children:l}):null]})]}),(0,A.jsx)("div",{style:g.byline,children:c})]},o)}))})]})]})}},457607:(e,t,i)=>{i.r(t),i.d(t,{ActivityNotification:()=>An});var o=i(242343),r=()=>i(237385),n=()=>i(803290),a=()=>i(129221),s=()=>i(502140),d=()=>i(759260),l=()=>i(622286),c=()=>i(129885),u=(i(358848),i(91270),()=>i(174114)),g=()=>i(642841),m=()=>i(712437),v=()=>i(243571),p=()=>i(145017),h=()=>i(528762),f=()=>i(218357),y=()=>i(409211),b=()=>i(653998),x=()=>i(76394),S=()=>i(31448),A=()=>i(246777),j=()=>i(571909),_=()=>i(477784),M=()=>i(764755),R=()=>i(487893),k=()=>i(413871),I=()=>i(846581),C=()=>i(707781),w=()=>i(624030),K=()=>i(209684),B=i(163643);const T=function(e){const{accessRequestStore:t,teamStore:o}=e,a=(0,r().v3)(),s=(0,b().tz)(),{isRequestResolved:d,resolvedStatus:l,resolvedTime:c}=(0,n().K8)((()=>({isRequestResolved:t.isResolvedTeamMembershipRequest(),resolvedStatus:t.getStatus(),resolvedTime:t.getResolvedTime()})),[t]),g=(0,n().K8)((()=>{const e=t.getResolvedById();if(!e)return;const i=k().LU.createChildStore(t,{table:y().oo,id:e});return i?i.getDisplayName(s):void 0}),[t,s]),m=async e=>{await i(465235).Jk({environment:a,teamStore:o,accessRequestStore:t,status:e})},v=(0,u().IS)((e=>({container:{display:"flex",alignItems:"center"},redesignedContainer:{display:"flex",alignItems:"center",fontSize:14,color:e.text.secondary},approveButton:{height:26,paddingLeft:8,paddingRight:8,fontSize:12,marginRight:10,fontWeight:500,boxShadow:e.shadow2XS,color:e.text.primary}})),[]);return(0,B.jsx)("div",{style:v.container,children:d?(0,B.jsx)("div",{style:v.redesignedContainer,children:"approved"===l?(0,B.jsx)(b().sA,{defaultMessage:"Approved by {grantedBy} on {resolvedTime}",id:"approveTeamMembershipActivityButton.requestApprovedWithTime.title",values:{grantedBy:g,resolvedTime:(0,I().W_)(Math.min(c??0,Date.now()),"medium_with_time",(0,C().H)(s))}}):(0,B.jsx)(b().sA,{defaultMessage:"Denied by {grantedBy} on {resolvedTime}",id:"approveTeamMembershipActivityButton.requestDeniedWithTime.title",values:{grantedBy:g,resolvedTime:(0,I().W_)(Math.min(c??0,Date.now()),"medium_with_time",(0,C().H)(s))}})}):(0,B.jsxs)("div",{children:[(0,B.jsx)(w().g,{children:(0,B.jsx)(K().p,{isGray:!0,size:"xs",style:v.approveButton,onClick:()=>m("approved"),children:(0,B.jsx)(b().sA,{defaultMessage:"Approve",id:"approveTeamMembershipActivityButton.approveButton.label"})})}),(0,B.jsx)(w().g,{children:(0,B.jsx)(K().p,{isGray:!0,size:"xs",style:v.approveButton,onClick:()=>m("rejected"),children:(0,B.jsx)(b().sA,{defaultMessage:"Deny",id:"approveTeamMembershipActivityButton.denyButton.label"})})})]})})};var q=()=>i(950635),N=()=>i(518797),P=()=>i(975392),L=()=>i(441288),D=()=>i(336519),E=()=>i(82702);const O=function(e){const{accessRequestStore:t,effectiveAccessRequestType:i,onApprove:o,onReject:a,spaceStore:s}=e,d=(0,r().v3)(),c=(0,n().K8)((()=>t.isDefined()),[t]),g=(0,n().K8)((()=>t.getModel()),[t]),m=(0,n().K8)((()=>s.canAdmin()),[s]),v=(0,n().K8)((()=>s.canEditMembership()),[s]),p=(0,n().K8)((()=>null==g?void 0:g.isResolved()),[g]),h=(0,n().K8)((()=>null==g?void 0:g.isGuestInviteRequest()),[g]),f=(0,l().X)("workspace_member_access_notif_polish"),y=(0,u().IS)((e=>({viewAllButton:{height:26,paddingLeft:8,paddingRight:8,color:e.text.primary,fontSize:14},secondaryButtonForGuestInvites:{height:26,paddingLeft:8,paddingRight:8},actionButton:{height:28,paddingLeft:12,paddingRight:12,boxShadow:e.shadow2XS,fontSize:14,color:e.text.primary},notifContainer:{display:"flex",alignItems:"center",gap:h||!f?10:8},guestApproveButton:{height:28,paddingLeft:8,paddingRight:8,boxShadow:e.shadow2XS,fontSize:12,color:e.text.primary,fontWeight:500}})),[h,f]),x="space_membership_request"===i;return c?p?(0,B.jsx)(U,{accessRequestStore:t,spaceStore:s}):h&&!m||x&&!v?null:(0,B.jsxs)("div",{style:y.notifContainer,children:[(0,B.jsx)(w().g,{children:(0,B.jsx)(K().p,{isGray:!0,size:"xs",onClick:o,style:h||!f?y.guestApproveButton:y.actionButton,children:(0,B.jsx)(b().sA,{defaultMessage:"Approve",id:"approveSpaceMembershipActivityAction.approveButton.label"})})}),(0,B.jsx)(w().g,{children:(0,B.jsx)(K().p,{isGray:!0,size:"xs",onClick:a,style:h||!f?y.secondaryButtonForGuestInvites:y.actionButton,children:(0,B.jsx)(b().sA,{defaultMessage:"Deny",id:"approveSpaceMembershipActivityAction.denyButton.label"})})}),!d.device.isMobile&&(0,B.jsx)(w().g,{children:(0,B.jsx)(K().p,{isGray:!0,size:"xs",onClick:()=>{L().Sp(d,{disable_membership_requests:s.getDisableMembershipRequests()}),D().Ow({currentTab:"members",subtab:E().d.Requests})},style:h||!f?y.secondaryButtonForGuestInvites:y.viewAllButton,children:h||!f?(0,B.jsx)(b().sA,{defaultMessage:"View all requests",id:"approveSpaceMembershipActivityAction.viewAllRequests.label"}):(0,B.jsx)(b().sA,{defaultMessage:"View all",id:"approveSpaceMembershipActivityAction.viewAll.label"})})})]}):null};function z(e,t,i){if(e===y().oo){const o=i.getRecordValue({table:e,id:t});if(o)return(0,q().A7)(o)}if(e===N().GP){const o=i.getRecordValue({table:e,id:t});if(o)return(0,q().qt)(o)}}function F(e){const{pointer:t,accessRequestStore:i}=e,{table:o,id:r}=t,a=(0,n().K8)((()=>P().oE([z(o,r,i)])),[o,r,i]),s=(0,n().K8)((()=>(0,c().bD)(a,(0,R()._m)())),[a]);return(0,B.jsx)(B.Fragment,{children:s})}function U(e){const{accessRequestStore:t,spaceStore:i}=e,o=(0,b().tz)(),r=(0,u().DP)(),a=(0,n().K8)((()=>t.getModel()),[t]),s=(0,n().K8)((()=>t.getStatus()),[t]),d=(0,n().K8)((()=>t.getResolvedTime()),[t]),{isResolved:l,resolveByPointer:c}=(0,n().K8)((()=>({isResolved:(null==a?void 0:a.isResolved())??!1,resolveByPointer:null==a?void 0:a.getResolvedByPointer(i.id)})),[a,i.id]);if(!a)return null;const g=l&&c&&(0,B.jsx)(F,{accessRequestStore:t,pointer:c});return(0,B.jsx)("div",{style:{fontSize:14,color:r.text.secondary},children:"approved"===s?(0,B.jsx)(b().sA,{defaultMessage:"Approved by {grantedBy} on {resolvedTime}",id:"approveSpaceMembershipActivityAction.requestApprovedWithTime.title",values:{grantedBy:g,resolvedTime:(0,I().W_)(Math.min(d??1/0,Date.now()),"medium_with_time",(0,C().H)(o))}}):(0,B.jsx)(b().sA,{defaultMessage:"Denied by {grantedBy} on {resolvedTime}",id:"approveSpaceMembershipActivityAction.requestDenied.title",values:{grantedBy:g,resolvedTime:(0,I().W_)(Math.min(d??1/0,Date.now()),"medium_with_time",(0,C().H)(o))}})})}var W=()=>i(35462),V=()=>i(446588),H=()=>i(850313),$=()=>i(764872),G=()=>i(557067),Y=()=>i(919536),Q=()=>i(759625),X=()=>i(84543),J=()=>i(502852),Z=()=>i(352723),ee=()=>i(551116),te=()=>i(485966),ie=()=>i(765787),oe=()=>i(644515),re=()=>i(951514);const ne=i(129044).default.createClass(void 0,{name:"RoleStore"});const ae=function(e){const{accessRequestStore:t,targetBlockStore:i,notification:o,initialRole:r,rootStore:a,activity:s,tabArgs:d}=e,l=(0,n().uB)(void 0,ne),c=(0,n().K8)((()=>t.getValue()),[t]),u=(0,n().K8)((()=>i.canAdmin()),[i]);return c?(0,v().z)(c)?(0,B.jsx)(ye,{accessRequestStore:t,accessRequestValue:c}):u?(0,B.jsx)(fe,{accessRequestStore:t,notification:o,targetBlockStore:i,initialRole:r,roleStore:l,accessRequestValue:c,rootStore:a,activity:s,tabArgs:d}):null:null};function se(){const e=(0,u().IS)((e=>({banner:{borderRadius:ee().A.borderRadius,padding:"5px 8px",background:e.accentColors.yellow[50],marginBottom:12,fontSize:S().J.UISmall.desktop,lineHeight:S().K_.UISmall.desktop,fontWeight:S().Wy.regular,color:e.accentColors.yellow[500]}})),[]);return(0,B.jsx)("div",{style:e.banner,children:(0,B.jsx)(b().sA,{defaultMessage:"Make sure you trust this external user before sharing any content",id:"grantPageAccessActivityAction.externalWarning"})})}function de(e,t){const i=e.getValue();if(!i)return;const o=t.getPermissionItems();for(const r of o){if(i.for_actor_table===y().oo&&(0,V().B2)(r)&&r.user_id===i.for_actor_id)return r;if(i.for_actor_table===N().GP&&(0,V().P3)(r)&&r.bot_id===i.for_actor_id)return r}}function le(e){return{tab:$().jD(),activityId:null==e?void 0:e.activity_id,notificationId:null==e?void 0:e.id}}function ce(e,t){const i={height:26,paddingLeft:8,paddingRight:8,boxShadow:t.shadow2XS,fontSize:12,marginRight:10};return e?i:{...i,color:t.text.primary,fontWeight:500}}function ue(e){const{notification:t,accessRequestStore:i,activity:o,tabArgs:n}=e,a=(0,r().v3)();return t?t.visited?null:(0,B.jsx)(w().g,{children:(0,B.jsx)(K().p,{isGray:!0,size:"xs",onClick:e=>{(0,oe().jU)({...n,environment:a,activity:o}),function(e,t,i,o){o&&(0,J().SQ)({event:e,context:J().y$.NotificationClick,callback:()=>{X().createAndCommit({userAction:"GrantPageAccessActivityAction.handleArchive",environment:i,canUndo:!0,perform:e=>{G().s4({notification:o,rootStore:t,transaction:e})}});const e=t.id,r=le(o);L().Fs(i,{...r,requestId:e})}})}(e,i,a,t)},style:{height:26,paddingLeft:8,paddingRight:8},children:(0,B.jsx)(b().sA,{defaultMessage:"Deny",id:"grantPageAccessActivityAction.ignoreButton.label.deny"})})}):null}function ge(e,t,i,o){const r=de(e,t),n=r&&r.role;return o.state||n||i}function me(e,t,i,o,r){var n;const a=function(e,t,i,o){const r=e.getValue();if(r)return r.for_actor_table===y().oo?{type:"user_permission",user_id:r.for_actor_id,role:ge(e,t,i,o)}:r.for_actor_table===N().GP?{type:"bot_permission",bot_id:r.for_actor_id,role:ge(e,t,i,o)}:void(r.for_actor_table!==H().yj&&(0,x().HB)(r.for_actor_table))}(t,i,o,r);if(!a)return{};if(de(t,i))return{permissionItem:a};const s=null===(n=te().default.getState().currentSpaceStore)||void 0===n?void 0:n.id;if(!s)return{};if("user_permission"===a.type){const i=ie().W.getData(e,{userId:a.user_id,spaceId:s});if(i&&"none"!==i.membership_type){return{type:"existingUser",value:t.getRecordModel({table:y().oo,id:a.user_id}),permissionItem:a}}return{permissionItem:a}}if("bot_permission"===a.type){const e=t.getRecordModel({table:N().GP,id:a.bot_id}),i=s&&s===(null==e?void 0:e.space_id)&&e.alive;return e&&!i?{type:"bot",value:e,permissionItem:a}:{permissionItem:a}}(0,x().HB)(a)}function ve(e,t,i){if(e===y().oo){const o=i.getRecordModel({table:e,id:t});if(o)return(0,q().A7)(o)}if(e===N().GP){const o=i.getRecordModel({table:e,id:t});if(o)return(0,q().qt)(o)}}async function pe(e,t,i,o,r,n,a,s){if(o.getKeyStore("for_actor_table").getValue()!==y().oo)return;const d=o.getKeyStore("for_actor_id").getValue(),l=(0,Z().zt)({userId:d,store:i}).role,c=me(t,o,i,r,n);if(!("permissionItem"in c))return;s&&(c.permissionItem.role=s);const u=t.currentUser.id;if(u){if("type"in c&&!s){let e;if("existingUser"===c.type){e=(await Y().eP({environment:t,store:i,inviteTargets:[c],inviteRole:c.permissionItem.role,isOnboarding:!1,invite:{inviteOrigin:"page_request_access"}})).success}else if("bot"===c.type){e=(await Y().eP({environment:t,store:i,inviteTargets:[c],inviteRole:void 0,isOnboarding:!1,invite:{inviteOrigin:"page_request_access"}})).success}else(0,x().HB)(c);if(!e)return}(0,J().SQ)({event:e,context:J().y$.NotificationClick,callback:()=>{X().createAndCommit({userAction:"GrantPageAccessActivityAction.handleGrantPageAccess",environment:t,canUndo:!0,perform:e=>{"type"in c||Y().zP({environment:t,transaction:e,store:i,permissionItems:[c.permissionItem]}),a&&G().ZB({notification:a,rootStore:i,transaction:e,read:!0}),Q().zv({store:o,transaction:e,data:{granted_time:Date.now(),granted_by_table:y().oo,granted_by_id:u,resolved_time:Date.now(),resolved_by_table:y().oo,resolved_by_id:u,status:"approved"}})}});const e=o.isDefined(),r=o.id,n=o.getKeyStore("created_time").getValue(),s=o.getKeyStore("resolved_time").getValue(),d=e&&n&&s?s-n:void 0;L().qI(t,{requestId:r,timeElapsedSinceRequest:d,newAccessLevel:c.permissionItem.role,prevAccessLevel:l,...le(a)})}})}}function he(e){const{table:t,id:i,accessRequestStore:o}=e,r=(0,n().K8)((()=>{const e=P().oE([ve(t,i,o)]);return(0,c().bD)(e,{...(0,R()._m)()})}),[t,i,o]);return(0,B.jsx)(B.Fragment,{children:r})}function fe(e){const{accessRequestValue:t,accessRequestStore:i,notification:a,targetBlockStore:s,initialRole:d,roleStore:l,rootStore:c,activity:g,tabArgs:m}=e,f=(0,u().DP)(),x=(0,r().v3)(),S=(0,o.useCallback)((e=>function(e,t,i,o,r){const n=i.id,a=o.state;o.setState(e),L().Sd(t,{requestId:n,previousAccessLevel:a,newAccessLevel:e,...le(r)})}(e,x,i,l,a)),[x,i,l,a]),A=t.parent_table===h().NX,_=(0,n().K8)((()=>de(i,s)),[i,s]),M=(0,n().K8)((()=>ge(i,s,d,l)),[i,s,d,l]),R=(0,v().HH)(t),k=(0,n().K8)((()=>(0,j().t)(t,c)),[t,c]),I=(0,n().K8)((()=>s.getType()),[s]);if(_&&!A){const e=(0,B.jsx)(he,{accessRequestStore:i,table:t.for_actor_table,id:t.for_actor_id}),o=_.role===M;if(!R||R&&(0,V().p2)(_.role))return(0,B.jsxs)(B.Fragment,{children:[R?(0,B.jsx)(W().A,{isSecondaryColor:!0,isMultiline:!0,style:{marginBottom:6},children:(0,B.jsx)(b().sA,{defaultMessage:"{requestingUser} already has edit access.",id:"grantPageAccessActivityAction.alreadyHasEditAccess.label",values:{requestingUser:e}})}):(0,B.jsx)(W().A,{isSecondaryColor:!0,isMultiline:!0,style:{marginBottom:6},children:(0,B.jsx)(b().sA,{defaultMessage:"{requestingUser} already has access.",id:"grantPageAccessActivityAction.alreadyHasAccess.label",values:{requestingUser:e}})}),(0,B.jsx)(w().g,{children:(0,B.jsx)(re().Ay,{upgradeButtonName:"user_permission_item",role:M,table:p().ev,blockType:I,type:t.for_actor_table===y().oo?"user_permission":"bot_permission",onChange:S,isInvite:!0,buttonStyle:ce(!0,f)})}),(0,B.jsx)(w().g,{children:(0,B.jsx)(K().p,{isGray:!0,size:"xs",onClick:e=>pe(e,x,s,i,d,l,a),style:ce(o,f),children:(0,B.jsx)(b().sA,{defaultMessage:"Change",id:"grantPageAccessActivityAction.changePermissionButton.label"})})}),(0,B.jsx)(ue,{notification:a,accessRequestStore:i,activity:g,tabArgs:m})]})}return(0,B.jsxs)(B.Fragment,{children:[k&&(0,B.jsx)(se,{}),(0,B.jsx)(w().g,{children:!R&&(0,B.jsx)(re().Ay,{upgradeButtonName:"user_permission_item",role:M,table:p().ev,blockType:I,type:t.for_actor_table===y().oo?"user_permission":"bot_permission",onChange:S,isInvite:!0,buttonStyle:ce(!1,f)})}),(0,B.jsx)(w().g,{children:R?(0,B.jsx)(K().p,{isGray:!0,size:"xs",onClick:e=>{a&&(0,oe().hx)({...m,environment:x,activity:g}),pe(e,x,s,i,d,l,a,"read_and_write")},style:ce(!1,f),children:(0,B.jsx)(b().sA,{defaultMessage:"Approve",id:"grantPageAccessActivityAction.grantEditAccessButton.label.approve"})}):(0,B.jsx)(K().p,{isGray:!0,size:"xs",onClick:e=>{a&&(0,oe().hx)({...m,environment:x,activity:g}),pe(e,x,s,i,d,l,a)},style:ce(!1,f),children:(0,B.jsx)(b().sA,{defaultMessage:"Approve",id:"grantPageAccessActivityAction.grantAccessButton.label.approve"})})}),(0,B.jsx)(ue,{notification:a,accessRequestStore:i,activity:g,tabArgs:m})]})}function ye(e){const{accessRequestValue:t,accessRequestStore:i}=e,o=(0,b().tz)(),r=(0,u().DP)(),n=(0,B.jsx)(he,{accessRequestStore:i,table:t.granted_by_table,id:t.granted_by_id}),a=(0,I().W_)(Math.min(t.granted_time,Date.now()),"medium_with_time",(0,C().H)(o));return(0,B.jsx)("div",{style:{fontSize:12,color:r.text.secondary},children:(0,B.jsx)(b().sA,{defaultMessage:"Approved by {grantedBy} on {time}",id:"grantPageAccessActivityAction.accessGrantedWithTime.title",values:{grantedBy:n,time:a}})})}var be=()=>i(592896),xe=()=>i(751634),Se=()=>i(29302),Ae=()=>i(214263),je=()=>i(880324),_e=()=>i(861917),Me=()=>i(983050),Re=()=>i(289113),ke=()=>i(773498),Ie=()=>i(925564),Ce=()=>i(417653),we=()=>i(273520),Ke=()=>i(356813),Be=()=>i(103151),Te=()=>i(709356),qe=()=>i(302376),Ne=()=>i(906230),Pe=()=>i(907721),Le=()=>i(28210),De=()=>i(709237),Ee=()=>i(206363);function Oe(e){const{blockStore:t,shouldWrap:i=!1}=e,[r,a]=(0,o.useState)(!1),[s,d]=(0,o.useState)(!1),l=P().nF((()=>{d(!0)}),200,{leading:!0});(0,o.useEffect)((()=>(qe().P4(window,"scroll",l,!0),()=>qe().Ol(window,"scroll",l,!0))),[l]);const c=(0,n().K8)((()=>{var e;return null==t||null===(e=t.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:t.getRecordModel})}),[t]),g=(0,o.useCallback)((()=>{a(!0),d(!1)}),[]),m=(0,o.useCallback)((()=>{a(!1),d(!1),qe().Ol(window,"scroll",l,!0)}),[l]),v=(0,o.useCallback)((e=>(0,B.jsx)(Ee().yf,{store:t,events:e})),[t]),p=(0,n().K8)((()=>!!t&&t.isEmptyPage()),[t]),h=(0,n().K8)((()=>null==t?void 0:t.isDefined()),[t]),f=(0,u().IS)((e=>({pageTitleMockedButton:{maxWidth:"fit-content",display:"inline",borderRadius:3,paddingBottom:2,paddingLeft:3,paddingRight:5,marginTop:-2,marginBottom:-2,marginLeft:-2.5,marginRight:-5,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",background:r&&h?e.state.hover:void 0},recordTitle:{fontSize:14,fontWeight:S().Wy.medium,paddingBottom:2,whiteSpace:i?"break-spaces":"nowrap"},recordIcon:{whiteSpace:"nowrap",display:"inline-block",verticalAlign:"middle",marginRight:3}})),[r,h,i]);if(!t)return null;const y=!0!==s&&void 0;return(0,B.jsx)(w().g,{disabled:!h,children:(0,B.jsx)(Be().A,{originGap:3,disableTooltip:!h,alignment:Pe().C.Start,placement:Pe().W.Bottom,renderTooltip:v,closeDelay:0,noStyle:!0,textWrap:!0,forceVisibleState:y,render:e=>(0,B.jsxs)("div",{style:f.pageTitleMockedButton,...(0,Ne().A)(e,{onMouseEnter:g,onMouseLeave:m}),children:[(0,B.jsx)(Le().B,{disabled:!0,icon:c,isEmptyPage:p,size:16,style:f.recordIcon}),(0,B.jsx)(De().A,{store:t,style:f.recordTitle,underline:!0,shouldWrap:!0})]})})})}const ze=0,Fe=8,Ue=24,We=24+Ue+Fe,Ve="150ms ease";function He(e){const{notification:t,children:a,rootStore:s,icon:d,isPrivate:l,onArchiveClicked:c,onUnarchiveClicked:g,onMarkAsReadClicked:m,onMarkAsUnreadClicked:v,onNotificationBodyClicked:h,navigableBlockId:f,url:y,showSnapshotButton:b,hidePageTitle:x,header:S,isFirst:A,isLast:j}=e,_=(0,r().v3)(),M=(0,r().Y0)(),R=parseInt(t.end_time),I=(0,n().K8)((()=>{const e=t.navigable_block_id;if(e)return k().sk.createChildStore(s,{table:p().ev,id:e,spaceId:s.id})}),[s,t.navigable_block_id]),C=(0,n().K8)((()=>i(271748).default.isPeekDismissableState()),[]),[K,T]=(0,o.useState)(!1),[q,N]=(0,o.useState)(!1),P=(0,o.useRef)(null),L=(0,i(25058).A)({onLongPress:()=>{var e;return null===(e=P.current)||void 0===e?void 0:e.setOpen(!0)}}),[D,E]=(0,o.useState)(!1),O=K&&!q&&!D,z=(0,n().K8)((()=>"mentions"===i(264109).Ay.state.currentTab),[]),F=!t||t.read,U=M.isMobile,W=(0,n().K8)((()=>{const e=_.WindowSizeStore.state;return{left:e.paddingLeftCSS,right:e.paddingRightCSS}}),[_.WindowSizeStore]),V=(0,u().IS)((e=>({article:{display:"flex",flexDirection:"column"},mainClickTargetButton:{display:"flex",flexDirection:"column",gap:8,paddingTop:14-ze,paddingBottom:14-ze,paddingLeft:U?W.left:0,paddingRight:U?W.right:0,marginTop:A?0:ze,marginBottom:j?0:ze,marginLeft:ze,marginRight:ze,transition:`background ${Ve}`},mainClickTargetButtonHovered:{background:e.state.hover},headerAndAvatar:{display:"flex",paddingLeft:8-ze,paddingRight:20-ze,gap:Fe,maxWidth:"100%"},avatarAndStatusDot:{display:"flex",gap:8,alignItems:"center",height:Ue},statusDotSpacer:{width:8,flexShrink:0},privatePageBadge:{marginTop:1,marginBottom:4,marginLeft:8},children:{paddingLeft:We-ze,paddingRight:20-ze},divider:{height:1,backgroundColor:e.stroke.secondary},buttonPressed:{backgroundColor:K&&q?e.buttonBackground:e.state.pressed}})),[U,W.left,W.right,A,j,K,q]),H=(0,o.useCallback)((e=>{t&&(D||(!y&&t.read||h(),(0,J().SQ)({event:e,context:J().y$.NotificationClick,callback:()=>{!C||e.metaKey||e.ctrlKey||i(610489).VI({environment:_}),t.read||X().createAndCommit({userAction:"ActivityNotificationSection.handleMarkAsRead",environment:_,canUndo:!0,perform:e=>{G().ZB({notification:t,rootStore:s,transaction:e,read:!0})}})}})))}),[_,D,t,h,C,s,y]),$=(0,o.useCallback)((e=>{t&&(0,J().SQ)({event:e,context:J().y$.NotificationClick,callback:()=>{t.read?v():m(),X().createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:_,canUndo:!0,perform:e=>{G().ZB({notification:t,rootStore:s,transaction:e,read:!t.read})}})}})}),[_,t,m,v,s]),Y=(0,o.useCallback)((e=>{t&&(0,J().SQ)({event:e,context:J().y$.NotificationClick,callback:()=>{c(),X().createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:_,canUndo:!0,perform:e=>{G().s4({notification:t,rootStore:s,transaction:e})}})}})}),[_,t,c,s]),Q=(0,o.useCallback)((e=>{t&&(0,J().SQ)({event:e,context:J().y$.NotificationClick,callback:()=>{g(),X().createAndCommit({userAction:"Activity.handleUnarchive",environment:_,canUndo:!0,perform:e=>{G().JV({notificationId:t.id,visited:!1,rootStore:s,transaction:e})}})}})}),[_,t,g,s]),Z=(0,o.useCallback)((()=>T(!0)),[]),ee=(0,o.useCallback)((()=>T(!1)),[]),te=(0,o.useId)(),ie=(0,i(190094).T4)();return(0,B.jsx)(we().Ay,{ref:P,disabled:!M.isMobile,style:ie.popup,popupType:M.isTablet?we().z7.Popup:we().z7.SlideUp,render:e=>(0,B.jsx)(Ie().Lk,{blockStore:I,notification:t,handlers:{handleUnarchive:Q,handleArchive:Y,toggleNotificationReadStatus:$},closePopup:()=>e.close()}),renderOrigin:()=>(0,B.jsx)("div",{...M.isMobile&&L,children:(0,B.jsx)("article",{style:V.article,onMouseOver:Z,onMouseLeave:ee,children:(0,B.jsxs)(w().y.Provider,{value:N,children:[(0,B.jsx)(Qe,{notification:t,rootStore:s,isMobile:U,isHovered:K,isFirst:A,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),onArchiveClicked:c,onUnarchiveClicked:g,onMarkAsReadClicked:m,onMarkAsUnreadClicked:v}),(0,B.jsxs)(Ce().A,{href:y,hovered:O,ignoreLocalHoverState:!0,style:V.mainClickTargetButton,onClick:H,hoveredStyle:V.mainClickTargetButtonHovered,disabled:!Boolean(y),pressedStyle:V.buttonPressed,"aria-labelledby":te,children:[(0,B.jsxs)("div",{style:V.headerAndAvatar,children:[(0,B.jsxs)("div",{className:Me().a9W,style:V.avatarAndStatusDot,children:[z&&!F?(0,B.jsx)(i(874413).m,{size:8}):(0,B.jsx)("div",{style:V.statusDotSpacer}),d]}),(0,B.jsx)(et,{blockStore:I,timestamp:R,header:S,hidePageTitle:Boolean(x),titleAriaId:te}),b&&f&&(0,B.jsx)(tt,{timestamp:R,navigableBlockId:f,rootStore:s}),l&&!t&&(0,B.jsx)(i(233387).A,{style:V.privatePageBadge})]}),a&&(0,B.jsx)("div",{style:V.children,className:Me().CyB,children:a})]}),!j&&(0,B.jsx)("div",{style:V.divider})]})})})},t.id)}const $e=12-ze,Ge=12-ze,Ye="100ms ease-out";function Qe(e){const{notification:t,rootStore:i,isMobile:o,isHovered:r,isFirst:n,onArchiveClicked:a,onUnarchiveClicked:s,onMarkAsReadClicked:d,onMarkAsUnreadClicked:l,onMouseEnter:c,onMouseLeave:g}=e,m=(0,u().IS)((()=>({container:{display:"flex",alignItems:"flex-start",position:"relative",zIndex:1},body:{transition:`opacity ${Ye}`,opacity:o||r?1:0,position:"absolute",right:$e,top:Ge+(o?-3:0)+(n?0:ze)}})),[o,r,n]);return t?(0,B.jsx)("div",{style:m.container,onMouseEnter:c,onMouseLeave:g,children:(0,B.jsx)("div",{style:m.body,children:(0,B.jsx)(ke().hR,{notification:t,rootStore:i,onArchiveClicked:a,onUnarchiveClicked:s,onMarkAsReadClicked:d,onMarkAsUnreadClicked:l})})}):null}const Xe=14,Je=12,Ze=3;function et(e){const{blockStore:t,timestamp:i,hidePageTitle:o,header:n,titleAriaId:a}=e,s=(0,r().Y0)().isMobile,d=!o,l=(0,Re().nl)(i,{useUltraCompactFormat:!0}),c=(0,Re().x$)(i),g=(0,u().IS)((e=>({container:{display:"flex",flexDirection:"row",minWidth:0,width:"100%",marginTop:2},headerMobile:{fontSize:Xe,minWidth:0},header:{display:"inline-grid",gridAutoFlow:"column",justifyContent:"space-between",fontSize:Xe,minWidth:0},headlineMobile:{paddingTop:2,display:"inline",whiteSpace:"pre-wrap",wordBreak:"break-word"},headline:{flexShrink:2,whiteSpace:"pre-wrap",wordBreak:"break-word"},time:{display:"flex",fontSize:Je,color:e.text.tertiary,whiteSpace:"nowrap",...s&&{display:"inline"},paddingLeft:6,marginTop:Xe-Je},headerAndPageTitle:{display:"flex",flex:1,flexDirection:"column",gap:Ze,minWidth:0}})),[s]);return(0,B.jsxs)("div",{style:g.container,children:[(0,B.jsxs)("div",{style:g.headerAndPageTitle,children:[(0,B.jsxs)("div",{style:s?g.headerMobile:g.header,children:[(0,B.jsx)("div",{style:s?g.headlineMobile:g.headline,className:Me().k2l,id:a,children:n}),(0,B.jsx)("div",{style:g.time,className:Me().Cxn,children:(0,B.jsx)(Te().A,{text:l,tooltipText:c,icon:Ae().k})})]}),d&&(0,B.jsx)(Oe,{blockStore:t})]}),s&&(0,B.jsx)("div",{style:{width:Ie().UM-$e,flexShrink:0}})]})}function tt(e){const{timestamp:t,navigableBlockId:i,rootStore:o}=e,n=(0,r().v3)();if(t<new Date("2018-10-26").getTime())return null;const a=_().A.getIntl().formatMessage({defaultMessage:"View version for this update",id:"activitySection.viewVersionForUpdate.tooltip"}),s=()=>{const e=k().Bv.createChildStore(o,{table:p().ev,id:i});_e().WE({environment:n,blockStore:e,openSnapshotNearTimestamp:t.toString(),from:"activity"})};return(0,B.jsx)(Be().A,{renderTooltip:()=>a,render:e=>(0,B.jsx)(Ke().A,{ariaLabel:a,onClick:s,icon:je().L,...e})})}function it(e){const{children:t}=e,i=(0,u().IS)((e=>({container:{borderRadius:"100%",display:"flex",flexShrink:0,justifyContent:"center",alignItems:"center",height:Ue,width:Ue,backgroundColor:e.surface.elevated,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary}})),[]);return(0,B.jsx)("div",{style:i.container,children:t})}const ot=o.memo(He);function rt(e){var t;const i=(null===(t=e.profileEmail)||void 0===t?void 0:t.charAt(0).toUpperCase())??"?",o=(0,u().IS)((e=>({circleStyle:{width:20,height:20,borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",borderColor:e.UIUserAvatarIdleOutline,borderWidth:1,borderStyle:"solid",marginRight:6},letterStyle:{color:e.text.secondary,fontWeight:S().Wy.medium,fontSize:12}})),[]);return(0,B.jsx)("div",{style:o.circleStyle,children:(0,B.jsx)("span",{style:o.letterStyle,children:i})})}function nt(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{notification:d,tab:g,source:h}=o,f=(0,r().v3)(),y=(0,n().K8)((()=>t.getEdits()),[t]),b=y[0],x=(0,u().IS)((()=>({message:{marginBottom:8},messageLabel:{whiteSpace:"pre-wrap"},titleStyle:{fontSize:14,display:"flex"}})),[]),S=(0,n().K8)((()=>k().v3.createChildStore(i,{table:v().O,id:t.access_request_id})),[t,i]),A=(0,n().K8)((()=>S.getModel()),[S]),_=(0,n().K8)((()=>Boolean(A&&(0,j().t)(A,i))),[A,i]),R=A&&(0,B.jsx)(st,{activity:t,accessRequest:A,rootStore:i,tabArgs:o}),I=b.message,C=(0,n().K8)((()=>(0,c().Ln)({edits:y,rootStore:i})),[y,i]),w=(0,n().K8)((()=>{if(null!=A&&A.isGuestInviteRequest()){const e=A.getAttributes().permission_records_and_roles[0],r=e&&k().Bv.createChildStore(i,{table:p().ev,id:e.id}),n=e.role;if(r.isDefined())return;return(0,B.jsx)(Se().A,{titledRecordStore:r,activity:t,tabArgs:o,getRecordModel:i.getRecordModel,permissionRole:n,shouldRenderEmpty:!0})}}),[o,A,t,i]),K=(0,n().K8)((()=>{if(t.navigable_block_id)return k().Bv.createChildStore(i,{table:p().ev,id:t.navigable_block_id})}),[t,i]),T=(0,n().K8)((()=>{if(!K)return;const e=K.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:m().y8.Notification}):void 0}),[K,i,t]),q=(0,M().I)({spaceStore:i,request:A}),N=(0,l().X)("workspace_member_access_notif_polish");return R?(0,B.jsxs)(ot,{header:(0,B.jsx)("span",{children:R}),isFirst:a,isLast:s,isPrivate:!1,rootStore:i,notification:d,icon:(0,B.jsx)(be().H8,{authors:C,size:Ue,style:{marginTop:0,marginRight:0},iconStyle:{right:-3},showAvatarShadow:!1,showWarningIcon:_}),showSnapshotButton:!1,url:T,...(0,oe().$5)({notification:d,activity:t,environment:f,tab:g}),children:[N&&"space_membership_request"===q&&(0,B.jsx)(at,{rootStore:i,accessRequestModel:A}),I&&(0,B.jsx)("div",{style:x.message,children:(0,B.jsx)(W().A,{isMultiline:!0,style:x.messageLabel,children:I})}),w&&(0,B.jsx)("div",{style:x.titleStyle,children:w}),(0,B.jsx)(gt,{activity:t,accessRequestStore:S,rootStore:i,source:h,notification:d,tabArgs:o})]}):null}function at(e){const{rootStore:t,accessRequestModel:i}=e,o=(0,n().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),r=(0,n().K8)((()=>i.getForActorPointer(t.id)),[i,t.id]),a=r.table===y().oo?k().LU.createChildStore(t,r):void 0,s=(0,n().K8)((()=>null==a?void 0:a.getModel()),[a]),d=(0,n().K8)((()=>null==s?void 0:s.getEmail()),[s]),l=(0,n().K8)((()=>{if(!o)return d;const e=null==s?void 0:s.getFullName(_().A.getIntl());return e?`${e} (${d})`:d}),[o,s,d]),c=(0,u().IS)((()=>({inviteeBox:{display:"flex",alignItems:"center",marginBottom:8},inviteePhrase:{fontWeight:S().Wy.medium,fontSize:14}})),[]);return(0,B.jsxs)("div",{style:c.inviteeBox,children:[(0,B.jsx)(rt,{profileEmail:l}),(0,B.jsx)("span",{style:c.inviteePhrase,children:l})]})}function st(e){const{activity:t,accessRequest:i,rootStore:o,tabArgs:r}=e,n=(0,M().I)({spaceStore:o,request:i});if(!n)return null;switch(n){case"guest_invite_request":return(0,B.jsx)(ct,{activity:t,accessRequest:i,rootStore:o});case"space_membership_request":return(0,B.jsx)(lt,{activity:t,accessRequest:i,rootStore:o});case"team_membership_request":return(0,B.jsx)(ut,{activity:t,rootStore:o,tabArgs:r});case"page_access_request":return(0,B.jsx)(dt,{activity:t,tabArgs:r,rootStore:o,accessRequest:i});default:(0,x().HB)(n)}}function dt(e){const{activity:t,rootStore:i,accessRequest:o}=e,r=(0,n().K8)((()=>t.getEdits()),[t]),a=(0,n().K8)((()=>{const e=o.getForActorPointer(i.id),t=e.table===y().oo?k().LU.createChildStore(i,e):void 0,r=null==t?void 0:t.getModel();return null==r?void 0:r.getEmail()}),[o,i]),s=(0,n().K8)((()=>Boolean(o&&(0,j().t)(o,i))),[o,i]),d=(0,n().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),l=(0,n().K8)((()=>s&&a?(0,c().Jd)(a,(0,R()._m)()):(0,c().bD)(d,(0,R()._m)())),[s,a,d]),u=(0,n().K8)((()=>{if(t.navigable_block_id)return k().Bv.createChildStore(i,{table:p().ev,id:t.navigable_block_id})}),[t,i]),g=(0,n().K8)((()=>o.isEditPageAccessRequest()),[o]);return u?g?(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested edit access to} other {{authorOrAuthors} requested edit access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.editAccessRequested.header.short"}):(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested access to} other {{authorOrAuthors} requested access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.accessRequested.header.short"}):null}function lt(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,u().IS)((()=>({inviteePhrase:{fontWeight:S().Wy.semibold}})),[]),a=(0,n().K8)((()=>t.getEdits()),[t]),s=(0,n().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=s.table===y().oo?k().LU.createChildStore(o,s):void 0,g=(0,n().K8)((()=>null==d?void 0:d.getModel()),[d]),m=(0,n().K8)((()=>null==g?void 0:g.getEmail()),[g]),v=(0,n().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),p=(0,n().K8)((()=>(0,c().Ln)({edits:a,rootStore:o})),[a,o]),h=(0,n().K8)((()=>(0,c().bD)(p,(0,R()._m)())),[p]),f=(0,n().K8)((()=>{if(!v)return m;const e=null==g?void 0:g.getFullName(_().A.getIntl());return e?`${e} (${m})`:m}),[v,g,m]),x=(0,l().X)("workspace_member_access_notif_polish");return g&&s.table===y().oo?v?(0,B.jsx)(b().sA,{defaultMessage:"{invitee} requested to become a workspace member",values:{invitee:(0,B.jsx)("span",{style:r.inviteePhrase,children:f})},id:"activity.accessRequestedMembershipFromGuest.header"}):x?(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add a workspace member} other {{authorOrAuthors} requested to add workspace members}}",values:{numberOfAuthors:p.length,authorOrAuthors:h},id:"activity.accessRequestedMembershipNoInvitee.header.short"}):(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add {invitee} as a workspace member} other {{authorOrAuthors} requested to add {invitee} as a workspace member}}",values:{numberOfAuthors:p.length,authorOrAuthors:h,invitee:(0,B.jsx)("span",{style:r.inviteePhrase,children:f})},id:"activity.accessRequestedMembership.header.short"}):null}function ct(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,n().K8)((()=>t.getEdits()),[t]),a=(0,u().IS)((()=>({inviteePhrase:{fontWeight:S().Wy.semibold}})),[]),s=(0,n().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=s.table===y().oo?k().LU.createChildStore(o,s):void 0,l=(0,n().K8)((()=>null==d?void 0:d.getModel()),[d]),g=(0,n().K8)((()=>null==l?void 0:l.getEmail()),[l]),m=(0,n().K8)((()=>(0,c().Ln)({edits:r,rootStore:o})),[r,o]),v=(0,n().K8)((()=>(0,c().bD)(m,{...(0,R()._m)()})),[m]);return(0,n().K8)((()=>i.isGuestInviteRequest()),[i])&&l&&s.table===y().oo?(0,B.jsx)(b().sA,{defaultMessage:"{requestorsPhrase} requested inviting {guestEmail} as a guest",values:{requestorsPhrase:v,guestEmail:(0,B.jsx)("span",{style:a.inviteePhrase,children:g})},id:"activity.guestInviteRequest.header.short"}):null}function ut(e){const{activity:t,rootStore:i,tabArgs:o}=e,r=(0,n().K8)((()=>t.getEdits()),[t]),a=(0,n().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),s=(0,n().K8)((()=>(0,c().bD)(a,{...(0,R()._m)()})),[a]),d=(0,n().K8)((()=>{if(t.team_id)return k().h4.createChildStore(i,{table:f().yK,id:t.team_id})}),[t,i]);return r&&d?(0,B.jsx)(b().sA,{defaultMessage:"{user} requested to join {teamName}",values:{user:(0,B.jsx)("span",{style:{fontWeight:S().Wy.semibold},children:s}),teamName:(0,B.jsx)(Se().A,{titledRecordStore:d,getRecordModel:i.getRecordModel,activity:t,tabArgs:o})},id:"activity.teamAccessRequest.header.short"}):null}function gt(e){const{activity:t,accessRequestStore:i,rootStore:a,notification:s,tabArgs:d}=e,l=(0,r().v3)(),c=(0,n().K8)((()=>t.getEdits()),[t])[0],m=(0,n().K8)((()=>i.getParentTable()),[i]),v=(0,n().K8)((()=>i.getParentId()),[i]),y=(0,n().K8)((()=>t.navigable_block_id),[t]),b=(0,n().K8)((()=>i.getModel()),[i]),S=(0,n().K8)((()=>b&&(0,g().C)(b)),[b]),j=(0,M().I)({spaceStore:a,request:b}),_=(0,n().K8)((()=>{if("page_access_request"===S){var e;const t=null==b||null===(e=b.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[b,S]),R=(0,o.useCallback)((async()=>{if(S&&j&&b)if("space_membership_request"===j&&"space_membership_request"===S)await A().p4({status:"approved",environment:l,requests:[b],store:a,from:"notification"});else if("space_membership_request"===j&&"guest_invite_request"===S)await A().KB({status:"approved",environment:l,store:a,requests:[b],from:"notification"});else{if("guest_invite_request"!==S)return;await A().aV({status:"approved",environment:l,requests:[b],from:"notification"})}}),[l,b,a,j,S]),I=(0,o.useCallback)((async()=>{if(S&&b)if("space_membership_request"===S)await A().p4({status:"rejected",environment:l,requests:[b],store:a,from:"notification"});else if("guest_invite_request"===S)await A().aV({status:"rejected",environment:l,requests:[b],from:"notification"});else{if("team_membership_request"===S||"page_access_request"===S)return;(0,x().HB)(S)}}),[l,b,a,S]),C=(0,u().IS)((e=>({actionPrimaryContainer:{paddingTop:4,paddingBottom:0,paddingRight:0},actionButton:(0,xe().Ei)(e)})),[]),w=y?k().Bv.createChildStore(a,{table:p().ev,id:y}):void 0,K=(0,n().K8)((()=>m===p().ev&&Boolean(null==w?void 0:w.canAdmin())),[m,w]);if(!(m&&v&&j&&c))return null;if("page_access_request"===j)return K&&w?(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(ae,{accessRequestStore:i,targetBlockStore:w,initialRole:_,buttonStyle:C.actionButton,notification:s,rootStore:a,activity:t,tabArgs:d})}):null;if("space_membership_request"===j||"guest_invite_request"===j){const e=k().SL.createChildStore(a,{table:h().NX,id:v});return(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(O,{effectiveAccessRequestType:j,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:C.actionButton,notification:s,onApprove:R,onReject:I})})}if("team_membership_request"===j){const e=k().h4.createChildStore(a,{table:f().yK,id:v});return(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(T,{accessRequestStore:i,teamStore:e})})}(0,x().HB)(j)}const mt=o.memo(nt);function vt(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),g=(0,n().K8)((()=>t.getEdits()),[t]),h=(0,n().K8)((()=>k().v3.createChildStore(i,{table:v().O,id:t.access_request_id})),[t,i]),f=(0,n().K8)((()=>{const e=h.getModel();return e&&e.isGuestInviteRequest()&&e.isResolved()||e&&e.isEditPageAccessRequest()&&e.isApproved()?e:void 0}),[h]),y=(0,n().K8)((()=>Boolean(null==f?void 0:f.isEditPageAccessRequest())),[f]),b=(0,n().K8)((()=>(0,c().Ln)({edits:g,rootStore:i})),[g,i]),x=(0,n().K8)((()=>{if(t.navigable_block_id)return k().Bv.createChildStore(i,{table:p().ev,id:t.navigable_block_id})}),[t,i]),S=f&&(0,B.jsx)(pt,{activity:t,accessRequest:f,rootStore:i,isEditAccessRequest:y}),A=(0,n().K8)((()=>{if(!x)return;const e=x.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:m().y8.Notification}):void 0}),[x,i,t]);return S&&x?(0,B.jsx)(ot,{header:(0,B.jsx)("span",{children:S}),isFirst:a,isLast:s,isPrivate:!1,rootStore:i,notification:d,icon:(0,B.jsx)(be().H8,{authors:b,size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:A,...(0,oe().$5)({notification:d,activity:t,environment:u,tab:l})}):null}function pt(e){const{accessRequest:t,rootStore:i,isEditAccessRequest:o}=e,r=(0,u().IS)((()=>({inviteePhrase:{fontWeight:S().Wy.medium}})),[]),a=(0,n().K8)((()=>i.getRecordModel({id:t.getForActorId(),table:t.getForActorTable()})),[t,i]),s=(0,n().K8)((()=>null==a?void 0:a.getEmail()),[a]),d=(0,n().K8)((()=>{const e=(null==a?void 0:a.isUser())&&(null==a?void 0:a.getFullName(_().A.getIntl()));return e?`${e} (${s})`:s}),[a,s]),l=(0,n().K8)((()=>i.getRecordModel({id:t.getResolvedById(),table:t.getResolvedByTable()})),[t,i]),g=(0,n().K8)((()=>l&&(0,c().bD)([l],{fontWeight:S().Wy.medium})),[l]),m=(0,n().K8)((()=>t.getStatus()),[t]);return g&&d?o?(0,B.jsx)(b().sA,{defaultMessage:"{resolverPhrase} approved your request to edit the page",values:{resolverPhrase:g},id:"activity.EditAccessRequestResolvedMembership.approved.header.short"}):"approved"===m?(0,B.jsx)(b().sA,{defaultMessage:"{resolverPhrase} approved your request to invite {invitee} as a guest",values:{resolverPhrase:g,invitee:(0,B.jsx)("span",{style:r.inviteePhrase,children:d})},id:"activity.AccessRequestResolvedMembership.approved.header.short"}):"rejected"===m?(0,B.jsx)(b().sA,{defaultMessage:"{resolverPhrase} denied your request to invite {invitee} as a guest",values:{resolverPhrase:g,invitee:(0,B.jsx)("span",{style:r.inviteePhrase,children:d})},id:"activity.AccessRequestResolvedMembership.rejected.header.short"}):void(0,x().HB)(m):null}const ht=o.memo(vt);var ft=i.n(i(569029)),yt=i.n(i(879962)),bt=i.n(i(157545)),xt=()=>i(900375),St=()=>i(723361),At=()=>i(465170),jt=()=>i(902567),_t=()=>i(3311),Mt=()=>i(865226),Rt=()=>i(29869),kt=()=>i(286404);const It=(0,b().YK)({errorTitle:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.errorTitle",defaultMessage:"A workflow run has failed {numWorkflows, plural, one {} other {{numWorkflows} times}}"},errorButton:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.errorButton",defaultMessage:"View {numWorkflows, plural, one {} other {last}} failed run"},actionTitle:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.actionTitle",defaultMessage:"{workflowName} has sent you a message"},actionButton:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.actionButton",defaultMessage:"View run"},customActionTitle:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.customActionTitle",defaultMessage:"From {workflowName}: {customTitle}"},defaultWorkflowName:{id:"appBuilderNotificationActivityError.defaultWorkflowName",defaultMessage:"An App"}});function Ct(e){const{rootStore:t,activity:a,isLast:s,tabArgs:d,isFirst:l}=e,{tab:c,notification:g}=d,v=(0,r().v3)(),h=(0,n().K8)((()=>a.getEdits()),[a]),f=h.at(0),y=(0,b().tz)(),A=(0,n().K8)((()=>{if((0,x().O9)(f))return k().NU.createChildStore(t,{table:i(829629).C0,id:f.workflow_id,spaceId:t.getSpaceId()}).getData()}),[t,f]),{handleNavigateToAutomationRun:j,workflowRunUrl:_,navigableBlockStore:M,navigableBlockUrl:R}=function(e){let{edit:t,rootStore:i}=e;const o=(0,r().v3)(),a=(0,n().K8)((()=>{if((0,x().O9)(t)&&t.automation_run_id)return k().ty.createChildStore(i,{table:jt().QR,id:t.automation_run_id,spaceId:i.getSpaceId()})}),[i,t]),s=(0,n().K8)((()=>{if((0,x().O9)(t)&&t.navigable_block_id)return new(k().Bv)(o,{id:t.navigable_block_id,table:p().ev})}),[t,o]),d=(0,n().K8)((()=>{if(!(0,x().O9)(s))return!0;const e=s.getRole();return!e||!(0,V().Tt)(e)}),[s]),l=(0,n().K8)((()=>{if((0,x().O9)(s))return(0,Rt().Ay)({store:s,preferPublicLink:!1,pageVisitSource:m().y8.Notification})}),[s]),c=(0,n().K8)((()=>{if(d||!(0,x().O9)(t))return;if(t.workflow_url)return t.workflow_url;const e=(0,x().O9)(a)?`&wfv=runs&t=new&wfk=${(0,_t().Xw)(a.id)}`:"&wfv=runs&t=new";return`${l}${e}`}),[a,t,d,l]),u=(0,n().K8)((()=>()=>{s&&l&&c&&Mt().oo({environment:o,url:c})}),[o,s,l,c]);return{handleNavigateToAutomationRun:u,navigableBlockStore:s,navigableBlockUrl:l,workflowRunUrl:c}}({edit:f,rootStore:t}),I=(0,u().IS)((e=>({viewButton:{marginTop:8,height:26,fontWeight:S().Wy.medium},bodyContainer:{fontSize:Xe,lineHeight:S().K_.UIRegular.desktop,wordBreak:"break-word"},headerName:{fontWeight:S().Wy.medium,display:"inline-flex"}})),[]),C=(0,u().eP)(),w=(0,o.useCallback)((e=>{(0,J().SQ)({event:e,context:J().y$.NotificationClick,callback:()=>{X().createAndCommit({userAction:"AutomationTypecheckErrorRaisedActivity.viewError",environment:v,canUndo:!0,perform:e=>{G().ZB({notification:g,rootStore:t,transaction:e,read:!0})}}),j(),$().K4({tab:c,notificationId:null==g?void 0:g.id,environment:v,alreadyRead:Boolean(null==g?void 0:g.read),activity:a})}})}),[a,v,j,g,t,c]);if(!f)return null;const K=(0,B.jsx)("div",{style:I.headerName,children:(null==A?void 0:A.name)||y.formatMessage(It.defaultWorkflowName)});return(0,B.jsx)(ot,{header:"workflow-error"===f.app_builder_notification_type?(0,B.jsx)(b().sA,{...It.errorTitle,values:{numWorkflows:h.length}}):f.header_content?(0,B.jsx)(b().sA,{...It.customActionTitle,values:{workflowName:K,customTitle:f.header_content}}):(0,B.jsx)(b().sA,{...It.actionTitle,values:{workflowName:K}}),isFirst:l,isLast:s,isPrivate:!1,rootStore:t,notification:g,icon:(0,B.jsx)(wt,{workflowName:(null==A?void 0:A.name)||"W",notificationType:f.app_builder_notification_type}),showSnapshotButton:!1,navigableBlockId:null==M?void 0:M.id,url:"workflow-error"===f.app_builder_notification_type?_:R,...(0,oe().$5)({notification:g,activity:a,environment:v,tab:c}),children:"workflow-error"===f.app_builder_notification_type?(0,B.jsx)("div",{children:(0,B.jsx)(kt().A,{style:I.viewButton,onClick:w,size:"sm",children:(0,B.jsx)(b().sA,{...It.errorButton,values:{numWorkflows:h.length}})})}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:"dark"===C?"app-builder-notification-activity--dark":"app-builder-notification-activity--light",style:I.bodyContainer,dangerouslySetInnerHTML:{__html:ft().sanitize(Kt({markdown:f.body_content||""}))}}),(0,B.jsx)("div",{children:(0,B.jsx)(kt().A,{style:I.viewButton,onClick:w,size:"sm",children:(0,B.jsx)(b().sA,{...It.actionButton})})})]})})}function wt(e){let{workflowName:t,notificationType:i}=e;const o=(0,u().IS)((e=>({icon:{fill:e.icon.uiRedPrimary,height:12,left:9,position:"absolute",top:14,width:12},firstLetter:{textTransform:"uppercase",color:e.text.secondary},workflowIcon:{color:e.text.secondary,padding:"3px"},wrapper:{position:"relative"}})),[]);return(0,B.jsx)(it,{children:(0,B.jsx)("div",{style:o.wrapper,children:"workflow-error"===i?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{style:o.firstLetter,children:t.charAt(0)}),(0,St().Q)(o.icon)]}):(0,xt().S)(o.workflowIcon)})})}function Kt(e){return At().uY({MarkdownIt:bt(),LinkifyIt:yt(),markdown:e.markdown})}i(333225),i(494367),i(516262),i(573119),i(240480),i(950443),i(619601),i(725707),i(491955),i(403517);var Bt=()=>i(839999),Tt=()=>i(711659),qt=()=>i(137476),Nt=()=>i(126451),Pt=()=>i(752597),Lt=()=>i(23371),Dt=()=>i(521325),Et=()=>i(165601),Ot=()=>i(486963);async function zt(e){const{environment:t,automationNavigableBlockStore:i,automationId:o,source:r,rootStore:n}=e;await Pt().default.afterNextFlush();const a=await async function(e,t){const i=Date.now(),o=async()=>{const r=e();return void 0!==r?r:Date.now()-i>=t?void 0:(await(0,Lt().wR)(10),await o())};return await o()}((()=>(0,Ot().U)(i)),2e3);if(!a)return;const s=a.settingsStore;if(s)if(o){"event"===n.getRecordStore(n,{table:Tt().yB,id:o,spaceId:n.getSpaceId()}).getTriggerType()&&(Dt().Ow({collectionContextStore:a,collectionSettingsStore:s}),Et().h({environment:t,collectionContextStore:a,collectionSettingsStore:s,mode:"edit_automation",automationId:o,source:r}))}else Dt().Ow({collectionContextStore:a,collectionSettingsStore:s}),Dt().R8({collectionSettingsStore:s,item:{type:"automationSettings",source:r}})}function Ft(e){const{automationNames:t,handleAutomationNavigate:i}=e,o=(0,b().tz)(),r=t.at(0),n=t.length,a=n-2,s=o.formatList([...t.slice(0,2),a>0?o.formatMessage({defaultMessage:"{numRemainingAutomations} more",id:"AutomationTypecheckErrorRaisedActivity.wrappedAutomationName.tooltipNumRemainingAutomations"},{numRemainingAutomations:a}):void 0].filter(x().O9),{style:"long",type:"conjunction"}),d={defaultMessage:"{numAutomations, plural, one {{firstAutomationName}} other {{numAutomations} automations}}",values:{firstAutomationName:r,numAutomations:n},id:"AutomationTypecheckErrorRaisedActivity.wrappedAutomationName.automationName",description:"The display name for an automation."},l=e=>(0,B.jsx)(Nt().A,{...e,onClick:i,children:(0,B.jsx)(b().sA,{...d})});return 1===n?l():(0,B.jsx)(Be().A,{renderTooltip:e=>(0,B.jsx)("div",{...e,children:s}),render:e=>l(e)})}function Ut(e){let{automationName:t}=e;const i=(0,u().IS)((e=>({icon:{fill:e.icon.uiRedPrimary,height:12,left:9,position:"absolute",top:14,width:12},firstLetter:{textTransform:"uppercase",color:e.text.secondary},wrapper:{position:"relative"}})),[]);return(0,B.jsx)(it,{children:(0,B.jsxs)("div",{style:i.wrapper,children:[(0,B.jsx)("div",{style:i.firstLetter,children:t.charAt(0)}),(0,St().Q)(i.icon)]})})}i(771702);var Wt=()=>i(387218),Vt=()=>i(586121);var Ht=()=>i(716605),$t=()=>i(503880),Gt=()=>i(150936),Yt=()=>i(66460),Qt=()=>i(319638),Xt=()=>i(798096),Jt=()=>i(591246),Zt=()=>i(441165),ei=()=>i(654548),ti=()=>i(101558),ii=()=>i(154131),oi=()=>i(931085),ri=()=>i(951156),ni=()=>i(482570),ai=()=>i(611824),si=()=>i(735976),di=()=>i(184711),li=()=>i(123047),ci=()=>i(360482);function ui(e){const{discussionStore:t,commentStore:i}=e,o=(0,r().v3)(),a=(0,u().DP)(),s=(0,n().K8)((()=>ci().gp(i).getValue()),[i]),d=(0,n().K8)((()=>i.getSpaceId()),[i]),l=(0,n().K8)((()=>{if(!s||!d)return null;const e=(0,li().Eh)({textValue:s,currentUserId:o.currentUser.id,getRecordModel:t.getRecordModel,highlightStyle:"text_only"});return(0,ei().S5)({environment:o,textValue:{value:e,spaceId:d},parentStore:t,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableHover:!0,disabled:!0,theme:a,emojiType:(0,Zt().FN)(o),katex:o.KatexStore.getKatex(),formulaValueTypes:[]})}),[o,t,a,s,d]),c=(0,u().IS)((e=>({commentText:{whiteSpace:"pre-wrap",wordBreak:"break-word",display:"inline",fontSize:14,color:e.text.primary,lineHeight:"22px"}})),[]);return(0,B.jsx)("span",{style:c.commentText,children:l})}function gi(e){const{activity:t,tabArgs:i,rootStore:a,isFirst:l,isLast:u}=e,{source:g,tab:v,notification:h}=i,f=(0,n().K8)((()=>t.getEdits()),[t]);let y=f.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":case"suggestion-created":return!0;default:(0,x().HB)(e)}}));const b=(0,n().K8)((()=>"suggestion-created"===f[0].type),[f]);0===y.length&&0!==f.length&&(y=f);const A=y.length>0,j=(0,r().v3)(),_=(0,n().K8)((()=>{const e=a.getRecordStore(a,{table:d().$Y,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,a]),M=(0,n().K8)((()=>_?_.getCommentStores():[]),[_]),R=(0,n().K8)((()=>{const e=null==_?void 0:_.getParentPointer();if(e)return k().Bv.createChildStore(a,e)}),[_,a]),I=(0,n().K8)((()=>Boolean(R&&R.isDefined())),[R]),C="on"===(0,ti().r)("inbox_activity_split"),w=(0,n().K8)((()=>{const e=null==R?void 0:R.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,R]),K=k().Bv.createChildStore(a,{table:p().ev,id:w}),T=(0,n().K8)((()=>K.isDefined()),[K]),q=(0,n().K8)((()=>Boolean(!(null!=R&&R.pathIsDead()))),[R]),N=(0,n().K8)((()=>K.canComment()&&q&&!C),[q,K,C]),L=(0,n().K8)((()=>{var e;if(R)return null===(e=R.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:a.getRecordModel,discussionId:t.discussion_id,pageVisitSource:m().y8.Notification})}),[R,a,t]),D=(0,n().K8)((()=>(0,c().Ln)({edits:y,rootStore:a})),[y,a]),E=(0,n().K8)((()=>(0,P().hS)(M.map((e=>e.getCreatedByPointer())).filter(x().O9),"id").map((e=>k().sk.createChildStore(a,e)))),[M,a]),O=(0,n().K8)((()=>E.map((e=>e.getModel())).filter(x().O9)),[E]),{backActorStore:z,frontActorStore:F}=(0,n().K8)((()=>{const e=j.currentUser.id;return e?(0,c()._S)({authorStores:E,currentUserId:e}):{backActorStore:void 0,frontActorStore:void 0}}),[j.currentUser.id,E]),U=q,W=(0,o.useCallback)((e=>{if((0,oe().uY)({...i,environment:j,activity:t,mightCloseTab:U}),!q&&R&&_){var o;const r=e.target;Xt().IX({environment:j,discussionStore:_,rect:r.getBoundingClientRect(),blockStore:R,discussionLocation:bi({forReplyMenu:!0,source:i.source}),activityId:t.id,notificationId:null===(o=i.notification)||void 0===o?void 0:o.id})}}),[t,q,R,_,j,i,U]),V=(0,o.useCallback)((e=>{"Removed"===e?(0,oe().jv)({...i,environment:j,activity:t,mightCloseTab:U}):"Added"===e?(0,oe().P)({...i,environment:j,activity:t,mightCloseTab:U}):(0,x().HB)(e)}),[i,j,t,U]),H=(0,n().K8)((()=>(0,c().DU)({recordId:w,recordType:p().ev,tab:v,rootStore:a,environment:j})),[w,v,a,j]),$=(0,n().K8)((()=>bi({source:g,forReplyMenu:!1})),[g]),G=(0,n().K8)((()=>{const e=null==_?void 0:_.getModel();if(e)return(0,c().pN)(e)}),[_]);return A&&T&&I&&_?(0,B.jsxs)(ot,{header:(0,B.jsx)(xi,{authorCount:D.length,authorPhrase:(0,B.jsx)(Ci,{authorsLength:E.length,frontActorStore:F,backActorStore:z,authorTextStyle:{fontWeight:S().Wy.medium}}),isSuggestionCreatedActivity:b}),isFirst:l,isLast:u,isPrivate:H,rootStore:a,navigableBlockId:w,notification:h,icon:F&&z?(0,B.jsx)(Ii,{frontActorStore:F,backActorStore:z}):O.length>0?(0,B.jsx)(be().H8,{authors:O,size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}):(0,B.jsx)(wi,{}),showSnapshotButton:!1,url:L,...(0,oe().$5)({notification:h,environment:j,tab:v,activity:t}),children:[_&&G&&(0,B.jsx)(pi,{discussionStore:_,url:L,onClick:W,rootStore:a,source:g,isSuggestionCreatedActivity:b}),_&&(0,B.jsx)(_i,{discussionStore:_,discussionLocation:$,onReactionToggle:V}),N&&(0,B.jsx)(yi,{activity:t,rootStore:a,tabArgs:i,isSuggestionCreatedActivity:b}),_&&(0,B.jsx)(vi,{discussionStore:_})]}):(s().log({level:"warning",from:"CommentActivityNotification",type:"invalidNotificationData",data:{ids:[(null==h?void 0:h.id)??"unknown"]}}),null)}const mi=8;function vi(e){const{discussionStore:t}=e,i=(0,n().K8)((()=>t.getResolved()),[t]),o=(0,u().IS)((e=>({container:{display:"flex",alignItems:"center",gap:4,fontSize:12,color:e.text.secondary,marginTop:mi},icon:{height:12,width:12}})),[]);return i?(0,B.jsxs)("div",{style:o.container,children:[(0,Gt().b)(o.icon),(0,B.jsx)(b().sA,{id:"activity.commentActivity.commentStatusResolved",defaultMessage:"Resolved on the page"})]}):null}function pi(e){const{url:t,onClick:i,discussionStore:o,rootStore:r,isSuggestionCreatedActivity:a}=e,s=(0,u().IS)((e=>({linkbox:{display:"flex",alignItems:"center",fontSize:13,color:e.text.secondary,paddingTop:2,paddingBottom:8,marginBottom:0}})),[,]),d=(0,n().K8)((()=>o.getType()),[o]);return(0,B.jsx)(oi().A,{href:t,onClick:i,innerStyle:s.linkbox,disabled:!0,children:"suggestion"===d?!a&&(0,B.jsx)(Qt().c4,{discussionStore:o,collapsed:!1}):(0,B.jsx)(hi,{rootStore:r,discussionStore:o})})}function hi(e){const t=(0,r().v3)(),i=(0,u().DP)(),{rootStore:o,discussionStore:a}=e,s=(0,n().K8)((()=>{const e=a.getModel();if(e)return(0,c().pN)(e)}),[a]),d=(0,n().K8)((()=>{var e;const t=null==a||null===(e=a.getParentStore())||void 0===e?void 0:e.getParentStore();if(!t||"collection"!==t.table)return;const i=t.getSchema(),o=a.getPropertyId();return void 0!==o?(0,Ht()._g)({schema:i,property:o}):void 0}),[a]),l=(0,n().K8)((()=>(0,ei().S5)({environment:t,textValue:s?{value:s,spaceId:o.id}:void 0,parentStore:o,disableHover:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!0,disabled:!0,highlightDiscussionId:a.id,theme:i,emojiType:(0,Zt().FN)(t),katex:t.KatexStore.getKatex(),formulaValueTypes:[]})),[t,s,o,a.id,i]);return s?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(di().A,{}),d&&(0,B.jsx)(Jt().A,{propertySchema:d}),(0,B.jsx)("div",{style:S().RC,children:l})]}):null}const fi=8;function yi(e){const{activity:t,rootStore:i,tabArgs:a,isSuggestionCreatedActivity:s}=e,{source:l,notification:c,tab:g}=a,m=(0,n().K8)((()=>{const e=i.getRecordStore(i,{table:d().$Y,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,i]),v=(0,r().v3)(),h=(0,n().K8)((()=>k().sk.createChildStore(i,{table:d().$Y,id:t.discussion_id,spaceId:(0,Yt().e)(i.pointer.spaceId)})),[t,i]),f=(0,n().K8)((()=>null==m?void 0:m.getParentId()),[m]),y=(0,o.useCallback)((e=>{(0,J().SQ)({event:e,context:J().y$.NotificationClick,callback:()=>{if(!f)return;const o=k().Bv.createChildStore(i,{table:p().ev,id:f}),r=e.target,n=null==c?void 0:c.id;Xt().IX({environment:v,discussionStore:h,rect:r.getBoundingClientRect(),blockStore:o,discussionLocation:bi({forReplyMenu:!0,source:l}),activityId:t.id,notificationId:n}),"notifications_tab"===l&&$().ZP({environment:v,notificationId:n,alreadyRead:Boolean(null==c?void 0:c.read),activity:t,tab:g})}})}),[t,h,v,c,f,i,l,g]),x=(0,u().IS)((e=>({container:{paddingTop:fi},actionButton:(0,xe().Ei)(e)})),[]);return!m||s?null:(0,B.jsx)("div",{style:x.container,children:(0,B.jsx)(w().g,{children:(0,B.jsx)(K().p,{isGray:!0,size:"xs",onClick:y,style:x.actionButton,children:(0,B.jsx)(b().sA,{defaultMessage:"Reply",id:"activityNotification.replyButton.label"})})})})}function bi(e){const{forReplyMenu:t,source:i}=e;if("updates_sidebar"===i)return t?"reply_menu_updates_sidebar":"updates_sidebar";return`${t?"reply_menu_":"updates_menu_"}${$().jD()}`}function xi(e){const{authorCount:t,authorPhrase:i,isSuggestionCreatedActivity:o}=e;return o?(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} suggested in} other {{authorOrAuthors} suggested in}}",values:{numberOfAuthors:t,authorOrAuthors:i},id:"activity.commentActivity.standardizedHeader.suggestion"}):(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented in} other {{authorOrAuthors} commented in}}",values:{numberOfAuthors:t,authorOrAuthors:i},id:"activity.commentActivity.standardizedHeader"})}const Si=2,Ai=10,ji=4;function _i(e){const{discussionStore:t,discussionLocation:i,onReactionToggle:a}=e,s=(0,r().v3)(),[d,l]=(0,o.useState)(!1),c=(0,n().K8)((()=>{if(!t)return[];const e=t.getCommentStores();return"suggestion"===t.getType()?e.slice(1):e}),[t]),g=c.length-Si,m=g>0,v="on"===(0,ti().r)("inbox_activity_split"),p=1===c.length,h=(0,o.useCallback)((e=>{(0,J().SQ)({event:e,context:J().y$.NotificationClick,callback:()=>{l(!d),$().o1(s,{expand:!d,comments_count:c.length,discussion_id:t.id})}})}),[s,d,c.length,t.id]),f=(0,u().IS)((e=>({discussion:{display:"flex",flexDirection:"column",gap:Ai},expandButton:{display:"flex",justifyContent:"start",alignItems:"center",gap:14,borderRadius:6,fontSize:12,padding:6,marginLeft:-6,marginTop:ji-Ai,marginBottom:ji-Ai,color:e.text.secondary,maxWidth:"fit-content",maxHeight:26}})),[]),y=d?void 0:p?4:3;if(p){const e=c[0];return(0,B.jsx)("div",{style:f.discussion,children:(0,B.jsx)(Mi,{commentStore:e,discussionStore:t,discussionLocation:i,onReactionToggle:a,maxLines:y,showAuthor:!1,onMore:h},e.id)})}if(v&&c.length>0){const e=c[c.length-1];return(0,B.jsx)("div",{style:f.discussion,children:(0,B.jsx)(Mi,{commentStore:e,discussionStore:t,discussionLocation:i,onReactionToggle:a,maxLines:y,showAuthor:!1,onMore:h},e.id)})}return(0,B.jsxs)("div",{style:f.discussion,children:[c.slice(0,1).map((e=>(0,B.jsx)(Mi,{commentStore:e,discussionStore:t,discussionLocation:i,onReactionToggle:a,maxLines:y,onMore:h},e.id))),m&&(0,B.jsx)(w().g,{children:(0,B.jsx)(Ce().A,{style:f.expandButton,onClick:h,children:d?(0,B.jsx)(b().sA,{id:"CommentGroupingActivity.discussionThread.hidePreviousRepliesCount",defaultMessage:"Hide {previousRepliesCount} {previousRepliesCount, plural, one {comment} other {comments}}",values:{previousRepliesCount:g}}):(0,B.jsx)(b().sA,{id:"CommentGroupingActivity.discussionThread.showPreviousRepliesCount",defaultMessage:"{previousRepliesCount} {previousRepliesCount, plural, one {more comment} other {more comments}}",values:{previousRepliesCount:g}})})}),d&&c.slice(1,-1).map((e=>(0,B.jsx)(Mi,{commentStore:e,discussionStore:t,discussionLocation:i,onReactionToggle:a,maxLines:y,onMore:h},e.id))),c.slice(-1).map((e=>(0,B.jsx)(Mi,{commentStore:e,discussionStore:t,discussionLocation:i,onReactionToggle:a,maxLines:y,onMore:h},e.id)))]})}function Mi(e){const{commentStore:t,discussionStore:i,discussionLocation:a,onReactionToggle:s,maxLines:d,showAuthor:l=!0,onMore:c}=e,g=(0,r().Y0)(),[m,v]=(0,o.useState)(!1),h=(0,n().K8)((()=>{const e=t.getContent(),i=0===e.length;if(e||!i)return e.map((e=>{const i=k().sk.createChildStore(t,{table:p().ev,id:e,spaceId:t.getSpaceId()}).getValue();if(i)return(0,B.jsx)(ii().Ay,{blockValue:i,rootStore:t},e)})).filter(x().O9)}),[t]),f=(0,n().K8)((()=>k().Lk.getUserVisibleReactions(t).length>0),[t]),y=(0,n().K8)((()=>t.getLastEditedTime()>t.getCreatedTime()+100),[t]),A=!f&&g.isMobile,j=!A,_=(0,o.useCallback)((e=>{g.isMobile?e.preventDefault():v(!0)}),[g.isMobile]),M=(0,o.useCallback)((e=>{g.isMobile?e.preventDefault():v(!1)}),[g.isMobile]),R=(0,u().IS)((e=>({avatarCommentReactionBarContainer:{...!f&&!g.isMobile&&{position:"relative"}},avatarAndCommentContainer:{display:"flex",flexDirection:"column"},commentContainer:{display:"flex",justifyContent:"space-between",gap:6,flexGrow:1},commentClampContainer:{lineHeight:S().K_.UIRegular.desktop,color:e.accentColors.gray[500]},toggleOverflowButton:{color:e.accentColors.gray[500],fontSize:14},editedBadge:{fontSize:13,color:e.text.secondary,paddingLeft:4},reactionBarMobile:f?{marginTop:4}:{marginRight:-6},reactionBar:{...!f&&{position:"absolute",top:-2,right:-8,opacity:m?1:0,transition:`opacity ${Ye}`},...f&&{marginTop:4}},newReaction:{borderWidth:1,borderStyle:"solid",borderColor:g.isMobile?"transparent":e.stroke.primary,borderRadius:6,boxShadow:g.isMobile?"unset":"0px 2px 4px 0px rgba(22, 29, 27, 0.02)"}})),[g,f,m]),I=(0,o.useCallback)((e=>{e.preventDefault(),c(e)}),[c]);return(0,B.jsx)("div",{children:(0,B.jsxs)("div",{style:R.avatarCommentReactionBarContainer,onMouseEnter:_,onMouseLeave:M,children:[(0,B.jsxs)("div",{style:R.avatarAndCommentContainer,children:[l&&(0,B.jsx)("div",{children:(0,B.jsx)(Ri,{commentStore:t})}),(0,B.jsxs)("div",{style:R.commentContainer,dir:"auto",children:[(0,B.jsxs)(si().A,{style:R.commentClampContainer,maxLines:d,onMore:I,moreElement:(0,B.jsxs)(ai().A,{style:R.toggleOverflowButton,disableUnderline:!0,hoverColor:"blue",children:["…"," ",(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{id:"commentActivityNotification.truncated.showMoreLabel",defaultMessage:"more"})})]}),children:[(0,B.jsx)(ui,{discussionStore:i,commentStore:t}),h,y&&(0,B.jsx)("span",{style:R.editedBadge,children:(0,B.jsx)(b().sA,{id:"CommentGroupingActivity.discussionThreadComment.editedBadge",defaultMessage:"(edited)"})})]}),A&&(0,B.jsx)("div",{style:g.isMobile?R.reactionBarMobile:R.reactionBar,children:(0,B.jsx)(w().g,{children:(0,B.jsx)(Qt().fj,{parentStore:t,discussionLocation:a,onReactionToggle:s,newReactionStyle:R.newReaction})})})]})]}),j&&(0,B.jsx)("div",{style:g.isMobile?R.reactionBarMobile:R.reactionBar,children:(0,B.jsx)(w().g,{children:(0,B.jsx)(Qt().fj,{parentStore:t,discussionLocation:a,onReactionToggle:s,newReactionStyle:R.newReaction})})})]})})}function Ri(e){const{commentStore:t}=e,i=(0,r().v3)(),o=(0,b().tz)(),a=(0,n().K8)((()=>{const e=t.getCreatedByPointer();if(e)return k().sk.createChildStore(t,e)}),[t]),s=(0,n().K8)((()=>{if(a)return a.getDisplayName(o)}),[a,o]),d=(0,n().K8)((()=>!!a&&i.currentUser.id===a.id),[i,a]),l=(0,u().IS)((e=>({fullName:{fontWeight:S().Wy.regular,fontSize:12,lineHeight:"22px",color:e.text.secondary},you:{fontWeight:S().Wy.regular,fontSize:12,lineHeight:"22px",color:e.text.tertiary}})),[]);return d?(0,B.jsx)(b().sA,{id:"CommentGroupingActivity.discussionThreadComment.authorLabel",defaultMessage:"<author>{fullName}</author> <you>(You)</you>",values:{author:e=>(0,B.jsx)("span",{style:l.fullName,children:e}),fullName:s,you:e=>(0,B.jsx)("span",{style:l.you,children:e})}}):s?(0,B.jsx)("span",{style:l.fullName,children:s}):(0,B.jsx)("span",{style:l.fullName,children:(0,B.jsx)(b().sA,{id:"CommentGroupingActivity.discussionThreadComment.unknownAuthorLabel",defaultMessage:"Unknown author"})})}const ki=20;function Ii(e){const{frontActorStore:t,backActorStore:i}=e,o=(0,u().IS)((()=>({container:{display:"grid",height:Ue,width:Ue},back:{gridColumn:1,gridRow:1,marginLeft:-3,marginTop:-3,maxWidth:ki,minWidth:ki},front:{gridColumn:1,gridRow:1,marginLeft:7,marginTop:7,maxWidth:ki,minWidth:ki}})),[]);return(0,B.jsxs)("div",{style:o.container,children:[(0,B.jsx)("div",{style:o.back,children:(0,B.jsx)(Ki,{size:ki,actorStore:i,avatar:void 0})}),(0,B.jsx)("div",{style:o.front,children:(0,B.jsx)(Ki,{size:ki,actorStore:t,avatar:void 0})})]})}function Ci(e){const{authorsLength:t,frontActorStore:i,backActorStore:o,authorTextStyle:a}=e,s=(0,r().v3)(),d=(0,b().tz)(),l=s.currentUser.id,c=(0,n().K8)((()=>{if(i)return i.getDisplayName(d)}),[i,d]),u=(0,n().K8)((()=>{if(o)return o.getDisplayName(d)}),[o,d]),g={fontWeight:S().Wy.semibold,...a};return 0===t?(0,B.jsx)("span",{style:g,children:(0,B.jsx)(b().sA,{defaultMessage:"<b>Nobody</b>",id:"activitySection.authorPhraseInboxRedesign.forNoAuthors.label",values:{b:e=>(0,B.jsx)("span",{style:g,children:e})}})}):1===t&&i?i.id===l?(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{defaultMessage:"<b>You</b>",id:"activitySection.authorPhraseInboxRedesign.forOneAuthorCurrentUser.label",values:{b:e=>(0,B.jsx)("span",{style:g,children:e})}})}):(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{defaultMessage:"<b>{author}</b>",id:"activitySection.authorPhraseInboxRedesign.forOneAuthor.label",values:{author:c,b:e=>(0,B.jsx)("span",{style:g,children:e})}})}):2===t?o&&o.id===l?(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{defaultMessage:"<b>{frontActorName} and You</b>",id:"activitySection.authorPhraseInboxRedesign.forTwoAuthorsCurrentUser.label",values:{frontActorName:c,b:e=>(0,B.jsx)("span",{style:g,children:e})}})}):(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{defaultMessage:"<b>{frontActorName} and {backActorName}</b>",id:"activitySection.authorPhraseInboxRedesign.forTwoAuthors.label",values:{frontActorName:c,backActorName:u,b:e=>(0,B.jsx)("span",{style:g,children:e})}})}):t>2?(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{defaultMessage:"<b>{frontActorName} and {numberOfOtherAuthors} others</b>",id:"activitySection.authorPhraseInboxRedesign.forMoreThanTwoAuthors.label",values:{frontActorName:c,numberOfOtherAuthors:t-1,b:e=>(0,B.jsx)("span",{style:g,children:e})}})}):null}function wi(){const e=(0,u().IS)((e=>({icon:{height:14,width:14,fill:e.icon.secondary}})),[]);return(0,B.jsx)(it,{children:(0,$t().D)(e.icon)})}function Ki(e){const{actorStore:t,avatar:i}=e,o=e.size??28;return t?t.table===N().GP?(0,B.jsx)(ri().A,{botStore:t,size:o}):t.table===y().oo?(0,B.jsx)(ni().A,{userStore:t,size:o}):t.table===H().yj?(0,B.jsx)(ni().A,{userStore:void 0,size:o}):void(0,x().HB)(t):i?(0,B.jsx)(ni().A,{avatar:i,size:o}):(0,B.jsx)(ni().A,{userStore:void 0,size:o})}const Bi=o.memo(gi);const Ti=function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{tab:d,notification:l}=o,u=(0,r().v3)(),g=(0,n().K8)((()=>(0,Wt().W9)(t.getEdits())),[t]),m=(0,n().K8)((()=>(0,c().Ln)({edits:g,rootStore:i})),[g,i]),v=(0,n().K8)((()=>{const e=g[0];return e?e.new_email:""}),[g]);return(0,B.jsx)(ot,{header:(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{defaultMessage:"You updated your email to {newEmail}",values:{newEmail:v},id:"activity.emailEdited.header.short"})}),isFirst:a,isLast:s,isPrivate:!1,rootStore:i,notification:l,icon:(0,B.jsx)(be().H8,{authors:m,size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:void 0,...(0,oe().$5)({notification:l,activity:t,environment:u,tab:d})})};var qi=()=>i(398319),Ni=()=>i(610271);function Pi(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,B.jsx)(it,{children:(0,qi().y)(e.icon)})}var Li=()=>i(587593);const Di=(0,b().YK)({jiraSyncTokenExpiry:{id:"externalIntegrationNotificationActivity.jiraSyncTokenExpiry",defaultMessage:"Your Jira sync stopped for {site} due to expired Jira token. Please re-authenticate to continue."}});function Ei(e){const{rootStore:t,activity:i,isLast:o,tabArgs:a,isFirst:s}=e,{tab:d,notification:l}=a,c=(0,r().v3)(),u=(0,n().K8)((()=>i.getEdits()),[i]).at(0);return u&&"jira-sync-token-expiry"===u.external_integration_notification_type?(0,B.jsx)(ot,{header:(0,B.jsx)(b().sA,{...Di.jiraSyncTokenExpiry,values:{site:u.identifier}}),isFirst:s,isLast:o,isPrivate:!1,rootStore:t,notification:l,icon:(0,B.jsx)(Oi,{}),showSnapshotButton:!1,url:void 0,...(0,oe().$5)({notification:l,activity:i,environment:c,tab:d})}):null}function Oi(){const e=(0,r().v3)(),t=(0,n().K8)((()=>"dark"===e.ThemeStore.state.mode),[e]),i=(0,u().IS)((e=>({icon:{height:18,width:18,marginTop:2,marginRight:2,fill:t?e.primaryBlack:e.blueColor}})),[t]);return(0,B.jsx)(it,{children:(0,Li().jiraIcon)(i.icon)})}i(500234);var zi=()=>i(220959),Fi=()=>i(858280),Ui=()=>i(365721),Wi=()=>i(622163),Vi=()=>i(904697),Hi=()=>i(7379),$i=()=>i(628854);const Gi=3;function Yi(e){const{userIds:t,remainingAvatarCount:i,shownAvatarCount:o,titledRecordStore:r,isMobile:n}=e,a=(0,u().IS)((e=>({avatarContainer:{display:"flex",flexDirection:"row",justifyContent:"start",overflow:"hidden",paddingRight:2,alignItems:"center"},overlappingAvatar:{marginRight:-5,position:"relative"},rightmostAvatar:{position:"relative"},remainderCount:{paddingLeft:2,color:e.text.tertiary}})),[]);return(0,B.jsxs)("div",{style:a.avatarContainer,children:[t.slice(0,Gi).map(((e,t)=>{const i=k().LU.createChildStore(r,{table:y().oo,id:e}),s=t===o-1;if(i)return(0,B.jsx)(ni().A,{userStore:i,size:24,avatarShouldShowShadow:!1,style:s?a.rightmostAvatar:a.overlappingAvatar,isOffline:!1,hasTooltip:!n},e)})),i>0&&(0,B.jsx)("div",{style:a.remainderCount,children:(0,B.jsx)(b().sA,{defaultMessage:"{remainingAvatarCount, plural, one {+{remainingAvatarCount}} other {+{remainingAvatarCount}}}",id:"activity.titleCard.members.otherCount.message",values:{remainingAvatarCount:i}})})]})}function Qi(e){const{titledRecordStore:t,rootStore:a,activity:s,tabArgs:d}=e,l=a.getRecordModel,c=(0,n().K8)((()=>t.getModel()),[t]),g=(0,r().v3)(),{isMobile:v}=g.device,b=(0,n().K8)((()=>null==c?void 0:c.getRenderIcon({getRecordModel:l})),[c,l]),A=(0,u().IS)((e=>({container:{display:"block",borderWidth:1,borderStyle:"solid",borderColor:e.tint.regular,borderRadius:8,marginTop:0,padding:12,background:e.contentBackground,boxShadow:"0px 1px 2px 0px "+("light"===e.mode?"rgba(0, 0, 0, 0.03)":"rgba(0, 0, 0, 0.12)"),transition:`background ${Ve}`},icon:{...xe().kI,marginRight:10},activityTitle:{fontSize:14,marginRight:void 0!==b?3:0,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,verticalAlign:"top",textAlign:"left",lineHeight:S().K_.UIRegular.desktop,...S().RC,whiteSpace:"normal",...xe().a_},flexRow:{display:"flex",alignItems:"center"},title:{maxWidth:"80%"},spacer:{flexGrow:1}})),[b]),j=(0,n().K8)((()=>{if(c&&c.table!==f().yK)return c.getRenderUrl({getRecordModel:l,pageVisitSource:m().y8.Notification})}),[c,l]),_=(0,o.useCallback)((e=>{const i=t.table;switch(i){case p().ev:case h().NX:(0,oe().Qo)({environment:g,activity:s,...d});break;case f().yK:(0,oe().uY)({environment:g,activity:s,...d}),$i().L0({environment:g,teamStore:t,shouldScroll:!0}),Hi().A.setState({...Hi().A.state,open:!1});break;default:(0,x().HB)(i)}}),[s,g,d,t]),M=(0,n().K8)((()=>{const e=t.table;let o=[];const r=i(305043).subscriptionDataStoreInstance.state;r&&(o=(0,i(111826).Ye)(r));let n=[],a=0;switch(e){case"space":if(!t.getModel())break;n=o.map((e=>e.userId)),a=Math.max(0,n.length-Gi);break;case"block":const i=t.getCreatedByPointer();(null==i?void 0:i.table)===y().oo&&(n=[i.id]),a=Math.max(0,n.length-Gi);break;case"team":const r=(0,Vi().getTeamMemberCountAndSampleUserIds)(t);n=(null==r?void 0:r.sampleMemberUserIds)??[],a=Math.max(0,(null==r?void 0:r.memberCount)??0-Gi);break;default:(0,x().HB)(e)}const s=Math.min(n.length,Gi);return(0,B.jsx)(Yi,{userIds:n,remainingAvatarCount:a,shownAvatarCount:s,titledRecordStore:t,isMobile:v})}),[v,t]);return c?(0,B.jsx)(oi().A,{href:j,onClick:_,external:!1,innerStyle:A.container,inline:!0,children:(0,B.jsxs)("div",{style:A.flexRow,children:[b&&(0,B.jsx)(Le().B,{disabled:!0,icon:b,isEmptyPage:!1,size:25,style:A.icon}),(0,B.jsx)("div",{style:A.title,children:(0,B.jsx)(De().A,{store:t,style:A.activityTitle})}),(0,B.jsx)("div",{style:A.spacer}),(0,B.jsx)("div",{children:M})]})}):null}const Xi=o.memo(Qi);function Ji(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,B.jsx)(it,{children:(0,Fi().n)(e.icon)})}function Zi(){const e=(0,r().v3)(),t=(0,n().K8)((()=>"dark"===e.ThemeStore.state.mode),[e]),i=(0,u().IS)((e=>({icon:{height:18,width:18,marginTop:2,marginRight:2,fill:t?e.primaryBlack:e.blueColor}})),[t]);return(0,B.jsx)(it,{children:(0,Ui().y)(i.icon)})}var eo=()=>i(242978),to=()=>i(640979),io=()=>i(466321),oo=()=>i(962373),ro=()=>i(780942),no=()=>i(935091),ao=()=>i(743668),so=()=>i(989372);function lo(e){const{timestamp:t,header:i,navigableBlockId:o,rootStore:n,showRecordPath:a,disableJustify:s,onBacklinkClick:d,titleAriaId:l}=e,c=(0,Re().nl)(t,{useUltraCompactFormat:!0}),g=(0,r().v3)().device.isMobile,m=(0,Re().x$)(t),v=(0,u().IS)((e=>({container:{width:"100%"},header:{width:g?"calc(100% - 98px)":"100%",fontSize:14,lineHeight:1.4,minWidth:0,minHeight:g?28:void 0,display:"flex",alignItems:"baseline",justifyContent:s?void 0:"space-between"},time:{fontSize:12,color:e.text.tertiary,whiteSpace:"nowrap",display:"inline",paddingLeft:6},path:{marginTop:4,marginBottom:4}})),[g,s]);return(0,B.jsxs)("div",{style:v.container,children:[(0,B.jsxs)("div",{className:Me().k2l,style:v.header,children:[(0,B.jsx)("span",{id:l,children:i}),(0,B.jsx)("div",{style:v.time,className:Me().Cxn,children:(0,B.jsx)(Te().A,{text:c,tooltipText:m,icon:Ae().k})})]}),a&&o&&n&&(0,B.jsx)("div",{style:v.path,children:(0,B.jsx)(so().Ay,{isLink:!0,store:k().Bv.createChildStore(n,{table:p().ev,id:o}),onClick:d})})]})}const co=1;function uo(e){const{rootStore:t,activity:i,isLast:a,tabArgs:s,edits:d,style:l,isFirst:g}=e,{tab:v,notification:h,source:f}=s,y=(0,r().v3)(),b=d.at(0),[A,j]=(0,o.useState)(null),_=(0,o.useMemo)((()=>A&&A.scrollHeight>A.clientHeight),[A]),M=(0,n().K8)((()=>{if(!b)return;const e=k().Bv.createChildStore(t,{table:p().ev,id:b.navigable_block_id});return(0,x().O9)(e)?e:void 0}),[b,t]),R=(0,n().K8)((()=>{const e=null==M?void 0:M.getModel();if(e)return e.getRenderUrl({getRecordModel:t.getRecordModel,pageVisitSource:m().y8.Notification})}),[t,M]),I=(0,n().K8)((()=>(0,c().DU)({recordId:null==M?void 0:M.id,recordType:p().ev,tab:v,rootStore:t,environment:y})),[M,v,t,y]),C=(0,u().IS)((e=>({formattedTitleStyle:{fontSize:S().J.UISmall.desktop,color:e.text.tertiary},container:{paddingBlock:4,display:"flex",flexDirection:"row",columnGap:1.5*Number((0,xe().AG)(e).paddingLeft),alignItems:"center"}})),[]),w=(0,o.useMemo)((()=>new Set(d.map((e=>e.automation_id)))),[d]),K=1===w.size;return(0,x().O9)(M)&&(0,x().O9)(b)?(0,B.jsx)(ot,{header:(0,B.jsx)(po,{rootStore:t,uniqueAutomations:w,firstEdit:b,spaceId:i.spaceId,environment:y,shortened:!1,titleStyle:{fontWeight:S().Wy.semibold}}),isFirst:g,isLast:a,isPrivate:I,rootStore:t,navigableBlockId:M.id,notification:h,icon:(0,B.jsx)(fo,{}),showSnapshotButton:!1,url:R,...(0,oe().$5)({notification:h,activity:i,environment:y,tab:v}),children:(0,B.jsxs)("div",{style:l,children:[d.slice(-1*co).map(((i,o)=>(0,B.jsxs)("div",{children:[!K&&(0,B.jsx)(po,{rootStore:t,firstEdit:i,uniqueAutomations:new Set([i.automation_id]),shortened:!0,spaceId:i.space_id,environment:y,titleStyle:C.formattedTitleStyle}),(0,B.jsx)(vo,{...e,edit:i,isViewAllMenu:!1,source:f,isLast:d.length>co?o===d.length-1-co:o===d.length-1,clampedMessageContainerRef:j})]},o))),(0,B.jsx)("div",{style:C.container,children:(_||d.length>co)&&(0,B.jsx)(go,{edits:d,rootStore:t,activity:i,navigableBlockStore:M,source:f})})]})}):null}function go(e){const{edits:t,rootStore:i,activity:a,navigableBlockStore:s,source:d}=e,l=(0,r().Y0)(),c=(0,r().v3)(),{handleAnalyticsForPopupMenu:g}=(0,o.useContext)(yo),m=(0,n().uB)(void 0,oo().A),v=(0,o.useCallback)((()=>m.reset()),[m]),p=(0,o.useMemo)((()=>(0,B.jsx)(b().sA,{defaultMessage:"{numNotifications, plural, one {View more} other {View {numRemainingNotifications}}}",id:"inAppNotificationAutomationActionTriggeredActivity.renderViewAllNotificationsButton.buttonLabel",values:{numNotifications:t.length,numRemainingNotifications:t.length}})),[t.length]);let h;h=l.isMobile?{menuType:to().gu.Modal,title:p,right:(0,B.jsx)(ao().DoneMenuText,{}),onClickRight:v,whiteBackground:!0}:{menuType:to().gu.Popup,width:420,maxWidth:l.isMobileBrowser?"80vw":"100%"};const f=(0,u().IS)((e=>({actionButton:(0,xe().Ei)(e),divider:{borderBlockEnd:`1px solid ${e.regularDividerColor}`},viewAllMenuNotificationContainer:{display:"flex",flexDirection:"column",padding:12},viewAllMenuHeaderContainer:{display:"flex",flexDirection:"row",gap:Fe},popupMenu:{marginInlineStart:-2,fontSize:Xe}})),[]),y=(0,o.useId)();return(0,B.jsx)(we().Ay,{buttonPopupStore:m,popupType:l.isMobile?io().n.SlideUp:io().n.Popup,placementToOrigin:Pe().W.Bottom,alignmentToOrigin:Pe().C.Center,originGap:4,onClick:()=>!m.state.open&&g(),renderOrigin:e=>(0,B.jsx)(ro().p,{size:"xs",isGray:!0,...e,style:f.actionButton,children:p}),render:()=>(0,B.jsx)(no().A,{...h,children:(0,B.jsx)("div",{style:f.popupMenu,children:t.map(((o,r)=>(0,B.jsxs)("div",{children:[(0,B.jsxs)("div",{style:f.viewAllMenuNotificationContainer,children:[(0,B.jsxs)("div",{style:f.viewAllMenuHeaderContainer,children:[(0,B.jsx)(fo,{}),(0,B.jsx)(lo,{timestamp:o.timestamp,titleAriaId:y,onBacklinkClick:()=>null,disableJustify:!0,header:(0,B.jsx)(po,{rootStore:i,uniqueAutomations:new Set([o.automation_id]),firstEdit:o,spaceId:a.spaceId,environment:c,closeViewAllMenu:v,shortened:!0,titleStyle:{fontWeight:S().Wy.semibold}}),rootStore:i,navigableBlockId:s.id,showRecordPath:!1})]}),(0,B.jsx)(vo,{...e,edit:o,isViewAllMenu:!0,source:d,isLast:r===t.length-1},r)]}),r!==t.length-1&&(0,B.jsx)("div",{style:f.divider})]},r)))})})})}const mo=4;function vo(e){const{edit:t,rootStore:i,source:o,isViewAllMenu:a,clampedMessageContainerRef:s}=e,d=(0,u().DP)(),l=(0,r().v3)(),c=(0,r().Y0)(),{isMobile:g}=c,m=(0,n().K8)((()=>l.KatexStore.getKatex()),[l]),v=(0,Zt().Ol)(),p=(0,n().K8)((()=>(0,B.jsx)("div",{children:(0,ei().S5)({environment:l,textValue:t.message.value?{value:t.message.value,spaceId:t.space_id}:void 0,parentStore:i,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disabled:!1,theme:d,emojiType:v,katex:m,parentBlockId:void 0,renderedPageBlockId:void 0,formulaValueTypes:[],stopLinkPropagation:!0})})),[l,v,m,d,t.message.value,i,t.space_id]),h=(0,u().IS)((e=>({container:{paddingInlineStart:a?32:(0,xe().F9)({source:o,isMobile:g}),paddingBlockEnd:4},messageContainer:{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center"},clampedMessageContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:a?void 0:mo,verticalAlign:"top",textAlign:"left",lineHeight:S().K_.UIRegular.desktop,...S().RC},messageContent:{whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:Xe,lineHeight:(0,Wi().ks)({device:c},"UIRegular"),paddingInlineEnd:8}})),[g,o,c,a]);return(0,B.jsx)("div",{style:{...a&&h.container,...h.messageContainer},children:(0,B.jsx)("div",{ref:s,style:h.clampedMessageContainer,children:(0,B.jsx)("div",{style:h.messageContent,children:p})})})}function po(e){const{rootStore:t,spaceId:i,environment:o,closeViewAllMenu:r,shortened:a,titleStyle:s,firstEdit:d,uniqueAutomations:l}=e,c=(0,b().tz)(),u=1===l.size,g=(0,n().K8)((()=>!k().dn.createChildStore(t,{table:Tt().yB,id:d.automation_id,spaceId:t.getSpaceId()}).getAlive()),[t,d]),v=(0,n().K8)((()=>{const e=new(k().Bv)(o,{id:d.automation_navigable_block_id,table:p().ev}).getRole();return!e||!(0,V().Tt)(e)}),[d,o]),h=(0,n().K8)((()=>{if(!(g&&u||v))return()=>{const e=d.automation_navigable_block_id,i=d.automation_id,n=k().Bv.createChildStore(t,{table:p().ev,id:e});if(!n)return;r&&r();const a=(0,Rt().Ay)({store:n,preferPublicLink:!1,pageVisitSource:m().y8.Notification});Mt().oo({environment:o,url:a,callback:async()=>await zt({environment:o,automationNavigableBlockStore:n,automationId:u?i:void 0,rootStore:t,source:"in_app_notification"})})}}),[o,u,d,t,r,g,v]),f=(0,n().K8)((()=>[...l].map((e=>{const o=t.getRecordStore(t,{table:Tt().yB,id:e,spaceId:i}),r=o.getRole();return(0,x().O9)(r)&&(0,V().Tt)(r)?o.getAlive()?o.getNameWithDefault(c):c.formatMessage(Bt().VS.automationDeletedName):c.formatMessage(Bt().VS.automationPrivateName)}))),[c,t,i,l]);return a?(0,B.jsx)("div",{style:{...s,display:"inline-flex"},children:(0,B.jsx)(ho,{handleAutomationNavigate:h,automationNames:f})}):(0,B.jsx)(b().sA,{id:"inAppNotificationAutomationActionTriggeredActivity.formattedHeaderMessage.automationTitle",defaultMessage:"{automationNameWrappedHeader} sent you a message",values:{automationNameWrappedHeader:(0,B.jsx)("div",{style:{...s,display:"inline-flex"},children:(0,B.jsx)(ho,{handleAutomationNavigate:h,automationNames:f})})}})}function ho(e){const{automationNames:t,handleAutomationNavigate:i}=e,o=(0,b().tz)(),r=t.at(0),n=t.length,a=n-2,s=o.formatList([...t.slice(0,2),a>0?o.formatMessage({defaultMessage:"{numRemainingAutomations} more",id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.tooltipNumRemainingAutomations"},{numRemainingAutomations:a}):void 0].filter(x().O9),{style:"long",type:"conjunction"}),d={defaultMessage:"{numAutomations, plural, one {{firstAutomationName}} other {{numAutomations} automations}}",values:{firstAutomationName:r,numAutomations:n},id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.automationName",description:"The display name for an automation."},l=e=>i?(0,B.jsx)(Nt().A,{...e,onClick:i,children:(0,B.jsx)(b().sA,{...d})}):(0,B.jsx)("div",{...e,children:(0,B.jsx)(b().sA,{...d,...e})});return 1===n?l():(0,B.jsx)(Be().A,{renderTooltip:e=>(0,B.jsx)("div",{...e,children:s}),render:e=>l(e)})}function fo(){const e=(0,u().IS)((e=>({icon:{height:12,width:12,fill:e.icon.secondary}})),[]);return(0,B.jsx)(it,{children:(0,eo().v)(e.icon)})}const yo=(0,o.createContext)({handleAnalyticsForPopupMenu:()=>{}});function bo(e){const{analyticsInfo:t,children:i}=e,r=(0,o.useCallback)((()=>$().mF(t)),[t]);return(0,B.jsx)(yo.Provider,{value:{handleAnalyticsForPopupMenu:r},children:i})}yo.displayName="InAppNotificationAutomationActionTriggeredAnalyticsContext";var xo=()=>i(1476),So=()=>i(638907);const Ao=function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{tab:d,notification:l}=o,u=(0,r().v3)(),g=(0,n().K8)((()=>t.getEdits()),[t]),m=(0,n().K8)((()=>(0,c().Ln)({edits:g,rootStore:i})),[g,i]),v=(0,n().K8)((()=>(0,c().bD)(m,{...(0,R()._m)()})),[m]),h=(0,n().K8)((()=>{const e=k().Bv.createChildStore(i,{table:p().ev,id:t.navigable_block_id});if(e.isDefined())return e}),[t,i]),f=(0,n().K8)((()=>Boolean(h&&(0,c().DU)({recordId:h.id,recordType:p().ev,tab:d,rootStore:i,environment:u}))),[h,d,i,u]),x=g[0],S=(0,n().K8)((()=>(0,c().j1)(x.from_user_id,i)),[x,i]),A=(0,n().K8)((()=>(0,c().j1)(x.to_user_id,i)),[x,i]);if(!(g.length>0&&S&&A&&h))return null;const j=(0,q().lR)(_().A.getIntl(),(0,q().D3)({table:y().oo,value:S}));return(0,B.jsx)(ot,{header:(0,B.jsx)(b().sA,{defaultMessage:"{authorPhrase} transferred {fromUserName}{fromUserNameEndsWithS, select, true {’} other {’s}} private pages to you",values:{authorPhrase:v,fromUserName:j,fromUserNameEndsWithS:"s"===j.slice(-1).toLowerCase()},id:"activity.privateContentTransferred.standardizedHeader.short"}),isPrivate:f,rootStore:i,notification:o.notification,isFirst:a,isLast:s,icon:(0,B.jsx)(be().H8,{authors:m,size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:void 0,...(0,oe().$5)({notification:l,activity:t,environment:u,tab:d})})};i(324989),i(244387);var jo=()=>i(890449),_o=()=>i(657723),Mo=()=>i(479813);function Ro(e){const{authorCount:t,authorPhrase:i,targetStore:o}=e;return(0,n().K8)((()=>o instanceof k().jg),[o])?(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} reacted in} other {{authorOrAuthors} reacted in}}",values:{numberOfAuthors:t,authorOrAuthors:i},id:"activity.reactionActivity.standardizedHeader.comment"}):(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} reacted to} other {{authorOrAuthors} reacted to}}",values:{numberOfAuthors:t,authorOrAuthors:i},id:"activity.reactionActivity.standardizedHeader.discussion"})}function ko(e){const{targetStore:t,source:i}=e,o=(0,r().v3)(),a=(0,r().Y0)(),s=(0,u().DP)(),d=(0,n().K8)((()=>bi({source:i,forReplyMenu:!1})),[i]),l=(0,u().IS)((e=>({commentText:{whiteSpace:"pre-wrap",wordBreak:"break-word",display:"inline",fontSize:14,color:e.text.primary,lineHeight:"22px"},newReaction:{borderWidth:1,borderStyle:"solid",borderColor:a.isMobile?"transparent":e.stroke.primary,borderRadius:6,boxShadow:a.isMobile?"unset":"0px 2px 4px 0px rgba(22, 29, 27, 0.02)"},avatarCommentReactionBarContainer:{...!a.isMobile&&{position:"relative"}},avatarAndCommentContainer:{display:"flex",flexDirection:"column"},commentContainer:{display:"flex",justifyContent:"space-between",gap:6,flexGrow:1}})),[a.isMobile]),c=(0,n().K8)((()=>{if(t&&t.table===jo().SN)return t}),[t]),g=(0,n().K8)((()=>{if(!c)return null;const e=ci().gp(c).getValue();if(!e)return null;const i=t.getSpaceId();if(!i)return null;const r=(0,li().Eh)({textValue:e,currentUserId:o.currentUser.id,getRecordModel:t.getRecordModel,highlightStyle:"text_only"});return(0,ei().S5)({environment:o,textValue:{value:r,spaceId:i},parentStore:t,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableHover:!0,disabled:!0,theme:s,emojiType:(0,Zt().FN)(o),katex:o.KatexStore.getKatex(),formulaValueTypes:[]})}),[t,o,s,c]);return(0,B.jsxs)("div",{style:l.avatarCommentReactionBarContainer,children:[c&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{style:l.avatarAndCommentContainer,children:(0,B.jsx)("div",{children:(0,B.jsx)(Ri,{commentStore:c})})}),(0,B.jsx)("div",{style:l.commentContainer,children:(0,B.jsx)("div",{style:S().RC,children:(0,B.jsx)("span",{style:l.commentText,children:g})})})]}),(0,B.jsx)(Qt().fj,{parentStore:t,discussionLocation:d,onReactionToggle:()=>{},newReactionStyle:l.newReaction})]})}var Io=()=>i(508024);function Co(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,B.jsx)(it,{children:(0,Io().P)(e.icon)})}var wo=()=>i(278760),Ko=()=>i(300659);function Bo(e){const{titledRecordStore:t,rootStore:i,activity:a,tabArgs:s}=e,d=i.getRecordModel,l=(0,n().K8)((()=>t.getModel()),[t]),c=(0,r().v3)(),{isMobile:g}=c.device,m=(0,n().K8)((()=>null==l?void 0:l.getRenderIcon({getRecordModel:d})),[l,d]),v=(0,o.useCallback)((o=>{const r=t.table;switch(r){case p().ev:(0,oe().Qo)({environment:c,activity:a,...s});break;case f().yK:(0,oe().Qo)({environment:c,activity:a,...s}),$i().L0({environment:c,teamStore:t,shouldScroll:!0}),Hi().A.setState({...Hi().A.state,open:!1});const n=e.notification;if(!n||n.read)break;(0,J().SQ)({event:o,context:J().y$.NotificationClick,callback:()=>{X().createAndCommit({userAction:"NotificationTitleCard.handleMarkAsRead",environment:c,canUndo:!0,perform:e=>{G().ZB({notification:n,rootStore:i,transaction:e,read:!0})}})}});break;default:(0,x().HB)(r)}}),[a,c,e.notification,i,s,t]),[h,b]=o.useState(!1),[A,j]=o.useState(!1),_=(0,u().IS)((e=>({container:{display:"flex",alignItems:"center",borderRadius:8,background:A?e.state.pressed:h?e.state.hover:"transparent",transition:`background ${Ve}`,marginTop:0,padding:12,boxShadow:"0px 1px 2px 0px "+("light"===e.mode?"rgba(0, 0, 0, 0.03)":"rgba(0, 0, 0, 0.12)"),border:"1px",borderStyle:"solid",borderColor:e.tint.regular,cursor:h?"pointer":"default"},icon:{...xe().kI,marginRight:10},activityTitle:{fontSize:14,marginRight:void 0!==m?3:0,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,verticalAlign:"top",textAlign:"left",lineHeight:S().K_.UIRegular.desktop,...S().RC,whiteSpace:"normal",...xe().a_},title:{maxWidth:"80%"},spacer:{flexGrow:1}})),[m,h,A]),M=(0,n().K8)((()=>{let e=[],i=0;const o=t.table;switch(o){case"block":const r=t.getCreatedByPointer();(null==r?void 0:r.table)===y().oo&&(e=[r.id]),i=Math.max(0,e.length-Gi);break;case"team":const n=(0,Vi().getTeamMemberCountAndSampleUserIds)(t);e=(null==n?void 0:n.sampleMemberUserIds)??[],i=Math.max(0,(null==n?void 0:n.memberCount)??0-Gi);break;default:(0,x().HB)(o)}const r=Math.min(e.length,Gi);return(0,B.jsx)(Yi,{userIds:e,remainingAvatarCount:i,shownAvatarCount:r,titledRecordStore:t,isMobile:g})}),[g,t]);return l?(0,B.jsxs)("div",{style:_.container,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onMouseDown:()=>j(!0),onMouseUp:()=>j(!1),onClick:v,children:[m&&(0,B.jsx)(Le().B,{disabled:!0,icon:m,isEmptyPage:!1,size:25,style:_.icon}),(0,B.jsx)("div",{style:_.title,children:(0,B.jsx)(De().A,{store:t,style:_.activityTitle})}),(0,B.jsx)("div",{style:_.spacer}),(0,B.jsx)("div",{children:M})]}):null}const To=o.memo(Bo);var qo=()=>i(455831),No=()=>i(421338),Po=()=>i(701270);function Lo(e){const{activity:t,isFirst:o,isLast:a,rootStore:s,tabArgs:d}=e,{notification:l,tab:u}=d,g=(0,r().v3)(),m=(0,b().tz)(),v=(0,n().K8)((()=>(0,Wt().W9)(t.getEdits())),[t]),p=(0,n().K8)((()=>{if(!v.length)return(0,c().Ln)({edits:v,rootStore:s});const e={id:v.at(0).trial_data.user_id,table:y().oo},t=(0,c().T9)(e,s);return t?[t]:(0,c().Ln)({edits:v,rootStore:s})}),[v,s]),h=(0,n().K8)((()=>(0,c().bD)(p,{...(0,R()._m)()})),[p]),{frontActorStore:f,backActorStore:x}=(0,n().K8)((()=>{const e=p.map((e=>k().sk.createChildStore(s,e)));return{frontActorStore:e.at(0),backActorStore:e.at(1)}}),[p,s]);if(!(v.length>0))return null;const{trial_data:{end_time:S,product:A,days:j}}=v[0],_=i(486826).c9.fromMillis(S);return(0,B.jsx)(ot,{header:(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{id:"activity.trialCreated.standardizedHeader.single",defaultMessage:"{authorOrAuthors} started a {days} day trial of <b>Notion {plan}</b>",values:{b:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,B.jsx)("b",{children:t})},days:j,plan:(0,qo().u2)({product:A,intl:m}),authorOrAuthors:h}})}),isFirst:o,isLast:a,isPrivate:!1,rootStore:s,notification:l,icon:f&&x?(0,B.jsx)(Ii,{frontActorStore:f,backActorStore:x}):(0,B.jsx)(be().H8,{authors:p,size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),url:void 0,showSnapshotButton:!1,...(0,oe().$5)({notification:l,activity:t,environment:g,tab:u}),children:(0,B.jsxs)(No().Y1,{direction:"vertical",align:"center-left",gap:12,children:[(0,B.jsx)(No().Y1,{direction:"horizontal",align:"center-left",gap:4,children:(0,B.jsx)(Po().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,B.jsx)(b().sA,{defaultMessage:"You now have access to all {product} plan features until {date}",id:"activityNotification.trialCreated.productName",values:{product:(0,qo().u2)({product:A,intl:m}),date:`${_.toFormat("MMM")} ${(0,i(689848).o4)(_.locale.substring(0,2),_.day,"c")} ${_.toFormat("yyyy")}`}})})}),(0,B.jsx)(kt().A,{onClick:()=>(0,i(844393).openSelfServeBusinessTrialExplorePlanModal)({openedFrom:"trial_created_activity"}),children:(0,B.jsx)(b().sA,{id:"activityNotification.trialCreated.learnMoreButton",defaultMessage:"Learn more"})})]})})}var Do=()=>i(982145),Eo=()=>i(647242),Oo=()=>i(397791);function zo(e){const{activity:t,isFirst:o,isLast:a,rootStore:s,tabArgs:d}=e,{tab:l,notification:g}=d,m=(0,u().IS)((e=>({container:{paddingTop:8},actionButton:{height:28,paddingLeft:12,paddingRight:12,boxShadow:e.shadow2XS,fontSize:14,color:e.text.primary},getActionButtonStyleWithoutOutline:{height:26,paddingLeft:8,paddingRight:8,color:e.text.primary,fontSize:14},approvalIcon:{width:12,height:12},approvalMessageContainer:{fontSize:12,color:e.text.secondary}})),[]),v=(0,r().v3)(),p=(0,i(997310).r)(),h=(0,b().tz)(),f=(0,i(898055).l)({spaceId:null==p?void 0:p.id}),y=(0,n().K8)((()=>(0,Wt().W9)(t.getEdits())),[t]),x=(0,n().K8)((()=>(0,c().Ln)({edits:y,rootStore:s})),[y,s]),{frontActorStore:A,backActorStore:j}=(0,n().K8)((()=>{const e=x.map((e=>k().sk.createChildStore(s,e)));return{frontActorStore:e.at(0),backActorStore:e.at(1)}}),[x,s]),_=y.length>0,M=(0,n().K8)((()=>{var e;const i=null===(e=y[0])||void 0===e?void 0:e.request_id;return s.getRecordModel({table:Do().GU,id:i,spaceId:t.space_id})}),[y,s,t.space_id]),R=(0,n().K8)((()=>M?M.getRequest():null),[M]),I=(0,n().K8)((()=>Eo().N8(null==f?void 0:f.subscription)),[f]),C=(0,i(397138).n)(),T=(0,n().K8)((()=>M?M.getReasonForRequest():null),[M]),q=(0,n().K8)((()=>M?M.getRequestStatus():null),[M]),N=(0,n().K8)((()=>{const e={enterprise:["business"]};const t=(0,Eo().d$)(f).filter((e=>(0,Do().rU)(e))),i=(0,P().R9)((0,P().sb)(t.flatMap((t=>e[t]??[]))),t);return!!R&&((0,Eo().eh)(f,R)||i.includes(R))}),[f,R]);if(!R)return null;const L=(0,i(545947).Y)(R,I,C);if(!M||!_||!L)return null;return(0,B.jsxs)(ot,{header:(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested an upgrade to the workspace} other {{authorOrAuthors} requested an upgrade to the workspace}}",id:"activity.upgradeRequested.standardizedHeader.single",values:{numberOfAuthors:x.length,authorOrAuthors:(0,B.jsx)(Ci,{authorsLength:x.length,frontActorStore:A,backActorStore:j,authorTextStyle:{fontWeight:S().Wy.medium}})}})}),isFirst:o,isLast:a,isPrivate:!1,rootStore:s,notification:g,icon:A&&j?(0,B.jsx)(Ii,{frontActorStore:A,backActorStore:j}):(0,B.jsx)(be().H8,{authors:x,size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),url:void 0,showSnapshotButton:!1,...(0,oe().$5)({notification:g,activity:t,environment:v,tab:l}),children:[(0,B.jsxs)(No().Y1,{direction:"vertical",align:"center-left",gap:8,children:[(0,B.jsxs)(No().Y1,{direction:"horizontal",align:"center-left",gap:4,children:["ai"===R&&(0,B.jsx)(Oo().I,{icon:i(226e3).v}),"ai"!==R&&(0,B.jsx)(Oo().I,{icon:i(338828).arrowInCircleUpFillIcon,color:"uiBluePrimary"}),(0,B.jsx)(Po().D,{styleName:"UIRegular-14px/Semibold",children:(0,B.jsx)(b().sA,{defaultMessage:"Notion {productName}",id:"activityNotification.upgradeRequestCreated.productName",values:{productName:qo().v0[R].defaultMessage}})})]}),(0,B.jsx)(Po().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",style:{marginBottom:4},children:T})]}),"pending"===q&&!N&&(0,B.jsx)("div",{style:m.container,children:(0,B.jsxs)(No().Y1,{direction:"horizontal",align:"center-left",gap:4,children:[(0,B.jsx)(w().g,{children:(0,B.jsx)(K().p,{size:"xs",isGray:!0,onClick:async()=>{await(0,i(153511).F)({environment:v,spaceStore:p,billingData:f,product:R,from:"upgrade_request_created_notification"})},style:m.actionButton,children:h.formatMessage(L)})}),(0,B.jsx)(w().g,{children:(0,B.jsx)(K().p,{size:"xs",isGray:!0,onClick:()=>{D().Ow({currentTab:"requests",openedFrom:"upgrade_request_created_notification",subtab:"upgrades"})},style:m.getActionButtonStyleWithoutOutline,children:(0,B.jsx)(b().sA,{defaultMessage:"View all",id:"activityNotification.upgradeRequestCreated.viewAllRequestsButton.label"})})})]})}),("approved"===q||"superseded"===q||N)&&(0,B.jsx)("div",{style:m.container,children:(0,B.jsxs)(No().Y1,{direction:"horizontal",align:"center-left",gap:4,style:m.approvalMessageContainer,children:[(0,Gt().b)(m.approvalIcon),(0,B.jsx)(b().sA,{id:"activityNotification.upgradeRequestCreated.requestApproved",defaultMessage:"This request has been approved."})]})})]})}var Fo=()=>i(231423),Uo=()=>i(72685),Wo=()=>i(771619),Vo=()=>i(141666);function Ho(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),g=(0,n().K8)((()=>t.getEdits()),[t]),v=g[0],p=Qo({rootStore:i,edit:v}),h=function(e){let{data:t,tab:i,rootStore:o}=e;const a=(0,r().v3)();return(0,n().K8)((()=>{if("block"!==(null==t?void 0:t.type))return!1;const e=t.blockStore.id;return(0,c().DU)({recordId:e,recordType:"block",tab:i,rootStore:o,environment:a})}),[t,a,o,i])}({data:p,tab:l,rootStore:i}),f=(0,n().K8)((()=>(0,c().Ln)({edits:g,rootStore:i})),[g,i]),y=(0,n().K8)((()=>{if("block"===(null==p?void 0:p.type))return p.blockStore}),[p]),b=(0,n().K8)((()=>{if(!y)return;const e=y.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:m().y8.Notification}):void 0}),[y,i.getRecordModel]),x=(0,n().K8)((()=>t.navigable_block_id),[t]);if(0===g.length||!p)return null;const S=0===f.filter(q().L_).length,A=S?void 0:(0,B.jsx)(be().H8,{authors:f,size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1});return(0,B.jsxs)(ot,{header:(0,B.jsx)(Go,{data:p,authors:f,isFromBot:S}),hidePageTitle:!0,isFirst:a,isLast:s,isPrivate:h,rootStore:i,navigableBlockId:x,notification:d,icon:A,showSnapshotButton:!1,url:b,...(0,oe().$5)({notification:d,environment:u,tab:l,activity:t}),children:[(0,B.jsx)(Yo,{...e,edit:v}),(0,B.jsx)($o,{data:p,rootStore:i,activity:t,tabArgs:o})]})}function $o(e){var t;const{data:i,rootStore:o,activity:r,tabArgs:n}=e,a=(0,u().IS)((e=>({group:{color:e.text.secondary,fontSize:14},titleCardWrapper:{display:"contents",pointerEvents:"none"}})),[]);switch(i.type){case"block":return(0,B.jsx)(w().g,{children:(0,B.jsx)(To,{titledRecordStore:i.blockStore,rootStore:o,activity:r,tabArgs:n})});case"group":return(0,B.jsx)("div",{style:a.group,children:(0,B.jsx)(b().sA,{defaultMessage:"You will now get notifications when @{groupName} is mentioned",id:"activity.userInvitedActivity.groupInviteExplanation",values:{groupName:null===(t=i.group)||void 0===t?void 0:t.name}})});case"space":return(0,B.jsx)(w().g,{children:(0,B.jsx)("div",{style:a.titleCardWrapper,children:(0,B.jsx)(Xi,{tabArgs:n,titledRecordStore:i.spaceStore,rootStore:o,activity:r})})});default:(0,x().HB)(i)}}function Go(e){var t,i;const{data:o,authors:r,isFromBot:a}=e,s=(0,n().K8)((()=>(0,c().bD)(r,{...(0,R()._m)()})),[r]);switch(o.type){case"block":return a?(0,B.jsx)(b().sA,{defaultMessage:"You were invited to a page",id:"activity.userInvitedActivityByBot.standardizedHeader.redesign"}):(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a page} other {{authorOrAuthors} invited you to a page}}",values:{numberOfAuthors:r.length,authorOrAuthors:s},id:"activity.userInvitedActivity.standardizedHeader.redesign"});case"group":return a?(0,B.jsx)(b().sA,{defaultMessage:"You were added to @{groupName}",values:{groupName:null===(t=o.group)||void 0===t?void 0:t.name},id:"activity.userInvitedActivityGroupIdByBot.standardizedHeader.redesign"}):(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to @{groupName}} other {{authorOrAuthors} added you to @{groupName}}}",values:{numberOfAuthors:r.length,authorOrAuthors:s,groupName:null===(i=o.group)||void 0===i?void 0:i.name},id:"activity.userInvitedActivityGroupId.standardizedHeader.redesign"});case"space":return a?(0,B.jsx)(b().sA,{defaultMessage:"You were invited to a workspace",id:"activity.userInvitedActivityOtherInviteByBot.standardizedHeader.redesign"}):(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a workspace} other {{authorOrAuthors} invited you to a workspace}}",values:{numberOfAuthors:r.length,authorOrAuthors:s},id:"activity.userInvitedActivityOtherInvite.standardizedHeader.redesign"});default:(0,x().HB)(o)}}function Yo(e){const{edit:t,activity:i,rootStore:o}=e,r=(0,u().IS)((()=>({redesignedInviteMessage:{fontSize:14,paddingTop:8,paddingBottom:8}})),[]),a=Qo({rootStore:o,edit:t}),s=(0,n().K8)((()=>parseInt(i.end_time)),[i]),d=(0,n().K8)((()=>{if("block"!==(null==a?void 0:a.type))return;const e=a.blockStore;return null!=e&&e.isDefined()?e.getModel():void 0}),[a]),l=(0,n().K8)((()=>{if(!d)return{isValid:!1};const e=d&&(0,Wo()._T)(d,i);if(!e)return{isValid:!1};const t=o.getRecordModel({table:Uo().Yx,id:e,spaceId:i.space_id});return t&&t.getMessage()&&t.getCreatedTime()<=s+5*Vo().Xb?{isValid:!0,message:t.getMessage()}:{isValid:!1}}),[i,s,d,o]);return null!=l&&l.isValid?(0,B.jsx)("div",{style:r.redesignedInviteMessage,children:l.message}):null}function Qo(e){let{rootStore:t,edit:i}=e;return(0,n().K8)((()=>{if(i)return i.navigable_block_id?{type:"block",blockStore:k().Bv.createChildStore(t,{table:p().ev,id:i.navigable_block_id})}:i.permission_group_id?{type:"group",group:(0,Fo().$I)({spaceId:i.space_id,permissionGroupId:i.permission_group_id,getRecordValue:t.getRecordValue})}:{type:"space",spaceStore:k().SL.createChildStore(t,{table:h().NX,id:i.space_id})}}),[i,t])}var Xo=()=>i(65866);function Jo(e){const{mentionedProperty:t,authorPhrase:i,authors:o}=e;switch(t){case Xo().yx.Assign:return(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} assigned you a task} other {{authorOrAuthors} assigned you a task}}",values:{numberOfAuthors:o.length,authorOrAuthors:i},id:"activity.mentionTaskActivity.standardizedHeader"});case Xo().K4.People:return(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in} other {{authorOrAuthors} mentioned you in}}",values:{numberOfAuthors:o.length,authorOrAuthors:i},id:"activity.mentionProjectActivity.standardizedHeader.short"});default:return(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in} other {{authorOrAuthors} mentioned you in}}",values:{numberOfAuthors:o.length,authorOrAuthors:i},id:"activity.mentionActivity.standardizedHeader.short"})}}var Zo=()=>i(822619),er=()=>i(21164),tr=()=>i(86280);function ir(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,B.jsx)(it,{children:(0,Zo().E)(e.icon)})}const or={"block-property-edited":function(e){const{activity:t,rootStore:o,tabArgs:a,isFirst:s,isLast:d}=e,{tab:l,notification:u}=a,g=(0,n().K8)((()=>(0,Wt().W9)(t.getEdits())),[t]),v=g.length>0,h=(0,n().K8)((()=>k().Bv.createChildStore(o,{table:p().ev,id:g[0].navigable_block_id})),[o,g]),f=(0,n().K8)((()=>{const e=h.getModel();if(e)return e.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:m().y8.Notification})}),[h,o]),y=(0,n().K8)((()=>(0,c().Ln)({edits:g,rootStore:o})),[g,o]),x=(0,r().v3)(),S=(0,n().K8)((()=>(0,c().bD)(y,{...(0,R()._m)()})),[y]),A=(0,n().K8)((()=>(0,c().DU)({recordId:h.id,recordType:"block",tab:l,rootStore:o,environment:x})),[h,l,o,x]);if(!(0,n().K8)((()=>h.isDefined()),[h])||!v)return null;const j=new Set;return g.forEach((e=>{Object.keys(e.property_updates).forEach((e=>{j.add(e)}))})),(0,B.jsx)(ot,{header:j.size>1?(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated properties} other {{authorOrAuthors} updated properties}}",id:"activity.blockEdited.standardizedHeader.multiple",values:{numberOfAuthors:y.length,authorOrAuthors:S}})}):(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated a property} other {{authorOrAuthors} updated a property}}",id:"activity.blockEdited.standardizedHeader.single",values:{numberOfAuthors:y.length,authorOrAuthors:S}})}),isFirst:s,isLast:d,isPrivate:A,rootStore:o,navigableBlockId:h.id,notification:u,icon:(0,B.jsx)(be().H8,{authors:y,size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:f,...(0,oe().$5)({notification:u,activity:t,environment:x,tab:l}),children:(0,B.jsx)(i(161742).A,{visible:5,items:g.map(((e,t)=>(0,B.jsx)(Vt().A,{edit:e,rootStore:o},t)))})})},"user-mentioned":function(e){const{activity:t,rootStore:o,tabArgs:a,isFirst:s,isLast:d}=e,{tab:l,notification:u}=a,g=(0,r().v3)(),v=(0,n().K8)((()=>t.getEdits()),[t]),h=v.length>0,f=v[0],y=k().Bv.createChildStore(o,{table:p().ev,id:f.navigable_block_id}),b=(0,n().K8)((()=>y.isDefined()),[y]),x=(0,n().K8)((()=>k().xq.createChildStore(o,{table:i(644353).kz,id:t.id,spaceId:t.space_id}).getStandardizedMentionedPropertyURI()),[t,o]),S=(0,n().K8)((()=>{const e=k().Bv.createChildStore(o,{table:p().ev,id:t.mentioned_block_id}).getModel();return null==e?void 0:e.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:m().y8.Notification})}),[t,o]),A=(0,n().K8)((()=>(0,c().Ln)({edits:v,rootStore:o})),[v,o]),j=(0,n().K8)((()=>(0,c().bD)(A,{...(0,R()._m)()})),[A]),_=(0,n().K8)((()=>(0,c().DU)({recordId:y.id,recordType:"block",tab:l,rootStore:o,environment:g})),[y,l,o,g]);return h&&b&&S?(0,B.jsx)(ot,{header:(0,B.jsx)(Jo,{mentionedProperty:x,authorPhrase:j,authors:A}),isFirst:s,isLast:d,isPrivate:_,rootStore:o,navigableBlockId:y.id,notification:u,icon:(0,B.jsx)(be().H8,{authors:A,size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:S,...(0,oe().$5)({notification:u,activity:t,environment:g,tab:l}),children:(0,B.jsx)(Vt().A,{edit:f,rootStore:o,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):null},commented:Bi,"user-invited":o.memo(Ho),reminder:function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),g=(0,n().K8)((()=>t.getEdits()),[t]),v=g.length>0,h=k().Bv.createChildStore(i,{table:p().ev,id:g[0].navigable_block_id}),f=(0,n().K8)((()=>h.isDefined()),[h]),y=(0,n().K8)((()=>{const e=k().Bv.createChildStore(i,{table:p().ev,id:t.reminder_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:m().y8.Notification})}),[t,i]),x=(0,n().K8)((()=>(0,c().DU)({recordId:h.id,recordType:p().ev,tab:l,rootStore:i,environment:u})),[h,l,i,u]);return v&&f&&y?(0,B.jsx)(ot,{header:(0,B.jsx)("span",{style:{fontWeight:S().Wy.medium},children:(0,B.jsx)(b().sA,{defaultMessage:"Reminder",id:"activity.reminderInActivity.header.short"})}),isFirst:a,isLast:s,isPrivate:x,rootStore:i,navigableBlockId:h.id,notification:d,icon:(0,B.jsx)(Co,{}),showSnapshotButton:!1,url:y,...(0,oe().$5)({notification:d,activity:t,environment:u,tab:l}),children:(0,B.jsx)(Vt().A,{edit:g[0],rootStore:i})}):null},"email-edited":Ti,"access-requested":mt,"access-request-resolved":ht,"team-membership-edited":function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),g=(0,n().K8)((()=>t.getEdits()),[t]),v=g.length>0,p=(0,n().K8)((()=>(0,c().Ln)({edits:g,rootStore:i})),[g,i]),h=(0,n().K8)((()=>(0,c().bD)(p,{...(0,R()._m)()})),[p]),y=g[0],x=k().h4.createChildStore(i,{table:f().yK,id:y.team_id}),S=(0,n().K8)((()=>x.isDefined()),[x]),A=(0,n().K8)((()=>{if((0,Ko().D)({isMobileNative:u.device.isMobileNative}))return(0,wo().a)({teamId:y.team_id,spaceId:x.getSpaceId(),pageVisitSource:m().y8.Notification})}),[y.team_id,u,x]);return v&&S?(0,B.jsx)(ot,{header:(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a teamspace} other {{authorOrAuthors} invited you to a teamspace}}",values:{numberOfAuthors:p.length,authorOrAuthors:h},id:"activity.userInvitedToTeamActivity.standardizedHeader"}),isFirst:a,isLast:s,isPrivate:!1,rootStore:i,notification:d,icon:(0,B.jsx)(be().H8,{authors:p,size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:A,...(0,oe().$5)({notification:d,activity:t,environment:u,tab:l}),children:(0,B.jsx)(w().g,{children:(0,B.jsx)(To,{titledRecordStore:x,rootStore:i,activity:t,tabArgs:o,notification:d})})}):null},"private-content-transferred":Ao,"permission-group-mentioned":function(e){const{activity:t,rootStore:i,isFirst:o,isLast:a,tabArgs:s}=e,{tab:d,notification:l}=s,u=(0,r().v3)(),g=(0,n().K8)((()=>t.getEdits()),[t]),v=g.length>0,h=g[0],f=k().Bv.createChildStore(i,{table:p().ev,id:h.navigable_block_id}),y=(0,n().K8)((()=>f.isDefined()),[f]),x=(0,n().K8)((()=>{const e=k().Bv.createChildStore(i,{table:p().ev,id:t.mentioned_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:m().y8.Notification})}),[t,i]),S=(0,n().K8)((()=>(0,c().Ln)({edits:t.getEdits(),rootStore:i})),[t,i]),A=(0,n().K8)((()=>(0,c().bD)(S,{...(0,R()._m)()})),[S]),j=(0,n().K8)((()=>(0,c().DU)({recordId:f.id,recordType:p().ev,tab:d,rootStore:i,environment:u})),[f,d,i,u]);return v&&y&&x?(0,B.jsx)(ot,{header:(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned your group} other {{authorOrAuthors} mentioned your group}}",values:{numberOfAuthors:S.length,authorOrAuthors:A},id:"activity.groupMentionActivity.standardizedHeader.short"})}),isFirst:o,isLast:a,isPrivate:j,rootStore:i,navigableBlockId:f.id,notification:l,icon:(0,B.jsx)(be().H8,{authors:S,size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:x,...(0,oe().$5)({notification:l,activity:t,environment:u,tab:d}),children:(0,B.jsx)(Vt().A,{edit:h,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):null},"team-mentioned":function(e){const{activity:t,rootStore:i,isFirst:o,isLast:a,tabArgs:s}=e,{tab:d,notification:l}=s,u=(0,r().v3)(),g=(0,n().K8)((()=>t.getEdits()),[t]),v=g.length>0,h=g[0],f=(0,n().K8)((()=>k().Bv.createChildStore(i,{table:p().ev,id:h.navigable_block_id})),[h,i]),y=(0,n().K8)((()=>f&&f.isDefined()),[f]),x=(0,n().K8)((()=>{const e=k().Bv.createChildStore(i,{table:p().ev,id:t.mentioned_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:m().y8.Notification})}),[t,i]),S=(0,n().K8)((()=>(0,c().Ln)({edits:t.getEdits(),rootStore:i})),[t,i]),A=(0,n().K8)((()=>(0,c().bD)(S,{...(0,R()._m)()})),[S]),j=(0,n().K8)((()=>(0,c().DU)({recordId:f.id,recordType:p().ev,tab:d,rootStore:i,environment:u})),[f,d,i,u]);return v&&y&&x?(0,B.jsx)(ot,{header:(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned your teamspace} other {{authorOrAuthors} mentioned your teamspace}}",values:{numberOfAuthors:S.length,authorOrAuthors:A},id:"activity.teamMentionActivity.standardizedHeader.short"})}),isFirst:o,isLast:a,isPrivate:j,rootStore:i,navigableBlockId:f.id,notification:l,icon:(0,B.jsx)(be().H8,{authors:S,size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:x,...(0,oe().$5)({notification:l,activity:t,environment:u,tab:d}),children:(0,B.jsx)(Vt().A,{edit:h,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):null},"verification-expired":function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{tab:d,notification:l}=o,g=(0,r().v3)(),v=(0,n().K8)((()=>k().Bv.createChildStore(i,{table:p().ev,id:t.navigable_block_id})),[t,i]),h=(0,n().K8)((()=>v.isDefined()),[v]),f=(0,n().K8)((()=>{const e=v.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:m().y8.Notification})}),[v,i]),y=(0,n().K8)((()=>t.collection_id?k().md.createChildStore(i,{table:er().Vl,id:t.collection_id,spaceId:t.space_id}):void 0),[t,i]),x=(0,n().K8)((()=>Boolean(null==y?void 0:y.isPageTreeCollection())),[y]),A=(0,n().K8)((()=>{let e;if(x){const t=null==y?void 0:y.getSchema();e=(t?Object.keys(t):[]).find((e=>{var i;return!!t&&"verification"===(null===(i=t[e])||void 0===i?void 0:i.type)}))}else e=tr()._e.Verification;let t=(0,B.jsx)(b().sA,{id:"Activity.author.unknown",defaultMessage:"Unknown"});if(e){const o=v.getPropertyValue(e),r=(0,tr().U1)(o);if(r){const e=r[0],o=(0,c().T9)(e,i);o&&o.asActor&&(t=(0,c().bD)([o],{...(0,R()._m)()}))}}return t}),[v,y,x,i]),j=(0,n().K8)((()=>(0,c().DU)({recordId:v.id,recordType:"block",tab:d,rootStore:i,environment:g})),[v,d,i,g]),{activityStartTimestamp:_,activityEndTimestamp:M}=(0,n().K8)((()=>({activityStartTimestamp:parseInt(t.start_time),activityEndTimestamp:parseInt(t.end_time)})),[t]),I=(0,u().IS)((e=>({verificationMessage:{fontSize:14,color:e.text.secondary}})),[]);return h?(0,B.jsx)(ot,{header:x?(0,B.jsx)(b().sA,{defaultMessage:"<medium>Wiki verification</medium> expired",id:"activity.verificationExpired.header.short",values:{medium:e=>(0,B.jsx)("span",{style:{fontWeight:S().Wy.medium},children:e})}}):(0,B.jsx)(b().sA,{defaultMessage:"<medium>Page verification</medium> expired",id:"activity.verificationExpired.page.header.short",values:{medium:e=>(0,B.jsx)("span",{style:{fontWeight:S().Wy.medium},children:e})}}),isFirst:a,isLast:s,isPrivate:j,rootStore:y??i,navigableBlockId:v.id,notification:l,icon:(0,B.jsx)(ir,{}),showSnapshotButton:!1,url:f,...(0,oe().$5)({notification:l,activity:t,environment:g,tab:d}),children:(0,B.jsx)("div",{style:I.verificationMessage,children:_&&M?(0,B.jsx)(b().sA,{defaultMessage:"Last verified by {person} from {startDate} to {endDate}",values:{person:A,startDate:(0,Re().DG)(_),endDate:(0,Re().DG)(M)},id:"activity.verificationExpired.contentWithTimestamp"}):(0,B.jsx)(b().sA,{defaultMessage:"Last verified by {person}",values:{person:A},id:"activity.verificationExpired.contentWithoutTimestamp"})})}):null},"export-completed":function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{tab:d,notification:l}=o,c=(0,r().v3)(),{edits:g}=(0,n().K8)((()=>({edits:t.getEdits()})),[t]),m=(0,u().IS)((e=>({newContainer:{paddingTop:12,paddingBottom:4},actionButton:(0,xe().Ei)(e)})),[]),v=(0,B.jsx)(b().sA,{defaultMessage:"Your workspace export is ready",id:"activity.exportCompleted.header"}),p=(0,B.jsx)(Ni().Ye,{style:{fontSize:12},children:(0,B.jsx)(b().sA,{defaultMessage:"The download link will expire in 7 days.",id:"activity.exportCompleted.downloadLink"})});return(0,B.jsxs)(ot,{header:v,isFirst:a,isLast:s,isPrivate:!0,rootStore:i,notification:l,icon:(0,B.jsx)(Pi,{}),showSnapshotButton:!1,url:void 0,...(0,oe().$5)({notification:l,activity:t,environment:c,tab:d}),children:[p,(0,B.jsx)("div",{style:m.newContainer,children:(0,B.jsx)(K().p,{isGray:!0,size:"xs",onClick:()=>{window.open(g[0].link,"_blank")},style:m.actionButton,children:(0,B.jsx)(b().sA,{defaultMessage:"Download",id:"activity.actions.exportCompleted.download"})})})]})},"import-completed":function(e){var t;const{activity:a,rootStore:s,tabArgs:d,isFirst:l,isLast:c}=e,{tab:g,notification:v,source:h}=d,f=(0,r().v3)(),{edits:y}=(0,n().K8)((()=>({edits:a.getEdits()})),[a]),x=null===(t=y[0])||void 0===t?void 0:t.teamspace_id,S=(0,Vi().useTeamsFromCache)(),A=(0,o.useMemo)((()=>S.find((e=>e.id===x))),[x,S]),j=(0,n().K8)((()=>null==A?void 0:A.getName()),[A]),_=f.device.isMobile,M=(0,u().IS)((e=>({newContainerLinkBox:{...(0,xe().aY)({source:h,isMobile:_}),display:"flex",alignItems:"center",fontSize:Wi().ny(f,"UIRegular"),paddingTop:2,paddingBottom:6,marginBottom:0,paddingLeft:0,width:"100%"}})),[_,h,f]);if(!y.length)return(0,B.jsx)(B.Fragment,{});const{import_source:R,import_status:I,version:C,landing_page:w,collection_page_ids:K}=y[0],T=(0,B.jsx)(b().sA,{defaultMessage:"Your {importSource} import has failed",id:"activity.importFailed.header",values:{importSource:R,importStatus:I}}),q=(0,B.jsx)(b().sA,{defaultMessage:"Your {importSource} import was successful",id:"activity.importSuccess.header",values:{importSource:R,importStatus:I}}),N=(0,B.jsx)(Ni().Ye,{style:{fontSize:Wi().ny(f,"UISmall")},children:(0,B.jsx)(b().sA,{defaultMessage:"View projects and tasks in Notion",id:"activity.importCompleted.projects.redirect"})}),P=(0,B.jsx)(Ni().Ye,{style:{fontSize:Wi().ny(f,"UISmall")},children:(0,B.jsx)(b().sA,{defaultMessage:"View boards in Notion",id:"activity.importCompleted.boards.redirect"})}),L=(0,B.jsx)(Ni().Ye,{style:{fontSize:Wi().ny(f,"UISmall")},children:(0,B.jsx)(b().sA,{defaultMessage:"View import logs",id:"activity.importCompleted.loggerPage.redirect"})}),D=(0,zi().A)({pageId:w,pageVisitSource:m().y8.Import});let E="successful"===I?q:T,O=(0,B.jsx)(Ni().Ye,{children:(0,B.jsx)(oi().A,{href:D,innerStyle:M.newContainerLinkBox,children:"successful"===I?"Monday"===R&&"v2"===C?P:N:L})});const z="Jira"===R?(0,B.jsx)(Zi,{}):(0,B.jsx)(Ji,{}),F=null==K?void 0:K[0];if("Jira"===R){const{headerComponent:e,bodyComponent:t}=(()=>{let e,t;if(A&&"successful"===I&&(e=(0,B.jsxs)("div",{children:[(0,B.jsx)(b().sA,{defaultMessage:"Your Jira projects and tasks have been synced to",id:"activity.importCompleted.jira.success.header"})," ",(0,B.jsx)("div",{style:{display:"inline-block",position:"relative"},children:(0,B.jsx)(i(424339).x,{disabled:!0,store:A,size:20})})," ",(0,B.jsx)("span",{children:j})]})),F){const e=k().Bv.createChildStore(s,{id:F.projectCollectionPageId,spaceId:s.id,table:p().ev}),i=k().Bv.createChildStore(s,{id:F.taskCollectionPageId,spaceId:s.id,table:p().ev});t=(0,B.jsxs)("div",{style:{paddingRight:12},children:[(0,B.jsx)(Xi,{titledRecordStore:e,rootStore:s,activity:a,tabArgs:d}),(0,B.jsx)("div",{style:{height:6}}),(0,B.jsx)(Xi,{titledRecordStore:i,rootStore:s,activity:a,tabArgs:d})]})}return{headerComponent:e,bodyComponent:t}})();t&&(O=t),e&&(E=e)}return(0,B.jsx)(ot,{url:void 0,header:E,isPrivate:!0,isFirst:l,isLast:c,rootStore:s,notification:v,icon:z,showSnapshotButton:!1,...(0,oe().$5)({notification:v,activity:a,environment:f,tab:g}),children:O})},"in-app-notification-automation-action-triggered":function(e){const{activity:t,tabArgs:i}=e,{tab:o,notification:a}=i,s=(0,r().v3)(),d=(0,n().K8)((()=>t.getEdits()),[t]),l=d.length>0,c={tab:o,notificationId:null==a?void 0:a.id,environment:s,alreadyRead:Boolean(null==a?void 0:a.read),activity:t},g=(0,u().IS)((e=>({notificationContainer:{paddingBlock:"8px 4px",display:"flex",flexDirection:"column",rowGap:8}})),[]);return l?(0,B.jsx)(bo,{analyticsInfo:c,children:(0,B.jsx)(uo,{...e,edits:d,style:g.notificationContainer})}):null},"no-conflicts-found":function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{tab:d,notification:l}=o,c=(0,r().v3)(),u=(0,b().tz)(),g=(0,n().K8)((()=>t.navigable_block_id),[t]),v=(0,n().K8)((()=>{const e=So().B.createChildStore(i,{table:p().ev,id:t.navigable_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:m().y8.Notification})}),[t,i]),h=(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{defaultMessage:"<b>{author}</b> did not find conflicts",id:"activity.noConflictsFound.header",values:{author:xo().px.getDisplayName(u),b:e=>(0,B.jsx)("span",{style:{fontWeight:S().Wy.semibold},children:e})}})});return v?(0,B.jsx)(ot,{header:h,isFirst:a,isLast:s,isPrivate:!0,rootStore:i,navigableBlockId:g,notification:l,icon:(0,B.jsx)(be().H8,{authors:[xo().px],size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:v,...(0,oe().$5)({notification:l,activity:t,environment:c,tab:d})}):null},"automation-typecheck-error-raised":function(e){const{rootStore:t,activity:i,isLast:a,tabArgs:s,isFirst:d}=e,{tab:l,notification:g}=s,v=(0,b().tz)(),h=(0,r().v3)(),f=(0,n().K8)((()=>i.getEdits()),[i]),y=f.at(0),A=(0,u().IS)((e=>({notificationContainer:{paddingTop:4,display:"flex",flexDirection:"column",rowGap:8},editAutomation:{marginTop:8,height:26,fontWeight:S().Wy.medium},messageContainer:{alignItems:"center",color:e.text.secondary,display:"flex",fontSize:Xe,justifyContent:"space-between",lineHeight:S().K_.UIRegular.desktop,paddingInlineEnd:12,position:"relative"},headerName:{fontWeight:S().Wy.medium,display:"inline-flex"}})),[]),j=(0,o.useMemo)((()=>new Set(f.map((e=>e.automation_id)))),[f]),_=(0,n().K8)((()=>{if(!(0,x().O9)(y))return!1;return!k().dn.createChildStore(t,{table:Tt().yB,id:y.automation_id,spaceId:t.getSpaceId()}).getAlive()}),[t,y]),{handleNavigateToAutomation:M,navigableBlockStore:R,navigableBlockUrl:I}=function(e){let{edit:t,rootStore:i,uniqueAutomationIds:o}=e;const a=(0,r().v3)(),s=1===o.size,d=(0,n().K8)((()=>{if(!(0,x().O9)(t))return!1;return!k().dn.createChildStore(i,{table:Tt().yB,id:t.automation_id,spaceId:i.getSpaceId()}).getAlive()}),[i,t]),l=(0,n().K8)((()=>{if((0,x().O9)(t))return new(k().Bv)(a,{id:t.automation_navigable_block_id,table:p().ev})}),[t,a]),c=(0,n().K8)((()=>{if(!(0,x().O9)(l))return!0;const e=l.getRole();return!e||!(0,V().Tt)(e)}),[l]),u=(0,n().K8)((()=>{if((0,x().O9)(l))return(0,Rt().Ay)({store:l,preferPublicLink:!1,pageVisitSource:m().y8.Notification})}),[l]),g=(0,n().K8)((()=>c||!(0,x().O9)(t)?()=>{}:()=>{const e=t.automation_id;l&&u&&((0,qt().u4)({environment:a,event:{eventName:"click_automation_typecheck_error_notification",eventProperties:{block_id:l.id,automation_id:e}}}),Mt().oo({environment:a,url:u,callback:async()=>await zt({environment:a,automationNavigableBlockStore:l,automationId:s&&!d?e:void 0,rootStore:i,source:"automation_typecheck_error_raised_notification"})}))}),[d,s,c,t,l,u,a,i]);return{handleNavigateToAutomation:g,navigableBlockStore:l,navigableBlockUrl:u}}({edit:y,rootStore:t,uniqueAutomationIds:j}),C=(0,n().K8)((()=>(0,c().DU)({recordId:null==R?void 0:R.id,recordType:p().ev,tab:l,rootStore:t,environment:h})),[R,l,t,h]),w=(0,n().K8)((()=>{const e=j.values().next().value;if(e){return t.getRecordStore(t,{table:Tt().yB,id:e,spaceId:i.spaceId}).getNameWithDefault(v)}return""}),[i.spaceId,v,t,j]),K=(0,n().K8)((()=>[...j].map((e=>{const o=t.getRecordStore(t,{table:Tt().yB,id:e,spaceId:i.spaceId}),r=o.getRole();return(0,x().O9)(r)&&(0,V().Tt)(r)?o.getAlive()?o.getNameWithDefault(v):v.formatMessage(Bt().VS.automationDeletedName):v.formatMessage(Bt().VS.automationPrivateName)}))),[v,t,i,j]),T=(0,o.useCallback)((e=>{(0,J().SQ)({event:e,context:J().y$.NotificationClick,callback:()=>{X().createAndCommit({userAction:"AutomationTypecheckErrorRaisedActivity.viewError",environment:h,canUndo:!0,perform:e=>{G().ZB({notification:g,rootStore:t,transaction:e,read:!0})}}),M(),$().K4({tab:l,notificationId:null==g?void 0:g.id,environment:h,alreadyRead:Boolean(null==g?void 0:g.read),activity:i})}})}),[i,h,M,g,t,l]);if(!(0,x().O9)(R)||!(0,x().O9)(y)||0===f.length)return null;const q=(0,B.jsx)("div",{style:A.headerName,children:(0,B.jsx)(Ft,{handleAutomationNavigate:T,automationNames:K})}),N=_&&1===j.size;return(0,B.jsx)(ot,{header:(0,B.jsx)(b().sA,{id:"AutomationTypecheckErrorRaisedActivity.formattedHeaderMessage.automationTitle",defaultMessage:"{automationNames} {numAutomationNames, plural, one {is} other {are}} invalid",values:{numAutomationNames:j.size,automationNames:q}}),isFirst:d,isLast:a,isPrivate:C,rootStore:t,navigableBlockId:R.id,notification:g,icon:(0,B.jsx)(Ut,{automationName:w}),showSnapshotButton:!1,url:I,...(0,oe().$5)({notification:g,activity:i,environment:h,tab:l}),children:(0,B.jsx)("div",{style:A.notificationContainer,onClick:T,children:!N&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{style:A.messageContainer,children:(0,B.jsx)(b().sA,{id:"AutomationTypecheckErrorRaisedActivity.formattedHeaderMessage.automationMessage",defaultMessage:"Resolve any errors or remove failing steps to enable {numAutomationNames, plural, one {this automation} other {these automations}}",values:{numAutomationNames:j.size}})}),(0,B.jsx)("div",{children:(0,B.jsx)(kt().A,{style:A.editAutomation,onClick:T,size:"sm",children:(0,B.jsx)(b().sA,{id:"AutomationTypecheckErrorRaisedActivity.editAutomation.automationMessage",defaultMessage:"Edit automation"})})})]})})})},reacted:function(e){const{activity:t,tabArgs:i,rootStore:o,isFirst:a,isLast:s}=e,{source:l,tab:u,notification:g}=i,v=(0,n().K8)((()=>t.getEdits()),[t]),h=(0,r().v3)(),f=(0,n().K8)((()=>{const e=t.discussion_id;if(!v||!t.discussion_id)return;const{reacted_comment_id:i}=v[0],r=i?jo().SN:d().$Y,n=i??e;return o.getRecordStore(o,{table:r,id:n,spaceId:t.space_id})}),[v,t,o]),y=(0,n().K8)((()=>{if(f){if(f.table===jo().SN){const e=f.getParentStore(),t=null==e?void 0:e.getParentPointer();if(!t)return;return k().Bv.createChildStore(o,t)}if(f.table===d().$Y){const e=f.getParentPointer();if(!e)return;return k().Bv.createChildStore(o,e)}}}),[f,o]),b=(0,n().K8)((()=>{const e=null==y?void 0:y.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,y]),A=(0,n().K8)((()=>{var e;if(y)return null===(e=y.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:o.getRecordModel,discussionId:t.discussion_id,pageVisitSource:m().y8.Notification})}),[y,o,t]),j=(0,n().K8)((()=>{if(!f)return[];const e=(f.getReactionPointers()??[]).map((e=>k().sk.createChildStore(o,e)));let t;var i;f instanceof k().jg&&(t=null===(i=f.getCreatedById)||void 0===i?void 0:i.call(f));if(f instanceof k().cc){const e=f.getParentStore();t=null==e?void 0:e.getCreatedById()}const r=(0,P().hS)(e.flatMap((e=>{var t;return(null===(t=e.getActorPointers())||void 0===t?void 0:t.filter(x().O9))??[]})).filter((e=>e.id!==t)),"id"),n=new Map;null==v||v.forEach((e=>{"reaction-created"===e.type&&e.authors&&e.authors.forEach((t=>{const i=n.get(t.id)??0;e.timestamp>i&&n.set(t.id,e.timestamp)}))}));return r.sort(((e,t)=>{const i=n.get(e.id)??0;return(n.get(t.id)??0)-i})).map((e=>k().sk.createChildStore(o,e)))}),[f,o,v]),{frontActorStore:_,backActorStore:M}=(0,n().K8)((()=>{const e=h.currentUser.id;if(!e||0===j.length)return{frontActorStore:void 0,backActorStore:void 0};const i=j.map((e=>k().sk.createChildStore(o,{table:e.table,id:e.id,spaceId:t.space_id})));return(0,c()._S)({authorStores:i,currentUserId:e})}),[j,h.currentUser.id,o,t.space_id]),R=(0,n().K8)((()=>(0,c().DU)({recordId:t.navigable_block_id,recordType:p().ev,tab:u,rootStore:o,environment:h})),[t,o,u,h]),I=(0,n().K8)((()=>{if(null==v||!v.length)return;const e=v.filter((e=>"reaction-created"===e.type)).reduce(((e,t)=>e.timestamp>t.timestamp?e:t),v[0]);if(null==e||!e.reaction_id)return;const i=o.getRecordStore(o,{table:_o().ez,id:e.reaction_id,spaceId:t.space_id});return null==i?void 0:i.getIcon()}),[t,o,v]);return(0,B.jsx)(ot,{header:f&&(0,B.jsx)(Ro,{authorCount:j.length,authorPhrase:(0,B.jsx)(Ci,{authorsLength:j.length,frontActorStore:_,backActorStore:M,authorTextStyle:{fontWeight:S().Wy.medium}}),targetStore:f}),isFirst:a,isLast:s,isPrivate:R,rootStore:o,navigableBlockId:b,notification:g,icon:I?(0,B.jsx)(Mo().A,{char:I,size:18}):void 0,showSnapshotButton:!1,url:A,...(0,oe().$5)({notification:g,environment:h,tab:u,activity:t}),children:f&&(0,B.jsx)(ko,{targetStore:f,source:l})})},"upgrade-request-created":zo,"app-builder-notification":Ct,"external-integration-notification":Ei,"trial-created":Lo};var rr=()=>i(449911),nr=()=>i(889358);function ar(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s,guestInviteRequestModel:d}=e,{notification:l,tab:c,source:g}=o,v=(0,r().v3)(),h=(0,b().tz)(),f=(0,n().K8)((()=>k().v3.createChildStore(i,{table:d.table,id:d.id,spaceId:d.spaceId})),[d,i]),y=(0,n().K8)((()=>f.getModel()),[f]),x=(0,n().K8)((()=>{if(!y)return;const e=i.getSpaceId();if(!e)return;const t=y.getCreatedByPointer(e);return k().sk.createChildStore(i,t)}),[y,i]),A=(0,n().K8)((()=>{if(x&&x instanceof k().LU)return x.getDisplayName(h)}),[x,h]),j=(0,n().K8)((()=>{if(t.navigable_block_id)return k().Bv.createChildStore(i,{table:p().ev,id:t.navigable_block_id})}),[t,i]),_=(0,n().K8)((()=>{var e;return null==j||null===(e=j.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:i.getRecordModel})}),[j,i]),M=(0,n().K8)((()=>(null==j?void 0:j.isEmptyPage())??!1),[j]),R=(0,n().K8)((()=>{if(!j)return;const e=j.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:m().y8.Notification}):void 0}),[j,i,t]),I=(0,n().K8)((()=>{const e=null==y?void 0:y.getForActorPointer(i.getSpaceId());if(!e)return;const t=k().sk.createChildStore(i,e);return t&&t instanceof k().LU?t.getEmail():void 0}),[y,i]),C=(0,u().IS)((e=>({externalUser:{color:e.accentColors.yellow[300]}})),[]),w="actor"===(0,ti().r)("notification_ia"),K=(0,n().K8)((()=>{var e;return null==x||null===(e=x.getModel())||void 0===e?void 0:e.asActor}),[x]);return w?(0,B.jsx)(rr().my,{notificationTitleStore:j,header:{icon:(0,B.jsx)(be().H8,{authors:K?[K]:[],size:rr().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:A},subheader:(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,B.jsx)(b().sA,{defaultMessage:"Requested access to {pageTitleAndIcon}",id:"activity.guestInviteRequest.subheader",values:{pageTitleAndIcon:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Le().B,{disabled:!0,icon:_,isEmptyPage:M,size:16}),j&&(0,B.jsx)(De().A,{store:j,style:{fontWeight:S().Wy.medium}})]})}})}),body:(0,B.jsx)(b().sA,{id:"activity.guestInviteRequest.bodyMessage",defaultMessage:"Requested access for {guestEmail} <yellow>(external user)</yellow>",values:{guestEmail:I,yellow:e=>(0,B.jsx)("span",{style:C.externalUser,children:e})}}),isFirst:a,isLast:s,rootStore:i,notification:l,url:R,...(0,oe().$5)({notification:l,activity:t,environment:v,tab:c}),children:(0,B.jsx)(sr,{activity:t,accessRequestStore:f,rootStore:i,source:g,notification:l,tabArgs:o})}):(0,B.jsx)(nr().Nx,{subheader:A,body:(0,B.jsx)(b().sA,{id:"activity.guestInviteRequest.bodyMessage",defaultMessage:"Requested access for {guestEmail} <yellow>(external user)</yellow>",values:{guestEmail:I,yellow:e=>(0,B.jsx)("span",{style:C.externalUser,children:e})}}),isFirst:a,isLast:s,rootStore:i,notification:l,url:R,...(0,oe().$5)({notification:l,activity:t,environment:v,tab:c}),children:(0,B.jsx)(sr,{activity:t,accessRequestStore:f,rootStore:i,source:g,notification:l,tabArgs:o})})}function sr(e){const{activity:t,accessRequestStore:i,rootStore:a,notification:s,tabArgs:d}=e,l=(0,r().v3)(),c=(0,n().K8)((()=>t.getEdits()),[t])[0],m=(0,n().K8)((()=>i.getParentTable()),[i]),v=(0,n().K8)((()=>i.getParentId()),[i]),y=(0,n().K8)((()=>t.navigable_block_id),[t]),b=(0,n().K8)((()=>i.getModel()),[i]),S=(0,n().K8)((()=>b&&(0,g().C)(b)),[b]),j=(0,M().I)({spaceStore:a,request:b}),_=(0,n().K8)((()=>{if("page_access_request"===S){var e;const t=null==b||null===(e=b.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[b,S]),R=(0,o.useCallback)((async()=>{if(S&&j&&b)if("space_membership_request"===j&&"space_membership_request"===S)await A().p4({status:"approved",environment:l,requests:[b],store:a,from:"notification"});else if("space_membership_request"===j&&"guest_invite_request"===S)await A().KB({status:"approved",environment:l,store:a,requests:[b],from:"notification"});else{if("guest_invite_request"!==S)return;await A().aV({status:"approved",environment:l,requests:[b],from:"notification"})}}),[l,b,a,j,S]),I=(0,o.useCallback)((async()=>{if(S&&b)if("space_membership_request"===S)await A().p4({status:"rejected",environment:l,requests:[b],store:a,from:"notification"});else if("guest_invite_request"===S)await A().aV({status:"rejected",environment:l,requests:[b],from:"notification"});else{if("team_membership_request"===S||"page_access_request"===S)return;(0,x().HB)(S)}}),[l,b,a,S]),C=(0,u().IS)((e=>({actionPrimaryContainer:{paddingTop:0,paddingBottom:0,paddingRight:0},actionButton:(0,xe().Ei)(e)})),[]),w=y?k().Bv.createChildStore(a,{table:p().ev,id:y}):void 0,K=(0,n().K8)((()=>m===p().ev&&Boolean(null==w?void 0:w.canAdmin())),[m,w]);if(!(m&&v&&j&&c))return null;if("page_access_request"===j)return K&&w?(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(ae,{accessRequestStore:i,targetBlockStore:w,initialRole:_,buttonStyle:C.actionButton,notification:s,rootStore:a,activity:t,tabArgs:d})}):null;if("space_membership_request"===j||"guest_invite_request"===j){const e=k().SL.createChildStore(a,{table:h().NX,id:v});return(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(O,{effectiveAccessRequestType:j,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:C.actionButton,notification:s,onApprove:R,onReject:I})})}if("team_membership_request"===j){const e=k().h4.createChildStore(a,{table:f().yK,id:v});return(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(T,{accessRequestStore:i,teamStore:e})})}(0,x().HB)(j)}const dr=o.memo(ar);function lr(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{notification:d,tab:l,source:c}=o,g=(0,r().v3)(),h=(0,b().tz)(),f=(0,n().K8)((()=>t.getEdits()),[t])[0],y=(0,n().K8)((()=>k().v3.createChildStore(i,{table:v().O,id:t.access_request_id,spaceId:i.getSpaceId()})),[t,i]),x=(0,n().K8)((()=>y.getModel()),[y]),A=(0,n().K8)((()=>null==x?void 0:x.isEditPageAccessRequest()),[x]),_=(0,n().K8)((()=>Boolean(x&&(0,j().t)(x,i))),[x,i]),M=f.message,R=(0,n().K8)((()=>{if(!x)return;const e=i.getSpaceId();if(!e)return;const t=x.getCreatedByPointer(e);return k().sk.createChildStore(i,t)}),[x,i]),I=(0,n().K8)((()=>{if(t.navigable_block_id)return k().Bv.createChildStore(i,{table:p().ev,id:t.navigable_block_id})}),[t,i]),C=(0,n().K8)((()=>{if(!I)return;const e=I.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:m().y8.Notification}):void 0}),[I,i,t]),w=(0,n().K8)((()=>{if(R&&R instanceof k().LU)return R.getEmail()}),[R]),K=(0,n().K8)((()=>{if(R)return R.getDisplayName(h)}),[R,h]),T=(0,u().IS)((e=>({externalUser:{color:e.accentColors.yellow[300]}})),[]),q=(0,n().K8)((()=>{var e;if(!R)return[];const t=null===(e=R.getModel())||void 0===e?void 0:e.asActor;return t?[t]:[]}),[R]),N=(0,n().K8)((()=>{var e;if(!I)return null;const t=null===(e=I.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:i.getRecordModel}),o=I.isEmptyPage();return(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,B.jsx)(b().sA,{id:"activity.pageAccessRequest.pageTitleText",defaultMessage:"Requested access to {pageTitle}",values:{pageTitle:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Le().B,{disabled:!0,icon:t,isEmptyPage:o,size:16}),(0,B.jsx)(De().A,{store:I,style:{fontWeight:S().Wy.medium}})]})}})})}),[I,i]);return"actor"===(0,ti().r)("notification_ia")?(0,B.jsx)(rr().my,{notificationTitleStore:I,header:{icon:(0,B.jsx)(be().H8,{authors:q,size:rr().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:K},subheader:N,body:M?(0,B.jsx)(b().sA,{id:"activity.pageAccessRequest.messageBody",defaultMessage:'"{message}"',values:{message:M}}):A?(0,B.jsx)(b().sA,{id:"activity.pageAccessRequest.bodyEditAccessNoMessage",defaultMessage:"Requested edit access"}):void 0,isFirst:a,isLast:s,rootStore:i,navigableBlockId:null==I?void 0:I.id,notification:d,url:C,...(0,oe().$5)({notification:d,activity:t,environment:g,tab:l}),children:(0,B.jsx)(cr,{activity:t,accessRequestStore:y,rootStore:i,source:c,notification:d,tabArgs:o})}):(0,B.jsx)(nr().Nx,{subheader:_?(0,B.jsx)(b().sA,{id:"activity.pageAccessRequest.externalUserSubheader",defaultMessage:"{requestingActorEmail} <yellow>(external user)</yellow>",values:{requestingActorEmail:w,yellow:e=>(0,B.jsx)("span",{style:T.externalUser,children:e})}}):w,body:M?(0,B.jsx)(b().sA,{id:"activity.pageAccessRequest.bodyMessage",defaultMessage:'Requested access, "{message}"',values:{message:M}}):A?(0,B.jsx)(b().sA,{id:"activity.pageAccessRequest.editAccessBodyNoMessage",defaultMessage:"Requested edit access"}):(0,B.jsx)(b().sA,{id:"activity.pageAccessRequest.bodyNoMessage",defaultMessage:"Requested access",values:{requestingActorName:K}}),isFirst:a,isLast:s,rootStore:i,notification:d,url:C,...(0,oe().$5)({notification:d,activity:t,environment:g,tab:l}),children:(0,B.jsx)(cr,{activity:t,accessRequestStore:y,rootStore:i,source:c,notification:d,tabArgs:o})})}function cr(e){const{activity:t,accessRequestStore:i,rootStore:a,notification:s,tabArgs:d}=e,l=(0,r().v3)(),c=(0,n().K8)((()=>t.getEdits()),[t])[0],m=(0,n().K8)((()=>i.getParentTable()),[i]),v=(0,n().K8)((()=>i.getParentId()),[i]),y=(0,n().K8)((()=>t.navigable_block_id),[t]),b=(0,n().K8)((()=>i.getModel()),[i]),S=(0,n().K8)((()=>b&&(0,g().C)(b)),[b]),j=(0,M().I)({spaceStore:a,request:b}),_=(0,n().K8)((()=>{if("page_access_request"===S){var e;const t=null==b||null===(e=b.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[b,S]),R=(0,o.useCallback)((async()=>{if(S&&j&&b)if("space_membership_request"===j&&"space_membership_request"===S)await A().p4({status:"approved",environment:l,requests:[b],store:a,from:"notification"});else if("space_membership_request"===j&&"guest_invite_request"===S)await A().KB({status:"approved",environment:l,store:a,requests:[b],from:"notification"});else{if("guest_invite_request"!==S)return;await A().aV({status:"approved",environment:l,requests:[b],from:"notification"})}}),[l,b,a,j,S]),I=(0,o.useCallback)((async()=>{if(S&&b)if("space_membership_request"===S)await A().p4({status:"rejected",environment:l,requests:[b],store:a,from:"notification"});else if("guest_invite_request"===S)await A().aV({status:"rejected",environment:l,requests:[b],from:"notification"});else{if("team_membership_request"===S||"page_access_request"===S)return;(0,x().HB)(S)}}),[l,b,a,S]),C=(0,u().IS)((e=>({actionPrimaryContainer:{paddingTop:0,paddingBottom:0,paddingRight:0},actionButton:(0,xe().Ei)(e)})),[]),w=y?k().Bv.createChildStore(a,{table:p().ev,id:y}):void 0,K=(0,n().K8)((()=>m===p().ev&&Boolean(null==w?void 0:w.canAdmin())),[m,w]);if(!(m&&v&&j&&c))return null;if("page_access_request"===j)return K&&w?(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(ae,{accessRequestStore:i,targetBlockStore:w,initialRole:_,buttonStyle:C.actionButton,notification:s,rootStore:a,activity:t,tabArgs:d})}):null;if("space_membership_request"===j||"guest_invite_request"===j){const e=k().SL.createChildStore(a,{table:h().NX,id:v});return(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(O,{effectiveAccessRequestType:j,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:C.actionButton,notification:s,onApprove:R,onReject:I})})}if("team_membership_request"===j){const e=k().h4.createChildStore(a,{table:f().yK,id:v});return(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(T,{accessRequestStore:i,teamStore:e})})}(0,x().HB)(j)}const ur=o.memo(lr);function gr(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{notification:d,tab:l,source:c}=o,u=(0,r().v3)(),g=(0,b().tz)(),m=(0,n().K8)((()=>t.getEdits()),[t])[0],p=(0,n().K8)((()=>k().v3.createChildStore(i,{table:v().O,id:t.access_request_id})),[t,i]),h=(0,n().K8)((()=>p.getModel()),[p]),f=m.message,y=(0,n().K8)((()=>{if(!h)return;const e=h.getCreatedByPointer(i.getSpaceId());return k().sk.createChildStore(i,e)}),[h,i]),x=(0,n().K8)((()=>!!h&&h.getForActorId()===h.getCreatedById()),[h]),S=(0,n().K8)((()=>{if(!h)return;const e=h.getForActorPointer(i.id);if(!e)return;const t=k().sk.createChildStore(i,e);return t instanceof k().LU?t.getEmail():void 0}),[h,i]),A=(0,n().K8)((()=>{if(y)return y.getDisplayName(g)}),[y,g]),j="actor"===(0,ti().r)("notification_ia"),_=(0,n().K8)((()=>{var e;return null==y||null===(e=y.getModel())||void 0===e?void 0:e.asActor}),[y]);return j?(0,B.jsx)(rr().my,{notificationTitleStore:y,header:{icon:(0,B.jsx)(be().H8,{authors:_?[_]:[],size:rr().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:A},body:x?(0,B.jsx)(b().sA,{id:"activity.spaceMembershipRequestForSelf.body",defaultMessage:'Requested to be added as a workspace member {hasMessage, select, true {, "{message}"} other {}}',values:{hasMessage:Boolean(f),message:f}}):(0,B.jsx)(b().sA,{id:"activity.spaceMembershipRequest.body",defaultMessage:'Requested to add {forActorEmail} as a workspace member {hasMessage, select, true {, "{message}"} other {}}',values:{forActorEmail:S,hasMessage:Boolean(f),message:f}}),isFirst:a,isLast:s,rootStore:i,notification:d,url:void 0,...(0,oe().$5)({notification:d,activity:t,environment:u,tab:l}),children:(0,B.jsx)(mr,{activity:t,accessRequestStore:p,rootStore:i,source:c,notification:d,tabArgs:o})}):(0,B.jsx)(nr().Nx,{notificationTitleStore:y,body:x?(0,B.jsx)(b().sA,{id:"activity.spaceMembershipRequestForSelf.body",defaultMessage:'Requested to be added as a workspace member {hasMessage, select, true {, "{message}"} other {}}',values:{hasMessage:Boolean(f),message:f}}):(0,B.jsx)(b().sA,{id:"activity.spaceMembershipRequest.body",defaultMessage:'Requested to add {forActorEmail} as a workspace member {hasMessage, select, true {, "{message}"} other {}}',values:{forActorEmail:S,hasMessage:Boolean(f),message:f}}),isFirst:a,isLast:s,rootStore:i,notification:d,url:void 0,...(0,oe().$5)({notification:d,activity:t,environment:u,tab:l}),children:(0,B.jsx)(mr,{activity:t,accessRequestStore:p,rootStore:i,source:c,notification:d,tabArgs:o})})}function mr(e){const{activity:t,accessRequestStore:i,rootStore:a,notification:s,tabArgs:d}=e,l=(0,r().v3)(),c=(0,n().K8)((()=>t.getEdits()),[t])[0],m=(0,n().K8)((()=>i.getParentTable()),[i]),v=(0,n().K8)((()=>i.getParentId()),[i]),y=(0,n().K8)((()=>t.navigable_block_id),[t]),b=(0,n().K8)((()=>i.getModel()),[i]),S=(0,n().K8)((()=>b&&(0,g().C)(b)),[b]),j=(0,M().I)({spaceStore:a,request:b}),_=(0,n().K8)((()=>{if("page_access_request"===S){var e;const t=null==b||null===(e=b.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[b,S]),R=(0,o.useCallback)((async()=>{if(S&&j&&b)if("space_membership_request"===j&&"space_membership_request"===S)await A().p4({status:"approved",environment:l,requests:[b],store:a,from:"notification"});else if("space_membership_request"===j&&"guest_invite_request"===S)await A().KB({status:"approved",environment:l,store:a,requests:[b],from:"notification"});else{if("guest_invite_request"!==S)return;await A().aV({status:"approved",environment:l,requests:[b],from:"notification"})}}),[l,b,a,j,S]),I=(0,o.useCallback)((async()=>{if(S&&b)if("space_membership_request"===S)await A().p4({status:"rejected",environment:l,requests:[b],store:a,from:"notification"});else if("guest_invite_request"===S)await A().aV({status:"rejected",environment:l,requests:[b],from:"notification"});else{if("team_membership_request"===S||"page_access_request"===S)return;(0,x().HB)(S)}}),[l,b,a,S]),C=(0,u().IS)((e=>({actionPrimaryContainer:{paddingTop:4,paddingBottom:0,paddingRight:0},actionButton:(0,xe().Ei)(e)})),[]),w=y?k().Bv.createChildStore(a,{table:p().ev,id:y}):void 0,K=(0,n().K8)((()=>m===p().ev&&Boolean(null==w?void 0:w.canAdmin())),[m,w]);if(!(m&&v&&j&&c))return null;if("page_access_request"===j)return K&&w?(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(ae,{accessRequestStore:i,targetBlockStore:w,initialRole:_,buttonStyle:C.actionButton,notification:s,rootStore:a,activity:t,tabArgs:d})}):null;if("space_membership_request"===j||"guest_invite_request"===j){const e=k().SL.createChildStore(a,{table:h().NX,id:v});return(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(O,{effectiveAccessRequestType:j,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:C.actionButton,notification:s,onApprove:R,onReject:I})})}if("team_membership_request"===j){const e=k().h4.createChildStore(a,{table:f().yK,id:v});return(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(T,{accessRequestStore:i,teamStore:e})})}(0,x().HB)(j)}const vr=o.memo(gr);function pr(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{notification:d,tab:l,source:c}=o,u=(0,r().v3)(),g=(0,b().tz)(),m=(0,n().K8)((()=>t.getEdits()),[t])[0],p=(0,n().K8)((()=>{if(t.team_id)return k().h4.createChildStore(i,{table:f().yK,id:t.team_id,spaceId:i.getSpaceId()})}),[t,i]),h=(0,n().K8)((()=>{var e;return null==p||null===(e=p.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:p.getRecordModel})}),[p]),y=(0,n().K8)((()=>k().v3.createChildStore(i,{table:v().O,id:t.access_request_id})),[t,i]),x=(0,n().K8)((()=>y.getModel()),[y]),A=m.message,j=(0,n().K8)((()=>{if(!x)return;const e=i.getSpaceId();if(!e)return;const t=x.getCreatedByPointer(e);return k().sk.createChildStore(i,t)}),[x,i]),_=(0,n().K8)((()=>{if(j)return j.getDisplayName(g)}),[j,g]),M="actor"===(0,ti().r)("notification_ia"),R=(0,n().K8)((()=>{var e;return null==j||null===(e=j.getModel())||void 0===e?void 0:e.asActor}),[j]);return M?(0,B.jsx)(rr().my,{notificationTitleStore:p,header:{icon:(0,B.jsx)(be().H8,{authors:R?[R]:[],size:rr().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:_},subheader:(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,B.jsx)(b().sA,{defaultMessage:"Requested to join {teamIconAndName}",id:"activity.teamMembershipRequest.subheader",values:{teamIconAndName:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Le().B,{disabled:!0,icon:h,isEmptyPage:!1,size:16}),p&&(0,B.jsx)(De().A,{store:p,style:{fontWeight:S().Wy.medium}})]})}})}),body:A?(0,B.jsx)(b().sA,{id:"activity.teamMembershipRequest.messageBody",defaultMessage:'"{message}"',values:{message:A}}):void 0,isFirst:a,isLast:s,rootStore:i,notification:d,url:void 0,...(0,oe().$5)({notification:d,activity:t,environment:u,tab:l}),children:(0,B.jsx)(hr,{activity:t,accessRequestStore:y,rootStore:i,source:c,notification:d,tabArgs:o})}):(0,B.jsx)(nr().Nx,{notificationTitleStore:p,subheader:_,body:A?(0,B.jsx)(b().sA,{id:"activity.teamMembershipRequest.bodyWithMessage",defaultMessage:'Requested to join, "{message}"',values:{message:A}}):(0,B.jsx)(b().sA,{id:"activity.teamMembershipRequest.bodyNoMessage",defaultMessage:"Requested to join"}),isFirst:a,isLast:s,rootStore:i,notification:d,url:void 0,...(0,oe().$5)({notification:d,activity:t,environment:u,tab:l}),children:(0,B.jsx)(hr,{activity:t,accessRequestStore:y,rootStore:i,source:c,notification:d,tabArgs:o})})}function hr(e){const{activity:t,accessRequestStore:i,rootStore:a,notification:s,tabArgs:d}=e,l=(0,r().v3)(),c=(0,n().K8)((()=>t.getEdits()),[t])[0],m=(0,n().K8)((()=>i.getParentTable()),[i]),v=(0,n().K8)((()=>i.getParentId()),[i]),y=(0,n().K8)((()=>t.navigable_block_id),[t]),b=(0,n().K8)((()=>i.getModel()),[i]),S=(0,n().K8)((()=>b&&(0,g().C)(b)),[b]),j=(0,M().I)({spaceStore:a,request:b}),_=(0,n().K8)((()=>{if("page_access_request"===S){var e;const t=null==b||null===(e=b.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[b,S]),R=(0,o.useCallback)((async()=>{if(S&&j&&b)if("space_membership_request"===j&&"space_membership_request"===S)await A().p4({status:"approved",environment:l,requests:[b],store:a,from:"notification"});else if("space_membership_request"===j&&"guest_invite_request"===S)await A().KB({status:"approved",environment:l,store:a,requests:[b],from:"notification"});else{if("guest_invite_request"!==S)return;await A().aV({status:"approved",environment:l,requests:[b],from:"notification"})}}),[l,b,a,j,S]),I=(0,o.useCallback)((async()=>{if(S&&b)if("space_membership_request"===S)await A().p4({status:"rejected",environment:l,requests:[b],store:a,from:"notification"});else if("guest_invite_request"===S)await A().aV({status:"rejected",environment:l,requests:[b],from:"notification"});else{if("team_membership_request"===S||"page_access_request"===S)return;(0,x().HB)(S)}}),[l,b,a,S]),C=(0,u().IS)((e=>({actionPrimaryContainer:{paddingTop:4,paddingBottom:0,paddingRight:0},actionButton:(0,xe().Ei)(e)})),[]),w=y?k().Bv.createChildStore(a,{table:p().ev,id:y}):void 0,K=(0,n().K8)((()=>m===p().ev&&Boolean(null==w?void 0:w.canAdmin())),[m,w]);if(!(m&&v&&j&&c))return null;if("page_access_request"===j)return K&&w?(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(ae,{accessRequestStore:i,targetBlockStore:w,initialRole:_,buttonStyle:C.actionButton,notification:s,rootStore:a,activity:t,tabArgs:d})}):null;if("space_membership_request"===j||"guest_invite_request"===j){const e=k().SL.createChildStore(a,{table:h().NX,id:v});return(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(O,{effectiveAccessRequestType:j,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:C.actionButton,notification:s,onApprove:R,onReject:I})})}if("team_membership_request"===j){const e=k().h4.createChildStore(a,{table:f().yK,id:v});return(0,B.jsx)("div",{style:C.actionPrimaryContainer,children:(0,B.jsx)(T,{accessRequestStore:i,teamStore:e})})}(0,x().HB)(j)}const fr=o.memo(pr);function yr(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:a}=e,s=(0,n().K8)((()=>k().v3.createChildStore(i,{table:v().O,id:t.access_request_id})),[t,i]),d=(0,n().K8)((()=>s.getModel()),[s]),{pageAccessRequestModel:l,guestInviteRequestModel:c,teamMembershipRequestModel:u}=(0,n().K8)((()=>({pageAccessRequestModel:null!=d&&d.isPageAccessRequest()?d:void 0,guestInviteRequestModel:null!=d&&d.isGuestInviteRequest()?d:void 0,spaceMembershipRequestModel:null!=d&&d.isSpaceMembershipRequest()?d:void 0,teamMembershipRequestModel:null!=d&&d.isTeamMembershipRequest()?d:void 0})),[d]),g=(0,M().I)({spaceStore:i,request:d});switch(g){case"guest_invite_request":return c?(0,B.jsx)(dr,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:a,guestInviteRequestModel:c}):null;case"space_membership_request":return(0,B.jsx)(vr,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:a});case"team_membership_request":return u?(0,B.jsx)(fr,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:a}):null;case"page_access_request":return l?(0,B.jsx)(ur,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:a,pageAccessRequestModel:l}):null;case void 0:return null;default:(0,x().HB)(g)}}const br=o.memo(yr);function xr(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{notification:d,tab:l}=o,c=(0,r().v3)(),u=(0,b().tz)(),g=(0,n().K8)((()=>k().v3.createChildStore(i,{table:v().O,id:t.access_request_id,spaceId:i.id})),[t,i]),h=(0,n().K8)((()=>{const e=g.getModel();return e&&e.isGuestInviteRequest()&&e.isResolved()||e&&e.isEditPageAccessRequest()&&e.isApproved()?e:void 0}),[g]),f=(0,n().K8)((()=>null==h?void 0:h.getStatus()),[h]),y=(0,n().K8)((()=>Boolean(null==h?void 0:h.isEditPageAccessRequest())),[h]),x=(0,n().K8)((()=>{if(t.navigable_block_id)return k().Bv.createChildStore(i,{table:p().ev,id:t.navigable_block_id,spaceId:i.id})}),[t,i]),A=(0,n().K8)((()=>{if(!h)return;const e=h.getForActorPointer(i.getSpaceId()),t=k().sk.createChildStore(i,e);return t instanceof k().LU?t:void 0}),[h,i]),j=(0,n().K8)((()=>{const e=null==A?void 0:A.getDisplayName(u),t=null==A?void 0:A.getEmail();return e?`${e} (${t})`:t}),[A,u]),{resolvedByActorModel:_,resolvedByActor:M}=(0,n().K8)((()=>{if(!h)return{resolvedByActorModel:void 0,resolvedByActor:void 0};const e=h.getResolvedByPointer(i.getSpaceId());if(!e)return{resolvedByActorModel:void 0,resolvedByActor:void 0};const t=k().sk.createChildStore(i,e).getModel();return{resolvedByActorModel:t,resolvedByActor:null==t?void 0:t.asActor}}),[h,i]),R=(0,n().K8)((()=>{if(_)return _.getDisplayName(u)}),[_,u]),I=(0,n().K8)((()=>{if(!x)return;const e=x.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:m().y8.Notification}):void 0}),[x,i,t]),C="actor"===(0,ti().r)("notification_ia"),w=(0,n().K8)((()=>{var e;return null==x||null===(e=x.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:i.getRecordModel})}),[x,i]),K=(0,n().K8)((()=>(null==x?void 0:x.isEmptyPage())??!1),[x]);return C?(0,B.jsx)(rr().my,{notificationTitleStore:x,header:{icon:(0,B.jsx)(be().H8,{authors:M?[M]:[],size:rr().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:R},subheader:(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:x&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Le().B,{disabled:!0,icon:w,isEmptyPage:K,size:16}),(0,B.jsx)(De().A,{store:x,style:{fontWeight:S().Wy.medium}})]})}),body:y?(0,B.jsx)(b().sA,{defaultMessage:"Approved your request to edit the page",id:"activity.EditAccessRequestResolved.approvedBody"}):"approved"===f?(0,B.jsx)(b().sA,{defaultMessage:"Approved your request to invite {forActorNameOrEmail} as a guest",values:{forActorNameOrEmail:j},id:"activity.GuestInviteRequestResolved.approvedBody"}):"rejected"===f?(0,B.jsx)(b().sA,{defaultMessage:"Denied your request to invite {forActorNameOrEmail} as a guest",values:{forActorNameOrEmail:j},id:"activity.GuestInviteRequestResolved.rejectedBody"}):void 0,isFirst:a,isLast:s,rootStore:i,navigableBlockId:null==x?void 0:x.id,notification:d,url:I,...(0,oe().$5)({notification:d,activity:t,environment:c,tab:l})}):(0,B.jsx)(nr().Nx,{subheader:R,body:y?(0,B.jsx)(b().sA,{defaultMessage:"Approved your request to edit the page",id:"activity.EditAccessRequestResolved.approvedBody"}):"approved"===f?(0,B.jsx)(b().sA,{defaultMessage:"Approved your request to invite {forActorNameOrEmail} as a guest",values:{forActorNameOrEmail:j},id:"activity.GuestInviteRequestResolved.approvedBody"}):"rejected"===f?(0,B.jsx)(b().sA,{defaultMessage:"Denied your request to invite {forActorNameOrEmail} as a guest",values:{forActorNameOrEmail:j},id:"activity.GuestInviteRequestResolved.rejectedBody"}):void 0,isFirst:a,isLast:s,rootStore:i,notification:d,url:I,...(0,oe().$5)({notification:d,activity:t,environment:c,tab:l})})}const Sr=o.memo(xr);var Ar=()=>i(374366);function jr(e){const{rootStore:t,activity:i,isLast:a,tabArgs:s,isFirst:d}=e,{tab:l,notification:c}=s,g=(0,b().tz)(),v=(0,r().v3)(),h=(0,n().K8)((()=>i.getEdits()),[i]),f=h.at(0),y=(0,u().IS)((e=>({editAutomation:{marginTop:8,height:26,fontWeight:S().Wy.medium}})),[]),A=(0,o.useMemo)((()=>new Set(h.map((e=>e.automation_id)))),[h]),j=(0,n().K8)((()=>{if(!(0,x().O9)(f))return!1;return!k().dn.createChildStore(t,{table:Tt().yB,id:f.automation_id,spaceId:t.getSpaceId()}).getAlive()}),[t,f]),{handleNavigateToAutomation:_,navigableBlockStore:M,navigableBlockUrl:R}=function(e){let{edit:t,rootStore:i,uniqueAutomationIds:o}=e;const a=(0,r().v3)(),s=1===o.size,d=(0,n().K8)((()=>{if(!(0,x().O9)(t))return!1;return!k().dn.createChildStore(i,{table:Tt().yB,id:t.automation_id,spaceId:i.getSpaceId()}).getAlive()}),[i,t]),l=(0,n().K8)((()=>{if((0,x().O9)(t))return new(k().Bv)(a,{id:t.automation_navigable_block_id,table:p().ev})}),[t,a]),c=(0,n().K8)((()=>{if(!(0,x().O9)(l))return!0;const e=l.getRole();return!e||!(0,V().Tt)(e)}),[l]),u=(0,n().K8)((()=>{if((0,x().O9)(l))return(0,Rt().Ay)({store:l,preferPublicLink:!1,pageVisitSource:m().y8.Notification})}),[l]),g=(0,n().K8)((()=>c||!(0,x().O9)(t)?()=>{}:()=>{const e=t.automation_id;l&&u&&((0,qt().u4)({environment:a,event:{eventName:"click_automation_typecheck_error_notification",eventProperties:{block_id:l.id,automation_id:e}}}),Mt().oo({environment:a,url:u,callback:async()=>await zt({environment:a,automationNavigableBlockStore:l,automationId:s&&!d?e:void 0,rootStore:i,source:"automation_typecheck_error_raised_notification"})}))}),[d,s,c,t,l,u,a,i]);return{handleNavigateToAutomation:g,navigableBlockStore:l,navigableBlockUrl:u}}({edit:f,rootStore:t,uniqueAutomationIds:A}),I=(0,n().K8)((()=>[...A].map((e=>{const o=t.getRecordStore(t,{table:Tt().yB,id:e,spaceId:i.spaceId}),r=o.getRole();return(0,x().O9)(r)&&(0,V().Tt)(r)?o.getAlive()?o.getNameWithDefault(g):g.formatMessage(Bt().VS.automationDeletedName):g.formatMessage(Bt().VS.automationPrivateName)}))),[g,t,i,A]),C=(0,o.useCallback)((e=>{(0,J().SQ)({event:e,context:J().y$.NotificationClick,callback:()=>{X().createAndCommit({userAction:"AutomationTypecheckErrorRaisedActivity.viewError",environment:v,canUndo:!0,perform:e=>{G().ZB({notification:c,rootStore:t,transaction:e,read:!0})}}),_(),$().K4({tab:l,notificationId:null==c?void 0:c.id,environment:v,alreadyRead:Boolean(null==c?void 0:c.read),activity:i})}})}),[i,v,_,c,t,l]);if(!(0,x().O9)(M)||!(0,x().O9)(f)||0===h.length)return null;const w=j&&1===A.size;return(0,B.jsx)(nr().Nx,{header:{icon:(0,Ar().xMarkFillIcon)({width:16,height:16}),title:(0,B.jsx)(b().sA,{id:"AutomationTypecheckErrorRaisedActivity.formattedHeaderMessage.header",defaultMessage:"{numAutomationNames, plural, one {Automation is} other {Automations are}} invalid",values:{numAutomationNames:A.size}})},subheader:I.join(", "),body:!w&&(0,B.jsx)(b().sA,{id:"AutomationTypecheckErrorRaisedActivity.formattedHeaderMessage.body",defaultMessage:"Resolve any errors or remove failing steps to enable {numAutomationNames, plural, one {this automation} other {these automations}}",values:{numAutomationNames:A.size}}),isFirst:d,isLast:a,rootStore:t,navigableBlockId:M.id,notification:c,url:R,...(0,oe().$5)({notification:c,activity:i,environment:v,tab:l}),children:!w&&(0,B.jsx)(kt().A,{style:y.editAutomation,onClick:C,size:"md",children:(0,B.jsx)(b().sA,{id:"AutomationTypecheckErrorRaisedActivity.editAutomation.automationMessage",defaultMessage:"Edit automation"})})})}const _r=o.memo(jr);var Mr=()=>i(220413),Rr=()=>i(762847),kr=()=>i(916963),Ir=()=>i(882746);function Cr(e){const{activity:t,rootStore:o,tabArgs:a,isFirst:s,isLast:d}=e,{tab:l,notification:g}=a,v=(0,r().v3)(),h=(0,b().tz)(),f=(0,u().eP)(),y=(0,n().K8)((()=>t.getEdits()),[t]),x=y.length>0,A=y[0],j=k().sk.createChildStore(o,{table:p().ev,id:A.navigable_block_id}),_="actor"===(0,ti().r)("notification_ia"),M=(0,n().K8)((()=>j.isDefined()),[j]),R=(0,n().K8)((()=>k().Bv.createChildStore(o,{table:p().ev,id:t.mentioned_block_id})),[t,o]),I=(0,n().K8)((()=>A.mentioned_property),[A]),C=(0,n().K8)((()=>{if(!R)return;const e=R.getModel();return null==e?void 0:e.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:m().y8.Notification})}),[R,o]),w=(0,n().K8)((()=>(0,c().Ln)({edits:y,rootStore:o})),[y,o]),K=w.map((e=>e.asActor)),T=(0,n().K8)((()=>{const e=w[0];if(e)return k().sk.createChildStore(o,e.pointer)}),[w,o]),q=(0,n().K8)((()=>{var e;return null==T||null===(e=T.getModel())||void 0===e?void 0:e.getDisplayName(h)}),[T,h]),N=(0,n().K8)((()=>(null==R?void 0:R.getType())===Rr().xd.tableRow),[R]),P=(0,n().K8)((()=>{var e;const t=null===(e=j.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:j.getRecordModel}),i=j.isEmptyPage();return(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,B.jsx)(b().sA,{id:"activity.userMentionedActivity.subheaderPageTitle",defaultMessage:"Mentioned you in {pageTitle}",values:{pageTitle:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Le().B,{disabled:!0,icon:t,isEmptyPage:i,size:16}),(0,B.jsx)(De().A,{store:j,style:{fontWeight:S().Wy.medium}})]})}})})}),[j]),L=(0,n().K8)((()=>{if(!R)return;if(N){var e;const t=null===(e=R.getModel())||void 0===e?void 0:e.__IM_SORRY__getValue();if(t&&t.type===Rr().xd.tableRow)return(0,B.jsx)(b().sA,{id:"activity.userMentionedActivity.mentionSimpleTableRow",defaultMessage:"Mentioned you in {rowPreview}",values:{rowPreview:(0,B.jsx)(i(549026).V,{blockValue:t,rootStore:o})}})}const t=R.getTitleValue(),r=(0,Mr().O4)({theme:f}),n=j.pointer.spaceId;if(!n)return;const a="title"===I;return j.id===R.id&&!a?_?(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,B.jsx)(wr,{property:I,blockStore:R})}):(0,B.jsx)(b().sA,{id:"activity.userMentionedActivity.mentionPropertyBody",defaultMessage:'Mentioned you in "{property}"',values:{property:(0,B.jsx)(wr,{property:I,blockStore:R})}}):_?(0,ei().S5)({environment:v,textValue:{value:t,spaceId:n},parentStore:o,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!0,disableHover:!0,disabled:!0,theme:r,emojiType:(0,Zt().FN)(v),katex:v.KatexStore.getKatex(),formulaValueTypes:[]}):(0,B.jsx)(b().sA,{id:"activity.userMentionedActivity.mentionBody",defaultMessage:'Mentioned you "{blockText}"',values:{blockText:(0,ei().S5)({environment:v,textValue:{value:t,spaceId:n},parentStore:o,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!0,disableHover:!0,disabled:!0,theme:r,emojiType:(0,Zt().FN)(v),katex:v.KatexStore.getKatex(),formulaValueTypes:[]})}})}),[R,f,j.pointer.spaceId,I,v,o,j.id,N,_]);return x&&M&&C?_?(0,B.jsx)(rr().my,{notificationTitleStore:j,header:{icon:(0,B.jsx)(be().H8,{authors:K,size:rr().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:q},subheader:P,body:L,isFirst:s,isLast:d,rootStore:o,navigableBlockId:j.id,notification:g,url:C,disableLineClamp:N,...(0,oe().$5)({notification:g,activity:t,environment:v,tab:l})}):(0,B.jsx)(nr().Nx,{notificationTitleStore:j,subheader:q,body:L,isFirst:s,isLast:d,rootStore:o,navigableBlockId:j.id,notification:g,url:C,disableLineClamp:N,...(0,oe().$5)({notification:g,activity:t,environment:v,tab:l})}):null}function wr(e){const{property:t,blockStore:i}=e,o=(0,u().DP)(),r=(0,b().tz)(),a=(0,n().K8)((()=>{var e;const t=i.getAssociatedCollectionStore();return(null==t||null===(e=t.getModel())||void 0===e?void 0:e.getNormalizedSchema())||(0,Ir().RX)(r)}),[i,r]),s=(0,n().K8)((()=>{if(a&&t&&t in a)return a[t]}),[a,t]),d=(0,u().IS)((e=>({container:{display:"inline-flex",alignItems:"baseline",gap:6},propertyIcon:{alignSelf:"center",fill:e.text.secondary}})),[]);return s?(0,B.jsxs)("div",{style:d.container,children:[(0,B.jsx)(kr().zB,{type:s.type,icon:s.icon,size:14,theme:o,style:d.propertyIcon}),(0,B.jsx)("div",{children:s.name})]}):null}const Kr=o.memo(Cr);function Br(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{tab:d,notification:l}=o,g=(0,r().v3)(),v=(0,b().tz)(),h=(0,u().eP)(),f=(0,n().K8)((()=>(0,Wt().W9)(t.getEdits())),[t]),y=f.length>0,x=(0,n().K8)((()=>k().Bv.createChildStore(i,{table:p().ev,id:f[0].navigable_block_id})),[i,f]),A=(0,n().K8)((()=>{const e=x.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:m().y8.Notification})}),[x,i]),j=(0,n().K8)((()=>(0,c().Ln)({edits:f,rootStore:i})),[f,i]),_=(0,n().K8)((()=>j.map((e=>e.getDisplayName(v)))),[j,v]),M=(0,n().K8)((()=>j.map((e=>e.asActor))),[j]),R=(0,n().K8)((()=>x.isDefined()),[x]),I=(0,n().K8)((()=>{var e;const t=null===(e=x.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:i.getRecordModel}),o=x.isEmptyPage();return(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,B.jsx)(b().sA,{id:"activity.blockEdited.pageTitleText",defaultMessage:"Edited a property in {pageTitle}",values:{pageTitle:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Le().B,{disabled:!0,icon:t,isEmptyPage:o,size:16}),(0,B.jsx)(De().A,{store:x,style:{fontWeight:S().Wy.medium}})]})}})})}),[x,i]),C=(0,n().K8)((()=>f.map(((e,t)=>{var o;const r=(0,Mr().O4)({theme:h}),n=Object.keys(e.property_updates)[0],a=null===(o=e.property_updates[n].after)||void 0===o?void 0:o.value;return a?(0,B.jsx)(b().sA,{defaultMessage:'Updated "{property}" to "{propertyValue}"',id:"activity.blockEdited.body.single",values:{property:(0,B.jsx)(wr,{property:n,blockStore:x}),propertyValue:(0,ei().S5)({environment:g,textValue:{value:a,spaceId:i.id},parentStore:i,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!0,disableHover:!0,disabled:!0,theme:r,emojiType:(0,Zt().FN)(g),katex:g.KatexStore.getKatex(),formulaValueTypes:[]})}},t):null}))),[g,x,f,h,i]),w="actor"===(0,ti().r)("notification_ia");return R&&y?w?(0,B.jsx)(rr().my,{notificationTitleStore:x,header:{icon:(0,B.jsx)(be().H8,{authors:M,size:rr().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:_.join(", ")},subheader:I,body:C,isFirst:a,isLast:s,rootStore:i,navigableBlockId:x.id,notification:l,url:A,...(0,oe().$5)({notification:l,activity:t,environment:g,tab:d})}):(0,B.jsx)(nr().Nx,{notificationTitleStore:x,subheader:_.join(", "),body:C,isFirst:a,isLast:s,rootStore:i,navigableBlockId:x.id,notification:l,url:A,...(0,oe().$5)({notification:l,activity:t,environment:g,tab:d})}):null}const Tr=o.memo(Br);i(362833),i(443778);function qr(e){const{activity:t,tabArgs:o,rootStore:a,isFirst:l,isLast:c}=e,{tab:g,notification:v}=o,h=(0,b().tz)(),f=(0,n().K8)((()=>t.getEdits()),[t]);let y=f.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":case"suggestion-created":return!0;default:(0,x().HB)(e)}}));0===y.length&&0!==f.length&&(y=f);const A=y.length>0,j=(0,r().v3)(),_=(0,n().K8)((()=>{const e=a.getRecordStore(a,{table:d().$Y,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,a]),M=(0,n().K8)((()=>{const e=null==_?void 0:_.getParentPointer();if(e)return k().Bv.createChildStore(a,e)}),[_,a]),R=(0,n().K8)((()=>Boolean(M&&M.isDefined())),[M]),I=(0,n().K8)((()=>{const e=null==M?void 0:M.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,M]),C=k().Bv.createChildStore(a,{table:p().ev,id:I}),w=(0,n().K8)((()=>C.isDefined()),[C]),K=(0,i(280696).k)({navigableBlockStore:C}),T=(0,n().K8)((()=>i(836331).default.getConfigKey("assume_comment_read","last_seen_at")),[]),q=(0,n().K8)((()=>K.filter((e=>e.isUnread(T))).length),[K,T]),N=(0,n().K8)((()=>K.toSorted(((e,t)=>Math.max(...t.getCommentStores().map((e=>e.getCreatedTime())))-Math.max(...e.getCommentStores().map((e=>e.getCreatedTime()))))).toSorted(((e,t)=>(t.isUnread(T)?1:0)-(e.isUnread(T)?1:0)))),[K,T]),{actorModels:P,actorNamesInDiscussions:L}=(0,n().K8)((()=>{const e=new Set,t=[],i=j.currentUser.id,o=N.flatMap((e=>e.getCommentStores().toSorted(((e,t)=>t.getCreatedTime()-e.getCreatedTime()))));o.forEach((i=>{const o=i.getCreatedByPointer();o&&!e.has(o.id)&&(e.add(o.id),t.push(o))}));const r=t.map((e=>k().sk.createChildStore(a,e).getModel())).filter(x().O9).filter((e=>e.id!==i));return{actorModels:r,actorNamesInDiscussions:r.map((e=>e.getDisplayName(h)))}}),[N,a,h,j.currentUser.id]),D=(0,n().K8)((()=>{var e;const t=N.at(0),i=null==t||null===(e=t.getCommentStores())||void 0===e?void 0:e.at(-1);return i&&t?{commentStore:i,discussionStore:t}:{author:void 0,commentStore:void 0,discussionStore:void 0}}),[N]),E=(0,n().K8)((()=>{var e;if(M)return null===(e=M.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:a.getRecordModel,discussionId:t.discussion_id,pageVisitSource:m().y8.Notification,updateSidebarTab:q&&q>1?i(370557).UL.ForYou:void 0})}),[M,a,t,q]),O=(0,u().IS)((e=>({latestComment:{fontSize:14,color:e.text.secondary,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden"},actorFirstSubheader:{display:"flex",alignItems:"center",gap:3}})),[]),z="actor"===(0,ti().r)("notification_ia"),F=(0,n().K8)((()=>P.map((e=>e.asActor)).filter(x().O9)),[P]),U=(0,n().K8)((()=>C.getIcon()),[C]),W=(0,n().K8)((()=>C.isEmptyPage()),[C]);return A&&w&&R&&_?(0,B.jsx)(nr().Nx,{isFirst:l,isLast:c,rootStore:a,navigableBlockId:I,notification:v,count:q,url:E,header:z?{icon:(0,B.jsx)(be().H8,{authors:F,size:rr().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:(0,B.jsx)(Nr,{actorNames:L})}:void 0,subheader:z?(0,B.jsxs)("div",{style:O.actorFirstSubheader,children:["Commented in",(0,B.jsx)(Le().B,{disabled:!0,icon:U,isEmptyPage:W,size:16}),(0,B.jsx)(De().A,{store:C,style:{fontWeight:S().Wy.medium}})]}):`${L.join(", ")}`,body:D.commentStore&&D.discussionStore&&(0,B.jsx)("div",{style:O.latestComment,children:(0,B.jsx)(ui,{discussionStore:D.discussionStore,commentStore:D.commentStore})}),...(0,oe().$5)({notification:v,environment:j,tab:g,activity:t})}):(s().log({level:"warning",from:"CommentPageGroupActivityNotification",type:"invalidNotificationData",data:{ids:[(null==v?void 0:v.id)??"unknown"]}}),null)}function Nr(e){let{actorNames:t}=e;if(1===t.length)return(0,B.jsx)("span",{children:t[0]});if(2===t.length)return(0,B.jsxs)("span",{children:[t[0]," and ",t[1]]});if(t.length>2){const e=t.length-1;return(0,B.jsxs)("span",{children:[t[0]," & ",e," ",1===e?"other":"others"]})}return null}const Pr=o.memo(qr);var Lr=()=>i(726646);function Dr(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{tab:d,notification:l}=o,c=(0,r().v3)(),u=(0,n().K8)((()=>(0,Wt().W9)(t.getEdits())),[t]),g=(0,n().K8)((()=>{const e=u[0];return e?e.new_email:""}),[u]);return(0,B.jsx)(nr().Nx,{header:{icon:(0,B.jsx)(rr().S7,{icon:Lr().checkmarkFillIcon}),title:(0,B.jsx)(b().sA,{defaultMessage:"Email updated",id:"activity.emailEdited.header"})},body:(0,B.jsx)(b().sA,{defaultMessage:"Updated to {newEmail}",values:{newEmail:g},id:"activity.emailEdited.subheader.short"}),isFirst:a,isLast:s,rootStore:i,notification:l,url:void 0,...(0,oe().$5)({notification:l,activity:t,environment:c,tab:d})})}const Er=o.memo(Dr);function Or(e){const{activity:t,rootStore:i,tabArgs:a,isFirst:s,isLast:d}=e,{tab:l,notification:c}=a,u=(0,r().v3)(),g=(0,n().K8)((()=>t.getEdits()),[t]),m=(0,o.useCallback)((()=>{window.open(g[0].link,"_blank")}),[g]);return(0,B.jsx)(nr().Nx,{header:{icon:(0,B.jsx)(rr().S7,{icon:Lr().checkmarkFillIcon}),title:(0,B.jsx)(b().sA,{defaultMessage:"Your workspace export is ready",id:"activity.exportCompleted.header"})},body:(0,B.jsx)(b().sA,{defaultMessage:"The download link will expire in 7 days.",id:"activity.exportCompleted.downloadLink"}),isFirst:s,isLast:d,rootStore:i,notification:c,url:void 0,...(0,oe().$5)({notification:c,activity:t,environment:u,tab:l}),children:(0,B.jsx)(kt().A,{size:"md",onClick:m,children:(0,B.jsx)(b().sA,{defaultMessage:"Download",id:"activity.actions.exportCompleted.download"})})})}const zr=o.memo(Or);function Fr(e){const{activity:t,rootStore:i,isFirst:o,isLast:a,tabArgs:s}=e,{tab:d,notification:l}=s,g=(0,r().v3)(),v=(0,b().tz)(),h=(0,n().K8)((()=>t.getEdits()),[t]),f=h.length>0,y=h[0],x="actor"===(0,ti().r)("notification_ia"),A=(0,n().K8)((()=>k().Bv.createChildStore(i,{table:p().ev,id:y.navigable_block_id,spaceId:i.id})),[i,y.navigable_block_id]),j=(0,n().K8)((()=>A.isDefined()),[A]),_=(0,n().K8)((()=>k().Bv.createChildStore(i,{table:p().ev,id:t.getMentionedBlockId(),spaceId:i.id})),[i,t]),M=(0,n().K8)((()=>{const e=_.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:m().y8.Notification})}),[i,_]),R=(0,n().K8)((()=>(0,c().Ln)({edits:h,rootStore:i})),[h,i]),I=R.map((e=>e.asActor)),C=(0,n().K8)((()=>{const e=R[0];if(e)return k().sk.createChildStore(i,e.pointer)}),[R,i]),w=(0,n().K8)((()=>{var e;return null==C||null===(e=C.getModel())||void 0===e?void 0:e.getDisplayName(v)}),[C,v]),K=(0,u().eP)(),T=(0,n().K8)((()=>{const e=(0,Mr().O4)({theme:K}),t=_.getTitleValue();return(0,ei().S5)({environment:g,textValue:{value:t,spaceId:i.id},parentStore:A,disableHover:!1,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!0,disableSuggestionAnnotations:!0,disabled:!0,emojiType:(0,Zt().FN)(g),theme:e,katex:g.KatexStore.getKatex(),formulaValueTypes:[]})}),[_,K,g,i,A]),q=(0,n().K8)((()=>{var e;const t=null===(e=A.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:A.getRecordModel}),i=A.isEmptyPage();return(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,B.jsx)(b().sA,{id:"activity.groupMentionActivity.subheaderPageTitle",defaultMessage:"Mentioned your group in {pageTitle}",values:{pageTitle:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Le().B,{disabled:!0,icon:t,isEmptyPage:i,size:16}),(0,B.jsx)(De().A,{store:A,style:{fontWeight:S().Wy.medium}})]})}})})}),[A]),N=(0,n().K8)((()=>{const e=(0,Mr().O4)({theme:K}),t=_.getTitleValue(),o=A.pointer.spaceId;if(o)return(0,ei().S5)({environment:g,textValue:{value:t,spaceId:o},parentStore:i,disableHover:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!0,disabled:!0,emojiType:(0,Zt().FN)(g),theme:e,katex:g.KatexStore.getKatex(),formulaValueTypes:[]})}),[_,K,A.pointer.spaceId,g,i]);return f&&j&&M?x?(0,B.jsx)(rr().my,{notificationTitleStore:A,header:{icon:(0,B.jsx)(be().H8,{authors:I,size:rr().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:w},subheader:q,body:N,isFirst:o,isLast:a,rootStore:i,navigableBlockId:A.id,notification:l,url:M,...(0,oe().$5)({notification:l,activity:t,environment:g,tab:d})}):(0,B.jsx)(nr().Nx,{subheader:w,body:(0,B.jsx)(b().sA,{defaultMessage:'Mentioned your group in "{renderedBlockText}"',values:{renderedBlockText:T},id:"activity.groupMentionActivity.body"}),isFirst:o,isLast:a,rootStore:i,navigableBlockId:A.id,notification:l,url:M,...(0,oe().$5)({notification:l,activity:t,environment:g,tab:d})}):null}const Ur=o.memo(Fr);function Wr(e){const{activity:t,rootStore:o,tabArgs:a,isFirst:s,isLast:d}=e,{tab:l,notification:c}=a,u=(0,r().v3)(),g=(0,n().K8)((()=>t.getEdits()),[t]),v=(0,n().K8)((()=>{var e;const t=null===(e=g[0])||void 0===e?void 0:e.teamspace_id;if(t)return k().sk.createChildStore(o,{table:f().yK,id:t,spaceId:o.id})}),[o,g]),h=(0,n().K8)((()=>null==v?void 0:v.getName()),[v]),{import_source:y,import_status:x,version:S,landing_page:A,collection_page_ids:j}=g[0],_=(0,zi().A)({pageId:A,pageVisitSource:m().y8.Import}),M="successful"===x?(0,B.jsx)(rr().S7,{icon:Lr().checkmarkFillIcon}):(0,B.jsx)(rr().S7,{icon:Ar().xMarkFillIcon}),{body:R,header:I,children:C}=(0,n().K8)((()=>{const e=Boolean(y)?(0,i(257987).A)(y):void 0,t=(0,B.jsx)(b().sA,{defaultMessage:"{importSource, select, false {External} other {{importSource}}} import failed",id:"importCompletedActivity.importFailed.header",values:{importSource:e,importStatus:x}}),r=(0,B.jsx)(b().sA,{defaultMessage:"{importSource, select, false {External} other {{importSource}}} import was successful",id:"importCompletedActivity.importSuccess.header",values:{importSource:e,importStatus:x}}),n=(0,B.jsx)(b().sA,{defaultMessage:"View projects and tasks in Notion",id:"importCompletedActivity.projects.redirect"}),a=(0,B.jsx)(b().sA,{defaultMessage:"View boards in Notion",id:"importCompletedActivity.boards.redirect"}),s=(0,B.jsx)(b().sA,{defaultMessage:"View import logs",id:"importCompletedActivity.loggerPage.redirect"}),d=null==j?void 0:j[0];let l,c="successful"===x?r:t;if("Jira"===e&&(v&&"successful"===x&&(c=(0,B.jsx)(b().sA,{defaultMessage:"Your Jira projects and tasks have been synced to {teamName}",id:"importCompletedActivity.jiraSuccess.header",values:{teamName:h}})),d)){const e=k().Bv.createChildStore(o,{id:d.projectCollectionPageId,spaceId:o.id,table:p().ev}),t=k().Bv.createChildStore(o,{id:d.taskCollectionPageId,spaceId:o.id,table:p().ev});l=(0,B.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,B.jsx)(kt().A,{size:"md",onClick:()=>{var t;const i=null===(t=e.getModel())||void 0===t?void 0:t.getRenderUrl({pageVisitSource:m().y8.Import,getRecordModel:e.getRecordModel});i&&Mt().oo({environment:u,url:i})},children:(0,B.jsx)(b().sA,{defaultMessage:"View project",id:"importCompletedActivity.project.redirect"})}),(0,B.jsx)(kt().A,{size:"md",onClick:()=>{var e;const i=null===(e=t.getModel())||void 0===e?void 0:e.getRenderUrl({pageVisitSource:m().y8.Import,getRecordModel:t.getRecordModel});i&&Mt().oo({environment:u,url:i})},children:(0,B.jsx)(b().sA,{defaultMessage:"View task",id:"importCompletedActivity.task.redirect"})})]})}return{header:c,body:"successful"===x?"Monday"===e&&"v2"===S?a:n:s,children:l}}),[j,x,y,S,v,h,o,u]);return g.length?(0,B.jsx)(nr().Nx,{header:{icon:M,title:I},body:R,isFirst:s,isLast:d,rootStore:o,notification:c,url:_,...(0,oe().$5)({notification:c,activity:t,environment:u,tab:l}),children:C}):null}const Vr=o.memo(Wr);function Hr(e){const{activity:t,tabArgs:i}=e,{tab:o,notification:a}=i,s=(0,r().v3)(),d=(0,n().K8)((()=>t.getEdits()),[t]),l=d.length>0,c={tab:o,notificationId:null==a?void 0:a.id,environment:s,alreadyRead:Boolean(null==a?void 0:a.read),activity:t},g=(0,u().IS)((e=>({notificationContainer:{paddingBlock:"8px 4px",display:"flex",flexDirection:"column",rowGap:8}})),[]);return l?(0,B.jsx)(on,{analyticsInfo:c,children:(0,B.jsx)(Gr,{...e,edits:d,style:g.notificationContainer})}):null}const $r=1;function Gr(e){const{rootStore:t,activity:i,isLast:a,tabArgs:s,edits:d,style:l,isFirst:c}=e,{tab:g,notification:v,source:h}=s,f=(0,r().v3)(),y=(0,b().tz)(),A=d.at(0),[j,_]=(0,o.useState)(null),M=(0,o.useMemo)((()=>j&&j.scrollHeight>j.clientHeight),[j]),R=(0,n().K8)((()=>{if(!A)return;const e=k().Bv.createChildStore(t,{table:p().ev,id:A.navigable_block_id});return(0,x().O9)(e)?e:void 0}),[A,t]),I=(0,n().K8)((()=>{const e=null==R?void 0:R.getModel();if(e)return e.getRenderUrl({getRecordModel:t.getRecordModel,pageVisitSource:m().y8.Notification})}),[t,R]),C=(0,u().IS)((e=>({container:{paddingBlock:4,display:"flex",flexDirection:"row",columnGap:1.5*Number((0,xe().AG)(e).paddingLeft),alignItems:"center"}})),[]),w=(0,o.useMemo)((()=>new Set(d.map((e=>e.automation_id)))),[d]),K=(0,n().K8)((()=>[...w].map((e=>{const i=t.getRecordStore(t,{table:Tt().yB,id:e,spaceId:t.id}),o=i.getRole();return(0,x().O9)(o)&&(0,V().Tt)(o)?i.getAlive()?i.getNameWithDefault(y):y.formatMessage(Bt().VS.automationDeletedName):y.formatMessage(Bt().VS.automationPrivateName)}))),[y,t,w]),T="actor"===(0,ti().r)("notification_ia");return(0,x().O9)(R)&&(0,x().O9)(A)?(0,B.jsx)(nr().Nx,{header:{icon:T?(0,B.jsx)(rr().S7,{icon:Lr().checkmarkFillIcon}):(0,Lr().checkmarkFillIcon)({width:16,height:16}),title:(0,B.jsx)(Jr,{rootStore:t,uniqueAutomations:w,firstEdit:A,spaceId:i.spaceId,environment:f,shortened:w.size>1,titleStyle:{fontWeight:S().Wy.semibold}})},subheader:K.join(", "),body:d.slice(-1*$r).map(((t,i)=>(0,B.jsx)("div",{children:(0,B.jsx)(Xr,{...e,edit:t,isViewAllMenu:!1,source:h,isLast:d.length>$r?i===d.length-1-$r:i===d.length-1,clampedMessageContainerRef:_})},i))),isFirst:c,isLast:a,rootStore:t,navigableBlockId:R.id,notification:v,url:I,...(0,oe().$5)({notification:v,activity:i,environment:f,tab:g}),children:(M||d.length>$r)&&(0,B.jsx)("div",{style:l,children:(0,B.jsx)("div",{style:C.container,children:(0,B.jsx)(Yr,{edits:d,rootStore:t,activity:i,navigableBlockStore:R,source:h})})})}):null}function Yr(e){const{edits:t,rootStore:i,activity:a,navigableBlockStore:s,source:d}=e,l=(0,r().Y0)(),c=(0,r().v3)(),{handleAnalyticsForPopupMenu:g}=(0,o.useContext)(tn),m=(0,n().uB)(void 0,oo().A),v=(0,o.useCallback)((()=>m.reset()),[m]),p=(0,o.useMemo)((()=>(0,B.jsx)(b().sA,{defaultMessage:"{numNotifications, plural, one {View more} other {View {numRemainingNotifications}}}",id:"inAppNotificationAutomationActionTriggeredActivity.renderViewAllNotificationsButton.buttonLabel",values:{numNotifications:t.length,numRemainingNotifications:t.length}})),[t.length]);let h;h=l.isMobile?{menuType:to().gu.Modal,title:p,right:(0,B.jsx)(ao().DoneMenuText,{}),onClickRight:v,whiteBackground:!0}:{menuType:to().gu.Popup,width:420,maxWidth:l.isMobileBrowser?"80vw":"100%"};const f=(0,u().IS)((e=>({actionButton:(0,xe().Ei)(e),divider:{borderBlockEnd:`1px solid ${e.regularDividerColor}`},viewAllMenuNotificationContainer:{display:"flex",flexDirection:"column",padding:12},viewAllMenuHeaderContainer:{display:"flex",flexDirection:"row",gap:Fe},popupMenu:{marginInlineStart:-2,fontSize:Xe}})),[]),y=(0,o.useId)();return(0,B.jsx)(we().Ay,{buttonPopupStore:m,popupType:l.isMobile?io().n.SlideUp:io().n.Popup,placementToOrigin:Pe().W.Bottom,alignmentToOrigin:Pe().C.Center,originGap:4,onClick:()=>!m.state.open&&g(),renderOrigin:e=>(0,B.jsx)(K().p,{isGray:!0,size:"xs",...e,style:f.actionButton,children:p}),render:()=>(0,B.jsx)(no().A,{...h,children:(0,B.jsx)("div",{style:f.popupMenu,children:t.map(((o,r)=>(0,B.jsxs)("div",{children:[(0,B.jsxs)("div",{style:f.viewAllMenuNotificationContainer,children:[(0,B.jsxs)("div",{style:f.viewAllMenuHeaderContainer,children:[(0,B.jsx)(en,{}),(0,B.jsx)(lo,{timestamp:o.timestamp,titleAriaId:y,onBacklinkClick:()=>null,disableJustify:!0,header:(0,B.jsx)(Jr,{rootStore:i,uniqueAutomations:new Set([o.automation_id]),firstEdit:o,spaceId:a.spaceId,environment:c,closeViewAllMenu:v,shortened:!0,titleStyle:{fontWeight:S().Wy.semibold},verbose:!0}),rootStore:i,navigableBlockId:s.id,showRecordPath:!1})]}),(0,B.jsx)(Xr,{...e,edit:o,isViewAllMenu:!0,source:d,isLast:r===t.length-1},r)]}),r!==t.length-1&&(0,B.jsx)("div",{style:f.divider})]},r)))})})})}const Qr=4;function Xr(e){const{edit:t,rootStore:i,source:o,isViewAllMenu:a,clampedMessageContainerRef:s}=e,d=(0,u().DP)(),l=(0,r().v3)(),c=(0,r().Y0)(),{isMobile:g}=c,m=(0,n().K8)((()=>l.KatexStore.getKatex()),[l]),v=(0,Zt().Ol)(),p=(0,n().K8)((()=>(0,B.jsx)("div",{children:(0,ei().S5)({environment:l,textValue:t.message.value?{value:t.message.value,spaceId:t.space_id}:void 0,parentStore:i,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disabled:!1,theme:d,emojiType:v,katex:m,parentBlockId:void 0,renderedPageBlockId:void 0,formulaValueTypes:[],stopLinkPropagation:!0})})),[l,v,m,d,t.message.value,i,t.space_id]),h=(0,u().IS)((e=>({container:{paddingInlineStart:a?32:(0,xe().F9)({source:o,isMobile:g}),paddingBlockEnd:4},messageContainer:{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center"},clampedMessageContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:a?void 0:Qr,verticalAlign:"top",textAlign:"left",lineHeight:S().K_.UIRegular.desktop,...S().RC},messageContent:{whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:Xe,lineHeight:(0,Wi().ks)({device:c},"UIRegular"),paddingInlineEnd:8}})),[g,o,c,a]);return(0,B.jsx)("div",{style:{...a&&h.container,...h.messageContainer},children:(0,B.jsx)("div",{ref:s,style:h.clampedMessageContainer,children:(0,B.jsx)("div",{style:h.messageContent,children:p})})})}function Jr(e){const{rootStore:t,spaceId:i,environment:o,closeViewAllMenu:r,shortened:a,titleStyle:s,firstEdit:d,uniqueAutomations:l,verbose:c=!1}=e,u=(0,b().tz)(),g=1===l.size,v=(0,n().K8)((()=>!k().dn.createChildStore(t,{table:Tt().yB,id:d.automation_id,spaceId:t.getSpaceId()}).getAlive()),[t,d]),h=(0,n().K8)((()=>{const e=new(k().Bv)(o,{id:d.automation_navigable_block_id,table:p().ev}).getRole();return!e||!(0,V().Tt)(e)}),[d,o]),f=(0,n().K8)((()=>{if(!(v&&g||h))return()=>{const e=d.automation_navigable_block_id,i=d.automation_id,n=k().Bv.createChildStore(t,{table:p().ev,id:e});if(!n)return;r&&r();const a=(0,Rt().Ay)({store:n,preferPublicLink:!1,pageVisitSource:m().y8.Notification});Mt().oo({environment:o,url:a,callback:async()=>await zt({environment:o,automationNavigableBlockStore:n,automationId:g?i:void 0,rootStore:t,source:"in_app_notification"})})}}),[o,g,d,t,r,v,h]),y=(0,n().K8)((()=>[...l].map((e=>{const o=t.getRecordStore(t,{table:Tt().yB,id:e,spaceId:i}),r=o.getRole();return(0,x().O9)(r)&&(0,V().Tt)(r)?o.getAlive()?o.getNameWithDefault(u):u.formatMessage(Bt().VS.automationDeletedName):u.formatMessage(Bt().VS.automationPrivateName)}))),[u,t,i,l]);return a?c?(0,B.jsx)("div",{style:{...s,display:"inline-flex"},children:(0,B.jsx)(Zr,{handleAutomationNavigate:f,automationNames:y})}):(0,B.jsx)(b().sA,{defaultMessage:"Messages from automations",id:"inAppNotificationAutomationActionTriggeredActivity.multipleAutomation.header"}):c?(0,B.jsx)(b().sA,{id:"inAppNotificationAutomationActionTriggeredActivity.formattedHeaderMessage.automationTitle",defaultMessage:"{automationNameWrappedHeader} sent you a message",values:{automationNameWrappedHeader:(0,B.jsx)("div",{style:{...s,display:"inline-flex"},children:(0,B.jsx)(Zr,{handleAutomationNavigate:f,automationNames:y})})}}):(0,B.jsx)(b().sA,{defaultMessage:"Messages from automation",id:"inAppNotificationAutomationActionTriggeredActivity.singleAutomation.header"})}function Zr(e){const{automationNames:t,handleAutomationNavigate:i}=e,o=(0,b().tz)(),r=t.at(0),n=t.length,a=n-2,s=o.formatList([...t.slice(0,2),a>0?o.formatMessage({defaultMessage:"{numRemainingAutomations} more",id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.tooltipNumRemainingAutomations"},{numRemainingAutomations:a}):void 0].filter(x().O9),{style:"long",type:"conjunction"}),d={defaultMessage:"{numAutomations, plural, one {{firstAutomationName}} other {{numAutomations} automations}}",values:{firstAutomationName:r,numAutomations:n},id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.automationName",description:"The display name for an automation."},l=e=>i?(0,B.jsx)(Nt().A,{...e,onClick:i,children:(0,B.jsx)(b().sA,{...d})}):(0,B.jsx)("div",{...e,children:(0,B.jsx)(b().sA,{...d,...e})});return 1===n?l():(0,B.jsx)(Be().A,{renderTooltip:e=>(0,B.jsx)("div",{...e,children:s}),render:e=>l(e)})}function en(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,B.jsx)(it,{children:(0,eo().v)(e.icon)})}const tn=(0,o.createContext)({handleAnalyticsForPopupMenu:()=>{}});function on(e){const{analyticsInfo:t,children:i}=e,r=(0,o.useCallback)((()=>$().mF(t)),[t]);return(0,B.jsx)(tn.Provider,{value:{handleAnalyticsForPopupMenu:r},children:i})}tn.displayName="InAppNotificationAutomationActionTriggeredAnalyticsContext";const rn=o.memo(Hr);function nn(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{tab:d,notification:l}=o,c=(0,r().v3)(),u=(0,b().tz)(),g=(0,n().K8)((()=>t.navigable_block_id),[t]),v=(0,n().K8)((()=>{const e=So().B.createChildStore(i,{table:p().ev,id:t.navigable_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:m().y8.Notification})}),[t,i]),h=(0,B.jsx)("span",{children:(0,B.jsx)(b().sA,{defaultMessage:"<b>{author}</b> did not find conflicts",id:"activity.noConflictsFound.header",values:{author:xo().px.getDisplayName(u),b:e=>(0,B.jsx)("span",{style:{fontWeight:S().Wy.semibold},children:e})}})});return v?(0,B.jsx)(ot,{header:h,isFirst:a,isLast:s,isPrivate:!0,rootStore:i,navigableBlockId:g,notification:l,icon:(0,B.jsx)(be().H8,{authors:[xo().px],size:Ue,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:v,...(0,oe().$5)({notification:l,activity:t,environment:c,tab:d})}):null}const an=o.memo(nn);function sn(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{tab:d,notification:l}=o,u=(0,r().v3)(),g=(0,b().tz)(),v=(0,n().K8)((()=>t.getEdits()),[t]),h=v[0],f=(0,n().K8)((()=>(0,c().Ln)({edits:v,rootStore:i})),[v,i]),x=(0,n().K8)((()=>(0,c().bD)(f,{fontWeight:S().Wy.regular})),[f]),A=k().sk.createChildStore(i,{table:p().ev,id:t.navigable_block_id,spaceId:i.id}),j=k().sk.createChildStore(i,{table:y().oo,id:h.from_user_id,spaceId:i.id}),_=(0,n().K8)((()=>j.getDisplayName(g)),[j,g]),M=(0,n().K8)((()=>{var e;return null===(e=A.getModel())||void 0===e?void 0:e.getRenderUrl({pageVisitSource:m().y8.Notification,getRecordModel:A.getRecordModel})}),[A]);return v.length>0?(0,B.jsx)(nr().Nx,{header:{icon:(0,B.jsx)(rr().S7,{icon:Lr().checkmarkFillIcon}),title:(0,B.jsx)(b().sA,{defaultMessage:"Private content transfer",id:"activity.privateContentTransferred.header"})},body:(0,B.jsx)(b().sA,{defaultMessage:"{authorPhrase} transferred {fromUserName}{fromUserNameEndsWithS, select, true {’} other {’s}} private pages to you",values:{authorPhrase:x,fromUserName:_,fromUserNameEndsWithS:"s"===_.slice(-1).toLowerCase()},id:"activity.privateContentTransferred.standardizedHeader.short"}),rootStore:i,notification:o.notification,isFirst:a,isLast:s,url:M,...(0,oe().$5)({notification:l,activity:t,environment:u,tab:d})}):null}const dn=o.memo(sn);function ln(e){const{activity:t,tabArgs:i,rootStore:o,isFirst:a,isLast:s}=e,{tab:l,notification:c}=i,g=(0,b().tz)(),v=(0,n().K8)((()=>t.getEdits()),[t]),p=(0,r().v3)(),h=(0,n().K8)((()=>{const e=t.discussion_id;if(!v||!t.discussion_id)return;const{reacted_comment_id:i}=v[0],r=i?jo().SN:d().$Y,n=i??e;return o.getRecordStore(o,{table:r,id:n,spaceId:t.space_id})}),[v,t,o]),f=(0,n().K8)((()=>{if(h){if(h.table===jo().SN){const e=h.getParentStore();return null==e?void 0:e.getParentStore()}return h.table===d().$Y?h.getParentStore():void 0}}),[h]),y=(0,n().K8)((()=>{const e=null==f?void 0:f.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,f]),A=(0,n().K8)((()=>{var e;if(f)return null===(e=f.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:o.getRecordModel,discussionId:t.discussion_id,pageVisitSource:m().y8.Notification})}),[f,o,t]),j=(0,n().K8)((()=>{if(!h)return[];const e=(h.getReactionPointers()??[]).map((e=>k().sk.createChildStore(o,e)));let t;var i;h instanceof k().jg&&(t=null===(i=h.getCreatedById)||void 0===i?void 0:i.call(h));if(h instanceof k().cc){const e=h.getParentStore();t=null==e?void 0:e.getCreatedById()}const r=(0,P().hS)(e.flatMap((e=>{var t;return(null===(t=e.getActorPointers())||void 0===t?void 0:t.filter(x().O9))??[]})).filter((e=>e.id!==t)),"id"),n=new Map;null==v||v.forEach((e=>{"reaction-created"===e.type&&e.authors&&e.authors.forEach((t=>{const i=n.get(t.id)??0;e.timestamp>i&&n.set(t.id,e.timestamp)}))}));return r.sort(((e,t)=>{const i=n.get(e.id)??0;return(n.get(t.id)??0)-i}))}),[h,o,v]),_=(0,n().K8)((()=>{if(null==v||!v.length)return;const e=v.filter((e=>"reaction-created"===e.type)),i=e.reduce(((e,t)=>e.timestamp>t.timestamp?e:t),e[0]);if(null==i||!i.reaction_id)return;const r=o.getRecordStore(o,{table:_o().ez,id:i.reaction_id,spaceId:t.space_id});return null==r?void 0:r.getIcon()}),[t,o,v]),M=(0,u().DP)(),R=(0,n().K8)((()=>{var e;if(!(h instanceof k().jg))return;const i=ci().gp(h).getValue();if(!i)return;const o=(0,li().Eh)({textValue:i,currentUserId:p.currentUser.id,getRecordModel:h.getRecordModel,highlightStyle:"text_only"}),r=(0,ei().S5)({environment:p,textValue:{value:o,spaceId:t.space_id},parentStore:h,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableHover:!0,disabled:!0,theme:M,emojiType:(0,Zt().FN)(p),katex:p.KatexStore.getKatex(),formulaValueTypes:[]});return`${Array.isArray(r)&&(null===(e=r[0])||void 0===e||null===(e=e.props)||void 0===e?void 0:e.children)||""}`}),[h,p,M,t.space_id]),I=(0,n().K8)((()=>j.map((e=>{var t;return null===(t=k().sk.createChildStore(o,e).getModel())||void 0===t?void 0:t.getDisplayName(g)})).filter(x().O9).join(", ")),[j,o,g]),C=(0,n().K8)((()=>{var e;if(!f)return null;const t=null===(e=f.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:o.getRecordModel}),i=f.isEmptyPage();return(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,B.jsx)(b().sA,{id:"activity.reactionActivity.pageTitleText",defaultMessage:"Reacted in {pageTitle}",values:{pageTitle:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Le().B,{disabled:!0,icon:t,isEmptyPage:i,size:16}),(0,B.jsx)(De().A,{store:f,style:{fontWeight:S().Wy.medium}})]})}})})}),[f,o]),w="actor"===(0,ti().r)("notification_ia");if(!h||!f)return null;const K=h instanceof k().jg;return w?(0,B.jsx)(rr().my,{notificationTitleStore:f,header:{icon:_?(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24},children:(0,B.jsx)(Mo().A,{char:_,size:20})}):null,title:I},subheader:C,body:(0,B.jsxs)("div",{children:[(0,B.jsx)("div",{style:{marginBottom:3},children:R}),(0,B.jsx)("div",{children:(0,B.jsx)(Qt().fj,{parentStore:h,discussionLocation:"updates_menu_archive"})})]}),isFirst:a,isLast:s,rootStore:o,navigableBlockId:y,notification:c,url:A,...(0,oe().$5)({notification:c,environment:p,tab:l,activity:t})}):(0,B.jsx)(nr().Nx,{notificationTitleStore:f,subheader:I,body:(0,B.jsx)(b().sA,{defaultMessage:"Reacted {emoji}{hasComment, select, true { to {commentContent}} other {}}",id:"activity.reactionActivity.reactionMessage",values:{emoji:_?(0,B.jsx)(Mo().A,{char:_,size:16}):null,hasComment:Boolean(K&&R),commentContent:R}}),isFirst:a,isLast:s,rootStore:o,navigableBlockId:y,notification:c,url:A,...(0,oe().$5)({notification:c,environment:p,tab:l,activity:t})})}const cn=o.memo(ln);function un(e){const{activity:t,rootStore:o,tabArgs:a,isFirst:s,isLast:d}=e,{notification:l,tab:c}=a,u=(0,r().v3)(),g=(0,n().K8)((()=>t.getEdits()),[t]),v=g.length>0,h=k().Bv.createChildStore(o,{table:p().ev,id:g[0].navigable_block_id}),f=(0,n().K8)((()=>h.isDefined()),[h]),y=(0,n().K8)((()=>{const e=k().Bv.createChildStore(o,{table:p().ev,id:t.reminder_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:m().y8.Notification})}),[t,o]),x=(0,n().K8)((()=>{var e;const t=null===(e=h.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:o.getRecordModel}),i=h.isEmptyPage();return(0,B.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[(0,B.jsx)(Le().B,{disabled:!0,icon:t,isEmptyPage:i,size:16}),(0,B.jsx)(De().A,{store:h,style:{fontWeight:S().Wy.medium}})]})}),[h,o]),A="actor"===(0,ti().r)("notification_ia");return v&&f&&y?A?(0,B.jsx)(rr().my,{notificationTitleStore:h,header:{icon:(0,B.jsx)(rr().S7,{icon:i(508026).alarmIcon}),title:(0,B.jsx)(b().sA,{defaultMessage:"Reminder",id:"activity.reminderInActivity.header.short"})},subheader:x,body:(0,B.jsx)(Vt().A,{edit:g[0],rootStore:o}),isFirst:s,isLast:d,rootStore:o,navigableBlockId:h.id,notification:l,url:y,...(0,oe().$5)({notification:l,activity:t,environment:u,tab:c})}):(0,B.jsx)(nr().Nx,{subheader:(0,B.jsx)(b().sA,{defaultMessage:"Reminder",id:"activity.reminderInActivity.header.short"}),body:(0,B.jsx)(Vt().A,{edit:g[0],rootStore:o}),isFirst:s,isLast:d,rootStore:o,navigableBlockId:h.id,notification:l,url:y,...(0,oe().$5)({notification:l,activity:t,environment:u,tab:c})}):null}const gn=o.memo(un);function mn(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),g=(0,n().K8)((()=>t.getEdits()),[t]),v=g.length>0,p=(0,n().K8)((()=>(0,c().Ln)({edits:g,rootStore:i})),[g,i]),h=(0,n().K8)((()=>(0,c().bD)(p,{...(0,R()._m)()})),[p]),y=g[0],x=(0,n().K8)((()=>k().h4.createChildStore(i,{table:f().yK,id:y.team_id})),[i,y.team_id]),A=(0,n().K8)((()=>{var e;return null===(e=x.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:x.getRecordModel})}),[x]),j=(0,n().K8)((()=>x.isDefined()),[x]),_=(0,n().K8)((()=>{if((0,Ko().D)({isMobileNative:u.device.isMobileNative}))return(0,wo().a)({teamId:y.team_id,spaceId:x.getSpaceId(),pageVisitSource:m().y8.Notification})}),[y.team_id,u,x]),M="actor"===(0,ti().r)("notification_ia");return v&&j&&x?M?(0,B.jsx)(rr().my,{notificationTitleStore:x,header:{icon:(0,B.jsx)(be().H8,{authors:p,size:rr().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:h},subheader:(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,B.jsx)(b().sA,{defaultMessage:"Invited you to {teamIconAndName}",id:"activity.teamMembershipEdited.subheader",values:{teamIconAndName:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Le().B,{disabled:!0,icon:A,isEmptyPage:!1,size:16}),(0,B.jsx)(De().A,{store:x,style:{fontWeight:S().Wy.medium}})]})}})}),isFirst:a,isLast:s,rootStore:i,notification:d,url:_,...(0,oe().$5)({notification:d,activity:t,environment:u,tab:l})}):(0,B.jsx)(nr().Nx,{notificationTitleStore:x,subheader:h,body:(0,B.jsx)(b().sA,{defaultMessage:"Invited you to the teamspace",id:"activity.teamMembershipEdited.body"}),isFirst:a,isLast:s,rootStore:i,notification:d,url:_,...(0,oe().$5)({notification:d,activity:t,environment:u,tab:l})}):null}const vn=o.memo(mn);function pn(e){const{activity:t,rootStore:i,isFirst:o,isLast:a,tabArgs:s}=e,{tab:d,notification:l}=s,g=(0,r().v3)(),v=(0,b().tz)(),h=(0,n().K8)((()=>t.getEdits()),[t]),f=h.length>0,y=h[0],x=(0,n().K8)((()=>k().Bv.createChildStore(i,{table:p().ev,id:y.navigable_block_id})),[y,i]),A=(0,n().K8)((()=>x&&x.isDefined()),[x]),j=(0,n().K8)((()=>k().Bv.createChildStore(i,{table:p().ev,id:t.mentioned_block_id,spaceId:i.id})),[t,i]),_=(0,n().K8)((()=>{const e=j.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:m().y8.Notification})}),[j,i]),M=(0,u().eP)(),R=(0,n().K8)((()=>{const e=(0,Mr().O4)({theme:M}),t=j.getTitleValue();return(0,ei().S5)({environment:g,textValue:{value:t,spaceId:i.id},parentStore:x,disableHover:!1,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!0,disableSuggestionAnnotations:!0,disabled:!0,emojiType:(0,Zt().FN)(g),theme:e,katex:g.KatexStore.getKatex(),formulaValueTypes:[]})}),[j,M,g,i,x]),I=(0,n().K8)((()=>(0,c().Ln)({edits:h,rootStore:i})),[h,i]),C=I.map((e=>e.asActor)),w=(0,n().K8)((()=>{const e=I[0];if(e)return e}),[I]),K=(0,n().K8)((()=>w?w.getDisplayName(v):null),[w,v]),T=(0,n().K8)((()=>{var e;if(!x)return null;const t=null===(e=x.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:i.getRecordModel}),o=x.isEmptyPage();return(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,B.jsx)(b().sA,{id:"activity.teamMentionActivity.pageTitleText",defaultMessage:"Mentioned your teamspace in {pageTitle}",values:{pageTitle:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Le().B,{disabled:!0,icon:t,isEmptyPage:o,size:16}),(0,B.jsx)(De().A,{store:x,style:{fontWeight:S().Wy.medium}})]})}})})}),[x,i]),q="actor"===(0,ti().r)("notification_ia");return f&&A&&_?q?(0,B.jsx)(rr().my,{notificationTitleStore:x,header:{icon:(0,B.jsx)(be().H8,{authors:C,size:rr().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:K},subheader:T,body:(0,B.jsx)(b().sA,{defaultMessage:'"{blockText}"',id:"activity.teamMentionActivity.bodyBlockText",values:{blockText:R}}),isFirst:o,isLast:a,rootStore:i,navigableBlockId:x.id,notification:l,url:_,...(0,oe().$5)({notification:l,activity:t,environment:g,tab:d})}):(0,B.jsx)(nr().Nx,{subheader:K,body:(0,B.jsx)(b().sA,{defaultMessage:'Mentioned your teamspace, "{blockText}"',id:"activity.teamMentionActivity.body",values:{blockText:R}}),isFirst:o,isLast:a,rootStore:i,navigableBlockId:x.id,notification:l,url:_,...(0,oe().$5)({notification:l,activity:t,environment:g,tab:d})}):null}const hn=o.memo(pn);function fn(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:s}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),g=(0,b().tz)(),v=(0,n().K8)((()=>t.getEdits()),[t]),p=bn({spaceStore:i,edit:v[0]}),h=(0,n().K8)((()=>(0,c().Ln)({edits:v,rootStore:i})),[v,i]),f=(0,n().K8)((()=>{if("block"===(null==p?void 0:p.type))return p.blockStore}),[p]),y=(0,n().K8)((()=>{if(!f)return;const e=f.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:m().y8.Notification}):void 0}),[f,i.getRecordModel]),x=(0,n().K8)((()=>t.navigable_block_id),[t]),A=function(e){const{edit:t,activity:i,spaceStore:o}=e,r=bn({spaceStore:o,edit:t}),a=(0,n().K8)((()=>parseInt(i.getEndTime())),[i]),s=(0,n().K8)((()=>{if("block"!==(null==r?void 0:r.type))return;const e=r.blockStore;return null!=e&&e.isDefined()?e.getModel():void 0}),[r]);return(0,n().K8)((()=>{if(!s)return{isValid:!1};const e=s&&(0,Wo()._T)(s,i);if(!e)return{isValid:!1};const t=o.getRecordModel({table:Uo().Yx,id:e,spaceId:i.space_id});return t&&t.getMessage()&&t.getCreatedTime()<=a+5*Vo().Xb?{isValid:!0,message:t.getMessage()}:{isValid:!1}}),[i,a,s,o])}({edit:v[0],activity:t,spaceStore:i}),j=(0,n().K8)((()=>{if(p){if("block"===p.type)return p.blockStore;if("group"===p.type){const e=h[0];if(!e)return;return k().sk.createChildStore(i,e.pointer)}return"space"===p.type?p.spaceStore:void 0}}),[h,p,i]),_=(0,n().K8)((()=>{var e;return Boolean(null===(e=h[0])||void 0===e?void 0:e.isBot())}),[h]),M=(0,n().K8)((()=>{var e;return null===(e=h[0])||void 0===e?void 0:e.getDisplayName(g)}),[h,g]),R=(0,n().K8)((()=>{var e;if(!f)return null;const t=null===(e=f.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:i.getRecordModel}),o=f.isEmptyPage();return(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,B.jsx)(b().sA,{id:"activity.userInvitedActivity.pageTitleText",defaultMessage:"Invited you to {pageTitle}",values:{pageTitle:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Le().B,{disabled:!0,icon:t,isEmptyPage:o,size:16}),(0,B.jsx)(De().A,{store:f,style:{fontWeight:S().Wy.medium},underline:!1})]})}})})}),[f,i]),I="actor"===(0,ti().r)("notification_ia");return 0!==v.length&&p&&j?I?(0,B.jsx)(rr().my,{notificationTitleStore:j,header:{icon:(0,B.jsx)(be().H8,{authors:h.map((e=>e.asActor)),size:rr().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:M},subheader:"block"===p.type?R:void 0,body:(0,B.jsx)(yn,{data:p,inviteMessage:A,authors:h,isFromBot:_}),isFirst:a,isLast:s,rootStore:i,navigableBlockId:x,notification:d,url:y,...(0,oe().$5)({notification:d,environment:u,tab:l,activity:t})}):(0,B.jsx)(nr().Nx,{notificationTitleStore:j,subheader:"block"===p.type?h.map((e=>e.getDisplayName(g))).join(", "):void 0,body:(0,B.jsx)(yn,{data:p,inviteMessage:A,authors:h,isFromBot:_}),isFirst:a,isLast:s,rootStore:i,navigableBlockId:x,notification:d,url:y,...(0,oe().$5)({notification:d,environment:u,tab:l,activity:t})}):null}function yn(e){var t,i;const{data:o,inviteMessage:r,authors:a,isFromBot:s}=e,d=(0,n().K8)((()=>(0,c().bD)(a,{fontWeight:S().Wy.regular})),[a]),l="actor"===(0,ti().r)("notification_ia");switch(o.type){case"block":return s?(0,B.jsx)(b().sA,{defaultMessage:"You were invited to a page",id:"activity.userInvitedActivityByBot.standardizedHeader.redesign"}):l?(0,B.jsx)(b().sA,{defaultMessage:'{hasMessage, select, true {"{message}"} other {}}',id:"activity.userInvitedActivity.actorBody",values:{hasMessage:r.isValid&&r.message?"true":"false",message:r.isValid?r.message:""}}):(0,B.jsx)(b().sA,{defaultMessage:'Invited you to the page{hasMessage, select, true {, "{message}"} other {}}',id:"activity.userInvitedActivity.body",values:{hasMessage:r.isValid&&r.message?"true":"false",message:r.isValid?r.message:""}});case"group":return s?(0,B.jsx)(b().sA,{defaultMessage:"You were added to @{groupName}",values:{groupName:null===(t=o.group)||void 0===t?void 0:t.name},id:"activity.userInvitedActivityGroupIdByBot.standardizedHeader.redesign"}):(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to @{groupName}} other {{authorOrAuthors} added you to @{groupName}}}",values:{numberOfAuthors:a.length,authorOrAuthors:d,groupName:null===(i=o.group)||void 0===i?void 0:i.name},id:"activity.userInvitedActivityGroupId.standardizedHeader.redesign"});case"space":return s?(0,B.jsx)(b().sA,{defaultMessage:"You were invited to a workspace",id:"activity.userInvitedActivityOtherInviteByBot.standardizedHeader.redesign"}):(0,B.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a workspace} other {{authorOrAuthors} invited you to a workspace}}",values:{numberOfAuthors:a.length,authorOrAuthors:d},id:"activity.userInvitedActivityOtherInvite.standardizedHeader.redesign"});default:(0,x().HB)(o)}}function bn(e){const{spaceStore:t,edit:i}=e;return(0,n().K8)((()=>{if(i)return i.navigable_block_id?{type:"block",blockStore:k().Bv.createChildStore(t,{table:p().ev,id:i.navigable_block_id})}:i.permission_group_id?{type:"group",group:(0,Fo().$I)({spaceId:i.space_id,permissionGroupId:i.permission_group_id,getRecordValue:t.getRecordValue})}:{type:"space",spaceStore:k().SL.createChildStore(t,{table:h().NX,id:i.space_id})}}),[i,t])}function xn(e){const{activity:t,rootStore:o,tabArgs:a,isFirst:s,isLast:d}=e,{tab:l,notification:u}=a,g=(0,r().v3)(),v=(0,n().K8)((()=>k().Bv.createChildStore(o,{table:p().ev,id:t.navigable_block_id})),[t,o]),h=(0,n().K8)((()=>v.isDefined()),[v]),f=(0,n().K8)((()=>{const e=v.getModel();if(e)return e.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:m().y8.Notification})}),[v,o]),y=(0,n().K8)((()=>t.collection_id?k().md.createChildStore(o,{table:er().Vl,id:t.collection_id,spaceId:t.space_id}):void 0),[t,o]),x=(0,n().K8)((()=>Boolean(null==y?void 0:y.isPageTreeCollection())),[y]),A=(0,n().K8)((()=>{let e;if(x){const t=null==y?void 0:y.getSchema();e=(t?Object.keys(t):[]).find((e=>{var i;return!!t&&"verification"===(null===(i=t[e])||void 0===i?void 0:i.type)}))}else e=tr()._e.Verification;let t=(0,B.jsx)(b().sA,{id:"Activity.author.unknown",defaultMessage:"Unknown"});if(e){const i=v.getPropertyValue(e),r=(0,tr().U1)(i);if(r){const e=r[0],i=(0,c().T9)(e,o);i&&i.asActor&&(t=(0,c().bD)([i],{...(0,R()._m)(),fontWeight:S().Wy.regular}))}}return t}),[v,y,x,o]),{activityStartTimestamp:j,activityEndTimestamp:_}=(0,n().K8)((()=>({activityStartTimestamp:parseInt(t.start_time),activityEndTimestamp:parseInt(t.end_time)})),[t]),M="actor"===(0,ti().r)("notification_ia");if(!h)return null;const I=j&&_?(0,B.jsx)(b().sA,{defaultMessage:"Last verified by {person} from {startDate} to {endDate}",values:{person:A,startDate:(0,Re().DG)(j),endDate:(0,Re().DG)(_)},id:"activity.verificationExpired.contentWithTimestamp"}):(0,B.jsx)(b().sA,{defaultMessage:"Last verified by {person}",values:{person:A},id:"activity.verificationExpired.contentWithoutTimestamp"}),C=x?(0,B.jsx)(b().sA,{defaultMessage:"Wiki verification expired",id:"activity.verificationExpiredWiki.body"}):(0,B.jsx)(b().sA,{defaultMessage:"Page verification expired",id:"activity.verificationExpiredPage.body"});return M?(0,B.jsx)(rr().my,{notificationTitleStore:v,header:{icon:(0,B.jsx)(rr().S7,{icon:i(392610).J}),title:C},body:I,isFirst:s,isLast:d,rootStore:o,navigableBlockId:v.id,notification:u,url:f,...(0,oe().$5)({notification:u,activity:t,environment:g,tab:l})}):(0,B.jsx)(nr().Nx,{subheader:C,body:I,isFirst:s,isLast:d,rootStore:o,navigableBlockId:v.id,notification:u,url:f,...(0,oe().$5)({notification:u,activity:t,environment:g,tab:l})})}const Sn={"block-property-edited":Tr,"user-mentioned":Kr,commented:Pr,"user-invited":o.memo(fn),reminder:gn,"email-edited":Er,"access-requested":br,"access-request-resolved":Sr,"team-membership-edited":vn,"private-content-transferred":dn,"permission-group-mentioned":Ur,"team-mentioned":hn,"verification-expired":o.memo(xn),"export-completed":zr,"import-completed":Vr,"in-app-notification-automation-action-triggered":rn,"no-conflicts-found":an,"automation-typecheck-error-raised":_r,reacted:cn,"upgrade-request-created":zo,"app-builder-notification":Ct,"external-integration-notification":Ei,"trial-created":Lo};function An(e){const{activity:t,rootStore:i}=e,{source:n,notification:a,tab:s,...l}=e,u=(0,r().v3)(),g=(0,o.useMemo)((()=>({source:n,notification:a,tab:s})),[n,a,s]);return(0,o.useEffect)((()=>{!function(e,t){if("commented"===e.type){const o=t.getRecordStore(t,{table:d().$Y,id:e.discussion_id,spaceId:e.space_id});if(o.isDefined()){const e=o.getCommentStores();for(const t of e){var i;null===(i=t.getCreatedByStore())||void 0===i||i.load()}}}}(t,i),u.KatexStore.loadIfNeeded((()=>function(e,t){const i=(0,c().U6)({activity:e,rootStore:t});if(!i)return;return i.context}(t,i)))}),[u.KatexStore,t,i]),(0,B.jsx)("div",{"data-activity-id":t.id,"data-notification-id":a.id,"data-notification-type":a.type,children:(0,B.jsx)(jn,{...l,tabArgs:g})})}function jn(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:d}=e,c=(0,n().K8)((()=>t.type),[t]),u=(0,l().X)("inbox_page_grouping_notification_style"),g=e.overrideUsePageGroupRedesign??u;if(!(0,a().Jc)(c))return s().log({level:"error",from:"ActivityNotification",type:"unsupportedActivityType",data:{message:`Activity type ${c} is not supported for ActivityNotification`}}),null;if(g){const e=Sn[c];return(0,B.jsx)(e,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:d})}const m=or[c];return(0,B.jsx)(m,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:d})}},465235:(e,t,i)=>{i.d(t,{D2:()=>A,Ip:()=>b,Jk:()=>x,YT:()=>S,e2:()=>f,g:()=>y});i(725707),i(491955);var o=()=>i(712437),r=()=>i(409211),n=()=>i(539174),a=()=>i(818369),s=()=>i(759625),d=()=>i(575015),l=()=>i(783759),c=()=>i(84543),u=()=>i(477784),g=()=>i(548694),m=()=>i(485966),v=()=>i(628854),p=()=>i(723);const h=(0,i(653998).YK)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function f(e){let{environment:t,userId:i,teamStore:o,user:r}=e;const a=o.getSpaceId();if(!a)return;await v().rU({environment:t,teamId:o.id,spaceId:a,teamUserInfo:r,isSettingDefaultTeam:!1,inviterId:i})&&(n().vo(t,{store:o,joined_role:"member",from:"team_invite_link"}),await y({environment:t,userId:i,teamStore:o}),d().D6({label:u().A.formatMessage(h.joinTeamSuccessMessage,{teamName:o.getName()})}))}async function y(e){let{environment:t,userId:i,teamStore:r}=e;const n=m().default.state.currentUserRootStore,a=r.getSpaceId();if(!a||!n)return;const s=n.getSpaceViewStores().filter((e=>e.getSpaceId()===a))[0];await l().tR({environment:t,spaceViewStore:s,userSettingsStore:void 0,userRootStore:n,pageVisitSource:o().y8.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),await p().J({environment:t,spaceId:a,userId:i}),v().L0({environment:t,teamStore:r,shouldScroll:!0})}async function b(e){let{environment:t,teamId:i,message:o}=e;if(!t.currentUser.id)return;"success"===(await a().callApi({eventName:"requestAccess",environment:t,data:{type:"current-actor-to-team",teamId:i,message:o}})).type?(n().XQ(t,{teamId:i}),await S({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{d().D6({label:u().A.formatMessage(h.requestTeamSuccessMessage)})}))):d().D6({label:u().A.formatMessage(h.requestTeamFailureMessage)})}async function x(e){let{environment:t,teamStore:i,accessRequestStore:o,status:a}=e;const d=o.getForActorId();if(!d)return;const l=o.getRecordModel({table:r().oo,id:d});if(l){if("approved"===a){const e=[{type:"member",entity_type:"user",user_id:l.id}];if(!(await v().Zd({environment:t,teamStore:i,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}c().createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,canUndo:!0,perform:e=>{s().zv({store:o,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:r().oo,resolved_by_id:t.currentUser.id,status:a}})}}),n().GW(t,{store:i,resolution:a})}}async function S(e){let{environment:t}=e;const{lastVisitedSpaceView:i,userRootStore:r,userSettingsStore:n}=await(0,g().ex)({environment:t,disableRedirectUrl:!1});i?await l().tR({environment:t,spaceViewStore:i,userRootStore:r,userSettingsStore:n,pageVisitSource:o().y8.BackForward,navigationType:"switchingToOrLoadingSpace"}):await l().t9({environment:t,userRootStore:r,userSettingsStore:n,pageVisitSource:o().y8.BackForward})}async function A(e){let{environment:t,teamId:i}=e;const o=await a().callApi({eventName:"getTeamAccessRequestMetadata",environment:t,data:{teamId:i}});if("success"===o.type)return o.data}},503880:(e,t,i)=>{i.d(t,{D:()=>r});i(242343);var o=i(163643);const r=(0,i(680369).wt)("personBadgeQuestionMark",{viewBox:"0 0 15 14",svg:(0,o.jsx)("path",{d:"M12.4551 5.41699C12.8037 5.41699 13.0088 5.19824 13.0088 4.93164V4.84961C13.0088 4.45996 13.2344 4.2207 13.7061 3.90625C14.3691 3.46875 14.8408 3.07227 14.8408 2.25195C14.8408 1.11719 13.8291 0.501953 12.667 0.501953C11.498 0.501953 10.7256 1.0625 10.5342 1.69141C10.5 1.80078 10.4795 1.91016 10.4795 2.02637C10.4795 2.33398 10.7188 2.49805 10.9443 2.49805C11.1836 2.49805 11.3271 2.38867 11.4502 2.22461L11.5732 2.06055C11.8125 1.66406 12.1748 1.43164 12.626 1.43164C13.248 1.43164 13.6514 1.78711 13.6514 2.30664C13.6514 2.77148 13.3643 2.99707 12.7695 3.41406C12.2773 3.75586 11.915 4.11816 11.915 4.78809V4.87695C11.915 5.23242 12.1064 5.41699 12.4551 5.41699ZM5.79004 6.99609C7.25293 6.99609 8.52441 5.68359 8.52441 3.97461C8.52441 2.28613 7.25293 1.03516 5.79004 1.03516C4.32715 1.03516 3.05566 2.31348 3.05566 3.98828C3.05566 5.68359 4.32031 6.99609 5.79004 6.99609ZM12.4414 7.4541C12.8379 7.4541 13.1797 7.13965 13.1797 6.74316C13.1797 6.34668 12.8447 6.03223 12.4414 6.03223C12.0381 6.03223 11.7031 6.35352 11.7031 6.74316C11.7031 7.13281 12.0449 7.4541 12.4414 7.4541ZM1.20312 13.3262H10.3701C11.1016 13.3262 11.5391 12.9844 11.5391 12.417C11.5391 10.6533 9.33105 8.21973 5.7832 8.21973C2.24219 8.21973 0.0341797 10.6533 0.0341797 12.417C0.0341797 12.9844 0.47168 13.3262 1.20312 13.3262Z"})})},508026:(e,t,i)=>{i.r(t),i.d(t,{alarmIcon:()=>n,iconDefinition:()=>r});i(242343);var o=i(163643);const r={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M5.791 1.886a.625.625 0 1 0-.801-.96L2.138 3.31a.625.625 0 1 0 .802.96zm4.834 3.839a.625.625 0 1 0-1.25 0v3.65H6.4a.625.625 0 0 0 0 1.25H10c.345 0 .625-.28.625-.625z"}),(0,o.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0M14.13 1.006a.625.625 0 0 0 .079.88l2.851 2.383a.625.625 0 1 0 .802-.96L15.01.927a.625.625 0 0 0-.88.079"})]})},n=(0,i(680369).wt)("alarm",r)},571909:(e,t,i)=>{i.d(t,{$:()=>d,t:()=>l});var o=()=>i(769884),r=()=>i(242297),n=()=>i(409211),a=()=>i(689491),s=()=>i(307542);function d(e,t){return e.getKeyStore("settings").getKeyStore("seen_guest_membership_requests").getValue()&&(0,s().nJ)()}function l(e,t){const i=o().Bj6.fromAccessRequest(e);if(!i.isPageAccessRequest())return!1;const s=i.getForActorPointer(t.id);return s.table===n().oo&&!a().V.createChildStore(t,r().i1({userId:s.id,spaceId:t.id})).isMember()}},685008:(e,t,i)=>{i.d(t,{p:()=>j,l:()=>x});i(403517),i(242343);var o=()=>i(237385),r=()=>i(803290),n=()=>i(174114),a=()=>i(350638),s=()=>i(14931),d=()=>i(653998),l=()=>i(110975),c=()=>i(35462),u=()=>i(482570),g=()=>i(209684),m=()=>i(103151),v=()=>i(274347);function p(e){let{totalCount:t,shownCount:i}=e;const o=t-i;return o>0?o:0}var h=()=>i(59279),f=i(163643);const y=24,b=4;function x(e){let{userStores:t,isClickable:i,useSecondaryColorTitle:a,useIconsOnly:g,totalCount:h,customAvatarStyles:x}=e;const j=(0,d().tz)(),_=(0,o().v3)(),M=(0,n().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingTop:8,paddingBottom:8},iconsWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},icons:{display:"flex",flexDirection:"row",alignItems:"center"},iconContainer:{marginRight:-y/4,display:"flex",alignItems:"center",justifyContent:"center"},avatar:{marginRight:4,...x},plusMore:{opacity:.5,marginLeft:4,display:"inline-block"},tooltip:{color:e.text.contrastPrimary,fontSize:12}})),[x]),R=t.slice(0,b),k=(0,r().K8)((()=>{if(R[0])return R.map((e=>{if(e)return e.computeWithRecordValues((t=>{let{getRecordValueAndSubscribe:i}=t;return i(e)}))}))}),[R]),I=k&&k[0],C=(0,f.jsxs)("div",{style:M.container,children:[(0,f.jsx)(u().A,{style:M.avatar,userValue:I,size:y}),(0,f.jsx)(d().sA,{id:"baseTable.usersCell.userName",defaultMessage:"{remainingCount, plural, =0 {<user>{firstUser}</user>} one {<user>{firstUser}</user><gray>+{remainingCount}</gray>} other {<user>{firstUser}</user><gray>+{remainingCount}</gray>}}",values:{firstUser:(0,s().c6)(j,I),remainingCount:p({totalCount:h||t.length,shownCount:1}),user:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,f.jsx)(c().A,{isSecondaryColor:a,children:t})},gray:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,f.jsx)(c().A,{style:M.plusMore,children:t})}}})]});let w=C;if(g){const e=p({totalCount:h||t.length,shownCount:R.length});w=(0,f.jsxs)("div",{style:M.iconsWrapper,children:[(0,f.jsx)("div",{style:M.icons,children:null==k?void 0:k.map(((e,t)=>(0,f.jsx)("div",{style:M.iconContainer,children:(0,f.jsx)(u().A,{userValue:e,size:y})},(null==e?void 0:e.id)||t)))}),e>0&&(0,f.jsx)(d().sA,{id:"baseTable.usersCell.remainingUsers",defaultMessage:"<gray>+{remainingCount}</gray>",values:{remainingCount:e,gray:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,f.jsx)(c().A,{style:{...M.plusMore,marginLeft:M.plusMore.marginLeft+-1*M.iconContainer.marginRight},children:t})}}})]})}if(!i)return(0,f.jsx)(m().A,{disableTooltip:t.length<=1,render:e=>(0,f.jsx)("div",{...e,children:w}),renderTooltip:()=>(0,f.jsx)(f.Fragment,{children:t.map(((e,t)=>(0,f.jsx)(c().A,{style:M.tooltip,children:(0,f.jsx)(A,{userStore:e})},e?e.id:t)))})});const K=t.map(((e,t)=>({key:null!=e&&e.id?null==e?void 0:e.id:t,render:t=>(0,f.jsx)(S,{userStore:e,...t}),action:()=>null!=e&&e.getEmail?l().f({environment:_,url:`mailto:${null==e?void 0:e.getEmail()}`}):void 0})));return(0,f.jsx)(v().ED,{hideDropdownIcon:!0,title:w,items:K,itemMaxWidth:380})}function S(e){let{userStore:t,...i}=e;const o=(0,r().K8)((()=>null==t?void 0:t.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:i}=e;return i(t)}))),[t]),s=(0,n().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingBlock:8,marginInline:4},avatarContainer:{display:"flex",justifyContent:"center",alignItems:"center"},copyContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",opacity:.5},nameContainer:{marginLeft:8,marginRight:8},name:{fontSize:14,lineHeight:1.2,maxWidth:400},email:{fontSize:12,lineHeight:1.2,opacity:.5,maxWidth:400}})),[]);return(0,f.jsxs)(g().p,{style:s.container,...i,children:[(0,f.jsx)("div",{style:s.avatarContainer,children:(0,f.jsx)(u().A,{userValue:o,size:y})}),(0,f.jsxs)("div",{style:s.nameContainer,children:[(0,f.jsx)(c().A,{style:s.name,children:(0,f.jsx)(A,{userStore:t})}),o?(0,f.jsx)(c().A,{style:s.email,children:o.email}):null]}),(0,f.jsx)("div",{style:s.copyContainer,children:(0,a().F)({height:18,width:18})})]})}function A(e){const t=(0,d().tz)(),{userStore:i}=e,o=(0,r().K8)((()=>null==i?void 0:i.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:t}=e;return t(i)}))),[i]);return(0,f.jsx)(f.Fragment,{children:(0,s().c6)(t,o)})}function j(){const e=(0,n().IS)((()=>({icon:{borderRadius:"100%"},title:{width:"80%"}})),[]);return(0,f.jsx)(h().mf,{titleStyles:e.title,includeIcon:!0,iconStyles:e.icon})}},761800:(e,t,i)=>{i.d(t,{M:()=>r,W:()=>o});const o={height:28,paddingLeft:8,paddingRight:8,paddingTop:4,paddingBottom:4,fontWeight:i(31448).Wy.medium},r={opacity:.4}},765787:(e,t,i)=>{i.d(t,{W:()=>r});var o=()=>i(349947);const r=new(i(967203).U)((e=>{let{userId:t,spaceId:i}=e;return`${t}-${i}`}),(async function(e,t){var r;let{userId:n,spaceId:a}=t;const[s,d]=await Promise.all([o().sy({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,pointer:{table:i(409211).oo,id:n},userId:n}),o().sy({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,pointer:(0,i(242297).i1)({userId:n,spaceId:a}),userId:n})]),l=null===(r=i(485966).default.state.currentSpaceViewStore)||void 0===r||null===(r=r.getModel())||void 0===r?void 0:r.first_joined_space_time,c=null==s?void 0:s.value,u=null==d?void 0:d.value;if(c&&u&&l)return{id:c.id,space_id:u.id,membership_type:u.membership_type,email:c.email,name:c.name,profile_photo:c.profile_photo,onboarding_completed:c.onboarding_completed,first_joined_space_time:l}}));i(996094).exposeDebugValue("UserOnSpaceStore",r)}}]);