"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[27229],{59657:(e,t,i)=>{i.d(t,{n:()=>n});const n=(0,i(680369).xh)("plug",{default:{loader:()=>i.e(16453).then(i.bind(i,556899))},small:{loader:()=>i.e(16453).then(i.bind(i,103485))},fill:{loader:()=>i.e(16453).then(i.bind(i,876977))},fillSmall:{loader:()=>i.e(16453).then(i.bind(i,902570))}},["power","plug","electric","energy","socket"])},75597:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(0,i(680369).xh)("exclamationMarkTriangle",{default:{loader:()=>i.e(97651).then(i.bind(i,308439))},small:{loader:()=>i.e(97651).then(i.bind(i,473321))},fill:{loader:()=>i.e(97651).then(i.bind(i,55813))},fillSmall:{loader:()=>i.e(97651).then(i.bind(i,369678))}},["warning","caution","triangle","road","traffic","fill"])},80159:(e,t,i)=>{i.d(t,{A:()=>g});var n=i(242343),s=()=>i(174114),a=()=>i(653998),o=()=>i(220413),d=()=>i(31448),r=()=>i(59175),l=()=>i(966789),c=()=>i(611824),u=()=>i(477784),m=()=>i(112907),p=i(163643);const f=(0,a().YK)({customDomainPlaceholder:{id:"sites.domainInput.placeholder.custom",defaultMessage:"www.yourdomain.com"},notionHostedDomainPlaceholder:{id:"sites.domainInput.placeholder.notionHosted",defaultMessage:"yourdomain"}});function g(e){const{domainName:t,domainType:i,setDomainName:a,isSubmitting:o,errorMessage:c}=e,g=(0,n.useRef)(null),[x,y]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1);(0,n.useEffect)((()=>{c&&y(!0)}),[c,y]);const b=(0,n.useCallback)((e=>{y(!1),a(e.target.value.toLowerCase())}),[a,y]),A=g.current?g.current.offsetWidth-4:4,S=(0,s().IS)((e=>({container:{flex:1,display:"flex",flexDirection:"column",fontSize:14,lineHeight:16,padding:2},inputAndConfigContainer:{position:"relative",alignItems:"center",background:e.inputBackground,borderRadius:4,boxShadow:x?`${e.stroke.uiRedSecondary} 0px 0px 0px 1px inset`:v?"0px 0px 0px 1px #2383E2 inset, 0px 0px 0px 2px rgba(35, 131, 226, 0.35)":`${e.regularDividerColor} 0px 0px 0px 1px inset`,height:34},inputContainer:{height:"100%",paddingLeft:4,background:"none",boxShadow:"none"},input:{paddingLeft:4,paddingRight:A,...d().RC},configDomainNameContainer:{position:"absolute",float:"right",top:0,right:0,height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingLeft:2,paddingRight:2},configDomainName:{display:"flex",alignItems:"center",height:"100%",paddingTop:4,paddingBottom:4,paddingLeft:8,paddingRight:8,flexGrow:1,borderLeft:x?`1px solid ${e.stroke.uiRedSecondary}`:`1px solid ${e.regularDividerColor}`,...d().RC},spinnerStyle:{position:"absolute",top:"50%",right:8+A,transform:"translateY(-50%)"}})),[x,A,v]);return(0,p.jsxs)("div",{style:S.container,children:[(0,p.jsxs)("div",{style:S.inputAndConfigContainer,children:[(0,p.jsx)(r().A,{type:"text",style:S.inputContainer,inputStyle:S.input,value:t,disabled:o,placeholder:u().A.formatMessage("custom"===i?f.customDomainPlaceholder:f.notionHostedDomainPlaceholder),onChange:b,format:r().C.Transparent,onFocus:()=>j(!0),onBlur:()=>j(!1),right:o&&(0,p.jsx)(l().A,{style:S.spinnerStyle})}),(0,p.jsx)("div",{ref:g,style:S.configDomainNameContainer,children:"default"===i&&(0,p.jsx)("div",{style:S.configDomainName,children:m().l3()})})]}),x&&c&&(0,p.jsx)(h,{showLearnMore:"custom"===i,errorMessage:c})]})}function h(e){const{errorMessage:t,showLearnMore:i}=e,n=(0,s().IS)((()=>({container:{fontSize:12,lineHeight:1.33,minHeight:20,width:"100%",color:o().Ay.red,padding:2,marginTop:6}})),[]);return(0,p.jsxs)("span",{style:n.container,children:[t," ",i?(0,p.jsx)(c().A,{external:!0,href:"https://www.notion.so/help/connect-a-custom-domain-with-notion-sites#connect-a-custom-domain",children:(0,p.jsx)(a().sA,{defaultMessage:"Learn more",id:"sitesLaunchModal.learnMore"})}):null]})}},194749:(e,t,i)=>{i.d(t,{A:()=>s});class n extends(()=>i(129044))().default{getInitialState(){return{isOpen:!1}}}const s=new n},197027:(e,t,i)=>{i.d(t,{M:()=>s});i(242343);var n=i(163643);const s=(0,i(680369).wt)("flag",{viewBox:"0 0 13 14",svg:(0,n.jsx)("path",{d:"M0.825195 13.8457C1.16699 13.8457 1.4541 13.5654 1.4541 13.2168V9.47754C1.63867 9.40918 2.21973 9.19727 3.10156 9.19727C5.59668 9.19727 7.25781 10.4414 9.66406 10.4414C10.7168 10.4414 11.1885 10.3115 11.7217 10.0654C12.207 9.84668 12.4941 9.4502 12.4941 8.82129V1.99219C12.4941 1.55469 12.1523 1.27441 11.6943 1.27441C11.3047 1.27441 10.6895 1.54102 9.58887 1.54102C7.20996 1.54102 5.52148 0.296875 3.0332 0.296875C1.99414 0.296875 1.5293 0.419922 0.975586 0.672852C0.49707 0.891602 0.196289 1.24707 0.196289 1.86914V13.2168C0.196289 13.5586 0.483398 13.8457 0.825195 13.8457ZM9.63672 9.16309C7.41504 9.16309 5.71289 7.92578 3.12207 7.92578C2.45215 7.92578 1.84375 8.00098 1.48145 8.14453V2.0332C1.59766 1.83496 2.11035 1.56836 3.05371 1.56836C5.38477 1.56836 7.09375 2.80566 9.56836 2.80566C10.2383 2.80566 10.792 2.73047 11.2158 2.61426V8.69824C11.0996 8.89648 10.5801 9.16309 9.63672 9.16309Z"})})},256181:(e,t,i)=>{i.d(t,{A:()=>s});class n extends(()=>i(129044))().default{getInitialState(){return{isOpen:!1}}}const s=new n},382995:(e,t,i)=>{i.d(t,{A:()=>s});class n extends(()=>i(129044))().default{getInitialState(){return{isOpen:!1}}}const s=new n},407734:(e,t,i)=>{i.d(t,{P:()=>s});i(242343);var n=i(163643);const s=(0,i(680369).wt)("home",{viewBox:"0 0 18 16",svg:(0,n.jsx)("path",{d:"M4.3584 15.9004H13.6074C14.6943 15.9004 15.3301 15.2646 15.3301 14.2188V7.93652L16.0752 8.55859C16.2598 8.71582 16.4717 8.83203 16.7041 8.83203C17.1484 8.83203 17.4834 8.55176 17.4834 8.11426C17.4834 7.86133 17.3809 7.64941 17.1826 7.47852L15.3301 5.92676V2.95996C15.3301 2.65234 15.1318 2.4541 14.8174 2.4541H13.751C13.4434 2.4541 13.2314 2.65234 13.2314 2.95996V4.16309L10.0664 1.50391C9.42383 0.957031 8.59668 0.957031 7.94727 1.50391L0.824219 7.48535C0.619141 7.64941 0.516602 7.88184 0.516602 8.10059C0.516602 8.50391 0.817383 8.83203 1.30273 8.83203C1.52832 8.83203 1.74023 8.71582 1.9248 8.55859L2.63574 7.9707V14.2188C2.63574 15.2715 3.27148 15.9004 4.3584 15.9004ZM10.9619 9.95996C10.9619 9.63867 10.75 9.42676 10.4287 9.42676H7.57129C7.25 9.42676 7.03809 9.63867 7.03809 9.95996V14.376H4.80273C4.38574 14.376 4.15332 14.1367 4.15332 13.7197V6.69238L8.67871 2.89844C8.88379 2.7207 9.12305 2.7207 9.33496 2.89844L13.8125 6.6582V13.7197C13.8125 14.1367 13.5801 14.376 13.1631 14.376H10.9619V9.95996Z"})})},449345:(e,t,i)=>{i.d(t,{G:()=>c});i(242343);var n=()=>i(237385),s=()=>i(803290),a=()=>i(174114),o=()=>i(575681),d=()=>i(35462),r=()=>i(112907),l=i(163643);function c(e){const{domain:t,style:i}=e,{device:c}=(0,n().v3)(),[u,m]=(0,s().K8)((()=>[t?r().MN({domainName:t.getDomainName(),domainType:t.getDomainType()}):"",null==t?void 0:t.getDomainStatus()]),[t]),p=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",gap:6,maxWidth:c.isMobile?185:320},label:{color:"payment_required"===m?e.text.uiRedPrimary:void 0,flex:1},chevronIcon:{height:10,width:10,fill:"payment_required"===m?e.text.uiRedSecondary:e.icon.tertiary}})),[c,m]);return(0,l.jsxs)("div",{style:{...p.container,...i},children:[(0,l.jsx)(d().A,{style:p.label,children:u}),(0,o()._)(p.chevronIcon)]})}},553783:(e,t,i)=>{i.d(t,{A:()=>v});i(403517);var n=i(242343),s=()=>i(237385),a=()=>i(174114);var o=()=>i(235180),d=()=>i(361308),r=()=>i(653998),l=()=>i(31448),c=()=>i(818369),u=()=>i(91472),m=()=>i(356813),p=()=>i(59175),f=()=>i(35462),g=()=>i(927685),h=()=>i(951752),x=()=>i(622286),y=i(163643);function v(e){const{spaceId:t,domainName:i,domainId:o}=e,l=(0,r().tz)(),u=function(e){const{spaceId:t,domainId:i,domainName:a}=e,o=(0,x().X)("sites_apex_domain_aware_validation_info"),d=(0,s().v3)(),[r,l]=(0,n.useState)(void 0);return(0,n.useEffect)((()=>{o&&c().callApi({eventName:"getCustomPublicDomainValidationInfo",environment:d,data:{spaceId:t,domainId:i}}).then((e=>{"failed"!==e.type&&l(e.data)}))}),[o,d,t,i]),o?r:{cnameRecordShortName:a.split(".")[0],cnameTarget:function(e){if("local"===e.env){const t=e.publicDomainName.indexOf(":");return`external.${-1===t?e.publicDomainName:e.publicDomainName.substring(0,t)}`}return`external.${e.publicDomainName}`}(g().A),txtRecordShortName:a?function(e){return`_notion-dcv.${e}`}(a.split(".")[0]):"",txtRecordValue:i,isApexDomain:!1,ipAddressList:[]}}({spaceId:t,domainName:i,domainId:o}),m=(0,a().IS)((e=>({placeholder:{minHeight:400},instructionList:{display:"flex",flexDirection:"column",gap:24},instructionRow:{display:"flex",flexDirection:"row"},instructionNumber:{background:e.sitesInstructionStep,borderRadius:"100%",height:16,width:16,minWidth:16,display:"flex",justifyContent:"center",alignItems:"center",fontSize:10,marginTop:2},instructionContainer:{display:"flex",flexDirection:"column",rowGap:12,marginLeft:10,marginRight:6,minWidth:0,width:"100%",maxWidth:"100%"}})),[]);return u?(0,y.jsxs)("div",{style:m.instructionList,children:[(0,y.jsxs)("div",{style:m.instructionRow,children:[(0,y.jsx)("div",{style:m.instructionNumber,children:(0,d().ZV)(1,void 0,l)}),(0,y.jsx)("div",{style:m.instructionContainer,children:null!=u&&u.isApexDomain?(0,y.jsx)(b,{validationInfo:u}):(0,y.jsx)(j,{validationInfo:u})})]}),(0,y.jsxs)("div",{style:m.instructionRow,children:[(0,y.jsx)(f().A,{style:m.instructionNumber,children:(0,d().ZV)(2,void 0,l)}),(0,y.jsx)("div",{style:m.instructionContainer,children:(0,y.jsx)(A,{validationInfo:u})})]}),(0,y.jsxs)("div",{style:m.instructionRow,children:[(0,y.jsx)(f().A,{style:m.instructionNumber,children:(0,d().ZV)(3,void 0,l)}),(0,y.jsx)("div",{style:m.instructionContainer,children:(0,y.jsx)(f().A,{isMultiline:!0,children:(0,y.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.notifyVerifyLiveDelay",defaultMessage:"Click ‘Verify’ below to start the verification process"})})})]})]}):(0,y.jsx)("div",{style:m.placeholder})}function j(e){const{validationInfo:t}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f().A,{isMultiline:!0,children:(0,y.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.setCnameInstructions",defaultMessage:"Go to your DNS provider and add a CNAME record for the domain. Set the values as:"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(D,{}),(0,y.jsx)(S,{value:t.cnameRecordShortName})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(C,{}),(0,y.jsx)(S,{value:null==t?void 0:t.cnameTarget})]})]})}function b(e){const{validationInfo:t}=e,i=(0,a().IS)((()=>({aRecordContainer:{display:"flex",flexDirection:"column",rowGap:12,width:"100%",maxWidth:"100%"},aRecordRow:{display:"flex",flexDirection:"row",columnGap:8},aRecordNameField:{flexBasis:"40%"},aRecordValueField:{flexBasis:"60%"}})),[]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f().A,{isMultiline:!0,children:(0,y.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.setARecordInstructions",defaultMessage:"Go to your DNS provider and add A records for the domain. Set the names and values as:"})}),(0,y.jsx)("div",{style:i.aRecordContainer,children:t.ipAddressList.map(((e,t)=>(0,y.jsx)("div",{children:(0,y.jsxs)("div",{style:i.aRecordRow,children:[(0,y.jsx)(S,{style:i.aRecordNameField,value:"@"}),(0,y.jsx)(S,{style:i.aRecordValueField,value:e})]})},t)))})]})}function A(e){const{validationInfo:t}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f().A,{isMultiline:!0,children:(0,y.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.setTxtValueInstructions",defaultMessage:"Also add a TXT record for the domain:"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(D,{}),(0,y.jsx)(S,{value:null==t?void 0:t.txtRecordShortName})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(C,{}),(0,y.jsx)(S,{value:null==t?void 0:t.txtRecordValue})]})]})}function S(e){const{style:t,value:i}=e,o=(0,n.useRef)(null),d=(0,s().v3)(),r=(0,a().IS)((e=>({input:{flexGrow:1,fontFamily:"monospace",paddingLeft:8,color:e.text.secondary,...l().RC},inputField:{...t,display:"flex",flexDirection:"row",alignItems:"center",border:`1px solid ${e.regularDividerColor}`,borderRadius:6,height:32,background:e.inputBackground,cursor:"text"}})),[t]);return(0,y.jsxs)("div",{style:r.inputField,children:[(0,y.jsx)(p().A,{ref:o,style:r.input,value:i,format:p().C.Transparent,onClick:()=>{o.current&&(0,h().G)(d,o.current)},inputElementAttributes:{spellCheck:!1,readOnly:!0}}),(0,y.jsx)(w,{content:i})]})}function D(){const e=(0,a().IS)((()=>({inputLabel:{paddingBottom:8,fontWeight:l().Wy.semibold}})),[]);return(0,y.jsx)(f().A,{isSmall:!0,style:e.inputLabel,children:(0,y.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.setNameLabel",defaultMessage:"Name"})})}function C(){const e=(0,a().IS)((()=>({inputLabel:{paddingBottom:8,fontWeight:l().Wy.semibold}})),[]);return(0,y.jsx)(f().A,{isSmall:!0,style:e.inputLabel,children:(0,y.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.setValueLabel",defaultMessage:"Value"})})}function w(e){const t=(0,r().tz)(),{content:i}=e,n=(0,s().v3)(),d=(0,a().IS)((e=>({copyButtonContainer:{height:"100%",width:32,boxShadow:void 0,borderRadius:"0px 6px 6px 0px",borderLeft:`1px solid ${e.regularDividerColor}`},copyButton:{height:14,width:14}})),[]);return(0,y.jsx)(m().A,{onClick:async()=>{if(i){const e=await u().R.clipboardActions.load();e.copyString({environment:n,stringValue:i,copiedMessage:e.clipboardMessages.copiedToClipboard})}},style:d.copyButtonContainer,ariaLabel:t.formatMessage({id:"sites.newCustomDomainDnsSettings.copyButton",defaultMessage:"Copy"}),hasBackground:!0,icon:o().V,iconStyle:d.copyButton,showShadow:!0})}},558776:(e,t,i)=>{i.d(t,{A:()=>s});class n extends(()=>i(129044))().default{getInitialState(){return{isOpen:!1}}}const s=new n},628126:(e,t,i)=>{i.d(t,{x3:()=>K,HH:()=>_,Uv:()=>P,Wq:()=>k,_p:()=>L,qs:()=>b,HM:()=>A,fN:()=>T,Xn:()=>U,dD:()=>O,yH:()=>N,qb:()=>B,Ej:()=>R,LP:()=>V,Ko:()=>H,cG:()=>S,k3:()=>M,zV:()=>j,$j:()=>C,$G:()=>D,hS:()=>I});var n=()=>i(23371),s=()=>i(818369),a=()=>i(145046),o=()=>i(485966),d=()=>i(436622),r=()=>i(836331),l=()=>i(341720),c=()=>i(194749),u=()=>i(558776),m=()=>i(382995),p=()=>i(864861),f=()=>i(256181),g=()=>i(40504),h=()=>i(647242),x=()=>i(397138),y=()=>i(104838);async function v(e,t){const i=o().default.state.currentSpaceStore;if(!i)return;const n=await d().A.awaitData(e,{spaceId:i.id},!0);if(!n)return;const s=n&&h().lQ(n);await y().iw({environment:e,context:{spaceId:i.id,planType:null==i?void 0:i.getPlanType(),isMmOrEnt:await(0,x().G)(e),from:"custom_hostname_delete"},oldData:t,newData:n,desiredState:s}),y().o2({environment:e,spaceStore:i})}async function j(e){const{environment:t,spaceId:i,domainId:n,domainName:a}=e,o=await s().callApi({eventName:"updatePublicDomainName",environment:t,data:{spaceId:i,domainId:n,domainName:a,isAutogenerated:!1}});return"success"!==o.type?{error:o}:(l().A.getData(t,{spaceId:i},!0),{domainId:n})}async function b(e){const{environment:t,spaceId:i,domainName:n,domainType:a}=e,o="custom"===a?await d().A.awaitData(t,{spaceId:i}):void 0,r=await s().callApi({eventName:"createPublicDomain",environment:t,data:{spaceId:i,domainName:n,domainType:a,isAutogenerated:!1,isDefault:!1}});return l().A.getData(t,{spaceId:i},!0),"success"!==r.type?{error:r}:(o&&r.data.subscriptionWasUpdated&&v(t,o),{...r.data,error:void 0})}async function A(e){const{environment:t,spaceId:i,domainId:n,domainType:o,showErrorDialog:r}=e,c="custom"===o?await d().A.awaitData(t,{spaceId:i}):void 0,u=await s().callApi({eventName:"deletePublicDomain",environment:t,data:{spaceId:i,domainId:n}});return l().A.getData(t,{spaceId:i},!0),"success"!==u.type?(r&&a().Qg(u),{error:u}):(c&&u.data.subscriptionWasUpdated&&v(t,c),{domainId:n})}async function S(e){const{environment:t,domainId:i,domainType:n}=e,r=o().default.state.currentSpaceStore;if(!r)return;const c="custom"===n?await d().A.awaitData(t,{spaceId:r.id}):void 0,u=await s().callApi({eventName:"unpublishSitesAndDeletePublicDomain",environment:t,data:{spaceId:r.id,domainId:i}});if("success"!==u.type)return a().Qg(u),{error:u};await g().rw(t,{spaceStore:r,currentUserId:t.currentUser.id}),l().A.getData(t,{spaceId:r.id},!0),c&&u.data.subscriptionWasUpdated&&v(t,c)}async function D(e){const{environment:t,oldDomainId:i,oldDomainType:n,newDomainId:r}=e,c=o().default.state.currentSpaceStore;if(!c)return;const u="custom"===n?await d().A.awaitData(t,{spaceId:c.id}):void 0,m=await s().callApi({eventName:"updateSitesAndDeletePublicDomain",environment:t,data:{spaceId:c.id,domainIdToBeDeleted:i,domainIdToBeUpdated:r}});if("success"!==m.type)return a().Qg(m),{error:m};await g().rw(t,{spaceStore:c,currentUserId:t.currentUser.id}),l().A.getData(t,{spaceId:c.id},!0),u&&m.data.subscriptionWasUpdated&&v(t,u)}async function C(e){const{environment:t,spaceId:i,domainId:n,publicHomePageId:o,showErrorDialog:d}=e,r=await s().callApi({eventName:"updatePublicDomainHomePage",environment:t,data:{spaceId:i,domainId:n,publicHomePage:o}});return"success"!==r.type?(d&&a().Qg(r),{error:r}):{domainId:n}}async function w(e){const{environment:t,spaceId:i,domainId:n}=e,a=await s().callApi({eventName:"validateCustomPublicDomain",environment:t,data:{spaceId:i,domainId:n}});return"success"!==a.type?{error:a}:(a.data.domainId&&a.data.hasChanged&&l().A.getData(t,{spaceId:i},!0),{domainId:n,domainStatus:a.data.domainStatus})}async function I(e){const{environment:t,domainId:i,spaceId:s,poll:a}=e,{retry_delay:o=500,max_retries:d=10}=r().default.getConfigKey("sites_settings","custom_hostname_validation")||{};let l,c=0;for(;!l||c<=d;){if(l=await w({environment:t,spaceId:s,domainId:i}),!a||"active"===l.domainStatus||l.error)return l;await n().wR(o),c+=1}return l}async function T(e){const{environment:t,spaceId:i,domainId:n}=e,o=await s().callApi({eventName:"getSitesOnPublicDomain",environment:t,data:{spaceId:i,domainId:n}});if("success"===o.type)return{sitesCount:o.data.publishedSitesCount,sites:o.data.publishedSitesWithAccess};a().Qg(o)}async function M(e){const{environment:t,spaceId:i,domainId:n}=e,o=await s().callApi({eventName:"updateCustomPublicDomainPayment",environment:t,data:{spaceId:i,domainId:n}});return"success"!==o.type?(a().Qg(o),{error:o}):(l().A.getData(t,{spaceId:i},!0),{...o.data,error:void 0})}function B(e){p().A.setState({isOpen:!0,step:e})}function k(){p().A.setState({isOpen:!1})}function N(e,t,i){m().A.setState({isOpen:!0,step:e,spaceId:t,domain:i})}function P(){m().A.setState({isOpen:!1})}function O(e,t,i,n,s){u().A.setState({isOpen:!0,step:e,spaceId:t,domain:i,publishedSitesCount:n,publishedSitesBlockIds:s})}function _(){u().A.setState({isOpen:!1})}function R(e,t){f().A.setState({isOpen:!0,spaceId:e,domain:t,step:"DomainValidating"})}function H(e){const{isOpen:t,spaceId:i,domain:n}=f().A.state;t&&f().A.setState({isOpen:t,spaceId:i,domain:n,step:e})}function L(){f().A.setState({isOpen:!1})}function U(e,t){c().A.setState({isOpen:!0,spaceId:e,domain:t,step:"ConfirmPayment"})}function V(e){const{isOpen:t,spaceId:i,domain:n}=c().A.state;t&&c().A.setState({isOpen:t,spaceId:i,domain:n,step:e})}function K(){c().A.setState({isOpen:!1})}},839996:(e,t,i)=>{i.d(t,{g:()=>n});const n=(0,i(680369).xh)("checkmarkCircle",{default:{loader:()=>i.e(44032).then(i.bind(i,423162))},small:{loader:()=>i.e(44032).then(i.bind(i,29152))},fill:{loader:()=>i.e(44032).then(i.bind(i,135866))},fillSmall:{loader:()=>i.e(44032).then(i.bind(i,796627))}},["check","mark","tick","confirm","approve"])},864861:(e,t,i)=>{i.d(t,{A:()=>s});class n extends(()=>i(129044))().default{getInitialState(){return{isOpen:!1}}}const s=new n},891960:(e,t,i)=>{i.d(t,{Aw:()=>o,NS:()=>d,W2:()=>s,h6:()=>a,pO:()=>r});var n=()=>i(137476);function s(e){(0,n().u4)({environment:e,event:{eventName:"click_create_domain",eventProperties:{}}})}function a(e,t){(0,n().u4)({environment:e,event:{eventName:"select_domain_type_to_create",eventProperties:t}})}function o(e,t){(0,n().u4)({environment:e,event:{eventName:"verify_custom_domain",eventProperties:t}})}function d(e){(0,n().u4)({environment:e,event:{eventName:"verify_custom_domain_early_exit",eventProperties:{}}})}function r(e,t){(0,n().u4)({environment:e,event:{eventName:"click_validate_custom_domain",eventProperties:t}})}},929475:(e,t,i)=>{i.d(t,{A:()=>S});var n=i(242343),s=()=>i(237385),a=()=>i(803290),o=()=>i(174114),d=()=>i(423600),r=()=>i(653998),l=()=>i(31448),c=()=>i(421338),u=()=>i(884373),m=()=>i(701270),p=()=>i(35462),f=()=>i(610271),g=()=>i(910200),h=()=>i(88661),x=()=>i(847184),y=()=>i(907502),v=()=>i(499670),j=()=>i(111826),b=()=>i(305043),A=i(163643);function S(e){const{billingData:t,price:i,checkoutState:n,subtotal:s,recurringSubtotal:d}=e,r=(0,a().O$)(b().subscriptionDataStoreInstance),l=(0,o().IS)((e=>({container:{width:406,gap:24},orderSummaryRow:{paddingTop:12,borderTop:`1px solid ${e.stroke.primary}`}})),[]);return(0,A.jsxs)(f().wt,{style:l.container,children:[(0,A.jsx)(f().Ye,{children:r&&(0,A.jsx)(h().E,{billingData:t})}),(0,A.jsx)("div",{style:l.orderSummaryRow,children:(0,A.jsx)(D,{subscriptionData:r,billingData:t,price:i,checkoutState:n,subtotal:s,recurringSubtotal:d})})]})}function D(e){const{subscriptionData:t,billingData:i,price:a,subtotal:f,recurringSubtotal:h,checkoutState:b}=e,S=a.getCurrencyCode(),[D,C]=(0,n.useState)(!1),[w,I]=(0,n.useState)(0),T=(0,s().v3)(),M=(0,o().IS)((e=>({detailsContainer:{maxHeight:140,overflow:"scroll",background:e.surface.wash,padding:12,paddingBottom:0,borderRadius:6},detailsLabel:{flexShrink:0,fontSize:12,lineHeight:1.25,fontWeight:l().Wy.semibold,paddingBottom:3},orderTotalContainer:{height:52}})),[]);(0,n.useEffect)((()=>{!async function(){h&&I(await g().qu({environment:T,billingData:i,taxableAmount:h,address:i.address})??0)}()}),[T,i,h]);const B=new(d().W)(S,0),k=new(d().W)(S,t?j().o2(t):0),N=new(d().W)(S,0),P=f?v().Bq({subtotal:f,discount:B,balance:k},N):void 0;return(0,A.jsxs)(c().Y1,{gap:8,children:[(0,A.jsx)("div",{style:M.orderTotalContainer,children:P&&(0,A.jsx)(x().BB,{total:P,handleToggleExpanded:()=>C(!D),isExpanded:D,discount:B,accountBalance:k,chargeType:"immediate",subtitle:(0,A.jsx)(m().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,A.jsx)(r().sA,{id:"checkout.orderSummary.taxApplicable",defaultMessage:"+ tax if applicable"})})})}),D&&(0,A.jsxs)(c().Y1,{gap:8,style:M.detailsContainer,children:[(0,A.jsx)(p().A,{style:M.detailsLabel,children:(0,A.jsx)(r().sA,{id:"sites.sitesAddOnCheckout.details.totalForNextPeriod",defaultMessage:"Next billing period"})}),(0,A.jsx)(x().f5,{items:b.items,showMonthlyPricing:!1}),(0,A.jsx)(u().A,{size:12}),(0,A.jsx)(y().Q,{subtotal:h||new(d().W)(S,0),tax:new(d().W)(S,w),discount:new(d().W)(S,0),accountBalance:new(d().W)(S,0)})]})]})}},969360:(e,t,i)=>{i.d(t,{A:()=>f});i(725707),i(491955),i(403517);var n=i(242343),s=()=>i(237385),a=()=>i(803290),o=()=>i(647242),d=()=>i(678988),r=()=>i(423600),l=()=>i(818369),c=()=>i(298520),u=()=>i(613313),m=()=>i(879205),p=()=>i(112907);function f(e){const{spaceStore:t,billingData:i}=e,f=(0,s().v3)(),[g,h]=(0,n.useState)(),x=(0,o().TB)(i)&&"free"===(0,o().AW)(i),y=(0,o().AI)(i);(0,n.useEffect)((()=>{c().$W({environment:f,spaceId:t.id})}),[f,t]);const v=(0,a().K8)((()=>(0,d().z2)({prices:m().A.state.prices,billingData:i,product:"sites_custom_hostnames"})),[i]),j=(0,a().K8)((()=>1+p().u8(t).filter((e=>"custom"===e.domain_type&&"payment_required"!==e.domain_status)).length),[t]),b=(0,a().K8)((()=>(0,u().Le)()),[]),A=(0,a().K8)((()=>{if(!v)return;const e=o().lQ(i);return(0,d().vH)(e,{price:v,quantity:j},{isMay13PackagingChangesEnabled:b})}),[i,v,j,b]),S=(0,n.useMemo)((()=>{const e=A?A.items.map((e=>r().W.fromValue(e.price.unitAmount).withMultipliedAmount(e.quantity))):[];return r().W.sum(...e)}),[A]);return(0,n.useEffect)((()=>{!async function(){if(!v)return;if(x)return void h(S);const e=await l().callApi({eventName:"getImmediateUpdateCost",environment:f,data:{spaceId:t.id,desiredState:{items:(null==A?void 0:A.items.map((e=>({id:e.id,quantity:e.quantity,priceData:{external_id:e.price.externalId,product:e.price.product,billing_interval:e.price.billingInterval,currency:e.price.unitAmount.currencyCode,unit_amount:e.price.unitAmount.amount,state:e.price.state}}))))||[]},quantities:{numCustomHostnames:j}}});"success"===e.type&&h(r().W.fromValue(e.data.total))}()}),[f,S,A,x,v,t,j]),{price:v,checkoutState:A,isOnFreeToPaidTrial:x,subtotal:g,recurringSubtotal:S,subscriptionTier:y}}},971825:(e,t,i)=>{i.r(t),i.d(t,{DomainsSection:()=>ei});i(403517);var n=i(242343),s=()=>i(803290),a=()=>i(174114),o=()=>i(197027),d=()=>i(145017),r=()=>i(653998),l=()=>i(103151),c=()=>i(35462),u=()=>i(610271),m=()=>i(629457),p=()=>i(96365),f=()=>i(907721),g=()=>i(413871),h=()=>i(24281),x=()=>i(133926),y=()=>i(112907),v=()=>i(194749),j=()=>i(558776),b=()=>i(382995),A=()=>i(256181),S=()=>i(237385),D=()=>i(76394),C=()=>i(539048),w=()=>i(262230),I=()=>i(898055),T=()=>i(628126),M=()=>i(75597),B=()=>i(529305),k=()=>i(245388),N=i(163643);function P(){return(0,N.jsx)(k().eh.Provider,{value:T().Wq,children:(0,N.jsx)(B().tf,{header:(0,N.jsx)(O,{}),footer:(0,N.jsx)(_,{})})})}function O(){return(0,N.jsx)(B().YA,{iconAndTitle:(0,N.jsx)(B().ZQ,{iconGroup:M().Z,iconColorName:"redPrimary",title:(0,N.jsx)(r().sA,{id:"sites.addPaymentMethod.title",defaultMessage:"Add a payment method"})}),description:(0,N.jsx)(r().sA,{id:"sites.addPaymentMethod.subtitle",defaultMessage:"Please go to the billing tab to add a payment method on your account"})})}function _(){return(0,N.jsx)(B().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,N.jsx)(r().sA,{id:"sites.addPaymentMethod.continue",defaultMessage:"Got it"}),onClick:()=>T().x3()}]})}var R=()=>i(30922),H=()=>i(59657),L=()=>i(455831),U=()=>i(421338),V=()=>i(611824),K=()=>i(392608),W=()=>i(505316),F=()=>i(969360),G=()=>i(929475);const E={trialTitle:{id:"sites.sitesAddOnCheckout.trial.title",defaultMessage:"Upgrade to {tier} and purchase add-on",description:"Modal title for ending trial immediately and purchasing subscription + custom domain add on."},trialSubtitle:{id:"sites.sitesAddOnCheckout.trial.subtitle",defaultMessage:"You're currently on a trial of the {tier} plan. Upgrade to the {tier} plan immediately and add a custom domain to publish with.",description:"Modal subtitle for ending trial immediately and purchasing subscription + custom domain add on."},title:{id:"sites.sitesAddOnCheckout.title",defaultMessage:"Custom domain add-on",description:"Modal title for purchasing custom domain add on."},subtitle:{id:"sites.sitesAddOnCheckout.subtitle",defaultMessage:"Notion charges a monthly fee to host your custom domain",description:"Modal subtitle for purchasing custom domain add on."},continueWithTrial:{id:"sites.sitesAddOnCheckout.continue.trial",defaultMessage:"Upgrade to {tier} and purchase add-on",description:"Button title for upgrading to {tier} and continuing with custom domain connection process."},continue:{id:"sites.sitesAddOnCheckout.continue",defaultMessage:"Purchase add-on",description:"Button title for continue with custom domain connection process."},caption:{id:"sites.sitesAddOnCheckout.caption",defaultMessage:'By clicking "Purchase add-on" you agree to the{br}<terms>Notion Terms and Conditions</terms>',description:"Message for billing terms and conditions with link"}};function q(e){const{spaceStore:t,billingData:i}=e,a=(0,S().v3)(),[o,d]=(0,n.useState)(!1),r=(0,s().K8)((()=>v().A.getState()),[]),{isOpen:l,domain:c}=r,{price:u,checkoutState:m,isOnFreeToPaidTrial:p,subtotal:f,recurringSubtotal:g,subscriptionTier:h}=(0,F().A)({spaceStore:t,billingData:i}),x=(0,D().O9)(i.paymentMethod);(0,n.useEffect)((()=>{x||T().LP("AddPaymentMethod")}),[x]);const y=(0,n.useCallback)((async()=>{if(!c)return;d(!0),T().LP("UpdatingPayment");const e=await T().k3({environment:a,spaceId:t.id,domainId:c.id});if(d(!1),e.subscriptionWasUpdated&&"requires_action"===e.paymentIntentStatus){const t=await(0,W().getStripe)();if(!t)return;await t.handleNextAction({clientSecret:e.paymentIntentClientSecret??""})}T().x3()}),[a,t,c]);return l&&u&&m&&x?(0,N.jsx)(k().eh.Provider,{value:T().x3,children:(0,N.jsx)(B().tf,{header:(0,N.jsx)(Y,{isOnFreeToPaidTrial:p,subscriptionTier:h}),footer:(0,N.jsx)(Q,{isOnFreeToPaidTrial:p,isDisabled:!u||!f||o,onClick:y,subscriptionTier:h}),children:(0,N.jsx)(G().A,{billingData:i,price:u,checkoutState:m,subtotal:f,recurringSubtotal:g})})}):null}function Y(e){const{isOnFreeToPaidTrial:t,subscriptionTier:i}=e;return t?(0,N.jsx)(B().YA,{iconAndTitle:(0,N.jsx)(B().ZQ,{iconGroup:R().k,title:(0,N.jsx)(r().sA,{...E.trialTitle,values:{tier:L().v0[i].defaultMessage}})}),description:(0,N.jsx)(r().sA,{...E.trialSubtitle,values:{tier:L().v0[i].defaultMessage}})}):(0,N.jsx)(B().YA,{iconAndTitle:(0,N.jsx)(B().ZQ,{iconGroup:H().n,title:(0,N.jsx)(r().sA,{...E.title})}),description:(0,N.jsx)(r().sA,{...E.subtitle})})}function Q(e){const{isOnFreeToPaidTrial:t,isDisabled:i,onClick:n,subscriptionTier:s}=e;return(0,N.jsx)(B().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:t?(0,N.jsx)(r().sA,{...E.continueWithTrial,values:{tier:L().v0[s].defaultMessage}}):(0,N.jsx)(r().sA,{...E.continue}),isDisabled:i,onClick:n}],caption:(0,N.jsx)(U().Y1,{width:"hug",children:(0,N.jsx)(r().sA,{...E.caption,values:{br:(0,N.jsx)("br",{}),terms:e=>(0,N.jsx)(V().A,{external:!0,href:(0,K().xS)("terms"),children:e})}})})})}var $=()=>i(966789),Z=()=>i(701270);function z(){return(0,N.jsxs)(U().Y1,{padding:20,gap:16,width:300,height:"hug",align:"center",children:[(0,N.jsx)($().A,{legacySize:36}),(0,N.jsx)(Z().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,N.jsx)(r().sA,{id:"sites.updatingPayment.message",defaultMessage:"Updating payment..."})})]})}function X(e){const{spaceStore:t}=e,i=(0,S().v3)();(0,n.useEffect)((()=>{w().refreshAllBillingData({environment:i,spaceStore:t})}),[i,t]);const{isOpen:a,step:o}=(0,s().K8)((()=>v().A.getState()),[]),d=(0,I().l)({spaceId:t.id});return d&&a?(0,N.jsx)(C().s,{isOpen:!0,onDismiss:T().x3,areaConstraint:{width:{type:"fixed",length:"ConfirmPayment"===o?450:300}},render:()=>{switch(o){case"ConfirmPayment":return(0,N.jsx)(q,{spaceStore:t,billingData:d});case"UpdatingPayment":return(0,N.jsx)(z,{});case"AddPaymentMethod":return(0,N.jsx)(P,{});default:(0,D().HB)(o)}},animateSizeTransition:"ConfirmPayment"===o}):null}var J=()=>i(898627);function ee(e){const{iconGroup:t,title:i,description:n,descriptionValues:s,confirmationButtonType:a,confirmationButton:o,onConfirm:d,showCancel:r,showDismissButton:l}=e;return(0,N.jsx)(k().eh.Provider,{value:T().HH,children:(0,N.jsx)(te,{iconGroup:t,title:i,description:n,descriptionValues:s,confirmationButtonType:a,confirmationButton:o,onConfirm:d,showCancel:r,showDismissButton:l})})}function te(e){const{iconGroup:t,title:i,description:n,descriptionValues:s,confirmationButtonType:a,confirmationButton:o,onConfirm:d,showCancel:r,showDismissButton:l}=e;return(0,N.jsx)("div",{children:(0,N.jsx)(B().tf,{header:(0,N.jsx)(ie,{iconGroup:t,title:i,description:n,descriptionValues:s}),footer:(0,N.jsx)(ne,{confirmationButtonType:a,confirmationButton:o,onConfirm:d,showCancel:r}),showDismissButton:l})})}function ie(e){const{iconGroup:t,title:i,description:n,descriptionValues:s}=e;return(0,N.jsx)(B().YA,{iconAndTitle:(0,N.jsx)(B().ZQ,{iconGroup:t,iconColorName:"uiRedPrimary",title:(0,N.jsx)(r().sA,{...i})}),description:(0,N.jsx)(r().sA,{...n,values:s})})}function ne(e){const{confirmationButtonType:t,confirmationButton:i,onConfirm:n,showCancel:s}=e;return(0,N.jsx)(B().aO,{layout:"vertical",primaryButtons:[{buttonType:t,label:(0,N.jsx)(r().sA,{...i}),onClick:n}],secondaryButtons:s?[{buttonType:"dismiss"}]:[]})}function se(){return(0,N.jsxs)(U().Y1,{padding:20,gap:16,width:300,height:"hug",align:"center",children:[(0,N.jsx)($().A,{legacySize:36}),(0,N.jsx)(Z().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,N.jsx)(r().sA,{id:"sites.deletingDomain.message",defaultMessage:"Deleting domain..."})})]})}i(362833);var ae=()=>i(484157),oe=()=>i(31448),de=()=>i(209684),re=()=>i(535906),le=()=>i(273520),ce=()=>i(935091),ue=()=>i(858023),me=()=>i(206799),pe=()=>i(88271),fe=()=>i(640979),ge=()=>i(449345),he=()=>i(485966),xe=()=>i(755769);const ye=(0,r().YK)({title:{id:"sites.updateDomainBeforeDelete.title",defaultMessage:"Select new domain"},description:{id:"sites.updateDomainBeforeDelete.description",defaultMessage:"All pages under {domainName} will now be published under another domain"},updateDomainButton:{id:"sites.updateDomainBeforeDelete.buttonTitle",defaultMessage:"Publish"},goBackButton:{id:"sites.updateDomainBeforeDelete.goBackTitle",defaultMessage:"Go back"}});function ve(){const e=(0,s().K8)((()=>j().A.getState()),[]);return e.isOpen?(0,N.jsx)(k().eh.Provider,{value:T().HH,children:(0,N.jsx)(je,{state:e})}):null}function je(e){const{state:t}=e,[i,s]=(0,n.useState)(t.domain);return(0,N.jsx)(B().tf,{header:(0,N.jsx)(Se,{state:t}),footer:(0,N.jsx)(De,{state:t,newDomain:i}),showDismissButton:!0,children:(0,N.jsx)(be,{currentDomain:t.domain,newDomain:i,onChange:e=>{s(e)}})})}function be(e){const{currentDomain:t,newDomain:i,onChange:n}=e,o=(0,s().K8)((()=>t.getDomainStatus()),[t]),d=(0,a().IS)((e=>({valueButton:{paddingLeft:10,paddingRight:8,height:32,width:"100%",borderRadius:10,border:`1px solid ${e.stroke.primary}`,background:"payment_required"===o?e.tint.uiRed:"inherit",color:"payment_required"===o?e.text.uiRedPrimary:e.text.primary},valueButtonPressed:{background:"payment_required"===o?e.tint.uiRedPressed:"inherit"},icon:{marginRight:4}})),[o]);return(0,N.jsx)(le().Ay,{popupType:le().z7.Popup,renderOrigin:e=>(0,N.jsxs)(de().p,{...e,style:d.valueButton,hoveredStyle:d.valueButton,pressedStyle:{...d.valueButton,...d.valueButtonPressed},children:["payment_required"===o&&(0,N.jsx)("div",{style:d.icon,children:(0,N.jsx)(me().Q,{iconGroup:ae().F,colorName:"redPrimary",variantName:"small"})}),(0,N.jsx)(ge().G,{domain:i??t,style:{width:"100%"}})]}),alignmentToOrigin:xe().MY.Start,placementToOrigin:xe().UV.Bottom,render:e=>(0,N.jsx)(Ae,{currentDomain:t,onChange:n,onClose:()=>{e.close()}}),style:{width:"100%"}})}function Ae(e){const{currentDomain:t,onChange:i,onClose:n}=e,o=(0,s().K8)((()=>{const e=he().default.state.currentSpaceStore;return y().$o(e)}),[]),d=(0,a().IS)((e=>({titleText:oe().RC,disabledText:{color:e.text.tertiary,...oe().RC}})),[]),r=[],l=o.map((e=>({key:e.id,action:()=>{i(e),n()},render:i=>{const n="active"!==e.getDomainStatus()||e.id===t.id,s=n?d.disabledText:d.titleText;return(0,N.jsx)(re().A,{...i,disabled:n,title:y().MN({domainName:e.getDomainName(),domainType:e.getDomainType()}),titleStyle:s,isChecked:e.id===t.id||!t.id&&e.isDefault()})}})));return r.push({key:"domains",render:e=>(0,N.jsx)(pe().A,{...e,topBorder:!0}),items:l}),(0,N.jsx)(ce().A,{menuType:fe().gu.Popup,width:360,children:(0,N.jsx)(ue().Ay,{type:ue().Oh.Vertical,initialFocus:void 0,sections:r})})}function Se(e){const{state:t}=e,{domain:i,publishedSitesCount:n}=t,a=(0,s().K8)((()=>{const e=he().default.state.currentSpaceStore;return y().Ix({spaceStore:e,domainId:i.id})}),[i]);return(0,N.jsx)(B().YA,{iconAndTitle:(0,N.jsx)(B().ZQ,{iconGroup:H().n,title:(0,N.jsx)(r().sA,{...ye.title,values:{domainName:a,publishedSitesCount:n}})}),description:(0,N.jsx)(r().sA,{...ye.description,values:{domainName:a}})})}function De(e){const{state:t,newDomain:i}=e,{spaceId:n,domain:s,publishedSitesCount:a,publishedSitesBlockIds:o}=t,d=(0,S().v3)();return(0,N.jsx)(B().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,N.jsx)(r().sA,{...ye.updateDomainButton}),onClick:async()=>{T().dD("Deleting",n,s,a,o||[]);const e=await T().$G({environment:d,oldDomainId:s.id,oldDomainType:s.domain_type,newDomainId:i.id});null!=e&&e.error?T().dD("SelectDomainToUpdateSitesBeforeDelete",n,s,a,o||[]):T().HH()}}],secondaryButtons:[{buttonType:"secondary",label:(0,N.jsx)(r().sA,{...ye.goBackButton}),onClick:()=>{T().dD("UnpublishOrUpdateDomainBeforeDelete",n,s,a,o||[])}}]})}var Ce=()=>i(407734),we=()=>i(39394);const Ie=(0,r().YK)({title:{id:"sites.unpublishOrUpdateDomainBeforeDelete.title",defaultMessage:"{domainName} is currently being used to publish content on the web"},publishedSitesTitle:{id:"sites.unpublishOrUpdateDomainBeforeDelete.publishedSitesTitle",defaultMessage:"Your published sites"},updateDomainButton:{id:"sites.updateDomainForAllSites.buttonTitle",defaultMessage:"Publish to another domain"},unpublishSitesButton:{id:"sites.unpublishAllSites.buttonTitle",defaultMessage:"Unpublish all sites"}});function Te(){const e=(0,s().K8)((()=>j().A.getState()),[]);return e.isOpen?(0,N.jsx)(k().eh.Provider,{value:T().HH,children:(0,N.jsx)(Me,{state:e})}):null}function Me(e){const{state:t}=e;return(0,N.jsx)(B().tf,{header:(0,N.jsx)(Be,{state:t}),footer:(0,N.jsx)(ke,{state:t}),showDismissButton:!0,children:(0,N.jsx)(Ne,{publishedSitesBlockIds:t.publishedSitesBlockIds,domain:t.domain})})}function Be(e){const{state:t}=e,{domain:i,publishedSitesCount:n}=t,a=(0,s().K8)((()=>{const e=he().default.state.currentSpaceStore;return y().Ix({spaceStore:e,domainId:i.id})}),[i]);return(0,N.jsx)(B().YA,{iconAndTitle:(0,N.jsx)(B().ZQ,{iconGroup:M().Z,title:(0,N.jsx)(r().sA,{...Ie.title,values:{domainName:a,publishedSitesCount:n}})})})}function ke(e){const{state:t}=e,{spaceId:i,domain:n,publishedSitesCount:s,publishedSitesBlockIds:a}=t,o=(0,S().v3)();return(0,N.jsx)(B().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,N.jsx)(r().sA,{...Ie.updateDomainButton}),onClick:()=>{T().dD("SelectDomainToUpdateSitesBeforeDelete",i,n,s,a||[])}}],secondaryButtons:[{buttonType:"secondary",label:(0,N.jsx)(r().sA,{...Ie.unpublishSitesButton}),onClick:async()=>{T().dD("Deleting",i,n,s,a||[]);const e=await T().cG({environment:o,domainId:n.id,domainType:n.domain_type});null!=e&&e.error?T().dD("UnpublishOrUpdateDomainBeforeDelete",i,n,s,a||[]):T().HH()}}]})}function Ne(e){const{publishedSitesBlockIds:t,domain:i}=e,n=(0,s().K8)((()=>{const e=he().default.state.currentSpaceStore;return e?t.map((t=>g().Bv.createChildStore(e,{table:d().ev,id:t}))):[]}),[t]),o=(0,s().K8)((()=>i.getPublicHomePage()),[i]),l=(0,a().IS)((e=>({container:{width:"100%",padding:20,paddingTop:16,borderRadius:10,background:e.surface.wash,fontSize:oe().J.UISmall.desktop,maxHeight:310,overflow:"auto"},homeIcon:{color:e.icon.secondary,width:14,height:16}})),[]);return(0,N.jsxs)(u().wt,{gap:10,style:l.container,children:[(0,N.jsx)(c().A,{isSecondaryColor:!0,isSmall:!0,children:(0,N.jsx)(r().sA,{...Ie.publishedSitesTitle})}),n.map((e=>(0,N.jsxs)(u().Ye,{alignItems:"center",children:[(0,N.jsx)(we().A,{store:e}),o===e.id&&(0,Ce().P)(l.homeIcon)]},e.id)))]})}const Pe=(0,r().YK)({deleteConfirmationTitle:{id:"sites.deleteDomain.confirmationTitle",defaultMessage:"Delete domain?"},deleteConfirmationDescription:{id:"sites.deleteDomain.confirmationCaption",defaultMessage:"You will no longer be able to use {domainName} for publishing"},deleteConfirmationButton:{id:"sites.deleteDomain.deleteButton",defaultMessage:"Delete domain"},removeCustomDomainAddOnTitle:{id:"sites.removeCustomDomainAddOn.confirmationTitle",defaultMessage:"Custom domain add-on purchase"},removeCustomDomainAddOnDescription:{id:"sites.removeCustomDomainAddOn.confirmationCaption",defaultMessage:"Custom domain add-on has been purchased for your entire billing cycle, you will not be refunded for removing the domain"},removeCustomDomainAddOnConfirmationButton:{id:"sites.removeCustomDomainAddOn.confirmationButton",defaultMessage:"Got it, continue deleting domain"}});function Oe(){const e=(0,S().v3)(),t=(0,s().K8)((()=>{const e=j().A.getState();if(e.isOpen)return e}),[]),i=(0,s().K8)((()=>null!=t&&t.domain?y().MN({domainName:t.domain.getDomainName(),domainType:t.domain.getDomainType()}):void 0),[t]);if(!t)return null;const{step:n,spaceId:a,domain:o,publishedSitesCount:d,publishedSitesBlockIds:r}=t,l="UnpublishOrUpdateDomainBeforeDelete"===n||"SelectDomainToUpdateSitesBeforeDelete"===n?400:300;return(0,N.jsx)(C().s,{isOpen:!0,onDismiss:T().HH,areaConstraint:{width:{type:"fixed",length:l}},render:()=>{switch(n){case"ConfirmDelete":return(0,N.jsx)(ee,{iconGroup:J().t,title:Pe.deleteConfirmationTitle,description:Pe.deleteConfirmationDescription,descriptionValues:{domainName:i},confirmationButtonType:"destructive",confirmationButton:Pe.deleteConfirmationButton,onConfirm:async()=>{"custom"===o.domain_type?T().dD("ConfirmCustomDomainAddOn",a,o,d,r):await _e(e,a,o,d,r)},showCancel:!0,showDismissButton:!0});case"UnpublishOrUpdateDomainBeforeDelete":return(0,N.jsx)(Te,{});case"SelectDomainToUpdateSitesBeforeDelete":return(0,N.jsx)(ve,{});case"Deleting":return(0,N.jsx)(se,{});case"ConfirmCustomDomainAddOn":return(0,N.jsx)(ee,{iconGroup:M().Z,title:Pe.removeCustomDomainAddOnTitle,description:Pe.removeCustomDomainAddOnDescription,descriptionValues:{domainName:i},confirmationButtonType:"outline",confirmationButton:Pe.removeCustomDomainAddOnConfirmationButton,onConfirm:async()=>{await _e(e,a,o,d,r)},showCancel:!1,showDismissButton:!1});default:(0,D().HB)(n)}}})}async function _e(e,t,i,n,s){T().dD("Deleting",t,i,n,s),await T().HM({environment:e,spaceId:t,domainId:i.id,domainType:i.domain_type,showErrorDialog:!0}),T().HH()}var Re=()=>i(452794),He=()=>i(356813),Le=()=>i(906230),Ue=()=>i(836693),Ve=()=>i(336519),Ke=()=>i(397791),We=()=>i(891960);function Fe(e){const{spaceId:t,domain:i,parent:a}=e,o=(0,S().v3)(),d=(0,s().K8)((()=>{var e;return null===(e=he().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),[r,l]=(0,n.useState)(void 0),{domainType:c,domainStatus:u,isDefault:m}=(0,s().K8)((()=>({domainType:i.getDomainType(),domainStatus:i.getDomainStatus(),isDefault:i.isDefault()})),[i]),p=(0,x().P9)({name:"sites_multiple_public_domains",spaceId:t,userId:d});(0,n.useEffect)((()=>{!async function(){if(i.isDefault())return;const e=await T().fN({environment:o,spaceId:t,domainId:i.id});l(e)}()}),[o,t,i,l]);const f=[];return m||p&&"default"===c?f.push({key:"edit",render:e=>(0,N.jsx)(Ee,{...e}),action:()=>{T().yH("EditDomainName",t,i),a.close()}}):p&&"custom"===c&&("invalid"===u||"certificate_pending"===u||"notion_dcv_pending"===u?f.push({key:"validate",render:e=>(0,N.jsx)(Ye,{...e}),action:()=>{T().Ej(t,i),(0,We().pO)(o,{domain_id:i.id}),a.close()}}):"payment_required"===u&&f.push({key:"pay",render:e=>(0,N.jsx)(Qe,{...e}),action:()=>{T().Xn(t,i),a.close()}})),f.push({key:"delete",render:e=>(0,N.jsx)(qe,{...e,disabled:m}),action:()=>{T().dD(r&&r.sitesCount>0?"UnpublishOrUpdateDomainBeforeDelete":"ConfirmDelete",t,i,null==r?void 0:r.sitesCount,(null==r?void 0:r.sites)||[]),a.close()}}),(0,N.jsxs)(N.Fragment,{children:[!m&&!p&&(0,N.jsx)(Ge,{}),(0,N.jsx)(ce().A,{menuType:fe().gu.Popup,minWidth:160,children:(0,N.jsx)(ue().Ay,{initialFocus:void 0,type:ue().Oh.Vertical,sections:[{key:0,render:e=>(0,N.jsx)(pe().A,{...e}),items:f}]})})]})}function Ge(){const[e,t]=(0,n.useState)(!1),i=(0,a().IS)((t=>({container:{width:210,padding:"9px 10px 6px 12px",borderBottom:`1px solid ${t.stroke.secondary}`},text:{fontWeight:400,color:t.text.primary},link:{backgroundColor:e?t.tint.regular:void 0}})),[e]),s=(0,n.useCallback)((()=>Ve().Ow({currentTab:"plans"})),[]);return(0,N.jsx)("div",{style:i.container,children:(0,N.jsx)(Z().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",customStyles:i.text,children:(0,N.jsx)(r().sA,{id:"sites.domainActions.freeTierMessage",defaultMessage:"Multiple/custom domains are not available for free workspaces. <link>Upgrade plan</link>",values:{link:e=>(0,N.jsx)(V().A,{disableHover:!0,onClick:s,onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),style:i.link,children:e})}})})})}const Ee=n.forwardRef(((e,t)=>(0,N.jsx)(re().A,{...e,ref:t,icon:(0,N.jsx)(Ke().I,{icon:i(686752).pencilLineIcon}),title:(0,N.jsx)(r().sA,{id:"sites.domainActions.edit",defaultMessage:"Update"})})));Ee.displayName="EditAction";const qe=n.forwardRef(((e,t)=>{const{disabled:i}=e,n=(0,a().IS)((e=>({disabledContainer:{color:e.text.quaternary}})),[]);return i?(0,N.jsx)(l().A,{renderTooltip:()=>(0,N.jsx)(r().sA,{id:"sites.domainActions.deleteDefaultDomain",defaultMessage:"Default domain of the workspace cannot be deleted"}),placement:f().W.Bottom,render:i=>(0,N.jsx)(re().A,{...(0,Le().A)(i,e),style:n.disabledContainer,ref:t,icon:(0,N.jsx)(Ke().I,{icon:Ue().trashIcon,color:"quaternary"}),title:(0,N.jsx)(r().sA,{id:"sites.domainActions.delete",defaultMessage:"Delete"})})}):(0,N.jsx)(re().A,{...e,ref:t,icon:(0,N.jsx)(Ke().I,{icon:Ue().trashIcon}),title:(0,N.jsx)(r().sA,{id:"sites.domainActions.delete",defaultMessage:"Delete"})})}));qe.displayName="DeleteAction";const Ye=n.forwardRef(((e,t)=>(0,N.jsx)(re().A,{...e,ref:t,icon:(0,N.jsx)(Ke().I,{icon:i(284703).arrowSquarePathUpDownIcon}),title:(0,N.jsx)(r().sA,{id:"sites.domainActions.validate",defaultMessage:"Validate"})})));Ye.displayName="ValidateAction";const Qe=n.forwardRef(((e,t)=>(0,N.jsx)(re().A,{...e,ref:t,icon:(0,N.jsx)(Ke().I,{icon:i(683480).creditCardIcon}),title:(0,N.jsx)(r().sA,{id:"sites.domainActions.pay",defaultMessage:"Update payment"})})));function $e(e){const{spaceId:t,domain:i,disabled:n}=e,s=(0,r().tz)(),o=(0,a().IS)((()=>({editButtonIcon:{width:18,height:18}})),[]);return(0,N.jsx)(le().Ay,{alignmentToOrigin:f().C.End,renderOrigin:e=>(0,N.jsx)(l().A,{disableTooltip:!n,renderTooltip:()=>(0,N.jsx)(r().sA,{id:"sites.editDomain.noEditAccess",defaultMessage:"Only workspace owners can update the domain"}),placement:f().W.Bottom,render:t=>(0,N.jsx)(He().A,{...(0,Le().A)(t,e),ariaLabel:s.formatMessage({id:"sites.editDomain.updateDomain",defaultMessage:"Update domain"}),icon:Re().L,iconStyle:o.editButtonIcon,disabled:n})}),popupType:le().z7.Popup,render:e=>(0,N.jsx)(Fe,{spaceId:t,domain:i,parent:e})})}function Ze(e){const{spaceStore:t,domainId:i,isRelative:n}=e,o=(0,s().K8)((()=>y().Ix({spaceStore:t,domainId:i})),[t,i]),d=(0,a().IS)((e=>({tag:{width:"fit-content",maxWidth:"98%",paddingLeft:6,paddingRight:6,borderRadius:3,background:e.buttonHoveredBackground,...oe().RC},relativeUrl:{color:e.text.tertiary}})),[]);return(0,N.jsxs)("div",{style:d.tag,children:[o,n&&(0,N.jsx)("span",{style:d.relativeUrl,children:"/..."})]})}Qe.displayName="PaymentAction";var ze=()=>i(405317);function Xe(e,t,i){return"invalid"===e||"payment_required"===e?t.accentColors.red[i]:"active"===e?t.accentColors.green[i]:"certificate_pending"===e||"notion_dcv_pending"===e?t.accentColors.yellow[i]:void(0,D().HB)(e)}function Je(e){const{domainStatus:t,featureAvailability:i}=e;return"invalid"===t?(0,N.jsx)(r().sA,{id:"sites.domains.domainStatusInvalid",defaultMessage:"Invalid"}):"payment_required"===t?i?(0,ze().N9)(i,{available:()=>(0,N.jsx)(r().sA,{id:"sites.domains.domainStatusPaymentRequired",defaultMessage:"Payment required"}),unavailable:()=>(0,N.jsx)(r().sA,{id:"sites.domains.domainStatusPaymentRequired.freeTier",defaultMessage:"Unavailable"})}):null:"active"===t?(0,N.jsx)(r().sA,{id:"sites.domains.domainStatusLive",defaultMessage:"Live"}):"certificate_pending"===t||"notion_dcv_pending"===t?(0,N.jsx)(r().sA,{id:"sites.domains.domainStatusPending",defaultMessage:"Pending"}):void(0,D().HB)(t)}function et(e){const{domainStatus:t,featureAvailability:i}=e,n=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",gap:4,width:"fit-content",paddingLeft:8,paddingRight:8,borderRadius:10,backgroundColor:Xe(t,e,100)},dot:{borderRadius:99,height:8,width:8,backgroundColor:Xe(t,e,500)}})),[t]);return(0,N.jsxs)("div",{style:n.container,children:[(0,N.jsx)("div",{style:n.dot}),(0,N.jsx)(Je,{domainStatus:t,featureAvailability:i})]})}var tt=()=>i(72970),it=()=>i(868325),nt=()=>i(80159);function st(){const e=(0,s().K8)((()=>{const e=b().A.getState();if(e.isOpen)return e}),[]);if(!e)return null;const{spaceId:t,domain:i}=e;return(0,N.jsx)(at,{spaceId:t,domain:i})}function at(e){const{spaceId:t,domain:i}=e,a=(0,S().v3)(),o=(0,r().tz)(),d=(0,s().K8)((()=>i.getDomainName()),[i]),[l,c]=(0,n.useState)(d),[u,m]=(0,n.useState)(void 0),p=l!==d,f=(0,n.useCallback)((async()=>{if(l&&p){const{error:e}=await T().zV({environment:a,spaceId:t,domainId:i.id,domainName:l});if(e)return void m((0,it().Hu)(o,e));T().yH("EditDomainNameSuccess",t,i)}}),[a,o,t,i,l,p]);return(0,N.jsx)(k().eh.Provider,{value:T().Uv,children:(0,N.jsx)(B().tf,{header:(0,N.jsx)(ot,{}),footer:(0,N.jsx)(dt,{isDisabled:!p,onClick:f}),children:(0,N.jsx)(nt().A,{domainName:l,setDomainName:c,domainType:"default",errorMessage:u})})})}function ot(){return(0,N.jsx)(B().YA,{iconAndTitle:(0,N.jsx)(B().ZQ,{iconGroup:tt().u,title:(0,N.jsx)(r().sA,{id:"sites.editDomain.title",defaultMessage:"Update existing domain"})}),description:(0,N.jsx)("div",{style:{paddingLeft:20,paddingRight:20},children:(0,N.jsx)(r().sA,{id:"sites.editDomain.subtitle",defaultMessage:"This change will apply to all the sites live on this domain"})})})}function dt(e){const{isDisabled:t,onClick:i}=e;return(0,N.jsx)(B().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,N.jsx)(r().sA,{id:"sites.editDomain.save",defaultMessage:"Save changes"}),isDisabled:t,onClick:i}],secondaryButtons:[{buttonType:"dismiss"}]})}var rt=()=>i(839996);function lt(){return(0,N.jsx)(k().eh.Provider,{value:T().Uv,children:(0,N.jsx)(B().tf,{header:(0,N.jsx)(ct,{}),footer:(0,N.jsx)(ut,{}),showDismissButton:!1})})}function ct(){return(0,N.jsx)(B().YA,{iconAndTitle:(0,N.jsx)(B().ZQ,{iconGroup:rt().g,title:(0,N.jsx)(r().sA,{id:"sites.editDomainSuccess.title",defaultMessage:"Successfully updated domain"})}),description:(0,N.jsx)(r().sA,{id:"sites.editDomainSuccess.subtitle",defaultMessage:"All sites published to this domain now use the new domain"})})}function ut(){return(0,N.jsx)(B().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,N.jsx)(r().sA,{id:"sites.newDefaultDomainSuccess.close",defaultMessage:"Done"}),isDisabled:!1,onClick:T().Uv}]})}function mt(){const e=(0,s().K8)((()=>{const e=b().A.getState();if(e.isOpen)return e}),[]);if(!e)return null;const{step:t}=e,i="EditDomainNameSuccess"===t;return(0,N.jsx)(C().s,{isOpen:!0,onDismiss:T().Uv,areaConstraint:{width:{type:"fixed",length:i?300:450}},render:()=>i?(0,N.jsx)(lt,{}):(0,N.jsx)(st,{}),animateSizeTransition:!i})}var pt=()=>i(169201),ft=()=>i(827744),gt=()=>i(975392),ht=(i(725707),i(771702),()=>i(162901)),xt=()=>i(668657),yt=()=>i(59175),vt=()=>i(443252),jt=()=>i(701513),bt=()=>i(782422),At=()=>i(515347),St=()=>i(466321),Dt=()=>i(40504);const Ct=3;function wt(e){const{domain:t,initialFocus:i,disabled:s,onSiteSelection:o,onResetInput:d}=e,[r,l]=(0,n.useState)(""),[c,u]=(0,n.useState)(!1),m=(0,a().IS)((()=>({resultsPopup:{width:250}})),[]),p=(0,n.useCallback)((e=>{o(e),u(!1)}),[o,u]),g=(0,n.useCallback)((()=>{u(!1)}),[u]),h=(0,n.useCallback)((()=>{c||d()}),[c,d]);return(0,N.jsx)(vt().Ay,{alignmentToOrigin:f().C.Start,origin:(0,N.jsx)(It,{initialFocus:i,disabled:s,query:r,setQuery:l,setShowResults:u,onBlurInput:h}),originGap:3,open:c,popupType:St().n.Popup,style:m.resultsPopup,render:()=>(0,N.jsx)(Tt,{query:r,onSelection:p,domain:t}),onDismiss:g,trapFocus:!1})}function It(e){const{initialFocus:t,disabled:i,query:s,setQuery:o,setShowResults:d,onBlurInput:c}=e,u=(0,r().tz)(),m=(0,a().IS)((e=>({input:{display:"flex",flex:1,paddingLeft:4},icon:{fill:e.mediumIconColor,width:12,height:12}})),[]),p=(0,n.useCallback)((e=>{o(e.target.value),d(!0)}),[o,d]),g=(0,n.useCallback)((()=>{d(!0)}),[d]),h=(0,n.useCallback)((e=>{"Escape"===e.key&&d(!1)}),[d]);return(0,N.jsx)(l().A,{disableTooltip:!i,renderTooltip:()=>(0,N.jsx)(r().sA,{id:"sites.siteSearchInput.noEditAccess",defaultMessage:"Only workspace owners can set up a homepage for a domain"}),placement:f().W.Bottom,render:e=>(0,N.jsx)("div",{...e,children:(0,N.jsx)(yt().A,{type:"text",focusInitial:t,disabled:i,onChange:p,onFocus:g,onBlur:c,onKeyDown:h,format:yt().C.Transparent,style:m.input,value:s,left:(0,xt().q)(m.icon),placeholder:u.formatMessage({id:"sites.siteSearchInput.placeholder",defaultMessage:"Select a page"})})})})}function Tt(e){const{query:t,onSelection:i,domain:n}=e,o=(0,S().v3)(),l=(0,a().IS)((()=>({loadingSpinner:{textAlign:"center",visibility:"visible",display:"inline",marginLeft:8}})),[]),[{value:u,status:m}]=(0,ht().Yb)((()=>Dt().l2(t,o)),[t,o]),p=(0,s().K8)((()=>{const e=(0,bt().ZO)();if(!e)return[];if("idle"===m||"pending"===m)return[{key:"results-loading-spinner",render:()=>(0,N.jsx)($().A,{style:l.loadingSpinner}),action:()=>{}}];if(!e||(!u||0===u.length)&&t.length>0)return[{key:"empty-results",render:()=>(0,N.jsx)(c().A,{isSmall:!0,style:{paddingLeft:8,paddingTop:4,paddingBottom:4},children:(0,N.jsx)(r().sA,{id:"sites.publicHomePageSearch.noResults",defaultMessage:"No sites found"})}),action:()=>{}}];const s=[];return null==u||u.forEach((t=>{const a=g().Bv.createChildStore(e,{table:d().ev,id:t.id}),o=At().UP(a);(o&&o===n.id||!o&&n.is_default)&&s.push({key:t.id,render:e=>(0,N.jsx)(jt().A,{store:a,...e}),action:()=>{i(t.id)}})})),0===s.length?[Mt(n)]:""===t?s.splice(0,Ct):s}),[u,i,n,l,m,t]);return(0,N.jsx)(ue().Ay,{type:ue().Oh.Vertical,sections:[{key:"sites-search-results",render:e=>(0,N.jsx)(pe().A,{...e}),items:p}],initialFocus:void 0})}function Mt(e){const t=y().MN({domainName:e.getDomainName()||"",domainType:e.getDomainType()});return{key:"empty-suggestions",render:()=>(0,N.jsx)(c().A,{isSmall:!0,isMultiline:!0,style:{paddingLeft:8,paddingTop:4,paddingBottom:4},children:(0,N.jsx)(r().sA,{id:"sites.publicHomePageSearch.noResultsForDomain",defaultMessage:"Publish a page with {domainName} to set a homepage",values:{domainName:t}})}),action:()=>{}}}function Bt(e){const{spaceId:t,domain:i,publicHomePageStore:o,disabled:d}=e,r=(0,S().v3)(),[l,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),p=(0,s().K8)((()=>{var e;return null===he().default||void 0===he().default||null===(e=he().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),f=(0,x()._X)({name:"sites_multiple_public_domains",spaceId:t,userId:p}),g=null==f?void 0:f.upsell,y=(0,a().IS)((()=>({record:{paddingRight:12},previewContainer:{display:"flex",paddingRight:12},upsellButton:{width:"fit-content"}})),[]),v=(0,n.useCallback)((async e=>{e.stopPropagation(),await T().$j({environment:r,spaceId:t,domainId:i.id,publicHomePageId:void 0,showErrorDialog:!0})}),[r,t,i]),j=(0,n.useCallback)((async e=>{e&&await T().$j({environment:r,spaceId:t,domainId:i.id,publicHomePageId:e,showErrorDialog:!0}),c(!1)}),[r,t,i,c]);return g&&"product"===g.type?(0,N.jsx)(h().B,{upsell:g,analyticsName:"public_domain_home_page",desktopStyle:y.upsellButton}):d?o?(0,N.jsx)(we().A,{store:o,style:y.record}):(0,N.jsx)(wt,{domain:i,initialFocus:!1,disabled:!0,onSiteSelection:gt().lQ,onResetInput:gt().lQ}):o&&!l?(0,N.jsxs)("div",{style:y.previewContainer,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[(0,N.jsx)(we().A,{store:o}),u&&(0,N.jsx)(kt,{onUpdateClick:()=>c(!0),onClearClick:v})]}):(0,N.jsx)(wt,{initialFocus:l,onResetInput:()=>c(!1),disabled:!1,onSiteSelection:j,domain:i})}function kt(e){const{onUpdateClick:t,onClearClick:i}=e,n=(0,a().IS)((()=>({actionIcon:{marginLeft:4}})),[]),s=(0,r().tz)(),o=s.formatMessage({id:"sites.publicHomePage.update",defaultMessage:"Update the homepage for the domain"}),d=s.formatMessage({id:"sites.publicHomePage.clear",defaultMessage:"Clear the homepage for the domain"});return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(l().A,{renderTooltip:()=>o,placement:f().W.Bottom,render:e=>(0,N.jsx)(He().A,{...e,icon:ft().r,ariaLabel:o,onClick:t,style:n.actionIcon})}),(0,N.jsx)(l().A,{renderTooltip:()=>d,placement:f().W.Bottom,render:e=>(0,N.jsx)(He().A,{...e,icon:pt().u,ariaLabel:d,onClick:i,style:n.actionIcon})})]})}i(491955);var Nt=()=>i(419817),Pt=()=>i(286404),Ot=()=>i(129978);const _t=new(Ot().O2)("NewDomainModal",(async()=>await i.e(40642).then(i.bind(i,702882)))),Rt=(0,Ot()._h)(_t,(e=>e.NewDomainModal));var Ht=()=>i(986271),Lt=()=>i(864861);function Ut(e){const{spaceStore:t}=e,i=(0,S().v3)(),n=(0,s().K8)((()=>t.userId),[t]),o=(0,s().K8)((()=>Lt().A.getState().isOpen),[]),d=(0,s().K8)((()=>t.canAdmin()),[t]),c=(0,x().P9)({name:"sites_multiple_public_domains",spaceId:t.id,userId:n}),{defaultDomainsCount:u,customDomainsCount:m}=(0,s().K8)((()=>{const e=y().u8(t);return{defaultDomainsCount:e.filter((e=>"default"===e.domain_type)).length,customDomainsCount:e.filter((e=>"custom"===e.domain_type)).length}}),[t]),p=(0,Ht().V)(t),g=u>=p&&m>=Nt().nK,h=!d||!c||g,v=(0,a().IS)((()=>({newDomainButton:{paddingTop:5,paddingBottom:5,paddingLeft:12,paddingRight:12}})),[]),j=d?c?(0,N.jsx)(r().sA,{id:"sites.createDomain.maxDomainsCreated",defaultMessage:"Only {maximumDomains} domains allowed for this workspace",values:{maximumDomains:p+Nt().nK}}):(0,N.jsx)(r().sA,{id:"sites.createDomain.freeTier",defaultMessage:"Upgrade your plan to create more domains for your workspace"}):(0,N.jsx)(r().sA,{id:"sites.createDomain.noCreateAccess",defaultMessage:"Only workspace owners can create a domain"});return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(l().A,{disableTooltip:!h,renderTooltip:()=>j,placement:f().W.Bottom,render:e=>(0,N.jsx)(Pt().A,{...e,onClick:()=>{T().qb("SelectDomainType"),(0,We().W2)(i)},disabled:h,style:v.newDomainButton,children:(0,N.jsx)(r().sA,{id:"sites.createDomain.new",defaultMessage:"New domain"})})}),o&&(0,N.jsx)(Rt,{spaceStore:t})]})}var Vt=()=>i(486826),Kt=()=>i(553783);function Wt(){const e=(0,s().K8)((()=>A().A.getState()),[]),{isOpen:t,spaceId:i,domain:n}=e;return t?(0,N.jsx)(Ft,{spaceId:i,domain:n}):null}function Ft(e){const{spaceId:t,domain:i}=e,a=(0,S().v3)(),{domainId:o,domainName:d}=(0,s().K8)((()=>({domainId:i.id,domainName:i.getDomainName()})),[i]),[r,l]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(o&&r){const e=Vt().c9.now();T().hS({environment:a,domainId:o,spaceId:t,poll:!0}).then((t=>{t.error?l(!0):"active"===t.domainStatus?(T().Ko("DomainValidatedSuccess"),(0,We().Aw)(a,{type:"sync",duration_in_milliseconds:-e.diffNow().toMillis()})):(T().Ko("DomainPendingSuccess"),(0,We().Aw)(a,{type:"async",duration_in_milliseconds:-e.diffNow().toMillis()}))}))}}),[a,t,o,r]);const c=(0,n.useCallback)((()=>{o&&l(!0)}),[o,l]),u=(0,n.useCallback)((()=>{r&&(0,We().NS)(a),T()._p()}),[a,r]);return(0,N.jsx)(k().eh.Provider,{value:u,children:(0,N.jsx)(B().tf,{header:(0,N.jsx)(Gt,{}),footer:(0,N.jsx)(Et,{onClick:c,validationInProgress:r}),children:(0,N.jsx)(Kt().A,{spaceId:t,domainId:o,domainName:d})})})}function Gt(){return(0,N.jsx)(B().YA,{iconAndTitle:(0,N.jsx)(B().ZQ,{iconGroup:H().n,title:(0,N.jsx)(r().sA,{id:"sites.newCustomDomain.title",defaultMessage:"Connect new domain"})}),description:(0,N.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.subtitle",defaultMessage:"You can also find these instructions in our <helpCenterLink>help center</helpCenterLink>",values:{helpCenterLink:e=>(0,N.jsx)(V().A,{external:!0,href:"https://www.notion.so/help/connect-a-custom-domain-with-notion-sites",children:e})}})})}function Et(e){const{onClick:t,validationInProgress:i}=e;return(0,N.jsx)(B().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:i?(0,N.jsx)(r().sA,{id:"sites.validateCustomDomain.verifying",defaultMessage:"Verifying..."}):(0,N.jsx)(r().sA,{id:"sites.validateCustomDomain.verify",defaultMessage:"Verify"}),isDisabled:i,onClick:t}]})}function qt(){return(0,N.jsx)(k().eh.Provider,{value:T()._p,children:(0,N.jsx)(B().tf,{header:(0,N.jsx)(Yt,{}),footer:(0,N.jsx)(Qt,{}),showDismissButton:!1})})}function Yt(){return(0,N.jsx)(B().YA,{iconAndTitle:(0,N.jsx)(B().ZQ,{iconGroup:rt().g,title:(0,N.jsx)(r().sA,{id:"sites.customHostnameValdation.title",defaultMessage:"It's taking a while to verify"})}),description:(0,N.jsx)(r().sA,{id:"sites.customHostnameValdation.subtitle",defaultMessage:"Please check in ~10 mins to see if the domain is ready for publishing"})})}function Qt(){return(0,N.jsx)(B().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,N.jsx)(r().sA,{id:"sites.newCustomDomainSuccess.close",defaultMessage:"Done"}),isDisabled:!1,onClick:T()._p}]})}function $t(){return(0,N.jsx)(k().eh.Provider,{value:T()._p,children:(0,N.jsx)(B().tf,{header:(0,N.jsx)(Zt,{}),footer:(0,N.jsx)(zt,{}),showDismissButton:!1})})}function Zt(){const e=(0,s().K8)((()=>{const{domain:e}=A().A.state;return null==e?void 0:e.getDomainName()}),[]);return(0,N.jsx)(B().YA,{iconAndTitle:(0,N.jsx)(B().ZQ,{iconGroup:rt().g,title:(0,N.jsx)(r().sA,{id:"sites.newCustomDomainValidatedSuccess.title",defaultMessage:"Successfully verified"})}),description:e?(0,N.jsx)(r().sA,{id:"sites.success.subtitle",defaultMessage:"You can now use {domainName} to publish sites",values:{domainName:y().MN({domainName:e,domainType:"custom"})}}):(0,N.jsx)(r().sA,{id:"sites.success.subtitle.subtitleWithoutDomainName",defaultMessage:"You can now use the domain to publish sites"})})}function zt(){return(0,N.jsx)(B().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,N.jsx)(r().sA,{id:"sites.newCustomDomainSuccess.close",defaultMessage:"Done"}),isDisabled:!1,onClick:T()._p}]})}function Xt(){const e=(0,s().K8)((()=>A().A.getState()),[]);if(!e.isOpen)return null;const{step:t}=e,i="DomainValidating"!==t;return(0,N.jsx)(C().s,{isOpen:!0,onDismiss:T()._p,areaConstraint:{width:{type:"fixed",length:i?300:450}},render:()=>"DomainValidating"===t?(0,N.jsx)(Wt,{}):"DomainPendingSuccess"===t?(0,N.jsx)(qt,{}):"DomainValidatedSuccess"===t?(0,N.jsx)($t,{}):void(0,D().HB)(t),animateSizeTransition:!i})}const Jt=[{key:"name",header:(0,N.jsx)(r().sA,{id:"sites.domains.domainColumnHeader",defaultMessage:"Domain"}),style:{width:"41%"}},{key:"home-page",header:(0,N.jsx)(r().sA,{id:"sites.domains.homePageColumnHeader",defaultMessage:"Homepage"}),style:{width:"35%",padding:"3px 5px"}},{key:"status",header:(0,N.jsx)(r().sA,{id:"sites.domains.statusColumnHeader",defaultMessage:"Status"}),style:{width:"20%"}},{key:"edit",header:(0,N.jsx)(N.Fragment,{}),style:{width:"4%"}}];function ei(e){const{spaceStore:t}=e,i=(0,s().K8)((()=>t.userId),[t]),n=(0,x()._X)({name:"sites_multiple_public_domains",spaceId:t.id,userId:i}),S=null==n?void 0:n.upsell,D=(0,a().IS)((()=>({header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,gap:8,overflow:"hidden"},title:{display:"flex",flexDirection:"column",flex:"1 1",overflow:"hidden",fontSize:16},tableBox:{tableLayout:"fixed"},cell:{paddingRight:12,height:44}})),[]),C=function(e){const t=(0,s().K8)((()=>y().$o(e)),[e]),i=(0,a().IS)((e=>({domainNameContainer:{display:"flex",alignItems:"center",gap:4},defaultDomainIcon:{height:12,width:12,color:e.lightIconColor}})),[]),n=(0,s().K8)((()=>e.userId),[e]),c=(0,x()._X)({name:"sites_multiple_public_domains",spaceId:e.id,userId:n}),u=(0,s().K8)((()=>{const n=e.canAdmin();return t.map((t=>{const s=t.id,a=t.getDomainName(),u=t.getDomainStatus(),m=t.isDefault(),p=t.getPublicHomePage(),h=p?g().Bv.createChildStore(e,{table:d().ev,id:p}):void 0;return{key:a,columns:[(0,N.jsxs)("div",{style:i.domainNameContainer,children:[(0,N.jsx)(Ze,{spaceStore:e,domainId:t.id}),m?(0,N.jsx)(l().A,{renderTooltip:()=>(0,N.jsx)(r().sA,{id:"sites.domains.defaultDomainTooltip",defaultMessage:"Default domain"}),render:e=>(0,N.jsx)("div",{...e,children:(0,o().M)(i.defaultDomainIcon)}),placement:f().W.Bottom}):null]},`${s}`),(0,N.jsx)(Bt,{spaceId:e.id,domain:t,publicHomePageStore:h,disabled:!n},`${s}-home-page`),(0,N.jsx)(et,{featureAvailability:c,domainStatus:u},`${s}-status`),(0,N.jsx)($e,{spaceId:e.id,domain:t,disabled:!n},`${s}-actions`)]}}))}),[e,t,i,c]);return u}(t),w=(0,s().K8)((()=>b().A.getState().isOpen),[]),I=(0,s().K8)((()=>A().A.getState().isOpen),[]),T=(0,s().K8)((()=>j().A.getState().isOpen),[]),M=(0,s().K8)((()=>v().A.getState().isOpen),[]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(m().A,{style:D.header,children:[(0,N.jsxs)("div",{style:D.title,children:[(0,N.jsx)(r().sA,{id:"sites.domains.title",defaultMessage:"Domains"}),S&&"product"===S.type?(0,N.jsxs)(u().Ye,{gap:8,style:{marginRight:32},children:[(0,N.jsx)(c().A,{isSmall:!0,isMultiline:!0,children:(0,N.jsx)(r().sA,{id:"sites.domains.captionForFreeTier",defaultMessage:"Pages published to the web will be live under the domain below. Get multiple domains"})}),(0,N.jsx)(h().B,{upsell:S,analyticsName:"get_multiple_domains"})]}):(0,N.jsx)(c().A,{isSmall:!0,children:(0,N.jsx)(r().sA,{id:"sites.domains.captionForPaidTier",defaultMessage:"Pages published to the web will be live on one of these domains"})})]}),(0,N.jsx)(Ut,{spaceStore:t})]}),(0,N.jsx)(p().A,{columns:Jt,rows:C,tableStyle:D.tableBox,cellStyle:D.cell}),w&&(0,N.jsx)(mt,{}),I&&(0,N.jsx)(Xt,{}),T&&(0,N.jsx)(Oe,{}),M&&(0,N.jsx)(X,{spaceStore:t})]})}},986271:(e,t,i)=>{i.d(t,{V:()=>a});var n=()=>i(803290),s=()=>i(455831);function a(e){return(0,n().K8)((()=>{const t=e.getSubscriptionTier();return s().ZC(t)}),[e])}}}]);